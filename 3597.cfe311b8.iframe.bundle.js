"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[3597],{"./node_modules/@arcgis/core/smartMapping/statistics/support/statsWorker.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{classBreaks:()=>statsWorker_v,heatmapStatistics:()=>statsWorker_z,histogram:()=>c,summaryStatistics:()=>d,uniqueValues:()=>p});__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/core/Error.js");var maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),quantizationUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/quantizationUtils.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),heatmapUtils=(__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),__webpack_require__("./node_modules/@arcgis/core/renderers/support/heatmapUtils.js")),utils=__webpack_require__("./node_modules/@arcgis/core/statistics/utils.js"),arcadeOnDemand=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");let y=null;async function j(e,t){if(!t)return[];const{field:n,field2:r,field3:o,fieldDelimiter:s}=e,l=e.valueExpression,a=e.normalizationType,u=e.normalizationField,f=e.normalizationTotal,c=[],h=e.viewInfoParams;let $=null,I=null;if(l){if(!y){const{arcadeUtils:e}=await(0,arcadeOnDemand.LC)();y=e}$=y.createFunction(l),I=h&&y.getViewInfo({viewingMode:h.viewingMode,scale:h.scale,spatialReference:new SpatialReference.Z(h.spatialReference)})}const g=e.fieldInfos,j=t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass||!g?null:{fields:g};return t.forEach((e=>{const t=e.attributes;let i;if(l){const t=j?{...e,layer:j}:e,n=y.createExecContext(t,I);i=y.executeFunction($,n)}else t&&(i=t[n],r&&(i=`${(0,utils.wk)(i)}${s}${(0,utils.wk)(t[r])}`,o&&(i=`${i}${s}${(0,utils.wk)(t[o])}`)));if(a&&"number"==typeof i&&isFinite(i)){const e=t&&parseFloat(t[u]);i=(0,utils.fk)(i,a,e,f)}c.push(i)})),c}async function d(i){const{attribute:e,features:s}=i,{normalizationType:r,normalizationField:m,minValue:f,maxValue:u,fieldType:d}=e,p=await j({field:e.field,valueExpression:e.valueExpression,normalizationType:r,normalizationField:m,normalizationTotal:e.normalizationTotal,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},s),v=(0,utils.S5)({normalizationType:r,normalizationField:m,minValue:f,maxValue:u}),c={value:.5,fieldType:d},z="esriFieldTypeString"===d?(0,utils.H0)({values:p,supportsNullCount:v,percentileParams:c}):(0,utils.i5)({values:p,minValue:f,maxValue:u,useSampleStdDev:!r,supportsNullCount:v,percentileParams:c});return(0,utils.F_)(z,"esriFieldTypeDate"===d)}async function p(i){const{attribute:e,features:n}=i,l=await j({field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:e.valueExpression,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),t=(0,utils.eT)(l);return(0,utils.Qm)(t,e.domains,e.returnAllCodedValues,e.fieldDelimiter)}async function statsWorker_v(i){const{attribute:e,features:n}=i,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r}=e,u=await j({field:l,valueExpression:e.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),d=(0,utils.G2)(u,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numClasses:e.numClasses,minValue:e.minValue,maxValue:e.maxValue});return(0,utils.DL)(d,r)}async function c(i){const{attribute:e,features:n}=i,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r}=e,m=await j({field:l,valueExpression:e.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n);return(0,utils.oF)(m,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numBins:e.numBins,minValue:e.minValue,maxValue:e.maxValue})}async function statsWorker_z(a){const{attribute:n,features:l}=a,{field:t,radius:o,fieldOffset:s,transform:r,spatialReference:m,size:f}=n,u=function I(e,n,r,i){const a=(0,spatialReferenceUtils.MP)(r)?(0,spatialReferenceUtils.C5)(r):null,u=a?Math.round((a.valid[1]-a.valid[0])/n.scale[0]):null;return e.map((e=>{const r=new Point.Z((0,maybe.Wg)(e.geometry));return(0,quantizationUtils.RF)(n,r,r,r.hasZ,r.hasM),e.geometry=a?function $(e,t,n){return e.x<0?e.x+=t:e.x>n&&(e.x-=t),e}(r,u,i[0]):r,e}))}(l,r,m,f),{count:d,min:p,max:v,mean:c,stdDev:z}=function g(e,t=18,n,i,o,s){const l=new Float64Array(o*s);t=Math.round((0,screenUtils.F2)(t));let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,m=0,d=0,p=0,h=0;const y=(0,heatmapUtils.wx)(i,n);for(const{geometry:r,attributes:c}of e){const{x:e,y:n}=r,i=Math.max(0,e-t),$=Math.max(0,n-t),I=Math.min(s,n+t),g=Math.min(o,e+t),j=+y(c);for(let r=$;r<I;r++)for(let s=i;s<g;s++){const i=r*o+s,c=(0,heatmapUtils.If)(s-e,r-n,t),y=l[i];m=l[i]+=c*j;const $=m-y;d+=$,p+=$*$,m<a&&(a=m),m>u&&(u=m),h++}}if(!h)return{mean:0,stddev:0,min:0,max:0,mid:0,count:0};const $=(u-a)/2;return{mean:d/h,stdDev:Math.sqrt((p-d*d/h)/h),min:a,max:u,mid:$,count:h}}(u,o,s,t,f[0],f[1]);return{count:d,min:p,max:v,avg:c,stddev:z}}}}]);