"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[10196],{"./node_modules/@arcgis/core/chunks/vec32.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>n,b:()=>f,c:()=>t,d:()=>i,e:()=>o,n:()=>s,s:()=>u,t:()=>r});var _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/buffer/math/common.js");function t(e,t,f){r(e.typedBuffer,t.typedBuffer,f,e.typedBufferStride,t.typedBufferStride)}function r(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__._.error("source and destination buffers need to have the same number of elements"),t;const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[4],c=f[5],l=f[6],p=f[8],y=f[9],h=f[10],m=f[12],B=f[13],g=f[14];let S=0,M=0;for(let e=0;e<u;e++){const e=r[S],f=r[S+1],u=r[S+2];t[M]=i*e+d*f+p*u+m,t[M+1]=s*e+c*f+y*u+B,t[M+2]=a*e+l*f+h*u+g,S+=o,M+=n}return t}function f(e,t,r){n(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function n(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__._.error("source and destination buffers need to have the same number of elements");const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[3],c=f[4],l=f[5],p=f[6],y=f[7],h=f[8];let m=0,B=0;for(let e=0;e<u;e++){const e=r[m],f=r[m+1],u=r[m+2];t[B]=i*e+d*f+p*u,t[B+1]=s*e+c*f+y*u,t[B+2]=a*e+l*f+h*u,m+=o,B+=n}}function o(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r,f=3){const n=Math.min(e.length/f,t.count),o=t.typedBuffer,u=t.typedBufferStride;let i=0,s=0;for(let a=0;a<n;a++)e[s]=r*o[i],e[s+1]=r*o[i+1],e[s+2]=r*o[i+2],i+=u,s+=f}function i(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=3,f=r){const n=Math.min(e.length/r,t.length/f);let o=0,u=0;for(let i=0;i<n;i++){const n=t[o],i=t[o+1],s=t[o+2],a=n*n+i*i+s*s;if(a>0){const t=1/Math.sqrt(a);e[u]=t*n,e[u+1]=t*i,e[u+2]=t*s}o+=f,u+=r}}Object.freeze(Object.defineProperty({__proto__:null,normalize:s,normalizeView:i,scale:u,scaleView:o,shiftRight:function a(e,t,r){const f=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,i=t.typedBufferStride;let s=0,a=0;for(let d=0;d<f;d++)n[a]=u[s]>>r,n[a+1]=u[s+1]>>r,n[a+2]=u[s+2]>>r,s+=i,a+=o},transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:t},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>L});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/localRotationUtils.js"),_projectors_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectors.js"),_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function L(r,n,L,m){if(null==r||null==m)return!1;const p=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Se)(r,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Wy),P=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Se)(m,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.mq);if(p===P&&!_(P)&&(p!==_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.UNKNOWN||(0,_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.yK)(r,m)))return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.d)(L,n),!0;if(_(P)){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[p][_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT],t=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT][P];return null!=r&&null!=t&&(r(n,0,e,0),t(e,0,f,0),(0,_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__.e)(c*e[0],c*e[1],L),L[12]=f[0],L[13]=f[1],L[14]=f[2],!0)}if((P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WEB_MERCATOR||P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.PLATE_CARREE)&&(p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WGS84||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.CGCS2000&&P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.PLATE_CARREE||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WEB_MERCATOR)){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[p][_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT],t=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT][P];return null!=r&&null!=t&&(r(n,0,e,0),t(e,0,f,0),p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF?(0,_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__.i)(c*e[0],c*e[1],L):(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.g)(L),L[12]=f[0],L[13]=f[1],L[14]=f[2],!0)}return!1}function _(r){return r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF||r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_MARS_PCPF||r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_MOON_PCPF}const c=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.EF)(1),e=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),f=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/geometry/projection/localRotationUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>n,i:()=>o});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js");function n(t,n,o){const s=Math.sin(t),r=Math.cos(t),a=Math.sin(n),c=Math.cos(n),h=o;return h[0]=-s,h[4]=-a*r,h[8]=c*r,h[12]=0,h[1]=r,h[5]=-a*s,h[9]=c*s,h[13]=0,h[2]=0,h[6]=c,h[10]=a,h[14]=0,h[3]=0,h[7]=0,h[11]=0,h[15]=1,h}function o(o,s,r){return n(o,s,r),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.t)(r,r),r}},"./node_modules/@arcgis/core/geometry/support/DoubleArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gg:()=>t,cp:()=>e,lL:()=>a,mw:()=>o,qW:()=>y});var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js");function t(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__._?t?new Array(n).fill(0):new Array(n):new Float64Array(n)}function e(t){return((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.c7)(t)?t.length:t.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__._?Array.from(t):new Float64Array(t)}function a(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}function o(r,n){for(let t=0;t<n.length;++t)r[t]=n[t];return r}function y(r){return Array.isArray(r)?new Float64Array(r):r}},"./node_modules/@arcgis/core/geometry/support/MeshTransform.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>N});var v,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js");let b=v=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.am{constructor(t){super(t),this.translation=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)(),this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.e)(_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.up),this.rotationAngle=0,this.scale=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.f)(1,1,1)}get rotation(){return(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.eE)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)((0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.Yz)(t)),this.rotationAngle=(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.i4)(t)}get localMatrix(){const t=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)();return(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__.s)(M,(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.Yz)(this.rotation),(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.kX)(this.rotation)),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.f)(t,M,this.translation,this.scale),t}get localMatrixInverse(){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.i)((0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)(),this.localMatrix)}applyLocal(t,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrix)}applyLocalInverse(t,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrixInverse)}equals(t){return this===t||null!=t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.e)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.translation),rotationAxis:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.scale)};return new v(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"translation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAxis",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAngle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"scale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"rotation",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"localMatrix",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"localMatrixInverse",null),b=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.c)("esri.geometry.support.MeshTransform")],b);const M=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__.a)(),N=b},"./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GA:()=>g,Jn:()=>U,Su:()=>h,Yz:()=>l,eE:()=>q,i4:()=>x,i_:()=>v,kX:()=>w,up:()=>z});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");function h(n=z){return[n[0],n[1],n[2],n[3]]}function q(n,r,t=h()){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(t,n),t[3]=r,t}function v(n,r,t=h()){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,n,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(t,t),t[3]=-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.d)(n,r),t}function U(r,s,c=h()){return(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(A,r,w(r)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(B,s,w(s)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.m)(A,B,A),function y(n,r){return n[3]=r,n}(c,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.UB)((0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.g)(c,A)))}function g(n,r,t,u=h()){return q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.U,n,D),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.b,r,E),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.d,t,F),U(D,E,D),U(D,F,u),u}function l(n){return n}function x(n){return n[3]}function w(n){return(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.EF)(n[3])}const z=[0,0,1,0],A=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),B=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),D=(h(),h()),E=h(),F=h()},"./node_modules/@arcgis/core/geometry/support/buffer/math/common.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>e});const e=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js").c.getLogger("esri.views.3d.support.buffer.math")},"./node_modules/@arcgis/core/geometry/support/meshUtils/External.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CT:()=>A,Ki:()=>N,Si:()=>i,Ud:()=>u,_o:()=>y,ai:()=>o,mK:()=>v,v_:()=>h});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/support/infoFor3D.js");class i{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.yK)(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.wp)(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.partUrl,{responseType:"blob"});return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.wp)(r),s}}function u(t){return function p(t){if(!t)return!1;if(Array.isArray(t))return t.some(m);return m(t)}(t?.source)}function c(t){return!!Array.isArray(t)&&t.every((t=>t instanceof i))}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function m(t){if(t instanceof File){const{type:r,name:e}=t;return f.test(r)||l.test(e)}return f.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:e}=t;return function g(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>b(t,r)))}return b(t,r)}(e,r)}function y(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(c(e)&&c(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.K0)(t,r):(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.me)(t.assetMimeType,r)??(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.If)(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}},"./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>e});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js");function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.w7)(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.aw)(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.Uv)(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)M[t]===b&&(o(h,(d?A[t]:t)*s,C,b*s,s),b++);if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.Uv)(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null},"./node_modules/@arcgis/core/geometry/support/triangulationUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Af:()=>u,C6:()=>g,yw:()=>f});var u,n,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/earcut.js"),_Axis_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"),_views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js");function f(t){const e=g(t.rings,t.hasZ,u.CCW_IS_HOLE,t.spatialReference),s=new Array;let c=0,f=0;for(const r of e.polygons){const t=r.count,l=r.index,h=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.lL)(e.position,3*l,3*t),g=r.holeIndices.map((n=>n-l)),a=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__.Uv)((0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__.e)(h,g,3));s.push({position:h,faces:a}),c+=h.length,f+=a.length}const a=function h(n,t,e){if(1===n.length)return n[0];const o=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.Gg)(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__.Uv)(r)}}(s,c,f),p=Array.isArray(a.position)?(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__.g)(a.position,3,{originalIndices:a.faces}):(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__.g)(a.position.buffer,6,{originalIndices:a.faces});return a.position=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.cp)(new Float64Array(p.buffer)),a.faces=p.indices,a}function g(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0,h=0,g=0,d=0;for(let s=0;s<r;++s)d+=n[s].length;const m=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.Gg)(3*d);let y=0;for(let s=r-1;s>=0;s--){const d=n[s],A=e===u.CCW_IS_HOLE&&p(d,t,o);if(A&&1!==r)i[f++]=d;else{let n=d.length;for(let t=0;t<f;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:y,count:d.length}),y=A?a(d,d.length-1,-1,m,y,d.length,t):a(d,0,1,m,y,d.length,t);for(let o=0;o<f;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}f=0,e.count>0&&(l[h++]=e)}}for(let s=0;s<f;++s){const n=i[s];n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}return l.length=h,c.length=g,{position:m,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e}return r/3}function p(n,o,r){if(o){const o=n.length-1,s=(0,_views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__.ey)(n,o,r);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Z);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Z)}return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y)}(n=u||(u={}))[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE"},"./node_modules/@arcgis/core/rest/support/meshFeatureSet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{assetMapFromAssetMapsJSON:()=>meshFeatureSet_M,extractMesh:()=>meshFeatureSet_S,meshFeatureSetFromJSON:()=>meshFeatureSet_y});var Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),MapUtils=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),core_Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),core_Promise=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Geometry=__webpack_require__("./node_modules/@arcgis/core/geometry/Geometry.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),axisAngleDegrees=__webpack_require__("./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js"),MeshComponent=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshComponent.js");class meshErrors_e extends core_Error.c{constructor(){super("mesh-not-loaded","Mesh must be loaded before applying operations")}}class t extends core_Error.c{constructor(){super("component-not-found","Provided component is not part of the list of components")}}class n extends core_Error.c{constructor(){super("invalid-polygon","expected polygon to be a Polygon instance")}}class s extends core_Error.c{constructor(){super("invalid-input:location","Expected location to be a Point instance")}}class meshErrors_r extends core_Error.c{constructor(){super("invalid-input:no-layer","A layer is needed to convert the files")}}class meshErrors_c extends core_Error.c{constructor(){super("invalid-input:no-model","No supported model found")}}class l extends core_Error.c{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}var MeshGeoreferencedRelativeVertexSpace=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js"),MeshGeoreferencedVertexSpace=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedVertexSpace.js"),MeshLocalVertexSpace=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshLocalVertexSpace.js"),MeshTransform=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshTransform.js"),MeshVertexAttributes=__webpack_require__("./node_modules/@arcgis/core/geometry/support/MeshVertexAttributes.js"),triangulationUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/triangulationUtils.js"),georeference=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/georeference.js");let a=null;function m(n,e){let a=1/0,m=1/0,i=1/0,o=-1/0,r=-1/0,x=-1/0;const s=n.length;let c=0;for(;c<s;){const t=n[c++],e=n[c++],s=n[c++];a=Math.min(a,t),m=Math.min(m,e),i=Math.min(i,s),o=Math.max(o,t),r=Math.max(r,e),x=Math.max(x,s)}return new Extent.c({xmin:a,ymin:m,zmin:i,xmax:o,ymax:r,zmax:x,spatialReference:e})}var vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),projectPointToVector=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectPointToVector.js"),geographicUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/geographicUtils.js");const p="esri.geometry.support.meshUtils.centerAt";function centerAt_l(e,t,i){if(!e.vertexAttributes?.position)return;const{vertexSpace:r}=e,o=i?.origin??e.origin;r.isRelative?((0,geographicUtils.j)(r,p,i),function f(n,s,a){const{vertexSpace:c}=n;if(!c.isRelative)return;const l=u,f=j;if(!(0,projectPointToVector.M)(s,f,n.spatialReference))return void Logger.c.getLogger(p).error(`Failed to project centerAt location (wkid:${s.spatialReference.wkid}) to mesh spatial reference (wkid:${n.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!(0,projectPointToVector.M)(a,l,n.spatialReference)){const t=n.origin;l[0]=t.x,l[1]=t.y,l[2]=t.z,Logger.c.getLogger(p).error(`Failed to project specified origin (wkid:${a.spatialReference.wkid}) to mesh spatial reference (wkid:${n.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const g=(0,vec3.f)(k,f,l),d=c.origin;c.origin=(0,vec3.g)((0,vec3f64.c)(),d,g)}(e,t,o)):(0,geographicUtils.C)(e.spatialReference,i)?function g(e,t,i){const r=(0,georeference.eG)(e.vertexAttributes,i,{geographic:!0}),{position:o,normal:n,tangent:s}=(0,georeference.rG)(r,t,{geographic:!0});e.vertexAttributes.position=o,e.vertexAttributes.normal=n,e.vertexAttributes.tangent=s,e.vertexAttributesChanged()}(e,t,o):function d(t,i,r){const n=u,s=j;if((0,projectPointToVector.M)(i,s,t.spatialReference)){if(!(0,projectPointToVector.M)(r,n,t.spatialReference)){const i=t.origin;n[0]=i.x,n[1]=i.y,n[2]=i.z,Logger.c.getLogger(p).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function centerAt_m(e,t,i){if(e)for(let r=0;r<e.length;r+=3)for(let o=0;o<3;o++)e[r+o]+=t[o]-i[o]})(t.vertexAttributes.position,s,n),t.vertexAttributesChanged()}else Logger.c.getLogger(p).error(`Failed to project centerAt location (wkid:${i.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(e,t,o)}const j=(0,vec3f64.c)(),u=(0,vec3f64.c)(),k=(0,vec3f64.c)();__webpack_require__("./node_modules/@arcgis/core/assets.js"),__webpack_require__("./node_modules/@arcgis/core/request.js");var urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");async function c(e,r,o){const{source:n}=r,{loadGLTFMesh:i}=await(0,promiseUtils.Yv)(Promise.all([__webpack_require__.e(60624),__webpack_require__.e(53056)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js")),o),a=await async function loadExternal_m(t,s){if(Array.isArray(t)){if(!t.length)throw new core_Error.c("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?function h(e){return loadExternal_j(e.map((e=>({name:e.name,mimeType:e.type,source:loadExternal_p(e)}))))}(t):async function w(e,t){const i=await(0,promiseUtils.Y3)(e.map((async e=>{const r=await async function loadExternal_f(e,t){const{parts:r,assetMimeType:o,assetName:n}=e;if(1===r.length)return new T(r[0].partUrl);const i=await e.toBlob(t);return(0,promiseUtils.wp)(t),T.fromBlob(i,v(n,o))}(e);return(0,promiseUtils.wp)(t),{name:e.assetName,mimeType:e.assetMimeType,source:r}})));if((0,promiseUtils.wv)(t))throw i.forEach((e=>e.source.dispose())),(0,promiseUtils.Uh)();return loadExternal_j(i)}(t,s)}return loadExternal_p(t)}(n,o);(0,promiseUtils.wp)(o);const c=i(new Point.c({x:0,y:0,z:0,spatialReference:e.spatialReference}),a.url,{resolveFile:loadExternal_u(a),requestFile:void 0,useTransform:!0,signal:o?.signal,expectedType:a.type});c.then((()=>a.dispose()),(()=>a.dispose()));const{vertexAttributes:f,components:p}=await c;e.vertexAttributes=f,e.components=p}function loadExternal_u(e){const t=(0,urlUtils.iu)(e.url);return s=>{const r=(0,urlUtils.SU)(s,t,t),o=r?r.replace(/^ *\.\//,""):null;return(o?e.files.get(o):null)??s}}function loadExternal_p(e){return T.fromBlob(e,v(e.name,e.type))}const y=/^model\/gltf\+json$/,loadExternal_d=/^model\/gltf-binary$/,loadExternal_g=/\.gltf$/i,b=/\.glb$/i;function loadExternal_j(t){const s=new Map;let r,o=null;for(const{name:e,mimeType:n,source:i}of t)null===o&&(y.test(n)||loadExternal_g.test(e)?(o=i.url,r="gltf"):(loadExternal_d.test(n)||b.test(e))&&(o=i.url,r="glb")),s.set(e,i.url),i.files.forEach(((e,t)=>s.set(t,e)));if(null==o)throw new core_Error.c("mesh-load-external:missing-files","Missing files to load external mesh source");return new T(o,(()=>t.forEach((({source:e})=>e.dispose()))),s,r)}class T{constructor(e,t=(()=>{}),s=new Map,r){this.url=e,this.dispose=t,this.files=s,this.type=r}static fromBlob(e,t){const s=URL.createObjectURL(e);return new T(s,(()=>URL.revokeObjectURL(s)),void 0,t)}}function v(e,t){return y.test(t)||loadExternal_g.test(e)?"gltf":loadExternal_d.test(t)||loadExternal_g.test(e)?"glb":void 0}var Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),External=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/External.js");let Metadata_a=class extends Clonable.m{constructor(){super(),this.externalSources=new Collection.c,this._explicitDisplaySource=null,this.addHandles((0,reactiveUtils.on)((()=>this.externalSources),"after-remove",(({item:e})=>{e===this._explicitDisplaySource&&(this._explicitDisplaySource=null)}),{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(e){if(null!=e&&!(0,External.Ud)(e))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=e,e&&this.externalSources.every((r=>!(0,External._o)(r,e)))&&this.externalSources.add(e)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(e){return this.externalSources.items.filter((r=>(0,External.v_)(r,e)))}get _implicitDisplaySource(){return this.externalSources.find(External.Ud)}};(0,tslib_es6._)([(0,property.qq)()],Metadata_a.prototype,"externalSources",void 0),(0,tslib_es6._)([(0,property.qq)()],Metadata_a.prototype,"displaySource",null),(0,tslib_es6._)([(0,property.qq)()],Metadata_a.prototype,"_implicitDisplaySource",null),(0,tslib_es6._)([(0,property.qq)()],Metadata_a.prototype,"_explicitDisplaySource",void 0),Metadata_a=(0,tslib_es6._)([(0,subclass.c)("esri.geometry.support.meshUtils.Metadata")],Metadata_a);var mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),spatialReferenceEllipsoidUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js"),computeTranslationToOriginAndRotation=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/projection.js");function offset_v(t,e,n){if(!t.vertexAttributes?.position)return;const{vertexSpace:r}=t;r.isRelative?((0,geographicUtils.j)(r,"esri.geometry.support.meshUtils.offset",n),function x(t,e){const n=t.origin;t.origin=(0,vec3.g)((0,vec3f64.c)(),n,e)}(r,e)):(0,geographicUtils.C)(t.spatialReference,n)?function A(e,n){const r=e.spatialReference,i=e.vertexAttributes.position,a=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,j=new Float64Array(i.length),v=null!=a?new Float32Array(a.length):null,x=null!=u?new Float32Array(u.length):null,A=e.extent.center,b=offset_y;(0,computeTranslationToOriginAndRotation.y)(r,[A.x,A.y,A.z],R,(0,spatialReferenceEllipsoidUtils._s)(r)),(0,mat3.f)(offset_d,R),(0,vec3.t)(b,n,offset_d),(0,projection.K_)(i,r,j),null!=a&&null!=v&&(0,projection.cH)(a,i,j,r,v),null!=u&&null!=x&&(0,projection.GW)(u,i,j,r,x),offset_k(j,b),(0,projection.o$)(j,i,r),null!=a&&null!=v&&(0,projection.QP)(v,i,j,r,a),null!=u&&null!=x&&(0,projection.Cr)(x,i,j,r,u),e.vertexAttributesChanged()}(t,e):function offset_b(t,e){offset_k(t.vertexAttributes.position,e),t.vertexAttributesChanged()}(t,e)}function offset_k(t,e){if(t)for(let n=0;n<t.length;n+=3)for(let r=0;r<3;r++)t[n+r]+=e[r]}const offset_y=(0,vec3f64.c)(),R=(0,mat4f64.a)(),offset_d=(0,mat3f64.a)();const primitives_v={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function primitives_g(t,e,n){t.isPlane||function primitives_A(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}(t),function primitives_x(t,r){if(null==r)return;const o="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];F[0]=o[0],F[4]=o[1],F[8]=o[2];for(let n=0;n<t.position.length;n+=3){for(let e=0;e<3;e++)M[e]=t.position[n+e];(0,vec3.t)(M,M,F);for(let e=0;e<3;e++)t.position[n+e]=M[e]}if(o[0]!==o[1]||o[1]!==o[2]){F[0]=1/o[0],F[4]=1/o[1],F[8]=1/o[2];for(let r=0;r<t.normal.length;r+=3){for(let e=0;e<3;e++)M[e]=t.normal[r+e];(0,vec3.t)(M,M,F),(0,vec3.n)(M,M);for(let e=0;e<3;e++)t.normal[r+e]=M[e]}}}(t,n?.size);const{vertexAttributes:r,vertexSpace:i,transform:l}=(0,georeference.EX)(t,e,n);return{vertexAttributes:new MeshVertexAttributes.s({...r,uv:t.uv}),vertexSpace:i,transform:l,components:[new MeshComponent.c({faces:t.faces,material:n?.material||null})],spatialReference:e.spatialReference}}const primitives_y={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},primitives_d={south:0,east:1,north:2,west:3,up:4,down:5},M=(0,vec3f64.c)(),F=(0,mat3f64.a)();var mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js");const rotate_T="esri.geometry.support.meshUtils.rotate";function U(t,e,r){if(!t.vertexAttributes?.position||0===e[3])return;const{spatialReference:o,vertexSpace:n}=t;if(n.isRelative){(0,geographicUtils.j)(n,rotate_T,r);const o=r?.origin??t.origin;t.transform??=new MeshTransform.c,function z(t,e,r,o){const n=e.origin,l=(0,vec3.s)($,o.x,o.y,o.z??0),c=(0,vec3.f)($,l,n);t.applyLocalInverse(c,D),t.rotation=(0,axisAngleDegrees.Jn)(t.rotation,r,(0,axisAngleDegrees.Su)()),t.applyLocalInverse(c,c),(0,vec3.f)(c,c,D),t.translation=(0,vec3.g)((0,vec3f64.c)(),t.translation,c)}(t.transform,n,e,o)}else{const n=r?.origin??t.origin;(0,geographicUtils.C)(o,r)?function C(t,r,o){const n=t.spatialReference,i=(0,spatialReferenceEllipsoidUtils._s)(n),s=S;(0,projectPointToVector.M)(o,s,i)||(0,projectPointToVector.M)(t.origin,s,i);const a=t.vertexAttributes.position,c=t.vertexAttributes.normal,f=t.vertexAttributes.tangent,p=new Float64Array(a.length),j=null!=c?new Float32Array(c.length):null,h=null!=f?new Float32Array(f.length):null;(0,computeTranslationToOriginAndRotation.y)(i,s,rotate_M,i),(0,mat3.f)(O,rotate_M);const x=E;(0,vec3.t)((0,axisAngleDegrees.Yz)(E),(0,axisAngleDegrees.Yz)(r),O),x[3]=r[3],(0,projection.K_)(a,n,p),null!=c&&null!=j&&(0,projection.cH)(c,a,p,n,j),null!=f&&null!=h&&(0,projection.GW)(f,a,p,n,h),P(p,x,3,s),(0,projection.o$)(p,a,n),null!=c&&null!=j&&(P(j,x,3),(0,projection.QP)(j,a,p,n,c)),null!=f&&null!=h&&(P(h,x,4),(0,projection.Cr)(h,a,p,n,f)),t.vertexAttributesChanged()}(t,e,n):function I(e,r,o){const n=S;if(!(0,projectPointToVector.M)(o,n,e.spatialReference)){const r=e.origin;n[0]=r.x,n[1]=r.y,n[2]=r.z,Logger.c.getLogger(rotate_T).error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}P(e.vertexAttributes.position,r,3,n),P(e.vertexAttributes.normal,r,3),P(e.vertexAttributes.tangent,r,4),e.vertexAttributesChanged()}(t,e,n)}}function P(t,e,r,n=vec3f64.Z){if(null!=t){(0,mat4.c)(rotate_M,(0,axisAngleDegrees.kX)(e),(0,axisAngleDegrees.Yz)(e));for(let e=0;e<t.length;e+=r){for(let r=0;r<3;r++)$[r]=t[e+r]-n[r];(0,vec3.e)($,$,rotate_M);for(let r=0;r<3;r++)t[e+r]=$[r]+n[r]}}}const $=(0,vec3f64.c)(),D=(0,vec3f64.c)(),E=(0,axisAngleDegrees.Su)(),rotate_M=(0,mat4f64.a)(),O=(0,mat3f64.a)(),S=(0,vec3f64.c)(),scale_x="esri.geometry.support.meshUtils.scale";function scale_d(e,t,r){if(!e.vertexAttributes?.position)return;const{spatialReference:o,vertexSpace:n}=e;if(n.isRelative){(0,geographicUtils.j)(n,scale_x,r);const o=r?.origin??e.origin;e.transform??=new MeshTransform.c,function scale_A(e,s,l,a){const c=s.origin,p=(0,vec3.s)(scale_R,a.x,a.y,a.z),f=(0,vec3.f)(scale_R,p,c);e.applyLocalInverse(f,scale_k);const u=(0,vec3.i)((0,vec3f64.c)(),e.scale,l);e.scale=u,e.applyLocalInverse(f,f),(0,vec3.f)(f,f,scale_k),e.translation=(0,vec3.g)((0,vec3f64.c)(),e.translation,f)}(e.transform,n,t,o)}else{const n=(0,geographicUtils.C)(o,r),i=r?.origin??e.origin;n?function scale_b(e,t,r){const o=e.spatialReference,n=(0,spatialReferenceEllipsoidUtils._s)(o),i=scale_F;(0,projectPointToVector.M)(r,i,n)||(0,projectPointToVector.M)(e.origin,i,n);const s=e.vertexAttributes.position,c=e.vertexAttributes.normal,p=e.vertexAttributes.tangent,f=new Float64Array(s.length),x=null!=c?new Float32Array(c.length):null,d=null!=p?new Float32Array(p.length):null;(0,projection.K_)(s,o,f),null!=c&&null!=x&&(0,projection.cH)(c,s,f,o,x),null!=p&&null!=d&&(0,projection.GW)(p,s,f,o,d),scale_w(f,t,i),(0,projection.o$)(f,s,o),null!=c&&null!=x&&(0,projection.QP)(x,s,f,o,c),null!=p&&null!=d&&(0,projection.Cr)(d,s,f,o,p),e.vertexAttributesChanged()}(e,t,i):function scale_y(t,r,o){const n=scale_F;if(!(0,projectPointToVector.M)(o,n,t.spatialReference)){const r=t.origin;n[0]=r.x,n[1]=r.y,n[2]=r.z,Logger.c.getLogger(scale_x).error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}scale_w(t.vertexAttributes.position,r,n),t.vertexAttributesChanged()}(e,t,i)}}function scale_w(e,t,r=vec3f64.Z){if(e)for(let n=0;n<e.length;n+=3){for(let t=0;t<3;t++)scale_R[t]=e[n+t]-r[t];(0,vec3.i)(scale_R,scale_R,t);for(let t=0;t<3;t++)e[n+t]=scale_R[t]+r[t]}}const scale_R=(0,vec3f64.c)(),scale_k=(0,vec3f64.c)(),scale_F=(0,vec3f64.c)();var J,infoFor3D=__webpack_require__("./node_modules/@arcgis/core/layers/support/infoFor3D.js");async function zipUtils_t(e){const{BlobReader:t,ZipReader:r,BlobWriter:n}=await __webpack_require__.e(9840).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/support/zipjs-wrapper.js")),a=[],i=new r(new t(e));return(await i.getEntries()).forEach((e=>{if(e.directory||/^__MACOS/i.test(e.filename))return;const t=new n,r=e.getData?.(t).then((t=>new File([t],e.filename)));r&&a.push(r)})),Promise.all(a)}const Q="esri.geometry.Mesh",X={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:MeshGeoreferencedVertexSpace.c,"georeferenced-relative":MeshGeoreferencedRelativeVertexSpace.c,local:MeshLocalVertexSpace.c}};let Y=J=class extends(Loadable.c.LoadableMixin((0,core_Promise.g)(Geometry.c))){constructor(e){super(e),this.components=null,this.vertexSpace=new MeshGeoreferencedVertexSpace.c,this.transform=null,this.metadata=new Metadata_a,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new MeshVertexAttributes.s,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((()=>{this.addHandles((0,reactiveUtils.aE)((()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map((e=>e.clone()))})),(()=>this._clearSources()),{once:!0,sync:!0}))}))}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:e,spatialReference:t,vertexAttributes:r,vertexSpace:s}=this,o=r.position;if(0===o.length||e&&0===e.length)return new Extent.c({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t});if("local"===s.type){const{_untransformedExtent:e,transform:r}=this;return function bounds_e({xmin:t,xmax:e,ymin:i,ymax:o,zmin:r,zmax:x},s,c,f){r??=0,x??=0,a??=new Float64Array(24);const l=a;return l[0]=t,l[1]=i,l[2]=r,l[3]=t,l[4]=o,l[5]=r,l[6]=e,l[7]=o,l[8]=r,l[9]=e,l[10]=i,l[11]=r,l[12]=t,l[13]=i,l[14]=x,l[15]=t,l[16]=o,l[17]=x,l[18]=e,l[19]=o,l[20]=x,l[21]=e,l[22]=i,l[23]=x,(0,georeference.project)({positions:l,transform:s,vertexSpace:c,inSpatialReference:f,outSpatialReference:f,outPositions:l}),m(l,f)}(e,r,s,t)}if("georeferenced-relative"===s.type){const{transform:e}=this;return m((0,georeference.project)({positions:o,transform:e,vertexSpace:s,inSpatialReference:t,outSpatialReference:t}),t)}return m(o,t)}get _untransformedExtent(){return m(this.vertexAttributes.position,this.spatialReference)}get anchor(){const{vertexSpace:e}=this;if(e.isRelative)return e.getOriginPoint(this.spatialReference);const{center:t,zmin:r}=this._transformedExtent;return new Point.c({x:t.x,y:t.y,z:r,spatialReference:this.spatialReference})}get origin(){const{vertexSpace:e}=this;return e.isRelative?e.getOriginPoint(this.spatialReference):this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(e){if(!this.loaded)return Logger.c.getLogger(this).error("addComponent()",(new meshErrors_e).message);this.components||(this.components=[]),this.components.push(MeshComponent.c.from(e)),this.notifyChange("components")}removeComponent(e){if(!this.loaded)return Logger.c.getLogger(this).error("removeComponent()",(new meshErrors_e).message);if(this.components){const t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}Logger.c.getLogger(this).error("removeComponent()",(new t).message)}rotate(e,t,r,s){return(0,axisAngleDegrees.GA)(e,t,r,ee),U(this,ee,s),this}offset(e,t,r,o){return this.loaded?(Mesh_$[0]=e,Mesh_$[1]=t,Mesh_$[2]=r,offset_v(this,Mesh_$,o),this):(Logger.c.getLogger(this).error("offset()",(new meshErrors_e).message),this)}scale(e,t){return this.loaded?(scale_d(this,e,t),this):(Logger.c.getLogger(this).error("scale()",(new meshErrors_e).message),this)}centerAt(e,t){return this.loaded?(centerAt_l(this,e,t),this):(Logger.c.getLogger(this).error("centerAt()",(new meshErrors_e).message),this)}load(e){const{metadata:{displaySource:t}}=this;return t&&this.addResolvingPromise(c(this,t,e)),Promise.resolve(this)}addExternalSources(e){this.metadata.externalSources.addMany(e)}updateDisplaySource(e){this.metadata.displaySource=e}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(e){let t=null;if(this.components){const e=new Map,r=new Map;t=this.components.map((t=>t.cloneWithDeduplication(e,r)))}const r={components:t,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:e,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new J(r)}cloneShallow(){return new J({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}async toBinaryGLTF(e){const t=__webpack_require__.e(99776).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/gltfexport.js")),r=this.load(),s=await Promise.all([t,r]),{toBinaryGLTF:o}=s[0];return o(this,e)}get memoryUsage(){let e=0;if(e+=this.vertexAttributes.memoryUsage,null!=this.components)for(const t of this.components)e+=t.memoryUsage;return e}_clearSources(){this.metadata.clearSources()}static createBox(e,t){if(!(e instanceof Point.c))return Logger.c.getLogger(Q).error(".createBox()",(new s).message),null;const r=new J(primitives_g(function i(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:n}=primitives_y,r=4*t.length,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(2*t.length*3);let l=0,c=0,f=0,u=0;for(let h=0;h<t.length;h++){const r=t[h],p=l/3;for(const t of e)i[u++]=p+t;const w=r.corners;for(let t=0;t<4;t++){const e=w[t];let i=0;a[f++]=.25*n[t][0]+r.uvOrigin[0],a[f++]=r.uvOrigin[1]-.25*n[t][1];for(let t=0;t<3;t++)0!==r.axis[t]?(o[l++]=.5*r.axis[t],s[c++]=r.axis[t]):(o[l++]=.5*e[i++],s[c++]=0)}}return{position:o,normal:s,uv:a,faces:i}}(),e,t));return t?.imageFace&&"all"!==t.imageFace?function primitives_l(t,e){const n=t.components[0],r=n.faces,s=primitives_d[e],a=6*s,i=new Array(6),l=new Array(r.length-6);let c=0,f=0;for(let o=0;o<r.length;o++)o>=a&&o<a+6?i[c++]=r[o]:l[f++]=r[o];if(null!=t.vertexAttributes.uv){const e=new Float32Array(t.vertexAttributes.uv),n=4*s*2,r=[0,1,1,1,1,0,0,0];for(let t=0;t<r.length;t++)e[n+t]=r[t];t.vertexAttributes.uv=e}return t.components=[new MeshComponent.c({faces:i,material:n.material}),new MeshComponent.c({faces:l})],t}(r,t.imageFace):r}static createSphere(e,t){return e instanceof Point.c?new J(primitives_g(function primitives_c(t=0){const e=Math.round(8*2**t),n=2*e,r=(e-1)*(n+1)+2*n,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array((e-1)*n*2*3);let l=0,c=0,f=0,u=0;for(let h=0;h<=e;h++){const t=h/e*Math.PI+.5*Math.PI,r=Math.cos(t),p=Math.sin(t);M[2]=p;const w=0===h||h===e,m=w?n-1:n;for(let v=0;v<=m;v++){const t=v/m*2*Math.PI;M[0]=-Math.sin(t)*r,M[1]=Math.cos(t)*r;for(let e=0;e<3;e++)o[l]=.5*M[e],s[l]=M[e],++l;a[c++]=(v+(w?.5:0))/n,a[c++]=h/e,0!==h&&v!==n&&(h!==e&&(i[f++]=u,i[f++]=u+1,i[f++]=u-n),1!==h&&(i[f++]=u,i[f++]=u-n,i[f++]=u-n-1)),u++}}return{position:o,normal:s,uv:a,faces:i}}(t?.densificationFactor||0),e,t)):(Logger.c.getLogger(Q).error(".createSphere()",(new s).message),null)}static createCylinder(e,t){return e instanceof Point.c?new J(primitives_g(function primitives_f(t=0){const n=Math.round(16*2**t),r=4*(n+1)+2*n,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(4*n*3);let l=0,c=0,f=0,u=0,h=0;for(let p=0;p<=5;p++){const t=0===p||5===p,r=p<=1||p>=4,w=2===p||4===p,m=t?n-1:n;for(let v=0;v<=m;v++){const g=v/m*2*Math.PI,A=t?0:.5;M[0]=A*Math.sin(g),M[1]=A*-Math.cos(g),M[2]=p<=2?.5:-.5;for(let t=0;t<3;t++)o[l++]=M[t],s[c++]=r?2===t?p<=1?1:-1:0:2===t?0:M[t]/A;a[f++]=(v+(t?.5:0))/n,a[f++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,w||0===p||v===n||(5!==p&&(i[u++]=h,i[u++]=h+1,i[u++]=h-n),1!==p&&(i[u++]=h,i[u++]=h-n,i[u++]=h-n-1)),h++}}return{position:o,normal:s,uv:a,faces:i}}(t?.densificationFactor||0),e,t)):(Logger.c.getLogger(Q).error(".createCylinder()",(new s).message),null)}static createPlane(e,t){if(!(e instanceof Point.c))return Logger.c.getLogger(Q).error(".createPlane()",(new s).message),null;const r=t?.facing??"up",o=function primitives_u(t,e){const n="number"==typeof e?e:null!=e?e.width:1,r="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return{width:n,depth:r};case"north":case"south":return{width:n,height:r};case"east":case"west":return{depth:n,height:r}}}(r,t?.size);return new J(primitives_g(function primitives_h(t){const e=primitives_v.facingAxisOrderSwap[t],n=primitives_v.position,r=primitives_v.normal,o=new Float64Array(n.length),s=new Float32Array(r.length);let a=0;for(let i=0;i<4;i++){const t=a;for(let i=0;i<3;i++){const l=e[i],c=Math.abs(l)-1,f=l>=0?1:-1;o[a]=n[t+c]*f,s[a]=r[t+c]*f,a++}}return{position:o,normal:s,uv:new Float32Array(primitives_v.uv),faces:new Uint32Array(primitives_v.faces),isPlane:!0}}(r),e,{...t,size:o}))}static createFromPolygon(e,t){if(!(e instanceof Polygon.c))return Logger.c.getLogger(Q).error(".createFromPolygon()",(new n).message),null;const r=(0,triangulationUtils.yw)(e);return new J({vertexAttributes:new MeshVertexAttributes.s({position:r.position}),components:[new MeshComponent.c({faces:r.faces,shading:"flat",material:t?.material??null})],spatialReference:e.spatialReference,vertexSpace:new MeshGeoreferencedVertexSpace.c})}static async createFromGLTF(e,t,r){if(!(e instanceof Point.c)){const e=new s;throw Logger.c.getLogger(Q).error(".createfromGLTF()",e.message),e}const{loadGLTFMesh:o}=await(0,promiseUtils.Yv)(Promise.all([__webpack_require__.e(60624),__webpack_require__.e(53056)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js")),r);return new J(await o(e,t,r))}static async createFromFiles(e,t,r){const o=e=>Logger.c.getLogger(Q).error(".createFromFiles()",e.message);if(!(e instanceof Point.c)){const e=new s;throw o(e),e}const n=r?.layer;if(!n){const e=new meshErrors_r;throw o(e),e}const i=await J.extractAndFilterFiles(t,n),a=i.reduce(((e,t)=>(0,infoFor3D.kD)(n.infoFor3D,t)?e+1:e),0);if(0===a){const e=new meshErrors_c;throw o(e),e}if(a>1){const e=new l;throw o(e),e}const c=J.createWithExternalSource(e,i),[p]=await n.uploadAssets([c],r);return p}static async extractAndFilterFiles(e,t){const r=t?.infoFor3D;return r?(await async function zipUtils_e(e){const r=[];for(const n of e)n.name.toLowerCase().endsWith(".zip")?r.push(zipUtils_t(n)):r.push(Promise.resolve(n));return(await Promise.all(r)).flat()}(e)).filter((e=>(0,infoFor3D.sz)(r,e))):e}static createWithExternalSource(e,t,r){const s=r?.extent??null,{x:o,y:n,z:i,spatialReference:a}=e,c=r?.transform?.clone()??new MeshTransform.c,p=r?.vertexSpace??new MeshLocalVertexSpace.c({origin:[o,n,i??0]}),m={source:t,extent:s},l=new Metadata_a;return l.externalSources.push(m),new J({metadata:l,transform:c,vertexSpace:p,spatialReference:a})}static createIncomplete(e,r){const{x:s,y:o,z:n,spatialReference:i}=e,a=r?.transform?.clone()??new MeshTransform.c,c=r?.vertexSpace??new MeshLocalVertexSpace.c({origin:[s,o,n??0]}),p=new J({transform:a,vertexSpace:c,spatialReference:i});return p.addResolvingPromise(Promise.reject(new core_Error.c("mesh-incomplete","Mesh resources are not complete"))),p}};(0,tslib_es6._)([(0,property.qq)({type:[MeshComponent.c],json:{write:!0}})],Y.prototype,"components",void 0),(0,tslib_es6._)([(0,property.qq)({nonNullable:!0,types:X,constructOnly:!0,json:{write:!0}})],Y.prototype,"vertexSpace",void 0),(0,tslib_es6._)([(0,property.qq)({type:MeshTransform.c,json:{write:!0}})],Y.prototype,"transform",void 0),(0,tslib_es6._)([(0,property.qq)({constructOnly:!0})],Y.prototype,"metadata",void 0),(0,tslib_es6._)([(0,property.qq)()],Y.prototype,"hasExtent",null),(0,tslib_es6._)([(0,property.qq)()],Y.prototype,"_transformedExtent",null),(0,tslib_es6._)([(0,property.qq)()],Y.prototype,"_untransformedExtent",null),(0,tslib_es6._)([(0,property.qq)()],Y.prototype,"anchor",null),(0,tslib_es6._)([(0,property.qq)()],Y.prototype,"origin",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0,json:{read:!1}})],Y.prototype,"extent",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],Y.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property.qq)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],Y.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property.qq)({type:MeshVertexAttributes.s,nonNullable:!0,json:{write:!0}})],Y.prototype,"vertexAttributes",void 0),Y=J=(0,tslib_es6._)([(0,subclass.c)(Q)],Y);const Mesh_$=(0,vec3f64.c)(),ee=(0,axisAngleDegrees.Su)(),te=Y;var SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),FeatureSet=__webpack_require__("./node_modules/@arcgis/core/rest/support/FeatureSet.js");const meshFeatureSet_h=()=>Logger.c.getLogger("esri.rest.support.meshFeatureSet");function meshFeatureSet_y(t,r,o){const n=o.features;o.features=[],delete o.geometryType;const s=FeatureSet.c.fromJSON(o);if(s.geometryType="mesh",!o.assetMaps)return s;const i=meshFeatureSet_M(r,o.assetMaps),u=t.sourceSpatialReference??SpatialReference.c.WGS84,c=o.globalIdFieldName,{outFields:f}=t,m=null!=f&&f.length>0?function meshFeatureSet_E(e){return({attributes:t})=>{if(!t)return{};if(!e)return t;for(const r in t)e.has(r)||delete t[r];return t}}(f.includes("*")?null:new Set(f)):()=>({});for(const a of n){const t=meshFeatureSet_S(a,c,u,r,i);null!=t&&s.features.push(new Graphic.c({geometry:t,attributes:m(a)}))}return s}function meshFeatureSet_S(e,t,r,o,i){const a=e.attributes[t],f=i.get(a);if(null==f)return meshFeatureSet_h().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",e),null;if(!e.geometry)return meshFeatureSet_h().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",e),null;const{originPoint:m,originVector:p}=function meshFeatureSet_d({attributes:e},t,{transformFieldRoles:r}){const n=e[r.originX],s=e[r.originY],a=e[r.originZ];return{originPoint:new Point.c({x:n,y:s,z:a,spatialReference:t}),originVector:(0,vec3f64.f)(n,s,a)}}(e,r,o),l=Extent.c.fromJSON(e.geometry);l.spatialReference=r;const g=function meshFeatureSet_j(e,{transformFieldRoles:t}){return new MeshTransform.c({translation:[e[t.translationX],-e[t.translationZ],e[t.translationY]],rotationAxis:[e[t.rotationX],-e[t.rotationZ],e[t.rotationY]],rotationAngle:e[t.rotationDeg],scale:[e[t.scaleX],e[t.scaleZ],e[t.scaleY]]})}(e.attributes,o),y=f.projectVertices?new MeshGeoreferencedRelativeVertexSpace.c({origin:p}):new MeshLocalVertexSpace.c({origin:p}),E=function meshFeatureSet_T(e){const t=Array.from(e.files.values()),r=new Array;for(const o of t){if(o.status!==meshFeatureSet_w.COMPLETED)return null;const e=new Array;for(const t of o.parts){if(!t)return null;e.push(new External.ai(t.url,t.hash))}r.push(new External.Si(o.name,o.mimeType,e))}return r}(f);return E?te.createWithExternalSource(m,E,{extent:l,transform:g,vertexSpace:y}):te.createIncomplete(m,{extent:l,transform:g,vertexSpace:y})}var meshFeatureSet_w,e;function meshFeatureSet_M(e,t){const o=new Map;for(const n of t){const t=n.parentGlobalId;if(null==t)continue;const s=n.assetName,i=n.assetType,a=n.assetHash,u=n.assetURL,c=n.conversionStatus,f=n.seqNo,m=(0,infoFor3D.w$)(i,e.supportedFormats);if(!m){meshFeatureSet_h().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${i}, but it does not list it as a supported type`);continue}const p=(0,MapUtils.wJ)(o,t,(()=>({projectVertices:meshFeatureSet_P(n.flags).projectVertices,files:new Map})));(0,MapUtils.wJ)(p.files,s,(()=>({name:s,type:i,mimeType:m,status:meshFeatureSet_D(c),parts:[]}))).parts[f]={hash:a,url:u}}return o}function meshFeatureSet_D(e){switch(e){case"COMPLETED":case"SUBMITTED":return meshFeatureSet_w.COMPLETED;case"INPROGRESS":return meshFeatureSet_w.PENDING;default:return meshFeatureSet_w.FAILED}}function meshFeatureSet_P(e){return{projectVertices:e.includes("PROJECT_VERTICES")}}(e=meshFeatureSet_w||(meshFeatureSet_w={}))[e.FAILED=0]="FAILED",e[e.PENDING=1]="PENDING",e[e.COMPLETED=2]="COMPLETED"},"./node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cg:()=>A,EX:()=>d,In:()=>O,ey:()=>j,iE:()=>w,ic:()=>D});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/earcut.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),_webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");function j(e,r,o){const i=function h(t,o,n,a){const s=(t=>!Array.isArray(t[0]))(o)?(t,e)=>o[3*t+e]:(t,e)=>o[t][e],c=a?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.k8)(a)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.gl)(a):1;return(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.XX)(t,((t,e)=>(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(t,s(e,0)*c,s(e,1)*c,s(e,2))),n)}(y,e,r,o)?(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.i4)(y):[0,0,1];return Math.abs(i[2])>Math.cos((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.EF)(80))?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Z:Math.abs(i[1])>Math.abs(i[0])?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Y:_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.X}const y=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.Su)();function w(t,e,r){const i=j(t,(e.length>0?e[0]:t.length/3)-1,r);if(i!==_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Z){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+i]=t[e+2]}return(0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__.e)(t,e,3)}function d(t){const e=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.position,t.indices,3,!0)]],r=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__.MM)(t.indices.length);return null!=t.attributeData.colorFeature?e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O([t.attributeData.colorFeature],r,1,!0)]):t.attributeData.color&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.color,r,4,!0)]),t.attributeData.uvMapSpace&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.UVMAPSPACE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.BOUNDINGRECT,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.boundingRect,t.indices,9,!0)]),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.K(t.material,e,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__.C.Mesh,t.attributeData.objectAndLayerIdColor)}function D(t,e=null){const r=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.position,t.indices,3,!0)],[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.UV0,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.uv0,t.indices,2,!0)]];return new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.K(t.material,r,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__.C.Mesh,e)}function A(t){switch(t.type){case"extent":if(t instanceof _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__.c)return _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__.c.fromExtent(t);break;case"polygon":return t}return null}class O{constructor(t,e,r){this.renderData=t,this.layerUid=e,this.graphicUid=r,this.outGeometries=new Array}}}}]);