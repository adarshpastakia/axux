"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[8268],{"./node_modules/@arcgis/core/geometry/projection/projectVectorToPoint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>t});var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_Point_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");function t(n,t,f){if(null==t||null==f)return null;const l=new _Point_js__WEBPACK_IMPORTED_MODULE_1__.A({spatialReference:f});return(0,_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__.projectBuffer)(n,t,0,e,f,0,1)?(l.x=e[0],l.y=e[1],l.z=e[2],l):null}const e=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)()},"./node_modules/@arcgis/core/geometry/support/coordinateSystem.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Sj:()=>k,vf:()=>S});__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/ellipsoidUtils.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/boundedPlane.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"));function A(t,n,e=function d(t){return{operations:t,value:t.create()}}(t)){return e.operations=t,t.copy(n,e.value),e}function k(t){return A(_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_8__.s,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_8__.f)(0,0,0,(0,_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__.tO)(t).radius))}function S(t,n,e,o){return t.operations.axisAt(t.value,n,e,o)}(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)();(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/views/draw/DrawGraphicTool.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nt:()=>K,ld:()=>X});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),handleUtils=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),memoize=__webpack_require__("./node_modules/@arcgis/core/core/memoize.js"),quantityUtils=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),unitUtils=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),arrayUtils=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js")),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),GraphicsLayer=__webpack_require__("./node_modules/@arcgis/core/layers/GraphicsLayer.js"),elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),lang=(__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),Circle=__webpack_require__("./node_modules/@arcgis/core/geometry/Circle.js"),geometryEngine=__webpack_require__("./node_modules/@arcgis/core/geometry/geometryEngine.js"),coordsUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),mat2d=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2d.js"),mat2df64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2df64.js"),quat=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),quatf64=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),Axis=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");function w(t,r,e=null){return null!=e?[t,r,e]:[t,r]}function g(t,r,e=null){return null!=e?{x:t,y:r,z:e}:{x:t,y:r}}class R{constructor(t){this.spatialReference=t}mapToLocalMultiple(r){return r.map((t=>this.mapToLocal(t))).filter(arrayUtils.Ru)}get doUnnormalization(){return!1}}class W extends R{constructor(t,a,o=null){super(a),this._defaultZ=o,this.transform=(0,mat2df64.c)(),this.transformInv=(0,mat2df64.c)(),this.transform=(0,mat2df64.a)(t),(0,mat2d.i)(this.transformInv,this.transform)}makeMapPoint(t,r){return w(t,r,this._defaultZ)}mapToLocal(t){return g(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return w(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class v extends R{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=(0,vec3f64.c)(),this.tangentFrameUpWS=(0,vec3f64.c)(),this.tangentFrameRightWS=(0,vec3f64.c)(),this.tangentFrameForwardWS=(0,vec3f64.c)(),this.localFrameRightWS=(0,vec3f64.c)(),this.localFrameUpWS=(0,vec3f64.c)(),this.worldToLocalTransform=(0,quatf64.a)(),this.localToWorldTransform=(0,quatf64.a)(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis._.Z,this.tangentFrameForwardWS);const s=(0,vec3f64.c)();(0,vec3.i)(s,this.tangentFrameForwardWS,(0,vec3.j)(e,this.tangentFrameForwardWS)),(0,vec3.f)(this.localFrameRightWS,e,s),(0,vec3.n)(this.localFrameRightWS,this.localFrameRightWS),(0,vec3.b)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,quat.r)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,quat.i)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,r){return w(t,r,this.defaultZ)}mapToLocal(t){const r=(0,vec3f64.c)();this.view.renderCoordsHelper.toRenderCoords(new Point.A({x:t[0],y:t[1],spatialReference:this.spatialReference}),r),(0,vec3.v)(r,r,this.worldToLocalTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,this.view.spatialReference);return null!=e?g(e.x/this.scale,e.y/this.scale):null}localToMap(t){const r=(0,vec3f64.c)();this.view.renderCoordsHelper.toRenderCoords(new Point.A({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),r),(0,vec3.v)(r,r,this.localToWorldTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,this.view.spatialReference);return null!=e?w(e.x,e.y,this.defaultZ):null}}function F(t,r){if("2d"===t.type)return new W(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new Point.A({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new Point.A({x:r[0],y:r[1],spatialReference:t.spatialReference});return new v(t,e)}return null}var Multipoint=__webpack_require__("./node_modules/@arcgis/core/geometry/Multipoint.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");function createUtils_g(t,e){const o=new Point.A({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(o.z=t[2]),o}function createUtils_R(t,e,o){const n=new Polyline.A({paths:t,spatialReference:e});return o&&(0,coordsUtils._7)(n),n}function j(e,n,r,a=!0){const l=(0,lang.o8)(e);l.forEach((e=>{const o=e[0],n=e[e.length-1];(0,arrayUtils.aI)(o,n)&&1!==e.length||e.push(e[0])}));let i=new Polygon.A({rings:l,spatialReference:n});return i.rings.forEach((t=>{(0,coordsUtils.$3)(t)||t.reverse()})),r&&(0,coordsUtils._7)(i),a&&i.isSelfIntersecting&&(0,spatialReferenceUtils.fn)(n)&&(i=(0,geometryEngine.simplify)(i)),i}function T(t,o,n){const r=o.mapToLocalMultiple(t),a=[],l={x:r[0].x,y:r[0].y},s_x=r[1].x,s_y=r[1].y,i=Math.round(s_x-l.x),c=Math.round(s_y-l.y),p=Math.max(Math.abs(i),Math.abs(c));if(n){const t={x:l.x+p,y:l.y+p},e={x:l.x-p,y:l.y-p};a.push(g(t.x,e.y),g(e.x,e.y),g(e.x,t.y),g(t.x,t.y))}else{const t={x:i>0?l.x+p:l.x-p,y:c>0?l.y+p:l.y-p};a.push(g(l.x,l.y),g(t.x,l.y),g(t.x,t.y),g(l.x,t.y))}return U(j([a.map((t=>o.localToMap(t))).filter(arrayUtils.Ru)],o.spatialReference,o.doUnnormalization,!0),a,o)}function U(t,e,o){const n=P(e[3],e[2],o),r=P(e[1],e[2],o),a=P(e[0],e[1],o),l=P(e[0],e[3],o);return{geometry:t,midpoints:null!=n&&null!=r&&null!=a&&null!=l?{top:n,right:r,bottom:a,left:l}:null}}function P(t,e,o){createUtils_w[0]=t.x,createUtils_w[1]=t.y,createUtils_w[2]=0,I[0]=e.x,I[1]=e.y,I[2]=0,(0,vec3.p)(createUtils_w,createUtils_w,I,.5),z.x=createUtils_w[0],z.y=I[1],z.z=I[2];const n=o.localToMap(z);return null!=n?createUtils_g(n,o.spatialReference):null}const z=g(0,0,0),createUtils_w=(0,vec3f64.c)(),I=(0,vec3f64.c)();function L(t,e,o,r){const a=e.mapToLocalMultiple(t);let s=null,c=null;if(o)s=a[0],c=a[1];else{const t=a[0],e=a[1],o=Math.round(e.x-t.x),n=Math.round(e.y-t.y),r=Math.max(Math.abs(o),Math.abs(n));s=g(o>0?t.x+r/2:t.x-r/2,n>0?t.y+r/2:t.y-r/2),c=g(Math.abs(o)>Math.abs(n)?s.x-r/2:s.x,Math.abs(o)>Math.abs(n)?s.y:s.y-r/2)}const p=e.localToMap(s),f=e.localToMap(c);if(null==p||null==f)return null;e.doUnnormalization&&(0,coordsUtils.JM)([[p,f]],e.spatialReference);const x=createUtils_g(p,e.spatialReference),h=createUtils_g(f,e.spatialReference),M=(0,unitUtils.GA)(e.spatialReference);let d=0;if((0,spatialReferenceUtils.fn)(e.spatialReference))d=M*(0,geometryEngine.distance)(x,h,null);else{const t=s.x-c.x,e=s.y-c.y;d=M*Math.sqrt(t*t+e*e)*(r||1)}const R=new Circle.A({center:x,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:j(R.rings,R.spatialReference,!1),center:x,edge:h}}function helpMessageUtils_e(e,l){switch(e){case"point":case"multipoint":return"point";case"polyline":return function t(e){return(null!=e&&"polyline"===e.type&&e.paths.length?e.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(l);case"polygon":return function o(e){const n=null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0;return n<3?"polylineZeroVertices":n<4?"polygonOneVertex":"polygonTwoVertices"}(l);default:return}}var InteractiveToolBase=__webpack_require__("./node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js"),keybindings=__webpack_require__("./node_modules/@arcgis/core/views/interactive/keybindings.js"),SketchLabelOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchLabelOptions.js"),SketchTooltipOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchTooltipOptions.js"),projectVectorToVector=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js"),coordinateSystem=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordinateSystem.js"),constraints=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/constraints.js"),normalizedPoint=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),projectVectorToPoint=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectVectorToPoint.js"),projectVectorToWGS84ComparableLonLat=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectVectorToWGS84ComparableLonLat.js"),geodesicUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/geodesicUtils.js");const angularMeasurementUtils_d=(()=>{const r=(0,vec3f64.c)(),o=(0,vec3f64.c)(),p=(0,vec3f64.c)();return(m,f)=>{if((0,vec3.s)(o,m.x,m.y,m.z??0),(0,vec3.s)(p,f.x,f.y,f.z??0),(0,vec3.h)(o,p))return null;if(!(0,projectVectorToWGS84ComparableLonLat.H)(o,m.spatialReference,o)||!(0,projectVectorToWGS84ComparableLonLat.H)(p,f.spatialReference,p)){(0,vec3.f)(r,p,o),r[2]=0,(0,vec3.n)(r,r);let i=(0,vec2.x)(vec2f64.e,r);return r[0]<0&&(i=2*Math.PI-i),(0,quantityUtils.Wq)(i,"radians","geographic")}const{azimuth:u}=(0,geodesicUtils._3)(x,o,p);return null!=u?(0,quantityUtils.Wq)(u,"degrees","geographic"):void 0}})(),angularMeasurementUtils_v=(()=>{const e=(0,vec3f64.c)(),t=(0,vec3f64.c)();return({x:s,y:n,z:c,spatialReference:a},m,j)=>{const l=c??0;(0,vec3.s)(e,s,n,l);const y=(0,quantityUtils.g2)((0,unitUtils.oU)(j.value,j.unit,"degrees"),j.rotationType,"geographic");if(!(0,projectVectorToVector.F)(e,a,e,SpatialReference.A.WGS84)){const e=(0,quantityUtils.g2)(y,"geographic","arithmetic"),t=(0,unitUtils.oU)(e,"degrees","radians");return new Point.A({x:s+m*Math.cos(t),y:n+m*Math.sin(t),z:l,spatialReference:a})}return(0,geodesicUtils.vN)(t,e,y,m),t[2]=l,(0,projectVectorToPoint.E)(t,SpatialReference.A.WGS84,a)}})(),x=new geodesicUtils.Zj;var measurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/measurementUtils.js");function constraintUtils_d(o,s,p,a){if(!s)return;const{spatialReference:l}=o;if(!(0,unitUtils._H)(l))return;const d=(0,measurementUtils.l)(l),g=(0,unitUtils._H)(d);if(!g)return;const h=(0,normalizedPoint.vf)(o,p,a),k=constraintUtils_v;if(!(0,projectVectorToVector.F)(h,l,k,d))return;const U=(0,quantityUtils.l3)(s,g);if("3d"===p?.type&&"local"===p.viewingMode)k[0]+=U;else{const t=(0,coordinateSystem.Sj)(d),r=(0,coordinateSystem.vf)(t,k,Axis._.X,constraintUtils_w);(0,vec3.q)(k,k,r,U)}if(!(0,projectVectorToVector.F)(k,d,k,l))return;const q=(0,vec3.o)(h,k);return new constraints.JV(h,q)}function constraintUtils_g(t,r,o,e){if(!r)return;const n=(0,normalizedPoint.vf)(t,o,e),s=angularMeasurementUtils_v(t,1,r);if(!s)return;const i=(0,normalizedPoint.vf)(s,o,e);return new constraints.FX(n,i)}function h(r,e,n,s){if(null==r)return;const i=(0,measurementUtils.l)(e),c=(0,unitUtils.mq)(i);return c?new constraints.qR((0,quantityUtils.l3)(r,c)):void 0}const constraintUtils_v=(0,vec3f64.c)(),constraintUtils_w=(0,vec3f64.c)();var SketchTooltipInfo=__webpack_require__("./node_modules/@arcgis/core/views/interactive/tooltip/SketchTooltipInfo.js"),fields=__webpack_require__("./node_modules/@arcgis/core/views/interactive/tooltip/fields/fields.js");let DrawTooltipInfos_d=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-point",this.elevation=(0,fields.S3)()}get allFields(){return[this.elevation]}};(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_d.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_d.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_d.prototype,"allFields",null),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_d.prototype,"helpMessage",void 0),DrawTooltipInfos_d=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],DrawTooltipInfos_d);let y=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-polyline",this.orientation=(0,fields.LJ)(),this.distance=(0,fields.R0)({title:t=>t.messages.sketch.distance}),this.elevation=(0,fields.S3)(),this.totalLength=(0,fields.R0)({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0})}get allFields(){return[this.orientation,this.distance,this.elevation,this.totalLength]}};(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"orientation",void 0),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"distance",void 0),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"allFields",null),(0,tslib_es6._)([(0,property.MZ)()],y.prototype,"helpMessage",void 0),y=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],y);let c=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-polygon",this.orientation=(0,fields.LJ)(),this.distance=(0,fields.R0)({title:t=>t.messages.sketch.distance}),this.elevation=(0,fields.S3)(),this.area=(0,fields.Am)({readOnly:!0})}get allFields(){return[this.orientation,this.distance,this.elevation,this.area]}};(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"distance",void 0),(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"area",void 0),(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"allFields",null),(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"helpMessage",void 0),c=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],c);let DrawTooltipInfos_v=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-mesh",this.elevation=(0,fields.S3)()}get allFields(){return[this.elevation]}};(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_v.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_v.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_v.prototype,"allFields",null),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_v.prototype,"helpMessage",void 0),DrawTooltipInfos_v=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawMeshTooltipInfo")],DrawTooltipInfos_v);let DrawTooltipInfos_h=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-rectangle",this.xSize=quantityUtils.r7,this.ySize=quantityUtils.r7,this.area=quantityUtils.iT}get allFields(){return[]}};(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_h.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_h.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_h.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_h.prototype,"area",void 0),(0,tslib_es6._)([(0,property.MZ)()],DrawTooltipInfos_h.prototype,"allFields",null),DrawTooltipInfos_h=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],DrawTooltipInfos_h);let u=class extends SketchTooltipInfo.w{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=quantityUtils.iT}get allFields(){return[]}};(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"radius",void 0),(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"area",void 0),(0,tslib_es6._)([(0,property.MZ)()],u.prototype,"allFields",null),u=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],u);var Tooltip=__webpack_require__("./node_modules/@arcgis/core/views/interactive/tooltip/Tooltip.js"),automaticAreaMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/automaticAreaMeasurementUtils.js"),automaticLengthMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/automaticLengthMeasurementUtils.js"),trackingUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js");class J{constructor(){this.regularVertices=null,this.activeVertex=null,this.full=null,this.outline=null,this.circle=null,this.rectangle=null}}let K=class extends(Evented.A.EventedMixin(InteractiveToolBase.g)){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new SketchLabelOptions.A,this.geometryToPlace=null,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new SketchTooltipOptions.A,this._getPointConstraint=(0,memoize.B)((t=>t)),this._getPolylineOrPolygonConstraint=(0,memoize.B)(((t,e,o)=>function k(t){let r;for(const o of t)o&&(r=r?.intersect(o)??o);return r}([t,e,o]))),this._getDistanceConstraint=(0,memoize.B)(constraintUtils_d),this._getOrientationConstraint=(0,memoize.B)(constraintUtils_g),this._getElevationConstraint=(0,memoize.B)(h)}initialize(){this.internalGraphicsLayer=new GraphicsLayer.A({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation();const t=this.tooltipOptions,e=this.view.type;this.tooltipInfos={point:new DrawTooltipInfos_d({tooltipOptions:t,viewType:e}),polyline:new y({tooltipOptions:t,viewType:e}),polygon:new c({tooltipOptions:t,viewType:e}),mesh:new DrawTooltipInfos_v({tooltipOptions:t,viewType:e}),rectangle:new DrawTooltipInfos_h({tooltipOptions:t}),circle:new u({tooltipOptions:t})},this.addHandles([this.drawOperation.on("vertex-add",(t=>this.onVertexAdd(t))),this.drawOperation.on("vertex-remove",(t=>this.onVertexRemove(t))),this.drawOperation.on("vertex-update",(t=>this.onVertexUpdate(t))),this.drawOperation.on("cursor-update",(t=>this.onCursorUpdate(t))),this.drawOperation.on("complete",(t=>this.onComplete(t))),(0,reactiveUtils.wB)((()=>this.cursor),(t=>{this.drawOperation.cursor=t}),reactiveUtils.pc),(0,reactiveUtils.wB)((()=>this.tooltipOptions.enabled),(t=>{this.tooltip=t?new Tooltip.m({view:this.view,info:this._tooltipInfo}):(0,maybe.pR)(this.tooltip)}),reactiveUtils.pc),(0,trackingUtils.fm)((()=>this._updateTooltipInfo()))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,maybe.pR)(this.drawOperation),this.tooltip=(0,maybe.pR)(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,maybe.pR)(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){return(0,quantityUtils.d_)(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){const e=this._tooltipInfo;if("key-down"===t.type&&t.key===keybindings.ac.enterInputMode&&null!=e&&e.editableFields.length>0&&this.tooltipOptions.inputEnabled)return e.enterInputMode(),void t.stopPropagation();this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_destroyAllVisualisations(){this.removeHandles(DrawGraphicTool_W.outline),this.removeHandles(DrawGraphicTool_W.regularVertices),this.removeHandles(DrawGraphicTool_W.activeVertex),this.removeHandles(Q)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(this._graphic,t),this._graphic;const o=this._graphic=new Graphic.A({...this.graphicProperties,symbol:this.graphicSymbol});return this.updateGraphicGeometry(o,t),this.internalGraphicsLayer.add(o),this.addHandles(this.initializeGraphic(o)),this.notifyChange("graphic"),this.addHandles((0,handleUtils.hA)((()=>{this.internalGraphicsLayer.remove(o),(0,maybe.pR)(o),this._graphic===o&&(this._graphic=null)})),Q),o}updateGraphicGeometry(t,e){t.geometry=e}_getCreateOperationGeometry(t={operationComplete:!1}){const{drawOperation:e}=this;if(null==e||0===e.numVertices)return null;const{coordinateHelper:o,view:i}=e,r=e.stagedVertex,n=e.committedVertices,l=n.slice(),a=null!=r;a&&l.push(o.pointToArray(r));const s=a?o.pointToArray(r):n.splice(-1)[0],p=l.length,c=i.spatialReference,h="3d"===i.type&&"global"===i.viewingMode,u=new J;switch(this.geometryType){case"point":case"mesh":u.regularVertices=n,u.activeVertex=s,u.full=o.arrayToPoint(l[0]);break;case"multipoint":u.regularVertices=n,u.activeVertex=s,p>0&&(u.full=function d(t,e){return new Multipoint.A({points:t,spatialReference:e})}(l,c));break;case"polyline":u.regularVertices=n,u.activeVertex=s,p>0&&(u.full=createUtils_R([l],c,h));break;case"polygon":u.regularVertices=n,u.activeVertex=s,p>0&&(u.full=j([l],c,h,!0));break;case"circle":if(p>0){const e=F(i,l[0]);if(1===p&&t.operationComplete){const t=l[0],o=e.makeMapPoint(t[0]+Y*i.resolution,t[1]);u.circle=L([t,o],e,!0),u.full=null!=u.circle?u.circle.geometry:null}else 2===p&&(this.forceUniformSize?(u.circle=L(l,e,this.centered),u.full=null!=u.circle?u.circle.geometry:null):(u.rectangle=function createUtils_v(t,o,n){const r=o.mapToLocalMultiple(t),a=r[0],l=r[1],s=Math.round(l.x-a.x),i=Math.round(l.y-a.y),c=g(n?a.x:a.x+s/2,n?a.y:a.y+i/2),p=n?s:s/2,y=n?i:i/2,f=[],x=2*Math.PI/60;function h(t){const e=Math.cos(t),o=Math.sin(t);return g(p*e+c.x,y*o+c.y)}for(let e=0;e<60;e++)f.push(h(e*x));f.push(f[0]);const{spatialReference:M,doUnnormalization:d}=o,R=j([f.map((t=>o.localToMap(t))).filter(arrayUtils.Ru)],M,d,!1),T=o.localToMap(h(Math.PI/2)),b=o.localToMap(h(0)),U=o.localToMap(h(-Math.PI/2)),P=o.localToMap(h(Math.PI));return{geometry:R,midpoints:null!=T&&null!=b&&null!=U&&null!=P?{top:createUtils_g(T,M),right:createUtils_g(b,M),bottom:createUtils_g(U,M),left:createUtils_g(P,M)}:null}}(l,e,this.centered),u.full=u.rectangle.geometry))}break;case"rectangle":if(p>0){const e=F(i,l[0]);if(1===p&&t.operationComplete){const t=l[0],o=e.makeMapPoint(t[0]+Y*i.resolution,t[1]);u.rectangle=T([t,o],e,!0),u.full=u.rectangle.geometry}else 2===p&&(u.rectangle=this.forceUniformSize?T(l,e,this.centered):function b(t,o,n){let r=o.mapToLocalMultiple(t);if(1===r.length){const t=48,e=r[0];r=[g(e.x-t,e.y+t),g(e.x+t,e.y-t),g(e.x+t,e.y-t),g(e.x-t,e.y+t)]}const a=[],l={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y};if(n){const t=Math.round(s.x-l.x),e=Math.round(s.y-l.y);a.push(g(l.x-t,l.y-e),g(s.x,l.y-e),g(s.x,s.y),g(l.x-t,s.y))}else a.push(g(l.x,l.y),g(s.x,l.y),g(s.x,s.y),g(l.x,s.y));return U(j([a.map((t=>o.localToMap(t))).filter(arrayUtils.Ru)],o.spatialReference,o.doUnnormalization,!0),a,o)}(l,e,this.centered),u.full=u.rectangle.geometry)}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":u.outline=p>1?createUtils_R([l],c,h):null;break;case"polygon":u.outline=p>1?j([l],c,h):null;break;case"circle":case"rectangle":u.outline="polygon"===u.full?.type?j(u.full.rings,c,h):null}return u}initializeGraphic(t){return(0,handleUtils.hA)()}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full).clone())}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(t){this._updateGraphic(),this._clearConstraints(),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this._clearConstraints(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),DrawGraphicTool_W.outline):this.removeHandles(DrawGraphicTool_W.outline),null!=t.regularVertices?this.addHandles(this.onRegularVerticesChanged(t.regularVertices),DrawGraphicTool_W.regularVertices):this.removeHandles(DrawGraphicTool_W.regularVertices),null!=t.activeVertex?this.addHandles(this.onActiveVertexChanged(t.activeVertex),DrawGraphicTool_W.activeVertex):this.removeHandles(DrawGraphicTool_W.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(Q)):this._destroyAllVisualisations()}get _tooltipInfo(){const{drawOperation:t,graphic:e,view:o}=this;if(!t)return null;const i=this.tooltipInfos,r=e?.geometry?.type;switch(this.geometryType){case"point":return"2d"===o.type&&0===this.defaultZ?null:"point"===r?i.point:null;case"polyline":return"polyline"===r?i.polyline:null;case"polygon":return"polygon"===r?i.polygon:null;case"rectangle":return"polygon"===r?i.rectangle:null;case"circle":return"polygon"===r?i.circle:null;case"mesh":return"mesh"===r?i.mesh:null;default:return null}}_updateTooltipInfo(){const{_tooltipInfo:t,tooltip:e}=this;if(t&&e){switch(t.type){case"draw-point":this._updateDrawPointTooltipInfo(t);break;case"draw-polyline":this._updateDrawPolylineTooltipInfo(t);break;case"draw-polygon":this._updateDrawPolygonTooltipInfo(t);break;case"draw-rectangle":this._updateDrawRectangleTooltipInfo(t);break;case"draw-circle":this._updateDrawCircleTooltipInfo(t);break;case"draw-mesh":this.updateDrawMeshTooltipInfo(t)}e.info=t}}_updateDrawPointTooltipInfo(t){const{drawOperation:e,graphic:o,view:i,tooltipOptions:r}=this,{elevationInfo:n,stagedVertex:l}=e;if(t.tooltipOptions=r,t.viewType=i.type,t.helpMessage=helpMessageUtils_e("point",o?.geometry),this.updateElevation(t.elevation),!l)return void(e.constraint=void 0);const a=e.coordinateHelper.spatialReference;e.constraint=this._getPointConstraint(this._getElevationConstraint(t.elevation.committed,a,i,n))}_updateDrawPolylineTooltipInfo(t){const e=this._createOperationGeometry,o=null!=e?e.full:null;if("polyline"!==o?.type)return;const{drawOperation:i,tooltipOptions:r,view:n}=this,{lastVertex:l,stagedVertex:s}=i;this._updatePolylineOrPolygonCommon(t,s);const p=(0,automaticLengthMeasurementUtils.t0)(o,this._elevationMode);t.totalLength.actual=p??quantityUtils.r7,t.totalLength.hidden=null==length||!l,t.tooltipOptions=r,t.viewType=n.type,t.helpMessage=helpMessageUtils_e("polyline",o),this.updateElevation(t.elevation)}_updateDrawPolygonTooltipInfo(t){const e=this._createOperationGeometry,o=null!=e?e.full:null;if("polygon"!==o?.type)return;const{drawOperation:i,tooltipOptions:r,view:n}=this,{lastVertex:l}=i;let a=i.stagedVertex;"polygon"===o?.type&&l&&!a&&(a=o.getPoint(0,o.rings[0].length-1)),this._updatePolylineOrPolygonCommon(t,a);const p=(0,automaticAreaMeasurementUtils.Y)(o,this._elevationMode);t.area.actual=p??quantityUtils.iT,t.area.hidden=null==p&&!l,t.tooltipOptions=r,t.viewType=n.type,t.helpMessage=helpMessageUtils_e("polygon",o),this.updateElevation(t.elevation)}_updatePolylineOrPolygonCommon(t,e){const{view:o,drawOperation:i}=this,{elevationInfo:r,lastVertex:n}=i;if(!n||!e)return t.distance.hidden=!0,t.orientation.hidden=!0,void(i.constraint=void 0);const l=(0,automaticLengthMeasurementUtils.I2)(n,e,this._elevationMode);t.distance.actual=l??quantityUtils.r7,t.distance.hidden=!1;const s=angularMeasurementUtils_d(n,e);t.orientation.actual=s??quantityUtils.IV,t.orientation.hidden=!1;const c=i.coordinateHelper.spatialReference;i.constraint=this._getPolylineOrPolygonConstraint(this._getDistanceConstraint(n,t.distance.committed,o,r),this._getOrientationConstraint(n,t.orientation.committed,o,r),this._getElevationConstraint(t.elevation.committed,c,o,r))}updateDrawMeshTooltipInfo(t){}_updateDrawRectangleTooltipInfo(t){t.tooltipOptions=this.tooltipOptions,t.xSize=this._xSize??quantityUtils.r7,t.ySize=this._ySize??quantityUtils.r7,t.area=this._fullGeometryArea??quantityUtils.iT}_updateDrawCircleTooltipInfo(t){const{forceUniformSize:e}=this;t.tooltipOptions=this.tooltipOptions,t.radius=e?this._circleRadius??quantityUtils.r7:null,t.xSize=e?null:this._xSize??quantityUtils.r7,t.ySize=e?null:this._ySize??quantityUtils.r7,t.area=this._fullGeometryArea??quantityUtils.iT}get _circleRadius(){const t=this._createOperationGeometry;return null!=t?.circle?.center&&null!=t.circle.edge?(0,automaticLengthMeasurementUtils.LS)(t.circle.center,t.circle.edge,this._elevationMode):null}get _xSize(){const t=this._createOperationGeometry?.rectangle?.midpoints;return null!=t?(0,automaticLengthMeasurementUtils.LS)(t.left,t.right,this._elevationMode):null}get _ySize(){const t=this._createOperationGeometry?.rectangle?.midpoints;return null!=t?(0,automaticLengthMeasurementUtils.LS)(t.top,t.bottom,this._elevationMode):null}get _fullGeometryArea(){const t=this._createOperationGeometry?.full;return"polygon"!==t?.type?null:(0,automaticAreaMeasurementUtils.Y)(t,this._elevationMode)}updateElevation(t){t.actual=this._vertexTooltipElevation}get _vertexTooltipElevation(){const{tooltipOptions:t,view:e,drawOperation:o}=this;if(null==o)return this._defaultElevation;const i=o.stagedVertex??o.lastVertex;if(null==i||"2d"===e.type)return this._defaultElevation;const r={mode:t.elevation.mode,offset:0},n=((0,elevationInfoUtils.wS)(e,i,o.elevationInfo,r)??0)*(0,unitUtils.G9)(i.spatialReference);return(0,quantityUtils.d_)(n,"meters")}get _elevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}_clearConstraints(){for(const[,t]of Object.entries(this.tooltipInfos))t.unlockAllFields()}};(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_createOperationGeometry",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_defaultElevation",null),(0,tslib_es6._)([(0,property.MZ)({value:!0})],K.prototype,"centered",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"cursor",null),(0,tslib_es6._)([(0,property.MZ)({nonNullable:!0})],K.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"drawOperation",void 0),(0,tslib_es6._)([(0,property.MZ)({value:!0})],K.prototype,"enabled",null),(0,tslib_es6._)([(0,property.MZ)({value:!0})],K.prototype,"forceUniformSize",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],K.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"graphic",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],K.prototype,"graphicProperties",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"graphicSymbol",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],K.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,type:SketchLabelOptions.A})],K.prototype,"labelOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],K.prototype,"geometryToPlace",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],K.prototype,"mode",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"snapToScene",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"tooltip",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"tooltipInfos",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,type:SketchTooltipOptions.A})],K.prototype,"tooltipOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],K.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],K.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,nonNullable:!0})],K.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_tooltipInfo",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_circleRadius",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_xSize",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_ySize",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_fullGeometryArea",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_vertexTooltipElevation",null),(0,tslib_es6._)([(0,property.MZ)()],K.prototype,"_elevationMode",null),K=(0,tslib_es6._)([(0,subclass.$)("esri.views.draw.DrawGraphicTool")],K);const Q="create-operation-graphic",DrawGraphicTool_W={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function X(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const Y=48},"./node_modules/@arcgis/core/views/draw/DrawOperation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O0:()=>k});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),diffUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"),UpdatingHandles=__webpack_require__("./node_modules/@arcgis/core/core/support/UpdatingHandles.js"),dehydratedFeatureComparison=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js"),elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");class DrawManipulator_t{constructor({grabbableForEvent:t}){this.events=new Evented.A,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=!0,this.grabbableForEvent=t}destroy(){}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}var coordinateHelper=__webpack_require__("./node_modules/@arcgis/core/views/interactive/coordinateHelper.js"),dragEventPipeline=__webpack_require__("./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js"),EditGeometry=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js"),EditGeometryOperations=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometryOperations.js"),normalizedPoint=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js"),SketchLabelOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchLabelOptions.js"),SketchTooltipOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchTooltipOptions.js"),SnappingContext=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js"),SnappingDragPipelineStep=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js"),Scheduler=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js"));let p=class extends Accessor.A{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,promiseUtils.sg)((async(t,s,o,r)=>{const n=this._frameTask;if(null==n)return;const e=await n.schedule((()=>s.snap({...t,context:o,signal:r})),r);e.valid&&await n.schedule((()=>{this.stagedPoint=e.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=s.update({...this._snapPoints,context:o}))}),r)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(Scheduler.W6.SNAPPING):Scheduler.nu}destroy(){this._abortController=(0,maybe.DC)(this._abortController),this._frameTask=(0,maybe.xt)(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:r,scenePoint:n}=t,e=s.update({point:r,scenePoint:n,context:o});return this.stagedPoint=e,e}async snap(t,s,o){const{point:r,scenePoint:n}=t;return this.stagedPoint=s.update({point:r,scenePoint:n,context:o}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async resnap(t,s){null!=this._snapPoints&&await this.snap(this._snapPoints,t,s)}abort(){this._abortController=(0,maybe.DC)(this._abortController),this._snapPoints=null}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],p.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"stagedPoint",null),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"constrainResult",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"_stagedPoint",void 0),p=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.snapping.SnappingOperation")],p);var snappingUtils=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");let k=class extends(Evented.A.EventedMixin(Accessor.A)){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new Set,this._stagedScreenPoint=null,this._stagedPointerType=null,this._stagedPointerId=null,this._updatingHandles=new UpdatingHandles.U,this.constraint=void 0,this.isDraped=!0,this.labelOptions=new SketchLabelOptions.A,this.tooltipOptions=new SketchTooltipOptions.A,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.lastVertex=null,null==e.elevationInfo&&(this.elevationInfo=(0,elevationInfoUtils.bK)(!!e.hasZ))}initialize(){const{geometryType:e,view:t}=this,i=t.spatialReference,n="viewingMode"in t.state?t.state.viewingMode:ViewingMode.RT.Local,o="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,coordinateHelper.BV)(this.hasZ,this.hasM,i),this._editGeometryOperations=new EditGeometryOperations.p(new EditGeometry.ZE(o,this.coordinateHelper)),this._snappingOperation=new p({view:t,constrainResult:e=>e?this._getEffectiveDrawSurface()?.constrainZ(e):void 0}),this.addHandles([(0,reactiveUtils.wB)((()=>this.stagedVertex),(e=>{null!=e&&this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:(e,t)=>(0,maybe.CM)(e,t,dehydratedFeatureComparison.C)}),(0,reactiveUtils.wB)((()=>this.view.viewpoint),((e,t)=>{e&&t&&(0,diffUtils.Ui)(e,t)&&this._onViewpointChange()}))]),this._activeComponent=new EditGeometry.uA(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const c=this.segmentLabels;null!=c&&(c.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles([(0,reactiveUtils.wB)((()=>this.labelOptions.enabled),(e=>{c.visible=e}),reactiveUtils.pc),this.on("cursor-update",(()=>{const e=this.stagedVertex;c.stagedVertex=null!=e?this.coordinateHelper.pointToVector(e):null}))])),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t})}const n=this._activeComponent.getLastVertex(),o=null!=n?this.coordinateHelper.vectorToDehydratedPoint(n.pos):null;null!=o&&null!=this.lastVertex&&(0,dehydratedFeatureComparison.C)(this.lastVertex,o)||(this.lastVertex=o)})));const l=this._manipulator=new DrawManipulator_t({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(l),l.grabbable="point"!==e,this.addHandles([this._createManipulatorDragPipeline(l),l.events.on("immediate-click",(e=>this._onImmediateClick(e))),l.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e))),(0,reactiveUtils.wB)((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:e})=>{l.cursor=e}),reactiveUtils.pc)]),(0,snappingUtils.BY)(this,(()=>{const e=this.view.inputManager.latestPointerType??"mouse",t=this._getSnappingContext(e);null!=this.snappingManager&&this._updatingHandles.addPromise((0,promiseUtils.QZ)(this._snappingOperation.resnap(this.snappingManager,t)))}))}destroy(){(0,maybe.pR)(this.segmentLabels),(0,maybe.pR)(this._snappingOperation),this._editGeometryOperations=(0,maybe.pR)(this._editGeometryOperations),this._updatingHandles.destroy()}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._getEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",e??"click")}get effectiveCursor(){return this.loading?"progress":this._hideDefaultCursor?null:this.cursor||"crosshair"}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return null!=this.stagedVertex?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get stagedVertex(){const e=this._snappingOperation.stagedPoint,{constraint:t,elevationInfo:i,view:n}=this;if(!e||!t)return e;const o=(0,normalizedPoint.vf)(e,n,i),r=o?t.closestTo(o):void 0;return r?(0,normalizedPoint.io)(r,e.spatialReference):e}set stagedVertex(e){this._snappingOperation.stagedPoint=(0,lang.o8)(e)}get updating(){return this._updatingHandles.updating}get vertices(){const e=this.committedVertices;return null!=this.stagedVertex&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),null!=this.stagedVertex){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),null!=this.snappingManager&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return(0,dragEventPipeline.Xt)(e,((e,t,i,n)=>{const o="touch"===n&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:r,cancelSnapping:s}=(0,SnappingDragPipelineStep.L)({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new SnappingContext.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:n,visualizer:this.snappingVisualizer}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});i=i.next((e=>(o&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),e))).next(s),t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||o&&0===this.numVertices)&&this.commitStagedVertex()),e))).next((0,dragEventPipeline.pg)(this.view,this.elevationInfo)).next(...r).next((e=>(o&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e)))}))}_createManipulatorDragPipelineFreehand(e){return(0,dragEventPipeline.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(null==this.stagedVertex&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return(0,dragEventPipeline.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(null==this.stagedVertex&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}get _drawAtFixedElevation(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if(null==this.elevationDrawSurface)return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;return null!=this.elevationInfo&&"absolute-height"===this.elevationInfo.mode&&(t=!0),null!=this.snapToSceneEnabled&&(t=this.snapToSceneEnabled),null!=this.elevationInfo&&"on-the-ground"===this.elevationInfo.mode&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getEffectiveDrawSurface()?.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent;if(null!=this._closeOnClickVertexIndex(e.screenPoint))return e.stopPropagation(),void this.complete();const i=this._screenToMap(e.screenPoint);if(null!=i)switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=(0,screenUtils.tc)(e.x,e.y);this._stagedScreenPoint=t,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId;const i=this._snappingOperation,n=this._manipulator;this._pointerDownStates.has(e.pointerId)||n.grabbing||!n.interactive?i.abort():(e.stopPropagation(),this._updateStagedVertexOnPointerMove(t,e.pointerType))}_onViewpointChange(){const e=this._manipulator;"mouse"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._pointerDownStates.has(this._stagedPointerId)&&!e.grabbing&&e.interactive?this._updateStagedVertexOnPointerMove(this._stagedScreenPoint,this._stagedPointerType??"mouse"):this._snappingOperation.abort()}_updateStagedVertexOnPointerMove(e,t){const i=this._snappingOperation,n=this._closeOnClickVertexIndex(e);if(null!=n)return this._closeOnVertex(n),void i.abort();const o=this._screenToMap(e),r=this._requiresScenePoint?this.drawSurface?.screenToMap(e):null;if(null==o)return this._hideDefaultCursor=!0,void i.abort();this._hideDefaultCursor=!1;const a=this.snappingManager;if(null==a)return this.stagedVertex=o,void i.abort();const p=this._getSnappingContext(t);this._updatingHandles.addPromise((0,promiseUtils.QZ)(i.snap({point:o,scenePoint:r},a,p)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getEffectiveDrawSurface()?.screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),null==e)return null;const i=this._screenToMap(t.screenEnd);return null!=i?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return null!=n&&function G(e,t,i){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o<=i}(n,t,25)}_getSnappingContext(e){const t=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new SnappingContext.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=t?{value:t,elevationInfo:this.elevationInfo}:null})}};(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"_hideDefaultCursor",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"_snappingOperation",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"_snappingEnabled",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"graphic",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"constraint",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,property.MZ)({value:"click"})],k.prototype,"drawingMode",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"elevationDrawSurface",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,type:SketchLabelOptions.A})],k.prototype,"labelOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,type:SketchTooltipOptions.A})],k.prototype,"tooltipOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"cursor",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"effectiveCursor",null),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"loading",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"drawSurface",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"segmentLabels",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"snappingVisualizer",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"snapToSceneEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"stagedVertex",null),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"lastVertex",void 0),(0,tslib_es6._)([(0,property.MZ)()],k.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],k.prototype,"view",void 0),k=(0,tslib_es6._)([(0,subclass.$)("esri.views.draw.DrawOperation")],k)},"./node_modules/@arcgis/core/views/draw/drawSurfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{IX:()=>o,rT:()=>r,uF:()=>c});var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js");class r{constructor(e,t,s,i=null){this._elevationInfo=e,this.defaultZ=t,this._view=s,this._excludeGraphics=i}screenToMap(t){if(null!=this.defaultZ)return this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.gs)(t.x,t.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const s=this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.gs)(t.x,t.y),this._elevationInfo,0,this._excludeGraphics);return null!=s&&(s.z=void 0),s}mapToScreen(e){const s=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_3__.T)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.wS)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(s)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__.EL)(e)).z=t),e}}class o{constructor(e,t,s=[]){this.view=e,this.elevationInfo=t,this.exclude=s}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude});return null!=t&&(t.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.id)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let s=e;return null!=this.elevationInfo&&(s=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_3__.T)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.wS)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(s)}constrainZ(e){return e}}class c{constructor(e,t=!1,s=0){this.view=e,this.hasZ=t,this.defaultZ=s,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const i=e.toMap(t);return i.z=s,i}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__.EL)(e)).z=t),e}}},"./node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>l});var a,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/interactive/interfaces.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js");!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(a||(a={}));class i{constructor(){this._isToolEditable=!0,this._manipulators=new Collection.A,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=a.WhenToolEditable){this.addMany([t],i)}addMany(t,i=a.WhenToolEditable){for(const a of t){const t={manipulator:a,visibilityPredicate:i,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let a=0;a<this._manipulators.length;a++)if(this._manipulators.at(a).manipulator===t){const t=this._manipulators.splice(a,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:t})=>t.destroy())),this._manipulators.destroy(),this._resourceContexts=null}on(t,a){return this._manipulators.on(t,(t=>{a(t)}))}forEach(t){for(const a of this._manipulators.items)t(a)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((a=>t.push(a.manipulator))),t}intersect(t,a){let i=null,e=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:o,attached:s})=>{if(!s||!o.interactive)return;const r=o.intersectionDistance(t,a);null!=r&&r<e&&(e=r,i=o)})),i}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const a=t.manipulator;a.grabbing=!1,a.dragging=!1,a.hovering=!1,a.selected=!1,a.detach&&a.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===a.Always||(this._isToolEditable?t.visibilityPredicate===a.WhenToolEditable:t.visibilityPredicate===a.WhenToolNotEditable)}}let l=class extends Accessor.A{constructor(t){super(t),this.manipulators=new i,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[interfaces.PK.MANAGER,!0],[interfaces.PK.USER,!0]]),this._creationFinishedResolver=(0,promiseUtils.Tw)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(interfaces.PK.USER)}set editable(t){this.setEditableFlag(interfaces.PK.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view?(this.view.focus(),this.onActivate()):Logger.A.getLogger(this).error("Can't activate tool if view is not defined.")}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===interfaces.PK.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){return this._editableFlags.get(t)??!1}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(interfaces.PK.USER)&&this.getEditableFlag(interfaces.PK.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],l.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"active",null),(0,tslib_es6._)([(0,property.MZ)({value:!0})],l.prototype,"visible",null),(0,tslib_es6._)([(0,property.MZ)({value:!0})],l.prototype,"editable",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"cursor",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"automaticManipulatorSelection",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"hasFocusedManipulators",null),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"hasGrabbedManipulators",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"hasHoveredManipulators",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"firstGrabbedManipulator",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"created",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],l.prototype,"removeIncompleteOnCancel",void 0),l=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.InteractiveToolBase")],l)},"./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EX:()=>P,RS:()=>O,Tp:()=>D,Xt:()=>d,Yl:()=>z,an:()=>y,n5:()=>x,ns:()=>w,pg:()=>C,qh:()=>j,rh:()=>U,sO:()=>q,y$:()=>v});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_layers_graphics_sources_interfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/sources/interfaces.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/draw/support/drawUtils.js"),_geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");function d(e,t){return e.events.on("drag",function f(e,t){let n=null,r=null;return a=>{if("cancel"===a.action)return void(null!=r&&(r.execute({action:"cancel"}),n=null,r=null));const o={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&null==n&&(n=new U,r=new U,t(e,n,r,a.pointerType,o)),null!=n&&n.execute(o),"end"===a.action&&null!=n&&(n=null,r=null)}}(e,t))}function y(e,t){const n=[e.x,e.y,e.z??0],r=t,a=[Math.cos(r),Math.sin(r)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(0===o)return null;a[0]/=o,a[1]/=o;const l=e=>{const t=(e.x-n[0])*a[0]+(e.y-n[1])*a[1];e.x=n[0]+t*a[0],e.y=n[1]+t*a[1]};return e=>(l(e.mapStart),l(e.mapEnd),{...e,axis:a})}function x(e,t){let n=null;return r=>{if("start"===r.action&&(n=function h(e,t,n){const r=e.geometry,a=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__.RS)(t);if(null==r)return null;if("mesh"===r.type)return function E(e,t,n,r){if(t.vertexSpace.isRelative)return function S(e,t,n,r){const a=g(n.getOriginPoint(t.spatialReference),r),l=t.spatialReference;return null==a?null:{move:(t,r,s,i)=>{const u=(0,_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__.Cy)(a.clone(),t,r,s);if(u.spatialReference.equals(l))n.setOriginFromPoint(u);else{const e=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(u,l);null!=e&&n.setOriginFromPoint(e)}if(n.isGeoreferenced)e.notifyGeometryChanged();else{const t="end"===i;e.notifyMeshTransformChanged(t?{action:_layers_graphics_sources_interfaces_js__WEBPACK_IMPORTED_MODULE_8__.$.UpdateFastLocalOrigin}:{})}}}}(e,t,t.vertexSpace,n);if(!t.spatialReference.equals(n))return null;let a=0,o=0,l=0;return{move:(n,s,c)=>{const i=n-a,p=s-o,f=c-l;if(i||p||f){const d=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__.A(t.origin.x+i,t.origin.y+p,(t.origin.z??0)+f,t.origin.spatialReference);t.centerAt(d,{geographic:t.vertexSpace.isRelative?void 0:r===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_10__.RT.Global}),e.notifyGeometryChanged(),a=n,o=s,l=c}}}}(e,r,a,n);const s=g(r,a),c=r.spatialReference;return null==s?null:{move:(t,n,r)=>{const a=(0,_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__.Cy)(s.clone(),t,n,r);a.spatialReference.equals(c)?e.geometry=a:e.geometry=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(a,c)}}}(e,r.mapStart.spatialReference,t)),null==n)return null;const a=r.mapEnd.x-r.mapStart.x,o=r.mapEnd.y-r.mapStart.y,l=r.mapEnd.z-r.mapStart.z;return n.move(a,o,l,r.action),{...r,translationX:a,translationY:o,translationZ:l}}}function g(e,t){return null==e?null:e.spatialReference.equals(t)?e.clone():(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,t)}function v(e,t=null,n){let r=null;const a=null==t||e.spatialReference?.equals(t)?e=>e:e=>null!=e?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,t):e,l={exclude:[],...n};return t=>{if("start"===t.action&&(r=a(e.toMap(t.screenStart,l))),null==r)return null;const n=a(e.toMap(t.screenEnd,l));return null!=n?{...t,mapStart:r,mapEnd:n}:null}}function j(t,n){const r=t.map((e=>x(e,n))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.Ru);return e=>{const t=e.mapEnd.x-e.mapStart.x,n=e.mapEnd.y-e.mapStart.y,a=e.mapEnd.z-e.mapStart.z;return r.forEach((t=>t(e))),{...e,translationX:t,translationY:n,translationZ:a}}}function z(e){return null!=e.geometry&&"mesh"===e.geometry.type?function M(e,t){const{vertexSpace:n}=t;if(n.isGeoreferenced){const n=t.vertexAttributes.clonePositional();return r=>(t.vertexAttributes=n,e.notifyGeometryChanged(),r)}const r=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.g)(n.origin),o=t.transform?.clone();return n=>(t.transform=o,t.vertexSpace.origin=r,e.notifyMeshTransformChanged(),n)}(e,e.geometry):function R(e,n){const r=new Map;for(const a of n)r.set(a,(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.o8)(e[a]));return t=>(r.forEach(((t,n)=>{e[n]=t})),t)}(e,["geometry"])}function w(e){const t=e.map((e=>z(e))).filter((e=>null!=e));return e=>(t.forEach((t=>t(e))),e)}function P(){let e=0,t=0,n=0;return r=>{"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,n=r.mapStart.z);const a=r.mapEnd.x-e,o=r.mapEnd.y-t,l=r.mapEnd.z-n;return e=r.mapEnd.x,t=r.mapEnd.y,n=r.mapEnd.z,{...r,mapDeltaX:a,mapDeltaY:o,mapDeltaZ:l,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function q(){let e=0,t=0;return n=>{"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);const r=n.screenEnd.x-e,a=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,{...n,screenDeltaX:r,screenDeltaY:a}}}function D(e,t){let a=null,o=0,l=0;return s=>{if("start"===s.action&&(a=e.toScreen?.(t),null!=a&&(a.x<0||a.x>e.width||a.y<0||a.y>e.height?a=null:(o=s.screenStart.x-a.x,l=s.screenStart.y-a.y))),null==a)return null;const c=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.qE)(s.screenEnd.x-o,0,e.width),i=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.qE)(s.screenEnd.y-l,0,e.height),u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_13__.tc)(c,i);return s.screenStart=a,s.screenEnd=u,s}}const G=()=>{};class U{constructor(){this.execute=G}next(e,t=new U){return null!=e&&(this.execute=n=>{const r=e(n);null!=r&&t.execute(r)}),t}}function C(e,t,n=[]){if("2d"===e.type)return e=>e;let r=null;return a=>{"start"===a.action&&(r=e.toMap(a.screenStart,{exclude:n}),null!=r&&(r.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.id)(r,e,t)));const o=e.toMap(a.screenEnd,{exclude:n});null!=o&&(o.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.id)(o,e,t));const l=null!=r&&null!=o?{sceneStart:r,sceneEnd:o}:null;return{...a,scenePoints:l}}}function F(e,t,n){const r=t.elevationProvider.getElevation(e.x,e.y,e.z??0,e.spatialReference,"scene")??0,a=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__.EL)(e);return a.z=r,a.hasZ=!0,a.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.id)(a,t,n),a}function O(e,t){if("2d"===e.type)return e=>e;let n=null;return r=>{"start"===r.action&&(n=F(r.mapStart,e,t));const a=F(r.mapEnd,e,t),o=null!=n&&null!=a?{sceneStart:n,sceneEnd:a}:null;return{...r,scenePoints:o}}}},"./node_modules/@arcgis/core/views/interactive/editGeometry/support/editPlaneUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bb:()=>V,CF:()=>x,G3:()=>l});var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/boundedPlane.js"),_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js"),_operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/MoveVertex.js"),_operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/RotateVertex.js"),_operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/ScaleVertex.js"),_operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/UpdateVertices.js");function V(o,i){return d(o,i,!1)}function x(o,i){return d(o,i,!0)}function d(o,i,s){if(o instanceof _operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_7__.D){if(o.operation instanceof _operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_8__.a)return function h(o,i,s=!1){const r=s?-1:1,n=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.f)(r*o.dx,r*o.dy,r*o.dz);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(i.origin,i.origin,n),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(i)}(o.operation,i,s),!0;if(o.operation instanceof _operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_5__.m)return function v(o,i,s=!1){const r=s?-o.angle:o.angle;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.J)(i.basis1,i.basis1,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.Z,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.J)(i.basis2,i.basis2,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.Z,r),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(i)}(o.operation,i,s),!0;if(o.operation instanceof _operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_6__.j)return function k(i,s,r=!1){const n=r?1/i.factor1:i.factor1,t=r?1/i.factor2:i.factor2;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.i)(s.basis1,s.basis1,n),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.i)(s.basis2,s.basis2,t),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.u)(s.origin,s.origin,i.origin,i.axis1,n),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.u)(s.origin,s.origin,i.origin,i.axis2,t),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(s)}(o.operation,i,s),!0}return!1}function l(o,c,f,u){u||(u=(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.a)());const p=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__.oG.get(),o[1],-o[0]),m=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),N=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),j=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__.oG.get();c.components.forEach((t=>t.vertices.forEach((t=>{const a=t.pos;(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(j,(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,a),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.g)(p,a)),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.z)(m,m,j),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.A)(N,N,j)}))));const E=1e-6,T=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__.oG.get(),N[0]-m[0]<E?f/2:0,N[1]-m[1]<E?f/2:0);return(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.c)(m,m,T),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.i)(N,N,T),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.a)(u.basis1,o,(N[0]-m[0])/2),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.a)(u.basis2,p,(N[1]-m[1])/2),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(u.origin,m[0]*o[0]+m[1]*p[0],m[0]*o[1]+m[1]*p[1]),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.i)(u.origin,u.origin,u.basis1),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.i)(u.origin,u.origin,u.basis2),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(u),u}},"./node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>f});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js"),_SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js"),_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js");function f({predicate:o=(()=>!0),snappingManager:i,snappingContext:l,updatingHandles:u,useZ:c=!0}){const p=new _dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__.rh;if(null==i)return{snappingStep:[y,p],cancelSnapping:y};let f,Z=null,j=null,z=null;const T=()=>{Z=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__.DC)(Z),i.doneSnapping(),j?.frameTask.remove(),j=null,f=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__.xt)(f),z=null},k=function d(n,e,t){return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.sg)((async({frameTask:o,point:r,scenePoint:l,context:a,event:s,delta:u,getLastState:c},p)=>{const f=await o.schedule((()=>n.snap({point:r,scenePoint:l,context:a,signal:p})),p);if(f.valid){let l=await o.schedule((()=>f.apply()),p);const d=c();null!=d.point&&r!==d.point&&(l=n.update({point:d.point,scenePoint:d.scenePoint,context:a})),null!=d.updatePoint&&(0,_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__.C)(l,d.updatePoint)||(h(s.mapEnd,l,u,e),t.execute(s))}}))}(i,c,p);let w=null,I=null,U=null;return{snappingStep:[n=>{if(!o(n))return n;const{action:e}=n;if("start"===e){const{info:e}=n,t=function m(n){return"3d"===n.type?n.resourceController.scheduler.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__.W6.SNAPPING):_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__.nu}(i.view);if(j=function g(n,e,t){return{context:new _SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__.e({editGeometryOperations:n.editGeometryOperations,elevationInfo:n.elevationInfo,pointer:n.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:n.excludeFeature,feature:n.feature,visualizer:n.visualizer}),originalPos:null!=e.snapOrigin?n.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:t}}(l,n,t),j.context.selfSnappingZ=null,!c&&null!=e){const n=function S(n,e){if(!n.hasZ())return null;const t=e.vertices;let o=null;for(const r of t){const e=n.getZ(r.pos);if(null!=o&&null!=e&&Math.abs(e-o)>1e-6)return null;null==o&&(o=e)}return o}(l.coordinateHelper,e.handle.component);null!=n&&(j.context.selfSnappingZ={value:n,elevationInfo:l.elevationInfo??_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__.qt})}}if(null!=j){const{context:o,originalScenePos:l,originalPos:a}=j,{mapEnd:s,mapStart:p,scenePoints:d}=n,m=x(a,v(s,p)),g=v(p,a),S={...n,action:"update"},y=j.context,T=function P(n,e){return null==n||null==e?null:x(n,v(e.sceneEnd,e.sceneStart))}(l,d),C=i.update({point:m,scenePoint:T,context:o});if(U=C,h(s,C,g,c),w=m,I=T,"end"!==e){const{frameTask:n}=j;null==Z&&(Z=new AbortController),z=e=>{u.addPromise((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.QZ)(k({frameTask:n,event:S,context:y,point:m,scenePoint:T,delta:g,getLastState:()=>({point:w,scenePoint:I,updatePoint:e.forceUpdate?null:U})},Z.signal)))},z({forceUpdate:!1}),null==f&&(f=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__.wB)((()=>i.options.effectiveEnabled),(()=>z?.({forceUpdate:!0}))))}}return"end"===e&&T(),n},p],cancelSnapping:n=>(T(),n)}}function x(n,[e,t,o]){const r=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__.EL)(n);return r.x+=e,r.y+=t,r.hasZ&&(r.z+=o),r}function v(n,e){const t=n.hasZ&&e.hasZ?n.z-e.z:0;return[n.x-e.x,n.y-e.y,t]}function h(n,e,[t,o,r],i){n.x=e.x+t,n.y=e.y+o,i&&n.hasZ&&e.hasZ&&(n.z=e.z+r)}function y(n){return n}},"./node_modules/@arcgis/core/views/interactive/tooltip/fields/fields.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Am:()=>U,S3:()=>g,R0:()=>m,LJ:()=>fields_p});var Cyclical=__webpack_require__("./node_modules/@arcgis/core/core/Cyclical.js"),quantityUtils=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),unitUtils=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let p=class extends Accessor.A{constructor(t){super(t),this.committed=null,this.disabled=!1,this.hidden=!1,this.id=(0,uuid.lk)(),this.inputValue=null,this.readOnly=!1}get dirty(){return null!=this.inputValue}get locked(){return null!=this.committed}lock(t){this.inputValue=null,this.committed=t??this.actual}unlock(){this.committed=null,this.inputValue=null}};(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"actual",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"committed",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"createQuantity",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"disabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"hidden",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"format",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"inputValue",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"readOnly",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"suffix",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"title",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"toInputUnits",void 0),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"dirty",null),(0,tslib_es6._)([(0,property.MZ)()],p.prototype,"locked",null),p=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.fields.TooltipField")],p);let c=class extends p{constructor(t){super(t),this.mode="absolute-height"}normalizeCtorArgs(t){const s=t=>t.inputUnitInfos.verticalLength.unit;return{actual:quantityUtils.r7,createQuantity:(t,o)=>(0,quantityUtils.d_)(t,s(o)),toInputUnits:(t,o)=>(0,quantityUtils.kM)(t,s(o)),format:(t,o)=>o.formatters.verticalLength(t),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch.elevation,...t}}};(0,tslib_es6._)([(0,property.MZ)()],c.prototype,"mode",void 0),c=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],c);const fields_p=o=>{const r=t=>t.inputUnitInfos.orientation.unit;return new p({actual:quantityUtils.IV,createQuantity:(t,e)=>(0,quantityUtils.Wq)(t,r(e),"geographic"),toInputUnits:({value:e,unit:o,rotationType:a},s)=>{const l=(0,quantityUtils.g2)((0,unitUtils.oU)(e,o,"degrees"),a,"geographic"),p=Cyclical.ie.normalize(l,0,!0),m=r(s),g=(0,unitUtils.oU)(p,"degrees",m);return(0,quantityUtils.Wq)(g,m,"geographic")},format:(t,e)=>e.formatters.angle(t),suffix:t=>t.inputUnitInfos.orientation.abbreviation,title:t=>t.messages.sketch.orientation,...o})},m=t=>{const e=t=>t.inputUnitInfos.length.unit;return new p({actual:quantityUtils.r7,createQuantity:(t,n)=>(0,quantityUtils.d_)(t,e(n)),toInputUnits:(t,n)=>(0,quantityUtils.kM)(t,e(n)),format:(t,e)=>e.formatters.length(t),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})},g=t=>new c(t),U=t=>{const e=t=>t.inputUnitInfos.area.unit;return new p({actual:quantityUtils.iT,createQuantity:(t,n)=>(0,quantityUtils.gT)(t,e(n)),toInputUnits:(t,n)=>(0,quantityUtils.kM)(t,e(n)),format:(t,e)=>e.formatters.area(t),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,...t})}}}]);