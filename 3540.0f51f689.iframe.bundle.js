"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[3540],{"./node_modules/@arcgis/core/chunks/mat3f64.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function n(e,r){return new Float64Array(e,r,9)}__webpack_require__.d(__webpack_exports__,{a:()=>n,c:()=>e});Object.freeze(Object.defineProperty({__proto__:null,create:e,clone:function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function t(e,r,t,n,o,a,u,c,f){return[e,r,t,n,o,a,u,c,f]},createView:n},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/vec3f32.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function a(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function s(){return r(0,1,0)}function c(){return r(0,0,1)}__webpack_require__.d(__webpack_exports__,{b:()=>t,c:()=>n,f:()=>r});const i=a(),f=o(),l=u(),_=s(),y=c();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:t,fromValues:r,createView:function e(n,t){return new Float32Array(n,t,3)},zeros:a,ones:o,unitX:u,unitY:s,unitZ:c,ZEROS:i,ONES:f,UNIT_X:l,UNIT_Y:_,UNIT_Z:y},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{SR:()=>p,Ui:()=>a});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/boundsUtils.js"),_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js"),_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function a(t){return f(t,!0)}function p(t){return f(t,!1)}function f(i,n){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.Wi)(i))return null;const a=i.spatialReference,p=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.C5)(a),f="toJSON"in i?i.toJSON():i;if(!p)return f;const I=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.sS)(a)?102100:4326,g=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.UZ[I].maxX,v=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.UZ[I].minX;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.wp)(f))return y(f,g,v);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.aW)(f))return f.points=f.points.map((t=>y(t,g,v))),f;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.YX)(f))return d(f,p);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.oU)(f)||(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.l9)(f)){const t=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__.$P)(S,f),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},e=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(i.xmin,v)*(2*g),h=0===e?f:(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.Sy)(f,e);return i.xmin+=e,i.xmax+=e,i.xmax>g?P(h,g,n):i.xmin<v?P(h,v,n):h}return f}function d(t,i){if(!i)return t;const s=function I(t,i){const s=[],{ymin:n,ymax:e,xmin:h,xmax:o}=t,r=t.xmax-t.xmin,[u,m]=i.valid,{x,frameId:_}=g(t.xmin,i),{x:l,frameId:c}=g(t.xmax,i),a=x===l&&r>0;if(r>2*m){const t={xmin:h<o?x:l,ymin:n,xmax:m,ymax:e},i={xmin:u,ymin:n,xmax:h<o?l:x,ymax:e},r={xmin:0,ymin:n,xmax:m,ymax:e},a={xmin:u,ymin:n,xmax:0,ymax:e},p=[],f=[];v(t,r)&&p.push(_),v(t,a)&&f.push(_),v(i,r)&&p.push(c),v(i,a)&&f.push(c);for(let s=_+1;s<c;s++)p.push(s),f.push(s);s.push(new C(t,[_]),new C(i,[c]),new C(r,p),new C(a,f))}else x>l||a?s.push(new C({xmin:x,ymin:n,xmax:m,ymax:e},[_]),new C({xmin:u,ymin:n,xmax:l,ymax:e},[c])):s.push(new C({xmin:x,ymin:n,xmax:l,ymax:e},[_]));return s}(t,i).map((t=>t.extent));return s.length<2?s[0]||t:s.length>2?(t.xmin=i.valid[0],t.xmax=i.valid[1],t):{rings:s.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function y(t,i,s){if(Array.isArray(t)){const n=t[0];if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,i);t[0]=n+s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,s);t[0]=n+i*(-2*s)}}else{const n=t.x;if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,i);t.x+=s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,s);t.x+=i*(-2*s)}}return t}function g(t,i){const[s,n]=i.valid,e=2*n;let h,o=0;return t>n?(h=Math.ceil(Math.abs(t-n)/e),t-=h*e,o=h):t<s&&(h=Math.ceil(Math.abs(t-s)/e),t+=h*e,o=-h),{x:t,frameId:o}}function v(t,i){const{xmin:s,ymin:n,xmax:e,ymax:h}=i;return O(t,s,n)&&O(t,s,h)&&O(t,e,h)&&O(t,e,n)}function O(t,i,s){return i>=t.xmin&&i<=t.xmax&&s>=t.ymin&&s<=t.ymax}function P(t,i,s=!0){const e=!(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.l9)(t);if(e&&(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.Zy)(t),s)return(new T).cut(t,i);const h=e?t.rings:t.paths,o=e?4:2,r=h.length,m=-2*i;for(let n=0;n<r;n++){const t=h[n];if(t&&t.length>=o){const i=[];for(const s of t)i.push([s[0]+m,s[1]]);h.push(i)}}return e?t.rings=h:t.paths=h,t}class C{constructor(t,i){this.extent=t,this.frameIds=i}}const S=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__.Ue)();class T{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,i){let s;if(this._xCut=i,t.rings)this._closed=!0,s=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,s=t.paths,this._minPts=2}for(const e of s){if(!e||e.length<this._minPts)continue;let t=!0;for(const i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),s=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&s.push(e);const n=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=n;s.push(e)}return this._closed?t.rings=s:t.paths=s,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const i=this._side(t[0]);if(i*this._prevSide==-1){const s=this._intersect(this._prevPt,t);this._lineTo(this._xCut,s,0),this._prevSide=0,this._lineTo(t[0],t[1],i)}else this._lineTo(t[0],t[1],i);this._prevSide=i,this._prevPt=t}close(){const t=this._firstPt,i=this._prevPt;t[0]===i[0]&&t[1]===i[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,i,s){this._closed?(this._lineIn.push([s<=0?t:this._xCut,i]),this._lineOut.push([s>=0?t:this._xCut,i])):(s<=0&&this._lineIn.push([t,i]),s>=0&&this._lineOut.push([t,i]))}_lineTo(t,i,s){this._closed?(this._addPolyVertex(this._lineIn,s<=0?t:this._xCut,i),this._addPolyVertex(this._lineOut,s>=0?t:this._xCut,i)):s<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,i])):s>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,i])):this._prevSide<0?(this._lineIn.push([t,i]),this._lineOut.push([t,i])):this._prevSide>0&&(this._lineOut.push([t,i]),this._lineIn.push([t,i]))}_addPolyVertex(t,i,s){const n=t.length;n>1&&t[n-1][0]===i&&t[n-2][0]===i?t[n-1][1]=s:t.push([i,s])}_checkClosingPt(t){const i=t.length;i>3&&t[0][0]===this._xCut&&t[i-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[i-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,i){const s=(this._xCut-t[0])/(i[0]-t[0]);return t[1]+s*(i[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},"./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>LayerView2D_y});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Container=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/Container.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js");let t=class extends JSONSupport.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],t.prototype,"version",null),t=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipArea")],t);const p=t;var s;let i=s=class extends p{constructor(t){super(t),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"left",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"right",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"top",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"bottom",void 0),i=s=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipRect")],i);const ClipRect_p=i;__webpack_require__("./node_modules/@arcgis/core/geometry.js");var y,Geometry=__webpack_require__("./node_modules/@arcgis/core/geometry/Geometry.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");const c={base:Geometry.Z,key:"type",typeMap:{extent:Extent.Z,polygon:Polygon.Z}};let n=y=class extends p{constructor(r){super(r),this.type="geometry",this.geometry=null}clone(){return new y({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,tslib_es6._)([(0,property.Cb)({types:c,json:{read:jsonUtils.im,write:!0}})],n.prototype,"geometry",void 0),n=y=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Geometry")],n);const a=n;let e=class extends p{constructor(r){super(r),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,tslib_es6._)([(0,property.Cb)({type:[[[Number]]],json:{write:!0}})],e.prototype,"path",void 0),e=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Path")],e);const Path_p=e,u=Collection.Z.ofType({key:"type",base:null,typeMap:{rect:ClipRect_p,path:Path_p,geometry:a}}),LayerView2D_y=t=>{let h=class extends t{constructor(){super(...arguments),this.attached=!1,this.clips=new u,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1}initialize(){const e=this.view?.spatialReferenceLocked??!0,t=this.view?.spatialReference;t&&e&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new Error.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new Container.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([(0,reactiveUtils.YP)((()=>this.suspended),(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer?.opacity??1),(e=>{this.container&&(this.container.opacity=e)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(e=>{this.container&&(this.container.blendMode=e)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(e=>{this.container&&(this.container.effect=e)}),reactiveUtils.tX),(0,reactiveUtils.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null})),(({scale:e})=>{const t=e&&this.isVisibleAtScale(e);t!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",t)}),reactiveUtils.tX)]),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const e=this.view?.spatialReference;return null==e||this.supportsSpatialReference(e)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this.updatingHandles?.updating)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}isVisibleAtScale(e){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;const{minScale:s,maxScale:i}=t;return(0===s||e<=s)&&(0===i||e>=i)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}supportsSpatialReference(e){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const e=super.getSuspendInfo(),t=!this.spatialReferenceSupported,s=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),s&&(e.outsideScaleRange=s),e}};return(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"attached",void 0),(0,tslib_es6._)([(0,property.Cb)({type:u,set(e){const t=(0,collectionUtils.Z)(e,this._get("clips"),u);this._set("clips",t)}})],h.prototype,"clips",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"moving",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"spatialReferenceSupported",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"visibleAtCurrentScale",void 0),h=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.LayerView2D")],h),h}},"./node_modules/@arcgis/core/views/2d/layers/MediaLayerView2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>R});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=(__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/core/Collection.js")),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),MapUtils=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),contains=__webpack_require__("./node_modules/@arcgis/core/geometry/support/contains.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),normalizeUtilsSync=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js");let mediaUtils_a=class extends Accessor.Z{constructor(o){super(o)}get bounds(){const o=this.coords;return(0,maybe.Wi)(o)||(0,maybe.Wi)(o.extent)?null:(0,aaBoundingRect.oJ)(o.extent)}get coords(){const o=(0,maybe.Wg)(this.element.georeference)?.coords;return(0,projection.dz)(o,this.spatialReference).geometry}get normalizedCoords(){return Polygon.Z.fromJSON((0,normalizeUtilsSync.Ui)(this.coords))}get normalizedBounds(){const o=(0,maybe.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,maybe.pC)(o)?(0,aaBoundingRect.oJ)(o):null}};(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"element",void 0),(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"bounds",null),(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"coords",null),(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"normalizedCoords",null),(0,tslib_es6._)([(0,property.Cb)()],mediaUtils_a.prototype,"normalizedBounds",null),mediaUtils_a=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.media.MediaElementView")],mediaUtils_a);__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/PagedTileQueue.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");var TileQueue=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js"),TileStrategy=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),events=__webpack_require__("./node_modules/@arcgis/core/core/events.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");const f=(0,__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js").c)(),i=(0,mat3f64.c)(),e=(0,mat3f64.c)(),p=(0,mat3f64.c)();function j(s,n,o){return k(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),k(p,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),(0,mat3.m)(s,(0,mat3.a)(e,e),p)}function k(o,c,u,e,p,h,j,k,v){(0,mat3.s)(o,c,e,h,u,p,j,1,1,1),(0,vec3.s)(f,k,v,1),(0,mat3.a)(i,o);const[x,b,d]=(0,vec3.t)(f,f,(0,mat3.t)(i,i));return(0,mat3.s)(i,x,0,0,0,b,0,0,0,d),(0,mat3.m)(o,i,o)}var vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),DisplayObject=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"),BufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),VertexArrayObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js"),isWebGL2Context=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js");const b=(0,mat3f64.c)();class V extends DisplayObject.s{constructor(s){super(),this.elementView=s,this.isWrapAround=!1,this.perspectiveTransform=(0,vec2f64.a)(),this._vertices=new Float32Array(20),this._handles=[],this._handles.push((0,reactiveUtils.YP)((()=>this.elementView.element.opacity),(e=>this.opacity=e),reactiveUtils.nn),(0,reactiveUtils.YP)((()=>[this.elementView.coords]),(()=>{this.requestRender()}),reactiveUtils.nn),(0,reactiveUtils.gx)((()=>this.elementView.element.loaded),(()=>{const e=this.elementView.element;this.ready(),"video"===e.type&&(0,maybe.pC)(e.content)&&this._handles.push((0,events.on)(e.content,"play",(()=>this.requestRender())))}),reactiveUtils.nn)),s.element.load().catch((t=>{Logger.Z.getLogger("esri.views.2d.layers.MediaLayerView2D").error(new Error.Z("element-load-error","Element cannot be displayed",{element:s,error:t}))}))}destroy(){this._handles.forEach((e=>e.remove())),this.texture?.dispose(),this.texture=null}get dvsMat3(){return this.parent.dvsMat3}beforeRender(e){const{context:t}=e,r=this.elementView.element.content;if((0,maybe.pC)(r)){const e=r instanceof HTMLImageElement,i=r instanceof HTMLVideoElement,o=e?r.naturalWidth:i?r.videoWidth:r.width,n=e?r.naturalHeight:i?r.videoHeight:r.height;this._updatePerspectiveTransform(o,n),this.texture?i&&!r.paused&&(this.texture.setData(r),this.requestRender(),((0,isWebGL2Context.Z)(t.gl)||(0,mathUtils.wt)(o)&&(0,mathUtils.wt)(n))&&this.texture.generateMipmap()):(this.texture=new Texture.x(t,{pixelFormat:enums.VI.RGBA,dataType:enums.Br.UNSIGNED_BYTE,samplingMode:enums.cw.LINEAR,wrapMode:enums.e8.CLAMP_TO_EDGE,width:o,height:n,preMultiplyAlpha:!0},r),((0,isWebGL2Context.Z)(t.gl)||(0,mathUtils.wt)(o)&&(0,mathUtils.wt)(n))&&this.texture.generateMipmap(),i&&!r.paused&&this.requestRender())}super.beforeRender(e)}_createTransforms(){return null}updateDrawCoords(e,t){const r=this.elementView.coords;if((0,maybe.Wi)(r))return;const[s,i,n,a]=r.rings[0],m=this._vertices,{x:h,y:c}=e,l=0!==t;l?m.set([i[0]-h,i[1]-c,s[0]-h,s[1]-c,n[0]-h,n[1]-c,a[0]-h,a[1]-c,a[0]-h,a[1]-c,i[0]+t-h,i[1]-c,i[0]+t-h,i[1]-c,s[0]+t-h,s[1]-c,n[0]+t-h,n[1]-c,a[0]+t-h,a[1]-c]):m.set([i[0]-h,i[1]-c,s[0]-h,s[1]-c,n[0]-h,n[1]-c,a[0]-h,a[1]-c]),this.isWrapAround=l}getVAO(e,t,r){if((0,maybe.Wi)(this.elementView.coords))return null;const s=this._vertices;if(this._vao)this._geometryVbo.setData(s);else{this._geometryVbo=BufferObject.f.createVertex(e,enums.l1.DYNAMIC_DRAW,s);const i=BufferObject.f.createVertex(e,enums.l1.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new VertexArrayObject.U(e,r,t,{geometry:this._geometryVbo,tex:i})}return this._vao}_updatePerspectiveTransform(e,t){const r=this._vertices;j(b,[0,0,e,0,0,t,e,t],[r[0],r[1],r[4],r[5],r[2],r[3],r[6],r[7]]),(0,vec2.s)(this.perspectiveTransform,b[6]/b[8]*e,b[7]/b[8]*t)}}var screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f32.js"),vec2f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f32.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f32.js"),normalizeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),viewpointUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/viewpointUtils.js"),brushes=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/brushes.js"),webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),WGLContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");class M extends WGLContainer.Z{constructor(){super(...arguments),this._localOrigin=(0,screenUtils.vW)(0,0),this._viewStateId=-1,this._dvsMat3=(0,mat3f32.c)(),this.requiresDedicatedFBO=!1}get dvsMat3(){return this._dvsMat3}beforeRender(t){this._updateMatrices(t),this._updateOverlays(t,this.children);for(const e of this.children)e.beforeRender(t)}prepareRenderPasses(t){const e=t.registerRenderPass({name:"overlay",brushes:[brushes.U.overlay],target:()=>this.children,drawPhase:webgl_enums.jx.MAP});return[...super.prepareRenderPasses(t),e]}_updateMatrices(t){const{state:e}=t,{id:n,size:h,pixelRatio:l,resolution:m,rotation:f,viewpoint:u,displayMat3:M}=e;if(this._viewStateId===n)return;const v=Math.PI/180*f,_=l*h[0],w=l*h[1],{x:y,y:g}=u.targetGeometry,j=(0,normalizeUtils.or)(y,e.spatialReference);this._localOrigin.x=j,this._localOrigin.y=g;const b=m*_,R=m*w,O=(0,mat3.g)(this._dvsMat3);(0,mat3.m)(O,O,M),(0,mat3.h)(O,O,(0,vec2f32.f)(_/2,w/2)),(0,mat3.d)(O,O,(0,vec3f32.f)(_/b,-w/R,1)),(0,mat3.r)(O,O,-v),this._viewStateId=n}_updateOverlays(e,s){const{state:r}=e,{rotation:o,spatialReference:a,worldScreenWidth:i,size:n,viewpoint:c}=r,p=this._localOrigin;let d=0;if(a.isWrappable){const e=n[0],m=n[1],f=180/Math.PI*o,u=Math.abs(Math.cos(f)),M=Math.abs(Math.sin(f)),v=Math.round(e*u+m*M),[_,w]=(0,spatialReferenceUtils.C5)(a).valid,y=(0,viewpointUtils.ut)(a),{x:g,y:j}=c.targetGeometry,b=[g,j],R=[0,0];r.toScreen(R,b);const O=[0,0];let P;P=v>i?.5*i:.5*v;const x=Math.floor((g+.5*y)/y),C=_+x*y,D=w+x*y,I=[R[0]+P,0];r.toMap(O,I),O[0]>D&&(d=y),I[0]=R[0]-P,r.toMap(O,I),O[0]<C&&(d=-y);for(const r of s){const e=r.elementView.bounds;if((0,maybe.Wi)(e))continue;const[s,,o]=e;s<_&&o>_?r.updateDrawCoords(p,y):o>w&&s<w?r.updateDrawCoords(p,-y):r.updateDrawCoords(p,d)}}else for(const t of s)t.updateDrawCoords(p,d)}}var LayerView2D=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js"),LayerView=__webpack_require__("./node_modules/@arcgis/core/views/layers/LayerView.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js");let MediaLayerView2D_j=class extends((0,LayerView2D.y)(LayerView.Z)){constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this.layer=null,this.elements=new Collection.Z}attach(){this.handles.add((0,reactiveUtils.on)((()=>this.layer.source),"refresh",(()=>{for(const e of this._tileStrategy.tiles)this._updateTile(e);this.requestUpdate()}))),this._overlayContainer=new M,this.container.addChild(this._overlayContainer),this._fetchQueue=new TileQueue.Z({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t)}),this._tileStrategy=new TileStrategy.Z({cachePolicy:"purge",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){this.handles.removeAll(),this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear()}supportsSpatialReference(e){return!0}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){this._tileStrategy.update(e)}async hitTest(e,t){const s=[],r=e.normalize(),o=[r.x,r.y];for(const{projectedElement:{normalizedCoords:l,element:n}}of this._elementReferences.values())(0,maybe.pC)(l)&&(0,contains.wP)(l.rings,o)&&s.push({type:"media",element:n,layer:this.layer,mapPoint:e});return s.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){}_acquireTile(e){const t=new T(e.clone());return this._updateTile(t),t}_updateTile(e){this.updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[s,r]=e.setElements(t);this._acquireElements(e,s),this._releaseElements(e,r),this.requestUpdate()}),(e=>{(0,promiseUtils.D_)(e)||Logger.Z.getLogger(this.declaredClass).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._releaseElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const s=this.layer.source;if((0,maybe.Wi)(s))return[];this.view.featuresTilingScheme.getTileBounds(w,e,!0);const r=new Extent.Z({xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3],spatialReference:this.view.spatialReference});return s.queryElements(r,t)}_acquireElements(e,t){const s=this.layer.source,i=this.view.spatialReference;if(!(0,maybe.Wi)(s))for(const o of t)(0,MapUtils.s1)(this._elementReferences,o.uid,(()=>{const e=new mediaUtils_a({element:o,spatialReference:i}),t=new V(e);return this._overlayContainer.addChild(t),this.elements.add(o),{tiles:new Set,projectedElement:e,overlay:t}})).tiles.add(e)}_releaseElements(e,t){for(const s of t){const t=this._elementReferences.get(s.uid);t.tiles.delete(e),t.tiles.size||(this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.projectedElement.destroy(),this._elementReferences.delete(s.uid),this.elements.remove(s))}}};(0,tslib_es6._)([(0,property.Cb)()],MediaLayerView2D_j.prototype,"_fetchQueue",void 0),(0,tslib_es6._)([(0,property.Cb)()],MediaLayerView2D_j.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],MediaLayerView2D_j.prototype,"elements",void 0),MediaLayerView2D_j=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.MediaLayerView2D")],MediaLayerView2D_j);const w=(0,aaBoundingRect.Ue)();class T{constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}setElements(e){const t=[],s=new Set(this.elements);this.elements=e;for(const r of e)s.has(r)?s.delete(r):t.push(r);return this.isReady=!0,[t,Array.from(s)]}}const R=MediaLayerView2D_j},"./node_modules/@arcgis/core/views/layers/LayerView.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_Evented_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),_core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Identifiable.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let d=class extends((0,_core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_2__.p)((0,_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__.IG)((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__.v)(_core_Evented_js__WEBPACK_IMPORTED_MODULE_1__.Z.EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.Pt)(this.get("layer.opacity"),1)*(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"visible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"view",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.j)("esri.views.layers.LayerView")],d);const u=d}}]);