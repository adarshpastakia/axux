"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[1835],{"./node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>C,b:()=>w});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function w(w){const C=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__.kG,{vertex:j,fragment:y,attributes:L,varyings:O}=C;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.Sv)(j,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__.w,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__.c,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__.k,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__.R,w),L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.T.POSITION,"vec3"),w.vvColor&&L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.T.COLORFEATUREATTRIBUTE,"float"),O.add("vColor","vec4"),O.add("vpos","vec3");const T=w.hasMultipassTerrain&&(w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color||w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha);T&&O.add("depth","float"),j.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__.N("eColor",(e=>e.color)));const A=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Depth;A&&(C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__.F,w),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.Zu)(C),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.Lm)(C)),j.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      forwardObjectAndLayerIdColor();

      ${w.hasVertexColors?"vColor *= eColor;":w.vvColor?"vColor = eColor * interpolateVVColor(colorFeatureAttribute);":"vColor = eColor;"}
      ${T?"depth = (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${A?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`transformPosition(proj, view, vpos);`}
    }
  `),C.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,w),T&&C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__.l,w),y.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__.Y);const $=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Highlight;return $&&C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__.bA,w),y.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`
  void main() {
    discardBySlice(vpos);
    ${T?"terrainDepthTest(gl_FragCoord, depth);":""}
    vec4 fColor = vColor;

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`fColor.a = 1.0;`:""}

    if (fColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__.b)}) {
      discard;
    }

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`fragColor = vec4(fColor.a);`:""}

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`fragColor = highlightSlice(fColor, vpos); ${w.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__.A.Color?"fragColor = premultiplyAlpha(fragColor);":""}`:""}
    ${$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`outputHighlight();`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Depth?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`outputDepth(linearDepth);`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.H`outputObjectAndLayerIdColor();`:""}
  }
  `),C}const C=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>H,b:()=>$,c:()=>D});var _vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_views_3d_support_engineContent_sdfPrimitives_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function $(o){const i=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__.kG,$=o.signedDistanceFieldEnabled;if(i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__.R,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__.f5,o),o.occlusionPass)return i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__.R,o),i;const{vertex:B,fragment:H}=i;i.include(_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__.cK),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__.n),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__.Y),i.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__.k,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__.R,o),i.varyings.add("vcolor","vec4"),i.varyings.add("vtc","vec2"),i.varyings.add("vsize","vec2"),o.binaryHighlightOcclusionEnabled&&i.varyings.add("voccluded","float"),B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.N("viewport",((e,o)=>o.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.A("screenOffset",((o,i)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(F,2*o.screenOffset[0]*i.camera.pixelRatio,2*o.screenOffset[1]*i.camera.pixelRatio))),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.A("anchorPosition",(e=>D(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.N("materialColor",(e=>e.color))),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.ZI)(B,o),$&&(B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.N("outlineColor",(e=>e.outlineColor))),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.N("outlineColor",(e=>L(e)?e.outlineColor:_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.Z)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__.p("outlineSize",(e=>L(e)?e.outlineSize:0)))),o.hasScreenSizePerspective&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__.ww)(B),(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__.m8)(B)),(o.debugDrawLabelBorder||o.binaryHighlightOcclusionEnabled)&&i.varyings.add("debugBorderCoords","vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.T.UV0,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.T.COLOR,"vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.T.SIZE,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.T.AUXPOS2,"vec4"),B.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      forwardObjectAndLayerIdColor();

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${o.hasScreenSizePerspective?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${o.vvSize?"inputSize *= vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${o.occlusionTestEnabled||o.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":""}

      ${o.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""}
    `);const T=_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`vec2 uv01 = floor(uv0);
vec2 uv = uv0 - uv01;
quadOffset.xy = ((uv01 - anchorPosition) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;`;o.pixelSnappingEnabled&&B.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__.H);const E=o.pixelSnappingEnabled?$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`posProj += quadOffset;`;B.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
    ${o.occlusionTestEnabled?"if (visible) {":""}
    ${T}
    ${o.vvColor?"vcolor = interpolateVVColor(auxpos2.y) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    ${o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`vcolor.a = 1.0;`:""}

    bool alphaDiscard = vcolor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.b)};
    ${$?`alphaDiscard = alphaDiscard && outlineColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.b)};`:""}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${E}
      gl_Position = posProj;
    }

    vtc = uv;

    ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":""}
    vsize = inputSize;
    ${o.occlusionTestEnabled?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`} else { vtc = vec2(0.0);
      ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
  }
  `),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__.A("tex",(e=>e.texture)));const U=o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`(isBorder > 0.0 ? 0.0 : ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.F)})`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.F),V=_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
    ${o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_support_engineContent_sdfPrimitives_js__WEBPACK_IMPORTED_MODULE_3__.Ph)};
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${U} ||
          fillPixelColor.a + outlinePixelColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.b)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        fragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${U}) {
          discard;
        }

        fragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
          vec4 texColor = texture(tex, vtc, -0.5);
          if (texColor.a < ${U}) {
            discard;
          }
          fragColor = texColor * premultiplyAlpha(vcolor);
          `}

    // Draw debug border with transparency, so that original texels along border are still partially visible
    ${o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`:""}
  `;return o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.H.Alpha&&H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      void main() {
        ${V}
        fragColor = vec4(fragColor.a);
      }
      `),o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.H.ObjectAndLayerIdColor&&H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
      void main() {
        ${V}
        outputObjectAndLayerIdColor();
      }
      `),o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.H.Color&&H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
    void main() {
      ${V}
      ${o.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__.A.FrontFace?"fragColor.rgb /= fragColor.a;":""}
    }
    `),o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.H.Highlight&&(i.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__.bA,o),H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
    void main() {
      ${V}
      ${o.binaryHighlightOcclusionEnabled?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.H`
          if (voccluded == 1.0) {
            fragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            fragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `)),i}function L(e){return e.outlineColor[3]>0&&e.outlineSize>0}function D(e,i=F){return e.textureIsSignedDistanceField?function B(o,i,r){null!=i?(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,o[0]*(i[2]-i[0])+i[0],o[1]*(i[3]-i[1])+i[1]):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,0,0)}(e.anchorPosition,e.distanceFieldBoundingBox,i):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.j)(i,e.anchorPosition),i}const F=(0,_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),H=Object.freeze(Object.defineProperty({__proto__:null,build:$,calculateAnchorPosForRendering:D},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/NativeLine.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>v,b:()=>u});var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function u(u){const v=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_10__.kG,{vertex:f,fragment:h}=v;return v.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__.w,u),v.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__.c,u),v.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_5__.q,u),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__.Sv)(f,u),u.stippleEnabled&&(v.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.T.UV0,"vec2"),v.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.T.AUXPOS1,"vec3"),f.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__.N("viewport",((e,o)=>o.camera.fullViewport)))),v.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.T.POSITION,"vec3"),v.varyings.add("vpos","vec3"),f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`void main(void) {
vpos = position;
forwardNormalizedVertexColor();
gl_Position = transformPosition(proj, view, vpos);`),u.stippleEnabled&&(f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`vec4 vpos2 = transformPosition(proj, view, auxpos1);
vec2 ndcToPixel = viewport.zw * 0.5;
float lineSegmentPixelSize = length((vpos2.xy / vpos2.w - gl_Position.xy / gl_Position.w) * ndcToPixel);`),u.draped?f.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__.p("worldToScreenRatio",((e,o)=>1/o.screenToPCSRatio))):f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`vec3 segmentCenter = (position + auxpos1) * 0.5;
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);`),u.draped?f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`float startPseudoScreen = uv0.y * discreteWorldToScreenRatio - mix(0.0, lineSegmentPixelSize, uv0.x);
float segmentLengthPseudoScreen = lineSegmentPixelSize;`):f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`float segmentLengthRender = length(position - auxpos1);
float startPseudoScreen = mix(uv0.y, uv0.y - segmentLengthRender, uv0.x) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),f.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__.p("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_5__.C)(e)))),f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`vec2 stippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, lineSegmentPixelSize, stipplePatternPixelSize);
vStippleDistance = mix(stippleDistanceLimits.x, stippleDistanceLimits.y, uv0.x);
vStippleDistance *= gl_Position.w;`)),f.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`}`),u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.Highlight&&v.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_4__.bA,u),v.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__.f5,u),h.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__.p("alphaCoverage",((e,o)=>Math.min(1,e.width*o.camera.pixelRatio)))),u.hasVertexColors||h.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__.N("constantColor",(e=>e.color))),h.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`
  void main() {
    discardBySlice(vpos);

    vec4 color = ${u.hasVertexColors?"vColor":"constantColor"};

    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);

    vec4 finalColor = blendStipple(vec4(color.rgb, color.a * alphaCoverage), stippleAlpha);

    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`finalColor.a = 1.0;`:""}

    if (finalColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_12__.b)}) {
      discard;
    }

    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.Color?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.Highlight?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__.H`outputHighlight();`:""}
  }
  `),v}const v=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>j,a:()=>R,b:()=>A});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js");const j=1;function A(A){const R=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__.kG,{vertex:P,fragment:F}=R,z=A.hasMultipassTerrain&&(A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color||A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha);R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.e),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__.U,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__.q,A);const E=A.applyMarkerOffset&&!A.draped;E&&(P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("markerScale",(e=>e.markerScale))),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__.Q,{space:_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__.I9.World,draped:!1})),A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Depth&&R.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__.F,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__.R,A),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.Sv)(P,A),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.g("inverseProjectionMatrix",((e,t)=>t.camera.inverseProjectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__.A("nearFar",((e,t)=>t.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.N("viewport",((e,t)=>t.camera.fullViewport))),P.constants.add("LARGE_HALF_FLOAT","float",65500),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.T.POSITION,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.T.SUBDIVISIONFACTOR,"float"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.T.UV0,"vec2"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.T.AUXPOS1,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.T.AUXPOS2,"vec3"),R.varyings.add("vColor","vec4"),R.varyings.add("vpos","vec3"),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.Lm)(R),z&&R.varyings.add("depth","float");const T=A.stippleEnabled&&A.stippleScaleWithLineWidth;T&&R.varyings.add("vLineSizeInv","float");const W=A.capType===_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__.R.ROUND,O=T||W;O&&R.varyings.add("vLineWidth","float");const V=A.innerColorEnabled||W;V&&R.varyings.add("vLineDistance","float");const N=A.stippleEnabled&&W,I=A.falloffEnabled||N;I&&R.varyings.add("vLineDistanceNorm","float"),W&&(R.varyings.add("vSegmentSDF","float"),R.varyings.add("vReverseSegmentSDF","float")),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.bA)(R),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${z?"depth = pos.z;":""}
      linearDepth = calculateLinearDepth(nearFar,pos.z);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.ZI)(P,A),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${O?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vLineWidth = lineWidth;`:""}
      ${T?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);
  `),E&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`),(A.stippleEnabled||W)&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${W?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),A.roundJoins?P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${A.stippleEnabled?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`min(1.0, subdivisionFactor * ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H.float((j+2)/(j+1))})`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);const $=A.capType!==_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__.R.BUTT;return P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${I||V?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${V?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${I?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),W&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),A.stippleEnabled&&(A.draped?P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("worldToScreenRatio",((e,t)=>1/t.screenToPCSRatio))):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),A.draped?P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__.C)(e)))),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
      float patternLength = ${A.stippleScaleWithLineWidth?"lineSize * ":""} stipplePatternPixelSize;

      // Compute the coordinates at both start and end of the line segment, because we need both to clamp to in the fragment shader
      vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);

      vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);

      // Adjust the coordinate to the displaced position (the pattern is shortened/overextended on the in/outside of joins)
      if (segmentLengthScreenDouble >= 0.001) {
        // Project the actual vertex position onto the line segment. Note that the resulting factor is within [0..1] at the
        // original vertex positions, and slightly outside of that range at the displaced positions
        vec2 stippleDisplacement = pos.xy - segmentOrigin;
        float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);

        // Apply this offset to the actual vertex coordinate (can be screen or pseudo-screen space)
        vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
      }

      // Cancel out perspective correct interpolation because we want this length the really represent the screen distance
      vStippleDistanceLimits *= pos.w;
      vStippleDistance *= pos.w;

      // Disable stipple distance limits on caps
      vStippleDistanceLimits = isJoin ?
                                 vStippleDistanceLimits :
                                 isStartVertex ?
                                  vec2(-1e038, vStippleDistanceLimits.y) :
                                  vec2(vStippleDistanceLimits.x, 1e038);
    `)),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${A.wireframe&&!A.draped?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }
  }
  `),z&&R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__.l,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,A),F.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__.Y),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
  void main() {
    discardBySlice(vpos);
    ${z?"terrainDepthTest(gl_FragCoord, depth);":""}
  `),A.wireframe?F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(W&&F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
        discard;
      }
    `),N?F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}, stippleCoverage);
      `):F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float stippleAlpha = getStippleAlpha();`),F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.N("intrinsicColor",(e=>e.color))),A.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor&&F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);`),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec4 color = intrinsicColor * vColor;`),A.innerColorEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.N("innerColor",(e=>e.innerColor??e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("innerWidth",((e,t)=>e.innerWidth*t.camera.pixelRatio))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`vec4 finalColor = blendStipple(color, stippleAlpha);`),A.falloffEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.p("falloff",(e=>e.falloff))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`finalColor.a = 1.0;`:""}

    if (finalColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
      discard;
    }

    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`fragColor = vec4(finalColor.a);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color&&A.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__.A.Color?"fragColor = premultiplyAlpha(fragColor);":""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Highlight?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`fragColor = vec4(1.0);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Depth?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`outputDepth(linearDepth);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.H`outputObjectAndLayerIdColor();`:""}
  }
  `),R}const R=Object.freeze(Object.defineProperty({__proto__:null,RIBBONLINE_NUM_ROUND_JOIN_SUBDIVISIONS:j,build:A},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>i,a:()=>d,b:()=>l});var _vec4f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");class i extends _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.K{constructor(){super(...arguments),this.color=(0,_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,1,1,1)}}function l(){const e=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__.kG;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__.k),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__.A("tex",(e=>e.texture)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__.N("uColor",(e=>e.color))),e.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.H`void main() {
vec4 texColor = texture(tex, uv);
fragColor = texColor * uColor;
}`),e}const d=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:i,build:l},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>x,b:()=>S});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function S(S){const x=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__.kG,{vertex:_,fragment:F}=x;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.Sv)(_,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__.w,S),x.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__.T.POSITION,"vec3"),x.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__.T.UV0,"vec2");const T=new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.N("waterColor",(e=>e.color));if(S.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color&&S.isDraped)return x.varyings.add("vpos","vec3"),_.uniforms.add(T),_.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vpos = position;
          gl_Position = transformPosition(proj, view, vpos);
        }
    `),F.uniforms.add(T),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`void main() {
fragColor = waterColor;
}`),x;switch(S.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color&&S.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha||(x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.n,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.qj,S),x.varyings.add("vuv","vec2"),x.varyings.add("vpos","vec3"),x.varyings.add("vnormal","vec3"),x.varyings.add("vtbnMatrix","mat3"),S.hasMultipassTerrain&&x.varyings.add("depth","float"),_.uniforms.add(T),_.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vuv = uv0;
        vpos = position;

        vnormal = getLocalUp(vpos, localOrigin);
        vtbnMatrix = getTBNMatrix(vnormal);

        ${S.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}

        gl_Position = transformPosition(proj, view, vpos);
        ${S.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color?"forwardLinearDepth();":""}
      }
    `)),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__.l,S),S.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Alpha:x.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,S),F.uniforms.add(T),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
        void main() {
          discardBySlice(vpos);
          ${S.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

          fragColor = vec4(waterColor.a);
        }
      `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Color:x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.kR),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__._,{pbrMode:_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__.f7.Disabled,lightingSphericalHarmonicsOrder:2}),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__.M),x.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__.XE,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__.B,S),F.uniforms.add(T,new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__.p("timeElapsed",(e=>e.timeElapsed)),_.uniforms.get("view"),_.uniforms.get("localOrigin")),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.hY)(F,S),F.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__.Y),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.Pe)(F),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.F1)(F),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
      void main() {
        discardBySlice(vpos);
        ${S.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
        vec3 localUp = vnormal;
        // the created normal is in tangent space
        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);

        // we rotate the normal according to the tangent-bitangent-normal-Matrix
        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);
        vec3 v = -normalize(vpos - cameraPosition);
        float shadow = ${S.receiveShadows?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`1.0 - readShadowMap(vpos, linearDepth)`:"1.0"};
        vec4 vPosView = view * vec4(vpos, 1.0);
        vec4 final = vec4(getSeaColor(n, v, mainLightDirection, waterColor.rgb, mainLightIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz, vpos + localOrigin), waterColor.w);

        // gamma correction
        fragColor = delinearizeGamma(final);
        fragColor = highlightSlice(fragColor, vpos);
        ${S.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__.A.Color?"fragColor = premultiplyAlpha(fragColor);":""}
      }
    `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Normal:x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.n,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__.M,S),x.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,S),x.varyings.add("vpos","vec3"),x.varyings.add("vuv","vec2"),_.uniforms.add(T),_.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vuv = uv0;
          vpos = position;

          gl_Position = transformPosition(proj, view, vpos);
        }
    `),F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__.p("timeElapsed",(e=>e.timeElapsed))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`void main() {
discardBySlice(vpos);
vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);
tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);
fragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.Highlight:x.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__.bA,S),x.varyings.add("vpos","vec3"),_.uniforms.add(T),_.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
      }
    `),x.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,S),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`void main() {
discardBySlice(vpos);
outputHighlight();
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.H.ObjectAndLayerIdColor:x.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__.R,S),x.varyings.add("vpos","vec3"),_.uniforms.add(T),_.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.b)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
        forwardObjectAndLayerIdColor();
      }
    `),x.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.f5,S),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.H`void main() {
discardBySlice(vpos);
outputObjectAndLayerIdColor();
}`)}return x}const x=Object.freeze(Object.defineProperty({__proto__:null,build:S},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/floatRGBA.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>o,v:()=>r});var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.uZ)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},"./node_modules/@arcgis/core/geometry/support/DoubleArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JK:()=>o,QZ:()=>e,Rq:()=>a,bg:()=>t,mB:()=>y});var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js");function t(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.DB?t?new Array(n).fill(0):new Array(n):new Float64Array(n)}function e(t){return((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)?t.length:t.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.DB?Array.from(t):new Float64Array(t)}function a(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}function o(r,n){for(let t=0;t<n.length;++t)r[t]=n[t];return r}function y(r){return Array.isArray(r)?new Float64Array(r):r}},"./node_modules/@arcgis/core/geometry/support/clipRay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S$:()=>g,Ue:()=>a,Ws:()=>p,iL:()=>y});var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_ray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js");function a(r){return r?{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.Ue)(r.ray),c0:r.c0,c1:r.c1}:{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.Ue)(),c0:0,c1:Number.MAX_VALUE}}function y(r,c=a()){return(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.JG)(r,c.ray),c.c0=0,c.c1=Number.MAX_VALUE,c}function p(r,c){return j(r,r.c0,c)}function g(r,c){return j(r,r.c1,c)}function j(r,c,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.a)(o,r.ray.origin,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,r.ray.direction,c))}new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__.x((()=>a()))},"./node_modules/@arcgis/core/geometry/support/frustum.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JG:()=>L,Nu:()=>l,Ue:()=>I,hr:()=>P,q_:()=>s,zq:()=>m});var l,k,_core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_clipRay_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/clipRay.js"),_plane_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function I(T){return T?[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[0]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[1]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[2]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[3]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[4]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(T[5])]:[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()]}function L(T,_){for(let O=0;O<v;O++)(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.JG)(T[O],_[O])}function s(T,A,E,F=S){const r=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__.MP.get(),A,T);(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.a)(r,r);for(let _=0;_<g;++_){const T=(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__.t)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__.o6.get(),b[_],r);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(F[_],T[0]/T[3],T[1]/T[3],T[2]/T[3])}!function u(T,_){(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.FAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_TOP_LEFT],T[l.LEFT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.NEAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_RIGHT],_[k.FAR_TOP_RIGHT],T[l.RIGHT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.FAR_BOTTOM_LEFT],_[k.FAR_BOTTOM_RIGHT],_[k.NEAR_BOTTOM_RIGHT],T[l.BOTTOM]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.NEAR_TOP_LEFT],_[k.NEAR_TOP_RIGHT],_[k.FAR_TOP_RIGHT],T[l.TOP]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_RIGHT],_[k.NEAR_TOP_RIGHT],T[l.NEAR]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.zk)(_[k.FAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_LEFT],_[k.FAR_TOP_LEFT],T[l.FAR])}(E,F)}function P(T,_){for(let O=0;O<v;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}function m(T,_){for(let O=0;O<v;O++){const R=T[O];if(!(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Er)(R,_))return!1}return!0}!function(T){T[T.LEFT=0]="LEFT",T[T.RIGHT=1]="RIGHT",T[T.BOTTOM=2]="BOTTOM",T[T.TOP=3]="TOP",T[T.NEAR=4]="NEAR",T[T.FAR=5]="FAR"}(l||(l={})),function(T){T[T.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",T[T.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",T[T.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",T[T.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",T[T.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",T[T.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",T[T.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",T[T.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(k||(k={}));k.FAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_LEFT,k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_BOTTOM_RIGHT,k.NEAR_TOP_RIGHT,k.NEAR_TOP_LEFT,k.FAR_BOTTOM_RIGHT,k.FAR_BOTTOM_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_RIGHT,k.NEAR_BOTTOM_RIGHT,k.FAR_BOTTOM_RIGHT,k.FAR_TOP_RIGHT,k.NEAR_TOP_RIGHT,k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_TOP_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_LEFT,k.NEAR_TOP_LEFT,k.NEAR_TOP_RIGHT,k.FAR_TOP_RIGHT;const v=6,g=8,b=[(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,1,1)],S=(new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__.x(_clipRay_js__WEBPACK_IMPORTED_MODULE_5__.Ue),function N(){return[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()]}())},"./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>e});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js");function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sf)(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.$z)(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.mi)(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)M[t]===b&&(o(h,(d?A[t]:t)*s,C,b*s,s),b++);if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.mi)(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null},"./node_modules/@arcgis/core/geometry/support/triangulationUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mk:()=>f,ZI:()=>a,bT:()=>l});var a,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/earcut.js"),_coordsUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_DoubleArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js");function l(t){const r=f(t.rings,t.hasZ,a.CCW_IS_HOLE),l=new Array;let h=0,g=0;for(const o of r.polygons){const t=o.count,i=o.index,c=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_2__.Rq)(r.position,3*i,3*t),f=o.holeIndices.map((n=>n-i)),a=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_3__.mi)((0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__.e)(c,f,3));l.push({position:c,faces:a}),h+=c.length,g+=a.length}const u=function c(n,t,e){if(1===n.length)return n[0];const o=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_2__.bg)(t),i=new Array(e);let l=0,c=0,f=0;for(const r of n){for(let n=0;n<r.position.length;n++)o[l++]=r.position[n];for(const n of r.faces)i[c++]=n+f;f=l/3}return{position:o,faces:(0,_Indices_js__WEBPACK_IMPORTED_MODULE_3__.mi)(i)}}(l,h,g),p=Array.isArray(u.position)?(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_4__.d)(u.position,3,{originalIndices:u.faces}):(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_4__.d)(u.position.buffer,6,{originalIndices:u.faces});return u.position=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_2__.QZ)(new Float64Array(p.buffer)),u.faces=p.indices,u}function f(n,t,e){const o=n.length,s=new Array(o),i=new Array(o),l=new Array(o);let c=0,f=0,u=0,p=0;for(let r=0;r<o;++r)p+=n[r].length;const d=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_2__.bg)(3*p);let y=0;for(let r=o-1;r>=0;r--){const p=n[r],m=e===a.CCW_IS_HOLE&&g(p);if(m&&1!==o)s[c++]=p;else{let n=p.length;for(let t=0;t<c;++t)n+=s[t].length;const e={index:y,pathLengths:new Array(c+1),count:n,holeIndices:new Array(c)};e.pathLengths[0]=p.length,p.length>0&&(l[u++]={index:y,count:p.length}),y=m?h(p,p.length-1,-1,d,y,p.length,t):h(p,0,1,d,y,p.length,t);for(let o=0;o<c;++o){const n=s[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(l[u++]={index:y,count:n.length}),y=h(n,0,1,d,y,n.length,t)}c=0,e.count>0&&(i[f++]=e)}}for(let r=0;r<c;++r){const n=s[r];n.length>0&&(l[u++]={index:y,count:n.length}),y=h(n,0,1,d,y,n.length,t)}return i.length=f,l.length=u,{position:d,polygons:i,outlines:l}}function h(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e}return r/3}function g(n){return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_1__.bu)(n,!1,!1)}!function(n){n[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE"}(a||(a={}))},"./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function t(t){return"point"===t.type}__webpack_require__.d(__webpack_exports__,{f:()=>t})},"./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>M,Ou:()=>o,WG:()=>x,kB:()=>u,mW:()=>c});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js"),_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js");function o(e){return"declaredClass"in e}function m(e){return"declaredClass"in e}function c(r,n){return r?function l(e){return"declaredClass"in e}(r)?r:new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__.Z({layer:n,sourceLayer:n,visible:r.visible,symbol:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.d9)(r.symbol),attributes:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.d9)(r.attributes),geometry:u(r.geometry)}):null}function u(e){return null==e?null:o(e)?e:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(function f(e){const{wkid:t,wkt:r,latestWkid:n}=e.spatialReference,a={wkid:t,wkt:r,latestWkid:n};switch(e.type){case"point":{const{x:t,y:r,z:n,m:s}=e;return{x:t,y:r,z:n,m:s,spatialReference:a}}case"polygon":{const{rings:t,hasZ:r,hasM:n}=e;return{rings:p(t),hasZ:r,hasM:n,spatialReference:a}}case"polyline":{const{paths:t,hasZ:r,hasM:n}=e;return{paths:p(t),hasZ:r,hasM:n,spatialReference:a}}case"extent":{const{xmin:t,xmax:r,ymin:n,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u}=e;return{xmin:t,xmax:r,ymin:n,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u,spatialReference:a}}case"multipoint":{const{points:t,hasZ:r,hasM:n}=e;return{points:d(t)?h(t):t,hasZ:r,hasM:n,spatialReference:a}}default:return}}(e))}function p(e){return function y(e){for(const t of e)if(0!==t.length)return d(t);return!1}(e)?e.map((e=>h(e))):e}function h(e){return e.map((e=>Array.from(e)))}function d(e){return e.length>0&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__.xZ)(e[0])||(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__.fS)(e[0]))}function x(e,t){if(!e)return null;let r;if(m(e)){if(null==t)return e.clone();if(m(t))return t.copy(e)}return null!=t?(r=t,r.x=e.x,r.y=e.y,r.spatialReference=e.spatialReference,e.hasZ?(r.z=e.z,r.hasZ=e.hasZ):(r.z=void 0,r.hasZ=!1),e.hasM?(r.m=e.m,r.hasM=!0):(r.m=void 0,r.hasM=!1)):(r=(0,_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_6__.Tx)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(r.m=e.m,r.hasM=!0)),r}function M(e){const{wkid:t,wkt:r,latestWkid:n}=e,a={wkid:t,wkt:r,latestWkid:n};return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_7__.Z.fromJSON(a)}},"./node_modules/@arcgis/core/layers/graphics/sources/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var a;__webpack_require__.d(__webpack_exports__,{u:()=>a}),function(a){a[a.EnableFastUpdates=0]="EnableFastUpdates",a[a.DisableFastUpdates=1]="DisableFastUpdates",a[a.UpdateFastLocalOrigin=2]="UpdateFastLocalOrigin"}(a||(a={}))},"./node_modules/@arcgis/core/symbols/cim/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(e){return"function"==typeof e}function t(t,r,n,o){return e(t)?t(r,n,o):t}function r(e){return[e.r,e.g,e.b,e.a]}__webpack_require__.d(__webpack_exports__,{$Z:()=>w,BX:()=>k,Cc:()=>d,E_:()=>l,F:()=>L,FG:()=>G,H1:()=>i,JW:()=>O,NA:()=>b,NO:()=>u,On:()=>g,QI:()=>s,Qf:()=>A,Qs:()=>c,RI:()=>I,TB:()=>F,TT:()=>a,W7:()=>P,X_:()=>x,be:()=>f,cO:()=>p,gJ:()=>m,hf:()=>t,k5:()=>C,nn:()=>r,pJ:()=>h,wO:()=>e,wi:()=>S,yL:()=>M,zL:()=>y});const n=" /-,\n";function o(e){let t=e.length;for(;t--;)if(!n.includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.substr(n,i-n);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.substr(n,i-n)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length-1){const t=e.substr(n);r.push([t,null,o(t)])}return r}function l(e,t,r){let n="",o=null;for(const i of t){const[t,r,l]=i;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{const t=e.attributes[r];t&&(o&&(n+=o,o=null),n+=t)}}return s(n,r)}function c(e,t,r){const n=i(t,e);return e=>l(e,n,r)}function s(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function a(e,t,r,n,o,i,l=!0){const c=t/o,s=r/i,a=Math.ceil(c/2),u=Math.ceil(s/2);for(let f=0;f<i;f++)for(let r=0;r<o;r++){const y=4*(r+(l?i-f-1:f)*o);let M=0,C=0,m=0,b=0,p=0,d=0,I=0;const h=(f+.5)*s;for(let n=Math.floor(f*s);n<(f+1)*s;n++){const o=Math.abs(h-(n+.5))/u,i=(r+.5)*c,l=o*o;for(let s=Math.floor(r*c);s<(r+1)*c;s++){let r=Math.abs(i-(s+.5))/a;const o=Math.sqrt(l+r*r);o>=-1&&o<=1&&(M=2*o*o*o-3*o*o+1,M>0&&(r=4*(s+n*t),I+=M*e[r+3],m+=M,e[r+3]<255&&(M=M*e[r+3]/250),b+=M*e[r],p+=M*e[r+1],d+=M*e[r+2],C+=M))}}n[y]=b/C,n[y+1]=p/C,n[y+2]=d/C,n[y+3]=I/m}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function f(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function M(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function C(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const b=(e,t=0)=>null==e||isNaN(e)?t:e,p=e=>e.tintColor?u(e.tintColor):{r:255,g:255,b:255,a:1},d=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function I(){return Promise.all([__webpack_require__.e(5798),__webpack_require__.e(3134)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/geometry/geometryEngineJSON.js"))}function h(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function g(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function k(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function P(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=P(t);if(null!=e)return e}break;case"CIMTextSymbol":return P(e.symbol);case"CIMSolidFill":return e.color}}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":return e.color}}function L(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return L(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function G(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function A(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},"./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FW:()=>m,ZB:()=>I,iW:()=>C});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/utils.js");function l(e,t,o,r){if(e)if("CIMTextSymbol"!==e.type){if(o&&e.effects)for(const o of e.effects)y(o,t);if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":m(o,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&o.width&&(o.width*=t);break;case"CIMPictureFill":o.height&&(o.height*=t),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t);break;case"CIMHatchFill":l(o.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t),o.separation&&(o.separation*=t)}}else null!=e.height&&(e.height*=t)}function m(e,t,o){if(e&&(e.markerPlacement&&function M(e,t){switch((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||l(r.symbol,t,!0,o)}function y(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map((e=>e*t));e.dashTemplate=o}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function C(o){const r=[];return u((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.be)(o),r),r.length?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.NO)(r[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const a="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||a&&((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.yL)(i)||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.zL)(i)&&i.markerPlacement&&(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.gJ)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&b(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":b(t,i.color);break;case"CIMHatchFill":u(i.lineSymbol,t)}}function b(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t)}function I(o,r,n){r instanceof _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z||(r=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(r));const s=(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.be)(o);s&&k(s,r,n)}function k(e,t,a){if(!e)return;let i;i="CIMTextSymbol"===e.type?e.symbol:e;const c="CIMPolygonSymbol"===i?.type;if(i?.symbolLayers)for(const f of i.symbolLayers){if(f.colorLocked)continue;if(c)if(a){const{layersToColor:e}=a;if(((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.yL)(f)||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.zL)(f)&&f.markerPlacement&&(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.gJ)(f.markerPlacement))&&"fill"===e||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.k5)(f)&&"outline"===e)continue}else if((0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.yL)(f)||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.zL)(f)&&f.markerPlacement&&(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_1__.gJ)(f.markerPlacement))continue;const e=t.toArray();switch(f.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":f.tintColor=e;break;case"CIMVectorMarker":f.markerGraphics?.forEach((e=>{k(e.symbol,t,a)}));break;case"CIMSolidStroke":case"CIMSolidFill":f.color=e;break;case"CIMHatchFill":k(f.lineSymbol,t,a)}}}},"./node_modules/@arcgis/core/symbols/support/gfxUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ne:()=>g,Od:()=>h,Sp:()=>d,_M:()=>f,mx:()=>y});var _assets_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/assets.js"),_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_request_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/LRUCache.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js");const n="picture-fill",l="simple-fill",c="simple-line",a="simple-marker",m="text",p="cim",u=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__.z(1e3);function f(t){const r=t.style;let o=null;if(t)switch(t.type){case a:"cross"!==r&&"x"!==r&&(o=t.color);break;case l:"solid"===r?o=t.color:"none"!==r&&(o={type:"pattern",x:0,y:0,src:(0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.V)(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case n:o={type:"pattern",src:t.url,width:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(t.width)*t.xscale,height:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(t.height)*t.yscale,x:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(t.xoffset),y:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(t.yoffset)};break;case m:o=t.color;break;case p:o=(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_4__.iW)(t)}return o}function h(e,t){const o=e+"-"+t;return void 0!==u.get(o)?Promise.resolve(u.get(o)):(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.default)(e,{responseType:"image"}).then((e=>{const r=e.data,s=r.naturalWidth,i=r.naturalHeight,n=document.createElement("canvas");n.width=s,n.height=i;const l=n.getContext("2d");l.fillStyle=t,l.fillRect(0,0,s,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const c=n.toDataURL();return u.put(o,c),c}))}function y(e){if(!e)return null;let t=null;switch(e.type){case l:case n:case a:t=y(e.outline);break;case c:{const r=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==r&&(t={color:e.color,style:d(e.style),width:r,cap:e.cap,join:"miter"===e.join?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.F2)(e.miterLimit):e.join});break}default:t=null}return t}const d=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replaceAll("-","");return e[t]=r,r}})(),g=new _Color_js__WEBPACK_IMPORTED_MODULE_1__.Z([128,128,128])},"./node_modules/@arcgis/core/symbols/support/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BR:()=>I,Q8:()=>q,QL:()=>N,Y6:()=>y,YW:()=>p,_h:()=>b,e3:()=>D,nf:()=>h,tb:()=>g,wJ:()=>J});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_symbols_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/symbols.js"),_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/maybe.js")),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/layers/effects/jsonUtils.js"),_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js"),_gfxUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/gfxUtils.js"),_Symbol3DMaterial_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/Symbol3DMaterial.js");const f=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z("white");function y(e){if(!e)return 0;if((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.dU)(e)){const t=function m(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__.Wz)((0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_7__.mx)(e)?.width)}function p(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function h(e){return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.s3)(e.resource).href}function b(n,r){if(!n)return null;let l=null;return(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.dU)(n)?l=function w(t){const o=t.symbolLayers;if(!o)return null;let n=null;return o.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(n):null}(n):(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.cT)(n)&&(l="cim"===n.type?(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__.iW)(n):n.color?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(n.color):null),l?d(l,r):null}function d(t,o){if(null==o||null==t)return t;const n=t.toRgba();return n[3]=n[3]*o,new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(n)}function g(n,r,l){n&&(r||null!=l)&&(r&&(r=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(r)),(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.dU)(n)?function j(e,t,o){const n=e.symbolLayers;if(!n)return;const r=e=>d(t=t??e??(null!=o?f:null),o);n.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=r(e.color);else{const t=null!=e.material?e.material.color:null,n=r(t);null==e.material?e.material=new _Symbol3DMaterial_js__WEBPACK_IMPORTED_MODULE_8__.b({color:n}):e.material.color=n,null!=o&&"outline"in e&&null!=e.outline&&null!=e.outline.color&&(e.outline.color=d(e.outline.color,o))}}))}(n,r,l):(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.cT)(n)&&function k(e,t,o){(t=t??e.color)&&(e.color=d(t,o)),null!=o&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=d(e.outline.color,o))}(n,r,l))}async function L(e,t){const o=e.symbolLayers;o&&await(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__.Ed)(o,(async e=>async function z(e,t){switch(e.type){case"extrude":!function U(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function S(e,t){const o=x(t);null!=o&&(e.size=o)}(e,t);break;case"path":!function E(e,t){const o=O(t,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.O,[e.width,void 0,e.height]);e.width=M(t[0],e.width,1,o),e.height=M(t[2],e.height,1,o)}(e,t);break;case"object":await async function v(e,t){const{resourceSize:o,symbolSize:n}=await async function C(e){const{computeObjectLayerResourceSize:t}=await __webpack_require__.e(4140).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/symbols/support/symbolLayerUtils.js")),o=await t(e,10),{width:n,height:r,depth:l}=e,i=[n,l,r];let c=1;for(let s=0;s<3;s++){const e=i[s];if(null!=e){c=e/o[s];break}}for(let s=0;s<3;s++)null==i[s]&&(i[s]=o[s]*c);return{resourceSize:o,symbolSize:i}}(e),r=O(t,o,n);e.width=M(t[0],n[0],o[0],r),e.depth=M(t[1],n[1],o[1],r),e.height=M(t[2],n[2],o[2],r)}(e,t)}}(e,t)))}function x(e){for(const t of e)if("number"==typeof t)return t;return null}function O(e,t,o){for(let n=0;n<3;n++){const r=e[n];switch(r){case"symbol-value":{const e=o[n];return null!=e?e/t[n]:1}case"proportional":break;default:if(r&&t[n])return r/t[n]}}return 1}function M(e,t,o,n){switch(e){case"proportional":return o*n;case"symbol-value":return null!=t?t:o;default:return e}}async function D(e,n){if(e&&n)return(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.dU)(e)?L(e,n):void((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.cT)(e)&&function R(e,t){const o=x(t);if(null!=o)switch(e.type){case"simple-marker":e.size=o;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=o,e.height=o*t):(e.width=o*t,e.height=o);break}case"simple-line":e.width=o;break;case"text":e.font.size=o}}(e,n))}function I(e,n,r){if(e&&null!=n)if((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.dU)(e)){const t=e.symbolLayers;t&&t.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=n;break;case"roll":e.roll=n;break;default:e.heading=n}}))}else(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=n))}function J(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,_layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__.rM)(t)}function N(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}async function q(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}},"./node_modules/@arcgis/core/views/3d/environment/CloudsCompositionParameters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{co:()=>I,ii:()=>i});var r,I,n,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_CloudsData_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsData.js");class i{constructor(){this.readChannels=_CloudsData_js__WEBPACK_IMPORTED_MODULE_2__.uz.RG,this.renderingStage=_CloudsData_js__WEBPACK_IMPORTED_MODULE_2__.jL.FINISHED,this.startTime=0,this.startTimeHeightFade=0,this.cameraPositionLastFrame=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this.isCameraPositionFinal=!0,this.parallax=new o,this.parallaxNew=new o,this.crossFade={enabled:!1,factor:1,distanceThresholdFactor:.3},this.fadeInOut={stage:I.FINISHED,factor:1,distanceThresholdFactor:.6},this.fadeIn={stage:r.FINISHED,factor:1,distanceThresholdFactor:2},this.fadeInOutHeight={stage:n.FINISHED,factor:-1}}get isFading(){return this.fadeInOut.stage===I.FADE_OUT||this.fadeInOut.stage===I.FADE_IN||this.fadeIn.stage===r.FADE_IN||this.fadeInOutHeight.stage!==n.FINISHED||this.renderingStage===_CloudsData_js__WEBPACK_IMPORTED_MODULE_2__.jL.FADING_TEXTURE_CHANNELS}}!function(t){t[t.FINISHED=0]="FINISHED",t[t.CHANGE_ANCHOR=1]="CHANGE_ANCHOR",t[t.FADE_IN=2]="FADE_IN"}(r||(r={})),function(t){t[t.FINISHED=0]="FINISHED",t[t.FADE_OUT=1]="FADE_OUT",t[t.SWITCH=2]="SWITCH",t[t.FADE_IN=3]="FADE_IN"}(I||(I={})),function(t){t[t.FINISHED=0]="FINISHED",t[t.HEIGHT_FADE=1]="HEIGHT_FADE"}(n||(n={}));class o{constructor(){this.anchorPointClouds=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this.cloudsHeight=1e5,this.radiusCurvatureCorrectionFactor=0,this.transform=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__.c)()}}},"./node_modules/@arcgis/core/views/3d/environment/CloudsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var N,E;__webpack_require__.d(__webpack_exports__,{jL:()=>N,uz:()=>E}),function(N){N[N.RENDERING=0]="RENDERING",N[N.FINISHED_RENDERING=1]="FINISHED_RENDERING",N[N.FADING_TEXTURE_CHANNELS=2]="FADING_TEXTURE_CHANNELS",N[N.SWITCH_CHANNELS=3]="SWITCH_CHANNELS",N[N.FINISHED=4]="FINISHED"}(N||(N={})),function(N){N[N.RG=0]="RG",N[N.BA=1]="BA"}(E||(E={}))},"./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>o});var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js"),_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.Z7)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.ht)(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.lt)(t.unit)?t.unit:"meters",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t&&t.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.d9)(t),(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.aO)(this._featureExpressionInfoContext,(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.Tz)(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}},"./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B5:()=>p,GC:()=>d,Lm:()=>R,Xf:()=>m,bD:()=>g,lO:()=>T,qZ:()=>c,rR:()=>u,w7:()=>f});var T,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js"),_graphicUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js"),_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js");function u(e,t,n,r,i,s,a,l,u,c,f){const d=x[f.mode];let m,p,g=0;if((0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__.projectBuffer)(e,t,n,r,u.spatialReference,i,l))return d.requiresAlignment(f)?(g=d.applyElevationAlignmentBuffer(r,i,s,a,l,u,c,f),m=s,p=a):(m=r,p=i),(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__.projectBuffer)(m,u.spatialReference,p,s,c.spatialReference,a,l)?g:void 0}function c(e,t,n,o,r){const s=((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_5__.f)(e)?e.z:(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__.Fb)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__.KO)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__.KO)(t,e,"ground")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"relative-to-scene":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__.KO)(t,e,"scene")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"absolute-height":{const i=n.geometryZWithOffset(s,o),a=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_6__.KO)(t,e,"ground")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,j),j.z}function d(e,t,n){return null==t||null==n?e.definedChanged:"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?T.UPDATE:e.onTheGroundChanged}function m(e){return"relative-to-ground"===e||"relative-to-scene"===e}function p(e){return"absolute-height"!==e}function g(t,n,o,i,a){c(n,o,a,i,j),(0,_graphicUtils_js__WEBPACK_IMPORTED_MODULE_4__.CV)(t,j.verticalDistanceToGround);const l=j.sampledElevation,u=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(O,t.transformation);return z[0]=n.x,z[1]=n.y,z[2]=j.z,(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__.computeTranslationToOriginAndRotation)(n.spatialReference,z,u,i.spatialReference)?t.transformation=u:console.warn("Could not locate symbol object properly, it might be misplaced"),l}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(T||(T={}));const x={"absolute-height":{applyElevationAlignmentBuffer:function A(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],s=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?s+l:l,t+=3,o+=3}return 0},requiresAlignment:function y(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function v(e,t,n,o,r,i){let s=0;const a=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,a,"ground")??0;s+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return s/r},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function h(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"ground")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function E(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"scene")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0}},O=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),j=new R,z=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O$:()=>f,Tz:()=>s,WI:()=>d,aO:()=>l,d9:()=>o,ht:()=>i,kr:()=>a});var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js");const c=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__.Z.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}async function a(e,r,c,o){const u=e&&e.expression;if("string"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__.LC)();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.k_)(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c.errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.kB)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e&&e.featureExpressionInfo;const n=r&&r.expression;return t||"0"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return"0"===e?0:null}},"./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CV:()=>P,Go:()=>F,Si:()=>V,Uu:()=>k,ZL:()=>O,_Z:()=>S,bD:()=>B,bh:()=>I,zE:()=>w});var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js"),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/centroid.js"),_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function w(t,e){if("point"===t.type)return R(t,e,!1);if((0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__.Ou)(t))switch(t.type){case"extent":return R(t.center,e,!1);case"polygon":return R(t.centroid,e,!1);case"polyline":return R(z(t),e,!0);case"mesh":return R(t.origin,e,!1)}else switch(t.type){case"extent":return R(function A(t){return(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__.Tx)(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return R(function M(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__.a)(t.rings,!!t.hasZ);return(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__.Tx)(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return R(z(t),e,!0)}}function z(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__.n8)(e,(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__.ok)(e)/2);return(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__.Tx)(n[0],n[1],n[2],t.spatialReference)}function R(t,e,n){const r=n?t:(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__.WG)(t);return e&&t?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.projectPoint)(t,r,e)?r:null:r}function F(t,e,n,r=0){if(t){e||(e=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.Ue)());const o=t;let i=.5*o.width*(n-1),s=.5*o.height*(n-1);return o.width<1e-7*o.height?i+=s/20:o.height<1e-7*o.width&&(s+=i/20),(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.s)(e,o.xmin-i-r,o.ymin-s-r,o.xmax+i+r,o.ymax+s+r),e}return null}function P(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.T.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttrsUpdated(t.geometries[n]))}}function k(t,e,n=null){const r=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.d)(_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.O);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=e?r[3]=e:null!=t&&t.length>3&&(r[3]=t[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function B(t=_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.O,e,n,r=1){const o=new Array(3);if(null==e||null==n)o[0]=1,o[1]=1,o[2]=1;else{let r,i=0;for(let s=2;s>=0;s--){const l=t[s];let u;const a=null!=l,m=0===s&&!r&&!a,c=n[s];"symbol-value"===l||m?u=0!==c?e[s]/c:1:a&&"proportional"!==l&&isFinite(l)&&(u=0!==c?l/c:1),null!=u&&(o[s]=u,r=u,i=Math.max(i,Math.abs(u)))}for(let t=2;t>=0;t--)null==o[t]?o[t]=r:0===o[t]&&(o[t]=.001*i)}for(let i=2;i>=0;i--)o[i]/=r;return(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.g)(o)}function I(t){return O(function D(t){return null!=t.isPrimitive}(t)?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function O(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function S(t,i,s,l=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()){return t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.o)(l,l,-t/180*Math.PI),i&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.r)(l,l,i/180*Math.PI),s&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.n)(l,l,s/180*Math.PI),l}function V(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const o=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__.c9)(n),i=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.bf)(e)*o,s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.Ye)(e)*o,l=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.Cb)(e)*(n.isGeographic?1:o);return 0===i&&0===s&&0===l?r.minDemResolutionForPoints:.01*Math.max(i,s,l)}},"./node_modules/@arcgis/core/views/3d/layers/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var e,a,t;__webpack_require__.d(__webpack_exports__,{Lw:()=>e,al:()=>t,eZ:()=>a}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(e||(e={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(a||(a={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(t||(t={}))},"./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fb:()=>t,KO:()=>a,sb:()=>r});var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js");class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return"array"in e}function a(r,a,n="ground"){if((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__.f)(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}},"./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>r});var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");function r(t,r=0){const n=t.stride;return Array.from(t.fields.keys()).filter((e=>{const r=t.fields.get(e)?.optional;return!(r&&r.glPadding)})).map((i=>{const s=t.fields.get(i),f=s.constructor.ElementCount,l=o(s.constructor.ElementType),u=s.offset,c=!(!s.optional||!s.optional.glNormalized);return new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__.G(i,f,l,u,n,c,r)}))}function o(t){const e=n[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const n={u8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.UNSIGNED_BYTE,u16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.UNSIGNED_SHORT,u32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.UNSIGNED_INT,i8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.BYTE,i16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.SHORT,i32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.INT,f32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.g.FLOAT}},"./node_modules/@arcgis/core/views/3d/support/engineContent/line.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>h});var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/ellipsoidUtils.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/FloatArray.js"),_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function h(t,e,r=null){const o=[],n=[],i=e.mapPositions;!function T(t,e,r){const{attributeData:{position:o},removeDuplicateStartEnd:n}=t,i=function D(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}(o)&&n,a=o.length/3-(i?1:0),u=new Array(2*(a-1)),s=i?o.slice(0,o.length-3):o;let l=0;for(let p=0;p<a-1;p++)u[l++]=p,u[l++]=p+1;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a(s,3,i)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.POSITION,u])}(e,n,o);const a=n[0][1].data,u=o[0][1].length,l=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__.LE)(u);return function b(t,e,r,n){if(null!=t.attributeData.colorFeature)return;const i=t.attributeData.color;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a(i??_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.O,4)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.COLOR,n])}(e,n,o,l),function A(t,e,r,o){null==t.attributeData.sizeFeature&&(e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.SIZE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a([t.attributeData.size??1],1,!0)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.SIZE,o]))}(e,n,o,l),function g(t,e,r,o){if(null==t.attributeData.normal)return;const n=t.attributeData.normal;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.NORMAL,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a(n,3)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.NORMAL,o])}(e,n,o,l),function E(t,e,r,o){null!=t.attributeData.colorFeature&&(e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a([t.attributeData.colorFeature],1,!0)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.COLOR,o]))}(e,n,o,l),function I(t,e,r,o){null!=t.attributeData.sizeFeature&&(e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.SIZEFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a([t.attributeData.sizeFeature],1,!0)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.SIZEFEATUREATTRIBUTE,o]))}(e,n,o,l),function O(t,e,r,o){const n=t.attributeData.opacityFeature;null!=n&&(e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.OPACITYFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a([n],1,!0)]),r.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.OPACITYFEATUREATTRIBUTE,o]))}(e,n,o,l),function R(r,o,s,c){if(null==r.overlayInfo||r.overlayInfo.renderCoordsHelper.viewingMode!==_ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__.JY.Global||!r.overlayInfo.spatialReference.isGeographic)return;const f=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__.bg)(c.length),h=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__.Iu)(r.overlayInfo.spatialReference);for(let t=0;t<f.length;t+=3)(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_5__.lonLatToWebMercatorComparable)(c,t,f,t,h);const T=c.length/3,b=(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__.xx)(T+1);let g=j,E=w,A=0,I=0;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(g,f[I++],f[I++],f[I++]),b[0]=0;for(let n=1;n<T+1;++n)n===T&&(I=0),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(E,f[I++],f[I++],f[I++]),A+=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.u)(g,E),b[n]=A,[g,E]=[E,g];o.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.DISTANCETOSTART,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_13__.a(b,1,!0)]),s.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.T.DISTANCETOSTART,s[0][1]])}(e,n,o,a),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_11__.Z(t,n,o,i,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_10__.U.Line,r)}const j=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),w=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ch:()=>s,Hl:()=>w,_Z:()=>p,vT:()=>m});__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const m=64,s=m/2,n=s/5,p=m/n,w=.25},"./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ns:()=>a,Ph:()=>e,cU:()=>o});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js"),_webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");const e=128,a=.5;function o(t,o=e,c=o*a,s=0){const i=u(t,o,c,s);return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__.x(i,{mipmap:!1,wrap:{s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.e8.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.e8.CLAMP_TO_EDGE},width:o,height:o,components:4,noUnpackFlip:!0})}function u(t,n=e,r=n*a,o=0){switch(t){case"circle":default:return function c(t,n){const r=t/2-.5;return w(t,T(r,r,n/2))}(n,r);case"square":return function s(t,n){return l(t,n,!1)}(n,r);case"cross":return function h(t,n,r=0){return p(t,n,!1,r)}(n,r,o);case"x":return function f(t,n,r=0){return p(t,n,!0,r)}(n,r,o);case"kite":return function i(t,n){return l(t,n,!0)}(n,r);case"triangle":return function M(t,n){return w(t,b(t/2,n,n/2))}(n,r);case"arrow":return function m(t,n){const r=n,e=n/2,a=t/2,o=.8*r,u=T(a,(t-n)/2-o,Math.sqrt(o*o+e*e)),c=b(a,r,e);return w(t,((t,n)=>Math.max(c(t,n),-u(t,n))))}(n,r)}}function l(t,n,r){return r&&(n/=Math.SQRT2),w(t,((e,a)=>{let o=e-.5*t+.25,u=.5*t-a-.75;if(r){const t=(o+u)/Math.SQRT2;u=(u-o)/Math.SQRT2,o=t}return Math.max(Math.abs(o),Math.abs(u))-.5*n}))}function p(t,n,r,e=0){n-=e,r&&(n*=Math.SQRT2);const a=.5*n;return w(t,((n,o)=>{let u,c=n-.5*t,s=.5*t-o-1;if(r){const t=(c+s)/Math.SQRT2;s=(s-c)/Math.SQRT2,c=t}return c=Math.abs(c),s=Math.abs(s),u=c>s?c>a?Math.sqrt((c-a)*(c-a)+s*s):s:s>a?Math.sqrt(c*c+(s-a)*(s-a)):c,u-=e/2,u}))}function T(t,n,r){return(e,a)=>{const o=e-t,u=a-n;return Math.sqrt(o*o+u*u)-r}}function b(t,n,r){const e=Math.sqrt(n*n+r*r);return(a,o)=>{const u=Math.abs(a-t)-r,c=o-t+n/2+.75,s=(n*u+r*c)/e,i=-c;return Math.max(s,i)}}function w(n,r){const e=new Uint8Array(4*n*n);for(let a=0;a<n;a++)for(let o=0;o<n;o++){const u=o+n*a;let c=r(o,a);c=c/n+.5,(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__.I)(c,e,4*u)}return e}},"./node_modules/@arcgis/core/views/3d/support/renderInfoUtils/line.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>p,r:()=>l});var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/triangulationUtils.js"),_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js"),_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js");function p(o,n,s,p){const l="polygon"===o.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.ZI.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.ZI.NONE,u="polygon"===o.type?o.rings:o.paths,{position:a,outlines:g}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Mk)(u,!!o.hasZ,l),m=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.bg)(a.length),y=(0,_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__.rR)(a,o.spatialReference,0,m,0,a,0,a.length/3,n,s,p),f=null!=y;return{lines:f?c(g,a,m):[],projectionSuccess:f,sampledElevation:y}}function l(t,n){const i="polygon"===t.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.ZI.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.ZI.NONE,p="polygon"===t.type?t.rings:t.paths,{position:l,outlines:u}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Mk)(p,!1,i),a=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.projectBuffer)(l,t.spatialReference,0,l,n,0,l.length/3);for(let o=2;o<l.length;o+=3)l[o]=_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__.Rn;return{lines:a?c(u,l):[],projectionSuccess:a}}function c(o,t,e=null){const r=new Array;for(const{index:i,count:s}of o){if(s<=1)continue;const o=3*i,p=3*s;r.push({position:(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.Rq)(t,3*i,3*s),mapPositions:null!=e?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.Rq)(e,o,p):void 0})}return r}},"./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Rn:()=>ne});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),MapUtils=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),SetUtils=__webpack_require__("./node_modules/@arcgis/core/core/SetUtils.js"),time=__webpack_require__("./node_modules/@arcgis/core/core/time.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),arrayUtils=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js")),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/interfaces.js"),debugFlags=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/debugFlags.js"),terrain_interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/interfaces.js"),Overlay=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/Overlay.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),FramebufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");class i{constructor(e,i){this._fbo=null;const p=new TextureDescriptor.X;p.wrapMode=enums.e8.CLAMP_TO_EDGE,p.samplingMode=enums.cw.LINEAR_MIPMAP_LINEAR,p.hasMipmap=i,p.maxAnisotropy=8,this._fbo=new FramebufferObject.X(e,p)}dispose(){this._fbo=(0,maybe.M2)(this._fbo)}getTexture(){return this._fbo?.colorTexture}isValid(){return null!=this._fbo}resize(e,r){this._fbo?.resize(e,r)}bind(e){e.bindFramebuffer(this._fbo)}generateMipMap(){const e=this._fbo?.colorTexture;e?.descriptor.hasMipmap&&e.generateMipmap()}disposeRenderTargetMemory(){this._fbo?.resize(0,0)}get gpuMemoryUsage(){return this._fbo?.gpuMemoryUsage??0}}var ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js");class s{constructor(r,o,s,a=!0){this.output=o,this.type=s,this.valid=!1,this.lastUsed=(0,time.HA)(1/0),this.fbo=new i(r,a)}}class a{constructor(e){this.renderTargets=[new s(e,ShaderOutput.H.Color,terrain_interfaces.NH.Color),new s(e,ShaderOutput.H.Color,terrain_interfaces.NH.ColorNoRasterImage),new s(e,ShaderOutput.H.Highlight,terrain_interfaces.NH.Highlight,!1),new s(e,ShaderOutput.H.Normal,terrain_interfaces.NH.Water),new s(e,ShaderOutput.H.Color,terrain_interfaces.NH.Occluded)],(0,has.Z)("enable-feature:objectAndLayerId-rendering")&&this.renderTargets.push(new s(e,ShaderOutput.H.ObjectAndLayerIdColor,terrain_interfaces.NH.ObjectAndLayerIdColor))}getTarget(e){return this.renderTargets[e].fbo}dispose(){for(const e of this.renderTargets)e.fbo.dispose()}disposeRenderTargetMemory(){for(const e of this.renderTargets)e.fbo.disposeRenderTargetMemory()}validateUsageForTarget(r,t,o){return r?(t.lastUsed=o,!1):o-t.lastUsed>d?(t.fbo.disposeRenderTargetMemory(),t.lastUsed=(0,time.HA)(1/0),!1):t.lastUsed<1/0}get gpuMemoryUsage(){return this.renderTargets.reduce(((e,r)=>e+r.fbo.gpuMemoryUsage),0)}}const d=(0,time.HA)(1e3);var TextureOnly_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js"),NestedMap=__webpack_require__("./node_modules/@arcgis/core/core/NestedMap.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js");class ShaderTechniqueRepository_r{constructor(t){this._context=t,this._perConstructorInstances=new NestedMap.r,this._frameCounter=0,this._keepAliveFrameCount=n}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}destroy(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.destroy())))),this._perConstructorInstances.clear()}acquire(e,t=o){const r=t.key;let n=this._perConstructorInstances.get(e,r);if(null==n){const o=new e(this._context,t,(()=>this.release(o)));n=new ShaderTechniqueRepository_s(o),this._perConstructorInstances.set(e,r,n)}return++n.refCount,n.technique}releaseAndAcquire(e,t,r){if(null!=r){if(t.key===r.key)return r;this.release(r)}return this.acquire(e,t)}release(e){if(null==e||this._perConstructorInstances.empty)return;const t=this._perConstructorInstances.get(e.constructor,e.key);null!=t&&(--t.refCount,0===t.refCount&&(t.refZeroFrame=this._frameCounter))}frameUpdate(){this._frameCounter++,this._keepAliveFrameCount!==n&&this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((e,r)=>{0===e.refCount&&e.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(e.technique.destroy(),this._perConstructorInstances.delete(t,r))}))}))}async reloadAll(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{e.push((async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>e.technique.reload(this._context))))})(t,r))})),await Promise.all(e)}}class ShaderTechniqueRepository_s{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}const n=-1,o=new ShaderTechniqueConfiguration.m;var Camera=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");class GLMaterialRepository_s{constructor(e,t,i,s){this._textureRepository=e,this._techniqueRepository=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new NestedMap.r}dispose(){this._textureRepository.destroy()}acquire(e,t,r){if(this._ownMaterial(e),!e.requiresSlot(t,r))return null;let i=this._id2glMaterialRef.get(r,e.id);if(null==i){const t=e.createGLMaterial({material:e,techniqueRep:this._techniqueRepository,textureRep:this._textureRepository,output:r});i=new GLMaterialRepository_o(t),this._id2glMaterialRef.set(r,e.id,i)}return i.ref(),i.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||((0,maybe.M2)(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){null!=t.repository&&t.repository!==this&&Logger.Z.getLogger("esri.views.3d.webgl-engine.lib.GLMaterialRepository").error("Material is already owned by a different material repository"),t.repository=this}}class GLMaterialRepository_o{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,(0,Util.hu)(this._refCnt>=0)}get referenced(){return this._refCnt>0}}var glUtil3D=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/glUtil3D.js"),GridLocalOriginFactory=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),CloudsCompositionParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsCompositionParameters.js"),MultipassGeometryTest_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js"),MultipassTerrainTest_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),ScreenSpaceReflections_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),SceneLighting=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js");class BindParameters_o{constructor(o,l,m){this.shadowMap=o,this.ssaoHelper=l,this.slicePlane=m,this.slot=RenderSlot.r.OPAQUE_MATERIAL,this.hasOccludees=!1,this.enableFillLights=!0,this.transparencyPassType=TransparencyPassType.A.NONE,this.alignPixelEnabled=!1,this._camera=new Camera.V,this._inverseViewport=(0,vec2f64.a)(),this.oldLighting=new SceneLighting.c,this.newLighting=new SceneLighting.c,this._fadedLighting=new SceneLighting.c,this._lighting=this.newLighting,this.ssr=new ScreenSpaceReflections_glsl.O,this.multipassTerrain=new MultipassTerrainTest_glsl.a,this.multipassGeometry=new MultipassGeometryTest_glsl._,this.overlays=[],this.cloudsFade=new CloudsCompositionParameters.ii}get camera(){return this._camera}set camera(i){this._camera=this.ssr.camera=i,this._inverseViewport[0]=1/i.fullViewport[2],this._inverseViewport[1]=1/i.fullViewport[3]}get inverseViewport(){return this._inverseViewport}get lighting(){return this._lighting}get weatherFading(){return this._lighting===this._fadedLighting}fadeLighting(i){const{oldLighting:t,newLighting:s}=this;i>=1?this._lighting=s:(this._fadedLighting.lerpLighting(t,s,i),this._lighting=this._fadedLighting)}}class RenderContext_i{constructor(e,a,i,n=null){this.rctx=e,this.sliceHelper=n,this.lastFrameCamera=new Camera.V,this.output=ShaderOutput.H.Color,this.renderOccludedMask=l,this.bindParameters=new BindParameters_o(a,i,null!=n?n.plane:null),this.bindParameters.alignPixelEnabled=!0}resetRenderOccludedMask(){this.renderOccludedMask=l}}const l=Material.yD.Occlude|Material.yD.OccludeAndTransparent|Material.yD.OccludeAndTransparentStencil;var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");let p=class extends Camera.V{constructor(){super(...arguments),this._projectionMatrix=(0,mat4f64.c)()}get projectionMatrix(){return this._projectionMatrix}};(0,tslib_es6._)([(0,property.Cb)()],p.prototype,"_projectionMatrix",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],p.prototype,"projectionMatrix",null),p=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.webgl-engine.lib.CascadeCamera")],p);var X,RenderbufferDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js");!function(t){t[t.Highlight=0]="Highlight",t[t.Default=1]="Default"}(X||(X={}));class q{constructor(){this.camera=new p,this.lightMat=(0,mat4f64.c)()}}class W{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class J{get depthTexture(){return this._fbo?.colorTexture}get textureSize(){return this._textureSize}get numCascades(){return this._numCascades}get cascadeDistances(){return(0,vec4.s)(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}constructor(t,s){this._rctx=t,this._viewingMode=s,this._enabled=!1,this._snapshots=new Array,this._textureSize=0,this._numCascades=1,this.settings=new W,this._projectionView=(0,mat4f64.c)(),this._projectionViewInverse=(0,mat4f64.c)(),this._modelViewLight=(0,mat4f64.c)(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=(0,vec4f64.c)(),this._cascades=[new q,new q,new q,new q],this._lastOrigin=null,this._maxTextureSize=Math.min((0,has.Z)("esri-mobile")?2048:8192,this._rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}disposeOffscreenBuffers(){this._fbo=(0,maybe.M2)(this._fbo),this._discardAllSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=(0,mathUtils.uZ)(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}getSnapshot(t){return this.enabled?this._snapshots[t]:null}get cascades(){for(let t=0;t<this._numCascades;++t)rt[t]=this._cascades[t];return rt.length=this._numCascades,rt}start(t,s,e,i,a){(0,Util.hu)(this.enabled),this._textureSize=this._computeTextureSize(t,a,i),this._ensureDepthTexture();const{near:r,far:n}=this._clampNearFar(e);this._computeCascadeDistances(n,r,i),this._setupMatrices(t,s);const{viewMatrix:o,projectionMatrix:c}=t;for(let h=0;h<this._numCascades;++h)this._constructCascade(h,c,o,s);this._lastOrigin=null,this.clear()}finish(t){(0,Util.hu)(this.enabled),this._rctx.bindFramebuffer(t)}getShadowMapMatrices(t){if(!this._lastOrigin||!(0,vec3.k)(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||(0,vec3f64.c)(),(0,vec3.c)(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){(0,mat4.w)(nt,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)ot[16*s+t]=nt[t]}}return ot}takeCascadeSnapshotTo(t,s){(0,Util.hu)(this.enabled);const e=this._ensureSnapshot(s);this._bindFbo();const i=this._rctx,a=i.bindTexture(e,Texture.x.TEXTURE_UNIT_FOR_UPDATES);i.gl.copyTexSubImage2D(enums.No.TEXTURE_2D,0,t.camera.viewport[0],t.camera.viewport[1],t.camera.viewport[0],t.camera.viewport[1],t.camera.viewport[2],t.camera.viewport[3]),i.bindTexture(a,Texture.x.TEXTURE_UNIT_FOR_UPDATES)}clear(){const t=this._rctx;this._bindFbo(),t.setClearColor(1,1,1,1),t.clearSafe(enums.lk.COLOR_BUFFER_BIT|enums.lk.DEPTH_BUFFER_BIT)}_computeTextureSize(t,s,e){const i=Math.min(window.devicePixelRatio,s)/t.pixelRatio,a=Math.max(t.fullWidth,t.fullHeight)*i,r=e?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality;return Math.floor(Math.min(this._maxTextureSize,function textureUtils_n(n){return 16*Math.ceil(n/16)}((1===this.numCascades?1:2)*a*r)))}_ensureDepthTexture(){if(this._fbo?.width===this._textureSize)return;const t=new TextureDescriptor.X(this._textureSize);t.wrapMode=enums.e8.CLAMP_TO_EDGE,t.samplingMode=enums.cw.NEAREST,this._fbo?.dispose(),this._fbo=new FramebufferObject.X(this._rctx,t,new RenderbufferDescriptor.Y(enums.Tg.DEPTH_COMPONENT16,this._textureSize))}_ensureSnapshot(t){let s=this._snapshots[t];if(null!=s&&s.descriptor.width===this._textureSize)return s;this._discardSnapshot(t);const e=new TextureDescriptor.X;return e.wrapMode=enums.e8.CLAMP_TO_EDGE,e.samplingMode=enums.cw.NEAREST,e.width=this._textureSize,e.height=this._textureSize,s=new Texture.x(this._rctx,e),this._snapshots[t]=s,s}_discardSnapshot(t){this._snapshots[t]=(0,maybe.M2)(this._snapshots[t])}_discardAllSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}_bindFbo(){const t=this._rctx;t.unbindTexture(this.depthTexture),t.bindFramebuffer(this._fbo)}_constructCascade(t,s,e,i){const a=this._cascades[t],o=-this._cascadeDistances[t],c=-this._cascadeDistances[t+1],h=(s[10]*o+s[14])/Math.abs(s[11]*o+s[15]),u=(s[10]*c+s[14])/Math.abs(s[11]*c+s[15]);(0,Util.hu)(h<u);for(let r=0;r<8;++r){(0,vec4.s)(Y,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?h:u,1);const t=Z[r];(0,vec4.t)(t,Y,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}(0,vec3.o)(at,Z[0]),a.camera.viewMatrix=(0,mat4.w)(K,this._modelViewLight,at);for(let r=0;r<8;++r)(0,vec3.m)(Z[r],Z[r],a.camera.viewMatrix);let m=Z[0][2],_=Z[0][2];for(let r=1;r<8;++r)m=Math.min(m,Z[r][2]),_=Math.max(_,Z[r][2]);m-=200,_+=200,a.camera.near=-_,a.camera.far=-m,function jt(t,s,i,a,r){const n=1/Z[0][3],o=1/Z[4][3];(0,Util.hu)(n<o);let c=n+Math.sqrt(n*o);const h=Math.sin((0,mathUtils.ZF)(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));c/=h,function gt(t,s,e,i,a,r,n,o){(0,vec2.s)(ct,0,0);for(let u=0;u<4;++u)(0,vec2.i)(ct,ct,t[u]);(0,vec2.a)(ct,ct,.25),(0,vec2.s)(ht,0,0);for(let u=4;u<8;++u)(0,vec2.i)(ht,ht,t[u]);(0,vec2.a)(ht,ht,.25),(0,vec2.l)(ut[0],t[4],t[5],.5),(0,vec2.l)(ut[1],t[5],t[6],.5),(0,vec2.l)(ut[2],t[6],t[7],.5),(0,vec2.l)(ut[3],t[7],t[4],.5);let c=0,h=(0,vec2.k)(ut[0],ct);for(let u=1;u<4;++u){const t=(0,vec2.k)(ut[u],ct);t<h&&(h=t,c=u)}(0,vec2.c)(mt,ut[c],t[c+4]);const M=mt[0];let b,S;mt[0]=-mt[1],mt[1]=M,(0,vec2.c)(_t,ht,ct),(0,vec2.g)(_t,mt)<0&&(0,vec2.n)(mt,mt),(0,vec2.l)(mt,mt,_t,e),(0,vec2.e)(mt,mt),b=S=(0,vec2.g)((0,vec2.c)(lt,t[0],ct),mt);for(let u=1;u<8;++u){const s=(0,vec2.g)((0,vec2.c)(lt,t[u],ct),mt);s<b?b=s:s>S&&(S=s)}(0,vec2.j)(i,ct),(0,vec2.a)(lt,mt,b-s),(0,vec2.i)(i,i,lt);let C=-1,T=1,j=0,y=0;for(let u=0;u<8;++u){(0,vec2.c)(dt,t[u],i),(0,vec2.e)(dt,dt);const s=mt[0]*dt[1]-mt[1]*dt[0];s>0?s>C&&(C=s,j=u):s<T&&(T=s,y=u)}(0,Util.T)(C>0,"leftArea"),(0,Util.T)(T<0,"rightArea"),(0,vec2.a)(pt,mt,b),(0,vec2.i)(pt,pt,ct),(0,vec2.a)(ft,mt,S),(0,vec2.i)(ft,ft,ct),xt[0]=-mt[1],xt[1]=mt[0];const D=(0,Util.ep)(i,t[y],ft,(0,vec2.i)(lt,ft,xt),1,a),v=(0,Util.ep)(i,t[j],ft,lt,1,r),z=(0,Util.ep)(i,t[j],pt,(0,vec2.i)(lt,pt,xt),1,n),E=(0,Util.ep)(i,t[y],pt,lt,1,o);(0,Util.T)(D,"rayRay"),(0,Util.T)(v,"rayRay"),(0,Util.T)(z,"rayRay"),(0,Util.T)(E,"rayRay")}(Z,c,h,$,tt,st,et,it),function Tt(t,s,e,i,a){(0,vec2.c)(St,e,i),(0,vec2.a)(St,St,.5),Ct[0]=St[0],Ct[1]=St[1],Ct[2]=0,Ct[3]=St[1],Ct[4]=-St[0],Ct[5]=0,Ct[6]=St[0]*St[0]+St[1]*St[1],Ct[7]=St[0]*St[1]-St[1]*St[0],Ct[8]=1,Ct[wt(0,2)]=-(0,vec2.g)(bt(Ct,0),t),Ct[wt(1,2)]=-(0,vec2.g)(bt(Ct,1),t);let r=(0,vec2.g)(bt(Ct,0),e)+Ct[wt(0,2)],n=(0,vec2.g)(bt(Ct,1),e)+Ct[wt(1,2)],o=(0,vec2.g)(bt(Ct,0),i)+Ct[wt(0,2)],c=(0,vec2.g)(bt(Ct,1),i)+Ct[wt(1,2)];r=-(r+o)/(n+c),Ct[wt(0,0)]+=Ct[wt(1,0)]*r,Ct[wt(0,1)]+=Ct[wt(1,1)]*r,Ct[wt(0,2)]+=Ct[wt(1,2)]*r,r=1/((0,vec2.g)(bt(Ct,0),e)+Ct[wt(0,2)]),n=1/((0,vec2.g)(bt(Ct,1),e)+Ct[wt(1,2)]),Ct[wt(0,0)]*=r,Ct[wt(0,1)]*=r,Ct[wt(0,2)]*=r,Ct[wt(1,0)]*=n,Ct[wt(1,1)]*=n,Ct[wt(1,2)]*=n,Ct[wt(2,0)]=Ct[wt(1,0)],Ct[wt(2,1)]=Ct[wt(1,1)],Ct[wt(2,2)]=Ct[wt(1,2)],Ct[wt(1,2)]+=1,r=(0,vec2.g)(bt(Ct,1),s)+Ct[wt(1,2)],n=(0,vec2.g)(bt(Ct,2),s)+Ct[wt(2,2)],o=(0,vec2.g)(bt(Ct,1),e)+Ct[wt(1,2)],c=(0,vec2.g)(bt(Ct,2),e)+Ct[wt(2,2)],r=-.5*(r/n+o/c),Ct[wt(1,0)]+=Ct[wt(2,0)]*r,Ct[wt(1,1)]+=Ct[wt(2,1)]*r,Ct[wt(1,2)]+=Ct[wt(2,2)]*r,r=(0,vec2.g)(bt(Ct,1),s)+Ct[wt(1,2)],n=(0,vec2.g)(bt(Ct,2),s)+Ct[wt(2,2)],o=-n/r,Ct[wt(1,0)]*=o,Ct[wt(1,1)]*=o,Ct[wt(1,2)]*=o,a[0]=Ct[0],a[1]=Ct[1],a[2]=0,a[3]=Ct[2],a[4]=Ct[3],a[5]=Ct[4],a[6]=0,a[7]=Ct[5],a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=Ct[6],a[13]=Ct[7],a[14]=0,a[15]=Ct[8]}($,tt,et,it,r.projectionMatrix),r.projectionMatrix[10]=2/(i-a),r.projectionMatrix[14]=-(i+a)/(i-a)}(e,i,m,_,a.camera),(0,mat4.m)(a.lightMat,a.camera.projectionMatrix,a.camera.viewMatrix);const l=this._textureSize/(1===this.numCascades?1:2);a.camera.viewport=[t%2==0?0:l,0===Math.floor(t/2)?0:l,l,l]}_setupMatrices(t,s){(0,mat4.m)(this._projectionView,t.projectionMatrix,t.viewMatrix),(0,mat4.a)(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===ViewingMode.JY.Global?t.eye:(0,vec3.s)(at,0,0,1);(0,mat4.u)(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_clampNearFar(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}_computeCascadeDistances(t,e,i){const a=i?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor((0,Util.E6)(t/e,4)),a);const r=(t-e)/this._numCascades,n=(t/e)**(1/this._numCascades);let o=e,c=e;for(let h=0;h<this._numCascades+1;++h)this._cascadeDistances[h]=(0,mathUtils.t7)(o,c,this.settings.splitSchemeLambda),o*=n,c+=r}get gpuMemoryUsage(){return this._snapshots.reduce(((t,s)=>t+(s?.gpuMemoryUsage??0)),this._fbo?.gpuMemoryUsage??0)}get test(){return{cascades:this._cascades,textureSize:this._textureSize}}}const K=(0,mat4f64.c)(),Y=(0,vec4f64.c)(),Z=[];for(let yt=0;yt<8;++yt)Z.push((0,vec4f64.c)());const $=(0,vec2f64.a)(),tt=(0,vec2f64.a)(),st=(0,vec2f64.a)(),et=(0,vec2f64.a)(),it=(0,vec2f64.a)(),at=(0,vec3f64.c)(),rt=[],nt=(0,mat4f64.c)(),ot=new Array(64),ct=(0,vec2f64.a)(),ht=(0,vec2f64.a)(),ut=[(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)()],mt=(0,vec2f64.a)(),_t=(0,vec2f64.a)(),lt=(0,vec2f64.a)(),dt=(0,vec2f64.a)(),pt=(0,vec2f64.a)(),ft=(0,vec2f64.a)(),xt=(0,vec2f64.a)();function wt(t,s){return 3*s+t}const Mt=(0,vec2f64.a)();function bt(t,s){return(0,vec2.s)(Mt,t[s],t[s+3]),Mt}const St=(0,vec2f64.a)(),Ct=(0,mat3f64.c)();var IntersectorInterfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js"),IntersectorTarget=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js");__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js");class Intersector_i extends IntersectorTarget.Dx{constructor(e,r,t){super(e,r),this.triangleNr=t}}class ChangeSet_s{constructor(){this.adds=new PooledArray.Z,this.removes=new PooledArray.Z,this.updates=new PooledArray.Z({allocator:e=>e||new r,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class r{}class ChangeSet_t{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}var Intersector=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js"),ModelDirtyTypes=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js");function rendererUtils_t(e){return e.geometry.indexCount>=1}var glUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js"),GLMaterials=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js"),VertexNormal_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js");class DrawParameters_i extends VertexNormal_glsl.Pf{constructor(s=(0,vec3f64.c)()){super(),this.origin=s,this.slicePlaneLocalOrigin=this.origin}}var WaterMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js");class BufferRange_t{constructor(t=0,o=0){this.from=t,this.to=o}get numElements(){return this.to-this.from}}function BufferRange_o(t){const o=new Map;t.forAll((t=>o.set(t.from,t)));let e=!0;for(;e;)e=!1,t.forEach((r=>{const s=o.get(r.to);s&&(r.to=s.to,o.delete(s.from),t.removeUnordered(s),e=!0)}))}class Instance_s extends BufferRange_t{constructor(e,s,t){super(s,t),this.geometry=e}get isVisible(){return this.geometry.visible}get hasHighlights(){return null!=this.geometry.highlights&&this.isVisible}get hasOccludees(){return null!=this.geometry.occludees}}class DrawCommand_t{constructor(){this.first=0,this.count=0}}class PerBufferData_n{constructor(){this._numElements=0,this._instances=new Map,this.holes=new PooledArray.Z({allocator:s=>s||new BufferRange_t,deallocator:null}),this.hasHiddenInstances=!1,this.hasHighlights=!1,this.hasOccludees=!1,this.drawCommandsDirty=!0,this.drawCommandsDefault=PerBufferData_o(),this.drawCommandsHighlight=PerBufferData_o(),this.drawCommandsOccludees=PerBufferData_o(),this.drawCommandsShadowHighlightRest=PerBufferData_o()}get numElements(){return this._numElements}get instances(){return this._instances}addInstance(s,t){this.deleteInstance(s),this._instances.set(s,t),this._numElements+=t.numElements}deleteInstance(s){const t=this._instances.get(s);t&&(this._numElements-=t.numElements,this._instances.delete(s))}updateInstance(s,t,e){const n=this._instances.get(s);n&&(this._numElements-=n.numElements,n.from=t,n.to=e,this._numElements+=n.numElements)}updateDrawState(s){s.isVisible?(s.hasHighlights&&(this.hasHighlights=!0),s.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(s){if(this.drawCommandsDefault.clear(),this.drawCommandsHighlight.clear(),this.drawCommandsOccludees.clear(),this.drawCommandsShadowHighlightRest.clear(),this.drawCommandsDirty=!1,0===this._instances.size)return;if(!this.needsMultipleCommands()){const t=this.drawCommandsDefault.pushNew(),e=this.holes.front();return null!=this.vao&&1===this.holes.length&&e.to===Math.floor(this.vao.byteSize/s)?(t.first=0,void(t.count=e.from)):(t.first=1/0,t.count=0,this._instances.forEach((s=>{t.first=Math.min(t.first,s.from),t.count=Math.max(t.count,s.to)})),void(t.count-=t.first))}const t=Array.from(this._instances.values()).sort(((s,t)=>s.from===t.from?s.to-t.to:s.from-t.from));for(const e of t)e.isVisible&&(h(e.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,e),h(e.hasHighlights?this.drawCommandsHighlight:this.drawCommandsShadowHighlightRest,e))}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}function PerBufferData_o(){return new PooledArray.Z({allocator:s=>s||new DrawCommand_t,deallocator:s=>s})}function h(s,t){const e=s.back();if(null==e){const e=s.pushNew();return e.first=t.from,void(e.count=t.numElements)}if(function PerBufferData_r(s,t){return s.first+s.count>=t.from}(e,t)){const s=t.from-e.first+t.numElements;e.count=s}else{const e=s.pushNew();e.first=t.from,e.count=t.numElements}}class PerOriginData_s{constructor(s){this.origin=s,this.buffers=new Array}dispose(){this.buffers.forEach((s=>s.vao.dispose())),this.buffers.length=0}findBuffer(s){return this.buffers.find((r=>r.instances.has(s)))}}var MemCache=__webpack_require__("./node_modules/@arcgis/core/core/MemCache.js"),VertexArrayObject=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js"),BufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js");const c=MemCache.an+1;class VaoCache_i{constructor(t,e,o){this._rctx=t,this._locations=e,this._layout=o,this._cache=t.newCache("VaoCache",VaoCache_n)}dispose(){this._cache.destroy()}newVao(t){const e=t.toString(),i=this._cache.pop(e);if(null!=i){const o=i.pop();return i.length>0&&this._cache.put(e,i,t*i.length,c),o}const n=new VertexArrayObject.U(this._rctx,this._locations,{geometry:this._layout},{geometry:BufferObject.f.createVertex(this._rctx,enums.l1.STATIC_DRAW)});return n.vertexBuffers.geometry.setSize(t),n}deleteVao(t){if(null==t)return null;const e=t.byteSize,o=e.toString(),r=this._cache.pop(o);return null!=r?(r.push(t),this._cache.put(o,r,e*r.length,-1)):this._cache.put(o,[t],e,-1),null}}function VaoCache_n(e,o){if(o===MemCache.lN.ALL)return void e.forEach((t=>t.dispose()));const r=e.pop(),s=e.length*r.byteSize;return r.dispose(),s}class E{constructor(e,t,r){this._rctx=e,this._materialRepository=t,this.material=r,this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this._glMaterials=new GLMaterials.p(this.material,this._materialRepository),this._bufferWriter=r.createBufferWriter(),this._vaoCache=new VaoCache_i(e,r.vertexAttributeLocations,(0,glUtil.K)(this._bufferWriter.vertexBufferLayout))}dispose(){this._glMaterials.destroy(),this._dataByOrigin.forEach((e=>e.dispose())),this._dataByOrigin.clear(),this._vaoCache.dispose()}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&this.material instanceof WaterMaterial.H}get rendersOccluded(){return!this.isEmpty&&this.material.renderOccluded!==Material.yD.Occlude}get numGeometries(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.instances.size),0))),e}forEachGeometry(e){this._dataByOrigin.forEach((t=>t.buffers.forEach((t=>t.instances.forEach((t=>e(t.geometry)))))))}modify(e){this._updateGeometries(e.updates),this._addAndRemoveGeometries(e.adds,e.removes),this._updateDrawCommands()}_updateGeometries(e){const t=this._bufferWriter,r=t.vertexBufferLayout.stride/4;for(const s of e){const e=s.renderGeometry,i=this._dataByOrigin.get(e.localOrigin.id),a=i?.findBuffer(e.id);if(null==a)return;const o=a.instances.get(e.id);if(s.updateType&(ModelDirtyTypes.$.GEOMETRY|ModelDirtyTypes.$.TRANSFORMATION)){const s=MergedRenderer_W(t.elementCount(o.geometry.geometry)*r),i=t.vertexBufferLayout.createView(s.buffer);this._writeGeometry(e,i,0),a.vao.vertexBuffers.geometry.setSubData(s,o.from*r,0,o.numElements*r),P()}s.updateType&(ModelDirtyTypes.$.HIGHLIGHT|ModelDirtyTypes.$.OCCLUDEE|ModelDirtyTypes.$.VISIBILITY)&&(a.drawCommandsDirty=!0)}}_computeDeltas(e,t){const r=new NestedMap.r;for(const s of e){const e=s.localOrigin;if(null==e)continue;let t=r.get(e.id,null);null==t&&(t=new A(e.vec3),r.set(e.id,null,t)),t.changes.push(s)}for(const s of t){const e=s.localOrigin;if(null==e)continue;const t=this._dataByOrigin.get(e.id),i=t?.findBuffer(s.id);if(null==i)continue;let a=r.get(e.id,i);null==a&&(a=new A(e.vec3),r.set(e.id,i,a)),a.changes.push(s)}return r}_addAndRemoveGeometries(t,r){const{_bufferWriter:s,_dataByOrigin:i}=this,a=s.vertexBufferLayout.stride/4,o=this._computeDeltas(t,r);o.forEach(((t,r)=>{const n=t.get(null),l=null!=n?n.changes:[];o.delete(r,null);let h=i.get(r);if(t.forEach(((t,n)=>{if(o.delete(r,n),null==n)return void(0,Util.hu)(!1,"No VAO for removed geometries");if(n.instances.size===t.changes.length)return this._vaoCache.deleteVao(n.vao),(0,arrayUtils.e$)(h.buffers,n),void(0===h.buffers.length&&0===l.length&&i.delete(r));const u=n.numElements,f=n.vao.byteSize/4,c=l.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),d=t.changes.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),g=Math.min((u+c-d)*a,G),p=g>f;g>j&&g<f/2?(t.changes.forEach((({id:e})=>n.deleteInstance(e))),n.instances.forEach((({geometry:e})=>l.push(e))),this._vaoCache.deleteVao(n.vao),(0,arrayUtils.e$)(h.buffers,n)):p?this._applyAndRebuild(n,l,t):this._applyRemoves(n,t)})),l.length>0)for(null==h&&(h=new PerOriginData_s(n.origin),i.set(r,h)),h.buffers.forEach((e=>this._applyAdds(e,l)));l.length>0;)h.buffers.push(this._applyAndRebuild(new PerBufferData_n,l,null))}))}_updateDrawCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.buffers.forEach((e=>{e.drawCommandsDirty&&(e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,(0,MapUtils.oE)(e.instances,(t=>(e.updateDrawState(t),e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees))),e.updateDrawCommands(this._bufferWriter.vertexBufferLayout.stride)),this._hasHighlights=this._hasHighlights||e.hasHighlights,this._hasOccludees=this._hasOccludees||e.hasOccludees}))}))}_applyAndRebuild(e,t,r){if(null!=r)for(const d of r.changes)e.deleteInstance(d.id);const s=this._bufferWriter,i=s.vertexBufferLayout.stride,a=i/4,o=Math.floor(G/a);let n=e.numElements;for(;t.length>0;){const r=t.pop(),i=s.elementCount(r.geometry);if(n+i>o&&n>0){t.push(r);break}n+=i;const a=new Instance_s(r,0,0);(0,Util.hu)(null==e.instances.get(r.id)),e.addInstance(r.id,a)}const l=n*a,h=MergedRenderer_W(l),u=s.vertexBufferLayout.createView(h.buffer);let f=0;e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,e.instances.forEach(((t,r)=>{this._writeGeometry(t.geometry,u,f);const i=f;f+=s.elementCount(t.geometry.geometry),e.updateInstance(r,i,f),e.updateDrawState(t)})),this._vaoCache.deleteVao(e.vao),e.vao=this._vaoCache.newVao(V(l)),e.vao.vertexBuffers.geometry.setSubData(h,0,0,f*a),P(),e.holes.clear();const c=e.holes.pushNew();return c.from=f,c.to=Math.floor(e.vao.byteSize/i),e.updateDrawCommands(i),e}_applyRemoves(e,t){if(0===t.changes.length)return;for(const o of t.changes){const t=o.id,r=e.instances.get(t);if(!r)continue;e.deleteInstance(t);const s=x.back();if(s){if(s.to===r.from){s.to=r.to;continue}if(s.from===r.to){s.from=r.from;continue}}const i=x.pushNew();i.from=r.from,i.to=r.to}BufferRange_o(x);const r=this._bufferWriter.vertexBufferLayout.stride/4,s=x.reduce(((e,t)=>Math.max(e,t.numElements)),0)*r,i=MergedRenderer_W(s);i.fill(0,0,s);const a=e.vao.vertexBuffers.geometry;x.forAll((e=>a.setSubData(i,e.from*r,0,e.numElements*r))),P(),e.holes.pushArray(x.data,x.length),x.forAll(((e,t)=>x.data[t]=null)),x.clear(),e.drawCommandsDirty=!0}_applyAdds(e,r){if(0===r.length)return;if(!function PerBufferData_a(s){return null!=s.vao}(e))return void this._applyAndRebuild(e,r,null);const s=this._bufferWriter,i=s.vertexBufferLayout.stride/4,a=e.numElements,o=r.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),n=Math.min((a+o)*i,G),l=4*n;if(e.vao.byteSize<V(G-j)&&l>e.vao.byteSize)return void this._applyAndRebuild(e,r,null);BufferRange_o(e.holes);const h=new Array;for(const t of r){const r=s.elementCount(t.geometry),i=H(e.holes,r);h.push(i)}const u=e.vao.vertexBuffers.geometry;let f=0,c=0,d=0;const g=MergedRenderer_W(n),p=s.vertexBufferLayout.createView(g.buffer);r.forEach(((t,r)=>{const a=h[r];if(null==a)return;if(d!==a){const e=d-c;e>0&&u.setSubData(g,c*i,0,e*i),c=a,f=0}const o=s.elementCount(t.geometry);this._writeGeometry(t,p,f),f+=o,d=a+o;const n=new Instance_s(t,a,a+o);(0,Util.hu)(null==e.instances.get(t.id)),e.addInstance(t.id,n),e.drawCommandsDirty=!0}));const y=d-c;y>0&&u.setSubData(g,c*i,0,y*i),(0,arrayUtils.hv)(r,((e,t)=>null==h[t])),P()}_writeGeometry(e,t,r){const s=e.localOrigin.vec3;(0,Util.u_)(D,-s[0],-s[1],-s[2]);const i=(0,mat4.m)(S,D,e.transformation);(0,mat4.a)(M,i),(0,mat4.t)(M,M),this._bufferWriter.write(i,M,e.geometry,t,r)}updateAnimation(e){return this.material.update(e)}requiresSlot(e,t){return this.material.requiresSlot(e,t)}prepareTechnique(e){const{output:t,bindParameters:r}=e;if(!this.requiresSlot(r.slot,t))return null;const s=t===ShaderOutput.H.Highlight||t===ShaderOutput.H.ShadowHighlight;if(s&&!this._hasHighlights)return null;const i=t===ShaderOutput.H.ShadowExcludeHighlight,a=!(s||i);for(const o of this._dataByOrigin.values())for(const n of o.buffers){if(s&&!n.hasHighlights)continue;const o=(s?n.drawCommandsHighlight:i&&n.needsMultipleCommands()?n.drawCommandsShadowHighlightRest:n.drawCommandsDefault)||null,l=a&&n.drawCommandsOccludees||null;if(o?.length||l?.length){const s=this._glMaterials.load(e.rctx,r.slot,t),i=null!=s?s.beginSlot(r):null;if(null!=i)return i}}return null}render(e,t){const{output:r,bindParameters:s}=e,i=r===ShaderOutput.H.Highlight||r===ShaderOutput.H.ShadowHighlight,a=r===ShaderOutput.H.ShadowExcludeHighlight,o=!(i||a),n=this._rctx;n.appleAmdDriverHelper?.resetIndicesType(),n.bindTechnique(t,this.material.parameters,s);for(const l of this._dataByOrigin.values())for(const e of l.buffers){if(i&&!e.hasHighlights)continue;const r=(i?e.drawCommandsHighlight:a&&e.needsMultipleCommands()?e.drawCommandsShadowHighlightRest:e.drawCommandsDefault)||null,h=o&&e.drawCommandsOccludees||null;(r?.length||h?.length)&&(t.program.bindDraw(new DrawParameters_i(l.origin),s,this.material.parameters),t.ensureAttributeLocations(e.vao),n.bindVAO(e.vao),r?.length&&(t.bindPipelineState(n,s.slot,!1),r.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count)))),h?.length&&(t.bindPipelineState(n,s.slot,!0),h.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count)))))}}get test(){return{material:this.material,glMaterials:this._glMaterials,dataByOrigin:this._dataByOrigin}}}class A{constructor(e){this.origin=e,this.changes=new Array}}function H(e,t){let r;if(!e.some((e=>!(e.numElements<t||(r=e,0)))))return null;const s=r.from;return r.from+=t,r.from>=r.to&&e.removeUnordered(r),s}const D=(0,mat4f64.c)(),S=(0,mat4f64.c)(),M=(0,mat4f64.c)(),x=new PooledArray.Z({allocator:e=>e||new BufferRange_t,deallocator:null}),j=65536,I=4*j,L=1024,R=16777216,G=R/4;let T=new Float32Array(j);function MergedRenderer_W(e){return T.length<e&&(T=new Float32Array(e)),T}function V(e){const t=4*e;return t<=L?L:t<I?I:Math.max(Math.min(Math.ceil(1.5*t/I)*I,R),t)}function P(){T=new Float32Array(2)}let _=class extends Accessor.Z{constructor(e){super(e),this._pending=new y,this._changes=new ChangeSet_s,this._materialRenderers=new Map,this._sortedMaterialRenderers=new PooledArray.Z,this._geometries=new Map,this._hasHighlights=!1,this._hasWater=!1}destroy(){this._changes.prune(),this._materialRenderers.forEach((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear(),this._geometries.clear(),this._pending.clear()}get updating(){return!this._pending.empty||this._changes.updates.length>0}get rctx(){return this.rendererContext.rctx}get _materialRepository(){return this.rendererContext.materialRepository}get _localOriginFactory(){return this.rendererContext.localOriginFactory}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return(0,MapUtils.oE)(this._materialRenderers,(e=>e.rendersOccluded))}get isEmpty(){return!this.updating&&0===this._materialRenderers.size&&0===this._geometries.size}commitChanges(){if(!this.updating)return!1;this._processAddsRemoves();const e=function rendererUtils_r(r){const n=new Map,o=r=>{let t=n.get(r);return t||(t=new ChangeSet_t,n.set(r,t)),t};return r.removes.forAll((e=>{rendererUtils_t(e)&&o(e.material).removes.push(e)})),r.adds.forAll((e=>{rendererUtils_t(e)&&o(e.material).adds.push(e)})),r.updates.forAll((e=>{rendererUtils_t(e.renderGeometry)&&o(e.renderGeometry.material).updates.push(e)})),n}(this._changes);let r=!1,s=!1,i=!1;return e.forEach(((e,t)=>{let n=this._materialRenderers.get(t);if(!n&&e.adds.length>0&&(n=new E(this.rctx,this._materialRepository,t),this._materialRenderers.set(t,n),r=!0,s=!0,i=!0),!n)return;const a=s||n.hasHighlights,o=i||n.hasWater;n.modify(e),s=s||a!==n.hasHighlights,i=i||o!==n.hasWater,n.isEmpty&&(this._materialRenderers.delete(t),n.dispose(),r=!0)})),this._changes.clear(),r&&this._updateSortedMaterialRenderers(),s&&(this._hasHighlights=(0,MapUtils.oE)(this._materialRenderers,(e=>e.hasHighlights))),i&&(this._hasWater=(0,MapUtils.oE)(this._materialRenderers,(e=>e.hasWater))),this.notifyChange("updating"),!0}addGeometries(e,r){if(0===e.length)return;const t=this._validateRenderGeometries(e);for(const i of t)this._geometries.set(i.id,i);const s=this._pending.empty;for(const i of t)this._pending.adds.add(i);s&&this.notifyChange("updating"),r===ModelDirtyTypes.T.UPDATE&&this._notifyGraphicGeometryChanged(e)}removeGeometries(e,r){const t=this._pending.empty,s=this._pending.adds;for(const i of e)s.has(i)?(this._pending.removed.add(i),s.delete(i)):this._pending.removed.has(i)||this._pending.removes.add(i),this._geometries.delete(i.id);t&&!this._pending.empty&&this.notifyChange("updating"),r===ModelDirtyTypes.T.UPDATE&&this._notifyGraphicGeometryChanged(e)}modifyGeometries(e,r){const t=0===this._changes.updates.length;for(const s of e){const e=this._changes.updates.pushNew();e.renderGeometry=this._validateRenderGeometry(s),e.updateType=r}switch(t&&this._changes.updates.length>0&&this.notifyChange("updating"),r){case ModelDirtyTypes.$.TRANSFORMATION:case ModelDirtyTypes.$.GEOMETRY:return this._notifyGraphicGeometryChanged(e);case ModelDirtyTypes.$.VISIBILITY:return this._notifyGraphicVisibilityChanged(e)}}updateAnimation(e){let r=!1;return this._sortedMaterialRenderers.forAll((t=>r=t.updateAnimation(e)||r)),r}render(e){this._sortedMaterialRenderers.forAll((r=>{if(r.material.shouldRender(e)){const t=r.prepareTechnique(e);null!=t&&r.render(e,t)}}))}intersect(e,r,t,s,i){return this._geometries.forEach((n=>{if(s&&!s(n))return;this._intersectRenderGeometry(n,t,r,0,e,i);const a=this.rendererContext.longitudeCyclical;a&&(n.boundingSphere[0]-n.boundingSphere[3]<a.min&&this._intersectRenderGeometry(n,t,r,a.range,e,i),n.boundingSphere[0]+n.boundingSphere[3]>a.max&&this._intersectRenderGeometry(n,t,r,-a.range,e,i)),i++})),i}_updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear();let e=0;this._materialRenderers.forEach(((r,t)=>{t.insertOrder=e++,this._sortedMaterialRenderers.push(r)})),this._sortedMaterialRenderers.sort(((e,r)=>{const t=r.material.renderPriority-e.material.renderPriority;return 0!==t?t:e.material.insertOrder-r.material.insertOrder}))}_processAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._changes.adds.pushArray(Array.from(this._pending.adds)),this._changes.removes.pushArray(Array.from(this._pending.removes));for(let e=0;e<this._changes.updates.length;){const r=this._changes.updates.data[e];this._pending.has(r.renderGeometry)?this._changes.updates.removeUnorderedIndex(e):e++}this._pending.clear()}_intersectRenderGeometry(e,r,t,s,i,n){if(!e.visible)return;let a=0;s+=e.transformation[12],a=e.transformation[13],SortedRenderGeometryRenderer_R[0]=t[0]-s,SortedRenderGeometryRenderer_R[1]=t[1]-a,e.screenToWorldRatio=this.rendererContext.screenToWorldRatio,e.material.intersectDraped(e,null,i,SortedRenderGeometryRenderer_R,((t,s,a)=>{!function f(e,r,t,s,i,n,a){const d=new Intersector_i(n,a,r),p=r=>{r.set(IntersectorInterfaces.q7.OVERLAY,d,e.dist,e.normal,e.transformation,t,s)};if((null==i.results.min.drapedLayerOrder||t>=i.results.min.drapedLayerOrder)&&(null==i.results.min.dist||i.results.ground.dist<=i.results.min.dist)&&p(i.results.min),i.options.store!==IntersectorInterfaces.eC.MIN&&(null==i.results.max.drapedLayerOrder||t<i.results.max.drapedLayerOrder)&&(null==i.results.max.dist||i.results.ground.dist>i.results.max.dist)&&p(i.results.max),i.options.store===IntersectorInterfaces.eC.ALL){const e=(0,Intersector.LP)(i.ray);p(e),i.results.all.push(e)}}(r,a,e.material.renderPriority,n,i,e.layerUid,e.graphicUid)}),r)}_notifyGraphicGeometryChanged(e){if(null==this.drapeSource.notifyGraphicGeometryChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicGeometryChanged(e),r=e)}}_notifyGraphicVisibilityChanged(e){if(null==this.drapeSource.notifyGraphicVisibilityChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicVisibilityChanged(e),r=e)}}_validateRenderGeometries(e){for(const r of e)this._validateRenderGeometry(r);return e}_validateRenderGeometry(e){return null==e.localOrigin&&(e.localOrigin=this._localOriginFactory.getOrigin(e.boundingSphere)),e}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"drapeSource",void 0),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"rctx",null),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"rendererContext",void 0),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"_materialRepository",null),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"_localOriginFactory",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],_.prototype,"isEmpty",null),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"_materialRenderers",void 0),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"_geometries",void 0),_=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer")],_);class y{constructor(){this.adds=new Set,this.removes=new Set,this.removed=new Set}get empty(){return 0===this.adds.size&&0===this.removes.size&&0===this.removed.size}has(e){return this.adds.has(e)||this.removes.has(e)||this.removed.has(e)}clear(){this.adds.clear(),this.removes.clear(),this.removed.clear()}}const SortedRenderGeometryRenderer_R=(0,vec2f64.a)();var SSAOHelper=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/SSAOHelper.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class m extends ShaderTechnique.A{initializeProgram(e){return new Program.$(e.rctx,m.shader.get().build(),DefaultVertexAttributeLocations.i)}initializePipeline(){return this.configuration.hasAlpha?(0,renderState.sm)({blending:(0,renderState.wK)(enums.zi.SRC_ALPHA,enums.zi.ONE,enums.zi.ONE_MINUS_SRC_ALPHA,enums.zi.ONE_MINUS_SRC_ALPHA),colorWrite:renderState.BK}):(0,renderState.sm)({colorWrite:renderState.BK})}}m.shader=new ReloadableShaderModule.J(TextureOnly_glsl.a,(()=>__webpack_require__.e(1225).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureOnly.glsl.js"))));class TextureTechniqueConfiguration_r extends ShaderTechniqueConfiguration.m{constructor(){super(...arguments),this.hasAlpha=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],TextureTechniqueConfiguration_r.prototype,"hasAlpha",void 0);var UpdatePolicy=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js"),Lightsources=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js"),Scheduler=__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js"),webgl_Util=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Util.js");let ie=class extends Accessor.Z{get _bindParameters(){return this._renderContext.bindParameters}get _rctx(){return this.view._stage.renderView.renderingContext}get rctx(){return this._rctx}get materialRepository(){return this._materialRepository}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}constructor(e){super(e),this._overlays=null,this._overlayRenderTarget=null,this._hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._handles=new Handles.Z,this._renderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedRenderers=new PooledArray.Z,this._passParameters=new TextureOnly_glsl.T,this._materialRepository=null,this._screenToWorldRatio=1,this._localOriginFactory=null,this._camera=new Camera.V,this.worldToPCSRatio=1,this.events=new Evented.Z,this.longitudeCyclical=null}initialize(){const e=this.view._stage.renderView,{waterTextureRepository:r,stippleTextureRepository:t,markerTextureRepository:s}=e;this._shaderTechniqueRepository=new ShaderTechniqueRepository_r({rctx:this._rctx,viewingMode:ViewingMode.JY.Local,stippleTextureRepository:t,markerTextureRepository:s,waterTextureRepository:r}),this._renderContext=new RenderContext_i(this._rctx,new J(this._rctx,this.view.state.viewingMode),new SSAOHelper.L(this.view,this._shaderTechniqueRepository,this._rctx,(()=>{}))),this._handles.add([(0,reactiveUtils.YP)((()=>r.updating),(()=>this.events.emit("content-changed")),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.spatialReference),(e=>this._localOriginFactory=new GridLocalOriginFactory.C(e)),reactiveUtils.tX),(0,reactiveUtils.on)((()=>this.view.allLayerViews),"after-changes",(()=>this._sortedDrapeSourceRenderersDirty=!0))]),this._materialRepository=new GLMaterialRepository_s(e.textureRepository,this._shaderTechniqueRepository,(e=>{(e.renderOccluded&he)>0!==this._rendersOccluded&&this._updateRendersOccluded(),this.events.emit("content-changed"),this.notifyChange("updating"),this.notifyChange("isEmpty")}),(()=>this.events.emit("content-changed"))),this._bindParameters.slot=RenderSlot.r.DRAPED_MATERIAL,this._bindParameters.highlightDepthTexture=(0,glUtil3D.hf)(this._rctx),this._camera.near=1,this._camera.far=1e4,this._camera.relativeElevation=null,this._bindParameters.camera=this._camera,this._bindParameters.transparencyPassType=TransparencyPassType.A.NONE,this._bindParameters.newLighting.noonFactor=0,this._bindParameters.newLighting.globalFactor=0,this._bindParameters.newLighting.set([new Lightsources.Mi((0,vec3f64.f)(1,1,1))]),this._handles.add(this.view.resourceController.scheduler.registerTask(Scheduler.T8.STAGE,this))}destroy(){this._handles.destroy(),this._renderers.forEach((e=>e.destroy())),this._renderers.clear(),this._debugTextureTechnique=(0,maybe.RY)(this._debugTextureTechnique),this._passParameters.texture=(0,maybe.M2)(this._passParameters.texture),this._bindParameters.highlightDepthTexture=(0,maybe.M2)(this._bindParameters.highlightDepthTexture),this._shaderTechniqueRepository=(0,maybe.SC)(this._shaderTechniqueRepository),this._temporaryFBO=(0,maybe.M2)(this._temporaryFBO),this._quadVAO=(0,maybe.M2)(this._quadVAO),this.disposeOverlays()}get updating(){return this._sortedDrapeSourceRenderersDirty||(0,MapUtils.oE)(this._renderers,(e=>e.updating))}get hasOverlays(){return null!=this._overlays&&null!=this._overlayRenderTarget}get gpuMemoryUsage(){return null!=this._overlayRenderTarget?this._overlayRenderTarget.gpuMemoryUsage:0}createGeometryDrapeSourceRenderer(e){return this.createDrapeSourceRenderer(e,_)}createDrapeSourceRenderer(e,r,t){const s=this._renderers.get(e);null!=s&&s.destroy();const i=new r({...t,rendererContext:this,drapeSource:e});return this._renderers.set(e,i),this._sortedDrapeSourceRenderersDirty=!0,"fullOpacity"in e&&this._handles.add((0,reactiveUtils.YP)((()=>e.fullOpacity),(()=>this.events.emit("content-changed"))),e),i}removeDrapeSourceRenderer(e){if(null==e)return;const r=this._renderers.get(e);null!=r&&(this._sortedDrapeSourceRenderersDirty=!0,this._renderers.delete(e),this._handles.remove(e),r.destroy())}collectUnusedRenderTargetMemory(){let e=!1;const r=(0,time.zO)();if(null!=this._overlayRenderTarget)for(const t of this._overlayRenderTarget.renderTargets){const s=this.overlays[terrain_interfaces.fu.INNER].validTargets[t.type];e=this._overlayRenderTarget.validateUsageForTarget(s,t,r)||e}return e}get overlays(){return this._overlays??[]}ensureDrapeTargets(e){null!=this._overlays&&this._overlays.forEach((r=>r.hasTargetWithoutRasterImage=(0,SetUtils.f)(e,(e=>e.drapeTargetType===interfaces.al.WithoutRasterImage))))}ensureDrapeSources(e){null!=this._overlays&&this._overlays.forEach((r=>{r.hasDrapedFeatureSource=(0,SetUtils.f)(e,(e=>e.drapeSourceType===interfaces.Lw.Features)),r.hasDrapedRasterSource=(0,SetUtils.f)(e,(e=>e.drapeSourceType===interfaces.Lw.RasterImage))}))}ensureOverlays(e,r){null==this._overlays&&(this._overlayRenderTarget=new a(this._rctx),this._overlays=[new Overlay.aV(terrain_interfaces.fu.INNER,this._overlayRenderTarget),new Overlay.aV(terrain_interfaces.fu.OUTER,this._overlayRenderTarget)]),this.ensureDrapeTargets(e),this.ensureDrapeSources(r)}disposeOverlays(){this._overlays=null,this._overlayRenderTarget=(0,maybe.M2)(this._overlayRenderTarget),this.events.emit("textures-disposed")}get running(){return this.updating}runTask(e){this._processDrapeSources(e,(()=>!0))}_processDrapeSources(e,r){let t=!1;for(const[s,i]of this._renderers){if(e.done)break;(s.destroyed||r(s))&&i.commitChanges()&&(t=!0,e.madeProgress())}this._sortedDrapeSourceRenderersDirty&&(this._sortedDrapeSourceRenderersDirty=!1,t=!0,this._updateSortedDrapeSourceRenderers()),t&&(null!=this._overlays&&0===this._renderers.size&&this.disposeOverlays(),this.notifyChange("updating"),this.notifyChange("isEmpty"),this.events.emit("content-changed"),this._updateHasHighlights(),this._updateRendersOccluded(),this._updateHasWater())}processSyncDrapeSources(){this._processDrapeSources(Scheduler.G5,(e=>e.updatePolicy===UpdatePolicy.j.SYNC))}get isEmpty(){return!debugFlags.Z.OVERLAY_DRAW_DEBUG_TEXTURE&&!(0,MapUtils.oE)(this._renderers,(e=>!e.isEmpty))}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}updateAnimation(e){let r=!1;return this._renderers.forEach((t=>r=t.updateAnimation(e)||r)),r}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}drawTarget(e,r,t){const s=e.canvasGeometries;if(0===s.numViews)return!1;const{alignPixelEnabled:i,contentPixelRatio:o}=t;this._screenToWorldRatio=o*e.mapUnitsPerPixel/Overlay.zO;const a=r.output;if(this.isEmpty||a===ShaderOutput.H.Highlight&&!this.hasHighlights||a===ShaderOutput.H.Normal&&!this.hasWater||!e.hasSomeSizedView())return!1;const n=r.fbo;if(!n.isValid())return!1;const h=2*e.resolution,d=e.resolution;n.resize(h,d);const l=this._rctx;if(this._camera.pixelRatio=e.pixelRatio*o,this._renderContext.output=a,this._bindParameters.alignPixelEnabled=i,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToPCSRatio=this._screenToWorldRatio*this.worldToPCSRatio,this._bindParameters.slot=a===ShaderOutput.H.Normal?RenderSlot.r.DRAPED_WATER:RenderSlot.r.DRAPED_MATERIAL,e.applyViewport(this._rctx),n.bind(l),e.index===terrain_interfaces.fu.INNER&&(l.setClearColor(0,0,0,0),l.clearSafe(enums.lk.COLOR_BUFFER_BIT)),r.type===terrain_interfaces.NH.Occluded&&(this._renderContext.renderOccludedMask=he),debugFlags.Z.OVERLAY_DRAW_DEBUG_TEXTURE&&r.type!==terrain_interfaces.NH.Occluded)for(let c=0;c<s.numViews;c++)this._setViewParameters(s.extents[c],e),this._drawDebugTexture(e.resolution,ae[e.index]);return this._renderers.size>0&&this._sortedRenderers.forAll((({drapeSource:t,renderer:i})=>{if(r.type===terrain_interfaces.NH.ColorNoRasterImage&&t.drapeSourceType===interfaces.Lw.RasterImage)return;const{fullOpacity:o}=t,c=null!=o&&o<1&&a===ShaderOutput.H.Color;c&&(this.bindTemporaryFramebuffer(this._rctx,h,d),l.clearSafe(enums.lk.COLOR_BUFFER_BIT));for(let r=0;r<s.numViews;r++)this._setViewParameters(s.extents[r],e),i.render(this._renderContext);c&&null!=this._temporaryFBO&&(n.bind(l),this.view._stage.renderView.compositingHelper.compositeOverlay(this._renderContext.bindParameters,this._temporaryFBO.getTexture(),o,e.index))})),l.bindFramebuffer(null),n.generateMipMap(),this._renderContext.resetRenderOccludedMask(),!0}bindTemporaryFramebuffer(e,r,t){null==this._temporaryFBO&&(this._temporaryFBO=new i(e,!1)),this._temporaryFBO.resize(r,t),this._temporaryFBO.bind(e)}async reloadShaders(){await this._shaderTechniqueRepository.reloadAll()}notifyContentChanged(){this.events.emit("content-changed")}intersect(e,r,t,s){let i=0;for(const o of this._renderers.values())i=o.intersect?.(e,r,t,s,i)??i}_updateSortedDrapeSourceRenderers(){if(this._sortedRenderers.clear(),0===this._renderers.size)return;const e=this.view.map.allLayers;this._renderers.forEach(((r,t)=>{const s=e.indexOf(t.layer),i=s>=0,o=this._renderers.size*(t.renderGroup??(i?interfaces.eZ.MapLayer:interfaces.eZ.ViewLayer))+(i?s:0);this._sortedRenderers.push(new oe(t,r,o))})),this._sortedRenderers.sort(((e,r)=>e.index-r.index))}_setViewParameters(e,r){const t=this._camera;t.viewport=[0,0,r.resolution,r.resolution],(0,mat4.x)(t.projectionMatrix,0,e[2]-e[0],0,e[3]-e[1],t.near,t.far),(0,mat4.f)(t.viewMatrix,[-e[0],-e[1],0])}_updateHasWater(){const e=(0,MapUtils.oE)(this._renderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e,this.events.emit("has-water",e))}_updateHasHighlights(){const e=(0,MapUtils.oE)(this._renderers,(e=>e.hasHighlights));e!==this._hasHighlights&&(this._hasHighlights=e,this.events.emit("has-highlights",e))}_updateRendersOccluded(){const e=(0,MapUtils.oE)(this._renderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.events.emit("renders-occluded",e))}_drawDebugTexture(e,r){this._ensureDebugPatternResources(e,r);const t=this._rctx;t.bindTechnique(this._debugTextureTechnique,this._passParameters,null),t.bindVAO(this._quadVAO),t.drawArrays(enums.MX.TRIANGLE_STRIP,0,(0,webgl_Util._V)(this._quadVAO,"geometry"))}_ensureDebugPatternResources(e,r){if((0,vec3.s)(this._passParameters.color,r[0],r[1],r[2]),this._passParameters.texture)return;const t=new Uint8Array(e*e*4);let s=0;for(let a=0;a<e;a++)for(let r=0;r<e;r++){const i=Math.floor(r/10),o=Math.floor(a/10);i<2||o<2||10*i>e-20||10*o>e-20?(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=255):(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=1&i&&1&o?1&r^1&a?0:255:1&i^1&o?0:128)}const i=new TextureDescriptor.X(e);i.samplingMode=enums.cw.NEAREST,this._passParameters.texture=new Texture.x(this._rctx,i,t);const o=new TextureTechniqueConfiguration_r;o.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquire(m,o),this._quadVAO=(0,glUtil3D.ow)(this._rctx)}get test(){return{drapedRenderers:Array.from(this._renderers.values()),getDrapeSourceRenderer:e=>this._renderers.get(e)}}};(0,tslib_es6._)([(0,property.Cb)()],ie.prototype,"_sortedDrapeSourceRenderersDirty",void 0),(0,tslib_es6._)([(0,property.Cb)({autoDestroy:!0})],ie.prototype,"_shaderTechniqueRepository",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],ie.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],ie.prototype,"worldToPCSRatio",void 0),(0,tslib_es6._)([(0,property.Cb)()],ie.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,readOnly:!0})],ie.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],ie.prototype,"isEmpty",null),ie=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.terrain.OverlayRenderer")],ie);class oe{constructor(e,r,t){this.drapeSource=e,this.renderer=r,this.index=t}}const ae=[[1,.5,.5],[.5,.5,1]],ne=-2,he=Material.yD.OccludeAndTransparent},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>c});var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.p("intrinsicWidth",(t=>t.width))),s.vvSize?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.T.SIZEFEATUREATTRIBUTE,"float"),l.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.J("vvSizeMinSize",(t=>t.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.J("vvSizeMaxSize",(t=>t.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.J("vvSizeOffset",(t=>t.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.J("vvSizeFactor",(t=>t.vvSize.factor))),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.T.SIZE,"float"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`float getSize(){
return intrinsicWidth * size;
}`)),s.vvOpacity?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.T.OPACITYFEATUREATTRIBUTE,"float"),l.constants.add("vvOpacityNumber","int",8),l.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.O("vvOpacityValues",(t=>t.vvOpacity.values),o),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.O("vvOpacityOpacities",(t=>t.vvOpacity.opacityValues),o)),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 applyOpacity( vec4 color ){
return color;
}`),s.vvColor?(c.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__.k,s),c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.T.COLORFEATUREATTRIBUTE,"float"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.T.COLOR,"vec4"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 getColor(){
return applyOpacity(color);
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>o});var _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function o(o){o.uniforms.add(new _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__.U("alignPixelEnabled",((e,i)=>i.alignPixelEnabled))),o.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__.H`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),o.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__.H`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>m,d:()=>v});var c,VerticalOffset_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js"),AlignPixel_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js");!function(c){c[c.Occluded=0]="Occluded",c[c.NotOccluded=1]="NotOccluded",c[c.Both=2]="Both",c[c.COUNT=3]="COUNT"}(c||(c={}));var v,ScreenSizePerspective_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"),View_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),Float4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function m(m,O){m.include(ScreenSizePerspective_glsl.cK),m.attributes.add(VertexAttribute.T.POSITION,"vec3"),m.attributes.add(VertexAttribute.T.NORMAL,"vec3"),m.attributes.add(VertexAttribute.T.AUXPOS1,"vec4");const w=m.vertex;(0,View_glsl.Sv)(w,O),(0,View_glsl.hY)(w,O),w.uniforms.add(new Float4PassUniform.N("viewport",((e,t)=>t.camera.fullViewport)),new FloatPassUniform.p("polygonOffset",(e=>e.shaderPolygonOffset)),new FloatPassUniform.p("cameraGroundRelative",((e,t)=>t.camera.aboveGround?1:-1)),new FloatPassUniform.p("renderTransparentlyOccludedHUD",((e,t)=>t.renderTransparentlyOccludedHUD===c.Occluded?1:t.renderTransparentlyOccludedHUD===c.NotOccluded?0:.75)),new Texture2DPassUniform.A("hudVisibilityTexture",((e,t)=>t.hudVisibilityTexture))),O.hasVerticalOffset&&(0,VerticalOffset_glsl.V)(w),w.constants.add("smallOffsetAngle","float",.984807753012208),w.code.add(interfaces.H`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),w.code.add(interfaces.H`float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
float pointGroundSign = sign(pointGroundDistance);
if (pointGroundSign == 0.0) {
pointGroundSign = cameraGroundRelative;
}
float groundRelative = cameraGroundRelative * pointGroundSign;
if (polygonOffset > .0) {
float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
float factor = (1.0 - tanAlpha / viewport[2]);
if (groundRelative > 0.0) {
posView *= factor;
}
else {
posView /= factor;
}
}
return groundRelative;
}`),O.draped&&!O.hasVerticalOffset||(0,View_glsl._8)(w),O.draped||(w.uniforms.add(new FloatPassUniform.p("perDistancePixelRatio",((e,t)=>Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2)))),w.code.add(interfaces.H`void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
float distanceToCamera = length(posView);
float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;
vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;
vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
posModel += modelOffset;
posView += viewOffset;
}`)),O.screenCenterOffsetUnitsEnabled===v.Screen&&(0,View_glsl.ZI)(w,O),O.hasScreenSizePerspective&&(0,ScreenSizePerspective_glsl.m8)(w),w.code.add(interfaces.H`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${O.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${O.hasScreenSizePerspective&&(O.hasVerticalOffset||O.screenCenterOffsetUnitsEnabled===v.Screen)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${O.hasVerticalOffset?O.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${O.hasVerticalOffset?interfaces.H`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${O.screenCenterOffsetUnitsEnabled!==v.Screen?interfaces.H`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${O.screenCenterOffsetUnitsEnabled===v.Screen?O.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${O.screenCenterOffsetUnitsEnabled===v.Screen?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `),w.include(AlignPixel_glsl.H),w.code.add(interfaces.H`bool testVisibilityHUD(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}!function(e){e[e.World=0]="World",e[e.Screen=1]="Screen",e[e.COUNT=2]="COUNT"}(v||(v={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>n});var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js"),_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js"),_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function n(n,p){const{vertex:l,fragment:d}=n;l.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__.H),p.hasMultipassGeometry&&l.include(_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__.S),p.hasMultipassTerrain&&n.varyings.add("depth","float"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.H`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${p.hasMultipassGeometry?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.H`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      ${p.hasMultipassTerrain?"depth = projectAux.posView.z;":""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `),p.hasMultipassTerrain&&d.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__.S),p.hasMultipassTerrain&&d.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__.A("terrainDepthTexture",((e,r)=>r.multipassTerrain.linearDepthTexture)),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__.A("nearFar",((e,r)=>r.camera.nearFar))),d.include(_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_3__.n),d.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.H`
  void main() {
    fragColor = vec4(1);
    ${p.hasMultipassTerrain?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.H`
          // Read the rgba data from the texture linear depth
          vec4 terrainDepthData = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0);

          float terrainDepth = linearDepthFromFloat(rgba2float(terrainDepthData), nearFar);

          // If HUD vertex is behind terrain and the terrain depth is not the initialize value (e.g. we are not looking at the sky)
          // Mark the HUD vertex as occluded by transparent terrain
          if(depth < terrainDepth && terrainDepthData != vec4(0,0,0,1)){
            fragColor.g = 0.5;
          }`:""}
  }
  `)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>n,K:()=>o});var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function o(o){o.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`float normals2FoamIntensity(vec3 n, float waveStrength){
float normalizationFactor =  max(0.015, waveStrength);
return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);
}`)}function n(o){o.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){
return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>LineStipple_glsl_c,C:()=>m});var RgbaFloatEncoding_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),View_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),Float4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");function u(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function s(t){if(null==t)return 1;const e=u(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function l(t){return u(t).reduce(((t,e)=>Math.max(t,e)))}const p=2;var vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");const ensureColor4_r=(0,vec4f64.c)();function LineStipple_glsl_c(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function f(s,n){const c=!(n.draped&&n.stipplePreferContinuous),{vertex:f,fragment:u}=s;u.include(RgbaFloatEncoding_glsl.n),n.draped||((0,View_glsl.hY)(f,n),f.uniforms.add(new FloatPassUniform.p("worldToScreenPerDistanceRatio",((e,t)=>1/t.camera.perScreenPixelRatio))),f.code.add(interfaces.H`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),s.varyings.add("vStippleDistance","float"),n.stippleRequiresClamp&&s.varyings.add("vStippleDistanceLimits","vec2"),n.stippleRequiresStretchMeasure&&s.varyings.add("vStipplePatternStretch","float"),f.code.add(interfaces.H`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${h};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),f.code.add(interfaces.H`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),f.code.add(interfaces.H`
    if (segmentLengthPseudoScreen >= ${c?"patternLength":"1e4"}) {
  `),(0,View_glsl.ZI)(f,n),f.code.add(interfaces.H`
        // Round the screen length to get an integer number of pattern repetitions (minimum 1).
        float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
        float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
        float segmentLengthScreenRounded = flooredRepetitions * patternLength;

        ${n.stippleRequiresStretchMeasure?interfaces.H`
              float stretch = repetitions / flooredRepetitions;

              // We need to impose a lower bound on the stretch factor to prevent the dots from merging together when there is only 1 repetition.
              // 0.75 is the lowest possible stretch value for flooredRepetitions > 1, so it makes sense as lower bound.
              vStipplePatternStretch = max(0.75, stretch);`:""}

        return vec2(0.0, segmentLengthScreenRounded);
      }
      return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
    }
  `),u.constants.add("stippleTexturePadding","float",p),u.uniforms.add(new Texture2DPassUniform.A("stipplePatternTexture",(e=>e.stippleTexture)),new FloatPassUniform.p("stipplePatternSDFNormalizer",(e=>function S(e){return e?(Math.floor(.5*(l(e)-1))+.5)/e.pixelRatio:1}(e.stipplePattern))),new FloatPassUniform.p("stipplePatternPixelSizeInv",(e=>1/m(e)))),u.code.add(interfaces.H`float padStippleTexture(float u) {
float paddedTextureSize = float(textureSize(stipplePatternTexture, 0).x);
float unpaddedTextureSize = paddedTextureSize - stippleTexturePadding;
return (u * unpaddedTextureSize + stippleTexturePadding * 0.5) / paddedTextureSize;
}`),u.code.add(interfaces.H`
    float getStippleSDF(out bool isClamped) {
      ${n.stippleRequiresClamp?interfaces.H`
          float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
          vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
          isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;`:interfaces.H`
          float stippleDistanceClamped = vStippleDistance;
          isClamped = false;`}

      float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv;
      ${n.stippleScaleWithLineWidth?interfaces.H`u *= vLineSizeInv;`:""}
      u = padStippleTexture(fract(u));

      float encodedSDF = rgba2float(texture(stipplePatternTexture, vec2(u, 0.5)));
      float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;

      ${n.stippleRequiresStretchMeasure?interfaces.H`return (sdf - 0.5) * vStipplePatternStretch + 0.5;`:interfaces.H`return sdf;`}
    }

    float getStippleSDF() {
      bool ignored;
      return getStippleSDF(ignored);
    }

    float getStippleAlpha() {
      bool isClamped;
      float stippleSDF = getStippleSDF(isClamped);

      float antiAliasedResult = ${n.stippleScaleWithLineWidth?interfaces.H`clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);`:interfaces.H`clamp(stippleSDF + 0.5, 0.0, 1.0);`}

      return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
    }
  `),n.stippleOffColorEnabled?(u.uniforms.add(new Float4PassUniform.N("stippleOffColor",(e=>function ensureColor4_o(c){return null==c?vec4f64.Z:4===c.length?c:(0,vec4.s)(ensureColor4_r,c[0],c[1],c[2],1)}(e.stippleOffColor)))),u.code.add(interfaces.H`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):u.code.add(interfaces.H`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}(e,t):function LineStipple_glsl_u(e){e.fragment.code.add(interfaces.H`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)}(e)}function m(e){const t=e.stipplePattern;return t?s(e.stipplePattern)/t.pixelRatio:1}const h=interfaces.H.float(.4)},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>n});var _support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js"),_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js");function n(n,i){const{vertex:d,constants:s}=n;s.add("markerSizePerLineWidth","float",_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__._Z),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__.ZI)(d,i),null==d.uniforms.get("markerScale")&&d.constants.add("markerScale","float",1),d.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.H`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),i.space===_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.I9.World&&(d.constants.add("maxSegmentLengthFraction","float",.45),d.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.p("perRenderPixelRatio",((e,r)=>r.camera.perRenderPixelRatio))),d.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.H`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>a,_:()=>s});var _output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function a(a){a.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.S),a.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.A("geometryDepthTexture",((e,r)=>r.multipassGeometry.linearDepthTexture)),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.A("nearFar",((e,r)=>r.camera.nearFar))),a.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__.H`bool geometryDepthTest(vec2 pos, float elementDepth) {
float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, nearFar);
return (elementDepth < (geometryDepth - 1.0));
}`)}class s{constructor(){this.enabled=!1}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>r});var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function r(r,c){c.spherical?r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return normalize(pos + origin);
}`):r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return vec3(0.0, 0.0, 1.0);
}`),c.spherical?r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`mat3 getTBNMatrix(in vec3 n) {
vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`):r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.H`mat3 getTBNMatrix(in vec3 n) {
vec3 t = vec3(1.0, 0.0, 0.0);
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>c,P:()=>n});var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function n(e,n){const c=e.fragment;c.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__.S),c.uniforms.add(new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__.A("nearFar",((e,o)=>o.camera.nearFar))),c.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__.A("depthMap",((e,o)=>o.linearDepthTexture))),c.uniforms.add(new _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_5__.g("proj",((e,o)=>o.ssr.camera.projectionMatrix))),c.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.p("invResolutionHeight",((e,o)=>1/o.ssr.camera.height))),c.uniforms.add(new _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_5__.g("reprojectionMatrix",((e,o)=>o.ssr.reprojectionMatrix))),c.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.H`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy * 0.5 + 0.5;
  }

  const int maxSteps = ${n.highStepCount?"150":"75"};

  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)
  {
    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);
    projectedCoord.xy /= projectedCoord.w;
    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;
    return projectedCoord;
  }

  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)
  {
    vec3 viewPos = startPosition;
    vec3 viewPosEnd = startPosition;

    // Project the start position to the screen
    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);
    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space
    float k0 = 1.0/ projectedCoordStart.w;

    // advance the position in the direction of the reflection
    viewPos += dir;

    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);

    // Project the advanced position to the screen
    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);
    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space
    float k1 = 1.0/ projectedCoordEnd.w;

    // calculate the reflection direction in the screen space
    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);
    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);

    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);

    float projectedCoordDirLength = length(projectedCoordDir);
    float maxSt = float(maxSteps);

    // normalize the projection direction depending on maximum steps
    // this determines how blocky the reflection looks
    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);

    // Normalize the homogeneous camera space coordinates
    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);
    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);

    // initialize the variables for ray marching
    vec2 P = projectedCoordStart.xy;
    vec3 Q = Q0;
    float k = k0;
    float rayStartZ = -startPosition.z; // estimated ray start depth value
    float rayEndZ = -startPosition.z;   // estimated ray end depth value
    float prevEstimateZ = -startPosition.z;
    float rayDiffZ = 0.0;
    float dDepth;
    float depth;
    float rayDiffZOld = 0.0;

    // early outs
    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)
      return vec3(P, 0.0);

    for(int i = 0; i < maxSteps-1; i++)
    {
      depth = -linearDepthFromTexture(depthMap, P, nearFar); // get linear depth from the depth buffer

      // estimate depth of the marching ray
      rayStartZ = prevEstimateZ;
      dDepth = -rayStartZ - depth;
      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));
      rayDiffZ = rayEndZ- rayStartZ;
      prevEstimateZ = rayEndZ;

      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )
      {
        return vec3(P, 0.);
      }

      // If we detect a hit - return the intersection point, two conditions:
      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth
      //  - if difference between dDepth and rayDiffZOld is not too large
      //  - if difference between dDepth and 0.025/abs(k) is not too large
      //  - if the sampled depth is not behind far plane or in front of near plane

      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)
      {
        return vec3(P, depth);
      }

      // continue with ray marching
      P += dP;
      Q.z += dQ.z;
      k += dk;
      rayDiffZOld = rayDiffZ;
    }
    return vec3(P, 0.0);
  }
  `)}class c{constructor(){this.enabled=!1,this.fadeFactor=1,this.reprojectionMatrix=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__.c)()}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>c});var FoamRendering_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function e(e){e.fragment.code.add(interfaces.H`const float GAMMA = 2.2;
const float INV_GAMMA = 0.4545454545;
vec4 delinearizeGamma(vec4 color) {
return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);
}
vec3 linearizeGamma(vec3 color) {
return pow(color, vec3(GAMMA));
}`)}var PhysicallyBasedRendering_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js"),ScreenSpaceReflections_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),Ellipsoid=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Ellipsoid.js"),CloudsCompositionParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsCompositionParameters.js"),CloudsData=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsData.js"),MainLighting_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js"),BooleanPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js"),Float3PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),Matrix4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js"),Uniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js"),BindType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js");class s extends Uniform.x{constructor(e,s){super(e,"samplerCube",BindType.P.Pass,((r,o,t)=>r.bindTexture(e,s(o,t))))}}function m(m){const v=m.fragment;v.uniforms.add(new Matrix4PassUniform.g("rotationMatrixClouds",((o,a)=>a.cloudsFade.parallax.transform)),new Matrix4PassUniform.g("rotationMatrixCloudsCrossFade",((o,a)=>a.cloudsFade.parallaxNew.transform)),new Float3PassUniform.J("anchorPosition",((o,a)=>a.cloudsFade.parallax.anchorPointClouds)),new Float3PassUniform.J("anchorPositionCrossFade",((o,a)=>a.cloudsFade.parallaxNew.anchorPointClouds)),new FloatPassUniform.p("cloudsHeight",((o,a)=>a.cloudsFade.parallax.cloudsHeight)),new FloatPassUniform.p("radiusCurvatureCorrectionFactor",((o,a)=>a.cloudsFade.parallax.radiusCurvatureCorrectionFactor)),new FloatPassUniform.p("totalFadeInOut",((o,a)=>a.cloudsFade.fadeInOut.stage===CloudsCompositionParameters.co.FINISHED?a.cloudsFade.fadeInOutHeight.factor+1-a.cloudsFade.fadeIn.factor:a.cloudsFade.fadeInOutHeight.factor+1-a.cloudsFade.fadeInOut.factor)),new FloatPassUniform.p("crossFadeAnchorFactor",((a,t)=>(0,mathUtils.uZ)(t.cloudsFade.crossFade.factor,0,1))),new s("cubeMap",((o,a)=>a.cloudsFade.data?.cubeMap?a.cloudsFade.data.cubeMap.colorTexture:null)),new BooleanPassUniform.U("crossFade",((o,a)=>a.cloudsFade.crossFade.enabled)),new BooleanPassUniform.U("readChannelsRG",((o,a)=>a.cloudsFade.readChannels===CloudsData.uz.RG)),new BooleanPassUniform.U("fadeTextureChannels",((o,a)=>a.cloudsFade.renderingStage===CloudsData.jL.FADING_TEXTURE_CHANNELS))),v.constants.add("planetRadius","float",Ellipsoid.sv.radius),v.code.add(interfaces.H`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos)
{
float radiusClouds = planetRadius + cloudsHeight;
float B = 2.0 * dot(cameraPosition, dir);
float C = dot(cameraPosition, cameraPosition) - radiusClouds * radiusClouds;
float det = B * B - 4.0 * C;
float pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));
vec3 intersectionPont = cameraPosition + dir * pointIntDist;
intersectionPont =  intersectionPont - spherePos;
return intersectionPont;
}`),v.code.add(interfaces.H`vec3 correctForPlanetCurvature(vec3 dir)
{
dir.z = dir.z*(1.-radiusCurvatureCorrectionFactor) + radiusCurvatureCorrectionFactor;
return dir;
}`),v.code.add(interfaces.H`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec)
{
return (rotMat * vec4(inVec, 0.0)).xyz;
}`),(0,MainLighting_glsl.Pe)(v),(0,MainLighting_glsl.F1)(v),v.code.add(interfaces.H`const float SUNSET_TRANSITION_FACTOR = 0.3;
const vec3 RIM_COLOR = vec3(0.28, 0.175, 0.035);
const float RIM_SCATTERING_FACTOR = 140.0;
const float BACKLIGHT_FACTOR = 0.2;
const float BACKLIGHT_SCATTERING_FACTOR = 10.0;
const float BACKLIGHT_TRANSITION_FACTOR = 0.3;
vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds)
{
float upDotLight = dot(normalize(cameraPosition), normalize(mainLightDirection));
float dirDotLight = max(dot(normalize(-worldSpaceRay), normalize(mainLightDirection)), 0.0);
float sunsetTransition = clamp(pow(max(upDotLight, 0.0), SUNSET_TRANSITION_FACTOR), 0.0, 1.0);
vec3 ambientLight = calculateAmbientIrradiance(normalize(cameraPosition),  0.0);
vec3 mainLight = evaluateMainLighting(normalize(cameraPosition),  0.0);
vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));
vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));
float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);
float rimLightIntensity = 0.5 + 0.5 *pow(max(upDotLight, 0.0), 0.35);
vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, RIM_SCATTERING_FACTOR)) * scatteringMod;
float additionalLight = BACKLIGHT_FACTOR * pow(dirDotLight, BACKLIGHT_SCATTERING_FACTOR) * (1. - pow(sunsetTransition, BACKLIGHT_TRANSITION_FACTOR)) ;
return vec3(baseCloudColor * (1. + additionalLight) + directSunScattering);
}`),v.code.add(interfaces.H`vec4 getCloudData(vec3 rayDir, bool readOtherChannel)
{
vec4 cloudData = texture(cubeMap, rayDir);
float mu = dot(rayDir, vec3(0, 0, 1));
bool readChannels = readChannelsRG ^^ readOtherChannel;
if (readChannels) {
cloudData = vec4(vec3(cloudData.r), cloudData.g);
} else {
cloudData = vec4(vec3(cloudData.b), cloudData.a);
}
if (length(cloudData) == 0.0) {
return vec4(cloudData.rgb, 1.0);
}
return cloudData;
}`),v.code.add(interfaces.H`vec4 renderCloudsNoFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
float totalTransmittance = clamp(cloudData.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudData.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), totalTransmittance);
}`),v.code.add(interfaces.H`vec4 renderCloudsCrossFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
vec4 cloudColor = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPositionCrossFade);
worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixCloudsCrossFade, normalize(intersectionPoint));
worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
cloudData = getCloudData(worldRayRotatedCorrected, fadeTextureChannels);
vec4 cloudColorCrossFade = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
cloudColor = mix(cloudColor, cloudColorCrossFade, crossFadeAnchorFactor);
float totalTransmittance = clamp(cloudColor.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudColor.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(cloudColor.rgb, totalTransmittance);
}`),v.code.add(interfaces.H`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition)
{
return crossFade ? renderCloudsCrossFade(worldRay, cameraPosition) : renderCloudsNoFade(worldRay, cameraPosition);
}`)}var Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function c(c,s){c.include(PhysicallyBasedRendering_glsl.g,s),c.include(e),c.include(FoamRendering_glsl.E),s.hasCloudsReflections&&c.include(m,s),s.hasScreenSpaceReflections&&c.include(ScreenSpaceReflections_glsl.P,s);const f=c.fragment;f.constants.add("fresnelSky","vec3",[.02,1,15]).add("fresnelMaterial","vec2",[.02,.1]).add("roughness","float",.015).add("foamIntensityExternal","float",1.7).add("ssrIntensity","float",.65).add("ssrHeightFadeStart","float",3e5).add("ssrHeightFadeEnd","float",5e5).add("waterDiffusion","float",.92).add("waterSeaColorMod","float",.8).add("correctionViewingPowerFactor","float",.4).add("skyZenitColor","vec3",[.52,.68,.9]).add("skyColor","vec3",[.67,.79,.9]).add("cloudFresnelModifier","vec2",[1.2,.01]),f.code.add(interfaces.H`PBRShadingWater shadingInfo;
vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {
float exponent = pow((1.0 - cosTheta), fresnelSky[2]);
return mix(zenit, horizon, exponent);
}`),f.uniforms.add(new FloatPassUniform.p("lightingSpecularStrength",((e,o)=>o.lighting.mainLight.specularStrength)),new FloatPassUniform.p("lightingEnvironmentStrength",((e,o)=>o.lighting.mainLight.environmentStrength))),f.code.add(interfaces.H`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {
float reflectionHit = 0.0;
float reflectionHitDiffused = 0.0;
vec3 seaWaterColor = linearizeGamma(color);
vec3 h = normalize(l + v);
shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);
shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);
shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);
shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);
shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);
shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);
float upDotV = max(dot(localUp,v), 0.0);
vec3 skyHorizon = linearizeGamma(skyColor);
vec3 skyZenit = linearizeGamma(skyZenitColor);
vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );
float upDotL = max(dot(localUp,l),0.0);
float daytimeMod = 0.1 + upDotL * 0.9;
skyColor *= daytimeMod;
float shadowModifier = clamp(shadow, 0.8, 1.0);
vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);
vec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;
vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;
vec3 specular = vec3(0.0);
if(upDotV > 0.0 && upDotL > 0.0) {
vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);
vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;
specular = lightingSpecularStrength * shadingInfo.NdotL * incidentLight * specularSun;
}
vec3 foam = vec3(0.0);
if(upDotV > 0.0) {
foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);
}
float correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);
vec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);
vec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),s.hasCloudsReflections&&f.code.add(interfaces.H`vec4 cloudsColor = renderClouds(reflectedWorld, position);
cloudsColor.a = 1.0 - cloudsColor.a;
cloudsColor = pow(cloudsColor, vec4(GAMMA));
cloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * clamp((1.0 - totalFadeInOut), 0.0, 1.0);`),s.hasScreenSpaceReflections?(f.uniforms.add(new Matrix4PassUniform.g("view",((e,o)=>o.ssr.camera.viewMatrix)),new Texture2DPassUniform.A("lastFrameColorTexture",((e,o)=>o.ssr.lastFrameColorTexture)),new FloatPassUniform.p("fadeFactorSSR",((e,o)=>o.ssr.fadeFactor))),f.code.add(interfaces.H`vec3 viewDir = normalize(viewPosition);
vec4 viewNormalVectorCoordinate = view *vec4(n, 0.0);
vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);
vec4 viewUp = view * vec4(localUp, 0.0);
vec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);
vec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));
vec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);
vec3 reflectedColor = vec3(0.0);
if (hitCoordinate.z > 0.0)
{
vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);
vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));
float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);
reflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;
reflectionHitDiffused = waterDiffusion * reflectionHit;
reflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *
reflectionHitDiffused * fresnelModifier.y * ssrIntensity;
}
float seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);
vec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +
reflSea * seaColorMod + specular + foam);`)):f.code.add(interfaces.H`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),s.hasCloudsReflections?s.hasScreenSpaceReflections?f.code.add(interfaces.H`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;
}`):f.code.add(interfaces.H`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;
}`):f.code.add(interfaces.H`return waterRenderedColor;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>i});var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js")),_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function i(t){t.fragment.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__.A("texWaveNormal",(e=>e.waveNormal)),new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__.A("texWavePerturbation",(e=>e.wavePertubation)),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__.N("waveParams",(e=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(f,e.waveStrength,e.waveTextureRepeat,e.flowStrength,e.flowOffset))),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__.A("waveDirection",(t=>(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(c,t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)))),t.include(_FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__.K),t.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__.H`const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);
vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rg - 1.0;
}
float sampleNoiseTexture(vec2 _uv) {
return texture(texWavePerturbation, _uv).b;
}
vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rgb - 1.0;
}
float computeProgress(vec2 uv, float time) {
return fract(time);
}
float computeWeight(vec2 uv, float time) {
float progress = computeProgress(uv, time);
return 1.0 - abs(1.0 - 2.0 * progress);
}
vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {
float flowStrength = waveParams[2];
float flowOffset = waveParams[3];
vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;
float progress = computeProgress(uv, time + phaseOffset);
float weight = computeWeight(uv, time + phaseOffset);
vec2 result = uv;
result -= flowVector * (progress + flowOffset);
result += phaseOffset;
result += (time - progress) * FLOW_JUMP;
return vec3(result, weight);
}
const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;
const float TIME_NOISE_STRENGTH = 7.77;
vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {
float waveStrength = waveParams[0];
vec2 waveMovement = time * -_waveDir;
float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;
vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);
vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);
vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;
vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;
vec3 mixNormal = normalize(normal_A + normal_B);
mixNormal.xy *= waveStrength;
mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));
return mixNormal;
}
vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {
float waveTextureRepeat = waveParams[1];
vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);
float foam  = normals2FoamIntensity(normal, waveParams[0]);
return vec4(normal, foam);
}`)}const f=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),c=(0,_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>$});var Z,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),vector=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vector.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");let $=Z=class extends Accessor.Z{constructor(t={}){super(t),this._center=(0,vec3f64.c)(),this._up=(0,vec3f64.c)(),this._viewUp=(0,vec3f64.c)(),this._viewForward=(0,vec3f64.c)(),this._viewRight=(0,vec3f64.c)(),this._ray=(0,ray.Ue)(),this._viewport=(0,vec4f64.f)(0,0,1,1),this._padding=(0,vec4f64.f)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,vec2f64.f)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,mat4f64.c)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,mat4f64.c)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,mat4f64.c)(),this._frustumDirty=!0,this._frustum=(0,frustum.Ue)(),this._fullViewport=(0,vec4f64.c)(),this._pixelRatio=1,this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return(0,vec3.b)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,mat4.c)(this._viewMatrix,t),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,vec4.b)((0,vec4f64.c)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,vec4.h)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,vec4.b)((0,vec4f64.c)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,vec4.h)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[ht.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[ht.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[ht.RIGHT]+this._padding[ht.LEFT]}set fullWidth(t){this.width=t-(this._padding[ht.RIGHT]+this._padding[ht.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[ht.TOP]+this._padding[ht.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[ht.TOP]+this._padding[ht.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[ht.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[ht.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,vec4.g)(this._padding,t)||(this._viewport[0]+=t[ht.LEFT]-this._padding[ht.LEFT],this._viewport[1]+=t[ht.BOTTOM]-this._padding[ht.BOTTOM],this._viewport[2]-=t[ht.RIGHT]+t[ht.LEFT]-(this._padding[ht.RIGHT]+this._padding[ht.LEFT]),this._viewport[3]-=t[ht.TOP]+t[ht.BOTTOM]-(this._padding[ht.TOP]+this._padding[ht.BOTTOM]),(0,vec4.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,mat4.m)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2),r=e*this._aspect,s=(0,mat4.q)((0,mat4f64.c)(),-r*(1+2*this._padding[ht.LEFT]/t),r*(1+2*this._padding[ht.RIGHT]/t),-e*(1+2*this._padding[ht.BOTTOM]/i),e*(1+2*this._padding[ht.TOP]/i),this.near,this.far),h=this._get("projectionMatrix");return h&&(0,mat4.j)(h,s)?h:s}get inverseProjectionMatrix(){return(0,mat4.a)((0,mat4f64.c)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,mat4f64.c)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovX(t){this._fov=function fov_t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovY(t){this._fov=function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return(0,vec3.i)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,mat4.a)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,mat4.t)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}copyFrom(t){(0,vec3.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,vec4.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,vec4.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,vec2.j)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,mat4.c)(this._viewMatrix,t.viewMatrix),(0,vec3.c)(this._viewRight,t.viewRight),(0,vec3.c)(this._viewUp,t.viewUp),(0,vec3.c)(this._viewForward,t.viewForward)),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,frustum.JG)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,mat4.c)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,vec4.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up}clone(){return(new Z).copyFrom(this)}equals(t){return(0,vec3.k)(this.eye,t.eye)&&(0,vec3.k)(this.center,t.center)&&(0,vec3.k)(this.up,t.up)&&(0,vec4.g)(this._viewport,t.viewport)&&(0,vec4.g)(this._padding,t.padding)&&(0,vec2.m)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation}almostEquals(t){if(Math.abs(t.fov-this._fov)>=.001||(0,vec4.i)(t.screenPadding,this.screenPadding)>=1||(0,vec4.i)(this.screenViewport,t.screenViewport)>=1)return!1;(0,vec3.w)(et,t.eye,t.center),(0,vec3.w)(rt,this.eye,this.center);const i=(0,vec3.e)(et,rt),e=(0,vec3.E)(et),r=(0,vec3.E)(rt),s=5e-4;return i*i>=(1-1e-10)*e*r&&(0,vec3.z)(t.eye,this.eye)<Math.max(e,r)*s*s}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,vector.SR)(this.viewForward,(0,vec3.b)(et,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=(0,screenUtils.s1)()){return t[0]=(this.padding[ht.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[ht.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[ht.LEFT]+this.width*i,t[1]=this.padding[ht.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==tt&&(0,vec3.c)(tt,t),tt[3]=1,(0,vec4.t)(tt,tt,this.projectionMatrix);const e=Math.abs(tt[3]);(0,vec3.g)(tt,tt,1/e);const s=this.fullViewport;i[0]=(0,mathUtils.t7)(0,s[0]+s[2],.5+.5*tt[0]),i[1]=(0,mathUtils.t7)(0,s[1]+s[3],.5+.5*tt[1]),i[2]=.5*(tt[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;tt[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],tt[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],tt[2]=(2*t[2]-1)*t[3],tt[3]=t[3],null!=this.inverseProjectionMatrix&&((0,vec4.t)(tt,tt,this.inverseProjectionMatrix),i[0]=tt[0],i[1]=tt[1],i[2]=tt[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,st),this.renderToScreen(st,i),i}projectToRenderScreen(t,i){if(tt[0]=t[0],tt[1]=t[1],tt[2]=t[2],tt[3]=1,(0,vec4.t)(tt,tt,this.viewProjectionMatrix),0===tt[3])return null;(0,vec3.g)(tt,tt,1/Math.abs(tt[3]));const e=this.fullViewport;return"x"in i?(i.x=(0,mathUtils.t7)(0,e[0]+e[2],.5+.5*tt[0]),i.y=(0,mathUtils.t7)(0,e[1]+e[3],.5+.5*tt[1])):(i[0]=(0,mathUtils.t7)(0,e[0]+e[2],.5+.5*tt[0]),i[1]=(0,mathUtils.t7)(0,e[1]+e[3],.5+.5*tt[1]),i.length>2&&(i[2]=.5*(tt[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,st),i)}unprojectFromRenderScreen(t,i){if((0,mat4.m)(it,this.projectionMatrix,this.viewMatrix),!(0,mat4.a)(it,it))return null;const e=this.fullViewport;return tt[0]=2*(t[0]-e[0])/e[2]-1,tt[1]=2*(t[1]-e[1])/e[3]-1,tt[2]=2*t[2]-1,tt[3]=1,(0,vec4.t)(tt,tt,it),0===tt[3]?null:(i[0]=tt[0]/tt[3],i[1]=tt[1]/tt[3],i[2]=tt[2]/tt[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,h=i*this.pixelRatio,o=Math.max(s-e/2,0),n=Math.max(this.fullHeight-h-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-h-r/2,0);return[o,n,e-a- -Math.min(this.fullWidth-s-e/2,0),r-p- -Math.min(h-r/2,0)]}computeUp(t){t===ViewingMode.JY.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,vec3.b)(et,this.center,this.eye);const t=(0,vec3.l)(this.center);t<1?((0,vec3.s)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,vec3.e)(et,this.center))>.9999*(0,vec3.l)(et)*t||((0,vec3.f)(this._up,et,this.center),(0,vec3.f)(this._up,this._up,et),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,vec3.r)(et,this.eye,this.center),Math.abs(et[2])<=.9999&&((0,vec3.g)(et,et,et[2]),(0,vec3.s)(this._up,-et[0],-et[1],1-et[2]),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i,r=""){"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,vec3.k)(t,i)||((0,vec3.c)(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):Logger.Z.getLogger("esri.views.3d.webgl-engine.lib.Camera").warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,frustum.q_)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,mat4.u)(this._viewMatrix,this.eye,this.center,this.up),(0,vec3.s)(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),(0,vec3.s)(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),(0,vec3.s)(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_center",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_up",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_viewport",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_padding",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_fov",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_nearFar",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"_pixelRatio",void 0),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"eye",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"center",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"up",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"nearFar",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"near",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"far",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"viewport",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"screenViewport",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"screenPadding",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"x",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"y",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"width",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"height",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"fullWidth",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"fullHeight",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"_aspect",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"padding",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"projectionMatrix",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],$.prototype,"inverseProjectionMatrix",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"fov",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"fovX",null),(0,tslib_es6._)([(0,property.Cb)()],$.prototype,"fovY",null),$=Z=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.webgl-engine.lib.Camera")],$);const tt=(0,vec4f64.c)(),it=(0,mat4f64.c)(),et=(0,vec3f64.c)(),rt=(0,vec3f64.c)(),st=(0,screenUtils.J$)();var ht;!function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"}(ht||(ht={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>r});var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");class r{constructor(t,r){this._material=t,this._repository=r,this._map=new Map}destroy(){this._map.forEach(((t,r)=>{null!=t&&this._repository.release(this._material,r)}))}load(r,s,e){if(!this._material.requiresSlot(s,e))return null;this._map.has(e)||this._map.set(e,this._repository.acquire(this._material,s,e));const i=this._map.get(e);if(null!=i){if(i.ensureResources(r)===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Rw.LOADED)return i;this._repository.requestRender()}return null}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cr:()=>it,IG:()=>C,QL:()=>lt,nb:()=>ut,B2:()=>q,DA:()=>ft,x2:()=>at,dV:()=>ot,mj:()=>et,rh:()=>pt,PI:()=>nt,AW:()=>tt,PD:()=>ct,Ay:()=>wt,mx:()=>Ot});var n,vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f32.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),DoubleArray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),FloatArray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/FloatArray.js"),Indices=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),Attribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js");!function(n){n.length=function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)},n.normalize=function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u},n.scale=function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c},n.add=function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]},n.subtract=function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}}(n||(n={}));var ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),Geometry=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const b=n,d=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],j=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],U=[0,0,1,0,1,1,0,1],V=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],v=new Array(36);for(let At=0;At<6;At++)for(let t=0;t<6;t++)v[6*At+t]=At;const x=new Array(36);for(let At=0;At<6;At++)x[6*At]=0,x[6*At+1]=1,x[6*At+2]=2,x[6*At+3]=2,x[6*At+4]=3,x[6*At+5]=0;function C(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let s=0;s<8;s++)e[3*s]=d[s][0]*n[0],e[3*s+1]=d[s][1]*n[1],e[3*s+2]=d[s][2]*n[2];return new Geometry.Z(t,[[VertexAttribute.T.POSITION,new Attribute.a(e,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(j,3)],[VertexAttribute.T.UV0,new Attribute.a(U,2)]],[[VertexAttribute.T.POSITION,V],[VertexAttribute.T.NORMAL,v],[VertexAttribute.T.UV0,x]])}const F=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],G=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],k=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],E=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function q(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let s=0;s<6;s++)e[3*s]=F[s][0]*n[0],e[3*s+1]=F[s][1]*n[1],e[3*s+2]=F[s][2]*n[2];return new Geometry.Z(t,[[VertexAttribute.T.POSITION,new Attribute.a(e,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(G,3)]],[[VertexAttribute.T.POSITION,k],[VertexAttribute.T.NORMAL,E]])}const X=(0,vec3f32.f)(-.5,0,-.5),z=(0,vec3f32.f)(.5,0,-.5),B=(0,vec3f32.f)(0,0,.5),D=(0,vec3f32.f)(0,.5,0),Z=(0,vec3f32.c)(),H=(0,vec3f32.c)(),J=(0,vec3f32.c)(),K=(0,vec3f32.c)(),Q=(0,vec3f32.c)();(0,vec3.b)(Z,X,D),(0,vec3.b)(H,X,z),(0,vec3.f)(J,Z,H),(0,vec3.n)(J,J),(0,vec3.b)(Z,z,D),(0,vec3.b)(H,z,B),(0,vec3.f)(K,Z,H),(0,vec3.n)(K,K),(0,vec3.b)(Z,B,D),(0,vec3.b)(H,B,X),(0,vec3.f)(Q,Z,H),(0,vec3.n)(Q,Q);const W=[X,z,B,D],Y=[0,-1,0,J[0],J[1],J[2],K[0],K[1],K[2],Q[0],Q[1],Q[2]],$=[0,1,2,3,1,0,3,2,1,3,0,2],_=[0,0,0,1,1,1,2,2,2,3,3,3];function tt(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let s=0;s<4;s++)e[3*s]=W[s][0]*n[0],e[3*s+1]=W[s][1]*n[1],e[3*s+2]=W[s][2]*n[2];return new Geometry.Z(t,[[VertexAttribute.T.POSITION,new Attribute.a(e,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(Y,3)]],[[VertexAttribute.T.POSITION,$],[VertexAttribute.T.NORMAL,_]])}function nt(t,n,e,s,o={uv:!0}){const r=-Math.PI,h=2*Math.PI,l=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(s)),p=(c+1)*(a+1),f=(0,FloatArray.xx)(3*p),O=(0,FloatArray.xx)(3*p),I=(0,FloatArray.xx)(2*p),g=[];let M=0;for(let i=0;i<=a;i++){const t=[],e=i/a,s=l+e*u,o=Math.cos(s);for(let l=0;l<=c;l++){const u=l/c,a=r+u*h,p=Math.cos(a)*o,i=Math.sin(s),w=-Math.sin(a)*o;f[3*M]=p*n,f[3*M+1]=i*n,f[3*M+2]=w*n,O[3*M]=p,O[3*M+1]=i,O[3*M+2]=w,I[2*M]=u,I[2*M+1]=e,t.push(M),++M}g.push(t)}const A=new Array;for(let i=0;i<a;i++)for(let t=0;t<c;t++){const n=g[i][t],e=g[i][t+1],s=g[i+1][t+1],o=g[i+1][t];0===i?(A.push(n),A.push(s),A.push(o)):i===a-1?(A.push(n),A.push(e),A.push(s)):(A.push(n),A.push(e),A.push(s),A.push(s),A.push(o),A.push(n))}const m=[[VertexAttribute.T.POSITION,A],[VertexAttribute.T.NORMAL,A]],N=[[VertexAttribute.T.POSITION,new Attribute.a(f,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(O,3,!0)]];return o.uv&&(N.push([VertexAttribute.T.UV0,new Attribute.a(I,2,!0)]),m.push([VertexAttribute.T.UV0,A])),o.offset&&(m[0][0]=VertexAttribute.T.OFFSET,N[0][0]=VertexAttribute.T.OFFSET,m.push([VertexAttribute.T.POSITION,(0,Indices.LE)(A.length)]),N.push([VertexAttribute.T.POSITION,new Attribute.a(Float64Array.from(o.offset),3,!0)])),new Geometry.Z(t,N,m)}function et(t,n,e,s){const{vertexAttributes:o,indices:r}=function st(t,n,e){const s=t;let o,r;if(e)o=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=s*(1+Math.sqrt(5))/2;o=[-s,t,0,s,t,0,-s,-t,0,s,-t,0,0,-s,t,0,s,t,0,-s,-t,0,s,-t,t,0,-s,t,0,s,-t,0,-s,-t,0,s],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let a=0;a<o.length;a+=3)b.scale(o,a,t/b.length(o,a));let h={};function l(n,e){n>e&&([n,e]=[e,n]);const s=n.toString()+"."+e.toString();if(h[s])return h[s];let r=o.length;return o.length+=3,b.add(o,3*n,o,3*e,o,r),b.scale(o,r,t/b.length(o,r)),r/=3,h[s]=r,r}for(let a=0;a<n;a++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],s=r[e+1],o=r[e+2],h=l(t,s),u=l(s,o),c=l(o,t),a=4*e;n[a]=t,n[a+1]=h,n[a+2]=c,n[a+3]=s,n[a+4]=u,n[a+5]=h,n[a+6]=o,n[a+7]=c,n[a+8]=u,n[a+9]=h,n[a+10]=u,n[a+11]=c}r=n,h={}}const u=(0,FloatArray.XO)(o);for(let a=0;a<u.length;a+=3)b.normalize(u,a);const c=[[VertexAttribute.T.POSITION,r],[VertexAttribute.T.NORMAL,r]];return{vertexAttributes:[[VertexAttribute.T.POSITION,new Attribute.a((0,FloatArray.XO)(o),3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(u,3,!0)]],indices:c}}(n,e,s);return new Geometry.Z(t,o,r)}function ot(t,n,e,s,o,r,h,l,u=null){const c=e?[e[0],e[1],e[2]]:[0,0,0],a=n?[n[0],n[1],n[2]]:[0,0,1];h=h||[0,0];const p=s?[255*s[0],255*s[1],255*s[2],s.length>3?255*s[3]:255]:[255,255,255,255],f=null!=o&&2===o.length?o:[1,1],O=[[VertexAttribute.T.POSITION,new Attribute.a(c,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(a,3,!0)],[VertexAttribute.T.UV0,new Attribute.a(h,h.length)],[VertexAttribute.T.COLOR,new Attribute.a(p,4,!0)],[VertexAttribute.T.SIZE,new Attribute.a(f,2)]];if(null!=r){const t=[r[0],r[1],r[2],r[3]];O.push([VertexAttribute.T.AUXPOS1,new Attribute.a(t,4)])}if(null!=l){const t=[l[0],l[1],l[2],l[3]];O.push([VertexAttribute.T.AUXPOS2,new Attribute.a(t,4)])}return new Geometry.Z(t,O,null,null,ContentObjectType.U.Point,u)}function lt(t,n,e,s,o,r=!0,h=!0){let l=0;const u=e,a=n;let p=(0,vec3f32.f)(0,l,0),f=(0,vec3f32.f)(0,l+a,0),O=(0,vec3f32.f)(0,-1,0),I=(0,vec3f32.f)(0,1,0);o&&(l=a,f=(0,vec3f32.f)(0,0,0),p=(0,vec3f32.f)(0,l,0),O=(0,vec3f32.f)(0,1,0),I=(0,vec3f32.f)(0,-1,0));const w=[f,p],g=[O,I],M=s+2,A=Math.sqrt(a*a+u*u);if(o)for(let i=s-1;i>=0;i--){const t=i*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);w.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,-u/A,a*Math.sin(t)/A);g.push(e)}else for(let i=0;i<s;i++){const t=i*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);w.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,u/A,a*Math.sin(t)/A);g.push(e)}const m=new Array,N=new Array;if(r){for(let t=3;t<w.length;t++)m.push(1),m.push(t-1),m.push(t),N.push(0),N.push(0),N.push(0);m.push(w.length-1),m.push(2),m.push(1),N.push(0),N.push(0),N.push(0)}if(h){for(let t=3;t<w.length;t++)m.push(t),m.push(t-1),m.push(0),N.push(t),N.push(t-1),N.push(1);m.push(0),m.push(2),m.push(w.length-1),N.push(1),N.push(2),N.push(g.length-1)}const y=(0,FloatArray.xx)(3*M);for(let c=0;c<M;c++)y[3*c]=w[c][0],y[3*c+1]=w[c][1],y[3*c+2]=w[c][2];const S=(0,FloatArray.xx)(3*M);for(let c=0;c<M;c++)S[3*c]=g[c][0],S[3*c+1]=g[c][1],S[3*c+2]=g[c][2];const L=[[VertexAttribute.T.POSITION,m],[VertexAttribute.T.NORMAL,N]],b=[[VertexAttribute.T.POSITION,new Attribute.a(y,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(S,3,!0)]];return new Geometry.Z(t,b,L)}function ut(t,l,u,f,O,I,w){const g=O?(0,vec3f32.b)(O):(0,vec3f32.f)(1,0,0),M=I?(0,vec3f32.b)(I):(0,vec3f32.f)(0,0,0);w??=!0;const A=(0,vec3f32.c)();(0,vec3.n)(A,g);const m=(0,vec3f32.c)();(0,vec3.g)(m,A,Math.abs(l));const N=(0,vec3f32.c)();(0,vec3.g)(N,m,-.5),(0,vec3.a)(N,N,M);const y=(0,vec3f32.f)(0,1,0);Math.abs(1-(0,vec3.e)(A,y))<.2&&(0,vec3.s)(y,0,0,1);const S=(0,vec3f32.c)();(0,vec3.f)(S,A,y),(0,vec3.n)(S,S),(0,vec3.f)(y,S,A);const L=2*f+(w?2:0),b=f+(w?2:0),d=(0,FloatArray.xx)(3*L),j=(0,FloatArray.xx)(3*b),U=(0,FloatArray.xx)(2*L),V=new Array(3*f*(w?4:2)),v=new Array(3*f*(w?4:2));w&&(d[3*(L-2)]=N[0],d[3*(L-2)+1]=N[1],d[3*(L-2)+2]=N[2],U[2*(L-2)]=0,U[2*(L-2)+1]=0,d[3*(L-1)]=d[3*(L-2)]+m[0],d[3*(L-1)+1]=d[3*(L-2)+1]+m[1],d[3*(L-1)+2]=d[3*(L-2)+2]+m[2],U[2*(L-1)]=1,U[2*(L-1)+1]=1,j[3*(b-2)]=-A[0],j[3*(b-2)+1]=-A[1],j[3*(b-2)+2]=-A[2],j[3*(b-1)]=A[0],j[3*(b-1)+1]=A[1],j[3*(b-1)+2]=A[2]);const x=(t,n,e)=>{V[t]=n,v[t]=e};let C=0;const F=(0,vec3f32.c)(),G=(0,vec3f32.c)();for(let n=0;n<f;n++){const t=n*(2*Math.PI/f);(0,vec3.g)(F,y,Math.sin(t)),(0,vec3.g)(G,S,Math.cos(t)),(0,vec3.a)(F,F,G),j[3*n]=F[0],j[3*n+1]=F[1],j[3*n+2]=F[2],(0,vec3.g)(F,F,u),(0,vec3.a)(F,F,N),d[3*n]=F[0],d[3*n+1]=F[1],d[3*n+2]=F[2],U[2*n]=n/f,U[2*n+1]=0,d[3*(n+f)]=d[3*n]+m[0],d[3*(n+f)+1]=d[3*n+1]+m[1],d[3*(n+f)+2]=d[3*n+2]+m[2],U[2*(n+f)]=n/f,U[2*n+1]=1;const e=(n+1)%f;x(C++,n,n),x(C++,n+f,n),x(C++,e,e),x(C++,e,e),x(C++,n+f,n),x(C++,e+f,e)}if(w){for(let t=0;t<f;t++){const n=(t+1)%f;x(C++,L-2,b-2),x(C++,t,b-2),x(C++,n,b-2)}for(let t=0;t<f;t++){const n=(t+1)%f;x(C++,t+f,b-1),x(C++,L-1,b-1),x(C++,n+f,b-1)}}const k=[[VertexAttribute.T.POSITION,V],[VertexAttribute.T.NORMAL,v],[VertexAttribute.T.UV0,V]],E=[[VertexAttribute.T.POSITION,new Attribute.a(d,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(j,3,!0)],[VertexAttribute.T.UV0,new Attribute.a(U,2,!0)]];return new Geometry.Z(t,E,k)}function ct(t,n,e,s,o,r){s=s||10,o=null==o||o,(0,Util.hu)(n.length>1);const l=[],u=[];for(let c=0;c<s;c++){l.push([0,-c-1,-(c+1)%s-1]);const t=c/s*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return at(t,u,n,[[0,0,0]],l,o,r)}function at(r,u,p,O,I,w,g=(0,vec3f32.f)(0,0,0)){const y=u.length,S=(0,FloatArray.xx)(p.length*y*3+(6*O.length||0)),L=(0,FloatArray.xx)(p.length*y*3+(O?6:0)),b=new Array,d=new Array;let j=0,U=0;const V=(0,vec3f32.c)(),v=(0,vec3f32.c)(),x=(0,vec3f32.c)(),C=(0,vec3f32.c)(),F=(0,vec3f32.c)(),G=(0,vec3f32.c)(),k=(0,vec3f32.c)(),E=(0,vec3f64.c)(),q=(0,vec3f32.c)(),X=(0,vec3f32.c)(),z=(0,vec3f32.c)(),B=(0,vec3f32.c)(),D=(0,vec3f32.c)(),Z=(0,plane.Ue)();(0,vec3.s)(q,0,1,0),(0,vec3.b)(v,p[1],p[0]),(0,vec3.n)(v,v),w?((0,vec3.a)(E,p[0],g),(0,vec3.n)(x,E)):(0,vec3.s)(x,0,0,1),wt(v,x,q,q,F,x,gt),(0,vec3.c)(C,x),(0,vec3.c)(B,F);for(let t=0;t<O.length;t++)(0,vec3.g)(G,F,O[t][0]),(0,vec3.g)(E,x,O[t][2]),(0,vec3.a)(G,G,E),(0,vec3.a)(G,G,p[0]),S[j++]=G[0],S[j++]=G[1],S[j++]=G[2];L[U++]=-v[0],L[U++]=-v[1],L[U++]=-v[2];for(let t=0;t<I.length;t++)b.push(I[t][0]>0?I[t][0]:-I[t][0]-1+O.length),b.push(I[t][1]>0?I[t][1]:-I[t][1]-1+O.length),b.push(I[t][2]>0?I[t][2]:-I[t][2]-1+O.length),d.push(0),d.push(0),d.push(0);let H=O.length;const J=O.length-1;for(let h=0;h<p.length;h++){let r=!1;h>0&&((0,vec3.c)(V,v),h<p.length-1?((0,vec3.b)(v,p[h+1],p[h]),(0,vec3.n)(v,v)):r=!0,(0,vec3.a)(X,V,v),(0,vec3.n)(X,X),(0,vec3.a)(z,p[h-1],C),(0,plane.Yq)(p[h],X,Z),(0,plane.BR)(Z,(0,ray.re)(z,V),E)?((0,vec3.b)(E,E,p[h]),(0,vec3.n)(x,E),(0,vec3.f)(F,X,x),(0,vec3.n)(F,F)):wt(X,C,B,q,F,x,gt),(0,vec3.c)(C,x),(0,vec3.c)(B,F)),w&&((0,vec3.a)(E,p[h],g),(0,vec3.n)(D,E));for(let t=0;t<y;t++)if((0,vec3.g)(G,F,u[t][0]),(0,vec3.g)(E,x,u[t][1]),(0,vec3.a)(G,G,E),(0,vec3.n)(k,G),L[U++]=k[0],L[U++]=k[1],L[U++]=k[2],(0,vec3.a)(G,G,p[h]),S[j++]=G[0],S[j++]=G[1],S[j++]=G[2],!r){const n=(t+1)%y;b.push(H+t),b.push(H+y+t),b.push(H+n),b.push(H+n),b.push(H+y+t),b.push(H+y+n);for(let t=0;t<6;t++){const n=b.length-6;d.push(b[n+t]-J)}}H+=y}const K=p[p.length-1];for(let t=0;t<O.length;t++)(0,vec3.g)(G,F,O[t][0]),(0,vec3.g)(E,x,O[t][1]),(0,vec3.a)(G,G,E),(0,vec3.a)(G,G,K),S[j++]=G[0],S[j++]=G[1],S[j++]=G[2];const Q=U/3;L[U++]=v[0],L[U++]=v[1],L[U++]=v[2];const W=H-y;for(let t=0;t<I.length;t++)b.push(I[t][0]>=0?H+I[t][0]:-I[t][0]-1+W),b.push(I[t][2]>=0?H+I[t][2]:-I[t][2]-1+W),b.push(I[t][1]>=0?H+I[t][1]:-I[t][1]-1+W),d.push(Q),d.push(Q),d.push(Q);const Y=[[VertexAttribute.T.POSITION,b],[VertexAttribute.T.NORMAL,d]],$=[[VertexAttribute.T.POSITION,new Attribute.a(S,3,!0)],[VertexAttribute.T.NORMAL,new Attribute.a(L,3,!0)]];return new Geometry.Z(r,$,Y)}function pt(t,n,e,s){(0,Util.hu)(n.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,Util.hu)(3===n[0].length,"createPolylineGeometry(): malformed vertex"),(0,Util.hu)(null==e||e.length===n.length,"createPolylineGeometry: need same number of points and normals"),(0,Util.hu)(null==e||3===e[0].length,"createPolylineGeometry(): malformed normal");const o=(0,DoubleArray.bg)(3*n.length),r=new Array(2*(n.length-1));let h=0,l=0;for(let a=0;a<n.length;a++){for(let t=0;t<3;t++)o[h++]=n[a][t];a>0&&(r[l++]=a-1,r[l++]=a)}const u=[],c=[];if(u.push([VertexAttribute.T.POSITION,r]),c.push([VertexAttribute.T.POSITION,new Attribute.a(o,3,!0)]),e){const t=(0,FloatArray.xx)(3*e.length);let s=0;for(let o=0;o<n.length;o++)for(let n=0;n<3;n++)t[s++]=e[o][n];u.push([VertexAttribute.T.NORMAL,r]),c.push([VertexAttribute.T.NORMAL,new Attribute.a(t,3,!0)])}return s&&(c.push([VertexAttribute.T.COLOR,new Attribute.a(s,4)]),u.push([VertexAttribute.T.COLOR,(0,Indices.KF)(s.length/4)])),new Geometry.Z(t,c,u,null,ContentObjectType.U.Line)}function ft(t,n,e,s,o,r=0){const h=new Array(18),l=[[-e,r,o/2],[s,r,o/2],[0,n+r,o/2],[-e,r,-o/2],[s,r,-o/2],[0,n+r,-o/2]];for(let c=0;c<6;c++)h[3*c]=l[c][0],h[3*c+1]=l[c][1],h[3*c+2]=l[c][2];return new Geometry.Z(t,[[VertexAttribute.T.POSITION,new Attribute.a(h,3,!0)]],[[VertexAttribute.T.POSITION,[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]]])}function Ot(t,n){const e=t.getMutableAttribute(VertexAttribute.T.POSITION).data;for(let s=0;s<e.length;s+=3){const t=e[s],o=e[s+1],r=e[s+2];(0,vec3.s)(Mt,t,o,r),(0,vec3.m)(Mt,Mt,n),e[s]=Mt[0],e[s+1]=Mt[1],e[s+2]=Mt[2]}}function it(t,n=t){const e=t.vertexAttributes,s=e.get(VertexAttribute.T.POSITION).data,o=e.get(VertexAttribute.T.NORMAL).data;if(o){const t=n.getMutableAttribute(VertexAttribute.T.NORMAL).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}if(s){const t=n.getMutableAttribute(VertexAttribute.T.POSITION).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}}function It(t,s,o,h,l){return!(Math.abs((0,vec3.e)(s,t))>l||((0,vec3.f)(o,t,s),(0,vec3.n)(o,o),(0,vec3.f)(h,o,t),(0,vec3.n)(h,h),0))}function wt(t,n,e,s,o,r,h){return It(t,n,o,r,h)||It(t,e,o,r,h)||It(t,s,o,r,h)}const gt=.99619469809,Mt=(0,vec3f32.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>f});var uid=__webpack_require__("./node_modules/@arcgis/core/core/uid.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),Attribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),Geometry=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),LocalOriginFactory=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js"),Object3D=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js");const testUtils_n_rootOrigin=null;var VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),WebGLLayer=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js"),RibbonLineMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js");class f{constructor(i){this._originSR=i,this._origins=new Map,this._objects=new Map,this._gridSize=5e5,this._rootOriginId="root/"+(0,uid.D)()}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=testUtils_n_rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,(0,LocalOriginFactory.a)(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=(0,LocalOriginFactory.a)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if((0,vec3.b)(p,t,r.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),p[0]<g&&p[1]<g&&p[2]<g){if(m){const r=Math.max(...p);if((0,vec3.b)(p,t,m.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),Math.max(...p)<r)return m}return r}return m||(m=(0,LocalOriginFactory.a)(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=(0,vec4f64.f)(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new RibbonLineMaterial.U({width:2,color:i}),h.add(this._material);const t=new WebGLLayer.F(h,{pickable:!1}),r=new Object3D.T({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const f=this._objects.get(c),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],j=p.length,l=new Array(3*j),u=new Array,b=.5*this._gridSize;for(let o=0;o<j;o++)l[3*o]=t[0]+(1&p[o]?b:-b),l[3*o+1]=t[1]+(2&p[o]?b:-b),l[3*o+2]=t[2]+(4&p[o]?b:-b),o>0&&u.push(o-1,o);(0,projection.projectBuffer)(l,this._originSR,0,l,r.renderSpatialReference,0,j);const M=new Geometry.Z(this._material,[[VertexAttribute.T.POSITION,new Attribute.a(l,3,!0)]],[[VertexAttribute.T.POSITION,u]],null,ContentObjectType.U.Line);h.add(M),f.addGeometry(M)}get test(){const t=this;return{set gridSize(i){t._gridSize=i}}}}const p=(0,vec3f64.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LP:()=>M,Z8:()=>A});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js"),_IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js"),_intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js"),_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js");const w=1e-5;class T{constructor(t){this.options=new _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.om,this._results=new b,this.transform=new _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.yn,this.tolerance=w,this.verticalOffset=null,this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),this._rayEnd=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayBeginTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayEndTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.viewingMode=t??_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__.JY.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,s){this.resetWithRay((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.zk)(t,r,this._ray),s)}resetWithRay(t,r){this.camera=r,t!==this._ray&&(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.JG)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__.JY.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,s,i,e){this.point=r,this.filterPredicate=i,this.tolerance=s??w;const a=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.W9)(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const s of t){const t=s.getSpatialQueryAccelerator&&s.getSpatialQueryAccelerator();null!=t?(null!=a?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,a):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):s.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const i=t.shaderTransformation,a=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.W9)(this.verticalOffset);for(const n of r){if(!n.visible)continue;const{material:r,id:o}=n;this.transform.setAndInvalidateLazyTransforms(i,n.shaderTransformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const h=this.transform.transform;null!=a&&(a.objectTransform=this.transform),r.intersect(n,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,i,e,a,n,d)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const c=a?this._results.hud:this._results,l=a?a=>{const h=new _IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__.RA(t,o,e,d);a.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.q7.HUD,h,r,i,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I,n)}:s=>s.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.q7.OBJECT,{object:t,geometryId:o,triangleNr:e},r,i,h,n);if((null==c.min.drapedLayerOrder||n>=c.min.drapedLayerOrder)&&(null==c.min.dist||r<c.min.dist)&&l(c.min),this.options.store!==_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.eC.MIN&&(null==c.max.drapedLayerOrder||n<c.max.drapedLayerOrder)&&(null==c.max.dist||r>c.max.dist)&&l(c.max),this.options.store===_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.eC.ALL)if(a){const t=new I(this._ray);l(t),this._results.hud.all.push(t)}else{const t=new x(this._ray);l(t),this._results.all.push(t)}}}))}}sortResults(t=this._results.all){t.sort(((t,r)=>t.dist!==r.dist?(t.dist??0)-(r.dist??0):t.drapedLayerOrder!==r.drapedLayerOrder?(t.drapedLayerOrder??Number.MAX_VALUE)-(r.drapedLayerOrder??Number.MAX_VALUE):(r.drapedLayerGraphicOrder??Number.MIN_VALUE)-(t.drapedLayerGraphicOrder??Number.MIN_VALUE)))}}function A(t){return new T(t)}class b{constructor(){this.min=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()),this.max=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()),this.hud={min:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()),max:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()),all:new Array},this.ground=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class x{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(N)):null}getIntersectionPoint(t){return!!(0,_intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__.nn)(this)&&((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(t,this.ray.origin,N),!0)}getTransformedNormal(t){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(U,this.normal),U[3]=0,(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.t)(U,U,this.transformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,U),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.n)(t,t)}constructor(t){this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.q7.OBJECT,this.normal=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Ue)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.q7.OBJECT,(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.JG)(t,this._ray)}set(r,i,e,a,n,h,d){this.intersector=r,this.dist=e,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,a??_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.U),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.transformation,n??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I),this.target=i,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=d}copy(r){(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.JG)(r.ray,this._ray),this.intersector=r.intersector,this.dist=r.dist,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,r.normal),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.transformation,r.transformation)}}class I extends x{constructor(){super(...arguments),this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.q7.HUD}}function M(t){return new x(t)}const N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),U=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var i,t;__webpack_require__.d(__webpack_exports__,{eC:()=>t,om:()=>e,q7:()=>i}),function(i){i[i.OBJECT=0]="OBJECT",i[i.HUD=1]="HUD",i[i.TERRAIN=2]="TERRAIN",i[i.OVERLAY=3]="OVERLAY",i[i.I3S=4]="I3S",i[i.PCL=5]="PCL",i[i.LOD=6]="LOD",i[i.VOXEL=7]="VOXEL"}(i||(i={}));class e{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=t.ALL}}!function(i){i[i.MIN=0]="MIN",i[i.MINMAX=1]="MINMAX",i[i.ALL=2]="ALL"}(t||(t={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dx:()=>o,RA:()=>r});var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");class t{constructor(s,t,r){this.object=s,this.geometryId=t,this.triangleNr=r}}class r extends t{constructor(t,r,c,e){super(t,r,c),this.center=null!=e?(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.a)(e):null}}class e{constructor(s){this.layerUid=s}}class o extends e{constructor(s,t){super(s),this.graphicUid=t}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var E,I;__webpack_require__.d(__webpack_exports__,{$:()=>I,T:()=>E}),function(E){E[E.ADD=0]="ADD",E[E.UPDATE=1]="UPDATE",E[E.REMOVE=2]="REMOVE"}(E||(E={})),function(E){E[E.NONE=0]="NONE",E[E.VISIBILITY=1]="VISIBILITY",E[E.GEOMETRY=2]="GEOMETRY",E[E.TRANSFORMATION=4]="TRANSFORMATION",E[E.HIGHLIGHT=8]="HIGHLIGHT",E[E.OCCLUDEE=16]="OCCLUDEE"}(I||(I={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>V});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/mathUtils.js"),_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),_ContentObject_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_Object3DStateID_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js"),_Util_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js");class V extends _ContentObject_js__WEBPACK_IMPORTED_MODULE_10__.c{get geometries(){return this._geometries}get transformation(){return this._transformation??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I}set transformation(e){this._transformation=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(this._transformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}get shaderTransformation(){return this._shaderTransformation??this.transformation}set shaderTransformation(e){this._shaderTransformation=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)(this._shaderTransformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),e),this._invalidateBoundingVolume(),this._emit("objectShaderTransformation",this)}clearShaderTransformation(){this._shaderTransformation=void 0,this._invalidateBoundingVolume(),this._emit("objectShaderTransformation",this)}constructor(t={}){super(),this.type=_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__.U.Object,this._hasVolatileTransformation=!1,this._parentLayer=null,this._visible=!0,this.castShadow=t.castShadow??!0,this.usesVerticalDistanceToGround=t.usesVerticalDistanceToGround??!1,this.graphicUid=t.graphicUid,this.layerUid=t.layerUid,t.isElevationSource&&(this.lastValidElevationBB=new T),this._geometries=t.geometries?Array.from(t.geometries):new Array}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,_Util_js__WEBPACK_IMPORTED_MODULE_8__.hu)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t),this._hasVolatileTransformation=this._hasVolatileTransformation||t.hasVolatileTransformation,this._emit("objectGeometryAdded",{object:this,geometry:t}),this._invalidateBoundingVolume()}removeGeometry(t){const e=this._geometries.splice(t,1)[0];e&&(this._emit("objectGeometryRemoved",{object:this,geometry:e}),this._invalidateBoundingVolume())}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(t){this._emit("objectGeometryUpdated",{object:this,geometry:t}),this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_11__.O(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.V_.MaskOccludee);for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_9__.lr)(e.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_9__.U_)(e.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_11__.O(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.V_.Highlight);for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_9__.lr)(e.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_9__.U_)(e.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,i){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.transformation,t.transformation)}getCombinedShaderTransformation(t,i=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.shaderTransformation,t.shaderTransformation)}hasVolativeTransformation(){return this._hasVolatileTransformation}get boundingVolumeWorldSpace(){return this._bvWorldSpace&&!this._hasVolatileTransformation||(this._bvWorldSpace=this._bvWorldSpace||new x,this._validateBoundingVolume(this._bvWorldSpace,U.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace&&!this._hasVolatileTransformation||(this._bvObjectSpace=this._bvObjectSpace||new x,this._validateBoundingVolume(this._bvObjectSpace,U.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,e){const i=e===U.ObjectSpace;for(const s of this._geometries){const e=s.boundingInfo;e&&O(e,t,i?s.shaderTransformation:this.getCombinedShaderTransformation(s))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(t.bounds,t.min,t.max,.5);for(const s of this._geometries){const e=s.boundingInfo;if(null==e)continue;const o=i?s.shaderTransformation:this.getCombinedShaderTransformation(s),r=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.u1)(o);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(B,e.center,o);const h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(B,t.bounds),m=e.radius*r;t.bounds[3]=Math.max(t.bounds[3],h+m)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this._parentLayer&&t&&this._parentLayer.notifyObjectBBChanged(this,t)}_emit(t,e){this._parentLayer&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.includes(e),getGeometryIndex:e=>t._geometries.indexOf(e)}}}class T{constructor(){this.min=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class x extends T{constructor(){super(...arguments),this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)()}}function O(t,e,s){const o=t.bbMin,r=t.bbMax;if((0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.y)(s)){const t=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(M,s[12],s[13],s[14]);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(A,o,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(L,r,t);for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],A[i]),e.max[i]=Math.max(e.max[i],L[i])}else if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(A,o,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.k)(o,r))for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],A[i]),e.max[i]=Math.max(e.max[i],A[i]);else{(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(L,r,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],A[t],L[t]),e.max[t]=Math.max(e.max[t],A[t],L[t]);for(let t=0;t<3;++t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(A,o),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(L,r),A[t]=r[t],L[t]=o[t],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(A,A,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)(L,L,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],A[t],L[t]),e.max[t]=Math.max(e.max[t],A[t],L[t])}}}const M=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),A=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),L=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();var U;!function(t){t[t.WorldSpace=0]="WorldSpace",t[t.ObjectSpace=1]="ObjectSpace"}(U||(U={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>W});var _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectPool.js"),_core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_Util_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");class b{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),g.clearPool(),B[0]=null,P.prune(),H.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const o=g.acquire();for(let n=0;n<t;n++){const t=e[n];this._isDegenerate(t)?this._degenerateObjects.add(t):(o.init(this._root),this._add(t,o))}g.release(o)}remove(e,t=null){this._objectCount-=e.length;const o=g.acquire();for(const n of e){const e=null!=t?t:(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(this.objectToBoundingSphere(n),w);E(e[3])?(o.init(this._root),this._remove(n,e,o)):this._degenerateObjects.delete(n)}g.release(o),this._shrink()}update(e,t){if(!E(t[3])&&this._isDegenerate(e))return;const o=function R(e){return B[0]=e,B}(e);this.remove(o,t),this.add(o)}forEachAlongRay(e,t,o){const n=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(n,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,o,n){const i=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,n))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const o=t.node;return o.terminals.forAll(e),null!==o.residents&&o.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,i,s=(()=>!0),r=1/0){let h=1/0,a=1/0,l=null;const u=T(e,t),c=o=>{if(--r,!s(o))return;const n=this.objectToBoundingSphere(o);if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.hr)(i,n))return;const u=z(e,t,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(n)),c=u-n[3],m=u+n[3];c<h&&(h=c,a=m,l=o)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.hr)(i,s.bounds))return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,u,s.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(v,v,s.bounds),z(e,t,v)>a)return!1;const h=s.node;return h.terminals.forAll((e=>c(e))),null!==h.residents&&h.residents.forAll((e=>c(e))),!0}),e,t),l}forEachInDepthRange(e,t,i,s,r,h,a){let l=-1/0,u=1/0;const c={setRange:e=>{i===b.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};c.setRange(s);const m=z(t,i,e),_=T(t,i),p=T(t,-i),g=e=>{if(!a(e))return;const o=this.objectToBoundingSphere(e),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(o),s=z(t,i,n)-m,_=s-o[3],p=s+o[3];_>u||p<l||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.hr)(h,o)||r(e,c)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.hr)(h,e.bounds))return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,_,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(v,v,e.bounds),z(t,i,v)-m>u)return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,p,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(v,v,e.bounds),z(t,i,v)-m<l)return!1;const s=e.node;return s.terminals.forAll((e=>g(e))),null!==s.residents&&s.residents.forAll((e=>g(e))),!0}),t,i)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const o=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(t),s=t=>{const s=this.objectToBoundingSphere(t),r=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(s),h=o+r;return!((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.d)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(s),n)-h*h<=0)||e(t)};let r=!0;const h=e=>{r&&(r=s(e))};this._forEachNode(this._root,(e=>{const t=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),s=o+t;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.d)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(e.bounds),n)-s*s>0)return!1;const a=e.node;return a.terminals.forAll(h),r&&null!==a.residents&&a.residents.forAll(h),r})),r&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__.yK)(e.origin,e.direction,C,y)}_intersectsNodeWithOffset(e,t,o){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),o.applyToMinMax(C,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__.yK)(e.origin,e.direction,C,y)}_intersectsObject(e,t){const o=this.objectToBoundingSphere(t);return!(o[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o,e)}_intersectsObjectWithOffset(e,t,o){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o.applyToBoundingSphere(n),e)}_forEachNode(e,t){let o=g.acquire().init(e);const n=[o];for(;0!==n.length;){if(o=n.pop(),t(o)&&!o.isLeaf())for(let e=0;e<o.node.children.length;e++)o.node.children[e]&&n.push(g.acquire().init(o).advance(e));g.release(o)}}_forEachNodeDepthOrdered(e,t,o,n=b.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(e);const s=[i];for(function N(e,t,o){if(!H.length)for(let n=0;n<8;++n)H.push({index:0,distance:0});for(let n=0;n<8;++n){const o=M[n];H.data[n].index=n,H.data[n].distance=z(e,t,o)}H.sort(((e,t)=>e.distance-t.distance));for(let n=0;n<8;++n)o[n]=H.data[n].index}(o,n,K);0!==s.length;){if(i=s.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=K[e];i.node.children[t]&&s.push(g.acquire().init(i).advance(t))}g.release(i)}}_remove(e,t,o){P.clear();const n=o.advanceTo(t,((e,t)=>{P.push(e.node),P.push(t)}))?o.node.terminals:o.node.residents;if(n.removeUnordered(e),0===n.length)for(let i=P.length-2;i>=0;i-=2){const e=P.data[i],t=P.data[i+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,o){return o>=0&&(e.children[o]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let o=0;o<t.length;o++){const n=g.acquire().init(e);this._add(t.at(o),n),g.release(n)}}_grow(e,t){if(0!==t&&(x(e,t,(e=>this.objectToBoundingSphere(e)),k),E(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(k,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(k,e):this._growRootAsSubNode(e),g.release(e)}}_rebuildTree(e,t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(q,t.bounds),q[3]=t.halfSize,x([e,q],2,(e=>e),I);const o=g.acquire().init(this._root);this._root.initFrom(null,I,I[3]),this._root.increaseHalfSize(1.25),this._forEachNode(o,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),g.release(o)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let o=0;return this._forEachNode(this._root,(e=>(o=Math.max(o,e.depth),o+t<=this._maximumDepth))),o+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],o=e;let n=-1/0;const i=this._root.bounds,s=this._root.halfSize;for(let h=0;h<3;h++){const e=i[h]-s-(o[h]-t),r=o[h]+t-(i[h]+s),a=Math.max(0,Math.ceil(e/(2*s))),d=Math.max(0,Math.ceil(r/(2*s)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);n=Math.max(n,l),L[h].min=a,L[h].max=d}for(let h=0;h<3;h++){let e=L[h].min,t=L[h].max;const o=(n-(e+t))/2;e+=Math.ceil(o),t+=Math.floor(o);const r=i[h]-s-e*s*2;F[h]=r+(t+e)*s}const r=n*s;return F[3]=r*A,g.acquire().initFrom(null,F,r,0)}_growRootAsSubNode(e){const t=this._root.node;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(e),e.advanceTo(k,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let o=0,n=0;for(;n<t.length&&null==e;)o=n++,e=t[o];for(;n<t.length;)if(t[n++])return-1;return o}_isDegenerate(e){return!E(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,o=this._root.halfSize;return e[3]<=o&&e[0]>=t[0]-o&&e[0]<=t[0]+o&&e[1]>=t[1]-o&&e[1]<=t[1]+o&&e[2]>=t[2]-o&&e[2]<=t[2]+o}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:o}=this,n=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:o,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:n}}}_nodeToJSON(e){const t=e.children.map((e=>e?this._nodeToJSON(e):null)),o=e.residents?.map((e=>this.objectToBoundingSphere(e))),n=e.terminals?.map((e=>this.objectToBoundingSphere(e)));return{children:t,residents:o,terminals:n}}static fromJSON(e){const t=new b((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class g{constructor(){this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,o,n=this.depth){return this.node=null!=e?e:g.createEmptyNode(),null!=t&&(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,this.bounds),this.halfSize=o,this.depth=n,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*A}advance(e){let t=this.node.children[e];t||(t=g.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const o=M[e];return this.bounds[0]+=o[0]*this.halfSize,this.bounds[1]+=o[1]*this.halfSize,this.bounds[2]+=o[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,o=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!o)return t&&t(this,-1),!1;this.node.residents=null}const n=this._childIndex(e);t&&t(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z({shrink:!0}),residents:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z({shrink:!0})}}static acquire(){return g._pool.acquire()}static release(e){g._pool.release(e)}static clearPool(){g._pool.prune()}}function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function O(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function j(e,t,o){o[0]=e[0]+t,o[1]=e[1]+t,o[2]=e[2]+t}function x(e,t,o,n){if(1===t){const t=o(e[0]);(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,n)}else{C[0]=1/0,C[1]=1/0,C[2]=1/0,y[0]=-1/0,y[1]=-1/0,y[2]=-1/0;for(let n=0;n<t;n++){const t=o(e[n]);E(t[3])&&(S(C,t),O(y,t))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(n,C,y,.5),n[3]=Math.max(y[0]-C[0],y[1]-C[1],y[2]-C[2])/2}}function T(e,t){let o,n=1/0;for(let i=0;i<8;++i){const s=z(e,t,D[i]);s<n&&(n=s,o=D[i])}return o}function z(e,t,o){return t*(e[0]*o[0]+e[1]*o[1]+e[2]*o[2])}function E(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}g._pool=new _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__.Z(g),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(b||(b={}));const M=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],D=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],A=Math.sqrt(3),B=[null];const F=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),v=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),y=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),P=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z,w=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),k=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),q=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),I=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z,K=[0,0,0,0,0,0,0,0],W=b},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>a});var _core_uid_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/uid.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/mathUtils.js");class a{constructor(t,e={}){this.geometry=t,this.screenToWorldRatio=1,this._transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._shaderTransformation=null,this._boundingSphere=null,this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_5__.D)(),this.layerUid=e.layerUid,this.graphicUid=e.graphicUid,this.shaderTransformer=e.shaderTransformer,this.castShadow=e.castShadow??!1}get transformation(){return this._transformation}get boundingInfo(){return this.geometry.boundingInfo}updateTransformation(r){r(this._transformation),this._shaderTransformation=this._boundingSphere=null}shaderTransformationChanged(){this._shaderTransformation=null}get boundingSphere(){return this._boundingSphere?this._boundingSphere:this.boundingInfo?(this._boundingSphere=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.m)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.boundingInfo.center,this.shaderTransformation),this._boundingSphere[3]=this.boundingInfo.radius*(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.u1)(this.shaderTransformation),this._boundingSphere):_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.N}get hasShaderTransformation(){return null!=this.shaderTransformer}get material(){return this.geometry.material}get type(){return this.geometry.type}get shaderTransformation(){return null==this.shaderTransformer?this.transformation:(this._shaderTransformation||(this._shaderTransformation=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.c)((0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this.shaderTransformer(this.transformation))),this._shaderTransformation)}get indices(){return this.geometry.indices}get vertexAttributes(){return this.geometry.vertexAttributes}get highlights(){return this.geometry.highlights}get occludees(){return this.geometry.occludees}get visible(){return this.geometry.visible}set visible(r){this.geometry.visible=r}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var C;__webpack_require__.d(__webpack_exports__,{j:()=>C}),function(C){C[C.ASYNC=0]="ASYNC",C[C.SYNC=1]="SYNC"}(C||(C={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>c});var Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),ContentObject=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js");const DirtyEvents_e=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","objectGeometryUpdated"];var Octree=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js"),UpdatePolicy=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");class c extends ContentObject.c{get objects(){return this._objects}constructor(s,i,h=""){super(),this.stage=s,this.apiLayerUid=h,this.type=ContentObjectType.U.Layer,this.events=new Evented.Z,this.sliceable=!1,this._objects=new PooledArray.Z,this._objectsAdded=new PooledArray.Z,this._handles=new Handles.Z,this.apiLayerUid=h,this.visible=i?.visible??!0,this.pickable=i?.pickable??!0,this.updatePolicy=i?.updatePolicy??UpdatePolicy.j.ASYNC,this._disableOctree=i?.disableOctree??!1,s.add(this);for(const e of DirtyEvents_e)this._handles.add(this.events.on(e,(t=>s.handleEvent(e,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),null!=this._octree&&(this._objectsAdded.removeUnordered(e)||this._octree.remove([e])))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),null!=this._octree&&this._objectsAdded.pushArray(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;if(this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),null!=this._octree){for(let e=0;e<t.length;)this._objectsAdded.removeUnordered(t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}}sync(){this.updatePolicy!==UpdatePolicy.j.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.length>50&&!this._disableOctree?(this._octree=new Octree.Z((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear()),this._octree}shaderTransformationChanged(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}invalidateSpatialQueryAccelerator(){this._octree=(0,maybe.SC)(this._octree),this._objectsAdded.clear()}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{nn:()=>o});__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");__webpack_require__("./node_modules/@arcgis/core/chunks/boundedPlane.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");function o(t){return null!=t&&null!=t.dist}(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>ColorMaterial_f});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),basicInterfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),DefaultBufferWriter=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js"),TriangleMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js"),VisualVariablePassParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),ColorMaterial_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class T extends ShaderTechnique.A{initializeProgram(e){return new Program.$(e.rctx,T.shader.get().build(this.configuration),DefaultVertexAttributeLocations.i)}_createPipeline(e,t){const i=this.configuration,s=e===TransparencyPassType.A.NONE,c=e===TransparencyPassType.A.FrontFace;return(0,renderState.sm)({blending:i.output!==ShaderOutput.H.Color&&i.output!==ShaderOutput.H.Alpha||!i.transparent?null:s?OrderIndependentTransparency.wu:(0,OrderIndependentTransparency.j7)(e),culling:(0,renderState.zp)(i.cullFace),depthTest:{func:(0,OrderIndependentTransparency.Bh)(e)},depthWrite:(s||c)&&i.writeDepth?renderState.LZ:null,colorWrite:renderState.BK,stencilWrite:i.hasOccludees?StencilUtils.s3:null,stencilTest:i.hasOccludees?t?StencilUtils.eD:StencilUtils.RY:null,polygonOffset:s||c?i.polygonOffset?S:null:(0,OrderIndependentTransparency.je)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e,r){return r?this._occludeePipelineState:super.getPipelineState(e,r)}}T.shader=new ReloadableShaderModule.J(ColorMaterial_glsl.C,(()=>__webpack_require__.e(3870).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterial.glsl.js"))));const S={factor:1,units:1};var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class p extends DefaultTechniqueConfiguration.W{constructor(){super(...arguments),this.output=ShaderOutput.H.Color,this.cullFace=basicInterfaces.Vr.None,this.transparencyPassType=TransparencyPassType.A.NONE,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.objectAndLayerIdColorInstanced=!1,this.vvColor=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:ShaderOutput.H.COUNT})],p.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:basicInterfaces.Vr.COUNT})],p.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:TransparencyPassType.A.COUNT})],p.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"polygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"hasMultipassTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],p.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!0})],p.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],p.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],p.prototype,"vvOpacity",void 0);class ColorMaterial_f extends TriangleMaterial.c{constructor(e){super(e,new d),this.supportsEdges=!0,this._configuration=new p}getConfiguration(e,r){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=r.transparencyPassType,this._configuration.enableOffset=r.camera.relativeElevation<OrderIndependentTransparency.ve,this._configuration.hasMultipassTerrain=r.multipassTerrain.enabled,this._configuration.cullAboveGround=r.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration}requiresSlot(e,r){return!!(r===ShaderOutput.H.Color||r===ShaderOutput.H.Alpha||r===ShaderOutput.H.Highlight||r===ShaderOutput.H.Depth&&this.parameters.writeLinearDepth||r===ShaderOutput.H.ObjectAndLayerIdColor)&&(e===RenderSlot.r.DRAPED_MATERIAL||(r===ShaderOutput.H.Highlight?e===RenderSlot.r.OPAQUE_MATERIAL:e===(this.parameters.transparent?this.parameters.writeDepth?RenderSlot.r.TRANSPARENT_MATERIAL:RenderSlot.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:RenderSlot.r.OPAQUE_MATERIAL)))}createGLMaterial(e){return new m(e)}createBufferWriter(){const e=(0,InterleavedLayout.U$)().vec3f(VertexAttribute.T.POSITION);return(0,has.Z)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute.T.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?e.f32(VertexAttribute.T.COLORFEATUREATTRIBUTE):e.vec4u8(VertexAttribute.T.COLOR),new DefaultBufferWriter.G(e)}}class m extends GLMaterial.Z{_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){return this._output!==ShaderOutput.H.Color&&this._output!==ShaderOutput.H.Alpha||this._updateOccludeeState(e),this.ensureTechnique(T,e)}}class d extends VisualVariablePassParameters.n{constructor(){super(...arguments),this.color=vec4f64.Z,this.transparent=!1,this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=basicInterfaces.Vr.None,this.hasOccludees=!1}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{IM:()=>v,W1:()=>c,lV:()=>t,wp:()=>I});var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const I=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION),c=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.UV0),v=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.COLOR),t=((0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.OBJECTANDLAYERIDCOLOR),(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.UV0).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.OBJECTANDLAYERIDCOLOR));(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.U$)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.COLOR).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.T.OBJECTANDLAYERIDCOLOR)},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>K});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");function t(t){return function n(n){return n instanceof Float32Array&&n.length>=16}(t)||function r(n){return Array.isArray(n)&&n.length>=16}(t)}var aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),BufferView=__webpack_require__("./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js"),debugFlags=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/debugFlags.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),HUD_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),GLTextureMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),screenSizePerspectiveUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");class s{constructor(){this.scale=0,this.factor=0,this.minPixelSize=0,this.paddingPixels=0}}var bufferWriterUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js"),MaterialUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js"),HUDMaterial_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class g extends ShaderTechnique.A{initializeConfiguration(t,i){i.spherical=t.viewingMode===ViewingMode.JY.Global}initializeProgram(e){return new Program.$(e.rctx,g.shader.get().build(this.configuration),DefaultVertexAttributeLocations.i)}_setPipelineState(e){const i=this.configuration,r=e===TransparencyPassType.A.NONE,o=e===TransparencyPassType.A.FrontFace,s=this.configuration.hasPolygonOffset?b:null,l=(r||o)&&i.output!==ShaderOutput.H.Highlight&&(i.depthEnabled||i.occlusionPass)?renderState.LZ:null;return(0,renderState.sm)({blending:i.output===ShaderOutput.H.Color||i.output===ShaderOutput.H.Alpha||i.output===ShaderOutput.H.Highlight?r?j:(0,OrderIndependentTransparency.j7)(e):null,depthTest:{func:enums.wb.LEQUAL},depthWrite:l,colorWrite:renderState.BK,polygonOffset:s})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return this.configuration.occlusionPass?enums.MX.POINTS:enums.MX.TRIANGLES}}g.shader=new ReloadableShaderModule.J(HUDMaterial_glsl.H,(()=>__webpack_require__.e(3362).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterial.glsl.js"))));const b={factor:0,units:-4},j=(0,renderState.if)(enums.zi.ONE,enums.zi.ONE_MINUS_SRC_ALPHA);var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class a extends DefaultTechniqueConfiguration.W{constructor(){super(...arguments),this.output=ShaderOutput.H.Color,this.screenCenterOffsetUnitsEnabled=HUD_glsl.d.World,this.transparencyPassType=TransparencyPassType.A.NONE,this.spherical=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.debugDrawLabelBorder=!1,this.binaryHighlightOcclusionEnabled=!0,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.hasMultipassGeometry=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:ShaderOutput.H.COUNT})],a.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:HUD_glsl.d.COUNT})],a.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:TransparencyPassType.A.COUNT})],a.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"signedDistanceFieldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"debugDrawLabelBorder",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"binaryHighlightOcclusionEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasPolygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"depthEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"pixelSnappingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasMultipassGeometry",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"hasMultipassTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],a.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!0})],a.prototype,"hasSliceInVertexProgram",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],a.prototype,"hasVvInstancing",void 0);class K extends Material.F5{constructor(e){super(e,new ve),this._configuration=new a}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits?HUD_glsl.d.Screen:HUD_glsl.d.World,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.isDraped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===RenderSlot.r.OCCLUSION_PIXELS&&this.parameters.occlusionTest&&(e===ShaderOutput.H.Color||e===ShaderOutput.H.Alpha),e===ShaderOutput.H.Color&&(this._configuration.debugDrawLabelBorder=!!debugFlags.Z.LABELS_SHOW_BORDER),e===ShaderOutput.H.Highlight&&(this._configuration.binaryHighlightOcclusionEnabled=this.parameters.binaryHighlightOcclusion),this._configuration.depthEnabled=this.parameters.depthEnabled,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.hasMultipassGeometry=t.multipassGeometry.enabled,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}intersect(e,r,i,a,n,o){if(!i.options.selectionMode||!i.options.hud||!e.visible)return;const g=this.parameters;let O=1,S=1;if((0,mat3.f)(le,r),null!=e.shaderTransformer){const t=e.shaderTransformer(me);O=t[0],S=t[5],function ee(e){const t=e[0],r=e[1],s=e[2],i=e[3],a=e[4],n=e[5],o=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+r*r+s*s),u=1/Math.sqrt(i*i+a*a+n*n),p=1/Math.sqrt(o*o+c*c+l*l);return e[0]=t*f,e[1]=r*f,e[2]=s*f,e[3]=i*u,e[4]=a*u,e[5]=n*u,e[6]=o*p,e[7]=c*p,e[8]=l*p,e}(le)}const A=e.vertexAttributes.get(VertexAttribute.T.POSITION),b=e.vertexAttributes.get(VertexAttribute.T.SIZE),P=e.vertexAttributes.get(VertexAttribute.T.NORMAL),x=e.vertexAttributes.get(VertexAttribute.T.AUXPOS1);(0,Util.hu)(A.size>=3);const _=i.point,y=i.camera,I=(0,HUDMaterial_glsl.c)(g);O*=y.pixelRatio,S*=y.pixelRatio;const T="screen"===this.parameters.centerOffsetUnits;for(let t=0;t<A.data.length/A.size;t++){const e=t*A.size;(0,vec3.s)(ie,A.data[e],A.data[e+1],A.data[e+2]),(0,vec3.m)(ie,ie,r);const a=t*b.size;Oe[0]=b.data[a]*O,Oe[1]=b.data[a+1]*S,(0,vec3.m)(ie,ie,y.viewMatrix);const n=t*x.size;if((0,vec3.s)(pe,x.data[n],x.data[n+1],x.data[n+2]),!T&&(ie[0]+=pe[0],ie[1]+=pe[1],0!==pe[2])){const e=pe[2];(0,vec3.n)(pe,ie),(0,vec3.b)(ie,ie,(0,vec3.g)(pe,pe,e))}const j=t*P.size;if((0,vec3.s)(ae,P.data[j],P.data[j+1],P.data[j+2]),this._normalAndViewAngle(ae,le,y,he),this._applyVerticalOffsetTransformationView(ie,he,y,re),y.applyProjection(ie,ne),ne[0]>-1){ne[0]=Math.floor(ne[0]),ne[1]=Math.floor(ne[1]),T&&(pe[0]||pe[1])&&(ne[0]+=pe[0],0!==pe[1]&&(ne[1]+=(0,screenSizePerspectiveUtils.sX)(pe[1],re.factorAlignment)),y.unapplyProjection(ne,ie)),ne[0]+=this.parameters.screenOffset[0],ne[1]+=this.parameters.screenOffset[1],(0,screenSizePerspectiveUtils.TU)(Oe,re.factor,Oe);const e=de*y.pixelRatio;let t=0;if(g.textureIsSignedDistanceField&&(t=g.outlineSize*y.pixelRatio/2),_&&te(_,ne[0],ne[1],Oe,e,t,g,I)){const e=i.ray;if((0,vec3.m)(ce,ie,(0,mat4.a)(ue,y.viewMatrix)),ne[0]=_[0],ne[1]=_[1],y.unprojectFromRenderScreen(ne,ie)){const t=(0,vec3f64.c)();(0,vec3.c)(t,e.direction);const r=1/(0,vec3.l)(t);(0,vec3.g)(t,t,r),o((0,vec3.i)(e.origin,ie)*r,t,-1,!0,1,ce)}}}}}intersectDraped(e,t,r,s,i,a){const n=e.vertexAttributes.get(VertexAttribute.T.POSITION),o=e.vertexAttributes.get(VertexAttribute.T.SIZE),c=this.parameters,l=(0,HUDMaterial_glsl.c)(c);let f=1,u=1;if(null!=e.shaderTransformer){const t=e.shaderTransformer(me);f=t[0],u=t[5]}f*=e.screenToWorldRatio,u*=e.screenToWorldRatio;const p=ge*e.screenToWorldRatio;for(let h=0;h<n.data.length/n.size;h++){const t=h*n.size,r=n.data[t],m=n.data[t+1],d=h*o.size;Oe[0]=o.data[d]*f,Oe[1]=o.data[d+1]*u;let g=0;c.textureIsSignedDistanceField&&(g=c.outlineSize*e.screenToWorldRatio/2),te(s,r,m,Oe,p,g,c,l)&&i(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new Pe(this)}_normalAndViewAngle(e,r,s,i){return t(r)&&(r=(0,mat3.f)(fe,r)),(0,vec3.t)(i.normal,e,r),(0,vec3.m)(i.normal,i.normal,s.viewInverseTransposeMatrix),i.cosAngle=(0,vec3.e)(oe,Se),i}_updateScaleInfo(e,t,r){const s=this.parameters;null!=s.screenSizePerspective?(0,screenSizePerspectiveUtils.PV)(r,t,s.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minPixelSize=0,e.factor.paddingPixels=0),null!=s.screenSizePerspectiveAlignment?(0,screenSizePerspectiveUtils.PV)(r,t,s.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minPixelSize=e.factor.minPixelSize,e.factorAlignment.paddingPixels=e.factor.paddingPixels)}applyShaderOffsetsView(e,t,r,s,i,a,n){const o=this._normalAndViewAngle(t,r,i,he);return this._applyVerticalGroundOffsetView(e,o,i,n),this._applyVerticalOffsetTransformationView(n,o,i,a),this._applyPolygonOffsetView(n,o,s[3],i,n),this._applyCenterOffsetView(n,s,n),n}applyShaderOffsetsNDC(e,t,r,s,i){return this._applyCenterOffsetNDC(e,t,r,s),null!=i&&(0,vec3.c)(i,s),this._applyPolygonOffsetNDC(s,t,r,s),s}_applyPolygonOffsetView(t,r,s,i,a){const n=i.aboveGround?1:-1;let o=Math.sign(s);0===o&&(o=n);const c=n*o;if(this.parameters.shaderPolygonOffset<=0)return(0,vec3.c)(a,t);const l=(0,mathUtils.uZ)(Math.abs(r.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/i.viewport[2];return(0,vec3.g)(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,r,s){const i=(0,vec3.l)(e),a=r.aboveGround?1:-1,n=.5*r.computeRenderPixelSizeAtDist(i),o=(0,vec3.g)(ie,t.normal,a*n);return(0,vec3.a)(s,e,o),s}_applyVerticalOffsetTransformationView(e,t,r,s){const i=this.parameters;if(!i.verticalOffset||!i.verticalOffset.screenLength){if(i.screenSizePerspective||i.screenSizePerspectiveAlignment){const r=(0,vec3.l)(e);this._updateScaleInfo(s,r,t.cosAngle)}else s.factor.scale=1,s.factorAlignment.scale=1;return e}const a=(0,vec3.l)(e),n=i.screenSizePerspectiveAlignment??i.screenSizePerspective,o=(0,MaterialUtil.Hx)(r,a,i.verticalOffset,t.cosAngle,n);return this._updateScaleInfo(s,a,t.cosAngle),(0,vec3.g)(t.normal,t.normal,o),(0,vec3.a)(e,e,t.normal)}_applyCenterOffsetView(e,t,r){const s="screen"!==this.parameters.centerOffsetUnits;return r!==e&&(0,vec3.c)(r,e),s&&(r[0]+=t[0],r[1]+=t[1],t[2]&&((0,vec3.n)(ae,r),(0,vec3.a)(r,r,(0,vec3.g)(ae,ae,t[2])))),r}_applyCenterOffsetNDC(e,t,r,s){const i="screen"!==this.parameters.centerOffsetUnits;return s!==e&&(0,vec3.c)(s,e),i||(s[0]+=t[0]/r.fullWidth*2,s[1]+=t[1]/r.fullHeight*2),s}_applyPolygonOffsetNDC(e,t,r,s){const i=this.parameters.shaderPolygonOffset;if(e!==s&&(0,vec3.c)(s,e),i){const e=r.aboveGround?1:-1,a=e*Math.sign(t[3]);s[2]-=(a||e)*i}return s}requiresSlot(e,t){if(t===ShaderOutput.H.Color||t===ShaderOutput.H.Alpha||t===ShaderOutput.H.Highlight||t===ShaderOutput.H.ObjectAndLayerIdColor){if(e===RenderSlot.r.DRAPED_MATERIAL)return!0;const{drawInSecondSlot:t,occlusionTest:r}=this.parameters;return e===(t?RenderSlot.r.LABEL_MATERIAL:RenderSlot.r.HUD_MATERIAL)||r&&e===RenderSlot.r.OCCLUSION_PIXELS}return!1}createGLMaterial(e){return new Q(e)}calculateRelativeScreenBounds(e,t,r=(0,aaBoundingRect.Ue)()){return function $(e,t,r,s=se){return(0,vec2.j)(s,e.anchorPosition),s[0]*=-t[0],s[1]*=-t[1],s[0]+=e.screenOffset[0]*r,s[1]+=e.screenOffset[1]*r,s}(this.parameters,e,t,r),r[2]=r[0]+e[0],r[3]=r[1]+e[1],r}}class Q extends GLTextureMaterial.F{constructor(e){super({...e,...e.material.parameters})}selectProgram(e){return this.ensureTechnique(g,e)}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.selectProgram(e)}}function te(e,t,r,s,i,a,n,o){let c=t-i-(o[0]>0?s[0]*o[0]:0),l=c+s[0]+2*i,f=r-i-(o[1]>0?s[1]*o[1]:0),u=f+s[1]+2*i;const p=n.distanceFieldBoundingBox;return n.textureIsSignedDistanceField&&null!=p&&(c+=s[0]*p[0],f+=s[1]*p[1],l-=s[0]*(1-p[2]),u-=s[1]*(1-p[3]),c-=a,l+=a,f-=a,u+=a),e[0]>c&&e[0]<l&&e[1]>f&&e[1]<u}const re=new class ScaleInfo_t{constructor(){this.factor=new s,this.factorAlignment=new s}},se=(0,vec2f64.a)(),ie=(0,vec3f64.c)(),ae=(0,vec3f64.c)(),ne=(0,vec4f64.c)(),oe=(0,vec3f64.c)(),ce=(0,vec3f64.c)(),le=(0,mat3f64.c)(),fe=(0,mat3f64.c)(),ue=(0,mat4f64.c)(),pe=(0,vec3f64.c)(),he={normal:oe,cosAngle:0},me=(0,mat4f64.c)(),de=1,ge=2,Oe=[0,0],Se=(0,vec3f64.f)(0,0,1);class ve extends GLTextureMaterial.E{constructor(){super(...arguments),this.renderOccluded=Material.yD.Occlude,this.color=(0,vec4f64.f)(1,1,1,1),this.texCoordScale=[1,1],this.polygonOffset=!1,this.anchorPosition=(0,vec2f64.f)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.outlineColor=(0,vec4f64.f)(1,1,1,1),this.outlineSize=0,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.binaryHighlightOcclusion=!0,this.centerOffsetUnits="world",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.isDraped=!1}}const Ae=(0,InterleavedLayout.U$)().vec3f(VertexAttribute.T.POSITION).vec3f(VertexAttribute.T.NORMAL).vec2f(VertexAttribute.T.UV0).vec4u8(VertexAttribute.T.COLOR).vec2f(VertexAttribute.T.SIZE).vec4f(VertexAttribute.T.AUXPOS1).vec4f(VertexAttribute.T.AUXPOS2),be=Ae.clone().vec4u8(VertexAttribute.T.OBJECTANDLAYERIDCOLOR);class Pe{constructor(e){this._material=e,this.vertexBufferLayout=(0,has.Z)("enable-feature:objectAndLayerId-rendering")?be:Ae}elementCount(e){return 6*e.indices.get(VertexAttribute.T.POSITION).length}write(e,t,r,s,i){(0,bufferWriterUtils.ho)(r.indices.get(VertexAttribute.T.POSITION),r.vertexAttributes.get(VertexAttribute.T.POSITION).data,e,s.position,i,6),(0,bufferWriterUtils.s5)(r.indices.get(VertexAttribute.T.NORMAL),r.vertexAttributes.get(VertexAttribute.T.NORMAL).data,t,s.normal,i,6);const a=r.vertexAttributes.get(VertexAttribute.T.UV0).data;let n,o,c,l;if(null==a||a.length<4){const e=this._material.parameters;n=0,o=0,c=e.texCoordScale[0],l=e.texCoordScale[1]}else n=a[0],o=a[1],c=a[2],l=a[3];c=Math.min(1.99999,c+1),l=Math.min(1.99999,l+1);let f=r.indices.get(VertexAttribute.T.POSITION).length,u=i;const p=s.uv0;for(let g=0;g<f;++g)p.set(u,0,n),p.set(u,1,o),u+=1,p.set(u,0,c),p.set(u,1,o),u+=1,p.set(u,0,c),p.set(u,1,l),u+=1,p.set(u,0,c),p.set(u,1,l),u+=1,p.set(u,0,n),p.set(u,1,l),u+=1,p.set(u,0,n),p.set(u,1,o),u+=1;(0,bufferWriterUtils.Vs)(r.indices.get(VertexAttribute.T.COLOR),r.vertexAttributes.get(VertexAttribute.T.COLOR).data,4,s.color,i,6);const h=r.indices.get(VertexAttribute.T.SIZE),m=r.vertexAttributes.get(VertexAttribute.T.SIZE).data;f=h.length;const d=s.size;u=i;for(let g=0;g<f;++g){const e=m[2*h[g]],t=m[2*h[g]+1];for(let r=0;r<6;++r)d.set(u,0,e),d.set(u,1,t),u+=1}if(r.indices.get(VertexAttribute.T.AUXPOS1)&&r.vertexAttributes.get(VertexAttribute.T.AUXPOS1)?(0,bufferWriterUtils.SW)(r.indices.get(VertexAttribute.T.AUXPOS1),r.vertexAttributes.get(VertexAttribute.T.AUXPOS1).data,s.auxpos1,i,6):(0,bufferWriterUtils.h)(s.auxpos1,i,6*f),r.indices.get(VertexAttribute.T.AUXPOS2)&&r.vertexAttributes.get(VertexAttribute.T.AUXPOS2)?(0,bufferWriterUtils.SW)(r.indices.get(VertexAttribute.T.AUXPOS2),r.vertexAttributes.get(VertexAttribute.T.AUXPOS2).data,s.auxpos2,i,6):(0,bufferWriterUtils.h)(s.auxpos2,i,6*f),null!=r.objectAndLayerIdColor&&r.indices.get(VertexAttribute.T.POSITION)){const e=r.indices.get(VertexAttribute.T.POSITION).length,t=s.getField(VertexAttribute.T.OBJECTANDLAYERIDCOLOR,BufferView.mc);(0,bufferWriterUtils.xP)(r.objectAndLayerIdColor,t,e,i,6)}}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/NativeLineMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>X});var Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),lineSegment=__webpack_require__("./node_modules/@arcgis/core/geometry/support/lineSegment.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),BufferView=__webpack_require__("./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),DefaultBufferWriter=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js"),DefaultLayouts=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js"),bufferWriterUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),NativeLine_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/NativeLine.glsl.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class S extends ShaderTechnique.A{get _stippleEnabled(){return this.configuration.stippleEnabled&&this.configuration.output!==ShaderOutput.H.Highlight}initializeProgram(e){return new Program.$(e.rctx,S.shader.get().build(this.configuration),DefaultVertexAttributeLocations.i)}initializePipeline(){const t=this.configuration,i=(0,renderState.wK)(enums.zi.SRC_ALPHA,enums.zi.ONE,enums.zi.ONE_MINUS_SRC_ALPHA,enums.zi.ONE_MINUS_SRC_ALPHA),r=(e,i=null,r=null)=>(0,renderState.sm)({blending:i,depthTest:StencilUtils.JN,depthWrite:r,colorWrite:renderState.BK,stencilWrite:t.hasOccludees?StencilUtils.s3:null,stencilTest:t.hasOccludees?e?StencilUtils.eD:StencilUtils.RY:null});return t.output===ShaderOutput.H.Color?(this._occludeePipelineState=r(!0,t.transparent||this._stippleEnabled?i:null,renderState.LZ),r(!1,t.transparent||this._stippleEnabled?i:null,renderState.LZ)):r(!1)}get primitiveType(){return enums.MX.LINES}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}S.shader=new ReloadableShaderModule.J(NativeLine_glsl.N,(()=>__webpack_require__.e(9979).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLine.glsl.js"))));var B,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class r extends DefaultTechniqueConfiguration.W{constructor(){super(...arguments),this.output=ShaderOutput.H.Color,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.hasOccludees=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:ShaderOutput.H.COUNT})],r.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"stippleEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"stippleOffColorEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"stipplePreferContinuous",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],r.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],r.prototype,"stippleRequiresClamp",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],r.prototype,"stippleScaleWithLineWidth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],r.prototype,"stippleRequiresStretchMeasure",void 0),function(e){e[e.START=0]="START",e[e.END=1]="END"}(B||(B={}));class X extends Material.F5{constructor(e){super(e,new W),this._configuration=new r}getConfiguration(e,t){this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.transparent=this.parameters.color[3]<1||this.parameters.width<1,this._configuration.draped=t.slot===RenderSlot.r.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.stipplePreferContinuous=this.parameters.stipplePreferContinuous,this._configuration}intersect(t,r,f,m,h,g){if(!f.options.selectionMode||!t.visible)return;if(!(0,Util.kG)(r))return void Logger.Z.getLogger("esri.views.3d.webgl-engine.materials.NativeLineMaterial").error("intersection assumes a translation-only matrix");const S=t.vertexAttributes.get(VertexAttribute.T.POSITION).data,b=f.camera,x=ee;(0,vec2.j)(x,f.point);(0,vec3.s)(te[0],x[0]-2,x[1]+2,0),(0,vec3.s)(te[1],x[0]+2,x[1]+2,0),(0,vec3.s)(te[2],x[0]+2,x[1]-2,0),(0,vec3.s)(te[3],x[0]-2,x[1]-2,0);for(let e=0;e<4;e++)if(!b.unprojectFromRenderScreen(te[e],re[e]))return;(0,plane.zk)(b.eye,re[0],re[1],se),(0,plane.zk)(b.eye,re[1],re[2],ie),(0,plane.zk)(b.eye,re[2],re[3],oe),(0,plane.zk)(b.eye,re[3],re[0],ne);let R=Number.MAX_VALUE,v=0;for(let e=0;e<S.length-5;e+=3){if(F[0]=S[e]+r[12],F[1]=S[e+1]+r[13],F[2]=S[e+2]+r[14],G[0]=S[e+3]+r[12],G[1]=S[e+4]+r[13],G[2]=S[e+5]+r[14],(0,plane.jH)(se,F)<0&&(0,plane.jH)(se,G)<0||(0,plane.jH)(ie,F)<0&&(0,plane.jH)(ie,G)<0||(0,plane.jH)(oe,F)<0&&(0,plane.jH)(oe,G)<0||(0,plane.jH)(ne,F)<0&&(0,plane.jH)(ne,G)<0)continue;if(b.projectToRenderScreen(F,Z),b.projectToRenderScreen(G,z),Z[2]<0&&z[2]>0){(0,vec3.b)(H,F,G);const e=b.frustum,t=-(0,plane.jH)(e[frustum.Nu.NEAR],F)/(0,vec3.e)(H,(0,plane.mJ)(e[frustum.Nu.NEAR]));(0,vec3.g)(H,H,t),(0,vec3.a)(F,F,H),b.projectToRenderScreen(F,Z)}else if(Z[2]>0&&z[2]<0){(0,vec3.b)(H,G,F);const e=b.frustum,t=-(0,plane.jH)(e[frustum.Nu.NEAR],G)/(0,vec3.e)(H,(0,plane.mJ)(e[frustum.Nu.NEAR]));(0,vec3.g)(H,H,t),(0,vec3.a)(G,G,H),b.projectToRenderScreen(G,z)}else if(Z[2]<0&&z[2]<0)continue;Z[2]=0,z[2]=0;const t=(0,lineSegment.Jk)((0,lineSegment.zk)(Z,z,Y),x);t<R&&(R=t,(0,vec3.c)(J,F),(0,vec3.c)(K,G),v=e/3)}const E=f.rayBegin,N=f.rayEnd;if(R<4){let e=Number.MAX_VALUE;if((0,lineSegment.AR)((0,lineSegment.zk)(J,K,Y),(0,lineSegment.zk)(E,N,$),Q)){(0,vec3.b)(Q,Q,E);const t=(0,vec3.l)(Q);(0,vec3.g)(Q,Q,1/t),e=t/(0,vec3.i)(E,N)}g(e,Q,v,!1)}}intersectDraped(e,r,s,i,o,n){if(!s.options.selectionMode)return;const a=e.vertexAttributes.get(VertexAttribute.T.POSITION).data,l=e.vertexAttributes.get(VertexAttribute.T.SIZE),u=l?l.data[0]:0,c=i[0],p=i[1],f=((u+1)/2+4)*e.screenToWorldRatio;let m=Number.MAX_VALUE,h=0;for(let d=0;d<a.length-5;d+=3){const e=a[d],r=a[d+1],s=c-e,i=p-r,o=a[d+3]-e,n=a[d+4]-r,l=(0,mathUtils.uZ)((o*s+n*i)/(o*o+n*n),0,1),u=o*l-s,f=n*l-i,g=u*u+f*f;g<m&&(m=g,h=d/3)}m<f*f&&o(n.dist,n.normal,h,!1)}requiresSlot(e,t){return!(t!==ShaderOutput.H.Color&&t!==ShaderOutput.H.Highlight&&t!==ShaderOutput.H.ObjectAndLayerIdColor||e!==RenderSlot.r.OPAQUE_MATERIAL&&e!==RenderSlot.r.DRAPED_MATERIAL)}createGLMaterial(e){return new k(e)}createBufferWriter(){const e=this.parameters.hasVertexColors?DefaultLayouts.IM:DefaultLayouts.wp;return null==this.parameters.stipplePattern?new DefaultBufferWriter.G(e):new q(e.clone().vec3f(VertexAttribute.T.AUXPOS1).vec2f(VertexAttribute.T.UV0))}}class k extends GLMaterial.Z{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextureRepository.release(this._stipplePattern),this._stipplePattern=null}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){this._output===ShaderOutput.H.Color&&this._updateOccludeeState(e);const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextureRepository.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.ensureTechnique(S,e)}}class q{constructor(e){this.vertexBufferLayout=e}elementCount(e){return e.indices.get(VertexAttribute.T.POSITION).length}write(e,t,r,s,i){(0,bufferWriterUtils.NK)(r,this.vertexBufferLayout,e,t,s,i),this._writeAuxpos1(e,r,s,i),this._writeUV0(e,r,s,i)}_writeAuxpos1(e,t,r,s){const i=r.getField(VertexAttribute.T.AUXPOS1,BufferView.ct),o=t.indices.get(VertexAttribute.T.POSITION),n=t.vertexAttributes.get(VertexAttribute.T.POSITION).data,a=e,l=i.typedBufferStride,u=i.typedBuffer;s*=l;for(let c=0;c<o.length-1;c+=2)for(const e of[1,0]){const t=3*o[c+e],r=n[t],i=n[t+1],p=n[t+2],f=a[0]*r+a[4]*i+a[8]*p+a[12],m=a[1]*r+a[5]*i+a[9]*p+a[13],h=a[2]*r+a[6]*i+a[10]*p+a[14];u[s]=f,u[s+1]=m,u[s+2]=h,s+=l}}_writeUV0(e,t,r,s){const o=r.getField(VertexAttribute.T.UV0,BufferView.Eu),n=t.indices.get(VertexAttribute.T.POSITION),a=t.vertexAttributes.get(VertexAttribute.T.POSITION).data,l=t.vertexAttributes.get(VertexAttribute.T.DISTANCETOSTART)?.data,c=o.typedBufferStride,m=o.typedBuffer;let h=0;m[s*=c]=B.START,m[s+1]=h,s+=c;const d=3*n[0],g=(0,vec3.s)(F,a[d],a[d+1],a[d+2]);e&&(0,vec3.m)(g,g,e);const A=G,_=n.length-1;let O=1;const S=l?(e,t,r)=>h=l[r]:(e,t,r)=>h+=(0,vec3.i)(e,t);for(let p=1;p<_;p+=2){const t=3*n[p];(0,vec3.s)(A,a[t],a[t+1],a[t+2]),e&&(0,vec3.m)(A,A,e),S(g,A,O++);for(let e=0;e<2;++e)m[s]=1-e,m[s+1]=h,s+=c;(0,vec3.c)(g,A)}const T=3*n[_];(0,vec3.s)(A,a[T],a[T+1],a[T+2]),e&&(0,vec3.m)(A,A,e),S(g,A,O),m[s]=B.END,m[s+1]=h}}class W extends Material.Mt{constructor(){super(...arguments),this.color=vec4f64.O,this.hasVertexColors=!1,this.hasSlicePlane=!1,this.width=1,this.stipplePreferContinuous=!0,this.hasOccludees=!1,this.stippleTexture=null}}const F=(0,vec3f64.c)(),G=(0,vec3f64.c)(),H=(0,vec3f64.c)(),Q=(0,vec3f64.c)(),Z=(0,screenUtils.J$)(),z=(0,screenUtils.J$)(),J=(0,vec3f64.c)(),K=(0,vec3f64.c)(),Y=(0,lineSegment.Ue)(),$=(0,lineSegment.Ue)(),ee=(0,vec3f64.c)(),te=[(0,screenUtils.J$)(),(0,screenUtils.J$)(),(0,screenUtils.J$)(),(0,screenUtils.J$)()],re=[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()],se=(0,plane.Ue)(),ie=(0,plane.Ue)(),oe=(0,plane.Ue)(),ne=(0,plane.Ue)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>B});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),lineSegment=__webpack_require__("./node_modules/@arcgis/core/geometry/support/lineSegment.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),VisualVariablePassParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js"),LineMarkerTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),RibbonLine_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");const I=new Map([[VertexAttribute.T.POSITION,0],[VertexAttribute.T.SUBDIVISIONFACTOR,1],[VertexAttribute.T.UV0,2],[VertexAttribute.T.AUXPOS1,3],[VertexAttribute.T.AUXPOS2,4],[VertexAttribute.T.COLOR,5],[VertexAttribute.T.COLORFEATUREATTRIBUTE,5],[VertexAttribute.T.SIZE,6],[VertexAttribute.T.SIZEFEATUREATTRIBUTE,6],[VertexAttribute.T.OPACITYFEATUREATTRIBUTE,7],[VertexAttribute.T.OBJECTANDLAYERIDCOLOR,8]]);class y extends ShaderTechnique.A{initializeProgram(e){return new Program.$(e.rctx,y.shader.get().build(this.configuration),I)}_makePipelineState(t,i){const c=this.configuration,a=t===TransparencyPassType.A.NONE,d=t===TransparencyPassType.A.FrontFace;return(0,renderState.sm)({blending:c.output===ShaderOutput.H.Color||c.output===ShaderOutput.H.Alpha?a?OrderIndependentTransparency.wu:(0,OrderIndependentTransparency.j7)(t):null,depthTest:{func:(0,OrderIndependentTransparency.Bh)(t)},depthWrite:a?c.writeDepth?renderState.LZ:null:(0,OrderIndependentTransparency.K5)(t),colorWrite:renderState.BK,stencilWrite:c.hasOccludees?StencilUtils.s3:null,stencilTest:c.hasOccludees?i?StencilUtils.eD:StencilUtils.RY:null,polygonOffset:a||d?c.hasPolygonOffset?_:null:OrderIndependentTransparency.E0})}initializePipeline(){const e=this.configuration;if(e.occluder){const t=e.hasPolygonOffset?_:null;this._occluderPipelineTransparent=(0,renderState.sm)({blending:OrderIndependentTransparency.wu,polygonOffset:t,depthTest:StencilUtils.zV,depthWrite:null,colorWrite:renderState.BK,stencilWrite:null,stencilTest:StencilUtils.YD}),this._occluderPipelineOpaque=(0,renderState.sm)({blending:OrderIndependentTransparency.wu,polygonOffset:t,depthTest:StencilUtils.zV,depthWrite:null,colorWrite:renderState.BK,stencilWrite:StencilUtils.P7,stencilTest:StencilUtils.ii}),this._occluderPipelineMaskWrite=(0,renderState.sm)({blending:null,polygonOffset:t,depthTest:StencilUtils.JN,depthWrite:null,colorWrite:null,stencilWrite:StencilUtils.s3,stencilTest:StencilUtils.eD})}return this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return this.configuration.wireframe?enums.MX.LINES:enums.MX.TRIANGLE_STRIP}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?e===RenderSlot.r.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:e===RenderSlot.r.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipelineState(e,t)}}y.shader=new ReloadableShaderModule.J(RibbonLine_glsl.a,(()=>__webpack_require__.e(4271).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLine.glsl.js"))));const _={factor:0,units:-4};var J,RibbonLineTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js");!function(e){e[e.LEFT_JOIN_START=-2]="LEFT_JOIN_START",e[e.LEFT_JOIN_END=-1]="LEFT_JOIN_END",e[e.LEFT_CAP_START=-4]="LEFT_CAP_START",e[e.LEFT_CAP_END=-5]="LEFT_CAP_END",e[e.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",e[e.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",e[e.RIGHT_CAP_START=4]="RIGHT_CAP_START",e[e.RIGHT_CAP_END=5]="RIGHT_CAP_END"}(J||(J={}));class B extends Material.F5{constructor(e){super(e,new G),this._configuration=new RibbonLineTechniqueConfiguration.G,this._vertexAttributeLocations=I}isClosed(e,t){return V(this.parameters,e,t)}getConfiguration(e,t){this._configuration.output=e,this._configuration.draped=t.slot===RenderSlot.r.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==ShaderOutput.H.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stippleScaleWithLineWidth=r&&this.parameters.stippleScaleWithLineWidth,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&function Z(e){return e.anchor===LineMarkerTechniqueConfiguration.i5.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.occluder=this.parameters.renderOccluded===Material.yD.OccludeAndTransparentStencil,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.wireframe=this.parameters.wireframe,this._configuration}intersectDraped(e,r,i,s,a,n){if(!i.options.selectionMode)return;const o=e.vertexAttributes.get(VertexAttribute.T.POSITION).data,l=e.vertexAttributes.get(VertexAttribute.T.SIZE);let c=this.parameters.width;if(this.parameters.vvSize){const r=e.vertexAttributes.get(VertexAttribute.T.SIZEFEATUREATTRIBUTE).data[0];c*=(0,mathUtils.uZ)(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else l&&(c*=l.data[0]);const h=s[0],u=s[1],p=(c/2+4)*e.screenToWorldRatio;let m=Number.MAX_VALUE,f=0;for(let T=0;T<o.length-5;T+=3){const e=o[T],r=o[T+1],i=h-e,s=u-r,a=o[T+3]-e,n=o[T+4]-r,l=(0,mathUtils.uZ)((a*i+n*s)/(a*a+n*n),0,1),c=a*l-i,p=n*l-s,_=c*c+p*p;_<m&&(m=_,f=T/3)}m<p*p&&a(n.dist,n.normal,f,!1)}intersect(r,p,m,f,_,v){if(!m.options.selectionMode||!r.visible)return;if(!(0,Util.kG)(p))return void Logger.Z.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const I=r.vertexAttributes,O=I.get(VertexAttribute.T.POSITION).data;let b=this.parameters.width;if(this.parameters.vvSize){const e=I.get(VertexAttribute.T.SIZEFEATUREATTRIBUTE).data[0];b*=(0,mathUtils.uZ)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else I.has(VertexAttribute.T.SIZE)&&(b*=I.get(VertexAttribute.T.SIZE).data[0]);const P=m.camera,L=K;(0,vec2.j)(L,m.point);const N=b*P.pixelRatio/2+4*P.pixelRatio;(0,vec3.s)(le[0],L[0]-N,L[1]+N,0),(0,vec3.s)(le[1],L[0]+N,L[1]+N,0),(0,vec3.s)(le[2],L[0]+N,L[1]-N,0),(0,vec3.s)(le[3],L[0]-N,L[1]-N,0);for(let e=0;e<4;e++)if(!P.unprojectFromRenderScreen(le[e],ce[e]))return;(0,plane.zk)(P.eye,ce[0],ce[1],he),(0,plane.zk)(P.eye,ce[1],ce[2],ue),(0,plane.zk)(P.eye,ce[2],ce[3],pe),(0,plane.zk)(P.eye,ce[3],ce[0],me);let j=Number.MAX_VALUE,D=0;const U=W(this.parameters,I,r.indices)?O.length-2:O.length-5;for(let e=0;e<U;e+=3){q[0]=O[e]+p[12],q[1]=O[e+1]+p[13],q[2]=O[e+2]+p[14];const t=(e+3)%O.length;if(X[0]=O[t]+p[12],X[1]=O[t+1]+p[13],X[2]=O[t+2]+p[14],(0,plane.jH)(he,q)<0&&(0,plane.jH)(he,X)<0||(0,plane.jH)(ue,q)<0&&(0,plane.jH)(ue,X)<0||(0,plane.jH)(pe,q)<0&&(0,plane.jH)(pe,X)<0||(0,plane.jH)(me,q)<0&&(0,plane.jH)(me,X)<0)continue;if(P.projectToRenderScreen(q,$),P.projectToRenderScreen(X,ee),$[2]<0&&ee[2]>0){(0,vec3.b)(Y,q,X);const e=P.frustum,t=-(0,plane.jH)(e[frustum.Nu.NEAR],q)/(0,vec3.e)(Y,(0,plane.mJ)(e[frustum.Nu.NEAR]));(0,vec3.g)(Y,Y,t),(0,vec3.a)(q,q,Y),P.projectToRenderScreen(q,$)}else if($[2]>0&&ee[2]<0){(0,vec3.b)(Y,X,q);const e=P.frustum,t=-(0,plane.jH)(e[frustum.Nu.NEAR],X)/(0,vec3.e)(Y,(0,plane.mJ)(e[frustum.Nu.NEAR]));(0,vec3.g)(Y,Y,t),(0,vec3.a)(X,X,Y),P.projectToRenderScreen(X,ee)}else if($[2]<0&&ee[2]<0)continue;$[2]=0,ee[2]=0;const r=(0,lineSegment.Jk)((0,lineSegment.zk)($,ee,ie),L);r<j&&(j=r,(0,vec3.c)(te,q),(0,vec3.c)(re,X),D=e/3)}const x=m.rayBegin,F=m.rayEnd;if(j<N*N){let e=Number.MAX_VALUE;if((0,lineSegment.AR)((0,lineSegment.zk)(te,re,ie),(0,lineSegment.zk)(x,F,se),Q)){(0,vec3.b)(Q,Q,x);const t=(0,vec3.l)(Q);(0,vec3.g)(Q,Q,1/t),e=t/(0,vec3.i)(x,F)}v(e,Q,D,!1)}}get _layout(){const e=(0,InterleavedLayout.U$)().vec3f(VertexAttribute.T.POSITION).f32(VertexAttribute.T.SUBDIVISIONFACTOR).vec2f(VertexAttribute.T.UV0).vec3f(VertexAttribute.T.AUXPOS1).vec3f(VertexAttribute.T.AUXPOS2);return this.parameters.vvSize?e.f32(VertexAttribute.T.SIZEFEATUREATTRIBUTE):e.f32(VertexAttribute.T.SIZE),this.parameters.vvColor?e.f32(VertexAttribute.T.COLORFEATUREATTRIBUTE):e.vec4f(VertexAttribute.T.COLOR),this.parameters.vvOpacity&&e.f32(VertexAttribute.T.OPACITYFEATUREATTRIBUTE),(0,has.Z)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute.T.OBJECTANDLAYERIDCOLOR),e}createBufferWriter(){return new H(this._layout,this.parameters)}requiresSlot(e,t){return(t===ShaderOutput.H.Color||t===ShaderOutput.H.Alpha||t===ShaderOutput.H.Highlight||t===ShaderOutput.H.Depth||t===ShaderOutput.H.ObjectAndLayerIdColor)&&(e===RenderSlot.r.DRAPED_MATERIAL||(this.parameters.renderOccluded===Material.yD.OccludeAndTransparentStencil?e===RenderSlot.r.OPAQUE_MATERIAL||e===RenderSlot.r.OCCLUDER_MATERIAL||e===RenderSlot.r.TRANSPARENT_OCCLUDER_MATERIAL:t===ShaderOutput.H.Color||t===ShaderOutput.H.Alpha?e===(this.parameters.writeDepth?RenderSlot.r.TRANSPARENT_MATERIAL:RenderSlot.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):e===RenderSlot.r.OPAQUE_MATERIAL))}createGLMaterial(e){return new z(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class z extends GLMaterial.Z{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextureRepository.release(this._stipplePattern),this._stipplePattern=null}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){this._output!==ShaderOutput.H.Color&&this._output!==ShaderOutput.H.Alpha||this._updateOccludeeState(e);const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextureRepository.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.ensureTechnique(y,e)}}class G extends VisualVariablePassParameters.n{constructor(){super(...arguments),this.width=0,this.color=vec4f64.O,this.join="miter",this.cap=RibbonLineTechniqueConfiguration.R.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stippleScaleWithLineWidth=!1,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.hasOccludees=!1,this.wireframe=!1}}class H{constructor(e,t){this._parameters=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e;const r=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=r;break;case"round":this.numJoinSubdivisions=RibbonLine_glsl.R+r}}_isClosed(e){return W(this._parameters,e.vertexAttributes,e.indices)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const r=e.indices.get(VertexAttribute.T.POSITION).length/2+1,i=this._isClosed(e);let s=i?2:4;return s+=((i?r:r-1)-(i?0:1))*(2*this.numJoinSubdivisions+4),s+=2,this._parameters.wireframe&&(s=2+4*(s-2)),s}write(e,t,r,i,a){const n=ae,o=ne,l=oe,h=r.vertexAttributes.get(VertexAttribute.T.POSITION).data,m=r.indices&&r.indices.get(VertexAttribute.T.POSITION),f=r.vertexAttributes.get(VertexAttribute.T.DISTANCETOSTART)?.data;m&&m.length!==2*(h.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");let T=1,_=0;this._parameters.vvSize?_=r.vertexAttributes.get(VertexAttribute.T.SIZEFEATUREATTRIBUTE).data[0]:r.vertexAttributes.has(VertexAttribute.T.SIZE)&&(T=r.vertexAttributes.get(VertexAttribute.T.SIZE).data[0]);let d=[1,1,1,1],A=0;this._parameters.vvColor?A=r.vertexAttributes.get(VertexAttribute.T.COLORFEATUREATTRIBUTE).data[0]:r.vertexAttributes.has(VertexAttribute.T.COLOR)&&(d=r.vertexAttributes.get(VertexAttribute.T.COLOR).data);const E=(0,has.Z)("enable-feature:objectAndLayerId-rendering")?r.objectAndLayerIdColor:null;let v=0;this._parameters.vvOpacity&&(v=r.vertexAttributes.get(VertexAttribute.T.OPACITYFEATUREATTRIBUTE).data[0]);const R=h.length/3,S=new Float32Array(i.buffer),g=(0,has.Z)("enable-feature:objectAndLayerId-rendering")?new Uint8Array(i.buffer):null,I=this.vertexBufferLayout.stride/4;let O=a*I;const b=O;let P=0;const L=f?(e,t,r)=>P=f[r]:(e,t,r)=>P+=(0,vec3.i)(e,t),N=(0,has.Z)("enable-feature:objectAndLayerId-rendering"),C=(e,t,r,i,s,a,n)=>{if(S[O++]=t[0],S[O++]=t[1],S[O++]=t[2],S[O++]=i,S[O++]=n,S[O++]=s,S[O++]=e[0],S[O++]=e[1],S[O++]=e[2],S[O++]=r[0],S[O++]=r[1],S[O++]=r[2],S[O++]=this._parameters.vvSize?_:T,this._parameters.vvColor)S[O++]=A;else{const e=Math.min(4*a,d.length-4);S[O++]=d[e],S[O++]=d[e+1],S[O++]=d[e+2],S[O++]=d[e+3]}this._parameters.vvOpacity&&(S[O++]=v),N&&(null!=E&&(g[4*O]=E[0],g[4*O+1]=E[1],g[4*O+2]=E[2],g[4*O+3]=E[3]),O++)};O+=I,(0,vec3.s)(o,h[0],h[1],h[2]),e&&(0,vec3.m)(o,o,e);const j=this._isClosed(r);if(j){const t=h.length-3;(0,vec3.s)(n,h[t],h[t+1],h[t+2]),e&&(0,vec3.m)(n,n,e)}else(0,vec3.s)(l,h[3],h[4],h[5]),e&&(0,vec3.m)(l,l,e),C(o,o,l,1,J.LEFT_CAP_START,0,0),C(o,o,l,1,J.RIGHT_CAP_START,0,0),(0,vec3.c)(n,o),(0,vec3.c)(o,l);const D=j?0:1,U=j?R:R-1;for(let u=D;u<U;u++){const t=(u+1)%R*3;(0,vec3.s)(l,h[t],h[t+1],h[t+2]),e&&(0,vec3.m)(l,l,e),L(n,o,u),C(n,o,l,0,J.LEFT_JOIN_END,u,P),C(n,o,l,0,J.RIGHT_JOIN_END,u,P);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);C(n,o,l,t,J.LEFT_JOIN_END,u,P),C(n,o,l,t,J.RIGHT_JOIN_END,u,P)}C(n,o,l,1,J.LEFT_JOIN_START,u,P),C(n,o,l,1,J.RIGHT_JOIN_START,u,P),(0,vec3.c)(n,o),(0,vec3.c)(o,l)}j?((0,vec3.s)(l,h[3],h[4],h[5]),e&&(0,vec3.m)(l,l,e),P=L(n,o,U),C(n,o,l,0,J.LEFT_JOIN_END,D,P),C(n,o,l,0,J.RIGHT_JOIN_END,D,P)):(P=L(n,o,U),C(n,o,o,0,J.LEFT_CAP_END,U,P),C(n,o,o,0,J.RIGHT_CAP_END,U,P)),k(S,b+I,S,b,I),O=k(S,O-I,S,O,I),this._parameters.wireframe&&this._addWireframeVertices(i,b,O,I)}_addWireframeVertices(e,t,r,i){const s=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=k(a,e,s,n,i);for(let l=0;l<a.length-1;l+=2*i)o(l),o(l+2*i),o(l+1*i),o(l+2*i),o(l+1*i),o(l+3*i)}}function k(e,t,r,i,s){for(let a=0;a<s;a++)r[i++]=e[t++];return i}function W(e,t,r){return V(e,t.get(VertexAttribute.T.POSITION).data,r?r.get(VertexAttribute.T.POSITION):null)}function V(e,t,r){return!!e.isClosed&&(r?r.length>2:t.length>6)}const q=(0,vec3f64.c)(),X=(0,vec3f64.c)(),Y=(0,vec3f64.c)(),Q=(0,vec3f64.c)(),K=(0,vec3f64.c)(),$=(0,screenUtils.J$)(),ee=(0,screenUtils.J$)(),te=(0,vec3f64.c)(),re=(0,vec3f64.c)(),ie=(0,lineSegment.Ue)(),se=(0,lineSegment.Ue)(),ae=(0,vec3f64.c)(),ne=(0,vec3f64.c)(),oe=(0,vec3f64.c)(),le=[(0,screenUtils.J$)(),(0,screenUtils.J$)(),(0,screenUtils.J$)(),(0,screenUtils.J$)()],ce=[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()],he=(0,plane.Ue)(),ue=(0,plane.Ue)(),pe=(0,plane.Ue)(),me=(0,plane.Ue)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>e});var _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js");class e extends _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__.F5{intersect(r,e,i,a,l,o){return(0,_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__.Bw)(r,i,a,l,void 0,o)}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>d,m:()=>A});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),time=__webpack_require__("./node_modules/@arcgis/core/core/time.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js");class AnimationTimer_e{constructor(){this.enabled=!0,this._time=(0,time.HA)(0)}get time(){return this._time}advance({deltaTime:e,fixedTime:i}){return null!=i?this._time!==i&&(this._time=i,!0):(this._time=(0,time.HA)(this._time+e),0!==e)}}var Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),DefaultBufferWriter=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js"),DefaultLayouts=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js"),TriangleMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),PhysicallyBasedRenderingParameters_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"),ReloadableShaderModule=(__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js")),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js"),WaterSurface_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class S extends ShaderTechnique.A{initializeConfiguration(e,o){o.spherical=e.viewingMode===ViewingMode.JY.Global,o.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(e){return new Program.$(e.rctx,S.shader.get().build(this.configuration),DefaultVertexAttributeLocations.i)}_setPipelineState(e){const t=this.configuration,r=e===TransparencyPassType.A.NONE,i=e===TransparencyPassType.A.FrontFace;return(0,renderState.sm)({blending:t.output!==ShaderOutput.H.Normal&&t.output!==ShaderOutput.H.Highlight&&t.output!==ShaderOutput.H.ObjectAndLayerIdColor&&t.transparent?r?OrderIndependentTransparency.wu:(0,OrderIndependentTransparency.j7)(e):null,depthTest:{func:(0,OrderIndependentTransparency.Bh)(e)},depthWrite:r?t.writeDepth?renderState.LZ:null:(0,OrderIndependentTransparency.K5)(e),colorWrite:renderState.BK,polygonOffset:r||i?null:(0,OrderIndependentTransparency.je)(t.enableOffset)})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}S.shader=new ReloadableShaderModule.J(WaterSurface_glsl.W,(()=>__webpack_require__.e(6815).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/WaterSurface.glsl.js"))));class P extends DefaultTechniqueConfiguration.W{constructor(){super(...arguments),this.output=ShaderOutput.H.Color,this.transparencyPassType=TransparencyPassType.A.NONE,this.spherical=!1,this.receiveShadows=!1,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.hasScreenSpaceReflections=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasCloudsReflections=!1,this.objectAndLayerIdColorInstanced=!1,this.isDraped=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:ShaderOutput.H.COUNT})],P.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({count:TransparencyPassType.A.COUNT})],P.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"receiveShadows",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"hasScreenSpaceReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"hasCloudsReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"hasMultipassTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)()],P.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:PhysicallyBasedRenderingParameters_glsl.f7.Water})],P.prototype,"pbrMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!0})],P.prototype,"useCustomDTRExponentForWater",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!0})],P.prototype,"highStepCount",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.o)({constValue:!1})],P.prototype,"useFillLights",void 0);class s extends GLMaterial.Z{_updateShadowState(e){e.shadowMap.enabled!==this._material.parameters.receiveShadows&&this._material.setParameters({receiveShadows:e.shadowMap.enabled})}_updateSSRState(e){e.ssr.enabled!==this._material.parameters.hasScreenSpaceReflections&&this._material.setParameters({hasScreenSpaceReflections:e.ssr.enabled})}_updateCloudsReflectionState(e){const t=null!=e.cloudsFade.data;t!==this._material.parameters.hasCloudsReflections&&this._material.setParameters({hasCloudsReflections:t})}ensureResources(e){return this._techniqueRepository.constructionContext.waterTextureRepository.ensureResources(e)}beginSlot(t){return this._output===ShaderOutput.H.Color&&(this._updateShadowState(t),this._updateSSRState(t),this._updateCloudsReflectionState(t)),this._material.setParameters(this._techniqueRepository.constructionContext.waterTextureRepository.passParameters),this.ensureTechnique(S,t)}}class d extends TriangleMaterial.c{constructor(e){super(e,new A),this._configuration=new P,this.animation=new AnimationTimer_e}getConfiguration(e,t){return this._configuration.output=e,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.receiveShadows=this.parameters.receiveShadows,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasScreenSpaceReflections=this.parameters.hasScreenSpaceReflections,this._configuration.hasCloudsReflections=this.parameters.hasCloudsReflections,this._configuration.isDraped=this.parameters.isDraped,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency.ve,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}update(t){const r=Math.min(t.camera.relativeElevation,t.camera.distance);this.animation.enabled=Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*r<WaterMaterial_T;const a=this.animation.advance(t);return this.setParameters({timeElapsed:(0,time.D9)(this.animation.time)*this.parameters.animationSpeed},!1),this.animation.enabled&&a}requiresSlot(e,t){switch(t){case ShaderOutput.H.Normal:return e===RenderSlot.r.DRAPED_WATER;case ShaderOutput.H.Color:if(this.parameters.isDraped)return e===RenderSlot.r.DRAPED_MATERIAL;break;case ShaderOutput.H.Alpha:break;case ShaderOutput.H.Highlight:case ShaderOutput.H.ObjectAndLayerIdColor:return e===RenderSlot.r.OPAQUE_MATERIAL||e===RenderSlot.r.DRAPED_MATERIAL;default:return!1}let r=RenderSlot.r.OPAQUE_MATERIAL;return this.parameters.transparent&&(r=this.parameters.writeDepth?RenderSlot.r.TRANSPARENT_MATERIAL:RenderSlot.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===r}createGLMaterial(e){return new s(e)}createBufferWriter(){return new DefaultBufferWriter.G((0,has.Z)("enable-feature:objectAndLayerId-rendering")?DefaultLayouts.lV:DefaultLayouts.W1)}}class A extends Material.Mt{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=(0,vec2f64.f)(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=(0,vec4f64.f)(0,0,0,0),this.transparent=!0,this.writeDepth=!0,this.hasSlicePlane=!1,this.isDraped=!1,this.receiveShadows=!0,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1,this.origin=(0,vec3f64.c)(),this.modelTransformation=null}}const WaterMaterial_T=35e3},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dp:()=>n,z5:()=>h});const t={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},o={dash:t.dash,"dash-dot":[...t.dash,...t.dot],dot:t.dot,"long-dash":t["long-dash"],"long-dash-dot":[...t["long-dash"],...t.dot],"long-dash-dot-dot":[...t["long-dash"],...t.dot,...t.dot],none:null,"short-dash":t["short-dash"],"short-dash-dot":[...t["short-dash"],...t["short-dot"]],"short-dash-dot-dot":[...t["short-dash"],...t["short-dot"],...t["short-dot"]],"short-dot":t["short-dot"],solid:null},d=8;function h(t){return{pattern:[t,t],pixelRatio:2}}function n(t){return null!=t&&"style"===t.type?function l(t){return null!=t?function s(t,o){return null==t?t:{pattern:t.slice(),pixelRatio:o}}(o[t],d):null}(t.style):null}},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I9:()=>p,PI:()=>a,i5:()=>s});var p,s,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(t){t[t.Draped=0]="Draped",t[t.Screen=1]="Screen",t[t.World=2]="World",t[t.COUNT=3]="COUNT"}(p||(p={})),function(t){t[t.Center=0]="Center",t[t.Tip=1]="Tip",t[t.COUNT=2]="COUNT"}(s||(s={}));class a extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.Color,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__.A.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.writeDepth=!1,this.space=p.Screen,this.hideOnShortSegments=!1,this.hasCap=!1,this.anchor=s.Center,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}get draped(){return this.space===p.Draped}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.COUNT})],a.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__.A.COUNT})],a.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:p.COUNT})],a.prototype,"space",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hideOnShortSegments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hasCap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:s.COUNT})],a.prototype,"anchor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hasTip",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"hasMultipassTerrain",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],a.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],a.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],a.prototype,"hasSliceTranslatedView",void 0)},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>s,R:()=>r});var r,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(o){o[o.BUTT=0]="BUTT",o[o.SQUARE=1]="SQUARE",o[o.ROUND=2]="ROUND",o[o.COUNT=3]="COUNT"}(r||(r={}));class s extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.Color,this.capType=r.BUTT,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__.A.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleScaleWithLineWidth=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.wireframe=!1,this.objectAndLayerIdColorInstanced=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.H.COUNT})],s.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:r.COUNT})],s.prototype,"capType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_2__.A.COUNT})],s.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"hasPolygonOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"draped",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"stippleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"stippleOffColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"stippleScaleWithLineWidth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"stipplePreferContinuous",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"roundJoins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"applyMarkerOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"falloffEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"innerColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"hasMultipassTerrain",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"wireframe",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],s.prototype,"stippleRequiresClamp",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],s.prototype,"stippleRequiresStretchMeasure",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],s.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)({constValue:!0})],s.prototype,"hasSliceTranslatedView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__.o)()],s.prototype,"objectAndLayerIdColorInstanced",void 0)}}]);
//# sourceMappingURL=1835.24e2b1cc.iframe.bundle.js.map