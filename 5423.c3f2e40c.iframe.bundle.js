"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[5423,5831,9112],{"./node_modules/@arcgis/core/layers/support/fetchService.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>r});var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/support/requestPresets.js");async function r(r,s){const a=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.T)(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.T)(r+"/layers",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||"Feature Layer"===e.type}},"./node_modules/@arcgis/core/layers/support/layersCreator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{populateOperationalLayers:()=>c});var Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),promiseUtils=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js")),lazyLayerLoader=__webpack_require__("./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"),PortalItem=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js");function t(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var portalLayers=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalLayers.js"),styleUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/styleUtils.js");async function c(e,a,y){if(!a)return;const t=[];for(const r of a){const e=d(r,y);"GroupLayer"===r.layerType?t.push(M(e,r,y)):t.push(e)}const i=await(0,promiseUtils.as)(t);for(const r of i)r.value&&e.add(r.value)}const l={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},p={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},S={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},u={ArcGISFeatureLayer:"FeatureLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};async function d(e,r){return async function m(e,r,a){const y=new e;return y.read(r,a.context),"group"===y.type&&g(r)&&await async function A(e,r,y){const t=lazyLayerLoader.T.FeatureLayer,i=await t(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,t)=>{const L=new i;L.read(a,y);const o={...y,ignoreDefaults:!0};return L.read({id:`${e.id}-sublayer-${t}`,visibility:r.visibleLayers?.includes(t)??!0},o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}(y,r,a.context),await(0,styleUtils.y)(y,a.context),y}(await async function T(e,r){const o=r.context,c=f(o);let l=e.layerType||e.type;!l&&r&&r.defaultLayerType&&(l=r.defaultLayerType);const s=c[l];let p=s?lazyLayerLoader.T[s]:lazyLayerLoader.T.UnknownLayer;if(G(e)){const r=o?.portal;if(e.itemId){const t=new PortalItem.default({id:e.itemId,portal:r});await t.load();const i=(await(0,portalLayers.selectLayerClassPath)(t)).className||"UnknownLayer";p=lazyLayerLoader.T[i]}}else"ArcGISFeatureLayer"===l?function featureCollectionUtils_e(e){return t(e,"notes")}(e)||function featureCollectionUtils_r(e){return t(e,"markup")}(e)?p=lazyLayerLoader.T.MapNotesLayer:function n(e){return t(e,"route")}(e)?p=lazyLayerLoader.T.RouteLayer:g(e)&&(p=lazyLayerLoader.T.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?p=lazyLayerLoader.T.WMTSLayer:"WFS"===l&&"2.0.0"!==e.wfsInfo?.version&&(p=lazyLayerLoader.T.UnsupportedLayer);return p()}(e,r),e,r)}function g(e){return"ArcGISFeatureLayer"===e.layerType&&!G(e)&&(e.featureCollection?.layers?.length??0)>1}function G(e){return"Feature Collection"===e.type}function f(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=p;break;case"ground":r=s;break;default:r=l}else switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=u;break;default:r=S}return r}async function M(r,a,y){const t=new Collection.Z,i=c(t,Array.isArray(a.layers)?a.layers:[],y),L=await r;if(await i,"group"===L.type)return L.layers.addMany(t),L}},"./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>a});const a={BingMapsLayer:async()=>(await __webpack_require__.e(1968).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/BingMapsLayer.js"))).default,BuildingSceneLayer:async()=>(await Promise.all([__webpack_require__.e(7324),__webpack_require__.e(6273),__webpack_require__.e(349),__webpack_require__.e(9871)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/BuildingSceneLayer.js"))).default,CSVLayer:async()=>(await __webpack_require__.e(9849).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/CSVLayer.js"))).default,DimensionLayer:async()=>(await __webpack_require__.e(442).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/DimensionLayer.js"))).default,ElevationLayer:async()=>(await __webpack_require__.e(451).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ElevationLayer.js"))).default,FeatureLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default,GeoJSONLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GeoJSONLayer.js"))).default,GeoRSSLayer:async()=>(await __webpack_require__.e(4417).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GeoRSSLayer.js"))).default,GroupLayer:async()=>(await __webpack_require__.e(6753).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GroupLayer.js"))).default,ImageryLayer:async()=>(await Promise.all([__webpack_require__.e(5499),__webpack_require__.e(1434),__webpack_require__.e(6199),__webpack_require__.e(7729)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ImageryLayer.js"))).default,ImageryTileLayer:async()=>(await Promise.all([__webpack_require__.e(5499),__webpack_require__.e(1434),__webpack_require__.e(7639),__webpack_require__.e(6199),__webpack_require__.e(6329)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ImageryTileLayer.js"))).default,IntegratedMeshLayer:async()=>(await Promise.all([__webpack_require__.e(7324),__webpack_require__.e(6479)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/IntegratedMeshLayer.js"))).default,KMLLayer:async()=>(await __webpack_require__.e(693).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/KMLLayer.js"))).default,LineOfSightLayer:async()=>(await __webpack_require__.e(4277).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/LineOfSightLayer.js"))).default,MapImageLayer:async()=>(await Promise.all([__webpack_require__.e(7153),__webpack_require__.e(9420)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MapImageLayer.js"))).default,MapNotesLayer:async()=>(await __webpack_require__.e(849).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MapNotesLayer.js"))).default,MediaLayer:async()=>(await __webpack_require__.e(4130).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MediaLayer.js"))).default,OGCFeatureLayer:async()=>(await __webpack_require__.e(3963).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OGCFeatureLayer.js"))).default,OpenStreetMapLayer:async()=>(await __webpack_require__.e(3206).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OpenStreetMapLayer.js"))).default,OrientedImageryLayer:async()=>(await __webpack_require__.e(3414).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OrientedImageryLayer.js"))).default,PointCloudLayer:async()=>(await __webpack_require__.e(3108).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/PointCloudLayer.js"))).default,RouteLayer:async()=>(await Promise.all([__webpack_require__.e(3970),__webpack_require__.e(5015)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/RouteLayer.js"))).default,SceneLayer:async()=>(await Promise.all([__webpack_require__.e(7324),__webpack_require__.e(6273),__webpack_require__.e(349),__webpack_require__.e(4606)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/SceneLayer.js"))).default,StreamLayer:async()=>(await __webpack_require__.e(5609).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/StreamLayer.js"))).default,SubtypeGroupLayer:async()=>(await __webpack_require__.e(7764).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/SubtypeGroupLayer.js"))).default,TileLayer:async()=>(await Promise.all([__webpack_require__.e(7153),__webpack_require__.e(5369)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/TileLayer.js"))).default,UnknownLayer:async()=>(await __webpack_require__.e(81).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/UnknownLayer.js"))).default,UnsupportedLayer:async()=>(await __webpack_require__.e(4864).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/UnsupportedLayer.js"))).default,VectorTileLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/VectorTileLayer.js"))).default,VoxelLayer:async()=>(await __webpack_require__.e(5519).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/VoxelLayer.js"))).default,WFSLayer:async()=>(await __webpack_require__.e(4420).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WFSLayer.js"))).default,WMSLayer:async()=>(await __webpack_require__.e(1936).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WMSLayer.js"))).default,WMTSLayer:async()=>(await __webpack_require__.e(9306).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WMTSLayer.js"))).default,WebTileLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WebTileLayer.js"))).default}},"./node_modules/@arcgis/core/portal/support/layersLoader.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getFirstLayerOrTableId:()=>I,getNumLayersAndTables:()=>v,getSubtypeGroupLayerIds:()=>j,load:()=>p,preprocessFSItemData:()=>w});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_layers_Layer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"),_layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fetchService.js"),_Portal_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),_PortalItem_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),_jsonContext_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/portal/support/jsonContext.js"),_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalItemUtils.js"),_renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/renderers/support/styleUtils.js"),_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/support/requestPresets.js");async function p(e,t){const r=e.instance.portalItem;if(r&&r.id)return await r.load(t),function c(t){const r=t.instance.portalItem;if(!r?.type||!t.supportedTypes.includes(r.type))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r?.type,expectedType:t.supportedTypes.join(", ")})}(e),async function y(e,t){const r=e.instance,a=r.portalItem;if(!a)return;const{url:n,title:o}=a,s=(0,_jsonContext_js__WEBPACK_IMPORTED_MODULE_6__.h)(a);if("group"===r.type)return r.read({title:o},s),async function d(t,r){let a;const{portalItem:n}=t;if(!n)return;const o=n.type,l=r.layerModuleTypeMap,i=(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__._$)(n,"Oriented Imagery Layer")??!1;switch(o){case"Feature Service":a=i?l.OrientedImageryLayer:l.FeatureLayer;break;case"Stream Service":a=l.StreamLayer;break;case"Scene Service":a=l.SceneLayer;break;case"Feature Collection":a=l.FeatureLayer;break;default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("portal:unsupported-item-type-as-group",`The item type '${o}' is not supported as a 'IGroupLayer'`)}let[u,p]=await Promise.all([a(),h(r)]),c=()=>u;if("Feature Service"===o){if(p=n.url?await w(p,n.url):{},j(p).length){const e=l.SubtypeGroupLayer,t=await e();c=e=>"SubtypeGroupLayer"===e.layerType?t:u}return b(t,c,p,await async function P(e){const{layersJSON:t}=await(0,_layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_3__.V)(e);if(!t)return null;const r=[...t.layers,...t.tables];return e=>r.find((t=>t.id===e.id))}(n.url))}return v(p)>0?b(t,c,p):async function f(e,t){const{portalItem:r}=e;if(!r?.url)return;const a=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_9__.T)(r.url);a&&b(e,t,{layers:a.layers?.map(m),tables:a.tables?.map(m)})}(t,c)}(r,e);n&&r.read({url:n},s);const u=await h(e,t);return u&&r.read(u,s),r.resourceReferences={portalItem:a,paths:s.readResourcePaths??[]},"subtype-group"!==r.type&&r.read({title:o},s),(0,_renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.y)(r,s)}(e,t)}function m(e){return{id:e.id,name:e.name}}function b(e,t,r,a){let n=r.layers||[];const o=r.tables||[];if("Feature Collection"===e.portalItem?.type&&(n.forEach((e=>{"Table"===e?.layerDefinition?.type&&o.push(e)})),n=n.filter((e=>"Table"!==e?.layerDefinition?.type))),"coverage"in r){const t=function T(a){const{coverage:n}=a;if(!n)return null;const l=new URL(n);if(n.toLowerCase().includes("item.html")){const e=l.searchParams.get("id"),r=l.origin;return _layers_Layer_js__WEBPACK_IMPORTED_MODULE_1__.Z.fromPortalItem({portalItem:new _PortalItem_js__WEBPACK_IMPORTED_MODULE_5__.default({id:e,url:r})})}if((0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__.B5)(n))return _layers_Layer_js__WEBPACK_IMPORTED_MODULE_1__.Z.fromArcGISServerUrl({url:n});throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(r);t&&e.add(t)}n.reverse().forEach((n=>{const o=g(e,t(n),r,n,a?.(n));e.add(o)})),o.reverse().forEach((n=>{const o=g(e,t(n),r,n,a?.(n));e.tables.add(o)}))}function g(e,t,r,a,o){const l=e.portalItem,s=new t({portalItem:l.clone(),layerId:a.id});if("sourceJSON"in s&&(s.sourceJSON=o),"subtype-group"!==s.type&&(s.sublayerTitleMode="service-name"),"Feature Collection"===l.type){const e={origin:"portal-item",portal:l.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_4__.Z.getDefault()};s.read(a,e);const t=r.showLegend;null!=t&&s.read({showLegend:t},e)}return s}async function h(e,t){if(!1===e.supportsData)return;const r=e.instance,a=r.portalItem;if(!a)return;let n=null;try{n=await a.fetchData("json",t)}catch(o){}if(function S(e){return"stream"!==e.type&&"oriented-imagery"!==e.type&&"layerId"in e}(r)){let e=null,t=!0;if(n&&v(n)>0){if(null==r.layerId){const e=j(n);r.layerId="subtype-group"===r.type?e?.[0]:I(n)}e=function L(e,t){const{layerId:r}=t,a=e.layers?.find((e=>e.id===r))||e.tables?.find((e=>e.id===r));return a&&function F(e,t){return!("feature"===t.type&&"layerType"in e&&"SubtypeGroupLayer"===e.layerType||"subtype-group"===t.type&&!("layerType"in e))}(a,t)?a:null}(n,r),e&&(1===v(n)&&(t=!1),null!=n.showLegend&&(e.showLegend=n.showLegend))}return t&&"service-name"!==r.sublayerTitleMode&&(r.sublayerTitleMode="item-title-and-service-name"),e}return n}async function w(e,t){if(null==e?.layers||null==e?.tables){const r=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_9__.T)(t);(e=e||{}).layers=e.layers||r?.layers,e.tables=e.tables||r?.tables}return e}function I(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function v(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function j(e){const t=[];return e?.layers?.forEach((e=>{"SubtypeGroupLayer"===e.layerType&&t.push(e.id)})),t}},"./node_modules/@arcgis/core/portal/support/portalLayers.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fromItem:()=>l,selectLayerClassPath:()=>m});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js"),_layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"),_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/portal/support/layersLoader.js"),_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalItemUtils.js"),_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/support/requestPresets.js");async function l(e){!e.portalItem||e.portalItem instanceof _PortalItem_js__WEBPACK_IMPORTED_MODULE_3__.default||(e={...e,portalItem:new _PortalItem_js__WEBPACK_IMPORTED_MODULE_3__.default(e.portalItem)});const r=await async function y(e){return await e.load(),async function p(e){const r=_layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_2__.T[e.className];return{constructor:await r(),properties:e.properties}}(await m(e))}(e.portalItem);return new(0,r.constructor)({portalItem:e.portalItem,...r.properties})}async function m(r){switch(r.type){case"Map Service":return async function f(e){return await async function b(e){return(await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__.T)(e.url)).tileInfo}(e)?{className:"TileLayer"}:{className:"MapImageLayer"}}(r);case"Feature Service":return async function L(e){if((0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__._$)(e,"Oriented Imagery Layer"))return async function F(e){await e.load();const r=await e.fetchData();return r.coverage?{className:"GroupLayer"}:{className:"OrientedImageryLayer",properties:r}}(e);const r=await C(e);if("object"==typeof r){const e={};return null!=r.id&&(e.layerId=r.id),{className:r.className||"FeatureLayer",properties:e}}return{className:"GroupLayer"}}(r);case"Feature Collection":return async function w(e){await e.load();const r=(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__._$)(e,"Map Notes"),a=(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__._$)(e,"Markup");if(r||a)return{className:"MapNotesLayer"};if((0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__._$)(e,"Route Layer"))return{className:"RouteLayer"};const t=await e.fetchData();return 1===(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.getNumLayersAndTables)(t)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(r);case"Scene Service":return async function N(e){const a=await C(e);if("object"==typeof a){const t={};let s;if(null!=a.id?(t.layerId=a.id,s=`${e.url}/layers/${a.id}`):s=e.url,e.typeKeywords?.length)for(const a of Object.keys(_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_1__.fb))if(e.typeKeywords.includes(a))return{className:_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_1__.fb[a]};const n=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__.T)(s);return{className:_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_1__.fb[n?.layerType]||"SceneLayer",properties:t}}if(!1===a)return"Voxel"===(await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__.T)(e.url))?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"};return{className:"GroupLayer"}}(r);case"Image Service":return async function d(e){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(r.includes("tiled imagery"))return{className:"ImageryTileLayer"};const a=(await e.fetchData())?.layerType;if("ArcGISTiledImageServiceLayer"===a)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===a)return{className:"ImageryLayer"};const t=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__.T)(e.url),s=t.cacheType?.toLowerCase(),n=t.capabilities?.toLowerCase().includes("tilesonly");return"map"===s||n?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(r);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:r.type})}}async function C(e){const r=e.url;if(!r||r.match(/\/\d+$/))return{};await e.load();const a=await e.fetchData();if("Feature Service"===e.type){const e=V(await(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.preprocessFSItemData)(a,r));if("object"==typeof e){const r=(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.getSubtypeGroupLayerIds)(a);e.className=null!=e.id&&r.includes(e.id)?"SubtypeGroupLayer":"FeatureLayer"}return e}return(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.getNumLayersAndTables)(a)>0?V(a):V(await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_6__.T)(r))}function V(e){return 1===(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.getNumLayersAndTables)(e)&&{id:(0,_layersLoader_js__WEBPACK_IMPORTED_MODULE_4__.getFirstLayerOrTableId)(e)}}},"./node_modules/@arcgis/core/support/requestPresets.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>t});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js");async function t(t,o){const{data:r}=await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.default)(t,{responseType:"json",query:{f:"json",...o?.customParameters,token:o?.apiKey}});return r}}}]);