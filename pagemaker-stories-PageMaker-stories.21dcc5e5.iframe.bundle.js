/*! For license information please see pagemaker-stories-PageMaker-stories.21dcc5e5.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[7751],{"./packages/pagemaker/stories/PageMaker.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>PageMaker_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist=__webpack_require__("./packages/core/dist/index.js");const ar_namespaceObject=JSON.parse('{"label":{"save":"يحفظ","cancel":"يلغي","edit":"يحرر","preview":"معاينة","grid":"شبكة","image":"صورة","pageBreak":"فاصل صفحة","heading":"عنوان","paragraph":"فقرة","divider":"مقسم","default":"تقصير","artifacts":"الآثار","widgets":"الحاجيات","config":"التكوين","addNew":"إضافة عنصر واجهة مستخدم جديد","noWidgets":"لا توجد أدوات متاحة","drag":"اسحب عنصر واجهة مستخدم من الشريط الجانبي"},"config":{"title":"عنوان","color":"لون","info":"تلميح معلومات","icon":"فئة الأيقونة","size":"حجم الخط","text":"نص","width":"مقاس","colSpan":"العمود سبان","height":"ارتفاع الصف","border":"يحدها","expand":"قابل للتوسيع","aspect":"ابعاد متزنة","align":"محاذاة النص","style":"نمط النص","applyBg":"خلفية النص"}}'),en_namespaceObject=JSON.parse('{"label":{"save":"Save","cancel":"Cancel","edit":"Edit","preview":"Preview","grid":"Grid","image":"Image","pageBreak":"Page Break","heading":"Heading","paragraph":"Paragraph","divider":"Divider","default":"Default","artifacts":"Artifacts","widgets":"Widgets","config":"Config","addNew":"Add New Widget","noWidgets":"No widgets available","drag":"Drag a widget from the sidebar"},"config":{"title":"Title","color":"Color","info":"Info Tooltip","icon":"Icon class","size":"Text size","text":"Text","width":"Size","colSpan":"Col span","height":"Row Height","border":"Bordered","expand":"Expandable","aspect":"Aspect Ratio","align":"Text align","style":"Text style","applyBg":"Text background"}}');(0,dist.a3)("pagemaker",{en:en_namespaceObject,ar:ar_namespaceObject});var EnumTypes,EnumAlign,EnumHeight,react=__webpack_require__("./node_modules/react/index.js"),utilities_dist=__webpack_require__("./packages/utilities/dist/index.js");!function(EnumTypes){EnumTypes.PAGE="page",EnumTypes.GRID="grid",EnumTypes.BREAK="break",EnumTypes.DIVIDER="divider",EnumTypes.VDIVIDER="vdivider",EnumTypes.HEADING="heading",EnumTypes.IMAGE="image",EnumTypes.PARAGRAPH="paragraph",EnumTypes.TILE="tile"}(EnumTypes||(EnumTypes={})),function(EnumAlign){EnumAlign.CENTER="center",EnumAlign.START="start",EnumAlign.END="end",EnumAlign.JUSTIFY="justify"}(EnumAlign||(EnumAlign={})),function(EnumHeight){EnumHeight.AUTO="auto",EnumHeight.SMALL="small",EnumHeight.MEDIUM="medium",EnumHeight.LARGE="large"}(EnumHeight||(EnumHeight={}));const ghost=document.createElement("div");ghost.classList.add("page-maker__ghost"),ghost.style.top="-100%",ghost.reset=()=>(ghost.style.top="-100%",ghost.style.left="unset",ghost.style.width="unset",ghost.style.height="unset",ghost.dataset.id=void 0,ghost);const generateId=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),getNodeConfig=dragging=>{let newConfig={...dragging.item};return dragging.config&&(newConfig={...dragging.config,isReadOnly:!0,id:generateId()}),(0,utilities_dist.isEmpty)(newConfig)&&(newConfig={type:dragging.type,title:dragging.title,id:generateId(),colSpan:12},dragging.type===EnumTypes.TILE&&(newConfig={...newConfig,icon:dragging.icon,title:dragging.title,colSpan:3,bordered:!0,expandable:!0,widgetId:dragging.widgetId}),dragging.type===EnumTypes.VDIVIDER&&(newConfig={...newConfig,colSpan:1}),dragging.type===EnumTypes.DIVIDER&&(newConfig={...newConfig,align:"center"}),newConfig.type===EnumTypes.GRID&&(newConfig={...newConfig,children:[],colSpan:3}),newConfig.type===EnumTypes.IMAGE&&(newConfig={...newConfig,fit:"contain",aspect:"4 / 3",colSpan:3})),newConfig},getNearestGrid=target=>target.closest(".page-maker__grid"),calculateGhostPosition=(clientX,grid,neighbor)=>{const gridRect=grid.getBoundingClientRect(),rect=neighbor.getBoundingClientRect(),isBefore=clientX<rect.left+rect.width/2,edge=isBefore?rect.left<=gridRect.left:rect.right>=gridRect.right;ghost.dataset.id=neighbor.dataset.id,ghost.dataset.pos=isBefore?"0":"1",edge?(ghost.style.top=isBefore?rect.top-8+"px":rect.bottom+"px",ghost.style.left=gridRect.left+"px",ghost.style.width=gridRect.width+"px"):(ghost.style.top=rect.top+"px",ghost.style.height=rect.height+"px",ghost.style.left=isBefore?rect.left-8+"px":rect.right+"px")},onDragOver=(evt,dragging)=>{evt.preventDefault();let target=evt.target;if(target.classList.contains("page-maker__page")&&(target=target.querySelector(".page-maker__grid")),target!==ghost){let grid=getNearestGrid(target);dragging.type===EnumTypes.GRID&&grid.classList.contains("inner")&&(grid=getNearestGrid(grid.parentElement));const node=target!==grid?(target=>target.closest(".page-maker__item"))(target):grid;ghost.reset(),((evt,grid,neighbor)=>{const gridRect=grid.getBoundingClientRect();if(neighbor&&neighbor!==grid)calculateGhostPosition(evt.clientX,grid,neighbor);else{const neighbor=[...grid.querySelectorAll(":scope > .page-maker__item")].reverse().find((child=>{const{top,bottom}=child.getBoundingClientRect();return evt.clientY>=top&&evt.clientY<=bottom}));if(neighbor)calculateGhostPosition(evt.clientX,grid,neighbor);else{const isInner=grid.classList.contains("inner");ghost.dataset.id="",ghost.dataset.grid=grid.dataset.id??"",ghost.style.top=(isInner?gridRect.top:gridRect.bottom)+"px",ghost.style.left=gridRect.left+"px",ghost.style.width=gridRect.width+"px"}}})(evt,grid,node)}},onDragLeave=evt=>(ghost.reset(),null!=evt.relatedTarget&&evt.relatedTarget.dataset.type===EnumTypes.PAGE),findDeep=(obj,id)=>{const find=obj.find((o=>o.id===id));if(null!=find)return{list:obj,item:find,index:obj.indexOf(find)};for(let i=0;i<obj.length;i++)if("children"in obj[i]&&Array.isArray(obj[i].children)){const _inner=findDeep(obj[i].children,id);if(null!=_inner)return _inner}},removeDeep=(obj,id)=>{for(let i=0;i<obj.length;i++){if(obj[i].id===id)return obj.filter((o=>o.id!==id));"children"in obj[i]&&Array.isArray(obj[i].children)&&(obj[i]={...obj[i],children:removeDeep(obj[i].children,id)})}return[...obj]},PageContext=(0,react.createContext)({}),usePageContext=()=>(0,react.useContext)(PageContext),ContextProvider=({children,pageRef,onEdit,onAdd,renderWidget,onChange,widgets=[],artifacts=[],isEditing:_isEditing=!1,config:_config})=>{const[dragging,setDragging]=(0,react.useState)(),[selected,setSelected]=(0,react.useState)(),[isEditing,setIsEditing]=(0,react.useState)(_isEditing),[config,setConfig]=(0,react.useState)(_config),refPageEl=(0,react.useRef)(null);(0,react.useImperativeHandle)(pageRef,(()=>({getRaw:async()=>{if(refPageEl.current){const el=refPageEl.current,currentEditing=!!isEditing;return await new Promise((resolve=>{setIsEditing(!1),setTimeout((()=>{const ret=(el=>{const defaultStylesByTagName={},noStyleTags={BASE:!0,HEAD:!0,HTML:!0,META:!0,NOFRAME:!0,NOSCRIPT:!0,PARAM:!0,SCRIPT:!0,STYLE:!0,TITLE:!0},tagNames=["A","P","DIV","SPAN","BR","PRE","H1","H2","H3","H4","H5","H6","HR","IMG","OL","UL","LI","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","EM","STRONG"],computeDefaultStyleByTagName=tagName=>{const defaultStyle={},element=document.body.appendChild(document.createElement(tagName)),computedStyle=getComputedStyle(element);for(let i=0;i<computedStyle.length;i++)defaultStyle[computedStyle[i]]=computedStyle[computedStyle[i]];return document.body.removeChild(element),defaultStyle};if(el.nodeType!==Node.ELEMENT_NODE)throw new TypeError;const cssTexts=[],elements=el.querySelectorAll("*");for(let i=0;i<elements.length;i++){const e=elements[i];if(!noStyleTags[e.tagName]){const computedStyle=getComputedStyle(e),defaultStyle=(defaultStylesByTagName[tagName=(tagName=e.tagName).toUpperCase()]||(defaultStylesByTagName[tagName]=computeDefaultStyleByTagName(tagName)),defaultStylesByTagName[tagName]);cssTexts[i]=e.style.cssText;for(let ii=0;ii<computedStyle.length;ii++){const cssPropName=computedStyle[ii];computedStyle[cssPropName]!==defaultStyle[cssPropName]&&(e.style[cssPropName]=computedStyle[cssPropName])}}}var tagName;for(let i=0;i<tagNames.length;i++)noStyleTags[tagNames[i]]||(defaultStylesByTagName[tagNames[i]]=computeDefaultStyleByTagName(tagNames[i]));const result=el.outerHTML;for(let i=0;i<elements.length;i++)elements[i].style.cssText=cssTexts[i];return result})(el);setIsEditing(currentEditing),resolve(ret)}),100)}))}return await Promise.resolve("")}})),[isEditing]),(0,react.useEffect)((()=>{setConfig(_config)}),[_config]),(0,react.useEffect)((()=>{setIsEditing(_isEditing)}),[_isEditing]);const updateConfig=(id,key,value)=>{const _o=findDeep(config,id)?.item;null!=_o&&(_o[key]=value,setSelected({..._o}),setConfig([...config]),onChange?.([...config]))};return(0,jsx_runtime.jsx)(PageContext.Provider,{value:{selected,isEditing,dragging,artifacts,setDragging,editConfig:id=>{setSelected(id?findDeep(config,id)?.item:void 0)},removeConfig:id=>{const newConfig=[...removeDeep(config,id)];setConfig(newConfig),setSelected(void 0),onChange?.(newConfig)},updateConfig,addItem:opt=>{if(null!=opt){const{id,grid,item,pos}=opt;let newConfig=[...config];if(item.id!==id){if(item.id&&(newConfig=removeDeep(newConfig,item.id)),id){const found=findDeep(newConfig,id);found&&found.list.splice(found.index+(pos??0),0,item)}else if(grid){const found=findDeep(newConfig,grid);found&&found.item.children.push(item)}else newConfig.push(item);setConfig([...newConfig]),onChange?.(newConfig)}setDragging(void 0)}},renderWidget,addWidget:colId=>{onAdd?.((widget=>{const newTile=getNodeConfig({widgetId:widget.id,title:widget.title,type:EnumTypes.TILE});updateConfig(colId,"children",[newTile]),setSelected(newTile)}))},editWidget:widgetId=>{onEdit?.(widgetId)},findWidget:widgetId=>widgets.find((({id})=>id===widgetId)),widgets,config,refPageEl},children})};ContextProvider.displayName="ContextProvider";try{ContextProvider.displayName="ContextProvider",ContextProvider.__docgenInfo={description:"",displayName:"ContextProvider",props:{isEditing:{defaultValue:null,description:"Edit mode",name:"isEditing",required:!1,type:{name:"boolean"}},config:{defaultValue:null,description:"Page config",name:"config",required:!0,type:{name:"PageConfig"}},widgets:{defaultValue:{value:"[]"},description:"Widget list",name:"widgets",required:!1,type:{name:"IWidgetObject[]"}},artifacts:{defaultValue:{value:"[]"},description:"",name:"artifacts",required:!1,type:{name:"IArtifactObject[]"}},pageRef:{defaultValue:null,description:"",name:"pageRef",required:!1,type:{name:"RefObject<{ getRaw: () => Promise<string>; }>"}},renderWidget:{defaultValue:null,description:"Render widget tile\n@param id",name:"renderWidget",required:!0,type:{name:"(widgetId: string) => false | Element"}},onAdd:{defaultValue:null,description:"Add new widget",name:"onAdd",required:!1,type:{name:"((callback: (widget: IWidgetObject) => void) => void)"}},onEdit:{defaultValue:null,description:"Edit widget",name:"onEdit",required:!1,type:{name:"((widgetId: string) => void)"}},onChange:{defaultValue:null,description:"Config changed",name:"onChange",required:!1,type:{name:"((config: PageConfig) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/context/index.tsx#ContextProvider"]={docgenInfo:ContextProvider.__docgenInfo,name:"ContextProvider",path:"packages/pagemaker/src/components/context/index.tsx#ContextProvider"})}catch(__react_docgen_typescript_loader_error){}var appIcons=__webpack_require__("./packages/core/dist/types/appIcons.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const iconDelete="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z",iconAlignStart="M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z",iconAlignEnd="M3,3H21V5H3V3M9,7H21V9H9V7M3,11H21V13H3V11M9,15H21V17H9V15M3,19H21V21H3V19Z",iconAlignCenter="M3,3H21V5H3V3M7,7H17V9H7V7M3,11H21V13H3V11M7,15H17V17H7V15M3,19H21V21H3V19Z";var form_dist=__webpack_require__("./packages/form/dist/index.js");const DividerConfig=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext(),updateField=(key,value)=>{selected&&updateConfig(selected.id,key,value)};return selected?(0,jsx_runtime.jsxs)("div",{className:"page-maker__aside--form",children:[(0,jsx_runtime.jsx)(form_dist.z.Slider,{label:t("config.width"),min:1,max:16,showValue:!0,value:selected.width??1,onSlide:value=>updateField("width",value),onChange:value=>updateField("width",value)}),(0,jsx_runtime.jsx)(form_dist.z.Color,{showInput:!0,allowClear:!0,label:t("config.color"),value:selected.color,onChange:c=>updateField("color",c)}),!!selected.text&&(0,jsx_runtime.jsx)(form_dist.z.Switch,{label:t("config.applyBg"),isChecked:selected.applyBg,onChange:value=>updateField("applyBg",value)}),(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.text"),value:selected.text,allowClear:!0,onChange:value=>updateField("text",value)}),!!selected.text&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.icon"),value:selected.icon,onChange:value=>updateField("iconCls",value),children:(0,jsx_runtime.jsx)(form_dist.z.Addon,{icon:selected.icon})}),(0,jsx_runtime.jsx)(form_dist.z.Slider,{label:t("config.size"),min:.75,max:4,step:.25,showValue:!0,value:selected.size??1,onSlide:value=>updateField("size",value),onChange:value=>updateField("size",value)}),(0,jsx_runtime.jsxs)(form_dist.z.Options,{name:"align",label:t("config.align"),value:selected.align,className:"align-options",onChange:value=>updateField("align",value),children:[(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignStart,value:"start"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignCenter,value:"center"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignEnd,value:"end"})]})]})]}):null}));DividerConfig.displayName="AxPageMaker.Config";try{DividerConfig.displayName="AxPageMaker.Config",DividerConfig.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/config/DividerConfig.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/config/DividerConfig.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}const HeadingConfig=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext(),updateField=(key,value)=>{selected&&updateConfig(selected.id,key,value)};return selected?(0,jsx_runtime.jsxs)("div",{className:"page-maker__aside--form",children:[(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.text"),value:selected.text,onChange:value=>updateField("text",value)}),(0,jsx_runtime.jsx)(form_dist.z.Color,{showInput:!0,allowClear:!0,label:t("config.color"),value:selected.color,onChange:c=>updateField("color",c)}),(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.icon"),value:selected.icon,onChange:value=>updateField("icon",value),children:(0,jsx_runtime.jsx)(form_dist.z.Addon,{icon:selected.icon})}),(0,jsx_runtime.jsx)(form_dist.z.Slider,{label:t("config.size"),min:.75,max:4,step:.25,showValue:!0,value:selected.size??1,onSlide:value=>updateField("size",value),onChange:value=>updateField("size",value)}),(0,jsx_runtime.jsxs)(form_dist.z.Options,{label:t("config.style"),className:"align-options",children:[(0,jsx_runtime.jsx)(form_dist.z.Checkbox,{icon:"M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z",isChecked:selected.bold,onChange:value=>updateField("bold",value)}),(0,jsx_runtime.jsx)(form_dist.z.Checkbox,{icon:"M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z",isChecked:selected.italic,onChange:value=>updateField("italic",value)}),(0,jsx_runtime.jsx)(form_dist.z.Checkbox,{icon:"M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z",isChecked:selected.underline,onChange:value=>updateField("underline",value)})]}),(0,jsx_runtime.jsxs)(form_dist.z.Options,{name:"align",label:t("config.align"),value:selected.align??"start",className:"align-options",onChange:value=>updateField("align",value),children:[(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignStart,value:"start"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignCenter,value:"center"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{icon:iconAlignEnd,value:"end"})]})]}):null}));HeadingConfig.displayName="AxPageMaker.Config";try{HeadingConfig.displayName="AxPageMaker.Config",HeadingConfig.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/config/HeadingConfig.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/config/HeadingConfig.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}const ImageConfig=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext(),updateField=(key,value)=>{selected&&updateConfig(selected.id,key,value)};return selected?(0,jsx_runtime.jsxs)("div",{className:"page-maker__aside--form",children:[(0,jsx_runtime.jsx)(form_dist.z.Textarea,{label:t("config.src"),value:selected.src,rows:5,onChange:value=>updateField("src",value)}),(0,jsx_runtime.jsxs)(form_dist.z.Options,{name:"fit",className:"align-options",label:t("config.fit"),value:selected.fit??"contain",onChange:value=>updateField("fit",value),children:[(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"contain",label:"Contain"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"cover",label:"Cover"})]})]}):null}));ImageConfig.displayName="AxPageMaker.Config";try{ImageConfig.displayName="AxPageMaker.Config",ImageConfig.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/config/ImageConfig.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/config/ImageConfig.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}const ParagraphConfig=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext();return selected?(0,jsx_runtime.jsx)("div",{className:"page-maker__aside--form",children:(0,jsx_runtime.jsxs)(form_dist.z.Options,{name:"height",label:t("config.height"),value:selected.height??"auto",onChange:value=>((key,value)=>{selected&&updateConfig(selected.id,key,value)})("height",value),children:[(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"auto",label:"Auto"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"small",label:"Small"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"medium",label:"Medium"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"large",label:"Large"})]})}):null}));ParagraphConfig.displayName="AxPageMaker.Config";try{ParagraphConfig.displayName="AxPageMaker.Config",ParagraphConfig.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/config/ParagraphConfig.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/config/ParagraphConfig.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}const TileConfig=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext(),updateField=(key,value)=>{selected&&updateConfig(selected.id,key,value)};return selected?(0,jsx_runtime.jsxs)("div",{className:"page-maker__aside--form",children:[(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.title"),value:selected.title,onChange:value=>updateField("title",value)}),(0,jsx_runtime.jsx)(form_dist.z.Color,{showInput:!0,allowClear:!0,label:t("config.headBg"),value:selected.bg,defaultColor:"#00000000",onChange:c=>updateField("bg",c)}),(0,jsx_runtime.jsx)(form_dist.z.Color,{showInput:!0,allowClear:!0,label:t("config.color"),value:selected.color,onChange:c=>updateField("color",c)}),(0,jsx_runtime.jsx)(form_dist.z.Text,{label:t("config.icon"),value:selected.icon,onChange:value=>updateField("icon",value),children:(0,jsx_runtime.jsx)(form_dist.z.Addon,{icon:selected.icon})}),(0,jsx_runtime.jsx)(form_dist.z.Textarea,{label:t("config.info"),value:selected.info,rows:12,onChange:value=>updateField("info",value)})]}):null}));TileConfig.displayName="AxPageMaker.Config";try{TileConfig.displayName="AxPageMaker.Config",TileConfig.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/config/TileConfig.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/config/TileConfig.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}const Config=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,updateConfig}=usePageContext(),form=(0,react.useMemo)((()=>{switch(selected?.type){case EnumTypes.DIVIDER:return(0,jsx_runtime.jsx)(DividerConfig,{});case EnumTypes.HEADING:return(0,jsx_runtime.jsx)(HeadingConfig,{});case EnumTypes.PARAGRAPH:return(0,jsx_runtime.jsx)(ParagraphConfig,{});case EnumTypes.IMAGE:return(0,jsx_runtime.jsx)(ImageConfig,{});case EnumTypes.TILE:return(0,jsx_runtime.jsx)(TileConfig,{});default:return null}}),[selected]);return(0,jsx_runtime.jsxs)("div",{className:"page-maker__aside--form",children:[selected&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[![EnumTypes.DIVIDER,EnumTypes.VDIVIDER,EnumTypes.BREAK].includes(selected.type)&&(0,jsx_runtime.jsx)(form_dist.z.Slider,{label:t("config.colSpan"),min:1,max:12,showValue:!0,value:selected.colSpan,onSlide:value=>updateConfig(selected.id,"colSpan",value),onChange:value=>updateConfig(selected.id,"colSpan",value)}),[EnumTypes.IMAGE,EnumTypes.TILE].includes(selected.type)&&(0,jsx_runtime.jsxs)(form_dist.z.Options,{name:"aspect",className:"align-options",label:t("config.aspect"),value:selected.aspect??"0",onChange:value=>updateConfig(selected.id,"aspect",value),children:[(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"0",label:"None"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"1 / 1",label:"1:1"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"4 / 3",label:"4:3"}),(0,jsx_runtime.jsx)(form_dist.z.Radio,{value:"16 / 9",label:"16:9"})]})]}),form]})}));Config.displayName="AxPageMaker.Config";try{Config.displayName="AxPageMaker.Config",Config.__docgenInfo={description:"",displayName:"AxPageMaker.Config",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Config.tsx#AxPageMaker.Config"]={docgenInfo:AxPageMaker.Config.__docgenInfo,name:"AxPageMaker.Config",path:"packages/pagemaker/src/components/widgets/Config.tsx#AxPageMaker.Config"})}catch(__react_docgen_typescript_loader_error){}var data_dist=__webpack_require__("./packages/data/dist/index.js");const makeTreeNode=(id,icon,label,onDrag)=>({id,icon,label,isLeaf:!0,labelClassName:"text-slate-700 dark:text-slate-200",props:{draggable:!0,onDragStart:onDrag}}),WidgetList=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{widgets,artifacts,setDragging}=usePageContext(),[list,setList]=(0,react.useState)([]);return(0,react.useEffect)((()=>{const treeList=[{id:"default",label:t("label.default"),isLeaf:!1,isOpen:!0,labelClassName:"font-medium",children:[makeTreeNode(EnumTypes.HEADING,"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z",t("label.heading"),(()=>setDragging({type:EnumTypes.HEADING}))),makeTreeNode(EnumTypes.PARAGRAPH,"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",t("label.paragraph"),(()=>setDragging({type:EnumTypes.PARAGRAPH}))),makeTreeNode(EnumTypes.IMAGE,"M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z",t("label.image"),(()=>setDragging({type:EnumTypes.IMAGE}))),makeTreeNode(EnumTypes.DIVIDER,"M22 2V4H2V2H22M7 10.5V13.5H17V10.5H7M2 20V22H22V20H2Z",t("label.divider"),(()=>setDragging({type:EnumTypes.DIVIDER}))),makeTreeNode(EnumTypes.VDIVIDER,"M4 22H2V2H4V22M22 2H20V22H22V2M13.5 7H10.5V17H13.5V7Z",t("label.divider"),(()=>setDragging({type:EnumTypes.VDIVIDER}))),makeTreeNode(EnumTypes.GRID,"M3 11H11V3H3M5 5H9V9H5M13 21H21V13H13M15 15H19V19H15M3 21H11V13H3M5 15H9V19H5M13 3V11H21V3M19 9H15V5H19Z",t("label.grid"),(()=>setDragging({type:EnumTypes.GRID})))]}];if(artifacts.length>0&&treeList.push({id:"artifacts",label:t("label.artifacts"),isLeaf:!1,labelClassName:"font-medium",children:artifacts.map((({id,title,config})=>makeTreeNode(id,"",title,(()=>setDragging({config,title,type:config.type})))))}),widgets.length>0){const grouped=(0,utilities_dist.groupBy)(widgets,"group",t("label.widgets"));Object.entries(grouped).forEach((([group,items])=>{treeList.push({id:group,label:group,isLeaf:!1,labelClassName:"font-medium",children:items.map((({id,group,...item})=>makeTreeNode(id,item.icon??"M16.7 4.5L19.5 7.3L16.7 10.1L13.9 7.3L16.7 4.5M9 5V9H5V5H9M19 15V19H15V15H19M16.7 1.7L11 7.3L16.7 13H13V21H21V13H16.7L22.3 7.3L16.7 1.7M11 3H3V11H11V3M9 15V19H5V15H9M11 13H3V21H11V13Z",item.title,(()=>setDragging({type:EnumTypes.TILE,widgetId:id,...item})))))})}))}setList(treeList)}),[widgets]),(0,jsx_runtime.jsx)(data_dist.XA,{data:list,isSearchable:!0,isSortable:!1,isSelectable:!1})}));WidgetList.displayName="AxPageMaker.WidgetList";try{WidgetList.displayName="AxPageMaker.WidgetList",WidgetList.__docgenInfo={description:"",displayName:"AxPageMaker.WidgetList",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/WidgetList.tsx#AxPageMaker.WidgetList"]={docgenInfo:AxPageMaker.WidgetList.__docgenInfo,name:"AxPageMaker.WidgetList",path:"packages/pagemaker/src/components/widgets/WidgetList.tsx#AxPageMaker.WidgetList"})}catch(__react_docgen_typescript_loader_error){}const Aside=(0,react.memo)((()=>{const{t}=(0,es.$G)("pagemaker"),{selected,editConfig,removeConfig}=usePageContext();return(0,jsx_runtime.jsx)(dist.dj,{width:"18rem",align:"end",className:"page-maker__aside",children:(0,jsx_runtime.jsxs)(dist.VE.Group,{children:[selected&&(0,jsx_runtime.jsxs)(dist.VE,{children:[(0,jsx_runtime.jsxs)("div",{className:"ax-header",children:[(0,jsx_runtime.jsx)(dist.M,{children:t("label.config")}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",color:"danger",className:"flush",icon:iconDelete,stopPropagation:!0,onClick:()=>selected&&removeConfig(selected.id)}),(0,jsx_runtime.jsx)(dist.qm,{vertical:!0,size:"sm"}),(0,jsx_runtime.jsx)(dist.oG,{rtlFlip:!0,variant:"link",className:"toggle-close","aria-label":"close",stopPropagation:!0,icon:appIcons.U.iconClose,onClick:()=>editConfig(void 0)})]}),(0,jsx_runtime.jsx)(dist.aW,{children:(0,jsx_runtime.jsx)(Config,{})})]}),(0,jsx_runtime.jsxs)(dist.VE,{panelId:"widgets",className:"!flex-1",children:[(0,jsx_runtime.jsx)(dist.Q6,{children:(0,jsx_runtime.jsx)(dist.M,{children:t("label.widgets")})}),(0,jsx_runtime.jsx)(WidgetList,{})]})]})})}));Aside.displayName="AxPageMaker.Aside";try{Aside.displayName="AxPageMaker.Aside",Aside.__docgenInfo={description:"",displayName:"AxPageMaker.Aside",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Aside.tsx#AxPageMaker.Aside"]={docgenInfo:AxPageMaker.Aside.__docgenInfo,name:"AxPageMaker.Aside",path:"packages/pagemaker/src/components/widgets/Aside.tsx#AxPageMaker.Aside"})}catch(__react_docgen_typescript_loader_error){}const EditHead=(0,react.memo)((({title,isLocked,onRemove,onDragStart})=>(0,jsx_runtime.jsxs)("div",{className:"page-maker__head",ref:el=>el&&(el.dataset.top=el?.parentElement&&el.parentElement?.offsetTop<32?"true":"false"),draggable:!0,onDragStart,children:[(0,jsx_runtime.jsx)(dist.Ng,{icon:"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z"}),(0,jsx_runtime.jsx)("small",{children:title}),!isLocked&&(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",color:"danger",className:"flush",icon:iconDelete,stopPropagation:!0,onClick:onRemove})]})));EditHead.displayName="AxPageMaker.EditHead";try{EditHead.displayName="AxPageMaker.EditHead",EditHead.__docgenInfo={description:"",displayName:"AxPageMaker.EditHead",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => void"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!0,type:{name:"DragEventHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/EditHead.tsx#AxPageMaker.EditHead"]={docgenInfo:AxPageMaker.EditHead.__docgenInfo,name:"AxPageMaker.EditHead",path:"packages/pagemaker/src/components/widgets/EditHead.tsx#AxPageMaker.EditHead"})}catch(__react_docgen_typescript_loader_error){}const Item=(0,react.memo)((({item,children,style,itemRef,canUnselect,expanded=!1,...rest})=>{const[hover,setHover]=(0,react.useState)(!1),{isEditing,editConfig,selected,removeConfig,setDragging,dragging}=usePageContext(),{ref,span,onResizeStart}=((id,colSpan)=>{const refEl=(0,react.useRef)(null),[span,setSpan]=(0,react.useState)(colSpan??12),{updateConfig}=usePageContext();(0,react.useLayoutEffect)((()=>{setSpan(colSpan??12)}),[colSpan]);const onResize=evt=>{const newX=evt.clientX;if(null!=refEl.current?.parentElement){const box=refEl.current.getBoundingClientRect(),minWidth=Math.round(refEl.current.parentElement.offsetWidth/12);let newSpan=Math.floor((newX-(box.left-minWidth))/minWidth)||1;newSpan>12&&(newSpan=12),setSpan(newSpan)}},onResizeEnd=e=>{null!=refEl.current&&updateConfig(id,"colSpan",parseInt(refEl.current.dataset.span??"3",10)),e.preventDefault(),e.stopPropagation(),document.body.style.cursor="unset",document.removeEventListener("mousemove",onResize),document.removeEventListener("mouseup",onResizeEnd)};return{span,ref:refEl,onResizeStart:e=>{e.preventDefault(),document.body.style.cursor="col-resize",document.addEventListener("mousemove",onResize),document.addEventListener("mouseup",onResizeEnd)}}})(item.id,item.colSpan),{id,type}=item,isSelected=(0,react.useMemo)((()=>selected&&id===selected.id),[id,selected]),onClick=(0,react.useCallback)((e=>{isEditing&&(editConfig(selected?.id===id&&!1!==canUnselect?void 0:id),e.stopPropagation())}),[isEditing,editConfig,selected,id,canUnselect]),onMouseOver=(0,react.useCallback)((e=>{isEditing&&(setHover(!0),e.stopPropagation())}),[isEditing]);return(0,jsx_runtime.jsxs)("div",{ref,className:"page-maker__item","data-id":id,"data-type":type,"data-span":span,"data-hover":hover,"data-dragging":dragging?.item?.id===id,"data-expanded":expanded,"data-selected":isSelected,style:{...style,aspectRatio:item.aspect,gridColumnEnd:`span ${span}`},...rest,onClick,onMouseOver,onMouseOut:()=>setHover(!1),children:[children,isEditing&&![EnumTypes.DIVIDER,EnumTypes.VDIVIDER,EnumTypes.BREAK].includes(item.type)&&(0,jsx_runtime.jsx)("div",{"data-type":"col",className:"page-maker__resizer",onMouseDown:onResizeStart}),isEditing&&(0,jsx_runtime.jsx)(EditHead,{title:type,onRemove:()=>removeConfig(id),onDragStart:e=>[setDragging({type,item}),e.stopPropagation()]})]})}));Item.displayName="AxPageMaker.Item";try{Item.displayName="AxPageMaker.Item",Item.__docgenInfo={description:"",displayName:"AxPageMaker.Item",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"IItem"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!1,type:{name:"boolean"}},canUnselect:{defaultValue:null,description:"",name:"canUnselect",required:!1,type:{name:"false"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},itemRef:{defaultValue:null,description:"",name:"itemRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Item.tsx#AxPageMaker.Item"]={docgenInfo:AxPageMaker.Item.__docgenInfo,name:"AxPageMaker.Item",path:"packages/pagemaker/src/components/widgets/Item.tsx#AxPageMaker.Item"})}catch(__react_docgen_typescript_loader_error){}const Break=(0,react.memo)((item=>(0,jsx_runtime.jsx)(Item,{item,children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",style:{pageBreakAfter:"always"},children:[(0,jsx_runtime.jsx)("div",{className:"flex-1 border-b border-dashed border-b-bw-500/30"}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-bw-500/30",children:"BREAK"}),(0,jsx_runtime.jsx)("div",{className:"flex-1 border-b border-dashed border-b-bw-500/30"})]})})));Break.displayName="AxPageMaker.Break";try{Break.displayName="AxPageMaker.Break",Break.__docgenInfo={description:"",displayName:"AxPageMaker.Break",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"page"'},{value:'"grid"'},{value:'"break"'},{value:'"divider"'},{value:'"vdivider"'},{value:'"heading"'},{value:'"image"'},{value:'"paragraph"'},{value:'"tile"'}]}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Break.tsx#AxPageMaker.Break"]={docgenInfo:AxPageMaker.Break.__docgenInfo,name:"AxPageMaker.Break",path:"packages/pagemaker/src/components/widgets/Break.tsx#AxPageMaker.Break"})}catch(__react_docgen_typescript_loader_error){}const Divider=(0,react.memo)((item=>{const{text,color,icon,size,width,align,applyBg}=item,style=(0,react.useMemo)((()=>({fontSize:`${size??1}rem`})),[size]);return(0,jsx_runtime.jsx)(Item,{item,children:(0,jsx_runtime.jsx)(dist.qm,{size:"xs",color,width,align,applyBg,children:(!!icon||!!text)&&(0,jsx_runtime.jsxs)("div",{style,children:[icon&&(0,jsx_runtime.jsx)("i",{className:icon}),text&&(0,jsx_runtime.jsx)("span",{children:text})]})})})}));Divider.displayName="AxPageMaker.Divider";try{Divider.displayName="AxPageMaker.Divider",Divider.__docgenInfo={description:"",displayName:"AxPageMaker.Divider",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.DIVIDER"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'},{value:'"end"'},{value:'"justify"'}]}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},applyBg:{defaultValue:null,description:"",name:"applyBg",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Divider.tsx#AxPageMaker.Divider"]={docgenInfo:AxPageMaker.Divider.__docgenInfo,name:"AxPageMaker.Divider",path:"packages/pagemaker/src/components/widgets/Divider.tsx#AxPageMaker.Divider"})}catch(__react_docgen_typescript_loader_error){}const Heading=(0,react.memo)((item=>{const{text,size,align,color,icon,bold,italic,underline}=item,{isEditing,updateConfig}=usePageContext(),style=(0,react.useMemo)((()=>({textAlign:align,color:(0,utilities_dist.getValue)(color,"inherit"),fontSize:`${size??1}rem`,fontWeight:bold?800:500,fontStyle:italic?"italic":"normal",borderBottom:`${underline?"1px":0} solid currentColor`})),[color,align,size,bold,italic,underline]);return(0,jsx_runtime.jsx)(Item,{item,children:(0,jsx_runtime.jsxs)("div",{className:"heading-tile",style,children:[icon&&(0,jsx_runtime.jsx)("i",{className:icon}),(!isEditing||item.isReadOnly)&&(0,jsx_runtime.jsx)("div",{children:text||(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"Heading..."})}),isEditing&&!item.isReadOnly&&(0,jsx_runtime.jsx)(form_dist.z.Text,{isPlain:!0,placeholder:"Heading...",value:text,onChange:val=>updateConfig(item.id,"text",val)})]})})}));Heading.displayName="AxPageMaker.Heading";try{Heading.displayName="AxPageMaker.Heading",Heading.__docgenInfo={description:"",displayName:"AxPageMaker.Heading",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.HEADING"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},bold:{defaultValue:null,description:"",name:"bold",required:!1,type:{name:"boolean"}},italic:{defaultValue:null,description:"",name:"italic",required:!1,type:{name:"boolean"}},underline:{defaultValue:null,description:"",name:"underline",required:!1,type:{name:"boolean"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'},{value:'"end"'},{value:'"justify"'}]}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Heading.tsx#AxPageMaker.Heading"]={docgenInfo:AxPageMaker.Heading.__docgenInfo,name:"AxPageMaker.Heading",path:"packages/pagemaker/src/components/widgets/Heading.tsx#AxPageMaker.Heading"})}catch(__react_docgen_typescript_loader_error){}const Image=(0,react.memo)((item=>{const{src="?",fit}=item,[isErrored,setErrored]=(0,react.useState)(!1),styles=(0,react.useMemo)((()=>({objectFit:fit,display:isErrored?"none":void 0})),[fit,isErrored]);return(0,react.useEffect)((()=>{setErrored(!1)}),[src]),(0,jsx_runtime.jsxs)(Item,{item,children:[(0,jsx_runtime.jsx)("img",{src,onError:()=>setErrored(!0),className:"w-full h-full overflow-hidden",style:styles}),isErrored&&(0,jsx_runtime.jsx)(dist.Ng,{icon:"M22 20.7L3.3 2L2 3.3L3 4.3V19C3 20.1 3.9 21 5 21H19.7L20.7 22L22 20.7M5 19V6.3L12.6 13.9L11.1 15.8L9 13.1L6 17H15.7L17.7 19H5M8.8 5L6.8 3H19C20.1 3 21 3.9 21 5V17.2L19 15.2V5H8.8",className:"text-2xl text-bw-500/30 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]})}));Image.displayName="AxPageMaker.Image";try{Image.displayName="AxPageMaker.Image",Image.__docgenInfo={description:"",displayName:"AxPageMaker.Image",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.IMAGE"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},aspect:{defaultValue:null,description:"",name:"aspect",required:!1,type:{name:"enum",value:[{value:'"0"'},{value:'"1 / 1"'},{value:'"4 / 3"'},{value:'"16 / 9"'}]}},fit:{defaultValue:null,description:"",name:"fit",required:!1,type:{name:"enum",value:[{value:'"fit"'},{value:'"contain"'},{value:'"cover"'}]}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Image.tsx#AxPageMaker.Image"]={docgenInfo:AxPageMaker.Image.__docgenInfo,name:"AxPageMaker.Image",path:"packages/pagemaker/src/components/widgets/Image.tsx#AxPageMaker.Image"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/@tldraw/assets/urls.js");var dist_esm=__webpack_require__("./node_modules/@tldraw/tldraw/dist-esm/index.mjs");__webpack_require__("./node_modules/@tldraw/tldraw/tldraw.css");__webpack_require__("./packages/utilities/dist/handlers.js"),__webpack_require__("./node_modules/@tldraw/editor/dist-esm/index.mjs"),__webpack_require__("./node_modules/dom-to-image/src/dom-to-image.js");dist_esm.R_W,dist_esm.pp9,dist_esm.ST$,dist_esm.Y8S,dist_esm.T.string;__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs");var purify=__webpack_require__("./node_modules/dompurify/dist/purify.js"),core=__webpack_require__("./packages/editors/node_modules/highlight.js/es/core.js"),marked_esm=__webpack_require__("./node_modules/marked/lib/marked.esm.js"),marked_admonition_extension_dist=__webpack_require__("./node_modules/marked-admonition-extension/dist/index.mjs"),src=__webpack_require__("./node_modules/marked-emoji/src/index.js"),marked_highlight_src=__webpack_require__("./node_modules/marked-highlight/src/index.js"),bash=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/bash.js"),css=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/css.js"),javascript=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/javascript.js"),json=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/json.js"),typescript=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/typescript.js"),xml=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/xml.js"),yaml=__webpack_require__("./packages/editors/node_modules/highlight.js/es/languages/yaml.js"),emoji_en_US=__webpack_require__("./node_modules/emojilib/dist/emoji-en-US.json");const emojiMap=Object.entries(emoji_en_US).reduce(((ret,[emoji,names])=>(names.forEach((name=>ret[name]=ret[name]??emoji)),ret)),{});core.Z.registerLanguage("javascript",javascript.Z),core.Z.registerLanguage("typescript",typescript.Z),core.Z.registerLanguage("css",css.Z),core.Z.registerLanguage("json",json.Z),core.Z.registerLanguage("bash",bash.Z),core.Z.registerLanguage("html",xml.Z),core.Z.registerLanguage("yaml",yaml.Z),core.Z.registerLanguage("default",xml.Z);const LANGS=["javascript","typescript","css","json","bash","html","yaml"],_marked=new marked_esm.M2(marked_admonition_extension_dist.ZP,(0,src.c)({emojis:emojiMap,unicode:!0}),(0,marked_highlight_src.G)({langPrefix:"hljs language-",highlight:(code,language)=>core.Z.highlight(code,{language:LANGS.includes(language)?language:"default"}).value}));_marked.use({gfm:!0,breaks:!0,renderer:{code:(code,infostring="")=>`<pre class="hljs language-${infostring}"><code>${code}</code><button onclick='navigator.clipboard.writeText(this.previousSibling.innerText)' class="hljs-copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg></button></pre>`},hooks:{postprocess:source=>purify.sanitize(source)}});const marked=_marked,AxMdx=({text,className,...rest})=>{const[mdtext,setMdtext]=(0,react.useState)("");return(0,react.useEffect)((()=>{const parsed=text?marked.parse(text.replaceAll(":::","!!! ")):"";Promise.resolve(parsed).then(setMdtext)}),[text]),(0,jsx_runtime.jsx)("div",{className:`markdown-body ${className??""}`,dangerouslySetInnerHTML:{__html:mdtext}})};var MDXEditor=__webpack_require__("./node_modules/@mdxeditor/editor/dist/MDXEditor.js"),headings=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/headings/index.js"),lists=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/lists/index.js"),quote=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/quote/index.js"),table=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/table/index.js"),thematic_break=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/thematic-break/index.js"),plugins_link=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/link/index.js"),codeblock=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js"),link_dialog=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/link-dialog/index.js"),codemirror=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codemirror/index.js"),CodeMirrorEditor=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codemirror/CodeMirrorEditor.js"),directives=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/directives/index.js"),AdmonitionDirectiveDescriptor=__webpack_require__("./node_modules/@mdxeditor/editor/dist/directive-editors/AdmonitionDirectiveDescriptor.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/index.js"),primitives_toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js"),ChangeCodeMirrorLanguage=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ChangeCodeMirrorLanguage.js"),UndoRedo=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/UndoRedo.js"),BoldItalicUnderlineToggles=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BoldItalicUnderlineToggles.js"),CodeToggle=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CodeToggle.js"),ListsToggle=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ListsToggle.js"),BlockTypeSelect=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BlockTypeSelect.js"),CreateLink=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CreateLink.js"),InsertTable=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertTable.js"),InsertThematicBreak=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertThematicBreak.js"),InsertCodeBlock=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertCodeBlock.js"),ChangeAdmonitionType=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ChangeAdmonitionType.js"),InsertAdmonition=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertAdmonition.js");__webpack_require__("./node_modules/@mdxeditor/editor/dist/style.css");const AxMdxEditor=({value:_value,onChange})=>{const isDark=(0,dist.F5)(),[showPreview,setShowPreview]=(0,react.useState)(!1),[actualValue,setActualValue]=(0,react.useState)(_value),value=(0,react.useDeferredValue)(_value);(0,react.useEffect)((()=>{setActualValue(value??"")}),[value]);const handleChange=(0,react.useCallback)((val=>{setActualValue(val.replaceAll("\\:",":")),onChange?.(val.replaceAll("\\:",":"))}),[onChange]);return showPreview?(0,jsx_runtime.jsxs)(dist.zb,{children:[(0,jsx_runtime.jsxs)(dist.Q6,{className:"py-1 px-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1"}),(0,jsx_runtime.jsx)(dist.oG,{icon:"mdi mdi-close",className:"self-center",onClick:()=>setShowPreview(!1),variant:"link",size:"sm"})]}),(0,jsx_runtime.jsx)(dist.aW,{children:(0,jsx_runtime.jsx)(AxMdx,{text:actualValue??""})})]}):(0,jsx_runtime.jsx)(MDXEditor.P,{className:"mdx-editor "+(isDark?"dark-theme":"light-theme"),markdown:actualValue??"",onChange:handleChange,contentEditableClassName:"markdown-body",plugins:[(0,headings.bB)(),(0,lists.df)(),(0,quote.q)(),(0,table.zf)(),(0,thematic_break.nz)(),(0,plugins_link.a)(),(0,codeblock.u9)(),(0,link_dialog.w)(),(0,codemirror.AX)({codeBlockLanguages:{js:"JavaScript",ts:"TypeScript",tsx:"TypeScript (React)",jsx:"JavaScript (React)",css:"CSS",html:"HTML",bash:"Bash",json:"JSON",yaml:"YAML"}}),(0,codeblock.u9)({defaultCodeBlockLanguage:"js",codeBlockEditorDescriptors:[{match:()=>!0,priority:0,Editor:CodeMirrorEditor.s}]}),(0,directives.we)({directiveDescriptors:[AdmonitionDirectiveDescriptor.Q]}),(0,toolbar.N2)({toolbarContents:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(primitives_toolbar.bu,{options:[{when:editor=>"codeblock"===editor?.editorType,contents:()=>(0,jsx_runtime.jsx)(ChangeCodeMirrorLanguage.w,{})},{fallback:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UndoRedo.Q,{}),(0,jsx_runtime.jsx)(primitives_toolbar.Z0,{}),(0,jsx_runtime.jsx)(BoldItalicUnderlineToggles.$,{}),(0,jsx_runtime.jsx)(CodeToggle.K,{}),(0,jsx_runtime.jsx)(primitives_toolbar.Z0,{}),(0,jsx_runtime.jsx)(ListsToggle.s,{}),(0,jsx_runtime.jsx)(primitives_toolbar.Z0,{}),(0,jsx_runtime.jsx)(BlockTypeSelect.I,{}),(0,jsx_runtime.jsx)(primitives_toolbar.Z0,{}),(0,jsx_runtime.jsx)(CreateLink.c,{}),(0,jsx_runtime.jsx)(InsertTable.c,{}),(0,jsx_runtime.jsx)(InsertThematicBreak.c,{}),(0,jsx_runtime.jsx)(primitives_toolbar.Z0,{}),(0,jsx_runtime.jsx)(InsertCodeBlock.j,{}),(0,jsx_runtime.jsx)(primitives_toolbar.bu,{options:[{when:editor=>"directive"===editor?.rootNode?.getType()&&["note","tip","info","danger","caution"].includes(editor.rootNode.getMdastNode()?.name),contents:()=>(0,jsx_runtime.jsx)(ChangeAdmonitionType.i,{})},{fallback:()=>(0,jsx_runtime.jsx)(InsertAdmonition.v,{})}]})]})}]}),(0,jsx_runtime.jsx)(dist.oG,{icon:"mdi mdi-eye",className:"m-0 self-center",onClick:()=>setShowPreview(!0),variant:"link",size:"sm"})]})})]})},HEIGHT_MAP={auto:"auto",small:"12rem",medium:"24rem",large:"32rem"},Paragraph=(0,react.memo)((item=>{const{id,text,height}=item,{isEditing,updateConfig}=usePageContext();return(0,jsx_runtime.jsxs)(Item,{item,canUnselect:!1,style:{height:HEIGHT_MAP[height??"auto"]},children:[!isEditing&&(0,jsx_runtime.jsx)(AxMdx,{className:"markdown-body paragraph-text",text}),isEditing&&(0,jsx_runtime.jsx)(AxMdxEditor,{value:text,onChange:v=>updateConfig(id,"text",v)})]})}));Paragraph.displayName="AxPageMaker.Paragraph";try{Paragraph.displayName="AxPageMaker.Paragraph",Paragraph.__docgenInfo={description:"",displayName:"AxPageMaker.Paragraph",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.PARAGRAPH"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"small"'},{value:'"medium"'},{value:'"large"'}]}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Paragraph.tsx#AxPageMaker.Paragraph"]={docgenInfo:AxPageMaker.Paragraph.__docgenInfo,name:"AxPageMaker.Paragraph",path:"packages/pagemaker/src/components/widgets/Paragraph.tsx#AxPageMaker.Paragraph"})}catch(__react_docgen_typescript_loader_error){}const Tile=(0,react.memo)((item=>{const{isEditing,editWidget,renderWidget,findWidget}=usePageContext(),style=(0,react.useMemo)((()=>({color:(0,utilities_dist.getValue)(item.color,"inherit"),backgroundColor:(0,utilities_dist.getValue)(item.bg,void 0)})),[item.color,item.bg]),widget=(0,react.useMemo)((()=>findWidget(item.widgetId)),[findWidget,item.widgetId]);return(0,jsx_runtime.jsx)(Item,{item,style:{aspectRatio:item.aspect},children:(0,jsx_runtime.jsxs)(dist.VE,{isExpandable:!isEditing&&item.expandable,children:[(0,jsx_runtime.jsxs)(dist.Q6,{className:"page-maker__tileHead ax-header py-1",style,children:[item.icon&&(0,jsx_runtime.jsx)(dist.Ng,{icon:item.icon}),(0,jsx_runtime.jsx)(dist.M,{className:"font-medium",children:item.title}),item.info&&(0,jsx_runtime.jsx)(dist.JR,{content:(0,jsx_runtime.jsx)("pre",{dangerouslySetInnerHTML:{__html:item.info}}),className:"page-maker__tileInfo",children:(0,jsx_runtime.jsx)(dist.Ng,{icon:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"})}),isEditing&&(0,jsx_runtime.jsx)(dist.oG,{variant:"outline",className:"!text-xs",icon:"M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",onClick:()=>editWidget(item.widgetId)})]}),(0,jsx_runtime.jsxs)(dist.aW,{className:"page-maker__tileBody",padding:"none",children:[!isEditing&&renderWidget(item.widgetId),isEditing&&null!=widget&&(0,jsx_runtime.jsxs)("div",{style:{placeSelf:"center",textAlign:"center"},children:[widget.icon&&(0,jsx_runtime.jsx)(dist.Ng,{icon:widget.icon}),(0,jsx_runtime.jsx)("div",{children:widget.title})]})]})]})})}));Tile.displayName="AxPageMaker.Tile";try{Tile.displayName="AxPageMaker.Tile",Tile.__docgenInfo={description:"",displayName:"AxPageMaker.Tile",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.TILE"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},info:{defaultValue:null,description:"",name:"info",required:!1,type:{name:"string"}},bg:{defaultValue:null,description:"",name:"bg",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},expandable:{defaultValue:null,description:"",name:"expandable",required:!1,type:{name:"boolean"}},aspect:{defaultValue:null,description:"",name:"aspect",required:!1,type:{name:"enum",value:[{value:'"0"'},{value:'"1 / 1"'},{value:'"4 / 3"'},{value:'"16 / 9"'}]}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Tile.tsx#AxPageMaker.Tile"]={docgenInfo:AxPageMaker.Tile.__docgenInfo,name:"AxPageMaker.Tile",path:"packages/pagemaker/src/components/widgets/Tile.tsx#AxPageMaker.Tile"})}catch(__react_docgen_typescript_loader_error){}const VDivider=(0,react.memo)((item=>{const{color,width}=item;return(0,jsx_runtime.jsx)(Item,{item,style:{display:"flex",justifyContent:"center"},children:(0,jsx_runtime.jsx)(dist.qm,{size:"sm",width,color,vertical:!0})})}));VDivider.displayName="AxPageMaker.VDivider";try{VDivider.displayName="AxPageMaker.VDivider",VDivider.__docgenInfo={description:"",displayName:"AxPageMaker.VDivider",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.VDIVIDER"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/VDivider.tsx#AxPageMaker.VDivider"]={docgenInfo:AxPageMaker.VDivider.__docgenInfo,name:"AxPageMaker.VDivider",path:"packages/pagemaker/src/components/widgets/VDivider.tsx#AxPageMaker.VDivider"})}catch(__react_docgen_typescript_loader_error){}const Grid=item=>(0,jsx_runtime.jsx)(Item,{item,children:(0,jsx_runtime.jsx)("div",{className:"page-maker__grid inner","data-id":item.id,children:item.children.map((item=>{switch(item.type){case EnumTypes.HEADING:return(0,jsx_runtime.jsx)(Heading,{...item},item.id);case EnumTypes.PARAGRAPH:return(0,jsx_runtime.jsx)(Paragraph,{...item},item.id);case EnumTypes.DIVIDER:return(0,jsx_runtime.jsx)(Divider,{...item},item.id);case EnumTypes.VDIVIDER:return(0,jsx_runtime.jsx)(VDivider,{...item},item.id);case EnumTypes.IMAGE:return(0,jsx_runtime.jsx)(Image,{...item},item.id);case EnumTypes.TILE:return(0,jsx_runtime.jsx)(Tile,{...item},item.id);case EnumTypes.BREAK:return(0,jsx_runtime.jsx)(Break,{...item},item.id);default:return null}}))})});Grid.displayName="AxPageMaker.Grid";try{Grid.displayName="AxPageMaker.Grid",Grid.__docgenInfo={description:"",displayName:"AxPageMaker.Grid",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"EnumTypes.GRID"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!1,type:{name:"enum",value:[{value:"11"},{value:"3"},{value:"4"},{value:"1"},{value:"6"},{value:"2"},{value:"10"},{value:"5"},{value:"9"},{value:"7"},{value:"12"},{value:"8"}]}},isLocked:{defaultValue:null,description:"",name:"isLocked",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Grid.tsx#AxPageMaker.Grid"]={docgenInfo:AxPageMaker.Grid.__docgenInfo,name:"AxPageMaker.Grid",path:"packages/pagemaker/src/components/widgets/Grid.tsx#AxPageMaker.Grid"})}catch(__react_docgen_typescript_loader_error){}const Page=(0,react.memo)((()=>{const{refPageEl,isEditing,config=[],dragging,setDragging,addItem,editConfig}=usePageContext();return(0,jsx_runtime.jsx)(dist.aW,{padding:"none",children:(0,jsx_runtime.jsx)("div",{ref:refPageEl,className:"page-maker__page","data-type":EnumTypes.PAGE,"data-editing":isEditing,onClick:()=>editConfig(void 0),onDragLeave,onDragEnd:()=>(ghost.reset(),setDragging(void 0)),onDragExit:onDragLeave,onDrop:()=>addItem((dragging=>{if(null!=ghost.parentElement){const{id,grid,pos=0}=ghost.dataset;return ghost.reset(),{id,grid,pos:+pos,item:getNodeConfig(dragging)}}})(dragging)),onDragOver:e=>dragging&&onDragOver(e,dragging),children:(0,jsx_runtime.jsx)("div",{className:"page-maker__grid",ref:el=>el?.appendChild(ghost),children:config.map((item=>{switch(item.type){case EnumTypes.HEADING:return(0,jsx_runtime.jsx)(Heading,{...item},item.id);case EnumTypes.PARAGRAPH:return(0,jsx_runtime.jsx)(Paragraph,{...item},item.id);case EnumTypes.DIVIDER:return(0,jsx_runtime.jsx)(Divider,{...item},item.id);case EnumTypes.VDIVIDER:return(0,jsx_runtime.jsx)(VDivider,{...item},item.id);case EnumTypes.IMAGE:return(0,jsx_runtime.jsx)(Image,{...item},item.id);case EnumTypes.TILE:return(0,jsx_runtime.jsx)(Tile,{...item},item.id);case EnumTypes.GRID:return(0,jsx_runtime.jsx)(Grid,{...item},item.id);case EnumTypes.BREAK:return isEditing&&(0,jsx_runtime.jsx)(Break,{...item},item.id);default:return null}}))})})})}));Page.displayName="AxPageMaker.Page";try{Page.displayName="AxPageMaker.Page",Page.__docgenInfo={description:"",displayName:"AxPageMaker.Page",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/widgets/Page.tsx#AxPageMaker.Page"]={docgenInfo:AxPageMaker.Page.__docgenInfo,name:"AxPageMaker.Page",path:"packages/pagemaker/src/components/widgets/Page.tsx#AxPageMaker.Page"})}catch(__react_docgen_typescript_loader_error){}const PageMaker_AxPageMaker=(0,react.memo)((props=>(0,jsx_runtime.jsx)(ContextProvider,{...props,children:(0,jsx_runtime.jsxs)(dist.zb,{className:"page-maker__container",children:[(0,jsx_runtime.jsx)(Page,{}),props.isEditing&&(0,jsx_runtime.jsx)(Aside,{})]})})));PageMaker_AxPageMaker.displayName="AxPageMaker";try{PageMaker_AxPageMaker.displayName="AxPageMaker",PageMaker_AxPageMaker.__docgenInfo={description:"Page maker",displayName:"AxPageMaker",props:{isEditing:{defaultValue:null,description:"Edit mode",name:"isEditing",required:!1,type:{name:"boolean"}},config:{defaultValue:null,description:"Page config",name:"config",required:!0,type:{name:"PageConfig"}},widgets:{defaultValue:null,description:"Widget list",name:"widgets",required:!0,type:{name:"IWidgetObject[]"}},artifacts:{defaultValue:null,description:"",name:"artifacts",required:!1,type:{name:"IArtifactObject[]"}},pageRef:{defaultValue:null,description:"",name:"pageRef",required:!1,type:{name:"RefObject<{ getRaw: () => Promise<string>; }>"}},renderWidget:{defaultValue:null,description:"Render widget tile\n@param id",name:"renderWidget",required:!0,type:{name:"(widgetId: string) => false | Element"}},onAdd:{defaultValue:null,description:"Add new widget",name:"onAdd",required:!1,type:{name:"((callback: (widget: IWidgetObject) => void) => void)"}},onEdit:{defaultValue:null,description:"Edit widget",name:"onEdit",required:!1,type:{name:"((widgetId: string) => void)"}},onChange:{defaultValue:null,description:"Config changed",name:"onChange",required:!1,type:{name:"((config: PageConfig) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/pagemaker/src/components/PageMaker.tsx#AxPageMaker"]={docgenInfo:PageMaker_AxPageMaker.__docgenInfo,name:"AxPageMaker",path:"packages/pagemaker/src/components/PageMaker.tsx#AxPageMaker"})}catch(__react_docgen_typescript_loader_error){}const PageMaker_stories={component:PageMaker_AxPageMaker,title:"@pagemaker/PageMaker",tags:["autodocs"],parameters:{layout:"fullscreen",controls:{exclude:"children"}}},widgets=[{id:"widget-1",icon:"mdi mdi-chart-pie",title:"Test Widget"}],artifacts=[{id:"sample-text",title:"Sample text",config:{type:EnumTypes.PARAGRAPH,text:"## Sample text\n\n- Sample markdown formatted text"}}],Example={render:args=>(0,jsx_runtime.jsx)("div",{className:"h-full min-h-[600px] grid overflow-hidden",children:(0,jsx_runtime.jsx)("div",{className:"w-full h-full ax-section grid-area-[unset]",children:(0,jsx_runtime.jsx)(PageMaker_AxPageMaker,{...args})})}),args:{config:[{id:"head-1",colSpan:12,type:EnumTypes.HEADING,text:"Heading",color:"#487eb0",size:1.5},{id:"image-1",colSpan:3,fit:"cover",aspect:"16 / 9",src:"https://picsum.photos/800/600",type:EnumTypes.IMAGE},{id:"para-1",colSpan:9,text:"\n# Sample header\n\n* List item\n* List item\n* List item\n\n| fgdfgfddsfg | dfgdsfgdfg | sdfgsdfgdsfg | sdfgdfsgdfgdfgdsfgsdfg |\n| ----------- | ---------- | ------------ | ---------------------- |\n| sdfg        | sdfg       |              |                        |\n",type:EnumTypes.PARAGRAPH},{id:"div-1",colSpan:12,type:EnumTypes.DIVIDER},{id:"tile-1",widgetId:widgets[0].id,type:EnumTypes.TILE,title:"Tile head",bordered:!0,expandable:!1,aspect:"4 / 3",colSpan:3,color:"#227093"},{id:"tile-2",widgetId:widgets[0].id,type:EnumTypes.TILE,title:"Tile head",bordered:!0,expandable:!1,colSpan:6,color:"#227093",info:"<b>Information Card</b>\nThis tooltip can display information for the <u>widget</u>\nCan include <em>HTML tags</em>",icon:"mdi mdi-chart-pie"}],widgets,artifacts,renderWidget:widget=>(0,jsx_runtime.jsxs)("div",{children:["Widget here - ",widget]})}};Example.parameters={...Example.parameters,docs:{...Example.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    return <div className="h-full min-h-[600px] grid overflow-hidden">\n        <div className="w-full h-full ax-section grid-area-[unset]">\n          <AxPageMaker {...args} />\n        </div>\n      </div>;\n  },\n  args: {\n    config,\n    widgets,\n    artifacts,\n    renderWidget: widget => <div>Widget here - {widget}</div>\n  }\n}',...Example.parameters?.docs?.source}}};const __namedExportsOrder=["Example"]},"./node_modules/memoize-one/dist/memoize-one.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>memoizeOne});var safeIsNaN=Number.isNaN||function ponyfill(value){return"number"==typeof value&&value!=value};function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(first=newInputs[i],second=lastInputs[i],!(first===second||safeIsNaN(first)&&safeIsNaN(second)))return!1;var first,second;return!0}function memoizeOne(resultFn,isEqual){void 0===isEqual&&(isEqual=areInputsEqual);var cache=null;function memoized(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];if(cache&&cache.lastThis===this&&isEqual(newArgs,cache.lastArgs))return cache.lastResult;var lastResult=resultFn.apply(this,newArgs);return cache={lastResult,lastArgs:newArgs,lastThis:this},lastResult}return memoized.clear=function clear(){cache=null},memoized}}}]);