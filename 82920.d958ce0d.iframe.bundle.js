"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[82920],{"./node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>C,b:()=>w});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function w(w){const C=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__.i0,{vertex:j,fragment:y,attributes:L,varyings:O}=C;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.IE)(j,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__.w,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__.O,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__.a,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__.U,w),L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.K.POSITION,"vec3"),w.vvColor&&L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.K.COLORFEATUREATTRIBUTE,"float"),O.add("vColor","vec4"),O.add("vpos","vec3");const A=w.multipassEnabled&&(w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color||w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha);A&&O.add("depth","float"),j.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__.U("eColor",(e=>e.color)));const T=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Depth;T&&(C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__.o,w),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__._J)(C),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.OI)(C)),j.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      forwardObjectAndLayerIdColor();

      ${w.hasVertexColors?"vColor *= eColor;":w.vvColor?"vColor = eColor * interpolateVVColor(colorFeatureAttribute);":"vColor = eColor;"}
      ${A?"depth = (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${T?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`transformPosition(proj, view, vpos);`}
    }
  `),C.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,w),A&&C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__._,w),y.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__.I);const $=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Highlight;return $&&C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__.oj,w),y.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`
  void main() {
    discardBySlice(vpos);
    ${A?"terrainDepthTest(depth);":""}
    vec4 fColor = vColor;

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`fColor.a = 1.0;`:""}

    if (fColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__.A)}) {
      discard;
    }

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`fragColor = vec4(fColor.a);`:""}

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`fragColor = highlightSlice(fColor, vpos); ${w.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__.H.Color?"fragColor = premultiplyAlpha(fragColor);":""}`:""}
    ${$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`outputHighlight();`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Depth?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`outputDepth(linearDepth);`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__.Y`outputObjectAndLayerIdColor();`:""}
  }
  `),C}const C=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>H,b:()=>F,c:()=>D});var _vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function F(o){const i=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__.i0,F=o.signedDistanceFieldEnabled;if(i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_7__.I,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_4__.A3,o),o.occlusionPass)return i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_8__.K,o),i;const{vertex:B,fragment:H}=i;i.include(_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__._I),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__.s),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__.I),i.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__.a,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__.U,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_9__.a),i.varyings.add("vcolor","vec4"),i.varyings.add("vtc","vec2"),i.varyings.add("vsize","vec2"),i.varyings.add("voccluded","float"),B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.U("viewport",((e,o)=>o.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.$("screenOffset",((o,i)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(T,2*o.screenOffset[0]*i.camera.pixelRatio,2*o.screenOffset[1]*i.camera.pixelRatio))),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.$("anchorPosition",(e=>D(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.U("materialColor",(e=>e.color))),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.Ge)(B),F&&(B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.U("outlineColor",(e=>e.outlineColor))),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.U("outlineColor",(e=>L(e)?e.outlineColor:_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.Z)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__.d("outlineSize",(e=>L(e)?e.outlineSize:0)))),o.pixelSnappingEnabled&&B.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_6__.w),o.hasScreenSizePerspective&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__._s)(B),(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__.Ul)(B)),o.debugDrawLabelBorder&&i.varyings.add("debugBorderCoords","vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.K.UV0,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.K.COLOR,"vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.K.SIZE,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__.K.FEATUREATTRIBUTE,"vec4"),B.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      forwardObjectAndLayerIdColor();

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${o.hasScreenSizePerspective?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
            inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
            vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
            inputSize = size;
            vec2 screenOffsetScaled = screenOffset;`}

      ${o.vvSize?"inputSize *= vvScale(featureAttribute).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);
      bool visible = testHUDVisibility(posProj);
      voccluded = visible ? 0.0 : 1.0;
    `);const U=_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`vec2 uv01 = floor(uv0);
vec2 uv = uv0 - uv01;
quadOffset.xy = ((uv01 - anchorPosition) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;`,V=o.pixelSnappingEnabled?F?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`posProj += quadOffset;`;B.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
    ${o.occlusionTestEnabled?"if (visible) {":""}
    ${U}
    ${o.vvColor?"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    ${o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__.m.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`vcolor.a = 1.0;`:""}

    bool alphaDiscard = vcolor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.A)};
    ${F?`alphaDiscard = alphaDiscard && outlineColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.A)};`:""}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${V}
      gl_Position = posProj;
    }

    vtc = uv;

    ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":""}
    vsize = inputSize;
    ${o.occlusionTestEnabled?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`} else { vtc = vec2(0.0);
      ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
  }
  `),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__.W("tex",(e=>e.texture)));const E=o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`(isBorder > 0.0 ? 0.0 : ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.k)})`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.k),I=_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
    ${o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${o.sampleSignedDistanceFieldTexelCenter?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      float txSize = float(textureSize(tex, 0).x);
      float texelSize = 1.0 / txSize;

      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;
      `:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
      vec2 samplePos = vtc;
      `}

    ${F?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
      vec4 fillPixelColor = vcolor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${E} ||
          fillPixelColor.a + outlinePixelColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__.A)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        fragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${E}) {
          discard;
        }

        fragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
          vec4 texColor = texture(tex, vtc, -0.5);
          if (texColor.a < ${E}) {
            discard;
          }
          fragColor = texColor * premultiplyAlpha(vcolor);
          `}

    // Draw debug border with transparency, so that original texels along border are still partially visible
    ${o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`:""}
  `;switch(o.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__.m.Color:H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
        void main() {
          ${I}
          ${o.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__.H.FrontFace?"fragColor.rgb /= fragColor.a;":""}
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__.m.Alpha:H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
        void main() {
          ${I}
          fragColor = vec4(fragColor.a);
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__.m.ObjectAndLayerIdColor:H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
        void main() {
          ${I}
          outputObjectAndLayerIdColor();
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__.m.Highlight:H.constants.add("occludedHighlightFlag","vec4",_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__.Q3).add("unoccludedHighlightFlag","vec4",_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__.QJ),H.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.Y`
        void main() {
          ${I}
          if (voccluded == 1.0) {
            fragColor = occludedHighlightFlag;
          } else {
            fragColor = unoccludedHighlightFlag;
          }
        }`)}return i}function L(e){return e.outlineColor[3]>0&&e.outlineSize>0}function D(e,i=T){return e.textureIsSignedDistanceField?function B(o,i,r){null!=i?(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,o[0]*(i[2]-i[0])+i[0],o[1]*(i[3]-i[1])+i[1]):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,0,0)}(e.anchorPosition,e.distanceFieldBoundingBox,i):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.j)(i,e.anchorPosition),i}const T=(0,_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),H=Object.freeze(Object.defineProperty({__proto__:null,build:F,calculateAnchorPosForRendering:D},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/OverlayCompositing.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>d,a:()=>m,b:()=>l});var _views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/interfaces.js"),_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");class d extends _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.a{constructor(){super(...arguments),this.overlayIndex=_views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.YT.INNER,this.opacity=1}}function l(){const e=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__.i0;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Y),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__.W("tex",(e=>e.texture))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.i("overlayIdx",(e=>e.overlayIndex))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.d("opacity",(e=>e.opacity))),e.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`void main() {
vec2 overlayUV = overlayIdx == 0 ? vec2(uv.x * 0.5, uv.y) : vec2(uv.x * 0.5 + 0.5, uv.y);
fragColor = texture(tex, overlayUV) * opacity;
}`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,OverlayCompositingPassParameters:d,build:l},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>R,b:()=>A,r:()=>j});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js");const j=1;function A(A){const R=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__.i0,{vertex:P,fragment:F}=R,z=A.multipassEnabled&&(A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color||A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha);R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.m),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__.A,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__.W,A);const E=A.applyMarkerOffset&&!A.draped;E&&(P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("markerScale",(e=>e.markerScale))),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__.o,{space:_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__.eY.World,draped:!1})),A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Depth&&R.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__.o,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__.U,A),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.IE)(P,A),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.O("inverseProjectionMatrix",((e,i)=>i.camera.inverseProjectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__.$("nearFar",((e,i)=>i.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.U("viewport",((e,i)=>i.camera.fullViewport))),P.constants.add("LARGE_HALF_FLOAT","float",65500),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.K.POSITION,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.K.SUBDIVISIONFACTOR,"float"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.K.UV0,"vec2"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.K.AUXPOS1,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__.K.AUXPOS2,"vec3"),R.varyings.add("vColor","vec4"),R.varyings.add("vpos","vec3"),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.OI)(R),z&&R.varyings.add("depth","float");const T=A.stippleEnabled;T&&R.varyings.add("vLineSizeInv","float");const W=A.capType===_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__.w.ROUND,V=T||W;V&&R.varyings.add("vLineWidth","float");const O=A.innerColorEnabled||W;O&&R.varyings.add("vLineDistance","float");const N=A.stippleEnabled&&W,I=A.falloffEnabled||N;I&&R.varyings.add("vLineDistanceNorm","float"),W&&(R.varyings.add("vSegmentSDF","float"),R.varyings.add("vReverseSegmentSDF","float")),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.G8)(R),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${z?"depth = pos.z;":""}
      linearDepth = calculateLinearDepth(nearFar,pos.z);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__.Ge)(P),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${V?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vLineWidth = lineWidth;`:""}
      ${T?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);
  `),E&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`),(A.stippleEnabled||W)&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${W?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),A.roundJoins?P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${A.stippleEnabled?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`min(1.0, subdivisionFactor * ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y.float((j+2)/(j+1))})`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);const $=A.capType!==_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__.w.BUTT;return P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${$?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${I||O?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${O?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${I?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),W&&P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),A.stippleEnabled&&(A.draped?P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("worldToScreenRatio",((e,i)=>1/i.screenToPCSRatio))):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),A.draped?P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__.a)(e)))),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`)),P.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${A.wireframe&&!A.draped?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }
  }
  `),z&&R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__._,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,A),F.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__.I),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
  void main() {
    discardBySlice(vpos);
    ${z?"terrainDepthTest(depth);":""}
  `),A.wireframe?F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(W&&F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
        discard;
      }
    `),N?F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}, stippleCoverage);
      `):F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float stippleAlpha = getStippleAlpha();`),A.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor&&F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);`),F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.U("intrinsicColor",(e=>e.color))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec4 color = intrinsicColor * vColor;`),A.innerColorEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__.U("innerColor",(e=>e.innerColor??e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("innerWidth",((e,i)=>e.innerWidth*i.camera.pixelRatio))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`vec4 finalColor = blendStipple(color, stippleAlpha);`),A.falloffEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__.d("falloff",(e=>e.falloff))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`))),F.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`finalColor.a = 1.0;`:""}

    if (finalColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
      discard;
    }

    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`fragColor = vec4(finalColor.a);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color&&A.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__.H.Color?"fragColor = premultiplyAlpha(fragColor);":""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Highlight?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`fragColor = vec4(1.0);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Depth?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`outputDepth(linearDepth);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__.Y`outputObjectAndLayerIdColor();`:""}
  }
  `),R}const R=Object.freeze(Object.defineProperty({__proto__:null,build:A,ribbonlineNumRoundJoinSubdivisions:j},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>i,a:()=>d,b:()=>l});var _vec4f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");class i extends _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.a{constructor(){super(...arguments),this.color=(0,_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,1,1,1)}}function l(){const e=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__.i0;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Y),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__.W("tex",(e=>e.texture)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__.U("uColor",(e=>e.color))),e.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`void main() {
vec4 texColor = texture(tex, uv);
fragColor = texColor * uColor;
}`),e}const d=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:i,build:l},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>M,b:()=>x});var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js"),_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function x(x){const M=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__.i0,{vertex:D,fragment:N}=M;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.IE)(D,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__.w,x),M.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__.K.POSITION,"vec3"),M.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__.K.UV0,"vec2");const O=new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__.U("waterColor",(e=>e.color));if(x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color&&x.isDraped)return M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vpos = position;
          gl_Position = transformPosition(proj, view, vpos);
        }
    `),N.uniforms.add(O),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`void main() {
fragColor = waterColor;
}`),M;switch(x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color&&x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha||(M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.E,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.Er,x),M.varyings.add("vuv","vec2"),M.varyings.add("vpos","vec3"),M.varyings.add("vnormal","vec3"),M.varyings.add("vtbnMatrix","mat3"),x.multipassEnabled&&M.varyings.add("depth","float"),D.uniforms.add(O),D.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vuv = uv0;
        vpos = position;

        vnormal = getLocalUp(vpos, localOrigin);
        vtbnMatrix = getTBNMatrix(vnormal);

        ${x.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}

        gl_Position = transformPosition(proj, view, vpos);
        ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color?"forwardLinearDepth();":""}
      }
    `)),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__._,x),x.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Alpha:M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,x),N.uniforms.add(O),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
        void main() {
          discardBySlice(vpos);
          ${x.multipassEnabled?"terrainDepthTest(depth);":""}

          fragColor = vec4(waterColor.a);
        }
      `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color:M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.me),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__.w,{pbrMode:_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__.Ax.Disabled,lightingSphericalHarmonicsOrder:2}),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__.o),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__.WK,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__.e,x),N.uniforms.add(O,new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__.d("timeElapsed",(e=>e.timeElapsed)),D.uniforms.get("view"),D.uniforms.get("localOrigin")),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__.E7)(N,x),N.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__.I),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.OB)(N),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__.o1)(N),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
      void main() {
        discardBySlice(vpos);
        ${x.multipassEnabled?"terrainDepthTest(depth);":""}
        vec3 localUp = vnormal;
        // the created normal is in tangent space
        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);

        // we rotate the normal according to the tangent-bitangent-normal-Matrix
        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);
        vec3 v = -normalize(vpos - cameraPosition);
        float shadow = ${x.receiveShadows?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`1.0 - readShadowMap(vpos, linearDepth)`:"1.0"};
        vec4 vPosView = view * vec4(vpos, 1.0);
        vec4 final = vec4(getSeaColor(n, v, mainLightDirection, waterColor.rgb, mainLightIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz, vpos + localOrigin), waterColor.w);

        // gamma correction
        fragColor = delinearizeGamma(final);
        fragColor = highlightSlice(fragColor, vpos);
        ${x.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__.H.Color?"fragColor = premultiplyAlpha(fragColor);":""}
      }
    `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Normal:M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__.E,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__.o,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,x),M.varyings.add("vpos","vec3"),M.varyings.add("vuv","vec2"),D.uniforms.add(O),D.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vuv = uv0;
          vpos = position;

          gl_Position = transformPosition(proj, view, vpos);
        }
    `),N.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__.d("timeElapsed",(e=>e.timeElapsed))),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`void main() {
discardBySlice(vpos);
vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);
tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);
fragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Highlight:M.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__.oj,x),M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
      }
    `),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,x),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`void main() {
discardBySlice(vpos);
outputHighlight();
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.ObjectAndLayerIdColor:M.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__.U,x),M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.A)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
        forwardObjectAndLayerIdColor();
      }
    `),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__.A3,x),N.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__.Y`void main() {
discardBySlice(vpos);
outputObjectAndLayerIdColor();
}`)}return M}const M=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/vec3f32.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function a(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function s(){return r(0,1,0)}function c(){return r(0,0,1)}__webpack_require__.d(__webpack_exports__,{a:()=>t,c:()=>n,f:()=>r});const i=a(),f=o(),l=u(),_=s(),y=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:_,UNIT_Z:y,ZEROS:i,clone:t,create:n,createView:function e(n,t){return new Float32Array(n,t,3)},fromValues:r,ones:o,unitX:u,unitY:s,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/floatRGBA.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>o,s:()=>r});var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.qk)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},"./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>L});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/localRotationUtils.js"),_projectors_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectors.js"),_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function L(r,n,L,m){if(null==r||null==m)return!1;const p=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Se)(r,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Wy),P=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.Se)(m,_projectors_js__WEBPACK_IMPORTED_MODULE_4__.mq);if(p===P&&!_(P)&&(p!==_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.UNKNOWN||(0,_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.yK)(r,m)))return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.d)(L,n),!0;if(_(P)){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[p][_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT],t=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT][P];return null!=r&&null!=t&&(r(n,0,e,0),t(e,0,f,0),(0,_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__.e)(c*e[0],c*e[1],L),L[12]=f[0],L[13]=f[1],L[14]=f[2],!0)}if((P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WEB_MERCATOR||P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.PLATE_CARREE)&&(p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WGS84||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.CGCS2000&&P===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.PLATE_CARREE||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF||p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.WEB_MERCATOR)){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[p][_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT],t=_projectors_js__WEBPACK_IMPORTED_MODULE_4__.yw[_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.LON_LAT][P];return null!=r&&null!=t&&(r(n,0,e,0),t(e,0,f,0),p===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF?(0,_localRotationUtils_js__WEBPACK_IMPORTED_MODULE_3__.i)(c*e[0],c*e[1],L):(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.g)(L),L[12]=f[0],L[13]=f[1],L[14]=f[2],!0)}return!1}function _(r){return r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_ECEF||r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_MARS_PCPF||r===_projectors_js__WEBPACK_IMPORTED_MODULE_4__.o3.SPHERICAL_MOON_PCPF}const c=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.EF)(1),e=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),f=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/geometry/projection/localRotationUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>n,i:()=>o});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js");function n(t,n,o){const s=Math.sin(t),r=Math.cos(t),a=Math.sin(n),c=Math.cos(n),h=o;return h[0]=-s,h[4]=-a*r,h[8]=c*r,h[12]=0,h[1]=r,h[5]=-a*s,h[9]=c*s,h[13]=0,h[2]=0,h[6]=c,h[10]=a,h[14]=0,h[3]=0,h[7]=0,h[11]=0,h[15]=1,h}function o(o,s,r){return n(o,s,r),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.t)(r,r),r}},"./node_modules/@arcgis/core/geometry/projection/projectVectorToDehydratedPoint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>o});var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");function o(r,o,c){return(0,_projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__.projectBuffer)(r,o,0,t,c.spatialReference,0,1)?(c.x=t[0],c.y=t[1],c.z=t[2],c):null}const t=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)()},"./node_modules/@arcgis/core/geometry/support/DoubleArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gg:()=>t,cp:()=>e,lL:()=>a,mw:()=>o,qW:()=>y});var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js");function t(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__._?t?new Array(n).fill(0):new Array(n):new Float64Array(n)}function e(t){return((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.c7)(t)?t.length:t.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__._?Array.from(t):new Float64Array(t)}function a(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}function o(r,n){for(let t=0;t<n.length;++t)r[t]=n[t];return r}function y(r){return Array.isArray(r)?new Float64Array(r):r}},"./node_modules/@arcgis/core/geometry/support/MeshTransform.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>N});var v,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js");let b=v=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.am{constructor(t){super(t),this.translation=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)(),this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.e)(_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.up),this.rotationAngle=0,this.scale=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.f)(1,1,1)}get rotation(){return(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.eE)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)((0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.Yz)(t)),this.rotationAngle=(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.i4)(t)}get localMatrix(){const t=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)();return(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__.s)(M,(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.Yz)(this.rotation),(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.kX)(this.rotation)),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.f)(t,M,this.translation,this.scale),t}get localMatrixInverse(){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.i)((0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)(),this.localMatrix)}applyLocal(t,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrix)}applyLocalInverse(t,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrixInverse)}equals(t){return this===t||null!=t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.e)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.translation),rotationAxis:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.scale)};return new v(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"translation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAxis",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAngle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"scale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"rotation",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"localMatrix",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.qq)()],b.prototype,"localMatrixInverse",null),b=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.c)("esri.geometry.support.MeshTransform")],b);const M=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__.a)(),N=b},"./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GA:()=>g,Jn:()=>U,Su:()=>h,Yz:()=>l,eE:()=>q,i4:()=>x,i_:()=>v,kX:()=>w,up:()=>z});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");function h(n=z){return[n[0],n[1],n[2],n[3]]}function q(n,r,t=h()){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(t,n),t[3]=r,t}function v(n,r,t=h()){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,n,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(t,t),t[3]=-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.d)(n,r),t}function U(r,s,c=h()){return(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(A,r,w(r)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(B,s,w(s)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.m)(A,B,A),function y(n,r){return n[3]=r,n}(c,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.UB)((0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.g)(c,A)))}function g(n,r,t,u=h()){return q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.U,n,D),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.b,r,E),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.d,t,F),U(D,E,D),U(D,F,u),u}function l(n){return n}function x(n){return n[3]}function w(n){return(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.EF)(n[3])}const z=[0,0,1,0],A=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),B=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),D=(h(),h()),E=h(),F=h()},"./node_modules/@arcgis/core/geometry/support/clipRay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ap:()=>p,Su:()=>a,YB:()=>g,_y:()=>y});var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_ray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js");function a(r){return r?{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.Su)(r.ray),c0:r.c0,c1:r.c1}:{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.Su)(),c0:0,c1:Number.MAX_VALUE}}function y(r,c=a()){return(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__.kT)(r,c.ray),c.c0=0,c.c1=Number.MAX_VALUE,c}function p(r,c){return j(r,r.c0,c)}function g(r,c){return j(r,r.c1,c)}function j(r,c,o){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,r.ray.origin,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(o,r.ray.direction,c))}new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__.o((()=>a()))},"./node_modules/@arcgis/core/geometry/support/frustum.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KI:()=>l,MJ:()=>m,Ou:()=>P,Su:()=>I,Yz:()=>L,kT:()=>u});var l,k,T,_core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_clipRay_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/clipRay.js"),_plane_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function I(T){return T?[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[0]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[1]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[2]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[3]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[4]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(T[5])]:[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.Su)()]}function u(T,_){for(let O=0;O<v;O++)(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.kT)(T[O],_[O]);return T}function L(T,t,E,F=S){const r=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__.SW.get(),t,T);(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.i)(r,r);for(let _=0;_<g;++_){const T=(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__.t)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__.QV.get(),b[_],r);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(F[_],T[0]/T[3],T[1]/T[3],T[2]/T[3])}!function s(T,_){(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.FAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_TOP_LEFT],T[l.LEFT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.NEAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_RIGHT],_[k.FAR_TOP_RIGHT],T[l.RIGHT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.FAR_BOTTOM_LEFT],_[k.FAR_BOTTOM_RIGHT],_[k.NEAR_BOTTOM_RIGHT],T[l.BOTTOM]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.NEAR_TOP_LEFT],_[k.NEAR_TOP_RIGHT],_[k.FAR_TOP_RIGHT],T[l.TOP]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_RIGHT],_[k.NEAR_TOP_RIGHT],T[l.NEAR]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.i_)(_[k.FAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_LEFT],_[k.FAR_TOP_LEFT],T[l.FAR])}(E,F)}function P(T,_){for(let O=0;O<v;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}function m(T,_){for(let O=0;O<v;O++){const R=T[O];if(!(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__.GQ)(R,_))return!1}return!0}(T=l||(l={}))[T.LEFT=0]="LEFT",T[T.RIGHT=1]="RIGHT",T[T.BOTTOM=2]="BOTTOM",T[T.TOP=3]="TOP",T[T.NEAR=4]="NEAR",T[T.FAR=5]="FAR",function(T){T[T.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",T[T.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",T[T.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",T[T.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",T[T.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",T[T.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",T[T.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",T[T.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(k||(k={}));k.FAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_LEFT,k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_BOTTOM_RIGHT,k.NEAR_TOP_RIGHT,k.NEAR_TOP_LEFT,k.FAR_BOTTOM_RIGHT,k.FAR_BOTTOM_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_RIGHT,k.NEAR_BOTTOM_RIGHT,k.FAR_BOTTOM_RIGHT,k.FAR_TOP_RIGHT,k.NEAR_TOP_RIGHT,k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_TOP_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_LEFT,k.NEAR_TOP_LEFT,k.NEAR_TOP_RIGHT,k.FAR_TOP_RIGHT;const v=6,g=8,b=[(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,1,1)],S=(new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__.o(_clipRay_js__WEBPACK_IMPORTED_MODULE_5__.Su),function N(){return[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()]}())},"./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>e});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js");function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.w7)(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.aw)(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.Uv)(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)M[t]===b&&(o(h,(d?A[t]:t)*s,C,b*s,s),b++);if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__.Uv)(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null},"./node_modules/@arcgis/core/geometry/support/triangulationUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Af:()=>u,C6:()=>g,yw:()=>f});var u,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/earcut.js"),_Axis_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_Indices_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"),_views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js");function f(t){const e=g(t.rings,t.hasZ,u.CCW_IS_HOLE,t.spatialReference),s=new Array;let c=0,f=0;for(const r of e.polygons){const t=r.count,l=r.index,h=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.lL)(e.position,3*l,3*t),g=r.holeIndices.map((n=>n-l)),a=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__.Uv)((0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__.e)(h,g,3));s.push({position:h,faces:a}),c+=h.length,f+=a.length}const a=function h(n,t,e){if(1===n.length)return n[0];const o=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.Gg)(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__.Uv)(r)}}(s,c,f),p=Array.isArray(a.position)?(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__.g)(a.position,3,{originalIndices:a.faces}):(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__.g)(a.position.buffer,6,{originalIndices:a.faces});return a.position=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.cp)(new Float64Array(p.buffer)),a.faces=p.indices,a}function g(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0,h=0,g=0,d=0;for(let s=0;s<r;++s)d+=n[s].length;const m=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__.Gg)(3*d);let y=0;for(let s=r-1;s>=0;s--){const d=n[s],A=e===u.CCW_IS_HOLE&&p(d,t,o);if(A&&1!==r)i[f++]=d;else{let n=d.length;for(let t=0;t<f;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:y,count:d.length}),y=A?a(d,d.length-1,-1,m,y,d.length,t):a(d,0,1,m,y,d.length,t);for(let o=0;o<f;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}f=0,e.count>0&&(l[h++]=e)}}for(let s=0;s<f;++s){const n=i[s];n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}return l.length=h,c.length=g,{position:m,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e}return r/3}function p(n,o,r){if(o){const o=n.length-1,s=(0,_views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__.ey)(n,o,r);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Z);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Z)}return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.K_)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__.k.Y)}!function(n){n[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE"}(u||(u={}))},"./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function t(t){return"point"===t.type}__webpack_require__.d(__webpack_exports__,{w:()=>t})},"./node_modules/@arcgis/core/symbols/support/gfxUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CS:()=>f,EB:()=>d,JT:()=>y,a8:()=>g,c5:()=>h});var _assets_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/assets.js"),_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_request_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/LRUCache.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js");const n="picture-fill",l="simple-fill",c="simple-line",a="simple-marker",m="text",p="cim",u=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__.o(1e3);function f(t){const r=t.style;let o=null;if(t)switch(t.type){case a:"cross"!==r&&"x"!==r&&(o=t.color);break;case l:"solid"===r?o=t.color:"none"!==r&&(o={type:"pattern",x:0,y:0,src:(0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.O)(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case n:o={type:"pattern",src:t.url,width:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(t.width)*t.xscale,height:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(t.height)*t.yscale,x:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(t.xoffset),y:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(t.yoffset)};break;case m:o=t.color;break;case p:o=(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ko)(t)}return o}function h(e,t){const o=e+"-"+t;return void 0!==u.get(o)?Promise.resolve(u.get(o)):(0,_request_js__WEBPACK_IMPORTED_MODULE_2__.c)(e,{responseType:"image"}).then((e=>{const r=e.data,s=r.naturalWidth,i=r.naturalHeight,n=document.createElement("canvas");n.width=s,n.height=i;const l=n.getContext("2d");l.fillStyle=t,l.fillRect(0,0,s,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const c=n.toDataURL();return u.put(o,c),c}))}function y(e){if(!e)return null;let t=null;switch(e.type){case l:case n:case a:t=y(e.outline);break;case c:{const r=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(e.width);null!=e.style&&"none"!==e.style&&0!==r&&(t={color:e.color,style:d(e.style),width:r,cap:e.cap,join:"miter"===e.join?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__.im)(e.miterLimit):e.join});break}default:t=null}return t}const d=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replaceAll("-","");return e[t]=r,r}})(),g=new _Color_js__WEBPACK_IMPORTED_MODULE_1__.c([128,128,128])},"./node_modules/@arcgis/core/symbols/support/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Al:()=>R,IR:()=>m,IX:()=>y,Mf:()=>N,Mx:()=>D,_I:()=>J,au:()=>I,cz:()=>k,o6:()=>p,oj:()=>h});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_symbols_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/symbols.js"),_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js")),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/layers/effects/jsonUtils.js"),_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js"),_gfxUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/gfxUtils.js"),_Symbol3DMaterial_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/Symbol3DMaterial.js");const a=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.c("white");function m(e){if(!e)return 0;if((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__._8)(e)){const t=function f(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__.WM)((0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_7__.JT)(e)?.width)}function y(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function p(e){return e.resource?.href??""}function h(n,r){if(!n)return null;let l=null;return(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__._8)(n)?l=function b(t){const o=t.symbolLayers;if(!o)return null;let n=null;return o.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.c(n):null}(n):(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.QZ)(n)&&(l="cim"===n.type?(0,_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__.Ko)(n):n.color?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.c(n.color):null),l?w(l,r):null}function w(t,o){if(null==o||null==t)return t;const n=t.toRgba();return n[3]=n[3]*o,new _Color_js__WEBPACK_IMPORTED_MODULE_0__.c(n)}function k(n,r,l){n&&(r||null!=l)&&(r&&(r=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.c(r)),(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__._8)(n)?function d(e,t,o){const n=e.symbolLayers;if(!n)return;const r=e=>w(t=t??e??(null!=o?a:null),o);n.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=r(e.color);else{const t=null!=e.material?e.material.color:null,n=r(t);null==e.material?e.material=new _Symbol3DMaterial_js__WEBPACK_IMPORTED_MODULE_8__.e({color:n}):e.material.color=n,null!=o&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=w(e.outline.color,o))}}))}(n,r,l):(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.QZ)(n)&&function j(e,t,o){(t=t??e.color)&&(e.color=w(t,o)),null!=o&&"outline"in e&&e.outline?.color&&(e.outline.color=w(e.outline.color,o))}(n,r,l))}async function g(e,t){const o=e.symbolLayers;o&&await(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__.Ar)(o,(async e=>async function L(e,t){switch(e.type){case"extrude":!function x(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function z(e,t){const o=S(t);null!=o&&(e.size=o)}(e,t);break;case"path":!function v(e,t){const o=E(t,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.O,[e.width,void 0,e.height]);e.width=C(t[0],e.width,1,o),e.height=C(t[2],e.height,1,o)}(e,t);break;case"object":await async function U(e,t){const{resourceSize:o,symbolSize:n}=await async function O(e){const{computeObjectLayerResourceSize:t}=await __webpack_require__.e(49476).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/symbols/support/symbolLayerUtils.js")),o=await t(e,10),{width:n,height:r,depth:l}=e,i=[n,l,r];let c=1;for(let s=0;s<3;s++){const e=i[s];if(null!=e){c=e/o[s];break}}for(let s=0;s<3;s++)null==i[s]&&(i[s]=o[s]*c);return{resourceSize:o,symbolSize:i}}(e),r=E(t,o,n);e.width=C(t[0],n[0],o[0],r),e.depth=C(t[1],n[1],o[1],r),e.height=C(t[2],n[2],o[2],r)}(e,t)}}(e,t)))}function S(e){for(const t of e)if("number"==typeof t)return t;return null}function E(e,t,o){for(let n=0;n<3;n++){const r=e[n];switch(r){case"symbol-value":{const e=o[n];return null!=e?e/t[n]:1}case"proportional":break;default:if(r&&t[n])return r/t[n]}}return 1}function C(e,t,o,n){switch(e){case"proportional":return o*n;case"symbol-value":return null!=t?t:o;default:return e}}async function R(e,n){if(e&&n)return(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__._8)(e)?g(e,n):void((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.QZ)(e)&&function M(e,t){const o=S(t);if(null!=o)switch(e.type){case"simple-marker":e.size=o;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=o,e.height=o*t):(e.width=o*t,e.height=o);break}case"simple-line":e.width=o;break;case"text":e.font.size=o}}(e,n))}function D(e,n,r){if(e&&null!=n)if((0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__._8)(e)){const t=e.symbolLayers;t&&t.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=n;break;case"roll":e.roll=n;break;default:e.heading=n}}))}else(0,_symbols_js__WEBPACK_IMPORTED_MODULE_1__.QZ)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=n))}function I(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,_layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__.q5)(t)}function J(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}async function N(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}},"./node_modules/@arcgis/core/views/3d/environment/CloudsData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var n,u;function N(n){return null!=n&&!n.running}__webpack_require__.d(__webpack_exports__,{Dt:()=>u,K:()=>N,SW:()=>n}),function(n){n[n.RENDERING=0]="RENDERING",n[n.FADING=1]="FADING",n[n.FINISHED=2]="FINISHED"}(n||(n={})),function(n){n[n.RG=0]="RG",n[n.BA=1]="BA"}(u||(u={}))},"./node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U$:()=>A,mm:()=>O});var O,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js"),_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Ellipsoid.js"),_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsData.js"),_weather_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/weather.js"),_support_RenderState_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/support/RenderState.js");class A{constructor(){this.readChannels=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.Dt.RG,this.renderingStage=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.SW.FINISHED,this.startTime=0,this.startTimeHeightFade=0,this.cameraPositionLastFrame=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.parallax=new C,this.parallaxNew=new C,this.pointOnGround=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.fadeMode=O.HIDE,this.fadeFactor=0,this.opacity=0}updateParallax(t){const s=this.parallax,o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.l)(t.eye);if(s.radiusCurvatureCorrectionFactor=.84*Math.sqrt(Math.max(o*o-_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__.ug.radius*_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__.ug.radius,0))/o,(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__.i_)(S,s.anchorPointClouds,g),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.k)(s.transform,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.I,g[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__.Yz)(g)),this.fadeMode===O.CROSS_FADE){const t=this.parallaxNew;(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__.i_)(S,t.anchorPointClouds,g),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.k)(t.transform,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.I,g[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__.Yz)(g))}}updateFading(t,a,i,s){this.isFading&&this._advanceFading(i,s),this._evaluateFading(t,a,i)}_evaluateFading(t,a,i){const s=t.relativeElevation,e=this._calculateDistanceToAnchorPoint(t);if((s>1.7*_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4||s<-_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4||e>v)&&this.opacity>0)this._setFade(O.HIDE,i);else if(!this.isFading)if((s>_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4||s<-.35*_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4||e>M)&&this.opacity>0)this._setFade(O.FADE_OUT,i);else if(s<=_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4&&s>=-.35*_weather_js__WEBPACK_IMPORTED_MODULE_8__.i4&&a===_support_RenderState_js__WEBPACK_IMPORTED_MODULE_9__.K.IDLE&&(0,_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.K)(this.data)){if(0===this.opacity)return void this._setFade(O.FADE_IN,i);(e>y||this.renderingStage===_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.SW.FADING)&&this._setFade(O.CROSS_FADE,i)}}_advanceFading(t,a){this._switchReadChannels(),this._updateAnchorPoint(),this._advanceFadingFactorAndOpacity(t,a)}_advanceFadingFactorAndOpacity(a,i){if(this.fadeFactor<1)return this.fadeFactor=i?(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.qk)((a-this.startTime)/(I*i),0,1):1,this.fadeMode===O.FADE_OUT&&(this.opacity=1-this.fadeFactor),this.fadeMode===O.FADE_IN&&(this.opacity=this.fadeFactor),void(this.fadeMode===O.CROSS_FADE&&(this.opacity=1));this.fadeFactor=0,this.fadeMode===O.FADE_OUT&&(this.opacity=0),this.fadeMode===O.FADE_IN&&(this.opacity=1),this.fadeMode===O.CROSS_FADE&&(this.opacity=1),this.fadeMode=O.NONE}_switchReadChannels(){const t=this.fadeMode===O.CROSS_FADE&&1===this.fadeFactor,a=this.fadeMode===O.FADE_IN&&0===this.fadeFactor;this.renderingStage===_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.SW.FADING&&(t||a)&&(this.readChannels=1-this.readChannels,this.renderingStage=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__.SW.FINISHED)}_calculateDistanceToAnchorPoint(t){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(this.pointOnGround,t.eye),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.i)(this.pointOnGround,this.pointOnGround,_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__.ug.radius),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.l)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.f)(N,this.parallax.anchorPointClouds,this.pointOnGround))}_updateAnchorPoint(){this.fadeMode===O.CROSS_FADE&&(0===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallaxNew.anchorPointClouds,this.pointOnGround),1===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallax.anchorPointClouds,this.parallaxNew.anchorPointClouds)),this.fadeMode===O.FADE_IN&&0===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallax.anchorPointClouds,this.pointOnGround)}_setFade(t,a){switch(t){case O.HIDE:this.opacity=0;break;case O.FADE_OUT:this.opacity=1;break;case O.FADE_IN:this.opacity=0;break;case O.CROSS_FADE:this.opacity=1}this.fadeMode=t,this.fadeFactor=0,this.startTime=a}get isFading(){return this.fadeMode===O.FADE_OUT||this.fadeMode===O.FADE_IN||this.fadeMode===O.CROSS_FADE}}!function(t){t[t.NONE=0]="NONE",t[t.HIDE=1]="HIDE",t[t.FADE_OUT=2]="FADE_OUT",t[t.FADE_IN=3]="FADE_IN",t[t.CROSS_FADE=4]="CROSS_FADE"}(O||(O={}));class C{constructor(){this.anchorPointClouds=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.radiusCurvatureCorrectionFactor=0,this.transform=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.a)()}}const S=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(0,0,1),g=(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__.Su)(),N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),I=1.25,y=34e3,M=64e3,v=2e5},"./node_modules/@arcgis/core/views/3d/environment/weather.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m_:()=>weather_i,i4:()=>weather_p});var c,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),enumeration=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");let p=c=class extends JSONSupport.am{constructor(o){super(o),this.type="cloudy",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration.G)({cloudy:"cloudy"})],p.prototype,"type",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,"cloudCover",void 0),p=c=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.environment.CloudyWeather")],p);const u=p;var FoggyWeather_p;let FoggyWeather_c=FoggyWeather_p=class extends JSONSupport.am{constructor(r){super(r),this.type="foggy",this.fogStrength=.5}clone(){return new FoggyWeather_p({fogStrength:this.fogStrength})}};(0,tslib_es6._)([(0,enumeration.G)({foggy:"foggy"})],FoggyWeather_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],FoggyWeather_c.prototype,"fogStrength",void 0),FoggyWeather_c=FoggyWeather_p=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.environment.FoggyWeather")],FoggyWeather_c);const n=FoggyWeather_c;var i;let RainyWeather_p=i=class extends JSONSupport.am{constructor(r){super(r),this.type="rainy",this.cloudCover=.5,this.precipitation=.5}clone(){return new i({cloudCover:this.cloudCover,precipitation:this.precipitation})}};(0,tslib_es6._)([(0,enumeration.G)({rainy:"rainy"})],RainyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"precipitation",void 0),RainyWeather_p=i=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.environment.RainyWeather")],RainyWeather_p);const RainyWeather_c=RainyWeather_p;var SnowyWeather_i;let SnowyWeather_p=SnowyWeather_i=class extends JSONSupport.am{constructor(o){super(o),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled"}clone(){return new SnowyWeather_i({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};(0,tslib_es6._)([(0,enumeration.G)({snowy:"snowy"})],SnowyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"precipitation",void 0),(0,tslib_es6._)([(0,property.qq)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],SnowyWeather_p.prototype,"snowCover",void 0),SnowyWeather_p=SnowyWeather_i=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.environment.SnowyWeather")],SnowyWeather_p);const SnowyWeather_n=SnowyWeather_p;var SunnyWeather_p;let SunnyWeather_c=SunnyWeather_p=class extends JSONSupport.am{constructor(r){super(r),this.type="sunny",this.cloudCover=.5}clone(){return new SunnyWeather_p({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration.G)({sunny:"sunny"})],SunnyWeather_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property.qq)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SunnyWeather_c.prototype,"cloudCover",void 0),SunnyWeather_c=SunnyWeather_p=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.environment.SunnyWeather")],SunnyWeather_c);const weather_n={key:"type",base:SunnyWeather_c,typeMap:{sunny:SunnyWeather_c,cloudy:u,rainy:RainyWeather_c,snowy:SnowyWeather_n,foggy:n}};Object.keys(weather_n.typeMap);const weather_p=1e4,weather_i=1e5},"./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>o});var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js"),_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.QV)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.NX)(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ih)(t.unit)?t.unit:"meters",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t?.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.ct)(t),(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.A3)(this._featureExpressionInfoContext,(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.sj)(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}},"./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A5:()=>u,IH:()=>m,Y$:()=>R,aA:()=>p,cz:()=>d,eG:()=>f,gZ:()=>c,sb:()=>T,wP:()=>g});var T,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js"),_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js"),_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js"),_graphicUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js"),_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js");function u(e,t,n,o,i,s,a,l,u,c,f){const d=j[f.mode];let m,p,g=0;if((0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(e,t,n,o,u.spatialReference,i,l))return d.requiresAlignment(f)?(g=d.applyElevationAlignmentBuffer(o,i,s,a,l,u,c,f),m=s,p=a):(m=o,p=i),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(m,u.spatialReference,p,s,c.spatialReference,a,l)?g:void 0}function c(e,t,n,o,r){const s=((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__.w)(e)?e.z:(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.sz)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.Ej)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.Ej)(t,e,"ground")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"relative-to-scene":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.Ej)(t,e,"scene")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"absolute-height":{const i=n.geometryZWithOffset(s,o),a=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.Ej)(t,e,"ground")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,x),x.z}function d(e,t,n){return null==t||null==n?e.definedChanged:"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?T.UPDATE:e.onTheGroundChanged}function m(e){return"relative-to-ground"===e||"relative-to-scene"===e}function p(e){return"absolute-height"!==e}function g(t,n,r,i,a){c(n,r,a,i,x),(0,_graphicUtils_js__WEBPACK_IMPORTED_MODULE_5__.oh)(t,x.verticalDistanceToGround);const l=x.sampledElevation,u=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(O,t.transformation);return z[0]=n.x,z[1]=n.y,z[2]=x.z,(0,_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__.y)(n.spatialReference,z,u,i.spatialReference)?t.transformation=u:console.warn("Could not locate symbol object properly, it might be misplaced"),l}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(T||(T={}));const j={"absolute-height":{applyElevationAlignmentBuffer:function A(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],s=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?s+l:l,t+=3,o+=3}return 0},requiresAlignment:function y(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function v(e,t,n,o,r,i){let s=0;const a=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,a,"ground")??0;s+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return s/r},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function h(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"ground")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function E(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"scene")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0}},O=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),x=new R,z=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A3:()=>l,EX:()=>f,GY:()=>a,NX:()=>i,ct:()=>o,kR:()=>d,sj:()=>s});var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js");const c=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__.c.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}async function a(e,r,c,o){const u=e?.expression;if("string"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__.uK)();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.wp)(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c.errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.CG)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||"0"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return"0"===e?0:null}},"./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Kc:()=>S,Qd:()=>R,Sg:()=>F,_E:()=>O,_s:()=>V,cN:()=>D,cX:()=>w,ey:()=>I,oh:()=>k});var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js"),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/centroid.js"),_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function w(t,e){if("point"===t.type)return M(t,e,!1);if((0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__.kv)(t))switch(t.type){case"extent":return M(t.center,e,!1);case"polygon":return M(t.centroid,e,!1);case"polyline":return M(A(t),e,!0);case"mesh":return M(t.origin,e,!1)}else switch(t.type){case"extent":return M(function P(t){return(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__.A)(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return M(function z(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__.Mv)(t.rings,!!t.hasZ);return(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__.A)(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return M(A(t),e,!0)}}function A(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__.IP)(e,(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__.o3)(e)/2);return(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__.A)(n[0],n[1],n[2],t.spatialReference)}function M(t,e,n){const r=n?t:(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__.EX)(t);return e&&t?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.projectPoint)(t,r,e)?r:null:r}function R(t,e,n,r=0){if(t){e||(e=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.Su)());const o=t;let i=.5*o.width*(n-1),s=.5*o.height*(n-1);return o.width<1e-7*o.height?i+=s/20:o.height<1e-7*o.width&&(s+=i/20),(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.s)(e,o.xmin-i-r,o.ymin-s-r,o.xmax+i+r,o.ymax+s+r),e}return null}function k(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.K.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttributeUpdated(t.geometries[n],_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__.K.AUXPOS1))}}function F(t,e,n=null){const r=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.d)(_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.O);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=e?r[3]=e:null!=t&&t.length>3&&(r[3]=t[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function O(t=_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.O,e,n,r=1){const o=new Array(3);if(null==e||null==n)o[0]=1,o[1]=1,o[2]=1;else{let r,i=0;for(let s=2;s>=0;s--){const u=t[s];let l;const a=null!=u,m=0===s&&!r&&!a,c=n[s];"symbol-value"===u||m?l=0!==c?e[s]/c:1:a&&"proportional"!==u&&isFinite(u)&&(l=0!==c?u/c:1),null!=l&&(o[s]=l,r=l,i=Math.max(i,Math.abs(l)))}for(let t=2;t>=0;t--)null==o[t]?o[t]=r:0===o[t]&&(o[t]=.001*i)}for(let i=2;i>=0;i--)o[i]/=r;return(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.e)(o)}function D(t){return I(function B(t){return null!=t.isPrimitive}(t)?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function I(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function S(t,i,s,u=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.a)()){return t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.o)(u,u,-t/180*Math.PI),i&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.r)(u,u,i/180*Math.PI),s&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.n)(u,u,s/180*Math.PI),u}function V(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const o=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__.k8)(n),i=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.uE)(e)*o,s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.Km)(e)*o,u=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.IR)(e)*(n.isGeographic?1:o);return 0===i&&0===s&&0===u?r.minDemResolutionForPoints:.01*Math.max(i,s,u)}},"./node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cg:()=>A,EX:()=>d,In:()=>O,ey:()=>j,iE:()=>w,ic:()=>D});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/earcut.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),_webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");function j(e,r,o){const i=function h(t,o,n,a){const s=(t=>!Array.isArray(t[0]))(o)?(t,e)=>o[3*t+e]:(t,e)=>o[t][e],c=a?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.k8)(a)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.gl)(a):1;return(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.XX)(t,((t,e)=>(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(t,s(e,0)*c,s(e,1)*c,s(e,2))),n)}(y,e,r,o)?(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.i4)(y):[0,0,1];return Math.abs(i[2])>Math.cos((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.EF)(80))?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Z:Math.abs(i[1])>Math.abs(i[0])?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Y:_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.X}const y=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__.Su)();function w(t,e,r){const i=j(t,(e.length>0?e[0]:t.length/3)-1,r);if(i!==_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__.k.Z){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+i]=t[e+2]}return(0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__.e)(t,e,3)}function d(t){const e=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.position,t.indices,3,!0)]],r=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__.MM)(t.indices.length);return null!=t.attributeData.colorFeature?e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O([t.attributeData.colorFeature],r,1,!0)]):t.attributeData.color&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.color,r,4,!0)]),t.attributeData.uvMapSpace&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.UVMAPSPACE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.BOUNDINGRECT,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.boundingRect,t.indices,9,!0)]),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.K(t.material,e,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__.C.Mesh,t.attributeData.objectAndLayerIdColor)}function D(t,e=null){const r=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.position,t.indices,3,!0)],[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.K.UV0,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__.O(t.attributeData.uv0,t.indices,2,!0)]];return new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.K(t.material,r,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__.C.Mesh,e)}function A(t){switch(t.type){case"extent":if(t instanceof _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__.c)return _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__.c.fromExtent(t);break;case"polygon":return t}return null}class O{constructor(t,e,r){this.renderData=t,this.layerUid=e,this.graphicUid=r,this.outGeometries=new Array}}},"./node_modules/@arcgis/core/views/3d/layers/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var e,a,t;__webpack_require__.d(__webpack_exports__,{CU:()=>e,a_:()=>a,s7:()=>t}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(e||(e={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(a||(a={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(t||(t={}))},"./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ej:()=>a,eU:()=>r,sz:()=>t});var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js");class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return"array"in e}function a(r,a,n="ground"){if((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__.w)(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}},"./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>r});var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");function r(e,r=0){const n=e.stride;return Array.from(e.fields.keys()).map((i=>{const s=e.fields.get(i),u=s.constructor.ElementCount,f=o(s.constructor.ElementType),c=s.offset,l=!(!s.optional||!s.optional.glNormalized);return new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__.q(i,u,f,c,n,l,r)}))}function o(e){const t=n[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const n={u8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.UNSIGNED_BYTE,u16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.UNSIGNED_SHORT,u32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.UNSIGNED_INT,i8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.BYTE,i16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.SHORT,i32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.INT,f32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.Ck.FLOAT}},"./node_modules/@arcgis/core/views/3d/support/engineContent/line.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>b,S:()=>R});var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/ellipsoidUtils.js"),_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectors.js"),_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/FloatArray.js"),_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function b(t,e,r=null){const o=[],n=e.mapPositions;!function g(t,e){const{attributeData:{position:r},removeDuplicateStartEnd:o}=t,n=function A(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}(r)&&o,i=r.length/3-(n?1:0),a=new Array(2*(i-1)),u=n?r.slice(0,-3):r;let s=0;for(let l=0;l<i-1;l++)a[s++]=l,a[s++]=l+1;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O(u,a,3,n)])}(e,o);const i=o[0][1].data,a=o[0][1].indices.length,u=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__.MM)(a);return function h(t,e,r){if(null!=t.attributeData.colorFeature)return;const n=t.attributeData.color;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O(n??_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.O,r,4)])}(e,o,u),function j(t,e,r){null==t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.SIZE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O([t.attributeData.size??1],r,1,!0)])}(e,o,u),function T(t,e,r){t.attributeData.normal&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.NORMAL,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O(t.attributeData.normal,r,3)])}(e,o,u),function D(t,e,r){null!=t.attributeData.colorFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O([t.attributeData.colorFeature],r,1,!0)])}(e,o,u),function w(t,e,r){null!=t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.SIZEFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O([t.attributeData.sizeFeature],r,1,!0)])}(e,o,u),function y(t,e,r){null!=t.attributeData.opacityFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.OPACITYFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O([t.attributeData.opacityFeature],r,1,!0)])}(e,o,u),function E(r,o,s){if(null==r.overlayInfo||r.overlayInfo.renderCoordsHelper.viewingMode!==_ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__.UZ.Global||!r.overlayInfo.spatialReference.isGeographic)return;const p=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__.Gg)(s.length),f=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__.e0)(r.overlayInfo.spatialReference);for(let t=0;t<p.length;t+=3)(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_5__.KC)(s,t,p,t,f);const b=s.length/3,g=(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__.mc)(b+1);let h=I,T=F,D=0,j=0;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(h,p[j++],p[j++],p[j++]),g[0]=0;for(let n=1;n<b+1;++n)n===b&&(j=0),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(T,p[j++],p[j++],p[j++]),D+=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.p)(h,T),g[n]=D,[h,T]=[T,h];o.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__.K.DISTANCETOSTART,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__.O(g,o[0][1].indices,1,!0)])}(e,o,i),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_12__.K(t,o,n,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_11__.C.Line,r)}const I=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),F=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)();function R(t,e){if(null==t||0===t.length)return[];const r=[];return t.forEach((t=>{const o=t.length,n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__.Gg)(3*o);t.forEach(((t,e)=>{n[3*e]=t[0],n[3*e+1]=t[1],n[3*e+2]=t[2]}));const i={attributeData:{position:n,normal:e},removeDuplicateStartEnd:!1};r.push(i)})),r}},"./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OW:()=>m,WG:()=>w,b0:()=>s,wX:()=>p});__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const m=64,s=m/2,n=s/5,p=m/n,w=.25},"./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cg:()=>u,Mp:()=>o,c1:()=>e,s7:()=>a});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js"),_webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");const e=128,o=.5;function a(t){return"cross"===t||"x"===t}function u(t,a=e,u=a*o,s=0){const i=c(t,a,u,s);return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__.w(i,{mipmap:!1,wrap:{s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.Qz.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.Qz.CLAMP_TO_EDGE},width:a,height:a,components:4,noUnpackFlip:!0,reloadable:!0})}function c(t,r=e,n=r*o,a=0){switch(t){case"circle":default:return function s(t,r){const n=t/2-.5;return x(t,T(n,n,r/2))}(r,n);case"square":return function i(t,r){return p(t,r,!1)}(r,n);case"cross":return function h(t,r,n=0){return b(t,r,!1,n)}(r,n,a);case"x":return function M(t,r,n=0){return b(t,r,!0,n)}(r,n,a);case"kite":return function f(t,r){return p(t,r,!0)}(r,n);case"triangle":return function l(t,r){return x(t,w(t/2,r,r/2))}(r,n);case"arrow":return function m(t,r){const n=r,e=r/2,o=t/2,a=.8*n,u=T(o,(t-r)/2-a,Math.sqrt(a*a+e*e)),c=w(o,n,e);return x(t,((t,r)=>Math.max(c(t,r),-u(t,r))))}(r,n)}}function p(t,r,n){return n&&(r/=Math.SQRT2),x(t,((e,o)=>{let a=e-.5*t+.25,u=.5*t-o-.75;if(n){const t=(a+u)/Math.SQRT2;u=(u-a)/Math.SQRT2,a=t}return Math.max(Math.abs(a),Math.abs(u))-.5*r}))}function b(t,r,n,e=0){r-=e,n&&(r*=Math.SQRT2);const o=.5*r;return x(t,((r,a)=>{let u,c=r-.5*t,s=.5*t-a-1;if(n){const t=(c+s)/Math.SQRT2;s=(s-c)/Math.SQRT2,c=t}return c=Math.abs(c),s=Math.abs(s),u=c>s?c>o?Math.sqrt((c-o)*(c-o)+s*s):s:s>o?Math.sqrt(c*c+(s-o)*(s-o)):c,u-=e/2,u}))}function T(t,r,n){return(e,o)=>{const a=e-t,u=o-r;return Math.sqrt(a*a+u*u)-n}}function w(t,r,n){const e=Math.sqrt(r*r+n*n);return(o,a)=>{const u=Math.abs(o-t)-n,c=a-t+r/2+.75,s=(r*u+n*c)/e,i=-c;return Math.max(s,i)}}function x(r,n){const e=new Uint8Array(4*r*r);for(let o=0;o<r;o++)for(let a=0;a<r;a++){const u=a+r*o;let c=n(a,o);c=c/r+.5,(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__.K)(c,e,4*u)}return e}},"./node_modules/@arcgis/core/views/3d/support/renderInfoUtils/line.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>l,y:()=>p});var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js"),_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/triangulationUtils.js"),_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js"),_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js");function p(o,t,s,p){const l="polygon"===o.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Af.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Af.NONE,a="polygon"===o.type?o.rings:o.paths,{position:u,outlines:f}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.C6)(a,!!o.hasZ,l,o.spatialReference),g=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.Gg)(u.length),m=(0,_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__.A5)(u,o.spatialReference,0,g,0,u,0,u.length/3,t,s,p),y=null!=m;return{lines:y?c(f,u,g):[],projectionSuccess:y,sampledElevation:m}}function l(e,t){const i="polygon"===e.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Af.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Af.NONE,p="polygon"===e.type?e.rings:e.paths,{position:l,outlines:a}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__.C6)(p,!1,i),u=(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__.projectBuffer)(l,e.spatialReference,0,l,t,0,l.length/3);for(let o=2;o<l.length;o+=3)l[o]=_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__.IY;return{lines:u?c(a,l):[],projectionSuccess:u}}function c(o,e,n=null){const r=new Array;for(const{index:i,count:s}of o){if(s<=1)continue;const o=3*i,p=3*s;r.push({position:(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.lL)(e,3*i,3*s),mapPositions:null!=n?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.lL)(n,o,p):void 0})}return r}},"./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{IY:()=>se});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),MapUtils=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),SetUtils=__webpack_require__("./node_modules/@arcgis/core/core/SetUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),arrayUtils=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js")),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/interfaces.js"),debugFlags=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/debugFlags.js"),terrain_interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/terrain/interfaces.js"),aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),LocalOriginFactory=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js");class Overlay_r{constructor(){this._extent=(0,aaBoundingRect.Su)(),this.resolution=0,this.renderLocalOrigin=(0,LocalOriginFactory.W)(0,0,0,"O"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new Overlay_o}get extent(){return this._extent}setupGeometryViewsCyclical(e){this.setupGeometryViewsDirect();const s=.001*e.range;if(this._extent[0]-s<=e.min){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect.E3)(this._extent,e.range,0,s)}if(this._extent[2]+s>=e.max){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect.E3)(this._extent,-e.range,0,s)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,(0,aaBoundingRect.kT)(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}}class Overlay_o{constructor(){this.extents=[(0,aaBoundingRect.Su)(),(0,aaBoundingRect.Su)(),(0,aaBoundingRect.Su)()],this.numViews=0}}var OverlayContent_o;!function(o){o[o.Color=0]="Color",o[o.ColorNoRasterImage=1]="ColorNoRasterImage",o[o.Highlight=2]="Highlight",o[o.WaterNormal=3]="WaterNormal",o[o.Occluded=4]="Occluded",o[o.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(OverlayContent_o||(OverlayContent_o={}));class OverlayFramebufferObject_t{constructor(e,t){this._fbos=e,this._format=t}get valid(){return null!=this._handle}dispose(){this._handle=(0,maybe.gT)(this._handle)}get texture(){return this._handle?.colorTexture}bind(e,t,h){this._handle&&this._handle.fbo.width===t&&this._handle.fbo.height===h||(this._handle?.release(),this._handle=this._fbos.acquire(this._format,t,h)),e.bindFramebuffer(this._handle?.fbo)}generateMipMap(){this._handle?.colorTexture?.descriptor?.hasMipmap&&this._handle?.colorTexture?.generateMipmap()}}var FBOCache=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOCache.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js");class OverlayRenderTargets_s{constructor(e,o,s,a=FBOCache._s.RGBA_MIPMAP){this.output=o,this.content=s,this.fbo=new OverlayFramebufferObject_t(e,a)}get valid(){return this.fbo.valid}}class OverlayRenderTargets_a{constructor(r){this.targets=[new OverlayRenderTargets_s(r,ShaderOutput.m.Color,OverlayContent_o.Color),new OverlayRenderTargets_s(r,ShaderOutput.m.Color,OverlayContent_o.ColorNoRasterImage),new OverlayRenderTargets_s(r,ShaderOutput.m.Highlight,OverlayContent_o.Highlight,FBOCache._s.RGBA4),new OverlayRenderTargets_s(r,ShaderOutput.m.Normal,OverlayContent_o.WaterNormal),new OverlayRenderTargets_s(r,ShaderOutput.m.Color,OverlayContent_o.Occluded)],(0,has.c)("enable-feature:objectAndLayerId-rendering")&&this.targets.push(new OverlayRenderTargets_s(r,ShaderOutput.m.ObjectAndLayerIdColor,OverlayContent_o.ObjectAndLayerIdColor))}getTexture(e){return this.targets[e]?.fbo.texture}dispose(){for(const e of this.targets)e.fbo.dispose()}computeValidity(){return this.targets.reduce(((e,r,t)=>r.valid?e|=1<<t:e),0)}}var AllRenderPasses_o,vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),VertexNormal_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js");VertexNormal_glsl.Yj;!function(t){t[t.Material=0]="Material",t[t.ShadowMap=1]="ShadowMap",t[t.Highlight=2]="Highlight"}(AllRenderPasses_o||(AllRenderPasses_o={}));__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js");var Uniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js");__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js");Uniform.C;var Overlay_glsl_f;__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");!function(e){e[e.Disabled=0]="Disabled",e[e.Enabled=1]="Enabled",e[e.EnabledWithWater=2]="EnabledWithWater",e[e.COUNT=3]="COUNT"}(Overlay_glsl_f||(Overlay_glsl_f={}));Uniform.C;(0,vec4f64.c)();var TextureOnly_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js"),NestedMap=__webpack_require__("./node_modules/@arcgis/core/core/NestedMap.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js");class ShaderTechniqueRepository_r{constructor(t){this._context=t,this._perConstructorInstances=new NestedMap.q,this._frameCounter=0,this._keepAliveFrameCount=ShaderTechniqueRepository_n}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}destroy(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.destroy())))),this._perConstructorInstances.clear()}acquire(e,t=ShaderTechniqueRepository_o){const r=t.key;let n=this._perConstructorInstances.get(e,r);if(null==n){const o=new e(this._context,t,(()=>this.release(o)));n=new ShaderTechniqueRepository_s(o),this._perConstructorInstances.set(e,r,n)}return++n.refCount,n.technique}releaseAndAcquire(e,t,r){if(null!=r){if(t.key===r.key)return r;this.release(r)}return this.acquire(e,t)}release(e){if(null==e||this._perConstructorInstances.empty)return;const t=this._perConstructorInstances.get(e.constructor,e.key);null!=t&&(--t.refCount,0===t.refCount&&(t.refZeroFrame=this._frameCounter))}frameUpdate(){this._frameCounter++,this._keepAliveFrameCount!==ShaderTechniqueRepository_n&&this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((e,r)=>{0===e.refCount&&e.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(e.technique.destroy(),this._perConstructorInstances.delete(t,r))}))}))}async reloadAll(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{e.push((async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>e.technique.reload(this._context))))})(t,r))})),await Promise.all(e)}}class ShaderTechniqueRepository_s{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}const ShaderTechniqueRepository_n=-1,ShaderTechniqueRepository_o=new ShaderTechniqueConfiguration.K;var RenderPlugin=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js"),Camera=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");class GLMaterialRepository_s{constructor(e,t,i,s){this._textureRepository=e,this._techniqueRepository=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new NestedMap.q}dispose(){this._textureRepository.destroy()}acquire(e,t,r){if(this._ownMaterial(e),!e.produces(t,r))return null;let i=this._id2glMaterialRef.get(r,e.id);if(null==i){const t=e.createGLMaterial({material:e,techniqueRep:this._techniqueRepository,textureRepository:this._textureRepository,output:r});i=new GLMaterialRepository_o(t),this._id2glMaterialRef.set(r,e.id,i)}return i.ref(),i.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||((0,maybe.yI)(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){t.repository&&t.repository!==this&&Logger.c.getLogger("esri.views.3d.webgl-engine.lib.GLMaterialRepository").error("Material is already owned by a different material repository"),t.repository=this}}class GLMaterialRepository_o{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,(0,Util.Uc)(this._refCnt>=0)}get referenced(){return this._refCnt>0}}var DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),VertexElementDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");new VertexElementDescriptor.q(VertexAttribute.K.POSITION,3,enums.Ck.FLOAT,0,12),new VertexElementDescriptor.q(VertexAttribute.K.POSITION,3,enums.Ck.FLOAT,0,20),new VertexElementDescriptor.q(VertexAttribute.K.UV0,2,enums.Ck.FLOAT,12,20),new VertexElementDescriptor.q(VertexAttribute.K.POSITION,3,enums.Ck.FLOAT,0,32),new VertexElementDescriptor.q(VertexAttribute.K.NORMAL,3,enums.Ck.FLOAT,12,32),new VertexElementDescriptor.q(VertexAttribute.K.UV0,2,enums.Ck.FLOAT,24,32),new VertexElementDescriptor.q(VertexAttribute.K.POSITION,3,enums.Ck.FLOAT,0,16),new VertexElementDescriptor.q(VertexAttribute.K.COLOR,4,enums.Ck.UNSIGNED_BYTE,12,16),new VertexElementDescriptor.q(VertexAttribute.K.POSITION,2,enums.Ck.FLOAT,0,8),new VertexElementDescriptor.q(VertexAttribute.K.POSITION,2,enums.Ck.FLOAT,0,16),new VertexElementDescriptor.q(VertexAttribute.K.UV0,2,enums.Ck.FLOAT,8,16);var VertexArrayObject=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js"),BufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");var GridLocalOriginFactory=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),mat4f64=(__webpack_require__("./node_modules/@arcgis/core/core/time.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js")),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),CloudsParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js"),HUDRenderStyle=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js"),MultipassGeometryTest_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js"),MultipassTerrainTest_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),basicInterfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),SceneLighting=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js");class BindParameters_m{constructor(i,m){this.shadowMap=i,this.slicePlane=m,this.slot=RenderSlot.y.OPAQUE_MATERIAL,this.hasOccludees=!1,this.enableFillLights=!0,this.transparencyPassType=TransparencyPassType.H.NONE,this.alignPixelEnabled=!1,this.decorations=basicInterfaces.C2.ON,this.overlayStretch=1,this._camera=new Camera.U,this._inverseViewport=(0,vec2f64.a)(),this.oldLighting=new SceneLighting.w,this.newLighting=new SceneLighting.w,this._fadedLighting=new SceneLighting.w,this._lighting=this.newLighting,this.ssr=new BindParameters_c,this.multipassEnabled=!1,this.multipassTerrain=new MultipassTerrainTest_glsl.i,this.multipassGeometry=new MultipassGeometryTest_glsl.u,this.hudRenderStyle=HUDRenderStyle.O.Occluded,this.cloudsFade=new CloudsParameters.U$}get camera(){return this._camera}set camera(i){this._camera=i,this._inverseViewport[0]=1/i.fullViewport[2],this._inverseViewport[1]=1/i.fullViewport[3]}get inverseViewport(){return this._inverseViewport}get lighting(){return this._lighting}get weatherFading(){return this._lighting===this._fadedLighting}fadeLighting(i){const{oldLighting:t,newLighting:e}=this;i>=1?this._lighting=e:(this._fadedLighting.lerpLighting(t,e,i),this._lighting=this._fadedLighting)}}class BindParameters_c{constructor(){this.fadeFactor=1,this.reprojectionMatrix=(0,mat4f64.a)()}}class RenderContext_i{constructor(e,a,i=null){this.rctx=e,this.sliceHelper=i,this.lastFrameCamera=new Camera.U,this.output=ShaderOutput.m.Color,this.renderOccludedMask=RenderContext_l,this.bindParameters=new BindParameters_m(a,null!=i?i.plane:null),this.bindParameters.alignPixelEnabled=!0}resetRenderOccludedMask(){this.renderOccludedMask=RenderContext_l}}const RenderContext_l=Material.C2.Occlude|Material.C2.OccludeAndTransparent|Material.C2.OccludeAndTransparentStencil;var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js");let CascadeCamera_p=class extends Camera.U{constructor(){super(...arguments),this._projectionMatrix=(0,mat4f64.a)()}get projectionMatrix(){return this._projectionMatrix}};(0,tslib_es6._)([(0,property.qq)()],CascadeCamera_p.prototype,"_projectionMatrix",void 0),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],CascadeCamera_p.prototype,"projectionMatrix",null),CascadeCamera_p=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.webgl-engine.lib.CascadeCamera")],CascadeCamera_p);var W,textureUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js");!function(t){t[t.Highlight=0]="Highlight",t[t.Default=1]="Default"}(W||(W={}));class z{constructor(){this.camera=new CascadeCamera_p,this.lightMat=(0,mat4f64.a)()}}class P{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class q{get depthTexture(){return this._handle?.colorTexture}get _textureWidth(){return this._textureHeight*this._numCascades}get numCascades(){return this._numCascades}get cascadeDistances(){return(0,vec4.s)(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}constructor(t,s){this._fbos=t,this._viewingMode=s,this._enabled=!1,this._snapshots=new Array,this._textureHeight=0,this._numCascades=1,this.settings=new P,this._projectionView=(0,mat4f64.a)(),this._projectionViewInverse=(0,mat4f64.a)(),this._modelViewLight=(0,mat4f64.a)(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=(0,vec4f64.c)(),this._cascades=[new z,new z,new z,new z],this._lastOrigin=null,this._maxTextureWidth=Math.min((0,has.c)("esri-mobile")?4096:16384,t.rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}disposeOffscreenBuffers(){this._handle=(0,maybe.gT)(this._handle),this._discardSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=(0,mathUtils.qk)(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}get cascades(){for(let t=0;t<this._numCascades;++t)et[t]=this._cascades[t];return et.length=this._numCascades,et}start(t,s,e,a,i){(0,Util.Uc)(this.enabled);const{near:r,far:h}=this._clampNearFar(e);this._computeCascadeDistances(r,h,a),this._textureHeight=this._computeTextureHeight(t,i,a),this._setupMatrices(t,s);const{viewMatrix:n,projectionMatrix:c}=t;for(let o=0;o<this._numCascades;++o)this._constructCascade(o,c,n,s);this._lastOrigin=null,this.clear()}finish(){(0,Util.Uc)(this.enabled),this._handle?.releaseDepth()}getShadowMapMatrices(t){if(!this._lastOrigin||!(0,vec3.h)(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||(0,vec3f64.c)(),(0,vec3.c)(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){(0,mat4.w)(at,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)it[16*s+t]=at[t]}}return it}moveSnapshot(t){(0,Util.Uc)(this.enabled),this._handle?.releaseDepth(),this._snapshots[t]?.release(),this._snapshots[t]=this._handle,this._handle=null}copySnapshot(t){const s=this._handle?.colorTexture?.descriptor;if(!this.enabled||!s)return;this._snapshots[t]?.release();const{width:e,height:a}=s;this._snapshots[t]=this._fbos.acquire(FBOCache._s.RGBA4,e,a);const i=this._fbos.rctx;this._bindFbo();const r=i.bindTexture(this._snapshots[t]?.colorTexture,Texture.w.TEXTURE_UNIT_FOR_UPDATES);i.gl.copyTexSubImage2D(enums.c5.TEXTURE_2D,0,0,0,0,0,e,a),i.bindTexture(r,Texture.w.TEXTURE_UNIT_FOR_UPDATES)}getSnapshot(t){return this.enabled?this._snapshots[t]?.colorTexture:null}clear(){const t=this._fbos.rctx;this._ensureFbo(),this._bindFbo(),t.setClearColor(1,1,1,1),t.clearSafe(enums.sl.COLOR_BUFFER_BIT|enums.sl.DEPTH_BUFFER_BIT)}_computeTextureHeight(t,s,e){const a=Math.min(window.devicePixelRatio,s)/t.pixelRatio,i=e?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality,r=(0,textureUtils.on)(Math.floor(Math.max(t.fullWidth,t.fullHeight)*a*i));return Math.min(this._maxTextureWidth,this._numCascades*r)/this._numCascades}_ensureFbo(){this._handle?.fbo.width===this._textureWidth&&this._handle?.fbo.height===this._textureHeight||(this._handle?.release(),this._handle=this._fbos.acquire(FBOCache._s.RGBA4,this._textureWidth,this._textureHeight)),this._handle.acquireDepth(FBOCache.A5.DEPTH16_BUFFER)}_discardSnapshot(t){this._snapshots[t]=(0,maybe.gT)(this._snapshots[t])}_discardSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}_bindFbo(){const t=this._fbos.rctx;t.unbindTexture(this.depthTexture),t.bindFramebuffer(this._handle?.fbo)}_constructCascade(t,s,e,a){const i=this._cascades[t],n=-this._cascadeDistances[t],c=-this._cascadeDistances[t+1],o=(s[10]*n+s[14])/Math.abs(s[11]*n+s[15]),u=(s[10]*c+s[14])/Math.abs(s[11]*c+s[15]);(0,Util.Uc)(o<u);for(let r=0;r<8;++r){(0,vec4.s)(X,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?o:u,1);const t=J[r];(0,vec4.t)(t,X,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}(0,vec3.E)(st,J[0]),i.camera.viewMatrix=(0,mat4.w)(G,this._modelViewLight,st);for(let r=0;r<8;++r)(0,vec3.e)(J[r],J[r],i.camera.viewMatrix);let l=J[0][2],_=J[0][2];for(let r=1;r<8;++r)l=Math.min(l,J[r][2]),_=Math.max(_,J[r][2]);l-=200,_+=200,i.camera.near=-_,i.camera.far=-l,function Ct(t,s,a,i,r){const h=1/J[0][3],n=1/J[4][3];(0,Util.Uc)(h<n);let c=h+Math.sqrt(h*n);const o=Math.sin((0,mathUtils.Uj)(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));c/=o,function ft(t,s,e,a,i,r,h,n){(0,vec2.s)(rt,0,0);for(let l=0;l<4;++l)(0,vec2.i)(rt,rt,t[l]);(0,vec2.a)(rt,rt,.25),(0,vec2.s)(ht,0,0);for(let l=4;l<8;++l)(0,vec2.i)(ht,ht,t[l]);(0,vec2.a)(ht,ht,.25),(0,vec2.l)(nt[0],t[4],t[5],.5),(0,vec2.l)(nt[1],t[5],t[6],.5),(0,vec2.l)(nt[2],t[6],t[7],.5),(0,vec2.l)(nt[3],t[7],t[4],.5);let c=0,o=(0,vec2.k)(nt[0],rt);for(let l=1;l<4;++l){const t=(0,vec2.k)(nt[l],rt);t<o&&(o=t,c=l)}(0,vec2.c)(ct,nt[c],t[c+4]);const u=ct[0];let w,C;ct[0]=-ct[1],ct[1]=u,(0,vec2.c)(ot,ht,rt),(0,vec2.g)(ot,ct)<0&&(0,vec2.n)(ct,ct),(0,vec2.l)(ct,ct,ot,e),(0,vec2.e)(ct,ct),w=C=(0,vec2.g)((0,vec2.c)(ut,t[0],rt),ct);for(let l=1;l<8;++l){const s=(0,vec2.g)((0,vec2.c)(ut,t[l],rt),ct);s<w?w=s:s>C&&(C=s)}(0,vec2.j)(a,rt),(0,vec2.a)(ut,ct,w-s),(0,vec2.i)(a,a,ut);let j=-1,T=1,y=0,D=0;for(let l=0;l<8;++l){(0,vec2.c)(lt,t[l],a),(0,vec2.e)(lt,lt);const s=ct[0]*lt[1]-ct[1]*lt[0];s>0?s>j&&(j=s,y=l):s<T&&(T=s,D=l)}(0,Util.gT)(j>0,"leftArea"),(0,Util.gT)(T<0,"rightArea"),(0,vec2.a)(_t,ct,w),(0,vec2.i)(_t,_t,rt),(0,vec2.a)(dt,ct,C),(0,vec2.i)(dt,dt,rt),mt[0]=-ct[1],mt[1]=ct[0];const H=(0,Util.Uh)(a,t[D],dt,(0,vec2.i)(ut,dt,mt),1,i),v=(0,Util.Uh)(a,t[y],dt,ut,1,r),S=(0,Util.Uh)(a,t[y],_t,(0,vec2.i)(ut,_t,mt),1,h),F=(0,Util.Uh)(a,t[D],_t,ut,1,n);(0,Util.gT)(H,"rayRay"),(0,Util.gT)(v,"rayRay"),(0,Util.gT)(S,"rayRay"),(0,Util.gT)(F,"rayRay")}(J,c,o,K,Y,Z,$,tt),function wt(t,s,e,a,i){(0,vec2.c)(bt,e,a),(0,vec2.a)(bt,bt,.5),Mt[0]=bt[0],Mt[1]=bt[1],Mt[2]=0,Mt[3]=bt[1],Mt[4]=-bt[0],Mt[5]=0,Mt[6]=bt[0]*bt[0]+bt[1]*bt[1],Mt[7]=bt[0]*bt[1]-bt[1]*bt[0],Mt[8]=1,Mt[pt(0,2)]=-(0,vec2.g)(xt(Mt,0),t),Mt[pt(1,2)]=-(0,vec2.g)(xt(Mt,1),t);let r=(0,vec2.g)(xt(Mt,0),e)+Mt[pt(0,2)],h=(0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)],n=(0,vec2.g)(xt(Mt,0),a)+Mt[pt(0,2)],c=(0,vec2.g)(xt(Mt,1),a)+Mt[pt(1,2)];r=-(r+n)/(h+c),Mt[pt(0,0)]+=Mt[pt(1,0)]*r,Mt[pt(0,1)]+=Mt[pt(1,1)]*r,Mt[pt(0,2)]+=Mt[pt(1,2)]*r,r=1/((0,vec2.g)(xt(Mt,0),e)+Mt[pt(0,2)]),h=1/((0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)]),Mt[pt(0,0)]*=r,Mt[pt(0,1)]*=r,Mt[pt(0,2)]*=r,Mt[pt(1,0)]*=h,Mt[pt(1,1)]*=h,Mt[pt(1,2)]*=h,Mt[pt(2,0)]=Mt[pt(1,0)],Mt[pt(2,1)]=Mt[pt(1,1)],Mt[pt(2,2)]=Mt[pt(1,2)],Mt[pt(1,2)]+=1,r=(0,vec2.g)(xt(Mt,1),s)+Mt[pt(1,2)],h=(0,vec2.g)(xt(Mt,2),s)+Mt[pt(2,2)],n=(0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)],c=(0,vec2.g)(xt(Mt,2),e)+Mt[pt(2,2)],r=-.5*(r/h+n/c),Mt[pt(1,0)]+=Mt[pt(2,0)]*r,Mt[pt(1,1)]+=Mt[pt(2,1)]*r,Mt[pt(1,2)]+=Mt[pt(2,2)]*r,r=(0,vec2.g)(xt(Mt,1),s)+Mt[pt(1,2)],h=(0,vec2.g)(xt(Mt,2),s)+Mt[pt(2,2)],n=-h/r,Mt[pt(1,0)]*=n,Mt[pt(1,1)]*=n,Mt[pt(1,2)]*=n,i[0]=Mt[0],i[1]=Mt[1],i[2]=0,i[3]=Mt[2],i[4]=Mt[3],i[5]=Mt[4],i[6]=0,i[7]=Mt[5],i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=Mt[6],i[13]=Mt[7],i[14]=0,i[15]=Mt[8]}(K,Y,$,tt,r.projectionMatrix),r.projectionMatrix[10]=2/(a-i),r.projectionMatrix[14]=-(a+i)/(a-i)}(e,a,l,_,i.camera),(0,mat4.m)(i.lightMat,i.camera.projectionMatrix,i.camera.viewMatrix);const d=this._textureHeight;i.camera.viewport=[t*d,0,d,d]}_setupMatrices(t,s){(0,mat4.m)(this._projectionView,t.projectionMatrix,t.viewMatrix),(0,mat4.i)(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===ViewingMode.UZ.Global?t.eye:(0,vec3.s)(st,0,0,1);(0,mat4.u)(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_clampNearFar(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}_computeCascadeDistances(t,e,a){const i=a?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor((0,Util.sR)(e/t,4)),i);const r=(e-t)/this._numCascades,h=(e/t)**(1/this._numCascades);let n=t,c=t;for(let o=0;o<this._numCascades+1;++o)this._cascadeDistances[o]=(0,mathUtils.Cq)(n,c,this.settings.splitSchemeLambda),n*=h,c+=r}get test(){return{cascades:this._cascades,textureHeight:this._textureHeight}}}const G=(0,mat4f64.a)(),X=(0,vec4f64.c)(),J=[];for(let jt=0;jt<8;++jt)J.push((0,vec4f64.c)());const K=(0,vec2f64.a)(),Y=(0,vec2f64.a)(),Z=(0,vec2f64.a)(),$=(0,vec2f64.a)(),tt=(0,vec2f64.a)(),st=(0,vec3f64.c)(),et=[],at=(0,mat4f64.a)(),it=mat4f64.I.concat(mat4f64.I,mat4f64.I,mat4f64.I,mat4f64.I),rt=(0,vec2f64.a)(),ht=(0,vec2f64.a)(),nt=[(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)()],ct=(0,vec2f64.a)(),ot=(0,vec2f64.a)(),ut=(0,vec2f64.a)(),lt=(0,vec2f64.a)(),_t=(0,vec2f64.a)(),dt=(0,vec2f64.a)(),mt=(0,vec2f64.a)();function pt(t,s){return 3*s+t}const gt=(0,vec2f64.a)();function xt(t,s){return(0,vec2.s)(gt,t[s],t[s+3]),gt}const bt=(0,vec2f64.a)(),Mt=(0,mat3f64.a)();var Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),IntersectorInterfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js"),IntersectorTarget=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js");__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js");class Intersector_i extends IntersectorTarget.eI{constructor(e,r,t){super(e,r),this.triangleNr=t}}class ChangeSet_s{constructor(){this.adds=new PooledArray.c,this.removes=new PooledArray.c,this.updates=new PooledArray.c({allocator:e=>e||new ChangeSet_r,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class ChangeSet_r{}class ChangeSet_t{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}var Intersector=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js"),ModelDirtyTypes=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js");function rendererUtils_t(e){return e.geometry.indexCount>=1}var glUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js"),GLMaterials=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js");class DrawParameters_i extends VertexNormal_glsl.yO{constructor(s=(0,vec3f64.c)()){super(),this.origin=s,this.slicePlaneLocalOrigin=this.origin}}var WaterMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js");class BufferRange_t{constructor(t=0,o=0){this.from=t,this.to=o}get numElements(){return this.to-this.from}}function BufferRange_o(t){const o=new Map;t.forAll((t=>o.set(t.from,t)));let e=!0;for(;e;)e=!1,t.forEach((r=>{const s=o.get(r.to);s&&(r.to=s.to,o.delete(s.from),t.removeUnordered(s),e=!0)}))}class Instance_s extends BufferRange_t{constructor(e,s,t){super(s,t),this.geometry=e}get isVisible(){return this.geometry.visible}get hasHighlights(){return null!=this.geometry.highlights&&this.isVisible}get hasOccludees(){return null!=this.geometry.occludees}}class DrawCommand_t{constructor(){this.first=0,this.count=0}}class PerBufferData_n{constructor(){this._numElements=0,this._instances=new Map,this.holes=new PooledArray.c({allocator:s=>s||new BufferRange_t,deallocator:null}),this.hasHiddenInstances=!1,this.hasHighlights=!1,this.hasOccludees=!1,this.drawCommandsDirty=!0,this.drawCommandsDefault=PerBufferData_o(),this.drawCommandsHighlight=PerBufferData_o(),this.drawCommandsOccludees=PerBufferData_o(),this.drawCommandsShadowHighlightRest=PerBufferData_o()}get numElements(){return this._numElements}get instances(){return this._instances}addInstance(s,t){this.deleteInstance(s),this._instances.set(s,t),this._numElements+=t.numElements}deleteInstance(s){const t=this._instances.get(s);t&&(this._numElements-=t.numElements,this._instances.delete(s))}updateInstance(s,t,e){const n=this._instances.get(s);n&&(this._numElements-=n.numElements,n.from=t,n.to=e,this._numElements+=n.numElements)}updateDrawState(s){s.isVisible?(s.hasHighlights&&(this.hasHighlights=!0),s.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(s){if(this.drawCommandsDefault.clear(),this.drawCommandsHighlight.clear(),this.drawCommandsOccludees.clear(),this.drawCommandsShadowHighlightRest.clear(),this.drawCommandsDirty=!1,0===this._instances.size)return;if(!this.needsMultipleCommands()){const t=this.drawCommandsDefault.pushNew(),e=this.holes.front();return null!=this.vao&&1===this.holes.length&&e.to===Math.floor(this.vao.byteSize/s)?(t.first=0,void(t.count=e.from)):(t.first=1/0,t.count=0,this._instances.forEach((s=>{t.first=Math.min(t.first,s.from),t.count=Math.max(t.count,s.to)})),void(t.count-=t.first))}const t=Array.from(this._instances.values()).sort(((s,t)=>s.from===t.from?s.to-t.to:s.from-t.from));for(const e of t)e.isVisible&&(PerBufferData_h(e.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,e),PerBufferData_h(e.hasHighlights?this.drawCommandsHighlight:this.drawCommandsShadowHighlightRest,e))}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}function PerBufferData_o(){return new PooledArray.c({allocator:s=>s||new DrawCommand_t,deallocator:s=>s})}function PerBufferData_h(s,t){const e=s.back();if(null==e){const e=s.pushNew();return e.first=t.from,void(e.count=t.numElements)}if(function PerBufferData_r(s,t){return s.first+s.count>=t.from}(e,t)){const s=t.from-e.first+t.numElements;e.count=s}else{const e=s.pushNew();e.first=t.from,e.count=t.numElements}}class PerOriginData_s{constructor(s){this.origin=s,this.buffers=new Array}dispose(){this.buffers.forEach((s=>s.vao.dispose())),this.buffers.length=0}findBuffer(s){return this.buffers.find((r=>r.instances.has(s)))}}var MemCache=__webpack_require__("./node_modules/@arcgis/core/core/MemCache.js"),MemCachePool=__webpack_require__("./node_modules/@arcgis/core/core/MemCachePool.js");const VaoCache_c=MemCache.Nx+1;class VaoCache_i{constructor(e,o,r){this._rctx=e,this._locations=o,this._layout=r,this._cache=new MemCachePool.o(e.newCache,"VAOCache")}dispose(){this._cache.destroy()}newVao(e){const t=e.toString();let c=this._cache.pop(t);return c||(c=new VertexArrayObject._(this._rctx,this._locations,{geometry:this._layout},{geometry:BufferObject.g.createVertex(this._rctx,enums._m.STATIC_DRAW)}),c.vertexBuffers.geometry.setSize(e),c)}deleteVao(e){if(null==e)return;const t=e.byteSize.toString();this._cache.put(t,e,VaoCache_c)}}let S=class extends RenderPlugin.Ul{constructor(e){super(e),this._vaoCache=null,this._glMaterials=null,this._bufferWriter=null,this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this.priority=0,this.produces=new Map}dispose(){this._glMaterials=(0,maybe.yI)(this._glMaterials),this._dataByOrigin.forEach((e=>e.dispose())),this._dataByOrigin.clear(),this._vaoCache=(0,maybe.yI)(this._vaoCache)}initializeRenderContext(e,t){const{rctx:r}=e.renderContext;this._glMaterials=new GLMaterials.S(this.material,t??e.materialRepository),this._bufferWriter=this.material.createBufferWriter(),this._vaoCache=new VaoCache_i(r,this.material.vertexAttributeLocations,(0,glUtil.W)(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&this.material instanceof WaterMaterial._}get isDecoration(){return this.material.parameters.isDecoration}get rendersOccluded(){return!this.isEmpty&&this.material.parameters.renderOccluded!==Material.C2.Occlude}get numGeometries(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.instances.size),0))),e}get usedMemory(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.vao.usedMemory),0))),e}forEachGeometry(e){this._dataByOrigin.forEach((t=>t.buffers.forEach((t=>t.instances.forEach((t=>e(t.geometry)))))))}modify(e){this._updateGeometries(e.updates),this._addAndRemoveGeometries(e.adds,e.removes),this._updateDrawCommands()}_updateGeometries(e){const t=this._bufferWriter;if(null===t)return;const r=t.vertexBufferLayout.stride/4;for(const s of e){const e=s.renderGeometry,i=this._dataByOrigin.get(e.localOrigin.id),a=i?.findBuffer(e.id);if(null==a)return;const o=a.instances.get(e.id);if(s.updateType&(ModelDirtyTypes.q.GEOMETRY|ModelDirtyTypes.q.TRANSFORMATION)){const s=F(t.elementCount(o.geometry.geometry)*r),i=t.vertexBufferLayout.createView(s.buffer);this._writeGeometry(e,i,0),a.vao.vertexBuffers.geometry.setSubData(s,o.from*r,0,o.numElements*r)}s.updateType&(ModelDirtyTypes.q.HIGHLIGHT|ModelDirtyTypes.q.OCCLUDEE|ModelDirtyTypes.q.VISIBILITY)&&(a.drawCommandsDirty=!0)}}_computeDeltas(e,t){const r=new NestedMap.q;for(const s of e){const e=s.localOrigin;if(null==e)continue;let t=r.get(e.id,null);null==t&&(t=new MergedRenderer_x(e.vec3),r.set(e.id,null,t)),t.changes.push(s)}for(const s of t){const e=s.localOrigin;if(null==e)continue;const t=this._dataByOrigin.get(e.id),i=t?.findBuffer(s.id);if(null==i)continue;let a=r.get(e.id,i);null==a&&(a=new MergedRenderer_x(e.vec3),r.set(e.id,i,a)),a.changes.push(s)}return r}_addAndRemoveGeometries(e,r){if(null===this._bufferWriter||null===this._vaoCache)return;const{_bufferWriter:s,_dataByOrigin:i}=this,a=s.vertexBufferLayout.stride/4,o=this._computeDeltas(e,r);o.forEach(((e,r)=>{const n=e.get(null),l=null!=n?n.changes:[];o.delete(r,null);let u=i.get(r);if(e.forEach(((e,n)=>{if(o.delete(r,n),null==n)return void(0,Util.Uc)(!1,"No VAO for removed geometries");if(n.instances.size===e.changes.length)return this._vaoCache.deleteVao(n.vao),(0,arrayUtils.sH)(u.buffers,n),void(0===u.buffers.length&&0===l.length&&i.delete(r));const h=n.numElements,c=n.vao.byteSize/4,f=l.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),m=e.changes.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),d=Math.min((h+f-m)*a,U),g=d>c;d>MergedRenderer_P&&d<c/2?(e.changes.forEach((({id:e})=>n.deleteInstance(e))),n.instances.forEach((({geometry:e})=>l.push(e))),this._vaoCache.deleteVao(n.vao),(0,arrayUtils.sH)(u.buffers,n)):g?this._applyAndRebuild(n,l,e):this._applyRemoves(n,e)})),l.length>0)for(null==u&&(u=new PerOriginData_s(n.origin),i.set(r,u)),u.buffers.forEach((e=>this._applyAdds(e,l)));l.length>0;)u.buffers.push(this._applyAndRebuild(new PerBufferData_n,l,null))}))}_updateDrawCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.buffers.forEach((e=>{e.drawCommandsDirty&&(e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,(0,MapUtils.o9)(e.instances,(t=>(e.updateDrawState(t),e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees))),e.updateDrawCommands(this._bufferWriter.vertexBufferLayout.stride)),this._hasHighlights=this._hasHighlights||e.hasHighlights,this._hasOccludees=this._hasOccludees||e.hasOccludees}))}))}_applyAndRebuild(e,t,r){if(null!=r)for(const m of r.changes)e.deleteInstance(m.id);const s=this._bufferWriter,i=s.vertexBufferLayout.stride,a=i/4,o=Math.floor(U/a);let n=e.numElements;for(;t.length>0;){const r=t.pop(),i=s.elementCount(r.geometry);if(n+i>o&&n>0){t.push(r);break}n+=i;const a=new Instance_s(r,0,0);(0,Util.Uc)(null==e.instances.get(r.id)),e.addInstance(r.id,a)}const l=n*a,u=F(l),h=s.vertexBufferLayout.createView(u.buffer);let c=0;e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,e.instances.forEach(((t,r)=>{this._writeGeometry(t.geometry,h,c);const i=c;c+=s.elementCount(t.geometry.geometry),e.updateInstance(r,i,c),e.updateDrawState(t)})),this._vaoCache.deleteVao(e.vao),e.vao=this._vaoCache.newVao(MergedRenderer_q(l)),e.vao.vertexBuffers.geometry.setSubData(u,0,0,c*a),e.holes.clear();const f=e.holes.pushNew();return f.from=c,f.to=Math.floor(e.vao.byteSize/i),e.updateDrawCommands(i),e}_applyRemoves(e,t){if(0===t.changes.length||null===this._bufferWriter)return;for(const o of t.changes){const t=o.id,r=e.instances.get(t);if(!r)continue;e.deleteInstance(t);const s=MergedRenderer_G.back();if(s){if(s.to===r.from){s.to=r.to;continue}if(s.from===r.to){s.from=r.from;continue}}const i=MergedRenderer_G.pushNew();i.from=r.from,i.to=r.to}BufferRange_o(MergedRenderer_G);const r=this._bufferWriter.vertexBufferLayout.stride/4,s=MergedRenderer_G.reduce(((e,t)=>Math.max(e,t.numElements)),0)*r,i=F(s);i.fill(0,0,s);const a=e.vao.vertexBuffers.geometry;MergedRenderer_G.forAll((e=>a.setSubData(i,e.from*r,0,e.numElements*r))),e.holes.pushArray(MergedRenderer_G.data,MergedRenderer_G.length),MergedRenderer_G.forAll(((e,t)=>MergedRenderer_G.data[t]=null)),MergedRenderer_G.clear(),e.drawCommandsDirty=!0}_applyAdds(e,t){if(0===t.length||null===this._bufferWriter)return;if(!function PerBufferData_a(s){return null!=s.vao}(e))return void this._applyAndRebuild(e,t,null);const s=this._bufferWriter,i=s.vertexBufferLayout.stride/4,a=e.numElements,o=t.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),n=Math.min((a+o)*i,U),l=4*n;if(e.vao.byteSize<MergedRenderer_q(U-MergedRenderer_P)&&l>e.vao.byteSize)return void this._applyAndRebuild(e,t,null);BufferRange_o(e.holes);const u=new Array;for(const r of t){const t=s.elementCount(r.geometry),i=L(e.holes,t);u.push(i)}const h=e.vao.vertexBuffers.geometry;let c=0,f=0,m=0;const d=F(n),g=s.vertexBufferLayout.createView(d.buffer);t.forEach(((t,r)=>{const a=u[r];if(null==a)return;if(m!==a){const e=m-f;e>0&&h.setSubData(d,f*i,0,e*i),f=a,c=0}const o=s.elementCount(t.geometry);this._writeGeometry(t,g,c),c+=o,m=a+o;const n=new Instance_s(t,a,a+o);(0,Util.Uc)(null==e.instances.get(t.id)),e.addInstance(t.id,n),e.drawCommandsDirty=!0}));const p=m-f;p>0&&h.setSubData(d,f*i,0,p*i),(0,arrayUtils.Mf)(t,((e,t)=>null==u[t]))}_writeGeometry(e,t,r){if(null===this._bufferWriter)return;const s=e.localOrigin.vec3;(0,Util.OY)(MergedRenderer_I,-s[0],-s[1],-s[2]);const i=(0,mat4.m)(MergedRenderer_T,MergedRenderer_I,e.transformation);(0,mat4.i)(MergedRenderer_W,i),(0,mat4.t)(MergedRenderer_W,MergedRenderer_W),this._bufferWriter.write(i,MergedRenderer_W,e.geometry,t,r)}updateAnimation(e){return this.material.update(e)}prepareTechnique(e){if(!this.material.shouldRender(e))return null;const{output:t,bindParameters:r}=e;if(!this.material.produces(r.slot,t))return null;const s=t===ShaderOutput.m.Highlight||t===ShaderOutput.m.ShadowHighlight;if(s&&!this._hasHighlights)return null;const i=t===ShaderOutput.m.ShadowExcludeHighlight,a=!(s||i);for(const o of this._dataByOrigin.values())for(const n of o.buffers){if(s&&!n.hasHighlights)continue;const o=(s?n.drawCommandsHighlight:i&&n.needsMultipleCommands()?n.drawCommandsShadowHighlightRest:n.drawCommandsDefault)||null,l=a&&n.drawCommandsOccludees||null;if(o?.length||l?.length){const s=this._glMaterials.load(e.rctx,r.slot,t),i=null!=s?s.beginSlot(r):null;if(null!=i)return i}}return null}renderNode(e,t){const{output:r,bindParameters:s}=e,i=r===ShaderOutput.m.Highlight||r===ShaderOutput.m.ShadowHighlight,a=r===ShaderOutput.m.ShadowExcludeHighlight,o=!(i||a),n=e.rctx,l=e.bindParameters.slot===RenderSlot.y.OCCLUDER_MATERIAL,u=e.bindParameters.slot===RenderSlot.y.TRANSPARENT_OCCLUDER_MATERIAL;n.runAppleAmdDriverHelper(),n.bindTechnique(t,this.material.parameters,s);for(const h of this._dataByOrigin.values())for(const e of h.buffers){if(i&&!e.hasHighlights)continue;const r=(i?e.drawCommandsHighlight:a&&e.needsMultipleCommands()?e.drawCommandsShadowHighlightRest:e.drawCommandsDefault)||null,c=o&&e.drawCommandsOccludees||null;(r?.length||c?.length)&&(t.program.bindDraw(new DrawParameters_i(h.origin),s,this.material.parameters),t.ensureAttributeLocations(e.vao),n.bindVAO(e.vao),r?.length&&(n.setPipelineState(t.getPipeline(!1,l,u)),r.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count)))),c?.length&&(n.setPipelineState(t.getPipeline(!0,l,u)),c.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count)))))}}get test(){return{material:this.material,glMaterials:this._glMaterials,dataByOrigin:this._dataByOrigin}}};(0,tslib_es6._)([(0,property.qq)({constructOnly:!0})],S.prototype,"material",void 0),S=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.webgl-engine.materials.renderers.MergedRenderer")],S);class MergedRenderer_x{constructor(e){this.origin=e,this.changes=new Array}}function L(e,t){let r;if(!e.some((e=>!(e.numElements<t||(r=e,0)))))return null;const s=r.from;return r.from+=t,r.from>=r.to&&e.removeUnordered(r),s}const MergedRenderer_I=(0,mat4f64.a)(),MergedRenderer_T=(0,mat4f64.a)(),MergedRenderer_W=(0,mat4f64.a)(),MergedRenderer_G=new PooledArray.c({allocator:e=>e||new BufferRange_t,deallocator:null}),MergedRenderer_P=65536,V=4*MergedRenderer_P,MergedRenderer_z=1024,N=16777216,U=N/4;let k=new Float32Array(MergedRenderer_P);function F(e){return k.length<e&&(k=new Float32Array(e)),k}function MergedRenderer_q(e){const t=4*e;return t<=MergedRenderer_z?MergedRenderer_z:t<V?(0,mathUtils.w7)(t):Math.max(Math.min(Math.ceil(1.5*t/V)*V,N),t)}let SortedRenderGeometryRenderer_u=class extends Accessor.c{constructor(e){super(e),this._pending=new SortedRenderGeometryRenderer_y,this._changes=new ChangeSet_s,this._materialRenderers=new PooledArray.c,this._sortedMaterialRenderers=new PooledArray.c,this._geometries=new Map,this._hasHighlights=!1,this._hasWater=!1}destroy(){this._changes.prune(),this._materialRenderers.forAll((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear(),this._geometries.clear(),this._pending.clear()}get updating(){return!this._pending.empty||this._changes.updates.length>0}get rctx(){return this.rendererContext.rctx}get _materialRepository(){return this.rendererContext.materialRepository}get _localOriginFactory(){return this.rendererContext.localOriginFactory}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._materialRenderers.some((e=>e.rendersOccluded))}get isEmpty(){return!this.updating&&0===this._materialRenderers.length&&0===this._geometries.size}getMemoryForMaterial(e){if(null==e)return 0;const r=this._materialRenderers.find((r=>r.material===e));return r?.usedMemory??0}commitChanges(){if(!this.updating)return!1;this._processAddsRemoves();const e=function rendererUtils_r(r){const n=new Map,o=r=>{let t=n.get(r);return t||(t=new ChangeSet_t,n.set(r,t)),t};return r.removes.forAll((e=>{rendererUtils_t(e)&&o(e.material).removes.push(e)})),r.adds.forAll((e=>{rendererUtils_t(e)&&o(e.material).adds.push(e)})),r.updates.forAll((e=>{rendererUtils_t(e.renderGeometry)&&o(e.renderGeometry.material).updates.push(e)})),n}(this._changes);let r=!1,t=!1,s=!1;return e.forEach(((e,i)=>{let n=this._materialRenderers.find((e=>e.material===i));if(!n&&e.adds.length>0){const e=new S({material:i});e.initializeRenderContext(this.rendererContext.pluginContext,this._materialRepository),n=e,this._materialRenderers.push(n),r=!0,t=!0,s=!0}if(!n)return;const o=t||n.hasHighlights,a=s||n.hasWater;n.modify(e),t=t||o!==n.hasHighlights,s=s||a!==n.hasWater,n.isEmpty&&(this._materialRenderers.removeUnordered(n),n.dispose(),r=!0)})),this._changes.clear(),r&&this._updateSortedMaterialRenderers(),t&&(this._hasHighlights=this._materialRenderers.some((e=>e.hasHighlights))),s&&(this._hasWater=this._materialRenderers.some((e=>e.hasWater))),this.notifyChange("updating"),!0}addGeometries(e,r){if(0===e.length)return;const t=this._validateRenderGeometries(e);for(const i of t)this._geometries.set(i.id,i);const s=this._pending.empty;for(const i of t)this._pending.adds.add(i);s&&this.notifyChange("updating"),r===ModelDirtyTypes.C.UPDATE&&this._notifyGraphicGeometryChanged(e)}removeGeometries(e,r){const t=this._pending.empty,s=this._pending.adds;for(const i of e)s.has(i)?(this._pending.removed.add(i),s.delete(i)):this._pending.removed.has(i)||this._pending.removes.add(i),this._geometries.delete(i.id);t&&!this._pending.empty&&this.notifyChange("updating"),r===ModelDirtyTypes.C.UPDATE&&this._notifyGraphicGeometryChanged(e)}modifyGeometries(e,r){const t=0===this._changes.updates.length;for(const s of e){const e=this._changes.updates.pushNew();e.renderGeometry=this._validateRenderGeometry(s),e.updateType=r}switch(t&&this._changes.updates.length>0&&this.notifyChange("updating"),r){case ModelDirtyTypes.q.TRANSFORMATION:case ModelDirtyTypes.q.GEOMETRY:return this._notifyGraphicGeometryChanged(e);case ModelDirtyTypes.q.VISIBILITY:return this._notifyGraphicVisibilityChanged(e)}}updateAnimation(e){let r=!1;return this._sortedMaterialRenderers.forAll((t=>r=t.updateAnimation(e)||r)),r}shouldRender(e){return this._sortedMaterialRenderers.some((r=>r.prepareTechnique(e)))}render(e){this._sortedMaterialRenderers.forAll((r=>{const t=r.prepareTechnique(e);null!=t&&r.renderNode(e,t)}))}intersect(e,r,t,s,i){return this._geometries.forEach((n=>{if(s&&!s(n))return;this._intersectRenderGeometry(n,t,r,0,e,i);const o=this.rendererContext.longitudeCyclical;o&&(n.boundingSphere[0]-n.boundingSphere[3]<o.min&&this._intersectRenderGeometry(n,t,r,o.range,e,i),n.boundingSphere[0]+n.boundingSphere[3]>o.max&&this._intersectRenderGeometry(n,t,r,-o.range,e,i)),i++})),i}_updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear(),this._materialRenderers.forAll(((e,r)=>{e.priority=r,this._sortedMaterialRenderers.push(e)})),this._sortedMaterialRenderers.sort(((e,r)=>r.material.renderPriority===e.material.renderPriority?e.priority-r.priority:r.material.renderPriority-e.material.renderPriority))}_processAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._changes.adds.pushArray(Array.from(this._pending.adds)),this._changes.removes.pushArray(Array.from(this._pending.removes));for(let e=0;e<this._changes.updates.length;){const r=this._changes.updates.data[e];this._pending.has(r.renderGeometry)?this._changes.updates.removeUnorderedIndex(e):e++}this._pending.clear()}_intersectRenderGeometry(e,r,t,s,i,n){if(!e.visible)return;let o=0;s+=e.transformation[12],o=e.transformation[13],SortedRenderGeometryRenderer_f[0]=t[0]-s,SortedRenderGeometryRenderer_f[1]=t[1]-o,e.screenToWorldRatio=this.rendererContext.screenToWorldRatio,e.material.intersectDraped(e,null,i,SortedRenderGeometryRenderer_f,((t,s,o)=>{!function _(e,r,t,s,i,n,a){const p=new Intersector_i(n,a,r),c=r=>{r.set(IntersectorInterfaces.a0.OVERLAY,p,e.dist,e.normal,e.transformation,t,s)};if((null==i.results.min.drapedLayerOrder||t>=i.results.min.drapedLayerOrder)&&(null==i.results.min.dist||i.results.ground.dist<=i.results.min.dist)&&c(i.results.min),i.options.store!==IntersectorInterfaces.$t.MIN&&(null==i.results.max.drapedLayerOrder||t<i.results.max.drapedLayerOrder)&&(null==i.results.max.dist||i.results.ground.dist>i.results.max.dist)&&c(i.results.max),i.options.store===IntersectorInterfaces.$t.ALL){const e=(0,Intersector.YL)(i.ray);c(e),i.results.all.push(e)}}(r,o,e.material.renderPriority,n,i,e.layerUid,e.graphicUid)}),r)}_notifyGraphicGeometryChanged(e){if(null==this.drapeSource.notifyGraphicGeometryChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicGeometryChanged(e),r=e)}}_notifyGraphicVisibilityChanged(e){if(null==this.drapeSource.notifyGraphicVisibilityChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicVisibilityChanged(e),r=e)}}_validateRenderGeometries(e){for(const r of e)this._validateRenderGeometry(r);return e}_validateRenderGeometry(e){return null==e.localOrigin&&(e.localOrigin=this._localOriginFactory.getOrigin(e.boundingSphere)),e}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"drapeSource",void 0),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"updating",null),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"rctx",null),(0,tslib_es6._)([(0,property.qq)({constructOnly:!0})],SortedRenderGeometryRenderer_u.prototype,"rendererContext",void 0),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"_materialRepository",null),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"_localOriginFactory",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],SortedRenderGeometryRenderer_u.prototype,"isEmpty",null),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"_materialRenderers",void 0),(0,tslib_es6._)([(0,property.qq)()],SortedRenderGeometryRenderer_u.prototype,"_geometries",void 0),SortedRenderGeometryRenderer_u=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer")],SortedRenderGeometryRenderer_u);class SortedRenderGeometryRenderer_y{constructor(){this.adds=new Set,this.removes=new Set,this.removed=new Set}get empty(){return 0===this.adds.size&&0===this.removes.size&&0===this.removed.size}has(e){return this.adds.has(e)||this.removes.has(e)||this.removed.has(e)}clear(){this.adds.clear(),this.removes.clear(),this.removed.clear()}}const SortedRenderGeometryRenderer_f=(0,vec2f64.a)();var ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class TextureTechnique_m extends ShaderTechnique.O{initializeProgram(e){return new Program.G(e.rctx,TextureTechnique_m.shader.get().build(),DefaultVertexAttributeLocations.q)}initializePipeline(){return this.configuration.hasAlpha?(0,renderState._w)({blending:(0,renderState.ac)(enums.w$.SRC_ALPHA,enums.w$.ONE,enums.w$.ONE_MINUS_SRC_ALPHA,enums.w$.ONE_MINUS_SRC_ALPHA),colorWrite:renderState.kp}):(0,renderState._w)({colorWrite:renderState.kp})}}TextureTechnique_m.shader=new ReloadableShaderModule.O(TextureOnly_glsl.a,(()=>__webpack_require__.e(24080).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureOnly.glsl.js"))));class TextureTechniqueConfiguration_r extends ShaderTechniqueConfiguration.K{constructor(){super(...arguments),this.hasAlpha=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],TextureTechniqueConfiguration_r.prototype,"hasAlpha",void 0);var UpdatePolicy=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js"),Lightsources=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js"),OverlayCompositing_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/OverlayCompositing.glsl.js");class OverlayCompositingTechnique_n extends ShaderTechnique.O{initializeProgram(e){return new Program.G(e.rctx,OverlayCompositingTechnique_n.shader.get().build(),DefaultVertexAttributeLocations.q)}initializePipeline(){return(0,renderState._w)({blending:(0,renderState.KO)(enums.w$.ONE,enums.w$.ONE_MINUS_SRC_ALPHA),colorWrite:renderState.kp})}}OverlayCompositingTechnique_n.shader=new ReloadableShaderModule.O(OverlayCompositing_glsl.a,(()=>__webpack_require__.e(81720).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OverlayCompositing.glsl.js"))));var Scheduler=__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js");let ee=class extends RenderPlugin.QL{get _bindParameters(){return this._renderContext.bindParameters}get _rctx(){return this.view._stage.renderView.renderingContext}get rctx(){return this._rctx}get materialRepository(){return this._materialRepository}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}constructor(e){super(e),this._overlays=null,this._renderTargets=null,this._overlayParameters=new OverlayCompositing_glsl.O,this.hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._renderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedRenderers=new PooledArray.c,this._passParameters=new TextureOnly_glsl.T,this._materialRepository=null,this._screenToWorldRatio=1,this._localOriginFactory=null,this.unloadedMemory=0,this.ignoresMemoryFactor=!1,this._camera=new Camera.U,this.worldToPCSRatio=1,this.events=new Evented.c,this.longitudeCyclical=null,this.produces=new Map([[RenderSlot.y.DRAPED_MATERIAL,e=>e!==ShaderOutput.m.Highlight||this.hasHighlights],[RenderSlot.y.DRAPED_WATER,()=>!0]]),this._hasTargetWithoutRasterImage=!1,this._hasDrapedFeatureSource=!1,this._hasDrapedRasterSource=!1}initialize(){const e=this.view._stage.renderer.fboCache,r=this.view._stage.renderView,{waterTextureRepository:t,stippleTextureRepository:s,markerTextureRepository:i}=r;this._shaderTechniqueRepository=new ShaderTechniqueRepository_r({rctx:this._rctx,viewingMode:ViewingMode.UZ.Local,stippleTextureRepository:s,markerTextureRepository:i,waterTextureRepository:t}),this._renderContext=new RenderContext_i(this._rctx,new q(e,this.view.state.viewingMode),null),this.addHandles([(0,reactiveUtils.aE)((()=>t.updating),(()=>this.events.emit("content-changed")),reactiveUtils.KG),(0,reactiveUtils.aE)((()=>this.spatialReference),(e=>this._localOriginFactory=new GridLocalOriginFactory.y(e)),reactiveUtils.KG),(0,reactiveUtils.on)((()=>this.view.allLayerViews),"after-changes",(()=>this._sortedDrapeSourceRenderersDirty=!0))]),this._materialRepository=new GLMaterialRepository_s(r.textureRepository,this._shaderTechniqueRepository,(e=>{(e.parameters.renderOccluded&ie)>0!==this._rendersOccluded&&this._updateRendersOccluded(),this.events.emit("content-changed"),this.notifyChange("updating"),this.notifyChange("isEmpty")}),(()=>this.events.emit("content-changed"))),this._bindParameters.slot=RenderSlot.y.DRAPED_MATERIAL,this._bindParameters.mainDepth=function glUtil3D_w(e){const r=new TextureDescriptor.O(1);return r.samplingMode=enums.Ud.NEAREST,new Texture.w(e,r,new Uint8Array([255,255,255,255]))}(this._rctx),this._camera.near=1,this._camera.far=1e4,this._camera.relativeElevation=null,this._bindParameters.camera=this._camera,this._bindParameters.transparencyPassType=TransparencyPassType.H.NONE,this._bindParameters.newLighting.noonFactor=0,this._bindParameters.newLighting.globalFactor=0,this._bindParameters.newLighting.set([new Lightsources._E((0,vec3f64.f)(1,1,1))]),this.addHandles(this.view.resourceController.scheduler.registerTask(Scheduler.gN.STAGE,this))}destroy(){this._renderers.forEach((e=>e.destroy())),this._renderers.clear(),this._debugTextureTechnique=(0,maybe.gT)(this._debugTextureTechnique),this._passParameters.texture=(0,maybe.yI)(this._passParameters.texture),this._bindParameters.mainDepth=(0,maybe.yI)(this._bindParameters.mainDepth),this._shaderTechniqueRepository=(0,maybe.mG)(this._shaderTechniqueRepository),this.disposeOverlays()}initializeRenderContext(e){this.pluginContext=e}uninitializeRenderContext(){}renderNode(){}get updating(){return this._sortedDrapeSourceRenderersDirty||(0,MapUtils.o9)(this._renderers,(e=>e.updating))}get hasOverlays(){return null!=this._overlays&&null!=this._renderTargets}getMemoryForMaterial(e){return Array.from(this._renderers.values()).reduce(((r,t)=>r+t.getMemoryForMaterial(e)),0)}createGeometryDrapeSourceRenderer(e){return this.createDrapeSourceRenderer(e,SortedRenderGeometryRenderer_u)}createDrapeSourceRenderer(e,r,t){const s=this._renderers.get(e);null!=s&&s.destroy();const i=new r({...t,rendererContext:this,drapeSource:e});return this._renderers.set(e,i),this._sortedDrapeSourceRenderersDirty=!0,"fullOpacity"in e&&this.addHandles((0,reactiveUtils.aE)((()=>e.fullOpacity),(()=>this.events.emit("content-changed"))),e),i}removeDrapeSourceRenderer(e){if(null==e)return;const r=this._renderers.get(e);null!=r&&(this._sortedDrapeSourceRenderersDirty=!0,this._renderers.delete(e),this.removeHandles(e),r.destroy())}computeValidity(){return this._renderTargets?.computeValidity()??0}releaseRenderTargets(){this._renderTargets?.dispose()}get overlays(){return this._overlays??[]}ensureDrapeTargets(e){this._hasTargetWithoutRasterImage=!!this._overlays&&(0,SetUtils.gj)(e,(e=>e.drapeTargetType===interfaces.s7.WithoutRasterImage))}ensureDrapeSources(e){this._overlays?(this._hasDrapedFeatureSource=(0,SetUtils.gj)(e,(e=>e.drapeSourceType===interfaces.CU.Features)),this._hasDrapedRasterSource=(0,SetUtils.gj)(e,(e=>e.drapeSourceType===interfaces.CU.RasterImage))):this._hasDrapedFeatureSource=this._hasDrapedRasterSource=!1}get _needsColorWithoutRasterImage(){return this._hasDrapedRasterSource&&this._hasDrapedFeatureSource&&this._hasTargetWithoutRasterImage}ensureOverlays(e,r,t=this._bindParameters.overlayStretch){null==this._overlays&&(this._renderTargets=new OverlayRenderTargets_a(this.view._stage.renderer.fboCache),this._overlays=[new Overlay_r,new Overlay_r]),this.ensureDrapeTargets(e),this.ensureDrapeSources(r),this._bindParameters.overlayStretch=t}disposeOverlays(){this._overlays=null,this._renderTargets=(0,maybe.yI)(this._renderTargets),this.events.emit("textures-disposed")}getTexture(e){if(null!=e)return e===OverlayContent_o.ColorNoRasterImage&&!this._needsColorWithoutRasterImage&&this._hasDrapedFeatureSource?this._renderTargets?.getTexture(OverlayContent_o.Color):this._renderTargets?.getTexture(e)}get running(){return this.updating}runTask(e){this._processDrapeSources(e,(()=>!0))}_processDrapeSources(e,r){let s=!1;for(const[t,i]of this._renderers){if(e.done)break;(t.destroyed||r(t))&&i.commitChanges()&&(s=!0,e.madeProgress())}this._sortedDrapeSourceRenderersDirty&&(this._sortedDrapeSourceRenderersDirty=!1,s=!0,this._updateSortedDrapeSourceRenderers()),s&&(null!=this._overlays&&0===this._renderers.size&&this.disposeOverlays(),this.notifyChange("updating"),this.notifyChange("isEmpty"),this.events.emit("content-changed"),this.hasHighlights=(0,MapUtils.o9)(this._renderers,(e=>e.hasHighlights)),this._updateRendersOccluded(),this._updateHasWater())}processSyncDrapeSources(){this._processDrapeSources(Scheduler.is,(e=>e.updatePolicy===UpdatePolicy.C.SYNC))}get isEmpty(){return!debugFlags.k.OVERLAY_DRAW_DEBUG_TEXTURE&&!(0,MapUtils.o9)(this._renderers,(e=>!e.isEmpty))}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}get mode(){return this.isEmpty?Overlay_glsl_f.Disabled:this._renderTargets?.getTexture(OverlayContent_o.WaterNormal)?Overlay_glsl_f.EnabledWithWater:this._renderTargets?.getTexture(OverlayContent_o.Color)?Overlay_glsl_f.Enabled:Overlay_glsl_f.Disabled}updateAnimation(e){let r=!1;return this._renderers.forEach((t=>r=t.updateAnimation(e)||r)),r}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}drawOverlays(e){if(this._overlays&&this._renderTargets){for(const e of this._overlays)this.longitudeCyclical?e.setupGeometryViewsCyclical(this.longitudeCyclical):e.setupGeometryViewsDirect();for(const r of this._renderTargets.targets)(r.content!==OverlayContent_o.ColorNoRasterImage||this._needsColorWithoutRasterImage)&&(this._drawTarget(terrain_interfaces.YT.INNER,r,e),this._drawTarget(terrain_interfaces.YT.OUTER,r,e))}}_drawTarget(e,r,t){const s=this._overlays[e],i=s.canvasGeometries;if(0===i.numViews)return;const{alignPixelEnabled:o,contentPixelRatio:a}=t;this._screenToWorldRatio=a*s.mapUnitsPerPixel/this._bindParameters.overlayStretch;const n=r.output;if(this.isEmpty||n===ShaderOutput.m.Highlight&&!this.hasHighlights||n===ShaderOutput.m.Normal&&!this.hasWater||!s.hasSomeSizedView())return;const h=this._rctx;this._camera.pixelRatio=s.pixelRatio*a,this._renderContext.output=n,this._bindParameters.alignPixelEnabled=o,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToPCSRatio=this._screenToWorldRatio*this.worldToPCSRatio,this._bindParameters.slot=n===ShaderOutput.m.Normal?RenderSlot.y.DRAPED_WATER:RenderSlot.y.DRAPED_MATERIAL;const d=debugFlags.k.OVERLAY_DRAW_DEBUG_TEXTURE&&r.content!==OverlayContent_o.Occluded;if(!d&&!this._sortedRenderers.some((({renderer:e})=>e.shouldRender(this._renderContext))))return;const l=s.resolution;this._rctx.setViewport(e===terrain_interfaces.YT.INNER?0:l,0,l,l);const c=2*s.resolution,u=s.resolution,p=r.fbo;if(p.bind(h,c,u),e===terrain_interfaces.YT.INNER&&(h.setClearColor(0,0,0,0),h.clearSafe(enums.sl.COLOR_BUFFER_BIT)),r.content===OverlayContent_o.Occluded&&(this._renderContext.renderOccludedMask=ie),d)for(let m=0;m<i.numViews;m++)this._setViewParameters(i.extents[m],s),this._ensureDebugPatternResources(s.resolution,te[e]),this._rctx.bindTechnique(this._debugTextureTechnique,this._passParameters,null),this._rctx.screen.draw();this._sortedRenderers.forAll((({drapeSource:t,renderer:o})=>{if(r.content===OverlayContent_o.ColorNoRasterImage&&t.drapeSourceType===interfaces.CU.RasterImage)return;const{fullOpacity:a}=t,d=null!=a&&a<1&&n===ShaderOutput.m.Color?this.bindTemporaryFramebuffer(c,u):null;for(let e=0;e<i.numViews;e++)this._setViewParameters(i.extents[e],s),o.render(this._renderContext);if(d){p.bind(h,c,u),this._overlayParameters.texture=d.colorTexture,this._overlayParameters.opacity=a,this._overlayParameters.overlayIndex=e;const r=this.pluginContext.techniqueRepository.acquire(OverlayCompositingTechnique_n);this._rctx.bindTechnique(r,this._overlayParameters,this._renderContext.bindParameters),this._rctx.screen.draw(),r.release(),d.release()}})),h.bindFramebuffer(null),e===terrain_interfaces.YT.OUTER&&p.generateMipMap(),this._renderContext.resetRenderOccludedMask()}bindTemporaryFramebuffer(e,r){const t=this.view._stage.renderer.fboCache,s=t.acquire(FBOCache._s.RGBA,e,r);return t.rctx.bindFramebuffer(s.fbo),t.rctx.clearSafe(enums.sl.COLOR_BUFFER_BIT),s}async reloadShaders(){await this._shaderTechniqueRepository.reloadAll()}notifyContentChanged(){this.events.emit("content-changed")}intersect(e,r,t,s){let i=0;for(const o of this._renderers.values())i=o.intersect?.(e,r,t,s,i)??i}_updateSortedDrapeSourceRenderers(){if(this._sortedRenderers.clear(),0===this._renderers.size)return;const e=this.view.map.allLayers;this._renderers.forEach(((r,t)=>{const s=e.indexOf(t.layer),i=s>=0,o=this._renderers.size*(t.renderGroup??(i?interfaces.a_.MapLayer:interfaces.a_.ViewLayer))+(i?s:0);this._sortedRenderers.push(new re(t,r,o))})),this._sortedRenderers.sort(((e,r)=>e.index-r.index))}_setViewParameters(e,r){const t=this._camera;t.viewport=[0,0,r.resolution,r.resolution],(0,mat4.x)(t.projectionMatrix,0,e[2]-e[0],0,e[3]-e[1],t.near,t.far),(0,mat4.d)(t.viewMatrix,[-e[0],-e[1],0])}_updateHasWater(){const e=(0,MapUtils.o9)(this._renderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e,this.events.emit("has-water",e))}_updateRendersOccluded(){const e=(0,MapUtils.o9)(this._renderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.events.emit("renders-occluded",e))}_ensureDebugPatternResources(e,r){if((0,vec3.s)(this._passParameters.color,r[0],r[1],r[2]),this._passParameters.texture)return;const t=new Uint8Array(e*e*4);let s=0;for(let a=0;a<e;a++)for(let r=0;r<e;r++){const i=Math.floor(r/10),o=Math.floor(a/10);i<2||o<2||10*i>e-20||10*o>e-20?(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=255):(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=1&i&&1&o?1&r^1&a?0:255:1&i^1&o?0:128)}const i=new TextureDescriptor.O(e);i.samplingMode=enums.Ud.NEAREST,this._passParameters.texture=new Texture.w(this._rctx,i,t);const o=new TextureTechniqueConfiguration_r;o.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquire(TextureTechnique_m,o)}get test(){return{drapedRenderers:Array.from(this._renderers.values()),getDrapeSourceRenderer:e=>this._renderers.get(e)}}};(0,tslib_es6._)([(0,property.qq)()],ee.prototype,"hasHighlights",void 0),(0,tslib_es6._)([(0,property.qq)()],ee.prototype,"_sortedDrapeSourceRenderersDirty",void 0),(0,tslib_es6._)([(0,property.qq)({autoDestroy:!0})],ee.prototype,"_shaderTechniqueRepository",void 0),(0,tslib_es6._)([(0,property.qq)({constructOnly:!0})],ee.prototype,"view",void 0),(0,tslib_es6._)([(0,property.qq)()],ee.prototype,"worldToPCSRatio",void 0),(0,tslib_es6._)([(0,property.qq)()],ee.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.qq)({type:Boolean,readOnly:!0})],ee.prototype,"updating",null),(0,tslib_es6._)([(0,property.qq)()],ee.prototype,"isEmpty",null),ee=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.terrain.OverlayRenderer")],ee);class re{constructor(e,r,t){this.drapeSource=e,this.renderer=r,this.index=t}}const te=[[1,.5,.5],[.5,.5,1]],se=-2,ie=Material.C2.OccludeAndTransparent},"./node_modules/@arcgis/core/views/3d/terrain/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var E,O,A,H;__webpack_require__.d(__webpack_exports__,{YT:()=>E}),function(E){E[E.INNER=0]="INNER",E[E.OUTER=1]="OUTER"}(E||(E={})),function(E){E[E.REGULAR=0]="REGULAR",E[E.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",E[E.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",E[E.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(O||(O={})),function(E){E[E.OFF=0]="OFF",E[E.ON=1]="ON"}(A||(A={})),function(E){E[E.FADING=0]="FADING",E[E.IMMEDIATE=1]="IMMEDIATE",E[E.UNFADED=2]="UNFADED"}(H||(H={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>c});var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.d("intrinsicWidth",(t=>t.width))),s.vvSize?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.K.SIZEFEATUREATTRIBUTE,"float"),l.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.C("vvSizeMinSize",(t=>t.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.C("vvSizeMaxSize",(t=>t.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.C("vvSizeOffset",(t=>t.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.C("vvSizeFactor",(t=>t.vvSize.factor))),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.K.SIZE,"float"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`float getSize(){
return intrinsicWidth * size;
}`)),s.vvOpacity?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.K.OPACITYFEATUREATTRIBUTE,"float"),l.constants.add("vvOpacityNumber","int",8),l.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.E("vvOpacityValues",(t=>t.vvOpacity.values),o),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.E("vvOpacityOpacities",(t=>t.vvOpacity.opacityValues),o)),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`vec4 applyOpacity( vec4 color ){
return color;
}`),s.vvColor?(c.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__.a,s),c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.K.COLORFEATUREATTRIBUTE,"float"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.K.COLOR,"vec4"),l.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`vec4 getColor(){
return applyOpacity(color);
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>o});var _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function o(o){o.uniforms.add(new _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__.o("alignPixelEnabled",((e,i)=>i.alignPixelEnabled))),o.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__.Y`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),o.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__.Y`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>d,_:()=>p});var _attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js"),_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"),_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const p=.5;function d(d,u){d.include(_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__._I),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__.K.POSITION,"vec3"),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__.K.NORMAL,"vec3"),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__.K.AUXPOS1,"vec4");const v=d.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__.IE)(v,u),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__.E7)(v,u),v.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_3__.U("viewport",((e,t)=>t.camera.fullViewport)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__.d("polygonOffset",(e=>e.shaderPolygonOffset)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__.d("cameraGroundRelative",((e,t)=>t.camera.aboveGround?1:-1))),u.hasVerticalOffset&&(0,_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__.y)(v),v.constants.add("smallOffsetAngle","float",.984807753012208),v.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),v.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${u.multipassEnabled?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y.float(0):_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),u.draped&&!u.hasVerticalOffset||(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__.CI)(v),u.draped||(v.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__.d("perDistancePixelRatio",((e,t)=>Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2)))),v.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y.float(p)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),u.screenCenterOffsetUnitsEnabled&&(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__.Ge)(v),u.hasScreenSizePerspective&&(0,_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Ul)(v),v.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offset of labels with respect to objects.
      // It also pulls the label towards the viewer so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${u.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${u.hasScreenSizePerspective&&(u.hasVerticalOffset||u.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${u.hasVerticalOffset?u.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${u.hasVerticalOffset?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${u.screenCenterOffsetUnitsEnabled?"":_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__.Y`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${u.screenCenterOffsetUnitsEnabled?u.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${u.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>i});var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js"),_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function i(i,s){const{vertex:p,fragment:n}=i;p.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__.w),s.multipassEnabled&&(p.include(_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__.q),i.varyings.add("depth","float")),p.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${s.multipassEnabled?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      ${s.multipassEnabled?"depth = projectAux.posView.z;":""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `),i.include(_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__._,s),n.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`
  void main() {
    fragColor = vec4(1);
    ${s.multipassEnabled?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`
        if(terrainDepthTest(depth)) {
          fragColor.g = 0.5;
        }`:""}
  }
  `)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var c;__webpack_require__.d(__webpack_exports__,{O:()=>c}),function(c){c[c.Occluded=0]="Occluded",c[c.NotOccluded=1]="NotOccluded",c[c.Both=2]="Both",c[c.COUNT=3]="COUNT"}(c||(c={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>t});var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js"),_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function t(t){t.vertex.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.d("renderTransparentlyOccludedHUD",((e,o)=>o.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__.O.Occluded?1:o.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__.O.NotOccluded?0:.75)),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__.U("viewport",((e,r)=>r.camera.fullViewport)),new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__.W("hudVisibilityTexture",((e,r)=>r.hudVisibility?.colorTexture))),t.vertex.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__.w),t.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.Y`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>o,y:()=>n});var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function o(o){o.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`float normals2FoamIntensity(vec3 n, float waveStrength){
float normalizationFactor =  max(0.015, waveStrength);
return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);
}`)}function n(o){o.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){
return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>d,a:()=>S});var RgbaFloatEncoding_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),View_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),Float4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");function c(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(null==t)return 1;const e=c(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function s(t){return c(t).reduce(((t,e)=>Math.max(t,e)))}var vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");const ensureColor4_r=(0,vec4f64.c)();function d(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function LineStipple_glsl_c(p,n){const d=!(n.draped&&n.stipplePreferContinuous),{vertex:c,fragment:f}=p;f.include(RgbaFloatEncoding_glsl.s),n.draped||((0,View_glsl.E7)(c,n),c.uniforms.add(new FloatPassUniform.d("worldToScreenPerDistanceRatio",((e,t)=>1/t.camera.perScreenPixelRatio))),c.code.add(interfaces.Y`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),p.varyings.add("vStippleDistance","float"),p.varyings.add("vStippleDistanceLimits","vec2"),p.varyings.add("vStipplePatternStretch","float"),c.code.add(interfaces.Y`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${LineStipple_glsl_u};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),c.code.add(interfaces.Y`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),c.code.add(interfaces.Y`
    if (segmentLengthPseudoScreen >= ${d?"patternLength":"1e4"}) {
  `),(0,View_glsl.Ge)(c),c.code.add(interfaces.Y`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`),f.uniforms.add(new Texture2DPassUniform.W("stipplePatternTexture",(e=>e.stippleTexture)),new FloatPassUniform.d("stipplePatternSDFNormalizer",(e=>function m(e){return e?(Math.floor(.5*(s(e)-1))+.5)/e.pixelRatio:1}(e.stipplePattern))),new FloatPassUniform.d("stipplePatternPixelSizeInv",(e=>1/S(e)))),f.code.add(interfaces.Y`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgba2float(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`),n.stippleOffColorEnabled?(f.uniforms.add(new Float4PassUniform.U("stippleOffColor",(e=>function ensureColor4_o(c){return null==c?vec4f64.Z:4===c.length?c:(0,vec4.s)(ensureColor4_r,c[0],c[1],c[2],1)}(e.stippleOffColor)))),f.code.add(interfaces.Y`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):f.code.add(interfaces.Y`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}(e,t):function LineStipple_glsl_f(e){e.fragment.code.add(interfaces.Y`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)}(e)}function S(e){const t=e.stipplePattern;return t?f(e.stipplePattern)/t.pixelRatio:1}const LineStipple_glsl_u=interfaces.Y.float(.4)},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>n});var _support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js"),_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js");function n(n,i){const{vertex:d,constants:s}=n;s.add("markerSizePerLineWidth","float",_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__.wX),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Ge)(d),null==d.uniforms.get("markerScale")&&d.constants.add("markerScale","float",1),d.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),i.space===_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.eY.World&&(d.constants.add("maxSegmentLengthFraction","float",.45),d.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.d("perRenderPixelRatio",((e,r)=>r.camera.perRenderPixelRatio))),d.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__.Y`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>a,u:()=>s});var _output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function a(a){a.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__.E),a.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.W("geometryDepthTexture",((e,r)=>r.multipassGeometry.linearDepth?.colorTexture)),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.$("nearFar",((e,r)=>r.camera.nearFar))),a.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__.Y`bool geometryDepthTest(vec2 pos, float elementDepth) {
float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, nearFar);
return (elementDepth < (geometryDepth - 1.0));
}`)}class s{}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>r});var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function r(r,c){c.spherical?r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return normalize(pos + origin);
}`):r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return vec3(0.0, 0.0, 1.0);
}`),c.spherical?r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`mat3 getTBNMatrix(in vec3 n) {
vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`):r.vertex.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__.Y`mat3 getTBNMatrix(in vec3 n) {
vec3 t = vec3(1.0, 0.0, 0.0);
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>c});var FoamRendering_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js");function e(e){e.fragment.code.add(interfaces.Y`const float GAMMA = 2.2;
const float INV_GAMMA = 0.4545454545;
vec4 delinearizeGamma(vec4 color) {
return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);
}
vec3 linearizeGamma(vec3 color) {
return pow(color, vec3(GAMMA));
}`)}var PhysicallyBasedRendering_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js"),ReadLinearDepth_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js"),Float2PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),Matrix4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js"),Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function d(d,n){const c=d.fragment;c.include(ReadLinearDepth_glsl.E),c.uniforms.add(new Float2PassUniform.$("nearFar",((e,o)=>o.camera.nearFar))),c.uniforms.add(new Texture2DPassUniform.W("depthMap",((e,o)=>o.linearDepth?.colorTexture))),c.uniforms.add(new Matrix4PassUniform.O("proj",((e,o)=>o.camera.projectionMatrix))),c.uniforms.add(new FloatPassUniform.d("invResolutionHeight",((e,o)=>1/o.camera.height))),c.uniforms.add(new Matrix4PassUniform.O("reprojectionMatrix",((e,o)=>o.ssr.reprojectionMatrix))),c.code.add(interfaces.Y`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy * 0.5 + 0.5;
  }

  const int maxSteps = ${n.highStepCount?"150":"75"};

  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)
  {
    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);
    projectedCoord.xy /= projectedCoord.w;
    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;
    return projectedCoord;
  }

  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)
  {
    vec3 viewPos = startPosition;
    vec3 viewPosEnd = startPosition;

    // Project the start position to the screen
    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);
    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space
    float k0 = 1.0/ projectedCoordStart.w;

    // advance the position in the direction of the reflection
    viewPos += dir;

    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);

    // Project the advanced position to the screen
    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);
    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space
    float k1 = 1.0/ projectedCoordEnd.w;

    // calculate the reflection direction in the screen space
    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);
    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);

    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);

    float projectedCoordDirLength = length(projectedCoordDir);
    float maxSt = float(maxSteps);

    // normalize the projection direction depending on maximum steps
    // this determines how blocky the reflection looks
    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);

    // Normalize the homogeneous camera space coordinates
    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);
    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);

    // initialize the variables for ray marching
    vec2 P = projectedCoordStart.xy;
    vec3 Q = Q0;
    float k = k0;
    float rayStartZ = -startPosition.z; // estimated ray start depth value
    float rayEndZ = -startPosition.z;   // estimated ray end depth value
    float prevEstimateZ = -startPosition.z;
    float rayDiffZ = 0.0;
    float dDepth;
    float depth;
    float rayDiffZOld = 0.0;

    // early outs
    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)
      return vec3(P, 0.0);

    for(int i = 0; i < maxSteps-1; i++)
    {
      depth = -linearDepthFromTexture(depthMap, P, nearFar); // get linear depth from the depth buffer

      // estimate depth of the marching ray
      rayStartZ = prevEstimateZ;
      dDepth = -rayStartZ - depth;
      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));
      rayDiffZ = rayEndZ- rayStartZ;
      prevEstimateZ = rayEndZ;

      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )
      {
        return vec3(P, 0.);
      }

      // If we detect a hit - return the intersection point, two conditions:
      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth
      //  - if difference between dDepth and rayDiffZOld is not too large
      //  - if difference between dDepth and 0.025/abs(k) is not too large
      //  - if the sampled depth is not behind far plane or in front of near plane

      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)
      {
        return vec3(P, depth);
      }

      // continue with ray marching
      P = clamp(P + dP, vec2(0.0), vec2(0.999));
      Q.z += dQ.z;
      k += dk;
      rayDiffZOld = rayDiffZ;
    }
    return vec3(P, 0.0);
  }
  `)}var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),Ellipsoid=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Ellipsoid.js"),CloudsData=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsData.js"),CloudsParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js"),weather=__webpack_require__("./node_modules/@arcgis/core/views/3d/environment/weather.js"),MainLighting_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js"),BooleanPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js"),Float3PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js"),Uniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js"),BindType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js");class s extends Uniform.C{constructor(e,s){super(e,"samplerCube",BindType.u.Pass,((r,o,t)=>r.bindTexture(e,s(o,t))))}}function v(v){const R=v.fragment;R.uniforms.add(new Matrix4PassUniform.O("rotationMatrixClouds",((o,a)=>a.cloudsFade.parallax.transform)),new Matrix4PassUniform.O("rotationMatrixCloudsCrossFade",((o,a)=>a.cloudsFade.parallaxNew.transform)),new Float3PassUniform.C("anchorPosition",((o,a)=>a.cloudsFade.parallax.anchorPointClouds)),new Float3PassUniform.C("anchorPositionCrossFade",((o,a)=>a.cloudsFade.parallaxNew.anchorPointClouds)),new FloatPassUniform.d("cloudsHeight",(()=>weather.m_)),new FloatPassUniform.d("radiusCurvatureCorrectionFactor",((o,a)=>a.cloudsFade.parallax.radiusCurvatureCorrectionFactor)),new FloatPassUniform.d("totalFadeInOut",((o,a)=>1-a.cloudsFade.opacity)),new FloatPassUniform.d("crossFadeAnchorFactor",((a,t)=>(0,mathUtils.qk)(t.cloudsFade.fadeFactor,0,1))),new s("cubeMap",((o,a)=>a.cloudsFade.data?.cubeMap?.colorTexture??null)),new BooleanPassUniform.o("crossFade",((o,a)=>a.cloudsFade.fadeMode===CloudsParameters.mm.CROSS_FADE)),new BooleanPassUniform.o("readChannelsRG",((o,a)=>a.cloudsFade.readChannels===CloudsData.Dt.RG)),new BooleanPassUniform.o("fadeTextureChannels",((o,a)=>a.cloudsFade.renderingStage===CloudsData.SW.FADING))),R.constants.add("planetRadius","float",Ellipsoid.ug.radius),R.code.add(interfaces.Y`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos)
{
float radiusClouds = planetRadius + cloudsHeight;
float B = 2.0 * dot(cameraPosition, dir);
float C = dot(cameraPosition, cameraPosition) - radiusClouds * radiusClouds;
float det = B * B - 4.0 * C;
float pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));
vec3 intersectionPont = cameraPosition + dir * pointIntDist;
intersectionPont =  intersectionPont - spherePos;
return intersectionPont;
}`),R.code.add(interfaces.Y`vec3 correctForPlanetCurvature(vec3 dir)
{
dir.z = dir.z*(1.-radiusCurvatureCorrectionFactor) + radiusCurvatureCorrectionFactor;
return dir;
}`),R.code.add(interfaces.Y`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec)
{
return (rotMat * vec4(inVec, 0.0)).xyz;
}`),(0,MainLighting_glsl.OB)(R),(0,MainLighting_glsl.o1)(R),R.code.add(interfaces.Y`const float SUNSET_TRANSITION_FACTOR = 0.3;
const vec3 RIM_COLOR = vec3(0.28, 0.175, 0.035);
const float RIM_SCATTERING_FACTOR = 140.0;
const float BACKLIGHT_FACTOR = 0.2;
const float BACKLIGHT_SCATTERING_FACTOR = 10.0;
const float BACKLIGHT_TRANSITION_FACTOR = 0.3;
vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds)
{
float upDotLight = dot(normalize(cameraPosition), normalize(mainLightDirection));
float dirDotLight = max(dot(normalize(-worldSpaceRay), normalize(mainLightDirection)), 0.0);
float sunsetTransition = clamp(pow(max(upDotLight, 0.0), SUNSET_TRANSITION_FACTOR), 0.0, 1.0);
vec3 ambientLight = calculateAmbientIrradiance(normalize(cameraPosition),  0.0);
vec3 mainLight = evaluateMainLighting(normalize(cameraPosition),  0.0);
vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));
vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));
float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);
float rimLightIntensity = 0.5 + 0.5 *pow(max(upDotLight, 0.0), 0.35);
vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, RIM_SCATTERING_FACTOR)) * scatteringMod;
float additionalLight = BACKLIGHT_FACTOR * pow(dirDotLight, BACKLIGHT_SCATTERING_FACTOR) * (1. - pow(sunsetTransition, BACKLIGHT_TRANSITION_FACTOR)) ;
return vec3(baseCloudColor * (1. + additionalLight) + directSunScattering);
}`),R.code.add(interfaces.Y`vec4 getCloudData(vec3 rayDir, bool readOtherChannel)
{
vec4 cloudData = texture(cubeMap, rayDir);
float mu = dot(rayDir, vec3(0, 0, 1));
bool readChannels = readChannelsRG ^^ readOtherChannel;
if (readChannels) {
cloudData = vec4(vec3(cloudData.r), cloudData.g);
} else {
cloudData = vec4(vec3(cloudData.b), cloudData.a);
}
if (length(cloudData) == 0.0) {
return vec4(cloudData.rgb, 1.0);
}
return cloudData;
}`),R.code.add(interfaces.Y`vec4 renderCloudsNoFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
float totalTransmittance = clamp(cloudData.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudData.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), totalTransmittance);
}`),R.code.add(interfaces.Y`vec4 renderCloudsCrossFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
vec4 cloudColor = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPositionCrossFade);
worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixCloudsCrossFade, normalize(intersectionPoint));
worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
cloudData = getCloudData(worldRayRotatedCorrected, fadeTextureChannels);
vec4 cloudColorCrossFade = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
cloudColor = mix(cloudColor, cloudColorCrossFade, crossFadeAnchorFactor);
float totalTransmittance = clamp(cloudColor.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudColor.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(cloudColor.rgb, totalTransmittance);
}`),R.code.add(interfaces.Y`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition)
{
return crossFade ? renderCloudsCrossFade(worldRay, cameraPosition) : renderCloudsNoFade(worldRay, cameraPosition);
}`)}function c(c,s){c.include(PhysicallyBasedRendering_glsl.P,s),c.include(e),c.include(FoamRendering_glsl.y),s.hasCloudsReflections&&c.include(v,s),s.hasScreenSpaceReflections&&c.include(d,s);const f=c.fragment;f.constants.add("fresnelSky","vec3",[.02,1,15]).add("fresnelMaterial","vec2",[.02,.1]).add("roughness","float",.015).add("foamIntensityExternal","float",1.7).add("ssrIntensity","float",.65).add("ssrHeightFadeStart","float",3e5).add("ssrHeightFadeEnd","float",5e5).add("waterDiffusion","float",.92).add("waterSeaColorMod","float",.8).add("correctionViewingPowerFactor","float",.4).add("skyZenitColor","vec3",[.52,.68,.9]).add("skyColor","vec3",[.67,.79,.9]).add("cloudFresnelModifier","vec2",[1.2,.01]),f.code.add(interfaces.Y`PBRShadingWater shadingInfo;
vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {
float exponent = pow((1.0 - cosTheta), fresnelSky[2]);
return mix(zenit, horizon, exponent);
}`),f.uniforms.add(new FloatPassUniform.d("lightingSpecularStrength",((e,o)=>o.lighting.mainLight.specularStrength)),new FloatPassUniform.d("lightingEnvironmentStrength",((e,o)=>o.lighting.mainLight.environmentStrength))),f.code.add(interfaces.Y`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {
float reflectionHit = 0.0;
float reflectionHitDiffused = 0.0;
vec3 seaWaterColor = linearizeGamma(color);
vec3 h = normalize(l + v);
shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);
shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);
shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);
shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);
shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);
shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);
float upDotV = max(dot(localUp,v), 0.0);
vec3 skyHorizon = linearizeGamma(skyColor);
vec3 skyZenit = linearizeGamma(skyZenitColor);
vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );
float upDotL = max(dot(localUp,l),0.0);
float daytimeMod = 0.1 + upDotL * 0.9;
skyColor *= daytimeMod;
float shadowModifier = clamp(shadow, 0.8, 1.0);
vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);
vec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;
vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;
vec3 specular = vec3(0.0);
if(upDotV > 0.0 && upDotL > 0.0) {
vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);
vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;
specular = lightingSpecularStrength * shadingInfo.NdotL * incidentLight * specularSun;
}
vec3 foam = vec3(0.0);
if(upDotV > 0.0) {
foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);
}
float correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);
vec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);
vec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),s.hasCloudsReflections&&f.code.add(interfaces.Y`vec4 cloudsColor = renderClouds(reflectedWorld, position);
cloudsColor.a = 1.0 - cloudsColor.a;
cloudsColor = pow(cloudsColor, vec4(GAMMA));
cloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * clamp((1.0 - totalFadeInOut), 0.0, 1.0);`),s.hasScreenSpaceReflections?(f.uniforms.add(new Matrix4PassUniform.O("view",((e,o)=>o.camera.viewMatrix)),new Texture2DPassUniform.W("lastFrameColorTexture",((e,o)=>o.ssr.lastFrameColor?.colorTexture)),new FloatPassUniform.d("fadeFactorSSR",((e,o)=>o.ssr.fadeFactor))),f.code.add(interfaces.Y`vec3 viewDir = normalize(viewPosition);
vec4 viewNormalVectorCoordinate = view *vec4(n, 0.0);
vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);
vec4 viewUp = view * vec4(localUp, 0.0);
vec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);
vec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));
vec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);
vec3 reflectedColor = vec3(0.0);
if (hitCoordinate.z > 0.0)
{
vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);
vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));
float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);
reflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;
reflectionHitDiffused = waterDiffusion * reflectionHit;
reflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *
reflectionHitDiffused * fresnelModifier.y * ssrIntensity;
}
float seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);
vec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +
reflSea * seaColorMod + specular + foam);`)):f.code.add(interfaces.Y`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),s.hasCloudsReflections?s.hasScreenSpaceReflections?f.code.add(interfaces.Y`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;
}`):f.code.add(interfaces.Y`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;
}`):f.code.add(interfaces.Y`return waterRenderedColor;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>i});var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js"),_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js")),_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js"),_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");function i(t){t.fragment.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__.W("texWaveNormal",(e=>e.waveNormal)),new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__.W("texWavePerturbation",(e=>e.wavePerturbation)),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__.U("waveParams",(e=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(f,e.waveStrength,e.waveTextureRepeat,e.flowStrength,e.flowOffset))),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__.$("waveDirection",(t=>(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(c,t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)))),t.include(_FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__.a),t.fragment.code.add(_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__.Y`const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);
vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rg - 1.0;
}
float sampleNoiseTexture(vec2 _uv) {
return texture(texWavePerturbation, _uv).b;
}
vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rgb - 1.0;
}
float computeProgress(vec2 uv, float time) {
return fract(time);
}
float computeWeight(vec2 uv, float time) {
float progress = computeProgress(uv, time);
return 1.0 - abs(1.0 - 2.0 * progress);
}
vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {
float flowStrength = waveParams[2];
float flowOffset = waveParams[3];
vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;
float progress = computeProgress(uv, time + phaseOffset);
float weight = computeWeight(uv, time + phaseOffset);
vec2 result = uv;
result -= flowVector * (progress + flowOffset);
result += phaseOffset;
result += (time - progress) * FLOW_JUMP;
return vec3(result, weight);
}
const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;
const float TIME_NOISE_STRENGTH = 7.77;
vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {
float waveStrength = waveParams[0];
vec2 waveMovement = time * -_waveDir;
float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;
vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);
vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);
vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;
vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;
vec3 mixNormal = normalize(normal_A + normal_B);
mixNormal.xy *= waveStrength;
mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));
return mixNormal;
}
vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {
float waveTextureRepeat = waveParams[1];
vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);
float foam  = normals2FoamIntensity(normal, waveParams[0]);
return vec4(normal, foam);
}`)}const f=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),c=(0,_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>$});var Z,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),vector=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vector.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");let $=Z=class extends Accessor.c{constructor(t={}){super(t),this._center=(0,vec3f64.c)(),this._up=(0,vec3f64.c)(),this._viewUp=(0,vec3f64.c)(),this._viewForward=(0,vec3f64.c)(),this._viewRight=(0,vec3f64.c)(),this._ray=(0,ray.Su)(),this._viewport=(0,vec4f64.f)(0,0,1,1),this._padding=(0,vec4f64.f)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,vec2f64.f)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,mat4f64.a)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,mat4f64.a)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,mat4f64.a)(),this._frustumDirty=!0,this._frustum=(0,frustum.Su)(),this._fullViewport=(0,vec4f64.c)(),this._pixelRatio=1,this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return(0,vec3.f)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,mat4.h)(this._viewMatrix,t),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,vec4.b)((0,vec4f64.c)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,vec4.e)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,vec4.b)((0,vec4f64.c)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,vec4.e)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[ht.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[ht.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[ht.RIGHT]+this._padding[ht.LEFT]}set fullWidth(t){this.width=t-(this._padding[ht.RIGHT]+this._padding[ht.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[ht.TOP]+this._padding[ht.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[ht.TOP]+this._padding[ht.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[ht.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[ht.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,vec4.h)(this._padding,t)||(this._viewport[0]+=t[ht.LEFT]-this._padding[ht.LEFT],this._viewport[1]+=t[ht.BOTTOM]-this._padding[ht.BOTTOM],this._viewport[2]-=t[ht.RIGHT]+t[ht.LEFT]-(this._padding[ht.RIGHT]+this._padding[ht.LEFT]),this._viewport[3]-=t[ht.TOP]+t[ht.BOTTOM]-(this._padding[ht.TOP]+this._padding[ht.BOTTOM]),(0,vec4.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,mat4.m)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2),r=e*this._aspect,s=(0,mat4.q)((0,mat4f64.a)(),-r*(1+2*this._padding[ht.LEFT]/t),r*(1+2*this._padding[ht.RIGHT]/t),-e*(1+2*this._padding[ht.BOTTOM]/i),e*(1+2*this._padding[ht.TOP]/i),this.near,this.far),h=this._get("projectionMatrix");return h&&(0,mat4.a)(h,s)?h:s}get inverseProjectionMatrix(){return(0,mat4.i)((0,mat4f64.a)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,mat4f64.a)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovX(t){this._fov=function fov_t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovY(t){this._fov=function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return(0,vec3.o)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,mat4.i)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,mat4.t)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}copyFrom(t){(0,vec3.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,vec4.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,vec4.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,vec2.j)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,mat4.h)(this._viewMatrix,t.viewMatrix),(0,vec3.c)(this._viewRight,t.viewRight),(0,vec3.c)(this._viewUp,t.viewUp),(0,vec3.c)(this._viewForward,t.viewForward)),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,frustum.kT)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,mat4.h)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,vec4.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up}clone(){return(new Z).copyFrom(this)}equals(t){return(0,vec3.h)(this.eye,t.eye)&&(0,vec3.h)(this.center,t.center)&&(0,vec3.h)(this.up,t.up)&&(0,vec4.h)(this._viewport,t.viewport)&&(0,vec4.h)(this._padding,t.padding)&&(0,vec2.m)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||(0,vec4.i)(t.screenPadding,this.screenPadding)>=i||(0,vec4.i)(this.screenViewport,t.screenViewport)>=i)return!1;(0,vec3.u)(et,t.eye,t.center),(0,vec3.u)(rt,this.eye,this.center);const e=(0,vec3.j)(et,rt),r=(0,vec3.F)(et),s=(0,vec3.F)(rt),h=5e-4;return e*e>=(1-1e-10)*r*s&&(0,vec3.y)(t.eye,this.eye)<Math.max(r,s)*h*h}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,vector.G8)(this.viewForward,(0,vec3.f)(et,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=(0,screenUtils.Yv)()){return t[0]=(this.padding[ht.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[ht.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[ht.LEFT]+this.width*i,t[1]=this.padding[ht.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==tt&&(0,vec3.c)(tt,t),tt[3]=1,(0,vec4.t)(tt,tt,this.projectionMatrix);const e=Math.abs(tt[3]);(0,vec3.i)(tt,tt,1/e);const s=this.fullViewport;i[0]=(0,mathUtils.Cq)(0,s[0]+s[2],.5+.5*tt[0]),i[1]=(0,mathUtils.Cq)(0,s[1]+s[3],.5+.5*tt[1]),i[2]=.5*(tt[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;tt[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],tt[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],tt[2]=(2*t[2]-1)*t[3],tt[3]=t[3],null!=this.inverseProjectionMatrix&&((0,vec4.t)(tt,tt,this.inverseProjectionMatrix),i[0]=tt[0],i[1]=tt[1],i[2]=tt[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,st),this.renderToScreen(st,i),i}projectToRenderScreen(t,i){if(tt[0]=t[0],tt[1]=t[1],tt[2]=t[2],tt[3]=1,(0,vec4.t)(tt,tt,this.viewProjectionMatrix),0===tt[3])return null;(0,vec3.i)(tt,tt,1/Math.abs(tt[3]));const e=this.fullViewport;return"x"in i?(i.x=(0,mathUtils.Cq)(0,e[0]+e[2],.5+.5*tt[0]),i.y=(0,mathUtils.Cq)(0,e[1]+e[3],.5+.5*tt[1])):(i[0]=(0,mathUtils.Cq)(0,e[0]+e[2],.5+.5*tt[0]),i[1]=(0,mathUtils.Cq)(0,e[1]+e[3],.5+.5*tt[1]),i.length>2&&(i[2]=.5*(tt[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,st),i)}unprojectFromRenderScreen(t,i){if((0,mat4.m)(it,this.projectionMatrix,this.viewMatrix),!(0,mat4.i)(it,it))return null;const e=this.fullViewport;return tt[0]=2*(t[0]-e[0])/e[2]-1,tt[1]=2*(t[1]-e[1])/e[3]-1,tt[2]=2*t[2]-1,tt[3]=1,(0,vec4.t)(tt,tt,it),0===tt[3]?null:(i[0]=tt[0]/tt[3],i[1]=tt[1]/tt[3],i[2]=tt[2]/tt[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,h=i*this.pixelRatio,o=Math.max(s-e/2,0),n=Math.max(this.fullHeight-h-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-h-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),_=r-p- -Math.min(h-r/2,0);return[Math.round(o),Math.round(n),Math.round(u),Math.round(_)]}computeUp(t){t===ViewingMode.UZ.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,vec3.f)(et,this.center,this.eye);const t=(0,vec3.l)(this.center);t<1?((0,vec3.s)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,vec3.j)(et,this.center))>.9999*(0,vec3.l)(et)*t||((0,vec3.b)(this._up,et,this.center),(0,vec3.b)(this._up,this._up,et),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,vec3.C)(et,this.eye,this.center),Math.abs(et[2])<=.9999&&((0,vec3.i)(et,et,et[2]),(0,vec3.s)(this._up,-et[0],-et[1],1-et[2]),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i,r=""){"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,vec3.h)(t,i)||((0,vec3.c)(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):Logger.c.getLogger("esri.views.3d.webgl-engine.lib.Camera").warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,frustum.Yz)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,mat4.u)(this._viewMatrix,this.eye,this.center,this.up),(0,vec3.s)(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),(0,vec3.s)(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),(0,vec3.s)(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_center",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_up",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_viewport",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_padding",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_fov",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_nearFar",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"_pixelRatio",void 0),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"eye",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"center",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"up",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"nearFar",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"near",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"far",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"viewport",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"screenViewport",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"screenPadding",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"x",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"y",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"width",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"height",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"fullWidth",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"fullHeight",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"_aspect",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"padding",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"projectionMatrix",null),(0,tslib_es6._)([(0,property.qq)({readOnly:!0})],$.prototype,"inverseProjectionMatrix",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"fov",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"fovX",null),(0,tslib_es6._)([(0,property.qq)()],$.prototype,"fovY",null),$=Z=(0,tslib_es6._)([(0,subclass.c)("esri.views.3d.webgl-engine.lib.Camera")],$);const tt=(0,vec4f64.c)(),it=(0,mat4f64.a)(),et=(0,vec3f64.c)(),rt=(0,vec3f64.c)(),st=(0,screenUtils.UZ)();var ht;!function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"}(ht||(ht={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>t});var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");class t{constructor(s,t){this._material=s,this._repository=t,this._map=new Map}dispose(){this._map.forEach(((s,t)=>{null!=s&&this._repository.release(this._material,t)}))}load(t,r,e){if(!this._material.produces(r,e))return null;this._map.has(e)||this._map.set(e,this._repository.acquire(this._material,r,e));const i=this._map.get(e);if(null!=i){if(i.ensureResources(t)===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Iv.LOADED)return i;this._repository.requestRender()}return null}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{qw:()=>wt,uy:()=>E,eK:()=>lt,cf:()=>ut,WQ:()=>q,mm:()=>pt,Sg:()=>at,Oc:()=>ot,iS:()=>et,oF:()=>ft,R1:()=>nt,KK:()=>ht,Y3:()=>tt,SS:()=>ct,f7:()=>Ot,UF:()=>it});var n,vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f32.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),DoubleArray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/DoubleArray.js"),FloatArray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/FloatArray.js"),Indices=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Indices.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),Attribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js");!function(n){n.length=function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)},n.normalize=function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u},n.scale=function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c},n.add=function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]},n.subtract=function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}}(n||(n={}));var ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),Geometry=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const b=n,j=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],d=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],U=[0,0,1,0,1,1,0,1],V=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],v=new Array(36);for(let At=0;At<6;At++)for(let t=0;t<6;t++)v[6*At+t]=At;const x=new Array(36);for(let At=0;At<6;At++)x[6*At]=0,x[6*At+1]=1,x[6*At+2]=2,x[6*At+3]=2,x[6*At+4]=3,x[6*At+5]=0;function E(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let s=0;s<8;s++)e[3*s]=j[s][0]*n[0],e[3*s+1]=j[s][1]*n[1],e[3*s+2]=j[s][2]*n[2];return new Geometry.K(t,[[VertexAttribute.K.POSITION,new Attribute.O(e,V,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(d,v,3)],[VertexAttribute.K.UV0,new Attribute.O(U,x,2)]])}const F=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],G=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],C=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],k=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function q(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let s=0;s<6;s++)e[3*s]=F[s][0]*n[0],e[3*s+1]=F[s][1]*n[1],e[3*s+2]=F[s][2]*n[2];return new Geometry.K(t,[[VertexAttribute.K.POSITION,new Attribute.O(e,C,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(G,k,3)]])}const B=(0,vec3f32.f)(-.5,0,-.5),z=(0,vec3f32.f)(.5,0,-.5),D=(0,vec3f32.f)(0,0,.5),X=(0,vec3f32.f)(0,.5,0),Z=(0,vec3f32.c)(),H=(0,vec3f32.c)(),J=(0,vec3f32.c)(),K=(0,vec3f32.c)(),Q=(0,vec3f32.c)();(0,vec3.f)(Z,B,X),(0,vec3.f)(H,B,z),(0,vec3.b)(J,Z,H),(0,vec3.n)(J,J),(0,vec3.f)(Z,z,X),(0,vec3.f)(H,z,D),(0,vec3.b)(K,Z,H),(0,vec3.n)(K,K),(0,vec3.f)(Z,D,X),(0,vec3.f)(H,D,B),(0,vec3.b)(Q,Z,H),(0,vec3.n)(Q,Q);const W=[B,z,D,X],Y=[0,-1,0,J[0],J[1],J[2],K[0],K[1],K[2],Q[0],Q[1],Q[2]],$=[0,1,2,3,1,0,3,2,1,3,0,2],_=[0,0,0,1,1,1,2,2,2,3,3,3];function tt(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let s=0;s<4;s++)e[3*s]=W[s][0]*n[0],e[3*s+1]=W[s][1]*n[1],e[3*s+2]=W[s][2]*n[2];return new Geometry.K(t,[[VertexAttribute.K.POSITION,new Attribute.O(e,$,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(Y,_,3)]])}function nt(t,n,e,s,o={uv:!0}){const r=-Math.PI,h=2*Math.PI,l=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(s)),f=(c+1)*(a+1),p=(0,FloatArray.mc)(3*f),i=(0,FloatArray.mc)(3*f),g=(0,FloatArray.mc)(2*f),m=[];let M=0;for(let w=0;w<=a;w++){const t=[],e=w/a,s=l+e*u,o=Math.cos(s);for(let l=0;l<=c;l++){const u=l/c,a=r+u*h,f=Math.cos(a)*o,w=Math.sin(s),O=-Math.sin(a)*o;p[3*M]=f*n,p[3*M+1]=w*n,p[3*M+2]=O*n,i[3*M]=f,i[3*M+1]=w,i[3*M+2]=O,g[2*M]=u,g[2*M+1]=e,t.push(M),++M}m.push(t)}const A=new Array;for(let w=0;w<a;w++)for(let t=0;t<c;t++){const n=m[w][t],e=m[w][t+1],s=m[w+1][t+1],o=m[w+1][t];0===w?(A.push(n),A.push(s),A.push(o)):w===a-1?(A.push(n),A.push(e),A.push(s)):(A.push(n),A.push(e),A.push(s),A.push(s),A.push(o),A.push(n))}const I=[[VertexAttribute.K.POSITION,new Attribute.O(p,A,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(i,A,3,!0)]];return o.uv&&I.push([VertexAttribute.K.UV0,new Attribute.O(g,A,2,!0)]),o.offset&&(I[0][0]=VertexAttribute.K.OFFSET,I.push([VertexAttribute.K.POSITION,new Attribute.O(Float64Array.from(o.offset),(0,Indices.MM)(A.length),3,!0)])),new Geometry.K(t,I)}function et(t,n,e,s){const o=function st(t,n,e){const s=t;let o,r;if(e)o=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=s*(1+Math.sqrt(5))/2;o=[-s,t,0,s,t,0,-s,-t,0,s,-t,0,0,-s,t,0,s,t,0,-s,-t,0,s,-t,t,0,-s,t,0,s,-t,0,-s,-t,0,s],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let c=0;c<o.length;c+=3)b.scale(o,c,t/b.length(o,c));let h={};function l(n,e){n>e&&([n,e]=[e,n]);const s=n.toString()+"."+e.toString();if(h[s])return h[s];let r=o.length;return o.length+=3,b.add(o,3*n,o,3*e,o,r),b.scale(o,r,t/b.length(o,r)),r/=3,h[s]=r,r}for(let c=0;c<n;c++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],s=r[e+1],o=r[e+2],h=l(t,s),u=l(s,o),c=l(o,t),a=4*e;n[a]=t,n[a+1]=h,n[a+2]=c,n[a+3]=s,n[a+4]=u,n[a+5]=h,n[a+6]=o,n[a+7]=c,n[a+8]=u,n[a+9]=h,n[a+10]=u,n[a+11]=c}r=n,h={}}const u=(0,FloatArray.u0)(o);for(let c=0;c<u.length;c+=3)b.normalize(u,c);return[[VertexAttribute.K.POSITION,new Attribute.O((0,FloatArray.u0)(o),r,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(u,r,3,!0)]]}(n,e,s);return new Geometry.K(t,o)}function ot(t,n,e,s,o,r,h,l,u=null){const c=e?[e[0],e[1],e[2]]:[0,0,0],a=n?[n[0],n[1],n[2]]:[0,0,1];h=h||[0,0];const f=s?[255*s[0],255*s[1],255*s[2],s.length>3?255*s[3]:255]:[255,255,255,255],p=null!=o&&2===o.length?o:[1,1],i=(0,Indices.MM)(1),w=[[VertexAttribute.K.POSITION,new Attribute.O(c,i,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(a,i,3,!0)],[VertexAttribute.K.UV0,new Attribute.O(h,i,h.length)],[VertexAttribute.K.COLOR,new Attribute.O(f,i,4,!0)],[VertexAttribute.K.SIZE,new Attribute.O(p,i,2)]];if(null!=r){const t=[r[0],r[1],r[2],r[3]];w.push([VertexAttribute.K.AUXPOS1,new Attribute.O(t,i,4)])}if(null!=l){const t=[l[0],l[1],l[2],l[3]];w.push([VertexAttribute.K.FEATUREATTRIBUTE,new Attribute.O(t,i,4)])}return new Geometry.K(t,w,null,ContentObjectType.C.Point,u)}const rt=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function ht(t,n=rt){const e=new Array(12);for(let c=0;c<4;c++)for(let t=0;t<3;t++)e[3*c+t]=n[c][t];const s=[0,1,2,2,3,0],r=[0,0,0,0,0,0],u=[[VertexAttribute.K.POSITION,new Attribute.O(e,s,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O([0,0,1],r,3,!0)],[VertexAttribute.K.UV0,new Attribute.O([0,0,1,0,1,1,0,1],s,2,!0)],[VertexAttribute.K.COLOR,new Attribute.O([255,255,255,255],r,4,!0)]];return new Geometry.K(t,u)}function lt(t,n,e,s,o,r=!0,h=!0){let l=0;const u=e,a=n;let f=(0,vec3f32.f)(0,l,0),p=(0,vec3f32.f)(0,l+a,0),i=(0,vec3f32.f)(0,-1,0),g=(0,vec3f32.f)(0,1,0);o&&(l=a,p=(0,vec3f32.f)(0,0,0),f=(0,vec3f32.f)(0,l,0),i=(0,vec3f32.f)(0,1,0),g=(0,vec3f32.f)(0,-1,0));const O=[p,f],m=[i,g],M=s+2,A=Math.sqrt(a*a+u*u);if(o)for(let w=s-1;w>=0;w--){const t=w*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);O.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,-u/A,a*Math.sin(t)/A);m.push(e)}else for(let w=0;w<s;w++){const t=w*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);O.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,u/A,a*Math.sin(t)/A);m.push(e)}const I=new Array,y=new Array;if(r){for(let t=3;t<O.length;t++)I.push(1),I.push(t-1),I.push(t),y.push(0),y.push(0),y.push(0);I.push(O.length-1),I.push(2),I.push(1),y.push(0),y.push(0),y.push(0)}if(h){for(let t=3;t<O.length;t++)I.push(t),I.push(t-1),I.push(0),y.push(t),y.push(t-1),y.push(1);I.push(0),I.push(2),I.push(O.length-1),y.push(1),y.push(2),y.push(m.length-1)}const N=(0,FloatArray.mc)(3*M);for(let c=0;c<M;c++)N[3*c]=O[c][0],N[3*c+1]=O[c][1],N[3*c+2]=O[c][2];const T=(0,FloatArray.mc)(3*M);for(let c=0;c<M;c++)T[3*c]=m[c][0],T[3*c+1]=m[c][1],T[3*c+2]=m[c][2];const R=[[VertexAttribute.K.POSITION,new Attribute.O(N,I,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(T,y,3,!0)]];return new Geometry.K(t,R)}function ut(t,l,u,p,i,g,O){const m=i?(0,vec3f32.a)(i):(0,vec3f32.f)(1,0,0),M=g?(0,vec3f32.a)(g):(0,vec3f32.f)(0,0,0);O??=!0;const A=(0,vec3f32.c)();(0,vec3.n)(A,m);const I=(0,vec3f32.c)();(0,vec3.i)(I,A,Math.abs(l));const y=(0,vec3f32.c)();(0,vec3.i)(y,I,-.5),(0,vec3.g)(y,y,M);const N=(0,vec3f32.f)(0,1,0);Math.abs(1-(0,vec3.j)(A,N))<.2&&(0,vec3.s)(N,0,0,1);const T=(0,vec3f32.c)();(0,vec3.b)(T,A,N),(0,vec3.n)(T,T),(0,vec3.b)(N,T,A);const R=2*p+(O?2:0),b=p+(O?2:0),j=(0,FloatArray.mc)(3*R),d=(0,FloatArray.mc)(3*b),U=(0,FloatArray.mc)(2*R),V=new Array(3*p*(O?4:2)),v=new Array(3*p*(O?4:2));O&&(j[3*(R-2)]=y[0],j[3*(R-2)+1]=y[1],j[3*(R-2)+2]=y[2],U[2*(R-2)]=0,U[2*(R-2)+1]=0,j[3*(R-1)]=j[3*(R-2)]+I[0],j[3*(R-1)+1]=j[3*(R-2)+1]+I[1],j[3*(R-1)+2]=j[3*(R-2)+2]+I[2],U[2*(R-1)]=1,U[2*(R-1)+1]=1,d[3*(b-2)]=-A[0],d[3*(b-2)+1]=-A[1],d[3*(b-2)+2]=-A[2],d[3*(b-1)]=A[0],d[3*(b-1)+1]=A[1],d[3*(b-1)+2]=A[2]);const x=(t,n,e)=>{V[t]=n,v[t]=e};let E=0;const F=(0,vec3f32.c)(),G=(0,vec3f32.c)();for(let n=0;n<p;n++){const t=n*(2*Math.PI/p);(0,vec3.i)(F,N,Math.sin(t)),(0,vec3.i)(G,T,Math.cos(t)),(0,vec3.g)(F,F,G),d[3*n]=F[0],d[3*n+1]=F[1],d[3*n+2]=F[2],(0,vec3.i)(F,F,u),(0,vec3.g)(F,F,y),j[3*n]=F[0],j[3*n+1]=F[1],j[3*n+2]=F[2],U[2*n]=n/p,U[2*n+1]=0,j[3*(n+p)]=j[3*n]+I[0],j[3*(n+p)+1]=j[3*n+1]+I[1],j[3*(n+p)+2]=j[3*n+2]+I[2],U[2*(n+p)]=n/p,U[2*n+1]=1;const e=(n+1)%p;x(E++,n,n),x(E++,n+p,n),x(E++,e,e),x(E++,e,e),x(E++,n+p,n),x(E++,e+p,e)}if(O){for(let t=0;t<p;t++){const n=(t+1)%p;x(E++,R-2,b-2),x(E++,t,b-2),x(E++,n,b-2)}for(let t=0;t<p;t++){const n=(t+1)%p;x(E++,t+p,b-1),x(E++,R-1,b-1),x(E++,n+p,b-1)}}const C=[[VertexAttribute.K.POSITION,new Attribute.O(j,V,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(d,v,3,!0)],[VertexAttribute.K.UV0,new Attribute.O(U,V,2,!0)]];return new Geometry.K(t,C)}function ct(t,n,e,s,o,r){s=s||10,o=null==o||o,(0,Util.Uc)(n.length>1);const l=[],u=[];for(let c=0;c<s;c++){l.push([0,-c-1,-(c+1)%s-1]);const t=c/s*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return at(t,u,n,[[0,0,0]],l,o,r)}function at(r,u,f,i,g,O,m=(0,vec3f32.f)(0,0,0)){const N=u.length,T=(0,FloatArray.mc)(f.length*N*3+(6*i.length||0)),R=(0,FloatArray.mc)(f.length*N*3+(i?6:0)),b=new Array,j=new Array;let d=0,U=0;const V=(0,vec3f32.c)(),v=(0,vec3f32.c)(),x=(0,vec3f32.c)(),E=(0,vec3f32.c)(),F=(0,vec3f32.c)(),G=(0,vec3f32.c)(),C=(0,vec3f32.c)(),k=(0,vec3f64.c)(),q=(0,vec3f32.c)(),B=(0,vec3f32.c)(),z=(0,vec3f32.c)(),D=(0,vec3f32.c)(),X=(0,vec3f32.c)(),Z=(0,plane.Su)();(0,vec3.s)(q,0,1,0),(0,vec3.f)(v,f[1],f[0]),(0,vec3.n)(v,v),O?((0,vec3.g)(k,f[0],m),(0,vec3.n)(x,k)):(0,vec3.s)(x,0,0,1),Ot(v,x,q,q,F,x,mt),(0,vec3.c)(E,x),(0,vec3.c)(D,F);for(let t=0;t<i.length;t++)(0,vec3.i)(G,F,i[t][0]),(0,vec3.i)(k,x,i[t][2]),(0,vec3.g)(G,G,k),(0,vec3.g)(G,G,f[0]),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2];R[U++]=-v[0],R[U++]=-v[1],R[U++]=-v[2];for(let t=0;t<g.length;t++)b.push(g[t][0]>0?g[t][0]:-g[t][0]-1+i.length),b.push(g[t][1]>0?g[t][1]:-g[t][1]-1+i.length),b.push(g[t][2]>0?g[t][2]:-g[t][2]-1+i.length),j.push(0),j.push(0),j.push(0);let H=i.length;const J=i.length-1;for(let h=0;h<f.length;h++){let r=!1;h>0&&((0,vec3.c)(V,v),h<f.length-1?((0,vec3.f)(v,f[h+1],f[h]),(0,vec3.n)(v,v)):r=!0,(0,vec3.g)(B,V,v),(0,vec3.n)(B,B),(0,vec3.g)(z,f[h-1],E),(0,plane.aY)(f[h],B,Z),(0,plane._y)(Z,(0,ray.em)(z,V),k)?((0,vec3.f)(k,k,f[h]),(0,vec3.n)(x,k),(0,vec3.b)(F,B,x),(0,vec3.n)(F,F)):Ot(B,E,D,q,F,x,mt),(0,vec3.c)(E,x),(0,vec3.c)(D,F)),O&&((0,vec3.g)(k,f[h],m),(0,vec3.n)(X,k));for(let t=0;t<N;t++)if((0,vec3.i)(G,F,u[t][0]),(0,vec3.i)(k,x,u[t][1]),(0,vec3.g)(G,G,k),(0,vec3.n)(C,G),R[U++]=C[0],R[U++]=C[1],R[U++]=C[2],(0,vec3.g)(G,G,f[h]),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2],!r){const n=(t+1)%N;b.push(H+t),b.push(H+N+t),b.push(H+n),b.push(H+n),b.push(H+N+t),b.push(H+N+n);for(let t=0;t<6;t++){const n=b.length-6;j.push(b[n+t]-J)}}H+=N}const K=f[f.length-1];for(let t=0;t<i.length;t++)(0,vec3.i)(G,F,i[t][0]),(0,vec3.i)(k,x,i[t][1]),(0,vec3.g)(G,G,k),(0,vec3.g)(G,G,K),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2];const Q=U/3;R[U++]=v[0],R[U++]=v[1],R[U++]=v[2];const W=H-N;for(let t=0;t<g.length;t++)b.push(g[t][0]>=0?H+g[t][0]:-g[t][0]-1+W),b.push(g[t][2]>=0?H+g[t][2]:-g[t][2]-1+W),b.push(g[t][1]>=0?H+g[t][1]:-g[t][1]-1+W),j.push(Q),j.push(Q),j.push(Q);const Y=[[VertexAttribute.K.POSITION,new Attribute.O(T,b,3,!0)],[VertexAttribute.K.NORMAL,new Attribute.O(R,j,3,!0)]];return new Geometry.K(r,Y)}function ft(t,n,e,s){(0,Util.Uc)(n.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,Util.Uc)(3===n[0].length,"createPolylineGeometry(): malformed vertex"),(0,Util.Uc)(null==e||e.length===n.length,"createPolylineGeometry: need same number of points and normals"),(0,Util.Uc)(null==e||3===e[0].length,"createPolylineGeometry(): malformed normal");const o=(0,DoubleArray.Gg)(3*n.length),r=new Array(2*(n.length-1));let h=0,l=0;for(let c=0;c<n.length;c++){for(let t=0;t<3;t++)o[h++]=n[c][t];c>0&&(r[l++]=c-1,r[l++]=c)}const u=[[VertexAttribute.K.POSITION,new Attribute.O(o,r,3,!0)]];if(e){const t=(0,FloatArray.mc)(3*e.length);let s=0;for(let o=0;o<n.length;o++)for(let n=0;n<3;n++)t[s++]=e[o][n];u.push([VertexAttribute.K.NORMAL,new Attribute.O(t,r,3,!0)])}return s&&u.push([VertexAttribute.K.COLOR,new Attribute.O(s,(0,Indices.yh)(s.length/4),4)]),new Geometry.K(t,u,null,ContentObjectType.C.Line)}function pt(t,n,e,s,o,r=0){const h=new Array(18),l=[[-e,r,o/2],[s,r,o/2],[0,n+r,o/2],[-e,r,-o/2],[s,r,-o/2],[0,n+r,-o/2]];for(let c=0;c<6;c++)h[3*c]=l[c][0],h[3*c+1]=l[c][1],h[3*c+2]=l[c][2];return new Geometry.K(t,[[VertexAttribute.K.POSITION,new Attribute.O(h,[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5],3,!0)]])}function it(t,n){const e=t.getMutableAttribute(VertexAttribute.K.POSITION).data;for(let s=0;s<e.length;s+=3){const t=e[s],o=e[s+1],r=e[s+2];(0,vec3.s)(Mt,t,o,r),(0,vec3.e)(Mt,Mt,n),e[s]=Mt[0],e[s+1]=Mt[1],e[s+2]=Mt[2]}}function wt(t,n=t){const e=t.attributes,s=e.get(VertexAttribute.K.POSITION).data,o=e.get(VertexAttribute.K.NORMAL).data;if(o){const t=n.getMutableAttribute(VertexAttribute.K.NORMAL).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}if(s){const t=n.getMutableAttribute(VertexAttribute.K.POSITION).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}}function gt(t,s,o,h,l){return!(Math.abs((0,vec3.j)(s,t))>l||((0,vec3.b)(o,t,s),(0,vec3.n)(o,o),(0,vec3.b)(h,o,t),(0,vec3.n)(h,h),0))}function Ot(t,n,e,s,o,r,h){return gt(t,n,o,r,h)||gt(t,e,o,r,h)||gt(t,s,o,r,h)}const mt=.99619469809,Mt=(0,vec3f32.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>_});var _core_uid_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/core/uid.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js"),_Attribute_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_Geometry_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js"),_Object3D_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js"),_testUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js"),_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js"),_materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js");class _{constructor(i){this._originSR=i,this._rootOriginId="root/"+(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_13__.Q)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=_testUtils_js__WEBPACK_IMPORTED_MODULE_9__.e.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__.W)(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__.W)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(p,t,r.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),p[0]<g&&p[1]<g&&p[2]<g){if(m){const r=Math.max(...p);if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(p,t,m.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),Math.max(...p)<r)return m}return r}return m||(m=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__.W)(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.f)(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__.O({width:2,color:i}),h.add(this._material);const t=new _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__.O(h,{pickable:!1}),r=new _Object3D_js__WEBPACK_IMPORTED_MODULE_8__.m({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],j=p.length,u=new Array(3*j),l=new Array,b=.5*this._gridSize;for(let o=0;o<j;o++)u[3*o]=t[0]+(1&p[o]?b:-b),u[3*o+1]=t[1]+(2&p[o]?b:-b),u[3*o+2]=t[2]+(4&p[o]?b:-b),o>0&&l.push(o-1,o);(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_3__.projectBuffer)(u,this._originSR,0,u,r.renderSpatialReference,0,j);const M=new _Geometry_js__WEBPACK_IMPORTED_MODULE_6__.K(this._material,[[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__.K.POSITION,new _Attribute_js__WEBPACK_IMPORTED_MODULE_4__.O(u,l,3,!0)]],null,_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__.C.Line);h.add(M),_.addGeometry(M)}get test(){const t=this;return{set gridSize(i){t._gridSize=i}}}}const p=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{YD:()=>b,YL:()=>M});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js"),_IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js"),_intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js"),_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js");const w=1e-5;class T{constructor(t){this.options=new _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a2,this._results=new A,this.transform=new _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.Cs,this.tolerance=w,this.verticalOffset=null,this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),this._rayEnd=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayBeginTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayEndTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.viewingMode=t??_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__.UZ.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,s){this.resetWithRay((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.i_)(t,r,this._ray),s)}resetWithRay(t,r){this.camera=r,t!==this._ray&&(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.kT)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__.UZ.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,s,i,e){this.point=r,this.filterPredicate=i,this.tolerance=s??w;const n=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.uy)(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const s of t){const t=s.getSpatialQueryAccelerator?.();null!=t?(null!=n?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,n):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):s.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const i=t.effectiveTransformation,n=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__.uy)(this.verticalOffset);for(const a of r){if(!a.visible)continue;const{material:r,id:o}=a;this.transform.setAndInvalidateLazyTransforms(i,a.transformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const h=this.transform.transform;null!=n&&(n.objectTransform=this.transform),r.intersect(a,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,i,e,n,a,d)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const l=n?this._results.hud:this._results,c=n?n=>{const h=new _IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__.oR(t,o,e,d);n.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a0.HUD,h,r,i,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I,a)}:s=>s.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a0.OBJECT,{object:t,geometryId:o,triangleNr:e},r,i,h,a);if((null==l.min.drapedLayerOrder||a>=l.min.drapedLayerOrder)&&(null==l.min.dist||r<l.min.dist)&&c(l.min),this.options.store!==_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.$t.MIN&&(null==l.max.drapedLayerOrder||a<l.max.drapedLayerOrder)&&(null==l.max.dist||r>l.max.dist)&&c(l.max),this.options.store===_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.$t.ALL)if(n){const t=new I(this._ray);c(t),this._results.hud.all.push(t)}else{const t=new x(this._ray);c(t),this._results.all.push(t)}}}))}}sortResults(t=this._results.all){t.sort(((t,r)=>t.dist!==r.dist?(t.dist??0)-(r.dist??0):t.drapedLayerOrder!==r.drapedLayerOrder?(t.drapedLayerOrder??Number.MAX_VALUE)-(r.drapedLayerOrder??Number.MAX_VALUE):(r.drapedLayerGraphicOrder??Number.MIN_VALUE)-(t.drapedLayerGraphicOrder??Number.MIN_VALUE)))}}function b(t){return new T(t)}class A{constructor(){this.min=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)()),this.max=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)()),this.hud={min:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)()),max:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)()),all:new Array},this.ground=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class x{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(N)):null}getIntersectionPoint(t){return!!(0,_intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__.Az)(this)&&((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(t,this.ray.origin,N),!0)}getTransformedNormal(t){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(B,this.normal),B[3]=0,(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.t)(B,B,this.transformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,B),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.n)(t,t)}constructor(t){this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a0.OBJECT,this.normal=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.Su)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a0.OBJECT,(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.kT)(t,this._ray)}set(r,i,e,n,a,h,d){this.intersector=r,this.dist=e,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,n??_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.d),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.transformation,a??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I),this.target=i,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=d}copy(r){(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__.kT)(r.ray,this._ray),this.intersector=r.intersector,this.dist=r.dist,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,r.normal),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.transformation,r.transformation)}}class I extends x{constructor(){super(...arguments),this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__.a0.HUD}}function M(t){return new x(t)}const N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var i,t;__webpack_require__.d(__webpack_exports__,{$t:()=>t,a0:()=>i,a2:()=>e}),function(i){i[i.OBJECT=0]="OBJECT",i[i.HUD=1]="HUD",i[i.TERRAIN=2]="TERRAIN",i[i.OVERLAY=3]="OVERLAY",i[i.I3S=4]="I3S",i[i.PCL=5]="PCL",i[i.LOD=6]="LOD",i[i.VOXEL=7]="VOXEL"}(i||(i={}));class e{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=t.ALL}}!function(i){i[i.MIN=0]="MIN",i[i.MINMAX=1]="MINMAX",i[i.ALL=2]="ALL"}(t||(t={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eI:()=>o,oR:()=>r});var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");class t{constructor(s,t,r){this.object=s,this.geometryId=t,this.triangleNr=r}}class r extends t{constructor(t,r,c,e){super(t,r,c),this.center=null!=e?(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.g)(e):null}}class e{constructor(s){this.layerUid=s}}class o extends e{constructor(s,t){super(s),this.graphicUid=t}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>c});var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");class t{constructor(s,t){this.vec3=s,this.id=t}}function c(c,r,n,o){return new t((0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(c,r,n),o)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var E,I;__webpack_require__.d(__webpack_exports__,{C:()=>E,q:()=>I}),function(E){E[E.ADD=0]="ADD",E[E.UPDATE=1]="UPDATE",E[E.REMOVE=2]="REMOVE"}(E||(E={})),function(E){E[E.NONE=0]="NONE",E[E.VISIBILITY=1]="VISIBILITY",E[E.GEOMETRY=2]="GEOMETRY",E[E.TRANSFORMATION=4]="TRANSFORMATION",E[E.HIGHLIGHT=8]="HIGHLIGHT",E[E.OCCLUDEE=16]="OCCLUDEE"}(I||(I={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>V});var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/mathUtils.js"),_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),_ContentObject_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js"),_Util_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js");class V extends _ContentObject_js__WEBPACK_IMPORTED_MODULE_11__.u{get geometries(){return this._geometries}get transformation(){return this._transformation??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I}set transformation(e){this._transformation=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._transformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),e),this._invalidateBoundingVolume(),this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(e){this._shaderTransformation=e?(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._shaderTransformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),e):null,this._invalidateBoundingVolume(),this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}constructor(t={}){super(),this.type=_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__.C.Object,this._shaderTransformation=null,this._parentLayer=null,this._visible=!0,this.castShadow=t.castShadow??!0,this.usesVerticalDistanceToGround=t.usesVerticalDistanceToGround??!1,this.graphicUid=t.graphicUid,this.layerUid=t.layerUid,t.isElevationSource&&(this.lastValidElevationBB=new O),this._geometries=t.geometries?Array.from(t.geometries):new Array}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,_Util_js__WEBPACK_IMPORTED_MODULE_8__.Uc)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t),this._emit("geometryAdded",{object:this,geometry:t}),this._invalidateBoundingVolume()}removeGeometry(t){const e=this._geometries.splice(t,1)[0];e&&(this._emit("geometryRemoved",{object:this,geometry:e}),this._invalidateBoundingVolume())}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,e,i=!1){this._emit("attributesChanged",{object:this,geometry:t,attribute:e,sync:i}),(0,_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__.W)(e)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__.S(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.sN.MaskOccludee);for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__.Ww)(e.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__.gh)(e.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__.S(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.sN.Highlight);for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__.Ww)(e.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__.gh)(e.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,i){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.transformation,t.transformation)}getCombinedShaderTransformation(t,i=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()){return(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new A,this._validateBoundingVolume(this._bvWorldSpace,U.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new A,this._validateBoundingVolume(this._bvObjectSpace,U.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,e){const i=e===U.ObjectSpace;for(const s of this._geometries){const e=s.boundingInfo;e&&M(e,t,i?s.transformation:this.getCombinedShaderTransformation(s))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.p)(t.bounds,t.min,t.max,.5);for(const s of this._geometries){const e=s.boundingInfo;if(null==e)continue;const r=i?s.transformation:this.getCombinedShaderTransformation(s),o=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.ED)(r);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(B,e.center,r);const h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.o)(B,t.bounds),m=e.radius*o;t.bounds[3]=Math.max(t.bounds[3],h+m)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this._parentLayer&&t&&this._parentLayer.notifyObjectBBChanged(this,t)}_emit(t,e){this._parentLayer&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.includes(e),getGeometryIndex:e=>t._geometries.indexOf(e)}}}class O{constructor(){this.min=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class A extends O{constructor(){super(...arguments),this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)()}}function M(t,e,s){const r=t.bbMin,o=t.bbMax;if((0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.y)(s)){const t=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(L,s[12],s[13],s[14]);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(T,r,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(C,o,t);for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],T[i]),e.max[i]=Math.max(e.max[i],C[i])}else if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(T,r,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(r,o))for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],T[i]),e.max[i]=Math.max(e.max[i],T[i]);else{(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(C,o,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],T[t],C[t]),e.max[t]=Math.max(e.max[t],T[t],C[t]);for(let t=0;t<3;++t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(T,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(C,o),T[t]=o[t],C[t]=r[t],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(T,T,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(C,C,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],T[t],C[t]),e.max[t]=Math.max(e.max[t],T[t],C[t])}}}const L=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),T=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();var U;!function(t){t[t.WorldSpace=0]="WorldSpace",t[t.ObjectSpace=1]="ObjectSpace"}(U||(U={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>W});var _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectPool.js"),_core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_Util_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");class b{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),g.clearPool(),B[0]=null,P.prune(),H.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const o=g.acquire();for(let n=0;n<t;n++){const t=e[n];this._isDegenerate(t)?this._degenerateObjects.add(t):(o.init(this._root),this._add(t,o))}g.release(o)}remove(e,t=null){this._objectCount-=e.length;const o=g.acquire();for(const n of e){const e=null!=t?t:(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(this.objectToBoundingSphere(n),w);E(e[3])?(o.init(this._root),this._remove(n,e,o)):this._degenerateObjects.delete(n)}g.release(o),this._shrink()}update(e,t){if(!E(t[3])&&this._isDegenerate(e))return;const o=function R(e){return B[0]=e,B}(e);this.remove(o,t),this.add(o)}forEachAlongRay(e,t,o){const n=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__.em)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(n,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,o,n){const i=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__.em)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,n))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const o=t.node;return o.terminals.forAll(e),null!==o.residents&&o.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,i,s=(()=>!0),r=1/0){let h=1/0,a=1/0,l=null;const u=T(e,t),c=o=>{if(--r,!s(o))return;const n=this.objectToBoundingSphere(o);if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.Ou)(i,n))return;const u=z(e,t,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(n)),c=u-n[3],m=u+n[3];c<h&&(h=c,a=m,l=o)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.Ou)(i,s.bounds))return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,u,s.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,s.bounds),z(e,t,v)>a)return!1;const h=s.node;return h.terminals.forAll((e=>c(e))),null!==h.residents&&h.residents.forAll((e=>c(e))),!0}),e,t),l}forEachInDepthRange(e,t,i,s,r,h,a){let l=-1/0,u=1/0;const c={setRange:e=>{i===b.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};c.setRange(s);const m=z(t,i,e),_=T(t,i),p=T(t,-i),g=e=>{if(!a(e))return;const o=this.objectToBoundingSphere(e),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(o),s=z(t,i,n)-m,_=s-o[3],p=s+o[3];_>u||p<l||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.Ou)(h,o)||r(e,c)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__.Ou)(h,e.bounds))return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,_,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,e.bounds),z(t,i,v)-m>u)return!1;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,p,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,e.bounds),z(t,i,v)-m<l)return!1;const s=e.node;return s.terminals.forAll((e=>g(e))),null!==s.residents&&s.residents.forAll((e=>g(e))),!0}),t,i)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const o=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(t),s=t=>{const s=this.objectToBoundingSphere(t),r=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(s),h=o+r;return!((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(s),n)-h*h<=0)||e(t)};let r=!0;const h=e=>{r&&(r=s(e))};this._forEachNode(this._root,(e=>{const t=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),s=o+t;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(e.bounds),n)-s*s>0)return!1;const a=e.node;return a.terminals.forAll(h),r&&null!==a.residents&&a.residents.forAll(h),r})),r&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__.If)(e.origin,e.direction,C,y)}_intersectsNodeWithOffset(e,t,o){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),o.applyToMinMax(C,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__.If)(e.origin,e.direction,C,y)}_intersectsObject(e,t){const o=this.objectToBoundingSphere(t);return!(o[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o,e)}_intersectsObjectWithOffset(e,t,o){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o.applyToBoundingSphere(n),e)}_forEachNode(e,t){let o=g.acquire().init(e);const n=[o];for(;0!==n.length;){if(o=n.pop(),t(o)&&!o.isLeaf())for(let e=0;e<o.node.children.length;e++)o.node.children[e]&&n.push(g.acquire().init(o).advance(e));g.release(o)}}_forEachNodeDepthOrdered(e,t,o,n=b.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(e);const s=[i];for(function N(e,t,o){if(!H.length)for(let n=0;n<8;++n)H.push({index:0,distance:0});for(let n=0;n<8;++n){const o=M[n];H.data[n].index=n,H.data[n].distance=z(e,t,o)}H.sort(((e,t)=>e.distance-t.distance));for(let n=0;n<8;++n)o[n]=H.data[n].index}(o,n,K);0!==s.length;){if(i=s.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=K[e];i.node.children[t]&&s.push(g.acquire().init(i).advance(t))}g.release(i)}}_remove(e,t,o){P.clear();const n=o.advanceTo(t,((e,t)=>{P.push(e.node),P.push(t)}))?o.node.terminals:o.node.residents;if(n.removeUnordered(e),0===n.length)for(let i=P.length-2;i>=0;i-=2){const e=P.data[i],t=P.data[i+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,o){return o>=0&&(e.children[o]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.c({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let o=0;o<t.length;o++){const n=g.acquire().init(e);this._add(t.at(o),n),g.release(n)}}_grow(e,t){if(0!==t&&(x(e,t,(e=>this.objectToBoundingSphere(e)),k),E(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(k,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(k,e):this._growRootAsSubNode(e),g.release(e)}}_rebuildTree(e,t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(q,t.bounds),q[3]=t.halfSize,x([e,q],2,(e=>e),I);const o=g.acquire().init(this._root);this._root.initFrom(null,I,I[3]),this._root.increaseHalfSize(1.25),this._forEachNode(o,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),g.release(o)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let o=0;return this._forEachNode(this._root,(e=>(o=Math.max(o,e.depth),o+t<=this._maximumDepth))),o+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],o=e;let n=-1/0;const i=this._root.bounds,s=this._root.halfSize;for(let h=0;h<3;h++){const e=i[h]-s-(o[h]-t),r=o[h]+t-(i[h]+s),a=Math.max(0,Math.ceil(e/(2*s))),d=Math.max(0,Math.ceil(r/(2*s)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);n=Math.max(n,l),L[h].min=a,L[h].max=d}for(let h=0;h<3;h++){let e=L[h].min,t=L[h].max;const o=(n-(e+t))/2;e+=Math.ceil(o),t+=Math.floor(o);const r=i[h]-s-e*s*2;F[h]=r+(t+e)*s}const r=n*s;return F[3]=r*A,g.acquire().initFrom(null,F,r,0)}_growRootAsSubNode(e){const t=this._root.node;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(e),e.advanceTo(k,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let o=0,n=0;for(;n<t.length&&null==e;)o=n++,e=t[o];for(;n<t.length;)if(t[n++])return-1;return o}_isDegenerate(e){return!E(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,o=this._root.halfSize;return e[3]<=o&&e[0]>=t[0]-o&&e[0]<=t[0]+o&&e[1]>=t[1]-o&&e[1]<=t[1]+o&&e[2]>=t[2]-o&&e[2]<=t[2]+o}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:o}=this,n=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:o,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:n}}}_nodeToJSON(e){const t=e.children.map((e=>e?this._nodeToJSON(e):null)),o=e.residents?.map((e=>this.objectToBoundingSphere(e))),n=e.terminals?.map((e=>this.objectToBoundingSphere(e)));return{children:t,residents:o,terminals:n}}static fromJSON(e){const t=new b((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class g{constructor(){this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,o,n=this.depth){return this.node=null!=e?e:g.createEmptyNode(),null!=t&&(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,this.bounds),this.halfSize=o,this.depth=n,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*A}advance(e){let t=this.node.children[e];t||(t=g.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const o=M[e];return this.bounds[0]+=o[0]*this.halfSize,this.bounds[1]+=o[1]*this.halfSize,this.bounds[2]+=o[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,o=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!o)return t&&t(this,-1),!1;this.node.residents=null}const n=this._childIndex(e);t&&t(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.c({shrink:!0}),residents:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.c({shrink:!0})}}static acquire(){return g._pool.acquire()}static release(e){g._pool.release(e)}static clearPool(){g._pool.prune()}}function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function O(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function j(e,t,o){o[0]=e[0]+t,o[1]=e[1]+t,o[2]=e[2]+t}function x(e,t,o,n){if(1===t){const t=o(e[0]);(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,n)}else{C[0]=1/0,C[1]=1/0,C[2]=1/0,y[0]=-1/0,y[1]=-1/0,y[2]=-1/0;for(let n=0;n<t;n++){const t=o(e[n]);E(t[3])&&(S(C,t),O(y,t))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.p)(n,C,y,.5),n[3]=Math.max(y[0]-C[0],y[1]-C[1],y[2]-C[2])/2}}function T(e,t){let o,n=1/0;for(let i=0;i<8;++i){const s=z(e,t,D[i]);s<n&&(n=s,o=D[i])}return o}function z(e,t,o){return t*(e[0]*o[0]+e[1]*o[1]+e[2]*o[2])}function E(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}g._pool=new _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__.c(g),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(b||(b={}));const M=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],D=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],A=Math.sqrt(3),B=[null];const F=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),v=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),y=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),P=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.c,w=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),k=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),q=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),I=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.c,K=[0,0,0,0,0,0,0,0],W=b},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>h});var _core_uid_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/uid.js"),_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/mathUtils.js");class h{constructor(r,s={}){this.geometry=r,this.screenToWorldRatio=1,this._transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),this._shaderTransformation=null,this._boundingSphere=null,this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_5__.Q)(),this.layerUid=s.layerUid,this.graphicUid=s.graphicUid,this.castShadow=s.castShadow??!1,null!=s.objectShaderTransformation&&this.objectShaderTransformationChanged(s.objectShaderTransformation)}get transformation(){return this._transformation}set transformation(t){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._transformation,t),this._boundingSphere=null}get boundingInfo(){return this.geometry.boundingInfo}objectShaderTransformationChanged(t){null==t?this._shaderTransformation=null:(this._shaderTransformation??=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(this._shaderTransformation,t,this.geometry.transformation)),this._boundingSphere=null}get boundingSphere(){return this.boundingInfo?(null==this._boundingSphere&&(this._boundingSphere??=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.c)(),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._boundingSphere,this.boundingInfo.center,this.shaderTransformation),this._boundingSphere[3]=this.boundingInfo.radius*(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.ED)(this.shaderTransformation)),this._boundingSphere):_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.N}get material(){return this.geometry.material}get type(){return this.geometry.type}get shaderTransformation(){return null==this._shaderTransformation?this.transformation:this._shaderTransformation}get attributes(){return this.geometry.attributes}get highlights(){return this.geometry.highlights}get occludees(){return this.geometry.occludees}get visible(){return this.geometry.visible}set visible(t){this.geometry.visible=t}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var C;__webpack_require__.d(__webpack_exports__,{C:()=>C}),function(C){C[C.ASYNC=0]="ASYNC",C[C.SYNC=1]="SYNC"}(C||(C={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>r});var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js");class r extends _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__._{}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>a});var Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),ContentObject=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js");const DirtyEvents_e=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","transformationChanged","shaderTransformationChanged","visibilityChanged","occlusionChanged","highlightChanged","geometryAdded","geometryRemoved","attributesChanged"];var Octree=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js"),UpdatePolicy=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");class a extends ContentObject.u{get objects(){return this._objects}constructor(s,r,h=""){super(),this.stage=s,this.apiLayerUid=h,this.type=ContentObjectType.C.Layer,this.events=new Evented.c,this.visible=!0,this.pickable=!0,this.sliceable=!1,this._objects=new PooledArray.c,this._objectsAdded=new PooledArray.c,this._handles=new Handles.c,this.apiLayerUid=h,this.visible=r?.visible??!0,this.pickable=r?.pickable??!0,this.updatePolicy=r?.updatePolicy??UpdatePolicy.C.ASYNC,this._disableOctree=r?.disableOctree??!1,s.add(this);for(const e of DirtyEvents_e)this._handles.add(this.events.on(e,(t=>s.handleEvent(e,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),null!=this._octree&&(this._objectsAdded.removeUnordered(e)||this._octree.remove([e])))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),null!=this._octree&&this._objectsAdded.pushArray(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;if(this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),null!=this._octree){for(let e=0;e<t.length;)this._objectsAdded.removeUnordered(t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}}sync(){this.updatePolicy!==UpdatePolicy.C.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.length>50&&!this._disableOctree?(this._octree=new Octree.c((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear()),this._octree}invalidateSpatialQueryAccelerator(){this._octree=(0,maybe.mG)(this._octree),this._objectsAdded.clear()}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Az:()=>o});__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");__webpack_require__("./node_modules/@arcgis/core/chunks/boundedPlane.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");function o(t){return null!=t?.dist}(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>e,u:()=>n});const n={stableRendering:!1},e={rootOrigin:null}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>f});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),basicInterfaces=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),DefaultBufferWriter=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js"),TriangleMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js"),VisualVariablePassParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),ColorMaterial_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");VisualVariablePassParameters.i;class T extends ShaderTechnique.O{initializeProgram(e){return new Program.G(e.rctx,T.shader.get().build(this.configuration),DefaultVertexAttributeLocations.q)}_createPipeline(e,t){const i=this.configuration,s=e===TransparencyPassType.H.NONE,c=e===TransparencyPassType.H.FrontFace;return(0,renderState._w)({blending:i.output!==ShaderOutput.m.Color&&i.output!==ShaderOutput.m.Alpha||!i.transparent?null:s?OrderIndependentTransparency.yU:(0,OrderIndependentTransparency.y2)(e),culling:(0,renderState.AD)(i.cullFace),depthTest:{func:(0,OrderIndependentTransparency.kd)(e)},depthWrite:(s||c)&&i.writeDepth?renderState.AT:null,colorWrite:renderState.kp,stencilWrite:i.hasOccludees?StencilUtils.wd:null,stencilTest:i.hasOccludees?t?StencilUtils._o:StencilUtils.Oy:null,polygonOffset:s||c?i.polygonOffset?O:null:(0,OrderIndependentTransparency.S0)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}T.shader=new ReloadableShaderModule.O(ColorMaterial_glsl.C,(()=>__webpack_require__.e(27328).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterial.glsl.js"))));const O={factor:1,units:1};var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class i extends DefaultTechniqueConfiguration.Q{constructor(){super(...arguments),this.output=ShaderOutput.m.Color,this.cullFace=basicInterfaces.CM.None,this.transparencyPassType=TransparencyPassType.H.NONE,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.objectAndLayerIdColorInstanced=!1,this.vvColor=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:ShaderOutput.m.COUNT})],i.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:basicInterfaces.CM.COUNT})],i.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:TransparencyPassType.H.COUNT})],i.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"polygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],i.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],i.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!0})],i.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],i.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],i.prototype,"vvOpacity",void 0);class f extends TriangleMaterial.O{constructor(e){super(e,new d),this.supportsEdges=!0,this._configuration=new i}getConfiguration(e,r){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this._isTransparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=r.transparencyPassType,this._configuration.enableOffset=r.camera.relativeElevation<OrderIndependentTransparency.ye,this._configuration.multipassEnabled=r.multipassEnabled,this._configuration.cullAboveGround=r.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration}produces(e,r){return!!(r===ShaderOutput.m.Color||r===ShaderOutput.m.Alpha||r===ShaderOutput.m.Highlight||r===ShaderOutput.m.Depth&&this.parameters.writeLinearDepth||r===ShaderOutput.m.ObjectAndLayerIdColor)&&(e===RenderSlot.y.DRAPED_MATERIAL||(r===ShaderOutput.m.Highlight?e===RenderSlot.y.OPAQUE_MATERIAL:e===(this._isTransparent?this.parameters.writeDepth?RenderSlot.y.TRANSPARENT_MATERIAL:RenderSlot.y.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:RenderSlot.y.OPAQUE_MATERIAL)))}createGLMaterial(e){return new m(e)}createBufferWriter(){const e=(0,InterleavedLayout.iC)().vec3f(VertexAttribute.K.POSITION);return(0,has.c)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute.K.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?e.f32(VertexAttribute.K.COLORFEATUREATTRIBUTE):e.vec4u8(VertexAttribute.K.COLOR),new DefaultBufferWriter.S(e)}get _isTransparent(){return this.parameters.color[3]<1||this.parameters.forceTransparentMode}}class m extends GLMaterial.c{_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){return this._output!==ShaderOutput.m.Color&&this._output!==ShaderOutput.m.Alpha||this._updateOccludeeState(e),this.ensureTechnique(T,e)}}class d extends VisualVariablePassParameters.i{constructor(){super(...arguments),this.color=vec4f64.Z,this.forceTransparentMode=!1,this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=basicInterfaces.CM.None,this.hasOccludees=!1}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i0:()=>c,st:()=>I,wb:()=>v,yQ:()=>t});var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const I=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION),c=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.UV0),v=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.COLOR),t=((0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.OBJECTANDLAYERIDCOLOR),(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.UV0).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.OBJECTANDLAYERIDCOLOR));(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__.iC)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.COLOR).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__.K.OBJECTANDLAYERIDCOLOR)},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>$});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");function t(t){return function n(n){return n instanceof Float32Array&&n.length>=16}(t)||function r(n){return Array.isArray(n)&&n.length>=16}(t)}var aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),BufferView=__webpack_require__("./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js"),FastSymbolUpdates=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js"),debugFlags=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/debugFlags.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),HUD_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),GLTextureMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),screenSizePerspectiveUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}var bufferWriterUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js"),MaterialUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js"),HUDMaterial_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class g extends ShaderTechnique.O{initializeConfiguration(e,i){i.spherical=e.viewingMode===ViewingMode.UZ.Global}initializeProgram(r){return new Program.G(r.rctx,g.shader.get().build(this.configuration),DefaultVertexAttributeLocations.q)}initializePipeline(){const r=this.configuration.transparencyPassType,i=this.configuration,t=r===TransparencyPassType.H.NONE,o=r===TransparencyPassType.H.FrontFace,s=this.configuration.hasPolygonOffset?b:null,l=(t||o)&&i.output!==ShaderOutput.m.Highlight&&(i.depthEnabled||i.occlusionPass)?renderState.AT:null;return(0,renderState._w)({blending:i.output===ShaderOutput.m.Color||i.output===ShaderOutput.m.Alpha||i.output===ShaderOutput.m.Highlight?t?j:(0,OrderIndependentTransparency.y2)(r):null,depthTest:{func:enums.et.LEQUAL},depthWrite:l,colorWrite:renderState.kp,polygonOffset:s})}get primitiveType(){return this.configuration.occlusionPass?enums.Uf.POINTS:enums.Uf.TRIANGLES}}g.shader=new ReloadableShaderModule.O(HUDMaterial_glsl.H,(()=>__webpack_require__.e(72e3).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterial.glsl.js"))));const b={factor:0,units:-4},j=(0,renderState.KO)(enums.w$.ONE,enums.w$.ONE_MINUS_SRC_ALPHA);var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class HUDMaterialTechniqueConfiguration_r extends DefaultTechniqueConfiguration.Q{constructor(){super(...arguments),this.output=ShaderOutput.m.Color,this.transparencyPassType=TransparencyPassType.H.NONE,this.screenCenterOffsetUnitsEnabled=!1,this.spherical=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.debugDrawLabelBorder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:ShaderOutput.m.COUNT})],HUDMaterialTechniqueConfiguration_r.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:TransparencyPassType.H.COUNT})],HUDMaterialTechniqueConfiguration_r.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"signedDistanceFieldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"sampleSignedDistanceFieldTexelCenter",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"debugDrawLabelBorder",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasPolygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"depthEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"pixelSnappingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],HUDMaterialTechniqueConfiguration_r.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!0})],HUDMaterialTechniqueConfiguration_r.prototype,"hasSliceInVertexProgram",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],HUDMaterialTechniqueConfiguration_r.prototype,"hasVvInstancing",void 0);class $ extends Material.iK{constructor(e){super(e,new Te),this._configuration=new HUDMaterialTechniqueConfiguration_r}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.isDraped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===RenderSlot.y.OCCLUSION_PIXELS&&this.parameters.occlusionTest&&(e===ShaderOutput.m.Color||e===ShaderOutput.m.Alpha),e===ShaderOutput.m.Color&&(this._configuration.debugDrawLabelBorder=!!debugFlags.k.LABELS_SHOW_BORDER),this._configuration.depthEnabled=this.parameters.depthEnabled,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}intersect(e,s,i,a,n,o){if(!(i.options.selectionMode&&i.options.hud&&e.visible&&i.point))return;const g=this.parameters,S=i.point,O=i.camera;let{scaleX:A,scaleY:v}=this._getScreenScale(e);A*=O.pixelRatio,v*=O.pixelRatio,(0,mat3.f)(ue,s),e.attributes.has(VertexAttribute.K.FEATUREATTRIBUTE)&&function se(e){const t=e[0],s=e[1],r=e[2],i=e[3],a=e[4],n=e[5],o=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+s*s+r*r),u=1/Math.sqrt(i*i+a*a+n*n),p=1/Math.sqrt(o*o+c*c+l*l);return e[0]=t*f,e[1]=s*f,e[2]=r*f,e[3]=i*u,e[4]=a*u,e[5]=n*u,e[6]=o*p,e[7]=c*p,e[8]=l*p,e}(ue);const T=e.attributes.get(VertexAttribute.K.POSITION),_=e.attributes.get(VertexAttribute.K.SIZE),I=e.attributes.get(VertexAttribute.K.NORMAL),y=e.attributes.get(VertexAttribute.K.AUXPOS1);(0,Util.Uc)(T.size>=3);const P=(0,HUDMaterial_glsl.c)(g),E="screen"===this.parameters.centerOffsetUnits;for(let t=0;t<T.data.length/T.size;t++){const e=t*T.size;(0,vec3.s)(ne,T.data[e],T.data[e+1],T.data[e+2]),(0,vec3.e)(ne,ne,s);const a=t*_.size;Ae[0]=_.data[a]*A,Ae[1]=_.data[a+1]*v,(0,vec3.e)(ne,ne,O.viewMatrix);const n=t*y.size;if((0,vec3.s)(me,y.data[n],y.data[n+1],y.data[n+2]),!E&&(ne[0]+=me[0],ne[1]+=me[1],0!==me[2])){const e=me[2];(0,vec3.n)(me,ne),(0,vec3.f)(ne,ne,(0,vec3.i)(me,me,e))}const R=t*I.size;if((0,vec3.s)(oe,I.data[R],I.data[R+1],I.data[R+2]),this._normalAndViewAngle(oe,ue,O,Se),this._applyVerticalOffsetTransformationView(ne,Se,O,ie),O.applyProjection(ne,ce),ce[0]>-1){E&&(me[0]||me[1])&&(ce[0]+=me[0]*O.pixelRatio,0!==me[1]&&(ce[1]+=(0,screenSizePerspectiveUtils.ky)(me[1],ie.factorAlignment)*O.pixelRatio),O.unapplyProjection(ce,ne)),ce[0]+=this.parameters.screenOffset[0]*O.pixelRatio,ce[1]+=this.parameters.screenOffset[1]*O.pixelRatio,ce[0]=Math.floor(ce[0]),ce[1]=Math.floor(ce[1]),(0,screenSizePerspectiveUtils.Aj)(Ae,ie.factor,Ae);const e=Oe*O.pixelRatio;let t=0;if(g.textureIsSignedDistanceField&&(t=g.outlineSize*O.pixelRatio/2),re(S,ce[0],ce[1],Ae,e,t,g,P)){const e=i.ray;if((0,vec3.e)(fe,ne,(0,mat4.i)(he,O.viewMatrix)),ce[0]=S[0],ce[1]=S[1],O.unprojectFromRenderScreen(ce,ne)){const t=(0,vec3f64.c)();(0,vec3.c)(t,e.direction);const s=1/(0,vec3.l)(t);(0,vec3.i)(t,t,s),o((0,vec3.o)(e.origin,ne)*s,t,-1,!0,1,fe)}}}}}intersectDraped(e,t,s,r,i,a){const n=e.attributes.get(VertexAttribute.K.POSITION),o=e.attributes.get(VertexAttribute.K.SIZE),c=this.parameters,l=(0,HUDMaterial_glsl.c)(c);let{scaleX:f,scaleY:u}=this._getScreenScale(e);f*=e.screenToWorldRatio,u*=e.screenToWorldRatio;const p=be*e.screenToWorldRatio;for(let h=0;h<n.data.length/n.size;h++){const t=h*n.size,s=n.data[t],m=n.data[t+1],d=h*o.size;Ae[0]=o.data[d]*f,Ae[1]=o.data[d+1]*u;let g=0;c.textureIsSignedDistanceField&&(g=c.outlineSize*e.screenToWorldRatio/2),re(r,s,m,Ae,p,g,c,l)&&i(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new ye(this)}_normalAndViewAngle(e,s,r,i){return t(s)&&(s=(0,mat3.f)(pe,s)),(0,vec3.t)(i.normal,e,s),(0,vec3.e)(i.normal,i.normal,r.viewInverseTransposeMatrix),i.cosAngle=(0,vec3.j)(le,ve),i}_updateScaleInfo(e,t,s){const r=this.parameters;null!=r.screenSizePerspective?(0,screenSizePerspectiveUtils.gF)(s,t,r.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=r.screenSizePerspectiveAlignment?(0,screenSizePerspectiveUtils.gF)(s,t,r.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}applyShaderOffsetsView(e,t,s,r,i,a,n){const o=this._normalAndViewAngle(t,s,i,Se);return this._applyVerticalGroundOffsetView(e,o,i,n),this._applyVerticalOffsetTransformationView(n,o,i,a),this._applyPolygonOffsetView(n,o,r[3],i,n),this._applyCenterOffsetView(n,r,n),n}applyShaderOffsetsNDC(e,t,s,r,i){return this._applyCenterOffsetNDC(e,t,s,r),null!=i&&(0,vec3.c)(i,r),this._applyPolygonOffsetNDC(r,t,s,r),r}_applyPolygonOffsetView(t,s,r,i,a){const n=i.aboveGround?1:-1;let o=Math.sign(r);0===o&&(o=n);const c=n*o;if(this.parameters.shaderPolygonOffset<=0)return(0,vec3.c)(a,t);const l=(0,mathUtils.qk)(Math.abs(s.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/i.viewport[2];return(0,vec3.i)(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,s,r){const i=(0,vec3.l)(e),a=s.aboveGround?1:-1,n=s.computeRenderPixelSizeAtDist(i)*HUD_glsl._,o=(0,vec3.i)(ne,t.normal,a*n);return(0,vec3.g)(r,e,o),r}_applyVerticalOffsetTransformationView(e,t,s,r){const i=this.parameters;if(!i.verticalOffset?.screenLength){if(i.screenSizePerspective||i.screenSizePerspectiveAlignment){const s=(0,vec3.l)(e);this._updateScaleInfo(r,s,t.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return e}const a=(0,vec3.l)(e),n=i.screenSizePerspectiveAlignment??i.screenSizePerspective,o=(0,MaterialUtil.u6)(s,a,i.verticalOffset,t.cosAngle,n);return this._updateScaleInfo(r,a,t.cosAngle),(0,vec3.i)(t.normal,t.normal,o),(0,vec3.g)(e,e,t.normal)}_applyCenterOffsetView(e,t,s){const r="screen"!==this.parameters.centerOffsetUnits;return s!==e&&(0,vec3.c)(s,e),r&&(s[0]+=t[0],s[1]+=t[1],t[2]&&((0,vec3.n)(oe,s),(0,vec3.g)(s,s,(0,vec3.i)(oe,oe,t[2])))),s}_applyCenterOffsetNDC(e,t,s,r){const i="screen"!==this.parameters.centerOffsetUnits;return r!==e&&(0,vec3.c)(r,e),i||(r[0]+=t[0]/s.fullWidth*2,r[1]+=t[1]/s.fullHeight*2),r}_applyPolygonOffsetNDC(e,t,s,r){const i=this.parameters.shaderPolygonOffset;if(e!==r&&(0,vec3.c)(r,e),i){const e=s.aboveGround?1:-1,a=e*Math.sign(t[3]);r[2]-=(a||e)*i}return r}produces(e,t){if(t===ShaderOutput.m.Color||t===ShaderOutput.m.Alpha||t===ShaderOutput.m.Highlight||t===ShaderOutput.m.ObjectAndLayerIdColor){if(e===RenderSlot.y.DRAPED_MATERIAL)return!0;const{drawInSecondSlot:t,occlusionTest:s}=this.parameters;return e===(t?RenderSlot.y.LABEL_MATERIAL:RenderSlot.y.HUD_MATERIAL)||s&&e===RenderSlot.y.OCCLUSION_PIXELS}return!1}createGLMaterial(e){return new ee(e)}calculateRelativeScreenBounds(e,t,s=(0,aaBoundingRect.Su)()){return function te(e,t,s,r=ae){return(0,vec2.j)(r,e.anchorPosition),r[0]*=-t[0],r[1]*=-t[1],r[0]+=e.screenOffset[0]*s,r[1]+=e.screenOffset[1]*s,r}(this.parameters,e,t,s),s[2]=s[0]+e[0],s[3]=s[1]+e[1],s}_getScreenScale(e){const t=e.attributes.get(VertexAttribute.K.FEATUREATTRIBUTE);if(null==t)return{scaleX:1,scaleY:1};const s=(0,vec4f64.b)(t.data,ge),[r,i]=(0,FastSymbolUpdates.Ko)(de,this.parameters,s);return{scaleX:r,scaleY:i}}}class ee extends GLTextureMaterial.Q{constructor(e){super({...e,...e.material.parameters})}selectProgram(e){return this.ensureTechnique(g,e)}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.selectProgram(e)}}function re(e,t,s,r,i,a,n,o){let c=t-i-(o[0]>0?r[0]*o[0]:0),l=c+r[0]+2*i,f=s-i-(o[1]>0?r[1]*o[1]:0),u=f+r[1]+2*i;const p=n.distanceFieldBoundingBox;return n.textureIsSignedDistanceField&&null!=p&&(c+=r[0]*p[0],f+=r[1]*p[1],l-=r[0]*(1-p[2]),u-=r[1]*(1-p[3]),c-=a,l+=a,f-=a,u+=a),e[0]>c&&e[0]<l&&e[1]>f&&e[1]<u}const ie=new class ScaleInfo_t{constructor(){this.factor=new c,this.factorAlignment=new c}},ae=(0,vec2f64.a)(),ne=(0,vec3f64.c)(),oe=(0,vec3f64.c)(),ce=(0,vec4f64.c)(),le=(0,vec3f64.c)(),fe=(0,vec3f64.c)(),ue=(0,mat3f64.a)(),pe=(0,mat3f64.a)(),he=(0,mat4f64.a)(),me=(0,vec3f64.c)(),de=(0,vec4f64.c)(),ge=(0,vec4f64.c)(),Se={normal:le,cosAngle:0},Oe=1,be=2,Ae=[0,0],ve=(0,vec3f64.f)(0,0,1);class Te extends GLTextureMaterial.k{constructor(){super(...arguments),this.renderOccluded=Material.C2.Occlude,this.isDecoration=!1,this.color=(0,vec4f64.f)(1,1,1,1),this.texCoordScale=[1,1],this.polygonOffset=!1,this.anchorPosition=(0,vec2f64.f)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=(0,vec4f64.f)(1,1,1,1),this.outlineSize=0,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.centerOffsetUnits="world",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.isDraped=!1}}const _e=(0,InterleavedLayout.iC)().vec3f(VertexAttribute.K.POSITION).vec3f(VertexAttribute.K.NORMAL).vec2f(VertexAttribute.K.UV0).vec4u8(VertexAttribute.K.COLOR).vec2f(VertexAttribute.K.SIZE).vec4f(VertexAttribute.K.AUXPOS1).vec4f(VertexAttribute.K.FEATUREATTRIBUTE),Ie=_e.clone().vec4u8(VertexAttribute.K.OBJECTANDLAYERIDCOLOR);class ye{constructor(e){this._material=e,this.vertexBufferLayout=(0,has.c)("enable-feature:objectAndLayerId-rendering")?Ie:_e}elementCount(e){return 6*e.attributes.get(VertexAttribute.K.POSITION).indices.length}write(e,t,s,r,i){(0,bufferWriterUtils.uL)(s.attributes.get(VertexAttribute.K.POSITION),e,r.position,i,6),(0,bufferWriterUtils.s5)(s.attributes.get(VertexAttribute.K.NORMAL),t,r.normal,i,6);const a=s.attributes.get(VertexAttribute.K.UV0).data;let n,o,c,l;if(null==a||a.length<4){const e=this._material.parameters;n=0,o=0,c=e.texCoordScale[0],l=e.texCoordScale[1]}else n=a[0],o=a[1],c=a[2],l=a[3];c=Math.min(1.99999,c+1),l=Math.min(1.99999,l+1);let f=s.attributes.get(VertexAttribute.K.POSITION).indices.length,u=i;const p=r.uv0;for(let g=0;g<f;++g)p.set(u,0,n),p.set(u,1,o),u++,p.set(u,0,c),p.set(u,1,o),u++,p.set(u,0,c),p.set(u,1,l),u++,p.set(u,0,c),p.set(u,1,l),u++,p.set(u,0,n),p.set(u,1,l),u++,p.set(u,0,n),p.set(u,1,o),u++;(0,bufferWriterUtils.UB)(s.attributes.get(VertexAttribute.K.COLOR),4,r.color,i,6);const{data:h,indices:m}=s.attributes.get(VertexAttribute.K.SIZE);f=m.length;const d=r.size;u=i;for(let g=0;g<f;++g){const e=h[2*m[g]],t=h[2*m[g]+1];for(let s=0;s<6;++s)d.set(u,0,e),d.set(u,1,t),u++}if(s.attributes.get(VertexAttribute.K.AUXPOS1)?(0,bufferWriterUtils.OM)(s.attributes.get(VertexAttribute.K.AUXPOS1),r.auxpos1,i,6):(0,bufferWriterUtils.g5)(r.auxpos1,i,6*f),s.attributes.get(VertexAttribute.K.FEATUREATTRIBUTE)?(0,bufferWriterUtils.OM)(s.attributes.get(VertexAttribute.K.FEATUREATTRIBUTE),r.featureAttribute,i,6):(0,bufferWriterUtils.g5)(r.featureAttribute,i,6*f),null!=s.objectAndLayerIdColor){const e=s.attributes.get(VertexAttribute.K.POSITION)?.indices;if(e){const t=e.length,a=r.getField(VertexAttribute.K.OBJECTANDLAYERIDCOLOR,BufferView.sb);(0,bufferWriterUtils.sZ)(s.objectAndLayerIdColor,a,t,i,6)}}}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>x});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),lineSegment=__webpack_require__("./node_modules/@arcgis/core/geometry/support/lineSegment.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),VisualVariablePassParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js"),LineMarkerTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),RibbonLine_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");const I=new Map([[VertexAttribute.K.POSITION,0],[VertexAttribute.K.SUBDIVISIONFACTOR,1],[VertexAttribute.K.UV0,2],[VertexAttribute.K.AUXPOS1,3],[VertexAttribute.K.AUXPOS2,4],[VertexAttribute.K.COLOR,5],[VertexAttribute.K.COLORFEATUREATTRIBUTE,5],[VertexAttribute.K.SIZE,6],[VertexAttribute.K.SIZEFEATUREATTRIBUTE,6],[VertexAttribute.K.OPACITYFEATUREATTRIBUTE,7],[VertexAttribute.K.OBJECTANDLAYERIDCOLOR,8]]);class y extends ShaderTechnique.O{initializeProgram(e){return new Program.G(e.rctx,y.shader.get().build(this.configuration),I)}_makePipelineState(t,i){const c=this.configuration,h=t===TransparencyPassType.H.NONE,d=t===TransparencyPassType.H.FrontFace;return(0,renderState._w)({blending:c.output===ShaderOutput.m.Color||c.output===ShaderOutput.m.Alpha?h?OrderIndependentTransparency.yU:(0,OrderIndependentTransparency.y2)(t):null,depthTest:{func:(0,OrderIndependentTransparency.kd)(t)},depthWrite:h?c.writeDepth?renderState.AT:null:(0,OrderIndependentTransparency.A9)(t),colorWrite:renderState.kp,stencilWrite:c.hasOccludees?StencilUtils.wd:null,stencilTest:c.hasOccludees?i?StencilUtils._o:StencilUtils.Oy:null,polygonOffset:h||d?c.hasPolygonOffset?A:null:OrderIndependentTransparency.sz})}initializePipeline(){const e=this.configuration;if(e.occluder){const t=e.hasPolygonOffset?A:null;this._occluderPipelineTransparent=(0,renderState._w)({blending:OrderIndependentTransparency.yU,polygonOffset:t,depthTest:StencilUtils.cb,depthWrite:null,colorWrite:renderState.kp,stencilWrite:null,stencilTest:StencilUtils.wB}),this._occluderPipelineOpaque=(0,renderState._w)({blending:OrderIndependentTransparency.yU,polygonOffset:t,depthTest:StencilUtils.cb,depthWrite:null,colorWrite:renderState.kp,stencilWrite:StencilUtils.S3,stencilTest:StencilUtils.gn}),this._occluderPipelineMaskWrite=(0,renderState._w)({blending:null,polygonOffset:t,depthTest:StencilUtils._0,depthWrite:null,colorWrite:null,stencilWrite:StencilUtils.wd,stencilTest:StencilUtils._o})}return this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return this.configuration.wireframe?enums.Uf.LINES:enums.Uf.TRIANGLE_STRIP}getPipeline(e,t,i){return e?this._occludeePipelineState:this.configuration.occluder?i?this._occluderPipelineTransparent:t?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipeline()}}y.shader=new ReloadableShaderModule.O(RibbonLine_glsl.R,(()=>__webpack_require__.e(3e4).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLine.glsl.js"))));const A={factor:0,units:-4};var M,RibbonLineTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js");!function(e){e[e.LEFT_JOIN_START=-2]="LEFT_JOIN_START",e[e.LEFT_JOIN_END=-1]="LEFT_JOIN_END",e[e.LEFT_CAP_START=-4]="LEFT_CAP_START",e[e.LEFT_CAP_END=-5]="LEFT_CAP_END",e[e.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",e[e.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",e[e.RIGHT_CAP_START=4]="RIGHT_CAP_START",e[e.RIGHT_CAP_END=5]="RIGHT_CAP_END"}(M||(M={}));class x extends Material.iK{constructor(e){super(e,new z),this._configuration=new RibbonLineTechniqueConfiguration.y,this._vertexAttributeLocations=I}getConfiguration(e,t){this._configuration.output=e,this._configuration.draped=t.slot===RenderSlot.y.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==ShaderOutput.m.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&function V(e){return e.anchor===LineMarkerTechniqueConfiguration.WG.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.occluder=this.parameters.renderOccluded===Material.C2.OccludeAndTransparentStencil,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.wireframe=this.parameters.wireframe,this._configuration}intersectDraped(e,r,s,i,a,n){if(!s.options.selectionMode)return;const o=e.attributes.get(VertexAttribute.K.POSITION).data,l=e.attributes.get(VertexAttribute.K.SIZE);let u=this.parameters.width;if(this.parameters.vvSize){const r=e.attributes.get(VertexAttribute.K.SIZEFEATUREATTRIBUTE).data[0];u*=(0,mathUtils.qk)(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else l&&(u*=l.data[0]);const c=i[0],h=i[1],p=(u/2+4)*e.screenToWorldRatio;let f=Number.MAX_VALUE,m=0;for(let T=0;T<o.length-5;T+=3){const e=o[T],r=o[T+1],s=c-e,i=h-r,a=o[T+3]-e,n=o[T+4]-r,l=(0,mathUtils.qk)((a*s+n*i)/(a*a+n*n),0,1),u=a*l-s,p=n*l-i,d=u*u+p*p;d<f&&(f=d,m=T/3)}f<p*p&&a(n.dist,n.normal,m,!1)}intersect(r,p,f,m,d,R){if(!f.options.selectionMode||!r.visible)return;if(!(0,Util.wt)(p))return void Logger.c.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const O=r.attributes,b=O.get(VertexAttribute.K.POSITION).data;let v=this.parameters.width;if(this.parameters.vvSize){const e=O.get(VertexAttribute.K.SIZEFEATUREATTRIBUTE).data[0];v*=(0,mathUtils.qk)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else O.has(VertexAttribute.K.SIZE)&&(v*=O.get(VertexAttribute.K.SIZE).data[0]);const L=f.camera,P=Q;(0,vec2.j)(P,f.point);const N=v*L.pixelRatio/2+4*L.pixelRatio;(0,vec3.s)(oe[0],P[0]-N,P[1]+N,0),(0,vec3.s)(oe[1],P[0]+N,P[1]+N,0),(0,vec3.s)(oe[2],P[0]+N,P[1]-N,0),(0,vec3.s)(oe[3],P[0]-N,P[1]-N,0);for(let e=0;e<4;e++)if(!L.unprojectFromRenderScreen(oe[e],le[e]))return;(0,plane.i_)(L.eye,le[0],le[1],ue),(0,plane.i_)(L.eye,le[1],le[2],ce),(0,plane.i_)(L.eye,le[2],le[3],he),(0,plane.i_)(L.eye,le[3],le[0],pe);let j=Number.MAX_VALUE,U=0;const D=Z(this.parameters,O)?b.length-2:b.length-5;for(let e=0;e<D;e+=3){W[0]=b[e]+p[12],W[1]=b[e+1]+p[13],W[2]=b[e+2]+p[14];const t=(e+3)%b.length;if(Y[0]=b[t]+p[12],Y[1]=b[t+1]+p[13],Y[2]=b[t+2]+p[14],(0,plane.KG)(ue,W)<0&&(0,plane.KG)(ue,Y)<0||(0,plane.KG)(ce,W)<0&&(0,plane.KG)(ce,Y)<0||(0,plane.KG)(he,W)<0&&(0,plane.KG)(he,Y)<0||(0,plane.KG)(pe,W)<0&&(0,plane.KG)(pe,Y)<0)continue;if(L.projectToRenderScreen(W,K),L.projectToRenderScreen(Y,$),K[2]<0&&$[2]>0){(0,vec3.f)(X,W,Y);const e=L.frustum,t=-(0,plane.KG)(e[frustum.KI.NEAR],W)/(0,vec3.j)(X,(0,plane.i4)(e[frustum.KI.NEAR]));(0,vec3.i)(X,X,t),(0,vec3.g)(W,W,X),L.projectToRenderScreen(W,K)}else if(K[2]>0&&$[2]<0){(0,vec3.f)(X,Y,W);const e=L.frustum,t=-(0,plane.KG)(e[frustum.KI.NEAR],Y)/(0,vec3.j)(X,(0,plane.i4)(e[frustum.KI.NEAR]));(0,vec3.i)(X,X,t),(0,vec3.g)(Y,Y,X),L.projectToRenderScreen(Y,$)}else if(K[2]<0&&$[2]<0)continue;K[2]=0,$[2]=0;const r=(0,lineSegment.Ed)((0,lineSegment.i_)(K,$,re),P);r<j&&(j=r,(0,vec3.c)(ee,W),(0,vec3.c)(te,Y),U=e/3)}const F=f.rayBegin,w=f.rayEnd;if(j<N*N){let e=Number.MAX_VALUE;if((0,lineSegment._W)((0,lineSegment.i_)(ee,te,re),(0,lineSegment.i_)(F,w,se),q)){(0,vec3.f)(q,q,F);const t=(0,vec3.l)(q);(0,vec3.i)(q,q,1/t),e=t/(0,vec3.o)(F,w)}R(e,q,U,!1)}}get _layout(){const e=(0,InterleavedLayout.iC)().vec3f(VertexAttribute.K.POSITION).f32(VertexAttribute.K.SUBDIVISIONFACTOR).vec2f(VertexAttribute.K.UV0).vec3f(VertexAttribute.K.AUXPOS1).vec3f(VertexAttribute.K.AUXPOS2);return this.parameters.vvSize?e.f32(VertexAttribute.K.SIZEFEATUREATTRIBUTE):e.f32(VertexAttribute.K.SIZE),this.parameters.vvColor?e.f32(VertexAttribute.K.COLORFEATUREATTRIBUTE):e.vec4f(VertexAttribute.K.COLOR),this.parameters.vvOpacity&&e.f32(VertexAttribute.K.OPACITYFEATUREATTRIBUTE),(0,has.c)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute.K.OBJECTANDLAYERIDCOLOR),e}createBufferWriter(){return new H(this._layout,this.parameters)}produces(e,t){return(t===ShaderOutput.m.Color||t===ShaderOutput.m.Alpha||t===ShaderOutput.m.Highlight||t===ShaderOutput.m.Depth||t===ShaderOutput.m.ObjectAndLayerIdColor)&&(e===RenderSlot.y.DRAPED_MATERIAL||(this.parameters.renderOccluded===Material.C2.OccludeAndTransparentStencil?e===RenderSlot.y.OPAQUE_MATERIAL||e===RenderSlot.y.OCCLUDER_MATERIAL||e===RenderSlot.y.TRANSPARENT_OCCLUDER_MATERIAL:t===ShaderOutput.m.Color||t===ShaderOutput.m.Alpha?e===(this.parameters.writeDepth?RenderSlot.y.TRANSPARENT_MATERIAL:RenderSlot.y.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):e===RenderSlot.y.OPAQUE_MATERIAL))}createGLMaterial(e){return new G(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class G extends GLMaterial.c{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextureRepository.release(this._stipplePattern),this._stipplePattern=null}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){this._output!==ShaderOutput.m.Color&&this._output!==ShaderOutput.m.Alpha||this._updateOccludeeState(e);const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextureRepository.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.ensureTechnique(y,e)}}class z extends VisualVariablePassParameters.i{constructor(){super(...arguments),this.width=0,this.color=vec4f64.O,this.join="miter",this.cap=RibbonLineTechniqueConfiguration.w.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.hasOccludees=!1,this.wireframe=!1}}class H{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t,this.numJoinSubdivisions=0;const r=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=r;break;case"round":this.numJoinSubdivisions=RibbonLine_glsl.r+r}}_isClosed(e){return Z(this._parameters,e.attributes)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const r=e.attributes.get(VertexAttribute.K.POSITION).indices.length/2+1,s=this._isClosed(e);let i=s?2:4;return i+=((s?r:r-1)-(s?0:1))*(2*this.numJoinSubdivisions+4),i+=2,this._parameters.wireframe&&(i=2+4*(i-2)),i}write(e,t,r,s,a){const n=ie,o=ae,l=ne,c=r.attributes.get(VertexAttribute.K.POSITION),f=c.indices,m=c.data.length/3,T=r.attributes.get(VertexAttribute.K.DISTANCETOSTART)?.data;f&&f.length!==2*(m-1)&&console.warn("RibbonLineMaterial does not support indices");let d=1,_=0;const E=this.vertexBufferLayout.fields.has(VertexAttribute.K.SIZEFEATUREATTRIBUTE);E?_=r.attributes.get(VertexAttribute.K.SIZEFEATUREATTRIBUTE).data[0]:r.attributes.has(VertexAttribute.K.SIZE)&&(d=r.attributes.get(VertexAttribute.K.SIZE).data[0]);let A=[1,1,1,1],R=0;const I=this.vertexBufferLayout.fields.has(VertexAttribute.K.COLORFEATUREATTRIBUTE);I?R=r.attributes.get(VertexAttribute.K.COLORFEATUREATTRIBUTE).data[0]:r.attributes.has(VertexAttribute.K.COLOR)&&(A=r.attributes.get(VertexAttribute.K.COLOR).data);const S=(0,has.c)("enable-feature:objectAndLayerId-rendering")?r.objectAndLayerIdColor:null;let g=0;const O=this.vertexBufferLayout.fields.has(VertexAttribute.K.OPACITYFEATUREATTRIBUTE);O&&(g=r.attributes.get(VertexAttribute.K.OPACITYFEATUREATTRIBUTE).data[0]);const b=new Float32Array(s.buffer),v=(0,has.c)("enable-feature:objectAndLayerId-rendering")?new Uint8Array(s.buffer):null,L=this.vertexBufferLayout.stride/4;let P=a*L;const N=P;let C=0;const j=T?(e,t,r)=>C=T[r]:(e,t,r)=>C+=(0,vec3.o)(e,t),U=(0,has.c)("enable-feature:objectAndLayerId-rendering"),D=(e,t,r,s,i,a,n)=>{if(b[P++]=t[0],b[P++]=t[1],b[P++]=t[2],b[P++]=s,b[P++]=n,b[P++]=i,b[P++]=e[0],b[P++]=e[1],b[P++]=e[2],b[P++]=r[0],b[P++]=r[1],b[P++]=r[2],b[P++]=E?_:d,I)b[P++]=R;else{const e=Math.min(4*a,A.length-4);b[P++]=A[e],b[P++]=A[e+1],b[P++]=A[e+2],b[P++]=A[e+3]}O&&(b[P++]=g),U&&(null!=S&&(v[4*P]=S[0],v[4*P+1]=S[1],v[4*P+2]=S[2],v[4*P+3]=S[3]),P++)};P+=L,(0,vec3.s)(o,c.data[0],c.data[1],c.data[2]),e&&(0,vec3.e)(o,o,e);const F=this._isClosed(r);if(F){const t=c.data.length-3;(0,vec3.s)(n,c.data[t],c.data[t+1],c.data[t+2]),e&&(0,vec3.e)(n,n,e)}else(0,vec3.s)(l,c.data[3],c.data[4],c.data[5]),e&&(0,vec3.e)(l,l,e),D(o,o,l,1,M.LEFT_CAP_START,0,0),D(o,o,l,1,M.RIGHT_CAP_START,0,0),(0,vec3.c)(n,o),(0,vec3.c)(o,l);const w=F?0:1,B=F?m:m-1;for(let h=w;h<B;h++){const t=(h+1)%m*3;(0,vec3.s)(l,c.data[t],c.data[t+1],c.data[t+2]),e&&(0,vec3.e)(l,l,e),j(n,o,h),D(n,o,l,0,M.LEFT_JOIN_END,h,C),D(n,o,l,0,M.RIGHT_JOIN_END,h,C);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);D(n,o,l,t,M.LEFT_JOIN_END,h,C),D(n,o,l,t,M.RIGHT_JOIN_END,h,C)}D(n,o,l,1,M.LEFT_JOIN_START,h,C),D(n,o,l,1,M.RIGHT_JOIN_START,h,C),(0,vec3.c)(n,o),(0,vec3.c)(o,l)}F?((0,vec3.s)(l,c.data[3],c.data[4],c.data[5]),e&&(0,vec3.e)(l,l,e),C=j(n,o,B),D(n,o,l,0,M.LEFT_JOIN_END,w,C),D(n,o,l,0,M.RIGHT_JOIN_END,w,C)):(C=j(n,o,B),D(n,o,o,0,M.LEFT_CAP_END,B,C),D(n,o,o,0,M.RIGHT_CAP_END,B,C)),k(b,N+L,b,N,L),P=k(b,P-L,b,P,L),this._parameters.wireframe&&this._addWireframeVertices(s,N,P,L)}_addWireframeVertices(e,t,r,s){const i=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=k(a,e,i,n,s);for(let l=0;l<a.length-1;l+=2*s)o(l),o(l+2*s),o(l+1*s),o(l+2*s),o(l+1*s),o(l+3*s)}}function k(e,t,r,s,i){for(let a=0;a<i;a++)r[s++]=e[t++];return s}function Z(e,t){return!!e.isClosed&&t.get(VertexAttribute.K.POSITION).indices.length>2}const W=(0,vec3f64.c)(),Y=(0,vec3f64.c)(),X=(0,vec3f64.c)(),q=(0,vec3f64.c)(),Q=(0,vec3f64.c)(),K=(0,screenUtils.UZ)(),$=(0,screenUtils.UZ)(),ee=(0,vec3f64.c)(),te=(0,vec3f64.c)(),re=(0,lineSegment.Su)(),se=(0,lineSegment.Su)(),ie=(0,vec3f64.c)(),ae=(0,vec3f64.c)(),ne=(0,vec3f64.c)(),oe=[(0,screenUtils.UZ)(),(0,screenUtils.UZ)(),(0,screenUtils.UZ)(),(0,screenUtils.UZ)()],le=[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()],ue=(0,plane.Su)(),ce=(0,plane.Su)(),he=(0,plane.Su)(),pe=(0,plane.Su)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>e});var _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js");class e extends _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__.iK{intersect(r,e,i,a,l,o){return(0,_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__.Ep)(r,i,a,l,void 0,o)}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>d,u:()=>_});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),time=__webpack_require__("./node_modules/@arcgis/core/core/time.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),AnimationTimer=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/AnimationTimer.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),DefaultBufferWriter=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js"),DefaultLayouts=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js"),TriangleMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),PhysicallyBasedRenderingParameters_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"),ReloadableShaderModule=(__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js")),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultVertexAttributeLocations=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js"),Program=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js"),TransparencyPassType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js"),WaterSurface_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class S extends ShaderTechnique.O{initializeConfiguration(e,o){o.spherical=e.viewingMode===ViewingMode.UZ.Global,o.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(e){return new Program.G(e.rctx,S.shader.get().build(this.configuration),DefaultVertexAttributeLocations.q)}_setPipelineState(e){const t=this.configuration,r=e===TransparencyPassType.H.NONE,i=e===TransparencyPassType.H.FrontFace;return(0,renderState._w)({blending:t.output!==ShaderOutput.m.Normal&&t.output!==ShaderOutput.m.Highlight&&t.output!==ShaderOutput.m.ObjectAndLayerIdColor&&t.transparent?r?OrderIndependentTransparency.yU:(0,OrderIndependentTransparency.y2)(e):null,depthTest:{func:(0,OrderIndependentTransparency.kd)(e)},depthWrite:r?t.writeDepth?renderState.AT:null:(0,OrderIndependentTransparency.A9)(e),colorWrite:renderState.kp,polygonOffset:r||i?null:(0,OrderIndependentTransparency.S0)(t.enableOffset)})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}S.shader=new ReloadableShaderModule.O(WaterSurface_glsl.W,(()=>__webpack_require__.e(32240).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/WaterSurface.glsl.js"))));class T extends DefaultTechniqueConfiguration.Q{constructor(){super(...arguments),this.output=ShaderOutput.m.Color,this.transparencyPassType=TransparencyPassType.H.NONE,this.spherical=!1,this.receiveShadows=!1,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.hasScreenSpaceReflections=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasCloudsReflections=!1,this.objectAndLayerIdColorInstanced=!1,this.isDraped=!1,this.multipassEnabled=!1,this.cullAboveGround=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:ShaderOutput.m.COUNT})],T.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({count:TransparencyPassType.H.COUNT})],T.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"receiveShadows",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"hasScreenSpaceReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"hasCloudsReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)()],T.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],T.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:PhysicallyBasedRenderingParameters_glsl.Ax.Water})],T.prototype,"pbrMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!0})],T.prototype,"useCustomDTRExponentForWater",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!0})],T.prototype,"highStepCount",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.y)({constValue:!1})],T.prototype,"useFillLights",void 0);class s extends GLMaterial.c{_updateShadowState(e){e.shadowMap.enabled!==this._material.parameters.receiveShadows&&this._material.setParameters({receiveShadows:e.shadowMap.enabled})}_updateSSRState(e){const t=null!=e.ssr.lastFrameColor;t!==this._material.parameters.hasScreenSpaceReflections&&this._material.setParameters({hasScreenSpaceReflections:t})}_updateCloudsReflectionState(e){const t=null!=e.cloudsFade.data;t!==this._material.parameters.hasCloudsReflections&&this._material.setParameters({hasCloudsReflections:t})}ensureResources(e){return this._techniqueRepository.constructionContext.waterTextureRepository.ensureResources(e)}beginSlot(t){return this._output===ShaderOutput.m.Color&&(this._updateShadowState(t),this._updateSSRState(t),this._updateCloudsReflectionState(t)),this._material.setParameters(this._techniqueRepository.constructionContext.waterTextureRepository.passParameters),this.ensureTechnique(S,t)}}class d extends TriangleMaterial.O{constructor(e){super(e,new _),this._configuration=new T,this._animation=new AnimationTimer.K}getConfiguration(e,t){return this._configuration.output=e,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.receiveShadows=this.parameters.receiveShadows,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasScreenSpaceReflections=this.parameters.hasScreenSpaceReflections,this._configuration.hasCloudsReflections=this.parameters.hasCloudsReflections,this._configuration.isDraped=this.parameters.isDraped,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency.ye,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}update(t){const r=Math.min(t.camera.relativeElevation,t.camera.distance);this._animation.enabled=Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*r<A;const a=this._animation.advance(t);return this.setParameters({timeElapsed:(0,time.OS)(this._animation.time)*this.parameters.animationSpeed},!1),this._animation.enabled&&a}produces(e,t){switch(t){case ShaderOutput.m.Normal:return e===RenderSlot.y.DRAPED_WATER;case ShaderOutput.m.Color:if(this.parameters.isDraped)return e===RenderSlot.y.DRAPED_MATERIAL;break;case ShaderOutput.m.Alpha:break;case ShaderOutput.m.Highlight:case ShaderOutput.m.ObjectAndLayerIdColor:return e===RenderSlot.y.OPAQUE_MATERIAL||e===RenderSlot.y.DRAPED_MATERIAL;default:return!1}let r=RenderSlot.y.OPAQUE_MATERIAL;return this.parameters.transparent&&(r=this.parameters.writeDepth?RenderSlot.y.TRANSPARENT_MATERIAL:RenderSlot.y.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===r}createGLMaterial(e){return new s(e)}createBufferWriter(){return new DefaultBufferWriter.S((0,has.c)("enable-feature:objectAndLayerId-rendering")?DefaultLayouts.yQ:DefaultLayouts.i0)}get test(){return{animationEnabled:this._animation.enabled}}}class _ extends Material.oL{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=(0,vec2f64.f)(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=(0,vec4f64.f)(0,0,0,0),this.transparent=!0,this.writeDepth=!0,this.hasSlicePlane=!1,this.isDraped=!1,this.receiveShadows=!0,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1,this.origin=(0,vec3f64.c)(),this.modelTransformation=null}}const A=35e3},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{em:()=>n,ui:()=>h});const t={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},o={dash:t.dash,"dash-dot":[...t.dash,...t.dot],dot:t.dot,"long-dash":t["long-dash"],"long-dash-dot":[...t["long-dash"],...t.dot],"long-dash-dot-dot":[...t["long-dash"],...t.dot,...t.dot],none:null,"short-dash":t["short-dash"],"short-dash-dot":[...t["short-dash"],...t["short-dot"]],"short-dash-dot-dot":[...t["short-dash"],...t["short-dot"],...t["short-dot"]],"short-dot":t["short-dot"],solid:null},d=8;function h(t){return{pattern:[t,t],pixelRatio:2}}function n(t){return null!=t&&"style"===t.type?function l(t){return null!=t?function s(t,o){return null==t?t:{pattern:t.slice(),pixelRatio:o}}(o[t],d):null}(t.style):null}},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WG:()=>s,Yk:()=>a,eY:()=>p});var p,s,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(o){o[o.Draped=0]="Draped",o[o.Screen=1]="Screen",o[o.World=2]="World",o[o.COUNT=3]="COUNT"}(p||(p={})),function(o){o[o.Center=0]="Center",o[o.Tip=1]="Tip",o[o.COUNT=2]="COUNT"}(s||(s={}));class a extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.Q{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__.H.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.writeDepth=!1,this.space=p.Screen,this.hideOnShortSegments=!1,this.hasCap=!1,this.anchor=s.Center,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1}get draped(){return this.space===p.Draped}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.COUNT})],a.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__.H.COUNT})],a.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:p.COUNT})],a.prototype,"space",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"hideOnShortSegments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"hasCap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:s.COUNT})],a.prototype,"anchor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"hasTip",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"multipassEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],a.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!1})],a.prototype,"occlusionPass",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!0})],a.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!0})],a.prototype,"hasSliceTranslatedView",void 0)},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>r,y:()=>s});var r,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(o){o[o.BUTT=0]="BUTT",o[o.SQUARE=1]="SQUARE",o[o.ROUND=2]="ROUND",o[o.COUNT=3]="COUNT"}(r||(r={}));class s extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.Q{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.Color,this.capType=r.BUTT,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__.H.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.wireframe=!1,this.objectAndLayerIdColorInstanced=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.m.COUNT})],s.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:r.COUNT})],s.prototype,"capType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__.H.COUNT})],s.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"hasPolygonOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"draped",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"stippleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"stippleOffColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"stipplePreferContinuous",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"roundJoins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"applyMarkerOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"falloffEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"innerColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"multipassEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"wireframe",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)()],s.prototype,"objectAndLayerIdColorInstanced",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!1})],s.prototype,"occlusionPass",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!0})],s.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__.y)({constValue:!0})],s.prototype,"hasSliceTranslatedView",void 0)}}]);
//# sourceMappingURL=82920.d958ce0d.iframe.bundle.js.map