"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[791,3620],{"./node_modules/@arcgis/core/geometry/support/normalizeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aX:()=>b,or:()=>v});var config=__webpack_require__("./node_modules/@arcgis/core/config.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),normalizeUtilsCommon=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),webMercatorUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js"),request=(__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/request.js")),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),utils=__webpack_require__("./node_modules/@arcgis/core/rest/utils.js");var urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),geometryService_utils=__webpack_require__("./node_modules/@arcgis/core/rest/geometryService/utils.js");const m=Logger.Z.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function x(e){return"polyline"===e[0].type}function j(e,t,n){if(t){const t=function w(e,n){if(!(e instanceof Polyline.Z||e instanceof Polygon.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(e),new Error.Z(e)}const i=(0,normalizeUtilsCommon.x3)(e),l=[];for(const t of i){const e=[];l.push(e),e.push([t[0][0],t[0][1]]);for(let o=0;o<t.length-1;o++){const s=t[o][0],r=t[o][1],i=t[o+1][0],l=t[o+1][1],f=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),c=(l-r)/f,p=(i-s)/f,u=f/n;if(u>1){for(let l=1;l<=u-1;l++){const t=l*n,o=p*t+s,i=c*t+r;e.push([o,i])}const t=(f+Math.floor(u-1)*n)/2,o=p*t+s,i=c*t+r;e.push([o,i])}e.push([i,l])}}return function g(e){return"polygon"===e.type}(e)?new Polygon.Z({rings:l,spatialReference:e.spatialReference}):new Polyline.Z({paths:l,spatialReference:e.spatialReference})}(e,1e6);e=(0,webMercatorUtils.Sx)(t,!0)}return n&&(e=(0,normalizeUtilsCommon.Sy)(e,n)),e}function M(e,t,n){if(Array.isArray(e)){const o=e[0];if(o>t){const n=(0,normalizeUtilsCommon.XZ)(o,t);e[0]=o+n*(-2*t)}else if(o<n){const t=(0,normalizeUtilsCommon.XZ)(o,n);e[0]=o+t*(-2*n)}}else{const o=e.x;if(o>t){const n=(0,normalizeUtilsCommon.XZ)(o,t);e=e.clone().offset(n*(-2*t),0)}else if(o<n){const t=(0,normalizeUtilsCommon.XZ)(o,n);e=e.clone().offset(t*(-2*n),0)}}return e}function R(e,t){let n=-1;for(let o=0;o<t.cutIndexes.length;o++){const s=t.cutIndexes[o],i=t.geometries[o],f=(0,normalizeUtilsCommon.x3)(i);for(let e=0;e<f.length;e++){const t=f[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const o=t[e][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*(0,normalizeUtilsCommon.XZ)(n,180);for(let s=0;s<t.length;s++){const t=i.getPoint(e,s);i.setPoint(e,s,t.clone().offset(o,0))}return!0}}))}if(s===n){if(y(e))for(const t of(0,normalizeUtilsCommon.x3)(i))e[s]=e[s].addRing(t);else if(x(e))for(const t of(0,normalizeUtilsCommon.x3)(i))e[s]=e[s].addPath(t)}else n=s,e[s]=i}return e}async function b(t,n,r){if(!Array.isArray(t))return b([t],n);n&&"string"!=typeof n&&m.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const u="string"==typeof n?n:n?.url??config.default.geometryServiceUrl;let g,y,x,d,w,P,v,L,U=0;const z=[],A=[];for(const e of t)if(null!=e)if(g||(g=e.spatialReference,y=(0,spatialReferenceUtils.C5)(g),x=g.isWebMercator,P=x?102100:4326,d=normalizeUtilsCommon.UZ[P].maxX,w=normalizeUtilsCommon.UZ[P].minX,v=normalizeUtilsCommon.UZ[P].plus180Line,L=normalizeUtilsCommon.UZ[P].minus180Line),y)if("mesh"===e.type)A.push(e);else if("point"===e.type)A.push(M(e.clone(),d,w));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map((e=>M(e,d,w))),A.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,y);A.push(t.rings?new Polygon.Z(t):t)}else if(e.extent){const t=e.extent,n=(0,normalizeUtilsCommon.XZ)(t.xmin,w)*(2*d);let o=0===n?e.clone():(0,normalizeUtilsCommon.Sy)(e.clone(),n);t.offset(n,0),t.intersects(v)&&t.xmax!==d?(U=t.xmax>U?t.xmax:U,o=j(o,x),z.push(o),A.push("cut")):t.intersects(L)&&t.xmin!==w?(U=t.xmax*(2*d)>U?t.xmax*(2*d):U,o=j(o,x,360),z.push(o),A.push("cut")):A.push(o)}else A.push(e.clone());else A.push(e);else A.push(e);let S=(0,normalizeUtilsCommon.XZ)(U,d),k=-90;const C=S,I=new Polyline.Z;for(;S>0;){const e=360*S-180;I.addPath([[e,k],[e,-1*k]]),k*=-1,S--}if(z.length>0&&C>0){const e=R(z,await async function cut_o(o,i,n,m){const a=(0,utils.en)(o),p=i[0].spatialReference,u={...m,query:{...a.query,f:"json",sr:JSON.stringify(p),target:JSON.stringify({geometryType:(0,jsonUtils.Ji)(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await(0,request.default)(a.path+"/cut",u),{cutIndexes:f,geometries:g=[]}=c.data;return{cutIndexes:f,geometries:g.map((e=>{const t=(0,jsonUtils.im)(e);return t.spatialReference=p,t}))}}(u,z,I,r)),n=[],o=[];for(let r=0;r<A.length;r++){const s=A[r];if("cut"!==s)o.push(s);else{const s=e.shift(),i=t[r];null!=i&&"polygon"===i.type&&i.rings&&i.rings.length>1&&s.rings.length>=i.rings.length?(n.push(s),o.push("simplify")):o.push(x?(0,webMercatorUtils.$)(s):s)}}if(!n.length)return o;const s=await async function simplify_o(o,m,f){const n="string"==typeof o?(0,urlUtils.mN)(o):o,p=m[0].spatialReference,a=(0,jsonUtils.Ji)(m[0]),u={...f,query:{...n.query,f:"json",sr:p.wkid??JSON.stringify(p),geometries:JSON.stringify((0,geometryService_utils.F)(m))}},{data:y}=await(0,request.default)(n.path+"/simplify",u);return(0,geometryService_utils.o)(y.geometries,a,p)}(u,n,r),i=[];for(let t=0;t<o.length;t++){const e=o[t];"simplify"!==e?i.push(e):i.push(x?(0,webMercatorUtils.$)(s.shift()):s.shift())}return i}const X=[];for(let e=0;e<A.length;e++){const t=A[e];if("cut"!==t)X.push(t);else{const e=z.shift();X.push(!0===x?(0,webMercatorUtils.$)(e):e)}}return X}function v(e,t){const n=(0,spatialReferenceUtils.C5)(t);if(n){const[t,o]=n.valid,s=o-t;if(e<t)for(;e<t;)e+=s;if(e>o)for(;e>o;)e-=s}return e}},"./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Sy:()=>s,UZ:()=>r,XZ:()=>i,x3:()=>o});var _Polyline_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js");const r={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.Z.WebMercator}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.Z({paths:[[[180,-180],[180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.Z.WGS84}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.Z.WGS84})}};function i(e,n){return Math.ceil((e-n)/(2*n))}function s(e,n){const t=o(e);for(const r of t)for(const e of r)e[0]+=n;return e}function o(e){return(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.oU)(e)?e.rings:e.paths}},"./node_modules/@arcgis/core/layers/graphics/editingSupport.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ey:()=>b,applyEdits:()=>F,aw:()=>f,uploadAssets:()=>k});var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js"),_mixins_EditBusLayer_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/EditBusLayer.js"),_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/layers/support/infoFor3D.js"),_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js");function m(e){return e&&null!=e.applyEdits}function y(e){return"object"==typeof e&&null!=e&&"objectId"in e&&!!e.objectId}function f(e){return e.every(y)}function g(e){return"object"==typeof e&&null!=e&&"globalId"in e&&!!e.globalId}function b(e){return e.every(g)}async function F(e,t,a,s={}){let i;if((0,_mixins_EditBusLayer_js__WEBPACK_IMPORTED_MODULE_8__.lQ)(e)&&e.url)i=(0,_mixins_EditBusLayer_js__WEBPACK_IMPORTED_MODULE_8__.jF)(e.url,e.layerId,"original-and-current-features"===s.returnServiceEditsOption);else{i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.hh)(),i.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit("edits",t)}));const t={result:i.promise};e.emit("apply-edits",t)}try{const{results:o,edits:n}=await async function w(e,t,r,s){if(await e.load(),!m(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.ln)(e))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:e});const{edits:o,options:i}=await async function A(e,r,o){const i=r&&(r.addFeatures||r.updateFeatures||r.deleteFeatures),n=r&&(r.addAttachments||r.updateAttachments||r.deleteAttachments),d=null!=e.infoFor3D;if(!r||!i&&!n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");const l=(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.S1)(e);if(!l.data.isVersioned&&o?.gdbVersion)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!l.editing.supportsRollbackOnFailure&&o?.rollbackOnFailureEnabled)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!l.editing.supportsGlobalId&&o?.globalIdUsed)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!l.editing.supportsGlobalId&&n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!o?.globalIdUsed&&n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");const u={...o};if(null!=u.rollbackOnFailureEnabled||l.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),u.rollbackOnFailureEnabled||"original-and-current-features"!==u.returnServiceEditsOption||(!1===u.rollbackOnFailureEnabled&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__.Z.getLogger("esri.layers.graphics.editingSupport").warn(`${e.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwrritten and set to true."),u.rollbackOnFailureEnabled=!0),!l.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(u.returnServiceEditsInSourceSR&&"original-and-current-features"!==u.returnServiceEditsOption)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const p={...r};if(p.addFeatures=r&&_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.Z.isCollection(r.addFeatures)?r.addFeatures.toArray():p.addFeatures||[],p.updateFeatures=r&&_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.Z.isCollection(r.updateFeatures)?r.updateFeatures.toArray():p.updateFeatures||[],p.deleteFeatures=r&&_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.Z.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():p.deleteFeatures||[],p.addFeatures.length&&!l.operations.supportsAdd)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:unsupported-operation`,"Layer does not support adding features.");if(p.updateFeatures.length&&!l.operations.supportsUpdate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:unsupported-operation`,"Layer does not support updating features.");if(p.deleteFeatures.length&&!l.operations.supportsDelete)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:unsupported-operation`,"Layer does not support deleting features.");p.addAttachments=p.addAttachments||[],p.updateAttachments=p.updateAttachments||[],p.deleteAttachments=p.deleteAttachments||[],p.addFeatures=p.addFeatures.map(j),p.updateFeatures=p.updateFeatures.map(j),p.addAssetFeatures=[];const c=o?.globalIdUsed||d;return p.addFeatures.forEach((t=>function E(e,t,a){v(e,t,a),I(e,t)}(t,e,c))),p.updateFeatures.forEach((t=>function $(e,t,r){v(e,t,r),I(e,t);const s=(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.S1)(t);if("geometry"in e&&null!=e.geometry&&!s?.editing.supportsGeometryUpdate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}(t,e,c))),p.deleteFeatures.forEach((t=>function S(e,t,a){v(e,t,a)}(t,e,c))),p.addAttachments.forEach((t=>R(t,e))),p.updateAttachments.forEach((t=>R(t,e))),d&&await async function U(e,t){if(null==t.infoFor3D)return;const{infoFor3D:r}=t,s=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_10__.S0)("model/gltf-binary",r.supportedFormats)??(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_10__.Ow)("glb",r.supportedFormats);if(!s||!r.editFormats.includes(s))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");e.addAssetFeatures??=[];const{addAssetFeatures:o}=e;for(const a of e.addFeatures??[])L(a)&&o.push(a);for(const a of e.updateFeatures??[])L(a)&&o.push(a)}(p,e),{edits:await O(p),options:u}}(e,r,s);return o.addFeatures?.length||o.updateFeatures?.length||o.deleteFeatures?.length||o.addAttachments?.length||o.updateAttachments?.length||o.deleteAttachments?.length?{edits:o,results:await t.applyEdits(o,i)}:{edits:o,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}(e,t,a,s),d=e=>e.filter((e=>!e.error)).map(_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.d9),l={edits:n,addedFeatures:d(o.addFeatureResults),updatedFeatures:d(o.updateFeatureResults),deletedFeatures:d(o.deleteFeatureResults),addedAttachments:d(o.addAttachmentResults),updatedAttachments:d(o.updateAttachmentResults),deletedAttachments:d(o.deleteAttachmentResults),exceededTransferLimit:!1};return o.editedFeatureResults?.length&&(l.editedFeatures=o.editedFeatureResults),i.resolve(l),o}catch(n){throw i.reject(n),n}}function v(e,t,r){if(r){if("attributes"in e&&!e.attributes[t.globalIdField])throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e)&&!e.globalId)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"'globalId' of the feature should be passed when 'globalIdUsed' is true")}if("geometry"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function I(e,t){if("geometry"in e&&"mesh"===e.geometry?.type){const{geometry:r}=e;if(r.vertexSpace.isGeoreferenced)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:georeferenced-mesh-unsupported`,"Uploading georeferenced meshes to a layer is not supported.")}}function R(e,t){const{feature:r,attachment:s}=e;if(!r||"attributes"in r&&!r.attributes[t.globalIdField])throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in r)&&!r.globalId)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!s.globalId)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!s.data&&!s.uploadId)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(s.data instanceof File&&s.data.name||s.name))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof s.data){const e=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.sJ)(s.data);if(e&&!e.isBase64)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${t.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}async function O(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_7__.aX)(r),o=t.length,i=a.length;return s.slice(0,o).forEach(((e,a)=>t[a].geometry=e)),s.slice(o,o+i).forEach(((e,t)=>a[t].geometry=e)),e}function j(t){const a=new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__.Z;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}function L(e){return"mesh"===e?.geometry?.type}function k(e,t,r,s){if(!m(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!t.uploadAssets)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z(`${e.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:e});return t.uploadAssets(r,s)}},"./node_modules/@arcgis/core/layers/mixins/EditBusLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{jF:()=>l,lQ:()=>n,o1:()=>c});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Evented_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const i=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__.Z.EventEmitter;function l(e,t,d=!1){const r=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.hh)();return d=null==t||d,i.emit("apply-edits",{serviceUrl:e,layerId:t,mayReceiveServiceEdits:d,result:r.promise}),r}const a="esri.layers.mixins.EditBusLayer",o=Symbol(a);function n(e){return null!=e&&"object"==typeof e&&o in e}const c=t=>{var s;let l=class extends t{constructor(...e){super(...e),this[s]=!0,this.when().then((()=>{this.own([i.on("apply-edits",(e=>{const{serviceUrl:t,layerId:s,mayReceiveServiceEdits:r,result:i}=e,l=t===this.url,a=null!=s&&null!=this.layerId&&s===this.layerId;if(!l||!a&&!r)return;const o=i.then((e=>{if(a&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.d9)(e)),e;const t=e.editedFeatures?.find((({layerId:e})=>e===this.layerId));if(t){const{adds:s,updates:r,deletes:i}=t.editedFeatures,l={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:s?s.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],deletedFeatures:i?i.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],updatedFeatures:r?r.map((({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],editedFeatures:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.d9)(e.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",l),l}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.d9)(e.editedFeatures),exceededTransferLimit:!1}}));this.emit("apply-edits",{result:o})}))])}),(()=>{}))}};return s=o,l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.j)(a)],l),l}},"./node_modules/@arcgis/core/rest/geometryService/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>r,o:()=>o});var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js");function r(t){return{geometryType:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ji)(t[0]),geometries:t.map((e=>e.toJSON()))}}function o(e,r,o){const n=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__.q9)(r);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=o,t}))}},"./node_modules/@arcgis/core/rest/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cv:()=>s,en:()=>f,lA:()=>i});__webpack_require__("./node_modules/@arcgis/core/config.js"),__webpack_require__("./node_modules/@arcgis/core/kernel.js");var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");__webpack_require__("./node_modules/@arcgis/core/support/apiKeyUtils.js");function i(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return"string"==typeof r?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.mN)(r):(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.d9)(r)}function s(r,t,o){const e={};for(const n in r){if("declaredClass"===n)continue;const i=r[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){e[n]=[];for(let r=0;r<i.length;r++)e[n][r]=s(i[r])}else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(o&&o[n]);e[n]=t?r:JSON.stringify(r)}else e[n]=t?i:JSON.stringify(i);else e[n]=i}return e}}}]);