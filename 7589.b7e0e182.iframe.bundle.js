"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[7589,5510],{"./node_modules/@arcgis/core/chunks/mat3f64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function t(e,r,t,n,o,a,u,c,f){return[e,r,t,n,o,a,u,c,f]}function n(e,r){return new Float64Array(e,r,9)}__webpack_require__.d(__webpack_exports__,{a:()=>n,c:()=>e,f:()=>t});Object.freeze(Object.defineProperty({__proto__:null,clone:function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/quat.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>S,g:()=>x,i:()=>O,j:()=>K,k:()=>k,m:()=>y,r:()=>Q,s:()=>v});var _mat3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),_quatf64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_common_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/common.js"),_vec3_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_vec4_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js");function v(t,s,a){a*=.5;const n=Math.sin(a);return t[0]=n*s[0],t[1]=n*s[1],t[2]=n*s[2],t[3]=Math.cos(a),t}function x(t,s){const a=2*Math.acos(s[3]),n=Math.sin(a/2);return n>(0,_common_js__WEBPACK_IMPORTED_MODULE_3__.g)()?(t[0]=s[0]/n,t[1]=s[1]/n,t[2]=s[2]/n):(t[0]=1,t[1]=0,t[2]=0),a}function y(t,s,a){const n=s[0],o=s[1],r=s[2],e=s[3],c=a[0],u=a[1],i=a[2],h=a[3];return t[0]=n*h+e*c+o*i-r*u,t[1]=o*h+e*u+r*c-n*i,t[2]=r*h+e*i+n*u-o*c,t[3]=e*h-n*c-o*u-r*i,t}function E(t,s,a,n){const r=s[0],e=s[1],c=s[2],u=s[3];let i,h,M,f,l,m=a[0],p=a[1],q=a[2],g=a[3];return h=r*m+e*p+c*q+u*g,h<0&&(h=-h,m=-m,p=-p,q=-q,g=-g),1-h>(0,_common_js__WEBPACK_IMPORTED_MODULE_3__.g)()?(i=Math.acos(h),M=Math.sin(i),f=Math.sin((1-n)*i)/M,l=Math.sin(n*i)/M):(f=1-n,l=n),t[0]=f*r+l*m,t[1]=f*e+l*p,t[2]=f*c+l*q,t[3]=f*u+l*g,t}function O(t,s){const a=s[0],n=s[1],o=s[2],r=s[3],e=a*a+n*n+o*o+r*r,c=e?1/e:0;return t[0]=-a*c,t[1]=-n*c,t[2]=-o*c,t[3]=r*c,t}function S(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t}function T(t,s){const a=s[0]+s[4]+s[8];let n;if(a>0)n=Math.sqrt(a+1),t[3]=.5*n,n=.5/n,t[0]=(s[5]-s[7])*n,t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n;else{let a=0;s[4]>s[0]&&(a=1),s[8]>s[3*a+a]&&(a=2);const o=(a+1)%3,r=(a+2)%3;n=Math.sqrt(s[3*a+a]-s[3*o+o]-s[3*r+r]+1),t[a]=.5*n,n=.5/n,t[3]=(s[3*o+r]-s[3*r+o])*n,t[o]=(s[3*o+a]+s[3*a+o])*n,t[r]=(s[3*r+a]+s[3*a+r])*n}return t}function k(t,s,a,n){const o=.5*Math.PI/180;s*=o,a*=o,n*=o;const r=Math.sin(s),e=Math.cos(s),c=Math.sin(a),u=Math.cos(a),i=Math.sin(n),h=Math.cos(n);return t[0]=r*u*h-e*c*i,t[1]=e*c*h+r*u*i,t[2]=e*u*i-r*c*h,t[3]=e*u*h+r*c*i,t}const B=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.c,C=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.s,D=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.a,F=y,G=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.b,R=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.d,W=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.l,X=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.e,Y=X,Z=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.f,H=Z,J=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.n,K=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.g,N=_vec4_js__WEBPACK_IMPORTED_MODULE_5__.h;function Q(t,s,a){const n=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.e)(s,a);return n<-.999999?((0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.f)(U,V,s),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.u)(U)<1e-6&&(0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.f)(U,$,s),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.n)(U,U),v(t,U,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,_vec3_js__WEBPACK_IMPORTED_MODULE_4__.f)(U,s,a),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+n,J(t,t))}const U=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),V=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.f)(1,0,0),$=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.f)(0,1,0);const st=(0,_quatf64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),at=(0,_quatf64_js__WEBPACK_IMPORTED_MODULE_1__.a)();const ot=(0,_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)();Object.freeze(Object.defineProperty({__proto__:null,add:D,calculateW:function z(t,s){const a=s[0],n=s[1],o=s[2];return t[0]=a,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-a*a-n*n-o*o)),t},conjugate:S,copy:B,dot:R,equals:N,exactEquals:K,fromEuler:k,fromMat3:T,getAxisAngle:x,identity:function b(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:O,len:Y,length:X,lerp:W,mul:F,multiply:y,normalize:J,random:function L(t){const s=_common_js__WEBPACK_IMPORTED_MODULE_3__.R,a=s(),n=s(),o=s(),e=Math.sqrt(1-a),c=Math.sqrt(a);return t[0]=e*Math.sin(2*Math.PI*n),t[1]=e*Math.cos(2*Math.PI*n),t[2]=c*Math.sin(2*Math.PI*o),t[3]=c*Math.cos(2*Math.PI*o),t},rotateX:function A(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],e=s[3],c=Math.sin(a),u=Math.cos(a);return t[0]=n*u+e*c,t[1]=o*u+r*c,t[2]=r*u-o*c,t[3]=e*u-n*c,t},rotateY:function I(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],e=s[3],c=Math.sin(a),u=Math.cos(a);return t[0]=n*u-r*c,t[1]=o*u+e*c,t[2]=r*u+n*c,t[3]=e*u-o*c,t},rotateZ:function _(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],e=s[3],c=Math.sin(a),u=Math.cos(a);return t[0]=n*u+o*c,t[1]=o*u-n*c,t[2]=r*u+e*c,t[3]=e*u-r*c,t},rotationTo:Q,scale:G,set:C,setAxes:function nt(t,s,a,n){const o=ot;return o[0]=a[0],o[3]=a[1],o[6]=a[2],o[1]=n[0],o[4]=n[1],o[7]=n[2],o[2]=-s[0],o[5]=-s[1],o[8]=-s[2],J(t,T(t,o))},setAxisAngle:v,slerp:E,sqlerp:function tt(t,s,a,n,o,r){return E(st,s,o,r),E(at,a,n,r),E(t,st,at,2*r*(1-r)),t},sqrLen:H,squaredLength:Z,str:function w(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/quatf64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(){return[0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function n(e,r){return new Float64Array(e,r,4)}__webpack_require__.d(__webpack_exports__,{I:()=>o,a:()=>e,b:()=>r,c:()=>n});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:function t(e,r,t,n){return[e,r,t,n]}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>g});var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js"),_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),_uuid_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js"),_metadata_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/metadata.js"),_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/PropertyOrigin.js"),_property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/portal/support/resourceExtension.js"),_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");function g(t){const r=t?.origins??[void 0];return(e,o)=>{const s=function h(t,r,e){if("resource"===t?.type)return function v(o,s,n){const p=(0,_metadata_js__WEBPACK_IMPORTED_MODULE_2__.Oe)(s,n);return{type:String,read:(t,r,e)=>{const o=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.r)(t,r,e);return p.type===String?o:"function"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,i,u,c){if(!c||!c.resources)return"string"==typeof s?void(i[u]=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.t)(s,c)):void(i[u]=s.write({},c));const y=function x(t){return null==t?null:"string"==typeof t?t:t.url}(s),d=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.t)(y,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.M.NO),g=p.type!==String&&(!(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_7__.l)(this)||c&&c.origin&&this.originIdOf(n)>(0,_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_3__.M9)(c.origin)),h={object:this,propertyName:n,value:s,targetUrl:d,dest:i,targetPropertyName:u,context:c,params:o};c&&c.portalItem&&d&&!(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.YP)(d)?g?function w(t){const{context:r,targetUrl:e,params:o,value:n,dest:i,targetPropertyName:a}=t;if(!r.portalItem)return;const p=r.portalItem.resourceFromPath(e),c=N(n,e,r),l=(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_5__.B)(c),m=(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ml)(p.path),f=o?.compress??!1;l===m?(r.resources&&I({...t,resource:p,content:c,compress:f,updates:r.resources.toUpdate}),i[a]=e):U(t)}(h):function j({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}(h):c&&c.portalItem&&(null==d||null!=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.i)(d)||(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.jc)(d)||g)?U(h):i[u]=d}}}}(t,r,e);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:r}=_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.a;return{read:t,write:r}}}}(t,e,o);for(const t of r){const r=(0,_property_js__WEBPACK_IMPORTED_MODULE_4__.CJ)(e,t,o);for(const t in s)r[t]=s[t]}}}function U(t){const{targetUrl:r,params:s,value:i,context:a,dest:p,targetPropertyName:c}=t;if(!a.portalItem)return;const l=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_6__.p)(r),m=l?.filename??(0,_uuid_js__WEBPACK_IMPORTED_MODULE_1__.D)(),f=s?.prefix??l?.prefix,d=N(i,r,a),g=(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.v_)(f,m),h=`${g}.${(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_5__.B)(d)}`,v=a.portalItem.resourceFromPath(h);(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.jc)(r)&&a.resources&&a.resources.pendingOperations.push(async function P(t){const r=(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/request.js"))).default,{data:e}=await r(t,{responseType:"blob"});return e}(r).then((t=>{v.path=`${g}.${(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_5__.B)(t)}`,p[c]=v.itemRelativeUrl})).catch((()=>{})));const U=s?.compress??!1;a.resources&&I({...t,resource:v,content:d,compress:U,updates:a.resources.toAdd}),p[c]=v.itemRelativeUrl}function I({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{!function O(t,r,e){"string"==typeof t[r]?t[r]=e.url:t[r].url=e.url}(t,r,e)}})}function N(t,r,e){return"string"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:"application/json"})}},"./node_modules/@arcgis/core/core/accessorSupport/originUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>i});var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js");function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__.l)(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}},"./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function i(i){return i&&"getAtOrigin"in i&&"originOf"in i}__webpack_require__.d(__webpack_exports__,{l:()=>i})},"./node_modules/@arcgis/core/layers/VoxelLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>VoxelLayer_M});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),MultiOriginJSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),reader=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),APIKeyMixin=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js"),ArcGISService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ArcGISService.js"),OperationalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js"),PortalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/PortalLayer.js"),ScaleRangeLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js"),SceneService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/SceneService.js"),arcgisLayerUrl=__webpack_require__("./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),Field=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),Cyclical=__webpack_require__("./node_modules/@arcgis/core/core/Cyclical.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),persistable=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js"),quat=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),quatf64=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),common=__webpack_require__("./node_modules/@arcgis/core/chunks/common.js");const h=(0,vec3f64.c)(),i=(0,quatf64.a)(),p=(0,quatf64.a)(),e=(0,quatf64.a)(),j=(0,vec3f64.f)(0,0,1),k=(0,vec3f64.f)(0,1,0),q=(0,vec3f64.f)(1,0,0);function v(a){(0,vec3.c)(h,a),(0,vec3.n)(h,h);const n=Math.atan2(h[1],h[0]),o=(0,quat.s)((0,quatf64.a)(),j,-n);(0,vec3.q)(h,h,o);const r=-1*Math.atan2(h[2],h[0]);return[(0,common.a)(n)+270,(0,common.a)(r)+90]}function M(t,n){return(0,quat.s)(p,j,(0,common.t)(t-270)),(0,quat.s)(e,k,(0,common.t)(n-90)),(0,quat.m)(i,p,e),(0,vec3.c)(h,q),(0,vec3.q)(h,h,i),(0,vec3.n)(h,h),[h[0],h[1],h[2]]}var cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js");let m=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(t){super(t),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[t,o]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)}set orientation(t){const o=M(t,this.tilt);this._set("normal",o),this._set("orientation",t)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[t,o]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(o),0,!0)}set tilt(t){const o=M(this.orientation,t);this._set("normal",o),this._set("tilt",t)}};(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],m.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,cast.p)((t=>Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)))],m.prototype,"orientation",null),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,cast.p)((t=>Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)))],m.prototype,"tilt",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],m.prototype,"normal",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],m.prototype,"point",void 0),m=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelSlice")],m);const c=m;var persistableUrlUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");let d=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,r]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(e),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,r]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(r),0,!0)}};(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!0,write:!0}})],d.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{origins:{service:{read:persistableUrlUtils.r}},write:{enabled:!0,isRequired:!0}}}),(0,persistable.B)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],d.prototype,"href",void 0),(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"id",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],d.prototype,"orientation",null),(0,tslib_es6._)([(0,property.Cb)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],d.prototype,"tilt",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"normal",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"point",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[ensureType.z8],json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"sizeInPixel",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[c],json:{write:!0}})],d.prototype,"slices",void 0),(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{default:0,write:!0}})],d.prototype,"timeId",void 0),(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"variableId",void 0),d=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelSection")],d);const u=d;let t=class extends JSONSupport.wq{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,tslib_es6._)([(0,property.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],t.prototype,"diffuseFactor",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],t.prototype,"specularFactor",void 0),t=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelSimpleShading")],t);const VoxelSimpleShading_p=t;let s=class extends JSONSupport.wq{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,tslib_es6._)([(0,property.Cb)({type:["discrete","continuous"],json:{write:!0}})],s.prototype,"continuity",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{write:!0}})],s.prototype,"hasNoData",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],s.prototype,"noData",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],s.prototype,"offset",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],s.prototype,"scale",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],s.prototype,"type",void 0),s=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelFormat")],s);const VoxelFormat_p=s;let VoxelVariable_i=class extends JSONSupport.wq{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVariable_i.prototype,"id",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelVariable_i.prototype,"description",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVariable_i.prototype,"name",void 0),(0,tslib_es6._)([(0,property.Cb)({type:VoxelFormat_p,json:{write:!0}})],VoxelVariable_i.prototype,"originalFormat",void 0),(0,tslib_es6._)([(0,property.Cb)({type:VoxelFormat_p,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVariable_i.prototype,"renderingFormat",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelVariable_i.prototype,"unit",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],VoxelVariable_i.prototype,"volumeId",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],VoxelVariable_i.prototype,"type",void 0),VoxelVariable_i=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelVariable")],VoxelVariable_i);const VoxelVariable_p=VoxelVariable_i;var lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js");let l=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.color=Color.Z.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,tslib_es6._)([(0,property.Cb)({type:Color.Z,json:{type:[ensureType.z8],write:{enabled:!0,isRequired:!0}}})],l.prototype,"color",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],l.prototype,"value",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!0,write:!0}})],l.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],l.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!1,write:!0}})],l.prototype,"colorLocked",void 0),l=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelIsosurface")],l);const a=l;var collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");let VoxelColorStop_c=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,tslib_es6._)([(0,property.Cb)({type:Color.Z,json:{type:[ensureType.z8],write:{enabled:!0,isRequired:!0}}})],VoxelColorStop_c.prototype,"color",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelColorStop_c.prototype,"position",void 0),VoxelColorStop_c=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelColorStop")],VoxelColorStop_c);const VoxelColorStop_l=VoxelColorStop_c;let VoxelOpacityStop_p=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],VoxelOpacityStop_p.prototype,"opacity",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelOpacityStop_p.prototype,"position",void 0),VoxelOpacityStop_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelOpacityStop")],VoxelOpacityStop_p);const VoxelOpacityStop_i=VoxelOpacityStop_p;let VoxelRangeFilter_p=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!1,write:!0}})],VoxelRangeFilter_p.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],VoxelRangeFilter_p.prototype,"range",void 0),VoxelRangeFilter_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelRangeFilter")],VoxelRangeFilter_p);const VoxelRangeFilter_a=VoxelRangeFilter_p;var VoxelTransferFunctionStyle_u,o;(o=VoxelTransferFunctionStyle_u||(VoxelTransferFunctionStyle_u={}))[o.Color=1]="Color",o[o.Alpha=2]="Alpha",o[o.Both=3]="Both";let y=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(o){super(o),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(Collection.Z.ofType(VoxelColorStop_l)),this.opacityStops=new(Collection.Z.ofType(VoxelOpacityStop_i))}set colorStops(o){this._set("colorStops",(0,collectionUtils.Z)(o,this._get("colorStops"),Collection.Z.ofType(VoxelColorStop_l)))}set opacityStops(o){this._set("opacityStops",(0,collectionUtils.Z)(o,this._get("opacityStops"),Collection.Z.ofType(VoxelOpacityStop_i)))}getPreviousNext(o,t,r){let e=o;for(;--e>0&&t[e].type!==r&&t[e].type!==VoxelTransferFunctionStyle_u.Both;);let s=o;const i=t.length;for(;++s<i&&t[s].type!==r&&t[s].type!==VoxelTransferFunctionStyle_u.Both;);return[e,s]}get rasterizedTransferFunction(){const o=[];if(this.colorStops.length<2)return o;const r=[],e=[];for(const t of this.colorStops){if(!t.color)return o;e.push({color:{r:t.color.r,g:t.color.g,b:t.color.b,a:Math.round(255*(1-t.color.a))},position:t.position,type:VoxelTransferFunctionStyle_u.Color})}if(0===this.opacityStops.length)for(const t of e)r.push({color:t.color,position:t.position});else{for(const t of this.opacityStops){const o=(0,mathUtils.uZ)(t.position,0,1),r=Math.round(255*(0,mathUtils.uZ)(1-t.opacity,0,1));let i=!1;for(const t of e)if(t.type===VoxelTransferFunctionStyle_u.Color&&Math.abs(t.position-o)<1e-5){t.color.a=r,t.type=VoxelTransferFunctionStyle_u.Both,i=!0;break}i||e.push({color:{r:0,g:0,b:0,a:r},position:t.position,type:VoxelTransferFunctionStyle_u.Alpha})}e.sort(((o,t)=>o.position<t.position?-1:1));const o=e.length;for(let t=0;t<o;++t){const r=e[t];if(r.type!==VoxelTransferFunctionStyle_u.Both)if(r.type===VoxelTransferFunctionStyle_u.Color){const[s,i]=this.getPreviousNext(t,e,VoxelTransferFunctionStyle_u.Alpha);if(-1!==s&&i!==o){const o=(r.position-e[s].position)/(e[i].position-e[s].position);r.color.a=Math.round((0,mathUtils.t7)(e[s].color.a,e[i].color.a,o))}else r.color.a=-1!==s?e[s].color.a:e[i].color.a}else{const[s,i]=this.getPreviousNext(t,e,VoxelTransferFunctionStyle_u.Color);if(-1!==s&&i!==o){const o=(r.position-e[s].position)/(e[i].position-e[s].position),t=e[s].color,p=e[i].color;g.forEach((e=>{r.color[e]=Math.round((0,mathUtils.t7)(t[e],p[e],o))}))}else-1!==s?g.forEach((o=>{r.color[o]=e[s].color[o]})):g.forEach((o=>{r.color[o]=e[i].color[o]}))}}for(const t of e)r.push({color:t.color,position:t.position})}r[0].position=0,r[r.length-1].position=1;let i=0,l=1;for(let c=0;c<this._colorMapSize;++c){const e=c/this._colorMapSize;for(;e>r[l].position;)i=l++;const s=(e-r[i].position)/(r[l].position-r[i].position),a=r[i].color,h=r[l].color,f=new Color.Z;g.forEach((o=>{f[o]=Math.round((0,mathUtils.t7)(a[o],h[o],s))})),f.a=(0,mathUtils.uZ)(1-(0,mathUtils.t7)(a.a,h.a,s)/255,0,1),o.push(f)}return o}getColorForContinuousDataValue(o,t){const r=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||r.length<256)return null;let e=this.stretchRange[0],s=this.stretchRange[1];if(e>s){const o=e;e=s,s=o}o=(0,mathUtils.uZ)(o,e,s);const i=r[Math.round((o-e)/(s-e)*(this._colorMapSize-1))].clone();return t||(i.a=1),i}};(0,tslib_es6._)([(0,property.Cb)({type:["linear","nearest"],json:{write:!0}})],y.prototype,"interpolation",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],y.prototype,"stretchRange",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelColorStop_l),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],y.prototype,"colorStops",null),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelOpacityStop_i),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],y.prototype,"opacityStops",null),(0,tslib_es6._)([(0,property.Cb)({type:VoxelRangeFilter_a,json:{write:!0}})],y.prototype,"rangeFilter",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Color.Z],clonable:!1,json:{read:!1}})],y.prototype,"rasterizedTransferFunction",null),y=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelTransferFunctionStyle")],y);const S=y,g=["r","g","b"];let VoxelUniqueValue_a=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(){super(...arguments),this.color=Color.Z.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,tslib_es6._)([(0,property.Cb)({type:Color.Z,json:{type:[ensureType.z8],write:{enabled:!0,isRequired:!0}}})],VoxelUniqueValue_a.prototype,"color",void 0),(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{write:{enabled:!0,isRequired:!0}}})],VoxelUniqueValue_a.prototype,"value",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!0,write:!0}})],VoxelUniqueValue_a.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelUniqueValue_a.prototype,"label",void 0),VoxelUniqueValue_a=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelUniqueValue")],VoxelUniqueValue_a);const VoxelUniqueValue_l=VoxelUniqueValue_a;var VoxelVariableStyle_p;let VoxelVariableStyle_c=VoxelVariableStyle_p=class extends JSONSupport.wq{constructor(e){super(e),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(Collection.Z.ofType(VoxelUniqueValue_l)),this.isosurfaces=new(Collection.Z.ofType(a))}clone(){return new VoxelVariableStyle_p({variableId:this.variableId,label:this.label,transferFunction:(0,lang.d9)(this.transferFunction),uniqueValues:(0,lang.d9)(this.uniqueValues),isosurfaces:(0,lang.d9)(this.isosurfaces)})}};(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVariableStyle_c.prototype,"variableId",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelVariableStyle_c.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:S,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],VoxelVariableStyle_c.prototype,"transferFunction",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelUniqueValue_l),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],VoxelVariableStyle_c.prototype,"uniqueValues",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(a),json:{write:{enabled:!0,overridePolicy(){const e=!this.uniqueValues||this.uniqueValues.length<1,s=!!this.isosurfaces&&this.isosurfaces.length>0;return{enabled:e&&s}}}}})],VoxelVariableStyle_c.prototype,"isosurfaces",void 0),VoxelVariableStyle_c=VoxelVariableStyle_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelVariableStyle")],VoxelVariableStyle_c);const f=VoxelVariableStyle_c;var Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");let VoxelIrregularSpacing_t=class extends JSONSupport.wq{constructor(){super(...arguments),this.values=null}};(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],VoxelIrregularSpacing_t.prototype,"values",void 0),VoxelIrregularSpacing_t=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelIrregularSpacing")],VoxelIrregularSpacing_t);const VoxelIrregularSpacing_p=VoxelIrregularSpacing_t;let VoxelRegularSpacing_t=class extends JSONSupport.wq{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],VoxelRegularSpacing_t.prototype,"scale",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],VoxelRegularSpacing_t.prototype,"offset",void 0),VoxelRegularSpacing_t=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelRegularSpacing")],VoxelRegularSpacing_t);const VoxelRegularSpacing_p=VoxelRegularSpacing_t;let VoxelDimension_p=class extends JSONSupport.wq{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(this.irregularSpacing?.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,tslib_es6._)([(0,property.Cb)({type:VoxelIrregularSpacing_p,json:{write:!0}})],VoxelDimension_p.prototype,"irregularSpacing",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{write:!0}})],VoxelDimension_p.prototype,"isPositiveUp",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{write:!0}})],VoxelDimension_p.prototype,"isWrappedDateLine",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelDimension_p.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelDimension_p.prototype,"name",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelDimension_p.prototype,"quantity",void 0),(0,tslib_es6._)([(0,property.Cb)({type:VoxelRegularSpacing_p,json:{write:!0}})],VoxelDimension_p.prototype,"regularSpacing",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:!0}})],VoxelDimension_p.prototype,"size",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelDimension_p.prototype,"unit",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{read:!1}})],VoxelDimension_p.prototype,"isRegular",null),VoxelDimension_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelDimension")],VoxelDimension_p);const VoxelDimension_a=VoxelDimension_p,VoxelVolume_d=Logger.Z.getLogger("esri.layers.voxel.VoxelVolume");let VoxelVolume_f=class extends JSONSupport.wq{constructor(e){super(e),this.id=0,this.dimensions=null,this.spatialReference=SpatialReference.Z.WGS84}get zDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}get isValid(){return!(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length||this.dimensions[0].size<1||this.dimensions[1].size<1||-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),s=this.dimensions[2],r=s.isRegular?s.getRange():[0,s.size];return[e[0],i[0],r[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),s=this.dimensions[2],r=s.isRegular?s.getRange():[0,s.size],t=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let n=0;n<3;++n)t[n]<2?t[n]=1:t[n]-=1;return s.isRegular&&!s.isPositiveUp&&(t[2]*=-1),[(e[1]-e[0])/t[0],(i[1]-i[0])/t[1],(r[1]-r[0])/t[2]]}get volumeType(){if(this.isValid){const e=this.dimensions[2].size>0,i=this.dimensions[3].size>0;if(!e&&i)return"xyt";if(e&&i)return"xyzt"}return"xyz"}get sizeInVoxels(){if(!this.isValid)return[0,0,0];const e=this.zDimension;return[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[e].size]}computeVoxelSpaceLocation(e){if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return VoxelVolume_d.error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,spatialReferenceUtils.fS)(this.spatialReference,e.spatialReference))return VoxelVolume_d.error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const i=(0,vec3f64.f)(e.x,e.y,e.z??0);(0,vec3.b)(i,i,this.originInLayerSpace3D),(0,vec3.D)(i,i,this.voxelSizeInLayerSpaceSigned);const s=this.dimensions[this.zDimension];if(!s.isRegular&&Array.isArray(s.irregularSpacing?.values)&&s.irregularSpacing.values.length>1){const r=e.z??0,t=s.irregularSpacing.values,n=s.isPositiveUp?1:-1,o=t.reduce(((e,i)=>Math.abs(n*i-r)<Math.abs(n*e-r)?i:e));for(let e=0;e<t.length;++e)if(t[e]===o){i[2]=e;break}}return[i[0],i[1],i[2]]}computeLayerSpaceLocation(e){if(!this.isValid)return new Point.Z({x:0,y:0,spatialReference:this.spatialReference});const i=(0,vec3f64.g)(e);if((0,vec3.C)(i,i,this.voxelSizeInLayerSpaceSigned),(0,vec3.a)(i,i,this.originInLayerSpace3D),"xyt"===this.volumeType)return new Point.Z({x:i[0],y:i[1],spatialReference:this.spatialReference});const s=this.dimensions[this.zDimension];return s.isRegular||Array.isArray(s.irregularSpacing?.values)&&(e[2]<0?i[2]=s.irregularSpacing.values[0]:e[2]<s.irregularSpacing.values.length?i[2]=s.irregularSpacing.values[e[2]]:i[2]=s.irregularSpacing.values[s.irregularSpacing.values.length-1],s.isPositiveUp||(i[2]*=-1)),new Point.Z({x:i[0],y:i[1],z:i[2],spatialReference:this.spatialReference})}};(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolume_f.prototype,"id",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[VoxelDimension_a],json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolume_f.prototype,"dimensions",void 0),(0,tslib_es6._)([(0,property.Cb)({type:SpatialReference.Z,json:{read:{enabled:!1}}})],VoxelVolume_f.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:!1}})],VoxelVolume_f.prototype,"zDimension",null),(0,tslib_es6._)([(0,property.Cb)({type:[Boolean],json:{read:!1}})],VoxelVolume_f.prototype,"isValid",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{read:!1}})],VoxelVolume_f.prototype,"originInLayerSpace3D",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{read:!1}})],VoxelVolume_f.prototype,"voxelSizeInLayerSpaceSigned",null),(0,tslib_es6._)([(0,property.Cb)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],VoxelVolume_f.prototype,"volumeType",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{read:!1}})],VoxelVolume_f.prototype,"sizeInVoxels",null),VoxelVolume_f=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelVolume")],VoxelVolume_f);const VoxelVolume_S=VoxelVolume_f;var VoxelVolumeIndex_t;let VoxelVolumeIndex_s=VoxelVolumeIndex_t=class extends JSONSupport.wq{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const e=new VoxelVolumeIndex_t;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolumeIndex_s.prototype,"apronWidth",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolumeIndex_s.prototype,"brickSize",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolumeIndex_s.prototype,"maxLodLevel",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolumeIndex_s.prototype,"nodeSize",void 0),VoxelVolumeIndex_s=VoxelVolumeIndex_t=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelVolumeIndex")],VoxelVolumeIndex_s);const VoxelVolumeIndex_p=VoxelVolumeIndex_s;let VoxelDynamicSection_m=class extends((0,Clonable.J)(JSONSupport.wq)){constructor(t){super(t),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[t,o]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)}set orientation(t){const o=M(t,this.tilt);this._set("normal",o),this._set("orientation",t)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[t,o]=v(this.normal);return Cyclical.BV.normalize((0,ensureType.q9)(o),0,!0)}set tilt(t){const o=M(this.orientation,t);this._set("normal",o),this._set("tilt",t)}};(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{default:!0,write:!0}})],VoxelDynamicSection_m.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],VoxelDynamicSection_m.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,cast.p)((t=>Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)))],VoxelDynamicSection_m.prototype,"orientation",null),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,cast.p)((t=>Cyclical.BV.normalize((0,ensureType.q9)(t),0,!0)))],VoxelDynamicSection_m.prototype,"tilt",null),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],VoxelDynamicSection_m.prototype,"normal",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number],json:{write:!0}})],VoxelDynamicSection_m.prototype,"point",void 0),VoxelDynamicSection_m=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelDynamicSection")],VoxelDynamicSection_m);const VoxelDynamicSection_c=VoxelDynamicSection_m;var VoxelVolumeStyle_p;let VoxelVolumeStyle_m=VoxelVolumeStyle_p=class extends JSONSupport.wq{constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(Collection.Z.ofType(c)),this.dynamicSections=new(Collection.Z.ofType(VoxelDynamicSection_c))}set slices(e){this._set("slices",(0,collectionUtils.Z)(e,this._get("slices"),Collection.Z.ofType(c)))}set dynamicSections(e){this._set("dynamicSections",(0,collectionUtils.Z)(e,this._get("dynamicSections"),Collection.Z.ofType(VoxelDynamicSection_c)))}clone(){return new VoxelVolumeStyle_p({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,lang.d9)(this.slices),dynamicSections:(0,lang.d9)(this.dynamicSections)})}};(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{write:{enabled:!0,isRequired:!0}}})],VoxelVolumeStyle_m.prototype,"volumeId",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{default:1,write:!0}})],VoxelVolumeStyle_m.prototype,"verticalExaggeration",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],VoxelVolumeStyle_m.prototype,"exaggerationMode",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{default:0,write:!0}})],VoxelVolumeStyle_m.prototype,"verticalOffset",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(c),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],VoxelVolumeStyle_m.prototype,"slices",null),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelDynamicSection_c),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],VoxelVolumeStyle_m.prototype,"dynamicSections",null),VoxelVolumeStyle_m=VoxelVolumeStyle_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.voxel.VoxelVolumeStyle")],VoxelVolumeStyle_m);const VoxelVolumeStyle_d=VoxelVolumeStyle_m;var popupUtils=__webpack_require__("./node_modules/@arcgis/core/support/popupUtils.js");const O="esri.layers.VoxelLayer",R=Logger.Z.getLogger(O);let A=class extends((0,SceneService.Vt)((0,ArcGISService.Y)((0,OperationalLayer.q)((0,PortalLayer.I)((0,ScaleRangeLayer.M)((0,MultiOriginJSONSupport.R)((0,APIKeyMixin.V)(Layer.Z)))))))){constructor(e){super(e),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new VoxelSimpleShading_p,this.opacity=1,this.variables=new Collection.Z,this.volumes=new Collection.Z,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!0,this.popupTemplate=null,this.test=null,this.volumeStyles=new(Collection.Z.ofType(VoxelVolumeStyle_d)),this.variableStyles=new(Collection.Z.ofType(f)),this.sections=new(Collection.Z.ofType(u)),e?.constantUpscaling&&(this.test={constantUpscaling:!0})}set url(e){this._set("url",(0,arcgisLayerUrl.Nm)(e,R))}load(e){const t=null!=e?e.signal:null,i=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(promiseUtils.r9).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(i),Promise.resolve(this)}read(e,t){super.read(e,t);for(const i of this.volumes)i.spatialReference=this.spatialReference}readVersion(e,t){return super.parseVersionString(e)}validateLayer(e){if(e.layerType&&e.layerType!==this.operationalLayerType)throw new Error.Z("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new Error.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new Error.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(e,t,i){if(null!=e&&"object"==typeof e){const o=Extent.Z.fromJSON(e,i);if(0===o.zmin&&0===o.zmax&&Array.isArray(t.volumes)){const e=VoxelVolume_S.fromJSON(t.volumes[0]);if(e.isValid&&"xyt"!==e.volumeType){const t=e.dimensions[2];if(t.isRegular){let e=t.regularSpacing.offset,i=t.regularSpacing.offset+t.regularSpacing.scale*(t.size-1);if(e>i){const t=e;e=i,i=t}o.zmin=e,o.zmax=i}}}return o}return null}get voxelFields(){const e=[new Field.Z({name:"Voxel.ServiceValue",alias:"Value",domain:null,editable:!1,length:128,type:"string"}),new Field.Z({name:"Voxel.ServiceVariableLabel",alias:"Variable",domain:null,editable:!1,length:128,type:"string"}),new Field.Z({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"})],t=this.getVolume(null);if(null!=t){if("xyzt"===t.volumeType||"xyt"===t.volumeType){const t=new Field.Z({name:"Voxel.ServiceLocalTime",alias:"Local Time",domain:null,editable:!1,length:128,type:"string"});e.push(t);const i=new Field.Z({name:"Voxel.ServiceNativeTime",alias:"Native Time",domain:null,editable:!1,length:128,type:"string"});e.push(i)}if("xyt"!==t.volumeType){const t=new Field.Z({name:"Voxel.ServiceDepth",alias:"Depth",domain:null,editable:!1,length:128,type:"string"});e.push(t)}}return e}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.voxelFields,i=this.title;return(0,popupUtils.eZ)({fields:t,title:i},e)}getConfiguration(){const e={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index?.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return e.index&&this.index?.isValid()?JSON.stringify(e):""}getVariableStyle(e){let t=-1;if(t=null!=e?e:this.currentVariableId,!this.variableStyles||-1===t)return null;const i=this.variableStyles.findIndex((e=>e.variableId===t));return i<0?null:this.variableStyles.at(i)}getVariable(e){let t=-1;if(t=null!=e?e:this.currentVariableId,!this.variables||-1===t)return null;const i=this.variables.findIndex((e=>e.id===t));return i<0?null:this.variables.at(i)}getVolume(e){const t=this.getVariable(e);return null!=t?this.volumes.find((({id:e})=>e===t.volumeId)):null}getVolumeStyle(e){const t=this.getVariable(e);return null!=t?this.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}getColorForContinuousDataValue(e,t,i){const o=this.getVariable(e);if(null==o||"continuous"!==o.renderingFormat?.continuity)return null;if(!this.variableStyles)return null;const r=this.variableStyles.findIndex((t=>t.variableId===e));if(r<0)return null;const s=this.variableStyles.at(r);return s?.transferFunction?s.transferFunction.getColorForContinuousDataValue(t,i):null}getSections(){const e=[];for(const t of this.sections)e.push(new u({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}getVariableStyles(){const e=[];for(const t of this.variableStyles){const i=this._getVariable(t);if(null!=i){const o=t.clone();o.isosurfaces.length>4&&(o.isosurfaces=o.isosurfaces.slice(0,3),R.error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const e of o.isosurfaces)if(!e.colorLocked){const t=this.getColorForContinuousDataValue(o.variableId,e.value,!1);null===t||t.equals(e.color)||(e.color=t)}if("continuous"===i.renderingFormat.continuity)(null===o.transferFunction||o.transferFunction.colorStops.length<2)&&R.error(`VoxelVariableStyle for variable ${i.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==o.transferFunction&&(Array.isArray(o.transferFunction.stretchRange)&&2===o.transferFunction.stretchRange.length||(R.error(`VoxelVariableStyle for variable ${i.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),o.transferFunction.stretchRange=[0,1],o.transferFunction.colorStops.removeAll()));else if("discrete"===i.renderingFormat.continuity)if(0===t.uniqueValues.length)R.error(`VoxelVariableStyle for variable ${i.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const e of t.uniqueValues)null!==e.label&&void 0!==e.label||null===e.value||void 0===e.value||(e.label=e.value.toString());e.push(o)}else R.error(`VoxelVariable ID=${t.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return e}getVolumeStyles(){const e=[];for(const t of this.volumeStyles){const i=this._getVolumeFromVolumeId(t.volumeId);if(null!=i){const o=t.clone();for(const e of o.slices)this._isPlaneValid(e,[0,1,i.zDimension],i.dimensions)||(e.enabled=!1,e.label="invalid");for(const e of o.dynamicSections)this._isPlaneValid(e,[0,1,i.zDimension],i.dimensions)||(e.enabled=!1,e.label="invalid");e.push(o)}else R.error(`VoxelVolume ID=${t.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return e}_getVariable(e){const t=e.variableId;for(const i of this.variables)if(i.id===t)return i;return null}_getVolumeFromVolumeId(e){for(const t of this.volumes)if(t.id===e)return t;return null}_isPlaneValid(e,t,i){if(!e.point)return!1;if(!Array.isArray(e.point)||3!==e.point.length)return!1;if(!e.normal)return!1;if(!Array.isArray(e.normal)||3!==e.normal.length)return!1;const o=(0,vec3f64.f)(e.normal[0],e.normal[1],e.normal[2]);(0,vec3.n)(o,o);return!(Math.abs(o[0])+Math.abs(o[1])+Math.abs(o[2])<1e-6||(e.normal[0]=o[0],e.normal[1]=o[1],e.normal[2]=o[2],0))}};(0,tslib_es6._)([(0,property.Cb)({type:["Voxel"]})],A.prototype,"operationalLayerType",void 0),(0,tslib_es6._)([(0,property.Cb)(commonProperties.rn)],A.prototype,"legendEnabled",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0}})],A.prototype,"title",void 0),(0,tslib_es6._)([(0,property.Cb)(commonProperties.HQ)],A.prototype,"url",null),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(u),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],A.prototype,"sections",void 0),(0,tslib_es6._)([(0,property.Cb)({type:ensureType.z8,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],A.prototype,"currentVariableId",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelVolumeStyle_d),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],A.prototype,"volumeStyles",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],A.prototype,"renderMode",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(f),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],A.prototype,"variableStyles",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],A.prototype,"enableSlices",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],A.prototype,"enableSections",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],A.prototype,"enableDynamicSections",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],A.prototype,"enableIsosurfaces",void 0),(0,tslib_es6._)([(0,property.Cb)({type:VoxelSimpleShading_p,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],A.prototype,"shading",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["show","hide"]})],A.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],A.prototype,"opacity",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelVariable_p)})],A.prototype,"variables",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Collection.Z.ofType(VoxelVolume_S)})],A.prototype,"volumes",void 0),(0,tslib_es6._)([(0,property.Cb)({type:VoxelVolumeIndex_p})],A.prototype,"index",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{name:"layerDefinition.minScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],A.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{name:"layerDefinition.maxScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],A.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{read:!1},readOnly:!0})],A.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,json:{name:"serviceVersion"}})],A.prototype,"version",void 0),(0,tslib_es6._)([(0,reader.r)("service","version")],A.prototype,"readVersion",null),(0,tslib_es6._)([(0,property.Cb)({type:Extent.Z})],A.prototype,"fullExtent",void 0),(0,tslib_es6._)([(0,reader.r)("service","fullExtent",["fullExtent"])],A.prototype,"readFullExtent",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,clonable:!1,json:{read:!1}})],A.prototype,"voxelFields",null),(0,tslib_es6._)([(0,property.Cb)(commonProperties.C_)],A.prototype,"popupEnabled",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],A.prototype,"defaultPopupTemplate",null),A=(0,tslib_es6._)([(0,subclass.j)(O)],A);const VoxelLayer_M=A},"./node_modules/@arcgis/core/layers/mixins/SceneService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{xp:()=>K,Vt:()=>N});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),reader=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),originUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/originUtils.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),HeightModelInfo=__webpack_require__("./node_modules/@arcgis/core/geometry/HeightModelInfo.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),arcgisLayerUrl=__webpack_require__("./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),I3SIndexInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js");let n=null;function u(){return n}var Portal=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),PortalItem=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),asyncUtils=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js"),resourceUtils=__webpack_require__("./node_modules/@arcgis/core/portal/support/resourceUtils.js");async function p(r,p,u){if(!p||!p.resources)return;const h=p.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=p.portalItem;const i=new Set(p.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of p.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:p,error:n}=e,h=(0,resourceUtils.W7)(o,(0,uuid.D)());r.paths.push(h.path),f.push(a({resource:h,content:t,compress:e.compress,finish:p,error:n},u))}else r.paths.push(e.resource.path),f.push(saveUtils_n(e,u)),m.add(e.resource.path);for(const e of p.resources.toAdd)f.push(a(e,u)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(p.portalItem){const e=p.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await(0,promiseUtils.as)(f);(0,promiseUtils.k_)(u);const d=l.filter((r=>"error"in r)).map((r=>r.error));if(d.length>0)throw new Error.Z("save:resources","Failed to save one or more resources",{errors:d})}async function a(e,o){const t={...null!=o?o:{},compress:e.compress},s=await(0,asyncUtils.q6)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==s.ok)throw e.error?.(s.error),s.error;e.finish?.(e.resource)}async function saveUtils_n(e,o){const t=await(0,asyncUtils.q6)(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}const R="esri.layers.mixins.SceneService",A=Logger.Z.getLogger(R),N=o=>{let N=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=(0,promiseUtils.Ds)((async(e,t,r)=>{switch(e){case K.SAVE:return this._save(t);case K.SAVE_AS:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return SpatialReference.Z.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=o?new SpatialReference.Z(o):null}}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return Extent.Z.fromJSON(o,r)}const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<E))?null:new Extent.Z({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(".");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():"";return this.parseVersionString(o)}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return(0,arcgisLayerUrl.a7)(this.url,t.name);let o=t.name;if(!o&&this.url){const e=(0,arcgisLayerUrl.Qc)(this.url);null!=e&&(o=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(o=r+" - "+o),(0,arcgisLayerUrl.ld)(o)}set url(e){const t=(0,arcgisLayerUrl.XG)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:A});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,o){(0,arcgisLayerUrl.wH)(this,e,"layers",t,o)}get parsedUrl(){const e=this._get("url"),t=(0,urlUtils.mN)(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=(0,I3SIndexInfo.T)(this.parsedUrl.path,this.rootNode,e,this.apiKey,A,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if("page"===e?.type){const t=e.rootIndex%e.pageSize,o=e.rootPage?.nodes?.[t];if(null==o||null==o.obb||null==o.obb.center||null==o.obb.halfSize)throw new Error.Z("sceneservice:invalid-node-page","Invalid node page.");if(o.obb.center[0]<E||null==this.fullExtent||this.fullExtent.hasZ)return;const i=o.obb.halfSize,s=o.obb.center[2],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=s-a,this.fullExtent.zmax=s+a}else if("node"===e?.type){const t=e.rootNode?.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<E)return;const r=t[2],o=t[3],{fullExtent:i}=this;i&&(i.zmin=r-o,i.zmax=r+o)}}async _fetchService(e){if(null==this.url)throw new Error.Z("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await(0,request.default)(this.url,{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await(0,request.default)(this.parsedUrl?.path??"",{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));let o=!1;if(r.data.layerType&&"Voxel"===r.data.layerType&&(o=!0),o)return this._fetchVoxelServiceLayer();const i=r.data;this.read(i,this._getServiceContext()),this.validateLayer(i)}async _fetchVoxelServiceLayer(e){const r=(await(0,request.default)(this.parsedUrl?.path+"/layer",{query:{f:"json",token:this.apiKey},responseType:"json",signal:e})).data;this.read(r,this._getServiceContext()),this.validateLayer(r)}_getServiceContext(){return{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),r===U.newItem&&(e.typeKeywords=e.typeKeywords.filter((e=>"Hosted Service"!==e))))}async _saveAs(e,t){const o={...O,...t};let i=PortalItem.default.from(e);i||(A.error("_saveAs(): requires a portal item parameter"),await Promise.reject(new Error.Z("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||Portal.Z.getDefault();await this._ensureLoadBeforeSave(),i.type=T,i.portal=s;const a={origin:"portal-item",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write({},a)]};return await Promise.all(a.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,U.newItem),await s.signIn(),await(s.user?.addItem({item:i,folder:o&&o.folder,data:n})),await p(this.resourceReferences,a,null),this.portalItem=i,(0,originUtils.D)(a),a.portalItem=i,i}async _save(e){const t={...O,...e};if(!this.portalItem)throw A.error("_save(): requires the .portalItem property to be set"),new Error.Z("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService");if(this.portalItem.type!==T)throw A.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+T),new Error.Z("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${T}"`);await this._ensureLoadBeforeSave();const o={origin:"portal-item",url:this.portalItem.itemUrl&&(0,urlUtils.mN)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||Portal.Z.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,U.existingItem),await this.portalItem.update({data:i}),await p(this.resourceReferences,o,null),(0,originUtils.D)(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages?.filter((e=>"error"===e.type)).map((e=>new Error.Z(e.name,e.message,e.details)))??[];o?.validationOptions?.ignoreUnsupported&&(i=i.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)));const s=o?.validationOptions,a=s?.enabled,n=u();if(a&&n){const t=(await n()).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\n${t.join("\n")}`;if(A.error(`_validateAgainstJSONSchema(): ${e}`),"throw"===s.failPolicy){const e=t.map((e=>new Error.Z("sceneservice:schema-validation",e))).concat(i);throw new Error.Z("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new Error.Z("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return(0,tslib_es6._)([(0,property.Cb)(commonProperties.id)],N.prototype,"id",void 0),(0,tslib_es6._)([(0,property.Cb)({type:SpatialReference.Z})],N.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,reader.r)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],N.prototype,"readSpatialReference",null),(0,tslib_es6._)([(0,property.Cb)({type:Extent.Z})],N.prototype,"fullExtent",void 0),(0,tslib_es6._)([(0,reader.r)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],N.prototype,"readFullExtent",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,type:HeightModelInfo.Z})],N.prototype,"heightModelInfo",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],N.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],N.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],N.prototype,"version",void 0),(0,tslib_es6._)([(0,reader.r)("version",["store.version"])],N.prototype,"readVersion",null),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{read:{source:"copyrightText"}}})],N.prototype,"copyright",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{read:!1}})],N.prototype,"sublayerTitleMode",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String})],N.prototype,"title",void 0),(0,tslib_es6._)([(0,reader.r)("portal-item","title")],N.prototype,"readTitlePortalItem",null),(0,tslib_es6._)([(0,reader.r)("service","title",["name"])],N.prototype,"readTitleService",null),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],N.prototype,"layerId",void 0),(0,tslib_es6._)([(0,property.Cb)(commonProperties.HQ)],N.prototype,"url",null),(0,tslib_es6._)([(0,writer.c)("url")],N.prototype,"writeUrl",null),(0,tslib_es6._)([(0,property.Cb)()],N.prototype,"parsedUrl",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],N.prototype,"store",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],N.prototype,"rootNode",void 0),N=(0,tslib_es6._)([(0,subclass.j)(R)],N),N},E=-1e38;var U,e;(e=U||(U={}))[e.existingItem=0]="existingItem",e[e.newItem=1]="newItem";const T="Scene Service",O={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}};var K;!function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(K||(K={}))},"./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>r});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js");async function r(r,n,t,s,a,i){let l=null;if(null!=t){const o=`${r}/nodepages/`,n=o+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:"page",rootPage:(await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.default)(n,{query:{f:"json",token:s},responseType:"json",signal:i})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:o}}catch(c){null!=a&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",n,c),l=c}}if(!n)return null;const d=`${r}/nodes/`,p=d+(n&&n.split("/").pop());try{return{type:"node",rootNode:(await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.default)(p,{query:{f:"json",token:s},responseType:"json",signal:i})).data,urlPrefix:d}}catch(c){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__.Z("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:c,url:p})}}},"./node_modules/@arcgis/core/portal/support/resourceExtension.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>t});var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");function t(i){return o[function p(i){return i instanceof Blob?i.type:function n(t){const p=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ml)(t);return g[p]||a}(i.url)}(i)]||e}const o={},a="text/plain",e=o[a],g={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in g)o[g[c]]=c},"./node_modules/@arcgis/core/portal/support/resourceUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W7:()=>m,addOrUpdateResource:()=>o,fetchResources:()=>s,removeAllResources:()=>u,removeResource:()=>n});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");async function s(e,t={},a){await e.load(a);const s=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.v_)(e.itemUrl,"resources"),{start:o=1,num:n=10,sortOrder:u="asc",sortField:l="created"}=t,c={query:{start:o,num:n,sortOrder:u,sortField:l,token:e.apiKey},signal:a?.signal},i=await e.portal.request(s,c);return{total:i.total,nextStart:i.nextStart,resources:i.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function o(e,a,s,o){if(!e.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__.Z(`portal-item-resource-${a}:invalid-path`,"Resource does not have a valid path");const n=e.portalItem;await n.load(o);const u=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.v_)(n.userItemUrl,"add"===a?"addResources":"updateResources"),[c,i]=l(e.path),d=await async function p(t){return t instanceof Blob?t:(await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.default)(t.url,{responseType:"blob"})).data}(s),m=new FormData;return c&&"."!==c&&m.append("resourcesPrefix",c),null!=o&&o.compress&&m.append("compress","true"),m.append("fileName",i),m.append("file",d,i),m.append("f","json"),null!=o&&o.access&&m.append("access",o.access),await n.portal.request(u,{method:"post",body:m,signal:o?.signal}),e}async function n(e,a,s){if(!a.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(s);const o=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.v_)(e.userItemUrl,"removeResources");await e.portal.request(o,{method:"post",query:{resource:a.path},signal:s?.signal}),a.portalItem=null}async function u(e,t){await e.load(t);const a=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.v_)(e.userItemUrl,"removeResources");return e.portal.request(a,{method:"post",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function c(e){const[t,r]=function i(e){const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.Ml)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[a,s]=l(t);return[a,s,r]}function m(e,t){if(!e.hasPath())return null;const[a,,s]=c(e.path);return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.v_)(a,t+s))}}}]);