"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[6479],{"./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>persistable_g});var multiOriginJSONSupportUtils=__webpack_require__("./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js"),metadata=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/metadata.js"),PropertyOrigin=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/PropertyOrigin.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");function resourceExtension_t(i){return o[function p(i){return i instanceof Blob?i.type:function n(t){const p=(0,urlUtils.Ml)(t);return g[p]||a}(i.url)}(i)]||e}const o={},a="text/plain",e=o[a],g={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in g)o[g[c]]=c;var persistableUrlUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");function persistable_g(t){const r=t?.origins??[void 0];return(e,o)=>{const s=function h(t,r,e){if("resource"===t?.type)return function v(o,s,n){const p=(0,metadata.VZ)(s,n);return{type:String,read:(t,r,e)=>{const o=(0,persistableUrlUtils.r)(t,r,e);return p.type===String?o:"function"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,i,u,c){if(!c||!c.resources)return"string"==typeof s?void(i[u]=(0,persistableUrlUtils.t)(s,c)):void(i[u]=s.write({},c));const y=function x(t){return null==t?null:"string"==typeof t?t:t.url}(s),d=(0,persistableUrlUtils.t)(y,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},persistableUrlUtils.M.NO),g=p.type!==String&&(!(0,multiOriginJSONSupportUtils.l)(this)||c&&c.origin&&this.originIdOf(n)>(0,PropertyOrigin.M9)(c.origin)),h={object:this,propertyName:n,value:s,targetUrl:d,dest:i,targetPropertyName:u,context:c,params:o};c&&c.portalItem&&d&&!(0,urlUtils.YP)(d)?g?function w(t){const{context:r,targetUrl:e,params:o,value:n,dest:i,targetPropertyName:a}=t;if(!r.portalItem)return;const p=r.portalItem.resourceFromPath(e),c=N(n,e,r),l=resourceExtension_t(c),m=(0,urlUtils.Ml)(p.path),f=o?.compress??!1;l===m?(r.resources&&I({...t,resource:p,content:c,compress:f,updates:r.resources.toUpdate}),i[a]=e):U(t)}(h):function j({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}(h):c&&c.portalItem&&(null==d||null!=(0,persistableUrlUtils.i)(d)||(0,urlUtils.jc)(d)||g)?U(h):i[u]=d}}}}(t,r,e);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:r}=persistableUrlUtils.a;return{read:t,write:r}}}}(t,e,o);for(const t of r){const r=(0,property.CJ)(e,t,o);for(const t in s)r[t]=s[t]}}}function U(t){const{targetUrl:r,params:s,value:i,context:a,dest:p,targetPropertyName:c}=t;if(!a.portalItem)return;const l=(0,persistableUrlUtils.p)(r),m=l?.filename??(0,uuid.D)(),f=s?.prefix??l?.prefix,d=N(i,r,a),g=(0,urlUtils.v_)(f,m),h=`${g}.${resourceExtension_t(d)}`,v=a.portalItem.resourceFromPath(h);(0,urlUtils.jc)(r)&&a.resources&&a.resources.pendingOperations.push(async function P(t){const r=(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/request.js"))).default,{data:e}=await r(t,{responseType:"blob"});return e}(r).then((t=>{v.path=`${g}.${resourceExtension_t(t)}`,p[c]=v.itemRelativeUrl})).catch((()=>{})));const U=s?.compress??!1;a.resources&&I({...t,resource:v,content:d,compress:U,updates:a.resources.toAdd}),p[c]=v.itemRelativeUrl}function I({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{!function O(t,r,e){"string"==typeof t[r]?t[r]=e.url:t[r].url=e.url}(t,r,e)}})}function N(t,r,e){return"string"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:"application/json"})}},"./node_modules/@arcgis/core/layers/IntegratedMeshLayer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>A});var m,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),MultiOriginJSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),reader=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),persistable=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),APIKeyMixin=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js"),ArcGISService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ArcGISService.js"),OperationalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js"),PortalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/PortalLayer.js"),ScaleRangeLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js"),SceneService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/SceneService.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),I3SLayerDefinitions=__webpack_require__("./node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),lang=(__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),Warning=__webpack_require__("./node_modules/@arcgis/core/core/Warning.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");let y=m=class extends JSONSupport.wq{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,o,s){if(s.layer&&s.layer.spatialReference&&!s.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,projection.Up)(e.spatialReference,s.layer.spatialReference))return void(s&&s.messages&&s.messages.push(new Warning.Z("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:s.layer.spatialReference,context:s})));const p=new Polygon.Z;(0,projection.Wt)(e,p,s.layer.spatialReference),r[o]=p.toJSON(s)}else r[o]=e.toJSON(s);delete r[o].spatialReference}clone(){return new m({geometry:(0,lang.d9)(this.geometry),type:this.type})}};(0,tslib_es6._)([(0,property.Cb)({type:Polygon.Z}),(0,persistable.B)()],y.prototype,"geometry",void 0),(0,tslib_es6._)([(0,writer.c)(["web-scene","portal-item"],"geometry")],y.prototype,"writeGeometry",null),(0,tslib_es6._)([(0,property.Cb)({type:["clip","mask","replace"],nonNullable:!0}),(0,persistable.B)()],y.prototype,"type",void 0),y=m=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.SceneModification")],y);const f=y;var a;let n=a=class extends((0,JSONSupport.eC)(Collection.Z.ofType(f))){constructor(r){super(r),this.url=null}clone(){return new a({url:this.url,items:this.items.map((r=>r.clone()))})}toJSON(r){return this.toArray().map((o=>o.toJSON(r))).filter((r=>!!r.geometry))}static fromJSON(r,o){const t=new a;for(const e of r)t.add(f.fromJSON(e,o));return t}static async fromUrl(r,t,e){const c={url:(0,urlUtils.mN)(r),origin:"service"},p=await(0,request.default)(r,{responseType:"json",signal:(0,maybe.U2)(e,"signal")}),n=t.toJSON(),l=[];for(const o of p.data)l.push(f.fromJSON({...o,geometry:{...o.geometry,spatialReference:n}},c));return new a({url:r,items:l})}};(0,tslib_es6._)([(0,property.Cb)({type:String})],n.prototype,"url",void 0),n=a=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.SceneModifications")],n);const l=n;var persistableUrlUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");let b=class extends((0,SceneService.Vt)((0,ArcGISService.Y)((0,OperationalLayer.q)((0,PortalLayer.I)((0,ScaleRangeLayer.M)((0,MultiOriginJSONSupport.R)((0,APIKeyMixin.V)(Layer.Z)))))))){constructor(...e){super(...e),this._handles=new Handles.Z,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this._handles.destroy()}initialize(){this._handles.add((0,reactiveUtils.on)((()=>this.modifications),"after-changes",(()=>this.modifications=this.modifications),reactiveUtils.Z_))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,r){this._modificationsSource={url:(0,persistableUrlUtils.f)(e,r),context:r}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=(0,maybe.U2)(e,"signal");try{await this.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(r){(0,promiseUtils.r9)(r)}if(await this._fetchService(t),(0,maybe.pC)(this._modificationsSource)){const t=await l.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._fetchIndexAndUpdateExtent(this.nodePages,t)}beforeSave(){if(!(0,maybe.Wi)(this._modificationsSource))return this.load().then((()=>{}),(()=>{}))}async saveAs(e,t){return this._debouncedSaveOperations(SceneService.xp.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return this._debouncedSaveOperations(SceneService.xp.SAVE,e)}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new Error.Z("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new Error.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new Error.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};(0,tslib_es6._)([(0,property.Cb)({type:String,readOnly:!0})],b.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["show","hide"]})],b.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["IntegratedMeshLayer"]})],b.prototype,"operationalLayerType",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{read:!1},readOnly:!0})],b.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({type:I3SLayerDefinitions.U4,readOnly:!0})],b.prototype,"nodePages",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[I3SLayerDefinitions.QI],readOnly:!0})],b.prototype,"materialDefinitions",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[I3SLayerDefinitions.Yh],readOnly:!0})],b.prototype,"textureSetDefinitions",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[I3SLayerDefinitions.H3],readOnly:!0})],b.prototype,"geometryDefinitions",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],b.prototype,"serviceUpdateTimeStamp",void 0),(0,tslib_es6._)([(0,property.Cb)({type:l}),(0,persistable.B)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],b.prototype,"modifications",void 0),(0,tslib_es6._)([(0,reader.r)(["web-scene","portal-item"],"modifications")],b.prototype,"readModifications",null),(0,tslib_es6._)([(0,property.Cb)(commonProperties.PV)],b.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],b.prototype,"path",void 0),b=(0,tslib_es6._)([(0,subclass.j)("esri.layers.IntegratedMeshLayer")],b);const A=b}}]);