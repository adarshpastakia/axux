"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[1255],{"./node_modules/@arcgis/core/arcade/functions/centroid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AW:()=>e,Ay:()=>u,B9:()=>M,Es:()=>d,RI:()=>p,_R:()=>s,nB:()=>Z,s9:()=>l,ws:()=>P});var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),_geometry_support_intersectsBase_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/intersectsBase.js");function e(t,n,e){return Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2+(void 0!==t[2]&&void 0!==n[2]?(t[2]*e-n[2]*e)**2:0))}const r=[];for(const v of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const t=v[0];for(let n=1;n<v.length;n++)r[v[n]]=t}const o=[];function s(t){return t.vcsWkid&&void 0!==r[t.vcsWkid]?o[r[t.vcsWkid]]:t.latestVcsWkid&&void 0!==r[t.latestVcsWkid]?o[r[t.latestVcsWkid]]:1}function c(t,n,e){const r={x:0,y:0};n&&(r.z=0),e&&(r.m=0);let o=0,s=t[0];for(let c=0;c<t.length;c++){const a=t[c];if(!1===f(a,s)){const t=h(s,a,n),c=i(s,a,n,e);c.x*=t,c.y*=t,r.x+=c.x,r.y+=c.y,n&&(c.z*=t,r.z+=c.z),e&&(c.m*=t,r.m+=c.m),o+=t,s=a}}return o>0?(r.x/=o,r.y/=o,n&&(r.z/=o),e&&(r.m/=o)):(r.x=t[0][0],r.y=t[0][1],n&&(r.z=t[0][2]),e&&n?r.m=t[0][3]:e&&(r.m=t[0][2])),r}function i(t,n,e,r){const o={x:(t[0]+n[0])/2,y:(t[1]+n[1])/2};return e&&(o.z=(t[2]+n[2])/2),e&&r?o.m=(t[3]+n[3])/2:r&&(o.m=(t[2]+n[2])/2),o}function a(t,n){if(t.length<=1)return 0;let e=0;for(let r=1;r<t.length;r++)e+=h(t[r-1],t[r],n);return e}function h(t,n,e){const r=n[0]-t[0],o=n[1]-t[1];if(e){const t=n[2]-n[2];return Math.sqrt(r*r+o*o+t*t)}return Math.sqrt(r*r+o*o)}function f(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function l(n){const e={x:0,y:0,spatialReference:n.spatialReference.toJSON()},r={x:0,y:0,spatialReference:n.spatialReference.toJSON()};let o=0,s=0;for(let t=0;t<n.paths.length;t++){if(0===n.paths[t].length)continue;const i=a(n.paths[t],!0===n.hasZ);if(0===i){const r=c(n.paths[t],!0===n.hasZ,!0===n.hasM);e.x+=r.x,e.y+=r.y,!0===n.hasZ&&(e.z+=r.z),!0===n.hasM&&(e.m+=r.m),++o}else{const e=c(n.paths[t],!0===n.hasZ,!0===n.hasM);r.x+=e.x*i,r.y+=e.y*i,!0===n.hasZ&&(r.z+=e.z*i),!0===n.hasM&&(r.m+=e.m*i),s+=i}}return s>0?(r.x/=s,r.y/=s,!0===n.hasZ&&(r.z/=s),!0===n.hasM&&(r.m/=s),new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__.Z(r)):o>0?(e.x/=o,e.y/=o,!0===n.hasZ&&(r.z/=o),!0===n.hasM&&(e.m/=o),new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__.Z(e)):null}function u(n){if(0===n.points.length)return null;let e=0,r=0,o=0,s=0;for(let t=0;t<n.points.length;t++){const c=n.getPoint(t);!0===c.hasZ&&(o+=c.z),!0===c.hasM&&(s+=c.m),e+=c.x,r+=c.y,s+=c.m}const c={x:e/n.points.length,y:r/n.points.length,spatialReference:null};return c.spatialReference=n.spatialReference.toJSON(),!0===n.hasZ&&(c.z=o/n.points.length),!0===n.hasM&&(c.m=s/n.points.length),new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__.Z(c)}function m(t,n,e=0){for(;t<e;)t+=n;const r=e+n;for(;t>=r;)t-=n;return t}function g(t,n){return Math.atan2(n.y-t.y,n.x-t.x)}function p(t,n){return m(g(t,n),2*Math.PI)*(180/Math.PI)}function M(t,n){return m(Math.PI/2-g(t,n),2*Math.PI)*(180/Math.PI)}function z(t,n,e){const r={x:t.x-n.x,y:t.y-n.y},o={x:e.x-n.x,y:e.y-n.y};return Math.atan2(function x(t,n){return t.x*n.y-n.x*t.y}(r,o),function y(t,n){return t.x*n.x+t.y*n.y}(r,o))}function P(t,n,e){return m(z(t,n,e),2*Math.PI)*(180/Math.PI)}function d(t,n,e){return m(-1*z(t,n,e),2*Math.PI)*(180/Math.PI)}o[9002]=.3048,o[9003]=.3048006096012192,o[9095]=.3048007491;const I=[0,0];function Z(t){for(let e=0;e<t.length;e++){const r=t[e];for(let s=0;s<r.length-1;s++){const o=r[s],c=r[s+1];for(let r=e+1;r<t.length;r++)for(let e=0;e<t[r].length-1;e++){const s=t[r][e],i=t[r][e+1];if((0,_geometry_support_intersectsBase_js__WEBPACK_IMPORTED_MODULE_1__.UT)(o,c,s,i,I)&&!(I[0]===o[0]&&I[1]===o[1]||I[0]===s[0]&&I[1]===s[1]||I[0]===c[0]&&I[1]===c[1]||I[0]===i[0]&&I[1]===i[1]))return!0}}const o=r.length;if(!(o<3))for(let t=0;t<=o-2;t++){const e=r[t],s=r[t+1];for(let c=t+2;c<=o-2;c++){const t=r[c],o=r[c+1];if((0,_geometry_support_intersectsBase_js__WEBPACK_IMPORTED_MODULE_1__.UT)(e,s,t,o,I)&&!(I[0]===e[0]&&I[1]===e[1]||I[0]===t[0]&&I[1]===t[1]||I[0]===s[0]&&I[1]===s[1]||I[0]===o[0]&&I[1]===o[1]))return!0}}}return!1}},"./node_modules/@arcgis/core/core/analysisThemeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{RN:()=>u,e9:()=>i,hU:()=>s,uu:()=>a});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_config_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/config.js"),_views_support_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/support/colorUtils.js");function t(o){return(0,_views_support_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__.EX)(o,{ignoreAlpha:!0})>225?new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z([0,0,0,o.a]):new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z([255,255,255,o.a])}function e(o,r){const t=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z(o);return t.a*=r,t}function i(n=1){return e(_config_js__WEBPACK_IMPORTED_MODULE_1__.default.analysisTheme.accentColor,n)}function u(n=1){return t(i(n))}function a(n=1){return e(_config_js__WEBPACK_IMPORTED_MODULE_1__.default.analysisTheme.textColor,n)}function s(n=1){return t(a(n))}},"./node_modules/@arcgis/core/views/draw/DrawGraphicTool.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T2:()=>E,IJ:()=>H});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),HandleOwner=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),handleUtils=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),quantityUtils=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),unitUtils=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),arrayUtils=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js")),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),GraphicsLayer=__webpack_require__("./node_modules/@arcgis/core/layers/GraphicsLayer.js"),elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),lang=(__webpack_require__("./node_modules/@arcgis/core/geometry.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),Circle=__webpack_require__("./node_modules/@arcgis/core/geometry/Circle.js"),geometryEngine=__webpack_require__("./node_modules/@arcgis/core/geometry/geometryEngine.js"),coordsUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),mat2d=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2d.js"),mat2df64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2df64.js"),quat=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),quatf64=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),Axis=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Axis.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");function w(t,r,e=null){return null!=e?[t,r,e]:[t,r]}function g(t,r,e=null){return null!=e?{x:t,y:r,z:e}:{x:t,y:r}}class R{constructor(t){this.spatialReference=t}mapToLocalMultiple(r){return r.map((t=>this.mapToLocal(t))).filter(arrayUtils.pC)}get doUnnormalization(){return!1}}class W extends R{constructor(t,a,o=null){super(a),this._defaultZ=o,this.transform=(0,mat2df64.c)(),this.transformInv=(0,mat2df64.c)(),this.transform=(0,mat2df64.a)(t),(0,mat2d.i)(this.transformInv,this.transform)}makeMapPoint(t,r){return w(t,r,this._defaultZ)}mapToLocal(t){return g(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return w(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class v extends R{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=(0,vec3f64.c)(),this.tangentFrameUpWS=(0,vec3f64.c)(),this.tangentFrameRightWS=(0,vec3f64.c)(),this.tangentFrameForwardWS=(0,vec3f64.c)(),this.localFrameRightWS=(0,vec3f64.c)(),this.localFrameUpWS=(0,vec3f64.c)(),this.worldToLocalTransform=(0,quatf64.a)(),this.localToWorldTransform=(0,quatf64.a)(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis.R.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis.R.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Axis.R.Z,this.tangentFrameForwardWS);const s=(0,vec3f64.c)();(0,vec3.g)(s,this.tangentFrameForwardWS,(0,vec3.e)(e,this.tangentFrameForwardWS)),(0,vec3.b)(this.localFrameRightWS,e,s),(0,vec3.n)(this.localFrameRightWS,this.localFrameRightWS),(0,vec3.f)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,quat.r)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,quat.i)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,r){return w(t,r,this.defaultZ)}mapToLocal(t){const r=(0,vec3f64.c)();this.view.renderCoordsHelper.toRenderCoords(new Point.Z({x:t[0],y:t[1],spatialReference:this.spatialReference}),r),(0,vec3.q)(r,r,this.worldToLocalTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,this.view.spatialReference);return null!=e?g(e.x/this.scale,e.y/this.scale):null}localToMap(t){const r=(0,vec3f64.c)();this.view.renderCoordsHelper.toRenderCoords(new Point.Z({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),r),(0,vec3.q)(r,r,this.localToWorldTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,this.view.spatialReference);return null!=e?w(e.x,e.y,this.defaultZ):null}}function F(t,r){if("2d"===t.type)return new W(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new Point.Z({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new Point.Z({x:r[0],y:r[1],spatialReference:t.spatialReference});return new v(t,e)}return null}var Multipoint=__webpack_require__("./node_modules/@arcgis/core/geometry/Multipoint.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");function createUtils_g(t,e){const o=new Point.Z({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(o.z=t[2]),o}function createUtils_R(t,e,o){const n=new Polyline.Z({paths:t,spatialReference:e});return o&&(0,coordsUtils.nc)(n),n}function j(e,n,r,a=!0){const l=(0,lang.d9)(e);l.forEach((e=>{const o=e[0],n=e[e.length-1];(0,arrayUtils.fS)(o,n)&&1!==e.length||e.push(e[0])}));let i=new Polygon.Z({rings:l,spatialReference:n});return i.rings.forEach((t=>{(0,coordsUtils.bu)(t,!1,!1)||t.reverse()})),r&&(0,coordsUtils.nc)(i),a&&i.isSelfIntersecting&&(0,spatialReferenceUtils.JY)(n)&&(i=(0,geometryEngine.simplify)(i)),i}function T(t,o,n){const r=o.mapToLocalMultiple(t),a=[],l={x:r[0].x,y:r[0].y},s_x=r[1].x,s_y=r[1].y,i=Math.round(s_x-l.x),c=Math.round(s_y-l.y),y=Math.max(Math.abs(i),Math.abs(c));if(n){const t={x:l.x+y,y:l.y+y},e={x:l.x-y,y:l.y-y};a.push(g(t.x,e.y),g(e.x,e.y),g(e.x,t.y),g(t.x,t.y))}else{const t={x:i>0?l.x+y:l.x-y,y:c>0?l.y+y:l.y-y};a.push(g(l.x,l.y),g(t.x,l.y),g(t.x,t.y),g(l.x,t.y))}return U(j([a.map((t=>o.localToMap(t))).filter(arrayUtils.pC)],o.spatialReference,o.doUnnormalization,!0),a,o)}function U(t,e,o){const n=P(e[3],e[2],o),r=P(e[1],e[2],o),a=P(e[0],e[1],o),l=P(e[0],e[3],o);return{geometry:t,midpoints:null!=n&&null!=r&&null!=a&&null!=l?{top:n,right:r,bottom:a,left:l}:null}}function P(t,e,o){createUtils_w[0]=t.x,createUtils_w[1]=t.y,createUtils_w[2]=0,I[0]=e.x,I[1]=e.y,I[2]=0,(0,vec3.h)(createUtils_w,createUtils_w,I,.5),z.x=createUtils_w[0],z.y=I[1],z.z=I[2];const n=o.localToMap(z);return null!=n?createUtils_g(n,o.spatialReference):null}const z=g(0,0,0),createUtils_w=(0,vec3f64.c)(),I=(0,vec3f64.c)();function L(t,e,o,r){const a=e.mapToLocalMultiple(t);let s=null,c=null;if(o)s=a[0],c=a[1];else{const t=a[0],e=a[1],o=Math.round(e.x-t.x),n=Math.round(e.y-t.y),r=Math.max(Math.abs(o),Math.abs(n));s=g(o>0?t.x+r/2:t.x-r/2,n>0?t.y+r/2:t.y-r/2),c=g(Math.abs(o)>Math.abs(n)?s.x-r/2:s.x,Math.abs(o)>Math.abs(n)?s.y:s.y-r/2)}const y=e.localToMap(s),f=e.localToMap(c);if(null==y||null==f)return null;e.doUnnormalization&&(0,coordsUtils.Sq)([[y,f]],e.spatialReference);const x=createUtils_g(y,e.spatialReference),h=createUtils_g(f,e.spatialReference),M=(0,unitUtils.c9)(e.spatialReference);let d=0;if((0,spatialReferenceUtils.JY)(e.spatialReference))d=M*(0,geometryEngine.distance)(x,h,null);else{const t=s.x-c.x,e=s.y-c.y;d=M*Math.sqrt(t*t+e*e)*(r||1)}const R=new Circle.Z({center:x,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:j(R.rings,R.spatialReference,!1),center:x,edge:h}}var centroid=__webpack_require__("./node_modules/@arcgis/core/arcade/functions/centroid.js");function r(e,t,n){switch(e){case"point":case"multipoint":return"point";case"polyline":return(null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex";case"polygon":{const e=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return e<3?"polylineZeroVertices":e<4?"polygonOneVertex":"polygonTwoVertices"}case"mesh":return function s(o,r){if("mesh"!==o?.type||"3d"!==r?.type)return;const{renderCoordsHelper:s}=r,{camera:p}=r.state,{width:a,height:h,zmin:m,zmax:u,center:y,spatialReference:f}=o.extent,g=(u??0)-(m??0),d=(0,unitUtils.c9)(f),x=(0,centroid._R)(f),V=(0,unitUtils.c9)(s.spatialReference),j=Math.max(a*d,h*d,g*x)/V;(0,vec3.s)(l,y.x,y.y,y.z??0),s.toRenderCoords(l,f,l);const w=j/p.computeScreenPixelSizeAt(l);return w>p.width*c?"meshTooClose":w<i?"meshTooFar":"mesh"}(t,n);default:return}}const i=20,c=1,l=(0,vec3f64.c)();var InteractiveToolBase=__webpack_require__("./node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js"),SketchLabelOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchLabelOptions.js"),SketchTooltipOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchTooltipOptions.js"),SketchTooltipInfo=__webpack_require__("./node_modules/@arcgis/core/views/interactive/tooltip/SketchTooltipInfo.js");let DrawTooltipInfos_s=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-point"}};(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_s.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_s.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_s.prototype,"viewType",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_s.prototype,"helpMessage",void 0),DrawTooltipInfos_s=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],DrawTooltipInfos_s);let a=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-polyline",this.totalLength=quantityUtils.yP}};(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"viewType",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"helpMessage",void 0),a=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],a);let DrawTooltipInfos_l=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-polygon",this.area=quantityUtils.MQ}};(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_l.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_l.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_l.prototype,"area",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_l.prototype,"viewType",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_l.prototype,"helpMessage",void 0),DrawTooltipInfos_l=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],DrawTooltipInfos_l);let y=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-mesh"}};(0,tslib_es6._)([(0,property.Cb)()],y.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],y.prototype,"elevation",void 0),(0,tslib_es6._)([(0,property.Cb)()],y.prototype,"viewType",void 0),(0,tslib_es6._)([(0,property.Cb)()],y.prototype,"helpMessage",void 0),y=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawMeshTooltipInfo")],y);let DrawTooltipInfos_v=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-rectangle",this.xSize=quantityUtils.yP,this.ySize=quantityUtils.yP,this.area=quantityUtils.MQ}};(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_v.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_v.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_v.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property.Cb)()],DrawTooltipInfos_v.prototype,"area",void 0),DrawTooltipInfos_v=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],DrawTooltipInfos_v);let n=class extends SketchTooltipInfo.h{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=quantityUtils.MQ}};(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"radius",void 0),(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"area",void 0),n=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],n);var Tooltip=__webpack_require__("./node_modules/@arcgis/core/views/interactive/tooltip/Tooltip.js"),automaticAreaMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/automaticAreaMeasurementUtils.js"),automaticLengthMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/automaticLengthMeasurementUtils.js");class D{constructor(){this.regularVertices=null,this.activeVertex=null,this.full=null,this.outline=null,this.circle=null,this.rectangle=null}}let E=class extends((0,HandleOwner.p)(Evented.Z.EventedMixin(InteractiveToolBase.m))){constructor(e){super(e),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new SketchLabelOptions.Z,this.geometryToPlace=null,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new SketchTooltipOptions.Z}initialize(){this.internalGraphicsLayer=new GraphicsLayer.Z({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e))),(0,reactiveUtils.YP)((()=>this.tooltipOptions.enabled),(e=>{this.tooltip=e?new Tooltip.u({view:this.view,info:this._tooltipInfo}):(0,maybe.SC)(this.tooltip)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this._tooltipInfo),(e=>{null!=this.tooltip&&(this.tooltip.info=e)}),reactiveUtils.tX)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,maybe.SC)(this.drawOperation),this.tooltip=(0,maybe.SC)(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,maybe.SC)(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){return(0,quantityUtils.yG)(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),null!=this._graphic&&(this._graphic.symbol=e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_destroyAllVisualisations(){this.handles.remove(Z.outline),this.handles.remove(Z.regularVertices),this.handles.remove(Z.activeVertex),this.handles.remove(DrawGraphicTool_L)}_createOrUpdateGraphic(e){if(null!=this._graphic)return this._updateGraphicGeometry(this._graphic,e),this._graphic;const i=this._graphic=new Graphic.Z({...this.graphicProperties,symbol:this.graphicSymbol});return this._updateGraphicGeometry(i,e),this.internalGraphicsLayer.add(i),this.handles.add(this.initializeGraphic(i)),this.notifyChange("graphic"),this.handles.add((0,handleUtils.kB)((()=>{this.internalGraphicsLayer.remove(i),(0,maybe.SC)(i),this._graphic===i&&(this._graphic=null)})),DrawGraphicTool_L),i}_updateGraphicGeometry(e,t){e.geometry=t}_getCreateOperationGeometry(e={operationComplete:!1}){const{drawOperation:t}=this;if(null==t||0===t.numVertices)return null;const{coordinateHelper:i,view:o}=t,r=t.stagedVertex,l=t.committedVertices,n=l.slice(),a=null!=r;a&&n.push(i.pointToArray(r));const s=a?i.pointToArray(r):l.splice(-1)[0],p=n.length,c=o.spatialReference,h="3d"===o.type&&"global"===o.viewingMode,u=new D;switch(this.geometryType){case"point":case"mesh":u.regularVertices=l,u.activeVertex=s,u.full=i.arrayToPoint(n[0]);break;case"multipoint":u.regularVertices=l,u.activeVertex=s,p>0&&(u.full=function d(t,e){return new Multipoint.Z({points:t,spatialReference:e})}(n,c));break;case"polyline":u.regularVertices=l,u.activeVertex=s,p>0&&(u.full=createUtils_R([n],c,h));break;case"polygon":u.regularVertices=l,u.activeVertex=s,p>0&&(u.full=j([n],c,h,!0));break;case"circle":if(p>0){const t=F(o,n[0]);if(1===p&&e.operationComplete){const e=n[0],i=t.makeMapPoint(e[0]+N*o.resolution,e[1]);u.circle=L([e,i],t,!0),u.full=null!=u.circle?u.circle.geometry:null}else 2===p&&(this.forceUniformSize?(u.circle=L(n,t,this.centered),u.full=null!=u.circle?u.circle.geometry:null):(u.rectangle=function createUtils_v(t,o,n){const r=o.mapToLocalMultiple(t),a=r[0],l=r[1],s=Math.round(l.x-a.x),i=Math.round(l.y-a.y),c=g(n?a.x:a.x+s/2,n?a.y:a.y+i/2),y=n?s:s/2,p=n?i:i/2,f=[],x=2*Math.PI/60;function h(t){const e=Math.cos(t),o=Math.sin(t);return g(y*e+c.x,p*o+c.y)}for(let e=0;e<60;e++)f.push(h(e*x));f.push(f[0]);const{spatialReference:M,doUnnormalization:d}=o,R=j([f.map((t=>o.localToMap(t))).filter(arrayUtils.pC)],M,d,!1),T=o.localToMap(h(Math.PI/2)),b=o.localToMap(h(0)),U=o.localToMap(h(-Math.PI/2)),P=o.localToMap(h(Math.PI));return{geometry:R,midpoints:null!=T&&null!=b&&null!=U&&null!=P?{top:createUtils_g(T,M),right:createUtils_g(b,M),bottom:createUtils_g(U,M),left:createUtils_g(P,M)}:null}}(n,t,this.centered),u.full=u.rectangle.geometry))}break;case"rectangle":if(p>0){const t=F(o,n[0]);if(1===p&&e.operationComplete){const e=n[0],i=t.makeMapPoint(e[0]+N*o.resolution,e[1]);u.rectangle=T([e,i],t,!0),u.full=u.rectangle.geometry}else 2===p&&(u.rectangle=this.forceUniformSize?T(n,t,this.centered):function b(t,o,n){let r=o.mapToLocalMultiple(t);if(1===r.length){const t=48,e=r[0];r=[g(e.x-t,e.y+t),g(e.x+t,e.y-t),g(e.x+t,e.y-t),g(e.x-t,e.y+t)]}const a=[],l={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y};if(n){const t=Math.round(s.x-l.x),e=Math.round(s.y-l.y);a.push(g(l.x-t,l.y-e),g(s.x,l.y-e),g(s.x,s.y),g(l.x-t,s.y))}else a.push(g(l.x,l.y),g(s.x,l.y),g(s.x,s.y),g(l.x,s.y));return U(j([a.map((t=>o.localToMap(t))).filter(arrayUtils.pC)],o.spatialReference,o.doUnnormalization,!0),a,o)}(n,t,this.centered),u.full=u.rectangle.geometry)}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":u.outline=p>1?createUtils_R([n],c,h):null;break;case"polygon":u.outline=p>1?j([n],c,h):null;break;case"circle":case"rectangle":u.outline="polygon"===u.full?.type?j(u.full.rings,c,h):null}return u}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});null!=e&&(t=this._createOrUpdateGraphic(e.full).clone())}this._createOperationGeometry=null,this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e)}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();this._createOperationGeometry=e,null!=e?(null!=e.outline?this.handles.add(this.onOutlineChanged(e.outline),Z.outline):this.handles.remove(Z.outline),null!=e.regularVertices?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),Z.regularVertices):this.handles.remove(Z.regularVertices),null!=e.activeVertex?this.handles.add(this.onActiveVertexChanged(e.activeVertex),Z.activeVertex):this.handles.remove(Z.activeVertex),null!=e.full?this._createOrUpdateGraphic(e.full):this.handles.remove(DrawGraphicTool_L)):this._destroyAllVisualisations()}get _tooltipInfo(){const{drawOperation:e}=this;if(!e)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;case"mesh":return this._drawMeshTooltipInfo;default:return null}}get _drawPointTooltipInfo(){const{view:e,graphic:t}=this,i=t?.geometry;return"point"!==i?.type||"2d"===e.type&&0===this.defaultZ?null:new DrawTooltipInfos_s({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:e.type,helpMessage:r("point",i,e)})}get _drawPolylineTooltipInfo(){const e=this._createOperationGeometry,t=null!=e?e.full:null;if("polyline"!==t?.type)return null;const i=(0,automaticLengthMeasurementUtils.Ul)(t,this._elevationMode),{view:o}=this;return new a({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:i??quantityUtils.yP,viewType:o.type,helpMessage:r("polyline",t,o)})}get _drawPolygonTooltipInfo(){const e=this._createOperationGeometry,t=null!=e?e.full:null;if("polygon"!==t?.type)return null;const i=(0,automaticAreaMeasurementUtils.k)(t,this._elevationMode),{view:o}=this;return new DrawTooltipInfos_l({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:i??quantityUtils.MQ,viewType:o.type,helpMessage:r("polygon",t,o)})}get _drawMeshTooltipInfo(){const{view:e,graphic:t}=this,i=t?.geometry;return"mesh"!==i?.type||"2d"===e.type&&0===this.defaultZ?null:new y({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:e.type,helpMessage:r("mesh",i,e)})}get _drawRectangleTooltipInfo(){return null==this.drawOperation?null:new DrawTooltipInfos_v({tooltipOptions:this.tooltipOptions,xSize:this._xSize??quantityUtils.yP,ySize:this._ySize??quantityUtils.yP,area:this._fullGeometryArea??quantityUtils.MQ})}get _drawCircleTooltipInfo(){if(null==this.drawOperation)return null;const e=this.forceUniformSize;return new n({tooltipOptions:this.tooltipOptions,radius:e?this._circleRadius??quantityUtils.yP:null,xSize:e?null:this._xSize??quantityUtils.yP,ySize:e?null:this._ySize??quantityUtils.yP,area:this._fullGeometryArea??quantityUtils.MQ})}get _circleRadius(){const e=this._createOperationGeometry;return null!=e&&null!=e.circle&&null!=e.circle.center&&null!=e.circle.edge?(0,automaticLengthMeasurementUtils.GQ)(e.circle.center,e.circle.edge,this._elevationMode):null}get _xSize(){const e=this._createOperationGeometry;if(null==e?.rectangle)return null;const{midpoints:t}=e.rectangle;return null!=t?(0,automaticLengthMeasurementUtils.GQ)(t.left,t.right,this._elevationMode):null}get _ySize(){const e=this._createOperationGeometry;if(null==e?.rectangle)return null;const{midpoints:t}=e.rectangle;return null!=t?(0,automaticLengthMeasurementUtils.GQ)(t.top,t.bottom,this._elevationMode):null}get _fullGeometryArea(){const e=this._createOperationGeometry,t=null!=e?e.full:null;return"polygon"!==t?.type?null:(0,automaticAreaMeasurementUtils.k)(t,this._elevationMode)}get _elevationTooltipDetail(){return{mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}get _vertexTooltipElevation(){const{tooltipOptions:e,view:t,drawOperation:i}=this;if(null==i)return this._defaultElevation;const o=i.stagedVertex??i.lastVertex;if(null==o||"2d"===t.type)return this._defaultElevation;const r={mode:e.elevation.mode,offset:0},l=((0,elevationInfoUtils.vQ)(t,o,i.elevationInfo,r)??0)*(0,unitUtils._R)(o.spatialReference);return(0,quantityUtils.yG)(l,"meters")}get _elevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}};(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_createOperationGeometry",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_defaultElevation",null),(0,tslib_es6._)([(0,property.Cb)({value:!0})],E.prototype,"centered",null),(0,tslib_es6._)([(0,property.Cb)({nonNullable:!0})],E.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"drawOperation",void 0),(0,tslib_es6._)([(0,property.Cb)({value:!0})],E.prototype,"enabled",null),(0,tslib_es6._)([(0,property.Cb)({value:!0})],E.prototype,"forceUniformSize",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],E.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"graphic",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],E.prototype,"graphicProperties",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"graphicSymbol",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],E.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0,type:SketchLabelOptions.Z})],E.prototype,"labelOptions",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],E.prototype,"geometryToPlace",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],E.prototype,"mode",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"snapToScene",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"tooltip",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0,type:SketchTooltipOptions.Z})],E.prototype,"tooltipOptions",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],E.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0,nonNullable:!0})],E.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_tooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawPointTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawPolylineTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawPolygonTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawMeshTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawRectangleTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_drawCircleTooltipInfo",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_circleRadius",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_xSize",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_ySize",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_fullGeometryArea",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_elevationTooltipDetail",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_vertexTooltipElevation",null),(0,tslib_es6._)([(0,property.Cb)()],E.prototype,"_elevationMode",null),E=(0,tslib_es6._)([(0,subclass.j)("esri.views.draw.DrawGraphicTool")],E);const DrawGraphicTool_L="create-operation-graphic",Z={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function H(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const N=48},"./node_modules/@arcgis/core/views/draw/DrawOperation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>I});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),HandleOwner=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),diffUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"),dehydratedFeatureComparison=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js"),elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");class DrawManipulator_t{constructor({grabbableForEvent:t}){this.events=new Evented.Z,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}var coordinateHelper=__webpack_require__("./node_modules/@arcgis/core/views/interactive/coordinateHelper.js"),dragEventPipeline=__webpack_require__("./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js"),EditGeometry=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js"),EditGeometryOperations=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometryOperations.js"),SketchLabelOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchLabelOptions.js"),SketchTooltipOptions=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/SketchTooltipOptions.js"),SnappingContext=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js"),SnappingDragPipelineStep=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Scheduler=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js"));let p=class extends Accessor.Z{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,promiseUtils.Ds)((async(t,s,o,r)=>{const n=this._frameTask;if(null==n)return;const e=await n.schedule((()=>s.snap({...t,context:o,signal:r})),r);e.valid&&await n.schedule((()=>{this.stagedPoint=e.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=s.update({...this._snapPoints,context:o}))}),r)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(Scheduler.T8.SNAPPING):Scheduler.sq}destroy(){this._abortController=(0,maybe.IM)(this._abortController),this._frameTask=(0,maybe.hw)(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:r,scenePoint:n}=t,e=s.update({point:r,scenePoint:n,context:o});return this.stagedPoint=e,e}async snap(t,s,o){const{point:r,scenePoint:n}=t;return this.stagedPoint=s.update({point:r,scenePoint:n,context:o}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async resnap(t,s){null!=this._snapPoints&&await this.snap(this._snapPoints,t,s)}abort(){this._abortController=(0,maybe.IM)(this._abortController),this._snapPoints=null}};(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],p.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],p.prototype,"stagedPoint",null),(0,tslib_es6._)([(0,property.Cb)()],p.prototype,"constrainResult",void 0),(0,tslib_es6._)([(0,property.Cb)()],p.prototype,"_stagedPoint",void 0),p=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.snapping.SnappingOperation")],p);var snappingUtils=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");let I=class extends(Evented.Z.EventedMixin(HandleOwner.r)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._stagedScreenPoint=null,this._stagedPointerType=null,this.isDraped=!0,this.labelOptions=new SketchLabelOptions.Z,this.tooltipOptions=new SketchTooltipOptions.Z,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.lastVertex=null,null==e.elevationInfo&&(this.elevationInfo=(0,elevationInfoUtils.mF)(!!e.hasZ))}initialize(){const{geometryType:e,view:t}=this,i=t.spatialReference,n="viewingMode"in t.state?t.state.viewingMode:ViewingMode.JY.Local,r="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,coordinateHelper.Y6)(this.hasZ,this.hasM,i),this._editGeometryOperations=new EditGeometryOperations.c(new EditGeometry.XE(r,this.coordinateHelper)),this._snappingOperation=new p({view:t,constrainResult:e=>null==e?e:this._getEffectiveDrawSurface()?.constrainZ(e)}),this.addHandles([(0,reactiveUtils.YP)((()=>this.stagedVertex),(e=>{null!=e&&this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:(e,t)=>(0,maybe._W)(e,t,dehydratedFeatureComparison.k)}),(0,reactiveUtils.YP)((()=>this.view.viewpoint),((e,t)=>{e&&t&&(0,diffUtils.Hg)(e,t)&&this._onViewpointChange()}))]),this._activeComponent=new EditGeometry.wA(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;null!=o&&(o.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles([(0,reactiveUtils.YP)((()=>this.labelOptions.enabled),(e=>{o.visible=e}),reactiveUtils.tX),this.on("cursor-update",(()=>{const e=this.stagedVertex;o.stagedVertex=null!=e?this.coordinateHelper.pointToVector(e):null}))])),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t})}const n=this._activeComponent.getLastVertex(),r=null!=n?this.coordinateHelper.vectorToDehydratedPoint(n.pos):null;null!=r&&null!=this.lastVertex&&(0,dehydratedFeatureComparison.k)(this.lastVertex,r)||(this.lastVertex=r)})));const l=this._manipulator=new DrawManipulator_t({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(l),l.grabbable="point"!==e,this.addHandles([this._createManipulatorDragPipeline(l),l.events.on("immediate-click",(e=>this._onImmediateClick(e))),l.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e))),(0,reactiveUtils.YP)((()=>({cursor:this.cursor,loading:this.loading})),(({cursor:e,loading:t})=>{l.cursor=t?"progress":e}),reactiveUtils.tX)]),(0,snappingUtils.Ob)(this,(()=>{const e=this.view.inputManager.latestPointerType??"mouse",t=this._getSnappingContext(e);null!=this.snappingManager&&this.updatingHandles.addPromise((0,promiseUtils.R8)(this._snappingOperation.resnap(this.snappingManager,t)))}))}destroy(){(0,maybe.SC)(this.segmentLabels),(0,maybe.SC)(this._snappingOperation),this._editGeometryOperations=(0,maybe.SC)(this._editGeometryOperations)}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._getEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",e??"click")}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return null!=this.stagedVertex?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=(0,lang.d9)(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return null!=this.stagedVertex&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),null!=this.stagedVertex){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),null!=this.snappingManager&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return(0,dragEventPipeline.Xd)(e,((e,t,i,n)=>{const r="touch"===n&&this._snappingEnabled;if(this.isCompleted||!r)return;const{snappingStep:o,cancelSnapping:s}=(0,SnappingDragPipelineStep.W)({predicate:()=>r,snappingManager:this.snappingManager,snappingContext:new SnappingContext.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:n,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint});i=i.next((e=>(r&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),e))).next(s),t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),e))).next((0,dragEventPipeline.BS)(this.view,this.elevationInfo)).next(...o).next((e=>(r&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e)))}))}_createManipulatorDragPipelineFreehand(e){return(0,dragEventPipeline.Xd)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(null==this.stagedVertex&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return(0,dragEventPipeline.Xd)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(null==this.stagedVertex&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}get _drawAtFixedElevation(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if(null==this.elevationDrawSurface)return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;return null!=this.elevationInfo&&"absolute-height"===this.elevationInfo.mode&&(t=!0),null!=this.snapToSceneEnabled&&(t=this.snapToSceneEnabled),null!=this.elevationInfo&&"on-the-ground"===this.elevationInfo.mode&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getEffectiveDrawSurface()?.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent;if(null!=this._closeOnClickVertexIndex(e.screenPoint))return e.stopPropagation(),void this.complete();const i=this._screenToMap(e.screenPoint);if(null!=i)switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),null!=this.stagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=(0,screenUtils.vW)(e.x,e.y);this._stagedScreenPoint=t,this._stagedPointerType=e.pointerType;const i=this._snappingOperation,n=this._manipulator;n.dragging||this._pointerDownStates.has(e.pointerId)||n.grabbing||!n.interactive?i.abort():(e.stopPropagation(),this._updateStagedVertexOnPointerMove(t,e.pointerType))}_onViewpointChange(){const e=this._manipulator;this._stagedScreenPoint&&!e.dragging&&!e.grabbing&&e.interactive?this._updateStagedVertexOnPointerMove(this._stagedScreenPoint,this._stagedPointerType??"mouse"):this._snappingOperation.abort()}_updateStagedVertexOnPointerMove(e,t){const i=this._snappingOperation,n=this._closeOnClickVertexIndex(e);if(null!=n)return this._closeOnVertex(n),void i.abort();const r=this._screenToMap(e),o=this._requiresScenePoint?this.drawSurface?.screenToMap(e):null;if(null==r)return this.cursor=null,void i.abort();this.cursor="crosshair";const s=this.snappingManager;if(null==s)return this.stagedVertex=r,void i.abort();const p=this._getSnappingContext(t);this.updatingHandles.addPromise((0,promiseUtils.R8)(i.snap({point:r,scenePoint:o},s,p)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getEffectiveDrawSurface()?.screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),null==e)return null;const i=this._screenToMap(t.screenEnd);return null!=i?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return null!=n&&function E(e,t,i){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r<=i}(n,t,25)}_getSnappingContext(e){const t=this._drawAtFixedElevation?(0,maybe.yw)(this.elevationDrawSurface,(({defaultZ:e})=>e)):null;return new SnappingContext.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,visualizer:this.snappingVisualizer,selfSnappingZ:null!=t?{value:t,elevationInfo:this.elevationInfo}:null})}};(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"_snappingEnabled",null),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,property.Cb)({value:"click"})],I.prototype,"drawingMode",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"elevationDrawSurface",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0,type:SketchLabelOptions.Z})],I.prototype,"labelOptions",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0,type:SketchTooltipOptions.Z})],I.prototype,"tooltipOptions",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"cursor",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"loading",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"drawSurface",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"segmentLabels",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"snappingVisualizer",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"snapToSceneEnabled",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"_snappingOperation",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"stagedVertex",null),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"lastVertex",void 0),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],I.prototype,"view",void 0),I=(0,tslib_es6._)([(0,subclass.j)("esri.views.draw.DrawOperation")],I)},"./node_modules/@arcgis/core/views/draw/drawSurfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aL:()=>r,hP:()=>c,iW:()=>o});var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js");class r{constructor(e,t,s,i=null){this._elevationInfo=e,this.defaultZ=t,this._view=s,this._excludeGraphics=i}screenToMap(t){if(null!=this.defaultZ)return this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.s1)(t.x,t.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const s=this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.s1)(t.x,t.y),this._elevationInfo,0,this._excludeGraphics);return null!=s&&(s.z=void 0),s}mapToScreen(e){const s=(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__.Tx)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.vQ)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(s)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_1__.WG)(e)).z=t),e}}class o{constructor(e,t,s=[]){this.view=e,this.elevationInfo=t,this.exclude=s}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude});return null!=t&&(t.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.Ou)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let s=e;return null!=this.elevationInfo&&(s=(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_0__.Tx)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.vQ)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(s)}constrainZ(e){return e}}class c{constructor(e,t=!1,s=0){this.view=e,this.hasZ=t,this.defaultZ=s,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const i=e.toMap(t);return i.z=s,i}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_1__.WG)(e)).z=t),e}}},"./node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>l});var a,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),interfaces=__webpack_require__("./node_modules/@arcgis/core/views/interactive/interfaces.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js");!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(a||(a={}));class i{constructor(){this._isToolEditable=!0,this._manipulators=new Collection.Z,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=a.WhenToolEditable){this.addMany([t],i)}addMany(t,i=a.WhenToolEditable){for(const a of t){const t={manipulator:a,visibilityPredicate:i,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let a=0;a<this._manipulators.length;a++)if(this._manipulators.at(a).manipulator===t){const t=this._manipulators.splice(a,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:t})=>{t.destroy&&t.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(t,a){return this._manipulators.on(t,(t=>{a(t)}))}forEach(t){for(const a of this._manipulators.items)t(a)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((a=>t.push(a.manipulator))),t}intersect(t,a){let i=null,e=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:o,attached:s})=>{if(!s||!o.interactive)return;const r=o.intersectionDistance(t,a);null!=r&&r<e&&(e=r,i=o)})),i}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const a=t.manipulator;a.grabbing=!1,a.dragging=!1,a.hovering=!1,a.selected=!1,a.detach&&a.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===a.Always||(this._isToolEditable?t.visibilityPredicate===a.WhenToolEditable:t.visibilityPredicate===a.WhenToolNotEditable)}}let l=class extends Accessor.Z{constructor(t){super(t),this.manipulators=new i,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[interfaces.bH.MANAGER,!0],[interfaces.bH.USER,!0]]),this._creationFinishedResolver=(0,promiseUtils.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(interfaces.bH.USER)}set editable(t){this.setEditableFlag(interfaces.bH.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view?(this.view.focus(),this.onActivate()):Logger.Z.getLogger(this).error("Can't activate tool if view is not defined.")}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===interfaces.bH.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){return this._editableFlags.get(t)??!1}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(interfaces.bH.USER)&&this.getEditableFlag(interfaces.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,tslib_es6._)([(0,property.Cb)({constructOnly:!0})],l.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"active",null),(0,tslib_es6._)([(0,property.Cb)({value:!0})],l.prototype,"visible",null),(0,tslib_es6._)([(0,property.Cb)({value:!0})],l.prototype,"editable",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"cursor",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"automaticManipulatorSelection",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"hasFocusedManipulators",null),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"hasGrabbedManipulators",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"hasHoveredManipulators",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"firstGrabbedManipulator",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"created",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],l.prototype,"removeIncompleteOnCancel",void 0),l=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.InteractiveToolBase")],l)},"./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AN:()=>P,BS:()=>C,Cf:()=>v,M2:()=>y,Mz:()=>O,QY:()=>w,Xd:()=>d,a9:()=>x,bD:()=>z,hM:()=>U,kY:()=>D,oq:()=>j,zh:()=>q});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js")),_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_layers_graphics_sources_interfaces_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/sources/interfaces.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),_ViewingMode_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js"),_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/draw/support/drawUtils.js"),_geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");function d(e,t){return e.events.on("drag",function f(e,t){let n=null,r=null;return a=>{if("cancel"===a.action)return void(null!=r&&(r.execute({action:"cancel"}),n=null,r=null));const o={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&null==n&&(n=new U,r=new U,t(e,n,r,a.pointerType,o)),null!=n&&n.execute(o),"end"===a.action&&null!=n&&(n=null,r=null)}}(e,t))}function y(e,t){const n=[e.x,e.y,e.z??0],r=t,a=[Math.cos(r),Math.sin(r)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(0===o)return null;a[0]/=o,a[1]/=o;const l=e=>{const t=(e.x-n[0])*a[0]+(e.y-n[1])*a[1];e.x=n[0]+t*a[0],e.y=n[1]+t*a[1]};return e=>(l(e.mapStart),l(e.mapEnd),{...e,axis:a})}function x(e,t){let n=null;return r=>{if("start"===r.action&&(n=function h(e,t,n){const r=e.geometry,a=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__.D)(t);if(null==r)return null;if("mesh"===r.type)return function E(e,t,n,r){if(t.vertexSpace.isRelative)return function S(e,t,n,r){const a=g(n.getOriginPoint(t.spatialReference),r),l=t.spatialReference;return null==a?null:{move:(t,r,s,i)=>{const u=(0,_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__.pB)(a.clone(),t,r,s);if(u.spatialReference.equals(l))n.setOriginFormPoint(u);else{const e=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(u,l);null!=e&&n.setOriginFormPoint(e)}if(n.isGeoreferenced)e.notifyGeometryChanged();else{const t="end"===i;e.notifyMeshTransformChanged(t?{action:_layers_graphics_sources_interfaces_js__WEBPACK_IMPORTED_MODULE_8__.u.UpdateFastLocalOrigin}:{})}}}}(e,t,t.vertexSpace,n);if(!t.spatialReference.equals(n))return null;let a=0,o=0,l=0;return{move:(n,s,c)=>{const i=n-a,p=s-o,f=c-l;if(i||p||f){const d=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__.Z(t.origin.x+i,t.origin.y+p,(t.origin.z??0)+f,t.origin.spatialReference);t.centerAt(d,{geographic:t.vertexSpace.isRelative?void 0:r===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_10__.JY.Global}),e.notifyGeometryChanged(),a=n,o=s,l=c}}}}(e,r,a,n);const s=g(r,a),c=r.spatialReference;return null==s?null:{move:(t,n,r)=>{const a=(0,_draw_support_drawUtils_js__WEBPACK_IMPORTED_MODULE_11__.pB)(s.clone(),t,n,r);a.spatialReference.equals(c)?e.geometry=a:e.geometry=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(a,c)}}}(e,r.mapStart.spatialReference,t)),null==n)return null;const a=r.mapEnd.x-r.mapStart.x,o=r.mapEnd.y-r.mapStart.y,l=r.mapEnd.z-r.mapStart.z;return n.move(a,o,l,r.action),{...r,translationX:a,translationY:o,translationZ:l}}}function g(e,t){return null==e?null:e.spatialReference.equals(t)?e.clone():(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,t)}function v(e,t=null,n){let r=null;const a=null==t||e.spatialReference?.equals(t)?e=>e:e=>null!=e?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,t):e,l={exclude:[],...n};return t=>{if("start"===t.action&&(r=a(e.toMap(t.screenStart,l))),null==r)return null;const n=a(e.toMap(t.screenEnd,l));return null!=n?{...t,mapStart:r,mapEnd:n}:null}}function j(t,n){const r=t.map((e=>x(e,n))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.pC);return e=>{const t=e.mapEnd.x-e.mapStart.x,n=e.mapEnd.y-e.mapStart.y,a=e.mapEnd.z-e.mapStart.z;return r.forEach((t=>t(e))),{...e,translationX:t,translationY:n,translationZ:a}}}function z(e){return null!=e.geometry&&"mesh"===e.geometry.type?function M(e,t){const{vertexSpace:n}=t;if(n.isGeoreferenced){const n=t.vertexAttributes.clonePositional();return r=>(t.vertexAttributes=n,e.notifyGeometryChanged(),r)}const r=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.a)(n.origin),o=t.transform?.clone();return n=>(t.transform=o,t.vertexSpace.origin=r,e.notifyMeshTransformChanged(),n)}(e,e.geometry):function R(e,n){const r=new Map;for(const a of n)r.set(a,(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.d9)(e[a]));return t=>(r.forEach(((t,n)=>{e[n]=t})),t)}(e,["geometry"])}function w(e){const t=e.map((e=>z(e))).filter((e=>null!=e));return e=>(t.forEach((t=>t(e))),e)}function P(){let e=0,t=0,n=0;return r=>{"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,n=r.mapStart.z);const a=r.mapEnd.x-e,o=r.mapEnd.y-t,l=r.mapEnd.z-n;return e=r.mapEnd.x,t=r.mapEnd.y,n=r.mapEnd.z,{...r,mapDeltaX:a,mapDeltaY:o,mapDeltaZ:l,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function q(){let e=0,t=0;return n=>{"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);const r=n.screenEnd.x-e,a=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,{...n,screenDeltaX:r,screenDeltaY:a}}}function D(e,t){let a=null,o=0,l=0;return s=>{if("start"===s.action&&(a=e.toScreen?.(t),null!=a&&(a.x<0||a.x>e.width||a.y<0||a.y>e.height?a=null:(o=s.screenStart.x-a.x,l=s.screenStart.y-a.y))),null==a)return null;const c=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.uZ)(s.screenEnd.x-o,0,e.width),i=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__.uZ)(s.screenEnd.y-l,0,e.height),u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_13__.vW)(c,i);return s.screenStart=a,s.screenEnd=u,s}}const G=()=>{};class U{constructor(){this.execute=G}next(e,t=new U){return null!=e&&(this.execute=n=>{const r=e(n);null!=r&&t.execute(r)}),t}}function C(e,t,n=[]){if("2d"===e.type)return e=>e;let r=null;return a=>{"start"===a.action&&(r=e.toMap(a.screenStart,{exclude:n}),null!=r&&(r.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.Ou)(r,e,t)));const o=e.toMap(a.screenEnd,{exclude:n});null!=o&&(o.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.Ou)(o,e,t));const l=null!=r&&null!=o?{sceneStart:r,sceneEnd:o}:null;return{...a,scenePoints:l}}}function F(e,t,n){const r=t.elevationProvider.getElevation(e.x,e.y,e.z??0,e.spatialReference,"scene")??0,a=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_7__.WG)(e);return a.z=r,a.hasZ=!0,a.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_9__.Ou)(a,t,n),a}function O(e,t){if("2d"===e.type)return e=>e;let n=null;return r=>{"start"===r.action&&(n=F(r.mapStart,e,t));const a=F(r.mapEnd,e,t),o=null!=n&&null!=a?{sceneStart:n,sceneEnd:a}:null;return{...r,scenePoints:o}}}},"./node_modules/@arcgis/core/views/interactive/editGeometry/support/editPlaneUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NI:()=>M,lv:()=>U,mO:()=>S,nn:()=>F,ny:()=>G});var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/boundedPlane.js"),_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js"),_operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/MoveVertex.js"),_operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/RotateVertex.js"),_operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/ScaleVertex.js"),_operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/editGeometry/operations/UpdateVertices.js"),_support_automaticLengthMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/support/automaticLengthMeasurementUtils.js");function F(s,o){return Y(s,o,!1)}function S(s,o){return Y(s,o,!0)}function Y(s,o,i){if(s instanceof _operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_8__.y){if(s.operation instanceof _operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_10__.z)return function _(s,o,i=!1){const t=i?-1:1,n=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(t*s.dx,t*s.dy,t*s.dz);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(o.origin,o.origin,n)}(s.operation,o,i),!0;if(s.operation instanceof _operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_6__.S)return function y(s,o,i=!1){const t=i?-s.angle:s.angle;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.I)(o.basis1,o.basis1,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.Z,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.I)(o.basis2,o.basis2,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.Z,t)}(s.operation,o,i),!0;if(s.operation instanceof _operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_7__.q)return function P(s,i,t=!1){const n=t?1/s.factor1:s.factor1,r=t?1/s.factor2:s.factor2;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(i.basis1,i.basis1,n),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(i.basis2,i.basis2,r),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.w)(i.origin,i.origin,s.origin,s.axis1,n),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.w)(i.origin,i.origin,s.origin,s.axis2,r)}(s.operation,o,i),!0}return!1}function U(s,o,g,b){b||(b=(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_4__.a)());const u=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.qW.get(),s[1],-s[0]),f=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.qW.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),m=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.qW.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.qW.get();o.components.forEach((o=>o.vertices.forEach((o=>{const a=o.pos;(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(p,(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.g)(s,a),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.g)(u,a)),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.A)(f,f,p),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.B)(m,m,p)}))));const I=1e-6,d=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.qW.get(),m[0]-f[0]<I?g/2:0,m[1]-f[1]<I?g/2:0);return(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.c)(f,f,d),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.i)(m,m,d),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.a)(b.basis1,s,(m[0]-f[0])/2),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.a)(b.basis2,u,(m[1]-f[1])/2),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.s)(b.origin,f[0]*s[0]+f[1]*u[0],f[0]*s[1]+f[1]*u[1]),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.i)(b.origin,b.origin,b.basis1),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_1__.i)(b.origin,b.origin,b.basis2),b}function G(s,o,i,t=0,n){n||(n=(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_4__.a)()),o.toRenderCoords(s.origin,i,n.origin);const r=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(r,s.origin,s.basis1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(r,r,s.basis2),o.toRenderCoords(r,i,r);const a=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(a,s.origin,s.basis1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(a,a,s.basis2),o.toRenderCoords(a,i,a);const e=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(e,s.origin,s.basis1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(e,e,s.basis2),o.toRenderCoords(e,i,e);const c=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(c,s.origin,s.basis1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)(c,c,s.basis2),o.toRenderCoords(c,i,c);const b=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get(),r,a,.5);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(b,b,n.origin);const N=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get(),e,c,.5);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(N,n.origin,N),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(n.basis1,b,N,.5);const h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get(),c,r,.5);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(h,h,n.origin);const j=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get(),a,e,.5);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(j,n.origin,j),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(n.basis2,h,j,.5);const T=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.f)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get(),n.basis1,n.basis2),v=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.f)(T,T,n.basis1);return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.n)(v,v),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(n.basis2,v,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(n.basis2,v)),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(n.basis1,n.basis1,1+t/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(n.basis1)),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(n.basis2,n.basis2,1+t/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(n.basis2)),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_4__.u)(n),n}function M(o,i,t,n){const r=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(r,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(r,o.origin,o.basis1),o.basis2);const a=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.A)(a,r,o.basis1,2);const e=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.A)(e,a,o.basis2,2);const c=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_5__.WM.get();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.A)(c,r,o.basis2,2),r[2]=a[2]=e[2]=c[2]=i;const g=n?"on-the-ground":"absolute-height",b=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.Fp)((0,_support_automaticLengthMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.bZ)(r,a,t,g),(0,_support_automaticLengthMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.bZ)(c,e,t,g)),u=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.Fp)((0,_support_automaticLengthMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.bZ)(a,e,t,g),(0,_support_automaticLengthMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.bZ)(r,c,t,g));return null==u||null==b?null:[b,u]}},"./node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>f});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/dragEventPipeline.js"),_SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js"),_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js");function f({predicate:o=(()=>!0),snappingManager:r,snappingContext:l,updatingHandles:u,useZ:c=!0}){const p=new _dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__.hM;if(null==r)return{snappingStep:[y,p],cancelSnapping:y};let f,Z=null,j=null,z=null;const T=()=>{Z=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__.IM)(Z),r.doneSnapping(),null!=j&&j.frameTask.remove(),j=null,f=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__.hw)(f),z=null},k=function d(n,e,t){return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ds)((async({frameTask:o,point:i,scenePoint:l,context:a,event:s,delta:u,getLastState:c},p)=>{const f=await o.schedule((()=>n.snap({point:i,scenePoint:l,context:a,signal:p})),p);if(f.valid){let l=await o.schedule((()=>f.apply()),p);const d=c();null!=d.point&&i!==d.point&&(l=n.update({point:d.point,scenePoint:d.scenePoint,context:a})),null!=d.updatePoint&&(0,_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__.k)(l,d.updatePoint)||(h(s.mapEnd,l,u,e),t.execute(s))}}))}(r,c,p);let w=null,I=null,U=null;return{snappingStep:[n=>{if(!o(n))return n;const{action:e}=n;if("start"===e){const{info:e}=n,t=function m(n){return"3d"===n.type?n.resourceController.scheduler.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__.T8.SNAPPING):_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__.sq}(r.view);if(j=function g(n,e,t){return{context:new _SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__.N({editGeometryOperations:n.editGeometryOperations,elevationInfo:n.elevationInfo,pointer:n.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:n.excludeFeature,visualizer:n.visualizer}),originalPos:null!=e.snapOrigin?n.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:t}}(l,n,t),j.context.selfSnappingZ=null,!c&&null!=e){const n=function S(n,e){if(!n.hasZ())return null;const t=e.vertices;let o=null;for(const i of t){const e=n.getZ(i.pos);if(null!=o&&null!=e&&Math.abs(e-o)>1e-6)return null;null==o&&(o=e)}return o}(l.coordinateHelper,e.handle.component);null!=n&&(j.context.selfSnappingZ={value:n,elevationInfo:l.elevationInfo??_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__.jG})}}if(null!=j){const{context:o,originalScenePos:l,originalPos:a}=j,{mapEnd:s,mapStart:p,scenePoints:d}=n,m=x(a,v(s,p)),g=v(p,a),S={...n,action:"update"},y=j.context,T=function P(n,e){return null==n||null==e?null:x(n,v(e.sceneEnd,e.sceneStart))}(l,d),C=r.update({point:m,scenePoint:T,context:o});if(U=C,h(s,C,g,c),w=m,I=T,"end"!==e){const{frameTask:n}=j;null==Z&&(Z=new AbortController),z=e=>{u.addPromise((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.R8)(k({frameTask:n,event:S,context:y,point:m,scenePoint:T,delta:g,getLastState:()=>({point:w,scenePoint:I,updatePoint:e.forceUpdate?null:U})},Z.signal)))},z({forceUpdate:!1}),null==f&&(f=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__.YP)((()=>r.options.effectiveEnabled),(()=>z?.({forceUpdate:!0}))))}}return"end"===e&&T(),n},p],cancelSnapping:n=>(T(),n)}}function x(n,[e,t,o]){const i=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__.WG)(n);return i.x+=e,i.y+=t,i.hasZ&&(i.z+=o),i}function v(n,e){const t=n.hasZ&&e.hasZ?n.z-e.z:0;return[n.x-e.x,n.y-e.y,t]}function h(n,e,[t,o,i],r){n.x=e.x+t,n.y=e.y+o,r&&n.hasZ&&e.hasZ&&(n.z=e.z+i)}function y(n){return n}},"./node_modules/@arcgis/core/views/support/colorUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EX:()=>s,G:()=>f,O:()=>d,_j:()=>i,vG:()=>h});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/colorUtils.js"),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");function l(n){let{r,g:o,b:a,a:e}=n;return e<1&&(r=Math.round(e*r+255*(1-e)),o=Math.round(e*o+255*(1-e)),a=Math.round(e*a+255*(1-e))),new _Color_js__WEBPACK_IMPORTED_MODULE_0__.Z({r,g:o,b:a})}function s(t,n){const{r,g:o,b:a}=n?.ignoreAlpha?t:l(t);return.2126*r+.7152*o+.0722*a}function i(t,o){const a=(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__.Y3)(t);a.l*=1-o;const e=(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__.xr)(a),u=t.clone();return u.setColor(e),u.a=t.a,u}function f(t,n){const r=t.clone();return r.a*=n,r}function h(t,n){const a=(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__._Y)(t);a.s*=n;const e=(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_2__.xr)(a),u=t.clone();return u.setColor(e),u.a=t.a,u}function d(n){return(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__.b)(_Color_js__WEBPACK_IMPORTED_MODULE_0__.Z.toUnitRGBA(n))}}}]);