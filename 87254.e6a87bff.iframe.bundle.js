"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[87254,1204],{"./node_modules/@arcgis/core/layers/support/LayerLoadContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>e});var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/support/requestPresets.js");class e{constructor(){this._serviceMetadatas=new Map}async fetchServiceMetadata(e,s){const a=this._serviceMetadatas.get(e);if(a)return a;const r=await(0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.T)(e,s);return this._serviceMetadatas.set(e,r),r}}},"./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>l});var _kernel_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/kernel.js"),_request_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"),_portal_Portal_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js");async function l(r,e){const t=(0,_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.Qc)(r);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z("invalid-url","Invalid scene service url");const a={...e,sceneServerUrl:t.url.path,layerId:t.sublayer??void 0};if(a.sceneLayerItem??=await async function s(r){const e=(await c(r)).serviceItemId;if(!e)return null;const n=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__.default({id:e,apiKey:r.apiKey}),o=await async function u(n){const o=_kernel_js__WEBPACK_IMPORTED_MODULE_0__.id?.findServerInfo(n.sceneServerUrl);if(o?.owningSystemUrl)return o.owningSystemUrl;const a=n.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await(0,_request_js__WEBPACK_IMPORTED_MODULE_1__.Z)(a,{query:{f:"json"},responseType:"json",signal:n.signal})).data.owningSystemUrl;if(r)return r}catch(i){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.r9)(i)}return null}(r);null!=o&&(n.portal=new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_5__.Z({url:o}));try{return n.load({signal:r.signal})}catch(l){return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.r9)(l),null}}(a),null==a.sceneLayerItem)return f(a.sceneServerUrl.replace("/SceneServer","/FeatureServer"),a);const i=await async function y({sceneLayerItem:r,signal:e}){if(!r)return null;try{const n=(await r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:e})).find((r=>"Feature Service"===r.type))||null;if(!n)return null;const t=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__.default({portal:n.portal,id:n.id});return await t.load(),t}catch(n){return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.r9)(n),null}}(a);if(!i?.url)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z("related-service-not-found","Could not find feature service through portal item relationship");const l=await f(i.url,a);return l.portalItem=i,l}async function c(r){if(r.rootDocument)return r.rootDocument;const n={query:{f:"json",token:r.apiKey},responseType:"json",signal:r.signal};try{const t=await(0,_request_js__WEBPACK_IMPORTED_MODULE_1__.Z)(r.sceneServerUrl,n);r.rootDocument=t.data}catch{r.rootDocument={}}return r.rootDocument}async function f(r,t){const a=(0,_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.Qc)(r);if(!a)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z("invalid-feature-service-url","Invalid feature service url");const i=a.url.path,l=t.layerId;if(null==l)return{serverUrl:i};const s=c(t),u=r=>{const n={query:{f:"json"},responseType:"json",authMode:r,signal:t.signal};return(0,_request_js__WEBPACK_IMPORTED_MODULE_1__.Z)(i,n)},f=u("anonymous").catch((()=>u("no-prompt"))),[y,m]=await Promise.all([f,s]),p=m?.layers,d=y.data&&y.data.layers;if(!Array.isArray(d))throw new Error("expected layers array");if(Array.isArray(p)){for(let e=0;e<Math.min(p.length,d.length);e++)if(p[e].id===l)return{serverUrl:i,layerId:d[e].id}}else if(null!=l&&l<d.length)return{serverUrl:i,layerId:d[l].id};throw new Error("could not find matching associated sublayer")}},"./node_modules/@arcgis/core/layers/support/layersCreator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>w,populateOperationalLayers:()=>c});var Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),LayerLoadContext=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/layers/support/LayerLoadContext.js")),lazyLayerLoader=__webpack_require__("./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"),PortalItem=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js");function t(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var portalLayers=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalLayers.js"),styleUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/styleUtils.js");async function c(e,r,a){if(!r)return;const t=[];for(const i of r)t.push(g(i,a));const y=await Promise.allSettled(t);for(const i of y)"rejected"===i.status||i.value&&e.add(i.value)}const l={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},p={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},u={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},m={...u,LinkChartLayer:"LinkChartLayer"},f={...d},T={...I};async function g(e,r){return async function G(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&("GroupLayer"===r.layerType?await w(t,r,a):v(r)?function h(e,r,a){r.itemId&&(e.portalItem=new PortalItem.default({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}(t,r,a.context):A(r)&&await async function C(e,r,t){const y=lazyLayerLoader.T.FeatureLayer,i=await y(),L=r.featureCollection,o=L?.showLegend,n=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const n={...t,ignoreDefaults:!0};return F(L,e,r,y,n),null!=o&&L.read({showLegend:o},n),L}));e.layers.addMany(n??[])}(t,r,a.context)),await(0,styleUtils.y)(t,a.context),t}(await M(e,r),e,r)}async function M(e,n){const c=n.context,l=b(c);let s=e.layerType||e.type;!s&&n?.defaultLayerType&&(s=n.defaultLayerType);const p=l[s];let S=p?lazyLayerLoader.T[p]:lazyLayerLoader.T.UnknownLayer;if(v(e)){const y=c?.portal;if(e.itemId){const i=new PortalItem.default({id:e.itemId,portal:y});await i.load();const L=(await(0,portalLayers.v)(i,new LayerLoadContext.L)).className||"UnknownLayer";S=lazyLayerLoader.T[L]}}else"ArcGISFeatureLayer"===s?function featureCollectionUtils_e(e){return t(e,"notes")}(e)||function r(e){return t(e,"markup")}(e)?S=lazyLayerLoader.T.MapNotesLayer:function featureCollectionUtils_n(e){return t(e,"route")}(e)?S=lazyLayerLoader.T.RouteLayer:A(e)&&(S=lazyLayerLoader.T.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=lazyLayerLoader.T.WMTSLayer:"WFS"===s&&"2.0.0"!==e.wfsInfo?.version&&(S=lazyLayerLoader.T.UnsupportedLayer);return S()}function A(e){return"ArcGISFeatureLayer"===e.layerType&&!v(e)&&(e.featureCollection?.layers?.length??0)>1}function v(e){return"Feature Collection"===e.type}function b(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=s;break;case"tables":r=p;break;default:r=l}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=T;break;case"tables":r=f;break;default:r=m}break;default:switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=d;break;default:r=u}}return r}async function w(r,a,t){const y=new Collection.Z,i=c(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,"group"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}},"./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>a});const a={BingMapsLayer:async()=>(await __webpack_require__.e(42081).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/BingMapsLayer.js"))).default,BuildingSceneLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(18353),__webpack_require__.e(3953),__webpack_require__.e(65588),__webpack_require__.e(17631)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/BuildingSceneLayer.js"))).default,CSVLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(18353),__webpack_require__.e(75136)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/CSVLayer.js"))).default,DimensionLayer:async()=>(await __webpack_require__.e(70694).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/DimensionLayer.js"))).default,ElevationLayer:async()=>(await __webpack_require__.e(44559).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ElevationLayer.js"))).default,FeatureLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(18353),__webpack_require__.e(14029)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default,GeoJSONLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GeoJSONLayer.js"))).default,GeoRSSLayer:async()=>(await __webpack_require__.e(32303).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GeoRSSLayer.js"))).default,GroupLayer:async()=>(await __webpack_require__.e(81065).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/GroupLayer.js"))).default,ImageryLayer:async()=>(await Promise.all([__webpack_require__.e(16269),__webpack_require__.e(10198),__webpack_require__.e(8061),__webpack_require__.e(83778),__webpack_require__.e(34195)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ImageryLayer.js"))).default,ImageryTileLayer:async()=>(await Promise.all([__webpack_require__.e(10198),__webpack_require__.e(8061),__webpack_require__.e(56040),__webpack_require__.e(83778),__webpack_require__.e(44396)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/ImageryTileLayer.js"))).default,IntegratedMeshLayer:async()=>(await Promise.all([__webpack_require__.e(3953),__webpack_require__.e(69640)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/IntegratedMeshLayer.js"))).default,KMLLayer:async()=>(await __webpack_require__.e(66184).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/KMLLayer.js"))).default,LineOfSightLayer:async()=>(await __webpack_require__.e(77562).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/LineOfSightLayer.js"))).default,LinkChartLayer:async()=>(await Promise.all([__webpack_require__.e(40084),__webpack_require__.e(84810),__webpack_require__.e(79725),__webpack_require__.e(11063),__webpack_require__.e(59530),__webpack_require__.e(45625)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/LinkChartLayer.js"))).default,MapImageLayer:async()=>(await Promise.all([__webpack_require__.e(16269),__webpack_require__.e(60903),__webpack_require__.e(5886),__webpack_require__.e(62933)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MapImageLayer.js"))).default,MapNotesLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(18353),__webpack_require__.e(16820)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MapNotesLayer.js"))).default,MediaLayer:async()=>(await __webpack_require__.e(61904).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/MediaLayer.js"))).default,OGCFeatureLayer:async()=>(await __webpack_require__.e(382).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OGCFeatureLayer.js"))).default,OpenStreetMapLayer:async()=>(await __webpack_require__.e(68742).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OpenStreetMapLayer.js"))).default,OrientedImageryLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(18353),__webpack_require__.e(6815)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/OrientedImageryLayer.js"))).default,PointCloudLayer:async()=>(await __webpack_require__.e(78342).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/PointCloudLayer.js"))).default,RouteLayer:async()=>(await Promise.all([__webpack_require__.e(22275),__webpack_require__.e(24947)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/RouteLayer.js"))).default,SceneLayer:async()=>(await Promise.all([__webpack_require__.e(3953),__webpack_require__.e(65588),__webpack_require__.e(56901)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/SceneLayer.js"))).default,StreamLayer:async()=>(await __webpack_require__.e(65034).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/StreamLayer.js"))).default,SubtypeGroupLayer:async()=>(await Promise.all([__webpack_require__.e(794),__webpack_require__.e(68920)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/SubtypeGroupLayer.js"))).default,TileLayer:async()=>(await Promise.all([__webpack_require__.e(16269),__webpack_require__.e(60903),__webpack_require__.e(5886),__webpack_require__.e(66416)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/TileLayer.js"))).default,UnknownLayer:async()=>(await __webpack_require__.e(32095).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/UnknownLayer.js"))).default,UnsupportedLayer:async()=>(await __webpack_require__.e(51983).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/UnsupportedLayer.js"))).default,VectorTileLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/VectorTileLayer.js"))).default,VoxelLayer:async()=>(await __webpack_require__.e(57589).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/VoxelLayer.js"))).default,WFSLayer:async()=>(await __webpack_require__.e(11811).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WFSLayer.js"))).default,WMSLayer:async()=>(await __webpack_require__.e(96230).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WMSLayer.js"))).default,WMTSLayer:async()=>(await __webpack_require__.e(65155).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WMTSLayer.js"))).default,WebTileLayer:async()=>(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/WebTileLayer.js"))).default}},"./node_modules/@arcgis/core/portal/support/loadUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$O:()=>a,CD:()=>i,Ok:()=>r,Q4:()=>l,XX:()=>n,_Y:()=>s,bS:()=>t});var _layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js");function t(e){const t={id:e.id,name:e.name};return"Oriented Imagery Layer"===e.type&&(t.layerType="OrientedImageryLayer"),t}async function a(e,a,r){if(null==e?.layers||null==e?.tables){const l=await r.fetchServiceMetadata(a);(e=e||{}).layers=e.layers||l?.layers?.map(t),e.tables=e.tables||l?.tables?.map(t)}return e}function r(e){const t=e.layers;if(t?.length)return t[0].id;const a=e.tables;return a?.length?a[0].id:null}function l(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function n(e){const t=[];return e?.layers?.forEach((e=>{"SubtypeGroupLayer"===e.layerType&&t.push(e.id)})),t}function s(e){return e?.layers?.filter((({layerType:e})=>"OrientedImageryLayer"===e)).map((({id:e})=>e))}async function i(a,r,l){if(!a?.url)return r??{};if(r??={},!r.layers){const e=await l.fetchServiceMetadata(a.url);r.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:s}=await(0,_layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_0__.w)(a.url,{sceneLayerItem:a}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return r.tables=[],r;if(!r.tables&&s){const e=await s.fetchData();if(e?.tables)r.tables=e.tables.map(t);else{const e=await l.fetchServiceMetadata(n);r.tables=e?.tables?.map(t)}}if(r.tables)for(const e of r.tables)e.url=`${n}/${e.id}`;return r}},"./node_modules/@arcgis/core/portal/support/portalLayers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{fromItem:()=>p,v:()=>L});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js"),_layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/support/LayerLoadContext.js"),_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js"),_layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"),_PortalItem_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/portal/support/loadUtils.js"),_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalItemUtils.js");async function p(e){!e.portalItem||e.portalItem instanceof _PortalItem_js__WEBPACK_IMPORTED_MODULE_5__.default||(e={...e,portalItem:new _PortalItem_js__WEBPACK_IMPORTED_MODULE_5__.default(e.portalItem)});const a=await async function f(e){await e.load();const a=new _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_2__.L;return async function d(e){const a=e.className,r=_layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_4__.T[a];return{constructor:await r(),properties:e.properties}}(await L(e,a))}(e.portalItem);return new(0,a.constructor)({portalItem:e.portalItem,...a.properties})}async function L(a,r){switch(a.type){case"Map Service":return async function w(e,a){return await async function V(e,a){return(await a.fetchServiceMetadata(e.url)).tileInfo}(e,a)?{className:"TileLayer"}:{className:"MapImageLayer"}}(a,r);case"Feature Service":return async function S(e,a){const r=await W(e,a);if("object"==typeof r){const e={};return null!=r.id&&(e.layerId=r.id),{className:r.className||"FeatureLayer",properties:e}}return{className:"GroupLayer"}}(a,r);case"Feature Collection":return async function I(e){await e.load();const a=(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__._$)(e,"Map Notes"),r=(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__._$)(e,"Markup");if(a||r)return{className:"MapNotesLayer"};if((0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_7__._$)(e,"Route Layer"))return{className:"RouteLayer"};const t=await e.fetchData();return 1===(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.Q4)(t)?{className:"FeatureLayer"}:{className:"GroupLayer"}}(a);case"Scene Service":return async function N(e,r){const n=await W(e,r,(async()=>{try{if(!e.url)return[];const{serverUrl:t}=await(0,_layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_1__.w)(e.url,{sceneLayerItem:e}),n=await r.fetchServiceMetadata(t);return n?.tables??[]}catch{return[]}}));if("object"==typeof n){const a={};let s;if(null!=n.id?(a.layerId=n.id,s=`${e.url}/layers/${n.id}`):s=e.url,e.typeKeywords?.length)for(const r of Object.keys(_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_3__.fb))if(e.typeKeywords.includes(r))return{className:_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_3__.fb[r]};const c=await r.fetchServiceMetadata(s);return{className:_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_3__.fb[c?.layerType]||"SceneLayer",properties:a}}if(!1===n){const a=await r.fetchServiceMetadata(e.url);if("Voxel"===a?.layerType)return{className:"VoxelLayer"}}return{className:"GroupLayer"}}(a,r);case"Image Service":return async function v(e,a){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(r.includes("tiled imagery"))return{className:"ImageryTileLayer"};const t=await e.fetchData(),n=t?.layerType;if("ArcGISTiledImageServiceLayer"===n)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===n)return{className:"ImageryLayer"};const s=await a.fetchServiceMetadata(e.url),c=s.cacheType?.toLowerCase(),o=s.capabilities?.toLowerCase().includes("tilesonly");return"map"===c||o?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(a,r);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};case"Group Layer":return{className:"GroupLayer"};default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:a.type})}}async function W(e,a,r){const t=e.url;if(!t||/\/\d+$/.test(t))return{};await e.load();let n=await e.fetchData();if("Feature Service"===e.type){const e=await(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.$O)(n,t,a),r=K(e);if("object"==typeof r){const a=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.XX)(e),t=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__._Y)(e);r.className=null!=r.id&&a.includes(r.id)?"SubtypeGroupLayer":null!=r.id&&t?.includes(r.id)?"OrientedImageryLayer":"FeatureLayer"}return r}if("Scene Service"===e.type&&(n=await(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.CD)(e,n,a)),(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.Q4)(n)>0)return K(n);const s=await a.fetchServiceMetadata(t);return r&&(s.tables=await r()),K(s)}function K(e){return 1===(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.Q4)(e)&&{id:(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_6__.Ok)(e)}}},"./node_modules/@arcgis/core/renderers/support/styleUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>t});var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_Warning_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Warning.js");async function t(t,i,n){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",i.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.q6)(s.populateFromStyle());if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.k_)(n),!1===a.ok){const e=a.error;i?.messages&&i.messages.push(new _core_Warning_js__WEBPACK_IMPORTED_MODULE_2__.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${e.message}`,{error:e,context:i})),t.clear("renderer",i?.origin)}}}},"./node_modules/@arcgis/core/support/requestPresets.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>t});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js");async function t(t,o){const{data:r}=await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.Z)(t,{responseType:"json",query:{f:"json",...o?.customParameters,token:o?.apiKey}});return r}}}]);