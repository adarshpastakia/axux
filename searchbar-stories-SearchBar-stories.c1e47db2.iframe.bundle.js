/*! For license information please see searchbar-stories-SearchBar-stories.c1e47db2.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[18100],{"./packages/searchbar/stories/SearchBar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SearchBar_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist=__webpack_require__("./packages/core/dist/index.js"),date_dist=__webpack_require__("./packages/date/dist/index.js"),form_dist=__webpack_require__("./packages/form/dist/index.js");const ar_namespaceObject=JSON.parse('{"placeholder":"مصطلح البحث...","label":{"filters":"مرشحات","all_filters":"جميع المرشحات","field":"حقل","operator":"المشغل أو العامل","value":"القيمة","label":"ابيl","optional":"اختياري","add":"إضافة مرشح","edit":"Edit","invert":"Invert Include/Exclude","removeAll":"حذف الكل","enableAll":"تمكين الكل","disableAll":"أوقف عمل الكل","remove":"إزالة","enable":"ممكن","disable":"تعطيل","exclude":"استبعد","include":"تتضمن","refresh":"ينعش","update":"تحديث","apply":"تطبيق","cancel":"إلغاء","delete":"حذف"},"validate":{"field":"حقل مطلوب","operator":"عامل مطلوب","value":"القيمة المطلوبة","compare":"مقارنة الحقل المطلوب","label":"التصنيف مطلوب"},"operator":{"EXISTS":"موجود","IS":"يكون","IN":"في","LT":"<","GT":">","LTE":"≤","GTE":"≥","INCLUDES":"يشمل","STARTS":"ابدا ب","ENDS":"ينتهي مع","WITHIN":"في غضون","BETWEEN":"بين هذا وذاك"},"type":{"string":"سلسلة","int":"كثافة العمليات","float":"يطفو","number":"رقم","boolean":"منطقي","date":"تاريخ","geo":"GeoJSON"}}'),en_namespaceObject=JSON.parse('{"placeholder":"Search term...","label":{"filters":"Filters","all_filters":"All Filters","field":"Field","operator":"Operator","value":"Value","label":"Label","optional":"Optional","add":"Add Filter","edit":"Edit","view":"View","invert":"Invert Include/Exclude","removeAll":"Remove All","enableAll":"Enable All","disableAll":"Disable All","remove":"Remove","enable":"Enable","disable":"Disable","exclude":"Exclude","include":"Include","refresh":"Refresh","update":"Update","apply":"Apply","cancel":"Cancel","delete":"Delete"},"validate":{"field":"Field required","operator":"Operator required","value":"Value required","compare":"Compare field required","label":"Label required"},"operator":{"EXISTS":"Exists","IS":"Is","IN":"In","LT":"<","GT":">","LTE":"≤","GTE":"≥","INCLUDES":"Includes","STARTS":"Starts with","ENDS":"Ends with","WITHIN":"Within","BETWEEN":"Between"},"type":{"string":"String","int":"Int","float":"Float","number":"Number","boolean":"Bool","date":"Date","geo":"GeoJSON"}}');(0,dist.gR)("searchbar",{en:en_namespaceObject,ar:ar_namespaceObject});var utilities_dist=__webpack_require__("./packages/utilities/dist/index.js"),i18next=__webpack_require__("./node_modules/i18next/dist/esm/i18next.js"),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const SearchContext=react.createContext({}),useSearchContext=()=>(0,react.useContext)(SearchContext),blankHistory=[],context_SearchContextProvider=({children,query:_query="",filters:_filters=[],historyCount=20,defaultQueryList=[],isCollapsed=!1,isEditable=!1,fields=[],historyKey="ax:search",onQuery,onSearch,onSelect,onFilterChanged})=>{const[query,setQuery]=(0,react.useState)(_query),[filters,setFilters]=(0,react.useState)(_filters),[isDirty,setDirty]=(0,react.useState)(!1),[showFilters,setShowFilters]=(0,react.useState)(!isCollapsed),[isFocused,setFocused]=(0,react.useState)(!1),[history,setHistory]=(0,dist.kq)(historyKey,blankHistory),[options,setOptions]=(0,react.useState)([]);(0,react.useEffect)((()=>{setFilters(_filters)}),[_filters]),(0,react.useEffect)((()=>{setQuery(_query)}),[_query]),(0,react.useEffect)((()=>{setOptions(history)}),[history]);const fireSearchEvent=(0,react.useMemo)((()=>(0,utilities_dist.debounce)((q=>{onSearch?.(q)}))),[]),handleChange=(0,react.useCallback)(((query="")=>{setDirty(!1),setQuery(query);const historyList=(0,utilities_dist.isArray)(history)?history:[];query&&setHistory([query,...historyList.filter((h=>h!==query)).slice(0,historyCount-1)])}),[filters,history,onSearch]),handleSearch=(0,react.useCallback)(((query="")=>{setDirty(!1),fireSearchEvent({query,filters})}),[query,filters,history,onSearch]);return(0,jsx_runtime.jsx)(es.mu,{i18n:i18next.cp,children:(0,jsx_runtime.jsx)(SearchContext.Provider,{value:{defaultQueryList,showFilters,setShowFilters,isFocused,setFocused,filters,isDirty,query,fields,options,isEditable,handleChange,updateQuery:async query=>(setDirty(!0),setQuery(query),await(onQuery?.(query)??[])),handleSearch,updateFilter:(index,filter)=>{const newFilters=[...filters],oldFilter=filters[index];newFilters.splice(index,1,{...oldFilter,...filter}),setFilters(newFilters),onFilterChanged?.(newFilters)},addFilter:filter=>{const newFilters=[...filters,filter];setFilters(newFilters),onFilterChanged?.(newFilters)},onSelect,removeFilter:index=>{const newFilters=[...filters];newFilters.splice(index,1),setFilters(newFilters),onFilterChanged?.(newFilters)},toggleDisable:value=>{const newFilters=filters.map((f=>"filter"===f.type&&f.isRequired?f:{...f,isDisabled:value}));setFilters(newFilters),onFilterChanged?.(newFilters)},toggleExclude:()=>{const newFilters=filters.map((f=>f.isRequired?f:{...f,isNegative:!f.isNegative}));setFilters(newFilters),onFilterChanged?.(newFilters)},removeAll:()=>{const newFilters=filters.filter((f=>"filter"===f.type&&f.isRequired));setFilters(newFilters),onFilterChanged?.(newFilters)}},children})})};try{context_SearchContextProvider.displayName="SearchContextProvider",context_SearchContextProvider.__docgenInfo={description:"",displayName:"SearchContextProvider",props:{query:{defaultValue:null,description:"Query string",name:"query",required:!1,type:{name:"string"}},historyCount:{defaultValue:{value:"20"},description:"Search history count",name:"historyCount",required:!1,type:{name:"number"}},historyKey:{defaultValue:{value:"ax:search"},description:"Search history storage key",name:"historyKey",required:!1,type:{name:"string"}},defaultQueryList:{defaultValue:{value:"[]"},description:"Default query items for suggest",name:"defaultQueryList",required:!1,type:{name:"SuggestItem[]"}},prepend:{defaultValue:null,description:"Add-on before search input",name:"prepend",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"Add-on after search input",name:"append",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},actions:{defaultValue:null,description:"Additional actions menu",name:"actions",required:!1,type:{name:"MenuChildren | MenuChildren[]"}},hideFilters:{defaultValue:null,description:"Hide filter bar",name:"hideFilters",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"Disable component",name:"isDisabled",required:!1,type:{name:"boolean"}},isCollapsed:{defaultValue:{value:"false"},description:"Collapse filters",name:"isCollapsed",required:!1,type:{name:"boolean"}},onCollapsed:{defaultValue:null,description:"On filter collapsed\n@param collapsed",name:"onCollapsed",required:!1,type:{name:"((collapsed: boolean) => void)"}},onSelect:{defaultValue:null,description:"On suggestion select",name:"onSelect",required:!1,type:{name:"((item: SuggestItem) => boolean | Promise<boolean>)"}},onSearch:{defaultValue:null,description:"On search event\n@param queryObject",name:"onSearch",required:!1,type:{name:"((queryObject: QueryObject) => void)"}},onQuery:{defaultValue:null,description:"On query string change event\n@param query",name:"onQuery",required:!1,type:{name:"((query: string) => SuggestItem[] | Promise<SuggestItem[]>)"}},filters:{defaultValue:{value:"[]"},description:"Filters list",name:"filters",required:!1,type:{name:"FilterObject[]"}},fields:{defaultValue:{value:"[]"},description:"Field list\n(Required when filter bar enabled)",name:"fields",required:!1,type:{name:"FilterField[]"}},isEditable:{defaultValue:{value:"false"},description:"Editable filters",name:"isEditable",required:!1,type:{name:"boolean"}},emptyFields:{defaultValue:null,description:"Message for empty field list",name:"emptyFields",required:!1,type:{name:"string"}},onFilterChanged:{defaultValue:null,description:"On filters change, (add/update/delete)\n@param filters",name:"onFilterChanged",required:!1,type:{name:"((filters: FilterObject[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/context/index.tsx#SearchContextProvider"]={docgenInfo:context_SearchContextProvider.__docgenInfo,name:"SearchContextProvider",path:"packages/searchbar/src/context/index.tsx#SearchContextProvider"})}catch(__react_docgen_typescript_loader_error){}var Icons;!function(Icons){Icons.iconMenu="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",Icons.iconConsole="M13,19V16H21V19H13M8.5,13L2.47,7H6.71L11.67,11.95C12.25,12.54 12.25,13.5 11.67,14.07L6.74,19H2.5L8.5,13Z",Icons.iconPencil="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",Icons.iconAdd="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z",Icons.iconCog="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",Icons.iconEnable="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z",Icons.iconDisable="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z",Icons.iconInvert="M14.063 17.578v0l-2.438-2.391 1.078-1.078 1.359 1.359 2.484-2.484 1.031 1.078-3.516 3.516zM12 2.016q-2.063 0-3.867 0.773t-3.188 2.156-2.156 3.188-0.773 3.867 0.773 3.867 2.156 3.188 3.188 2.156 3.867 0.773 3.867-0.773 3.188-2.156 2.156-3.188 0.773-3.867-0.773-3.867-2.156-3.188-3.188-2.156-3.867-0.773zM7.359 6.281l1.406 1.406 1.406-1.406 1.031 1.078-1.406 1.406 1.406 1.406-1.031 1.031-1.406-1.406-1.406 1.406-1.078-1.031 1.406-1.406-1.406-1.406zM12 20.016q-1.641 0-3.117-0.633t-2.602-1.664l11.438-11.438q1.031 1.125 1.664 2.602t0.633 3.117-0.633 3.094-1.734 2.555-2.555 1.734-3.094 0.633z",Icons.iconDelete="M14.12,10.47L12,12.59L9.87,10.47L8.46,11.88L10.59,14L8.47,16.12L9.88,17.53L12,15.41L14.12,17.53L15.53,16.12L13.41,14L15.53,11.88L14.12,10.47M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9Z"}(Icons||(Icons={}));var EnumFieldType,EnumOperator,index_esm=__webpack_require__("./node_modules/yup/index.esm.js");!function(EnumFieldType){EnumFieldType.KEYWORD="KEYWORD",EnumFieldType.STRING="string",EnumFieldType.INT="int",EnumFieldType.FLOAT="float",EnumFieldType.BOOLEAN="boolean",EnumFieldType.DATE="date",EnumFieldType.GEO="geo"}(EnumFieldType||(EnumFieldType={})),function(EnumOperator){EnumOperator.EXISTS="EXISTS",EnumOperator.IS="IS",EnumOperator.IN="IN",EnumOperator.LT="LT",EnumOperator.GT="GT",EnumOperator.LTE="LTE",EnumOperator.GTE="GTE",EnumOperator.INCLUDES="INCLUDES",EnumOperator.STARTS="STARTS",EnumOperator.ENDS="ENDS",EnumOperator.WITHIN="WITHIN",EnumOperator.BETWEEN="BETWEEN"}(EnumOperator||(EnumOperator={}));const TypeOperators={[EnumFieldType.KEYWORD]:[EnumOperator.IS,EnumOperator.IN],[EnumFieldType.STRING]:[EnumOperator.IS,EnumOperator.IN,EnumOperator.INCLUDES,EnumOperator.STARTS,EnumOperator.ENDS],[EnumFieldType.INT]:[EnumOperator.IS,EnumOperator.BETWEEN,EnumOperator.LT,EnumOperator.GT,EnumOperator.LTE,EnumOperator.GTE],[EnumFieldType.FLOAT]:[EnumOperator.IS,EnumOperator.BETWEEN,EnumOperator.LT,EnumOperator.GT,EnumOperator.LTE,EnumOperator.GTE],[EnumFieldType.BOOLEAN]:[EnumOperator.IS],[EnumFieldType.DATE]:[EnumOperator.BETWEEN,EnumOperator.LT,EnumOperator.GT,EnumOperator.LTE,EnumOperator.GTE],[EnumFieldType.GEO]:[]},FilterSchema=(EnumOperator.EXISTS,EnumOperator.IS,EnumOperator.IN,EnumOperator.BETWEEN,EnumOperator.WITHIN,EnumOperator.STARTS,EnumOperator.ENDS,EnumOperator.INCLUDES,EnumOperator.LT,EnumOperator.GT,EnumOperator.LTE,EnumOperator.GTE,new index_esm.aA({field:index_esm.Qb().required(),operator:index_esm.Qb().required(),value:index_esm.Er().when("operator",{is:EnumOperator.EXISTS,then:schema=>schema.optional(),otherwise:schema=>schema.required()}).when("operator",{is:EnumOperator.IN,then:schema=>schema.test({name:"array-check",message:"${path} is a required field",test:(val=[])=>val?.length>0})})})),FilterForm=({index,...filter})=>{const cancelRef=(0,react.useRef)(null),formRef=(0,react.useRef)(null),{t}=(0,es.Gy)("searchbar"),[values,setValues]=(0,react.useState)(filter),{updateFilter,addFilter,removeFilter,fields}=useSearchContext(),fieldList=(0,react.useMemo)((()=>Object.entries(fields.reduce(((r,c)=>({...r,[c.type]:[...r[c.type]??[],c]})),{})).map((([label,items])=>({label:t(`type.${label}`),items})))),[fields]),field=(0,react.useMemo)((()=>{if(values.field)return fields.find((f=>f.field===values.field))}),[values]),operators=(0,react.useMemo)((()=>null==field?[]:[EnumOperator.EXISTS,...TypeOperators[field.type]]),[field]);(0,react.useEffect)((()=>{null==field||values.operator||formRef.current?.setValue("operator",EnumOperator.EXISTS),values.operator===EnumOperator.EXISTS&&void 0!==values.value&&formRef.current?.setValue("value",void 0),field?.type===EnumFieldType.BOOLEAN&&values.operator===EnumOperator.IS&&void 0===values.value&&formRef.current?.setValue("value",!1)}),[values,field]);const valueInput=(0,react.useMemo)((()=>{if(null==field||!values.operator)return null;if(values.operator===EnumOperator.EXISTS)return null;if(field?.type===EnumFieldType.BOOLEAN)return(0,jsx_runtime.jsx)(form_dist.a.Container,{label:t("label.value"),"data-plain":"true",children:(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value",children:(0,jsx_runtime.jsx)(form_dist.a.Switch,{onLabel:"True",offLabel:"False"})})});if(field?.type===EnumFieldType.STRING)return[EnumOperator.STARTS,EnumOperator.ENDS,EnumOperator.INCLUDES].includes(values.operator)?(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value",children:(0,jsx_runtime.jsx)(form_dist.a.Text,{label:t("label.value"),allowClear:!0})}):values.operator===EnumOperator.IN?(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value",children:(0,jsx_runtime.jsx)(form_dist.a.Tag,{isEditable:!0,allowCreate:!0,allowClear:!0,options:field.values??[],label:t("label.value")})}):(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value",children:(0,jsx_runtime.jsx)(form_dist.a.Combo,{isEditable:!0,allowCreate:!0,allowClear:!0,options:field.values??[],label:t("label.value"),onQuery:field.onSearch})});if(field?.type===EnumFieldType.FLOAT||field?.type===EnumFieldType.INT){const step=field.type===EnumFieldType.FLOAT?.1:1;return values.operator===EnumOperator.BETWEEN?(0,jsx_runtime.jsxs)(form_dist.a.Container,{label:t("label.value"),children:[(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value[0]",children:(0,jsx_runtime.jsx)(form_dist.a.Number,{step,allowClear:!0})}),(0,jsx_runtime.jsxs)(form_dist.a.Addon,{children:[">",(0,jsx_runtime.jsx)("i",{children:"n"}),"<"]}),(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value[1]",children:(0,jsx_runtime.jsx)(form_dist.a.Number,{step,allowClear:!0})})]}):(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"value",children:(0,jsx_runtime.jsx)(form_dist.a.Number,{label:t("label.value"),step,allowClear:!0})})}}),[field,values.operator]),handleSubmit=(0,react.useCallback)((values=>{-1===index?addFilter(values):updateFilter(index,values),cancelRef.current?.click()}),[updateFilter,addFilter,index]);return(0,jsx_runtime.jsx)(form_dist.q,{className:"bg-component",formRef,schema:FilterSchema,defaultValues:filter,onSubmit:handleSubmit,onChange:setValues,children:(0,jsx_runtime.jsxs)(dist.as,{fluid:!0,children:[(0,jsx_runtime.jsxs)(dist.as.Row,{children:[(0,jsx_runtime.jsx)(dist.as.Col,{flex:"fill",children:(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"field",children:(0,jsx_runtime.jsx)(form_dist.a.Select,{autoFocus:!0,label:t("label.field"),options:fieldList,valueProperty:"field"})})}),(0,jsx_runtime.jsx)(dist.as.Col,{flex:"auto",children:(0,jsx_runtime.jsx)(form_dist.a.Container,{label:t("label.exclude"),"data-plain":"true",children:(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"isNegative",children:(0,jsx_runtime.jsx)(form_dist.a.Switch,{className:"mt-2 mx-1",color:"danger",onLabel:"NOT"})})})}),(0,jsx_runtime.jsx)(dist.as.Col,{flex:"auto",width:"8rem",children:(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"operator",children:(0,jsx_runtime.jsx)(form_dist.a.Select,{label:t("label.operator"),options:operators.map((op=>({value:op,label:t(`operator.${op}`)})))})})})]}),(0,jsx_runtime.jsx)(dist.as.Row,{children:(0,jsx_runtime.jsx)(dist.as.Col,{flex:"fill",children:valueInput})}),(0,jsx_runtime.jsx)("div",{className:"pt-6",children:(0,jsx_runtime.jsx)(form_dist.q.Controller,{name:"label",children:(0,jsx_runtime.jsx)(form_dist.a.Text,{label:t("label.label"),placeholder:"Filter label...",children:(0,jsx_runtime.jsx)(form_dist.a.Addon,{showWhenEmpty:!0,children:t("label.optional")})})})}),(0,jsx_runtime.jsxs)(dist.as.Row,{className:"pt-8",children:[(0,jsx_runtime.jsx)(dist.as.Col,{flex:"fill",children:index>-1&&(0,jsx_runtime.jsx)(dist.q8.Dismiss,{children:(0,jsx_runtime.jsx)(dist.cP,{size:"sm",variant:"link",color:"danger",onClick:()=>removeFilter(index),children:t("label.remove")})})}),(0,jsx_runtime.jsxs)(dist.as.Col,{flex:"auto",children:[(0,jsx_runtime.jsx)(dist.q8.Dismiss,{ref:cancelRef,children:(0,jsx_runtime.jsx)(dist.cP,{size:"sm",variant:"link",children:t("label.cancel")})}),(0,jsx_runtime.jsx)(dist.cP,{size:"sm",variant:"solid",type:"submit",children:t(-1===index?"label.add":"label.update")})]})]})]})})};try{FilterForm.displayName="FilterForm",FilterForm.__docgenInfo={description:"",displayName:"FilterForm",props:{type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"filter"'}]}},field:{defaultValue:null,description:"",name:"field",required:!1,type:{name:"string"}},operator:{defaultValue:null,description:"",name:"operator",required:!1,type:{name:"enum",value:[{value:'"EXISTS"'},{value:'"IS"'},{value:'"IN"'},{value:'"LT"'},{value:'"GT"'},{value:'"LTE"'},{value:'"GTE"'},{value:'"INCLUDES"'},{value:'"STARTS"'},{value:'"ENDS"'},{value:'"WITHIN"'},{value:'"BETWEEN"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isScope:{defaultValue:null,description:"",name:"isScope",required:!1,type:{name:"boolean"}},isGlobal:{defaultValue:null,description:"",name:"isGlobal",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isNegative:{defaultValue:null,description:"",name:"isNegative",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!1,type:{name:"false"}},canInvert:{defaultValue:null,description:"",name:"canInvert",required:!1,type:{name:"false"}},canDisable:{defaultValue:null,description:"",name:"canDisable",required:!1,type:{name:"false"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/filterbar/FilterForm.tsx#FilterForm"]={docgenInfo:FilterForm.__docgenInfo,name:"FilterForm",path:"packages/searchbar/src/filterbar/FilterForm.tsx#FilterForm"})}catch(__react_docgen_typescript_loader_error){}const AddFilter=()=>{const{t}=(0,es.Gy)("searchbar");return(0,jsx_runtime.jsxs)(dist.q8,{placement:"bottom-start",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-filter__tag ax-filter__addButton",children:[(0,jsx_runtime.jsx)(dist.ie,{icon:Icons.iconAdd}),(0,jsx_runtime.jsx)("div",{children:t("label.add")})]}),(0,jsx_runtime.jsx)("div",{style:{width:"32rem"},children:(0,jsx_runtime.jsx)(FilterForm,{index:-1})})]})},FilterMenu=(0,react.memo)((({index,...filter})=>{const{t}=(0,es.Gy)("searchbar"),{updateFilter,removeFilter,fields,isEditable}=useSearchContext(),canEdit=(0,react.useMemo)((()=>{if(0===fields.length||filter.isScope||!isEditable||!1===filter.canEdit)return!1;const field=fields.find((f=>("filter"===filter.type&&f.field===filter.field)??""));return field?.type!==EnumFieldType.GEO}),[filter,isEditable]),canView=(0,react.useMemo)((()=>!(filter.isScope||canEdit&&"query"!==filter.type)),[filter,canEdit]);return(0,jsx_runtime.jsxs)(dist.cf,{className:"ax-filter__menu",children:[canEdit&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.cf.Item,{"data-panel":"edit",icon:Icons.iconPencil,label:t("label.edit")}),(0,jsx_runtime.jsx)(dist.S2,{size:"xs"})]}),canView&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.cf.Item,{"data-panel":"view",icon:Icons.iconPencil,label:t("label.view")}),(0,jsx_runtime.jsx)(dist.S2,{size:"xs"})]}),!1!==filter.canDisable&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconEnable,label:t("label.enable"),isDisabled:!filter.isDisabled,onClick:()=>updateFilter(index,{isDisabled:!1})}),(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconDisable,label:t("label.disable"),isDisabled:filter.isDisabled,onClick:()=>updateFilter(index,{isDisabled:!0})})]}),!1!==filter.canInvert&&(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconInvert,label:t("label.invert"),onClick:()=>updateFilter(index,{isNegative:!filter.isNegative})}),!filter.isRequired&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.S2,{size:"xs"}),(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconDelete,onClick:()=>removeFilter(index),label:t("label.remove"),className:"ax-filter__deleteButton"})]})]})}));FilterMenu.displayName="FilterMenu";try{FilterMenu.displayName="FilterMenu",FilterMenu.__docgenInfo={description:"",displayName:"FilterMenu",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"query"'},{value:'"filter"'}]}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},operator:{defaultValue:null,description:"",name:"operator",required:!0,type:{name:"enum",value:[{value:'"EXISTS"'},{value:'"IS"'},{value:'"IN"'},{value:'"LT"'},{value:'"GT"'},{value:'"LTE"'},{value:'"GTE"'},{value:'"INCLUDES"'},{value:'"STARTS"'},{value:'"ENDS"'},{value:'"WITHIN"'},{value:'"BETWEEN"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isScope:{defaultValue:null,description:"",name:"isScope",required:!1,type:{name:"boolean"}},isGlobal:{defaultValue:null,description:"",name:"isGlobal",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isNegative:{defaultValue:null,description:"",name:"isNegative",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!1,type:{name:"false"}},canInvert:{defaultValue:null,description:"",name:"canInvert",required:!1,type:{name:"false"}},canDisable:{defaultValue:null,description:"",name:"canDisable",required:!1,type:{name:"false"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"KeyValue[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/filterbar/FilterMenu.tsx#FilterMenu"]={docgenInfo:FilterMenu.__docgenInfo,name:"FilterMenu",path:"packages/searchbar/src/filterbar/FilterMenu.tsx#FilterMenu"})}catch(__react_docgen_typescript_loader_error){}const QueryView=({index,...filter})=>{const{removeFilter}=useSearchContext(),{t}=(0,es.Gy)("searchbar"),view=(0,react.useMemo)((()=>{if("query"===filter.type)return JSON.stringify(filter.query,null,2);if("filter"===filter.type){let value=filter.value?.toString();return filter.operator===EnumOperator.BETWEEN&&(0,utilities_dist.isArray)(filter.value)&&(value=`[${filter.value?.join(" - ")}]`),filter.operator===EnumOperator.IN&&(0,utilities_dist.isArray)(filter.value)&&(value=`[${filter.value?.join(", ")}]`),(0,jsx_runtime.jsxs)(react.Fragment,{children:[filter.isNegative&&(0,jsx_runtime.jsx)("b",{children:"NOT "}),(0,jsx_runtime.jsx)("span",{children:filter.field}),(0,jsx_runtime.jsxs)("b",{children:[" ",t(`operator.${filter.operator}`)," "]}),(0,jsx_runtime.jsx)("div",{children:value})]})}return""}),[filter]);return(0,jsx_runtime.jsxs)("div",{className:"p-2 bg-component relative",children:["query"===filter.type&&(0,jsx_runtime.jsx)(dist.oz.Copy,{size:"sm",text:view,className:"absolute top-2 end-2 z-10"}),(0,jsx_runtime.jsx)("pre",{className:"overflow-auto bg-base border border-bw-500/50 shadow-inner text-sm p-2 max-h-[24rem] max-w-[48rem] min-w-[24rem]",children:view}),(0,jsx_runtime.jsx)(dist.q8.Dismiss,{children:(0,jsx_runtime.jsx)(dist.cP,{size:"sm",variant:"link",color:"danger",onClick:()=>removeFilter(index),children:t("label.remove")})})]})};try{QueryView.displayName="QueryView",QueryView.__docgenInfo={description:"",displayName:"QueryView",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"query"'},{value:'"filter"'}]}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},operator:{defaultValue:null,description:"",name:"operator",required:!0,type:{name:"enum",value:[{value:'"EXISTS"'},{value:'"IS"'},{value:'"IN"'},{value:'"LT"'},{value:'"GT"'},{value:'"LTE"'},{value:'"GTE"'},{value:'"INCLUDES"'},{value:'"STARTS"'},{value:'"ENDS"'},{value:'"WITHIN"'},{value:'"BETWEEN"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isScope:{defaultValue:null,description:"",name:"isScope",required:!1,type:{name:"boolean"}},isGlobal:{defaultValue:null,description:"",name:"isGlobal",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isNegative:{defaultValue:null,description:"",name:"isNegative",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!1,type:{name:"false"}},canInvert:{defaultValue:null,description:"",name:"canInvert",required:!1,type:{name:"false"}},canDisable:{defaultValue:null,description:"",name:"canDisable",required:!1,type:{name:"false"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"KeyValue[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/filterbar/QueryView.tsx#QueryView"]={docgenInfo:QueryView.__docgenInfo,name:"QueryView",path:"packages/searchbar/src/filterbar/QueryView.tsx#QueryView"})}catch(__react_docgen_typescript_loader_error){}const FilterTag=(0,react.memo)((({index,...filter})=>{const{t}=(0,es.Gy)("searchbar"),{updateFilter,removeFilter}=useSearchContext(),label=(0,react.useMemo)((()=>"query"===filter.type?(0,jsx_runtime.jsx)(react.Fragment,{children:(0,jsx_runtime.jsx)("span",{children:filter.label})}):filter.label?filter.label:(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("span",{children:filter.field}),(0,jsx_runtime.jsxs)("b",{children:[" ",t(`operator.${filter.operator}`)," "]}),(0,jsx_runtime.jsx)("span",{children:filter.value?.toString()})]})),[filter]);return(0,jsx_runtime.jsxs)(dist.q8,{placement:"bottom-start",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-filter__tag","data-test-id":"filter-tag","data-disabled":filter.isDisabled,"data-global":filter.isGlobal,"data-scope":filter.isScope,"data-type":filter.isNegative?"exclude":"include",children:[(0,jsx_runtime.jsx)(form_dist.a.Checkbox,{"data-test-id":"filter-checkbox",isInvalid:filter.isNegative,isChecked:!filter.isDisabled,onClick:e=>e.stopPropagation(),onChange:e=>updateFilter(index,{isDisabled:!e})}),(0,jsx_runtime.jsx)("div",{children:label}),!filter.isRequired&&(0,jsx_runtime.jsx)("span",{"data-test-id":"filter-remove",className:"ax-filter__tag--close",onClick:e=>(removeFilter(index),e.preventDefault()),children:"×"})]}),(0,jsx_runtime.jsxs)(dist.aG.Stack,{children:[(0,jsx_runtime.jsx)(dist.q8.Dismiss,{children:(0,jsx_runtime.jsx)(dist.aG,{panelId:"menu",children:(0,jsx_runtime.jsx)(FilterMenu,{index,...filter})})}),(0,jsx_runtime.jsxs)(dist.aG,{panelId:"edit",width:"32rem",children:[(0,jsx_runtime.jsx)(dist.AP,{children:(0,jsx_runtime.jsx)(dist.Ke,{children:t("label.edit")})}),(0,jsx_runtime.jsx)(dist.KI,{padding:"none",children:(0,jsx_runtime.jsx)(FilterForm,{index,...filter})})]}),(0,jsx_runtime.jsxs)(dist.aG,{panelId:"view",width:"32rem",children:[(0,jsx_runtime.jsx)(dist.AP,{children:(0,jsx_runtime.jsx)(dist.Ke,{children:t("label.view")})}),(0,jsx_runtime.jsx)(dist.KI,{padding:"none",children:(0,jsx_runtime.jsx)(QueryView,{index,...filter})})]})]})]})}));FilterTag.displayName="FilterTag";try{FilterTag.displayName="FilterTag",FilterTag.__docgenInfo={description:"",displayName:"FilterTag",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"query"'},{value:'"filter"'}]}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},operator:{defaultValue:null,description:"",name:"operator",required:!0,type:{name:"enum",value:[{value:'"EXISTS"'},{value:'"IS"'},{value:'"IN"'},{value:'"LT"'},{value:'"GT"'},{value:'"LTE"'},{value:'"GTE"'},{value:'"INCLUDES"'},{value:'"STARTS"'},{value:'"ENDS"'},{value:'"WITHIN"'},{value:'"BETWEEN"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isScope:{defaultValue:null,description:"",name:"isScope",required:!1,type:{name:"boolean"}},isGlobal:{defaultValue:null,description:"",name:"isGlobal",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isNegative:{defaultValue:null,description:"",name:"isNegative",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"boolean"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!1,type:{name:"false"}},canInvert:{defaultValue:null,description:"",name:"canInvert",required:!1,type:{name:"false"}},canDisable:{defaultValue:null,description:"",name:"canDisable",required:!1,type:{name:"false"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"KeyValue[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/filterbar/FilterTag.tsx#FilterTag"]={docgenInfo:FilterTag.__docgenInfo,name:"FilterTag",path:"packages/searchbar/src/filterbar/FilterTag.tsx#FilterTag"})}catch(__react_docgen_typescript_loader_error){}const GlobalMenu=()=>{const{t}=(0,es.Gy)("searchbar"),{toggleDisable,toggleExclude,removeAll,filters}=useSearchContext();return(0,jsx_runtime.jsxs)(dist.cP.Dropdown,{variant:"link",isDisabled:0===filters.length,dropdownClassName:"ax-filter__menu",className:"ax-filter__action flush",size:"sm",icon:Icons.iconCog,showCaret:!1,children:[(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconEnable,label:t("label.enableAll"),onClick:()=>toggleDisable(!1)}),(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconDisable,label:t("label.disableAll"),onClick:()=>toggleDisable(!0)}),(0,jsx_runtime.jsx)(dist.cf.Item,{icon:Icons.iconInvert,label:t("label.invert"),onClick:toggleExclude}),(0,jsx_runtime.jsx)(dist.S2,{size:"xs"}),(0,jsx_runtime.jsx)(dist.cf.Item,{onClick:removeAll,icon:Icons.iconDelete,label:t("label.removeAll"),className:"ax-filter__deleteButton"})]})},FilterWrapper_FilterWrapper=()=>{const{showFilters,filters,fields,isEditable}=useSearchContext();return showFilters?(0,jsx_runtime.jsxs)("div",{className:"ax-filterbar",children:[(0,jsx_runtime.jsx)(GlobalMenu,{}),(0,jsx_runtime.jsxs)("div",{className:"ax-filter__wrapper",children:[filters.map(((filter,index)=>(0,react.createElement)(FilterTag,{...filter,index,key:index}))),isEditable&&fields.length>0&&(0,jsx_runtime.jsx)(AddFilter,{})]})]}):null};try{FilterWrapper_FilterWrapper.displayName="FilterWrapper",FilterWrapper_FilterWrapper.__docgenInfo={description:"",displayName:"FilterWrapper",props:{filters:{defaultValue:{value:"[]"},description:"Filters list",name:"filters",required:!1,type:{name:"FilterObject[]"}},fields:{defaultValue:null,description:"Field list\n(Required when filter bar enabled)",name:"fields",required:!1,type:{name:"FilterField[]"}},isEditable:{defaultValue:null,description:"Editable filters",name:"isEditable",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"Disable component",name:"isDisabled",required:!1,type:{name:"boolean"}},emptyFields:{defaultValue:null,description:"Message for empty field list",name:"emptyFields",required:!1,type:{name:"string"}},onFilterChanged:{defaultValue:null,description:"On filters change, (add/update/delete)\n@param filters",name:"onFilterChanged",required:!1,type:{name:"((filters: FilterObject[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/filterbar/FilterWrapper.tsx#FilterWrapper"]={docgenInfo:FilterWrapper_FilterWrapper.__docgenInfo,name:"FilterWrapper",path:"packages/searchbar/src/filterbar/FilterWrapper.tsx#FilterWrapper"})}catch(__react_docgen_typescript_loader_error){}const AxFilterBar=({...props})=>_jsx(SearchContextProvider,{...props,children:_jsx(FilterWrapper,{})});try{AxFilterBar.displayName="AxFilterBar",AxFilterBar.__docgenInfo={description:"",displayName:"AxFilterBar",props:{filters:{defaultValue:{value:"[]"},description:"Filters list",name:"filters",required:!1,type:{name:"FilterObject[]"}},fields:{defaultValue:null,description:"Field list\n(Required when filter bar enabled)",name:"fields",required:!1,type:{name:"FilterField[]"}},isEditable:{defaultValue:null,description:"Editable filters",name:"isEditable",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"Disable component",name:"isDisabled",required:!1,type:{name:"boolean"}},emptyFields:{defaultValue:null,description:"Message for empty field list",name:"emptyFields",required:!1,type:{name:"string"}},onFilterChanged:{defaultValue:null,description:"On filters change, (add/update/delete)\n@param filters",name:"onFilterChanged",required:!1,type:{name:"((filters: FilterObject[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/FilterBar.tsx#AxFilterBar"]={docgenInfo:AxFilterBar.__docgenInfo,name:"AxFilterBar",path:"packages/searchbar/src/FilterBar.tsx#AxFilterBar"})}catch(__react_docgen_typescript_loader_error){}const FilterButton=()=>{const{t}=(0,es.Gy)("searchbar"),{showFilters,setShowFilters,filters}=useSearchContext();return(0,jsx_runtime.jsx)(dist.cP,{color:"accent",variant:"outline",className:"ax-filterButton","data-enabled":showFilters,"data-test-id":"filter-toggle",badge:{value:`${filters.length}`,color:showFilters?"accent":void 0},onClick:()=>setShowFilters(!showFilters),children:t("label.filters")})},SearchButton=()=>{const{t}=(0,es.Gy)("searchbar"),{query,isDirty,handleSearch}=useSearchContext();return(0,jsx_runtime.jsx)(dist.cP,{color:isDirty?"warning":"primary",variant:"solid",className:"z-20","data-test-id":"search-button",onClick:()=>handleSearch(query),children:t(isDirty?"label.update":"label.refresh")})},SearchInput=()=>{const{t}=(0,es.Gy)("searchbar"),{defaultQueryList=[],query,options,onSelect,handleChange,updateQuery,handleSearch,setFocused}=useSearchContext();return(0,jsx_runtime.jsx)(form_dist.a.Suggest,{placeholder:t("placeholder"),value:query??"",options,enlargeOnFocus:!0,onQuery:updateQuery,onSelect:async v=>(handleSearch(v.value??v.toString()),await(onSelect?.(v))??!0),"data-test-id":"search-input",onChange:handleChange,onFocusChange:setFocused,onEnterPressed:()=>handleSearch(query),defaultItems:defaultQueryList,children:(0,jsx_runtime.jsx)(form_dist.a.Addon,{className:"text-muted",icon:Icons.iconConsole})})},SearchWrapper=({append,prepend,actions,hideFilters})=>{const{isFocused}=useSearchContext();return(0,jsx_runtime.jsxs)("div",{className:"ax-searchbar",children:[(0,jsx_runtime.jsxs)(form_dist.a.Container,{children:[!isFocused&&!hideFilters&&(0,jsx_runtime.jsx)(FilterButton,{}),!isFocused&&prepend,(0,jsx_runtime.jsx)(SearchInput,{}),(0,jsx_runtime.jsx)(SearchButton,{})]}),!isFocused&&append,!isFocused&&actions&&(0,jsx_runtime.jsx)(dist.cP.Dropdown,{variant:"outline",showCaret:!1,icon:Icons.iconMenu,children:actions})]})};try{SearchWrapper.displayName="SearchWrapper",SearchWrapper.__docgenInfo={description:"",displayName:"SearchWrapper",props:{query:{defaultValue:null,description:"Query string",name:"query",required:!1,type:{name:"string"}},historyCount:{defaultValue:{value:"20"},description:"Search history count",name:"historyCount",required:!1,type:{name:"number"}},historyKey:{defaultValue:{value:': "ax:search"'},description:"Search history storage key",name:"historyKey",required:!1,type:{name:"string"}},defaultQueryList:{defaultValue:null,description:"Default query items for suggest",name:"defaultQueryList",required:!1,type:{name:"SuggestItem[]"}},prepend:{defaultValue:null,description:"Add-on before search input",name:"prepend",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"Add-on after search input",name:"append",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},actions:{defaultValue:null,description:"Additional actions menu",name:"actions",required:!1,type:{name:"MenuChildren | MenuChildren[]"}},hideFilters:{defaultValue:null,description:"Hide filter bar",name:"hideFilters",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"Disable component",name:"isDisabled",required:!1,type:{name:"boolean"}},isCollapsed:{defaultValue:{value:"true"},description:"Collapse filters",name:"isCollapsed",required:!1,type:{name:"boolean"}},onCollapsed:{defaultValue:null,description:"On filter collapsed\n@param collapsed",name:"onCollapsed",required:!1,type:{name:"((collapsed: boolean) => void)"}},onSelect:{defaultValue:null,description:"On suggestion select",name:"onSelect",required:!1,type:{name:"((item: SuggestItem) => boolean | Promise<boolean>)"}},onSearch:{defaultValue:null,description:"On search event\n@param queryObject",name:"onSearch",required:!1,type:{name:"((queryObject: QueryObject) => void)"}},onQuery:{defaultValue:null,description:"On query string change event\n@param query",name:"onQuery",required:!1,type:{name:"((query: string) => SuggestItem[] | Promise<SuggestItem[]>)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/searchbar/SearchWrapper.tsx#SearchWrapper"]={docgenInfo:SearchWrapper.__docgenInfo,name:"SearchWrapper",path:"packages/searchbar/src/searchbar/SearchWrapper.tsx#SearchWrapper"})}catch(__react_docgen_typescript_loader_error){}const AxSearchBar=({append,prepend,actions,hideFilters,...props})=>(0,jsx_runtime.jsxs)(context_SearchContextProvider,{...props,children:[(0,jsx_runtime.jsx)(SearchWrapper,{append,prepend,actions,hideFilters}),!hideFilters&&(0,jsx_runtime.jsx)(FilterWrapper_FilterWrapper,{})]});try{AxSearchBar.displayName="AxSearchBar",AxSearchBar.__docgenInfo={description:"",displayName:"AxSearchBar",props:{query:{defaultValue:null,description:"Query string",name:"query",required:!1,type:{name:"string"}},historyCount:{defaultValue:{value:"20"},description:"Search history count",name:"historyCount",required:!1,type:{name:"number"}},historyKey:{defaultValue:{value:': "ax:search"'},description:"Search history storage key",name:"historyKey",required:!1,type:{name:"string"}},defaultQueryList:{defaultValue:null,description:"Default query items for suggest",name:"defaultQueryList",required:!1,type:{name:"SuggestItem[]"}},prepend:{defaultValue:null,description:"Add-on before search input",name:"prepend",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"Add-on after search input",name:"append",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},actions:{defaultValue:null,description:"Additional actions menu",name:"actions",required:!1,type:{name:"MenuChildren | MenuChildren[]"}},hideFilters:{defaultValue:null,description:"Hide filter bar",name:"hideFilters",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"Disable component",name:"isDisabled",required:!1,type:{name:"boolean"}},isCollapsed:{defaultValue:{value:"true"},description:"Collapse filters",name:"isCollapsed",required:!1,type:{name:"boolean"}},onCollapsed:{defaultValue:null,description:"On filter collapsed\n@param collapsed",name:"onCollapsed",required:!1,type:{name:"((collapsed: boolean) => void)"}},onSelect:{defaultValue:null,description:"On suggestion select",name:"onSelect",required:!1,type:{name:"((item: SuggestItem) => boolean | Promise<boolean>)"}},onSearch:{defaultValue:null,description:"On search event\n@param queryObject",name:"onSearch",required:!1,type:{name:"((queryObject: QueryObject) => void)"}},onQuery:{defaultValue:null,description:"On query string change event\n@param query",name:"onQuery",required:!1,type:{name:"((query: string) => SuggestItem[] | Promise<SuggestItem[]>)"}},filters:{defaultValue:{value:"[]"},description:"Filters list",name:"filters",required:!1,type:{name:"FilterObject[]"}},fields:{defaultValue:null,description:"Field list\n(Required when filter bar enabled)",name:"fields",required:!1,type:{name:"FilterField[]"}},isEditable:{defaultValue:null,description:"Editable filters",name:"isEditable",required:!1,type:{name:"boolean"}},emptyFields:{defaultValue:null,description:"Message for empty field list",name:"emptyFields",required:!1,type:{name:"string"}},onFilterChanged:{defaultValue:null,description:"On filters change, (add/update/delete)\n@param filters",name:"onFilterChanged",required:!1,type:{name:"((filters: FilterObject[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/searchbar/src/SearchBar.tsx#AxSearchBar"]={docgenInfo:AxSearchBar.__docgenInfo,name:"AxSearchBar",path:"packages/searchbar/src/SearchBar.tsx#AxSearchBar"})}catch(__react_docgen_typescript_loader_error){}const SearchBar_stories={component:AxSearchBar,title:"@searchbar/SearchBar",tags:["autodocs"],parameters:{layout:"fullscreen",controls:{exclude:["append","prepend","actions"]}}},fields=[{field:"text",label:"text",type:EnumFieldType.STRING},{field:"number",label:"number",type:EnumFieldType.INT},{field:"boolean",label:"boolean",type:EnumFieldType.BOOLEAN}],filters=[{type:"filter",field:"text",operator:EnumOperator.IS,value:"yes",isScope:!0},{type:"filter",field:"text",operator:EnumOperator.IS,value:"yes",isGlobal:!0},{type:"filter",field:"text",operator:EnumOperator.STARTS,value:"no",isNegative:!0},{type:"filter",field:"text",operator:EnumOperator.IN,value:["maybe","possibly"]},{type:"filter",field:"number",operator:EnumOperator.IS,value:9},{type:"query",label:"field query",query:[{field:"field",match:"test"}]}],Example={render:args=>(0,jsx_runtime.jsxs)("div",{className:"p-6 h-[220px]",children:[(0,jsx_runtime.jsx)(AxSearchBar,{...args}),(0,jsx_runtime.jsxs)("div",{className:"py-4",children:[(0,jsx_runtime.jsx)("div",{className:"text-lg border-b",children:"Filter tag colors"}),(0,jsx_runtime.jsx)(dist.p_,{color:"#7c3aed",fill:!0,children:"Scoped filter"}),(0,jsx_runtime.jsx)(dist.p_,{color:"#db2777",fill:!0,children:"Scoped disabled filter"}),(0,jsx_runtime.jsx)(dist.p_,{color:"primary",fill:!0,children:"Global filter"}),(0,jsx_runtime.jsx)(dist.p_,{color:"danger",fill:!0,children:"Global disabled filter"}),(0,jsx_runtime.jsx)(dist.p_,{color:"primary",children:"Local filter"}),(0,jsx_runtime.jsx)(dist.p_,{color:"danger",children:"Disabled filter"})]})]}),args:{defaultQueryList:[{value:"category: games",label:"Games",info:"Search latest games"},{value:"category: dev",label:"Dev Tools",info:"Search latest developer tools"}],prepend:(0,jsx_runtime.jsx)(form_dist.a.Select,{width:"12rem",value:"All",options:["All","Table 1","Table 2","Table 3"]}),append:(0,jsx_runtime.jsx)(date_dist.I3,{className:"min-w-[12rem]",variant:"outline"}),actions:[(0,jsx_runtime.jsx)(dist.cf.Item,{icon:"mdi mdi-folder-open-outline",label:"Open search..."},"open"),(0,jsx_runtime.jsx)(dist.cf.Item,{icon:"mdi mdi-content-save-outline",label:"Save search..."},"save")],filters,fields}};Example.parameters={...Example.parameters,docs:{...Example.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    return <div className="p-6 h-[220px]">\n        <AxSearchBar {...args} />\n        <div className="py-4">\n          <div className="text-lg border-b">Filter tag colors</div>\n          <AxTag color="#7c3aed" fill>\n            Scoped filter\n          </AxTag>\n          <AxTag color="#db2777" fill>\n            Scoped disabled filter\n          </AxTag>\n          <AxTag color="primary" fill>\n            Global filter\n          </AxTag>\n          <AxTag color="danger" fill>\n            Global disabled filter\n          </AxTag>\n          <AxTag color="primary">Local filter</AxTag>\n          <AxTag color="danger">Disabled filter</AxTag>\n        </div>\n      </div>;\n  },\n  args: {\n    defaultQueryList: [{\n      value: "category: games",\n      label: "Games",\n      info: "Search latest games"\n    }, {\n      value: "category: dev",\n      label: "Dev Tools",\n      info: "Search latest developer tools"\n    }],\n    prepend: <AxField.Select width="12rem" value="All" options={["All", "Table 1", "Table 2", "Table 3"]} />,\n    append: <AxSuperDate className="min-w-[12rem]" variant="outline" />,\n    actions: [<AxMenu.Item key="open" icon="mdi mdi-folder-open-outline" label="Open search..." />, <AxMenu.Item key="save" icon="mdi mdi-content-save-outline" label="Save search..." />],\n    filters,\n    fields\n  }\n}',...Example.parameters?.docs?.source}}};const __namedExportsOrder=["Example"]}}]);