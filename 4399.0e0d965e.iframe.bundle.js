"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[4399,7182],{"./node_modules/@arcgis/core/arcade/executionError.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{var e;__webpack_require__.d(__webpack_exports__,{Hy:()=>i,OF:()=>s,TD:()=>l,Tu:()=>p,VO:()=>u,aV:()=>t,kq:()=>c,rH:()=>e}),function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.UnexpectedToken="UnexpectedToken",e.Unrecognised="Unrecognised",e.UnrecognisedType="UnrecognisedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FuncionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference"}(e||(e={}));const r={[e.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[e.LogicError]:"Logic error - {reason}",[e.NeverReach]:"Encountered unreachable logic",[e.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[e.ModuleAccessorMustBeString]:"Module accessor must be a string",[e.ModuleExportNotFound]:"Module has no export with provided identifier",[e.ModulesNotSupported]:"Current profile does not support modules",[e.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[e.FuncionNotFound]:"Function not found",[e.FieldNotFound]:"Key not found - {key}",[e.CircularModules]:"Circular module dependencies are not allowed",[e.Cancelled]:"Execution cancelled",[e.UnsupportedHashType]:"Type not supported in hash function",[e.IllegalResult]:"Value is not a supported return type",[e.PortalRequired]:"Portal is required",[e.InvalidParameter]:"Invalid parameter",[e.WrongNumberOfParameters]:"Call with wrong number of parameters",[e.Unrecognised]:"Unrecognised code structure",[e.UnrecognisedType]:"Unrecognised type",[e.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[e.BooleanConditionRequired]:"Conditions must use booleans",[e.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[e.NoFunctionInArray]:"Arrays cannot contain functions.",[e.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[e.KeyAccessorMustBeString]:"Accessor must be a string",[e.KeyMustBeString]:"Object keys must be a string",[e.Immutable]:"Object is immutable",[e.InvalidParameter]:"Invalid parameter",[e.UnexpectedToken]:"Unexpected token",[e.MemberOfNull]:"Cannot access property of null object",[e.MaximumCallDepth]:"Exceeded maximum function depth",[e.OutOfBounds]:"Out of bounds",[e.InvalidIdentifier]:"Identifier not recognised",[e.FuncionNotFound]:"Function not found",[e.CallNonFunction]:"Expression is not a function",[e.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[e.AssignModuleFunction]:"Cannot assign function to module variable",[e.UnsupportedUnaryOperator]:"Unsupported unary operator",[e.UnsupportedOperator]:"Unsupported operator",[e.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[e.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};class o extends Error{constructor(...e){super(...e)}}class n extends o{constructor(e,r){super(a(r)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,n),r&&r.loc&&(this.loc=r.loc)}}class t extends Error{constructor(e,o,n,s){super("Execution error - "+a(n)+i(r[o],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,t),n&&n.loc&&(this.loc=n.loc)}}function a(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}class s extends Error{constructor(e,o,n,t){super("Compilation error - "+a(n)+i(r[o],t)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,s),n&&n.loc&&(this.loc=n.loc)}}class c extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,c)}}function i(e,r){try{if(!r)return e;for(const o in r){let n=r[o];n||(n=""),e=e.replace("{"+o+"}",r[o])}}catch(o){}return e}function u(e,r,o){return"esri.arcade.arcadeexecutionerror"===o.declaredRootClass||"esri.arcade.arcadecompilationerror"===o.declaredRootClass?null===o.loc&&r&&r.loc?new n(o,{cause:o}):o:("esri.arcade.featureset.support.featureseterror"===o.declaredRootClass||"esri.arcade.featureset.support.sqlerror"===o.declaredRootClass||o.declaredRootClass,r&&r.loc?new n(o,{cause:o}):o)}var l;!function(e){e.UnrecognisedUri="UnrecognisedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"}(l||(l={}));const d={[l.UnrecognisedUri]:"Unrecognised uri - {uri}",[l.UnsupportedUriProtocol]:"Unrecognised uri protocol"};class p extends Error{constructor(e,r){super(i(d[e],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,p)}}},"./node_modules/@arcgis/core/chunks/mat3f64.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function t(e,r,t,n,o,a,u,c,f){return[e,r,t,n,o,a,u,c,f]}function n(e,r){return new Float64Array(e,r,9)}__webpack_require__.d(__webpack_exports__,{a:()=>n,c:()=>e,f:()=>t});Object.freeze(Object.defineProperty({__proto__:null,clone:function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/mat4f64.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function n(e,r){return new Float64Array(e,r,16)}__webpack_require__.d(__webpack_exports__,{I:()=>o,a:()=>n,b:()=>r,c:()=>e});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:function t(e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p){return[e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p]}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/quatf64.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function e(){return[0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function n(e,r){return new Float64Array(e,r,4)}__webpack_require__.d(__webpack_exports__,{I:()=>o,a:()=>e,b:()=>r,c:()=>n});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:function t(e,r,t,n){return[e,r,t,n]}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/chunks/sphere.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>T,c:()=>R,g:()=>k,h:()=>_,j:()=>V,m:()=>N});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var Axis_n,Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");!function(n){n[n.X=0]="X",n[n.Y=1]="Y",n[n.Z=2]="Z"}(Axis_n||(Axis_n={}));var ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),vector=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vector.js"),vectorStacks=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function R(){return(0,vec4f64.c)()}function _(t,r=R()){return(0,vec4.c)(r,t)}function T(t){return t[3]}function k(t){return t}function z(t,r,n){if((0,maybe.Wi)(r))return!1;const{origin:o,direction:s}=r,i=U;i[0]=o[0]-t[0],i[1]=o[1]-t[1],i[2]=o[2]-t[2];const a=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(0===a)return!1;const c=2*(s[0]*i[0]+s[1]*i[1]+s[2]*i[2]),u=c*c-4*a*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const f=Math.sqrt(u);let m=(-c-f)/(2*a);const p=(-c+f)/(2*a);return(m<0||p<m&&p>0)&&(m=p),!(m<0||(n&&(n[0]=o[0]+s[0]*m,n[1]=o[1]+s[1]*m,n[2]=o[2]+s[2]*m),0))}const U=(0,vec3f64.c)();function V(t,r){return z(t,r,null)}function Y(t,r,n){const e=vectorStacks.WM.get(),s=vectorStacks.MP.get();(0,vec3.f)(e,r.origin,r.direction);const i=T(t);(0,vec3.f)(n,e,r.origin),(0,vec3.g)(n,n,1/(0,vec3.l)(n)*i);const c=G(t,r.origin),p=(0,vector.EU)(r.origin,n);return(0,mat4.d)(s,p+c,e),(0,vec3.m)(n,n,s),n}function D(t,r,n){const e=(0,vec3.b)(vectorStacks.WM.get(),r,t),o=(0,vec3.g)(vectorStacks.WM.get(),e,t[3]/(0,vec3.l)(e));return(0,vec3.a)(n,o,t)}function G(t,n){const e=(0,vec3.b)(vectorStacks.WM.get(),n,t),o=(0,vec3.l)(e),s=T(t),i=s+Math.abs(s-o);return(0,mathUtils.ZF)(s/i)}const H=(0,vec3f64.c)();function I(t,r,e,o){const s=(0,vec3.b)(H,r,t);switch(e){case Axis_n.X:{const t=(0,mathUtils.jE)(s,H)[2];return(0,vec3.s)(o,-Math.sin(t),Math.cos(t),0)}case Axis_n.Y:{const t=(0,mathUtils.jE)(s,H),r=t[1],e=t[2],i=Math.sin(r);return(0,vec3.s)(o,-i*Math.cos(e),-i*Math.sin(e),Math.cos(r))}case Axis_n.Z:return(0,vec3.n)(o,s);default:return}}function J(t,r){const n=(0,vec3.b)(Q,r,t);return(0,vec3.l)(n)-t[3]}function N(t,r){const n=(0,vec3.d)(t,r),e=T(t);return n<=e*e}const Q=(0,vec3f64.c)(),W=R();Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:J,angleToSilhouette:G,axisAt:I,clear:function C(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function B(t,r,n){return z(t,r,n)?n:((0,ray.JI)(r,t,n),D(t,n,n))},closestPointOnSilhouette:Y,containsPoint:N,copy:_,create:R,distanceToSilhouette:function F(t,r){const n=(0,vec3.b)(vectorStacks.WM.get(),r,t),e=(0,vec3.p)(n),o=t[3]*t[3];return Math.sqrt(Math.abs(e-o))},elevate:function L(t,r,n){return t!==n&&(0,vec3.c)(n,t),n[3]=t[3]+r,n},fromCenterAndRadius:function q(t,r){return(0,vec4f64.f)(t[0],t[1],t[2],r)},fromRadius:function O(t,r){return t[0]=t[1]=t[2]=0,t[3]=r,t},fromValues:function E(t,r,n,e){return(0,vec4f64.f)(t,r,n,e)},getCenter:k,getRadius:T,intersectRay:z,intersectRayClosestSilhouette:function X(t,r,n){if(z(t,r,n))return n;const e=Y(t,r,vectorStacks.WM.get());return(0,vec3.a)(n,r.origin,(0,vec3.g)(vectorStacks.WM.get(),r.direction,(0,vec3.i)(r.origin,e)/(0,vec3.l)(r.direction))),n},intersectsRay:V,projectPoint:D,setAltitudeAt:function K(t,r,n,e){const o=J(t,r),s=I(t,r,Axis_n.Z,Q),c=(0,vec3.g)(Q,s,n-o);return(0,vec3.a)(e,r,c)},setExtent:function Z(r,n,e){return Logger.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),r===e?e:_(r,e)},tmpSphere:W,wrap:function w(t){return t}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/ObjectStack.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>s});var _nextTick_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/nextTick.js");class s{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,_nextTick_js__WEBPACK_IMPORTED_MODULE_0__.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024},"./node_modules/@arcgis/core/geometry/geometryAdapters/json.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>t});const t={convertToGEGeometry:function s(t,s){return null==s?null:t.convertJSONToGeometry(s)},exportPoint:function n(t,s,n){const e=new i(t.getPointX(s),t.getPointY(s),n),o=t.hasZ(s),h=t.hasM(s);return o&&(e.z=t.getPointZ(s)),h&&(e.m=t.getPointM(s)),e},exportPolygon:function o(t,s,i){return new e(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))},exportPolyline:function a(t,s,i){return new h(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))},exportMultipoint:function c(t,s,i){return new r(t.exportPoints(s),i,t.hasZ(s),t.hasM(s))},exportExtent:function m(t,s,i){const n=t.hasZ(s),e=t.hasM(s),o=new x(t.getXMin(s),t.getYMin(s),t.getXMax(s),t.getYMax(s),i);if(n){const i=t.getZExtent(s);o.zmin=i.vmin,o.zmax=i.vmax}if(e){const i=t.getMExtent(s);o.mmin=i.vmin,o.mmax=i.vmax}return o}};class i{constructor(t,s,i){this.x=t,this.y=s,this.spatialReference=i,this.z=void 0,this.m=void 0}}class e{constructor(t,s,i,n){this.rings=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class h{constructor(t,s,i,n){this.paths=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class r{constructor(t,s,i,n){this.points=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}class x{constructor(t,s,i,n,e){this.xmin=t,this.ymin=s,this.xmax=i,this.ymax=n,this.spatialReference=e,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},"./node_modules/@arcgis/core/geometry/support/lineSegment.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ue:()=>v,nF:()=>j,zk:()=>b});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function v(t){return t?{origin:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)(t.origin),vector:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)(t.vector)}:{origin:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),vector:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}function b(t,r,e=v()){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.c)(e.origin,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.b)(e.vector,r,t),e}function j(t,r,n){return function A(r,n,u,a,g){const{vector:v,origin:p}=r,h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.b)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__.WM.get(),n,p),m=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.e)(v,h)/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.p)(v);return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(g,v,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.uZ)(m,u,a)),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.a)(g,g,r.origin)}(t,r,0,1,n)}(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__.x((()=>v()))},"./node_modules/@arcgis/core/geometry/support/plane.js":(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");var vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/support/vector.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)();(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)();var $;!function(n){n[n.NONE=0]="NONE",n[n.CLAMP=1]="CLAMP",n[n.INFINITE_MIN=4]="INFINITE_MIN",n[n.INFINITE_MAX=8]="INFINITE_MAX"}($||($={}));$.INFINITE_MIN,$.INFINITE_MAX,$.INFINITE_MAX},"./node_modules/@arcgis/core/geometry/support/ray.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JI:()=>q,Ue:()=>d,re:()=>p});__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js");var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function d(i){return i?m((0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)(i.origin),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)(i.direction)):m((0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)())}function m(i,n){return{origin:i,direction:n}}function p(i,n){const r=S.get();return r.origin=i,r.direction=n,r}function q(i,n,r){const o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.e)(i.direction,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.b)(r,n,i.origin));return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.a)(r,i.origin,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(r,i.direction,o)),r}const S=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__.x((()=>d()))},"./node_modules/@arcgis/core/geometry/support/vector.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EU:()=>a});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");function a(o,s){const c=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.e)(o,s)/((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.l)(o)*(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.l)(s));return-(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZF)(c)}(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()},"./node_modules/@arcgis/core/geometry/support/vectorStacks.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MP:()=>f,WM:()=>vectorStacks_c});var byteSizeEstimations=__webpack_require__("./node_modules/@arcgis/core/core/byteSizeEstimations.js"),nextTick=__webpack_require__("./node_modules/@arcgis/core/core/nextTick.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat4f64.js"),quatf64=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf64.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js");class a{constructor(t,e,s){this._itemByteSize=t,this._itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(s/this._itemByteSize)}get(){0===this._itemsPtr&&(0,nextTick.Y)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this._itemCreate(t,e*this._itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=c){return new a(16,vec2f64.c,t)}static createVec3f64(t=c){return new a(24,vec3f64.b,t)}static createVec4f64(t=c){return new a(32,vec4f64.a,t)}static createMat3f64(t=c){return new a(72,mat3f64.a,t)}static createMat4f64(t=c){return new a(128,mat4f64.a,t)}static createQuatf64(t=c){return new a(32,quatf64.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const c=4*byteSizeEstimations.Y8.KILOBYTES,vectorStacks_c=(a.createVec2f64(),a.createVec3f64()),f=(a.createVec4f64(),a.createMat3f64(),a.createMat4f64());a.createQuatf64()},"./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_W:()=>f,iV:()=>g,oj:()=>M});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/geometryAdapters/json.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");const l=[0,0];function h(s,t){if(!t)return null;if("x"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,l),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if("xmin"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,l),[e.xmax,e.ymax]=s(t.xmax,t.ymax,l),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return"rings"in t?{rings:c(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:p(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function c(s,t){const e=[];for(const n of s)e.push(p(n,t));return e}function p(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function f(e,n){if(!e||!n)return;const r=Array.isArray(e)?e.map((t=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.pC)(t.geometry)?t.geometry.spatialReference:null)).filter(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.pC):[e];await(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.iQ)(r.map((s=>({source:s,dest:n}))))}const x=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_3__.hG),y=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_3__.R6);function g(s,t,a,m){if(!s)return s;if(a||(a=t,t=s.spatialReference),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.JY)(t)||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.JY)(a)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.fS)(t,a))return s;if((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_3__.Q8)(t,a)){const t=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.sS)(a)?x(s):y(s);return t.spatialReference=a,t}return(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.oj)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_1__.N,[s],t,a,null,m)[0]}const j=new class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,e){if(!s||!s.length||!t||!e||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.fS)(t,e))return s;const n={geometries:s,inSpatialReference:t,outSpatialReference:e,resolve:null};return this._jobs.push(n),new Promise((s=>{n.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:a}=s;(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_3__.Q8)(r,i)?(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.sS)(i)?a(t.map(x)):a(t.map(y)):a((0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.oj)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_1__.N,t,r,i,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function M(s,t,e){return j.push(s,t,e)}},"./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SceneLayerSnappingSourceWorker_y});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js"),lineSegment=__webpack_require__("./node_modules/@arcgis/core/geometry/support/lineSegment.js"),sphere=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),QueryEngineResult=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js"),ObjectPool=__webpack_require__("./node_modules/@arcgis/core/core/ObjectPool.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),ObjectStack=__webpack_require__("./node_modules/@arcgis/core/core/ObjectStack.js"),vec4f64=(__webpack_require__("./node_modules/@arcgis/core/chunks/mat4.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/vec4.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/vec4f64.js")),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js");function a(r){return r?{ray:(0,ray.Ue)(r.ray),c0:r.c0,c1:r.c1}:{ray:(0,ray.Ue)(),c0:0,c1:Number.MAX_VALUE}}new ObjectStack.x((()=>a()));var U,l;__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/support/vectorStacks.js");function frustum_i(T,_){for(let O=0;O<v.NUM;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}!function(T){T[T.LEFT=0]="LEFT",T[T.RIGHT=1]="RIGHT",T[T.BOTTOM=2]="BOTTOM",T[T.TOP=3]="TOP",T[T.NEAR=4]="NEAR",T[T.FAR=5]="FAR"}(U||(U={})),function(T){T[T.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",T[T.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",T[T.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",T[T.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",T[T.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",T[T.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",T[T.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",T[T.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(l||(l={}));l.FAR_BOTTOM_RIGHT,l.NEAR_BOTTOM_RIGHT,l.NEAR_BOTTOM_LEFT,l.FAR_BOTTOM_LEFT,l.NEAR_BOTTOM_LEFT,l.NEAR_BOTTOM_RIGHT,l.NEAR_TOP_RIGHT,l.NEAR_TOP_LEFT,l.FAR_BOTTOM_RIGHT,l.FAR_BOTTOM_LEFT,l.FAR_TOP_LEFT,l.FAR_TOP_RIGHT,l.NEAR_BOTTOM_RIGHT,l.FAR_BOTTOM_RIGHT,l.FAR_TOP_RIGHT,l.NEAR_TOP_RIGHT,l.FAR_BOTTOM_LEFT,l.NEAR_BOTTOM_LEFT,l.NEAR_TOP_LEFT,l.FAR_TOP_LEFT,l.FAR_TOP_LEFT,l.NEAR_TOP_LEFT,l.NEAR_TOP_RIGHT,l.FAR_TOP_RIGHT;var v,h;!function(T){T[T.NUM=6]="NUM"}(v||(v={})),function(T){T[T.NUM=8]="NUM"}(h||(h={}));(0,vec4f64.f)(-1,-1,-1,1),(0,vec4f64.f)(1,-1,-1,1),(0,vec4f64.f)(1,1,-1,1),(0,vec4f64.f)(-1,1,-1,1),(0,vec4f64.f)(-1,-1,1,1),(0,vec4f64.f)(1,-1,1,1),(0,vec4f64.f)(1,1,1,1),(0,vec4f64.f)(-1,1,1,1),new ObjectStack.x(a),function I(){return[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()]}();var Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");class Octree_g{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this._objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new S,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),S.clearPool(),Octree_R[0]=null,w.prune(),K.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const n=S.acquire();for(let o=0;o<t;o++){const t=e[o];this._isDegenerate(t)?this._degenerateObjects.add(t):(n.init(this._root),this._add(t,n))}S.release(n)}remove(t,n=null){this._objectCount-=t.length;const o=S.acquire();for(const s of t){const t=(0,maybe.pC)(n)?n:(0,sphere.h)(this._objectToBoundingSphere(s),C);Octree_M(t[3])?(o.init(this._root),this._remove(s,t,o)):this._degenerateObjects.delete(s)}S.release(o),this._shrink()}update(e,t){if(!Octree_M(t[3])&&this._isDegenerate(e))return;const n=function Octree_v(e){return Octree_R[0]=e,Octree_R}(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const o=(0,ray.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(o,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(o,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(o,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,o){const s=(0,ray.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(s,e,o))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(s,e,o)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(s,e,o)&&n(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n,i=(()=>!0),r=1/0){let h=1/0,a=1/0,d=null;const u=z(e,t),c=o=>{if(--r,!i(o))return;const s=this._objectToBoundingSphere(o);if(!frustum_i(n,s))return;const u=E(e,t,(0,sphere.g)(s)),c=u-s[3],f=u+s[3];c<h&&(h=c,a=f,d=o)};return this._forEachNodeDepthOrdered(this._root,(i=>{if(r<=0||!frustum_i(n,i.bounds))return!1;if((0,vec3.g)(Octree_y,u,i.halfSize),(0,vec3.a)(Octree_y,Octree_y,i.bounds),E(e,t,Octree_y)>a)return!1;const h=i.node;return h.terminals.forAll((e=>c(e))),null!==h.residents&&h.residents.forAll((e=>c(e))),!0}),e,t),d}forEachInDepthRange(e,t,n,i,r,h,a){let d=-1/0,u=1/0;const c={setRange:e=>{n===Octree_g.DepthOrder.FRONT_TO_BACK?(d=Math.max(d,e.near),u=Math.min(u,e.far)):(d=Math.max(d,-e.far),u=Math.min(u,-e.near))}};c.setRange(i);const f=E(t,n,e),m=z(t,n),p=z(t,-n),b=e=>{if(!a(e))return;const o=this._objectToBoundingSphere(e),s=(0,sphere.g)(o),i=E(t,n,s)-f,m=i-o[3],p=i+o[3];m>u||p<d||!frustum_i(h,o)||r(e,c)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!frustum_i(h,e.bounds))return!1;if((0,vec3.g)(Octree_y,m,e.halfSize),(0,vec3.a)(Octree_y,Octree_y,e.bounds),E(t,n,Octree_y)-f>u)return!1;if((0,vec3.g)(Octree_y,p,e.halfSize),(0,vec3.a)(Octree_y,Octree_y,e.bounds),E(t,n,Octree_y)-f<d)return!1;const i=e.node;return i.terminals.forAll((e=>b(e))),null!==i.residents&&i.residents.forAll((e=>b(e))),!0}),t,n)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize)))}forEachNeighbor(e,t){const n=(0,sphere.a)(t),o=(0,sphere.g)(t),s=t=>{const s=this._objectToBoundingSphere(t),r=(0,sphere.a)(s),h=n+r;return!((0,vec3.d)((0,sphere.g)(s),o)-h*h<=0)||e(t)};let r=!0;const h=e=>{r&&(r=s(e))};this._forEachNode(this._root,(e=>{const t=(0,sphere.a)(e.bounds),s=n+t;if((0,vec3.d)((0,sphere.g)(e.bounds),o)-s*s>0)return!1;const a=e.node;return a.terminals.forAll(h),r&&null!==a.residents&&a.residents.forAll(h),r})),r&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return x(t.bounds,2*-t.halfSize,Octree_k),x(t.bounds,2*t.halfSize,q),(0,Util.yK)(e.origin,e.direction,Octree_k,q)}_intersectsNodeWithOffset(e,t,n){return x(t.bounds,2*-t.halfSize,Octree_k),x(t.bounds,2*t.halfSize,q),n.applyToMinMax(Octree_k,q),(0,Util.yK)(e.origin,e.direction,Octree_k,q)}_intersectsObject(e,t){const n=this._objectToBoundingSphere(t);return!(n[3]>0)||(0,sphere.j)(n,e)}_intersectsObjectWithOffset(e,t,n){const o=this._objectToBoundingSphere(t);return!(o[3]>0)||(0,sphere.j)(n.applyToBoundingSphere(o),e)}_forEachNode(e,t){let n=S.acquire().init(e);const o=[n];for(;0!==o.length;){if(n=o.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++)n.node.children[e]&&o.push(S.acquire().init(n).advance(e));S.release(n)}}_forEachNodeDepthOrdered(e,t,n,o=Octree_g.DepthOrder.FRONT_TO_BACK){let s=S.acquire().init(e);const i=[s];for(function T(e,t,n){if(!K.length)for(let o=0;o<8;++o)K.push({index:0,distance:0});for(let o=0;o<8;++o){const n=Octree_A[o];K.data[o].index=o,K.data[o].distance=E(e,t,n)}K.sort(((e,t)=>e.distance-t.distance));for(let o=0;o<8;++o)n[o]=K.data[o].index}(n,o,W);0!==i.length;){if(s=i.pop(),t(s)&&!s.isLeaf())for(let e=7;e>=0;--e){const t=W[e];s.node.children[t]&&i.push(S.acquire().init(s).advance(t))}S.release(s)}}_remove(e,t,n){w.clear();const o=n.advanceTo(t,((e,t)=>{w.push(e.node),w.push(t)}))?n.node.terminals:n.node.residents;if(o.removeUnordered(e),0===o.length)for(let s=w.length-2;s>=0;s-=2){const e=w.data[s],t=w.data[s+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new PooledArray.Z({shrink:!0})),!0)}_add(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const o=S.acquire().init(e);this._add(t.getItemAt(n),o),S.release(o)}}_grow(e,t){if(0!==t&&(Octree_N(e,t,(e=>this._objectToBoundingSphere(e)),Octree_I),Octree_M(Octree_I[3])&&!this._fitsInsideTree(Octree_I)))if(this._nodeIsEmpty(this._root.node))(0,sphere.h)(Octree_I,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(Octree_I);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(Octree_I,e):this._growRootAsSubNode(e),S.release(e)}}_rebuildTree(e,t){(0,vec3.c)(Octree_P,t.bounds),Octree_P[3]=t.halfSize,Octree_N([e,Octree_P],2,(e=>e),Octree_L);const n=S.acquire().init(this._root);this._root.initFrom(null,Octree_L,Octree_L[3]),this._root.increaseHalfSize(1.25),this._forEachNode(n,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),S.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let o=-1/0;const s=this._root.bounds,i=this._root.halfSize;for(let h=0;h<3;h++){const e=s[h]-i-(n[h]-t),r=n[h]+t-(s[h]+i),a=Math.max(0,Math.ceil(e/(2*i))),d=Math.max(0,Math.ceil(r/(2*i)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);o=Math.max(o,l),Octree_H[h].min=a,Octree_H[h].max=d}for(let h=0;h<3;h++){let e=Octree_H[h].min,t=Octree_H[h].max;const n=(o-(e+t))/2;e+=Math.ceil(n),t+=Math.floor(n);const r=s[h]-i-e*i*2;F[h]=r+(t+e)*i}const r=o*i;return F[3]=r*Octree_B,S.acquire().initFrom(null,F,r,0)}_growRootAsSubNode(e){const t=this._root.node;(0,vec3.c)(Octree_I,this._root.bounds),Octree_I[3]=this._root.halfSize,this._root.init(e),e.advanceTo(Octree_I,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,o=0;for(;o<t.length&&null==e;)n=o++,e=t[n];for(;o<t.length;)if(t[o++])return-1;return n}_isDegenerate(e){return!Octree_M(this._objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}class S{constructor(){this.bounds=(0,sphere.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(t,n,o,s=this.depth){return this.node=(0,maybe.pC)(t)?t:S.createEmptyNode(),(0,maybe.pC)(n)&&(0,sphere.h)(n,this.bounds),this.halfSize=o,this.depth=s,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*Octree_B}advance(e){let t=this.node.children[e];t||(t=S.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=Octree_A[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,n=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const o=this._childIndex(e);t&&t(this,o),this.advance(o)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new PooledArray.Z({shrink:!0}),residents:new PooledArray.Z({shrink:!0})}}static acquire(){return S._pool.acquire()}static release(e){S._pool.release(e)}static clearPool(){S._pool.prune()}}function Octree_O(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function Octree_j(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function x(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function Octree_N(e,t,n,o){if(1===t){const t=n(e[0]);(0,sphere.h)(t,o)}else{Octree_k[0]=1/0,Octree_k[1]=1/0,Octree_k[2]=1/0,q[0]=-1/0,q[1]=-1/0,q[2]=-1/0;for(let o=0;o<t;o++){const t=n(e[o]);Octree_M(t[3])&&(Octree_O(Octree_k,t),Octree_j(q,t))}(0,vec3.h)(o,Octree_k,q,.5),o[3]=Math.max(q[0]-Octree_k[0],q[1]-Octree_k[1],q[2]-Octree_k[2])/2}}function z(e,t){let n,o=1/0;for(let s=0;s<8;++s){const i=E(e,t,D[s]);i<o&&(o=i,n=D[s])}return n}function E(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function Octree_M(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}S._pool=new ObjectPool.Z(S),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(Octree_g||(Octree_g={}));const Octree_A=[(0,vec3f64.f)(-1,-1,-1),(0,vec3f64.f)(1,-1,-1),(0,vec3f64.f)(-1,1,-1),(0,vec3f64.f)(1,1,-1),(0,vec3f64.f)(-1,-1,1),(0,vec3f64.f)(1,-1,1),(0,vec3f64.f)(-1,1,1),(0,vec3f64.f)(1,1,1)],D=[(0,vec3f64.f)(-1,-1,-1),(0,vec3f64.f)(-1,-1,1),(0,vec3f64.f)(-1,1,-1),(0,vec3f64.f)(-1,1,1),(0,vec3f64.f)(1,-1,-1),(0,vec3f64.f)(1,-1,1),(0,vec3f64.f)(1,1,-1),(0,vec3f64.f)(1,1,1)],Octree_B=Math.sqrt(3),Octree_R=[null];const F=(0,sphere.c)(),Octree_y=(0,vec3f64.c)(),Octree_k=(0,vec3f64.c)(),q=(0,vec3f64.c)(),w=new PooledArray.Z,C=(0,sphere.c)(),Octree_I=(0,sphere.c)(),Octree_P=(0,sphere.c)(),Octree_L=(0,sphere.c)(),Octree_H=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],K=new PooledArray.Z,W=[0,0,0,0,0,0,0,0],V=Octree_g;var edgeProcessing=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing.js");function sceneLayerSnappingUtils_a(t,a,e){const i=(0,sphere.c)(),m=(0,sphere.g)(i);return(0,vec3.z)(m,m,t,.5),(0,vec3.z)(m,m,a,.5),i[3]=(0,vec3.i)(m,t),(0,vec3.a)(m,m,e),i}let SceneLayerSnappingSourceWorker_j=class{constructor(){this._idToComponent=new Map,this._components=new V((e=>e.bounds)),this._edges=new V((e=>e.bounds)),this._tmpLineSegment=(0,lineSegment.Ue)(),this._tmpP1=(0,vec3f64.c)(),this._tmpP2=(0,vec3f64.c)(),this._tmpP3=(0,vec3f64.c)(),this.remoteClient=null}async fetchCandidates(e,t){await Promise.resolve(),(0,promiseUtils.k_)(t),await this._ensureEdgeLocations(e,t);const s=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,s),s.length<1e3)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,o){const i=[];if(this._components.forEachNeighbor((e=>{if((0,maybe.Wi)(e.info)){const{id:t,uid:s}=e;i.push({id:t,uid:s})}return!0}),e.bounds),!i.length)return;const n={components:i},r=await this.remoteClient.invoke("fetchAllEdgeLocations",n,(0,maybe.Pt)(o,{}));for(const t of r.components)this._setFetchEdgeLocations(t)}async add(e){const t=new SceneLayerSnappingSourceWorker_E(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((s=>(s.component===t&&e.push(s),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const s=this._idToComponent.get(e.id);if((0,maybe.Wi)(s)||e.uid!==s.uid)return;const o=edgeProcessing.n_.createView(e.locations),i=new Array(o.count),n=(0,vec3f64.c)(),r=(0,vec3f64.c)();for(let t=0;t<o.count;t++){o.position0.getVec(t,n),o.position1.getVec(t,r);const d=sceneLayerSnappingUtils_a(n,r,e.origin),c=new SceneLayerSnappingSourceWorker_C(s,t,d);i[t]=c}this._edges.add(i);const{objectIds:c,origin:a}=e;s.info={locations:o,objectIds:c,origin:a}}_addCandidates(e,t,s){const{info:o}=t.component,{origin:i,objectIds:r}=o,d=o.locations,c=d.position0.getVec(t.index,this._tmpP1),a=d.position1.getVec(t.index,this._tmpP2);(0,vec3.a)(c,c,i),(0,vec3.a)(a,a,i);const p=r[d.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,c,a,s),this._addVertexCandidate(e,p,c,s),this._addVertexCandidate(e,p,a,s)}_addEdgeCandidate(e,t,s,o,i){if(!(e.types&QueryEngineResult.r.EDGE))return;const n=(0,sphere.g)(e.bounds),d=(0,lineSegment.zk)(s,o,this._tmpLineSegment),a=(0,lineSegment.nF)(d,n,this._tmpP3);(0,sphere.m)(e.bounds,a)&&i.push({type:"edge",objectId:t,target:(0,vec3f64.a)(a),distance:(0,vec3.i)(n,a),start:(0,vec3f64.a)(s),end:(0,vec3f64.a)(o)})}_addVertexCandidate(e,t,s,o){if(!(e.types&QueryEngineResult.r.VERTEX))return;const i=(0,sphere.g)(e.bounds);(0,sphere.m)(e.bounds,s)&&o.push({type:"vertex",objectId:t,target:(0,vec3f64.a)(s),distance:(0,vec3.i)(i,s)})}};SceneLayerSnappingSourceWorker_j=(0,tslib_es6._)([(0,subclass.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],SceneLayerSnappingSourceWorker_j);const SceneLayerSnappingSourceWorker_y=SceneLayerSnappingSourceWorker_j;class SceneLayerSnappingSourceWorker_E{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++SceneLayerSnappingSourceWorker_E.uid}}SceneLayerSnappingSourceWorker_E.uid=0;class SceneLayerSnappingSourceWorker_C{constructor(e,t,s){this.component=e,this.index=t,this.bounds=s}}}}]);