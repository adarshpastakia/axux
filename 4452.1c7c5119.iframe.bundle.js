/*! For license information please see 4452.1c7c5119.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[4452],{"./packages/data/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XA:()=>AxTreePanel,Pv:()=>AxVirtualItem,_d:()=>AxVirtualList});var dist=__webpack_require__("./packages/core/dist/index.js");const ar_namespaceObject=JSON.parse('{"label":{"noRecords":"Ù„Ø§ ØªØ³Ø¬ÙŠÙ„Ø§Øª"},"tree":{"noItems":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±","error":"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±","loading":"ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±â€¦"},"datagrid":{"empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…ØªØ§Ø­Ø©"},"json":{"empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®ØµØ§Ø¦Øµ Ø¨ÙŠØ§Ù†Ø§Øª","true":"Ù†Ø¹Ù…","false":"Ø±Ù‚Ù…"},"checkList":{"empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¦Ù…Ø©"},"histogram":{"empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ©"},"action":{"find":"ØªØ¬Ø¯â€¦","copy":"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ø³Ø®","filter":"Ù…Ù†Ù‚ÙŠâ€¦","showShortcuts":"Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­â€¦","collapseAll":"Ø§Ù†Ù‡ÙŠØ§Ø± Ø¬Ù…ÙŠØ¹","expandAll":"ØªÙˆØ³ÙŠØ¹ Ø§Ù„ÙƒÙ„","checkAll":"ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙ„","uncheckAll":"Ø§Ù„ØºØ§Ø¡Ø§Ù„ÙƒÙ„","addFilter":"Ø£Ø¶Ù Ø¹Ø§Ù…Ù„ ØªØµÙÙŠØ©","addFilterNot":"Ø¥Ø¶Ø§ÙØ© Ù„Ø§ ØªØµÙÙŠØ©"}}'),en_namespaceObject=JSON.parse('{"label":{"noRecords":"No Records"},"tree":{"noItems":"No items","error":"Error loading items","loading":"Loading items..."},"datagrid":{"empty":"No records available"},"json":{"empty":"No data properties","true":"Yes","false":"No"},"checkList":{"empty":"No list items"},"histogram":{"empty":"No histograms"},"action":{"find":"Find...","copy":"Copy Value","filter":"Filter...","showShortcuts":"Keyboard shortcuts...","collapseAll":"Collapse All","expandAll":"Expand All","checkAll":"Check All","uncheckAll":"Uncheck All","addFilter":"Add Filter","addFilterNot":"Add not Filter"}}');(0,dist.a3)("data",{en:en_namespaceObject,ar:ar_namespaceObject});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),hooks_useBadge=__webpack_require__("./packages/core/dist/hooks/useBadge.js"),appIcons=__webpack_require__("./packages/core/dist/types/appIcons.js"),utilities_dist=__webpack_require__("./packages/utilities/dist/index.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");var animations=__webpack_require__("./packages/core/dist/animations/index.js"),handlers=__webpack_require__("./packages/utilities/dist/handlers.js"),date_dist=__webpack_require__("./packages/date/dist/index.js");const DatagridContext=(0,react.createContext)({}),DatagridProvider=({children,columns=[],data=[],className,isSelectable,onRowSelect,sort,onSort,onRowExpand,datagridRef,lastScroll,onScroll,canExpand,...props})=>{const ghostRef=(0,react.useRef)(null),[widths,setWidths]=(0,react.useState)(new Map),refBody=(0,react.useRef)(null);(0,react.useEffect)((()=>{refBody.current?.scrollTo({top:0,behavior:"auto"})}),[data]),(0,react.useImperativeHandle)(datagridRef,(()=>({hilight:row=>{refBody.current?.querySelectorAll(".ax-datagrid__row.hilight").forEach((el=>el?.classList.remove("hilight")));const el=refBody.current?.querySelector(`[data-row="${row}"]`);el?.scrollIntoView({behavior:"smooth",block:"center"}),el?.classList.add("hilight")},unhilight:()=>{refBody.current?.querySelectorAll(".ax-datagrid__row.hilight").forEach((el=>el?.classList.remove("hilight")))},scrollTo:row=>{const el=refBody.current?.querySelector(`[data-row="${row}"]`);el?.scrollIntoView({behavior:"smooth"})}})),[]),(0,react.useEffect)((()=>{setWidths(new Map(columns.map((({name,width,minWidth=0,maxWidth=999})=>[name.toString(),width??Math.min(Math.max(180,minWidth),maxWidth)]))))}),[columns]);const startResize=(0,react.useCallback)((e=>{const colEl=e.currentTarget.closest(".ax-datagrid__header--cell");colEl&&null!=ghostRef.current&&((colEl,ghostEl,callback)=>{const placeholder=ghostEl.firstElementChild,isRtl="rtl"===getComputedStyle(colEl).direction,onResize=evt=>{const box=colEl.getBoundingClientRect(),x=isRtl?box.left-evt.clientX:evt.clientX-box.right;placeholder.style.width=`${colEl.offsetWidth+x}px`},onResizeEnd=()=>{callback(placeholder.offsetWidth),ghostEl.style.display="none",document.removeEventListener("mousemove",onResize),document.removeEventListener("mouseup",onResizeEnd)},box=colEl.getBoundingClientRect();if(null!=colEl.parentElement){const parentBox=colEl.parentElement?.getBoundingClientRect();isRtl?(placeholder.style.left="unset",placeholder.style.right=parentBox.right-box.right+"px"):(placeholder.style.right="unset",placeholder.style.left=parentBox.left-box.left+"px")}placeholder.style.width=`${colEl.offsetWidth}px`,placeholder.style.minWidth=colEl.style.minWidth||"48px",placeholder.style.maxWidth=colEl.style.maxWidth||"75vw",ghostEl.style.display="block",document.addEventListener("mousemove",onResize),document.addEventListener("mouseup",onResizeEnd)})(colEl,ghostRef.current,(width=>{setWidths(new Map(widths.set(colEl.dataset.name??"",width)))}))}),[widths]);return(0,react.useEffect)((()=>{refBody?.current?.scrollTo({top:lastScroll,behavior:"instant"})}),[]),(0,jsx_runtime.jsx)(DatagridContext.Provider,{value:{columns,data,widths,startResize,onRowExpand,isSelectable,onRowSelect,canExpand,sort,onSort},children:(0,jsx_runtime.jsxs)("div",{className:`ax-datagrid ${className??""}`,children:[(0,jsx_runtime.jsx)("div",{className:`ax-datagrid__wrapper ${className??""}`,onScroll:e=>onScroll?.(e.currentTarget.scrollTop),ref:refBody,children}),(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__resize--ghost",ref:ghostRef,children:(0,jsx_runtime.jsx)("div",{})})]})})},useDatagridContext=()=>(0,react.useContext)(DatagridContext),BodyCell=(0,react.memo)((({row,name,minWidth,maxWidth,type,align,format,valueMap,render,record})=>{const{widths}=useDatagridContext(),width=(0,react.useMemo)((()=>widths.get(name.toString())??180),[widths,name]),content=(0,react.useMemo)((()=>{const value=(0,utilities_dist.getByPath)(record,name.toString());if(null!=render)return render(value,record,row);if("boolean"===type){return(valueMap??{true:"Yes",false:"no"})[""+((0,utilities_dist.isTrue)(value)?"true":"false")]}return null!=valueMap&&"string"===type&&value in valueMap?valueMap[value]:"date"===type?(0,jsx_runtime.jsx)(date_dist.$7,{date:value,format}):"number"===type?utilities_dist.Format.number(value,format):value??""}),[name,record,render,format,row,type,valueMap]);return(0,jsx_runtime.jsx)("div",{"data-name":name,"data-align":align,className:"ax-datagrid__body--cell",style:{minWidth,maxWidth,width},children:content})}));BodyCell.displayName="AxDatagrid.BodyCell";const BodyRow=(0,react.memo)((({row,record})=>{const{columns,isSelectable,onRowSelect,onRowExpand,canExpand}=useDatagridContext(),[isExpanded,setExpanded]=(0,react.useState)(!1),[expandedNode,setExpandedNode]=(0,react.useState)(),handleExpand=(0,react.useCallback)((()=>{if(!expandedNode){const node=onRowExpand?.(record);return setExpandedNode(node),setExpanded(!!node)}setExpanded(!isExpanded)}),[isExpanded,expandedNode,record,onRowExpand]),[start,end,cols]=(0,react.useMemo)((()=>[columns.filter((col=>!0===col.isLocked||"start"===col.isLocked)),columns.filter((col=>"end"===col.isLocked)),columns.filter((col=>!col.isLocked))]),[columns]);return(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__row","data-row":row,children:[(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__row--flex","data-selectable":isSelectable,onClick:isSelectable?(0,handlers.qk)((()=>onRowSelect?.(record))):void 0,children:[(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__fixStart",children:[!(null==onRowExpand)&&(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__body--cell "+(!1!==canExpand?.(record)?"cursor-pointer":"opacity-30 pointer-events-none"),onClick:(0,handlers.qk)(handleExpand,{stopPropagation:!0}),children:(0,jsx_runtime.jsx)(dist.Ng,{icon:isExpanded?appIcons.U.iconCollapseMinus:appIcons.U.iconExpandPlus})}),start.map(((props,column)=>(0,jsx_runtime.jsx)(BodyCell,{...props,record,row},column)))]}),cols.map(((props,column)=>(0,jsx_runtime.jsx)(BodyCell,{...props,record,row},column))),(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__fixEnd",children:end.map(((props,column)=>(0,jsx_runtime.jsx)(BodyCell,{...props,record,row},column)))})]}),isExpanded&&expandedNode]})}));BodyRow.displayName="AxDatagrid.BodyRow";const EmptyRow=()=>{const{columns,widths,onRowExpand}=useDatagridContext(),[start,end,cols]=(0,react.useMemo)((()=>[columns.filter((col=>!0===col.isLocked||"start"===col.isLocked)),columns.filter((col=>"end"===col.isLocked)),columns.filter((col=>!col.isLocked))]),[columns]);return(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__row flex-1 pointer-events-none",children:(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__row--flex min-h-full",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__fixStart",children:[!(null==onRowExpand)&&(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__body--cell",children:(0,jsx_runtime.jsx)(dist.Ng,{icon:""})}),start.map((({minWidth,maxWidth,name},column)=>(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__body--cell",style:{minWidth,maxWidth,width:widths.get(name.toString())??180}},column)))]}),cols.map((({name,minWidth,maxWidth},column)=>(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__body--cell",style:{minWidth,maxWidth,width:widths.get(name.toString())??180}},column))),(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__fixEnd",children:end.map((({minWidth,maxWidth,name},column)=>(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__body--cell",style:{minWidth,maxWidth,width:widths.get(name.toString())??180}},column)))})]})})},Body=(0,react.memo)((()=>{const{data}=useDatagridContext();return(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__body",children:[data.map(((record,row)=>(0,jsx_runtime.jsx)(BodyRow,{record,row},row))),(0,jsx_runtime.jsx)(EmptyRow,{})]})}));Body.displayName="AxDatagrid.Body";const HeaderCell=(0,react.memo)((({icon,name,isPrimary,isResizeable,isSortable,tooltip,rtlFlip,label,minWidth,maxWidth})=>{const{startResize,widths,sort,onSort}=useDatagridContext(),width=(0,react.useMemo)((()=>widths.get(name.toString())??180),[widths,name]),tooltipContent=(0,react.useMemo)((()=>tooltip?`${isPrimary?"ðŸ”‘":""}${!0!==tooltip?tooltip:label}`:""),[isPrimary,label,tooltip]),handleSort=(0,react.useCallback)((()=>{onSort?.(name.toString(),sort?.name===name&&"asc"===sort.order?"desc":"asc")}),[onSort,name,sort]);return(0,jsx_runtime.jsxs)("div",{"data-name":name,className:"ax-datagrid__header--cell",style:{minWidth,maxWidth,width},children:[(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__header--label","data-sortable":isSortable,"data-centered":!label&&!!icon,onClick:(0,handlers.qk)(handleSort),"data-tooltip":tooltipContent,"data-tooltip-placement":"bottom-start",children:[icon&&(0,jsx_runtime.jsx)(dist.Ng,{icon,rtlFlip}),isPrimary&&(0,jsx_runtime.jsx)(dist.Ng,{rtlFlip:!0,icon:"M4 6.5C4 4 6 2 8.5 2S13 4 13 6.5C13 8.46 11.75 10.13 10 10.74V15H13V18H10V22H7V10.74C5.25 10.13 4 8.46 4 6.5M7 6.5C7 7.33 7.67 8 8.5 8S10 7.33 10 6.5 9.33 5 8.5 5 7 5.67 7 6.5"}),(0,jsx_runtime.jsx)("label",{children:label}),isSortable&&(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__header--sort","data-sort":sort?.name===name&&sort?.order,children:[(0,jsx_runtime.jsx)("span",{children:"â–¼"}),(0,jsx_runtime.jsx)("span",{children:"â–²"})]})]}),isResizeable&&(0,jsx_runtime.jsx)("div",{onMouseDown:startResize,className:"ax-datagrid__header--resize"})]})}));HeaderCell.displayName="AxDatagrid.HeaderCell";const Header=(0,react.memo)((()=>{const{columns,onRowExpand}=useDatagridContext(),[start,end,cols]=(0,react.useMemo)((()=>[columns.filter((col=>!0===col.isLocked||"start"===col.isLocked)),columns.filter((col=>"end"===col.isLocked)),columns.filter((col=>!col.isLocked))]),[columns]);return(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__header",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-datagrid__fixStart",children:[!(null==onRowExpand)&&(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__header--cell px-2",children:(0,jsx_runtime.jsx)(dist.Ng,{icon:""})}),start.map(((props,index)=>(0,jsx_runtime.jsx)(HeaderCell,{...props},index)))]}),cols.map(((props,index)=>(0,jsx_runtime.jsx)(HeaderCell,{...props},index))),(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__fixEnd",children:end.map(((props,index)=>(0,jsx_runtime.jsx)(HeaderCell,{...props},index)))})]})}));Header.displayName="AxDatagrid.Header";const AxDatagridComponent=({data=[],emptyDisplay,children,isLoading,...props})=>{const{t}=(0,es.$G)("data");return(0,jsx_runtime.jsxs)(DatagridProvider,{...props,data,onRowExpand:children,children:[(0,jsx_runtime.jsx)(Header,{}),data.length>0&&(0,jsx_runtime.jsx)(Body,{}),isLoading&&(0,jsx_runtime.jsx)("div",{className:"ax-datagrid__loader",children:(0,jsx_runtime.jsx)(animations.z$,{})}),!isLoading&&0===data.length&&(0,jsx_runtime.jsx)(react.Fragment,{children:emptyDisplay&&!(0,utilities_dist.isString)(emptyDisplay)?emptyDisplay:(0,jsx_runtime.jsx)(dist.aW.Empty,{size:"sm",message:emptyDisplay??t("datagrid.empty")})})]})};AxDatagridComponent.displayName="AxDatagrid";(0,react.memo)(AxDatagridComponent);var form_dist=__webpack_require__("./packages/form/dist/index.js");const AxVirtualItem=(0,react.memo)((({index,children,isLast,updateSize,isSticky,...rest})=>{const itemRef=(0,react.useRef)(null);return(0,react.useLayoutEffect)((()=>{const child=itemRef.current?.firstElementChild;if(child){const ob=new ResizeObserver((()=>{null!=child&&updateSize(index,child.offsetWidth,child.offsetHeight)}));return ob.observe(child),()=>{ob.unobserve(child),ob.disconnect()}}}),[]),(0,jsx_runtime.jsx)("div",{...rest,ref:itemRef,"data-index":index,"data-sticky":isSticky,"data-last-child":isLast,className:"ax-virtual__item",children})}),utilities_dist.isEqual);AxVirtualItem.displayName="AxVirtualItem";var memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js");const createItemList=(0,memoize_one_esm.Z)((items=>items)),VirtualList=({items,children,fullWidth,padding="md",orientation="vertical",height=48,width=48,hideScroller,isLoading,onLoadMore,onScroll,isSticky,listRef})=>{const count=(0,react.useDeferredValue)(items.length),itemList=createItemList(items.map(((item,idx)=>({index:idx,data:item,isSticky:!0===isSticky?.(idx),isLast:idx+1===items.length})))),{scrollerRef,scrollSize,pageIndex,startIndex,endIndex,springSize,scrollActive,handleScroll,updateCache,scrollToItem,scrollActions}=(({orientation="vertical",height=64,width=64,count=0})=>{const scrollerRef=(0,react.useRef)(null),sizeCache=(0,react.useRef)([]),ignoreScrollChange=(0,react.useRef)(!1),[pageCount,setPageCount]=(0,react.useState)(0),[pageIndex,setPageIndex]=(0,react.useState)(0),[scrollSize,setScrollSize]=(0,react.useState)(0),[scrollOffset,setScrollOffset]=(0,react.useState)(0);(0,react.useEffect)((()=>{sizeCache.current=new Array(count).fill([width,height]).map(((h,i)=>[Math.max(h[0],sizeCache.current[i]?.[0]??width),Math.max(h[1],sizeCache.current[i]?.[1]??height)]))}),[count,height,width,orientation]),(0,react.useEffect)((()=>{let idx=0;for(let tot=0;idx<count&&(tot+=sizeCache.current[idx]["vertical"===orientation?1:0],!(tot>=scrollOffset));idx++);setPageIndex(idx)}),[count,orientation,scrollOffset]);const[startIndex,endIndex,springSize]=(0,react.useMemo)((()=>{const index=Math.max(0,pageIndex-pageCount);return[index,pageIndex+pageCount+pageCount,new Array(index).fill(0).reduce(((t,_,i)=>t+sizeCache.current[i]["vertical"===orientation?1:0]),0)]}),[pageCount,pageIndex,orientation]);(0,react.useEffect)((()=>{if(scrollerRef.current){const el=scrollerRef.current,size="vertical"===orientation?height:width,handler=()=>{const scrollerSize="vertical"===orientation?scrollerRef.current?.offsetHeight:scrollerRef.current?.offsetWidth;setPageCount(Math.max(10,Math.round(Math.max(1e3,scrollerSize??0)/size)))},ob=new ResizeObserver(handler);return handler(),ob.observe(el),()=>{ob.unobserve(el),ob.disconnect()}}}),[scrollerRef.current,orientation,height,width]);const updateCache=(0,react.useCallback)(((index,width,height)=>{const oldSize=sizeCache.current[index];oldSize&&(width!==oldSize[0]&&(sizeCache.current[index][0]=width),height!==oldSize[1]&&(sizeCache.current[index][1]=height),setScrollSize(sizeCache.current.reduce(((t,h,i)=>t+(h["vertical"===orientation?1:0]??0)),0)+64))}),[orientation]),scrollActive=(0,react.useMemo)((()=>{const{scrollTop=0,scrollLeft=0,scrollWidth=0,scrollHeight=0,offsetWidth=0,offsetHeight=0}=scrollerRef.current??{};if("vertical"===orientation){if(scrollHeight===offsetHeight)return 0;if(0===scrollTop)return 1;if(scrollTop>=scrollHeight-offsetHeight-64)return 2}if("horizontal"===orientation){if(scrollWidth===offsetWidth)return 0;if(0===Math.abs(scrollLeft))return 1;if(Math.abs(scrollLeft)>=scrollWidth-offsetWidth-64)return 2}return 3}),[count,orientation,scrollOffset,scrollSize]),handleScroll=(0,react.useCallback)((evt=>{const{scrollTop,scrollLeft,scrollHeight,scrollWidth,offsetWidth,offsetHeight}=evt.currentTarget;return ignoreScrollChange.current||setScrollOffset("vertical"===orientation?scrollTop:Math.abs(scrollLeft)),"vertical"===orientation&&+scrollTop+ +offsetHeight>=+scrollHeight||"horizontal"===orientation&&Math.abs(+scrollLeft)+ +offsetWidth>=+scrollWidth}),[orientation]),scrollToItem=(0,react.useCallback)((index=>{ignoreScrollChange.current=!0,setPageIndex(index),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.scrollIntoView({behavior:"instant",block:"start"}),setTimeout((()=>ignoreScrollChange.current=!1),10)}),100)}),[]),scrollActions=(0,react.useMemo)((()=>({first(){scrollerRef.current?.scrollTo({top:0,left:0,behavior:"instant"})},pgup(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollTop??0)-scrollerRef.current?.offsetHeight??0,left:(scrollerRef.current?.scrollLeft??0)-scrollerRef.current?.offsetWidth??0,behavior:"smooth"})},pgdn(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollTop??0)+scrollerRef.current?.offsetHeight??0,left:(scrollerRef.current?.scrollLeft??0)+scrollerRef.current?.offsetWidth??0,behavior:"smooth"})},last(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollHeight??0)-(scrollerRef.current?.offsetHeight??0)-64,left:(scrollerRef.current?.scrollWidth??0)-(scrollerRef.current?.offsetWidth??0)-64,behavior:"instant"})}})),[orientation]);return{scrollerRef,pageIndex,startIndex,endIndex,springSize,scrollSize,scrollOffset,scrollActive,handleScroll,updateCache,scrollToItem,scrollActions}})({orientation,height,width,count}),scrollCallback=(0,react.useRef)((0,utilities_dist.debounce)((idx=>onScroll?.(idx))));(0,react.useEffect)((()=>{scrollCallback.current(pageIndex)}),[pageIndex]);const[stickiesStart,pagedList]=(0,react.useMemo)((()=>[itemList.slice(0,pageIndex).filter((item=>item.isSticky)),itemList.slice(startIndex,endIndex)]),[itemList,startIndex,endIndex]);return(0,react.useImperativeHandle)(listRef,(()=>({hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight"),scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight"),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.scrollIntoView({behavior:"instant",block:"nearest"})}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight")},scrollToItem(index){scrollToItem(index)}})),[]),(0,jsx_runtime.jsx)("div",{className:"ax-virtual-list",ref:scrollerRef,onScroll:evt=>handleScroll(evt)&&onLoadMore?.(),"data-padding":padding,"data-orientation":orientation,children:(0,jsx_runtime.jsxs)("div",{className:"ax-virtual__container",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-virtual__scroller "+(fullWidth?"flex-1":""),style:"vertical"===orientation?{minHeight:scrollSize,minWidth:width}:{minWidth:scrollSize,minHeight:height},children:[(0,jsx_runtime.jsx)("div",{style:"vertical"===orientation?{height:springSize}:{width:springSize,display:"inline-block"}}),(0,jsx_runtime.jsx)("div",{className:"ax-virtual__sticky",children:stickiesStart.map((({index,data,isSticky,isLast})=>children({data,index,key:index,isLast,isSticky,updateSize:updateCache})))}),pagedList.map((({index,data,isSticky,isLast})=>children({data,index,isLast,isSticky,key:index,updateSize:updateCache}))),onLoadMore&&(0,jsx_runtime.jsx)("div",{className:"ax-virtual__placeholder",children:isLoading&&(0,jsx_runtime.jsx)(dist.Xr.Card,{showIcon:!0})})]}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:"ax-virtual__tools",children:(0,jsx_runtime.jsxs)(dist.oG.Group,{isVertical:"vertical"===orientation,variant:"flat",children:[(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll to top",icon:appIcons.U.iconChevronUp,isDisabled:0==(2&scrollActive),onClick:()=>scrollActions.first()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll up",icon:appIcons.U.iconCaretUp,isDisabled:0==(2&scrollActive),onClick:()=>scrollActions.pgup()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll down",icon:appIcons.U.iconCaretDown,isDisabled:scrollActive%2==0,onClick:()=>scrollActions.pgdn()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll to bottom",icon:appIcons.U.iconChevronDown,isDisabled:scrollActive%2==0,onClick:()=>scrollActions.last()})]})})]})})};VirtualList.displayName="AxVirtualList";const AxVirtualList=(0,react.memo)(VirtualList),TreeNode=(0,react.memo)((({style,isCheckable,isSelectable,checkLevel=0,onToggleCheck,onToggleExpand,nodesSelectable,onSelect,node,...props})=>{const{t}=(0,es.$G)("data"),BadgeEl=(0,hooks_useBadge.Q)(node.badge),borders=(0,react.useMemo)((()=>props.lines.map(((l,i)=>(0,jsx_runtime.jsx)("span",{className:"ax-tree__spacer","data-border":l},i)))),[props.lines]),placeholder=(0,react.useMemo)((()=>props.isEmpty?props.isError?(0,jsx_runtime.jsx)("div",{className:"ax-tree__label","data-error":"true",children:t("tree.error")}):props.isLoading?(0,jsx_runtime.jsxs)("div",{className:"ax-tree__label","data-empty":"true",children:[(0,jsx_runtime.jsx)(dist.Xr.Spinner,{className:"text-base"}),"Â ",t("tree.loading")]}):(0,jsx_runtime.jsx)("div",{className:"ax-tree__label","data-empty":"true",children:t("tree.noItems")}):null),[props.isEmpty,props.isLoading]);return(0,jsx_runtime.jsxs)("div",{style,className:"ax-tree__node",children:[borders,!props.isLeaf&&(0,jsx_runtime.jsx)("div",{className:"ax-tree__spacer",onClick:onToggleExpand,children:(0,jsx_runtime.jsx)(dist.Ng,{icon:props.isOpen?node.iconOpen??appIcons.U.iconFolderOpen:node.iconClosed??appIcons.U.iconFolderClosed})}),placeholder,null==placeholder&&(0,jsx_runtime.jsxs)("div",{...node.props??{},className:`ax-tree__label ${node.labelClassName??""}`,onClick:()=>isCheckable?onToggleCheck(node.id):props.isLeaf||nodesSelectable?isSelectable&&onSelect(node.id):onToggleExpand(node.id),onDoubleClick:onToggleExpand,"data-selected":!isCheckable&&props.isSelected,"data-disabled":node.isDisabled,"data-child-selected":props.childSelected,children:[isCheckable&&props.level>=checkLevel&&(0,jsx_runtime.jsx)(dist.Ng,{icon:2===props.isChecked?appIcons.U.iconCheckboxInt:1===props.isChecked?appIcons.U.iconCheckboxOn:appIcons.U.iconCheckboxOff}),node.icon&&(0,jsx_runtime.jsx)(dist.Ng,{icon:node.icon??""}),(0,jsx_runtime.jsx)("div",{children:node.label}),BadgeEl]})]})}));TreeNode.displayName="AxTree.Node";const TreeTools=(0,react.memo)((({title,onExpand,onCollapse,onCheckAll,onUncheckAll,isCheckable})=>{const{t}=(0,es.$G)("data");return(0,jsx_runtime.jsxs)("div",{className:"ax-tree__tools",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1 self-center px-2 truncate",children:title}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",onClick:onExpand,icon:appIcons.U.iconExpandAll,tooltip:t("action.expandAll")}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",onClick:onCollapse,icon:appIcons.U.iconCollapseAll,tooltip:t("action.collapseAll")}),isCheckable&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.qm,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",onClick:onUncheckAll,icon:appIcons.U.iconCheckboxOff,tooltip:t("action.uncheckAll")}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",onClick:onCheckAll,icon:appIcons.U.iconCheckAll,tooltip:t("action.checkAll")})]})]})}));TreeTools.displayName="AxTree.Tools";const sorter=(a,b)=>!!a.isLeaf!=!!b.isLeaf?a.isLeaf?1:-1:(0,utilities_dist.compareValues)()(a.label,b.label),refactorNode=({node:{children,...node},index=0,isLast=!1,parent="",parentQuery="",level=0,lines=[],sortable=!0,...rest})=>{const internalId=`${parent}.${index}`,query=`${parentQuery}~${node.label}`,innerChildren=sortable?children?.sort(sorter):children,newLines=[...lines,isLast?0:1];return{internalId,parent,node,level,query,...rest,lines:newLines,isLeaf:!!node.isLeaf,isSelected:!1,childSelected:!1,isOpen:!!node.isOpen,isChecked:0,children:innerChildren?.map(((child,idx)=>refactorNode({node:child,index:idx,lines:newLines,isLast:idx+1===innerChildren.length,parent:internalId,parentQuery:query,level:level+1,sortable})))}},createTreeMap=nodes=>{const map=new Map,makeMap=nodes=>{nodes.forEach((node=>{map.set(node.internalId,node),null!=node.children&&makeMap(node.children)}))};return makeMap(nodes),map},createIdMap=nodes=>{const map=new Map,makeMap=nodes=>{nodes.forEach((node=>{node.node.id&&map.set(node.node.id,node.internalId),null!=node.children&&makeMap(node.children)}))};return makeMap(nodes),map},createNodeList=(nodes,sortable)=>{const list=[];return nodes.forEach((node=>{!1!==node.isFiltered&&list.push(node),node.isOpen&&(null!=node.children&&node.children.length>0?list.push(...createNodeList(node.children,sortable)):void 0!==node.isFiltered||node.isLeaf||list.push(refactorNode({node:{isLeaf:!0},index:0,isLast:!0,isEmpty:!0,isLoading:node.isLoading,isError:node.isError,lines:node.lines,parent:node.internalId,level:node.level+1,sortable})))})),list},toggleProperty=(nodes,prop,value,checkChildren=!1)=>{nodes.forEach((node=>{prop in node&&(!checkChildren||checkChildren&&node.children?.length>0)&&(node[prop]=value),null!=node.children&&toggleProperty(node.children,prop,value,checkChildren)}))},getNodeById=(state,id)=>state.treeMap.get(state.idMap.get(id??"")??""),toggleExpand=(state,id,canLoad=!1,isSortable=!0,force)=>{const parent=getNodeById(state,id);if(parent){const index=state.items.indexOf(parent);parent.isOpen=force??!parent.isOpen,parent.isOpen?(0,utilities_dist.isNil)(parent.children)?(parent.isLoading=canLoad,state.items.splice(index+1,0,refactorNode({node:{isLeaf:!0},index:0,isLast:!0,isEmpty:!0,isLoading:canLoad,isError:parent.isError,lines:parent.lines,parent:parent.internalId,level:parent.level+1}))):state.items.splice(index+1,0,...createNodeList(parent.children,isSortable)):state.items=state.items.filter((item=>!(item.internalId!==parent.internalId&&item.internalId.startsWith(parent.internalId))))}return{...state}},AxTreePanel=(0,react.memo)((({className,data,title,actions,selected,nodesSelectable,isSortable=!0,isSearchable,isCheckable,isSelectable,checkLevel=0,onChange,onLoad,onSelect,treeRef:ref,...rest})=>{const listRef=(0,react.useRef)(null),panelRef=(0,react.useRef)(null),[,startTransition]=(0,react.useTransition)(),initState=(0,react.useCallback)(((data=[])=>{const treeData=(nodes=data,((sortable=isSortable)?nodes.sort(sorter):nodes).map(((node,index)=>refactorNode({node,index,isLast:index+1===nodes.length,sortable}))));var nodes,sortable;return{treeData,treeMap:createTreeMap(treeData),idMap:createIdMap(treeData),items:createNodeList(treeData,isSortable),autoScroll:!1}}),[]),fireCheckChange=(0,react.useCallback)((items=>{const checkList=items.map((node=>1===node.isChecked&&node.isLeaf?node.node.id:void 0)).filter(Boolean);onChange?.(checkList)}),[onChange]),reducer=(0,react.useCallback)(((state,action)=>{if(state.autoScroll=!1,"init"===action.type&&action.newState)return{...action.newState};if("toggleExpand"===action.type)return toggleExpand(state,action.id,!(null==onLoad),isSortable);if("open"===action.type)return toggleExpand(state,action.id,!(null==onLoad),isSortable,!0);if("toggleCheck"===action.type){const newState=((state,id)=>{const node=getNodeById(state,id);if(node){node.isChecked=0===node.isChecked?1:0,null!=node.children&&toggleProperty(node.children,"isChecked",node.isChecked);let parent=state.treeMap.get(node.parent??"");const parentCheck=parent?.children?.some((n=>n.isChecked!==node.isChecked))?2:node.isChecked;for(;null!=parent;)parent.isChecked=parentCheck,parent=state.treeMap.get(parent.parent??"")}return{...state}})(state,action.id);return startTransition((()=>fireCheckChange?.(Array.from(newState.treeMap.values())))),newState}if("loadItems"===action.type){const parent=getNodeById(state,action.id);if(parent){parent.isLoading=!1,parent.isError=!1;const index=state.items.indexOf(parent);((parent,children,sortable)=>{const list=sortable?children.sort(sorter):children;parent.children=list.map(((child,idx)=>refactorNode({node:child,index:idx,lines:parent.lines,isLast:idx+1===children.length,parent:parent.internalId,level:parent.level+1})))})(parent,action.items??[],isSortable),state.idMap=createIdMap(state.treeData),state.treeMap=createTreeMap(state.treeData),state.items.splice(index+1,1,...((parent,sortable)=>null!=parent.children&&parent.children?.length>0?createNodeList(parent.children,sortable):[refactorNode({node:{isLeaf:!0},index:0,isLast:!0,isEmpty:!0,isLoading:parent.isLoading,isError:parent.isError,lines:parent.lines,parent:parent.internalId,level:parent.level+1,sortable})])(parent,isSortable))}}if("loadError"===action.type){const parent=getNodeById(state,action.id);if(parent){const index=state.items.indexOf(parent),item=state.items[index+1];item&&(item.isLoading=!1,item.isError=!0),parent.isLoading=!1,parent.isError=!0}}return"expandAll"===action.type&&(toggleProperty(state.treeData,"isOpen",!0,!0),state.items=createNodeList(state.treeData,isSortable)),"collapseAll"===action.type&&(toggleProperty(state.treeData,"isOpen",!1),state.items=createNodeList(state.treeData,isSortable)),"checkAll"===action.type&&(toggleProperty(state.treeData,"isChecked",1),setTimeout((()=>startTransition((()=>fireCheckChange?.(Array.from(state.treeMap.values()))))),100)),"uncheckAll"===action.type&&(toggleProperty(state.treeData,"isChecked",0),setTimeout((()=>startTransition((()=>fireCheckChange?.(Array.from(state.treeMap.values()))))),100)),"select"===action.type&&(state.autoScroll=!0,((state,id,isSortable=!0,scroll=!1)=>{const node=getNodeById(state,id);if(node){Array.from(state.treeMap.values()).forEach((n=>{n.isSelected=!1,n.childSelected=!1})),node.isSelected=!0;let parent=state.treeMap.get(node.parent??"");for(;null!=parent;)parent.isOpen=!0,parent.childSelected=!0,parent=state.treeMap.get(parent.parent??"");return state.items=createNodeList(state.treeData,isSortable),state.autoScroll=scroll,!node.isLeaf}})(state,action.id,isSortable,action.propChange),!action.propChange&&setTimeout((()=>startTransition((()=>{action.id&&onSelect?.(action.id)}))),100)),"search"===action.type&&(Array.from(state.treeMap.values()).forEach((item=>{if(item.isFiltered=action.search?(0,utilities_dist.matchString)(item.query,action.search):void 0,item.parent&&item.isFiltered){let parent=state.treeMap.get(item.parent);for(;null!=parent;)!action.search&&(parent.isOpen=!1),parent.isFiltered=item.isFiltered,parent=state.treeMap.get(parent.parent??"")}})),state.autoScroll=!0,state.items=createNodeList(state.treeData,isSortable)),{...state}}),[onLoad,onSelect,fireCheckChange,isSortable]),[state,dispatch]=(0,react.useReducer)(reducer,{treeData:[],treeMap:new Map,idMap:new Map,items:[],autoScroll:!1},(()=>initState()));(0,react.useEffect)((()=>{dispatch({type:"init",newState:initState(data)})}),[data]);const itemHeight=(0,react.useCallback)((el=>{const h=null!=el?1.5*parseInt(getComputedStyle(el).fontSize??"16"):0;return isNaN(h)?0:h}),[state.items]);(0,react.useEffect)((()=>{selected&&dispatch({type:"select",id:selected,propChange:!0})}),[data,selected]);const loadNodes=(0,react.useCallback)((id=>{startTransition((()=>{if(id){const ret=onLoad?.(id)??[];Promise.resolve(ret).then((resp=>{dispatch({type:"loadItems",id,items:resp??[]})})).catch((()=>dispatch({type:"loadError",id})))}}))}),[onLoad]),handleExpand=(0,react.useCallback)((index=>{const parent=state.items[index];dispatch({type:"toggleExpand",id:parent.node.id}),!parent.isOpen&&(0,utilities_dist.isNil)(parent.children)&&loadNodes(parent.node.id)}),[state,loadNodes]);return(0,react.useImperativeHandle)(ref,(()=>({select:id=>dispatch({type:"select",id,propChange:!0}),open:id=>{dispatch({type:"open",id,propChange:!0});const parent=state.treeMap.get(state.idMap.get(id)??"");parent&&(0,utilities_dist.isNil)(parent?.children)&&loadNodes(parent.node.id)}})),[state,loadNodes]),(0,react.useLayoutEffect)((()=>{state.autoScroll&&startTransition((()=>{const item=Array.from(state.treeMap.values()).find((n=>n.isSelected));if(null!=item){const focusIndex=state.items.indexOf(item);focusIndex>-1&&listRef.current?.scrollToItem(focusIndex)}}))}),[state]),(0,jsx_runtime.jsxs)("div",{...rest,ref:panelRef,className:`ax-tree__panel ${className??""}`,children:[(0,jsx_runtime.jsx)(TreeTools,{title,isCheckable,onExpand:()=>dispatch({type:"expandAll"}),onCollapse:()=>dispatch({type:"collapseAll"}),onCheckAll:()=>dispatch({type:"checkAll"}),onUncheckAll:()=>dispatch({type:"uncheckAll"})}),isSearchable&&(0,jsx_runtime.jsx)(form_dist.z.Search,{isPlain:!0,onChange:search=>dispatch({type:"search",search}),className:"ax-tree__search"}),(0,jsx_runtime.jsx)(AxVirtualList,{fullWidth:!0,hideScroller:!0,listRef,items:state.items,height:itemHeight(panelRef.current),children:({data,...props})=>(0,jsx_runtime.jsx)(AxVirtualItem,{...props,children:(0,jsx_runtime.jsx)(TreeNode,{...data,checkLevel,isCheckable,isSelectable,nodesSelectable,onSelect:id=>dispatch({type:"select",id}),onToggleCheck:id=>dispatch({type:"toggleCheck",id}),onToggleExpand:()=>handleExpand(props.index)})})})]})}));AxTreePanel.displayName="AxTree.Panel";const Gallery_createItemList=(0,memoize_one_esm.Z)((items=>items)),VirtualGallery=({items,children,padding="md",height=48,width=64,columns,hideScroller,isLoading,onLoadMore,onScroll,listRef})=>{const count=(0,react.useDeferredValue)(items.length),itemList=Gallery_createItemList(items.map(((item,idx)=>({index:idx,data:item,isLast:idx+1===items.length})))),{columnCount,scrollerRef,scrollSize,pageIndex,startIndex,endIndex,springSize,scrollActive,handleScroll,updateCache,scrollToItem,scrollActions}=(({columns=0,height=64,width=64,count=0})=>{const scrollerRef=(0,react.useRef)(null),sizeCache=(0,react.useRef)([]),rowsizeCache=(0,react.useRef)([]),ignoreScrollChange=(0,react.useRef)(!1),[pageCount,setPageCount]=(0,react.useState)(0),[pageIndex,setPageIndex]=(0,react.useState)(0),[scrollSize,setScrollSize]=(0,react.useState)(0),[columnCount,setColumnCount]=(0,react.useState)(1),[scrollOffset,setScrollOffset]=(0,react.useState)(0);(0,react.useEffect)((()=>{sizeCache.current=new Array(count).fill([width,height]).map(((h,i)=>[Math.max(h[0],sizeCache.current[i]?.[0]??width),Math.max(h[1],sizeCache.current[i]?.[1]??height)])),rowsizeCache.current=new Array(Math.ceil(count/columnCount)).fill(height).map(((h,i)=>Math.max(h,...sizeCache.current.slice(i*columnCount,i*columnCount+columnCount).map((s=>s?.[1])).filter(Boolean))))}),[count,columnCount,height,width]),(0,react.useEffect)((()=>{let idx=0;for(let tot=0;idx<rowsizeCache.current.length&&(tot+=rowsizeCache.current[idx]+8,!(tot>=scrollOffset));idx++);setPageIndex(idx)}),[count,columnCount,scrollOffset]);const[startIndex,endIndex,springSize]=(0,react.useMemo)((()=>{const index=Math.max(0,pageIndex-pageCount);return[index*columnCount,(pageIndex+pageCount+pageCount)*columnCount,new Array(index).fill(0).reduce(((t,_,i)=>t+rowsizeCache.current[i]+8),0)]}),[pageCount,columnCount,pageIndex]);(0,react.useEffect)((()=>{if(scrollerRef.current){const el=scrollerRef.current,handler=()=>{setPageCount(Math.max(10,Math.round(Math.max(1e3,el?.offsetHeight??0)/height))),setColumnCount(columns||Math.max(1,Math.floor(((el?.offsetWidth??800)-32)/(width+16))))},ob=new ResizeObserver(handler);return handler(),ob.observe(el),()=>{ob.unobserve(el),ob.disconnect()}}}),[scrollerRef.current,columns,count,height,width]);const updateCache=(0,react.useCallback)(((index,width,height)=>{const oldSize=sizeCache.current[index];oldSize&&(width!==oldSize[0]&&(sizeCache.current[index][0]=width),height!==oldSize[1]&&(sizeCache.current[index][1]=height),rowsizeCache.current=new Array(Math.ceil(count/columnCount)).fill(height).map(((h,i)=>Math.max(h,...sizeCache.current.slice(i*columnCount,i*columnCount+columnCount).map((s=>s?.[1])).filter(Boolean)))),setScrollSize(rowsizeCache.current.reduce(((t,h)=>t+h+8),0)+64))}),[count,columnCount]),scrollActive=(0,react.useMemo)((()=>{const{scrollTop=0,scrollHeight=0,offsetHeight=0}=scrollerRef.current??{};return scrollSize===offsetHeight?0:0===scrollTop?1:scrollTop>=scrollHeight-offsetHeight-64?2:3}),[count,scrollOffset,scrollSize]),handleScroll=(0,react.useCallback)((evt=>{const{scrollTop,scrollHeight,offsetHeight}=evt.currentTarget;return ignoreScrollChange.current||setScrollOffset(scrollTop),+scrollTop+ +offsetHeight>=+scrollHeight}),[]),scrollToItem=(0,react.useCallback)((index=>{ignoreScrollChange.current=!0,setPageIndex(index),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index*columnCount}"]`)?.scrollIntoView({behavior:"instant",block:"start"}),setTimeout((()=>ignoreScrollChange.current=!1),10)}),100)}),[columnCount]),scrollActions=(0,react.useMemo)((()=>({first(){scrollerRef.current?.scrollTo({top:0,behavior:"instant"})},pgup(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollTop??0)-scrollerRef.current?.offsetHeight??0,behavior:"smooth"})},pgdn(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollTop??0)+scrollerRef.current?.offsetHeight??0,behavior:"smooth"})},last(){scrollerRef.current?.scrollTo({top:(scrollerRef.current?.scrollHeight??0)-(scrollerRef.current?.offsetHeight??0)-64,behavior:"instant"})}})),[]);return{columnCount,scrollerRef,pageIndex,startIndex,endIndex,springSize,scrollSize,scrollOffset,scrollActive,handleScroll,updateCache,scrollToItem,scrollActions}})({columns,height,width,count}),scrollCallback=(0,react.useRef)((0,utilities_dist.debounce)((idx=>onScroll?.(idx))));(0,react.useEffect)((()=>{scrollCallback.current(pageIndex)}),[pageIndex]);const pagedList=(0,react.useMemo)((()=>itemList.slice(startIndex,endIndex)),[itemList,startIndex,endIndex]);return(0,react.useImperativeHandle)(listRef,(()=>({hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight"),scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight"),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.scrollIntoView({behavior:"instant",block:"nearest"})}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight")},scrollToItem(index){scrollToItem(index)}})),[scrollToItem]),(0,jsx_runtime.jsx)("div",{className:"ax-virtual-list",ref:scrollerRef,onScroll:evt=>handleScroll(evt)&&onLoadMore?.(),"data-padding":padding,"data-orientation":"vertical",children:(0,jsx_runtime.jsxs)("div",{className:"ax-virtual__container",children:[(0,jsx_runtime.jsxs)("div",{className:"ax-virtual__scroller",style:{minHeight:scrollSize},children:[(0,jsx_runtime.jsx)("div",{style:{height:springSize}}),(0,jsx_runtime.jsx)("div",{className:"ax-virtual__gallery",style:{gridTemplateColumns:`repeat(${columnCount}, ${width}px)`,maxWidth:columns?void 0:(width+8)*columnCount},children:pagedList.map((({index,data,isLast})=>children({data,index,isLast,key:index,updateSize:updateCache})))}),onLoadMore&&(0,jsx_runtime.jsx)("div",{className:"ax-virtual__placeholder",children:isLoading&&(0,jsx_runtime.jsx)(dist.Xr.Card,{showIcon:!0})})]}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:"ax-virtual__tools",children:(0,jsx_runtime.jsxs)(dist.oG.Group,{isVertical:!0,variant:"flat",children:[(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll to top",icon:appIcons.U.iconChevronUp,isDisabled:0==(2&scrollActive),onClick:()=>scrollActions.first()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll up",icon:appIcons.U.iconCaretUp,isDisabled:0==(2&scrollActive),onClick:()=>scrollActions.pgup()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll down",icon:appIcons.U.iconCaretDown,isDisabled:scrollActive%2==0,onClick:()=>scrollActions.pgdn()}),(0,jsx_runtime.jsx)(dist.oG,{size:"sm",variant:"link",className:"flush","aria-label":"scroll to bottom",icon:appIcons.U.iconChevronDown,isDisabled:scrollActive%2==0,onClick:()=>scrollActions.last()})]})})]})})};VirtualGallery.displayName="AxVirtualGallery";(0,react.memo)(VirtualGallery)}}]);