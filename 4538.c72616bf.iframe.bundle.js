"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[4538,6290,2905],{"./node_modules/@arcgis/core/core/devEnvironmentUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function c(c){return c=c||globalThis.location.hostname,m.some((a=>null!=c?.match(a)))}function a(c,a){return c&&(a=a||globalThis.location.hostname)?null!=a.match(t)||null!=a.match(l)?c.replace("static.arcgis.com","staticdev.arcgis.com"):null!=a.match(s)||null!=a.match(i)?c.replace("static.arcgis.com","staticqa.arcgis.com"):c:c}__webpack_require__.d(__webpack_exports__,{XO:()=>c,pJ:()=>a});const t=/^devext.arcgis.com$/,s=/^qaext.arcgis.com$/,l=/^[\w-]*\.mapsdevext.arcgis.com$/,i=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,t,s,/^jsapps.esri.com$/,l,i]},"./node_modules/@arcgis/core/core/floatRGBA.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>o,v:()=>r});var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.uZ)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},"./node_modules/@arcgis/core/core/fontUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BN:()=>u,Yc:()=>f,hZ:()=>i,mx:()=>c,rk:()=>t});var _config_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/config.js");const t="arial-unicode-ms",n="woff2",r=new Map,s=new Set;class o{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(t){const c=f(t),a=r.get(c);if(a)return a.promise;const i=new FontFace(t.family,`url('${_config_js__WEBPACK_IMPORTED_MODULE_0__.default.fontsUrl}/woff2/${c}.${n}') format('${n}')`,{style:t.style,weight:t.weight}),u=document.fonts;if(u.has(i)&&"loading"===i.status)return i.loaded;const l=i.load().then((()=>(u.add(i),i)));return r.set(c,new o(i,l)),s.add(i),l}function i(e){return s.has(e)}function u(e){if(!e)return t;const n=e.toLowerCase().split(" ").join("-");switch(n){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return n}}function f(e){const t=function l(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function d(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return u(e.family)+(t.length>0?t:"-regular")}},"./node_modules/@arcgis/core/symbols/cim/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(e){return"function"==typeof e}function t(t,r,n,o){return e(t)?t(r,n,o):t}function r(e){return[e.r,e.g,e.b,e.a]}__webpack_require__.d(__webpack_exports__,{$Z:()=>w,BX:()=>k,Cc:()=>d,E_:()=>l,F:()=>L,FG:()=>G,H1:()=>i,JW:()=>O,NA:()=>b,NO:()=>u,On:()=>g,QI:()=>s,Qf:()=>A,Qs:()=>c,RI:()=>I,TB:()=>F,TT:()=>a,W7:()=>P,X_:()=>x,be:()=>f,cO:()=>p,gJ:()=>m,hf:()=>t,k5:()=>C,nn:()=>r,pJ:()=>h,wO:()=>e,wi:()=>S,yL:()=>M,zL:()=>y});const n=" /-,\n";function o(e){let t=e.length;for(;t--;)if(!n.includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.substr(n,i-n);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.substr(n,i-n)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length-1){const t=e.substr(n);r.push([t,null,o(t)])}return r}function l(e,t,r){let n="",o=null;for(const i of t){const[t,r,l]=i;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{const t=e.attributes[r];t&&(o&&(n+=o,o=null),n+=t)}}return s(n,r)}function c(e,t,r){const n=i(t,e);return e=>l(e,n,r)}function s(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function a(e,t,r,n,o,i,l=!0){const c=t/o,s=r/i,a=Math.ceil(c/2),u=Math.ceil(s/2);for(let f=0;f<i;f++)for(let r=0;r<o;r++){const y=4*(r+(l?i-f-1:f)*o);let M=0,C=0,m=0,b=0,p=0,d=0,I=0;const h=(f+.5)*s;for(let n=Math.floor(f*s);n<(f+1)*s;n++){const o=Math.abs(h-(n+.5))/u,i=(r+.5)*c,l=o*o;for(let s=Math.floor(r*c);s<(r+1)*c;s++){let r=Math.abs(i-(s+.5))/a;const o=Math.sqrt(l+r*r);o>=-1&&o<=1&&(M=2*o*o*o-3*o*o+1,M>0&&(r=4*(s+n*t),I+=M*e[r+3],m+=M,e[r+3]<255&&(M=M*e[r+3]/250),b+=M*e[r],p+=M*e[r+1],d+=M*e[r+2],C+=M))}}n[y]=b/C,n[y+1]=p/C,n[y+2]=d/C,n[y+3]=I/m}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function f(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function M(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function C(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const b=(e,t=0)=>null==e||isNaN(e)?t:e,p=e=>e.tintColor?u(e.tintColor):{r:255,g:255,b:255,a:1},d=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function I(){return Promise.all([__webpack_require__.e(5798),__webpack_require__.e(3134)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/geometry/geometryEngineJSON.js"))}function h(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function g(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function k(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function P(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=P(t);if(null!=e)return e}break;case"CIMTextSymbol":return P(e.symbol);case"CIMSolidFill":return e.color}}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":return e.color}}function L(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return L(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function G(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function A(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},"./node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>d,m:()=>h,resolveWebStyleSymbol:()=>j});var _symbols_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/symbols.js"),_core_devEnvironmentUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/devEnvironmentUtils.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),_portal_Portal_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js"),_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/jsonUtils.js"),_StyleOrigin_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/StyleOrigin.js"),_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/styleUtils.js"),_Thumbnail_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/Thumbnail.js");function j(t,e,r,n){const s=t.name;return null==s?Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?function U(t,e,r){const l=_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.wm.replaceAll(/\{SymbolName\}/gi,t),o=null!=e.portal?e.portal:_portal_Portal_js__WEBPACK_IMPORTED_MODULE_4__.Z.getDefault();return(0,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.EJ)(l,r).then((t=>{const e=(0,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.KV)(t.data);return(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__.im)(e,{portal:o,url:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.mN)((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.Yd)(l)),origin:"portal-item"})}))}(s,e,n):(0,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.n2)(t,e,n).then((t=>d((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.s3)(t),s,e,r,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.v9,n)))}function h(t,e){return e.items.find((e=>e.name===t))}function d(o,p,c,b,j,d){const U=c&&null!=c.portal?c.portal:_portal_Portal_js__WEBPACK_IMPORTED_MODULE_4__.Z.getDefault(),N={portal:U,url:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.mN)(o.baseUrl),origin:"portal-item"},w=h(p,o.data);if(!w){const t=`The symbol name '${p}' could not be found`;return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__.Z("symbolstyleutils:symbol-name-not-found",t,{symbolName:p}))}let S=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_5__.f)(j(w,b),N),D=w.thumbnail?.href??null;const O=w.thumbnail&&w.thumbnail.imageData;(0,_core_devEnvironmentUtils_js__WEBPACK_IMPORTED_MODULE_1__.XO)()&&(S=(0,_core_devEnvironmentUtils_js__WEBPACK_IMPORTED_MODULE_1__.pJ)(S)??"",D=(0,_core_devEnvironmentUtils_js__WEBPACK_IMPORTED_MODULE_1__.pJ)(D));const P={portal:U,url:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.mN)((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.Yd)(S)),origin:"portal-item"};return(0,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.EJ)(S,d).then((e=>{const r="cimRef"===b?(0,_styleUtils_js__WEBPACK_IMPORTED_MODULE_8__.KV)(e.data):e.data,l=(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__.im)(r,P);if(l&&(0,_symbols_js__WEBPACK_IMPORTED_MODULE_0__.dU)(l)){if(D){const t=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_5__.f)(D,N);l.thumbnail=new _Thumbnail_js__WEBPACK_IMPORTED_MODULE_9__.p({url:t})}else O&&(l.thumbnail=new _Thumbnail_js__WEBPACK_IMPORTED_MODULE_9__.p({url:`data:image/png;base64,${O}`}));o.styleUrl?l.styleOrigin=new _StyleOrigin_js__WEBPACK_IMPORTED_MODULE_7__.Z({portal:c.portal,styleUrl:o.styleUrl,name:p}):o.styleName&&(l.styleOrigin=new _StyleOrigin_js__WEBPACK_IMPORTED_MODULE_7__.Z({portal:c.portal,styleName:o.styleName,name:p}))}return l}))}},"./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>s});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");function s(e,t,o,n,a){if(null==e)return null;const s=e.referencesGeometry()&&a?i(t,n,a):t,u=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:u},e.services)}catch(c){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const u=new Map;function i(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;u.has(r)||u.set(r,function c(s){const u={};switch(s){case"esriGeometryPoint":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.U1)(r,u,e,t,o);case"esriGeometryPolygon":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.Ie)(r,u,e,t,o);case"esriGeometryPolyline":return(e,r,t,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.G6)(r,u,e,t,n);case"esriGeometryMultipoint":return(e,r,o,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.J9)(r,u,e,o,n);default:return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("mapview-arcade",`Unable to handle geometryType: ${s}`)),e=>e}}(r));const s=u.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>O});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_has_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_definitions_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_DisplayId_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js"),_Utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js"),_util_debug_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/util/debug.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),_webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),_webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const j=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.Z.getLogger("esri.views.2d.engine.webgl.AttributeStoreView"),k=(0,_util_debug_js__WEBPACK_IMPORTED_MODULE_10__.g)(_util_debug_js__WEBPACK_IMPORTED_MODULE_10__.J,j);class M{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:a}=t,n=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.UK)(r);this.shared=i,this.pixelType=r,this.size=e,this.textureOnly=a,a||(this.data=new n(s)),this._resetRange()}destroy(){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(this._texture,(t=>t.dispose()));for(const t in this._fbos)(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(this._fbos[t],(e=>{"0"===t&&e.detachColorTexture(),e.dispose()})),this._fbos[t]=null;this._texture=null}get _textureDesc(){const t=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__.X;return t.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__.e8.CLAMP_TO_EDGE,t.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__.cw.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}setData(t,e,i){const s=(0,_DisplayId_js__WEBPACK_IMPORTED_MODULE_12__.jL)(t),r=this.data,a=s*this.texelSize+e;!r||a>=r.length||(r[a]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,e){if(null==this.data)return null;const i=(0,_DisplayId_js__WEBPACK_IMPORTED_MODULE_12__.jL)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}getTexture(t){return this._texture??this._initTexture(t)}getFBO(t,e=0){if(!this._fbos[e]){const i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_7__.X(t,i)}return this._fbos[e]}get locked(){return!(this.pixelType!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__.Br.UNSIGNED_BYTE||!this.shared||this.textureOnly||!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("esri-atomics")||!this.data)&&1===Atomics.load(this.data,0)}get hasDirty(){const t=this.dirtyStart;return this.dirtyEnd>=t}updateTexture(e,i){if(!this.locked){try{const i=this.dirtyStart,s=this.dirtyEnd;if(!this.hasDirty)return;this._resetRange();const r=this.data.buffer,a=this.getTexture(e),n=4,d=(i-i%this.size)/this.size,h=(s-s%this.size)/this.size,u=d,o=this.size,l=h,p=d*this.size*n,x=(o+l*this.size)*n-p,_=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.UK)(this.pixelType),g=new _(r,p*_.BYTES_PER_ELEMENT,x),c=this.size,f=l-u+1;if(f>this.size)return void j.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("mapview-webgl","Out-of-bounds index when updating AttributeData"));a.updateData(0,0,u,c,f,g)}catch(s){}i()}}update(t){const{data:e,start:i,end:s}=t;if(null!=e&&null!=this.data){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,s)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.UK)(this.pixelType);this.destroy(),this.data=new s(t.buffer)}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__.x(t,this._textureDesc,this.data??void 0);if(null!=this._lastTexture&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(t),d=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.Yw)(r),h=new((0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__.UK)(r))(new ArrayBuffer(i*s*d*this.texelSize)),u=t.getBoundFramebufferObject(),{x:o,y:l,width:p,height:x}=t.getViewport();t.bindFramebuffer(n),n.readPixels(0,0,i,s,a,r,h),e.updateData(0,0,0,2*i,s/2,h),t.setViewport(o,l,p,x),t.bindFramebuffer(u)}return this.destroy(),this._texture=e,this._texture}}class O{constructor(t){this._onUpdate=t,this._initialized=!1,this._forceNextUpload=!1,this._locked=!1}initialize(t){const{blocks:e,shared:s,size:r}=t;if(this.shared=s,this.size=r,k("Initializing AttributeStoreView",t),null==this._data)this._data=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.Fd)(e,(t=>new M(t,r,s)));else for(let i=0;i<this._data.length;i++){const t=this._data[i],a=e[i];null!=a&&(null==t?this._data[i]=new M(a,r,s):t.resize(a,r))}this._initialized=!0}destroy(){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(this._data,(t=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.Fd)(t,(t=>t.destroy())))),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(this._defaultTexture,(t=>t.dispose()))}isEmpty(){return null==this._data}isUpdating(){const t=null!=this._pendingAttributeUpdate,e=t;return(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("esri-2d-log-updating")&&console.log(`Updating AttributeStoreView ${e}\n  -> hasPendingUpdate ${t}`),e}getBlock(t){return null==this._data?null:this._data[t]}setLabelMinZoom(t,e){this.setData(t,0,1,e)}getLabelMinZoom(t){return this.getData(t,0,1,255)}getFilterFlags(t){return this.getData(t,0,0,0)}getVVSize(t){return this.getData(t,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.aK,0,0)}getData(t,e,i,s){if(!this._data)return 0;const r=this._data[e];if(null==r)return 0;const a=r.getData(t,i);return null!=a?a:s}setData(t,e,i,s){this._data[e].setData(t,i,s)}lockTextureUpload(){this._locked=!0}unlockTextureUpload(){this._locked=!1}forceTextureUpload(){this._forceNextUpload=!0}async requestUpdate(e){if(this._pendingAttributeUpdate)return void j.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("mapview-webgl","Tried to update attribute data with a pending update"));const i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.hh)();return k("AttributeStoreView Update Requested",e),this._pendingAttributeUpdate={data:e,resolver:i},this._onUpdate(),i.promise}update(){if(this._initialized&&null!=this._pendingAttributeUpdate){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("esri-2d-update-debug")&&console.debug("AttributeStoreView::update");const{data:t,resolver:e}=this._pendingAttributeUpdate,i=this._data;for(let r=0;r<t.blocks.length;r++){const e=t.blocks[r],a=i[r];(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(a,(t=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.yw)(e,(e=>{k(`Updating block ${r}`,e),t.update(e)}))))}this._pendingAttributeUpdate=null,e(),this._onUpdate()}}bindTextures(t,e=!0){const i=this._getDefaultTexture(t);if(!this._initialized)return t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.iJ),void(e&&(t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.nM),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.Ij),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.f2),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.By),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.mx),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.Xj)));const s=this._data;this._locked&&!this._forceNextUpload||((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.JR)(s,(e=>e.updateTexture(t,(()=>this._onUpdate())))),this._forceNextUpload=!1),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__._5]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.iJ),e&&(t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.pU]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.Xj),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.xl]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.nM),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.aK]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.Ij),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.lK]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.f2),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.By]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.By),t.bindTexture(s[_definitions_js__WEBPACK_IMPORTED_MODULE_4__.mx]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.mx))}_getDefaultTexture(t){if(null==this._defaultTexture){const e=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__.X;e.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__.e8.CLAMP_TO_EDGE,e.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__.cw.NEAREST,e.width=1,e.height=1,this._defaultTexture=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__.x(t,e,new Uint8Array(4))}return this._defaultTexture}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KS:()=>i,PX:()=>u,QS:()=>s,_I:()=>n,jL:()=>f,nE:()=>p,vs:()=>e,xp:()=>c});const n=8388607,t=8388608,u=0,c=1,e=n=>(n&t)>>>23,f=t=>t&n,i=n=>e(n)===c?254:255;function p(n){return e(n)===c}function s(n,r){return((r?t:0)|n)>>>0}},"./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>e,S:()=>n});var _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js");class e{constructor(t,e,n,i,a){this.target=t,this.geometryType=e,this.materialKey=n,this.indexFrom=i,this.indexCount=a}get indexEnd(){return this.indexFrom+this.indexCount}extend(t){this.indexCount+=t}}class n{constructor(t,e){this.geometryType=0,this._target=t,this.geometryType=e}static from(t,e,i,a){const d=new n(t,e);if(null!=a)for(const n of a)i.seekIndex(n),d.addRecord(i);else for(;i.next();)d.addRecord(i);return d}addRecord(n){const i=this._target,a=this.geometryType,d=n.materialKey;let s=n.indexFrom,r=n.indexCount;const o=n.vertexFrom,l=n.vertexCount;if(r||(s=o,r=l),null==this._head){const n=new e(i,a,d,s,r);return void(this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__.a(n))}let h=null,x=this._head;for(;x;){if(s<x.data.indexFrom)return this._insert(d,s,r,h,x);h=x,x=x.next}this._insert(d,s,r,h,null)}forEach(t){null!=this._head&&this._head.forEach(t)}*infos(){if(null!=this._head)for(const t of this._head.values())yield t}_insert(n,i,a,d,s){if(null==d&&null==s){const d=new e(this._target,this.geometryType,n,i,a);this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__.a(d)}return null==d&&null!=s?this._insertAtHead(n,i,a,s):null!=d&&null==s?this._insertAtEnd(n,i,a,d):null!=d&&null!=s?this._insertAtMiddle(n,i,a,d,s):void 0}_insertAtHead(n,i,a,d){const s=i+a;if(n===d.data.materialKey&&s===d.data.indexFrom)d.data.indexFrom=i,d.data.indexCount+=a;else{const s=new e(this._target,this.geometryType,n,i,a);this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__.a(s),this._head.next=d}}_insertAtEnd(n,i,a,d){if(d.data.materialKey===n&&d.data.indexEnd===i)d.data.indexCount+=a;else{const s=new e(this._target,this.geometryType,n,i,a),r=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__.a(s);d.next=r}}_insertAtMiddle(n,i,a,d,s){const r=i+a;if(d.data.materialKey===n&&d.data.indexEnd===i)d.data.indexCount+=a,d.data.materialKey===s.data.materialKey&&d.data.indexEnd===s.data.indexFrom&&(d.data.indexCount+=s.data.indexCount,d.next=s.next);else if(n===s.data.materialKey&&r===s.data.indexFrom)s.data.indexFrom=i,s.data.indexCount+=a;else{const r=new e(this._target,this.geometryType,n,i,a),o=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__.a(r);d.next=o,o.next=s}}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>r});var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),_DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"),_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__.s{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__.Z(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,n,0,0,0,a,0,h,o,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,i.displayViewMat3,r)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>m});var _chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2d.js"),_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat2df32.js"),_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f32.js"),_definitions_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js");class m extends _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_5__.I{constructor(s,t,r,e){super(s,t,r,e,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.I_,_definitions_js__WEBPACK_IMPORTED_MODULE_4__.I_)}destroy(){super.destroy(),this._transforms&&m.TransformCache.release(this.key.hash)}setTransform(i){const o=this.resolution/i.resolution,n=this.transforms.tileMat3,[h,m]=i.toScreenNoRotation([0,0],[this.x,this.y]),c=this.width/this.rangeX*o,f=this.height/this.rangeY*o;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.s)(n,c,0,0,0,f,0,h,m,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this.transforms.dvs,i.displayViewMat3,n);const d=this.transforms.labelMat2d,l=window.devicePixelRatio,u=(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.d)((0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),c*l,0,0,f*l,h*l,m*l);(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.m)(d,i.viewMat2d,u)}_createTransforms(){return m.TransformCache.acquire(this.key.hash)}}m.TransformCache=new class h{acquire(s){return{refCount:1,version:-1,labelMat2d:(0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),tileMat3:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__.c)(),dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__.c)()}}release(s){}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/DisplayRecordReader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>r});var _definitions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js");const s=2147483647;class r{constructor(t){this._head=t,this._cursor=t}static from(t,e=0,s=t.byteLength/i.BYTES_PER_RECORD-e){const _=new i(new Int32Array(t,e*i.BYTES_PER_RECORD,s*i.ELEMENTS_PER_RECORD));return new r(_)}size(){let t=this._cursor,e=0;for(;t;)e+=t.size(),t=t._link;return e}get id(){return this._cursor.id}set id(t){this._cursor.id=t}get materialKey(){return this._cursor.materialKey}set materialKey(t){this._cursor.materialKey=t}get insertAfter(){return this._cursor.insertAfter}get indexFrom(){return this._cursor.indexFrom}set indexFrom(t){this._cursor.indexFrom=t}get indexCount(){return this._cursor.indexCount}set indexCount(t){this._cursor.indexCount=t}get vertexFrom(){return this._cursor.vertexFrom}set vertexFrom(t){this._cursor.vertexFrom=t}get vertexCount(){return this._cursor.vertexCount}set vertexCount(t){this._cursor.vertexCount=t}get sortKey(){return this._cursor.sortKey}set sortKey(t){this._cursor.sortKey=t}get index(){return this._cursor._indexStart+this._cursor._index}seekIndex(t){let e=t;for(this._cursor=this._head;this._cursor;){const t=this._cursor.size();if(e<t)return this._cursor._index=e,!0;e-=t,this._cursor=this._cursor._link}return!1}forEach(t){const e=this.getCursor();for(;e.next();)t(e)}link(t){if(!this._head)return void(this._head=t._head);let e=this._head;for(;e._link;)e=e._link;e._link=t._head,e._link._indexStart=e._indexStart+e.size()}getCursor(){return this.copy()}getDrawInfo(t,s){return new _FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__.I(t,s,this.materialKey,this.indexFrom,this.indexCount)}lookup(t){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(t);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor}copy(){const t=new r(this._head?.copy());if(!t._head)return t;let e=t._head,s=t._head._link;for(;s;)e._link=s.copy(),e=s,s=e._link;return t}next(){return!!this._cursor&&(!!this._cursor.next()||!!this._cursor._link&&(this._cursor=this._cursor._link,this.next()))}peekId(){return this._cursor.peekId()??this._cursor._link.peekId()}delete(t){let e=this._head,s=null;for(;e;){if(e.delete(t))return e.isEmpty()&&(null!=s&&(s._link=e._link),e===this._head&&(this._head=e._link),e===this._cursor&&(this._cursor=e._link)),!0;s=e,e=e._link}return!1}}r.ELEMENTS_PER_RECORD=_definitions_js__WEBPACK_IMPORTED_MODULE_0__.XJ,r.BYTES_PER_RECORD=r.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;class i{constructor(t){this._link=null,this._index=-1,this._indexStart=0,this._packedRecordsF32=null,this._deletedCount=0,this._offsets={instance:null},this._packedRecords=t}static from(t,e=0,s=t.byteLength/this.BYTES_PER_RECORD-e){return new i(new Int32Array(t,e*this.BYTES_PER_RECORD,s*this.ELEMENTS_PER_RECORD))}delete(t){const e=this._index,r=this.lookup(t);if(r)for(this.id=s,++this._deletedCount;this.next()&&this.id===t;)this.id=s,++this._deletedCount;return this._index=e,r}isEmpty(){return this._deletedCount===this.size()}link(t){this._link?this._link.link(t):this._link=t}lookup(t){if(null==this._offsets.instance){this._offsets.instance=new Map;const t=this.copy();t._index=-1;let e=0;for(;t.next();)t.id!==e&&(this._offsets.instance.set(t.id,t._index),e=t.id)}if(!this._offsets.instance.has(t))return!1;const e=this._index;return this._index=this._offsets.instance.get(t),this.id!==s||(this._index=e,!1)}get id(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD]}set id(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD]=t}get materialKey(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+1]}set materialKey(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+1]=t}get insertAfter(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+2]}get indexFrom(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+3]}set indexFrom(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+3]=t}get indexCount(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+4]}set indexCount(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+4]=t}get vertexFrom(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+5]}set vertexFrom(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+5]=t}get vertexCount(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+6]}set vertexCount(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+6]=t}get sortKey(){return this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*i.ELEMENTS_PER_RECORD+7]}set sortKey(t){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*i.ELEMENTS_PER_RECORD+7]=t}get index(){return this._index}size(){return this._packedRecords.length/i.ELEMENTS_PER_RECORD}next(){for(;++this._index<this.size()&&this.id===s;);return this._index<this.size()}peekId(){const t=(this._index+1)*i.ELEMENTS_PER_RECORD;return t>=this._packedRecords.length?0:this._packedRecords[t]}getCursor(){return this.copy()}copy(){const t=new i(this._packedRecords);return t._indexStart=this._indexStart,t._link=this._link,t._index=this._index,t._offsets=this._offsets,t._deletedCount=this._deletedCount,t}}i.ELEMENTS_PER_RECORD=_definitions_js__WEBPACK_IMPORTED_MODULE_0__.XJ,i.BYTES_PER_RECORD=i.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT},"./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>t,m:()=>a});class t{constructor(a){if(this.next=null,!Array.isArray(a))return void(this.data=a);this.data=a[0];let e=this;for(let n=1;n<a.length;n++)e.next=new t([a[n]]),e=e.next}*values(){let t=this;for(;t;)yield t.data,t=t.next}forEach(t){let a=this;for(;a;)t(a.data),a=a.next}find(t){return t(this.data)?this:this.next?.find(t)}max(t,a=this){const e=t(this.data)>t(a.data)?this:a;return this.next?this.next.max(t,e):e}remove(t,a=null){return this===t?a?(a.next=this.next,a):this.next:this.next?.remove(t,this)??null}get last(){return this.next?this.next.last:this}}class a{constructor(a){this._head=null,null!=a&&(this._head=new t(a))}get head(){return this._head}maxAvailableSpace(){if(null==this._head)return 0;const t=this._head.max((t=>t.end-t.start));return t.data.end-t.data.start}firstFit(t){if(null==this._head)return null;let a=null,e=this._head;for(;e;){const n=e.data.end-e.data.start;if(n===t)return a?a.next=e.next:this._head=e.next,e.data.start;if(n>t){const a=e.data.start;return e.data.start+=t,a}a=e,e=e.next}return null}free(a,e){const n=a+e;if(null==this._head){const e=new t({start:a,end:n});return void(this._head=e)}if(n<=this._head.data.start){if(n===this._head.data.start)return void(this._head.data.start-=e);const r=new t({start:a,end:n});return r.next=this._head,void(this._head=r)}let r=this._head,s=r.next;for(;s;){if(s.data.start>=n){if(r.data.end===a){if(r.data.end+=e,r.data.end===s.data.start){const t=s.data.end-s.data.start;return r.data.end+=t,void(r.next=s.next)}return}if(s.data.start===n)return void(s.data.start-=e);const d=new t({start:a,end:n});return d.next=r.next,void(r.next=d)}r=s,s=s.next}if(a===r.data.end)return void(r.data.end+=e);const d=new t({start:a,end:n});r.next=d}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/util/debug.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>l,g:()=>n});const n=(n,l)=>n&&((...n)=>l.warn("DEBUG:",...n))||(()=>null),l=!1},"./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>l});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_Utils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js");function l(l){return(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.hj)(l.minDataValue)&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.hj)(l.maxDataValue)&&null!=l.minSize&&null!=l.maxSize?_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_MINMAX_VALUE:(l.expression&&"view.scale"===l.expression||l.valueExpression&&"$view.scale"===l.valueExpression)&&Array.isArray(l.stops)?_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_SCALE_STOPS:(null!=l.field||l.expression&&"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&(Array.isArray(l.stops)||"levels"in l&&l.levels)?_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_FIELD_STOPS:(null!=l.field||l.expression&&"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&null!=l.valueUnit?_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_UNIT_VALUE:(_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.Z.getLogger("esri.views.2d.engine.webgl").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("mapview-bad-type","Found invalid size VisualVariable",l)),_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.NONE)}},"./node_modules/@arcgis/core/views/2d/layers/features/createSymbolSchema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{createSymbolSchema:()=>o});var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js");function l(e){return"line-marker"===e.type?{type:"line-marker",color:e.color?.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function s(e){return(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.hF)(e)}function o(e,a,t=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return function c(a,n,o){const i=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.FILL,n),c=o?s(i):i,m=a.clone(),h=m.outline,y=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jy)(n.symbologyType);y||(m.outline=null);const u={materialKey:c,hash:m.hash(),...l(m)};if(y)return u;const p=[];if(p.push(u),h){const a=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.LINE,{...n,isOutline:!0}),r={materialKey:o?s(a):a,hash:h.hash(),...l(h)};p.push(r)}return{type:"composite-symbol",layers:p,hash:p.reduce(((e,a)=>a.hash+e),"")}}(e,a,t);case"simple-marker":case"picture-marker":return function h(a,r,n){const o=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.MARKER,r),i=n?s(o):o,c=l(a);return{materialKey:i,hash:a.hash(),...c,angle:a.angle,maxVVSize:r.maxVVSize}}(e,a,t);case"simple-line":return function m(n,o,i){const c=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jy)(o.symbologyType)?_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.mD.DEFAULT:o.symbologyType,m=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.LINE,{...o,symbologyType:c}),h=i?s(m):m,y=n.clone(),u=y.marker;y.marker=null;const p=[];if(p.push({materialKey:h,hash:y.hash(),...l(y)}),u){const a=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.MARKER,o),r=i?s(a):a;u.color=u.color??y.color,p.push({materialKey:r,hash:u.hash(),lineWidth:y.width,...l(u)})}return{type:"composite-symbol",layers:p,hash:p.reduce(((e,a)=>a.hash+e),"")}}(e,a,t);case"text":return function y(a,r,n){const o=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.TEXT,r),i=n?s(o):o,c=l(a);return{materialKey:i,hash:a.hash(),...c,angle:a.angle,maxVVSize:r.maxVVSize}}(e,a,t);case"label":return function i(a,r,n){const l=a.toJSON(),o=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__.jj)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.LW.LABEL,{...r,placement:l.labelPlacement});return{materialKey:n?s(o):o,hash:a.hash(),...l,labelPlacement:l.labelPlacement}}(e,a,t);case"cim":return{type:"cim",rendererKey:a.vvFlags,data:e.data,maxVVSize:a.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:a.vvFlags,data:e,maxVVSize:a.maxVVSize};case"web-style":return{...l(e),type:"web-style",hash:e.hash(),rendererKey:a.vvFlags,maxVVSize:a.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}},"./node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MD:()=>_,Ew:()=>w,q5:()=>T});var arrayUtils=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),sql=__webpack_require__("./node_modules/@arcgis/core/core/sql.js"),diffUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"),labelingInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/labelingInfo.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),Utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js"),utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js"),visualVariablesUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js");function vvFlagUtils_e(e){if(!e)return enums.X.NONE;let r=0;for(const i of e)if("size"===i.type){const t=(0,visualVariablesUtils.a)(i);r|=t,"outline"===i.target&&(r|=t<<4)}else"color"===i.type?r|=enums.X.COLOR:"opacity"===i.type?r|=enums.X.OPACITY:"rotation"===i.type&&(r|=enums.X.ROTATION);return r}var createSymbolSchema=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/createSymbolSchema.js"),Rect=(__webpack_require__("./node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js"),__webpack_require__("./node_modules/@arcgis/core/symbols/cim/Rect.js")),definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js");function m(t,e){if(!("visualVariables"in t))return 0;if(!t.hasVisualVariables("size"))return 0;const r=t.getVisualVariablesForType("size");if(!r[0])return 0;const i=r[0];if(e&&"cluster_count"===i.field&&"cluster"===e.type)return e.clusterMaxSize;if("outline"===i.target)return 0;if("stops"===i.transformationType)return i.stops.map((t=>t.size)).reduce(g,0);if("clamped-linear"===i.transformationType){let t=-1/0,e=-1/0;return t="number"==typeof i.maxSize?i.maxSize:i.maxSize.stops.map((t=>t.size)).reduce(g,0),e="number"==typeof i.minSize?i.minSize:i.minSize.stops.map((t=>t.size)).reduce(g,0),Math.max(t,e)}return"real-world-size"===i.transformationType?30:void 0}definitions.eF.metrics,new Rect.Z(0,0,24,24);function g(t,e){return Math.max(t,e)}var rendererUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js"),clusterUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/clusterUtils.js"),util=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/util.js");const schemaUtils_x=Logger.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),schemaUtils_h="ValidationError";function T(e,t){let r=0,i=0,n=enums.mD.DEFAULT;if(null!=e){if(i=m(e,t),"visualVariables"in e&&(r=vvFlagUtils_e(e.visualVariables||[]),"dot-density"===e.type&&(n=enums.mD.DOT_DENSITY)),"heatmap"===e.type&&(n=enums.mD.HEATMAP),"dictionary"===e.type)return{maxVVSize:i,vvFlags:r,symbologyType:enums.mD.DEFAULT};if("pie-chart"===e.type)return{maxVVSize:i,vvFlags:r,symbologyType:enums.mD.PIE_CHART};if(n!==enums.mD.DOT_DENSITY&&n!==enums.mD.HEATMAP){const t=e.getSymbols();"backgroundFillSymbol"in e&&e.backgroundFillSymbol&&t.push(e.backgroundFillSymbol);let r=!0,i=!0;for(const e of t)if("cim"!==e.type&&"web-style"!==e.type||(i=!1),"simple-fill"===e.type||"picture-fill"===e.type){const t=e.outline,n=t&&"none"!==t.style&&"solid"!==t.style,s="simple-fill"===e.type&&"none"!==e.style&&"solid"!==e.style;n&&(r=!1),("picture-fill"===e.type||s||n)&&(i=!1)}r?n=i?enums.mD.OUTLINE_FILL_SIMPLE:enums.mD.OUTLINE_FILL:i&&(n=enums.mD.SIMPLE)}}return{vvFlags:r,maxVVSize:i,symbologyType:n}}let S=null;function w(e){if((0,has.Z)("esri-2d-update-debug")){const t=E(e,!0);console.debug("Created new schema",t),console.debug("Schema diff",(0,diffUtils.Hg)(S,t)),S=t}return E(e)}function E(e,t=!1){try{const r=function R(e,t=!1){const r=new Array;return r.push(function A(e,r,i=!1){const n={indexCount:0,fields:{}},s="featureReduction"in e?e.featureReduction??void 0:void 0,a=s?"aggregate":"feature";if("sublayers"in e){const r={type:"subtype",subtypeField:e.subtypeField,renderers:{},symbologyType:enums.mD.DEFAULT},s={type:"subtype",mapping:{},target:"feature",subtypeField:e.subtypeField},l={type:"subtype",classes:{}},u={type:"symbol",target:"feature",aggregateFields:[],attributes:n,storage:s,mesh:{matcher:r,aggregateMatcher:null,labels:l,sortKey:null}},f=new Set;let p=0;for(const{renderer:c,subtypeCode:y,labelingInfo:m,labelsVisible:g}of e.sublayers){let e=0;"visualVariables"in c&&c.visualVariables&&(c.visualVariables.some((e=>"rotation"!==e.type))&&schemaUtils_x.warnOnce("SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored."),e=vvFlagUtils_e(c.visualVariables.filter((e=>"size"!==e.type))));const u={symbologyType:enums.mD.DEFAULT,vvFlags:e,maxVVSize:0},b=_(n,a,c,u,i),v=C(n,a,c),T=g&&m;if("dictionary"===b.type)throw new Error.Z(schemaUtils_h,"Dictionary renderer is not supported in subtype layers");if("subtype"===b.type)throw new Error.Z(schemaUtils_h,"Nested subtype renderers is not supported");if(null!=v&&"subtype"===v.type)throw new Error.Z(schemaUtils_h,"Nested subtype storage is not supported");if(null!=v&&null!=v.attributeMapping)throw new Error.Z(schemaUtils_h,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===b.type)throw new Error.Z(schemaUtils_h,"Heatmaps are not supported in subtype layers");if("pie-chart"===b.type)throw new Error.Z(schemaUtils_h,"Pie-charts are not supported in subtype layers");if(f.has(y))throw new Error.Z(schemaUtils_h,"Subtype codes for sublayers must be unique");f.add(y),r.renderers[y]=b,s.mapping[y]=v,T&&(l.classes[y]=T.map((e=>U(n,e,"feature",p++,u,i))))}return u}if("heatmap"===e.renderer?.type&&"raster"===(0,rendererUtils.rk)()){const{radius:t,fieldOffset:r,field:i}=e.renderer;return{type:"heatmap",aggregateFields:[],attributes:n,target:a,storage:null,mesh:{radius:t,fieldOffset:r,field:schemaUtils_M(n,{target:a,field:i,resultType:"numeric"}).field}}}const u=function B(e,r,i){const n="featureReduction"in r&&r.featureReduction;if(!n)return{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};const s="aggregate",o=[];let a=null,u=(0,util.oq)(r.geometryType),d=[],p=null;if(n)switch(n.type){case"selection":return schemaUtils_x.error(new Error.Z(schemaUtils_h,"Mapview does not support `selection` reduction type",n)),{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};case"cluster":case"binning":if(o.push(...n.fields??[]),"cluster"===n.type?u="esriGeometryPoint":"binning"===n.type&&(u="esriGeometryPolygon"),n.renderer&&!n.renderer.authoringInfo?.isAutoGenerated){if("cluster"===n.type){const{renderer:e}=(0,clusterUtils.st)(n.renderer,n,null);p=e}else p=n.renderer;const t=T(n.renderer,n);a=_(e,s,n.renderer,t,i),d=n&&n.labelsVisible&&n.labelingInfo||[]}else if("cluster"===n.type){if(p=(0,clusterUtils.S1)(o,r.renderer,n,null,!0),n.symbol){const e=T(p,n);a={type:"simple",symbol:(0,createSymbolSchema.createSymbolSchema)(n.symbol,e,i),symbologyType:e.symbologyType}}d=n&&n.labelsVisible&&n.labelingInfo||[]}}return function k(e,t){const r={mesh:!0,storage:!0};for(const i of t){const{name:t,onStatisticField:n,onStatisticExpression:s,statisticType:l}=i;let o,a;const u="numeric",d="feature";s?a=j(e,{type:"expression",target:d,valueExpression:s.expression,resultType:u}).fieldIndex:o=j(e,{type:"field",target:d,field:n,resultType:u}).field,j(e,{type:"statistic",target:"aggregate",name:t,context:r,inField:o,inFieldIndex:a,statisticType:l})}}(e,o),{labels:(0,labelingInfo.a)(d,"binning"===n.type?"esriGeometryPolygon":u),matcher:a,fields:o,rendererOverride:p}}(n,e,i),f=(0,util.oq)(e.geometryType),p=u.rendererOverride??e.renderer,y=T(p,s),m=_(n,a,p,y,i),g=C(n,a,p),v=function P(e,r,i,n){if(null!=n)return null;if(null!=r&&r.length){r.length>1&&schemaUtils_x.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${r.length}. All but the first will be discarded`);const i=r[0],n="ascending"===i.order?"asc":"desc";return i.field?{field:i.field,order:n}:i.valueExpression?{fieldIndex:j(e,{type:"expression",target:"feature",valueExpression:i.valueExpression,resultType:"numeric"}).fieldIndex,order:n}:(schemaUtils_x.error(new Error.Z(schemaUtils_h,"Expected to find a field or valueExpression for OrderByInfo",i)),null)}if(null!=i&&"unique-value"===i.type&&i.orderByClassesEnabled)return{byRenderer:!0,order:"asc"};return null}(n,e.orderBy,e.renderer,s),S=e.labelsVisible&&e.labelingInfo||[],w=(0,labelingInfo.a)(S,f);let E=0;const F=[...w.map((e=>U(n,e,"feature",E++,y,i))),...u.labels.map((e=>U(n,e,"aggregate",E++,y,i)))];return{type:"symbol",target:a,attributes:n,aggregateFields:u.fields,storage:g,mesh:{matcher:m,labels:{type:"simple",classes:F},aggregateMatcher:u.matcher,sortKey:v}}}(e,0,t)),r}(e,t),i=function D(e){return"heatmap"===e.renderer?.type&&"raster"===(0,rendererUtils.rk)()?{type:"heatmap"}:{type:"symbol"}}(e),s={};r.map((t=>function F(e,r,i){switch(i.target){case"feature":return void O(e,V(r),i);case"aggregate":{if(!("featureReduction"in r))return;const n=r.featureReduction;switch(n?.type){case"selection":throw new Error.Z(schemaUtils_h,"Mapview does not support `selection` reduction type",n);case"binning":return O(e,V(r),i),void function N(e,t,r,i){return e.aggregate||(e.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:t.fixedBinLevel,fields:(t.fields??[]).map((e=>({...e.toJSON(),type:z(e,r)})))},attributes:{}}),I(e.aggregate,i.attributes.fields),e}(e,n,r.fields.map((e=>e.toJSON())),i);case"cluster":return O(e,V(r),i),void function L(e,t,r,n){const s=n.aggregateFields??[],l=new Set;for(const i of s)l.add(i.name);for(const i of t?.fields??[])l.has(i.name)||s.push(i);return e.aggregate||(e.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,screenUtils.F2)(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,screenUtils.F2)(t.clusterMaxSize)/64),fields:s.map((e=>({...e.toJSON(),type:z(e,r)})))}}),I(e.aggregate,n.attributes.fields),e}(e,n,r.fields.map((e=>e.toJSON())),i)}}}}(s,e,t)));const l=null!=e.subtypeCode?`${e.subtypeField} = ${e.subtypeCode}`:null;return{source:{definitionExpression:(0,sql._)(e.definitionExpression,l),fields:e.fields.map((e=>e.toJSON())),gdbVersion:e.gdbVersion,historicMoment:e.historicMoment?.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:e.timeExtent?.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:r,tileRenderer:i,targets:s}}catch(r){if(r.fieldName===schemaUtils_h)return schemaUtils_x.error(r),null;throw r}}function I(e,t){for(const r in t){const i=t[r];if(i.target!==e.name)continue;const n=e.attributes[r];if(n?.context){const e=n.context;e.mesh=e.mesh||i.context?.mesh,e.storage=e.storage||i.context?.storage}else e.attributes[r]=i}return e}function V(e){return[e.filter?.toJSON()??null,e.featureEffect?.filter?.toJSON()??null]}function O(e,t,r){return e.feature||(e.feature={name:"feature",input:"source",filters:t,attributes:{}}),I(e.feature,r.attributes.fields),e}function z(e,r){const{onStatisticExpression:i,onStatisticField:n,statisticType:s}=e;switch(s){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":{if(i){const{returnType:r}=i;return r?"string"===r?"esriFieldTypeString":"esriFieldTypeDouble":(schemaUtils_x.error(new Error.Z(schemaUtils_h,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}const s=r.find((e=>e.name===n));return s?s.type:(schemaUtils_x.error(new Error.Z(schemaUtils_h,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}}}function schemaUtils_M(e,t){return t.field?j(e,{...t,type:"field",field:t.field}):t.valueExpression?j(e,{...t,type:"expression",valueExpression:t.valueExpression}):{field:void 0,fieldIndex:void 0}}function j(e,t){switch(t.type){case"expression":{const r=t.valueExpression;if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case"label-expression":{const r=JSON.stringify(t.label);if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case"field":{const r=t.field;return"aggregate"===t.target&&e.fields[r]||(e.fields[r]={...t,name:r}),{field:r}}case"statistic":return e.fields[t.name]={...t},{field:t.name}}}function U(e,t,r,i,n,s=!1){const l=j(e,{type:"label-expression",target:r,context:{mesh:!0},resultType:"string",label:{labelExpression:t.labelExpression,labelExpressionInfo:t.labelExpressionInfo?{expression:t.labelExpressionInfo.expression}:null,symbol:!!t.symbol,where:t.where}}),{fieldIndex:o}=l;return{...(0,createSymbolSchema.createSymbolSchema)(t,n,s),fieldIndex:o,target:r,index:i}}function C(e,t,r){let i;switch(r.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":i={visualVariables:!0,attributes:null};break;default:i=(0,utils.EJ)(r).getStorageSpec(r)}return function J(e,t,r,i){if(null==r)return null;const{visualVariables:n,attributes:s}=r;let l=null;n&&"visualVariables"in i&&(l=function q(t,r,i){if(!i||!i.length)return[];const n={storage:!0},s="numeric";return(0,rendererUtils.tv)(i).map((e=>{const i=(0,Utils.nU)(e.type),{field:l,fieldIndex:o}=schemaUtils_M(t,{target:r,valueExpression:e.valueExpression,field:e.field,context:n,resultType:s});switch(e.type){case"size":return"$view.scale"===e.valueExpression?null:{type:"size",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field,valueRepresentation:e.valueRepresentation??null};case"color":return{type:"color",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field};case"opacity":return{type:"opacity",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field};case"rotation":return{type:"rotation",binding:i,field:l,fieldIndex:o}}})).filter(arrayUtils.pC)}(e,t,i.visualVariables));const o=null!=l?4:0;let a=null;return null!=s&&(a=s.map(((r,i)=>{const{field:n,fieldIndex:s}=schemaUtils_M(e,{valueExpression:r.valueExpression,field:r.field,resultType:"numeric",target:t});return{binding:i+o,field:n,fieldIndex:s}}))),{type:"simple",target:t,attributeMapping:a,vvMapping:l}}(e,t,i,r)}function _(e,t,r,i,n=!1){const s=e??{indexCount:0,fields:{}};switch(r.type){case"simple":case"dot-density":return function G(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:"simple",symbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),symbologyType:r.symbologyType}}(0,r,i,n);case"class-breaks":return function $(e,t,r,i,n=!1){const s={mesh:!0,use:"renderer.field"},l=r.backgroundFillSymbol,{field:o,fieldIndex:a}=schemaUtils_M(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:"numeric",context:s}),u=r.normalizationType,d="log"===u?"esriNormalizeByLog":"percent-of-total"===u?"esriNormalizeByPercentOfTotal":"field"===u?"esriNormalizeByField":null,p=r.classBreakInfos.map((e=>({symbol:(0,createSymbolSchema.createSymbolSchema)(e.symbol,i,n),min:e.minValue,max:e.maxValue}))).sort(((e,t)=>e.min-t.min));return{type:"interval",attributes:e.fields,field:o,fieldIndex:a,backgroundFillSymbol:(0,createSymbolSchema.createSymbolSchema)(l,i,n),defaultSymbol:(0,createSymbolSchema.createSymbolSchema)(r.defaultSymbol,i,n),intervals:p,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:d,isMaxInclusive:r.isMaxInclusive,symbologyType:i.symbologyType}}(s,t,r,i,n);case"unique-value":return function K(e,r,i,n,s=!1){const l=[],o=i.backgroundFillSymbol,a={target:r,context:{mesh:!0},resultType:"string"};if(i.field&&"string"!=typeof i.field)throw new Error.Z(schemaUtils_h,"Expected renderer.field to be a string",i);const{field:u,fieldIndex:d}=schemaUtils_M(e,{...a,field:i.field,valueExpression:i.valueExpression});for(const t of i.uniqueValueInfos??[])l.push({value:""+t.value,symbol:(0,createSymbolSchema.createSymbolSchema)(t.symbol,n,s)});return{type:"map",attributes:e.fields,field:u,fieldIndex:d,field2:schemaUtils_M(e,{...a,field:i.field2}).field,field3:schemaUtils_M(e,{...a,field:i.field3}).field,fieldDelimiter:i.fieldDelimiter??void 0,backgroundFillSymbol:(0,createSymbolSchema.createSymbolSchema)(o,n),defaultSymbol:(0,createSymbolSchema.createSymbolSchema)(i.defaultSymbol,n),map:l,symbologyType:n.symbologyType}}(s,t,r,i,n);case"dictionary":return function Y(e,t,r,i=!1){return{type:"dictionary",config:t.config,fieldMap:t.fieldMap,scaleExpression:t.scaleExpression,url:t.url,symbolOptions:r,symbologyType:r.symbologyType}}(0,r,i,n);case"heatmap":return function Q(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:"heatmap",symbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),symbologyType:r.symbologyType}}(0,r,i,n);case"pie-chart":return function H(e,t,r,i=!1){const n=t.getSymbols(),s=n[0],l=n.length>1?n[1]:null;return{type:"pie-chart",markerSymbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),fillSymbol:(0,createSymbolSchema.createSymbolSchema)(l,r,i),symbologyType:r.symbologyType}}(0,r,i,n)}}},"./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{TT:()=>h,aR:()=>n,rk:()=>g,tv:()=>i});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_has_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities.js");const s=8,l=s-2,a=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils"),n=e=>{if(!("visualVariables"in e)||!e.visualVariables||!e.visualVariables.length)return e;const r=e.clone(),t=r.visualVariables.map((e=>u(e)?p(e):e));return r.visualVariables=t,r};function i(e){return e.map((e=>u(e)?p(e.clone()):e))}function u(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function p(e){return e.stops=function m(e,r){return r.length<=s?r:(a.warn(`Found ${r.length} Visual Variable stops, but MapView only supports ${s}. Displayed stops will be simplified.`),r.length>2*s?function f(e,r){const[o,...s]=r,a=s.pop(),n=s[0].value,i=s[s.length-1].value,u=(i-n)/l,p=[];for(let l=n;l<i;l+=u){let o=0;for(;l>=s[o].value;)o++;const a=s[o],n=r[o-1],i=l-n.value,u=a.value===n.value?1:i/(a.value-n.value);if("color"===e){const e=s[o],t=r[o-1],a=e.color.clone();a.r=c(t.color.r,a.r,u),a.g=c(t.color.g,a.g,u),a.b=c(t.color.b,a.b,u),a.a=c(t.color.a,a.a,u),p.push({value:l,color:a,label:e.label})}else if("size"===e){const e=s[o],a=r[o-1],n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.t_)(e.size),i=c((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.t_)(a.size),n,u);p.push({value:l,size:i,label:e.label})}else{const e=s[o],t=c(r[o-1].opacity,e.opacity,u);p.push({value:l,opacity:t,label:e.label})}}return[o,...p,a]}(e,r):function b(e){const[r,...t]=e,o=t.pop();for(;t.length>l;){let e=0,r=0;for(let o=1;o<t.length;o++){const s=t[o-1],l=t[o],a=Math.abs(l.value-s.value);a>r&&(r=a,e=o)}t.splice(e,1)}return[r,...t,o]}(r))}(e.type,e.stops??[]),e}function c(e,r,t){return(1-t)*e+t*r}function g(){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("heatmap-force-raster"))return"raster";const{supportsTextureFloat:e,supportsTextureHalfFloat:r,supportsColorBufferFloat:t,supportsColorBufferFloatBlend:s,supportsColorBufferHalfFloat:l}=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__.hc)("2d");return e&&t&&s||r&&l?"symbol":(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("heatmap-allow-raster-fallback")?"raster":"none"}function h(r){if(!r)return!0;switch(r.type){case"dot-density":if(!(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__.hc)("2d").supportsTextureFloat)return a.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":{const r=g();if("none"===r||"raster"===r&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("heatmap-force-raster")){const t=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__.hc)("2d"),s=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((e=>!t[e])).join(", ");if("none"===r)return a.errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("webgl-missing-extension",`Missing WebGL${t.type} requirements for Heatmap: ${s}`)),!1;"raster"===r&&a.warnOnce(`Missing WebGL${t.type} requirements for accelerated Heatmap: ${s}. Feature support may be limited.`)}break}}return!0}},"./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/visualVariablesUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>c,qc:()=>l});var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/color.js"),_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js");function l(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e}function a(e){return(e??[]).map((e=>function r(t){return{value:t.value,size:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.t_)(t.size)}}(e)))}function u(t){if("string"==typeof t||"number"==typeof t)return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.t_)(t);const s=t;return{type:"size",expression:s.expression,stops:a(s.stops)}}const p=e=>{const s=[],o=[],i=a(e),l=i.length;for(let r=0;r<6;r++){const e=i[Math.min(r,l-1)];s.push(e.value),o.push(null==e.size?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_1__.AI:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.F2)(e.size))}return{values:new Float32Array(s),sizes:new Float32Array(o)}};function c(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t||!s)return{vvFields:t,vvRanges:s};for(const n of e)if(n.field&&(t[n.type]=n.field),"size"===n.type){s.size||(s.size={});const e=n;switch((0,_engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_3__.a)(e)){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:u(e.minSize),maxSize:u(e.maxSize)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_SCALE_STOPS:s.size.scaleStops={stops:a(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=p(e.levels[s]);s.size.fieldStops={type:"level-dependent",levels:t}}else s.size.fieldStops={type:"static",...p(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.X.SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation??void 0}}}else if("color"===n.type)s.color=m(n);else if("opacity"===n.type)s.opacity=f(n);else if("rotation"===n.type){const e=n;s.rotation={type:e.rotationType}}return{vvFields:t,vvRanges:s}}function f(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,t.opacities[e]=n.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function v(e,t,s){e[4*t]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function m(e){if(null==e)return null;if(e.normalizationField)return null;const t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;t.field=e.field;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,v(t.colors,e,n.color)}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].color;for(let e=0;e<8;e++)t.values[e]=1/0,v(t.colors,e,s)}}for(let n=0;n<32;n+=4)(0,_engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_0__.pr)(t.colors,n,!0);return t}},"./node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I_:()=>c,XA:()=>x,Zu:()=>g,ab:()=>u,eT:()=>h,y1:()=>f,yA:()=>p});__webpack_require__("./node_modules/@arcgis/core/core/BidiText.js");var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/shapingUtils.js");const c=512,f=50;function g(e,t){const n=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.C5)(t);if(!n)return null;const[o,s]=n.valid;return e[2]>s?[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.Ue)([e[0],e[1],s,e[3]]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.Ue)([o,e[1],o+e[2]-s,e[3]])]:e[0]<o?[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.Ue)([o,e[1],e[2],e[3]]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.Ue)([s-(o-e[0]),e[1],s,e[3]])]:null}function u(e){return"text"===e||"esriTS"===e}function p(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function h(e){switch(e.geometry.type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function x(e){if(!e)return null;const{xmin:t,ymin:i,xmax:r,ymax:o,spatialReference:s}=e;return new _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_1__.Z({rings:[[[t,i],[t,o],[r,o],[r,i],[t,i]]],spatialReference:s})}},"./node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>n,B:()=>r});var cimAnalyzer=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),MaterialKey=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js");const s={marker:enums.LW.MARKER,fill:enums.LW.FILL,line:enums.LW.LINE,text:enums.LW.TEXT};class l{constructor(e,l,n,r){const c={minScale:l?.minScale,maxScale:l?.maxScale},m=function i(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(c);this.layers=e,this.data=l,this.hash=this._createHash()+m,this.rendererKey=n;const o={isOutline:!1,placement:null,symbologyType:enums.mD.DEFAULT,vvFlags:n};for(const t of e){const e=s[t.type];o.isOutline="line"===t.type&&t.isOutline,t.materialKey=(0,MaterialKey.jj)(e,o),t.maxVVSize=r,t.scaleInfo=c,t.templateHash+=m}}get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}}var devEnvironmentUtils=__webpack_require__("./node_modules/@arcgis/core/core/devEnvironmentUtils.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),Portal=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),persistableUrlUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js"),styleUtils=__webpack_require__("./node_modules/@arcgis/core/symbols/support/styleUtils.js"),webStyleSymbolUtils=__webpack_require__("./node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js");async function f(t,r,s){if(!t.name)throw new Error.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");if(t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName)return async function p(t,r){const o=styleUtils.wm.replaceAll(/\{SymbolName\}/gi,t.name);try{const t=await(0,styleUtils.EJ)(o,r);return(0,styleUtils.KV)(t.data)}catch(s){return(0,promiseUtils.r9)(s),null}}(t,s);try{return async function b(m,a,f,p){const b={portal:f&&null!=f.portal?f.portal:Portal.Z.getDefault(),url:(0,urlUtils.mN)(m.baseUrl),origin:"portal-item"},j=(0,webStyleSymbolUtils.m)(a,m.data);if(!j)throw new Error.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${a}' could not be found`,{symbolName:a});let w=(0,persistableUrlUtils.f)((0,styleUtils.v9)(j,"cimRef"),b);(0,devEnvironmentUtils.XO)()&&(w=(0,devEnvironmentUtils.pJ)(w));try{const t=await(0,styleUtils.EJ)(w,p);return(0,styleUtils.KV)(t.data)}catch(U){return(0,promiseUtils.r9)(U),null}}(await(0,styleUtils.n2)(t,r,s),t.name,r,s)}catch(l){return(0,promiseUtils.r9)(l),null}}const cimSymbolUtils_i=async(a,i,r)=>{const n=new cimAnalyzer._(r,i);return new l(await n.analyzeSymbolReference(a.data,!1),a.data,a.rendererKey,a.maxVVSize)};async function r(e,t,r,n){if(!e)return null;if("cim"===e.type)return cimSymbolUtils_i(e,t,r);if("web-style"===e.type){const l={type:"cim",data:await f(e,null,n)??void 0,rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return cimSymbolUtils_i(l,t,r)}return e}function n(e){if(!e)return null;const{avoidSDFRasterization:t,type:a,cim:i,url:r,materialHash:n,maxVVSize:l}=e,m={cim:i,type:a,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(a){case"marker":l&&"size"in i&&(i.size=Math.max(l,i.size)),m.size=e.size,m.path=e.path,m.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":m.dashTemplate=e.dashTemplate;break;case"text":m.text=e.text,m.fontName=e.fontName}return m}},"./node_modules/@arcgis/core/views/2d/layers/support/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JV:()=>r,oq:()=>e});const o=new(__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js").X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function e(t){return o.toJSON(t)}function r(t){const{bandCount:o,attributeTable:e,colormap:n,pixelType:r}=t.raster.rasterInfo;return 1===o&&(null!=e||null!=n||"u8"===r||"s8"===r)}}}]);