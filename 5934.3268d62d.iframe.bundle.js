"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[5934],{"./node_modules/@arcgis/core/core/CircularArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>t});class t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}},"./node_modules/@arcgis/core/core/pbf.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>n});var e,t,_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_ObjectPool_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/ObjectPool.js");(t=e||(e={}))[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown";const i=4294967296,s=new TextDecoder("utf-8"),r=(0,_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("safari")||(0,_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("ios")?6:(0,_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("ff")?12:32;class n{constructor(t,i,s=0,r=(t?t.byteLength:0)){this._tag=0,this._dataType=e.unknown,this._init(t,i,s,r)}_init(t,e,i,s){this._data=t,this._dataView=e,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new n(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(void 0!==t)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getUint32(e+4,!0)*i;return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getInt32(e+4,!0)*i;return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}getBytes(){const t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,i,s){const r=this.getMessage(),n=t(r,e,i,s);return r.release(),n}processMessage(t){const e=this.getMessage(),i=t(e);return e.release(),i}getMessage(){const t=this._getLength(),e=n.pool.acquire();return e._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){n.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case e.varint:this._decodeVarint();break;case e.fixed64:this._skip(8);break;case e.delimited:this._skip(this._getLength());break;case e.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let e=this._pos,i=0,s=0;if(this._end-e>=10)do{if(s=t[e++],i|=127&s,0==(128&s))break;if(s=t[e++],i|=(127&s)<<7,0==(128&s))break;if(s=t[e++],i|=(127&s)<<14,0==(128&s))break;if(s=t[e++],i|=(127&s)<<21,0==(128&s))break;if(s=t[e++],i+=268435456*(127&s),0==(128&s))break;if(s=t[e++],i+=34359738368*(127&s),0==(128&s))break;if(s=t[e++],i+=4398046511104*(127&s),0==(128&s))break;if(s=t[e++],i+=562949953421312*(127&s),0==(128&s))break;if(s=t[e++],i+=72057594037927940*(127&s),0==(128&s))break;if(s=t[e++],i+=0x8000000000000000*(127&s),0==(128&s))break;throw new Error("Varint too long!")}while(0);else{let r=1;for(;e!==this._end&&(s=t[e],0!=(128&s));)++e,i+=(127&s)*r,r*=128;if(e===this._end)throw new Error("Varint overrun!");++e,i+=s*r}return this._pos=e,i}_decodeSVarint(){const t=this._data;let e=this._pos,i=0,s=0;const r=1&t[e];if(this._end-e>=10)do{if(s=t[e++],i|=127&s,0==(128&s))break;if(s=t[e++],i|=(127&s)<<7,0==(128&s))break;if(s=t[e++],i|=(127&s)<<14,0==(128&s))break;if(s=t[e++],i|=(127&s)<<21,0==(128&s))break;if(s=t[e++],i+=268435456*(127&s),0==(128&s))break;if(s=t[e++],i+=34359738368*(127&s),0==(128&s))break;if(s=t[e++],i+=4398046511104*(127&s),0==(128&s))break;if(s=t[e++],i+=562949953421312*(127&s),0==(128&s))break;if(s=t[e++],i+=72057594037927940*(127&s),0==(128&s))break;if(s=t[e++],i+=0x8000000000000000*(127&s),0==(128&s))break;throw new Error("Varint too long!")}while(0);else{let r=1;for(;e!==this._end&&(s=t[e],0!=(128&s));)++e,i+=(127&s)*r,r*=128;if(e===this._end)throw new Error("Varint overrun!");++e,i+=s*r}return this._pos=e,r?-(i+1)/2:i/2}_getLength(){if(this._dataType!==e.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,i){if((i=Math.min(this._end,i))-e>r){const r=t.subarray(e,i);return s.decode(r)}let n="",a="";for(let s=e;s<i;++s){const e=t[s];128&e?a+="%"+e.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(e),a="")}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}n.pool=new _ObjectPool_js__WEBPACK_IMPORTED_MODULE_1__.Z(n,void 0,(t=>{t._data=null,t._dataView=null}))},"./node_modules/@arcgis/core/core/throttle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(e,t,l,n){let o=null,p=1e3;"number"==typeof t?(p=t,n=l):(o=t??null,p=l);let r,u=0;const a=()=>{u=0,e.apply(n,r)},c=(...e)=>{o&&o.apply(n,e),r=e,p?u||(u=setTimeout(a,p)):a()};return c.remove=()=>{u&&(clearTimeout(u),u=0)},c.forceUpdate=()=>{u&&(clearTimeout(u),a())},c.hasPendingUpdates=()=>!!u,c}__webpack_require__.d(__webpack_exports__,{P:()=>e})},"./node_modules/@arcgis/core/views/2d/LabelManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>LabelManager_d});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),HandleOwner=(__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js")),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),throttle=(__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/throttle.js")),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),StaticBitSet=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js");class l{constructor(t,e,o){this._debugMap=new Map,this._width=t*o,this._height=e*o,this._pixelRatio=o;const h=Math.ceil(this._width/1),r=Math.ceil(this._height/1);this._cols=h,this._rows=r,this._cells=StaticBitSet.p.create(h*r)}insertMetrics(t){const s=this._hasCollision(t);return 0===s&&this._markMetrics(t),s}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_collide(s,e,l,n){const c=s-l/2,a=e-n/2,_=c+l,d=a+n;if(_<0||d<0||c>this._width||a>this._height)return 1;const u=(0,mathUtils.uZ)(Math.floor(c/1),0,this._cols),p=(0,mathUtils.uZ)(Math.floor(a/1),0,this._rows),M=(0,mathUtils.uZ)(Math.ceil(_/1),0,this._cols),f=(0,mathUtils.uZ)(Math.ceil(d/1),0,this._rows);for(let t=p;t<=f;t++)for(let s=u;s<=M;s++){const e=this.getCellId(s,t);if(this.has(e))return 2}return 0}_mark(s,e,o,h,r){const l=s-o/2,n=e-h/2,c=l+o,a=n+h,_=(0,mathUtils.uZ)(Math.floor(l/1),0,this._cols),d=(0,mathUtils.uZ)(Math.floor(n/1),0,this._rows),u=(0,mathUtils.uZ)(Math.ceil(c/1),0,this._cols),p=(0,mathUtils.uZ)(Math.ceil(a/1),0,this._rows);for(let t=d;t<=p;t++)for(let s=_;s<=u;s++){const e=this.getCellId(s,t);this._debugMap.set(e,r),this.set(e)}return!1}_hasCollision(t){const s=t.id;let i=0,l=0;t.save();do{const s=t.boundsCount;i+=s;for(let i=0;i<s;i++){const s=t.boundsComputedAnchorX(i),o=t.boundsComputedAnchorY(i),n=(t.boundsWidth(i)+2)*this._pixelRatio,c=(t.boundsHeight(i)+2)*this._pixelRatio;switch(this._collide(s,o,n,c)){case 2:return 2;case 1:l++}}}while(t.peekId()===s&&t.next());return t.restore(),i===l?1:0}_markMetrics(t){const s=t.id;t.save();do{const s=t.boundsCount;for(let i=0;i<s;i++){const s=t.boundsComputedAnchorX(i),o=t.boundsComputedAnchorY(i),h=(t.boundsWidth(i)+2)*this._pixelRatio,r=(t.boundsHeight(i)+2)*this._pixelRatio;this._mark(s,o,h,r,t.id)}}while(t.peekId()===s&&t.next());t.restore()}}function d(e,i){const t=[];e.forEachTile((e=>t.push(e))),t.sort(((e,i)=>e.instanceId-i.instanceId)),t.forEach((e=>{null!=e.labelMetrics&&e.isReady&&i(e,e.labelMetrics.getCursor())}))}class c{run(e,i,t){const o=[];for(let s=e.length-1;s>=0;s--){const i=e[s];i.labelingCollisionInfos&&o.push(...i.labelingCollisionInfos)}this._transformMetrics(o),this._runCollision(o,i,t)}_runCollision(e,i,o){const[s,n]=i.state.size,r=new l(s,n,i.pixelRatio);for(const{tileRenderer:t,deconflictionEnabled:c,visible:f}of e){const e=t.featuresView.attributeView;c?f?(this._prepare(t),this._collideVisible(r,t,o),this._collideInvisible(r,t)):d(t,((i,t)=>{for(;t.nextId();)e.setLabelMinZoom(t.id,255)})):d(t,((i,t)=>{for(;t.nextId();)e.setLabelMinZoom(t.id,0),f&&r.insertMetrics(t)}))}}_isFiltered(t,o,s){const n=o.getFilterFlags(t),r=!s.hasFilter||!!(n&definitions.Zd),l=null==s.featureEffect||s.featureEffect.excludedLabelsVisible||!!(n&definitions.iV);return!(r&&l)}_prepare(e){const i=e.featuresView.attributeView,t=new Set;d(e,((o,s)=>{for(;s.nextId();)t.has(s.id)||(t.add(s.id),this._isFiltered(s.id,i,e.layerView)?i.setLabelMinZoom(s.id,254):0!==i.getLabelMinZoom(s.id)?i.setLabelMinZoom(s.id,255):i.setLabelMinZoom(s.id,0))}))}_collideVisible(e,i,t){const l=i.featuresView.attributeView,c=new Set;d(i,((i,d)=>{for(;d.nextId();)if(!c.has(d.id))if(i.key.level===t){if(0===l.getLabelMinZoom(d.id))switch(e.insertMetrics(d)){case 1:break;case 2:l.setLabelMinZoom(d.id,254),c.add(d.id);break;case 0:l.setLabelMinZoom(d.id,0),c.add(d.id)}}else l.setLabelMinZoom(d.id,254)}))}_collideInvisible(e,i){const t=i.featuresView.attributeView,r=new Set;d(i,((i,d)=>{for(;d.nextId();)if(!r.has(d.id)&&255===t.getLabelMinZoom(d.id))switch(e.insertMetrics(d)){case 1:break;case 2:t.setLabelMinZoom(d.id,255),r.add(d.id);break;case 0:t.setLabelMinZoom(d.id,0),r.add(d.id)}}))}_transformMetrics(e){for(const{tileRenderer:i,geometryType:t,vvEvaluators:o}of e)d(i,((e,s)=>{const n=i.featuresView.attributeView,r=e.transforms.labelMat2d;r[4]=Math.round(r[4]),r[5]=Math.round(r[5]);const l="polyline"===t;for(;s.next();){const e=s.boundsCount,i=s.anchorX,t=s.anchorY;let a=s.size;const d=o[0];if(null!=d){const e=d(n.getVVSize(s.id));a=isNaN(e)||null==e||e===1/0?a:e}const c=s.directionX*(a/2),f=s.directionY*(a/2);for(let o=0;o<e;o++){let e=i,n=s.anchorY;if(l){let i=e+s.boundsX(o)+c,t=n+s.boundsY(o)+f;i=r[0]*i+r[2]*t+r[4],t=r[1]*i+r[3]*t+r[5],s.setBoundsComputedAnchorX(o,Math.floor(i)),s.setBoundsComputedAnchorY(o,Math.floor(t))}else{e=r[0]*i+r[2]*t+r[4],n=r[1]*i+r[3]*t+r[5];const l=e+s.boundsX(o)+c,a=n+s.boundsY(o)+f;s.setBoundsComputedAnchorX(o,l),s.setBoundsComputedAnchorY(o,a)}}}}))}}let LabelManager_d=class extends((0,HandleOwner.p)(Accessor.Z)){constructor(e){super(e),this.collisionEngine=new c,this.lastUpdateId=-1,this.updateRequested=!1,this.view=null,this._applyVisibilityPass=(0,throttle.P)((e=>{const t=this.view;if(t)try{const s=t.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(t.allLayerViews.items,e,s)}catch(s){}}),32,this),this.addHandles(this._applyVisibilityPass)}get updating(){return(0,has.Z)("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`),this.updateRequested}update(e){this._applyVisibilityPass(e)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view?.requestUpdate())}processUpdate(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))}};(0,tslib_es6._)([(0,property.Cb)()],LabelManager_d.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property.Cb)()],LabelManager_d.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],LabelManager_d.prototype,"view",void 0),LabelManager_d=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.LabelManager")],LabelManager_d)},"./node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/resolver.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>n});const shaderRepository_e={background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\ngl_FragColor = u_opacity * color;\n#else\ngl_FragColor = u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position = vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             = u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\n}"},circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist = length(v_offset);\nmediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\nv_stroke_color = stroke_color * stroke_opacity;\nv_stroke_width = stroke_width;\nv_radius = radius;\nv_blur = max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset = offset;\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\ngl_FragColor = v_color[3] * color;\n#else\ngl_FragColor = v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include <util/util.glsl>\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth = nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight = nextPOT(tlbr.w - tlbr.y);\nfloat scaleX = 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY = 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat = mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord = (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             = tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include <util/encoding.glsl>\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor = v_color;\nfloat d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio = 0.248062016;\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * softEdgeRatio * size;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width > 0.25) {\nlowp vec4 outlinePixelColor = u_outlineColor;\nconst float outlineLimitRatio = (16.0 / 86.0);\nfloat clampedOutlineSize = softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor = v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor = v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor = texture2D(u_texture, v_tex);\ngl_FragColor = v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float tileCoordRatio = 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color = color;\nv_opacity = opacity;\n#ifdef SDF\nv_halo_width = halo_width;\n#endif\nfloat modded = mod(a_opacityInfo, 128.0);\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\nfloat startOpacity = modded / 127.0;\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *= interpolatedOpacity;\nmediump float a_angle         = a_levelInfo[1];\nmediump float a_minLevel      = a_levelInfo[2];\nmediump float a_maxLevel      = a_levelInfo[3];\nmediump vec2 a_tex            = a_texAngleRange.xy;\nmediump float delta_z = 0.0;\nmediump float rotated = mod(a_angle + u_mapRotation, 256.0);\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z += 1.0 - step(a_minLevel, u_level);\ndelta_z += step(a_maxLevel, u_level);\ndelta_z += step(v_opacity, 0.0);\nvec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\nv_size = abs(offset);\n#ifdef SDF\noffset = (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\nv_tex = a_tex.xy / u_mosaicSize;\n}"},line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include <util/encoding.glsl>\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\nlowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX = fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY = 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color = texture2D(u_texture, texCoord);\ngl_FragColor = alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX = fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY =  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor = alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor = alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale = 1.0 / 31.0;\nconst mediump float tileCoordRatio = 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth = 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\nv_blur = blur + u_antialiasing;\nv_normal = a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          = tlbr / u_mosaicSize.xyxy;\nv_patternSize   = vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio = width / v_patternSize.y;\n#else\nv_widthRatio = width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth = (width + u_antialiasing) * 0.5;\nmediump vec2 dir = a_dir_normal.xy * scale;\nmediump vec2 offset_ = a_extrude_offset.zw * scale * offset;\nmediump vec2 dist = v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance = a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\n}"},outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist = abs(v_normal.y);\nlowp float alpha = smoothstep(1.0, 0.0, dist);\ngl_FragColor = alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale = 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\nv_normal = a_xnormal;\nmediump vec2 dist = u_outline_width * scale * a_offset;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor = alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision = 1.0 / 8.0;\nconst mediump float edgePos = 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale = 1.0 / 24.0;\nconst float sdfPixel = 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo > 0.5)\n{\nv_color = halo_color * opacity;\nhalo_width *= sdfPixel;\nhalo_blur *= sdfPixel;\n}\nelse\n{\nv_color = color * opacity;\nhalo_width = 0.0;\nhalo_blur = 0.0;\n}\nfloat modded = mod(a_opacityInfo, 128.0);\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\nfloat startOpacity = modded / 127.0;\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *= interpolatedOpacity;\nmediump float a_angle       = a_levelInfo[1];\nmediump float a_minLevel    = a_levelInfo[2];\nmediump float a_maxLevel    = a_levelInfo[3];\nmediump vec2 a_tex          = a_texAngleRange.xy;\nmediump float a_visMinAngle    = a_texAngleRange.z;\nmediump float a_visMaxAngle    = a_texAngleRange.w;\nmediump float delta_z = 0.0;\nmediump float angle = mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle < a_visMaxAngle)\n{\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z += 1.0 - step(a_minLevel, u_level);\ndelta_z += step(a_maxLevel, u_level);\ndelta_z += step(v_color[3], 0.0);\nv_tex = a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id = u_id / 255.0;\n#endif\nv_edgeDistance = edgePos - halo_width / size;\nv_edgeWidth = (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},util:{"encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}};const t=new(__webpack_require__("./node_modules/@arcgis/core/views/webgl/ShaderCompiler.js").B)((function o(e){let o=shaderRepository_e;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}));function n(r){return t.resolveIncludes(r)}},"./node_modules/@arcgis/core/views/2d/engine/webgl/BufferPool.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>i,g:()=>r});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js");const s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("esri-2d-log-allocations");class r{constructor(t,e){this._array=t,this._pool=e}get array(){return this._array}get length(){return this._array.length}static create(t,e){const s=e.acquire(t);return new r(s,e)}expand(t){const e=this._pool.acquire(t);e.set(this._array),this._pool.release(this._array),this._array=e}destroy(){this._pool.release(this._array)}set(t,e){this._array.set(t._array,e)}slice(){const t=this._pool.acquire(this._array.byteLength);return t.set(this._array),new r(t,this._pool)}}class a{constructor(){this._data=new ArrayBuffer(a.BYTE_LENGTH),this._freeList=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__.m({start:0,end:this._data.byteLength})}static get BYTE_LENGTH(){return 64e6}get buffer(){return this._data}allocate(t){const e=this._freeList.firstFit(t);return null==e?null:new Uint32Array(this._data,e,t/Uint32Array.BYTES_PER_ELEMENT)}free(t){this._freeList.free(t.byteOffset,t.byteLength)}}class i{constructor(){this._bytesAllocated=0,this._pages=[],this._pagesByBuffer=new Map,this._addPage()}destroy(){this._pages=[],this._pagesByBuffer=null}get _bytesTotal(){return this._pages.length*a.BYTE_LENGTH}acquire(e){if(this._bytesAllocated+=e,s&&console.log(`Allocating ${e}, (${this._bytesAllocated} / ${this._bytesTotal})`),e>a.BYTE_LENGTH)return new Uint32Array(e/Uint32Array.BYTES_PER_ELEMENT);for(const t of this._pages){const s=t.allocate(e);if(null!=s)return s}return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.s3)(this._addPage().allocate(e),"Expected to allocate page")}release(t){this._bytesAllocated-=t.byteLength,s&&console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);const e=this._pagesByBuffer.get(t.buffer);e&&e.free(t)}_addPage(){const t=new a;return this._pages.push(t),this._pagesByBuffer.set(t.buffer,t),t}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>n});var _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/CircularArray.js"),_core_Evented_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),_core_has_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_webgl_capabilities_DisjointTimerQuery_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js");const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__.Z)("esri-2d-profiler");class n{constructor(n,i){if(this._events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__.Z,this._entries=new Map,this._timings=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__.Z(10),this._currentContainer=null,this._currentPass=null,this._currentBrush=null,this._currentSummary=null,!r)return;this._ext=(0,_webgl_capabilities_DisjointTimerQuery_js__WEBPACK_IMPORTED_MODULE_3__.mO)(n.gl,{}),this._debugOutput=i;const o=n.gl;if(!this.enableCommandLogging)return;let a;for(a in o)if("function"==typeof o[a]){const e=o[a],t=a.includes("draw");o[a]=(...s)=>(this._events.emit("command",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:a,args:s,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),e.apply(o,s))}}get enableCommandLogging(){return!("object"==typeof r&&r.disableCommands)}recordContainerStart(e){r&&(this._currentContainer=e)}recordContainerEnd(){r&&(this._currentContainer=null)}recordPassStart(e){r&&(this._currentPass=e,this._initSummary())}recordPassEnd(){r&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){r&&(this._currentBrush=e)}recordBrushEnd(){r&&(this._currentBrush=null)}recordStart(e){if(r&&null!=this._ext){if(this._entries.has(e)){const t=this._entries.get(e),s=this._ext.resultAvailable(t.query),r=this._ext.disjoint();if(s&&!r){const s=this._ext.getResult(t.query)/1e6;let r=0;if(null!=this._timings.enqueue(s)){const e=this._timings.entries,t=e.length;let s=0;for(const r of e)s+=r;r=s/t}const n=s.toFixed(2),i=r?r.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${n} ms (${i} last 10 avg)\n${t.commandsLen} Commands (${t.drawCommands} draw)`),console.log("RenderPass breakdown: "),console.table(t.summaries),console.log("Commands: ",t.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${n} ms (${i} last 10 avg)`),this._debugOutput.innerHTML=`${n} (${i})`}for(const e of t.handles)e.remove();this._ext.deleteQuery(t.query),this._entries.delete(e)}const t={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(t.handles.push(this._events.on("command",(e=>{t.commandsLen++,t.commands.push(e),e.isDrawCommand&&t.drawCommands++}))),t.handles.push(this._events.on("summary",(e=>{t.summaries.push(e)})))),this._ext.beginTimeElapsed(t.query),this._entries.set(e,t)}}recordEnd(e){r&&null!=this._ext&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._currentSummary&&this._events.emit("summary",this._currentSummary)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Y});var config=__webpack_require__("./node_modules/@arcgis/core/config.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),BidiText=__webpack_require__("./node_modules/@arcgis/core/core/BidiText.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),fontUtils=__webpack_require__("./node_modules/@arcgis/core/core/fontUtils.js"),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f32.js"),Rasterizer=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/Rasterizer.js"),definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),Rect=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");class RectangleBinPack_t{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new Rect.Z(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new Rect.Z;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const r=this._free[h];t<=r.width&&e<=r.height&&(null===i||r.y<=i.y&&r.x<=i.x)&&(i=r,s=h)}return null===i?new Rect.Z:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new Rect.Z(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new Rect.Z(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new Rect.Z(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new Rect.Z(i.x,i.y+e,t,i.height-e))),new Rect.Z(i.x,i.y,t,e))}release(h){for(let t=0;t<this._free.length;++t){const e=this._free[t];if(e.y===h.y&&e.height===h.height&&e.x+e.width===h.x)e.width+=h.width;else if(e.x===h.x&&e.width===h.width&&e.y+e.height===h.y)e.height+=h.height;else if(h.y===e.y&&h.height===e.height&&h.x+h.width===e.x)e.x=h.x,e.width+=h.width;else{if(h.x!==e.x||h.width!==e.width||h.y+h.height!==e.y)continue;e.y=h.y,e.height+=h.height}this._free.splice(t,1),this.release(h)}this._free.push(h)}}var webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const o=t=>Math.floor(t/256);class p{constructor(t,e,h){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,this._preloadCache={},this.width=t,this.height=e,this._glyphSource=h,this._binPack=new RectangleBinPack_t(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyphs()}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0,this._glyphData.length=0}_initDecorationGlyphs(){const t=[117,149,181,207,207,181,149,117],e=[],i=[];for(let r=0;r<t.length;r++){const h=t[r];for(let t=0;t<11;t++){const s=r>=3&&r<5&&t>=3&&t<8?255:0;e.push(h),i.push(s)}}const h={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)},s={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(i)};this._recordGlyph(h),this._recordGlyph(s)}async getGlyphItems(t,e,i){const h=this._getGlyphCache(t);return await this._fetchRanges(t,e,i),e.map((e=>this._getMosaicItem(h,t,e)))}bind(t,e,i,h){const s=this._getTexture(t,i);s.setSamplingMode(e),this._dirties[i]&&(s.setData(this._glyphData[i]),this._dirties[i]=!1),t.bindTexture(s,h)}preloadASCIIGlyphCache(t){const e=this._preloadCache[t];if(null!=e)return e;const i=this._glyphSource.preloadASCIIRange(t).then((()=>{const e=this._getGlyphCache(t);for(let i=0;i<256;i++)this._getMosaicItem(e,t,i)}));return this._preloadCache[t]=i,i}_getGlyphCache(t){return this._glyphCache[t]||(this._glyphCache[t]={}),this._glyphCache[t]}_getTexture(t,e){if(!this._textures[e]){const i=new TextureDescriptor.X;i.pixelFormat=webgl_enums.VI.ALPHA,i.wrapMode=webgl_enums.e8.CLAMP_TO_EDGE,i.width=this.width,i.height=this.height,this._textures[e]=new Texture.x(t,i,new Uint8Array(this.width*this.height))}return this._textures[e]}_invalidate(){this._dirties[this._currentPage]=!0}async _fetchRanges(t,e,i){const h=function c(t){const e=new Set;for(const i of t)e.add(o(i));return e}(e),s=[];h.forEach((e=>{s.push(this._fetchRange(t,e,i))})),await Promise.all(s)}async _fetchRange(t,e,i){if(e>256)return;const h=t+e;return function l(e,i,h){return e.has(i)||e.set(i,h().then((()=>{e.delete(i)})).catch((h=>{e.delete(i),(0,promiseUtils.H9)(h)}))),e.get(i)}(this._rangePromises,h,(()=>this._glyphSource.getRange(t,e,i)))}_getMosaicItem(t,e,i){if(!t[i]){const h=this._glyphSource.getGlyph(e,i);if(!h||!h.metrics)return(t=>({rect:new Rect.Z(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:t,sdf:!0}))(i);const s=this._recordGlyph(h),r=this._currentPage,a=h.metrics;t[i]={rect:s,page:r,metrics:a,code:i,sdf:!0},this._invalidate()}return t[i]}_recordGlyph(t){const h=t.metrics;let s;if(0===h.width)s=new Rect.Z(0,0,0,0);else{const e=3,r=h.width+2*e,a=h.height+2*e;s=this._binPack.allocate(r,a),s.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyphs(),this._binPack=new RectangleBinPack_t(this.width-4,this.height-4),s=this._binPack.allocate(r,a));const n=this._glyphData[this._currentPage],o=t.bitmap;let c,l;if(o)for(let t=0;t<a;t++){c=r*t,l=this.width*(s.y+t)+s.x;for(let t=0;t<r;t++)n[l+t]=o[c+t]}(0,has.Z)("esri-glyph-debug")&&this._showDebugPage(n)}return s}_showDebugPage(t){const e=document.createElement("canvas"),i=e.getContext("2d"),h=new ImageData(this.width,this.height),s=h.data;e.width=this.width,e.height=this.height,e.style.border="1px solid black";for(let r=0;r<t.length;++r)s[4*r]=t[r],s[4*r+1]=0,s[4*r+2]=0,s[4*r+3]=255;i.putImageData(h,0,0),document.body.appendChild(e)}}var pbf=__webpack_require__("./node_modules/@arcgis/core/core/pbf.js");class a{constructor(e){for(this._metrics=[],this._bitmaps=[];e.next();)switch(e.tag()){case 1:{const t=e.getMessage();for(;t.next();)switch(t.tag()){case 3:{const e=t.getMessage();let a,s,r,n,i,c,g;for(;e.next();)switch(e.tag()){case 1:a=e.getUInt32();break;case 2:s=e.getBytes();break;case 3:r=e.getUInt32();break;case 4:n=e.getUInt32();break;case 5:i=e.getSInt32();break;case 6:c=e.getSInt32();break;case 7:g=e.getUInt32();break;default:e.skip()}e.release(),a&&(this._metrics[a]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[a]=s);break}default:t.skip()}t.release();break}default:e.skip()}}getMetrics(e){return this._metrics[e]}getBitmap(e){return this._bitmaps[e]}}class s{constructor(){this._ranges=[]}getRange(e){return this._ranges[e]}addRange(e,t){this._ranges[e]=t}}class GlyphSource_r{constructor(e){this._glyphInfo={},this._baseURL=e}getRange(s,r,n){const i=this._getFontStack(s);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace("{fontstack}",s).replace("{range}",c+"-"+g);return(0,request.default)(o,{responseType:"array-buffer",...n}).then((e=>{i.addRange(r,new a(new pbf.Z(new Uint8Array(e.data),new DataView(e.data))))}))}async preloadASCIIRange(s){const r=this._getFontStack(s),c=this._baseURL.replace("{fontstack}",s).replace("{range}","0-255"),g=await(0,request.default)(c,{responseType:"array-buffer"}),o=new a(new pbf.Z(new Uint8Array(g.data),new DataView(g.data)));for(let e=0;e<=255;e++)r.getRange(e)||r.addRange(e,o)}getGlyph(e,t){const a=this._getFontStack(e);if(!a)return;const s=Math.floor(t/256),r=a.getRange(s);return r?{metrics:r.getMetrics(t),bitmap:r.getBitmap(t)}:void 0}_getFontStack(e){let t=this._glyphInfo[e];return t||(t=this._glyphInfo[e]=new s),t}}var floatRGBA=__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js");const i=1e20;class SDFConverter_r{constructor(t){this._svg=null,this.size=t;const e=document.createElement("canvas");e.width=e.height=t,this._context=e.getContext("2d"),this._gridOuter=new Float64Array(t*t),this._gridInner=new Float64Array(t*t),this._f=new Float64Array(t),this._d=new Float64Array(t),this._z=new Float64Array(t+1),this._v=new Int16Array(t)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)}draw(r,h,n=31){this._initSVG();const o=this.createSVGString(r);return new Promise(((r,a)=>{const d=new Image;d.src="data:image/svg+xml; charset=utf8, "+encodeURIComponent(o),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,this.size,this.size),this._context.drawImage(d,0,0,this.size,this.size);const e=this._context.getImageData(0,0,this.size,this.size),s=new Uint8Array(this.size*this.size*4);for(let t=0;t<this.size*this.size;t++){const s=e.data[4*t+3]/255;this._gridOuter[t]=1===s?0:0===s?i:Math.max(0,.5-s)**2,this._gridInner[t]=1===s?i:0===s?0:Math.max(0,s-.5)**2}this._edt(this._gridOuter,this.size,this.size),this._edt(this._gridInner,this.size,this.size);for(let i=0;i<this.size*this.size;i++){const e=this._gridOuter[i]-this._gridInner[i];(0,floatRGBA.I)(.5-e/(2*n),s,4*i)}r(s)};const l=h&&h.signal;l&&(0,promiseUtils.fu)(l,(()=>a((0,promiseUtils.zE)())))}))}_initSVG(){if(!this._svg){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),this._svg=t}return this._svg}createSVGString(t){const e=this._initSVG(),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",t),e.appendChild(s);const i=s.getBBox(),r=i.width/i.height,h=this.size/2;let n,o,a,d;if(r>1){o=n=h/i.width;const t=h*(1/r);a=this.size/4,d=h-t/2}else n=o=h/i.height,a=h-h*r/2,d=this.size/4;const l=-i.x*n+a,_=-i.y*o+d;s.setAttribute("style",`transform: matrix(${n}, 0, 0, ${o}, ${l}, ${_})`);const g=`<svg style="fill:red;" height="${this.size}" width="${this.size}" xmlns="http://www.w3.org/2000/svg">${e.innerHTML}</svg>`;return e.removeChild(s),g}_edt(t,e,s){const i=this._f,r=this._d,h=this._v,n=this._z;for(let o=0;o<e;o++){for(let r=0;r<s;r++)i[r]=t[r*e+o];this._edt1d(i,r,h,n,s);for(let i=0;i<s;i++)t[i*e+o]=r[i]}for(let o=0;o<s;o++){for(let s=0;s<e;s++)i[s]=t[o*e+s];this._edt1d(i,r,h,n,e);for(let s=0;s<e;s++)t[o*e+s]=Math.sqrt(r[s])}}_edt1d(t,e,s,r,h){s[0]=0,r[0]=-i,r[1]=+i;for(let n=1,o=0;n<h;n++){let e=(t[n]+n*n-(t[s[o]]+s[o]*s[o]))/(2*n-2*s[o]);for(;e<=r[o];)o--,e=(t[n]+n*n-(t[s[o]]+s[o]*s[o]))/(2*n-2*s[o]);o++,s[o]=n,r[o]=e,r[o+1]=+i}for(let i=0,n=0;i<h;i++){for(;r[n+1]<i;)n++;e[i]=(i-s[n])*(i-s[n])+t[s[n]]}}}var GeometryUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js");function SpriteMosaic_c(t){return t&&"static"===t.type}class SpriteMosaic_n{constructor(t,e,i=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(t<=0||e<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=t,this._pageHeight=e,i>0&&(this._maxItemSize=i),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight);const s=Math.floor(this._pageWidth),o=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(s*o)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,i,a,o,r,h,n=1){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let g,p,m;if(SpriteMosaic_c(a))[g,p,m]=this._allocateImage(i[0],i[1]);else{g=new Rect.Z(0,0,i[0],i[1]),p=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:a,size:[i[0]+2*definitions.fL,i[1]+2*definitions.fL],dirty:!0,texture:t})}if(g.width<=0||g.height<=0)return null;const d={rect:g,width:i[0],height:i[1],sdf:r,simplePattern:h,pixelRatio:n,page:p};return this._mosaicRects.set(t,d),SpriteMosaic_c(a)&&((0,has.Z)("esri-mosaic-debug")&&this._showDebugSprite(i,a.data),this._copy({rect:g,spriteSize:i,spriteData:a.data,page:p,pageSize:m,repeat:o,sdf:r})),d}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getSpriteItems(t){const e={};for(const i of t)e[i]=this.getSpriteItem(i);return e}getMosaicItemPosition(t){const i=this.getSpriteItem(t),s=i&&i.rect;if(!s)return null;s.width=i.width,s.height=i.height;const a=i.width,o=i.height,r=definitions.fL,h=this._mosaicPages[i.page].size;return{size:[i.width,i.height],tl:[(s.x+r)/h[0],(s.y+r)/h[1]],br:[(s.x+r+a)/h[0],(s.y+r+o)/h[1]],page:i.page}}bind(t,e,i=0,s=0){const a=this._mosaicPages[i],o=a.mosaicsData;let r=a.texture;r||(r=function SpriteMosaic_p(t,e){const i=new TextureDescriptor.X;return i.width=e[0],i.height=e[1],i.wrapMode=webgl_enums.e8.CLAMP_TO_EDGE,new Texture.x(t,i,null)}(t,a.size),a.texture=r),r.setSamplingMode(e),SpriteMosaic_c(o)?(t.bindTexture(r,s),a.dirty&&(r.setData(new Uint8Array(o.data.buffer)),r.generateMipmap(),(0,has.Z)("esri-mosaic-debug")&&this._showDebugPage(i))):(o.data.bindFrame(t,r,s),r.generateMipmap()),a.dirty=!1}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;SpriteMosaic_c(i)||i.data.destroy()}this._mosaicPages=null,this._mosaicRects.clear()}static _copyBits(t,e,i,s,a,o,r,h,c,n,g){let p=s*e+i,m=h*o+r;if(g){m-=o;for(let r=-1;r<=n;r++,p=((r+n)%n+s)*e+i,m+=o)for(let e=-1;e<=c;e++)a[m+e]=t[p+(e+c)%c]}else for(let d=0;d<n;d++){for(let e=0;e<c;e++)a[m+e]=t[p+e];p+=e,m+=o}}_copy(i){if(i.page>=this._mosaicPages.length)return;const s=this._mosaicPages[i.page],a=s.mosaicsData;if(!SpriteMosaic_c(s.mosaicsData))throw new Error.Z("mapview-invalid-resource","unsuitable data type!");const o=i.spriteData,r=a.data;r&&o||console.error("Source or target images are uninitialized!"),SpriteMosaic_n._copyBits(o,i.spriteSize[0],0,0,r,i.pageSize[0],i.rect.x+definitions.fL,i.rect.y+definitions.fL,i.spriteSize[0],i.spriteSize[1],i.repeat),s.dirty=!0}_allocateImage(t,o){t+=2*definitions.fL,o+=2*definitions.fL;const r=Math.max(t,o);if(this._maxItemSize&&this._maxItemSize<r){const e=2**Math.ceil((0,GeometryUtils.k3)(t)),a=2**Math.ceil((0,GeometryUtils.k3)(o)),r=new Rect.Z(0,0,t,o);return this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(e*a)},size:[e,a],dirty:!0,texture:void 0}),[r,this._mosaicPages.length-1,[e,a]]}const h=this._binPack.allocate(t,o);if(h.width<=0){const e=this._mosaicPages[this._currentPage];return!e.dirty&&SpriteMosaic_c(e.mosaicsData)&&(e.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight),this._allocateImage(t,o)}return[h,this._currentPage,[this._pageWidth,this._pageHeight]]}_showDebugSprite([t,e],i){const s=document.createElement("canvas");s.width=t,s.height=e,s.setAttribute("style",`position: absolute; top: ${4+204*SpriteMosaic_g++}px; right: 208px; width: 200px; height: 200px; border: 1px solid black;`);const a=s.getContext("2d"),o=new ImageData(t,e);o.data.set(new Uint8Array(i.buffer)),a.putImageData(o,0,0),document.body.appendChild(s)}_showDebugPage(t){const e=this._mosaicPages[t],{size:[i,s],mosaicsData:a}=e;if(!SpriteMosaic_c(a))return void console.error("Could not show sprite mosaic debug for non-static resource");const o=`mosaicDebugPage${t}`,r=document.getElementById(o)??document.createElement("canvas");r.id=o,r.width=i,r.height=s,r.setAttribute("style",`position: absolute; top: ${4+204*t}px; right: 4px; width: 200px; height: 200px; border: 1px solid black;`);const h=r.getContext("2d"),n=new ImageData(i,s);n.data.set(new Uint8Array(a.data.buffer)),h.putImageData(n,0,0),document.body.appendChild(r)}}let SpriteMosaic_g=0;var Utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js"),time=__webpack_require__("./node_modules/@arcgis/core/core/time.js"),imageutils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"),cim_enums=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/enums.js"),grouping=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/grouping.js");function utils_n(e){return(0,time.HA)(e.frameDurations.reduce(((t,e)=>t+e),0))}function h(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.pop();return s.push((0,time.HA)(o+r)),{frameDurations:s,getFrame:n,width:i,height:a}}class utils_c{constructor(t,e,r,i){this._animation=t,this._repeatType=r,this._onFrameData=i,this._direction=1,this._currentFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let a=0;for(;e>a;)a+=this.timeToFrame,this.nextFrame();const n=this._animation.getFrame(this._currentFrame);this._onFrameData(n)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case cim_enums.of.None:this._currentFrame-=this._direction;break;case cim_enums.of.Loop:this._currentFrame=0;break;case cim_enums.of.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case cim_enums.of.None:this._currentFrame-=this._direction;break;case cim_enums.of.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case cim_enums.of.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame];const t=this._animation.getFrame(this._currentFrame);this._onFrameData(t)}}function u(e,u,f,l){let g,{repeatType:F}=u;if(null==F&&(F=cim_enums.of.Loop),!0===u.reverseAnimation&&(e=function utils_s(t){const{width:e,height:r}=t;return{frameDurations:t.frameDurations.reverse(),getFrame:e=>{const r=t.frameDurations.length-1-e;return t.getFrame(r)},width:e,height:r}}(e)),null!=u.duration&&(e=function utils_o(e,r){const{width:i,height:a,getFrame:s}=e,o=r/utils_n(e);return{frameDurations:e.frameDurations.map((e=>(0,time.HA)(e*o))),getFrame:s,width:i,height:a}}(e,(0,time.HA)(1e3*u.duration))),null!=u.repeatDelay){const i=1e3*u.repeatDelay;F===cim_enums.of.Loop?e=h(e,(0,time.HA)(i)):F===cim_enums.of.Oscillate&&(e=function m(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.shift();return s.unshift((0,time.HA)(o+r)),{frameDurations:s,getFrame:n,width:i,height:a}}(h(e,(0,time.HA)(i/2)),(0,time.HA)(i/2)))}if(null!=u.startTimeOffset)g=(0,time.HA)(1e3*u.startTimeOffset);else if(null!=u.randomizeStartTime){const r=(0,grouping.$)(f),s=82749913,o=null!=u.randomizeStartSeed?u.randomizeStartSeed:s,m=(0,grouping.f)(r,o);g=(0,time.HA)(m*utils_n(e))}else g=(0,time.HA)(0);return new utils_c(e,g,F,l)}const utils_l=document.createElement("canvas"),utils_g=utils_l.getContext("2d");class AnimatableTextureResource_i{constructor(t,i,e,s){this._animation=t,this._frameData=null;this.frameCount=this._animation.frameDurations.length,this.width=this._animation.width,this.height=this._animation.height,this._playHandle=function f(t,e,r,i){const a=null==e.playAnimation||e.playAnimation,n=u(t,e,r,i);let s,o=n.timeToFrame;return function m(){s=a?setTimeout((()=>{n.nextFrame(),o=n.timeToFrame,m()}),o):void 0}(),{remove:()=>{a&&clearTimeout(s)}}}(this._animation,e,s,(t=>{this._frameData=t,i.requestRender()}))}destroy(){this._playHandle.remove()}bindFrame(a,i,e){a.bindTexture(i,e),null!=this._frameData&&(i.updateData(0,definitions.fL,definitions.fL,this._frameData.width,this._frameData.height,this._frameData),this._frameData=null)}}var Result=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/util/Result.js");var QueueProcessor=__webpack_require__("./node_modules/@arcgis/core/views/support/QueueProcessor.js");const $=(0,vec2f32.c)(),k="arial-unicode-ms-regular",H=Logger.Z.getLogger("esri.views.2d.engine.webgl.TextureManager");function O(e,t){const i=Math.round((0,screenUtils.F2)(t)*window.devicePixelRatio),s=i>=128?2:4;return Math.min(e,i*s)}const Q=(e,t,i)=>H.error(new Error.Z(e,t,i));class V{static fromMosaic(e,t){return new V(e,t.page,t.sdf)}constructor(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}}class Y{constructor(i,r,o){this._requestRender=i,this.resourceManager=r,this._allowNonPowerOfTwo=o,this._invalidFontsMap=new Map,this._sdfConverter=new SDFConverter_r(definitions.X0),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new QueueProcessor.e({concurrency:10,process:async(e,i)=>{(0,promiseUtils.k_)(i);try{return await(0,request.default)(e,{responseType:"image",signal:i})}catch(r){if(!(0,promiseUtils.D_)(r))throw new Error.Z("mapview-invalid-resource",`Could not fetch requested resource at ${e}`,r);throw r}}}),this._spriteMosaic=new SpriteMosaic_n(2048,2048,500),this._glyphSource=new GlyphSource_r(`${config.default.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new p(1024,1024,this._glyphSource),this._rasterizer=new Rasterizer.Z(r)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}async rasterizeItem(e,t,i,s){if(null==e)return Q("mapview-null-resource","Unable to rasterize null resource"),null;switch(e.type){case"text":case"esriTS":{const t=await this._rasterizeText(e,i,s);return t.forEach((e=>this._setTextureBinding(enums.Un.GLYPH,e))),{glyphMosaicItems:t}}default:{if((0,Utils.Ll)(e))return Q("mapview-invalid-type",`MapView does not support symbol type: ${e.type}`,e),null;const i=await this._rasterizeSpriteSymbol(e,t,s);return(0,Result.ok)(i)&&i&&this._setTextureBinding(enums.Un.SPRITE,i),{spriteMosaicItem:i}}}}bindTextures(e,t,i,s=!1){if(0===i.textureBinding)return;const r=this._bindingInfos[i.textureBinding-1],o=r.page,n=s?webgl_enums.cw.LINEAR_MIPMAP_LINEAR:webgl_enums.cw.LINEAR;switch(r.mosaicType){case enums.Un.SPRITE:{const i=this.sprites.getWidth(o),s=this.sprites.getHeight(o),r=(0,vec2.s)($,i,s);return this._spriteMosaic.bind(e,n,o,definitions.D3),t.setUniform1i("u_texture",definitions.D3),void t.setUniform2fv("u_mosaicSize",r)}case enums.Un.GLYPH:{const i=this.glyphs.width,s=this.glyphs.height,r=(0,vec2.s)($,i,s);return this._glyphMosaic.bind(e,n,o,definitions.Al),t.setUniform1i("u_texture",definitions.Al),void t.setUniform2fv("u_mosaicSize",r)}default:H.error("mapview-texture-manager",`Cannot handle unknown type ${r.mosaicType}`)}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=V.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t,s){let o,n;if("cim"in e){const t=e;o=t.fontName,n=t.text}else{const t=e;o=(0,fontUtils.Yc)(t.font),n=t.text}const a=this._invalidFontsMap.has(o),h=t||(0,Utils.Jq)((0,BidiText.E)(n)[0]);try{const e=a?k:o;return(0,has.Z)("esri-2d-stabilize-glyphs")&&await this._glyphMosaic.preloadASCIIGlyphCache(e),await this._glyphMosaic.getGlyphItems(e,h,s)}catch(c){return Q("mapview-invalid-resource",`Couldn't find font ${o}. Falling back to Arial Unicode MS Regular`),this._invalidFontsMap.set(o,!0),this._glyphMosaic.getGlyphItems(k,h,s)}}async _rasterizeSpriteSymbol(e,t,i){if((0,Utils.Gg)(e))return;const r=function symbolUtils_e(e){switch(e.type){case"esriSMS":return`${e.style}.${e.path}`;case"esriSLS":return`${e.style}.${e.cap}`;case"esriSFS":return`${e.style}`;case"esriPFS":case"esriPMS":return e.imageData?`${e.imageData}${e.width}${e.height}`:`${e.url}${e.width}${e.height}`;default:return"mosaicHash"in e?e.mosaicHash:JSON.stringify(e)}}(e);if(this._spriteMosaic.has(r))return this._spriteMosaic.getSpriteItem(r);if((0,Utils.sG)(e)||(0,Utils.HX)(e)&&!(0,Utils.yP)(e))return this._handleAsyncResource(r,e,i);const o=definitions.XD,n=this._rasterizer.rasterizeJSONResource(e,o);if(n){const{size:t,image:i,sdf:s,simplePattern:o,rasterizationScale:a}=n;return this._addItemToMosaic(r,t,{type:"static",data:i},(0,Utils.js)(e),s,o,a)}return new Error.Z("TextureManager","unrecognized or null rasterized image")}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;s=(0,Utils.sG)(t)?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s);try{await s,this._ongoingRasterizations.delete(e)}catch{this._ongoingRasterizations.delete(e)}return s}async _handleSVG(e,t,i){const s=[definitions.X0,definitions.X0],r=await this._sdfConverter.draw(e.path,i);return this._addItemToMosaic(t,s,{type:"static",data:new Uint32Array(r.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const r=(0,Utils.Gr)(e);await this.resourceManager.fetchResource(r,i);let o=this.resourceManager.getResource(r);if(null==o)return new Error.Z("mapview-invalid-resource",`Could not fetch requested resource at ${r}.`);let a=o.width,h=o.height;if(o instanceof HTMLImageElement){"esriPMS"===e.type&&(a=Math.round(O(o.width,(0,Utils.Ub)(e))),h=Math.round(o.height*(a/o.width)));const i="cim"in e?e.cim.colorSubstitutions:void 0,{size:s,sdf:r,image:n}=this._rasterizer.rasterizeImageResource(a,h,o,i);return this._addItemToMosaic(t,s,{type:"static",data:n},(0,Utils.js)(e),r,!1)}this._allowNonPowerOfTwo||(a=(0,mathUtils.fp)(o.width+2*definitions.fL)-2*definitions.fL,h=(0,mathUtils.fp)(o.height+2*definitions.fL)-2*definitions.fL),a===o.width&&h===o.height||(o=function F(t,r,i){utils_l.width=r,utils_l.height=i;const a=[],n=t.frameDurations.length;for(let s=0;s<n;s++){const n=t.getFrame(s);utils_g.clearRect(0,0,r,i),n instanceof ImageData?utils_g.drawImage((0,imageutils.E0)(n),0,0,r,i):utils_g.drawImage(n,0,0,r,i),a.push(utils_g.getImageData(0,0,r,i))}return{width:r,height:i,frameDurations:t.frameDurations,getFrame:t=>a[t]}}(o,a,h));const c=e.animatedSymbolProperties||{},u=e.objectId,d=new AnimatableTextureResource_i(o,this._requestRender,c,u);return this._addItemToMosaic(t,[d.width,d.height],{type:"animated",data:d},(0,Utils.js)(e),!1,!1)}async _handleImage(e,t,i){if((0,Utils.DQ)(e)||(0,Utils.iw)(e))return this._handleGIFOrPNG(e,t,i);const r=(0,Utils.Gr)(e);try{let s;const o=this.resourceManager.getResource(r);if(null!=o&&o instanceof HTMLImageElement)s=o;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if((0,Utils.TB)(r))if("width"in e&&"height"in e)s.width=(0,screenUtils.F2)(e.width),s.height=(0,screenUtils.F2)(e.height);else if("cim"in e){const t=e.cim;s.width=(0,screenUtils.F2)(t.width??t.scaleX*t.size),s.height=(0,screenUtils.F2)(t.size)}if(!s.width||!s.height)return null;let n=s.width,a=s.height;"esriPMS"===e.type&&(n=Math.round(O(s.width,(0,Utils.Ub)(e))),a=Math.round(s.height*(n/s.width)));const h="cim"in e?e.cim.colorSubstitutions:void 0,{size:u,sdf:d,image:l}=this._rasterizer.rasterizeImageResource(n,a,s,h);return this._addItemToMosaic(t,u,{type:"static",data:l},(0,Utils.js)(e),d,!1)}catch(Q){if(!(0,promiseUtils.D_)(Q))return new Error.Z("mapview-invalid-resource",`Could not fetch requested resource at ${r}. ${Q.message}`)}}_addItemToMosaic(e,t,i,s,r,o,n){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,o,n)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>m});var Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),VertexStream=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js"),resolver=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");const t=e=>`#define ${(e=>e.replace("-","_").toUpperCase())(e)}\n`;function n(r){return{attributes:new Map([["a_pos",0],["a_tex",1]]),shaders:{vertexShader:t(r)+(0,resolver.w)("blend/blend.vert"),fragmentShader:t(r)+(0,resolver.w)("blend/blend.frag")}}}var webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const c=Logger.Z.getLogger("esri.views.2d.engine.webgl.effects.blendEffects.BlendEffect");class m{constructor(){this._size=[0,0]}dispose(e){this._backBufferTexture=(0,maybe.M2)(this._backBufferTexture),this._quad=(0,maybe.M2)(this._quad)}draw(r,t,i,a,d){const{context:u,drawPhase:f}=r;if(this._setupShader(u),a&&"normal"!==a&&f!==enums.jx.LABEL)return void this._drawBlended(r,t,i,a,d);const m=n("normal"),h=u.programCache.acquire(m.shaders.vertexShader,m.shaders.fragmentShader,m.attributes);if(!h)return void c.error(new Error.Z("mapview-BlendEffect",'Error creating shader program for blend mode "normal"'));u.useProgram(h),t.setSamplingMode(i),u.bindTexture(t,0),h.setUniform1i("u_layerTexture",0),h.setUniform1f("u_opacity",d),u.setBlendingEnabled(!0),u.setBlendFunction(webgl_enums.zi.ONE,webgl_enums.zi.ONE_MINUS_SRC_ALPHA);const l=this._quad;l.draw(),l.unbind(),h.dispose()}_drawBlended(r,t,s,i,a){const{context:d,state:u,pixelRatio:f,inFadeTransition:m}=r,{size:h}=u,l=d.getBoundFramebufferObject();let _,p;null!=l?(_=l.width,p=l.height):(_=Math.round(f*h[0]),p=Math.round(f*h[1])),this._createOrResizeTexture(r,_,p);const b=this._backBufferTexture;l.copyToTexture(0,0,_,p,0,0,b),d.setStencilTestEnabled(!1),d.setStencilWriteMask(0),d.setBlendingEnabled(!0),d.setDepthTestEnabled(!1),d.setDepthWriteEnabled(!1);const g=n(i),x=d.programCache.acquire(g.shaders.vertexShader,g.shaders.fragmentShader,g.attributes);if(!x)return void c.error(new Error.Z("mapview-BlendEffect",`Error creating shader program for blend mode ${i}`));d.useProgram(x),b.setSamplingMode(s),d.bindTexture(b,0),x.setUniform1i("u_backbufferTexture",0),t.setSamplingMode(s),d.bindTexture(t,1),x.setUniform1i("u_layerTexture",1),x.setUniform1f("u_opacity",a),x.setUniform1f("u_inFadeOpacity",m?1:0),d.setBlendFunction(webgl_enums.zi.ONE,webgl_enums.zi.ZERO);const T=this._quad;T.draw(),T.unbind(),x.dispose(),d.setBlendFunction(webgl_enums.zi.ONE,webgl_enums.zi.ONE_MINUS_SRC_ALPHA)}_setupShader(e){this._quad||(this._quad=new VertexStream.Z(e,[-1,-1,1,-1,-1,1,1,1]))}_createOrResizeTexture(e,r,t){const{context:s}=e;if(null===this._backBufferTexture||r!==this._size[0]||t!==this._size[1]){if(this._backBufferTexture)this._backBufferTexture.resize(r,t);else{const e=new TextureDescriptor.X;e.internalFormat=webgl_enums.VI.RGBA,e.wrapMode=webgl_enums.e8.CLAMP_TO_EDGE,e.width=r,e.height=t,this._backBufferTexture=new Texture.x(s,e)}this._size[0]=r,this._size[1]=t}}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>e});var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");const e={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("bitBlit/bitBlit.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>t,y:()=>r});var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");const t={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("highlight/textured.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])},r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("highlight/textured.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MagnifierPrograms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>t,c:()=>a});var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js"),_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/ProgramTemplate.js");const a={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("magnifier/magnifier.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("magnifier/magnifier.frag")},attributes:new Map([["a_pos",0]])};function t(r){return(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_1__.H)(r,a)}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>r});var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");const r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("stencil/stencil.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.w)("stencil/stencil.frag")},attributes:new Map([["a_pos",0]])}},"./node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>y});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Viewpoint=__webpack_require__("./node_modules/@arcgis/core/Viewpoint.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),viewpointUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/viewpointUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),InputManager=__webpack_require__("./node_modules/@arcgis/core/views/input/InputManager.js");const a="esri-zoom-box",n={container:`${a}__container`,overlay:`${a}__overlay`,background:`${a}__overlay-background`,box:`${a}__outline`},h_zoom="Shift",h_counter="Ctrl";let l=class extends Accessor.Z{constructor(t){super(t),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._rafId=null,this._handles=null,this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(t){this._handles&&this._handles.forEach((t=>{t.remove()})),this._handles=null,this._destroyOverlay(),this._set("view",t),t&&(t.on("drag",[h_zoom],(t=>this._handleDrag(t,1)),InputManager.f.INTERNAL),t.on("drag",[h_zoom,h_counter],(t=>this._handleDrag(t,-1)),InputManager.f.INTERNAL))}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(t,e,i,r){this._box.x=t,this._box.y=e,this._box.width=i,this._box.height=r,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(t,e,r,s,o){const a=this.view,n=a.toMap((0,screenUtils.vW)(t+.5*r,e+.5*s));let h=Math.max(r/a.width,s/a.height);-1===o&&(h=1/h),this._destroyOverlay(),this.navigation.end(),a.goTo({center:n,scale:a.scale*h})}_updateBox(t,e,i,r){const s=this._boxShape;s.setAttributeNS(null,"x",""+t),s.setAttributeNS(null,"y",""+e),s.setAttributeNS(null,"width",""+i),s.setAttributeNS(null,"height",""+r),s.setAttributeNS(null,"class",n.box)}_updateBackground(t,e,i,r){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(t,e,i,r,this.view.width,this.view.height))}_createContainer(){const t=document.createElement("div");t.className=n.container,this.view.root.appendChild(t),this._container=t}_createOverlay(){const t=this.view.width,e=this.view.height,i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M 0 0 L "+t+" 0 L "+t+" "+e+" L 0 "+e+" Z"),i.setAttributeNS(null,"class",n.background);const r=document.createElementNS("http://www.w3.org/2000/svg","rect"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.setAttributeNS(null,"class",n.overlay),s.appendChild(i),s.appendChild(r),this._container.appendChild(s),this._backgroundShape=i,this._boxShape=r,this._overlay=s}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(t,e,i,r,s,o){const a=t+i,n=e+r;return"M 0 0 L "+s+" 0 L "+s+" "+o+" L 0 "+o+" ZM "+t+" "+e+" L "+t+" "+n+" L "+a+" "+n+" L "+a+" "+e+" Z"}_handleDrag(t,e){const i=t.x,r=t.y,s=t.origin.x,o=t.origin.y;let a,n,h,l;switch(i>s?(a=s,h=i-s):(a=i,h=s-i),r>o?(n=o,l=r-o):(n=r,l=o-r),t.action){case"start":this._start();break;case"update":this._update(a,n,h,l);break;case"end":this._end(a,n,h,l,e)}t.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:t,y:e,width:i,height:r}=this._box;this._updateBox(t,e,i,r),this._updateBackground(t,e,i,r),this._rafId=requestAnimationFrame(this._redraw)}};(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"navigation",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"view",null),l=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.navigation.ZoomBox")],l);const c=l;__webpack_require__("./node_modules/@arcgis/core/geometry.js");var reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js");class FilteredFiniteDifference_t{constructor(t){this._gain=t,this.lastValue=void 0,this.filteredDelta=void 0}update(t){if(this.hasLastValue()){const e=this.computeDelta(t);this._updateDelta(e)}this.lastValue=t}reset(){this.lastValue=void 0,this.filteredDelta=void 0}hasLastValue(){return void 0!==this.lastValue}hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(t){return void 0===this.lastValue?NaN:t-this.lastValue}_updateDelta(t){void 0!==this.filteredDelta?this.filteredDelta=(1-this._gain)*this.filteredDelta+this._gain*t:this.filteredDelta=t}}class Momentum_t{constructor(t,i,o){this._initialVelocity=t,this._stopVelocity=i,this._friction=o,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(t){return t>this.duration}get friction(){return this._friction}value(t){return this.valueFromInitialVelocity(this._initialVelocity,t)}valueDelta(t,i){const o=this.value(t);return this.value(t+i)-o}valueFromInitialVelocity(t,i){i=Math.min(i,this.duration);const o=1-this.friction;return t*(o**i-1)/Math.log(o)}}class PanPlanarMomentumEstimator_c extends Momentum_t{constructor(e,t,i,s,n){super(e,t,i),this._sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this._sceneVelocity,e)}}class PanPlanarMomentumEstimator_l{constructor(e=300,t=12,i=.84){this._minimumInitialVelocity=e,this._stopVelocity=t,this._friction=i,this.enabled=!0,this._time=new FilteredFiniteDifference_t(.6),this._screen=[new FilteredFiniteDifference_t(.4),new FilteredFiniteDifference_t(.4)],this._scene=[new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6)],this._tmpDirection=(0,vec3f64.c)()}add(e,t,i){if(this.enabled){if(this._time.hasLastValue()&&this._time.computeDelta(i)<.015)return;this._screen[0].update(e[0]),this._screen[1].update(e[1]),this._scene[0].update(t[0]),this._scene[1].update(t[1]),this._scene[2].update(t[2]),this._time.update(i)}}reset(){this._screen[0].reset(),this._screen[1].reset(),this._scene[0].reset(),this._scene[1].reset(),this._scene[2].reset(),this._time.reset()}evaluateMomentum(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;const e=this._screen[0].filteredDelta,t=this._screen[1].filteredDelta,i=null==e||null==t?0:Math.sqrt(e*e+t*t),s=this._time.filteredDelta,n=null==s||null==i?0:i/s;return Math.abs(n)<this._minimumInitialVelocity?null:this.createMomentum(n,this._stopVelocity,this._friction)}createMomentum(s,n,r){(0,vec3.s)(this._tmpDirection,this._scene[0].filteredDelta??0,this._scene[1].filteredDelta??0,this._scene[2].filteredDelta??0);const l=(0,vec3.l)(this._tmpDirection);l>0&&(0,vec3.g)(this._tmpDirection,this._tmpDirection,1/l);const h=this._time.filteredDelta;return new PanPlanarMomentumEstimator_c(s,n,r,null==h?0:l/h,this._tmpDirection)}}let v=class extends Accessor.Z{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new PanPlanarMomentumEstimator_l(500,6,.92),this.momentum=null,this.tmpMomentum=(0,vec3f64.c)(),this.momentumFinished=!1,this.viewpoint=new Viewpoint.Z({targetGeometry:new Point.Z,scale:0,rotation:0}),this._previousDrag=null,(0,reactiveUtils.gx)((()=>this.momentumFinished),(()=>this.navigation.stop()))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this._previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,s=i.center.y;const e=this._previousDrag;o=e?e.center.x-o:-o,s=e?s-e.center.y:s,t.viewpoint=(0,viewpointUtils.Rx)(this.viewpoint,t.viewpoint,[o||0,s||0]),this._previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.momentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this._previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,s=(0,screenUtils.s1)(-i,o),m=(0,vec3f64.f)(-i,o,0);this.momentumEstimator.add(s,m,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager?.animateContinous(t.viewpoint,((i,o)=>{const{momentum:s,animationTime:e,tmpMomentum:m}=this,n=.001*o;if(!(this.momentumFinished=!s||s.isFinished(e))){const o=s.valueDelta(e,n);(0,vec3.g)(m,s.direction,o),(0,viewpointUtils.Rx)(i,i,m),t.constraints.constrainByGeometry(i)}this.animationTime+=n}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};(0,tslib_es6._)([(0,property.Cb)()],v.prototype,"momentumFinished",void 0),(0,tslib_es6._)([(0,property.Cb)()],v.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property.Cb)()],v.prototype,"navigation",void 0),v=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.navigation.actions.Pan")],v);const d=v;var vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");class MomentumEstimator_s{constructor(t=2.5,i=.01,s=.95,l=12){this._minimumInitialVelocity=t,this._stopVelocity=i,this._friction=s,this._maxVelocity=l,this.enabled=!0,this.value=new FilteredFiniteDifference_t(.8),this.time=new FilteredFiniteDifference_t(.3)}add(t,e){if(this.enabled&&null!=e){if(this.time.hasLastValue()){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta()){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta()||!this.time.hasFilteredDelta())return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=(0,mathUtils.uZ)(e,-this._maxVelocity,this._maxVelocity),Math.abs(e)<this._minimumInitialVelocity?null:this.createMomentum(e,this._stopVelocity,this._friction)}createMomentum(t,e,s){return new Momentum_t(t,e,s)}}class RotationMomentumEstimator_a extends MomentumEstimator_s{constructor(t=3,a=.01,s=.95,o=12){super(t,a,s,o)}add(t,a){const s=this.value.lastValue;if(null!=s){let a=t-s;for(;a>Math.PI;)a-=2*Math.PI;for(;a<-Math.PI;)a+=2*Math.PI;t=s+a}super.add(t,a)}}class r extends Momentum_t{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),s=super.value(e+t)-r;return Math.exp(s)}}class s extends MomentumEstimator_s{constructor(e=2.5,t=.01,r=.95,s=12){super(e,t,r,s)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,s){return new r(e,t,s)}}let _=class extends Accessor.Z{constructor(t){super(t),this._animationTime=0,this._momentumFinished=!1,this._previousAngle=0,this._previousRadius=0,this._previousCenter=null,this._rotationMomentumEstimator=new RotationMomentumEstimator_a(.6,.15,.95),this._rotationDirection=1,this._startAngle=0,this._startRadius=0,this._updateTimestamp=null,this._zoomDirection=1,this._zoomMomentumEstimator=new s,this._zoomOnly=null,this.zoomMomentum=null,this.rotateMomentum=null,this.viewpoint=new Viewpoint.Z({targetGeometry:new Point.Z,scale:0,rotation:0}),this.addHandles((0,reactiveUtils.gx)((()=>this._momentumFinished),(()=>this.navigation.stop())))}begin(t,o){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=o.angle,this._previousRadius=this._startRadius=o.radius,this._previousCenter=o.center,this._updateTimestamp=null,t.constraints.rotationEnabled&&this.addToRotateEstimator(0,o.timestamp),this.addToZoomEstimator(o,1)}update(t,o){null===this._updateTimestamp&&(this._updateTimestamp=o.timestamp);const i=o.angle,s=o.radius,e=o.center,n=Math.abs(180*(i-this._startAngle)/Math.PI),m=Math.abs(s-this._startRadius),a=this._startRadius/s;if(this._previousRadius&&this._previousCenter){const r=s/this._previousRadius;let h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=r>=1?1:-1,t.constraints.rotationEnabled?(null===this._zoomOnly&&o.timestamp-this._updateTimestamp>200&&(this._zoomOnly=m-n>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,o.timestamp)):h=0,this.addToZoomEstimator(o,a),this.navigation.setViewpoint([e.x,e.y],1/r,h,[this._previousCenter.x-e.x,e.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=s,this._previousCenter=e}end(t){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(t),this.navigation.end()}addToRotateEstimator(t,o){this._rotationMomentumEstimator.add(t,.001*o)}addToZoomEstimator(t,o){this._zoomMomentumEstimator.add(o,.001*t.timestamp)}canZoomIn(t){const o=t.scale,i=t.constraints.effectiveMaxScale;return 0===i||o>i}canZoomOut(t){const o=t.scale,i=t.constraints.effectiveMinScale;return 0===i||o<i}onAnimationUpdate(t){this.navigation.animationManager?.animateContinous(t.viewpoint,((o,i)=>{const s=!this.canZoomIn(t)&&this._zoomDirection>1||!this.canZoomOut(t)&&this._zoomDirection<1,e=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),n=s||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),p=.001*i;if(this._momentumFinished=e&&n,!this._momentumFinished){const i=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,p))*this._rotationDirection*180/Math.PI:0;let s=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,p)):1;const e=(0,vec2f64.a)(),n=(0,vec2f64.a)();if(this._previousCenter){(0,vec2.s)(e,this._previousCenter.x,this._previousCenter.y),(0,viewpointUtils.Dq)(n,t.size,t.padding),(0,vec2.i)(e,e,n);const{constraints:r,scale:p}=t,l=p*s;s<1&&!r.canZoomInTo(l)?(s=p/r.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):s>1&&!r.canZoomOutTo(l)&&(s=p/r.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),(0,viewpointUtils.UZ)(o,t.viewpoint,s,i,e,t.size),t.constraints.constrainByGeometry(o)}}this._animationTime+=p}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"_momentumFinished",void 0),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property.Cb)()],_.prototype,"navigation",void 0),_=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.navigation.actions.Pinch")],_);const Pinch_d=_,u=(0,vec2f64.a)(),Rotate_d=(0,vec2f64.a)();let j=class extends Accessor.Z{constructor(t){super(t),this._previousCenter=(0,vec2f64.a)(),this.viewpoint=new Viewpoint.Z({targetGeometry:new Point.Z,scale:0,rotation:0})}begin(t,e){this.navigation.begin(),(0,vec2.s)(this._previousCenter,e.center.x,e.center.y)}update(t,e){const{state:{size:o,padding:r}}=t;(0,vec2.s)(u,e.center.x,e.center.y),(0,viewpointUtils.ni)(Rotate_d,o,r),t.viewpoint=(0,viewpointUtils.$H)(this.viewpoint,t.state.paddedViewState.viewpoint,(0,viewpointUtils.dI)(Rotate_d,this._previousCenter,u)),(0,vec2.j)(this._previousCenter,u)}end(){this.navigation.end()}};(0,tslib_es6._)([(0,property.Cb)()],j.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property.Cb)()],j.prototype,"navigation",void 0),j=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.actions.Rotate")],j);const Rotate_h=j,g=new Viewpoint.Z({targetGeometry:new Point.Z}),MapViewNavigation_=[0,0];let T=class extends Accessor.Z{constructor(t){super(t),this._endTimer=null,this._lastEventTimestamp=null,this.animationManager=null,this.interacting=!1}initialize(){this.pan=new d({navigation:this}),this.rotate=new Rotate_h({navigation:this}),this.pinch=new Pinch_d({navigation:this}),this.zoomBox=new c({view:this.view,navigation:this})}destroy(){this.pan=(0,maybe.SC)(this.pan),this.rotate=(0,maybe.SC)(this.rotate),this.pinch=(0,maybe.SC)(this.pinch),this.zoomBox=(0,maybe.SC)(this.zoomBox),this.animationManager=null}begin(){this._set("interacting",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(250)}async zoom(t,i=this._getDefaultAnchor()){if(this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return t<1?this.zoomIn(i):this.zoomOut(i);this.setViewpoint(i,t,0,[0,0])}async zoomIn(t){const i=this.view,o=i.constraints.snapToNextScale(i.scale);return this._zoomToScale(o,t)}async zoomOut(t){const i=this.view,o=i.constraints.snapToPreviousScale(i.scale);return this._zoomToScale(o,t)}setViewpoint(t,i,o,n){this.begin(),this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,t,i,o,n),this.end()}setViewpointImmediate(t,i=0,o=[0,0],n=this._getDefaultAnchor()){this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,n,t,i,o)}continousRotateClockwise(){const t=this.get("view.viewpoint");this.animationManager?.animateContinous(t,(t=>{(0,viewpointUtils.$H)(t,t,-1)}))}continousRotateCounterclockwise(){const t=this.get("view.viewpoint");this.animationManager?.animateContinous(t,(t=>{(0,viewpointUtils.$H)(t,t,1)}))}resetRotation(){this.view.rotation=0}continousPanLeft(){this._continuousPan([-10,0])}continousPanRight(){this._continuousPan([10,0])}continousPanUp(){this._continuousPan([0,10])}continousPanDown(){this._continuousPan([0,-10])}stop(){this.pan.stopMomentumNavigation(),this.animationManager?.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))}_continuousPan(t){const i=this.view.viewpoint;this.animationManager?.animateContinous(i,(i=>{(0,viewpointUtils.Rx)(i,i,t),this.view.constraints.constrainByGeometry(i)}))}_startTimer(t){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{this._endTimer=null;const t=performance.now()-(this._lastEventTimestamp??0);t<250?this._endTimer=this._startTimer(t):this._set("interacting",!1)}),t)),this._endTimer}_getDefaultAnchor(){const{size:t,padding:{left:i,right:o,top:n,bottom:e}}=this.view;return MapViewNavigation_[0]=.5*(t[0]-o+i),MapViewNavigation_[1]=.5*(t[1]-e+n),MapViewNavigation_}async _zoomToScale(t,i=this._getDefaultAnchor()){const{view:o}=this,{constraints:n,scale:e,viewpoint:s,size:a,padding:r}=o,c=n.canZoomInTo(t),m=n.canZoomOutTo(t);if(!(t<e&&!c||t>e&&!m))return(0,viewpointUtils.gG)(g,s,t/e,0,i,a,r),n.constrainByGeometry(g),o.goTo(g,{animate:!0})}_scaleRotateTranslateViewpoint(t,i,o,n,e){const{view:s}=this,{size:a,padding:r,constraints:m,scale:p,viewpoint:u}=s,l=p*o,v=m.canZoomInTo(l),w=m.canZoomOutTo(l);return(o<1&&!v||o>1&&!w)&&(o=1),(0,viewpointUtils.Rx)(u,u,e),(0,viewpointUtils.gG)(t,u,o,n,i,a,r),m.constrainByGeometry(t)}};(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"animationManager",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,readOnly:!0})],T.prototype,"interacting",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"pan",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"pinch",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"rotate",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"zoomBox",void 0),T=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.navigation.MapViewNavigation")],T);const y=T},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>o,K:()=>n});const n=class t{};function o(t,...n){let o="";for(let r=0;r<n.length;r++)o+=t[r]+n[r];return o+=t[t.length-1],o}!function(t){t.int=function n(t){return Math.round(t).toString()},t.float=function o(t){return t.toPrecision(8)}}(o||(o={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bh:()=>l,E0:()=>_,IB:()=>s,K5:()=>E,j7:()=>A,je:()=>a,ve:()=>S,wu:()=>c});var _TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");const c=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__.wK)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE_MINUS_SRC_ALPHA),N=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__.if)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE),s=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__.if)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ZERO,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.zi.ONE_MINUS_SRC_ALPHA);function A(r){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__.A.FrontFace?null:r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__.A.Alpha?s:N}function E(r){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__.A.FrontFace?_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__.LZ:null}const S=5e5,_={factor:-1,units:-2};function a(n){return n?_:null}function l(r,e=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.wb.LESS){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__.A.NONE||r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__.A.FrontFace?e:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.wb.LEQUAL}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var o;__webpack_require__.d(__webpack_exports__,{A:()=>o}),function(o){o[o.Color=0]="Color",o[o.Alpha=1]="Alpha",o[o.FrontFace=2]="FrontFace",o[o.NONE=3]="NONE",o[o.COUNT=4]="COUNT"}(o||(o={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var n,e,O,N,a,t,D,i,s,u;__webpack_require__.d(__webpack_exports__,{Gv:()=>e,JJ:()=>i,Rw:()=>N,Ti:()=>u,V_:()=>t,Vr:()=>n,Yg:()=>D,hU:()=>a}),function(n){n[n.None=0]="None",n[n.Front=1]="Front",n[n.Back=2]="Back",n[n.COUNT=3]="COUNT"}(n||(n={})),function(n){n[n.Less=0]="Less",n[n.Lequal=1]="Lequal",n[n.COUNT=2]="COUNT"}(e||(e={})),function(n){n[n.BACKGROUND=0]="BACKGROUND",n[n.UPDATE=1]="UPDATE"}(O||(O={})),function(n){n[n.NOT_LOADED=0]="NOT_LOADED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED"}(N||(N={})),function(n){n[n.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",n[n.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(a||(a={})),function(n){n[n.Highlight=0]="Highlight",n[n.MaskOccludee=1]="MaskOccludee",n[n.COUNT=2]="COUNT"}(t||(t={})),function(n){n[n.CHANGED=0]="CHANGED",n[n.UNCHANGED=1]="UNCHANGED"}(D||(D={})),function(n){n[n.Blend=0]="Blend",n[n.Opaque=1]="Opaque",n[n.Mask=2]="Mask",n[n.MaskBlend=3]="MaskBlend",n[n.COUNT=4]="COUNT"}(i||(i={})),function(n){n[n.OFF=0]="OFF",n[n.ON=1]="ON"}(s||(s={})),function(n){n.DDS_ENCODING="image/vnd-ms.dds",n.KTX2_ENCODING="image/ktx2",n.BASIS_ENCODING="image/x.basis"}(u||(u={}))},"./node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>t});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js");class t{constructor(){this._result=!1}dispose(){this._program=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.M2)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}},"./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mO:()=>T});var _isWebGL2Context_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js");class t{constructor(e,t,E,T,r,_,i,u,s){this.createQuery=e,this.deleteQuery=t,this.resultAvailable=E,this.getResult=T,this.disjoint=r,this.beginTimeElapsed=_,this.endTimeElapsed=i,this.createTimestamp=u,this.timestampBits=s}}let E=!1;function T(T,r){if(r.disjointTimerQuery)return null;let _=T.getExtension("EXT_disjoint_timer_query_webgl2");return _&&(0,_isWebGL2Context_js__WEBPACK_IMPORTED_MODULE_0__.Z)(T)?new t((()=>T.createQuery()),(e=>{T.deleteQuery(e),E=!1}),(e=>T.getQueryParameter(e,T.QUERY_RESULT_AVAILABLE)),(e=>T.getQueryParameter(e,T.QUERY_RESULT)),(()=>T.getParameter(_.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,T.beginQuery(_.TIME_ELAPSED_EXT,e))}),(()=>{T.endQuery(_.TIME_ELAPSED_EXT),E=!1}),(e=>_.queryCounterEXT(e,_.TIMESTAMP_EXT)),(()=>T.getQuery(_.TIMESTAMP_EXT,_.QUERY_COUNTER_BITS_EXT))):(_=T.getExtension("EXT_disjoint_timer_query"),_?new t((()=>_.createQueryEXT()),(e=>{_.deleteQueryEXT(e),E=!1}),(e=>_.getQueryObjectEXT(e,_.QUERY_RESULT_AVAILABLE_EXT)),(e=>_.getQueryObjectEXT(e,_.QUERY_RESULT_EXT)),(()=>T.getParameter(_.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,_.beginQueryEXT(_.TIME_ELAPSED_EXT,e))}),(()=>{_.endQueryEXT(_.TIME_ELAPSED_EXT),E=!1}),(e=>_.queryCounterEXT(e,_.TIMESTAMP_EXT)),(()=>_.getQueryEXT(_.TIMESTAMP_EXT,_.QUERY_COUNTER_BITS_EXT))):null)}},"./node_modules/@arcgis/core/views/webgl/renderState.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BK:()=>_,LZ:()=>a,if:()=>s,jp:()=>M,sg:()=>o,sm:()=>W,wK:()=>l,zp:()=>h});var _3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),_enums_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");function s(t,e,i=_enums_js__WEBPACK_IMPORTED_MODULE_1__.db.ADD,s=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:s[0],g:s[1],b:s[2],a:s[3]}}}function l(t,e,i,s,l=_enums_js__WEBPACK_IMPORTED_MODULE_1__.db.ADD,r=_enums_js__WEBPACK_IMPORTED_MODULE_1__.db.ADD,o=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:s,opRgb:l,opAlpha:r,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}const r={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__.LR.BACK,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__.Wf.CCW},o={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__.LR.FRONT,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__.Wf.CCW},h=e=>e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Vr.Back?r:e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Vr.Front?o:null,a={zNear:0,zFar:1},_={r:!0,g:!0,b:!0,a:!0};function c(t){return T.intern(t)}function d(t){return D.intern(t)}function p(t){return C.intern(t)}function u(t){return A.intern(t)}function g(t){return w.intern(t)}function f(t){return B.intern(t)}function v(t){return z.intern(t)}function I(t){return j.intern(t)}function W(t){return N.intern(t)}class S{constructor(t,e){this._makeKey=t,this._makeRef=e,this._interns=new Map}intern(t){if(!t)return null;const e=this._makeKey(t),i=this._interns;return i.has(e)||i.set(e,this._makeRef(t)),i.get(e)??null}}function b(t){return"["+t.join(",")+"]"}const T=new S(y,(t=>({__tag:"Blending",...t})));function y(t){return t?b([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const D=new S(O,(t=>({__tag:"Culling",...t})));function O(t){return t?b([t.face,t.mode]):null}const C=new S(m,(t=>({__tag:"PolygonOffset",...t})));function m(t){return t?b([t.factor,t.units]):null}const A=new S(R,(t=>({__tag:"DepthTest",...t})));function R(t){return t?b([t.func]):null}const w=new S(k,(t=>({__tag:"StencilTest",...t})));function k(t){return t?b([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const B=new S(P,(t=>({__tag:"DepthWrite",...t})));function P(t){return t?b([t.zNear,t.zFar]):null}const z=new S(F,(t=>({__tag:"ColorWrite",...t})));function F(t){return t?b([t.r,t.g,t.b,t.a]):null}const j=new S(K,(t=>({__tag:"StencilWrite",...t})));function K(t){return t?b([t.mask]):null}const N=new S((function x(t){return t?b([y(t.blending),O(t.culling),m(t.polygonOffset),R(t.depthTest),k(t.stencilTest),P(t.depthWrite),F(t.colorWrite),K(t.stencilWrite)]):null}),(t=>({blending:c(t.blending),culling:d(t.culling),polygonOffset:p(t.polygonOffset),depthTest:u(t.depthTest),stencilTest:g(t.stencilTest),depthWrite:f(t.depthWrite),colorWrite:v(t.colorWrite),stencilWrite:I(t.stencilWrite)})));class M{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}},"./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>f});var _2d_engine_webgl_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/DefaultVertexAttributeLayouts.js"),_BufferObject_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),_Texture_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js"),_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js"),_WebGLDriverTestModule_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js");class f extends _WebGLDriverTestModule_js__WEBPACK_IMPORTED_MODULE_7__.G{constructor(e){super(),this._rctx=e;this._program=e.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(g){const f=this._rctx;if(!f.gl)return g.dispose(),!0;const l=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__.X(1);l.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.e8.CLAMP_TO_EDGE,l.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.cw.NEAREST;const w=new _FramebufferObject_js__WEBPACK_IMPORTED_MODULE_3__.X(f,l),v=_BufferObject_js__WEBPACK_IMPORTED_MODULE_1__.f.createVertex(f,_enums_js__WEBPACK_IMPORTED_MODULE_2__.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),x=new _VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__.U(f,new Map([["a_pos",0]]),_2d_engine_webgl_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_0__.cD,{geometry:v}),h=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__.X;h.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.cw.LINEAR,h.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.e8.CLAMP_TO_EDGE;const b=new _Texture_js__WEBPACK_IMPORTED_MODULE_4__.x(f,h,_);f.useProgram(g),f.bindTexture(b,0),g.setUniform1i("u_texture",0);const A=f.getBoundFramebufferObject(),{x:E,y:T,width:j,height:C}=f.getViewport();f.bindFramebuffer(w),f.setViewport(0,0,1,1),f.setClearColor(0,0,0,0),f.setBlendingEnabled(!1),f.clearSafe(_enums_js__WEBPACK_IMPORTED_MODULE_2__.lk.COLOR_BUFFER_BIT),f.bindVAO(x),f.drawArrays(_enums_js__WEBPACK_IMPORTED_MODULE_2__.MX.TRIANGLE_STRIP,0,4);const y=new Uint8Array(4);return w.readPixels(0,0,1,1,_enums_js__WEBPACK_IMPORTED_MODULE_2__.VI.RGBA,_enums_js__WEBPACK_IMPORTED_MODULE_2__.Br.UNSIGNED_BYTE,y),x.dispose(),w.dispose(),b.dispose(),f.setViewport(E,T,j,C),f.bindFramebuffer(A),255!==y[0]}}const _=new Image;_.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",_.width=5,_.height=5,_.decode()}}]);