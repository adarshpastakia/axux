import {
  Title,
  Description,
  ArgsTable,
  Canvas,
  Story,
} from "@storybook/addon-docs";
import { Anchor, ArgTypes, Subheading } from "@storybook/blocks";
import { Meta } from "@storybook/blocks";
import {
  AxApplicationProvider,
  AxViewport,
  useApplicationContext,
} from "../../src";

<Meta title="@core/Application/Application Root" />

# Application Wrapper

#### Top level application components that provided global context and an application viewport.

<Anchor storyId="provider">
  <Subheading>Application Provider</Subheading>
</Anchor>

<Description of={AxApplicationProvider} />

<ArgTypes sort="requiredFirst" of={AxApplicationProvider} />

<Anchor storyId="useContext">
  <Subheading>Application Context</Subheading>
</Anchor>

The useApplicationContext hook provides access to current color scheme, calendar type, localization locale.

Use context `useApplicationContext()` provides the following options

> `currentColorScheme`
>
> `currentPrimary`
>
> `currentAccent`
>
> `currentLocale`
>
> `currentCalendar`
>
> `toggleColorScheme: (scheme?: "dark" | "light") => void` > _toggle current color scheme between light/dark unless scheme provided_
>
> `changeLocale: (locale: string) => void` > _switch current localization locale_
>
> `changeCalendar: (calendar: "gregorian" | "hijri") => void` > _switch current calendar_
>
> `changePrimary: (color: Colors | ColorHex) => void` > _apply new primary color_
>
> `changeAccent: (color: Colors | ColorHex) => void` > _apply new accent color_
>
> `closeOverlays: (closeNotifs?: true) => void` > _provide mechanism to close all overlays, useful when navigating between routes_

<Anchor storyId="viewport">
  <Subheading>Application Viewport</Subheading>
</Anchor>

<Description of={AxViewport} />

<Anchor storyId="example">
  <Subheading>Code Sample</Subheading>
</Anchor>

<cite type="code">/AppRoot.tsx</cite>

```tsx
import { AxApplicationProvider, AxViewport } from "@axux/core";
import { Fragment, StrictMode } from "react";
import ReactDOM from "react-dom/client";
import { I18nextProvider } from "react-i18next";
import { Outlet, RouterProvider, createMemoryRouter } from "react-router";
import i18next from "./i18n";
import "./styles.css";

const root = ReactDOM.createRoot(document.getElementById("root"));

const router = createMemoryRouter([
  {
    path: "/",
    element: (
      <AxViewport>
        <div>Build the ui here</div>
        <Outlet />
      </AxViewport>
    ),
    children: [
      {
        path: "page",
        element: <Page />,
      },
      {
        path: "page",
        element: <Page />,
      },
    ],
  },
]);

const Wrapper = process.env.NODE_ENV === "development" ? Fragment : StrictMode;
root.render(
  <Wrapper>
    <AxApplicationProvider defaultPrimary="denim" defaultAccent="coral">
      <I18nextProvider i18n={i18next}>
        <RouterProvider router={router} />
      </I18nextProvider>
    </AxApplicationProvider>
  </Wrapper>,
);
```

<cite type="code">/Page.tsx</cite>

```tsx
import { AxPage, AxHeader, AxButton, useApplicationContext } from "@axux/core";

export const Page = () => {
  const { toggleColorScheme } = useApplicationContext();

  return (
    <AxPage>
      <AxHeader>
        <AxButton onClick={toggleColorScheme}>Toggle Light/Dark</AxButton>
      </AxHeader>
    </AxPage>
  );
};
```
