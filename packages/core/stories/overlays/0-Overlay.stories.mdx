import {
  ArgsTable,
  Description,
  Heading,
  Meta,
  Subheading,
  Title,
} from "@storybook/addon-docs";
import { useOverlayService, AxModal, AxFlyout } from "../../src";

<Meta
  title="@core/Overlays/useOverlayService"
  parameters={{ jest: ["Modal.test.tsx", "Flyout.test.tsx"] }}
/>

<Title>useOverlayService</Title>

<Description of={useOverlayService} />

```tsx
import { AxButton, useOverlayService, OverlayProps } from "@axux/core";

const MyModal = ({
  data,
  onClose,
  ...modalProps
}: OverlayProps<{ title: string; data: KeyValue }>) => {
  const handleClose = () => {
    onClose({ status: "done", result: [] });
  };
  return (
    <AxModal {...modalProps} onClose={handleClose}>
      <AxContent>
        <AxText>{LIPSUM}</AxText>
      </AxContent>
    </AxModal>
  );
};

const MyFlyout = ({
  data,
  onClose,
  ...flyoutProps
}: OverlayProps<{ title: string; data: KeyValue }>) => {
  const handleClose = () => {
    onClose({ status: "done", result: [] });
  };
  return (
    <AxFlyout size="md" {...flyoutProps} onClose={handleClose}>
      <AxContent>
        <AxText>{LIPSUM}</AxText>
      </AxContent>
    </AxFlyout>
  );
};

export const Element = () => {
  const [Modal, openModalOverlay] = useOverlayService(MyModal);
  const [Flyout, openFlyoutOverlay] = useOverlayService(MyFlyout);
  const openModal = () => {
    // Open overlay pass additional props
    openModalOverlay({ title: "My Modal", data: {} }).then((returnValue) => {
      // promise is resolved with value passed to onClose
    });
  };
  const openFlyout = () => {
    // Open overlay pass additional props
    openFlyoutOverlay({ title: "My Flyout", data: {} }).then((returnValue) => {
      // promise is resolved with value passed to onClose
    });
  };

  return (
    <div>
      {Overlay}
      <AxButton onClick={openModal}>Open Modal</AxButton>
      <AxButton onClick={openFlyout}>Open Flyout</AxButton>
    </div>
  );
};
```

<Heading>Props</Heading>

<ArgsTable sort="requiredFirst" components={{ AxModal, AxFlyout }} />
