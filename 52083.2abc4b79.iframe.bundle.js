/*! For license information please see 52083.2abc4b79.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[52083],{"./node_modules/wavesurfer.js/dist/plugin/wavesurfer.cursor.js":module=>{!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(self,(()=>(()=>{"use strict";var __webpack_modules__={"./src/plugin/cursor/index.js":(module,exports)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var CursorPlugin=function(){function CursorPlugin(params,ws){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CursorPlugin),_defineProperty(this,"defaultParams",{hideOnBlur:!0,width:"1px",color:"black",opacity:"0.25",style:"solid",zIndex:4,customStyle:{},customShowTimeStyle:{},showTime:!1,followCursorY:!1,formatTimeCallback:null}),_defineProperty(this,"_onMousemove",(function(e){var event=_this.util.withOrientation(e,_this.wavesurfer.params.vertical),bbox=_this.wrapper.getBoundingClientRect(),y=0,x=_this.wrapper.scrollLeft+event.clientX-bbox.left,displayTimeWidth=_this.displayTime?_this.displayTime.getBoundingClientRect().width:0,flip=bbox.right<event.clientX+displayTimeWidth;_this.params.showTime&&_this.params.followCursorY&&(y=event.clientY-(bbox.top+bbox.height/2)),_this.updateCursorPosition(x,y,flip)})),_defineProperty(this,"_onMouseenter",(function(){return _this.showCursor()})),_defineProperty(this,"_onMouseleave",(function(){return _this.hideCursor()})),this.wavesurfer=ws,this.style=ws.util.style,this.util=ws.util,this.cursor=null,this.showTime=null,this.displayTime=null,this.isDestroyCalled=!1,this.params=Object.assign({},this.defaultParams,params)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CursorPlugin,[{key:"_onReady",value:function _onReady(){this.isDestroyCalled||(this.wrapper=this.wavesurfer.drawer.wrapper,this.cursor=this.util.withOrientation(this.wrapper.appendChild(document.createElement("cursor")),this.wavesurfer.params.vertical),this.style(this.cursor,Object.assign({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"0",display:"flex",borderRightStyle:this.params.style,borderRightWidth:this.params.width,borderRightColor:this.params.color,opacity:this.params.opacity,pointerEvents:"none"},this.params.customStyle)),this.params.showTime&&(this.showTime=this.util.withOrientation(this.wrapper.appendChild(document.createElement("showTitle")),this.wavesurfer.params.vertical),this.style(this.showTime,Object.assign({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"auto",display:"flex",opacity:this.params.opacity,pointerEvents:"none",height:"100%"},this.params.customStyle)),this.displayTime=this.util.withOrientation(this.showTime.appendChild(document.createElement("div")),this.wavesurfer.params.vertical),this.style(this.displayTime,Object.assign({display:"inline",pointerEvents:"none",margin:"auto",visibility:"hidden"},this.params.customShowTimeStyle)),this.displayTime.innerHTML=this.formatTime(0)),this.wrapper.addEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.hideCursor(),this.wrapper.addEventListener("mouseenter",this._onMouseenter),this.wrapper.addEventListener("mouseleave",this._onMouseleave)))}},{key:"init",value:function init(){var _this2=this;this.wavesurfer.isReady?this._onReady():this.wavesurfer.once("ready",(function(){return _this2._onReady()}))}},{key:"destroy",value:function destroy(){this.cursorTime&&this.showTime?(this.params.showTime&&this.showTime&&this.showTime.remove(),this.cursor&&this.cursor.remove(),this.wrapper.removeEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.wrapper.removeEventListener("mouseenter",this._onMouseenter),this.wrapper.removeEventListener("mouseleave",this._onMouseleave))):this.isDestroyCalled=!0}},{key:"updateCursorPosition",value:function updateCursorPosition(xpos,ypos){var flip=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.style(this.cursor,{left:"".concat(xpos,"px")}),this.params.showTime){var duration=this.wavesurfer.getDuration(),elementWidth=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,scrollWidth=this.wavesurfer.drawer.getScrollX(),scrollTime=duration/this.wavesurfer.drawer.width*scrollWidth,timeValue=Math.max(0,(xpos-this.wrapper.scrollLeft)/elementWidth*duration)+scrollTime,formatValue=this.formatTime(timeValue);if(flip)xpos-=this.displayTime.getBoundingClientRect().width;this.style(this.showTime,{left:"".concat(xpos,"px"),top:"".concat(ypos,"px")}),this.style(this.displayTime,{visibility:"visible"}),this.displayTime.innerHTML="".concat(formatValue)}}},{key:"showCursor",value:function showCursor(){this.style(this.cursor,{display:"flex"}),this.params.showTime&&this.style(this.showTime,{display:"flex"})}},{key:"hideCursor",value:function hideCursor(){this.style(this.cursor,{display:"none"}),this.params.showTime&&this.style(this.showTime,{display:"none"})}},{key:"formatTime",value:function formatTime(cursorTime){return cursorTime=isNaN(cursorTime)?0:cursorTime,this.params.formatTimeCallback?this.params.formatTimeCallback(cursorTime):[cursorTime].map((function(time){return[Math.floor(time%3600/60),("00"+Math.floor(time%60)).slice(-2),("000"+Math.floor(time%1*1e3)).slice(-3)].join(":")}))}}],[{key:"create",value:function create(params){return{name:"cursor",deferInit:!(!params||!params.deferInit)&&params.deferInit,params,staticProps:{},instance:CursorPlugin}}}]),CursorPlugin}();exports.default=CursorPlugin,module.exports=exports.default}},__webpack_module_cache__={};var __nested_webpack_exports__=function __nested_webpack_require_13872__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_13872__),module.exports}("./src/plugin/cursor/index.js");return __nested_webpack_exports__})()))},"./node_modules/wavesurfer.js/dist/plugin/wavesurfer.regions.js":module=>{!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(self,(()=>(()=>{"use strict";var __webpack_modules__={"./src/plugin/regions/index.js":(module,exports,__nested_webpack_require_847__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _region=__nested_webpack_require_847__("./src/plugin/regions/region.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}var RegionsPlugin=function(){function RegionsPlugin(params,ws){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RegionsPlugin),this.params=params,this.wavesurfer=ws,this.util=_objectSpread(_objectSpread({},ws.util),{},{getRegionSnapToGridValue:function getRegionSnapToGridValue(value){return _this.getRegionSnapToGridValue(value,params)}}),this.maxRegions=params.maxRegions,this.regionsMinLength=params.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((function(key){_region.Region.prototype[key]=_this.util.Observer.prototype[key]})),this.wavesurfer.Region=_region.Region;this._onBackendCreated=function(){_this.wrapper=_this.wavesurfer.drawer.wrapper,_this.orientation=_this.wavesurfer.drawer.orientation,_this.defaultEdgeScrollWidth=.05*_this.wrapper.clientWidth,_this.params.regions&&_this.params.regions.forEach((function(region){_this.add(region)}))},this.list={},this._onReady=function(){_this.wrapper=_this.wavesurfer.drawer.wrapper,_this.vertical=_this.wavesurfer.drawer.params.vertical,_this.params.dragSelection&&_this.enableDragSelection(_this.params),Object.keys(_this.list).forEach((function(id){_this.list[id].updateRender()}))}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(RegionsPlugin,[{key:"init",value:function init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}},{key:"wouldExceedMaxRegions",value:function wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}},{key:"add",value:function add(params){var _this2=this;if(this.wouldExceedMaxRegions())return null;!(params=_objectSpread({edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,contentEditable:this.params.contentEditable,removeButton:this.params.removeButton},params)).formatTimeCallback&&this.params.formatTimeCallback&&(params=_objectSpread(_objectSpread({},params),{},{formatTimeCallback:this.params.formatTimeCallback})),!params.minLength&&this.regionsMinLength&&(params=_objectSpread(_objectSpread({},params),{},{minLength:this.regionsMinLength}));var region=new this.wavesurfer.Region(params,this.util,this.wavesurfer);return this.list[region.id]=region,region.on("remove",(function(){delete _this2.list[region.id]})),region}},{key:"clear",value:function clear(){var _this3=this;Object.keys(this.list).forEach((function(id){_this3.list[id].remove()}))}},{key:"enableDragSelection",value:function enableDragSelection(params){var _this4=this;this.disableDragSelection();var drag,maxScroll,start,region,touchId,scrollDirection,wrapperRect,slop=params.slop||2,container=this.wavesurfer.drawer.container,scroll=!1!==params.scroll&&this.wavesurfer.params.scrollParent,scrollSpeed=params.scrollSpeed||1,scrollThreshold=params.scrollThreshold||10,duration=this.wavesurfer.getDuration(),pxMove=0,edgeScroll=function edgeScroll(e){if(region&&scrollDirection){var scrollLeft=_this4.wrapper.scrollLeft+scrollSpeed*scrollDirection;_this4.wrapper.scrollLeft=scrollLeft=Math.min(maxScroll,Math.max(0,scrollLeft));var end=_this4.wavesurfer.drawer.handleEvent(e);region.update({start:Math.min(end*duration,start*duration),end:Math.max(end*duration,start*duration)}),scrollLeft<maxScroll&&scrollLeft>0&&window.requestAnimationFrame((function(){edgeScroll(e)}))}},eventDown=function eventDown(e){if(!(e.touches&&e.touches.length>1)){if(duration=_this4.wavesurfer.getDuration(),touchId=e.targetTouches?e.targetTouches[0].identifier:null,maxScroll=_this4.wrapper.scrollWidth-_this4.wrapper.clientWidth,wrapperRect=_this4.util.withOrientation(_this4.wrapper.getBoundingClientRect(),_this4.vertical),_this4.wavesurfer.params.splitChannels&&_this4.wavesurfer.params.splitChannelsOptions.splitDragSelection){var y=(e.touches?e.touches[0].clientY:e.clientY)-wrapperRect.top,channelCount=null!=_this4.wavesurfer.backend.buffer?_this4.wavesurfer.backend.buffer.numberOfChannels:1,channelHeight=_this4.wrapper.clientHeight/channelCount,channelIdx=Math.floor(y/channelHeight);params.channelIdx=channelIdx;var channelColors=_this4.wavesurfer.params.splitChannelsOptions.channelColors[channelIdx];channelColors&&channelColors.dragColor&&(params.color=channelColors.dragColor)}drag=!0,start=_this4.wavesurfer.drawer.handleEvent(e,!0),region=null,scrollDirection=null}};this.wrapper.addEventListener("mousedown",eventDown),this.wrapper.addEventListener("touchstart",eventDown),this.on("disable-drag-selection",(function(){_this4.wrapper.removeEventListener("touchstart",eventDown),_this4.wrapper.removeEventListener("mousedown",eventDown)}));var eventUp=function eventUp(e){e.touches&&e.touches.length>1||(drag=!1,pxMove=0,scrollDirection=null,region&&(_this4.util.preventClick(),region.fireEvent("update-end",e),_this4.wavesurfer.fireEvent("region-update-end",region,e)),region=null)};this.wrapper.addEventListener("mouseleave",eventUp),this.wrapper.addEventListener("mouseup",eventUp),this.wrapper.addEventListener("touchend",eventUp),document.body.addEventListener("mouseup",eventUp),document.body.addEventListener("touchend",eventUp),this.on("disable-drag-selection",(function(){document.body.removeEventListener("mouseup",eventUp),document.body.removeEventListener("touchend",eventUp),_this4.wrapper.removeEventListener("touchend",eventUp),_this4.wrapper.removeEventListener("mouseup",eventUp),_this4.wrapper.removeEventListener("mouseleave",eventUp)}));var eventMove=function eventMove(event){if(drag&&!(++pxMove<=slop)&&!(event.touches&&event.touches.length>1)&&(!event.targetTouches||event.targetTouches[0].identifier==touchId)&&(region||(region=_this4.add(params||{})))){var end=_this4.wavesurfer.drawer.handleEvent(event),startUpdate=_this4.wavesurfer.regions.util.getRegionSnapToGridValue(start*duration),endUpdate=_this4.wavesurfer.regions.util.getRegionSnapToGridValue(end*duration);region.update({start:Math.min(endUpdate,startUpdate),end:Math.max(endUpdate,startUpdate)});var orientedEvent=_this4.util.withOrientation(event,_this4.vertical);if(scroll&&container.clientWidth<_this4.wrapper.scrollWidth){var x=orientedEvent.clientX-wrapperRect.left;(scrollDirection=x<=scrollThreshold?-1:x>=wrapperRect.right-scrollThreshold?1:null)&&edgeScroll(event)}}};this.wrapper.addEventListener("mousemove",eventMove),this.wrapper.addEventListener("touchmove",eventMove),this.on("disable-drag-selection",(function(){_this4.wrapper.removeEventListener("touchmove",eventMove),_this4.wrapper.removeEventListener("mousemove",eventMove)})),this.wavesurfer.on("region-created",(function(region){_this4.regionsMinLength&&(region.minLength=_this4.regionsMinLength)}))}},{key:"disableDragSelection",value:function disableDragSelection(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function getCurrentRegion(){var _this5=this,time=this.wavesurfer.getCurrentTime(),min=null;return Object.keys(this.list).forEach((function(id){var cur=_this5.list[id];cur.start<=time&&cur.end>=time&&(!min||cur.end-cur.start<min.end-min.start)&&(min=cur)})),min}},{key:"getRegionSnapToGridValue",value:function getRegionSnapToGridValue(value,params){if(params.snapToGridInterval){var offset=params.snapToGridOffset||0;return Math.round((value-offset)/params.snapToGridInterval)*params.snapToGridInterval+offset}return value}}],[{key:"create",value:function create(params){return{name:"regions",deferInit:!(!params||!params.deferInit)&&params.deferInit,params,staticProps:{addRegion:function addRegion(options){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(options)},clearRegions:function clearRegions(){this.regions&&this.regions.clear()},enableDragSelection:function enableDragSelection(options){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(options)},disableDragSelection:function disableDragSelection(){this.regions.disableDragSelection()}},instance:RegionsPlugin}}}]),RegionsPlugin}();exports.default=RegionsPlugin,module.exports=exports.default},"./src/plugin/regions/region.js":(__unused_webpack_module,exports)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Region=void 0;var Region=function(){function Region(params,regionsUtils,ws){var _params$showTooltip,_this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Region),this.wavesurfer=ws,this.wrapper=ws.drawer.wrapper,this.util=ws.util,this.style=this.util.style,this.regionsUtil=regionsUtils,this.vertical=ws.drawer.params.vertical,this.id=null==params.id?ws.util.getId():params.id,this.start=Number(params.start)||0,this.end=null==params.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(params.end),this.resize=void 0===params.resize||Boolean(params.resize),this.drag=void 0===params.drag||Boolean(params.drag),this.contentEditable=Boolean(params.contentEditable),this.removeButton=Boolean(params.removeButton),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(params.loop),this.color=params.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=params.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=params.data||{},this.attributes=params.attributes||{},this.showTooltip=null===(_params$showTooltip=params.showTooltip)||void 0===_params$showTooltip||_params$showTooltip,this.maxLength=params.maxLength,this.minLength=params.minLength,this._onRedraw=function(){return _this.updateRender()},this.scroll=!1!==params.scroll&&ws.params.scrollParent,this.scrollSpeed=params.scrollSpeed||1,this.scrollThreshold=params.scrollThreshold||10,this.preventContextMenu=void 0!==params.preventContextMenu&&Boolean(params.preventContextMenu);var channelIdx=null==params.channelIdx?-1:parseInt(params.channelIdx);if(this.channelIdx=channelIdx,this.regionHeight="100%",this.marginTop="0px",-1!==channelIdx){var channelCount=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;channelCount>=0&&channelIdx<channelCount&&(this.regionHeight=Math.floor(1/channelCount*100)+"%",this.marginTop=this.wavesurfer.getHeight()*channelIdx+"px")}this.formatTimeCallback=params.formatTimeCallback,this.edgeScrollWidth=params.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Region,[{key:"update",value:function update(params,eventParams){null!=params.start&&(this.start=Number(params.start)),null!=params.end&&(this.end=Number(params.end)),null!=params.loop&&(this.loop=Boolean(params.loop)),null!=params.color&&(this.color=params.color),null!=params.handleStyle&&(this.handleStyle=params.handleStyle),null!=params.data&&(this.data=params.data),null!=params.resize&&(this.resize=Boolean(params.resize),this.updateHandlesResize(this.resize)),null!=params.drag&&(this.drag=Boolean(params.drag)),null!=params.maxLength&&(this.maxLength=Number(params.maxLength)),null!=params.minLength&&(this.minLength=Number(params.minLength)),null!=params.attributes&&(this.attributes=params.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,eventParams)}},{key:"remove",value:function remove(){this.element&&(this.element.remove(),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function play(start){var s=start||this.start;this.wavesurfer.play(s,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function playLoop(start){this.loop=!0,this.play(start)}},{key:"setLoop",value:function setLoop(loop){this.loop=loop}},{key:"render",value:function render(){for(var attrname in this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id),this.attributes)this.element.setAttribute("data-region-"+attrname,this.attributes[attrname]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.removeButton){var removeButtonEl=document.createElement("div");removeButtonEl.className="remove-region-button",removeButtonEl.textContent="тип",this.removeButtonEl=this.element.appendChild(removeButtonEl);this.style(this.removeButtonEl,{zIndex:4,position:"absolute",bottom:0,right:"4px",cursor:"pointer",fontSize:"20px",lineHeight:"21px",color:"grey"})}if(this.contentEditable){var contentEl=document.createElement("div");contentEl.className="region-content",contentEl.contentEditable="true",contentEl.innerText=this.data.text||"",this.contentEl=this.element.appendChild(contentEl);this.style(this.contentEl,{zIndex:4,padding:"2px 5px",cursor:"text"})}if(this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";var _css2={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},handleLeftCss="none"!==this.handleStyle.left?Object.assign({left:"0px"},_css2,this.handleStyle.left):null,handleRightCss="none"!==this.handleStyle.right?Object.assign({right:"0px"},_css2,this.handleStyle.right):null;handleLeftCss&&this.style(this.handleLeftEl,handleLeftCss),handleRightCss&&this.style(this.handleRightEl,handleRightCss)}this.updateRender(),this.bindEvents()}},{key:"formatTime",value:function formatTime(start,end){return this.formatTimeCallback?this.formatTimeCallback(start,end):(start==end?[start]:[start,end]).map((function(time){return[Math.floor(time%3600/60),("00"+Math.floor(time%60)).slice(-2)].join(":")})).join("-")}},{key:"getWidth",value:function getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function updateRender(){var dur=this.wavesurfer.getDuration(),width=this.getWidth(),startLimited=this.start,endLimited=this.end;if(startLimited<0&&(endLimited-=startLimited=0),endLimited>dur&&(startLimited=dur-((endLimited=dur)-startLimited)),null!=this.minLength&&(endLimited=Math.max(startLimited+this.minLength,endLimited)),null!=this.maxLength&&(endLimited=Math.min(startLimited+this.maxLength,endLimited)),null!=this.element){var left=Math.round(startLimited/dur*width),regionWidth=Math.round(endLimited/dur*width)-left;for(var attrname in this.style(this.element,{left:left+"px",width:regionWidth+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+attrname,this.attributes[attrname]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}},{key:"bindInOut",value:function bindInOut(){var _this2=this;this.firedIn=!1,this.firedOut=!1;var onProcess=function onProcess(time){var start=Math.round(10*_this2.start)/10,end=Math.round(10*_this2.end)/10;time=Math.round(10*time)/10,!_this2.firedOut&&_this2.firedIn&&(start>time||end<=time)&&(_this2.firedOut=!0,_this2.firedIn=!1,_this2.fireEvent("out"),_this2.wavesurfer.fireEvent("region-out",_this2)),!_this2.firedIn&&start<=time&&end>time&&(_this2.firedIn=!0,_this2.firedOut=!1,_this2.fireEvent("in"),_this2.wavesurfer.fireEvent("region-in",_this2))};this.wavesurfer.backend.on("audioprocess",onProcess),this.on("remove",(function(){_this2.wavesurfer.backend.un("audioprocess",onProcess)})),this.on("out",(function(){if(_this2.loop){var realTime=_this2.wavesurfer.getCurrentTime();realTime>=_this2.start&&realTime<=_this2.end&&_this2.wavesurfer.play(_this2.start)}}))}},{key:"bindEvents",value:function bindEvents(){var _this3=this,preventContextMenu=this.preventContextMenu;this.element.addEventListener("mouseenter",(function(e){_this3.fireEvent("mouseenter",e),_this3.wavesurfer.fireEvent("region-mouseenter",_this3,e)})),this.element.addEventListener("mouseleave",(function(e){_this3.fireEvent("mouseleave",e),_this3.wavesurfer.fireEvent("region-mouseleave",_this3,e)})),this.element.addEventListener("click",(function(e){e.preventDefault(),_this3.fireEvent("click",e),_this3.wavesurfer.fireEvent("region-click",_this3,e)})),this.element.addEventListener("dblclick",(function(e){e.stopPropagation(),e.preventDefault(),_this3.fireEvent("dblclick",e),_this3.wavesurfer.fireEvent("region-dblclick",_this3,e)})),this.element.addEventListener("contextmenu",(function(e){preventContextMenu&&e.preventDefault(),_this3.fireEvent("contextmenu",e),_this3.wavesurfer.fireEvent("region-contextmenu",_this3,e)})),(this.drag||this.resize)&&this.bindDragEvents(),this.contentEditable&&(this.contentEl.addEventListener("blur",this.onContentBlur.bind(this)),this.contentEl.addEventListener("click",this.onContentClick.bind(this))),this.removeButton&&this.removeButtonEl.addEventListener("click",this.onRemove.bind(this))}},{key:"bindDragEvents",value:function bindDragEvents(){var startTime,touchId,drag,maxScroll,resize,scrollDirection,wrapperRect,regionLeftHalfTime,regionRightHalfTime,_this4=this,container=this.wavesurfer.drawer.container,scrollSpeed=this.scrollSpeed,updated=!1,edgeScroll=function edgeScroll(event){var orientedEvent=_this4.util.withOrientation(event,_this4.vertical),duration=_this4.wavesurfer.getDuration();if(scrollDirection&&(drag||resize)){var x=orientedEvent.clientX,distanceBetweenCursorAndWrapperEdge=0,regionHalfTimeWidth=0,adjustment=0,time=_this4.regionsUtil.getRegionSnapToGridValue(_this4.wavesurfer.drawer.handleEvent(event)*duration);if(drag)-1===scrollDirection?(regionHalfTimeWidth=regionLeftHalfTime*_this4.wavesurfer.params.minPxPerSec,distanceBetweenCursorAndWrapperEdge=x-wrapperRect.left):(regionHalfTimeWidth=regionRightHalfTime*_this4.wavesurfer.params.minPxPerSec,distanceBetweenCursorAndWrapperEdge=wrapperRect.right-x);else{var minLength=_this4.minLength;minLength||(minLength=0),"start"===resize?(time>_this4.end-minLength&&(time=_this4.end-minLength,adjustment=scrollSpeed*scrollDirection),time<0&&(time=0)):"end"===resize&&(time<_this4.start+minLength&&(time=_this4.start+minLength,adjustment=scrollSpeed*scrollDirection),time>duration&&(time=duration))}var wrapperScrollLeft=_this4.wrapper.scrollLeft;if(-1===scrollDirection){if(0===Math.round(wrapperScrollLeft))return;if(Math.round(wrapperScrollLeft-regionHalfTimeWidth+distanceBetweenCursorAndWrapperEdge)<=0)return}else{if(Math.round(wrapperScrollLeft)===maxScroll)return;if(Math.round(wrapperScrollLeft+regionHalfTimeWidth-distanceBetweenCursorAndWrapperEdge)>=maxScroll)return}var scrollLeft=wrapperScrollLeft-adjustment+scrollSpeed*scrollDirection;if(-1===scrollDirection){var calculatedLeft=Math.max(0+regionHalfTimeWidth-distanceBetweenCursorAndWrapperEdge,scrollLeft);_this4.wrapper.scrollLeft=scrollLeft=calculatedLeft}else{var calculatedRight=Math.min(maxScroll-regionHalfTimeWidth+distanceBetweenCursorAndWrapperEdge,scrollLeft);_this4.wrapper.scrollLeft=scrollLeft=calculatedRight}var delta=time-startTime;startTime=time,drag?_this4.onDrag(delta):_this4.onResize(delta,resize),window.requestAnimationFrame((function(){edgeScroll(event)}))}},onDown=function onDown(event){var duration=_this4.wavesurfer.getDuration();event.touches&&event.touches.length>1||(touchId=event.targetTouches?event.targetTouches[0].identifier:null,(_this4.drag||_this4.resize)&&event.stopPropagation(),startTime=_this4.regionsUtil.getRegionSnapToGridValue(_this4.wavesurfer.drawer.handleEvent(event,!0)*duration),regionLeftHalfTime=startTime-_this4.start,regionRightHalfTime=_this4.end-startTime,maxScroll=_this4.wrapper.scrollWidth-_this4.wrapper.clientWidth,wrapperRect=_this4.util.withOrientation(_this4.wrapper.getBoundingClientRect(),_this4.vertical),_this4.isResizing=!1,_this4.isDragging=!1,"handle"===event.target.tagName.toLowerCase()?(_this4.isResizing=!0,resize=event.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(_this4.isDragging=!0,drag=!0,resize=!1))},onUp=function onUp(event){event.touches&&event.touches.length>1||((drag||resize)&&(_this4.isDragging=!1,_this4.isResizing=!1,drag=!1,scrollDirection=null,resize=!1),updated&&(updated=!1,_this4.util.preventClick(),_this4.fireEvent("update-end",event),_this4.wavesurfer.fireEvent("region-update-end",_this4,event)))},onMove=function onMove(event){var duration=_this4.wavesurfer.getDuration(),orientedEvent=_this4.util.withOrientation(event,_this4.vertical),delta=null;if(!(event.touches&&event.touches.length>1)&&(!event.targetTouches||event.targetTouches[0].identifier==touchId)&&(drag||resize)){var time=_this4.regionsUtil.getRegionSnapToGridValue(_this4.wavesurfer.drawer.handleEvent(event)*duration);if(drag){var maxEnd=_this4.wavesurfer.getDuration();time>maxEnd-regionRightHalfTime&&(time=maxEnd-regionRightHalfTime),time-regionLeftHalfTime<0&&(time=regionLeftHalfTime)}if(resize){var minLength=_this4.minLength;minLength||(minLength=0),"start"===resize?(time>_this4.end-minLength&&(time=_this4.end-minLength),time<0&&(time=0)):"end"===resize&&(time<_this4.start+minLength&&(delta=(time=_this4.start+minLength)-(_this4.end+(time-startTime))),time>duration&&(time=duration))}if(delta||(delta=time-startTime),startTime=time,_this4.drag&&drag&&(updated=updated||!!delta,_this4.onDrag(delta)),_this4.resize&&resize&&(updated=updated||!!delta,_this4.onResize(delta,resize)),_this4.scroll&&container.clientWidth<_this4.wrapper.scrollWidth){var x=orientedEvent.clientX;(scrollDirection=x<wrapperRect.left+_this4.edgeScrollWidth?-1:x>wrapperRect.right-_this4.edgeScrollWidth?1:null)&&edgeScroll(event)}}};this.element.addEventListener("mousedown",onDown),this.element.addEventListener("touchstart",onDown),document.body.addEventListener("mousemove",onMove),document.body.addEventListener("touchmove",onMove,{passive:!1}),document.addEventListener("mouseup",onUp),document.body.addEventListener("touchend",onUp),this.on("remove",(function(){document.removeEventListener("mouseup",onUp),document.body.removeEventListener("touchend",onUp),document.body.removeEventListener("mousemove",onMove),document.body.removeEventListener("touchmove",onMove)})),this.wavesurfer.on("destroy",(function(){document.removeEventListener("mouseup",onUp),document.body.removeEventListener("touchend",onUp)}))}},{key:"onDrag",value:function onDrag(delta){var maxEnd=this.wavesurfer.getDuration();this.end+delta>maxEnd&&(delta=maxEnd-this.end),this.start+delta<0&&(delta=-1*this.start);var eventParams={direction:this._getDragDirection(delta),action:"drag"};this.update({start:this.start+delta,end:this.end+delta},eventParams)}},{key:"_getDragDirection",value:function _getDragDirection(delta){return delta<0?"left":delta>0?"right":null}},{key:"onResize",value:function onResize(delta,direction){var duration=this.wavesurfer.getDuration(),eventParams={action:"resize",direction:"start"===direction?"left":"right"};"start"===direction?(delta>0&&this.end-(this.start+delta)<this.minLength&&(delta=this.end-this.minLength-this.start),delta<0&&this.end-(this.start+delta)>this.maxLength&&(delta=this.end-this.start-this.maxLength),delta<0&&this.start+delta<0&&(delta=-1*this.start),this.update({start:Math.min(this.start+delta,this.end),end:Math.max(this.start+delta,this.end)},eventParams)):(delta<0&&this.end+delta-this.start<this.minLength&&(delta=this.start+this.minLength-this.end),delta>0&&this.end+delta-this.start>this.maxLength&&(delta=this.maxLength-(this.end-this.start)),delta>0&&this.end+delta>duration&&(delta=duration-this.end),this.update({start:Math.min(this.end+delta,this.start),end:Math.max(this.end+delta,this.start)},eventParams))}},{key:"onContentBlur",value:function onContentBlur(event){var oldText=(this.data||{}).text,text=event.target.innerText,data=_objectSpread(_objectSpread({},this.data),{},{text}),eventParams={action:"contentEdited",oldText,text};this.update({data},eventParams)}},{key:"onContentClick",value:function onContentClick(event){event.stopPropagation()}},{key:"onRemove",value:function onRemove(event){event.stopPropagation(),this.remove()}},{key:"updateHandlesResize",value:function updateHandlesResize(resize){var cursorStyle;cursorStyle=resize?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:cursorStyle}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:cursorStyle})}}]),Region}();exports.Region=Region}},__webpack_module_cache__={};var __nested_webpack_exports__=function __nested_webpack_require_50264__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_50264__),module.exports}("./src/plugin/regions/index.js");return __nested_webpack_exports__})()))},"./node_modules/wavesurfer.js/dist/plugin/wavesurfer.timeline.js":module=>{!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(self,(()=>(()=>{"use strict";var __webpack_modules__={"./src/plugin/timeline/index.js":(module,exports)=>{function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var TimelinePlugin=function(){function TimelinePlugin(params,_ws){var _this=this;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TimelinePlugin),_defineProperty(this,"_onScroll",(function(){_this.wrapper&&_this.drawer.wrapper&&(_this.wrapper.scrollLeft=_this.drawer.wrapper.scrollLeft)})),_defineProperty(this,"_onRedraw",(function(){return _this.render()})),_defineProperty(this,"_onReady",(function(){var ws=_this.wavesurfer;_this.drawer=ws.drawer,_this.pixelRatio=ws.drawer.params.pixelRatio,_this.maxCanvasWidth=ws.drawer.maxCanvasWidth||ws.drawer.width,_this.maxCanvasElementWidth=ws.drawer.maxCanvasElementWidth||Math.round(_this.maxCanvasWidth/_this.pixelRatio),ws.drawer.wrapper.addEventListener("scroll",_this._onScroll),ws.on("redraw",_this._onRedraw),ws.on("zoom",_this._onZoom),_this.render()})),_defineProperty(this,"_onWrapperClick",(function(e){e.preventDefault();var relX="offsetX"in e?e.offsetX:e.layerX;_this.fireEvent("click",relX/_this.wrapper.scrollWidth||0)})),this.container="string"==typeof params.container?document.querySelector(params.container):params.container,!this.container)throw new Error("No container for wavesurfer timeline");this.wavesurfer=_ws,this.util=_ws.util,this.params=Object.assign({},{height:20,notchPercentHeight:90,labelPadding:5,unlabeledNotchColor:"#c0c0c0",primaryColor:"#000",secondaryColor:"#c0c0c0",primaryFontColor:"#000",secondaryFontColor:"#000",fontFamily:"Arial",fontSize:10,duration:null,zoomDebounce:!1,formatTimeCallback:this.defaultFormatTimeCallback,timeInterval:this.defaultTimeInterval,primaryLabelInterval:this.defaultPrimaryLabelInterval,secondaryLabelInterval:this.defaultSecondaryLabelInterval,offset:0},params),this.canvases=[],this.wrapper=null,this.drawer=null,this.pixelRatio=null,this.maxCanvasWidth=null,this.maxCanvasElementWidth=null,this._onZoom=this.params.zoomDebounce?this.wavesurfer.util.debounce((function(){return _this.render()}),this.params.zoomDebounce):function(){return _this.render()}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TimelinePlugin,[{key:"init",value:function init(){this.wavesurfer.isReady?this._onReady():this.wavesurfer.once("ready",this._onReady)}},{key:"destroy",value:function destroy(){this.unAll(),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.un("zoom",this._onZoom),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.drawer.wrapper.removeEventListener("scroll",this._onScroll),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.removeEventListener("click",this._onWrapperClick),this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)}},{key:"createWrapper",value:function createWrapper(){var wsParams=this.wavesurfer.params;this.container.innerHTML="",this.wrapper=this.container.appendChild(document.createElement("timeline")),this.util.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:"".concat(this.params.height,"px")}),(wsParams.fillParent||wsParams.scrollParent)&&this.util.style(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.wrapper.addEventListener("click",this._onWrapperClick)}},{key:"render",value:function render(){this.wrapper||this.createWrapper(),this.updateCanvases(),this.updateCanvasesPositioning(),this.renderCanvases()}},{key:"addCanvas",value:function addCanvas(){var canvas=this.wrapper.appendChild(document.createElement("canvas"));this.canvases.push(canvas),this.util.style(canvas,{position:"absolute",zIndex:4})}},{key:"removeCanvas",value:function removeCanvas(){var canvas=this.canvases.pop();canvas.parentElement.removeChild(canvas)}},{key:"updateCanvases",value:function updateCanvases(){for(var totalWidth=Math.round(this.drawer.wrapper.scrollWidth),requiredCanvases=Math.ceil(totalWidth/this.maxCanvasElementWidth);this.canvases.length<requiredCanvases;)this.addCanvas();for(;this.canvases.length>requiredCanvases;)this.removeCanvas()}},{key:"updateCanvasesPositioning",value:function updateCanvasesPositioning(){var _this2=this,canvasesLength=this.canvases.length;this.canvases.forEach((function(canvas,i){var canvasWidth=i===canvasesLength-1?_this2.drawer.wrapper.scrollWidth-_this2.maxCanvasElementWidth*(canvasesLength-1):_this2.maxCanvasElementWidth;canvas.width=canvasWidth*_this2.pixelRatio,canvas.height=(_this2.params.height+1)*_this2.pixelRatio,_this2.util.style(canvas,{width:"".concat(canvasWidth,"px"),height:"".concat(_this2.params.height,"px"),left:"".concat(i*_this2.maxCanvasElementWidth,"px")})}))}},{key:"renderCanvases",value:function renderCanvases(){var _this3=this,duration=this.params.duration||this.wavesurfer.backend.getDuration();if(!(duration<=0)){var i,wsParams=this.wavesurfer.params,fontSize=this.params.fontSize*wsParams.pixelRatio,totalSeconds=parseInt(duration,10)+1,width=wsParams.fillParent&&!wsParams.scrollParent?this.drawer.getWidth():this.drawer.wrapper.scrollWidth*wsParams.pixelRatio,height1=this.params.height*this.pixelRatio,height2=this.params.height*(this.params.notchPercentHeight/100)*this.pixelRatio,pixelsPerSecond=width/duration,formatTime=this.params.formatTimeCallback,intervalFnOrVal=function intervalFnOrVal(option){return"function"==typeof option?option(pixelsPerSecond):option},timeInterval=intervalFnOrVal(this.params.timeInterval),primaryLabelInterval=intervalFnOrVal(this.params.primaryLabelInterval),secondaryLabelInterval=intervalFnOrVal(this.params.secondaryLabelInterval),curPixel=pixelsPerSecond*this.params.offset,curSeconds=0,positioning=[],renderSeconds=this.params.offset<0?totalSeconds-this.params.offset:totalSeconds;for(i=0;i<renderSeconds/timeInterval;i++)positioning.push([i,curSeconds,curPixel]),curSeconds+=timeInterval,curPixel+=pixelsPerSecond*timeInterval;var renderPositions=function renderPositions(cb){positioning.forEach((function(pos){cb(pos[0],pos[1],pos[2])}))};this.setFillStyles(this.params.primaryColor),this.setFonts("".concat(fontSize,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.primaryFontColor),renderPositions((function(i,curSeconds,curPixel){i%primaryLabelInterval==0&&(_this3.fillRect(curPixel,0,1,height1),_this3.fillText(formatTime(curSeconds,pixelsPerSecond),curPixel+_this3.params.labelPadding*_this3.pixelRatio,height1))})),this.setFillStyles(this.params.secondaryColor),this.setFonts("".concat(fontSize,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.secondaryFontColor),renderPositions((function(i,curSeconds,curPixel){i%secondaryLabelInterval==0&&(_this3.fillRect(curPixel,0,1,height1),_this3.fillText(formatTime(curSeconds,pixelsPerSecond),curPixel+_this3.params.labelPadding*_this3.pixelRatio,height1))})),this.setFillStyles(this.params.unlabeledNotchColor),renderPositions((function(i,curSeconds,curPixel){i%secondaryLabelInterval!=0&&i%primaryLabelInterval!=0&&_this3.fillRect(curPixel,0,1,height2)}))}}},{key:"setFillStyles",value:function setFillStyles(fillStyle){this.canvases.forEach((function(canvas){var context=canvas.getContext("2d");context&&(context.fillStyle=fillStyle)}))}},{key:"setFonts",value:function setFonts(font){this.canvases.forEach((function(canvas){var context=canvas.getContext("2d");context&&(context.font=font)}))}},{key:"fillRect",value:function fillRect(x,y,width,height){var _this4=this;this.canvases.forEach((function(canvas,i){var leftOffset=i*_this4.maxCanvasWidth,intersection={x1:Math.max(x,i*_this4.maxCanvasWidth),y1:y,x2:Math.min(x+width,i*_this4.maxCanvasWidth+canvas.width),y2:y+height};if(intersection.x1<intersection.x2){var context=canvas.getContext("2d");context&&context.fillRect(intersection.x1-leftOffset,intersection.y1,intersection.x2-intersection.x1,intersection.y2-intersection.y1)}}))}},{key:"fillText",value:function fillText(text,x,y){var textWidth,xOffset=0;this.canvases.forEach((function(canvas){var context=canvas.getContext("2d");if(context){var canvasWidth=context.canvas.width;if(xOffset>x+textWidth)return;xOffset+canvasWidth>x&&context&&(textWidth=context.measureText(text).width,context.fillText(text,x-xOffset,y)),xOffset+=canvasWidth}}))}},{key:"defaultFormatTimeCallback",value:function defaultFormatTimeCallback(seconds,pxPerSec){if(seconds/60>1){var minutes=parseInt(seconds/60,10);return seconds=(seconds=parseInt(seconds%60,10))<10?"0"+seconds:seconds,"".concat(minutes,":").concat(seconds)}return Math.round(1e3*seconds)/1e3}},{key:"defaultTimeInterval",value:function defaultTimeInterval(pxPerSec){return pxPerSec>=25?1:5*pxPerSec>=25?5:15*pxPerSec>=25?15:60*Math.ceil(.5/pxPerSec)}},{key:"defaultPrimaryLabelInterval",value:function defaultPrimaryLabelInterval(pxPerSec){return pxPerSec>=25?10:5*pxPerSec>=25?6:4}},{key:"defaultSecondaryLabelInterval",value:function defaultSecondaryLabelInterval(pxPerSec){return pxPerSec>=25?5:2}}],[{key:"create",value:function create(params){return{name:"timeline",deferInit:!(!params||!params.deferInit)&&params.deferInit,params,instance:TimelinePlugin}}}]),TimelinePlugin}();exports.default=TimelinePlugin,module.exports=exports.default}},__webpack_module_cache__={};var __nested_webpack_exports__=function __nested_webpack_require_21847__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_21847__),module.exports}("./src/plugin/timeline/index.js");return __nested_webpack_exports__})()))},"./node_modules/wavesurfer.js/dist/wavesurfer.js":module=>{!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(self,(()=>{return __webpack_modules__={"./src/drawer.canvasentry.js":(module,exports,__nested_webpack_require_742__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _style=_interopRequireDefault(__nested_webpack_require_742__("./src/util/style.js")),_getId=_interopRequireDefault(__nested_webpack_require_742__("./src/util/get-id.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}var CanvasEntry=function(){function CanvasEntry(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CanvasEntry),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,_getId.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CanvasEntry,[{key:"initWave",value:function initWave(element){this.wave=element,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function initProgress(element){this.progress=element,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function updateDimensions(elementWidth,totalWidth,width,height){this.start=this.wave.offsetLeft/totalWidth||0,this.end=this.start+elementWidth/totalWidth,this.wave.width=width,this.wave.height=height;var elementSize={width:elementWidth+"px"};(0,_style.default)(this.wave,elementSize),this.hasProgressCanvas&&(this.progress.width=width,this.progress.height=height,(0,_style.default)(this.progress,elementSize))}},{key:"clearWave",value:function clearWave(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function setFillStyles(waveColor,progressColor){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,waveColor),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,progressColor))}},{key:"getFillStyle",value:function getFillStyle(ctx,color){if("string"==typeof color||color instanceof CanvasGradient)return color;var waveGradient=ctx.createLinearGradient(0,0,0,ctx.canvas.height);return color.forEach((function(value,index){return waveGradient.addColorStop(index/color.length,value)})),waveGradient}},{key:"applyCanvasTransforms",value:function applyCanvasTransforms(vertical){vertical&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function fillRects(x,y,width,height,radius){this.fillRectToContext(this.waveCtx,x,y,width,height,radius),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,x,y,width,height,radius)}},{key:"fillRectToContext",value:function fillRectToContext(ctx,x,y,width,height,radius){ctx&&(radius?this.drawRoundedRect(ctx,x,y,width,height,radius):ctx.fillRect(x,y,width,height))}},{key:"drawRoundedRect",value:function drawRoundedRect(ctx,x,y,width,height,radius){0!==height&&(height<0&&(y-=height*=-1),ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath(),ctx.fill())}},{key:"drawLines",value:function drawLines(peaks,absmax,halfH,offsetY,start,end){this.drawLineToContext(this.waveCtx,peaks,absmax,halfH,offsetY,start,end),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,peaks,absmax,halfH,offsetY,start,end)}},{key:"drawLineToContext",value:function drawLineToContext(ctx,peaks,absmax,halfH,offsetY,start,end){if(ctx){var i,peak,h,length=peaks.length/2,first=Math.round(length*this.start),canvasStart=first,canvasEnd=Math.round(length*this.end)+1,scale=this.wave.width/(canvasEnd-canvasStart-1),halfOffset=halfH+offsetY,absmaxHalf=absmax/halfH;for(ctx.beginPath(),ctx.moveTo((canvasStart-first)*scale,halfOffset),ctx.lineTo((canvasStart-first)*scale,halfOffset-Math.round((peaks[2*canvasStart]||0)/absmaxHalf)),i=canvasStart;i<canvasEnd;i++)peak=peaks[2*i]||0,h=Math.round(peak/absmaxHalf),ctx.lineTo((i-first)*scale+this.halfPixel,halfOffset-h);for(var j=canvasEnd-1;j>=canvasStart;j--)peak=peaks[2*j+1]||0,h=Math.round(peak/absmaxHalf),ctx.lineTo((j-first)*scale+this.halfPixel,halfOffset-h);ctx.lineTo((canvasStart-first)*scale,halfOffset-Math.round((peaks[2*canvasStart+1]||0)/absmaxHalf)),ctx.closePath(),ctx.fill()}}},{key:"destroy",value:function destroy(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function getImage(format,quality,type){var _this=this;return"blob"===type?new Promise((function(resolve){_this.wave.toBlob(resolve,format,quality)})):"dataURL"===type?this.wave.toDataURL(format,quality):void 0}}]),CanvasEntry}();exports.default=CanvasEntry,module.exports=exports.default},"./src/drawer.js":(module,exports,__nested_webpack_require_15928__)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var util=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__nested_webpack_require_15928__("./src/util/index.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Drawer=function(_util$Observer){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Drawer,_util$Observer);var _super=_createSuper(Drawer);function Drawer(container,params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Drawer),(_this=_super.call(this)).container=util.withOrientation(container,params.vertical),_this.params=params,_this.width=0,_this.height=params.height*_this.params.pixelRatio,_this.lastPos=0,_this.wrapper=null,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Drawer,[{key:"style",value:function style(el,styles){return util.style(el,styles)}},{key:"createWrapper",value:function createWrapper(){this.wrapper=util.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function handleEvent(e,noPrevent){!noPrevent&&e.preventDefault();var progress,clientX=util.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,bbox=this.wrapper.getBoundingClientRect(),nominalWidth=this.width,parentWidth=this.getWidth(),progressPixels=this.getProgressPixels(bbox,clientX);return progress=!this.params.fillParent&&nominalWidth<parentWidth?progressPixels*(this.params.pixelRatio/nominalWidth)||0:(progressPixels+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,util.clamp(progress,0,1)}},{key:"getProgressPixels",value:function getProgressPixels(wrapperBbox,clientX){return this.params.rtl?wrapperBbox.right-clientX:clientX-wrapperBbox.left}},{key:"setupWrapperEvents",value:function setupWrapperEvents(){var _this2=this;this.wrapper.addEventListener("click",(function(e){var orientedEvent=util.withOrientation(e,_this2.params.vertical),scrollbarHeight=_this2.wrapper.offsetHeight-_this2.wrapper.clientHeight;if(0!==scrollbarHeight){var bbox=_this2.wrapper.getBoundingClientRect();if(orientedEvent.clientY>=bbox.bottom-scrollbarHeight)return}_this2.params.interact&&_this2.fireEvent("click",e,_this2.handleEvent(e))})),this.wrapper.addEventListener("dblclick",(function(e){_this2.params.interact&&_this2.fireEvent("dblclick",e,_this2.handleEvent(e))})),this.wrapper.addEventListener("scroll",(function(e){return _this2.fireEvent("scroll",e)}))}},{key:"drawPeaks",value:function drawPeaks(peaks,length,start,end){this.setWidth(length)||this.clearWave(),this.params.barWidth?this.drawBars(peaks,0,start,end):this.drawWave(peaks,0,start,end)}},{key:"resetScroll",value:function resetScroll(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function recenter(percent){var position=this.wrapper.scrollWidth*percent;this.recenterOnPosition(position,!0)}},{key:"recenterOnPosition",value:function recenterOnPosition(position,immediate){var scrollLeft=this.wrapper.scrollLeft,half=~~(this.wrapper.clientWidth/2),maxScroll=this.wrapper.scrollWidth-this.wrapper.clientWidth,target=position-half,offset=target-scrollLeft;if(0!=maxScroll){if(!immediate&&-half<=offset&&offset<half){var rate=this.params.autoCenterRate;rate/=half,rate*=maxScroll,target=scrollLeft+(offset=Math.max(-rate,Math.min(rate,offset)))}(target=Math.max(0,Math.min(maxScroll,target)))!=scrollLeft&&(this.wrapper.scrollLeft=target)}}},{key:"getScrollX",value:function getScrollX(){var x=0;if(this.wrapper){var pixelRatio=this.params.pixelRatio;if(x=Math.round(this.wrapper.scrollLeft*pixelRatio),this.params.scrollParent){var maxScroll=~~(this.wrapper.scrollWidth*pixelRatio-this.getWidth());x=Math.min(maxScroll,Math.max(0,x))}}return x}},{key:"getWidth",value:function getWidth(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function setWidth(width){if(this.width==width)return!1;if(this.width=width,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var newWidth=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:newWidth})}return this.updateSize(),!0}},{key:"setHeight",value:function setHeight(height){return height!=this.height&&(this.height=height,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function progress(_progress){var minPxDelta=1/this.params.pixelRatio,pos=Math.round(_progress*this.width)*minPxDelta;if(pos<this.lastPos||pos-this.lastPos>=minPxDelta){if(this.lastPos=pos,this.params.scrollParent&&this.params.autoCenter){var newPos=~~(this.wrapper.scrollWidth*_progress);this.recenterOnPosition(newPos,this.params.autoCenterImmediately)}this.updateProgress(pos)}}},{key:"destroy",value:function destroy(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function updateCursor(){}},{key:"updateSize",value:function updateSize(){}},{key:"drawBars",value:function drawBars(peaks,channelIndex,start,end){}},{key:"drawWave",value:function drawWave(peaks,channelIndex,start,end){}},{key:"clearWave",value:function clearWave(){}},{key:"updateProgress",value:function updateProgress(position){}}]),Drawer}(util.Observer);exports.default=Drawer,module.exports=exports.default},"./src/drawer.multicanvas.js":(module,exports,__nested_webpack_require_33763__)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _drawer=_interopRequireDefault(__nested_webpack_require_33763__("./src/drawer.js")),util=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__nested_webpack_require_33763__("./src/util/index.js")),_drawer2=_interopRequireDefault(__nested_webpack_require_33763__("./src/drawer.canvasentry.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var MultiCanvas=function(_Drawer){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(MultiCanvas,_Drawer);var _super=_createSuper(MultiCanvas);function MultiCanvas(container,params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MultiCanvas),(_this=_super.call(this,container,params)).maxCanvasWidth=params.maxCanvasWidth,_this.maxCanvasElementWidth=Math.round(params.maxCanvasWidth/params.pixelRatio),_this.hasProgressCanvas=params.waveColor!=params.progressColor,_this.halfPixel=.5/params.pixelRatio,_this.canvases=[],_this.progressWave=null,_this.EntryClass=_drawer2.default,_this.canvasContextAttributes=params.drawingContextAttributes,_this.overlap=2*Math.ceil(params.pixelRatio/2),_this.barRadius=params.barRadius||0,_this.vertical=params.vertical,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MultiCanvas,[{key:"init",value:function init(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function createElements(){this.progressWave=util.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function updateCursor(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function updateSize(){for(var _this2=this,totalWidth=Math.round(this.width/this.params.pixelRatio),requiredCanvases=Math.ceil(totalWidth/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<requiredCanvases;)this.addCanvas();for(;this.canvases.length>requiredCanvases;)this.removeCanvas();var canvasWidth=this.maxCanvasWidth+this.overlap,lastCanvas=this.canvases.length-1;this.canvases.forEach((function(entry,i){i==lastCanvas&&(canvasWidth=_this2.width-_this2.maxCanvasWidth*lastCanvas),_this2.updateDimensions(entry,canvasWidth,_this2.height),entry.clearWave()}))}},{key:"addCanvas",value:function addCanvas(){var entry=new this.EntryClass;entry.canvasContextAttributes=this.canvasContextAttributes,entry.hasProgressCanvas=this.hasProgressCanvas,entry.halfPixel=this.halfPixel;var leftOffset=this.maxCanvasElementWidth*this.canvases.length,wave=util.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(wave,{position:"absolute",zIndex:2,left:leftOffset+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),entry.initWave(wave),this.hasProgressCanvas){var progress=util.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(progress,{position:"absolute",left:leftOffset+"px",top:0,bottom:0,height:"100%"}),entry.initProgress(progress)}this.canvases.push(entry)}},{key:"removeCanvas",value:function removeCanvas(){var lastEntry=this.canvases[this.canvases.length-1];lastEntry.wave.parentElement.removeChild(lastEntry.wave.domElement),this.hasProgressCanvas&&lastEntry.progress.parentElement.removeChild(lastEntry.progress.domElement),lastEntry&&(lastEntry.destroy(),lastEntry=null),this.canvases.pop()}},{key:"updateDimensions",value:function updateDimensions(entry,width,height){var elementWidth=Math.round(width/this.params.pixelRatio),totalWidth=Math.round(this.width/this.params.pixelRatio);entry.updateDimensions(elementWidth,totalWidth,width,height),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function clearWave(){var _this3=this;util.frame((function(){_this3.canvases.forEach((function(entry){return entry.clearWave()}))}))()}},{key:"drawBars",value:function drawBars(peaks,channelIndex,start,end){var _this4=this;return this.prepareDraw(peaks,channelIndex,start,end,(function(_ref){var absmax=_ref.absmax,hasMinVals=_ref.hasMinVals,offsetY=(_ref.height,_ref.offsetY),halfH=_ref.halfH,peaks=_ref.peaks,ch=_ref.channelIndex;if(void 0!==start)for(var peakIndexScale=hasMinVals?2:1,length=peaks.length/peakIndexScale,bar=_this4.params.barWidth*_this4.params.pixelRatio,step=bar+(null===_this4.params.barGap?Math.max(_this4.params.pixelRatio,~~(bar/2)):Math.max(_this4.params.pixelRatio,_this4.params.barGap*_this4.params.pixelRatio)),scale=length/_this4.width,last=end,peakIndex=start;peakIndex<last;peakIndex+=step){var peak=0,peakIndexRange=Math.floor(peakIndex*scale)*peakIndexScale,peakIndexEnd=Math.floor((peakIndex+step)*scale)*peakIndexScale;do{var newPeak=Math.abs(peaks[peakIndexRange]);newPeak>peak&&(peak=newPeak),peakIndexRange+=peakIndexScale}while(peakIndexRange<peakIndexEnd);var h=Math.round(peak/absmax*halfH);_this4.params.barMinHeight&&(h=Math.max(h,_this4.params.barMinHeight)),_this4.fillRect(peakIndex+_this4.halfPixel,halfH-h+offsetY,bar+_this4.halfPixel,2*h,_this4.barRadius,ch)}}))}},{key:"drawWave",value:function drawWave(peaks,channelIndex,start,end){var _this5=this;return this.prepareDraw(peaks,channelIndex,start,end,(function(_ref2){var absmax=_ref2.absmax,hasMinVals=_ref2.hasMinVals,offsetY=(_ref2.height,_ref2.offsetY),halfH=_ref2.halfH,peaks=_ref2.peaks,channelIndex=_ref2.channelIndex;if(!hasMinVals){for(var reflectedPeaks=[],len=peaks.length,i=0;i<len;i++)reflectedPeaks[2*i]=peaks[i],reflectedPeaks[2*i+1]=-peaks[i];peaks=reflectedPeaks}void 0!==start&&_this5.drawLine(peaks,absmax,halfH,offsetY,start,end,channelIndex),_this5.fillRect(0,halfH+offsetY-_this5.halfPixel,_this5.width,_this5.halfPixel,_this5.barRadius,channelIndex)}))}},{key:"drawLine",value:function drawLine(peaks,absmax,halfH,offsetY,start,end,channelIndex){var _this6=this,_ref3=this.params.splitChannelsOptions.channelColors[channelIndex]||{},waveColor=_ref3.waveColor,progressColor=_ref3.progressColor;this.canvases.forEach((function(entry,i){_this6.setFillStyles(entry,waveColor,progressColor),_this6.applyCanvasTransforms(entry,_this6.params.vertical),entry.drawLines(peaks,absmax,halfH,offsetY,start,end)}))}},{key:"fillRect",value:function fillRect(x,y,width,height,radius,channelIndex){for(var startCanvas=Math.floor(x/this.maxCanvasWidth),endCanvas=Math.min(Math.ceil((x+width)/this.maxCanvasWidth)+1,this.canvases.length),i=startCanvas;i<endCanvas;i++){var entry=this.canvases[i],leftOffset=i*this.maxCanvasWidth,intersection={x1:Math.max(x,i*this.maxCanvasWidth),y1:y,x2:Math.min(x+width,i*this.maxCanvasWidth+entry.wave.width),y2:y+height};if(intersection.x1<intersection.x2){var _ref4=this.params.splitChannelsOptions.channelColors[channelIndex]||{},waveColor=_ref4.waveColor,progressColor=_ref4.progressColor;this.setFillStyles(entry,waveColor,progressColor),this.applyCanvasTransforms(entry,this.params.vertical),entry.fillRects(intersection.x1-leftOffset,intersection.y1,intersection.x2-intersection.x1,intersection.y2-intersection.y1,radius)}}}},{key:"hideChannel",value:function hideChannel(channelIndex){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(channelIndex)}},{key:"prepareDraw",value:function prepareDraw(peaks,channelIndex,start,end,fn,drawIndex,normalizedMax){var _this7=this;return util.frame((function(){if(peaks[0]instanceof Array){var channels=peaks;if(_this7.params.splitChannels){var overallAbsMax,filteredChannels=channels.filter((function(c,i){return!_this7.hideChannel(i)}));return _this7.params.splitChannelsOptions.overlay||_this7.setHeight(Math.max(filteredChannels.length,1)*_this7.params.height*_this7.params.pixelRatio),_this7.params.splitChannelsOptions&&_this7.params.splitChannelsOptions.relativeNormalization&&(overallAbsMax=util.max(channels.map((function(channelPeaks){return util.absMax(channelPeaks)})))),channels.forEach((function(channelPeaks,i){return _this7.prepareDraw(channelPeaks,i,start,end,fn,filteredChannels.indexOf(channelPeaks),overallAbsMax)}))}peaks=channels[0]}if(!_this7.hideChannel(channelIndex)){var absmax=1/_this7.params.barHeight;_this7.params.normalize&&(absmax=void 0===normalizedMax?util.absMax(peaks):normalizedMax);var hasMinVals=[].some.call(peaks,(function(val){return val<0})),height=_this7.params.height*_this7.params.pixelRatio,halfH=height/2,offsetY=height*drawIndex||0;return _this7.params.splitChannelsOptions&&_this7.params.splitChannelsOptions.overlay&&(offsetY=0),fn({absmax,hasMinVals,height,offsetY,halfH,peaks,channelIndex})}}))()}},{key:"setFillStyles",value:function setFillStyles(entry){var waveColor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,progressColor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;entry.setFillStyles(waveColor,progressColor)}},{key:"applyCanvasTransforms",value:function applyCanvasTransforms(entry){var vertical=arguments.length>1&&void 0!==arguments[1]&&arguments[1];entry.applyCanvasTransforms(vertical)}},{key:"getImage",value:function getImage(format,quality,type){if("blob"===type)return Promise.all(this.canvases.map((function(entry){return entry.getImage(format,quality,type)})));if("dataURL"===type){var images=this.canvases.map((function(entry){return entry.getImage(format,quality,type)}));return images.length>1?images:images[0]}}},{key:"updateProgress",value:function updateProgress(position){this.style(this.progressWave,{width:position+"px"})}}]),MultiCanvas}(_drawer.default);exports.default=MultiCanvas,module.exports=exports.default},"./src/mediaelement-webaudio.js":(module,exports,__nested_webpack_require_60531__)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var MediaElementWebAudio=function(_MediaElement){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(MediaElementWebAudio,_MediaElement);var _super=_createSuper(MediaElementWebAudio);function MediaElementWebAudio(params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MediaElementWebAudio),(_this=_super.call(this,params)).params=params,_this.sourceMediaElement=null,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MediaElementWebAudio,[{key:"init",value:function init(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function _load(media,peaks,preload){_get(_getPrototypeOf(MediaElementWebAudio.prototype),"_load",this).call(this,media,peaks,preload),this.createMediaElementSource(media)}},{key:"createMediaElementSource",value:function createMediaElementSource(mediaElement){this.sourceMediaElement=this.ac.createMediaElementSource(mediaElement),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function play(start,end){return this.resumeAudioContext(),_get(_getPrototypeOf(MediaElementWebAudio.prototype),"play",this).call(this,start,end)}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(MediaElementWebAudio.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),MediaElementWebAudio}(function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__nested_webpack_require_60531__("./src/mediaelement.js")).default);exports.default=MediaElementWebAudio,module.exports=exports.default},"./src/mediaelement.js":(module,exports,__nested_webpack_require_68288__)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _webaudio=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__nested_webpack_require_68288__("./src/webaudio.js")),util=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__nested_webpack_require_68288__("./src/util/index.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var MediaElement=function(_WebAudio){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(MediaElement,_WebAudio);var _super=_createSuper(MediaElement);function MediaElement(params){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MediaElement),(_this=_super.call(this,params)).params=params,_this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function play(){},pause:function pause(){},volume:0},_this.mediaType=params.mediaType.toLowerCase(),_this.elementPosition=params.elementPosition,_this.peaks=null,_this.playbackRate=1,_this.volume=1,_this.isMuted=!1,_this.buffer=null,_this.onPlayEnd=null,_this.mediaListeners={},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MediaElement,[{key:"init",value:function init(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function _setupMediaListeners(){var _this2=this;this.mediaListeners.error=function(){_this2.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){_this2.fireEvent("waiting")},this.mediaListeners.canplay=function(){_this2.fireEvent("canplay")},this.mediaListeners.ended=function(){_this2.fireEvent("finish")},this.mediaListeners.play=function(){_this2.fireEvent("play")},this.mediaListeners.pause=function(){_this2.fireEvent("pause")},this.mediaListeners.seeked=function(event){_this2.fireEvent("seek")},this.mediaListeners.volumechange=function(event){_this2.isMuted=_this2.media.muted,_this2.isMuted?_this2.volume=0:_this2.volume=_this2.media.volume,_this2.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(id){_this2.media.removeEventListener(id,_this2.mediaListeners[id]),_this2.media.addEventListener(id,_this2.mediaListeners[id])}))}},{key:"createTimer",value:function createTimer(){var _this3=this;this.on("play",(function onAudioProcess(){_this3.isPaused()||(_this3.fireEvent("audioprocess",_this3.getCurrentTime()),util.frame(onAudioProcess)())})),this.on("pause",(function(){_this3.fireEvent("audioprocess",_this3.getCurrentTime())}))}},{key:"load",value:function load(url,container,peaks,preload){var media=document.createElement(this.mediaType);media.controls=this.params.mediaControls,media.autoplay=this.params.autoplay||!1,media.preload=null==preload?"auto":preload,media.src=url,media.style.width="100%";var prevMedia=container.querySelector(this.mediaType);prevMedia&&container.removeChild(prevMedia),container.appendChild(media),this._load(media,peaks,preload)}},{key:"loadElt",value:function loadElt(elt,peaks){elt.controls=this.params.mediaControls,elt.autoplay=this.params.autoplay||!1,this._load(elt,peaks,elt.preload)}},{key:"_load",value:function _load(media,peaks,preload){if(!(media instanceof HTMLMediaElement)||void 0===media.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof media.load||peaks&&"none"==preload||media.load(),this.media=media,this._setupMediaListeners(),this.peaks=peaks,this.onPlayEnd=null,this.buffer=null,this.isMuted=media.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function isPaused(){return!this.media||this.media.paused}},{key:"getDuration",value:function getDuration(){if(this.explicitDuration)return this.explicitDuration;var duration=(this.buffer||this.media).duration;return duration>=1/0&&(duration=this.media.seekable.end(0)),duration}},{key:"getCurrentTime",value:function getCurrentTime(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function getPlayedPercents(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function setPlaybackRate(value){this.playbackRate=value||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function seekTo(start){null==start||isNaN(start)||(this.media.currentTime=start),this.clearPlayEnd()}},{key:"play",value:function play(start,end){this.seekTo(start);var promise=this.media.play();return end&&this.setPlayEnd(end),promise}},{key:"pause",value:function pause(){var promise;return this.media&&(promise=this.media.pause()),this.clearPlayEnd(),promise}},{key:"setPlayEnd",value:function setPlayEnd(end){var _this4=this;this.clearPlayEnd(),this._onPlayEnd=function(time){time>=end&&(_this4.pause(),_this4.seekTo(end))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function clearPlayEnd(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function getPeaks(length,first,last){return this.buffer?_get(_getPrototypeOf(MediaElement.prototype),"getPeaks",this).call(this,length,first,last):this.peaks||[]}},{key:"setSinkId",value:function setSinkId(deviceId){return deviceId?this.media.setSinkId?this.media.setSinkId(deviceId):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+deviceId))}},{key:"getVolume",value:function getVolume(){return this.volume}},{key:"setVolume",value:function setVolume(value){this.volume=value,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function setMute(muted){this.isMuted=this.media.muted=muted}},{key:"destroy",value:function destroy(){var _this5=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(id){_this5.media&&_this5.media.removeEventListener(id,_this5.mediaListeners[id])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),MediaElement}(_webaudio.default);exports.default=MediaElement,module.exports=exports.default},"./src/peakcache.js":(module,exports)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var PeakCache=function(){function PeakCache(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PeakCache),this.clearPeakCache()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PeakCache,[{key:"clearPeakCache",value:function clearPeakCache(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function addRangeToPeakCache(length,start,end){length!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=length);for(var uncachedRanges=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<start;)i++;for(i%2==0&&uncachedRanges.push(start);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=end;)uncachedRanges.push(this.peakCacheRanges[i]),i++;i%2==0&&uncachedRanges.push(end),uncachedRanges=uncachedRanges.filter((function(item,pos,arr){return 0==pos?item!=arr[pos+1]:pos==arr.length-1?item!=arr[pos-1]:item!=arr[pos-1]&&item!=arr[pos+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(uncachedRanges),this.peakCacheRanges=this.peakCacheRanges.sort((function(a,b){return a-b})).filter((function(item,pos,arr){return 0==pos?item!=arr[pos+1]:pos==arr.length-1?item!=arr[pos-1]:item!=arr[pos-1]&&item!=arr[pos+1]}));var uncachedRangePairs=[];for(i=0;i<uncachedRanges.length;i+=2)uncachedRangePairs.push([uncachedRanges[i],uncachedRanges[i+1]]);return uncachedRangePairs}},{key:"getCacheRanges",value:function getCacheRanges(){var i,peakCacheRangePairs=[];for(i=0;i<this.peakCacheRanges.length;i+=2)peakCacheRangePairs.push([this.peakCacheRanges[i],this.peakCacheRanges[i+1]]);return peakCacheRangePairs}}]),PeakCache}();exports.default=PeakCache,module.exports=exports.default},"./src/util/absMax.js":(module,exports,__nested_webpack_require_93879__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function absMax(values){var max=(0,_max.default)(values),min=(0,_min.default)(values);return-min>max?-min:max};var _max=_interopRequireDefault(__nested_webpack_require_93879__("./src/util/max.js")),_min=_interopRequireDefault(__nested_webpack_require_93879__("./src/util/min.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports.default},"./src/util/clamp.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function clamp(val,min,max){return Math.min(Math.max(min,val),max)},module.exports=exports.default},"./src/util/fetch.js":(module,exports,__nested_webpack_require_95556__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function fetchFile(options){if(!options)throw new Error("fetch options missing");if(!options.url)throw new Error("fetch url missing");var instance=new _observer.default,fetchHeaders=new Headers,fetchRequest=new Request(options.url);instance.controller=new AbortController,options&&options.requestHeaders&&options.requestHeaders.forEach((function(header){fetchHeaders.append(header.key,header.value)}));var responseType=options.responseType||"json",fetchOptions={method:options.method||"GET",headers:fetchHeaders,mode:options.mode||"cors",credentials:options.credentials||"same-origin",cache:options.cache||"default",redirect:options.redirect||"follow",referrer:options.referrer||"client",signal:instance.controller.signal};return fetch(fetchRequest,fetchOptions).then((function(response){instance.response=response;var progressAvailable=!0;response.body||(progressAvailable=!1);var contentLength=response.headers.get("content-length");return null===contentLength&&(progressAvailable=!1),progressAvailable?(instance.onProgress=function(e){instance.fireEvent("progress",e)},new Response(new ReadableStream(new ProgressHandler(instance,contentLength,response)),fetchOptions)):response})).then((function(response){var errMsg;if(response.ok)switch(responseType){case"arraybuffer":return response.arrayBuffer();case"json":return response.json();case"blob":return response.blob();case"text":return response.text();default:errMsg="Unknown responseType: "+responseType}throw errMsg||(errMsg="HTTP error status: "+response.status),new Error(errMsg)})).then((function(response){instance.fireEvent("success",response)})).catch((function(error){instance.fireEvent("error",error)})),instance.fetchRequest=fetchRequest,instance};var _observer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__nested_webpack_require_95556__("./src/util/observer.js"));function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}var ProgressHandler=function(){function ProgressHandler(instance,contentLength,response){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ProgressHandler),this.instance=instance,this.instance._reader=response.body.getReader(),this.total=parseInt(contentLength,10),this.loaded=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ProgressHandler,[{key:"start",value:function start(controller){var _this=this;!function read(){_this.instance._reader.read().then((function(_ref){var done=_ref.done,value=_ref.value;if(done)return 0===_this.total&&_this.instance.onProgress.call(_this.instance,{loaded:_this.loaded,total:_this.total,lengthComputable:!1}),void controller.close();_this.loaded+=value.byteLength,_this.instance.onProgress.call(_this.instance,{loaded:_this.loaded,total:_this.total,lengthComputable:!(0===_this.total)}),controller.enqueue(value),read()})).catch((function(error){controller.error(error)}))}()}}]),ProgressHandler}();module.exports=exports.default},"./src/util/frame.js":(module,exports,__nested_webpack_require_103995__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function frame(func){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(0,_requestAnimationFrame.default)((function(){return func.apply(void 0,args)}))}};var _requestAnimationFrame=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__nested_webpack_require_103995__("./src/util/request-animation-frame.js"));module.exports=exports.default},"./src/util/get-id.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function getId(prefix){return void 0===prefix&&(prefix="wavesurfer_"),prefix+Math.random().toString(32).substring(2)},module.exports=exports.default},"./src/util/index.js":(__unused_webpack_module,exports,__nested_webpack_require_105875__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Observer",{enumerable:!0,get:function get(){return _observer.default}}),Object.defineProperty(exports,"absMax",{enumerable:!0,get:function get(){return _absMax.default}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function get(){return _clamp.default}}),Object.defineProperty(exports,"debounce",{enumerable:!0,get:function get(){return _debounce.default}}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function get(){return _fetch.default}}),Object.defineProperty(exports,"frame",{enumerable:!0,get:function get(){return _frame.default}}),Object.defineProperty(exports,"getId",{enumerable:!0,get:function get(){return _getId.default}}),Object.defineProperty(exports,"ignoreSilenceMode",{enumerable:!0,get:function get(){return _silenceMode.default}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function get(){return _max.default}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function get(){return _min.default}}),Object.defineProperty(exports,"preventClick",{enumerable:!0,get:function get(){return _preventClick.default}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function get(){return _requestAnimationFrame.default}}),Object.defineProperty(exports,"style",{enumerable:!0,get:function get(){return _style.default}}),Object.defineProperty(exports,"withOrientation",{enumerable:!0,get:function get(){return _orientation.default}});var _getId=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/get-id.js")),_max=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/max.js")),_min=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/min.js")),_absMax=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/absMax.js")),_observer=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/observer.js")),_style=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/style.js")),_requestAnimationFrame=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/request-animation-frame.js")),_frame=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/frame.js")),_debounce=_interopRequireDefault(__nested_webpack_require_105875__("./node_modules/debounce/index.js")),_preventClick=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/prevent-click.js")),_fetch=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/fetch.js")),_clamp=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/clamp.js")),_orientation=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/orientation.js")),_silenceMode=_interopRequireDefault(__nested_webpack_require_105875__("./src/util/silence-mode.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},"./src/util/max.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function max(values){var largest=-1/0;return Object.keys(values).forEach((function(i){values[i]>largest&&(largest=values[i])})),largest},module.exports=exports.default},"./src/util/min.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function min(values){var smallest=Number(1/0);return Object.keys(values).forEach((function(i){values[i]<smallest&&(smallest=values[i])})),smallest},module.exports=exports.default},"./src/util/observer.js":(module,exports)=>{"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Observer=function(){function Observer(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Observer),this._disabledEventEmissions=[],this.handlers=null}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Observer,[{key:"on",value:function on(event,fn){var _this=this;this.handlers||(this.handlers={});var handlers=this.handlers[event];return handlers||(handlers=this.handlers[event]=[]),handlers.push(fn),{name:event,callback:fn,un:function un(e,fn){return _this.un(e,fn)}}}},{key:"un",value:function un(event,fn){if(this.handlers){var i,handlers=this.handlers[event];if(handlers)if(fn)for(i=handlers.length-1;i>=0;i--)handlers[i]==fn&&handlers.splice(i,1);else handlers.length=0}}},{key:"unAll",value:function unAll(){this.handlers=null}},{key:"once",value:function once(event,handler){var _this2=this;return this.on(event,(function fn(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler.apply(_this2,args),setTimeout((function(){_this2.un(event,fn)}),0)}))}},{key:"setDisabledEventEmissions",value:function setDisabledEventEmissions(eventNames){this._disabledEventEmissions=eventNames}},{key:"_isDisabledEventEmission",value:function _isDisabledEventEmission(event){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(event)}},{key:"fireEvent",value:function fireEvent(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];if(this.handlers&&!this._isDisabledEventEmission(event)){var handlers=this.handlers[event];handlers&&handlers.forEach((function(fn){fn.apply(void 0,args)}))}}}]),Observer}();exports.default=Observer,module.exports=exports.default},"./src/util/orientation.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function withOrientation(target,vertical){return target[isProxy]?target:new Proxy(target,{get:function get(obj,prop,receiver){if(prop===isProxy)return!0;if("domElement"===prop)return obj;if("style"===prop)return withOrientation(obj.style,vertical);if("canvas"===prop)return withOrientation(obj.canvas,vertical);if("getBoundingClientRect"===prop)return function(){return withOrientation(obj.getBoundingClientRect.apply(obj,arguments),vertical)};if("getContext"===prop)return function(){return withOrientation(obj.getContext.apply(obj,arguments),vertical)};var value=obj[mapProp(prop,vertical)];return"function"==typeof value?value.bind(obj):value},set:function set(obj,prop,value){return obj[mapProp(prop,vertical)]=value,!0}})};var verticalPropMap={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function mapProp(prop,vertical){return Object.prototype.hasOwnProperty.call(verticalPropMap,prop)&&vertical?verticalPropMap[prop]:prop}var isProxy=Symbol("isProxy");module.exports=exports.default},"./src/util/prevent-click.js":(module,exports)=>{"use strict";function preventClickHandler(event){event.stopPropagation(),document.body.removeEventListener("click",preventClickHandler,!0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function preventClick(values){document.body.addEventListener("click",preventClickHandler,!0)},module.exports=exports.default},"./src/util/request-animation-frame.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){return setTimeout(callback,1e3/60)}).bind(window);exports.default=_default,module.exports=exports.default},"./src/util/silence-mode.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function ignoreSilenceMode(){var silentAC=new AudioContext,silentBS=silentAC.createBufferSource();silentBS.buffer=silentAC.createBuffer(1,1,44100),silentBS.connect(silentAC.destination),silentBS.start();var tmp=document.createElement("div");tmp.innerHTML='<audio x-webkit-airplay="deny"></audio>';var audioSilentMode=tmp.children.item(0);audioSilentMode.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",audioSilentMode.preload="auto",audioSilentMode.type="audio/mpeg",audioSilentMode.disableRemotePlayback=!0,audioSilentMode.play(),audioSilentMode.remove(),tmp.remove()},module.exports=exports.default},"./src/util/style.js":(module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function style(el,styles){return Object.keys(styles).forEach((function(prop){el.style[prop]!==styles[prop]&&(el.style[prop]=styles[prop])})),el},module.exports=exports.default},"./src/wavesurfer.js":(module,exports,__nested_webpack_require_126018__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var util=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__nested_webpack_require_126018__("./src/util/index.js")),_drawer=_interopRequireDefault(__nested_webpack_require_126018__("./src/drawer.multicanvas.js")),_webaudio=_interopRequireDefault(__nested_webpack_require_126018__("./src/webaudio.js")),_mediaelement=_interopRequireDefault(__nested_webpack_require_126018__("./src/mediaelement.js")),_peakcache=_interopRequireDefault(__nested_webpack_require_126018__("./src/peakcache.js")),_mediaelementWebaudio=_interopRequireDefault(__nested_webpack_require_126018__("./src/mediaelement-webaudio.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}var WaveSurfer=function(_util$Observer){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(WaveSurfer,_util$Observer);var _super=_createSuper(WaveSurfer);function WaveSurfer(params){var _this;if(_classCallCheck(this,WaveSurfer),_defineProperty(_assertThisInitialized(_this=_super.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:_drawer.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),_defineProperty(_assertThisInitialized(_this),"backends",{MediaElement:_mediaelement.default,WebAudio:_webaudio.default,MediaElementWebAudio:_mediaelementWebaudio.default}),_defineProperty(_assertThisInitialized(_this),"util",util),_this.params=Object.assign({},_this.defaultParams,params),_this.params.splitChannelsOptions=Object.assign({},_this.defaultParams.splitChannelsOptions,params.splitChannelsOptions),_this.container="string"==typeof params.container?document.querySelector(_this.params.container):_this.params.container,!_this.container)throw new Error("Container element not found");if(null==_this.params.mediaContainer?_this.mediaContainer=_this.container:"string"==typeof _this.params.mediaContainer?_this.mediaContainer=document.querySelector(_this.params.mediaContainer):_this.mediaContainer=_this.params.mediaContainer,!_this.mediaContainer)throw new Error("Media Container element not found");if(_this.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(_this.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===_this.params.rtl&&(!0===_this.params.vertical?util.style(_this.container,{transform:"rotateX(180deg)"}):util.style(_this.container,{transform:"rotateY(180deg)"})),_this.params.backgroundColor&&_this.setBackgroundColor(_this.params.backgroundColor),_this.savedVolume=0,_this.isMuted=!1,_this.tmpEvents=[],_this.currentRequest=null,_this.arraybuffer=null,_this.drawer=null,_this.backend=null,_this.peakCache=null,"function"!=typeof _this.params.renderer)throw new Error("Renderer parameter is invalid");_this.Drawer=_this.params.renderer,"AudioElement"==_this.params.backend&&(_this.params.backend="MediaElement"),"WebAudio"!=_this.params.backend&&"MediaElementWebAudio"!==_this.params.backend||_webaudio.default.prototype.supportsWebAudio.call(null)||(_this.params.backend="MediaElement"),_this.Backend=_this.backends[_this.params.backend],_this.initialisedPluginList={},_this.isDestroyed=!1,_this.isReady=!1;var prevWidth=0;return _this._onResize=util.debounce((function(){_this.drawer.wrapper&&prevWidth!=_this.drawer.wrapper.clientWidth&&!_this.params.scrollParent&&(prevWidth=_this.drawer.wrapper.clientWidth)&&_this.drawer.fireEvent("redraw")}),"number"==typeof _this.params.responsive?_this.params.responsive:100),_possibleConstructorReturn(_this,_assertThisInitialized(_this))}return _createClass(WaveSurfer,[{key:"init",value:function init(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function registerPlugins(plugins){var _this2=this;return plugins.forEach((function(plugin){return _this2.addPlugin(plugin)})),plugins.forEach((function(plugin){plugin.deferInit||_this2.initPlugin(plugin.name)})),this.fireEvent("plugins-registered",plugins),this}},{key:"getActivePlugins",value:function getActivePlugins(){return this.initialisedPluginList}},{key:"addPlugin",value:function addPlugin(plugin){var _this3=this;if(!plugin.name)throw new Error("Plugin does not have a name!");if(!plugin.instance)throw new Error("Plugin ".concat(plugin.name," does not have an instance property!"));plugin.staticProps&&Object.keys(plugin.staticProps).forEach((function(pluginStaticProp){_this3[pluginStaticProp]=plugin.staticProps[pluginStaticProp]}));var Instance=plugin.instance;return Object.getOwnPropertyNames(util.Observer.prototype).forEach((function(key){Instance.prototype[key]=util.Observer.prototype[key]})),this[plugin.name]=new Instance(plugin.params||{},this),this.fireEvent("plugin-added",plugin.name),this}},{key:"initPlugin",value:function initPlugin(name){if(!this[name])throw new Error("Plugin ".concat(name," has not been added yet!"));return this.initialisedPluginList[name]&&this.destroyPlugin(name),this[name].init(),this.initialisedPluginList[name]=!0,this.fireEvent("plugin-initialised",name),this}},{key:"destroyPlugin",value:function destroyPlugin(name){if(!this[name])throw new Error("Plugin ".concat(name," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[name])throw new Error("Plugin ".concat(name," is not active and cannot be destroyed!"));if("function"!=typeof this[name].destroy)throw new Error("Plugin ".concat(name," does not have a destroy function!"));return this[name].destroy(),delete this.initialisedPluginList[name],this.fireEvent("plugin-destroyed",name),this}},{key:"destroyAllPlugins",value:function destroyAllPlugins(){var _this4=this;Object.keys(this.initialisedPluginList).forEach((function(name){return _this4.destroyPlugin(name)}))}},{key:"createDrawer",value:function createDrawer(){var _this5=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){_this5.drawBuffer(),_this5.drawer.progress(_this5.backend.getPlayedPercents())})),this.drawer.on("click",(function(e,progress){setTimeout((function(){return _this5.seekTo(progress)}),0)})),this.drawer.on("scroll",(function(e){_this5.params.partialRender&&_this5.drawBuffer(),_this5.fireEvent("scroll",e)})),this.drawer.on("dblclick",(function(e,progress){_this5.fireEvent("dblclick",e,progress)}))}},{key:"createBackend",value:function createBackend(){var _this6=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){_this6.drawer.progress(_this6.backend.getPlayedPercents()),_this6.fireEvent("finish")})),this.backend.on("play",(function(){return _this6.fireEvent("play")})),this.backend.on("pause",(function(){return _this6.fireEvent("pause")})),this.backend.on("audioprocess",(function(time){_this6.drawer.progress(_this6.backend.getPlayedPercents()),_this6.fireEvent("audioprocess",time)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){_this6.drawer.progress(_this6.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var newVolume=_this6.getVolume();_this6.fireEvent("volume",newVolume),_this6.backend.isMuted!==_this6.isMuted&&(_this6.isMuted=_this6.backend.isMuted,_this6.fireEvent("mute",_this6.isMuted))})))}},{key:"createPeakCache",value:function createPeakCache(){this.params.partialRender&&(this.peakCache=new _peakcache.default)}},{key:"getDuration",value:function getDuration(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function getCurrentTime(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function setCurrentTime(seconds){seconds>=this.getDuration()?this.seekTo(1):this.seekTo(seconds/this.getDuration())}},{key:"play",value:function play(start,end){var _this7=this;return this.params.ignoreSilenceMode&&util.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return _this7.play(start,end)})),this.backend.play(start,end)}},{key:"setPlayEnd",value:function setPlayEnd(position){this.backend.setPlayEnd(position)}},{key:"pause",value:function pause(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function playPause(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function isPlaying(){return!this.backend.isPaused()}},{key:"skipBackward",value:function skipBackward(seconds){this.skip(-seconds||-this.params.skipLength)}},{key:"skipForward",value:function skipForward(seconds){this.skip(seconds||this.params.skipLength)}},{key:"skip",value:function skip(offset){var duration=this.getDuration()||1,position=this.getCurrentTime()||0;position=Math.max(0,Math.min(duration,position+(offset||0))),this.seekAndCenter(position/duration)}},{key:"seekAndCenter",value:function seekAndCenter(progress){this.seekTo(progress),this.drawer.recenter(progress)}},{key:"seekTo",value:function seekTo(progress){var _this8=this;if("number"!=typeof progress||!isFinite(progress)||progress<0||progress>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return _this8.seekTo(progress)}));var isWebAudioBackend="WebAudio"===this.params.backend,paused=this.backend.isPaused();isWebAudioBackend&&!paused&&this.backend.pause();var oldScrollParent=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(progress*this.getDuration()),this.drawer.progress(progress),isWebAudioBackend&&!paused&&this.backend.play(),this.params.scrollParent=oldScrollParent,this.fireEvent("seek",progress)}},{key:"stop",value:function stop(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function setSinkId(deviceId){return this.backend.setSinkId(deviceId)}},{key:"setVolume",value:function setVolume(newVolume){!0!==this.isMuted?(this.backend.setVolume(newVolume),this.fireEvent("volume",newVolume)):this.savedVolume=newVolume}},{key:"getVolume",value:function getVolume(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function setPlaybackRate(rate){this.backend.setPlaybackRate(rate)}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function toggleMute(){this.setMute(!this.isMuted)}},{key:"setMute",value:function setMute(mute){mute!==this.isMuted?(this.backend.setMute?(this.backend.setMute(mute),this.isMuted=mute):mute?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function getMute(){return this.isMuted}},{key:"getFilters",value:function getFilters(){return this.backend.filters||[]}},{key:"toggleScroll",value:function toggleScroll(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function toggleInteraction(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function getWaveColor(){var channelIdx=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[channelIdx]?this.params.splitChannelsOptions.channelColors[channelIdx].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function setWaveColor(color){var channelIdx=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[channelIdx]?this.params.splitChannelsOptions.channelColors[channelIdx].waveColor=color:this.params.waveColor=color,this.drawBuffer()}},{key:"getProgressColor",value:function getProgressColor(){var channelIdx=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[channelIdx]?this.params.splitChannelsOptions.channelColors[channelIdx].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function setProgressColor(color,channelIdx){this.params.splitChannelsOptions.channelColors[channelIdx]?this.params.splitChannelsOptions.channelColors[channelIdx].progressColor=color:this.params.progressColor=color,this.drawBuffer()}},{key:"getBackgroundColor",value:function getBackgroundColor(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function setBackgroundColor(color){this.params.backgroundColor=color,util.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function getCursorColor(){return this.params.cursorColor}},{key:"setCursorColor",value:function setCursorColor(color){this.params.cursorColor=color,this.drawer.updateCursor()}},{key:"getHeight",value:function getHeight(){return this.params.height}},{key:"setHeight",value:function setHeight(height){this.params.height=height,this.drawer.setHeight(height*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function setFilteredChannels(channelIndices){this.params.splitChannelsOptions.filterChannels=channelIndices,this.drawBuffer()}},{key:"drawBuffer",value:function drawBuffer(){var peaks,nominalWidth=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),parentWidth=this.drawer.getWidth(),width=nominalWidth,start=0,end=Math.max(start+parentWidth,width);if(this.params.fillParent&&(!this.params.scrollParent||nominalWidth<parentWidth)&&(start=0,end=width=parentWidth),this.params.partialRender){var i,newRanges=this.peakCache.addRangeToPeakCache(width,start,end);for(i=0;i<newRanges.length;i++)peaks=this.backend.getPeaks(width,newRanges[i][0],newRanges[i][1]),this.drawer.drawPeaks(peaks,width,newRanges[i][0],newRanges[i][1])}else peaks=this.backend.getPeaks(width,start,end),this.drawer.drawPeaks(peaks,width,start,end);this.fireEvent("redraw",peaks,width)}},{key:"zoom",value:function zoom(pxPerSec){pxPerSec?(this.params.minPxPerSec=pxPerSec,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",pxPerSec)}},{key:"loadArrayBuffer",value:function loadArrayBuffer(arraybuffer){var _this9=this;this.decodeArrayBuffer(arraybuffer,(function(data){_this9.isDestroyed||_this9.loadDecodedBuffer(data)}))}},{key:"loadDecodedBuffer",value:function loadDecodedBuffer(buffer){this.backend.load(buffer),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function loadBlob(blob){var _this10=this,reader=new FileReader;reader.addEventListener("progress",(function(e){return _this10.onProgress(e)})),reader.addEventListener("load",(function(e){return _this10.loadArrayBuffer(e.target.result)})),reader.addEventListener("error",(function(){return _this10.fireEvent("error","Error reading file")})),reader.readAsArrayBuffer(blob),this.empty()}},{key:"load",value:function load(url,peaks,preload,duration){if(!url)throw new Error("url parameter cannot be empty");if(this.empty(),preload){var preloadIgnoreReasons={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(preload),"Peaks are not provided":!peaks,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof url},activeReasons=Object.keys(preloadIgnoreReasons).filter((function(reason){return preloadIgnoreReasons[reason]}));activeReasons.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+activeReasons.join("\n\t- ")),preload=null)}switch("WebAudio"===this.params.backend&&url instanceof HTMLMediaElement&&(url=url.src),this.params.backend){case"WebAudio":return this.loadBuffer(url,peaks,duration);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(url,peaks,preload,duration)}}},{key:"loadBuffer",value:function loadBuffer(url,peaks,duration){var _this11=this,load=function load(action){return action&&_this11.tmpEvents.push(_this11.once("ready",action)),_this11.getArrayBuffer(url,(function(data){return _this11.loadArrayBuffer(data)}))};if(!peaks)return load();this.backend.setPeaks(peaks,duration),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",load))}},{key:"loadMediaElement",value:function loadMediaElement(urlOrElt,peaks,preload,duration){var _this12=this,url=urlOrElt;if("string"==typeof urlOrElt)this.backend.load(url,this.mediaContainer,peaks,preload);else{var elt=urlOrElt;this.backend.loadElt(elt,peaks),url=elt.src}this.tmpEvents.push(this.backend.once("canplay",(function(){_this12.backend.destroyed||(_this12.drawBuffer(),_this12.isReady=!0,_this12.fireEvent("ready"))})),this.backend.once("error",(function(err){return _this12.fireEvent("error",err)}))),peaks&&(this.backend.setPeaks(peaks,duration),this.drawBuffer(),this.fireEvent("waveform-ready")),peaks&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(url,(function(arraybuffer){_this12.decodeArrayBuffer(arraybuffer,(function(buffer){_this12.backend.buffer=buffer,_this12.backend.setPeaks(null),_this12.drawBuffer(),_this12.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function decodeArrayBuffer(arraybuffer,callback){var _this13=this;this.isDestroyed||(this.arraybuffer=arraybuffer,this.backend.decodeArrayBuffer(arraybuffer,(function(data){_this13.isDestroyed||_this13.arraybuffer!=arraybuffer||(callback(data),_this13.arraybuffer=null)}),(function(){return _this13.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function getArrayBuffer(url,callback){var _this14=this,options=Object.assign({url,responseType:"arraybuffer"},this.params.xhr),request=util.fetchFile(options);return this.currentRequest=request,this.tmpEvents.push(request.on("progress",(function(e){_this14.onProgress(e)})),request.on("success",(function(data){callback(data),_this14.currentRequest=null})),request.on("error",(function(e){_this14.fireEvent("error",e),_this14.currentRequest=null}))),request}},{key:"onProgress",value:function onProgress(e){var percentComplete;percentComplete=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*percentComplete),e.target)}},{key:"exportPCM",value:function exportPCM(length,accuracy,noWindow,start,end){length=length||1024,start=start||0,accuracy=accuracy||1e4,noWindow=noWindow||!1;var peaks=this.backend.getPeaks(length,start,end),arr=[].map.call(peaks,(function(val){return Math.round(val*accuracy)/accuracy}));return new Promise((function(resolve,reject){if(!noWindow){var blobJSON=new Blob([JSON.stringify(arr)],{type:"application/json;charset=utf-8"}),objURL=URL.createObjectURL(blobJSON);window.open(objURL),URL.revokeObjectURL(objURL)}resolve(arr)}))}},{key:"exportImage",value:function exportImage(format,quality,type){return format||(format="image/png"),quality||(quality=1),type||(type="dataURL"),this.drawer.getImage(format,quality,type)}},{key:"cancelAjax",value:function cancelAjax(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(err){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function clearTmpEvents(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function empty(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function destroy(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function create(params){return new WaveSurfer(params).init()}}]),WaveSurfer}(util.Observer);exports.default=WaveSurfer,_defineProperty(WaveSurfer,"VERSION","6.6.4"),_defineProperty(WaveSurfer,"util",util),module.exports=exports.default},"./src/webaudio.js":(module,exports,__nested_webpack_require_193053__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var util=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__nested_webpack_require_193053__("./src/util/index.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}var WebAudio=function(_util$Observer){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(WebAudio,_util$Observer);var _super=_createSuper(WebAudio);function WebAudio(params){var _defineProperty2,_this$states,_this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WebAudio),_defineProperty(_assertThisInitialized(_this=_super.call(this)),"audioContext",null),_defineProperty(_assertThisInitialized(_this),"stateBehaviors",(_defineProperty(_defineProperty2={},"playing",{init:function init(){this.addOnAudioProcess()},getPlayedPercents:function getPlayedPercents(){var duration=this.getDuration();return this.getCurrentTime()/duration||0},getCurrentTime:function getCurrentTime(){return this.startPosition+this.getPlayedTime()}}),_defineProperty(_defineProperty2,"paused",{init:function init(){},getPlayedPercents:function getPlayedPercents(){var duration=this.getDuration();return this.getCurrentTime()/duration||0},getCurrentTime:function getCurrentTime(){return this.startPosition}}),_defineProperty(_defineProperty2,"finished",{init:function init(){this.fireEvent("finish")},getPlayedPercents:function getPlayedPercents(){return 1},getCurrentTime:function getCurrentTime(){return this.getDuration()}}),_defineProperty2)),_this.params=params,_this.ac=params.audioContext||(_this.supportsWebAudio()?_this.getAudioContext():{}),_this.lastPlay=_this.ac.currentTime,_this.startPosition=0,_this.scheduledPause=null,_this.states=(_defineProperty(_this$states={},"playing",Object.create(_this.stateBehaviors.playing)),_defineProperty(_this$states,"paused",Object.create(_this.stateBehaviors.paused)),_defineProperty(_this$states,"finished",Object.create(_this.stateBehaviors.finished)),_this$states),_this.buffer=null,_this.filters=[],_this.gainNode=null,_this.mergedPeaks=null,_this.offlineAc=null,_this.peaks=null,_this.playbackRate=1,_this.analyser=null,_this.scriptNode=null,_this.source=null,_this.splitPeaks=[],_this.state=null,_this.explicitDuration=params.duration,_this.sinkStreamDestination=null,_this.sinkAudioElement=null,_this.destroyed=!1,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(WebAudio,[{key:"supportsWebAudio",value:function supportsWebAudio(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function getAudioContext(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function getOfflineAudioContext(sampleRate){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,sampleRate)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function init(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState("paused"),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function disconnectFilters(){this.filters&&(this.filters.forEach((function(filter){filter&&filter.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function setState(state){this.state!==this.states[state]&&(this.state=this.states[state],this.state.init.call(this))}},{key:"setFilter",value:function setFilter(){for(var _len=arguments.length,filters=new Array(_len),_key=0;_key<_len;_key++)filters[_key]=arguments[_key];this.setFilters(filters)}},{key:"setFilters",value:function setFilters(filters){this.disconnectFilters(),filters&&filters.length&&(this.filters=filters,this.analyser.disconnect(),filters.reduce((function(prev,curr){return prev.connect(curr),curr}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function createScriptNode(){this.params.audioScriptProcessor&&(this.scriptNode=this.params.audioScriptProcessor,this.scriptNode.connect(this.ac.destination))}},{key:"addOnAudioProcess",value:function addOnAudioProcess(){var _this2=this;!function loop(){var time=_this2.getCurrentTime();time>=_this2.getDuration()&&_this2.state!==_this2.states.finished?(_this2.setState("finished"),_this2.fireEvent("pause")):time>=_this2.scheduledPause&&_this2.state!==_this2.states.paused?_this2.pause():_this2.state===_this2.states.playing&&(_this2.fireEvent("audioprocess",time),util.frame(loop)())}()}},{key:"createAnalyserNode",value:function createAnalyserNode(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function createVolumeNode(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function setSinkId(deviceId){return deviceId?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(deviceId)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+deviceId))}},{key:"setVolume",value:function setVolume(value){this.gainNode.gain.setValueAtTime(value,this.ac.currentTime)}},{key:"getVolume",value:function getVolume(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function decodeArrayBuffer(arraybuffer,callback,errback){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(arraybuffer,(function(data){return callback(data)}),errback):this.offlineAc.decodeAudioData(arraybuffer).then((function(data){return callback(data)})).catch((function(err){return errback(err)}))}},{key:"setPeaks",value:function setPeaks(peaks,duration){null!=duration&&(this.explicitDuration=duration),this.peaks=peaks}},{key:"setLength",value:function setLength(length){if(!this.mergedPeaks||length!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var c,channels=this.buffer?this.buffer.numberOfChannels:1;for(c=0;c<channels;c++)this.splitPeaks[c]=[],this.splitPeaks[c][2*(length-1)]=0,this.splitPeaks[c][2*(length-1)+1]=0;this.mergedPeaks[2*(length-1)]=0,this.mergedPeaks[2*(length-1)+1]=0}}},{key:"getPeaks",value:function getPeaks(length,first,last){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(first=first||0,last=last||length-1,this.setLength(length),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var newBuffer=this.createBuffer(1,4096,this.sampleRate);this.buffer=newBuffer.buffer}var c,sampleSize=this.buffer.length/length,sampleStep=~~(sampleSize/10)||1,channels=this.buffer.numberOfChannels;for(c=0;c<channels;c++){var peaks=this.splitPeaks[c],chan=this.buffer.getChannelData(c),i=void 0;for(i=first;i<=last;i++){var start=~~(i*sampleSize),end=~~(start+sampleSize),min=chan[start],max=min,j=void 0;for(j=start;j<end;j+=sampleStep){var value=chan[j];value>max&&(max=value),value<min&&(min=value)}peaks[2*i]=max,peaks[2*i+1]=min,(0==c||max>this.mergedPeaks[2*i])&&(this.mergedPeaks[2*i]=max),(0==c||min<this.mergedPeaks[2*i+1])&&(this.mergedPeaks[2*i+1]=min)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function getPlayedPercents(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function disconnectSource(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function destroyWebAudio(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode&&this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function destroy(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function load(buffer){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=buffer,this.createSource()}},{key:"createSource",value:function createSource(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function resumeAudioContext(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function isPaused(){return this.state!==this.states.playing}},{key:"getDuration",value:function getDuration(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function seekTo(start,end){if(this.buffer)return this.scheduledPause=null,null==start&&(start=this.getCurrentTime())>=this.getDuration()&&(start=0),null==end&&(end=this.getDuration()),this.startPosition=start,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState("paused"),{start,end}}},{key:"getPlayedTime",value:function getPlayedTime(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function play(start,end){if(this.buffer){this.createSource();var adjustedTime=this.seekTo(start,end);start=adjustedTime.start,end=adjustedTime.end,this.scheduledPause=end,this.source.start(0,start),this.resumeAudioContext(),this.setState("playing"),this.fireEvent("play")}}},{key:"pause",value:function pause(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(err){}this.setState("paused"),this.fireEvent("pause")}},{key:"getCurrentTime",value:function getCurrentTime(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate}},{key:"setPlaybackRate",value:function setPlaybackRate(value){this.playbackRate=value||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function setPlayEnd(end){this.scheduledPause=end}}]),WebAudio}(util.Observer);exports.default=WebAudio,module.exports=exports.default},"./node_modules/debounce/index.js":module=>{function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;function later(){var last=Date.now()-timestamp;last<wait&&last>=0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))}null==wait&&(wait=100);var debounced=function(){context=this,args=arguments,timestamp=Date.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result};return debounced.clear=function(){timeout&&(clearTimeout(timeout),timeout=null)},debounced.flush=function(){timeout&&(result=func.apply(context,args),context=args=null,clearTimeout(timeout),timeout=null)},debounced}debounce.debounce=debounce,module.exports=debounce}},__webpack_module_cache__={},__nested_webpack_exports__=function __nested_webpack_require_224237__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__nested_webpack_require_224237__),module.exports}("./src/wavesurfer.js"),__nested_webpack_exports__;var __webpack_modules__,__webpack_module_cache__,__nested_webpack_exports__}))}}]);