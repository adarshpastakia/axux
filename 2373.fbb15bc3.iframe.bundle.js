"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[2373],{"./node_modules/@arcgis/core/layers/support/DimensionalDefinition.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>p});var a,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");let n=a=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__.wq{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new a({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.d9)(this.values),isSlice:this.isSlice})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.Cb)({type:String,json:{write:!0}})],n.prototype,"variableName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.Cb)({type:String,json:{write:!0}})],n.prototype,"dimensionName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.Cb)({type:_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.V5.array(_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.V5.oneOf([_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.V5.native(Number),_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.V5.array(_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.V5.native(Number))])),json:{write:!0}})],n.prototype,"values",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.Cb)({type:Boolean,json:{write:!0}})],n.prototype,"isSlice",void 0),n=a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.layers.support.DimensionalDefinition")],n);const p=n},"./node_modules/@arcgis/core/layers/support/rasterDatasets/RawBlockCache.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OE:()=>m,Gc:()=>d,Qg:()=>x,Rq:()=>a,gX:()=>h,z2:()=>u,ET:()=>f,Vx:()=>g});__webpack_require__("./node_modules/@arcgis/core/geometry.js");var maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js");var rasterProjectionHelper=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");const c=new Map,i=new class t{constructor(t=15e3,e=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,e)}decreaseRefCount(t,e){const s=t+"/"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.refCount--,t.refCount<=0&&(r.delete(s),t.controller&&t.controller.abort()),t.refCount}return 0}getBlock(t,e){const s=t+"/"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.ts=Date.now(),t.refCount++,r.delete(s),r.set(s,t),t.block}return null}putBlock(t,e,s,r){const i=this._cachedBlocks,c=t+"/"+e;if(i.has(c)){const t=i.get(c);t.ts=Date.now(),t.refCount++}else i.set(c,{block:s,ts:Date.now(),refCount:1,controller:r});this._trim(),this._updateTimer()}deleteBlock(t,e){const s=this._cachedBlocks,r=t+"/"+e;s.has(r)&&s.delete(r)}updateMaxSize(t){this._size=t,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const t=this._cachedBlocks;this._timer=setInterval((()=>{const e=Array.from(t),s=Date.now();for(let r=0;r<e.length&&e[r][1].ts<=s-this._duration;r++)t.delete(e[r][0]);0===t.size&&this._clearTimer()}),this._interval)}_trim(){const t=this._cachedBlocks;if(-1===this._size||this._size>=t.size)return;const e=Array.from(t);for(let s=0;s<e.length-this._size;s++)t.delete(e[s][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function a(e,t){return null==t?e:`${e}?sliceId=${t}`}function u(e,t){const n={extent:null,rasterInfo:t,cache:new Map},o=c.get(e);return o?(o.push(n),o.length-1):(c.set(e,[n]),0)}function f(e,t){const n=c.get(e);n&&(n[t]=null,n.some((e=>null!=e))||c.delete(e))}function m(e,t,n){const o=c.get(e);if(!o)return null==t?i.decreaseRefCount(e,n):0;if(null==t||null==o[t])return i.decreaseRefCount(e,n);const l=o[t]?.cache,r=l?.get(n);if(l&&r){if(r.refCount--,0===r.refCount){l.delete(n);for(let e=0;e<o.length;e++)o[e]?.cache.delete(n);r.controller&&r.controller.abort()}return r.refCount}return 0}function x(e,t,n){const o=c.get(e);if(!o)return null==t?i.getBlock(e,n):null;if(null==t||null==o[t]){for(let e=0;e<o.length;e++){const t=o[e]?.cache.get(n);if(t)return t.refCount++,t.block}return i.getBlock(e,n)}const l=o[t]?.cache.get(n);if(l)return l.refCount++,l.block;for(let r=0;r<o.length;r++){if(r===t||!o[r])continue;const e=o[r]?.cache,l=e?.get(n);if(e&&l)return l.refCount++,e.set(n,l),l.block}return null}function h(e,t,n,o,l=null){const r=c.get(e);if(!r)return void(null==t&&i.putBlock(e,n,o,l));if(null==t||null==r[t])return void i.putBlock(e,n,o,l);const a={refCount:1,block:o,isResolved:!1,isRejected:!1,controller:l};o.then((()=>a.isResolved=!0)).catch((()=>a.isRejected=!0)),r[t]?.cache.set(n,a)}function d(e,t,n){const o=c.get(e);o?null!=t&&null!=o[t]?o[t]?.cache.delete(n):i.deleteBlock(e,n):null==t&&i.deleteBlock(e,n)}function y(e,t){const n=c.get(e);return n?n[t]??null:null}function g(t,c,i,a,u,f,s=null){const m=y(t,c);if(!m)return;const x=m.extent,{cache:h,rasterInfo:d}=m;if(x&&x.xmin===i.xmin&&x.xmax===i.xmax&&x.ymin===i.ymin&&x.ymax===i.ymax)return;a=a??0;const g=i.clone().normalize(),{spatialReference:p,transform:k}=d,M=new Set;for(let y=0;y<g.length;y++){const t=g[y];if(t.xmax-t.xmin<=a||t.ymax-t.ymin<=a)continue;let c=(0,rasterProjectionHelper.tB)(t,p,s);(0,maybe.pC)(k)&&(c=k.inverseTransform(c));const i=new Point.Z({x:a,y:a,spatialReference:t.spatialReference});if(null==u&&!(u=(0,rasterProjectionHelper.VO)(i,p,t,s)))return;const{pyramidLevel:m,pyramidResolution:x,excessiveReading:h}=(0,rasterProjectionHelper.kr)(u,d,f||"closest");if(h)return;const{storageInfo:R}=d,{origin:C}=R,j={x:Math.max(0,Math.floor((c.xmin-C.x)/x.x)),y:Math.max(0,Math.floor((C.y-c.ymax)/x.y))},B=Math.ceil((c.xmax-c.xmin)/x.x-.1),b=Math.ceil((c.ymax-c.ymin)/x.y-.1),v=m>0?R.pyramidBlockWidth:R.blockWidth,w=m>0?R.pyramidBlockHeight:R.blockHeight,$=1,I=Math.max(0,Math.floor(j.x/v)-$),H=Math.max(0,Math.floor(j.y/w)-$),E=Math.floor((j.x+B-1)/v)+$,P=Math.floor((j.y+b-1)/w)+$;for(let e=H;e<=P;e++)for(let t=I;t<=E;t++)M.add(`${m}/${e}/${t}`)}h.forEach(((e,t)=>{if(!M.has(t)){const e=h.get(t);(null==e||e.isResolved||e.isRejected)&&h.delete(t)}})),m.extent={xmin:i.xmin,ymin:i.ymin,xmax:i.xmax,ymax:i.ymax}}},"./node_modules/@arcgis/core/layers/support/rasterDatasets/multidimensionalUtils.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MO:()=>i,Tj:()=>c,Ur:()=>s,WU:()=>f,gk:()=>g,jj:()=>d,nb:()=>m});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_DimensionalDefinition_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/support/DimensionalDefinition.js");function a(e,n,t){const i=n.shift();if(0===t.length){const e=[];t.push({sliceId:-1,multidimensionalDefinition:e})}const s=t.length;for(let a=0;a<s;a++){const n=t.shift().multidimensionalDefinition;i.values?.forEach((a=>{t.push({sliceId:-1,multidimensionalDefinition:[...n,{variableName:e,dimensionName:i.name,values:[a]}]})}))}n.length&&a(e,n,t)}function i(e,n){const t=[];let i=0;return(n?e.variables.filter((e=>e.name.toLowerCase()===n.toLowerCase())):[...e.variables].sort(((e,n)=>e.name>n.name?1:-1))).forEach((e=>{const n=[],s=[...e.dimensions].sort(((e,n)=>e.name>n.name?-1:1));a(e.name,s,n),n.forEach((e=>{t.push({...e,sliceId:i++})}))})),t}function s(n,t,a){let i=n;if(t&&(t=[...t].sort(((e,n)=>e.dimensionName<n.dimensionName?-1:1))).forEach((({dimensionName:e,values:n,isSlice:t})=>{n.length&&(i=i.filter((a=>{const i=a.multidimensionalDefinition.find((n=>n.dimensionName===e));if(null==i)return!1;const s=i.values[0];return"number"==typeof s?"number"==typeof n[0]?n.includes(s):n.some((e=>e[0]<=s&&e[1]>=s)):"number"==typeof n[0]?n.some((e=>s[0]<=e&&s[1]>=e)):t?n.some((e=>e[0]===s[0]&&e[0]===s[1])):n.some((e=>e[0]>=s[0]&&e[0]<=s[1]||e[1]>=s[0]&&e[1]<=s[1]||e[0]<s[0]&&e[1]>s[1]))})))})),i.length&&a&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.pC)(a.start)&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.pC)(a.end)){const e=a.start.getTime(),n=a.end.getTime(),t=i[0].multidimensionalDefinition.findIndex((e=>"StdTime"===e.dimensionName));t>-1&&(i=i.filter((a=>{const i=a.multidimensionalDefinition[t].values[0];return e<=i&&n>=i})))}return i.map((e=>e.sliceId))}function r(e,n){return Array.isArray(e)?n[0]===n[1]?e[0]===n[0]||e[1]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]}function l(e,n){return e[0]<=n[0]&&e[1]>=n[0]||e[0]<=n[1]&&e[1]>=n[1]||e[0]>=n[0]&&e[1]<=n[1]}function o(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function u(e,n,t){if(!n?.subsetDefinitions?.length)return e;let a;if(t){const{variables:i}=n;if(i.length&&!i.includes(t))return null;const s=n.subsetDefinitions.find((n=>n.dimensionName===e.name&&n.variableName===t));if(!s?.values?.length)return e;a=o(s.values)}else a=n.dimensions.find((({name:n})=>n===e.name))?.extent;const i=a;if(!i||!i?.length)return e;const s=e.values.filter((e=>r(e,i)));return{...e,extent:[...i],values:s}}function m(e,n,t){if(!n?.subsetDefinitions?.length)return!1;const{variables:a}=n;if(a.length&&e.some((({variableName:e})=>e&&!a.includes(e))))return!0;for(let i=0;i<e.length;i++){const a=e[i],s=n.subsetDefinitions.find((e=>(""===a.variableName||e.variableName===a.variableName)&&e.dimensionName===a.dimensionName));if(s?.values.length){const e=o(s.values);if(a.isSlice||2!==a.values.length||Array.isArray(a.values[0])||a.values[0]===a.values[1]||!t){if(a.values.some((n=>!r(n,e))))return!0}else if(!l(a.values,e))return!0}}return!1}function c(e,a={}){const{multidimensionalInfo:i,keyProperties:s}=e;if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.Wi)(i))return null;const r=a.variableName||s?.DefaultVariable;let{variables:l}=i;const{multidimensionalSubset:o}=a;o?.variables?.length&&(l=l.filter((({name:e})=>o.variables.includes(e))));const m=r?l.find((({name:e})=>e===r))??l[0]:l[0];if(!m)return null;const c=[],{dimensions:f,name:d}=m;if(0===f.length)return[new _DimensionalDefinition_js__WEBPACK_IMPORTED_MODULE_0__.Z({variableName:d,dimensionName:"",values:[],isSlice:!0})];for(let n=0;n<f.length;n++){const e=u(f[n],o,d);if(!e)return null;const{values:i,extent:s}=e;let r=i?.[0]??s[0];"stdz"===e.name.toLowerCase()&&!e.hasRanges&&Math.abs(s[1])<=Math.abs(s[0])&&(r=i?.length?i[i.length-1]:s[1]),c.push(new _DimensionalDefinition_js__WEBPACK_IMPORTED_MODULE_0__.Z({variableName:d,dimensionName:e.name,values:[r],isSlice:!a.useRangeForRangedDimensionInfo||!!e.hasRanges}))}return c}function f(e){return!((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.Wi)(e)||!e.length)&&e.some((e=>{if(null==e.values)return!0;const n=e.values.length;return 0===n||n>1||!e.isSlice&&Array.isArray(e.values[0])}))}function d(e,t){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.Wi)(t)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.Wi)(e))return null;let a=t.variables.map((e=>({...e})));return e?.variables?.length&&(a=a.filter((({name:n})=>e.variables.includes(n))),a.forEach((n=>{n.dimensions=n.dimensions.map((t=>u(t,e,n.name)))}))),a}function h(e,n){const{values:t}=n;if(t?.length)return Array.isArray(t[0])!==Array.isArray(e)?-1:Array.isArray(t[0])?t.findIndex((n=>n[0]===e[0]&&n[1]===e[1])):t.indexOf(e);const{extent:a}=n;if(Array.isArray(e)||e<a[0]||e>a[1])return-1;const i=n.interval||1;if("ISO8601"!==n.unit)return Math.round((e-a[0])/i);const s=a[0];let r=-1;switch(n.intervalUnit?.toLowerCase()||"seconds"){case"seconds":r=Math.round((e-s)/1e3/i);break;case"minutes":r=Math.round((e-s)/6e4/i);break;case"hours":r=Math.round((e-s)/36e5/i);break;case"days":r=Math.round((e-s)/864e5/i);break;case"months":{const n=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),t=new Date(s).getUTCMonth(),a=new Date(e).getUTCMonth();r=0===n?a-t:a+11-t+12*(n-1)}break;case"years":r=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/i);break;case"decades":r=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/i)}return r}function v(e){let n=e.values?.length;if(n)return n;const{extent:t,unit:a}=e,i=e.interval||1,s=t?t[1]-t[0]:0;if("ISO8601"!==a)return Math.round(s/i);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":n=Math.round(s/1e3/i);break;case"minutes":n=Math.round(s/6e4/i);break;case"hours":n=Math.round(s/36e5/i);break;case"days":n=Math.round(s/864e5/i);break;case"months":{const e=new Date(t[1]).getUTCFullYear()-new Date(t[0]).getUTCFullYear(),a=new Date(t[1][0]).getUTCMonth(),i=new Date(t[1][1]).getUTCMonth();n=0===e?i-a+1:i+11-a+12*(e-1)+1}break;case"years":n=Math.round((new Date(t[1]).getUTCFullYear()-new Date(t[0]).getUTCFullYear())/i);break;case"decades":n=Math.round((new Date(t[1]).getUTCFullYear()-new Date(t[0]).getUTCFullYear())/10/i);break;default:n=0}return n}function g(e,n){let t=0;const a=e[0].variableName,i=[...n.variables].sort(((e,n)=>e.name>n.name?1:-1));for(let s=0;s<i.length;s++){const n=i[s],r=[...n.dimensions].sort(((e,n)=>e.name>n.name?-1:1));if(n.name!==a){t+=r.map((e=>v(e))).reduce(((e,n)=>e*n));continue}const l=r.map((e=>v(e))),o=r.length;for(let a=0;a<o;a++){const n=e.find((e=>e.dimensionName===r[a].name));if(null==n)return null;const i=h(n.values[0],r[a]);if(-1===i)return null;l.shift(),t+=a===o-1?i:i*l.reduce(((e,n)=>e*n))}break}return t}},"./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>i});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_enums_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"),_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js"),_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__.Z{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__.Z],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.jx.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.jx.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.jx.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__.Z],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.jx.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>r});var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),_DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"),_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__.s{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__.Z(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,n,0,0,0,a,0,h,o,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,i.displayViewMat3,r)}}},"./node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>L});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),multidimensionalUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterDatasets/multidimensionalUtils.js"),FlowView2D=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/flow/FlowView2D.js"),LayerView2D=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js"),aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),viewpointUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/viewpointUtils.js"),brushes=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/brushes.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f32.js"),RasterBitmap=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/imagery/RasterBitmap.js"),TiledDisplayObject=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js");class RasterTile_i extends TiledDisplayObject.I{constructor(t,e,i,r,a,n,m=null){super(t,e,i,r,a,n),this.bitmap=new RasterBitmap.br(m,null,null),this.bitmap.coordScale=[a,n],this.bitmap.once("isReady",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}setTransform(t){super.setTransform(t),this.bitmap.transforms.dvs=this.transforms.dvs}_createTransforms(){return{dvs:(0,mat3f32.c)(),tileMat3:(0,mat3f32.c)()}}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}var enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),TileContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");class n extends TileContainer.Z{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[i,r]=this._tileInfoView.tileInfo.size,o=this._tileInfoView.getTileResolution(e.level);return new RasterTile_i(e,o,s[0],s[3],i,r)}prepareRenderPasses(e){const s=e.registerRenderPass({name:"imagery (tile)",brushes:[brushes.U.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:enums.jx.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===enums.jx.MAP&&super.doRender(e)}_getTileBounds(i){const t=this._tileInfoView.getTileBounds((0,aaBoundingRect.Ue)(),i);if(this.isCustomTilingScheme&&i.world){const{tileInfo:e}=this._tileInfoView,r=(0,viewpointUtils.ut)(e.spatialReference);if(r){const{resolution:s}=e.lodAt(i.level),o=r/s%e.size[0],n=o?(e.size[0]-o)*s:0;t[0]-=n*i.world,t[2]-=n*i.world}}return t}}__webpack_require__("./node_modules/@arcgis/core/geometry.js");var HandleOwner=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),PixelBlock=__webpack_require__("./node_modules/@arcgis/core/layers/support/PixelBlock.js"),TileInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/TileInfo.js"),RawBlockCache=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterDatasets/RawBlockCache.js"),pixelUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterFunctions/pixelUtils.js"),rasterProjectionHelper=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js"),TileInfoView=(__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/PagedTileQueue.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js")),TileQueue=(__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileKey.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js")),TileStrategy=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js"),capabilities=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js");const v=[0,0];let T=class extends HandleOwner.r{constructor(){super(...arguments),this._emptyTilePixelBlock=null,this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=null,this.previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._isCustomTilingScheme=!1,this._globalUpdateRequested=!1,this.attached=!1,this.container=null,this.layer=null,this.timeExtent=null,this.redrawOrRefetch=(0,promiseUtils.Ds)(((e,t)=>!this.previousLOD||this.layerView.suspended?Promise.resolve():e?this.updatingHandles.addPromise(this.doRefresh()):this.updatingHandles.addPromise(this._redrawImage(t))))}get useWebGLForProcessing(){return this._get("useWebGLForProcessing")??!0}set useWebGLForProcessing(e){this._set("useWebGLForProcessing",e)}get useProgressiveUpdate(){return null==this._get("useProgressiveUpdate")||this._get("useProgressiveUpdate")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this.container.removeAllChildren();const t=this._getCacheSize(e);this._tileStrategy=new TileStrategy.Z({cachePolicy:"purge",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._set("useProgressiveUpdate",e),this.layerView.requestUpdate()}}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:Extent.Z.fromJSON(t);(0,RawBlockCache.Vx)(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,this.previousLOD?.level!==r.level&&(this.previousLOD=r,null==this._symbolizerParams||this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}}moveEnd(){!this.layerView.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=new AbortController,0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.layerView.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.layerView.requestUpdate()}get updating(){return this._fetchQueue?.updating||this._globalUpdateRequested||!(!this.updatingHandles||!this.updatingHandles.updating)}attach(){(0,capabilities.hc)("2d").supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new TileInfoView.Z(this.layerView.tileInfo,this.layerView.fullExtent);const e=this._computeFetchConcurrency();this._fetchQueue=new TileQueue.Z({tileInfoView:this._tileInfoView,concurrency:e,process:(e,t)=>this._fetchTile1(e,t)});const t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new TileStrategy.Z({cachePolicy:"purge",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._updateBlockCacheRegistry()}detach(){this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,(0,RawBlockCache.ET)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryUrl=this._blockCacheRegistryId=null}acquireTile(e){const t=this.container.createTile(e);return this._enqueueTileFetch(t),this.layerView.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this.container.removeChild(e),e.once("detach",(()=>{e.destroy(),this.layerView.requestUpdate()})),this.layerView.requestUpdate()}createEmptyTilePixelBlock(e=null){const t=null==e||e.join(",")===this._tileInfoView.tileInfo.size.join(",");if(t&&(0,maybe.pC)(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;e=e||this._tileInfoView.tileInfo.size;const[i,r]=e,l=new PixelBlock.Z({width:i,height:r,pixels:[new Uint8Array(i*r)],mask:new Uint8Array(i*r),pixelType:"u8"});return t&&(this._emptyTilePixelBlock=l),l}_fetchTile1(e,t){const i=(0,maybe.pC)(t)&&t.signal,l=this.canUseWebGLForProcessing(),{layerView:a}=this,o=!a.tileInfo.isWrappable&&(0,maybe.pC)((0,rasterProjectionHelper.ut)(a.view.spatialReference)),h={allowPartialFill:!0,datumTransformation:a.datumTransformation,interpolation:l?"nearest":this.layer.interpolation,registryId:this._blockCacheRegistryId,requestRawData:l,signal:(0,maybe.Wg)(i),srcResolution:this._srcResolutions[e.level],timeExtent:a.timeExtent,tileInfo:a.tileInfo,disableWrapAround:o};return this.fetchTile(e,h)}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.layerView.view.spatialReference,t=new Point.Z({x:this.layerView.fullExtent.xmin,y:this.layerView.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=(0,rasterProjectionHelper.vF)(this.layer.rasterInfo,e),l=TileInfo.Z.create({spatialReference:e,size:512,scales:i});(0===l.origin.x||l.origin.x>t.x)&&(l.origin=t),this._isCustomTilingScheme=r,this.layerView.set("tileInfo",l),this._srcResolutions=s??[]}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.rasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){this.updatingHandles.addPromise(this._enqueueTileFetch1(e,t))}async _enqueueTileFetch1(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:r}=this.layer;let l=!this.useProgressiveUpdate||this.layerView.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.layerView.moving&&0===this._fetchQueue.length){l=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(s){(0,promiseUtils.D_)(s)&&Logger.Z.getLogger(this.declaredClass).error(s)}this._globalUpdateRequested=!1}!this.canUseWebGLForProcessing()&&"rasterVF"!==this.type||this.layerView.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const o=this._tileInfoView.getTileCoords(v,e.key),h=this._tileInfoView.getTileResolution(e.key);await this.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:l,bandIds:r,coords:o,resolution:h}),e.once("attach",(()=>this.layerView.requestUpdate())),this.container.addChild(e)}catch(s){(0,promiseUtils.D_)(s)||Logger.Z.getLogger(this.declaredClass).error(s)}this.layerView.requestUpdate()}}async _redrawImage(e){if(0===this.container.children.length)return;await this.layer.updateRenderer(),this.layerView.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.container.children.map((async e=>this.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams})));await(0,promiseUtils.as)(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this.previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.layerView.view.extent,this.layerView.view.width,this.layerView.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:(0,pixelUtils.qF)(i.pixelBlock,this.layer.bandIds),isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds});!this.canUseWebGLForProcessing()&&s&&"stretch"===s.type&&this.layer.renderer&&"raster-stretch"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,raster:s}=this.layer,{multidimensionalDefinition:r}=this.layer.normalizeRasterFetchOptions({multidimensionalDefinition:this.layer.multidimensionalDefinition,timeExtent:this.layerView.timeExtent}),l=i?.multidimensionalInfo?s.getSliceIndex(r):null,a=(0,RawBlockCache.Rq)(t,l);if(a!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&(0,RawBlockCache.ET)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=(0,RawBlockCache.z2)(a,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.layerView.view.scale),t=this._srcResolutions[e.level];(0,RawBlockCache.Vx)(a,this._blockCacheRegistryId,this.layerView.view.extent,this.layerView.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=a}}async doRefresh(){if(!this.attached)return;await this.layer.updateRenderer(),this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset();const e=[];this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,this._tileStrategy.tiles.forEach((t=>e.push(this._enqueueTileFetch(t)))),await(0,promiseUtils.as)(e)}};(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"_fetchQueue",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"_globalUpdateRequested",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"attached",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"layerView",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"useWebGLForProcessing",null),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"useProgressiveUpdate",null),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"timeExtent",void 0),(0,tslib_es6._)([(0,property.Cb)()],T.prototype,"updating",null),T=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.imagery.BaseImageryTileSubView2D")],T);var util=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/util.js");let l=class extends T{constructor(){super(...arguments),this.container=null,this.layer=null,this.type="raster"}attach(){super.attach(),this.container=new n(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme}detach(){super.detach(),this.container.removeAllChildren(),this.container=null}canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!("majority"===this.layer.interpolation&&(0,util.JV)(this.layer))}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}async updateTileSource(e,t){const{bandIds:s}=this.layer,i=this._getLayerInterpolation(),o=this.canUseWebGLForProcessing(),{source:a,globalSymbolizerParams:l,suspended:n,coords:c,resolution:p}=t,u=this.layerView.hasTilingEffects?l:t.symbolizerParams,{bitmap:d}=e;if([d.x,d.y]=c,d.resolution=p,a&&(0,maybe.pC)(a)&&(0,maybe.pC)(a.pixelBlock)){const e={extent:a.extent,pixelBlock:a.pixelBlock};if(d.rawPixelData=e,o)d.source=a.pixelBlock,d.isRendereredSource=!1;else{const r=await this.layer.applyRenderer(e,"stretch"===l?.type?l:null);d.source=r,d.isRendereredSource=!0}d.symbolizerParameters=o?u:null,o?d.transformGrid||(d.transformGrid=a.transformGrid):d.transformGrid=null}else{const e=this.createEmptyTilePixelBlock();d.source=e,d.symbolizerParameters=o?u:null,d.transformGrid=null}d.bandIds=o?s:null,d.width=this._tileInfoView.tileInfo.size[0],d.height=this._tileInfoView.tileInfo.size[1],d.interpolation=i,d.suspended=n,d.invalidateTexture()}async updateTileSymbolizerParameters(e,t){const{local:s,global:i}=t,{bandIds:o}=this.layer,a=this._getLayerInterpolation(),l=this.canUseWebGLForProcessing(),{bitmap:n}=e,{rawPixelData:c}=n;!l&&(0,maybe.pC)(c)?(n.source=await this.layer.applyRenderer(c,"stretch"===i?.type?i:null),n.isRendereredSource=!0):(n.isRendereredSource&&(0,maybe.pC)(c)&&(n.source=c.pixelBlock),n.isRendereredSource=!1),n.symbolizerParameters=l?this.layerView.hasTilingEffects?i:s:null,n.bandIds=l?o:null,n.interpolation=a,n.suspended=!1}_getLayerInterpolation(){const e=this.layer.renderer.type;if("raster-colormap"===e||"unique-value"===e||"class-breaks"===e)return"nearest";const{interpolation:r}=this.layer,{renderer:t}=this.layer;return"raster-stretch"===t.type&&null!=t.colorRamp?"bilinear"===r||"cubic"===r?"bilinear":"nearest":r}};(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"type",void 0),l=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.imagery.ImageryTileView2D")],l);const ImageryTileView2D_n=l;var vectorFieldUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/rasterFunctions/vectorFieldUtils.js"),BrushVectorField=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/imagery/BrushVectorField.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),RasterVFDisplayObject=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/imagery/RasterVFDisplayObject.js");class r extends TiledDisplayObject.I{constructor(t,s,e,a,r,o,l=null){super(t,s,e,a,r,o),this.tileData=new RasterVFDisplayObject.F(l),this.tileData.coordScale=[r,o],this.tileData.once("isReady",(()=>this.ready()))}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(t){this.tileData.stencilRef=t}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:(0,mat3f32.c)(),tileMat3:(0,mat3f32.c)()}}setTransform(e){super.setTransform(e);const i=this.resolution/(e.resolution*e.pixelRatio),a=this.transforms.tileMat3,[r,o]=this.tileData.offset,l=[this.x+r*this.resolution,this.y-o*this.resolution],[h,n]=e.toScreenNoRotation([0,0],l),{symbolTileSize:f}=this.tileData.symbolizerParameters,m=Math.round((this.width-this.tileData.offset[0])/f)*f,c=Math.round((this.height-this.tileData.offset[1])/f)*f,u=m/this.rangeX*i,D=c/this.rangeY*i;(0,mat3.s)(a,u,0,0,0,D,0,h,n,1),(0,mat3.m)(this.transforms.dvs,e.displayViewMat3,a),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}class o extends TileContainer.Z{constructor(){super(...arguments),this.isCustomTilingScheme=!1,this.symbolTypes=["triangle"]}createTile(s){const t=this._tileInfoView.getTileBounds((0,aaBoundingRect.Ue)(),s),[i,o]=this._tileInfoView.tileInfo.size,n=this._tileInfoView.getTileResolution(s.level);return new r(s,n,t[0],t[3],i,o)}prepareRenderPasses(e){const r=e.registerRenderPass({name:"imagery (vf tile)",brushes:[BrushVectorField.Z],target:()=>this.children.map((e=>e.tileData)),drawPhase:enums.jx.MAP});return[...super.prepareRenderPasses(e),r]}doRender(e){this.visible&&e.drawPhase===enums.jx.MAP&&this.symbolTypes.forEach((s=>{e.renderPass=s,super.doRender(e)}))}}let VectorFieldTileView2D_n=class extends T{constructor(){super(...arguments),this._handle=null,this.container=null,this.layer=null,this.type="rasterVF"}canUseWebGLForProcessing(){return!1}async fetchTile(e,t){t={...t,interpolation:"nearest",requestProjectedLocalDirections:!0};const i=await this.layer.fetchTile(e.level,e.row,e.col,t);return"vector-magdir"===this.layer.rasterInfo.dataType&&i?.pixelBlock&&(i.pixelBlock=await this.layer.convertVectorFieldData(i.pixelBlock,t)),i}updateTileSource(e,i){const r=i.symbolizerParams,{tileData:o}=e;o.key=e.key,o.width=this._tileInfoView.tileInfo.size[0],o.height=this._tileInfoView.tileInfo.size[1];const{symbolTileSize:s}=r,{source:l}=i;if(o.offset=this._getTileSymbolOffset(o.key,s),(0,maybe.pC)(l)&&(0,maybe.pC)(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};o.rawPixelData=e,o.symbolizerParameters=r,o.source=this._sampleVectorFieldData(l.pixelBlock,r,o.offset)}else{const e=[Math.round((this._tileInfoView.tileInfo[0]-o.offset[0])/s),Math.round((this._tileInfoView.tileInfo[1]-o.offset[1])/s)],t=this.createEmptyTilePixelBlock(e);o.source=t,o.symbolizerParameters=r}return o.invalidateVAO(),Promise.resolve(null)}updateTileSymbolizerParameters(e,i){const r=i.local,{symbolTileSize:o}=r,{tileData:s}=e;s.offset=this._getTileSymbolOffset(s.key,o);const l=s.symbolizerParameters.symbolTileSize;return s.symbolizerParameters=r,(0,maybe.pC)(s.rawPixelData?.pixelBlock)&&l!==o&&(s.source=this._sampleVectorFieldData(s.rawPixelData.pixelBlock,s.symbolizerParameters,s.offset)),Promise.resolve(null)}attach(){super.attach(),this.container=new o(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=(0,reactiveUtils.YP)((()=>this.layer.renderer),(e=>this._updateSymbolType(e)))}detach(){super.detach(),this.container.removeAllChildren(),this._handle.remove(),this._handle=null}_getTileSymbolOffset(e,t){const i=e.col*this._tileInfoView.tileInfo.size[0]%t,r=e.row*this._tileInfoView.tileInfo.size[1]%t;return[i>t/2?t-i:-i,r>t/2?t-r:-r]}_sampleVectorFieldData(e,t,i){const{symbolTileSize:r}=t;return(0,vectorFieldUtils.nb)(e,"vector-uv",r,i)}_updateSymbolType(e){"vector-field"===e.type&&(this.container.symbolTypes="wind-barb"===e.style?["scalar","triangle"]:"simple-scalar"===e.style?["scalar"]:["triangle"])}};(0,tslib_es6._)([(0,property.Cb)()],VectorFieldTileView2D_n.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],VectorFieldTileView2D_n.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)()],VectorFieldTileView2D_n.prototype,"type",void 0),VectorFieldTileView2D_n=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.imagery.VectorFieldTileView2D")],VectorFieldTileView2D_n);const c=VectorFieldTileView2D_n;var Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),popupUtils=__webpack_require__("./node_modules/@arcgis/core/views/layers/support/popupUtils.js");const f=f=>{let m=class extends f{constructor(){super(...arguments),this._rasterFieldPrefix="Raster.",this.layer=null,this.view=null,this.tileInfo=null}get fullExtent(){return this._getfullExtent()}_getfullExtent(){return this.projectFullExtent(this.view.spatialReference)}get hasTilingEffects(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}get datumTransformation(){return(0,rasterProjectionHelper._D)((0,maybe.Wg)(this.layer.fullExtent),this.view.spatialReference,!0)}supportsSpatialReference(e){return!!this.projectFullExtent(e)}projectFullExtent(e){const t=(0,maybe.Wg)(this.layer.fullExtent),r=(0,rasterProjectionHelper._D)(t,e,!1);return(0,rasterProjectionHelper.tB)(t,e,r)}async fetchPopupFeatures(e,o){const{layer:a}=this;if(!e)throw new Error.Z("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:a});const{popupEnabled:n}=a,l=(0,popupUtils.V)(a,o);if(!n||(0,maybe.Wi)(l))throw new Error.Z("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:n,popupTemplate:l});const p=[],{value:u,magdirValue:f}=await a.identify(e,{timeExtent:this.timeExtent});let m="";if(u&&u.length){m="imagery-tile"===a.type&&a.hasStandardTime()&&null!=u[0]?u.map((e=>a.getStandardTimeValue(e))).join(", "):u.join(", ");const e={ObjectId:0};e["Raster.ServicePixelValue"]=m;const r=a.rasterInfo.attributeTable;if((0,maybe.pC)(r)){const{fields:t,features:o}=r,s=t.find((({name:e})=>"value"===e.toLowerCase())),i=s?o.find((e=>String(e.attributes[s.name])===m)):null;if(i)for(const r in i.attributes)i.attributes.hasOwnProperty(r)&&(e[this._rasterFieldPrefix+r]=i.attributes[r])}const o=a.rasterInfo.dataType;"vector-magdir"!==o&&"vector-uv"!==o||(e["Raster.Magnitude"]=f?.[0],e["Raster.Direction"]=f?.[1]);const s=new Graphic.Z(this.fullExtent.clone(),null,e);s.layer=a,s.sourceLayer=s.layer,p.push(s)}return p}};return(0,tslib_es6._)([(0,property.Cb)()],m.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)(commonProperties.qG)],m.prototype,"timeExtent",void 0),(0,tslib_es6._)([(0,property.Cb)()],m.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],m.prototype,"fullExtent",null),(0,tslib_es6._)([(0,property.Cb)()],m.prototype,"tileInfo",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],m.prototype,"hasTilingEffects",null),m=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.ImageryTileLayerView")],m),m};var LayerView=__webpack_require__("./node_modules/@arcgis/core/views/layers/LayerView.js"),RefreshableLayerView=__webpack_require__("./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");let ImageryTileLayerView2D_f=class extends(f((0,RefreshableLayerView.Z)((0,LayerView2D.y)(LayerView.Z)))){constructor(){super(...arguments),this._useWebGLForProcessing=!0,this._useProgressiveUpdate=!0,this.subview=null}get useWebGLForProcessing(){return this._useWebGLForProcessing}set useWebGLForProcessing(e){this._useWebGLForProcessing=e,this.subview&&"useWebGLForProcessing"in this.subview&&(this.subview.useWebGLForProcessing=e)}get useProgressiveUpdate(){return this._useWebGLForProcessing}set useProgressiveUpdate(e){this._useProgressiveUpdate=e,this.subview&&"useProgressiveUpdate"in this.subview&&(this.subview.useProgressiveUpdate=e)}update(e){this.subview.update(e),this.notifyChange("updating")}isUpdating(){return!this.subview||this.subview.updating}attach(){this.layer.increaseRasterJobHandlerUsage(),this._updateSubview(),this.handles.add([(0,reactiveUtils.YP)((()=>{const{layer:e}=this;return{bandIds:e.bandIds,renderer:e.renderer,interpolation:e.interpolation,multidimensionalDefinition:e.multidimensionalDefinition,rasterFunction:"imagery-tile"===e.type?e.rasterFunction:null}}),((e,t)=>{const s=e.interpolation!==t.interpolation&&("majority"===e.interpolation||"majority"===t.interpolation)&&(0,util.JV)(this.layer),o=e.renderer!==t.renderer&&t.renderer?.type!==e.renderer?.type;o&&this._updateSubview();const a=e.multidimensionalDefinition!==t.multidimensionalDefinition,n=e.rasterFunction!==t.rasterFunction,u=a||s||o||n;this.subview.redrawOrRefetch(u).catch((e=>{(0,promiseUtils.D_)(e)||Logger.Z.getLogger(this.declaredClass).error(e)})),this.notifyChange("updating")})),(0,reactiveUtils.YP)((()=>this.layer.blendMode??"normal"),(e=>{this.subview.container.blendMode=e}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer.effect??null),(e=>{this.subview.container.effect=e}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer.multidimensionalSubset??null),((e,t)=>{const{multidimensionalDefinition:o}=this.layer;(0,maybe.pC)(o)&&(0,multidimensionalUtils.nb)(o,e)!==(0,multidimensionalUtils.nb)(o,t)&&(this.subview.redrawOrRefetch(!0).catch((e=>{(0,promiseUtils.D_)(e)||Logger.Z.getLogger(this.declaredClass).error(e)})),this.notifyChange("updating"))}),reactiveUtils.Z_),(0,reactiveUtils.YP)((()=>this.timeExtent),(()=>{this.subview.timeExtent=this.timeExtent,this.subview.redrawOrRefetch(!0).catch((e=>{(0,promiseUtils.D_)(e)||Logger.Z.getLogger(this.declaredClass).error(e)}))}),reactiveUtils.nn)],"attach")}detach(){this.handles.remove("attach"),this.layer.decreaseRasterJobHandlerUsage(),this._detachSubview(this.subview),this.subview?.destroy(),this.subview=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.subview.moveEnd()}async hitTest(e,i){return[{type:"graphic",layer:this.layer,mapPoint:e,graphic:new Graphic.Z({attributes:{},geometry:e.clone()})}]}doRefresh(){return this.subview?.doRefresh()}_updateSubview(){const e="vector-field"===this.layer.renderer.type?"rasterVF":"flow"===this.layer.renderer.type?"flow":"raster";if(this.subview){if(this.subview.type===e)return void this._attachSubview(this.subview);this._detachSubview(this.subview),this.subview?.destroy(),this.subview=null}const{layer:t}=this;let i;i="rasterVF"===e?new c({layer:t,layerView:this}):"flow"===e?new FlowView2D.Z({layer:t,layerView:this}):new ImageryTileView2D_n({layer:t,layerView:this}),"useWebGLForProcessing"in i&&(i.useWebGLForProcessing=this._useWebGLForProcessing),"useProgressiveUpdate"in i&&(i.useProgressiveUpdate=this._useProgressiveUpdate),"previousLOD"in i&&(i.previousLOD=this.subview&&"previousLOD"in this.subview&&this.subview.previousLOD),this._attachSubview(i),this.subview=i,this.requestUpdate()}_attachSubview(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0),e.container.blendMode=this.layer.blendMode,e.container.effect=this.layer.effect)}_detachSubview(e){e?.attached&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}};(0,tslib_es6._)([(0,property.Cb)()],ImageryTileLayerView2D_f.prototype,"subview",void 0),(0,tslib_es6._)([(0,property.Cb)()],ImageryTileLayerView2D_f.prototype,"useWebGLForProcessing",null),(0,tslib_es6._)([(0,property.Cb)()],ImageryTileLayerView2D_f.prototype,"useProgressiveUpdate",null),ImageryTileLayerView2D_f=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.ImageryTileLayerView2D")],ImageryTileLayerView2D_f);const L=ImageryTileLayerView2D_f},"./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>LayerView2D_y});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Container=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/Container.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js");let t=class extends JSONSupport.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],t.prototype,"version",null),t=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipArea")],t);const p=t;var s;let i=s=class extends p{constructor(t){super(t),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"left",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"right",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"top",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"bottom",void 0),i=s=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipRect")],i);const ClipRect_p=i;__webpack_require__("./node_modules/@arcgis/core/geometry.js");var y,Geometry=__webpack_require__("./node_modules/@arcgis/core/geometry/Geometry.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js");const c={base:Geometry.Z,key:"type",typeMap:{extent:Extent.Z,polygon:Polygon.Z}};let n=y=class extends p{constructor(r){super(r),this.type="geometry",this.geometry=null}clone(){return new y({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,tslib_es6._)([(0,property.Cb)({types:c,json:{read:jsonUtils.im,write:!0}})],n.prototype,"geometry",void 0),n=y=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Geometry")],n);const a=n;let e=class extends p{constructor(r){super(r),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,tslib_es6._)([(0,property.Cb)({type:[[[Number]]],json:{write:!0}})],e.prototype,"path",void 0),e=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Path")],e);const Path_p=e,u=Collection.Z.ofType({key:"type",base:null,typeMap:{rect:ClipRect_p,path:Path_p,geometry:a}}),LayerView2D_y=t=>{let h=class extends t{constructor(){super(...arguments),this.attached=!1,this.clips=new u,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1}initialize(){const e=this.view?.spatialReferenceLocked??!0,t=this.view?.spatialReference;t&&e&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new Error.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new Container.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([(0,reactiveUtils.YP)((()=>this.suspended),(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer?.opacity??1),(e=>{this.container&&(this.container.opacity=e)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(e=>{this.container&&(this.container.blendMode=e)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(e=>{this.container&&(this.container.effect=e)}),reactiveUtils.tX),(0,reactiveUtils.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),reactiveUtils.tX),(0,reactiveUtils.YP)((()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null})),(({scale:e})=>{const t=e&&this.isVisibleAtScale(e);t!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",t)}),reactiveUtils.tX)]),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const e=this.view?.spatialReference;return null==e||this.supportsSpatialReference(e)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this.updatingHandles?.updating)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}isVisibleAtScale(e){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;const{minScale:s,maxScale:i}=t;return(0===s||e<=s)&&(0===i||e>=i)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}supportsSpatialReference(e){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const e=super.getSuspendInfo(),t=!this.spatialReferenceSupported,s=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),s&&(e.outsideScaleRange=s),e}};return(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"attached",void 0),(0,tslib_es6._)([(0,property.Cb)({type:u,set(e){const t=(0,collectionUtils.Z)(e,this._get("clips"),u);this._set("clips",t)}})],h.prototype,"clips",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"moving",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"spatialReferenceSupported",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],h.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],h.prototype,"visibleAtCurrentScale",void 0),h=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.LayerView2D")],h),h}},"./node_modules/@arcgis/core/views/2d/layers/support/util.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JV:()=>r,oq:()=>e});const o=new(__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js").X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function e(t){return o.toJSON(t)}function r(t){const{bandCount:o,attributeTable:e,colormap:n,pixelType:r}=t.rasterInfo;return 1===o&&(null!=e||null!=n||"u8"===r||"s8"===r)}},"./node_modules/@arcgis/core/views/layers/LayerView.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_Evented_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),_core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Identifiable.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let d=class extends((0,_core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_2__.p)((0,_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__.IG)((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__.v)(_core_Evented_js__WEBPACK_IMPORTED_MODULE_1__.Z.EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}get fullOpacity(){return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.Pt)(this.get("layer.opacity"),1)*(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"visible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.Cb)()],d.prototype,"view",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_11__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.j)("esri.views.layers.LayerView")],d);const u=d},"./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>i});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const i=i=>{let c=class extends i{initialize(){this.handles.add((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.on)((()=>this.layer),"refresh",(r=>{this.doRefresh(r.dataChanged).catch((r=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.D_)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__.Z.getLogger(this.declaredClass).error(r)}))})),"RefreshableLayerView")}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],c.prototype,"layer",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_7__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.j)("esri.layers.mixins.RefreshableLayerView")],c),c}}}]);