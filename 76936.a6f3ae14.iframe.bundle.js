/*! For license information please see 76936.a6f3ae14.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[76936],{"./packages/utilities/dist/getImageColorset.js":(__unused_webpack_module,exports)=>{exports.T=void 0;exports.T=el=>{const canvas=document.createElement("canvas");canvas.width=Math.min(500,el.naturalWidth),canvas.height=Math.min(500,el.naturalHeight);const ctx=canvas.getContext("2d");if(null!=ctx){ctx.drawImage(el,0,0,el.naturalWidth,el.naturalHeight,0,0,canvas.width,canvas.height);const data=ctx.getImageData(0,0,canvas.width,canvas.height).data;let r,g,b,light=0,dark=0;const transparent=0===data?.[3];for(let x=0,len=data.length;x<len;x+=4)0!==data[x+3]&&(r=data[x],g=data[x+1],b=data[x+2],Math.max(Math.max(r,g),b)<128?dark++:light++);let ret=(light-dark)/(el.naturalWidth*el.naturalHeight)<0?"dark":"light";return transparent&&(ret+="_transparent"),ret}return"light"}},"./packages/media/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Hc:()=>AxAudioPlayer,Lo:()=>AxImageViewer,Iq:()=>AxVideoPlayer});var Icons,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist=__webpack_require__("./packages/core/dist/index.js"),HotKeyWrapper=__webpack_require__("./packages/core/dist/hotkeys/HotKeyWrapper.js"),react=__webpack_require__("./node_modules/react/index.js");!function(Icons){Icons.iconRotateCW="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,5.55Z",Icons.iconRotateCCW="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z",Icons.iconFitToView="M20,2H4C2.89,2 2,2.89 2,4V20C2,21.11 2.89,22 4,22H20C21.11,22 22,21.11 22,20V4C22,2.89 21.11,2 20,2M20,20H4V4H20M13,8V10H11V8H9L12,5L15,8M16,15V13H14V11H16V9L19,12M10,13H8V15L5,12L8,9V11H10M15,16L12,19L9,16H11V14H13V16",Icons.iconSrt="M18,11H16.5V10.5H14.5V13.5H16.5V13H18V14A1,1 0 0,1 17,15H14A1,1 0 0,1 13,14V10A1,1 0 0,1 14,9H17A1,1 0 0,1 18,10M11,11H9.5V10.5H7.5V13.5H9.5V13H11V14A1,1 0 0,1 10,15H7A1,1 0 0,1 6,14V10A1,1 0 0,1 7,9H10A1,1 0 0,1 11,10M19,4H5C3.89,4 3,4.89 3,6V18A2,2 0 0,0 5,20H19A2,2 0 0,0 21,18V6C21,4.89 20.1,4 19,4Z",Icons.iconAspect="M19,12H17V15H14V17H19V12M7,9H10V7H5V12H7V9M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3M21,19H3V5H21V19Z",Icons.iconZoomer="M15 0.004c-4.97 0-9 4.030-9 9 0 1.52 0.38 2.95 1.046 4.206l-6.258 6.256 0.005 0.005c-0.489 0.481-0.794 1.147-0.794 1.887 0 1.462 1.185 2.647 2.647 2.647 0.739 0 1.406-0.304 1.886-0.794l-0.002-0.001 6.256-6.255c1.257 0.668 2.689 1.050 4.213 1.050 4.97 0 9-4.030 9-9s-4.030-9-9-9zM3.596 22.273c-0.241 0.25-0.576 0.407-0.95 0.407-0.731 0-1.324-0.592-1.324-1.323 0-0.373 0.157-0.707 0.407-0.95l-0.007-0.006 6.050-6.050c0.529 0.713 1.159 1.343 1.87 1.874l-6.047 6.047zM15 16.505c-4.142 0-7.5-3.359-7.5-7.5s3.358-7.5 7.5-7.5c4.141 0 7.5 3.358 7.5 7.5s-3.359 7.5-7.5 7.5zM15 3.754c0.206 0 0.375 0.168 0.375 0.375s-0.169 0.375-0.375 0.375c-2.486 0-4.5 2.015-4.5 4.5 0 0.207-0.168 0.375-0.375 0.375s-0.375-0.168-0.375-0.375c0-2.9 2.35-5.25 5.25-5.25z",Icons.iconOrient="M7.34,6.41L0.86,12.9L7.35,19.38L13.84,12.9L7.34,6.41M3.69,12.9L7.35,9.24L11,12.9L7.34,16.56L3.69,12.9M19.36,6.64C17.61,4.88 15.3,4 13,4V0.76L8.76,5L13,9.24V6C14.79,6 16.58,6.68 17.95,8.05C20.68,10.78 20.68,15.22 17.95,17.95C16.58,19.32 14.79,20 13,20C12.03,20 11.06,19.79 10.16,19.39L8.67,20.88C10,21.62 11.5,22 13,22C15.3,22 17.61,21.12 19.36,19.36C22.88,15.85 22.88,10.15 19.36,6.64Z",Icons.iconCrop="M7,17V1H5V5H1V7H5V17A2,2 0 0,0 7,19H17V23H19V19H23V17M17,15H19V7C19,5.89 18.1,5 17,5H9V7H17V15Z",Icons.iconImage="M17 12C17 12.54 16.9 13.05 16.74 13.54L15 11.78C14.87 10.3 13.7 9.13 12.22 9L10.46 7.26C10.95 7.1 11.46 7 12 7C14.76 7 17 9.24 17 12M9.88 4H14.12L15.95 6H20V16.8L21.88 18.68C21.96 18.47 22 18.24 22 18V6C22 4.89 21.11 4 20 4H16.83L15 2H9L7.18 4L8.6 5.4L9.88 4M22.11 21.46L20.84 22.73L18.11 20H4C2.9 20 2 19.11 2 18V6C2 5.42 2.25 4.9 2.65 4.54L1.11 3L2.39 1.73L22.11 21.46M9 12C9 13.66 10.34 15 12 15C12.33 15 12.65 14.93 12.94 14.83L9.17 11.06C9.07 11.36 9 11.67 9 12M16.11 18L14.45 16.34C13.72 16.75 12.89 17 12 17C9.24 17 7 14.76 7 12C7 11.11 7.25 10.28 7.66 9.55L4.11 6H4V18H16.11Z",Icons.iconVideo="M3.41,1.86L2,3.27L4.73,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16C16.21,18 16.39,17.92 16.55,17.82L19.73,21L21.14,19.59L12.28,10.73L3.41,1.86M5,16V8H6.73L14.73,16H5M15,8V10.61L21,16.61V6.5L17,10.5V7A1,1 0 0,0 16,6H10.39L12.39,8H15Z",Icons.iconAudio="M19,11C19,12.19 18.66,13.3 18.1,14.28L16.87,13.05C17.14,12.43 17.3,11.74 17.3,11H19M15,11.16L9,5.18V5A3,3 0 0,1 12,2A3,3 0 0,1 15,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27 13.91,17.58 13,17.72V21H11V17.72C7.72,17.23 5,14.41 5,11H6.7C6.7,14 9.24,16.1 12,16.1C12.81,16.1 13.6,15.91 14.31,15.58L12.65,13.92L12,14A3,3 0 0,1 9,11V10.28L3,4.27L4.27,3Z",Icons.iconNsfw="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z",Icons.iconSplitter="M3 15V17H5V15M15 19V21H17V19M19 3H5C3.9 3 3 3.9 3 5V9H5V5H19V9H21V5C21 3.9 20.1 3 19 3M21 19H19V21C20.1 21 21 20.1 21 19M1 11V13H23V11M7 19V21H9V19M19 15V17H21V15M11 19V21H13V19M3 19C3 20.1 3.9 21 5 21V19Z",Icons.iconPlay="M8,5.14V19.14L19,12.14L8,5.14Z",Icons.iconPause="M14,19H18V5H14M6,19H10V5H6V19Z",Icons.iconEqs="M7 3H5V9H7V3M19 3H17V13H19V3M3 13H5V21H7V13H9V11H3V13M15 7H13V3H11V7H9V9H15V7M11 21H13V11H11V21M15 15V17H17V21H19V17H21V15H15Z",Icons.iconChannel="M12,12A3,3 0 0,0 9,15A3,3 0 0,0 12,18A3,3 0 0,0 15,15A3,3 0 0,0 12,12M12,20A5,5 0 0,1 7,15A5,5 0 0,1 12,10A5,5 0 0,1 17,15A5,5 0 0,1 12,20M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8C10.89,8 10,7.1 10,6C10,4.89 10.89,4 12,4M17,2H7C5.89,2 5,2.89 5,4V20A2,2 0 0,0 7,22H17A2,2 0 0,0 19,20V4C19,2.89 18.1,2 17,2Z",Icons.iconVolumeMute="M3,9H7L12,4V20L7,15H3V9M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z",Icons.iconVolumeLow="M7,9V15H11L16,20V4L11,9H7Z",Icons.iconVolumeMedium="M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z",Icons.iconVolumeFull="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"}(Icons||(Icons={}));const Loading=(0,react.memo)((({wavesurfer})=>{const[progress,setProgress]=(0,react.useState)(0);return(0,react.useEffect)((()=>(wavesurfer.instance.on("loading",setProgress),()=>{wavesurfer.instance.un("loading",setProgress)})),[wavesurfer]),(0,jsx_runtime.jsx)(dist.dt.Circle,{value:progress})}));Loading.displayName="AxAudio.Loading";try{Loading.displayName="AxAudio.Loading",Loading.__docgenInfo={description:"",displayName:"AxAudio.Loading",props:{wavesurfer:{defaultValue:null,description:"",name:"wavesurfer",required:!0,type:{name:"{ loadAudio: (src: string) => Promise<void>; destroy: () => void; setColors: (colors?: [wave: string, progress: string][] | undefined) => void; setRegions: (regions?: { id: string; start: number; end: number; channel?: number | undefined; }[] | undefined) => void; instance: WaveSurfer; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/Loading.tsx#AxAudio.Loading"]={docgenInfo:AxAudio.Loading.__docgenInfo,name:"AxAudio.Loading",path:"packages/media/src/audio/Loading.tsx#AxAudio.Loading"})}catch(__react_docgen_typescript_loader_error){}var utilities_dist=__webpack_require__("./packages/utilities/dist/index.js"),ResizeObserver_es=__webpack_require__("./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js");const TimeSlider=({duration=0,time=0,markers=[],onChange})=>{const canvasRef=(0,react.useRef)(null),drawMarkers=(0,react.useCallback)((()=>{const context=canvasRef.current?.getContext("2d");null!=context&&duration>0&&markers.forEach((marker=>{const[time,size]=marker,{width,height}=context?.canvas,left=time/duration*width,h=height*size;context&&(context.strokeStyle="#fc0000"),context?.strokeRect(left,height-h,1,h)}))}),[markers,duration]);return(0,react.useEffect)((()=>{const ob=new ResizeObserver_es.A((()=>{null!=canvasRef.current&&(canvasRef.current.width=canvasRef.current.offsetWidth,canvasRef.current.height=canvasRef.current.offsetHeight,drawMarkers())}));return null!=canvasRef.current&&ob.observe(canvasRef.current),()=>{ob.disconnect()}}),[drawMarkers]),(0,react.useEffect)((()=>{const context=canvasRef.current?.getContext("2d");return drawMarkers(),()=>{context?.clearRect(0,0,context.canvas.width,context.canvas.height)}}),[drawMarkers]),(0,jsx_runtime.jsxs)("div",{className:"ax-media__slider",children:[(0,jsx_runtime.jsx)("input",{type:"range",min:0,max:duration,step:.1,value:time,onChange:e=>onChange(e.currentTarget.valueAsNumber)}),(0,jsx_runtime.jsx)("canvas",{ref:canvasRef})]})};try{TimeSlider.displayName="TimeSlider",TimeSlider.__docgenInfo={description:"",displayName:"TimeSlider",props:{time:{defaultValue:{value:"0"},description:"",name:"time",required:!1,type:{name:"number"}},markers:{defaultValue:{value:"[]"},description:"",name:"markers",required:!1,type:{name:"number[][]"}},duration:{defaultValue:{value:"0"},description:"",name:"duration",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(e: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/timeslider/TimeSlider.tsx#TimeSlider"]={docgenInfo:TimeSlider.__docgenInfo,name:"TimeSlider",path:"packages/media/src/timeslider/TimeSlider.tsx#TimeSlider"})}catch(__react_docgen_typescript_loader_error){}var form_dist=__webpack_require__("./packages/form/dist/index.js");const EQ_FREQUENCY=[32,64,128,256,512,1e3,2e3,4e3,6e3,8e3,12e3,16e3],EqSlider=(0,react.memo)((({index,value,label,onChange,color="",forChannel=!1})=>(0,jsx_runtime.jsx)("div",{style:{width:"2.5rem"},"data-negative":0===value?"zero":value<0,"data-for-channel":forChannel,dir:"left"===index?"rtl":"ltr",children:(0,jsx_runtime.jsx)(form_dist.w.Slider,{isVertical:!0,step:1,height:128,value,showLabels:!0,color,"data-channel":forChannel,maxLabel:`${!forChannel&&value>0?"+":""}${~~value}`,minLabel:label,isInvalid:value<0,min:forChannel?0:-40,max:forChannel?100:40,onChange:e=>onChange(index,e)})})));EqSlider.displayName="AxAudio.EQSlider";const Equalizers=(0,react.memo)((({isVisible=!1,wavesurfer})=>{const[filters,setFilters]=(0,react.useState)([]),[channelGains,setChannelGains]=(0,react.useState)(),createFilters=(0,react.useCallback)((()=>{if(wavesurfer){const EQ=[{f:EQ_FREQUENCY[0],name:"32",type:"lowshelf"},{f:EQ_FREQUENCY[1],name:"64",type:"peaking"},{f:EQ_FREQUENCY[2],name:"128",type:"peaking"},{f:EQ_FREQUENCY[3],name:"256",type:"peaking"},{f:EQ_FREQUENCY[4],name:"512",type:"peaking"},{f:EQ_FREQUENCY[5],name:"1k",type:"peaking"},{f:EQ_FREQUENCY[6],name:"2k",type:"peaking"},{f:EQ_FREQUENCY[7],name:"4k",type:"peaking"},{f:EQ_FREQUENCY[8],name:"6k",type:"peaking"},{f:EQ_FREQUENCY[9],name:"8k",type:"peaking"},{f:EQ_FREQUENCY[10],name:"12k",type:"highshelf"},{f:EQ_FREQUENCY[11],name:"16k",type:"highshelf"}],backendAc=wavesurfer.instance.backend.getAudioContext(),_filters=EQ.map((function(band){const filter=backendAc.createBiquadFilter();return filter.type=band.type,filter.gain.value=0,filter.Q.value=1,filter.frequency.value=band.f,filter})),splitFilters=[],gainNodes=[],channels=wavesurfer.instance.backend.buffer.numberOfChannels??1;if(channels>1){const channelSplitterNode=backendAc.createChannelSplitter(channels),channelMergerNode=backendAc.createChannelMerger(channels);splitFilters.push(channelSplitterNode);for(let idx=0;idx<channels;idx++){const gainNode=backendAc.createGain();channelSplitterNode.connect(gainNode,idx),gainNode.gain.value=1,gainNode.connect(channelMergerNode,0,idx),splitFilters.push(gainNode),gainNodes.push(gainNode)}setChannelGains(gainNodes),splitFilters.push(channelMergerNode)}wavesurfer.instance.backend.setFilters([..._filters,...splitFilters]),setFilters(_filters)}}),[]);(0,react.useEffect)((()=>{if(wavesurfer)return wavesurfer.instance.on("ready",createFilters),()=>{try{wavesurfer.instance.backend.disconnectFilters()}catch(e){}}}),[wavesurfer]);const updateFilters=(0,react.useCallback)(((index,value)=>{const f=[...filters];f[index].gain.value=~~value,setFilters([...f])}),[filters]),reset=(0,react.useCallback)((()=>{setFilters(filters.map((f=>(f.gain.value=0,f))))}),[filters]),resetFrequency=(0,react.useCallback)((fq=>{const isSpeech="speech"===fq;setFilters(filters.map((f=>(f.frequency.value===EQ_FREQUENCY[0]&&(f.gain.value=isSpeech?-40:0),f.frequency.value===EQ_FREQUENCY[1]&&(f.gain.value=isSpeech?-30:10),f.frequency.value===EQ_FREQUENCY[2]&&(f.gain.value=isSpeech?-20:30),f.frequency.value===EQ_FREQUENCY[3]&&(f.gain.value=isSpeech?0:10),f.frequency.value===EQ_FREQUENCY[4]&&(f.gain.value=isSpeech?20:-20),f.frequency.value===EQ_FREQUENCY[5]&&(f.gain.value=isSpeech?20:-40),f.frequency.value===EQ_FREQUENCY[6]&&(f.gain.value=isSpeech?20:-40),f.frequency.value===EQ_FREQUENCY[7]&&(f.gain.value=isSpeech?20:-20),f.frequency.value===EQ_FREQUENCY[8]&&(f.gain.value=isSpeech?0:10),f.frequency.value===EQ_FREQUENCY[9]&&(f.gain.value=isSpeech?-20:30),f.frequency.value===EQ_FREQUENCY[10]&&(f.gain.value=isSpeech?-30:10),f.frequency.value===EQ_FREQUENCY[11]&&(f.gain.value=isSpeech?-40:0),f))))}),[filters]),toggleChannel=(0,react.useCallback)(((channel,value)=>{if(null!=channelGains){channelGains[channel].gain.value=value/100,setChannelGains([...channelGains])}}),[channelGains]);return isVisible?(0,jsx_runtime.jsxs)("div",{className:"ax-audio__equalizers",children:[null!=channelGains&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[channelGains.map(((gainNode,idx)=>(0,jsx_runtime.jsx)(EqSlider,{forChannel:!0,index:idx,label:(0,jsx_runtime.jsx)(dist.T3,{size:"1.25rem",onClick:()=>toggleChannel(idx,gainNode.gain.value>0?0:100),icon:Icons.iconChannel,color:wavesurfer.instance.getProgressColor(idx)}),value:100*gainNode.gain.value,onChange:toggleChannel,color:wavesurfer.instance.getProgressColor(idx)},idx))),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0})]}),filters.map(((filter,index)=>(0,jsx_runtime.jsx)(EqSlider,{index,label:filter.name,value:filter.gain.value,onChange:updateFilters},index))),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0}),(0,jsx_runtime.jsxs)("div",{style:{width:196},className:"self-center",children:[(0,jsx_runtime.jsx)(dist.nw,{className:"text-muted text-sm text-center",children:"Presets"}),(0,jsx_runtime.jsx)(dist.MR,{fullWidth:!0,onClick:()=>resetFrequency("speech"),children:"Speech"}),(0,jsx_runtime.jsx)(dist.MR,{fullWidth:!0,onClick:()=>resetFrequency("back"),children:"Background Noise"}),(0,jsx_runtime.jsx)(dist.MR,{fullWidth:!0,onClick:reset,color:"danger",children:"Reset"})]})]}):null}));Equalizers.displayName="AxAudio.Equalizers";try{Equalizers.displayName="AxAudio.EQSlider",Equalizers.__docgenInfo={description:"",displayName:"AxAudio.EQSlider",props:{isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}},wavesurfer:{defaultValue:null,description:"",name:"wavesurfer",required:!0,type:{name:"{ loadAudio: (src: string) => Promise<void>; destroy: () => void; setColors: (colors?: [wave: string, progress: string][] | undefined) => void; setRegions: (regions?: { id: string; start: number; end: number; channel?: number | undefined; }[] | undefined) => void; instance: WaveSurfer; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/Equalizers.tsx#AxAudio.EQSlider"]={docgenInfo:AxAudio.EQSlider.__docgenInfo,name:"AxAudio.EQSlider",path:"packages/media/src/audio/Equalizers.tsx#AxAudio.EQSlider"})}catch(__react_docgen_typescript_loader_error){}const Tools=(0,react.memo)((({isPlaying,isDisabled,wavesurfer})=>{const[time,setTime]=(0,react.useState)(0),[speed,setSpeed]=(0,react.useState)(0),[volume,setVolume]=(0,react.useState)(0),[duration,setDuration]=(0,react.useState)(0),[showEqs,setShowEqs]=(0,react.useState)(!1);(0,react.useEffect)((()=>{const timeChange=()=>setTime(wavesurfer.instance.getCurrentTime()??0),reset=()=>{setDuration(wavesurfer.instance.getDuration()??0),setVolume(wavesurfer.instance.getVolume()??.5),setSpeed(wavesurfer.instance.getPlaybackRate()??1)};return wavesurfer.instance.on("audioprocess",timeChange),wavesurfer.instance.on("seek",timeChange),wavesurfer.instance.on("ready",reset),()=>{wavesurfer.instance.un("audioprocess",timeChange),wavesurfer.instance.un("seek",timeChange),wavesurfer.instance.un("ready",reset)}}),[]);const handleSeek=(0,react.useCallback)(((newTime=0)=>{const time=Math.min(duration,Math.max(0,newTime));setTime(time),wavesurfer.instance.setCurrentTime(time)}),[duration]),handleVolume=(0,react.useCallback)(((newVolume=0)=>{const volume=Math.min(1,Math.max(0,newVolume));setVolume(volume),wavesurfer.instance.setVolume(volume)}),[]),handleSpeed=(0,react.useCallback)(((newSpeed=0)=>{const speed=Math.min(5,Math.max(0,newSpeed));setSpeed(speed),wavesurfer.instance.setPlaybackRate(speed)}),[]),volumeIcon=(0,react.useMemo)((()=>volume>.75?Icons.iconVolumeFull:volume>.4?Icons.iconVolumeMedium:volume>0?Icons.iconVolumeLow:Icons.iconVolumeMute),[volume]);return(0,jsx_runtime.jsxs)("div",{className:"ax-media__tools","data-disabled":isDisabled,children:[(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"space",handler:()=>{isPlaying?wavesurfer.instance.pause():wavesurfer.instance.play()?.then()}}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"x",handler:handleVolume}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:",",handler:()=>handleSeek(time-5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:".",handler:()=>handleSeek(time+5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"[",handler:()=>handleSpeed(speed-.5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"]",handler:()=>handleSpeed(speed+.5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"-",handler:()=>handleVolume(volume-.1)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"=",handler:()=>handleVolume(volume+.1)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+<",handler:()=>handleSeek(time-.165)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+>",handler:()=>handleSeek(time+.165)}),(0,jsx_runtime.jsxs)("div",{className:"toolbar",children:[isPlaying&&(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconPause,onClick:()=>wavesurfer.instance.pause()}),!isPlaying&&(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconPlay,onClick:()=>{wavesurfer.instance.play()}}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:volumeIcon,onClick:()=>handleVolume(1===volume?0:volume>=.5?1:.5)}),(0,jsx_runtime.jsx)("div",{className:"ax-media__slider--mini",children:(0,jsx_runtime.jsx)("input",{type:"range",min:0,max:1,step:.1,value:volume,onChange:e=>handleVolume(e.currentTarget.valueAsNumber)})}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool text-icon",icon:`${speed.toFixed(1)}x`,onClick:()=>handleSpeed(1)}),(0,jsx_runtime.jsx)("div",{className:"ax-media__slider--mini",children:(0,jsx_runtime.jsx)("input",{type:"range",min:.5,max:5,step:.5,value:speed,onChange:e=>handleSpeed(e.currentTarget.valueAsNumber)})}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(TimeSlider,{duration,time,onChange:handleSeek}),(0,jsx_runtime.jsxs)("label",{className:"ax-video__timeDisplay",children:[(0,jsx_runtime.jsx)("span",{children:utilities_dist.Format.duration(time,!0)}),(0,jsx_runtime.jsx)("small",{children:"/"}),(0,jsx_runtime.jsx)("span",{children:utilities_dist.Format.durationSeconds(duration,!0)})]}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(dist.T3,{"data-active":showEqs,className:"ax-media__tool",icon:Icons.iconEqs,onClick:()=>setShowEqs(!showEqs)})]}),(0,jsx_runtime.jsx)(Equalizers,{isVisible:showEqs,wavesurfer})]})}));Tools.displayName="AxAudio.Tools";try{Tools.displayName="AxAudio.Tools",Tools.__docgenInfo={description:"",displayName:"AxAudio.Tools",props:{isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}},wavesurfer:{defaultValue:null,description:"",name:"wavesurfer",required:!0,type:{name:"{ loadAudio: (src: string) => Promise<void>; destroy: () => void; setColors: (colors?: [wave: string, progress: string][] | undefined) => void; setRegions: (regions?: { id: string; start: number; end: number; channel?: number | undefined; }[] | undefined) => void; instance: WaveSurfer; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/Tools.tsx#AxAudio.Tools"]={docgenInfo:AxAudio.Tools.__docgenInfo,name:"AxAudio.Tools",path:"packages/media/src/audio/Tools.tsx#AxAudio.Tools"})}catch(__react_docgen_typescript_loader_error){}var wavesurfer=__webpack_require__("./node_modules/wavesurfer.js/dist/wavesurfer.js"),wavesurfer_default=__webpack_require__.n(wavesurfer),wavesurfer_cursor=__webpack_require__("./node_modules/wavesurfer.js/dist/plugin/wavesurfer.cursor.js"),wavesurfer_cursor_default=__webpack_require__.n(wavesurfer_cursor),wavesurfer_regions=__webpack_require__("./node_modules/wavesurfer.js/dist/plugin/wavesurfer.regions.js"),wavesurfer_regions_default=__webpack_require__.n(wavesurfer_regions),wavesurfer_timeline=__webpack_require__("./node_modules/wavesurfer.js/dist/plugin/wavesurfer.timeline.js"),wavesurfer_timeline_default=__webpack_require__.n(wavesurfer_timeline);const CHANNEL_COLORS=[["#75BBC1","#108188"],["#74a9cf","#0570b0"],["#8c96c6","#88419d"],["#df65b0","#ae017e"],["#fa9fb5","#ce1256"],["#fdbb84","#ef6548"],["#fec44f","#cc4c02"],["#bf812d","#543005"]],AxAudioPlayer=(0,react.forwardRef)((({src,regions=[],colors,onLoad,onError,onChange,onPause,onPlay,onRegionStart,onRegionEnd},ref)=>{const[,startTransition]=(0,react.useTransition)(),containerRef=(0,react.useRef)(null),timelineRef=(0,react.useRef)(null),[wavesurfer,setWavesurfer]=(0,react.useState)(),initState=(0,react.useCallback)((()=>({isLoading:!0,isErrored:!1,isPlaying:!1})),[]),reducer=(0,react.useCallback)(((state,action)=>("init"===action.type&&(state=initState()),"loaded"===action.type&&(state.isLoading=!1,state.isErrored=!1),"errored"===action.type&&(state.isErrored=!0,state.isLoading=!1),"play"===action.type&&(state.isPlaying=!0),"pause"===action.type&&(state.isPlaying=!1),{...state})),[initState]),[state,dispatch]=(0,react.useReducer)(reducer,{isLoading:!1,isErrored:!1,isPlaying:!1},initState);return(0,react.useImperativeHandle)(ref,(()=>({play:async()=>await(wavesurfer?.instance.play()),pause:()=>wavesurfer?.instance.pause(),playRegion:async(start,end)=>await(wavesurfer?.instance.play(start,end))})),[wavesurfer]),(0,react.useEffect)((()=>{const surfer=((container,timeline)=>{const logger=(0,utilities_dist.useLogger)("WaveSurfer"),plugins=[wavesurfer_cursor_default().create({showTime:!0,opacity:1,width:"2px",style:"dashed"}),wavesurfer_regions_default().create({dragSelection:!0,color:"rgb(136 87 44 / 20%)",handleStyle:{left:{width:"1px",backgroundColor:"rgb(136 87 44 / 50%)"},right:{width:"1px",backgroundColor:"rgb(136 87 44 / 50%)"}}})];null!=timeline&&plugins.push(wavesurfer_timeline_default().create({container:timeline,primaryColor:"#B8BFCD",primaryFontColor:"#B8BFCD",secondaryColor:"#D5DBE5",secondaryFontColor:"#D5DBE5"})),logger.debug("create instance");const instance=wavesurfer_default().create({container,scrollParent:!0,responsive:!0,backend:"WebAudio",cursorWidth:2,height:200,barWidth:2,barRadius:3,barGap:1,splitChannels:!0,splitChannelsOptions:{overlay:!1,filterChannels:[],channelColors:CHANNEL_COLORS.reduce(((ret,c,i)=>({...ret,[i]:{progressColor:c[1],waveColor:c[0]}})),{})},xhr:{mode:"cors"},plugins});return instance.on("ready",(()=>{const channels=instance.backend.buffer.numberOfChannels;instance.setHeight(200/channels)})),instance.on("error",(err=>{logger.debug("error",err)})),instance.on("region-click",(region=>{const{id,start,end}=region;logger.debug("play region",{id,start,end}),region.play()})),instance.on("region-update-end",(region=>{const{start,end}=region;logger.debug("Region",{start,end}),region.play(),region.remove()})),{loadAudio:async src=>{const tmr=logger.timer("load audio");if(instance){try{instance.setVolume(.5)}catch(_){}try{instance.setPlaybackRate(1)}catch(_){}try{instance.regions.clear()}catch(_){}return await new Promise((resolve=>{instance.load(src,void 0,void 0,void 0),instance.once("ready",(()=>{tmr.end(),resolve()}))}))}return await Promise.resolve()},destroy:()=>{try{instance?.destroy()}catch(_){}},setColors:colors=>{colors?.forEach((([wave,progress],idx)=>{instance?.setWaveColor(wave,idx),instance?.setProgressColor(progress,idx)}))},setRegions:regions=>{instance.regions.clear(),regions?.forEach((({channel=-1,...region})=>{instance.regions.add({...region,channelIdx:channel,color:CHANNEL_COLORS[channel][0],drag:!1,resize:!1})}))},instance}})(containerRef.current,timelineRef.current);return setWavesurfer(surfer),()=>{surfer.destroy()}}),[]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handler=()=>{dispatch({type:"loaded"}),startTransition((()=>onLoad?.()))};return wavesurfer.instance.on("ready",handler),()=>{wavesurfer.instance.un("ready",handler)}}}),[wavesurfer,onLoad]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handler=()=>{dispatch({type:"errored"}),startTransition((()=>onError?.()))};return wavesurfer.instance.on("error",handler),()=>{wavesurfer.instance.un("error",handler)}}}),[wavesurfer,onError]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handler=()=>{dispatch({type:"play"}),startTransition((()=>onPlay?.()))};return wavesurfer.instance.on("play",handler),()=>{wavesurfer.instance.un("play",handler)}}}),[wavesurfer,onPlay]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handler=()=>{dispatch({type:"pause"}),startTransition((()=>onPause?.()))};return wavesurfer.instance.on("pause",handler),()=>{wavesurfer.instance.un("pause",handler)}}}),[wavesurfer,onPause]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handler=()=>{startTransition((()=>onChange?.(wavesurfer.instance.getCurrentTime())))};return wavesurfer.instance.on("audioprocess",handler),()=>{wavesurfer.instance.un("audioprocess",handler)}}}),[wavesurfer,onPause]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handleIn=region=>{startTransition((()=>onRegionStart?.(region.id)))},handleOut=region=>{startTransition((()=>onRegionEnd?.(region.id)))};return wavesurfer.instance.on("region-in",handleIn),wavesurfer.instance.on("region-out",handleOut),()=>{wavesurfer.instance.un("region-in",handleIn),wavesurfer.instance.un("region-out",handleOut)}}}),[wavesurfer,onRegionStart,onRegionEnd]),(0,react.useLayoutEffect)((()=>{null!=wavesurfer&&wavesurfer.setColors(colors)}),[wavesurfer,colors]),(0,react.useLayoutEffect)((()=>{wavesurfer?.instance.isReady?wavesurfer.setRegions(regions):wavesurfer?.instance.once("ready",(()=>{wavesurfer.setRegions(regions)}))}),[wavesurfer,regions]),(0,react.useLayoutEffect)((()=>{null!=wavesurfer&&(dispatch({type:"init"}),startTransition((()=>{wavesurfer.loadAudio(src)})))}),[src,wavesurfer]),(0,jsx_runtime.jsx)(HotKeyWrapper.O1,{children:(0,jsx_runtime.jsxs)("div",{className:"ax-media ax-audio","data-error":state.isErrored,onContextMenuCapture:e=>e.preventDefault(),children:[(0,jsx_runtime.jsx)("div",{className:"ax-audio__container",ref:containerRef}),(0,jsx_runtime.jsx)("div",{className:"ax-audio__timeline",ref:timelineRef}),null!=wavesurfer&&(0,jsx_runtime.jsx)(Tools,{isDisabled:state.isErrored||state.isLoading,isPlaying:state.isPlaying,wavesurfer}),state.isLoading&&null!=wavesurfer&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(Loading,{wavesurfer})}),state.isErrored&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(dist.T3,{size:48,icon:Icons.iconAudio})})]})})}));AxAudioPlayer.displayName="AxAudio.Player";try{AxAudioPlayer.displayName="AxAudio.Player",AxAudioPlayer.__docgenInfo={description:"",displayName:"AxAudio.Player",props:{onChange:{defaultValue:null,description:"onChange playback time",name:"onChange",required:!1,type:{name:"((currentTime: number) => void)"}},colors:{defaultValue:null,description:"channel colors",name:"colors",required:!1,type:{name:"[wave: string, progress: string][]"}},src:{defaultValue:null,description:"audio src url",name:"src",required:!0,type:{name:"string"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(() => void)"}},onPause:{defaultValue:null,description:"",name:"onPause",required:!1,type:{name:"(() => void)"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}},regions:{defaultValue:{value:"[]"},description:"scene list",name:"regions",required:!1,type:{name:"{ id: string; start: number; end: number; channel?: number; }[]"}},onRegionStart:{defaultValue:null,description:"",name:"onRegionStart",required:!1,type:{name:"((id: string) => void)"}},onRegionEnd:{defaultValue:null,description:"",name:"onRegionEnd",required:!1,type:{name:"((id: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/AudioPlayer.tsx#AxAudio.Player"]={docgenInfo:AxAudio.Player.__docgenInfo,name:"AxAudio.Player",path:"packages/media/src/audio/AudioPlayer.tsx#AxAudio.Player"})}catch(__react_docgen_typescript_loader_error){}var getImageColorset=__webpack_require__("./packages/utilities/dist/getImageColorset.js");const NsfwOverlay=({isNsfw=!1})=>{const[showNsfw,setShowNsfw]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{setShowNsfw(!!isNsfw)}),[isNsfw]),showNsfw?(0,jsx_runtime.jsx)("div",{className:"ax-media__nsfw",onClick:e=>(setShowNsfw(!1),e.stopPropagation(),e.preventDefault),children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{children:"Not Safe For Work"}),(0,jsx_runtime.jsx)(dist.T3,{size:48,icon:Icons.iconNsfw}),(0,jsx_runtime.jsx)("div",{children:"Click to view"})]})}):null};try{NsfwOverlay.displayName="NsfwOverlay",NsfwOverlay.__docgenInfo={description:"",displayName:"NsfwOverlay",props:{isNsfw:{defaultValue:{value:"false"},description:"",name:"isNsfw",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/nsfw/NsfwOverlay.tsx#NsfwOverlay"]={docgenInfo:NsfwOverlay.__docgenInfo,name:"NsfwOverlay",path:"packages/media/src/nsfw/NsfwOverlay.tsx#NsfwOverlay"})}catch(__react_docgen_typescript_loader_error){}const Canvas=(0,react.memo)((({style,media,canvas})=>{const canvasRef=(0,react.useRef)(null),getRatio=(0,react.useCallback)((()=>{const mediaEl=media.current;let ratio=1;return mediaEl instanceof HTMLImageElement&&(ratio=Math.min(mediaEl.width/mediaEl.naturalWidth,mediaEl.height/mediaEl.naturalHeight)),mediaEl instanceof HTMLVideoElement&&(ratio=Math.min(mediaEl.offsetWidth/mediaEl.videoWidth,mediaEl.offsetHeight/mediaEl.videoHeight)),ratio}),[media,style]),hilightArea=(0,react.useCallback)(((box,strokeColor)=>{const ratio=getRatio(),context=canvasRef.current?.getContext("2d");if(null!=context){const[x,y,w,h]=(0,utilities_dist.getBox)(box);context.clearRect(0,0,context.canvas.width,context.canvas.height),context.fillStyle="rgb(0 0 0 / 0.5)",context.globalCompositeOperation="overlay",context.fillRect(0,0,context.canvas.width,context.canvas.height),context.clearRect(x*ratio,y*ratio,w*ratio,h*ratio),context.lineWidth=1,context.strokeStyle=strokeColor??"#fc0",context.strokeRect(x*ratio,y*ratio,w*ratio,h*ratio)}}),[]),hilightPolygon=(0,react.useCallback)(((polygon,strokeColor)=>{const ratio=getRatio(),context=canvasRef.current?.getContext("2d");null!=context&&null!=polygon&&(context.clearRect(0,0,context.canvas.width,context.canvas.height),context.fillStyle="#333333CC",context.fillRect(0,0,context.canvas.width,context.canvas.height),context.globalCompositeOperation="destination-out",context.lineWidth=1,context.beginPath(),polygon.forEach(((box,i)=>{const[x,y]=(0,utilities_dist.getBox)(box);0===i&&context.moveTo(x*ratio,y*ratio),i>0&&context.lineTo(x*ratio,y*ratio)})),context.closePath(),context.stroke(),context.fill(),context.globalCompositeOperation="source-over",context.lineWidth=1,context.strokeStyle=strokeColor??"#fc0",context.beginPath(),polygon.forEach(((box,i)=>{const[x,y]=(0,utilities_dist.getBox)(box);0===i&&context.moveTo(x*ratio,y*ratio),i>0&&context.lineTo(x*ratio,y*ratio)})),context.closePath(),context.stroke())}),[]),[objects,dispatch]=(0,react.useReducer)(((state,action)=>"clear"===action.type?[]:"unhilight"===action.type?[...state]:"drawBox"===action.type?[...state,action.payload]:("hilight"===action.type&&hilightArea(action.payload),"hilightPolygon"===action.type&&hilightPolygon(action.payload),state)),[]);return(0,react.useImperativeHandle)(canvas,(()=>({clear:()=>{dispatch({type:"clear"})},unhilight:()=>{dispatch({type:"unhilight"})},drawBox:(box,options={})=>{dispatch({type:"drawBox",payload:{box,...options}})},drawPolygon:(polygon,options={})=>{dispatch({type:"drawBox",payload:{polygon,...options}})},hilightBox:box=>{dispatch({type:"hilight",payload:box})},hilightPolygon:polygon=>{dispatch({type:"hilightPolygon",payload:polygon})}})),[canvasRef,dispatch]),(0,react.useEffect)((()=>{const context=canvasRef.current?.getContext("2d");context?.clearRect(0,0,context.canvas.width,context.canvas.height);const ratio=getRatio();null!=context&&objects.forEach((({box,polygon,...options})=>{if(box){let[x,y,w,h]=(0,utilities_dist.getBox)(box);if(x*=ratio,y*=ratio,w*=ratio,h*=ratio,context.lineWidth=2,context.strokeStyle=options?.stroke??"#fc0",context.strokeRect(x,y,w,h),options.labelTop){const labelX=x-1;let labelY=y-18;labelY<0&&(labelY+=18),context.fillStyle=options.colorTop??"rgb(0 0 0 / 0.5)",context.fillRect(labelX,labelY,w+2,18),context.fillStyle="#ffffff",context.font="13px sans-serif",context.globalCompositeOperation="screen",context.fillText(`${options.labelTop}`,labelX+2,labelY+15,w-4)}if(context.globalCompositeOperation="source-over",options.labelBottom){const labelX=x-1;let labelY=y+h;labelY>context.canvas.height&&(labelY-=18),context.fillStyle=options.colorBottom??"rgb(0 0 0 / 0.5)",context.fillRect(labelX,labelY,w+2,18),context.fillStyle="#ffffff",context.font="13px sans-serif",context.globalCompositeOperation="screen",context.fillText(`${options.labelBottom}`,labelX+2,labelY+15,w-4)}context.globalCompositeOperation="source-over"}null!=polygon&&(context.lineWidth=2,context.strokeStyle=options?.stroke??"#fc0",context.beginPath(),polygon.forEach(((box,i)=>{const[x,y]=(0,utilities_dist.getBox)(box);0===i&&context.moveTo(x*ratio,y*ratio),i>0&&context.lineTo(x*ratio,y*ratio)})),context.closePath(),context.stroke())}))}),[objects,getRatio]),(0,jsx_runtime.jsx)("canvas",{style,ref:canvasRef,width:style?.width,height:style?.height})}));Canvas.displayName="AxMedia.Canvas";try{Canvas.displayName="AxMedia.Canvas",Canvas.__docgenInfo={description:"",displayName:"AxMedia.Canvas",props:{canvas:{defaultValue:null,description:"",name:"canvas",required:!0,type:{name:"RefObject<CanvasRef | null>"}},media:{defaultValue:null,description:"",name:"media",required:!0,type:{name:"RefObject<HTMLVideoElement | HTMLImageElement | null>"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/canvas/Canvas.tsx#AxMedia.Canvas"]={docgenInfo:AxMedia.Canvas.__docgenInfo,name:"AxMedia.Canvas",path:"packages/media/src/canvas/Canvas.tsx#AxMedia.Canvas"})}catch(__react_docgen_typescript_loader_error){}const Image=(0,react.memo)((({src,imageRef,canvasRef,onLoad,onError,width,height,rotate})=>{const style=(0,react.useMemo)((()=>({"--rotate":`${rotate}deg`,width:rotate%180==0?width:height,height:rotate%180==0?height:width})),[height,width,rotate]);return(0,jsx_runtime.jsxs)("div",{className:"ax-image__container",style:{width,height},onMouseDown:e=>{const target=e.currentTarget;let startX=e.clientX,startY=e.clientY;const doDrag=ev=>{null!=target.parentElement&&(target.parentElement.scrollTop-=Math.floor(ev.clientY-startY),target.parentElement.scrollLeft-=Math.floor(ev.clientX-startX),startX=ev.clientX,startY=ev.clientY,ev.preventDefault(),ev.stopPropagation())};document.addEventListener("mousemove",doDrag),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",doDrag)}),{once:!0})},children:[(0,jsx_runtime.jsx)("img",{ref:imageRef,src,loading:"lazy",alt:"image viewer",crossOrigin:"anonymous",onLoad,onError,style}),(0,jsx_runtime.jsx)(Canvas,{canvas:canvasRef,media:imageRef,style})]})}));Image.displayName="AxImage.Image";try{Image.displayName="AxImage.Image",Image.__docgenInfo={description:"",displayName:"AxImage.Image",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},imageRef:{defaultValue:null,description:"",name:"imageRef",required:!0,type:{name:"RefObject<HTMLImageElement>"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!0,type:{name:"RefObject<CanvasRef>"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!0,type:{name:"ReactEventHandler"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"ReactEventHandler"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Image.tsx#AxImage.Image"]={docgenInfo:AxImage.Image.__docgenInfo,name:"AxImage.Image",path:"packages/media/src/image/Image.tsx#AxImage.Image"})}catch(__react_docgen_typescript_loader_error){}var useIsRtl=__webpack_require__("./packages/core/dist/hooks/useIsRtl.js"),useResize=__webpack_require__("./packages/core/dist/hooks/useResize.js");const ImageOverlay=(0,react.memo)((({src,width,height,rotate,onLoad,onError,containerHeight=0,containerWidth=0})=>{const isRtl=(0,useIsRtl.O)(),[overlaySize,setOverlaySize]=(0,react.useState)(containerHeight/2),overlayRef=(0,react.useRef)(null),resizeHandleRef=(0,react.useRef)(null),[orientVertical,setOrientVertical]=(0,react.useState)(!0);(0,useResize.s)(resizeHandleRef,(({x,y})=>{null!=overlayRef.current&&setOverlaySize(orientVertical?overlayRef.current.offsetHeight+y:overlayRef.current.offsetWidth+x)}),{isVertical:orientVertical});const style=(0,react.useMemo)((()=>({"--rotate":`${rotate}deg`,width:rotate%180==0?width:height,height:rotate%180==0?height:width})),[height,width,rotate]),togglePos=(0,react.useMemo)((()=>{const approx=Math.max(6,Math.min(overlaySize,orientVertical?containerHeight:containerWidth));return isNaN(approx)?0:approx}),[orientVertical,containerHeight,containerWidth,overlaySize]);return(0,react.useEffect)((()=>{const approx=(orientVertical?containerHeight:containerWidth)/2;setOverlaySize(isNaN(approx)?0:approx)}),[orientVertical,containerHeight,containerWidth]),(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"ax-image__overlay",ref:overlayRef,style:{maxHeight:containerHeight,maxWidth:containerWidth,height:orientVertical?overlaySize:void 0,width:orientVertical?void 0:overlaySize},children:[(0,jsx_runtime.jsx)("div",{style:{height:containerHeight,width:containerWidth},children:(0,jsx_runtime.jsx)("div",{style:{width,height},children:(0,jsx_runtime.jsx)("img",{alt:"overlay",src,style,onLoad,onError})})}),(0,jsx_runtime.jsx)("div",{className:"ax-image__overlay--handle","data-orient":orientVertical?"vertical":"horizontal",ref:resizeHandleRef})]}),(0,jsx_runtime.jsx)("div",{className:"ax-image__overlay--orient",style:{top:orientVertical?togglePos:void 0,[isRtl?"right":"left"]:orientVertical?void 0:togglePos},children:(0,jsx_runtime.jsx)(dist.T3,{icon:Icons.iconOrient,"data-orient":orientVertical?"vertical":"horizontal",onClick:()=>setOrientVertical(!orientVertical)})})]})}));ImageOverlay.displayName="AxImage.Overlay";try{ImageOverlay.displayName="AxImage.Overlay",ImageOverlay.__docgenInfo={description:"",displayName:"AxImage.Overlay",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!0,type:{name:"number"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!0,type:{name:"ReactEventHandler"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"ReactEventHandler"}},containerWidth:{defaultValue:null,description:"",name:"containerWidth",required:!1,type:{name:"number"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/ImageOverlay.tsx#AxImage.Overlay"]={docgenInfo:AxImage.Overlay.__docgenInfo,name:"AxImage.Overlay",path:"packages/media/src/image/ImageOverlay.tsx#AxImage.Overlay"})}catch(__react_docgen_typescript_loader_error){}const ZoomMeter=({zoom=0})=>(0,jsx_runtime.jsx)("svg",{viewBox:"0 0 500 500",style:{transform:`rotate(${68-zoom/5*136}deg)`},children:(0,jsx_runtime.jsx)("g",{transform:"scale(1.000000,-1.000000) translate(0,-500)",children:(0,jsx_runtime.jsx)("path",{d:"M 6.555585 21.188976 L 6.206033 20.500752 L 5.931069 19.834808 L 5.658183 19.168236 L 5.483647 18.532660 L 5.310983 17.896956 L 5.236253 17.293136 L 5.163183 16.689588 L 5.163660 16.110546 L 5.204560 15.548065 L 5.380193 14.472769 L 5.680006 13.464121 L 6.102920 12.522391 L 6.360214 12.076632 L 6.643557 11.646527 L 6.958955 11.237889 L 7.274940 10.829952 L 7.633211 10.450260 L 7.991942 10.071186 L 8.392715 9.720167 L 8.793829 9.369659 L 9.226385 9.040140 L 9.672875 8.729473 L 10.119561 8.419139 L 10.728600 8.052173 L 11.337824 7.685547 L 11.947232 7.319261 L 12.414125 7.079228 L 12.881041 6.839244 L 13.351569 6.623566 L 13.822075 6.407840 L 14.481102 6.156440 L 15.139976 5.904688 L 15.798698 5.652584 L 16.316325 5.490216 L 16.833810 5.327490 L 17.357857 5.185334 L 17.878199 5.078665 L 18.398344 4.971415 L 18.913563 4.911351 L 19.428568 4.850547 L 19.938637 4.836624 L 20.448494 4.821812 L 20.954618 4.841725 L 21.456096 4.888389 L 22.438961 5.073664 L 23.395506 5.380906 L 24.326480 5.809479 L 24.782671 6.069101 L 25.228033 6.365643 L 25.650055 6.728418 L 26.072708 7.089754 L 26.464764 7.539958 L 26.857848 7.988786 L 27.221212 8.526661 L 27.586077 9.063272 L 27.929793 9.666561 L 28.248893 10.292745 L 28.499451 10.897620 L 28.751921 11.501923 L 28.911994 12.079034 L 29.073794 12.656040 L 29.142826 13.206701 L 29.213401 13.757626 L 29.214504 14.289353 L 29.178503 14.809326 L 29.021353 15.816494 L 28.749909 16.780372 L 28.363262 17.701238 L 28.126454 18.145561 L 27.864894 18.579316 L 27.572274 18.997106 L 27.280279 19.415558 L 26.946407 19.812367 L 26.613036 20.209761 L 26.237539 20.585334 L 25.862419 20.961392 L 25.455617 21.321038 L 25.034331 21.664433 L 24.613267 22.008145 L 24.035757 22.422734 L 23.458459 22.837647 L 22.881373 23.252883 L 22.436200 23.531134 L 21.991056 23.809431 L 21.540271 24.063807 L 21.089460 24.318138 L 20.453332 24.623024 L 19.817023 24.927572 L 19.180533 25.231781 L 18.676665 25.433822 L 18.172626 25.635518 L 17.659592 25.815748 L 17.146306 25.958175 L 16.632780 26.100036 L 16.118926 26.191356 L 15.604809 26.281952 L 15.090339 26.321697 L 14.575606 26.360566 L 14.060559 26.360857 L 13.546913 26.331059 L 12.529031 26.168953 L 11.524184 25.869482 L 10.533176 25.431927 L 10.043178 25.161173 L 9.561230 24.847002 L 9.097788 24.455393 L 8.635029 24.062253 L 8.197558 23.566372 L 7.761235 23.068989 L 7.351209 22.468977 L 6.942883 21.867552 L 6.555585 21.188976 Z M 8.128964 20.340798 L 8.430380 20.863901 L 9.078392 21.779198 L 9.784754 22.519466 L 10.547516 23.084373 L 10.949539 23.301036 L 11.359791 23.481624 L 12.188675 23.758070 L 13.028262 23.921958 L 13.878136 23.973851 L 14.306846 23.957997 L 14.736425 23.918975 L 15.593316 23.785485 L 16.447223 23.578549 L 17.298256 23.298767 L 17.722750 23.131751 L 18.546958 22.775853 L 19.299136 22.409082 L 20.051111 22.041931 L 20.731369 21.664541 L 21.408622 21.254662 L 22.104835 20.782926 L 22.801280 20.311557 L 23.517074 19.778914 L 23.871345 19.497867 L 24.538501 18.908235 L 25.150844 18.282282 L 25.708829 17.620423 L 25.967585 17.276140 L 26.207558 16.922638 L 26.615338 16.186975 L 26.927424 15.413195 L 27.144456 14.601258 L 27.217529 14.180921 L 27.258076 13.751582 L 27.214924 12.867330 L 27.006667 11.947860 L 26.633944 10.991450 L 26.386100 10.498736 L 26.110720 10.020865 L 25.516615 9.183798 L 24.862969 8.504428 L 24.147993 7.982343 L 23.767040 7.780227 L 23.375731 7.610230 L 22.578153 7.345249 L 21.760204 7.180648 L 20.921500 7.116940 L 20.494284 7.123106 L 20.064447 7.150031 L 19.204835 7.252370 L 18.345341 7.419855 L 17.486062 7.653095 L 17.056550 7.794569 L 16.218143 8.099766 L 15.441560 8.422477 L 14.664798 8.744793 L 13.950131 9.085270 L 13.260955 9.446116 L 12.540911 9.872500 L 11.821075 10.299264 L 11.070728 10.792177 L 10.697878 11.054994 L 9.996374 11.612154 L 9.354146 12.211755 L 8.771633 12.854219 L 8.502913 13.191636 L 8.254025 13.541062 L 7.830236 14.279563 L 7.505661 15.071027 L 7.280999 15.915419 L 7.206362 16.357401 L 7.166385 16.812337 L 7.219044 17.760047 L 7.449200 18.757028 L 7.857645 19.801470 L 8.128964 20.340798 Z M 30.877823 39.309891 L 30.652729 38.925903 L 30.428938 38.091225 L 30.430419 37.641253 L 30.505041 37.210712 L 30.864912 36.530358 L 31.149430 36.280217 L 31.496506 36.092890 L 32.274053 35.972158 L 32.704451 36.037968 L 33.126644 36.179810 L 33.839185 36.668958 L 34.130202 37.016630 L 34.351651 37.393978 L 34.574214 38.216586 L 34.575516 38.662551 L 34.505599 39.091448 L 34.156939 39.776412 L 33.877464 40.032160 L 33.534194 40.226389 L 32.757752 40.359696 L 32.324497 40.297990 L 31.897754 40.157639 L 31.174076 39.663410 L 30.877823 39.309891 Z M 44.425035 56.692265 L 44.164251 56.331562 L 43.861665 55.522112 L 43.820108 55.074060 L 43.853214 54.638356 L 44.146373 53.926706 L 44.405666 53.650502 L 44.733237 53.430843 L 45.495675 53.236306 L 45.930394 53.260655 L 46.364216 53.361473 L 47.120269 53.780237 L 47.443200 54.098486 L 47.699720 54.452927 L 47.999930 55.250481 L 48.043874 55.694278 L 48.015294 56.127895 L 47.733736 56.843063 L 47.479999 57.124365 L 47.156877 57.350531 L 46.396742 57.557479 L 45.959571 57.537488 L 45.521362 57.438591 L 44.753737 57.015833 L 44.425035 56.692265 Z M 59.572451 72.699440 L 59.278368 72.365329 L 58.899760 71.588525 L 58.815546 71.146501 L 58.806834 70.709628 L 59.030593 69.973204 L 59.262284 69.673470 L 59.567348 69.423491 L 60.307687 69.156933 L 60.742742 69.139598 L 61.184218 69.198467 L 61.976853 69.543010 L 62.328738 69.828918 L 62.617978 70.157204 L 62.993083 70.922393 L 63.079266 71.359953 L 63.092284 71.794317 L 62.880408 72.533132 L 62.654735 72.837410 L 62.354723 73.093440 L 61.617862 73.372132 L 61.180783 73.394040 L 60.735126 73.337502 L 59.930590 72.990090 L 59.572451 72.699440 Z M 70.866921 91.143049 L 71.342026 90.551374 L 71.817130 89.959699 L 72.653127 90.627866 L 73.492157 91.292219 L 74.334203 91.952746 L 75.179247 92.609432 L 76.027273 93.262264 L 76.878261 93.911229 L 77.732195 94.556313 L 78.317691 93.777581 L 78.903186 92.998848 L 79.488681 92.220116 L 80.074176 91.441383 L 80.659671 90.662651 L 81.245167 89.883918 L 81.830662 89.105186 L 82.416157 88.326453 L 83.001652 87.547721 L 83.587147 86.768988 L 84.172643 85.990256 L 84.758138 85.211523 L 85.343633 84.432791 L 85.929128 83.654058 L 86.514623 82.875326 L 87.100119 82.096593 L 87.685614 81.317861 L 88.271109 80.539128 L 88.900953 81.010900 L 89.532500 81.480390 L 90.165740 81.947593 L 89.583183 82.740182 L 89.000625 83.532771 L 88.418067 84.325360 L 87.835509 85.117949 L 87.252951 85.910538 L 86.670393 86.703127 L 86.087835 87.495716 L 85.505277 88.288305 L 84.922719 89.080894 L 84.340162 89.873483 L 83.757604 90.666072 L 83.175046 91.458661 L 82.592488 92.251250 L 82.009930 93.043839 L 81.427372 93.836428 L 80.844814 94.629017 L 80.262256 95.421606 L 79.679699 96.214195 L 79.097141 97.006785 L 78.514583 97.799374 L 77.932025 98.591963 L 77.349467 99.384552 L 76.766909 100.177141 L 76.184351 100.969730 L 75.332213 100.340516 L 74.482848 99.707565 L 74.805096 98.994254 L 74.987825 98.346036 L 75.171718 97.698384 L 75.216445 97.115722 L 75.182148 96.565238 L 74.916441 95.526621 L 74.685087 95.037994 L 74.391166 94.561166 L 74.007413 94.089343 L 73.625115 93.616777 L 73.153063 93.148412 L 72.633808 92.672752 L 72.061336 92.172457 L 71.490568 91.670405 L 70.866921 91.143049 Z M 103.498088 105.772623 L 103.133156 105.517789 L 102.581122 104.852939 L 102.394479 104.443498 L 102.282406 104.021155 L 102.325129 103.252674 L 102.479125 102.906543 L 102.716200 102.591347 L 103.372200 102.156813 L 103.790732 102.036794 L 104.233574 101.989283 L 105.085307 102.136013 L 105.494960 102.330310 L 105.853805 102.580633 L 106.399682 103.235031 L 106.587179 103.639669 L 106.702839 104.058552 L 106.672228 104.826538 L 106.525157 105.175656 L 106.294424 105.495533 L 105.644681 105.941030 L 105.225267 106.065971 L 104.778915 106.116739 L 103.914940 105.970044 L 103.498088 105.772623 Z M 123.068366 115.905641 L 122.680737 115.686875 L 122.067652 115.077863 L 121.842710 114.688147 L 121.690761 114.278457 L 121.659798 113.509413 L 121.779987 113.150142 L 121.985833 112.813718 L 122.597272 112.318442 L 123.002408 112.158949 L 123.438677 112.069306 L 124.300538 112.133912 L 124.726894 112.288143 L 125.108033 112.503002 L 125.713989 113.102198 L 125.939323 113.487050 L 126.094511 113.892953 L 126.137483 114.660347 L 126.024473 115.021930 L 125.825387 115.362405 L 125.221226 115.867996 L 124.815683 116.032473 L 124.376232 116.125694 L 123.502187 116.062294 L 123.068366 115.905641 Z M 143.517981 124.120694 L 143.111208 123.939999 L 142.442693 123.392409 L 142.181512 123.025991 L 141.991081 122.632710 L 141.886715 121.870151 L 141.971996 121.501033 L 142.144726 121.146465 L 142.705999 120.594987 L 143.094026 120.397481 L 143.519722 120.266528 L 144.383812 120.248417 L 144.822963 120.361168 L 145.222903 120.538594 L 145.883383 121.077096 L 146.144488 121.438635 L 146.337782 121.827837 L 146.453943 122.587604 L 146.376029 122.958337 L 146.210416 123.316291 L 145.657374 123.877341 L 145.269419 124.079847 L 144.840896 124.214666 L 143.964795 124.235142 L 143.517981 124.120694 Z M 180.770713 120.816177 L 180.598837 121.778987 L 180.426961 122.741797 L 179.393173 122.554697 L 178.360291 122.362650 L 177.328341 122.165662 L 176.297346 121.963737 L 175.267329 121.756879 L 174.238314 121.545093 L 173.210324 121.328385 L 172.183383 121.106759 L 171.157515 120.880220 L 170.132743 120.648774 L 169.109090 120.412425 L 168.086581 120.171179 L 167.065237 119.925042 L 166.045084 119.674019 L 166.057264 120.273200 L 166.203138 120.869438 L 166.350464 121.465655 L 166.632696 122.058540 L 166.981200 122.644918 L 167.391042 123.215620 L 167.803316 123.785594 L 168.277213 124.339414 L 168.781422 124.879161 L 169.312176 125.394042 L 169.845436 125.907661 L 170.405088 126.396151 L 170.935582 126.851534 L 171.468204 127.305657 L 171.923408 127.711417 L 172.380255 128.116254 L 172.962859 128.624524 L 173.518495 129.147829 L 174.076752 129.669769 L 174.608046 130.207024 L 175.113385 130.754630 L 175.565116 131.319247 L 176.019314 131.882986 L 176.419661 132.464180 L 176.776852 133.058732 L 177.056047 133.676533 L 177.337199 134.294032 L 177.539807 134.935180 L 177.678458 135.594345 L 177.702024 136.283956 L 177.726435 136.973627 L 177.634596 137.693809 L 177.552619 138.092411 L 177.333383 138.841153 L 177.039827 139.525086 L 176.671329 140.143915 L 176.458817 140.428804 L 175.986027 140.949852 L 175.427346 141.373996 L 174.866816 141.796844 L 174.220306 142.121950 L 173.523380 142.383342 L 172.763135 142.553300 L 172.001480 142.720819 L 171.177188 142.796080 L 170.320358 142.809246 L 169.429525 142.731545 L 168.538606 142.650484 L 167.614915 142.478043 L 167.047510 142.343704 L 165.981730 142.026294 L 165.008623 141.644933 L 164.128824 141.200767 L 163.724078 140.955463 L 163.342350 140.696894 L 162.646580 140.146551 L 162.041121 139.552600 L 161.525962 138.915752 L 161.302215 138.581437 L 161.100739 138.237643 L 160.763692 137.524919 L 160.514222 136.779006 L 160.351905 136.000215 L 160.303274 135.598561 L 160.275712 135.190802 L 160.281897 134.363131 L 160.369252 133.519263 L 160.537041 132.659132 L 160.650856 132.222923 L 161.467192 132.432524 L 162.284280 132.639171 L 163.102111 132.842861 L 162.950014 133.474014 L 162.873788 134.097850 L 162.797960 134.721758 L 162.798737 135.338434 L 162.855658 135.942726 L 163.003500 136.516943 L 163.152624 137.091131 L 163.393214 137.634981 L 163.699476 138.152786 L 164.109587 138.622948 L 164.521451 139.092412 L 165.037282 139.513476 L 165.627852 139.891738 L 166.336677 140.191104 L 167.046863 140.488319 L 167.874521 140.705200 L 168.515170 140.823745 L 169.142109 140.876144 L 169.768978 140.926866 L 170.381494 140.911597 L 170.974982 140.851102 L 172.076816 140.592820 L 172.584792 140.395438 L 173.058523 140.153898 L 173.886795 139.542466 L 174.241399 139.173004 L 174.547486 138.760657 L 174.768116 138.283514 L 174.988220 137.806200 L 175.123537 137.264427 L 175.215493 136.585660 L 175.186653 135.957867 L 175.158581 135.330128 L 175.010710 134.753278 L 174.787788 134.189485 L 174.458248 133.613990 L 174.130709 133.038061 L 173.697560 132.449811 L 173.211482 131.860266 L 172.669263 131.280179 L 172.129952 130.698828 L 171.534825 130.126384 L 170.919922 129.559334 L 170.308124 128.990632 L 169.692829 128.427462 L 169.080620 127.862629 L 168.473875 127.296693 L 167.887289 126.720120 L 167.303793 126.142034 L 166.740466 125.553525 L 166.205104 124.953373 L 165.730305 124.330239 L 165.258497 123.706138 L 164.847057 123.059596 L 164.487284 122.395334 L 164.219174 121.701021 L 163.953549 121.006482 L 163.778982 120.282382 L 163.718021 119.911700 L 163.662025 119.147981 L 163.693404 118.354531 L 163.811450 117.531350 L 163.902730 117.108580 L 164.947899 117.379450 L 165.994398 117.645130 L 167.042204 117.905612 L 168.091289 118.160890 L 169.141629 118.410958 L 170.193197 118.655810 L 171.245967 118.895440 L 172.299913 119.129842 L 173.355010 119.359010 L 174.411231 119.582938 L 175.468551 119.801621 L 176.526943 120.015054 L 177.586381 120.223231 L 178.646840 120.426147 L 179.708292 120.623797 L 180.770713 120.816177 Z M 197.243826 135.818155 L 196.805804 135.739086 L 196.026494 135.365665 L 195.685864 135.071643 L 195.407595 134.734745 L 195.125357 134.018693 L 195.120664 133.639880 L 195.204376 133.254464 L 195.618846 132.585607 L 195.948962 132.301710 L 196.331456 132.073534 L 197.166598 131.851011 L 197.619960 131.856396 L 198.050569 131.933909 L 198.819918 132.300406 L 199.159317 132.589707 L 199.439400 132.921963 L 199.732435 133.632505 L 199.744668 134.011139 L 199.668673 134.398158 L 199.264468 135.074362 L 198.935608 135.363099 L 198.551285 135.595700 L 197.705035 135.823370 L 197.243826 135.818155 Z M 219.257737 136.848474 L 218.814162 136.811656 L 218.002712 136.514472 L 217.635526 136.254373 L 217.326314 135.945630 L 216.976893 135.259851 L 216.935995 134.883223 L 216.982466 134.491568 L 217.331073 133.786140 L 217.632527 133.471975 L 217.991447 133.208267 L 218.801482 132.906898 L 219.253281 132.868902 L 219.689328 132.904881 L 220.490200 133.196125 L 220.855709 133.451643 L 221.166283 133.755591 L 221.525925 134.434853 L 221.574311 134.810583 L 221.535675 135.203095 L 221.197989 135.914854 L 220.898248 136.233717 L 220.537931 136.502005 L 219.717331 136.809560 L 219.257737 136.848474 Z M 241.269286 135.768859 L 240.824223 135.774630 L 239.988072 135.556408 L 239.597696 135.332615 L 239.260375 135.054857 L 238.846974 134.405637 L 238.770246 134.034646 L 238.779050 133.640342 L 239.058598 132.904809 L 239.328626 132.563256 L 239.660683 132.266432 L 240.438185 131.888980 L 240.884280 131.807952 L 241.321770 131.802067 L 242.146823 132.015388 L 242.535092 132.234781 L 242.873310 132.507636 L 243.296262 133.149392 L 243.380357 133.518772 L 243.379435 133.913180 L 243.111362 134.653970 L 242.843489 135.000036 L 242.510479 135.301552 L 241.723053 135.686172 L 241.269286 135.768859 Z M 260.457736 127.870986 L 259.657254 128.019511 L 258.856240 128.165140 L 258.054704 128.307870 L 257.946600 127.845885 L 257.810766 126.949493 L 257.781137 126.090003 L 257.856659 125.267441 L 257.933557 124.869974 L 258.033859 124.482671 L 258.296743 123.741397 L 258.642297 123.044288 L 259.070168 122.390928 L 259.314890 122.080498 L 259.578369 121.781134 L 260.156373 121.216309 L 260.802496 120.696202 L 261.516879 120.220174 L 261.899735 119.998470 L 262.297376 119.789070 L 263.130142 119.411539 L 264.013391 119.088519 L 264.947779 118.819356 L 265.434372 118.704756 L 266.307683 118.540781 L 267.172010 118.462673 L 268.036460 118.381040 L 268.893258 118.385416 L 269.316046 118.409644 L 270.134804 118.506152 L 270.918219 118.667090 L 271.666717 118.892872 L 272.027981 119.030203 L 272.379079 119.183741 L 273.046179 119.539211 L 273.666537 119.959600 L 274.240127 120.445351 L 274.509349 120.712869 L 274.763363 120.997782 L 275.215161 121.622752 L 275.591470 122.321668 L 275.891540 123.094969 L 276.012707 123.509629 L 276.135677 124.066569 L 276.183507 124.606458 L 276.230910 125.146422 L 276.177474 125.663679 L 276.123240 126.180991 L 275.810603 127.169892 L 275.576869 127.646943 L 275.293161 128.104629 L 274.581215 128.938445 L 274.129608 129.300615 L 273.676632 129.661880 L 273.128907 129.967893 L 272.579951 130.272565 L 271.959890 130.534762 L 271.975418 130.600400 L 272.539874 130.602656 L 273.594834 130.712296 L 274.552215 130.963286 L 275.412865 131.356932 L 275.807063 131.607624 L 276.173088 131.888391 L 276.808011 132.522682 L 277.312654 133.254917 L 277.685815 134.086024 L 277.822628 134.538882 L 277.908529 134.918622 L 278.001145 135.654435 L 277.987511 136.358757 L 277.866916 137.031537 L 277.766316 137.356043 L 277.501139 137.980064 L 277.125636 138.552804 L 276.747975 139.124988 L 276.259723 139.645137 L 275.706252 140.129708 L 275.070123 140.560754 L 274.431921 140.990082 L 273.711408 141.364974 L 272.952322 141.699589 L 272.161763 141.970425 L 271.369977 142.238601 L 270.547559 142.442581 L 270.033987 142.544841 L 269.032893 142.683798 L 268.067365 142.735716 L 267.138310 142.701041 L 266.687716 142.651369 L 266.248587 142.582219 L 265.411134 142.391790 L 264.628395 142.132332 L 263.900652 141.804394 L 263.557465 141.614906 L 263.228550 141.409205 L 262.614923 140.951554 L 262.060167 140.432622 L 261.564120 139.852831 L 261.338036 139.540234 L 261.128420 139.214092 L 260.764027 138.525954 L 260.472250 137.790294 L 260.252421 137.007394 L 260.169255 136.598299 L 261.000767 136.447865 L 261.831730 136.294425 L 262.662132 136.137979 L 262.789928 136.769156 L 262.992041 137.344333 L 263.194605 137.919387 L 263.472241 138.438164 L 263.798252 138.914211 L 264.193305 139.318657 L 264.589498 139.722466 L 265.054985 140.054191 L 265.563985 140.334680 L 266.132859 140.534537 L 266.702822 140.733024 L 267.332331 140.850286 L 267.999240 140.907623 L 268.717839 140.868205 L 269.436636 140.826584 L 270.206108 140.687572 L 270.836171 140.532628 L 271.421420 140.337335 L 272.006008 140.140578 L 272.545414 139.903923 L 273.048531 139.638550 L 273.928164 139.016892 L 274.304473 138.661091 L 274.632615 138.279144 L 275.127331 137.448298 L 275.294109 136.999759 L 275.398674 136.526027 L 275.397662 136.009700 L 275.396131 135.493437 L 275.289690 134.934611 L 275.129126 134.420606 L 274.645124 133.549808 L 274.322295 133.192640 L 273.959008 132.883035 L 273.150676 132.392974 L 272.705569 132.212203 L 272.238890 132.071587 L 271.257754 131.902946 L 270.742965 131.874699 L 270.227299 131.879068 L 269.239116 131.971988 L 268.766218 132.060725 L 267.736786 132.285555 L 266.706337 132.505683 L 266.521626 131.631261 L 266.336914 130.756839 L 267.359383 130.538416 L 268.380845 130.315327 L 269.039858 130.149361 L 269.653272 129.933320 L 270.265865 129.715596 L 270.832348 129.448301 L 271.360086 129.148382 L 271.818914 128.801582 L 272.276421 128.453851 L 272.664812 128.059819 L 273.000907 127.637429 L 273.499343 126.715994 L 273.661936 126.217362 L 273.759172 125.692356 L 273.747541 125.125979 L 273.735293 124.559685 L 273.614984 123.952037 L 273.432008 123.372089 L 273.156796 122.867417 L 272.882259 122.362480 L 272.516337 121.932319 L 272.102226 121.550693 L 271.633561 121.240609 L 271.166122 120.929550 L 270.644153 120.689529 L 270.093563 120.496576 L 269.510332 120.375195 L 268.928004 120.252241 L 268.312550 120.200481 L 267.684118 120.193302 L 267.049300 120.250628 L 266.414556 120.306069 L 265.772702 120.425931 L 265.024679 120.617340 L 264.352359 120.877209 L 263.678835 121.134967 L 263.080224 121.462144 L 262.535257 121.828106 L 262.078184 122.242516 L 261.619365 122.655972 L 261.248406 123.118641 L 260.935301 123.613197 L 260.709698 124.154631 L 260.482600 124.695868 L 260.343410 125.284368 L 260.267805 125.899236 L 260.296386 126.545870 L 260.324444 127.192563 L 260.457736 127.870986 Z M 294.968801 123.951115 L 294.537804 124.062273 L 293.673755 124.048579 L 293.241440 123.923753 L 292.847870 123.733920 L 292.292293 123.201264 L 292.129769 122.859055 L 292.044807 122.473912 L 292.141940 121.693066 L 292.323261 121.297217 L 292.575449 120.930110 L 293.241252 120.379033 L 293.655403 120.194521 L 294.079015 120.085047 L 294.931121 120.096611 L 295.360345 120.217662 L 295.753624 120.402520 L 296.316709 120.925659 L 296.486008 121.264556 L 296.578651 121.647931 L 296.493914 122.431163 L 296.315756 122.830885 L 296.063756 123.202776 L 295.390011 123.763170 L 294.968801 123.951115 Z M 315.399968 115.690288 L 314.981576 115.842153 L 314.120178 115.911152 L 313.677907 115.828241 L 313.267987 115.676915 L 312.664018 115.199831 L 312.469513 114.874732 L 312.348109 114.499480 L 312.370124 113.712923 L 312.512758 113.301549 L 312.728683 112.912008 L 313.338735 112.299785 L 313.733343 112.076512 L 314.144544 111.927030 L 314.993851 111.857053 L 315.432684 111.936502 L 315.841839 112.082903 L 316.452371 112.549796 L 316.653304 112.870950 L 316.782184 113.243708 L 316.772737 114.031454 L 316.633621 114.446381 L 316.418340 114.840667 L 315.801275 115.462924 L 315.399968 115.690288 Z M 334.947505 105.513469 L 334.545554 105.704649 L 333.694702 105.855709 L 333.246530 105.815472 L 332.824016 105.704041 L 332.177191 105.286902 L 331.952489 104.981894 L 331.795755 104.619971 L 331.742450 103.834914 L 331.845090 103.411785 L 332.022774 103.003380 L 332.571482 102.335623 L 332.942929 102.075637 L 333.337951 101.887516 L 334.176673 101.736640 L 334.621093 101.773758 L 335.042373 101.880361 L 335.694757 102.286728 L 335.925480 102.587195 L 336.089418 102.945919 L 336.155346 103.730959 L 336.056548 104.157288 L 335.879960 104.570354 L 335.325229 105.248769 L 334.947505 105.513469 Z M 357.164969 84.490946 L 356.257817 85.192075 L 355.347107 85.888577 L 354.432863 86.580432 L 353.515109 87.267624 L 352.593867 87.950135 L 351.669163 88.627946 L 350.741020 89.301041 L 349.809461 89.969402 L 348.874513 90.633011 L 349.861904 90.917873 L 350.851961 91.198603 L 351.844667 91.475188 L 352.840006 91.747616 L 353.837964 92.015873 L 354.838523 92.279947 L 355.841670 92.539826 L 356.847387 92.795496 L 357.855660 93.046946 L 358.866471 93.294162 L 359.879806 93.537134 L 360.895648 93.775847 L 361.913982 94.010290 L 362.934790 94.240450 L 363.958057 94.466316 L 364.983768 94.687876 L 365.048537 94.637570 L 364.442109 93.857060 L 363.835681 93.076551 L 363.229252 92.296041 L 362.622824 91.515532 L 362.016396 90.735022 L 361.409967 89.954513 L 360.803539 89.174003 L 360.197111 88.393494 L 359.590682 87.612984 L 358.984254 86.832475 L 358.377826 86.051965 L 357.771397 85.271456 L 357.164969 84.490946 Z M 347.215341 92.121276 L 346.825374 91.557208 L 346.435406 90.993139 L 346.045439 90.429071 L 346.973332 89.784099 L 347.897951 89.134442 L 348.819272 88.480116 L 349.737272 87.821139 L 350.651926 87.157526 L 351.563212 86.489295 L 352.471107 85.816463 L 353.375586 85.139048 L 354.276628 84.457066 L 355.174208 83.770536 L 356.068305 83.079474 L 355.468243 82.307158 L 354.868181 81.534843 L 354.268120 80.762528 L 353.668058 79.990213 L 353.067996 79.217898 L 352.467935 78.445583 L 353.324413 77.776692 L 354.177538 77.103531 L 354.785286 77.869813 L 355.393034 78.636094 L 356.000782 79.402376 L 356.608530 80.168657 L 357.216278 80.934938 L 357.824026 81.701220 L 358.614096 81.071689 L 359.401312 80.438593 L 360.185657 79.801943 L 360.967115 79.161753 L 361.535045 79.851817 L 362.102974 80.541881 L 361.315264 81.187193 L 360.524643 81.828936 L 359.731129 82.467098 L 358.934737 83.101665 L 359.554274 83.882810 L 360.173810 84.663954 L 360.793346 85.445099 L 361.412882 86.226244 L 362.032418 87.007388 L 362.651954 87.788533 L 363.271490 88.569678 L 363.891026 89.350822 L 364.510562 90.131967 L 365.130098 90.913112 L 365.749634 91.694256 L 366.369171 92.475401 L 366.988707 93.256546 L 367.608243 94.037690 L 368.227779 94.818835 L 368.847315 95.599980 L 367.917943 96.333368 L 366.984982 97.062184 L 365.973614 96.853973 L 364.964565 96.641605 L 363.957850 96.425091 L 362.953483 96.204442 L 361.951481 95.979671 L 360.951857 95.750788 L 359.954629 95.517805 L 358.959809 95.280733 L 357.967414 95.039585 L 356.977459 94.794372 L 355.989958 94.545106 L 355.004926 94.291798 L 354.022379 94.034461 L 353.042330 93.773106 L 352.064795 93.507745 L 351.089789 93.238390 L 350.117326 92.965054 L 349.147421 92.687748 L 348.180087 92.406484 L 347.215341 92.121276 Z M 378.798968 72.342002 L 378.453825 72.623056 L 377.663073 72.971595 L 377.218145 73.038796 L 376.781258 73.030748 L 376.053958 72.778912 L 375.763330 72.535896 L 375.525233 72.221470 L 375.287263 71.471453 L 375.286625 71.036053 L 375.362381 70.597160 L 375.737068 69.818321 L 376.036260 69.477660 L 376.375396 69.201222 L 377.154408 68.855737 L 377.594951 68.786398 L 378.029494 68.790047 L 378.759641 69.030100 L 379.055041 69.267276 L 379.299377 69.576886 L 379.549606 70.323893 L 379.554736 70.761490 L 379.481149 71.204652 L 379.103139 71.995273 L 378.798968 72.342002 Z M 393.910499 56.300946 L 393.593816 56.613718 L 392.840019 57.036280 L 392.403556 57.145722 L 391.967903 57.179491 L 391.219852 56.998362 L 390.907316 56.784253 L 390.640242 56.494037 L 390.331638 55.770215 L 390.289365 55.336872 L 390.322802 54.892746 L 390.621291 54.081645 L 390.886533 53.713932 L 391.197680 53.406329 L 391.940082 52.987930 L 392.371975 52.876779 L 392.804876 52.838856 L 393.554632 53.007984 L 393.871360 53.215823 L 394.144184 53.500649 L 394.464704 54.220302 L 394.511658 54.655403 L 394.480788 55.103571 L 394.180119 55.926718 L 393.910499 56.300946 Z M 407.418751 38.888279 L 407.133429 39.229902 L 406.423497 39.722614 L 405.999501 39.873293 L 405.569074 39.948569 L 404.807130 39.839807 L 404.475551 39.656568 L 404.181947 39.393223 L 403.805538 38.702230 L 403.722017 38.274915 L 403.712829 37.829627 L 403.932383 36.993699 L 404.161245 36.602306 L 404.441549 36.266357 L 405.140537 35.778880 L 405.559821 35.626935 L 405.987111 35.547788 L 406.749605 35.644440 L 407.084757 35.821038 L 407.383569 36.078468 L 407.771441 36.764171 L 407.859789 37.192788 L 407.871920 37.641854 L 407.651346 38.489981 L 407.418751 38.888279 Z M 413.299482 18.692391 L 412.892951 19.394533 L 412.483883 20.095200 L 412.072283 20.794382 L 411.724035 20.565425 L 411.085785 20.071049 L 410.524767 19.528590 L 410.040438 18.938573 L 409.826855 18.625863 L 409.632014 18.304380 L 409.297690 17.644084 L 409.036859 16.960694 L 408.849139 16.254140 L 408.782579 15.892129 L 408.702983 15.154078 L 408.730525 14.390501 L 408.755159 13.627797 L 408.886361 12.838665 L 408.977812 12.439537 L 409.211100 11.640451 L 409.511525 10.839670 L 409.879042 10.036436 L 410.087948 9.633646 L 410.315834 9.229133 L 410.808872 8.461570 L 411.352175 7.748767 L 411.946403 7.090131 L 412.262810 6.780951 L 412.588929 6.487387 L 413.260884 5.953857 L 413.959680 5.491740 L 414.685913 5.101032 L 415.059484 4.932470 L 415.438501 4.782634 L 416.208278 4.541830 L 416.994020 4.379811 L 417.796013 4.296983 L 418.203168 4.285406 L 418.611010 4.295448 L 419.418432 4.385714 L 420.214772 4.570296 L 420.999838 4.850100 L 421.388045 5.026000 L 421.781547 5.228377 L 422.517952 5.675721 L 423.186503 6.180463 L 423.786696 6.743249 L 424.060988 7.046580 L 424.316764 7.362303 L 424.768873 8.024136 L 425.141319 8.726605 L 425.433604 9.469755 L 425.549524 9.856567 L 425.644782 10.252603 L 425.771786 11.069476 L 425.813722 11.919103 L 425.770123 12.801003 L 425.716101 13.253873 L 425.639369 13.712218 L 425.414177 14.637819 L 425.093172 15.574479 L 424.676165 16.521115 L 424.431609 16.997806 L 424.224419 17.363841 L 423.764469 18.062443 L 423.244144 18.715903 L 422.663900 19.323615 L 422.351451 19.610131 L 422.029228 19.879205 L 421.370919 20.347617 L 420.694703 20.723145 L 420.001177 21.005964 L 419.648080 21.112679 L 419.667216 21.215239 L 420.627968 21.504790 L 421.589468 21.792587 L 422.551715 22.078627 L 423.514706 22.362910 L 424.478438 22.645435 L 425.442909 22.926201 L 426.408116 23.205206 L 427.374056 23.482449 L 427.931454 22.482583 L 428.484053 21.480058 L 429.031843 20.474896 L 429.574809 19.467121 L 430.112940 18.456755 L 430.646223 17.443822 L 431.174646 16.428346 L 431.698197 15.410349 L 432.216863 14.389855 L 432.730634 13.366887 L 433.239496 12.341468 L 434.116623 12.774126 L 434.993751 13.206783 L 434.455727 14.290649 L 433.912264 15.371798 L 433.363376 16.450203 L 432.809077 17.525837 L 432.249380 18.598672 L 431.684300 19.668682 L 431.113852 20.735839 L 430.538049 21.800116 L 429.956906 22.861487 L 429.370437 23.919925 L 428.778659 24.975403 L 428.181584 26.027894 L 427.256448 25.748872 L 426.331985 25.468280 L 425.408197 25.186119 L 424.485087 24.902390 L 423.562656 24.617094 L 422.640907 24.330232 L 421.719841 24.041805 L 420.799462 23.751814 L 419.879770 23.460260 L 418.960768 23.167144 L 418.042458 22.872468 L 417.124843 22.576231 L 416.207923 22.278435 L 416.743516 21.359963 L 417.274831 20.439009 L 417.690932 20.371589 L 418.500129 20.157053 L 419.278204 19.836042 L 420.024500 19.408389 L 420.385487 19.154546 L 420.734421 18.877601 L 421.384339 18.265338 L 421.969670 17.575742 L 422.489587 16.809470 L 422.724745 16.397805 L 423.059129 15.712132 L 423.291995 15.023571 L 423.522554 14.334615 L 423.651613 13.643938 L 423.714815 12.963793 L 423.684410 12.316481 L 423.652068 11.669947 L 423.526624 11.056793 L 423.342001 10.469419 L 423.074570 9.924804 L 422.805923 9.381306 L 422.455023 8.880531 L 422.050114 8.418505 L 421.566360 8.028782 L 421.082221 7.639655 L 420.519877 7.322066 L 419.940261 7.064992 L 419.341679 6.895322 L 418.743325 6.725060 L 418.126249 6.641316 L 417.506397 6.616593 L 416.896501 6.683694 L 416.286854 6.749184 L 415.686938 6.905906 L 415.101146 7.121221 L 414.547870 7.423225 L 413.994265 7.723174 L 413.472539 8.109754 L 412.979849 8.557835 L 412.543058 9.106023 L 412.104739 9.652472 L 411.721117 10.299601 L 411.425773 10.897861 L 411.209342 11.499075 L 410.991042 12.099907 L 410.851641 12.704558 L 410.764901 13.304423 L 410.759236 13.885877 L 410.751903 14.467880 L 410.825955 15.031983 L 410.952929 15.579939 L 411.158806 16.096409 L 411.363532 16.613795 L 411.647624 17.099734 L 411.983561 17.556093 L 412.396588 17.954125 L 412.809193 18.352715 L 413.299482 18.692391 Z",transform:"scale(1.000000,1.000000) translate(31.000000,334.000000)",fill:"#feffff",opacity:"1.000000"})})});try{ZoomMeter.displayName="ZoomMeter",ZoomMeter.__docgenInfo={description:"AxUX React+TailwindCSS UI Framework",displayName:"ZoomMeter",props:{zoom:{defaultValue:{value:"0"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/ZoomMeter.tsx#ZoomMeter"]={docgenInfo:ZoomMeter.__docgenInfo,name:"ZoomMeter",path:"packages/media/src/image/ZoomMeter.tsx#ZoomMeter"})}catch(__react_docgen_typescript_loader_error){}const Tools_Tools=(0,react.memo)((({zoom,rotate,fitToView,splitter,onSplitToggle,onZoom,onRotate,isDisabled,disableZoom,disableSplitter})=>(0,jsx_runtime.jsxs)("div",{className:"ax-media__tools","data-disabled":isDisabled,children:[(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"f",handler:()=>!disableZoom&&onZoom(fitToView?1:0)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:",",handler:()=>!disableZoom&&onZoom(Math.max(zoom-.5,.5))}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:".",handler:()=>!disableZoom&&onZoom(Math.min(zoom+.5,5))}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"[",handler:()=>onRotate(rotate-90)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"]",handler:()=>onRotate(rotate+90)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"r",handler:()=>(onZoom(0),onRotate(0))}),(0,jsx_runtime.jsxs)("div",{className:"toolbar",children:[(0,jsx_runtime.jsxs)("label",{className:"basis-28 text-end",children:["Zoom: ",0===zoom?"Fit":`${zoom.toFixed(1)}x`]}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconFitToView,"data-disabled":disableZoom,onClick:()=>onZoom(0)}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconAspect,"data-disabled":disableZoom,onClick:()=>onZoom(1)}),(0,jsx_runtime.jsxs)("div",{className:"ax-image__zoom","data-disabled":disableZoom,children:[(0,jsx_runtime.jsxs)("div",{className:"ax-image__zoomMeter",onMouseDown:e=>{const target=e.currentTarget;let startX=e.clientX,zoomStart=zoom||1;const doDrag=ev=>{null!=target.parentElement&&(zoomStart+=.05*(startX-ev.clientX),onZoom(Math.max(.1,Math.min(5,zoomStart))),startX=ev.clientX,ev.preventDefault(),ev.stopPropagation())};document.addEventListener("mousemove",doDrag),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",doDrag)}),{once:!0})},children:[(0,jsx_runtime.jsx)(ZoomMeter,{zoom}),(0,jsx_runtime.jsx)("span",{children:zoom.toFixed(1)})]}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconZoomer,"data-disabled":disableZoom,onClick:()=>onZoom(zoom>4.5?.5:zoom+.5)})]}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"sm"}),!disableSplitter&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconSplitter,onClick:onSplitToggle,"data-active":splitter}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"sm"})]}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconRotateCCW,onClick:()=>onRotate(rotate-90)}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconRotateCW,onClick:()=>onRotate(rotate+90)}),(0,jsx_runtime.jsxs)("label",{className:"basis-48",children:["Rotate: ",rotate,"°"]})]})]})));Tools_Tools.displayName="AxImage.Tools";try{Tools_Tools.displayName="AxImage.Tools",Tools_Tools.__docgenInfo={description:"",displayName:"AxImage.Tools",props:{zoom:{defaultValue:null,description:"",name:"zoom",required:!0,type:{name:"number"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!0,type:{name:"number"}},splitter:{defaultValue:null,description:"",name:"splitter",required:!0,type:{name:"boolean"}},fitToView:{defaultValue:null,description:"",name:"fitToView",required:!0,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}},disableZoom:{defaultValue:null,description:"",name:"disableZoom",required:!0,type:{name:"boolean"}},disableSplitter:{defaultValue:null,description:"",name:"disableSplitter",required:!0,type:{name:"boolean"}},onZoom:{defaultValue:null,description:"",name:"onZoom",required:!0,type:{name:"(zoom: number) => void"}},onRotate:{defaultValue:null,description:"",name:"onRotate",required:!0,type:{name:"(rotate: number) => void"}},onSplitToggle:{defaultValue:null,description:"",name:"onSplitToggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Tools.tsx#AxImage.Tools"]={docgenInfo:AxImage.Tools.__docgenInfo,name:"AxImage.Tools",path:"packages/media/src/image/Tools.tsx#AxImage.Tools"})}catch(__react_docgen_typescript_loader_error){}const AxImageViewer=(0,react.forwardRef)((({src,overlaySrc,isNsfw,onLoad,onError,onChange},ref)=>{const canvasRef=(0,react.useRef)(null),imageRef=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),[,startTransition]=(0,react.useTransition)(),changeCallback=(0,dist.d7)(onChange),initState=(0,react.useCallback)((()=>({zoom:0,rotate:0,fitToView:!0,isLoading:!0,isLoaded:!1,isErrored:!1,showSplitter:!0,width:"100%",height:"100%",containerWidth:"100%",containerHeight:"100%"})),[]),calculateSize=(0,react.useCallback)(((rotate,zoom,fitToView)=>{const el=containerRef.current,img=imageRef.current;if(null!=el&&null!=img&&img.naturalWidth){const turn=rotate%180!=0;let width=turn?img.naturalHeight:img.naturalWidth,height=turn?img.naturalWidth:img.naturalHeight;if(fitToView){const containerWidth=el.offsetWidth-16,containerHeight=el.offsetHeight-16;containerWidth/containerHeight>width/height?(width*=containerHeight/height,height=containerHeight):(height*=containerWidth/width,width=containerWidth),zoom=Math.min(5,width/(turn?img.naturalHeight:img.naturalWidth))}else width*=zoom,height*=zoom;return{zoom,width:isNaN(width)?0:width,height:isNaN(height)?0:height,containerWidth:el.offsetWidth,containerHeight:el.offsetHeight}}return{width:"100%",height:"100%",containerWidth:"100%",containerHeight:"100%"}}),[]),recenter=(0,react.useCallback)((()=>{const el=containerRef.current;null!=el&&el.scrollTo({top:(el.scrollHeight-(el.offsetHeight-16))/2,left:(el.scrollWidth-(el.offsetWidth-16))/2,behavior:"auto"})}),[]),reducer=(0,react.useCallback)(((state,action)=>("init"===action.type&&(state=initState()),"splitter"===action.type&&(state=state.showSplitter?{...state,showSplitter:!1}:{...state,showSplitter:!0,fitToView:!0}),"zoom"===action.type&&(state.fitToView=0===action.payload,state.zoom=Math.min(5,Math.max(0,action.payload)),state={...state,...calculateSize(state.rotate,state.zoom,state.fitToView)},startTransition((()=>{(0,utilities_dist.debounce)(recenter,200)()}))),"rotate"===action.type&&(state.rotate=action.payload>270?0:action.payload<0?270:action.payload,state={...state,...calculateSize(state.rotate,state.zoom,state.fitToView)}),"resize"===action.type&&(state={...state,...calculateSize(state.rotate,state.zoom,state.fitToView)}),"loaded"===action.type&&(state.isLoading=!1,state.isLoaded=!0,state.isErrored=!1,state.zoom=0,state={...state,...calculateSize(state.rotate,state.zoom,state.fitToView)}),"errored"===action.type&&(state.isErrored=!0,state.isLoading=!1),{...state})),[initState]),[state,dispatch]=(0,react.useReducer)(reducer,{zoom:0,rotate:0,isLoading:!0,isLoaded:!1,isErrored:!1,showSplitter:!0},initState),resizeHandler=(0,react.useCallback)((size=>{dispatch({type:"resize",payload:size}),state.isLoaded&&startTransition((()=>{changeCallback?.("resize")}))}),[changeCallback,state.isLoaded]);(0,react.useEffect)((()=>{if(null!=containerRef.current){const ob=new ResizeObserver(resizeHandler);return ob.observe(containerRef.current),()=>{ob.disconnect()}}}),[resizeHandler]),(0,react.useImperativeHandle)(ref,(()=>null!=canvasRef.current?{zoom:zoom=>!overlaySrc&&dispatch({type:"zoom",payload:zoom}),rotate:rotation=>dispatch({type:"rotate",payload:rotation}),...canvasRef.current}:null),[]),(0,react.useLayoutEffect)((()=>{dispatch({type:"init"}),canvasRef.current?.clear()}),[src]),(0,react.useLayoutEffect)((()=>{overlaySrc&&(dispatch({type:"init"}),canvasRef.current?.clear())}),[overlaySrc]);const handleLoad=(0,react.useCallback)((e=>{dispatch({type:"loaded"}),startTransition((()=>{const colorset=null!=imageRef.current&&(0,getImageColorset.T)(imageRef.current);colorset&&null!=containerRef.current?.parentElement&&(containerRef.current.parentElement.dataset.colorset=colorset),onLoad?.(e)}))}),[onLoad]),handleError=(0,react.useCallback)((e=>{dispatch({type:"errored"}),startTransition((()=>onError?.(e)))}),[onError]),disableTools=(0,react.useMemo)((()=>state.isLoading||!!state.isErrored),[state,overlaySrc]),handleZoom=(0,react.useCallback)((zoom=>{dispatch({type:"zoom",payload:zoom}),state.isLoaded&&startTransition((()=>{changeCallback("zoom")}))}),[changeCallback,state.isLoaded]),handleRotate=(0,react.useCallback)((rotate=>{dispatch({type:"rotate",payload:rotate}),state.isLoaded&&startTransition((()=>{changeCallback("rotate")}))}),[changeCallback,state.isLoaded]);return(0,jsx_runtime.jsx)(HotKeyWrapper.O1,{children:(0,jsx_runtime.jsxs)("div",{className:"ax-media","data-error":state.isErrored,onContextMenuCapture:e=>e.preventDefault(),children:[(0,jsx_runtime.jsx)("div",{className:"ax-media__container ax-image__scroller",ref:containerRef,children:(0,jsx_runtime.jsx)(Image,{src:!state.showSplitter&&overlaySrc?overlaySrc:src,imageRef,canvasRef,onLoad:handleLoad,onError:handleError,width:state.width,height:state.height,rotate:state.rotate})}),state.showSplitter&&overlaySrc&&(0,jsx_runtime.jsx)(ImageOverlay,{src:overlaySrc,width:state.width,height:state.height,rotate:state.rotate,onLoad:handleLoad,onError:handleError,containerWidth:state.containerWidth,containerHeight:state.containerHeight}),(0,jsx_runtime.jsx)(Tools_Tools,{disableSplitter:!overlaySrc,disableZoom:state.showSplitter&&!!overlaySrc,isDisabled:disableTools,zoom:state.zoom,fitToView:state.fitToView,rotate:state.rotate,splitter:state.showSplitter,onZoom:handleZoom,onRotate:handleRotate,onSplitToggle:()=>dispatch({type:"splitter"})}),state.isLoading&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(dist.Qo.Bars,{})}),state.isErrored&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(dist.T3,{size:48,icon:Icons.iconImage})}),isNsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{isNsfw})]})})}));AxImageViewer.displayName="AxImage.Viewer";try{AxImageViewer.displayName="AxImage.Viewer",AxImageViewer.__docgenInfo={description:"",displayName:"AxImage.Viewer",props:{onChange:{defaultValue:null,description:"onChange layout (zoom/rotate)",name:"onChange",required:!1,type:{name:'((change: "zoom" | "rotate" | "resize") => void)'}},src:{defaultValue:null,description:"image src url",name:"src",required:!0,type:{name:"string"}},isNsfw:{defaultValue:null,description:"show overlay for NSFW content",name:"isNsfw",required:!1,type:{name:"boolean"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"ReactEventHandler<HTMLImageElement>"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"ReactEventHandler<HTMLImageElement>"}},overlaySrc:{defaultValue:null,description:"overlay image",name:"overlaySrc",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/ImageViewer.tsx#AxImage.Viewer"]={docgenInfo:AxImage.Viewer.__docgenInfo,name:"AxImage.Viewer",path:"packages/media/src/image/ImageViewer.tsx#AxImage.Viewer"})}catch(__react_docgen_typescript_loader_error){}const AxThumbnail=(0,react.memo)((({src:_src,height,width,showReel,className,fallback,isNsfw,...rest})=>{const[src,setSrc]=(0,react.useState)(),[,startTransition]=(0,react.useTransition)(),[isLoading,setLoading]=(0,react.useState)(!0),[isErrored,setErrored]=(0,react.useState)(0);(0,react.useEffect)((()=>{setSrc(""),startTransition((()=>{setErrored(0),setLoading(!0),setSrc(_src)}))}),[_src]);const reload=(0,react.useCallback)((e=>{e.stopPropagation(),startTransition((()=>{setErrored(0),setLoading(!0),setSrc(_src)}))}),[_src]),loadHandler=(0,react.useCallback)((e=>{e.currentTarget.dataset.colorset=(0,getImageColorset.T)(e.currentTarget),startTransition((()=>{setLoading(!1)}))}),[]),handleError=(0,react.useCallback)((()=>{startTransition((()=>{1===isErrored?(setErrored(2),setLoading(!1)):(setErrored(1),setSrc(fallback))}))}),[isErrored,fallback]);return(0,jsx_runtime.jsxs)("div",{...rest,"data-reel":showReel,style:{width,height},"data-fallback":0!==isErrored,className:`ax-thumbnail ${className??""}`,children:[2!==isErrored&&src&&(0,jsx_runtime.jsx)("img",{src,loading:"lazy",crossOrigin:"anonymous",onLoad:loadHandler,onError:src?handleError:void 0}),2===isErrored&&(0,jsx_runtime.jsx)(dist.T3,{onClick:reload,className:"ax-thumbnail--reload",icon:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}),isLoading&&(0,jsx_runtime.jsx)("div",{className:"ax-thumbnail--spinner",children:(0,jsx_runtime.jsx)(dist.Qo.Spinner,{})}),isNsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{isNsfw})]})}));AxThumbnail.displayName="AxThumbnail";try{AxThumbnail.displayName="AxThumbnail",AxThumbnail.__docgenInfo={description:"",displayName:"AxThumbnail",props:{src:{defaultValue:null,description:"thumbnail source",name:"src",required:!1,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback image",name:"fallback",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"thumbnail width",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"thumbnail height",name:"height",required:!1,type:{name:"string | number"}},showReel:{defaultValue:null,description:"show video reel",name:"showReel",required:!1,type:{name:"boolean"}},isNsfw:{defaultValue:null,description:"show overlay for NSFW content",name:"isNsfw",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/thumbnail/Thumbnail.tsx#AxThumbnail"]={docgenInfo:AxThumbnail.__docgenInfo,name:"AxThumbnail",path:"packages/media/src/thumbnail/Thumbnail.tsx#AxThumbnail"})}catch(__react_docgen_typescript_loader_error){}const Video=(0,react.memo)((({src,poster,videoRef,canvasRef,isPlaying,isFit,isNsfw,showVtt,vttText,width,height,rotate,onLoad,onError,onChange})=>{const overlayRef=(0,react.useRef)(null),[style,setStyle]=(0,react.useState)({width:0,height:0}),[isSeeking,setSeeking]=(0,react.useState)(!1),resizeHandler=(0,react.useCallback)((()=>{if(null!=videoRef.current){const ratio=Math.min(videoRef.current.offsetWidth/(videoRef.current.videoWidth||videoRef.current.offsetWidth),videoRef.current.offsetHeight/(videoRef.current.videoHeight||videoRef.current.offsetHeight)),width=videoRef.current.videoWidth*ratio,height=videoRef.current.videoHeight*ratio;setStyle({width:isNaN(width)?0:width,height:isNaN(height)?0:height})}}),[isFit]);(0,react.useEffect)((()=>{if(null!=videoRef.current){const el=videoRef.current,ob=new ResizeObserver(resizeHandler);return ob.observe(videoRef.current),el.addEventListener("loadedmetadata",resizeHandler),()=>{ob.disconnect(),el.removeEventListener("loadedmetadata",resizeHandler)}}}),[resizeHandler]),(0,react.useEffect)((()=>{null!=overlayRef.current&&(overlayRef.current.dataset.show="true"),setTimeout((()=>{null!=overlayRef.current&&(overlayRef.current.dataset.show="false")}),400)}),[isPlaying]);const handleSeek=(0,react.useCallback)((()=>{setSeeking(!!videoRef.current?.seeking)}),[]),[vttSrc,setVtt]=(0,react.useState)();return(0,react.useEffect)((()=>{if(vttText){const vtt=URL.createObjectURL(new Blob([vttText],{type:"text/vtt"}));return setVtt(vtt),()=>{URL.revokeObjectURL(vtt)}}}),[vttText]),(0,jsx_runtime.jsxs)("div",{className:"ax-video__container",children:[(0,jsx_runtime.jsx)("video",{src,ref:videoRef,poster,controls:!1,autoPlay:!isNsfw,"data-fit":isFit,controlsList:"nodownload,nofullscreen",preload:"metadata",crossOrigin:"anonymous",onSeeking:handleSeek,onSeeked:handleSeek,onLoadedMetadata:onLoad,onTimeUpdate:onChange,onError,style:{"--rotate":`${rotate}deg`,width,height},children:showVtt&&(0,jsx_runtime.jsx)("track",{src:vttSrc,default:!0})}),(0,jsx_runtime.jsx)(Canvas,{canvas:canvasRef,media:videoRef,style:{"--rotate":`${rotate}deg`,...style}}),(0,jsx_runtime.jsx)(dist.T3,{icon:isPlaying?Icons.iconPlay:Icons.iconPause,className:"ax-video__overlay","data-show":"false",ref:overlayRef}),isSeeking&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay p-1 rounded-full leading-[0]",children:(0,jsx_runtime.jsx)(dist.Qo.Spinner,{className:"text-4xl"})})]})}));Video.displayName="AxVideo.Video";try{Video.displayName="AxVideo.Video",Video.__docgenInfo={description:"",displayName:"AxVideo.Video",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},poster:{defaultValue:null,description:"",name:"poster",required:!1,type:{name:"string"}},isNsfw:{defaultValue:null,description:"",name:"isNsfw",required:!0,type:{name:"boolean"}},isFit:{defaultValue:null,description:"",name:"isFit",required:!0,type:{name:"boolean"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!0,type:{name:"number"}},showVtt:{defaultValue:null,description:"",name:"showVtt",required:!0,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},vttText:{defaultValue:null,description:"",name:"vttText",required:!1,type:{name:"string"}},videoRef:{defaultValue:null,description:"",name:"videoRef",required:!0,type:{name:"RefObject<HTMLVideoElement>"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!0,type:{name:"RefObject<CanvasRef>"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!0,type:{name:"ReactEventHandler"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"ReactEventHandler"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ReactEventHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Video.tsx#AxVideo.Video"]={docgenInfo:AxVideo.Video.__docgenInfo,name:"AxVideo.Video",path:"packages/media/src/video/Video.tsx#AxVideo.Video"})}catch(__react_docgen_typescript_loader_error){}var appIcons=__webpack_require__("./packages/core/dist/types/appIcons.js"),data_dist=__webpack_require__("./packages/data/dist/index.js");const SceneList=(0,react.memo)((({videoRef,scenes=[]})=>{const[show,setShow]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"ax-video__scenes",children:[(0,jsx_runtime.jsx)(dist.T3,{icon:show?appIcons.m.iconCaretDown:appIcons.m.iconCaretUp,onClick:()=>setShow(!show)}),show&&(0,jsx_runtime.jsx)(data_dist.ZR,{hideScroller:!0,padding:"none",orientation:"horizontal",items:scenes.sort(((a,b)=>a[0]<b[0]?-1:1)),children:({data,...props})=>(0,jsx_runtime.jsx)(data_dist.Iz,{...props,children:(0,jsx_runtime.jsxs)("div",{className:"ax-video__scenes--card",children:[(0,jsx_runtime.jsx)("span",{children:utilities_dist.Format.durationSeconds(data[0],!0)}),(0,jsx_runtime.jsx)("img",{src:data[1],loading:"lazy",onClick:()=>null!=videoRef.current&&(videoRef.current.currentTime=data[0])})]})})})]})}));SceneList.displayName="AxVideo.Scenes";try{SceneList.displayName="AxVideo.Scenes",SceneList.__docgenInfo={description:"",displayName:"AxVideo.Scenes",props:{scenes:{defaultValue:null,description:"",name:"scenes",required:!1,type:{name:"[time: number, poster: string][]"}},videoRef:{defaultValue:null,description:"",name:"videoRef",required:!0,type:{name:"RefObject<HTMLVideoElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/SceneList.tsx#AxVideo.Scenes"]={docgenInfo:AxVideo.Scenes.__docgenInfo,name:"AxVideo.Scenes",path:"packages/media/src/video/SceneList.tsx#AxVideo.Scenes"})}catch(__react_docgen_typescript_loader_error){}const video_Tools_Tools=(0,react.memo)((({isPlaying,isDisabled,videoRef,isFit,rotate,markers=[],onToggleFit,onToggleSrt,onRotate,showVtt,hasVtt})=>{const[time,setTime]=(0,react.useState)(0),[speed,setSpeed]=(0,react.useState)(0),[volume,setVolume]=(0,react.useState)(0),[duration,setDuration]=(0,react.useState)(0);(0,react.useEffect)((()=>{const timeChange=()=>setTime(videoRef.current?.currentTime??0),speedChange=()=>setSpeed(videoRef.current?.playbackRate??1),volumeChange=()=>setVolume(videoRef.current?.volume??.5),durationChange=()=>setDuration(videoRef.current?.duration??0),reset=()=>{setVolume(videoRef.current?.volume??.5),setSpeed(videoRef.current?.playbackRate??1)};return videoRef.current?.addEventListener("loadedmetadata",reset),videoRef.current?.addEventListener("durationchange",durationChange),videoRef.current?.addEventListener("timeupdate",timeChange),videoRef.current?.addEventListener("ratechange",speedChange),videoRef.current?.addEventListener("volumechange",volumeChange),()=>{videoRef.current?.removeEventListener("loadedmetadata",reset),videoRef.current?.removeEventListener("durationchange",durationChange),videoRef.current?.removeEventListener("timeupdate",timeChange),videoRef.current?.removeEventListener("ratechange",speedChange),videoRef.current?.removeEventListener("volumechange",volumeChange)}}),[]);const handleSeek=(0,react.useCallback)(((newTime=0)=>{const time=Math.min(duration,Math.max(0,newTime));setTime(time),null!=videoRef.current&&(videoRef.current.currentTime=time)}),[duration]),handleVolume=(0,react.useCallback)(((newVolume=0)=>{const volume=Math.min(1,Math.max(0,newVolume));setVolume(volume),null!=videoRef.current&&(videoRef.current.volume=volume)}),[]),handleSpeed=(0,react.useCallback)(((newSpeed=0)=>{const speed=Math.min(5,Math.max(0,newSpeed));setSpeed(speed),null!=videoRef.current&&(videoRef.current.playbackRate=speed)}),[]),volumeIcon=(0,react.useMemo)((()=>volume>.75?Icons.iconVolumeFull:volume>.4?Icons.iconVolumeMedium:volume>0?Icons.iconVolumeLow:Icons.iconVolumeMute),[volume]);return(0,jsx_runtime.jsxs)("div",{className:"ax-media__tools","data-disabled":isDisabled,children:[(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"space",handler:()=>{isPlaying?videoRef.current?.pause():videoRef.current?.play().then()}}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"f",handler:onToggleFit}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"x",handler:handleVolume}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:",",handler:()=>handleSeek(time-5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:".",handler:()=>handleSeek(time+5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"[",handler:()=>onRotate(rotate-90)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"]",handler:()=>onRotate(rotate+90)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+{",handler:()=>handleSpeed(speed-.5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+}",handler:()=>handleSpeed(speed+.5)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"-",handler:()=>handleVolume(volume-.1)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"=",handler:()=>handleVolume(volume+.1)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+<",handler:()=>handleSeek(time-.165)}),(0,jsx_runtime.jsx)(dist.I8,{global:!0,keyCombo:"shift+>",handler:()=>handleSeek(time+.165)}),(0,jsx_runtime.jsxs)("div",{className:"toolbar",children:[isPlaying&&(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconPause,onClick:()=>videoRef.current?.pause()}),!isPlaying&&(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconPlay,onClick:()=>{videoRef.current?.play()}}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:volumeIcon,onClick:()=>handleVolume(1===volume?0:volume>=.5?1:.5)}),(0,jsx_runtime.jsx)("div",{className:"ax-media__slider--mini",children:(0,jsx_runtime.jsx)("input",{type:"range",min:0,max:1,step:.1,value:volume,onChange:e=>handleVolume(e.currentTarget.valueAsNumber)})}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool text-icon",icon:`${speed.toFixed(1)}x`,onClick:()=>handleSpeed(1)}),(0,jsx_runtime.jsx)("div",{className:"ax-media__slider--mini",children:(0,jsx_runtime.jsx)("input",{type:"range",min:.5,max:5,step:.5,value:speed,onChange:e=>handleSpeed(e.currentTarget.valueAsNumber)})}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(dist.T3,{"data-active":isFit,className:"ax-media__tool",icon:Icons.iconFitToView,onClick:onToggleFit}),hasVtt&&(0,jsx_runtime.jsx)(dist.T3,{"data-active":showVtt,className:"ax-media__tool",icon:Icons.iconSrt,onClick:onToggleSrt}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"sm"}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconRotateCCW,onClick:()=>onRotate(rotate-90)}),(0,jsx_runtime.jsx)(dist.T3,{className:"ax-media__tool",icon:Icons.iconRotateCW,onClick:()=>onRotate(rotate+90)}),(0,jsx_runtime.jsxs)("label",{className:"basis-24",children:["Rotate: ",rotate,"°"]}),(0,jsx_runtime.jsx)(dist.nZ,{vertical:!0,size:"xs"}),(0,jsx_runtime.jsx)(TimeSlider,{duration,time,markers,onChange:handleSeek}),(0,jsx_runtime.jsxs)("label",{className:"ax-video__timeDisplay",children:[(0,jsx_runtime.jsx)("span",{children:utilities_dist.Format.duration(time,!0)}),(0,jsx_runtime.jsx)("small",{children:"/"}),(0,jsx_runtime.jsx)("span",{children:utilities_dist.Format.durationSeconds(duration,!0)})]})]})]})}));video_Tools_Tools.displayName="AxVideo.Tools";try{video_Tools_Tools.displayName="AxVideo.Tools",video_Tools_Tools.__docgenInfo={description:"",displayName:"AxVideo.Tools",props:{isFit:{defaultValue:null,description:"",name:"isFit",required:!0,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"",name:"isPlaying",required:!0,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}},showVtt:{defaultValue:null,description:"",name:"showVtt",required:!0,type:{name:"boolean"}},hasVtt:{defaultValue:null,description:"",name:"hasVtt",required:!0,type:{name:"boolean"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!0,type:{name:"number"}},videoRef:{defaultValue:null,description:"",name:"videoRef",required:!0,type:{name:"RefObject<HTMLVideoElement>"}},markers:{defaultValue:null,description:"",name:"markers",required:!1,type:{name:"[time: number, score: number][]"}},onToggleFit:{defaultValue:null,description:"",name:"onToggleFit",required:!0,type:{name:"() => void"}},onToggleSrt:{defaultValue:null,description:"",name:"onToggleSrt",required:!0,type:{name:"() => void"}},onRotate:{defaultValue:null,description:"",name:"onRotate",required:!0,type:{name:"(rotate: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Tools.tsx#AxVideo.Tools"]={docgenInfo:AxVideo.Tools.__docgenInfo,name:"AxVideo.Tools",path:"packages/media/src/video/Tools.tsx#AxVideo.Tools"})}catch(__react_docgen_typescript_loader_error){}const AxVideoPlayer=(0,react.forwardRef)((({src,poster,isNsfw,vttText,markers=[],scenes=[],onLoad,onError,onChange,onPause,onPlay},ref)=>{const canvasRef=(0,react.useRef)(null),videoRef=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),[,startTransition]=(0,react.useTransition)(),initState=(0,react.useCallback)((()=>({rotate:0,width:0,height:0,isLoading:!0,isErrored:!1,isFit:!1,showVtt:!1,isPlaying:!1})),[]),calculateSize=(0,react.useCallback)(((rotate,fitToView)=>{const el=containerRef.current,vid=videoRef.current;if(null!=el&&vid&&vid.videoWidth){const turn=rotate%180!=0;let width=vid.videoWidth,height=vid.videoHeight;const containerWidth=turn?el.offsetHeight:el.offsetWidth,containerHeight=turn?el.offsetWidth:el.offsetHeight;return fitToView?containerWidth/containerHeight>width/height?(width*=containerHeight/height,height=containerHeight):(height*=containerWidth/width,width=containerWidth):(width=Math.min(width,containerWidth),height=Math.min(height,containerHeight)),{width,height}}return{width:"100%",height:"100%"}}),[]),reducer=(0,react.useCallback)(((state,action)=>("init"===action.type&&(state=initState()),"loaded"===action.type&&(state.isLoading=!1,state.isErrored=!1,state={...state,...calculateSize(state.rotate,state.isFit)}),"errored"===action.type&&(state.isErrored=!0,state.isLoading=!1),"play"===action.type&&(state.isPlaying=!0),"pause"===action.type&&(state.isPlaying=!1),"fit"===action.type&&(state.isFit=action.payload,state={...state,...calculateSize(state.rotate,state.isFit)}),"vtt"===action.type&&(state.showVtt=action.payload),"rotate"===action.type&&(state.rotate=action.payload>270?0:action.payload<0?270:action.payload,state={...state,...calculateSize(state.rotate,state.isFit)}),"resize"===action.type&&(state={...state,...calculateSize(state.rotate,state.isFit)}),{...state})),[initState]),[state,dispatch]=(0,react.useReducer)(reducer,{loaded:!1,error:!1,isFit:!1,showVtt:!1,isPlaying:!1},initState);(0,react.useImperativeHandle)(ref,(()=>null!=canvasRef.current?{seek:ts=>videoRef.current&&(videoRef.current.currentTime=ts),play:async()=>await(videoRef.current?.play()),playAt:async time=>await(videoRef.current&&(videoRef.current.currentTime=time,videoRef.current?.play())),pause:()=>videoRef.current?.pause(),currentTime:()=>videoRef.current?.currentTime,on:videoRef.current?.addEventListener.bind(videoRef.current),off:videoRef.current?.removeEventListener.bind(videoRef.current),...canvasRef.current}:null),[]);const resizeHandler=(0,react.useCallback)((size=>{dispatch({type:"resize"})}),[state.rotate]);(0,react.useEffect)((()=>{if(null!=videoRef.current){const ob=new ResizeObserver(resizeHandler);return ob.observe(videoRef.current),()=>{ob.disconnect()}}}),[]),(0,react.useLayoutEffect)((()=>{dispatch({type:"init"}),null!=videoRef.current&&(videoRef.current.volume=.5),null!=videoRef.current&&(videoRef.current.playbackRate=1),canvasRef.current?.clear()}),[src]);const handleLoad=(0,react.useCallback)((e=>{dispatch({type:"loaded"}),startTransition((()=>{onLoad?.(e)}))}),[onLoad]),handleError=(0,react.useCallback)((e=>{dispatch({type:"errored"}),startTransition((()=>onError?.(e)))}),[onError]),disableTools=(0,react.useMemo)((()=>state.isLoading||!!state.isErrored),[state]),handlePlay=(0,react.useCallback)((()=>{dispatch({type:"play"}),startTransition((()=>onPlay?.()))}),[onPlay]),handlePause=(0,react.useCallback)((()=>{dispatch({type:"pause"}),startTransition((()=>onPause?.()))}),[onPause]),handleTimeUpdate=(0,react.useCallback)((()=>{startTransition((()=>onChange?.(videoRef.current?.currentTime??0)))}),[onChange]);return(0,react.useEffect)((()=>(videoRef.current?.addEventListener("play",handlePlay),videoRef.current?.addEventListener("pause",handlePause),videoRef.current?.addEventListener("timeupdate",handleTimeUpdate),()=>{videoRef.current?.removeEventListener("play",handlePlay),videoRef.current?.removeEventListener("pause",handlePause),videoRef.current?.removeEventListener("timeupdate",handleTimeUpdate)})),[handlePlay,handlePause,handleTimeUpdate]),(0,jsx_runtime.jsx)(HotKeyWrapper.O1,{children:(0,jsx_runtime.jsxs)("div",{className:"ax-media","data-error":state.isErrored,onContextMenuCapture:e=>e.preventDefault(),children:[(0,jsx_runtime.jsx)("div",{className:"ax-media__container ax-video__wrapper",ref:containerRef,onClick:()=>{videoRef.current?.paused?videoRef.current?.play():videoRef.current?.pause()},children:(0,jsx_runtime.jsx)(Video,{src,poster,vttText,isFit:state.isFit,rotate:state.rotate,showVtt:state.showVtt,isPlaying:state.isPlaying,width:state.width,height:state.height,videoRef,canvasRef,isNsfw:!!isNsfw,onLoad:handleLoad,onError:handleError,onChange:()=>onChange?.(videoRef.current?.currentTime??0)})}),scenes?.length>1&&(0,jsx_runtime.jsx)(SceneList,{scenes,videoRef}),(0,jsx_runtime.jsx)(video_Tools_Tools,{markers,videoRef,isDisabled:disableTools,isPlaying:state.isPlaying,isFit:state.isFit,showVtt:state.showVtt,hasVtt:!(0,utilities_dist.isEmpty)(vttText),rotate:state.rotate,onRotate:rotate=>dispatch({type:"rotate",payload:rotate}),onToggleSrt:()=>dispatch({type:"vtt",payload:!state.showVtt}),onToggleFit:()=>dispatch({type:"fit",payload:!state.isFit})}),state.isLoading&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(dist.Qo.Bars,{})}),state.isErrored&&(0,jsx_runtime.jsx)("div",{className:"ax-media__overlay",children:(0,jsx_runtime.jsx)(dist.T3,{size:48,icon:Icons.iconVideo})}),isNsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{isNsfw})]})})}));AxVideoPlayer.displayName="AxVideo.Player";try{AxVideoPlayer.displayName="AxVideo.Player",AxVideoPlayer.__docgenInfo={description:"",displayName:"AxVideo.Player",props:{onChange:{defaultValue:null,description:"onChange playback time",name:"onChange",required:!1,type:{name:"((currentTime: number) => void)"}},src:{defaultValue:null,description:"video src url",name:"src",required:!0,type:{name:"string"}},poster:{defaultValue:null,description:"video poster url",name:"poster",required:!1,type:{name:"string"}},isNsfw:{defaultValue:null,description:"show overlay for NSFW content",name:"isNsfw",required:!1,type:{name:"boolean"}},vttText:{defaultValue:null,description:"",name:"vttText",required:!1,type:{name:"string"}},markers:{defaultValue:{value:"[]"},description:"timeline markers",name:"markers",required:!1,type:{name:"[time: number, score: number][]"}},scenes:{defaultValue:{value:"[]"},description:"scene list",name:"scenes",required:!1,type:{name:"[time: number, poster: string][]"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"ReactEventHandler<HTMLVideoElement>"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"ReactEventHandler<HTMLVideoElement>"}},onPause:{defaultValue:null,description:"",name:"onPause",required:!1,type:{name:"(() => void)"}},onPlay:{defaultValue:null,description:"",name:"onPlay",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/VideoPlayer.tsx#AxVideo.Player"]={docgenInfo:AxVideo.Player.__docgenInfo,name:"AxVideo.Player",path:"packages/media/src/video/VideoPlayer.tsx#AxVideo.Player"})}catch(__react_docgen_typescript_loader_error){}}}]);