"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[4130],{"./node_modules/@arcgis/core/chunks/mat3f64.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function t(e,r,t,n,o,a,u,c,f){return[e,r,t,n,o,a,u,c,f]}function n(e,r){return new Float64Array(e,r,9)}__webpack_require__.d(__webpack_exports__,{a:()=>n,c:()=>e,f:()=>t});Object.freeze(Object.defineProperty({__proto__:null,clone:function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>h});var _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_maybe_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/quickselect.js");class h{constructor(t=9,i){this._compareMinX=l,this._compareMinY=c,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),g.prune(),M.prune(),X.prune(),Y.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(f(t,n))for(g.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;f(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):g.push(h))}n=g.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!f(t,i))return!1;for(g.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(f(t,h)){if(i.leaf||x(t,h))return!0;g.push(s)}}i=g.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new b([]),this}remove(i){if(!i)return this;let e,s=this._data,h=null,a=0,r=!1;const o=this._toBBox(i);for(X.clear(),Y.clear();s||X.length>0;){if(s||(s=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_3__.j0)(X.pop()),h=X.data[X.length-1],a=Y.pop()??0,r=!0),s.leaf&&(e=(0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.cq)(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),X.push(s),this._condense(X),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(X.push(s),Y.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));p(t,i,n,l,this._compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);p(t,a,i,o,this._compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=u(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);X.clear();const h=this._chooseSubtree(s,this._data,i,X);for(h.children.push(t),o(h,s);i>=0&&X.data[i].children.length>this._maxEntries;)this._split(X,i),i--;this._adjustParentBBoxes(s,X,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this._toBBox),a(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new j([t,i]),this._data.height=t.height+1,a(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this._toBBox),o=r(t,a,n,this._toBBox),l=_(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:l,s=t.leaf?this._compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=d(h)+d(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=d(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=d(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice((0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.cq)(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this._compareMinX=new Function("a","b",i.join(t[0])),this._compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function _(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_3__.j0)(r.pop()),e=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_3__.j0)(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;(0,_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,o,e,i,a),r.push(e,o,o,i)}}const g=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z,M=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z,X=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z,Y=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__.Z({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.SO}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}},"./node_modules/@arcgis/core/core/perspectiveUtils.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>j,H:()=>h});var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js");const f=(0,__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f64.js").c)(),i=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),e=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),p=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();function h(t,r,n){return(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.s)(f,r[0],r[1],1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.t)(f,f,(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.t)(i,n)),0===f[2]?(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(t,f[0],f[1]):(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(t,f[0]/f[2],f[1]/f[2])}function j(s,n,o){return k(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),k(p,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(s,(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.a)(e,e),p),0!==s[8]&&(s[0]/=s[8],s[1]/=s[8],s[2]/=s[8],s[3]/=s[8],s[4]/=s[8],s[5]/=s[8],s[6]/=s[8],s[7]/=s[8],s[8]/=s[8]),s}function k(o,c,u,e,p,h,j,k,v){(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(o,c,e,h,u,p,j,1,1,1),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.s)(f,k,v,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.a)(i,o);const[x,b,d]=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.t)(f,f,(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.t)(i,i));return(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(i,x,0,0,0,b,0,0,0,d),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(o,i,o)}},"./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{SR:()=>p,Ui:()=>a});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/boundsUtils.js"),_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js"),_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js"),_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function a(t){return f(t,!0)}function p(t){return f(t,!1)}function f(i,n){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.Wi)(i))return null;const a=i.spatialReference,p=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.C5)(a),f="toJSON"in i?i.toJSON():i;if(!p)return f;const I=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__.sS)(a)?102100:4326,g=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.UZ[I].maxX,v=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.UZ[I].minX;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.wp)(f))return y(f,g,v);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.aW)(f))return f.points=f.points.map((t=>y(t,g,v))),f;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.YX)(f))return d(f,p);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.oU)(f)||(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.l9)(f)){const t=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__.$P)(S,f),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},e=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(i.xmin,v)*(2*g),h=0===e?f:(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.Sy)(f,e);return i.xmin+=e,i.xmax+=e,i.xmax>g?P(h,g,n):i.xmin<v?P(h,v,n):h}return f}function d(t,i){if(!i)return t;const s=function I(t,i){const s=[],{ymin:n,ymax:e,xmin:h,xmax:o}=t,r=t.xmax-t.xmin,[u,m]=i.valid,{x,frameId:_}=g(t.xmin,i),{x:l,frameId:c}=g(t.xmax,i),a=x===l&&r>0;if(r>2*m){const t={xmin:h<o?x:l,ymin:n,xmax:m,ymax:e},i={xmin:u,ymin:n,xmax:h<o?l:x,ymax:e},r={xmin:0,ymin:n,xmax:m,ymax:e},a={xmin:u,ymin:n,xmax:0,ymax:e},p=[],f=[];v(t,r)&&p.push(_),v(t,a)&&f.push(_),v(i,r)&&p.push(c),v(i,a)&&f.push(c);for(let s=_+1;s<c;s++)p.push(s),f.push(s);s.push(new C(t,[_]),new C(i,[c]),new C(r,p),new C(a,f))}else x>l||a?s.push(new C({xmin:x,ymin:n,xmax:m,ymax:e},[_]),new C({xmin:u,ymin:n,xmax:l,ymax:e},[c])):s.push(new C({xmin:x,ymin:n,xmax:l,ymax:e},[_]));return s}(t,i).map((t=>t.extent));return s.length<2?s[0]||t:s.length>2?(t.xmin=i.valid[0],t.xmax=i.valid[1],t):{rings:s.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function y(t,i,s){if(Array.isArray(t)){const n=t[0];if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,i);t[0]=n+s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,s);t[0]=n+i*(-2*s)}}else{const n=t.x;if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,i);t.x+=s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__.XZ)(n,s);t.x+=i*(-2*s)}}return t}function g(t,i){const[s,n]=i.valid,e=2*n;let h,o=0;return t>n?(h=Math.ceil(Math.abs(t-n)/e),t-=h*e,o=h):t<s&&(h=Math.ceil(Math.abs(t-s)/e),t+=h*e,o=-h),{x:t,frameId:o}}function v(t,i){const{xmin:s,ymin:n,xmax:e,ymax:h}=i;return O(t,s,n)&&O(t,s,h)&&O(t,e,h)&&O(t,e,n)}function O(t,i,s){return i>=t.xmin&&i<=t.xmax&&s>=t.ymin&&s<=t.ymax}function P(t,i,s=!0){const e=!(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__.l9)(t);if(e&&(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__.Zy)(t),s)return(new T).cut(t,i);const h=e?t.rings:t.paths,o=e?4:2,r=h.length,m=-2*i;for(let n=0;n<r;n++){const t=h[n];if(t&&t.length>=o){const i=[];for(const s of t)i.push([s[0]+m,s[1]]);h.push(i)}}return e?t.rings=h:t.paths=h,t}class C{constructor(t,i){this.extent=t,this.frameIds=i}}const S=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__.Ue)();class T{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,i){let s;if(this._xCut=i,t.rings)this._closed=!0,s=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,s=t.paths,this._minPts=2}for(const e of s){if(!e||e.length<this._minPts)continue;let t=!0;for(const i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),s=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&s.push(e);const n=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=n;s.push(e)}return this._closed?t.rings=s:t.paths=s,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const i=this._side(t[0]);if(i*this._prevSide==-1){const s=this._intersect(this._prevPt,t);this._lineTo(this._xCut,s,0),this._prevSide=0,this._lineTo(t[0],t[1],i)}else this._lineTo(t[0],t[1],i);this._prevSide=i,this._prevPt=t}close(){const t=this._firstPt,i=this._prevPt;t[0]===i[0]&&t[1]===i[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,i,s){this._closed?(this._lineIn.push([s<=0?t:this._xCut,i]),this._lineOut.push([s>=0?t:this._xCut,i])):(s<=0&&this._lineIn.push([t,i]),s>=0&&this._lineOut.push([t,i]))}_lineTo(t,i,s){this._closed?(this._addPolyVertex(this._lineIn,s<=0?t:this._xCut,i),this._addPolyVertex(this._lineOut,s>=0?t:this._xCut,i)):s<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,i])):s>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,i])):this._prevSide<0?(this._lineIn.push([t,i]),this._lineOut.push([t,i])):this._prevSide>0&&(this._lineOut.push([t,i]),this._lineIn.push([t,i]))}_addPolyVertex(t,i,s){const n=t.length;n>1&&t[n-1][0]===i&&t[n-2][0]===i?t[n-1][1]=s:t.push([i,s])}_checkClosingPt(t){const i=t.length;i>3&&t[0][0]===this._xCut&&t[i-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[i-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,i){const s=(this._xCut-t[0])/(i[0]-t[0]);return t[1]+s*(i[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},"./node_modules/@arcgis/core/layers/MediaLayer.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MediaLayer_v});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),MultiOriginJSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),reader=(__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),BlendLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/BlendLayer.js"),OperationalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js"),ScaleRangeLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js"),Identifiable=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/Identifiable.js")),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),perspectiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/perspectiveUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/chunks/mat3f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/chunks/vec2f64.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js");__webpack_require__("./node_modules/@arcgis/core/core/has.js");let a=class extends Clonable.j{projectOrWarn(e,r){if((0,maybe.Wi)(e))return e;const{geometry:s,pending:a}=(0,projection.dz)(e,r);return a?null:a||s?s:(Logger.Z.getLogger(this.declaredClass).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:e,sourceSpatialReference:e.spatialReference,targetSpatialReference:r}),null)}};a=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.GeoreferenceBase")],a);const p=a,O=(0,mat3f64.c)(),b=(0,vec2f64.a)();let k=class extends Accessor.Z{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,tslib_es6._)([(0,property.Cb)()],k.prototype,"sourcePoint",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Point.Z})],k.prototype,"mapPoint",void 0),k=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.ControlPoint")],k);let I=class extends((0,JSONSupport.eC)(p)){constructor(o){super(o),this.controlPoints=null,this.height=0,this.type="control-points",this.width=0}readControlPoints(o,t){const r=SpatialReference.Z.fromJSON(t.spatialReference),e=(0,mat3f64.f)(...t.coefficients,1);return o.map((o=>((0,vec2.s)(b,o.x,o.y),(0,perspectiveUtils.H)(b,b,e),{sourcePoint:o,mapPoint:new Point.Z({x:b[0],y:b[1],spatialReference:r})})))}writeControlPoints(o,t,e,l){if((0,maybe.Wi)(this.transform)){const o=new Error.Z("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:l?.layer,georeference:this});l?.messages?l.messages.push(o):Logger.Z.getLogger(this.declaredClass).error(o.name,o.message)}else(0,maybe.pC)(o)&&M(o[0])&&(t.controlPoints=o.map((o=>{const t=(0,maybe.Wg)(o.sourcePoint);return{x:t.x,y:t.y}})),t.spatialReference=o[0].mapPoint.spatialReference.toJSON(),t.coefficients=this.transform.slice(0,8))}get coords(){if((0,maybe.Wi)(this.controlPoints))return null;const o=this._updateTransform(O);if((0,maybe.Wi)(o)||!M(this.controlPoints[0]))return null;const t=this.controlPoints[0].mapPoint.spatialReference;return function X(o,t,r,e){const n=(0,vec2f64.f)(0,r),i=(0,vec2f64.f)(0,0),s=(0,vec2f64.f)(t,0),c=(0,vec2f64.f)(t,r);return(0,perspectiveUtils.H)(n,n,o),(0,perspectiveUtils.H)(i,i,o),(0,perspectiveUtils.H)(s,s,o),(0,perspectiveUtils.H)(c,c,o),new Polygon.Z({rings:[[n,i,s,c,n]],spatialReference:e})}(o,this.width,this.height,t)}set coords(o){if((0,maybe.Wi)(this.controlPoints)||!M(this.controlPoints[0]))return;const t=this.controlPoints[0].mapPoint.spatialReference;if(o=this.projectOrWarn(o,t),(0,maybe.Wi)(o))return;const{width:r,height:e}=this,{rings:[[n,s,a,u]]}=o,m={sourcePoint:(0,screenUtils.vW)(0,e),mapPoint:new Point.Z({x:n[0],y:n[1],spatialReference:t})},f={sourcePoint:(0,screenUtils.vW)(0,0),mapPoint:new Point.Z({x:s[0],y:s[1],spatialReference:t})},P={sourcePoint:(0,screenUtils.vW)(r,0),mapPoint:new Point.Z({x:a[0],y:a[1],spatialReference:t})},h={sourcePoint:(0,screenUtils.vW)(r,e),mapPoint:new Point.Z({x:u[0],y:u[1],spatialReference:t})};M(m)&&M(f)&&M(P)&&M(h)&&(F(O,m,f,P,h),this.controlPoints=(0,maybe.Wg)(this.controlPoints).map((({sourcePoint:o})=>((0,vec2.s)(b,o.x,o.y),(0,perspectiveUtils.H)(b,b,O),{sourcePoint:o,mapPoint:new Point.Z({x:b[0],y:b[1],spatialReference:t})}))))}get inverseTransform(){return(0,maybe.Wi)(this.transform)?null:(0,mat3.e)((0,mat3f64.c)(),this.transform)}get transform(){return this._updateTransform()}toMap(o){if((0,maybe.Wi)(o)||(0,maybe.Wi)(this.transform)||(0,maybe.Wi)(this.controlPoints)||!M(this.controlPoints[0]))return null;(0,vec2.s)(b,o.x,o.y);const t=this.controlPoints[0].mapPoint.spatialReference;return(0,perspectiveUtils.H)(b,b,this.transform),new Point.Z({x:b[0],y:b[1],spatialReference:t})}toSource(o){if((0,maybe.Wi)(o)||(0,maybe.Wi)(this.inverseTransform)||(0,maybe.Wi)(this.controlPoints)||!M(this.controlPoints[0]))return null;const t=this.controlPoints[0].mapPoint.spatialReference;return o=o.normalize(),o=(0,projection.dz)(o,t).geometry,(0,maybe.Wi)(o)?null:((0,vec2.s)(b,o.x,o.y),(0,perspectiveUtils.H)(b,b,this.inverseTransform),(0,screenUtils.vW)(b[0],b[1]))}_updateTransform(o){const{controlPoints:t,width:r,height:e}=this;if((0,maybe.Wi)(t)||!(r>0)||!(e>0))return null;const[n,s,c,l]=t;if(!M(n))return null;const a=n.mapPoint.spatialReference,p=this._projectControlPoint(s,a),u=this._projectControlPoint(c,a),m=this._projectControlPoint(l,a);if(!p.valid||!u.valid||!m.valid)return null;if(!M(p.controlPoint))return null;(0,maybe.Wi)(o)&&(o=(0,mat3f64.c)());let f=null;return f=M(u.controlPoint)&&M(m.controlPoint)?F(o,n,p.controlPoint,u.controlPoint,m.controlPoint):M(u.controlPoint)?function D(o,t,r,e){return E(N,U,t),E(A,G,r),E(J,q,e),(0,vec2.l)(L,N,A,.5),(0,vec2.r)(L,J,L,Math.PI),(0,vec2.l)(z,U,G,.5),(0,vec2.r)(z,q,z,Math.PI),V(o,N,A,J,L,U,G,q,z)}(o,n,p.controlPoint,u.controlPoint):function W(o,t,r){return E(N,U,t),E(A,G,r),(0,vec2.r)(J,A,N,B),(0,vec2.r)(L,N,A,B),(0,vec2.r)(q,G,U,-B),(0,vec2.r)(z,U,G,-B),V(o,N,A,J,L,U,G,q,z)}(o,n,p.controlPoint),f.every((o=>0===o))?null:f}_projectControlPoint(o,t){if(!M(o))return{valid:!0,controlPoint:o};const{sourcePoint:r,mapPoint:e}=o,{geometry:i,pending:s}=(0,projection.dz)(e,t);return s?{valid:!1,controlPoint:null}:s||i?{valid:!0,controlPoint:{sourcePoint:r,mapPoint:i}}:(Logger.Z.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:o,sourceSpatialReference:e.spatialReference,targetSpatialReference:t}),{valid:!1,controlPoint:null})}};function M(o){return(0,maybe.pC)(o)&&(0,maybe.pC)(o.sourcePoint)&&(0,maybe.pC)(o.mapPoint)}(0,tslib_es6._)([(0,property.Cb)({type:[k],json:{write:{allowNull:!1,isRequired:!0}}})],I.prototype,"controlPoints",void 0),(0,tslib_es6._)([(0,reader.r)("controlPoints")],I.prototype,"readControlPoints",null),(0,tslib_es6._)([(0,writer.c)("controlPoints")],I.prototype,"writeControlPoints",null),(0,tslib_es6._)([(0,property.Cb)()],I.prototype,"coords",null),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0}})],I.prototype,"height",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],I.prototype,"inverseTransform",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],I.prototype,"transform",null),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0}})],I.prototype,"width",void 0),I=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.ControlPointsGeoreference")],I);const N=(0,vec2f64.a)(),A=(0,vec2f64.a)(),J=(0,vec2f64.a)(),L=(0,vec2f64.a)(),U=(0,vec2f64.a)(),G=(0,vec2f64.a)(),q=(0,vec2f64.a)(),z=(0,vec2f64.a)(),B=Math.PI/2;function E(o,t,r){(0,vec2.s)(o,r.sourcePoint.x,r.sourcePoint.y),(0,vec2.s)(t,r.mapPoint.x,r.mapPoint.y)}function F(o,t,r,e,n){return E(N,U,t),E(A,G,r),E(J,q,e),E(L,z,n),V(o,N,A,J,L,U,G,q,z)}const H=new Array(8).fill(0),K=new Array(8).fill(0);function Q(o,t,r,e,n){return o[0]=t[0],o[1]=t[1],o[2]=r[0],o[3]=r[1],o[4]=e[0],o[5]=e[1],o[6]=n[0],o[7]=n[1],o}function V(o,t,r,e,n,i,s,c,l){return(0,perspectiveUtils.E)(o,Q(H,t,r,e,n),Q(K,i,s,c,l))}const Y=I;let n=class extends p{constructor(t){super(t),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:t,topRight:o,bottomLeft:r,bottomRight:s}=this;if((0,maybe.Wi)(t)||(0,maybe.Wi)(o)||(0,maybe.Wi)(r)||(0,maybe.Wi)(s))return null;const i=t.spatialReference;return o=this.projectOrWarn(o,i),r=this.projectOrWarn(r,i),s=this.projectOrWarn(s,i),(0,maybe.Wi)(o)||(0,maybe.Wi)(r)||(0,maybe.Wi)(s)?null:new Polygon.Z({rings:[[[r.x,r.y],[t.x,t.y],[o.x,o.y],[s.x,s.y],[r.x,r.y]]],spatialReference:i})}set coords(t){const{topLeft:o}=this;if((0,maybe.Wi)(o))return;const r=o.spatialReference;if(t=this.projectOrWarn(t,r),(0,maybe.Wi)(t))return;const{rings:[[p,i,n,c]]}=t;this.bottomLeft=new Point.Z({x:p[0],y:p[1],spatialReference:r}),this.topLeft=new Point.Z({x:i[0],y:i[1],spatialReference:r}),this.topRight=new Point.Z({x:n[0],y:n[1],spatialReference:r}),this.bottomRight=new Point.Z({x:c[0],y:c[1],spatialReference:r})}};(0,tslib_es6._)([(0,property.Cb)()],n.prototype,"coords",null),(0,tslib_es6._)([(0,property.Cb)({type:Point.Z})],n.prototype,"bottomLeft",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Point.Z})],n.prototype,"bottomRight",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Point.Z})],n.prototype,"topLeft",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Point.Z})],n.prototype,"topRight",void 0),n=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.CornersGeoreference")],n);const c=n;var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),common=__webpack_require__("./node_modules/@arcgis/core/chunks/common.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js");let ExtentAndRotationGeoreference_p=class extends p{constructor(t){super(t),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if((0,maybe.Wi)(this.extent))return null;const{xmin:t,ymin:e,xmax:o,ymax:s,spatialReference:n}=this.extent;let i;if(this.rotation){const{x:r,y:n}=this.extent.center,a=m(r,n,this.rotation);i=[a(t,e),a(t,s),a(o,s),a(o,e)],i.push(i[0])}else i=[[t,e],[t,s],[o,s],[o,e],[t,e]];return new Polygon.Z({rings:[i],spatialReference:n})}set coords(t){if((0,maybe.Wi)(t)||(0,maybe.Wi)(this.extent))return;const o=this.extent.spatialReference;if(t=this.projectOrWarn(t,o),(0,maybe.Wi)(t)||(0,maybe.Wi)(t.extent))return;const{rings:[[s,n,a]],extent:{center:{x:c,y:p}}}=t,x=(0,mathUtils.BV)(Math.PI/2-Math.atan2(n[1]-s[1],n[0]-s[0])),u=m(c,p,-x),[f,h]=u(s[0],s[1]),[l,y]=u(a[0],a[1]);this.extent=new Extent.Z({xmin:f,ymin:h,xmax:l,ymax:y,spatialReference:o}),this.rotation=x}};function m(t,e,r){const o=(0,common.t)(r),s=Math.cos(o),i=Math.sin(o);return(r,o)=>[s*(r-t)+i*(o-e)+t,s*(o-e)-i*(r-t)+e]}(0,tslib_es6._)([(0,property.Cb)()],ExtentAndRotationGeoreference_p.prototype,"coords",null),(0,tslib_es6._)([(0,property.Cb)({type:Extent.Z})],ExtentAndRotationGeoreference_p.prototype,"extent",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number})],ExtentAndRotationGeoreference_p.prototype,"rotation",void 0),ExtentAndRotationGeoreference_p=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.ExtentAndRotationGeoreference")],ExtentAndRotationGeoreference_p);const f={key:"type",base:p,typeMap:{"control-points":Y,corners:c,"extent-and-rotation":ExtentAndRotationGeoreference_p}};let l=class extends((0,Identifiable.iv)((0,JSONSupport.eC)(Loadable.Z))){constructor(){super(...arguments),this.georeference=null,this.opacity=1}readGeoreference(e){return Y.fromJSON(e)}};(0,tslib_es6._)([(0,property.Cb)({types:f,json:{write:!0}})],l.prototype,"georeference",void 0),(0,tslib_es6._)([(0,reader.r)("georeference")],l.prototype,"readGeoreference",null),(0,tslib_es6._)([(0,property.Cb)()],l.prototype,"opacity",void 0),l=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.MediaElementBase")],l);const d=l;var resourceExtension=__webpack_require__("./node_modules/@arcgis/core/portal/support/resourceExtension.js"),persistableUrlUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");let ImageElement_I=class extends d{constructor(e){super(e),this.content=null,this.image=null,this.type="image",this.image=null}load(){const e=this.image;if("string"==typeof e){const r=(0,request.default)(e,{responseType:"image"}).then((({data:e})=>{this._set("content",e)}));this.addResolvingPromise(r)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set("content",e)}));this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new Error.Z("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)}readImage(e,t,r){return(0,persistableUrlUtils.f)(t.url,r)}writeImage(e,t,r,a){if((0,maybe.Wi)(e))return;const m=a?.portalItem,p=a?.resources;if(!m||!p)return void("string"==typeof e&&(t[r]=(0,persistableUrlUtils.t)(e,a)));const c="string"!=typeof e||(0,urlUtils.HK)(e)||(0,urlUtils.jc)(e)?null:e;if(c){if(null==(0,persistableUrlUtils.i)(c))return void(t[r]=c);const e=(0,persistableUrlUtils.t)(c,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},persistableUrlUtils.M.NO);if(m&&e&&!(0,urlUtils.YP)(e))return p.toKeep.push({resource:m.resourceFromPath(e),compress:!1}),void(t[r]=e)}t[r]="<pending>",p.pendingOperations.push(ImageElement_E(e).then((e=>{const o=function ImageElement_U(e,t){const r=(0,uuid.D)(),o=`${(0,urlUtils.v_)("media",r)}.${(0,resourceExtension.B)(e)}`;return t.resourceFromPath(o)}(e,m);t[r]=o.itemRelativeUrl,p.toAdd.push({resource:o,content:e,compress:!1,finish:e=>{this.image=e.url}})})))}};(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],ImageElement_I.prototype,"content",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{name:"url",type:String}})],ImageElement_I.prototype,"image",void 0),(0,tslib_es6._)([(0,reader.r)("image",["url"])],ImageElement_I.prototype,"readImage",null),(0,tslib_es6._)([(0,writer.c)("image")],ImageElement_I.prototype,"writeImage",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,json:{name:"mediaType"}})],ImageElement_I.prototype,"type",void 0),ImageElement_I=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.ImageElement")],ImageElement_I);const w=ImageElement_I;async function ImageElement_E(e){if("string"==typeof e){if((0,urlUtils.jc)(e)){const{data:r}=await(0,request.default)(e,{responseType:"blob"});return r}return(0,urlUtils.HK)(e)?(0,urlUtils.fw)(e):ImageElement_E((await(0,request.default)(e,{responseType:"image"})).data)}return new Promise((t=>function T(e){if(e instanceof HTMLCanvasElement)return e;const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,r=e instanceof HTMLImageElement?e.naturalHeight:e.height,o=document.createElement("canvas"),s=o.getContext("2d");return o.width=t,o.height=r,e instanceof HTMLImageElement?s.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&s.putImageData(e,0,0),o}(e).toBlob(t)))}__webpack_require__("./node_modules/@arcgis/core/geometry.js");var collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),HandleOwner=__webpack_require__("./node_modules/@arcgis/core/core/HandleOwner.js"),core_Promise=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),intersectsBase=__webpack_require__("./node_modules/@arcgis/core/geometry/support/intersectsBase.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),BoundsStore=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js"),MediaElementView=__webpack_require__("./node_modules/@arcgis/core/layers/support/MediaElementView.js");let VideoElement_n=class extends d{constructor(e){super(e),this.content=null,this.type="video"}load(){const e=this.video;if("string"==typeof e){const o=document.createElement("video");o.src=e,o.crossOrigin="anonymous",o.autoplay=!0,o.muted=!0,o.loop=!0,this.addResolvingPromise(this._loadVideo(o).then((()=>{this._set("content",o)})))}else e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new Error.Z("video-element:invalid-video-type","Invalid video type",{video:e})));return Promise.resolve(this)}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):Logger.Z.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded.")}_loadVideo(e){return new Promise(((o,s)=>{e.oncanplay=()=>{e.oncanplay=null,e.play().then(o,s)},"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",e.src=e.src)}))}};(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],VideoElement_n.prototype,"content",void 0),(0,tslib_es6._)([(0,property.Cb)()],VideoElement_n.prototype,"video",null),VideoElement_n=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.VideoElement")],VideoElement_n);const VideoElement_a=VideoElement_n,LocalMediaElementSource_V={key:"type",defaultKeyValue:"image",base:d,typeMap:{image:w,video:VideoElement_a}},C=Collection.Z.ofType(LocalMediaElementSource_V);let LocalMediaElementSource_b=class extends(Loadable.Z.LoadableMixin((0,core_Promise.v)((0,HandleOwner.p)(Evented.Z.EventedAccessor)))){constructor(e){super(e),this._index=new BoundsStore.H,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=e=>{for(const s of e.removed){const e=this._elementViewsMap.get(s);this._elementViewsMap.delete(s),this._index.delete(e),this.handles.remove(e),e.destroy(),this.notifyChange("fullExtent")}const{spatialReference:t}=this;for(const s of e.added){if(this._elementViewsMap.get(s))continue;const e=new MediaElementView.L({spatialReference:t,element:s});this._elementViewsMap.set(s,e);const r=(0,reactiveUtils.YP)((()=>e.coords),(()=>this._updateIndexForElement(e,!1)));this._updateIndexForElement(e,!0),this.handles.add(r,e)}this._elementsIndexes.clear(),this.elements.forEach(((e,t)=>this._elementsIndexes.set(e,t))),this.emit("refresh")},this.elements=new C}async load(e){if((0,promiseUtils.k_)(e),!this.spatialReference){const e=this.elements.find((e=>(0,maybe.pC)(e.georeference)&&(0,maybe.pC)(e.georeference.coords)));this._set("spatialReference",e?(0,maybe.Wg)((0,maybe.Wg)(e.georeference).coords).spatialReference:SpatialReference.Z.WGS84)}return this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.handles.add(this.elements.on("change",this._elementsChangedHandler)),this}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(e){this._set("elements",(0,collectionUtils.Z)(e,this._get("elements"),C))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;const e=this._index.fullBounds;return(0,maybe.Wi)(e)?null:new Extent.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}set spatialReference(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):Logger.Z.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}async queryElements(e,t){await this.load(),await(0,projection.iQ)(e.spatialReference,this.spatialReference,null,t);const s=(0,spatialReferenceUtils.fS)(e.spatialReference,this.spatialReference)?e:(0,projection.iV)(e,this.spatialReference);if(!s)return[];const r=s.normalize(),o=[];for(const n of r)this._index.forEachInBounds((0,aaBoundingRect.oJ)(n),(({normalizedCoords:e,element:t})=>{(0,maybe.pC)(e)&&(0,intersectsBase.Nl)(n,e)&&o.push(t)}));return o.sort(((e,t)=>this._elementsIndexes.get(e)-this._elementsIndexes.get(t))),o}_updateIndexForElement(e,t){const s=e.normalizedBounds,r=this._index.has(e),o=(0,maybe.pC)(s);this._index.delete(e),o&&this._index.set(e,s),this.notifyChange("fullExtent"),t||(r!==o?this.emit("refresh"):this.emit("change",{element:e.element}))}};(0,tslib_es6._)([(0,property.Cb)()],LocalMediaElementSource_b.prototype,"elements",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],LocalMediaElementSource_b.prototype,"fullExtent",null),(0,tslib_es6._)([(0,property.Cb)()],LocalMediaElementSource_b.prototype,"spatialReference",null),LocalMediaElementSource_b=(0,tslib_es6._)([(0,subclass.j)("esri.layers.support.LocalMediaElementSource")],LocalMediaElementSource_b);const v=LocalMediaElementSource_b;function g(e){return"object"==typeof e&&null!=e&&"type"in e}let j=class extends((0,BlendLayer.h)((0,ScaleRangeLayer.M)((0,OperationalLayer.q)((0,MultiOriginJSONSupport.R)(Layer.Z))))){constructor(e){super(e),this.effectiveSource=null,this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this.source=new v}load(e){const t=this.source;if(!t)return this.addResolvingPromise(Promise.reject(new Error.Z("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),Promise.resolve(this);const s=g(t)?new v({elements:new Collection.Z([t])}):t;this._set("effectiveSource",s),this.spatialReference&&(s.spatialReference=this.spatialReference);const i=s.load(e).then((()=>{this.spatialReference=s.spatialReference}));return this.addResolvingPromise(i),Promise.resolve(this)}destroy(){(0,maybe.Wg)(this.effectiveSource)?.destroy(),(0,maybe.Wg)(this.source)?.destroy()}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}set source(e){"not-loaded"===this.loadStatus?this._set("source",e):Logger.Z.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded.")}castSource(e){return e?Array.isArray(e)||e instanceof Collection.Z?new v({elements:e}):e:null}readSource(e,r,o){const t="image"===r.mediaType?new w:"video"===r.mediaType?new VideoElement_a:null;return t?.read(r,o),t}writeSource(e,r,t,s){e&&g(e)&&"image"===e.type?e.write(r,s):s?.messages&&s?.messages?.push(new Error.Z("media-layer:unsupported-source","source must be an 'ImageElement'"))}};(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],j.prototype,"effectiveSource",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String})],j.prototype,"copyright",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],j.prototype,"fullExtent",null),(0,tslib_es6._)([(0,property.Cb)({type:["MediaLayer"]})],j.prototype,"operationalLayerType",void 0),(0,tslib_es6._)([(0,property.Cb)({type:["show","hide"]})],j.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.Cb)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],j.prototype,"source",null),(0,tslib_es6._)([(0,cast.p)("source")],j.prototype,"castSource",null),(0,tslib_es6._)([(0,reader.r)("source",["url"])],j.prototype,"readSource",null),(0,tslib_es6._)([(0,writer.c)("source")],j.prototype,"writeSource",null),(0,tslib_es6._)([(0,property.Cb)()],j.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],j.prototype,"type",void 0),j=(0,tslib_es6._)([(0,subclass.j)("esri.layers.MediaLayer")],j);const MediaLayer_v=j},"./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>o});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");const n={minX:0,minY:0,maxX:0,maxY:0};function e(i,s,d){(function t(i){n.minX=i[0],n.minY=i[1],n.maxX=i[2],n.maxY=i[3]})(s),i.search(n,d)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__.Q(9,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.Z)("esri-csp-restrictions")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.cS)();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),e(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},"./node_modules/@arcgis/core/layers/support/MediaElementView.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),_geometry_support_normalizeUtilsSync_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js");let u=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(o){super(o)}get bounds(){const o=this.coords;return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.Wi)(o)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.Wi)(o.extent)?null:(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_7__.oJ)(o.extent)}get coords(){const o=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.Wg)(this.element.georeference)?.coords;return(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.dz)(o,this.spatialReference).geometry}get normalizedCoords(){return _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_5__.Z.fromJSON((0,_geometry_support_normalizeUtilsSync_js__WEBPACK_IMPORTED_MODULE_8__.Ui)(this.coords))}get normalizedBounds(){const o=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.pC)(o)?(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_7__.oJ)(o):null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"element",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"bounds",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"coords",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"normalizedCoords",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)()],u.prototype,"normalizedBounds",null),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.layers.support.MediaElementView")],u)},"./node_modules/@arcgis/core/portal/support/resourceExtension.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>t});var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");function t(i){return o[function p(i){return i instanceof Blob?i.type:function n(t){const p=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ml)(t);return g[p]||a}(i.url)}(i)]||e}const o={},a="text/plain",e=o[a],g={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const c in g)o[g[c]]=c}}]);