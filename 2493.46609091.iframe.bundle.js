/*! For license information please see 2493.46609091.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[2493],{"./node_modules/@babel/runtime/helpers/esm/extends.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}__webpack_require__.d(__webpack_exports__,{Z:()=>_extends})},"./node_modules/@codesandbox/sandpack-client/dist/types-36e5ec0d.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>SandpackLogLevel,_:()=>__awaiter,a:()=>__generator,b:()=>createPackageJSON,c:()=>createError,d:()=>addPackageJSONIfNeeded,e:()=>extractErrorDetails,f:()=>normalizePath,g:()=>__extends,h:()=>__assign,i:()=>__spreadArray,n:()=>nullthrows});var outvariant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/outvariant/lib/index.mjs"),extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}var createError=function(message){return"[sandpack-client]: "+message};function nullthrows(value,err){return void 0===err&&(err="Value is nullish"),(0,outvariant__WEBPACK_IMPORTED_MODULE_0__.kG)(null!=value,createError(err)),value}var DEPENDENCY_ERROR_MESSAGE='"dependencies" was not specified - provide either a package.json or a "dependencies" value',ENTRY_ERROR_MESSAGE='"entry" was not specified - provide either a package.json with the "main" field or an "entry" value';function createPackageJSON(dependencies,devDependencies,entry){return void 0===dependencies&&(dependencies={}),void 0===devDependencies&&(devDependencies={}),void 0===entry&&(entry="/index.js"),JSON.stringify({name:"sandpack-project",main:entry,dependencies,devDependencies},null,2)}function addPackageJSONIfNeeded(files,dependencies,devDependencies,entry){var _a,_b,normalizedFilesPath=normalizePath(files),packageJsonFile=normalizedFilesPath["/package.json"];if(!packageJsonFile)return nullthrows(dependencies,DEPENDENCY_ERROR_MESSAGE),nullthrows(entry,ENTRY_ERROR_MESSAGE),normalizedFilesPath["/package.json"]={code:createPackageJSON(dependencies,devDependencies,entry)},normalizedFilesPath;if(packageJsonFile){var packageJsonContent=JSON.parse(packageJsonFile.code);nullthrows(!(!dependencies&&!packageJsonContent.dependencies),ENTRY_ERROR_MESSAGE),dependencies&&(packageJsonContent.dependencies=__assign(__assign({},null!==(_a=packageJsonContent.dependencies)&&void 0!==_a?_a:{}),null!=dependencies?dependencies:{})),devDependencies&&(packageJsonContent.devDependencies=__assign(__assign({},null!==(_b=packageJsonContent.devDependencies)&&void 0!==_b?_b:{}),null!=devDependencies?devDependencies:{})),entry&&(packageJsonContent.main=entry),normalizedFilesPath["/package.json"]={code:JSON.stringify(packageJsonContent,null,2)}}return normalizedFilesPath}function extractErrorDetails(msg){var _a;if("SyntaxError"===msg.title)return{title:msg.title,path:msg.path,message:msg.message,line:msg.line,column:msg.column};var relevantStackFrame=function getRelevantStackFrame(frames){if(!frames)return;return frames.find((function(frame){return!!frame._originalFileName}))}(null===(_a=msg.payload)||void 0===_a?void 0:_a.frames);if(!relevantStackFrame)return{message:msg.message};var errorInCode=function getErrorInOriginalCode(errorFrame){var numberOfLineNumberCharacters=errorFrame._originalScriptCode[errorFrame._originalScriptCode.length-1].lineNumber.toString().length,extraLineLeadingSpaces=2+numberOfLineNumberCharacters+3+errorFrame._originalColumnNumber;return errorFrame._originalScriptCode.reduce((function(result,scriptLine){var leadingChar=scriptLine.highlight?">":" ",lineNumber=scriptLine.lineNumber.toString().length===numberOfLineNumberCharacters?""+scriptLine.lineNumber:" "+scriptLine.lineNumber,extraLine=scriptLine.highlight?"\n"+" ".repeat(extraLineLeadingSpaces)+"^":"";return result+"\n"+leadingChar+" "+lineNumber+" | "+scriptLine.content+extraLine}),"")}(relevantStackFrame),errorLocation=function getErrorLocation(errorFrame){return errorFrame?" ("+errorFrame._originalLineNumber+":"+errorFrame._originalColumnNumber+")":""}(relevantStackFrame),errorMessage=function formatErrorMessage(filePath,message,location,errorInCode){return filePath+": "+message+location+"\n"+errorInCode}(relevantStackFrame._originalFileName,msg.message,errorLocation,errorInCode);return{message:errorMessage,title:msg.title,path:relevantStackFrame._originalFileName,line:relevantStackFrame._originalLineNumber,column:relevantStackFrame._originalColumnNumber}}var SandpackLogLevel,normalizePath=function(path){return"string"==typeof path?path.startsWith("/")?path:"/"+path:Array.isArray(path)?path.map((function(p){return p.startsWith("/")?p:"/"+p})):"object"==typeof path&&null!==path?Object.entries(path).reduce((function(acc,_a){var key=_a[0],content=_a[1];return acc[key.startsWith("/")?key:"/"+key]=content,acc}),{}):null};!function(SandpackLogLevel){SandpackLogLevel[SandpackLogLevel.None=0]="None",SandpackLogLevel[SandpackLogLevel.Error=10]="Error",SandpackLogLevel[SandpackLogLevel.Warning=20]="Warning",SandpackLogLevel[SandpackLogLevel.Info=30]="Info",SandpackLogLevel[SandpackLogLevel.Debug=40]="Debug"}(SandpackLogLevel||(SandpackLogLevel={}))},"./node_modules/@floating-ui/core/dist/floating-ui.core.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cp:()=>hide,RR:()=>flip,cv:()=>offset,dp:()=>size,dr:()=>limitShift,oo:()=>computePosition,uY:()=>shift,x7:()=>arrow});var _floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs");function computeCoordsFromPlacement(_ref,placement,rtl){let{reference,floating}=_ref;const sideAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Qq)(placement),alignmentAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Wh)(placement),alignLength=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.I4)(alignmentAxis),side=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement),isVertical="y"===sideAxis,commonX=reference.x+reference.width/2-floating.width/2,commonY=reference.y+reference.height/2-floating.height/2,commonAlign=reference[alignLength]/2-floating[alignLength]/2;let coords;switch(side){case"top":coords={x:commonX,y:reference.y-floating.height};break;case"bottom":coords={x:commonX,y:reference.y+reference.height};break;case"right":coords={x:reference.x+reference.width,y:commonY};break;case"left":coords={x:reference.x-floating.width,y:commonY};break;default:coords={x:reference.x,y:reference.y}}switch((0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.hp)(placement)){case"start":coords[alignmentAxis]-=commonAlign*(rtl&&isVertical?-1:1);break;case"end":coords[alignmentAxis]+=commonAlign*(rtl&&isVertical?-1:1)}return coords}const computePosition=async(reference,floating,config)=>{const{placement="bottom",strategy="absolute",middleware=[],platform}=config,validMiddleware=middleware.filter(Boolean),rtl=await(null==platform.isRTL?void 0:platform.isRTL(floating));let rects=await platform.getElementRects({reference,floating,strategy}),{x,y}=computeCoordsFromPlacement(rects,placement,rtl),statefulPlacement=placement,middlewareData={},resetCount=0;for(let i=0;i<validMiddleware.length;i++){const{name,fn}=validMiddleware[i],{x:nextX,y:nextY,data,reset}=await fn({x,y,initialPlacement:placement,placement:statefulPlacement,strategy,middlewareData,rects,platform,elements:{reference,floating}});x=null!=nextX?nextX:x,y=null!=nextY?nextY:y,middlewareData={...middlewareData,[name]:{...middlewareData[name],...data}},reset&&resetCount<=50&&(resetCount++,"object"==typeof reset&&(reset.placement&&(statefulPlacement=reset.placement),reset.rects&&(rects=!0===reset.rects?await platform.getElementRects({reference,floating,strategy}):reset.rects),({x,y}=computeCoordsFromPlacement(rects,statefulPlacement,rtl))),i=-1)}return{x,y,placement:statefulPlacement,strategy,middlewareData}};async function detectOverflow(state,options){var _await$platform$isEle;void 0===options&&(options={});const{x,y,platform,rects,elements,strategy}=state,{boundary="clippingAncestors",rootBoundary="viewport",elementContext="floating",altBoundary=!1,padding=0}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state),paddingObject=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.yd)(padding),element=elements[altBoundary?"floating"===elementContext?"reference":"floating":elementContext],clippingClientRect=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.JB)(await platform.getClippingRect({element:null==(_await$platform$isEle=await(null==platform.isElement?void 0:platform.isElement(element)))||_await$platform$isEle?element:element.contextElement||await(null==platform.getDocumentElement?void 0:platform.getDocumentElement(elements.floating)),boundary,rootBoundary,strategy})),rect="floating"===elementContext?{...rects.floating,x,y}:rects.reference,offsetParent=await(null==platform.getOffsetParent?void 0:platform.getOffsetParent(elements.floating)),offsetScale=await(null==platform.isElement?void 0:platform.isElement(offsetParent))&&await(null==platform.getScale?void 0:platform.getScale(offsetParent))||{x:1,y:1},elementClientRect=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.JB)(platform.convertOffsetParentRelativeRectToViewportRelativeRect?await platform.convertOffsetParentRelativeRectToViewportRelativeRect({rect,offsetParent,strategy}):rect);return{top:(clippingClientRect.top-elementClientRect.top+paddingObject.top)/offsetScale.y,bottom:(elementClientRect.bottom-clippingClientRect.bottom+paddingObject.bottom)/offsetScale.y,left:(clippingClientRect.left-elementClientRect.left+paddingObject.left)/offsetScale.x,right:(elementClientRect.right-clippingClientRect.right+paddingObject.right)/offsetScale.x}}const arrow=options=>({name:"arrow",options,async fn(state){const{x,y,placement,rects,platform,elements,middlewareData}=state,{element,padding=0}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state)||{};if(null==element)return{};const paddingObject=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.yd)(padding),coords={x,y},axis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Wh)(placement),length=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.I4)(axis),arrowDimensions=await platform.getDimensions(element),isYAxis="y"===axis,minProp=isYAxis?"top":"left",maxProp=isYAxis?"bottom":"right",clientProp=isYAxis?"clientHeight":"clientWidth",endDiff=rects.reference[length]+rects.reference[axis]-coords[axis]-rects.floating[length],startDiff=coords[axis]-rects.reference[axis],arrowOffsetParent=await(null==platform.getOffsetParent?void 0:platform.getOffsetParent(element));let clientSize=arrowOffsetParent?arrowOffsetParent[clientProp]:0;clientSize&&await(null==platform.isElement?void 0:platform.isElement(arrowOffsetParent))||(clientSize=elements.floating[clientProp]||rects.floating[length]);const centerToReference=endDiff/2-startDiff/2,largestPossiblePadding=clientSize/2-arrowDimensions[length]/2-1,minPadding=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.VV)(paddingObject[minProp],largestPossiblePadding),maxPadding=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.VV)(paddingObject[maxProp],largestPossiblePadding),min$1=minPadding,max=clientSize-arrowDimensions[length]-maxPadding,center=clientSize/2-arrowDimensions[length]/2+centerToReference,offset=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.uZ)(min$1,center,max),shouldAddOffset=!middlewareData.arrow&&null!=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.hp)(placement)&&center!=offset&&rects.reference[length]/2-(center<min$1?minPadding:maxPadding)-arrowDimensions[length]/2<0,alignmentOffset=shouldAddOffset?center<min$1?center-min$1:center-max:0;return{[axis]:coords[axis]+alignmentOffset,data:{[axis]:offset,centerOffset:center-offset-alignmentOffset,...shouldAddOffset&&{alignmentOffset}},reset:shouldAddOffset}}});const flip=function(options){return void 0===options&&(options={}),{name:"flip",options,async fn(state){var _middlewareData$arrow,_middlewareData$flip;const{placement,middlewareData,rects,initialPlacement,platform,elements}=state,{mainAxis:checkMainAxis=!0,crossAxis:checkCrossAxis=!0,fallbackPlacements:specifiedFallbackPlacements,fallbackStrategy="bestFit",fallbackAxisSideDirection="none",flipAlignment=!0,...detectOverflowOptions}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state);if(null!=(_middlewareData$arrow=middlewareData.arrow)&&_middlewareData$arrow.alignmentOffset)return{};const side=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement),isBasePlacement=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(initialPlacement)===initialPlacement,rtl=await(null==platform.isRTL?void 0:platform.isRTL(elements.floating)),fallbackPlacements=specifiedFallbackPlacements||(isBasePlacement||!flipAlignment?[(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.pw)(initialPlacement)]:(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.gy)(initialPlacement));specifiedFallbackPlacements||"none"===fallbackAxisSideDirection||fallbackPlacements.push(...(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.KX)(initialPlacement,flipAlignment,fallbackAxisSideDirection,rtl));const placements=[initialPlacement,...fallbackPlacements],overflow=await detectOverflow(state,detectOverflowOptions),overflows=[];let overflowsData=(null==(_middlewareData$flip=middlewareData.flip)?void 0:_middlewareData$flip.overflows)||[];if(checkMainAxis&&overflows.push(overflow[side]),checkCrossAxis){const sides=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.i8)(placement,rects,rtl);overflows.push(overflow[sides[0]],overflow[sides[1]])}if(overflowsData=[...overflowsData,{placement,overflows}],!overflows.every((side=>side<=0))){var _middlewareData$flip2,_overflowsData$filter;const nextIndex=((null==(_middlewareData$flip2=middlewareData.flip)?void 0:_middlewareData$flip2.index)||0)+1,nextPlacement=placements[nextIndex];if(nextPlacement)return{data:{index:nextIndex,overflows:overflowsData},reset:{placement:nextPlacement}};let resetPlacement=null==(_overflowsData$filter=overflowsData.filter((d=>d.overflows[0]<=0)).sort(((a,b)=>a.overflows[1]-b.overflows[1]))[0])?void 0:_overflowsData$filter.placement;if(!resetPlacement)switch(fallbackStrategy){case"bestFit":{var _overflowsData$map$so;const placement=null==(_overflowsData$map$so=overflowsData.map((d=>[d.placement,d.overflows.filter((overflow=>overflow>0)).reduce(((acc,overflow)=>acc+overflow),0)])).sort(((a,b)=>a[1]-b[1]))[0])?void 0:_overflowsData$map$so[0];placement&&(resetPlacement=placement);break}case"initialPlacement":resetPlacement=initialPlacement}if(placement!==resetPlacement)return{reset:{placement:resetPlacement}}}return{}}}};function getSideOffsets(overflow,rect){return{top:overflow.top-rect.height,right:overflow.right-rect.width,bottom:overflow.bottom-rect.height,left:overflow.left-rect.width}}function isAnySideFullyClipped(overflow){return _floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.mA.some((side=>overflow[side]>=0))}const hide=function(options){return void 0===options&&(options={}),{name:"hide",options,async fn(state){const{rects}=state,{strategy="referenceHidden",...detectOverflowOptions}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state);switch(strategy){case"referenceHidden":{const offsets=getSideOffsets(await detectOverflow(state,{...detectOverflowOptions,elementContext:"reference"}),rects.reference);return{data:{referenceHiddenOffsets:offsets,referenceHidden:isAnySideFullyClipped(offsets)}}}case"escaped":{const offsets=getSideOffsets(await detectOverflow(state,{...detectOverflowOptions,altBoundary:!0}),rects.floating);return{data:{escapedOffsets:offsets,escaped:isAnySideFullyClipped(offsets)}}}default:return{}}}}};const offset=function(options){return void 0===options&&(options=0),{name:"offset",options,async fn(state){const{x,y}=state,diffCoords=await async function convertValueToCoords(state,options){const{placement,platform,elements}=state,rtl=await(null==platform.isRTL?void 0:platform.isRTL(elements.floating)),side=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement),alignment=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.hp)(placement),isVertical="y"===(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Qq)(placement),mainAxisMulti=["left","top"].includes(side)?-1:1,crossAxisMulti=rtl&&isVertical?-1:1,rawValue=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state);let{mainAxis,crossAxis,alignmentAxis}="number"==typeof rawValue?{mainAxis:rawValue,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...rawValue};return alignment&&"number"==typeof alignmentAxis&&(crossAxis="end"===alignment?-1*alignmentAxis:alignmentAxis),isVertical?{x:crossAxis*crossAxisMulti,y:mainAxis*mainAxisMulti}:{x:mainAxis*mainAxisMulti,y:crossAxis*crossAxisMulti}}(state,options);return{x:x+diffCoords.x,y:y+diffCoords.y,data:diffCoords}}}},shift=function(options){return void 0===options&&(options={}),{name:"shift",options,async fn(state){const{x,y,placement}=state,{mainAxis:checkMainAxis=!0,crossAxis:checkCrossAxis=!1,limiter={fn:_ref=>{let{x,y}=_ref;return{x,y}}},...detectOverflowOptions}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state),coords={x,y},overflow=await detectOverflow(state,detectOverflowOptions),crossAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Qq)((0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement)),mainAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Rn)(crossAxis);let mainAxisCoord=coords[mainAxis],crossAxisCoord=coords[crossAxis];if(checkMainAxis){const maxSide="y"===mainAxis?"bottom":"right",min=mainAxisCoord+overflow["y"===mainAxis?"top":"left"],max=mainAxisCoord-overflow[maxSide];mainAxisCoord=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.uZ)(min,mainAxisCoord,max)}if(checkCrossAxis){const maxSide="y"===crossAxis?"bottom":"right",min=crossAxisCoord+overflow["y"===crossAxis?"top":"left"],max=crossAxisCoord-overflow[maxSide];crossAxisCoord=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.uZ)(min,crossAxisCoord,max)}const limitedCoords=limiter.fn({...state,[mainAxis]:mainAxisCoord,[crossAxis]:crossAxisCoord});return{...limitedCoords,data:{x:limitedCoords.x-x,y:limitedCoords.y-y}}}}},limitShift=function(options){return void 0===options&&(options={}),{options,fn(state){const{x,y,placement,rects,middlewareData}=state,{offset=0,mainAxis:checkMainAxis=!0,crossAxis:checkCrossAxis=!0}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state),coords={x,y},crossAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Qq)(placement),mainAxis=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Rn)(crossAxis);let mainAxisCoord=coords[mainAxis],crossAxisCoord=coords[crossAxis];const rawOffset=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(offset,state),computedOffset="number"==typeof rawOffset?{mainAxis:rawOffset,crossAxis:0}:{mainAxis:0,crossAxis:0,...rawOffset};if(checkMainAxis){const len="y"===mainAxis?"height":"width",limitMin=rects.reference[mainAxis]-rects.floating[len]+computedOffset.mainAxis,limitMax=rects.reference[mainAxis]+rects.reference[len]-computedOffset.mainAxis;mainAxisCoord<limitMin?mainAxisCoord=limitMin:mainAxisCoord>limitMax&&(mainAxisCoord=limitMax)}if(checkCrossAxis){var _middlewareData$offse,_middlewareData$offse2;const len="y"===mainAxis?"width":"height",isOriginSide=["top","left"].includes((0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement)),limitMin=rects.reference[crossAxis]-rects.floating[len]+(isOriginSide&&(null==(_middlewareData$offse=middlewareData.offset)?void 0:_middlewareData$offse[crossAxis])||0)+(isOriginSide?0:computedOffset.crossAxis),limitMax=rects.reference[crossAxis]+rects.reference[len]+(isOriginSide?0:(null==(_middlewareData$offse2=middlewareData.offset)?void 0:_middlewareData$offse2[crossAxis])||0)-(isOriginSide?computedOffset.crossAxis:0);crossAxisCoord<limitMin?crossAxisCoord=limitMin:crossAxisCoord>limitMax&&(crossAxisCoord=limitMax)}return{[mainAxis]:mainAxisCoord,[crossAxis]:crossAxisCoord}}}},size=function(options){return void 0===options&&(options={}),{name:"size",options,async fn(state){const{placement,rects,platform,elements}=state,{apply=()=>{},...detectOverflowOptions}=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.ku)(options,state),overflow=await detectOverflow(state,detectOverflowOptions),side=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.k3)(placement),alignment=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.hp)(placement),isYAxis="y"===(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Qq)(placement),{width,height}=rects.floating;let heightSide,widthSide;"top"===side||"bottom"===side?(heightSide=side,widthSide=alignment===(await(null==platform.isRTL?void 0:platform.isRTL(elements.floating))?"start":"end")?"left":"right"):(widthSide=side,heightSide="end"===alignment?"top":"bottom");const overflowAvailableHeight=height-overflow[heightSide],overflowAvailableWidth=width-overflow[widthSide],noShift=!state.middlewareData.shift;let availableHeight=overflowAvailableHeight,availableWidth=overflowAvailableWidth;if(isYAxis){const maximumClippingWidth=width-overflow.left-overflow.right;availableWidth=alignment||noShift?(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.VV)(overflowAvailableWidth,maximumClippingWidth):maximumClippingWidth}else{const maximumClippingHeight=height-overflow.top-overflow.bottom;availableHeight=alignment||noShift?(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.VV)(overflowAvailableHeight,maximumClippingHeight):maximumClippingHeight}if(noShift&&!alignment){const xMin=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.left,0),xMax=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.right,0),yMin=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.top,0),yMax=(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.bottom,0);isYAxis?availableWidth=width-2*(0!==xMin||0!==xMax?xMin+xMax:(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.left,overflow.right)):availableHeight=height-2*(0!==yMin||0!==yMax?yMin+yMax:(0,_floating_ui_utils__WEBPACK_IMPORTED_MODULE_0__.Fp)(overflow.top,overflow.bottom))}await apply({...state,availableWidth,availableHeight});const nextDimensions=await platform.getDimensions(elements.floating);return width!==nextDimensions.width||height!==nextDimensions.height?{reset:{rects:!0}}:{}}}}},"./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Me:()=>autoUpdate,oo:()=>computePosition});var floating_ui_utils=__webpack_require__("./node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs"),floating_ui_core=__webpack_require__("./node_modules/@floating-ui/core/dist/floating-ui.core.mjs");function getNodeName(node){return isNode(node)?(node.nodeName||"").toLowerCase():"#document"}function getWindow(node){var _node$ownerDocument;return(null==node||null==(_node$ownerDocument=node.ownerDocument)?void 0:_node$ownerDocument.defaultView)||window}function getDocumentElement(node){var _ref;return null==(_ref=(isNode(node)?node.ownerDocument:node.document)||window.document)?void 0:_ref.documentElement}function isNode(value){return value instanceof Node||value instanceof getWindow(value).Node}function isElement(value){return value instanceof Element||value instanceof getWindow(value).Element}function isHTMLElement(value){return value instanceof HTMLElement||value instanceof getWindow(value).HTMLElement}function isShadowRoot(value){return"undefined"!=typeof ShadowRoot&&(value instanceof ShadowRoot||value instanceof getWindow(value).ShadowRoot)}function isOverflowElement(element){const{overflow,overflowX,overflowY,display}=getComputedStyle(element);return/auto|scroll|overlay|hidden|clip/.test(overflow+overflowY+overflowX)&&!["inline","contents"].includes(display)}function isTableElement(element){return["table","td","th"].includes(getNodeName(element))}function isContainingBlock(element){const webkit=isWebKit(),css=getComputedStyle(element);return"none"!==css.transform||"none"!==css.perspective||!!css.containerType&&"normal"!==css.containerType||!webkit&&!!css.backdropFilter&&"none"!==css.backdropFilter||!webkit&&!!css.filter&&"none"!==css.filter||["transform","perspective","filter"].some((value=>(css.willChange||"").includes(value)))||["paint","layout","strict","content"].some((value=>(css.contain||"").includes(value)))}function isWebKit(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(node){return["html","body","#document"].includes(getNodeName(node))}function getComputedStyle(element){return getWindow(element).getComputedStyle(element)}function getNodeScroll(element){return isElement(element)?{scrollLeft:element.scrollLeft,scrollTop:element.scrollTop}:{scrollLeft:element.pageXOffset,scrollTop:element.pageYOffset}}function getParentNode(node){if("html"===getNodeName(node))return node;const result=node.assignedSlot||node.parentNode||isShadowRoot(node)&&node.host||getDocumentElement(node);return isShadowRoot(result)?result.host:result}function getNearestOverflowAncestor(node){const parentNode=getParentNode(node);return isLastTraversableNode(parentNode)?node.ownerDocument?node.ownerDocument.body:node.body:isHTMLElement(parentNode)&&isOverflowElement(parentNode)?parentNode:getNearestOverflowAncestor(parentNode)}function getOverflowAncestors(node,list,traverseIframes){var _node$ownerDocument2;void 0===list&&(list=[]),void 0===traverseIframes&&(traverseIframes=!0);const scrollableAncestor=getNearestOverflowAncestor(node),isBody=scrollableAncestor===(null==(_node$ownerDocument2=node.ownerDocument)?void 0:_node$ownerDocument2.body),win=getWindow(scrollableAncestor);return isBody?list.concat(win,win.visualViewport||[],isOverflowElement(scrollableAncestor)?scrollableAncestor:[],win.frameElement&&traverseIframes?getOverflowAncestors(win.frameElement):[]):list.concat(scrollableAncestor,getOverflowAncestors(scrollableAncestor,[],traverseIframes))}function getCssDimensions(element){const css=getComputedStyle(element);let width=parseFloat(css.width)||0,height=parseFloat(css.height)||0;const hasOffset=isHTMLElement(element),offsetWidth=hasOffset?element.offsetWidth:width,offsetHeight=hasOffset?element.offsetHeight:height,shouldFallback=(0,floating_ui_utils.NM)(width)!==offsetWidth||(0,floating_ui_utils.NM)(height)!==offsetHeight;return shouldFallback&&(width=offsetWidth,height=offsetHeight),{width,height,$:shouldFallback}}function unwrapElement(element){return isElement(element)?element:element.contextElement}function getScale(element){const domElement=unwrapElement(element);if(!isHTMLElement(domElement))return(0,floating_ui_utils.ze)(1);const rect=domElement.getBoundingClientRect(),{width,height,$}=getCssDimensions(domElement);let x=($?(0,floating_ui_utils.NM)(rect.width):rect.width)/width,y=($?(0,floating_ui_utils.NM)(rect.height):rect.height)/height;return x&&Number.isFinite(x)||(x=1),y&&Number.isFinite(y)||(y=1),{x,y}}const noOffsets=(0,floating_ui_utils.ze)(0);function getVisualOffsets(element){const win=getWindow(element);return isWebKit()&&win.visualViewport?{x:win.visualViewport.offsetLeft,y:win.visualViewport.offsetTop}:noOffsets}function getBoundingClientRect(element,includeScale,isFixedStrategy,offsetParent){void 0===includeScale&&(includeScale=!1),void 0===isFixedStrategy&&(isFixedStrategy=!1);const clientRect=element.getBoundingClientRect(),domElement=unwrapElement(element);let scale=(0,floating_ui_utils.ze)(1);includeScale&&(offsetParent?isElement(offsetParent)&&(scale=getScale(offsetParent)):scale=getScale(element));const visualOffsets=function shouldAddVisualOffsets(element,isFixed,floatingOffsetParent){return void 0===isFixed&&(isFixed=!1),!(!floatingOffsetParent||isFixed&&floatingOffsetParent!==getWindow(element))&&isFixed}(domElement,isFixedStrategy,offsetParent)?getVisualOffsets(domElement):(0,floating_ui_utils.ze)(0);let x=(clientRect.left+visualOffsets.x)/scale.x,y=(clientRect.top+visualOffsets.y)/scale.y,width=clientRect.width/scale.x,height=clientRect.height/scale.y;if(domElement){const win=getWindow(domElement),offsetWin=offsetParent&&isElement(offsetParent)?getWindow(offsetParent):offsetParent;let currentIFrame=win.frameElement;for(;currentIFrame&&offsetParent&&offsetWin!==win;){const iframeScale=getScale(currentIFrame),iframeRect=currentIFrame.getBoundingClientRect(),css=getComputedStyle(currentIFrame),left=iframeRect.left+(currentIFrame.clientLeft+parseFloat(css.paddingLeft))*iframeScale.x,top=iframeRect.top+(currentIFrame.clientTop+parseFloat(css.paddingTop))*iframeScale.y;x*=iframeScale.x,y*=iframeScale.y,width*=iframeScale.x,height*=iframeScale.y,x+=left,y+=top,currentIFrame=getWindow(currentIFrame).frameElement}}return(0,floating_ui_utils.JB)({width,height,x,y})}function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getNodeScroll(element).scrollLeft}function getClientRectFromClippingAncestor(element,clippingAncestor,strategy){let rect;if("viewport"===clippingAncestor)rect=function getViewportRect(element,strategy){const win=getWindow(element),html=getDocumentElement(element),visualViewport=win.visualViewport;let width=html.clientWidth,height=html.clientHeight,x=0,y=0;if(visualViewport){width=visualViewport.width,height=visualViewport.height;const visualViewportBased=isWebKit();(!visualViewportBased||visualViewportBased&&"fixed"===strategy)&&(x=visualViewport.offsetLeft,y=visualViewport.offsetTop)}return{width,height,x,y}}(element,strategy);else if("document"===clippingAncestor)rect=function getDocumentRect(element){const html=getDocumentElement(element),scroll=getNodeScroll(element),body=element.ownerDocument.body,width=(0,floating_ui_utils.Fp)(html.scrollWidth,html.clientWidth,body.scrollWidth,body.clientWidth),height=(0,floating_ui_utils.Fp)(html.scrollHeight,html.clientHeight,body.scrollHeight,body.clientHeight);let x=-scroll.scrollLeft+getWindowScrollBarX(element);const y=-scroll.scrollTop;return"rtl"===getComputedStyle(body).direction&&(x+=(0,floating_ui_utils.Fp)(html.clientWidth,body.clientWidth)-width),{width,height,x,y}}(getDocumentElement(element));else if(isElement(clippingAncestor))rect=function getInnerBoundingClientRect(element,strategy){const clientRect=getBoundingClientRect(element,!0,"fixed"===strategy),top=clientRect.top+element.clientTop,left=clientRect.left+element.clientLeft,scale=isHTMLElement(element)?getScale(element):(0,floating_ui_utils.ze)(1);return{width:element.clientWidth*scale.x,height:element.clientHeight*scale.y,x:left*scale.x,y:top*scale.y}}(clippingAncestor,strategy);else{const visualOffsets=getVisualOffsets(element);rect={...clippingAncestor,x:clippingAncestor.x-visualOffsets.x,y:clippingAncestor.y-visualOffsets.y}}return(0,floating_ui_utils.JB)(rect)}function hasFixedPositionAncestor(element,stopNode){const parentNode=getParentNode(element);return!(parentNode===stopNode||!isElement(parentNode)||isLastTraversableNode(parentNode))&&("fixed"===getComputedStyle(parentNode).position||hasFixedPositionAncestor(parentNode,stopNode))}function getRectRelativeToOffsetParent(element,offsetParent,strategy){const isOffsetParentAnElement=isHTMLElement(offsetParent),documentElement=getDocumentElement(offsetParent),isFixed="fixed"===strategy,rect=getBoundingClientRect(element,!0,isFixed,offsetParent);let scroll={scrollLeft:0,scrollTop:0};const offsets=(0,floating_ui_utils.ze)(0);if(isOffsetParentAnElement||!isOffsetParentAnElement&&!isFixed)if(("body"!==getNodeName(offsetParent)||isOverflowElement(documentElement))&&(scroll=getNodeScroll(offsetParent)),isOffsetParentAnElement){const offsetRect=getBoundingClientRect(offsetParent,!0,isFixed,offsetParent);offsets.x=offsetRect.x+offsetParent.clientLeft,offsets.y=offsetRect.y+offsetParent.clientTop}else documentElement&&(offsets.x=getWindowScrollBarX(documentElement));return{x:rect.left+scroll.scrollLeft-offsets.x,y:rect.top+scroll.scrollTop-offsets.y,width:rect.width,height:rect.height}}function getTrueOffsetParent(element,polyfill){return isHTMLElement(element)&&"fixed"!==getComputedStyle(element).position?polyfill?polyfill(element):element.offsetParent:null}function getOffsetParent(element,polyfill){const window=getWindow(element);if(!isHTMLElement(element))return window;let offsetParent=getTrueOffsetParent(element,polyfill);for(;offsetParent&&isTableElement(offsetParent)&&"static"===getComputedStyle(offsetParent).position;)offsetParent=getTrueOffsetParent(offsetParent,polyfill);return offsetParent&&("html"===getNodeName(offsetParent)||"body"===getNodeName(offsetParent)&&"static"===getComputedStyle(offsetParent).position&&!isContainingBlock(offsetParent))?window:offsetParent||function getContainingBlock(element){let currentNode=getParentNode(element);for(;isHTMLElement(currentNode)&&!isLastTraversableNode(currentNode);){if(isContainingBlock(currentNode))return currentNode;currentNode=getParentNode(currentNode)}return null}(element)||window}const platform={convertOffsetParentRelativeRectToViewportRelativeRect:function convertOffsetParentRelativeRectToViewportRelativeRect(_ref){let{rect,offsetParent,strategy}=_ref;const isOffsetParentAnElement=isHTMLElement(offsetParent),documentElement=getDocumentElement(offsetParent);if(offsetParent===documentElement)return rect;let scroll={scrollLeft:0,scrollTop:0},scale=(0,floating_ui_utils.ze)(1);const offsets=(0,floating_ui_utils.ze)(0);if((isOffsetParentAnElement||!isOffsetParentAnElement&&"fixed"!==strategy)&&(("body"!==getNodeName(offsetParent)||isOverflowElement(documentElement))&&(scroll=getNodeScroll(offsetParent)),isHTMLElement(offsetParent))){const offsetRect=getBoundingClientRect(offsetParent);scale=getScale(offsetParent),offsets.x=offsetRect.x+offsetParent.clientLeft,offsets.y=offsetRect.y+offsetParent.clientTop}return{width:rect.width*scale.x,height:rect.height*scale.y,x:rect.x*scale.x-scroll.scrollLeft*scale.x+offsets.x,y:rect.y*scale.y-scroll.scrollTop*scale.y+offsets.y}},getDocumentElement,getClippingRect:function getClippingRect(_ref){let{element,boundary,rootBoundary,strategy}=_ref;const clippingAncestors=[..."clippingAncestors"===boundary?function getClippingElementAncestors(element,cache){const cachedResult=cache.get(element);if(cachedResult)return cachedResult;let result=getOverflowAncestors(element,[],!1).filter((el=>isElement(el)&&"body"!==getNodeName(el))),currentContainingBlockComputedStyle=null;const elementIsFixed="fixed"===getComputedStyle(element).position;let currentNode=elementIsFixed?getParentNode(element):element;for(;isElement(currentNode)&&!isLastTraversableNode(currentNode);){const computedStyle=getComputedStyle(currentNode),currentNodeIsContaining=isContainingBlock(currentNode);currentNodeIsContaining||"fixed"!==computedStyle.position||(currentContainingBlockComputedStyle=null),(elementIsFixed?!currentNodeIsContaining&&!currentContainingBlockComputedStyle:!currentNodeIsContaining&&"static"===computedStyle.position&&currentContainingBlockComputedStyle&&["absolute","fixed"].includes(currentContainingBlockComputedStyle.position)||isOverflowElement(currentNode)&&!currentNodeIsContaining&&hasFixedPositionAncestor(element,currentNode))?result=result.filter((ancestor=>ancestor!==currentNode)):currentContainingBlockComputedStyle=computedStyle,currentNode=getParentNode(currentNode)}return cache.set(element,result),result}(element,this._c):[].concat(boundary),rootBoundary],firstClippingAncestor=clippingAncestors[0],clippingRect=clippingAncestors.reduce(((accRect,clippingAncestor)=>{const rect=getClientRectFromClippingAncestor(element,clippingAncestor,strategy);return accRect.top=(0,floating_ui_utils.Fp)(rect.top,accRect.top),accRect.right=(0,floating_ui_utils.VV)(rect.right,accRect.right),accRect.bottom=(0,floating_ui_utils.VV)(rect.bottom,accRect.bottom),accRect.left=(0,floating_ui_utils.Fp)(rect.left,accRect.left),accRect}),getClientRectFromClippingAncestor(element,firstClippingAncestor,strategy));return{width:clippingRect.right-clippingRect.left,height:clippingRect.bottom-clippingRect.top,x:clippingRect.left,y:clippingRect.top}},getOffsetParent,getElementRects:async function(_ref){let{reference,floating,strategy}=_ref;const getOffsetParentFn=this.getOffsetParent||getOffsetParent,getDimensionsFn=this.getDimensions;return{reference:getRectRelativeToOffsetParent(reference,await getOffsetParentFn(floating),strategy),floating:{x:0,y:0,...await getDimensionsFn(floating)}}},getClientRects:function getClientRects(element){return Array.from(element.getClientRects())},getDimensions:function getDimensions(element){return getCssDimensions(element)},getScale,isElement,isRTL:function isRTL(element){return"rtl"===getComputedStyle(element).direction}};function autoUpdate(reference,floating,update,options){void 0===options&&(options={});const{ancestorScroll=!0,ancestorResize=!0,elementResize="function"==typeof ResizeObserver,layoutShift="function"==typeof IntersectionObserver,animationFrame=!1}=options,referenceEl=unwrapElement(reference),ancestors=ancestorScroll||ancestorResize?[...referenceEl?getOverflowAncestors(referenceEl):[],...getOverflowAncestors(floating)]:[];ancestors.forEach((ancestor=>{ancestorScroll&&ancestor.addEventListener("scroll",update,{passive:!0}),ancestorResize&&ancestor.addEventListener("resize",update)}));const cleanupIo=referenceEl&&layoutShift?function observeMove(element,onMove){let timeoutId,io=null;const root=getDocumentElement(element);function cleanup(){clearTimeout(timeoutId),io&&io.disconnect(),io=null}return function refresh(skip,threshold){void 0===skip&&(skip=!1),void 0===threshold&&(threshold=1),cleanup();const{left,top,width,height}=element.getBoundingClientRect();if(skip||onMove(),!width||!height)return;const options={rootMargin:-(0,floating_ui_utils.GW)(top)+"px "+-(0,floating_ui_utils.GW)(root.clientWidth-(left+width))+"px "+-(0,floating_ui_utils.GW)(root.clientHeight-(top+height))+"px "+-(0,floating_ui_utils.GW)(left)+"px",threshold:(0,floating_ui_utils.Fp)(0,(0,floating_ui_utils.VV)(1,threshold))||1};let isFirstUpdate=!0;function handleObserve(entries){const ratio=entries[0].intersectionRatio;if(ratio!==threshold){if(!isFirstUpdate)return refresh();ratio?refresh(!1,ratio):timeoutId=setTimeout((()=>{refresh(!1,1e-7)}),100)}isFirstUpdate=!1}try{io=new IntersectionObserver(handleObserve,{...options,root:root.ownerDocument})}catch(e){io=new IntersectionObserver(handleObserve,options)}io.observe(element)}(!0),cleanup}(referenceEl,update):null;let frameId,reobserveFrame=-1,resizeObserver=null;elementResize&&(resizeObserver=new ResizeObserver((_ref=>{let[firstEntry]=_ref;firstEntry&&firstEntry.target===referenceEl&&resizeObserver&&(resizeObserver.unobserve(floating),cancelAnimationFrame(reobserveFrame),reobserveFrame=requestAnimationFrame((()=>{resizeObserver&&resizeObserver.observe(floating)}))),update()})),referenceEl&&!animationFrame&&resizeObserver.observe(referenceEl),resizeObserver.observe(floating));let prevRefRect=animationFrame?getBoundingClientRect(reference):null;return animationFrame&&function frameLoop(){const nextRefRect=getBoundingClientRect(reference);!prevRefRect||nextRefRect.x===prevRefRect.x&&nextRefRect.y===prevRefRect.y&&nextRefRect.width===prevRefRect.width&&nextRefRect.height===prevRefRect.height||update();prevRefRect=nextRefRect,frameId=requestAnimationFrame(frameLoop)}(),update(),()=>{ancestors.forEach((ancestor=>{ancestorScroll&&ancestor.removeEventListener("scroll",update),ancestorResize&&ancestor.removeEventListener("resize",update)})),cleanupIo&&cleanupIo(),resizeObserver&&resizeObserver.disconnect(),resizeObserver=null,animationFrame&&cancelAnimationFrame(frameId)}}const computePosition=(reference,floating,options)=>{const cache=new Map,mergedOptions={platform,...options},platformWithCache={...mergedOptions.platform,_c:cache};return(0,floating_ui_core.oo)(reference,floating,{...mergedOptions,platform:platformWithCache})}},"./node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{YF:()=>useFloating,x7:()=>arrow});var _floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@floating-ui/core/dist/floating-ui.core.mjs"),_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js");const arrow=options=>({name:"arrow",options,fn(state){const{element,padding}="function"==typeof options?options(state):options;return element&&function isRef(value){return{}.hasOwnProperty.call(value,"current")}(element)?null!=element.current?(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__.x7)({element:element.current,padding}).fn(state):{}:element?(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_2__.x7)({element,padding}).fn(state):{}}});var index="undefined"!=typeof document?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function deepEqual(a,b){if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;let length,i,keys;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if(length=a.length,length!=b.length)return!1;for(i=length;0!=i--;)if(!deepEqual(a[i],b[i]))return!1;return!0}if(keys=Object.keys(a),length=keys.length,length!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!{}.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){const key=keys[i];if(("_owner"!==key||!a.$$typeof)&&!deepEqual(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}function getDPR(element){if("undefined"==typeof window)return 1;return(element.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(element,value){const dpr=getDPR(element);return Math.round(value*dpr)/dpr}function useLatestRef(value){const ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(value);return index((()=>{ref.current=value})),ref}function useFloating(options){void 0===options&&(options={});const{placement="bottom",strategy="absolute",middleware=[],platform,elements:{reference:externalReference,floating:externalFloating}={},transform=!0,whileElementsMounted,open}=options,[data,setData]=react__WEBPACK_IMPORTED_MODULE_0__.useState({x:0,y:0,strategy,placement,middlewareData:{},isPositioned:!1}),[latestMiddleware,setLatestMiddleware]=react__WEBPACK_IMPORTED_MODULE_0__.useState(middleware);deepEqual(latestMiddleware,middleware)||setLatestMiddleware(middleware);const[_reference,_setReference]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null),[_floating,_setFloating]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null),setReference=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((node=>{node!=referenceRef.current&&(referenceRef.current=node,_setReference(node))}),[_setReference]),setFloating=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((node=>{node!==floatingRef.current&&(floatingRef.current=node,_setFloating(node))}),[_setFloating]),referenceEl=externalReference||_reference,floatingEl=externalFloating||_floating,referenceRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),floatingRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),dataRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(data),whileElementsMountedRef=useLatestRef(whileElementsMounted),platformRef=useLatestRef(platform),update=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{if(!referenceRef.current||!floatingRef.current)return;const config={placement,strategy,middleware:latestMiddleware};platformRef.current&&(config.platform=platformRef.current),(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_3__.oo)(referenceRef.current,floatingRef.current,config).then((data=>{const fullData={...data,isPositioned:!0};isMountedRef.current&&!deepEqual(dataRef.current,fullData)&&(dataRef.current=fullData,react_dom__WEBPACK_IMPORTED_MODULE_1__.flushSync((()=>{setData(fullData)})))}))}),[latestMiddleware,placement,strategy,platformRef]);index((()=>{!1===open&&dataRef.current.isPositioned&&(dataRef.current.isPositioned=!1,setData((data=>({...data,isPositioned:!1}))))}),[open]);const isMountedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);index((()=>(isMountedRef.current=!0,()=>{isMountedRef.current=!1})),[]),index((()=>{if(referenceEl&&(referenceRef.current=referenceEl),floatingEl&&(floatingRef.current=floatingEl),referenceEl&&floatingEl){if(whileElementsMountedRef.current)return whileElementsMountedRef.current(referenceEl,floatingEl,update);update()}}),[referenceEl,floatingEl,update,whileElementsMountedRef]);const refs=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({reference:referenceRef,floating:floatingRef,setReference,setFloating})),[setReference,setFloating]),elements=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({reference:referenceEl,floating:floatingEl})),[referenceEl,floatingEl]),floatingStyles=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const initialStyles={position:strategy,left:0,top:0};if(!elements.floating)return initialStyles;const x=roundByDPR(elements.floating,data.x),y=roundByDPR(elements.floating,data.y);return transform?{...initialStyles,transform:"translate("+x+"px, "+y+"px)",...getDPR(elements.floating)>=1.5&&{willChange:"transform"}}:{position:strategy,left:x,top:y}}),[strategy,transform,elements.floating,data.x,data.y]);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({...data,update,refs,elements,floatingStyles})),[data,update,refs,elements,floatingStyles])}},"./node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Fp:()=>max,GW:()=>floor,I4:()=>getAxisLength,JB:()=>rectToClientRect,KX:()=>getOppositeAxisPlacements,NM:()=>round,Qq:()=>getSideAxis,Rn:()=>getOppositeAxis,VV:()=>min,Wh:()=>getAlignmentAxis,gy:()=>getExpandedPlacements,hp:()=>getAlignment,i8:()=>getAlignmentSides,k3:()=>getSide,ku:()=>evaluate,mA:()=>sides,pw:()=>getOppositePlacement,uZ:()=>clamp,yd:()=>getPaddingObject,ze:()=>createCoords});const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=v=>({x:v,y:v}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(start,value,end){return max(start,min(value,end))}function evaluate(value,param){return"function"==typeof value?value(param):value}function getSide(placement){return placement.split("-")[0]}function getAlignment(placement){return placement.split("-")[1]}function getOppositeAxis(axis){return"x"===axis?"y":"x"}function getAxisLength(axis){return"y"===axis?"height":"width"}function getSideAxis(placement){return["top","bottom"].includes(getSide(placement))?"y":"x"}function getAlignmentAxis(placement){return getOppositeAxis(getSideAxis(placement))}function getAlignmentSides(placement,rects,rtl){void 0===rtl&&(rtl=!1);const alignment=getAlignment(placement),alignmentAxis=getAlignmentAxis(placement),length=getAxisLength(alignmentAxis);let mainAlignmentSide="x"===alignmentAxis?alignment===(rtl?"end":"start")?"right":"left":"start"===alignment?"bottom":"top";return rects.reference[length]>rects.floating[length]&&(mainAlignmentSide=getOppositePlacement(mainAlignmentSide)),[mainAlignmentSide,getOppositePlacement(mainAlignmentSide)]}function getExpandedPlacements(placement){const oppositePlacement=getOppositePlacement(placement);return[getOppositeAlignmentPlacement(placement),oppositePlacement,getOppositeAlignmentPlacement(oppositePlacement)]}function getOppositeAlignmentPlacement(placement){return placement.replace(/start|end/g,(alignment=>oppositeAlignmentMap[alignment]))}function getOppositeAxisPlacements(placement,flipAlignment,direction,rtl){const alignment=getAlignment(placement);let list=function getSideList(side,isStart,rtl){const lr=["left","right"],rl=["right","left"],tb=["top","bottom"],bt=["bottom","top"];switch(side){case"top":case"bottom":return rtl?isStart?rl:lr:isStart?lr:rl;case"left":case"right":return isStart?tb:bt;default:return[]}}(getSide(placement),"start"===direction,rtl);return alignment&&(list=list.map((side=>side+"-"+alignment)),flipAlignment&&(list=list.concat(list.map(getOppositeAlignmentPlacement)))),list}function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,(side=>oppositeSideMap[side]))}function getPaddingObject(padding){return"number"!=typeof padding?function expandPaddingObject(padding){return{top:0,right:0,bottom:0,left:0,...padding}}(padding):{top:padding,right:padding,bottom:padding,left:padding}}function rectToClientRect(rect){return{...rect,top:rect.y,left:rect.x,right:rect.x+rect.width,bottom:rect.y+rect.height}}},"./node_modules/@lexical/clipboard/LexicalClipboard.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalClipboard=__webpack_require__("./node_modules/@lexical/clipboard/LexicalClipboard.prod.js");module.exports=LexicalClipboard},"./node_modules/@lexical/clipboard/LexicalClipboard.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var d=__webpack_require__("./node_modules/@lexical/html/LexicalHtml.js"),p=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js"),r=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),u=__webpack_require__("./node_modules/lexical/Lexical.js");function z(a){let b=new URLSearchParams;b.append("code",a);for(let c=1;c<arguments.length;c++)b.append("v",arguments[c]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${b} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function B(a){let b=u.$getSelection();if(null==b)throw Error("Expected valid LexicalSelection");return u.$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?"":d.$generateHtmlFromNodes(a,b)}function C(a){let b=u.$getSelection();if(null==b)throw Error("Expected valid LexicalSelection");return u.$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(D(a,b))}function E(a,b,c){(u.DEPRECATED_$isGridSelection(c)||null!==r.$findMatchingParent(c.anchor.getNode(),(e=>u.DEPRECATED_$isGridCellNode(e)))&&null!==r.$findMatchingParent(c.focus.getNode(),(e=>u.DEPRECATED_$isGridCellNode(e))))&&1===b.length&&u.DEPRECATED_$isGridNode(b[0])?function F(a,b,c,e){1===a.length&&u.DEPRECATED_$isGridNode(a[0])||z(42);var f=a[0];a=f.getChildren(),c=f.getFirstChildOrThrow().getChildrenSize();var h=f.getChildrenSize(),g=r.$findMatchingParent(b.anchor.getNode(),(l=>u.DEPRECATED_$isGridCellNode(l)));b=(f=g&&r.$findMatchingParent(g,(l=>u.DEPRECATED_$isGridRowNode(l))))&&r.$findMatchingParent(f,(l=>u.DEPRECATED_$isGridNode(l))),u.DEPRECATED_$isGridCellNode(g)&&u.DEPRECATED_$isGridRowNode(f)&&u.DEPRECATED_$isGridNode(b)||z(43);var k=f.getIndexWithinParent(),m=Math.min(b.getChildrenSize()-1,k+h-1);let n,q;h=g.getIndexWithinParent(),g=Math.min(f.getChildrenSize()-1,h+c-1),c=Math.min(h,g),f=Math.min(k,m),h=Math.max(h,g),k=Math.max(k,m),m=b.getChildren(),g=0;for(let l=f;l<=k;l++){var t=m[l];u.DEPRECATED_$isGridRowNode(t)||z(24);var y=a[g];u.DEPRECATED_$isGridRowNode(y)||z(24),t=t.getChildren(),y=y.getChildren();let G=0;for(let v=c;v<=h;v++){let w=t[v];u.DEPRECATED_$isGridCellNode(w)||z(25);let H=y[G];u.DEPRECATED_$isGridCellNode(H)||z(25),l===f&&v===c?n=w.getKey():l===k&&v===h&&(q=w.getKey());let N=w.getChildren();H.getChildren().forEach((x=>{u.$isTextNode(x)&&u.$createParagraphNode().append(x),w.append(x)})),N.forEach((x=>x.remove())),G++}g++}n&&q&&(a=u.DEPRECATED_$createGridSelection(),a.set(b.getKey(),n,q),u.$setSelection(a),e.dispatchCommand(u.SELECTION_CHANGE_COMMAND,void 0))}(b,c,!1,a):function I(a,b){let c=[],e=null;for(let f=0;f<a.length;f++){let h=a[f],g=u.$isLineBreakNode(h);if(g||u.$isDecoratorNode(h)&&h.isInline()||u.$isElementNode(h)&&h.isInline()||u.$isTextNode(h)||h.isParentRequired()){if(null===e&&(e=h.createParentElementNode(),c.push(e),g))continue;null!==e&&e.append(h)}else c.push(h),e=null}u.$isRangeSelection(b)?b.insertNodes(c):u.DEPRECATED_$isGridSelection(b)&&(a=b.anchor.getNode(),u.DEPRECATED_$isGridCellNode(a)||z(41),a.append(...c))}(b,c)}function J(a,b,c,e=[]){let f=null==b||c.isSelected(b),h=u.$isElementNode(c)&&c.excludeFromCopy("html");var g=c;if(null!==b){var k=p.$cloneWithProperties(c);g=k=u.$isTextNode(k)&&null!=b?p.$sliceSelectedTextNodeContent(b,k):k}let m=u.$isElementNode(g)?g.getChildren():[];var n=g;k=n.exportJSON();var q=n.constructor;k.type!==q.getType()&&z(58,q.name);let t=k.children;for(u.$isElementNode(n)&&(Array.isArray(t)||z(59,q.name)),u.$isTextNode(g)&&(0<(g=g.__text).length?k.text=g:f=!1),g=0;g<m.length;g++)q=J(a,b,n=m[g],k.children),!f&&u.$isElementNode(c)&&q&&c.extractWithChild(n,b,"clone")&&(f=!0);if(f&&!h)e.push(k);else if(Array.isArray(k.children))for(a=0;a<k.children.length;a++)e.push(k.children[a]);return f}function D(a,b){let c=[],e=u.$getRoot().getChildren();for(let f=0;f<e.length;f++)J(a,b,e[f],c);return{namespace:a._config.namespace,nodes:c}}function K(a){let b=[];for(let c=0;c<a.length;c++){let e=u.$parseSerializedNode(a[c]);u.$isTextNode(e)&&p.$addNodeStyle(e),b.push(e)}return b}let L=null;function M(a,b){var c=A?(a._window||window).getSelection():null;if(!c)return!1;var e=c.anchorNode;if(c=c.focusNode,null!==e&&null!==c&&!u.isSelectionWithinEditor(a,e,c))return!1;if(b.preventDefault(),b=b.clipboardData,e=u.$getSelection(),null===b||null===e)return!1;c=B(a),a=C(a);let f="";return null!==e&&(f=e.getTextContent()),null!==c&&b.setData("text/html",c),null!==a&&b.setData("application/x-lexical-editor",a),b.setData("text/plain",f),!0}exports.$generateJSONFromSelectedNodes=D,exports.$generateNodesFromSerializedNodes=K,exports.$getHtmlContent=B,exports.$getLexicalContent=C,exports.$insertDataTransferForPlainText=function(a,b){null!=(a=a.getData("text/plain")||a.getData("text/uri-list"))&&b.insertRawText(a)},exports.$insertDataTransferForRichText=function(a,b,c){var e=a.getData("application/x-lexical-editor");if(e)try{let g=JSON.parse(e);if(g.namespace===c._config.namespace&&Array.isArray(g.nodes)){return E(c,K(g.nodes),b)}}catch{}if(e=a.getData("text/html"))try{var f=(new DOMParser).parseFromString(e,"text/html"),h=d.$generateNodesFromDOM(c,f);return E(c,h,b)}catch{}if(null!=(a=a.getData("text/plain")||a.getData("text/uri-list")))if(u.$isRangeSelection(b))for(c=(a=a.split(/(\r?\n|\t)/)).length,f=0;f<c;f++)"\n"===(h=a[f])||"\r\n"===h?b.insertParagraph():"\t"===h?b.insertNodes([u.$createTabNode()]):b.insertText(h);else b.insertRawText(a)},exports.$insertGeneratedNodes=E,exports.copyToClipboard=async function(a,b){if(null!==L)return!1;if(null!==b)return new Promise((g=>{a.update((()=>{g(M(a,b))}))}));var c=a.getRootElement();let e=null==a._window?window.document:a._window.document,f=A?(a._window||window).getSelection():null;if(null===c||null===f)return!1;let h=e.createElement("span");return h.style.cssText="position: fixed; top: -1000px;",h.append(e.createTextNode("#")),c.append(h),(c=new Range).setStart(h,0),c.setEnd(h,1),f.removeAllRanges(),f.addRange(c),new Promise((g=>{let k=a.registerCommand(u.COPY_COMMAND,(m=>(r.objectKlassEquals(m,ClipboardEvent)&&(k(),null!==L&&(window.clearTimeout(L),L=null),g(M(a,m))),!0)),u.COMMAND_PRIORITY_CRITICAL);L=window.setTimeout((()=>{k(),L=null,g(!1)}),50),e.execCommand("copy"),h.remove()}))}},"./node_modules/@lexical/dragon/LexicalDragon.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalDragon=__webpack_require__("./node_modules/@lexical/dragon/LexicalDragon.prod.js");module.exports=LexicalDragon},"./node_modules/@lexical/dragon/LexicalDragon.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var g=__webpack_require__("./node_modules/lexical/Lexical.js");exports.registerDragonSupport=function(m){let t=window.location.origin,r=l=>{if(l.origin===t){var h=m.getRootElement();if(document.activeElement===h&&"string"==typeof(h=l.data)){try{var a=JSON.parse(h)}catch(k){return}if(a&&"nuanria_messaging"===a.protocol&&"request"===a.type&&(a=a.payload)&&"makeChanges"===a.functionId&&(a=a.args)){const[k,n,p,q,u]=a;m.update((()=>{const f=g.$getSelection();if(g.$isRangeSelection(f)){var e=f.anchor;let b=e.getNode(),c=0,d=0;g.$isTextNode(b)&&0<=k&&0<=n&&(c=k,d=k+n,f.setTextNodeRange(b,c,b,d)),c===d&&""===p||(f.insertRawText(p),b=e.getNode()),g.$isTextNode(b)&&(c=q,d=q+u,c=c>(e=b.getTextContentSize())?e:c,d=d>e?e:d,f.setTextNodeRange(b,c,b,d)),l.stopImmediatePropagation()}}))}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}},"./node_modules/@lexical/history/LexicalHistory.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalHistory=__webpack_require__("./node_modules/@lexical/history/LexicalHistory.prod.js");module.exports=LexicalHistory},"./node_modules/@lexical/history/LexicalHistory.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),x=__webpack_require__("./node_modules/lexical/Lexical.js");function z(b,a){let l=Date.now(),h=0;return(n,f,d,e,m,p)=>{let r=Date.now();if(p.has("historic"))return h=0,l=r,2;let q=function y(b,a,l,h,n){if(null===b||0===l.size&&0===h.size&&!n)return 0;var f=a._selection,d=b._selection;if(n)return 1;if(!(x.$isRangeSelection(f)&&x.$isRangeSelection(d)&&d.isCollapsed()&&f.isCollapsed()))return 0;n=a._nodeMap;let e=[];for(let m of l)void 0!==(l=n.get(m))&&e.push(l);for(let[m,p]of h)p&&(void 0===(h=n.get(m))||x.$isRootNode(h)||e.push(h));return 0===e.length?0:1<e.length?(a=(h=a._nodeMap).get(f.anchor.key),d=h.get(d.anchor.key),a&&d&&!b._nodeMap.has(a.__key)&&x.$isTextNode(a)&&1===a.__text.length&&1===f.anchor.offset?2:0):(a=e[0],b=b._nodeMap.get(a.__key),x.$isTextNode(b)&&x.$isTextNode(a)&&b.__mode===a.__mode?(b=b.__text)===(a=a.__text)?0:(f=f.anchor,d=d.anchor,f.key!==d.key||"text"!==f.type?0:(f=f.offset,d=d.offset,1==(b=a.length-b.length)&&d===f-1?2:-1===b&&d===f+1?3:-1===b&&d===f?4:0)):0)}(n,f,e,m,b.isComposing()),v=(()=>{var k=null===d||d.editor===b,g=p.has("history-push");if(!g&&k&&p.has("history-merge"))return 0;if(null===n)return 1;var t=f._selection;if(!(0<e.size||0<m.size))return null!==t?0:2;if(!1===g&&0!==q&&q===h&&r<l+a&&k)return 0;if(1===e.size){{g=Array.from(e)[0],k=n._nodeMap.get(g),g=f._nodeMap.get(g),t=n._selection;let u=f._selection,w=!1;x.$isRangeSelection(t)&&x.$isRangeSelection(u)&&(w="element"===t.anchor.type&&"element"===t.focus.type&&"text"===u.anchor.type&&"text"===u.focus.type),k=!(w||!x.$isTextNode(k)||!x.$isTextNode(g))&&(k.__type===g.__type&&k.__text===g.__text&&k.__mode===g.__mode&&k.__detail===g.__detail&&k.__style===g.__style&&k.__format===g.__format&&k.__parent===g.__parent)}if(k)return 0}return 1})();return l=r,h=q,v}}exports.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},exports.registerHistory=function(b,a,l){let h=z(b,l);l=({editorState:d,prevEditorState:e,dirtyLeaves:m,dirtyElements:p,tags:r})=>{const q=a.current,v=a.redoStack,k=a.undoStack,g=null===q?null:q.editorState;if(null===q||d!==g){if(1===(e=h(e,d,q,m,p,r)))0!==v.length&&(a.redoStack=[],b.dispatchCommand(x.CAN_REDO_COMMAND,!1)),null!==q&&(k.push({...q}),b.dispatchCommand(x.CAN_UNDO_COMMAND,!0));else if(2===e)return;a.current={editor:b,editorState:d}}};let n=c.mergeRegister(b.registerCommand(x.UNDO_COMMAND,(()=>{let d=a.redoStack,e=a.undoStack;if(0!==e.length){let m=a.current,p=e.pop();null!==m&&(d.push(m),b.dispatchCommand(x.CAN_REDO_COMMAND,!0)),0===e.length&&b.dispatchCommand(x.CAN_UNDO_COMMAND,!1),a.current=p||null,p&&p.editor.setEditorState(p.editorState,{tag:"historic"})}return!0}),x.COMMAND_PRIORITY_EDITOR),b.registerCommand(x.REDO_COMMAND,(()=>{let d=a.redoStack;var e=a.undoStack;if(0!==d.length){let m=a.current;null!==m&&(e.push(m),b.dispatchCommand(x.CAN_UNDO_COMMAND,!0)),e=d.pop(),0===d.length&&b.dispatchCommand(x.CAN_REDO_COMMAND,!1),a.current=e||null,e&&e.editor.setEditorState(e.editorState,{tag:"historic"})}return!0}),x.COMMAND_PRIORITY_EDITOR),b.registerCommand(x.CLEAR_EDITOR_COMMAND,(()=>(a.undoStack=[],a.redoStack=[],a.current=null,!1)),x.COMMAND_PRIORITY_EDITOR),b.registerCommand(x.CLEAR_HISTORY_COMMAND,(()=>(a.undoStack=[],a.redoStack=[],a.current=null,b.dispatchCommand(x.CAN_REDO_COMMAND,!1),b.dispatchCommand(x.CAN_UNDO_COMMAND,!1),!0)),x.COMMAND_PRIORITY_EDITOR),b.registerUpdateListener(l)),f=b.registerUpdateListener(l);return()=>{n(),f()}}},"./node_modules/@lexical/html/LexicalHtml.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalHtml=__webpack_require__("./node_modules/@lexical/html/LexicalHtml.prod.js");module.exports=LexicalHtml},"./node_modules/@lexical/html/LexicalHtml.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var m=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js"),q=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),r=__webpack_require__("./node_modules/lexical/Lexical.js");function u(c,d,h,a=null){let e=null==a||d.isSelected(a),k=r.$isElementNode(d)&&d.excludeFromCopy("html");var f=d;null!==a&&(f=m.$cloneWithProperties(d),f=r.$isTextNode(f)&&null!=a?m.$sliceSelectedTextNodeContent(a,f):f);let g=r.$isElementNode(f)?f.getChildren():[],{element:b,after:l}=f.exportDOM(c);if(!b)return!1;let n=document.createDocumentFragment();for(let p=0;p<g.length;p++){let t=g[p],x=u(c,t,n,a);!e&&r.$isElementNode(d)&&x&&d.extractWithChild(t,a,"html")&&(e=!0)}return e&&!k?(q.isHTMLElement(b)&&b.append(n),h.append(b),l&&(c=l.call(f,b))&&b.replaceWith(c)):h.append(n),e}let v=new Set(["STYLE","SCRIPT"]);function w(c,d,h=new Map,a){let e=[];if(v.has(c.nodeName))return e;let k=null;var f,{nodeName:g}=c,b=d._htmlConversions.get(g.toLowerCase());if(g=null,void 0!==b)for(f of b)null!==(b=f(c))&&(null===g||g.priority<b.priority)&&(g=b);if(g=(f=null!==g?g.conversion:null)?f(c):null,f=null,null!==g){if(f=g.after,b=g.node,k=Array.isArray(b)?b[b.length-1]:b,null!==k){for(var[,l]of h)if(k=l(k,a),!k)break;k&&e.push(...Array.isArray(b)?b:[k])}null!=g.forChild&&h.set(c.nodeName,g.forChild)}for(c=c.childNodes,a=[],l=0;l<c.length;l++)a.push(...w(c[l],d,new Map(h),k));return null!=f&&(a=f(a)),null==k?e=e.concat(a):r.$isElementNode(k)&&k.append(...a),e}exports.$generateHtmlFromNodes=function(c,d){if("undefined"==typeof document||"undefined"==typeof window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let h=document.createElement("div"),a=r.$getRoot().getChildren();for(let e=0;e<a.length;e++)u(c,a[e],h,d);return h.innerHTML},exports.$generateNodesFromDOM=function(c,d){d=d.body?d.body.childNodes:[];let h=[];for(let e=0;e<d.length;e++){var a=d[e];v.has(a.nodeName)||null!==(a=w(a,c))&&(h=h.concat(a))}return h}},"./node_modules/@lexical/link/LexicalLink.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalLink=__webpack_require__("./node_modules/@lexical/link/LexicalLink.prod.js");module.exports=LexicalLink},"./node_modules/@lexical/link/LexicalLink.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var k=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),n=__webpack_require__("./node_modules/lexical/Lexical.js");let p=new Set(["http:","https:","mailto:","sms:","tel:"]);class q extends n.ElementNode{static getType(){return"link"}static clone(a){return new q(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key)}constructor(a,b={},d){super(d);let{target:l=null,rel:h=null,title:e=null}=b;this.__url=a,this.__target=l,this.__rel=h,this.__title=e}createDOM(a){let b=document.createElement("a");return b.href=this.sanitizeUrl(this.__url),null!==this.__target&&(b.target=this.__target),null!==this.__rel&&(b.rel=this.__rel),null!==this.__title&&(b.title=this.__title),k.addClassNamesToElement(b,a.theme.link),b}updateDOM(a,b){let d=this.__url,l=this.__target,h=this.__rel,e=this.__title;return d!==a.__url&&(b.href=d),l!==a.__target&&(l?b.target=l:b.removeAttribute("target")),h!==a.__rel&&(h?b.rel=h:b.removeAttribute("rel")),e!==a.__title&&(e?b.title=e:b.removeAttribute("title")),!1}static importDOM(){return{a:()=>({conversion:r,priority:1})}}static importJSON(a){let b=t(a.url,{rel:a.rel,target:a.target,title:a.title});return b.setFormat(a.format),b.setIndent(a.indent),b.setDirection(a.direction),b}sanitizeUrl(a){try{let b=new URL(a);if(!p.has(b.protocol))return"about:blank"}catch{}return a}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(a){this.getWritable().__url=a}getTarget(){return this.getLatest().__target}setTarget(a){this.getWritable().__target=a}getRel(){return this.getLatest().__rel}setRel(a){this.getWritable().__rel=a}getTitle(){return this.getLatest().__title}setTitle(a){this.getWritable().__title=a}insertNewAfter(a,b=!0){return a=this.getParentOrThrow().insertNewAfter(a,b),n.$isElementNode(a)?(b=t(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),a.append(b),b):null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(a,b){if(!n.$isRangeSelection(b))return!1;a=b.anchor.getNode();let d=b.focus.getNode();return this.isParentOf(a)&&this.isParentOf(d)&&0<b.getTextContent().length}}function r(a){let b=null;if(k.isHTMLAnchorElement(a)){let d=a.textContent;null!==d&&""!==d&&(b=t(a.getAttribute("href")||"",{rel:a.getAttribute("rel"),target:a.getAttribute("target"),title:a.getAttribute("title")}))}return{node:b}}function t(a,b){return n.$applyNodeReplacement(new q(a,b))}function v(a){return a instanceof q}class w extends q{static getType(){return"autolink"}static clone(a){return new w(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key)}static importJSON(a){let b=x(a.url,{rel:a.rel,target:a.target,title:a.title});return b.setFormat(a.format),b.setIndent(a.indent),b.setDirection(a.direction),b}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(a,b=!0){return a=this.getParentOrThrow().insertNewAfter(a,b),n.$isElementNode(a)?(b=x(this.__url,{rel:this._rel,target:this.__target,title:this.__title}),a.append(b),b):null}}function x(a,b){return n.$applyNodeReplacement(new w(a,b))}let y=n.createCommand("TOGGLE_LINK_COMMAND");exports.$createAutoLinkNode=x,exports.$createLinkNode=t,exports.$isAutoLinkNode=function(a){return a instanceof w},exports.$isLinkNode=v,exports.AutoLinkNode=w,exports.LinkNode=q,exports.TOGGLE_LINK_COMMAND=y,exports.toggleLink=function(a,b={}){let{target:d,title:l}=b,h=void 0===b.rel?"noreferrer":b.rel;if(b=n.$getSelection(),n.$isRangeSelection(b))if(b=b.extract(),null===a)b.forEach((m=>{if(v(m=m.getParent())){let c=m.getChildren();for(let f=0;f<c.length;f++)m.insertBefore(c[f]);m.remove()}}));else{if(1===b.length){var e=b[0];if(e=v(e)?e:function z(a,b){for(;null!==a&&null!==(a=a.getParent())&&!b(a););return a}(e,v),null!==e)return e.setURL(a),void 0!==d&&e.setTarget(d),null!==h&&e.setRel(h),void(void 0!==l&&e.setTitle(l))}let m=null,c=null;b.forEach((f=>{var g=f.getParent();if(g!==c&&null!==g&&(!n.$isElementNode(f)||f.isInline()))if(v(g))c=g,g.setURL(a),void 0!==d&&g.setTarget(d),null!==h&&c.setRel(h),void 0!==l&&c.setTitle(l);else if(g.is(m)||(m=g,c=t(a,{rel:h,target:d}),v(g)?null===f.getPreviousSibling()?g.insertBefore(c):g.insertAfter(c):f.insertBefore(c)),v(f)){if(!f.is(c)){if(null!==c){g=f.getChildren();for(let u=0;u<g.length;u++)c.append(g[u])}f.remove()}}else null!==c&&c.append(f)}))}}},"./node_modules/@lexical/list/LexicalList.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalList=__webpack_require__("./node_modules/@lexical/list/LexicalList.prod.js");module.exports=LexicalList},"./node_modules/@lexical/list/LexicalList.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var h=__webpack_require__("./node_modules/lexical/Lexical.js"),k=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js");function m(a){let b=new URLSearchParams;b.append("code",a);for(let c=1;c<arguments.length;c++)b.append("v",arguments[c]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${b} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function n(a){let b=1;for(a=a.getParent();null!=a;){if(p(a)){if(q(a=a.getParent())){b++,a=a.getParent();continue}m(40)}break}return b}function r(a){q(a=a.getParent())||m(40);let b=a;for(;null!==b;)b=b.getParent(),q(b)&&(a=b);return a}function t(a){let b=[];a=a.getChildren().filter(p);for(let c=0;c<a.length;c++){let d=a[c],e=d.getFirstChild();q(e)?b=b.concat(t(e)):b.push(d)}return b}function u(a){return p(a)&&q(a.getFirstChild())}function w(a){return y().append(a)}function z(a,b){return p(a)&&(0===b.length||1===b.length&&a.is(b[0])&&0===a.getChildrenSize())}function B(a,b){a.splice(a.getChildrenSize(),0,b)}function C(a,b){if(q(a))return a;let c=a.getPreviousSibling(),d=a.getNextSibling(),e=y();return e.setFormat(a.getFormatType()),e.setIndent(a.getIndent()),B(e,a.getChildren()),q(c)&&b===c.getListType()?(c.append(e),a.remove(),q(d)&&b===d.getListType()&&(B(c,d.getChildren()),d.remove()),c):q(d)&&b===d.getListType()?(d.getFirstChildOrThrow().insertBefore(e),a.remove(),d):((b=D(b)).append(e),a.replace(b),E(b),b)}function F(a,b){var c=a.getLastChild();let d=b.getFirstChild();c&&d&&u(c)&&u(d)&&(F(c.getFirstChild(),d.getFirstChild()),d.remove()),0<(c=b.getChildren()).length&&(a.append(...c),E(a)),b.remove()}function E(a,b){if(void 0!==(a=b||a.getChildren()))for(b=0;b<a.length;b++){let f=a[b];if(p(f)){let g=f.getValue();var c=f,d=c.getParent(),e=1;for(null!=d&&(q(d)?e=d.getStart():m(44)),c=c.getPreviousSiblings(),d=0;d<c.length;d++){let l=c[d];p(l)&&!q(l.getFirstChild())&&e++}g!==e&&f.setValue(e)}}}function G(a){if(!u(a)){var b=a.getParent(),c=b?b.getParent():void 0,d=c?c.getParent():void 0;if(q(d)&&p(c)&&q(b)){var e=b?b.getFirstChild():void 0,f=b?b.getLastChild():void 0;if(a.is(e))c.insertBefore(a),b.isEmpty()&&c.remove();else if(a.is(f))c.insertAfter(a),b.isEmpty()&&c.remove();else{var g=b.getListType();e=y();let l=D(g);e.append(l),a.getPreviousSiblings().forEach((x=>l.append(x))),f=y(),g=D(g),f.append(g),B(g,a.getNextSiblings()),c.insertBefore(e),c.insertAfter(f),c.replace(a)}E(b),E(d)}}}class H extends h.ElementNode{static getType(){return"listitem"}static clone(a){return new H(a.__value,a.__checked,a.__key)}constructor(a,b,c){super(c),this.__value=void 0===a?1:a,this.__checked=b}createDOM(a){let b=document.createElement("li"),c=this.getParent();return q(c)&&"check"===c.getListType()&&I(b,this,null),b.value=this.__value,J(b,a.theme,this),b}updateDOM(a,b,c){let d=this.getParent();return q(d)&&"check"===d.getListType()&&I(b,this,a),b.value=this.__value,J(b,c.theme,this),!1}static transform(){return a=>{let b=a.getParent();q(b)&&(E(b),"check"!==b.getListType()&&null!=a.getChecked()&&a.setChecked(void 0))}}static importDOM(){return{li:()=>({conversion:K,priority:0})}}static importJSON(a){let b=y();return b.setChecked(a.checked),b.setValue(a.value),b.setFormat(a.format),b.setDirection(a.direction),b}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...a){for(let b=0;b<a.length;b++){let c=a[b];if(h.$isElementNode(c)&&this.canMergeWith(c)){let d=c.getChildren();this.append(...d),c.remove()}else super.append(c)}return this}replace(a,b){if(p(a))return super.replace(a);this.setIndent(0);let c=this.getParentOrThrow();if(!q(c))return a;if(c.__first===this.getKey())c.insertBefore(a);else if(c.__last===this.getKey())c.insertAfter(a);else{let d=D(c.getListType()),e=this.getNextSibling();for(;e;){let f=e;e=e.getNextSibling(),d.append(f)}c.insertAfter(a),a.insertAfter(d)}return b&&this.getChildren().forEach((d=>{a.append(d)})),this.remove(),0===c.getChildrenSize()&&c.remove(),a}insertAfter(a,b=!0){var c=this.getParentOrThrow();q(c)||m(39);var d=this.getNextSiblings();if(p(a))return b=super.insertAfter(a,b),q(a=a.getParentOrThrow())&&E(a),b;if(q(a)){for(c=a,d=(a=a.getChildren()).length-1;0<=d;d--)c=a[d],this.insertAfter(c,b);return c}if(c.insertAfter(a,b),0!==d.length){let e=D(c.getListType());d.forEach((f=>e.append(f))),a.insertAfter(e,b)}return a}remove(a){let b=this.getPreviousSibling(),c=this.getNextSibling();super.remove(a),b&&c&&u(b)&&u(c)?(F(b.getFirstChild(),c.getFirstChild()),c.remove()):c&&(q(a=c.getParent())&&E(a))}insertNewAfter(a,b=!0){return a=y(null==this.__checked&&void 0),this.insertAfter(a,b),a}collapseAtStart(a){let b=h.$createParagraphNode();this.getChildren().forEach((f=>b.append(f)));var c=this.getParentOrThrow(),d=c.getParentOrThrow();let e=p(d);return 1===c.getChildrenSize()?e?(c.remove(),d.select()):(c.insertBefore(b),c.remove(),c=a.anchor,a=a.focus,d=b.getKey(),"element"===c.type&&c.getNode().is(this)&&c.set(d,c.offset,"element"),"element"===a.type&&a.getNode().is(this)&&a.set(d,a.offset,"element")):(c.insertBefore(b),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(a){this.getWritable().__value=a}getChecked(){return this.getLatest().__checked}setChecked(a){this.getWritable().__checked=a}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var a=this.getParent();if(null===a)return this.getLatest().__indent;a=a.getParentOrThrow();let b=0;for(;p(a);)a=a.getParentOrThrow().getParentOrThrow(),b++;return b}setIndent(a){"number"==typeof a&&-1<a||m(117);let b=this.getIndent();for(;b!==a;)if(b<a){a:{var c=new Set;if(u(this)||c.has(this.getKey()))break a;let g=this.getParent();var d=this.getNextSibling(),e=this.getPreviousSibling();if(u(d)&&u(e)){if(q(e=e.getFirstChild())){e.append(this);var f=d.getFirstChild();q(f)&&(B(e,f=f.getChildren()),d.remove(),c.add(d.getKey())),E(e)}}else u(d)?q(d=d.getFirstChild())&&(null!==(c=d.getFirstChild())&&c.insertBefore(this),E(d)):u(e)?q(d=e.getFirstChild())&&(d.append(this),E(d)):q(g)&&(c=y(),f=D(g.getListType()),c.append(f),f.append(this),e?e.insertAfter(c):d?d.insertBefore(c):g.append(c),E(f));q(g)&&E(g)}b++}else G(this),b--;return this}insertBefore(a){if(p(a)){let b=this.getParentOrThrow();if(q(b)){E(b,this.getNextSiblings())}}return super.insertBefore(a)}canInsertAfter(a){return p(a)}canReplaceWith(a){return p(a)}canMergeWith(a){return h.$isParagraphNode(a)||p(a)}extractWithChild(a,b){if(!h.$isRangeSelection(b))return!1;a=b.anchor.getNode();let c=b.focus.getNode();return this.isParentOf(a)&&this.isParentOf(c)&&this.getTextContent().length===b.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return D("bullet")}}function J(a,b,c){let d=[],e=[];var f=(b=b.list)?b.listitem:void 0;if(b&&b.nested)var g=b.nested.listitem;if(void 0!==f&&(f=f.split(" "),d.push(...f)),b){f=q(f=c.getParent())&&"check"===f.getListType();let l=c.getChecked();f&&!l||e.push(b.listitemUnchecked),f&&l||e.push(b.listitemChecked),f&&d.push(l?b.listitemChecked:b.listitemUnchecked)}void 0!==g&&(g=g.split(" "),c.getChildren().some((l=>q(l)))?d.push(...g):e.push(...g)),0<e.length&&k.removeClassNamesFromElement(a,...e),0<d.length&&k.addClassNamesToElement(a,...d)}function I(a,b,c){q(b.getFirstChild())?(a.removeAttribute("role"),a.removeAttribute("tabIndex"),a.removeAttribute("aria-checked")):(a.setAttribute("role","checkbox"),a.setAttribute("tabIndex","-1"),c&&b.__checked===c.__checked||a.setAttribute("aria-checked",b.getChecked()?"true":"false"))}function K(a){return{node:y(a=k.isHTMLElement(a)&&"true"===a.getAttribute("aria-checked"))}}function y(a){return h.$applyNodeReplacement(new H(void 0,a))}function p(a){return a instanceof H}class L extends h.ElementNode{static getType(){return"list"}static clone(a){return new L(a.__listType||N[a.__tag],a.__start,a.__key)}constructor(a,b,c){super(c),this.__listType=a=N[a]||a,this.__tag="number"===a?"ol":"ul",this.__start=b}getTag(){return this.__tag}setListType(a){let b=this.getWritable();b.__listType=a,b.__tag="number"===a?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(a){let b=document.createElement(this.__tag);return 1!==this.__start&&b.setAttribute("start",String(this.__start)),b.__lexicalListType=this.__listType,O(b,a.theme,this),b}updateDOM(a,b,c){return a.__tag!==this.__tag||(O(b,c.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:P,priority:0}),ul:()=>({conversion:P,priority:0})}}static importJSON(a){let b=D(a.listType,a.start);return b.setFormat(a.format),b.setIndent(a.indent),b.setDirection(a.direction),b}exportDOM(a){return({element:a}=super.exportDOM(a)),a&&k.isHTMLElement(a)&&(1!==this.__start&&a.setAttribute("start",String(this.__start)),"check"===this.__listType&&a.setAttribute("__lexicalListType","check")),{element:a}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...a){for(let c=0;c<a.length;c++){var b=a[c];if(p(b))super.append(b);else{let d=y();q(b)?d.append(b):h.$isElementNode(b)?(b=h.$createTextNode(b.getTextContent()),d.append(b)):d.append(b),super.append(d)}}return E(this),this}extractWithChild(a){return p(a)}}function O(a,b,c){let d=[],e=[];var f=b.list;if(void 0!==f){let l=f[`${c.__tag}Depth`]||[],x=(b=n(c)-1)%l.length;var g=l[x];let A,M=f[c.__tag];if(void 0!==(f=f.nested)&&f.list&&(A=f.list),void 0!==M&&d.push(M),void 0!==g)for(g=g.split(" "),d.push(...g),g=0;g<l.length;g++)g!==x&&e.push(c.__tag+g);void 0!==A&&(c=A.split(" "),1<b?d.push(...c):e.push(...c))}0<e.length&&k.removeClassNamesFromElement(a,...e),0<d.length&&k.addClassNamesToElement(a,...d)}function Q(a){let b=[];for(let d=0;d<a.length;d++){var c=a[d];p(c)?(b.push(c),1<(c=c.getChildren()).length&&c.forEach((e=>{q(e)&&b.push(w(e))}))):b.push(w(c))}return b}function P(a){let b=a.nodeName.toLowerCase(),c=null;return"ol"===b?c=D("number",a.start):"ul"===b&&(c=k.isHTMLElement(a)&&"check"===a.getAttribute("__lexicallisttype")?D("check"):D("bullet")),{after:Q,node:c}}let N={ol:"number",ul:"bullet"};function D(a,b=1){return h.$applyNodeReplacement(new L(a,b))}function q(a){return a instanceof L}let R=h.createCommand("INSERT_UNORDERED_LIST_COMMAND"),S=h.createCommand("INSERT_ORDERED_LIST_COMMAND"),T=h.createCommand("INSERT_CHECK_LIST_COMMAND"),U=h.createCommand("REMOVE_LIST_COMMAND");exports.$createListItemNode=y,exports.$createListNode=D,exports.$getListDepth=n,exports.$handleListInsertParagraph=function(){var a=h.$getSelection();if(!h.$isRangeSelection(a)||!a.isCollapsed())return!1;if(!p(a=a.anchor.getNode())||0!==a.getChildrenSize())return!1;var b=r(a),c=a.getParent();q(c)||m(40);let e,d=c.getParent();if(h.$isRootOrShadowRoot(d))e=h.$createParagraphNode(),b.insertAfter(e);else{if(!p(d))return!1;e=y(),d.insertAfter(e)}if(e.select(),0<(b=a.getNextSiblings()).length){let f=D(c.getListType());h.$isParagraphNode(e)?e.insertAfter(f):((c=y()).append(f),e.insertAfter(c)),b.forEach((g=>{g.remove(),f.append(g)}))}return function v(a){for(;null==a.getNextSibling()&&null==a.getPreviousSibling();){let b=a.getParent();if(null==b||!p(a)&&!q(a))break;a=b}a.remove()}(a),!0},exports.$isListItemNode=p,exports.$isListNode=q,exports.INSERT_CHECK_LIST_COMMAND=T,exports.INSERT_ORDERED_LIST_COMMAND=S,exports.INSERT_UNORDERED_LIST_COMMAND=R,exports.ListItemNode=H,exports.ListNode=L,exports.REMOVE_LIST_COMMAND=U,exports.insertList=function(a,b){a.update((()=>{var c=h.$getSelection();if(h.$isRangeSelection(c)||h.DEPRECATED_$isGridSelection(c)){var d=c.getNodes(),e=(c=c.anchor.getNode()).getParent();if(z(c,d))d=D(b),h.$isRootOrShadowRoot(e)?(c.replace(d),e=y(),h.$isElementNode(c)&&(e.setFormat(c.getFormatType()),e.setIndent(c.getIndent())),d.append(e)):p(c)&&(B(d,(c=c.getParentOrThrow()).getChildren()),c.replace(d));else for(c=new Set,e=0;e<d.length;e++){var f=d[e];if(h.$isElementNode(f)&&f.isEmpty()&&!c.has(f.getKey()))C(f,b);else if(h.$isLeafNode(f))for(f=f.getParent();null!=f;){let l=f.getKey();if(q(f)){if(!c.has(l)){var g=D(b);B(g,f.getChildren()),f.replace(g),E(g),c.add(l)}break}if(g=f.getParent(),h.$isRootOrShadowRoot(g)&&!c.has(l)){c.add(l),C(f,b);break}f=g}}}}))},exports.removeList=function(a){a.update((()=>{let b=h.$getSelection();if(h.$isRangeSelection(b)){var c=new Set,d=b.getNodes(),e=b.anchor.getNode();if(z(e,d))c.add(r(e));else for(e=0;e<d.length;e++){var f=d[e];h.$isLeafNode(f)&&(null!=(f=k.$getNearestNodeOfType(f,H))&&c.add(r(f)))}for(let g of c){c=g,d=t(g);for(let l of d)B(d=h.$createParagraphNode(),l.getChildren()),c.insertAfter(d),c=d,l.__key===b.anchor.key&&b.anchor.set(d.getKey(),0,"element"),l.__key===b.focus.key&&b.focus.set(d.getKey(),0,"element"),l.remove();g.remove()}}}))}},"./node_modules/@lexical/react/LexicalAutoLinkPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalAutoLinkPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalAutoLinkPlugin.prod.js");module.exports=LexicalAutoLinkPlugin},"./node_modules/@lexical/react/LexicalAutoLinkPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var h=__webpack_require__("./node_modules/@lexical/link/LexicalLink.js"),n=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),p=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),u=__webpack_require__("./node_modules/lexical/Lexical.js"),w=__webpack_require__("./node_modules/react/index.js");function B(a,b){for(let c=0;c<b.length;c++){let d=b[c](a);if(d)return d}return null}let C=/[.,;\s]/;function E(a){var b;return a=a.getPreviousSibling(),u.$isElementNode(a)&&(a=a.getLastDescendant()),!(b=null===a||u.$isLineBreakNode(a))&&(b=u.$isTextNode(a))&&(a=a.getTextContent(),b=C.test(a[a.length-1])),b}function F(a){return a=a.getNextSibling(),u.$isElementNode(a)&&(a=a.getFirstDescendant()),null===a||u.$isLineBreakNode(a)||u.$isTextNode(a)&&C.test(a.getTextContent()[0])}function G(a,b,c){var d=a.getChildren();let e=d.length;for(let f=0;f<e;f++){let l=d[f];if(!u.$isTextNode(l)||!l.isSimpleText())return H(a),void c(null,a.getURL())}null===(b=B(d=a.getTextContent(),b))||b.text!==d?(H(a),c(null,a.getURL())):E(a)&&F(a)?((d=a.getURL())!==b.url&&(a.setURL(b.url),c(b.url,d)),b.attributes&&((d=a.getRel())!==b.attributes.rel&&(a.setRel(b.attributes.rel||null),c(b.attributes.rel||null,d)),(d=a.getTarget())!==b.attributes.target&&(a.setTarget(b.attributes.target||null),c(b.attributes.target||null,d)))):(H(a),c(null,a.getURL()))}function H(a){let b=a.getChildren();var c=b.length;for(--c;0<=c;c--)a.insertAfter(b[c]);return a.remove(),b.map((d=>d.getLatest()))}function I(a,b,c){w.useEffect((()=>{a.hasNodes([h.AutoLinkNode])||function A(a){let b=new URLSearchParams;b.append("code",a);for(let c=1;c<arguments.length;c++)b.append("v",arguments[c]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${b} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(77);let d=(e,f)=>{c&&c(e,f)};return p.mergeRegister(a.registerNodeTransform(u.TextNode,(e=>{var f=e.getParentOrThrow(),l=e.getPreviousSibling();if(h.$isAutoLinkNode(f))G(f,b,d);else if(!h.$isLinkNode(f)){if(e.isSimpleText()&&(C.test(e.getTextContent()[0])||!h.$isAutoLinkNode(l))){l=f=e.getTextContent();let m=0,v=e;for(var g;(g=B(l,b))&&null!==g;){let r=g.index,x=g.length,y=r+x;var t=m+r,q=m+y,z=f,D=e;if((0<t?C.test(z[t-1]):E(D))&&(q<z.length?C.test(z[q]):F(D))){var k=void 0;0===m+r?[k,v]=v.splitText(m+x):[,k,v]=v.splitText(m+r,m+r+x),t=h.$createAutoLinkNode(g.url,g.attributes),(q=u.$createTextNode(g.text)).setFormat(k.getFormat()),q.setDetail(k.getDetail()),t.append(q),k.replace(t),c&&c(g.url,null),m=0}else m+=y;l=l.substring(y)}}f=e.getPreviousSibling(),g=e.getNextSibling(),k=e.getTextContent(),h.$isAutoLinkNode(f)&&!C.test(k[0])&&(f.append(e),G(f,b,d),e=f.getURL(),c&&c(null,e)),h.$isAutoLinkNode(g)&&!C.test(k[k.length-1])&&(H(g),G(g,b,d),e=g.getURL(),c&&c(null,e))}})))}),[a,b,c])}exports.AutoLinkPlugin=function({matchers:a,onChange:b}){let[c]=n.useLexicalComposerContext();return I(c,a,b),null},exports.createLinkMatcherWithRegExp=function(a,b=(c=>c)){return c=>{let d=a.exec(c);return null===d?null:{index:d.index,length:d[0].length,text:d[0],url:b(c)}}}},"./node_modules/@lexical/react/LexicalCollaborationContext.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalCollaborationContext=__webpack_require__("./node_modules/@lexical/react/LexicalCollaborationContext.prod.js");module.exports=LexicalCollaborationContext},"./node_modules/@lexical/react/LexicalCollaborationContext.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/react/index.js");let c=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],d=c[Math.floor(Math.random()*c.length)],e=b.createContext({clientID:0,color:d[1],isCollabActive:!1,name:d[0],yjsDocMap:new Map});exports.CollaborationContext=e,exports.useCollaborationContext=function(f,g){let a=b.useContext(e);return null!=f&&(a.name=f),null!=g&&(a.color=g),a}},"./node_modules/@lexical/react/LexicalComposer.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalComposer=__webpack_require__("./node_modules/@lexical/react/LexicalComposer.prod.js");module.exports=LexicalComposer},"./node_modules/@lexical/react/LexicalComposer.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var e=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),f=__webpack_require__("./node_modules/lexical/Lexical.js"),g=__webpack_require__("./node_modules/react/index.js");let m="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;var n=m?g.useLayoutEffect:g.useEffect;let p={tag:"history-merge"};exports.LexicalComposer=function({initialConfig:a,children:c}){let b=g.useMemo((()=>{const{theme:d,namespace:h,editor__DEPRECATED:r,nodes:t,onError:u,editorState:v}=a,w=e.createLexicalComposerContext(null,d);let k=r||null;if(null===k){const l=f.createEditor({editable:a.editable,namespace:h,nodes:t,onError:x=>u(x,l),theme:d});!function q(a,c){if(null!==c)if(void 0===c)a.update((()=>{var b=f.$getRoot();if(b.isEmpty()){let d=f.$createParagraphNode();b.append(d),b=m?document.activeElement:null,(null!==f.$getSelection()||null!==b&&b===a.getRootElement())&&d.select()}}),p);else if(null!==c)switch(typeof c){case"string":let b=a.parseEditorState(c);a.setEditorState(b,p);break;case"object":a.setEditorState(c,p);break;case"function":a.update((()=>{f.$getRoot().isEmpty()&&c(a)}),p)}}(l,v),k=l}return[k,w]}),[]);return n((()=>{let d=a.editable,[h]=b;h.setEditable(void 0===d||d)}),[]),g.createElement(e.LexicalComposerContext.Provider,{value:b},c)}},"./node_modules/@lexical/react/LexicalComposerContext.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalComposerContext=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.js");module.exports=LexicalComposerContext},"./node_modules/@lexical/react/LexicalComposerContext.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var d=__webpack_require__("./node_modules/react/index.js");let f=d.createContext(null);exports.LexicalComposerContext=f,exports.createLexicalComposerContext=function(a,c){let b=null;return null!=a&&(b=a[1]),{getTheme:function(){return null!=c?c:null!=b?b.getTheme():null}}},exports.useLexicalComposerContext=function(){let a=d.useContext(f);return null==a&&function e(a){let c=new URLSearchParams;c.append("code",a);for(let b=1;b<arguments.length;b++)c.append("v",arguments[b]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${c} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),a}},"./node_modules/@lexical/react/LexicalContentEditable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalContentEditable=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.prod.js");module.exports=LexicalContentEditable},"./node_modules/@lexical/react/LexicalContentEditable.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),h=__webpack_require__("./node_modules/react/index.js");function n(){return n=Object.assign?Object.assign.bind():function(g){for(var d=1;d<arguments.length;d++){var b,e=arguments[d];for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(g[b]=e[b])}return g},n.apply(this,arguments)}var p="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?h.useLayoutEffect:h.useEffect;exports.ContentEditable=function({ariaActiveDescendant:g,ariaAutoComplete:d,ariaControls:e,ariaDescribedBy:b,ariaExpanded:q,ariaLabel:r,ariaLabelledBy:t,ariaMultiline:u,ariaOwns:v,ariaRequired:w,autoCapitalize:x,className:y,id:z,role:l="textbox",spellCheck:A=!0,style:B,tabIndex:C,"data-testid":D,...E}){let[f]=c.useLexicalComposerContext(),[a,m]=h.useState(!1),F=h.useCallback((k=>{f.setRootElement(k)}),[f]);return p((()=>(m(f.isEditable()),f.registerEditableListener((k=>{m(k)})))),[f]),h.createElement("div",n({},E,{"aria-activedescendant":a?g:void 0,"aria-autocomplete":a?d:"none","aria-controls":a?e:void 0,"aria-describedby":b,"aria-expanded":a&&"combobox"===l?!!q:void 0,"aria-label":r,"aria-labelledby":t,"aria-multiline":u,"aria-owns":a?v:void 0,"aria-readonly":!a||void 0,"aria-required":w,autoCapitalize:x,className:y,contentEditable:a,"data-testid":D,id:z,ref:F,role:l,spellCheck:A,style:B,tabIndex:C}))}},"./node_modules/@lexical/react/LexicalErrorBoundary.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalErrorBoundary=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.prod.js");module.exports=LexicalErrorBoundary},"./node_modules/@lexical/react/LexicalErrorBoundary.prod.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var h=__webpack_require__("./node_modules/react/index.js");function m(b,c){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,a){return g.__proto__=a,g})(b,c)}var t={error:null},u=function(b){function c(){for(var a,d=arguments.length,f=Array(d),e=0;e<d;e++)f[e]=arguments[e];return(a=b.call.apply(b,[this].concat(f))||this).state=t,a.resetErrorBoundary=function(){for(var k,p=arguments.length,q=Array(p),l=0;l<p;l++)q[l]=arguments[l];null==a.props.onReset||(k=a.props).onReset.apply(k,q),a.reset()},a}!function n(b,c){b.prototype=Object.create(c.prototype),b.prototype.constructor=b,m(b,c)}(c,b),c.getDerivedStateFromError=function(a){return{error:a}};var g=c.prototype;return g.reset=function(){this.setState(t)},g.componentDidCatch=function(a,d){var f,e;null==(f=(e=this.props).onError)||f.call(e,a,d)},g.componentDidUpdate=function(a,d){var e,k,f=this.props.resetKeys;null!==this.state.error&&null!==d.error&&function r(b,c){return void 0===b&&(b=[]),void 0===c&&(c=[]),b.length!==c.length||b.some((function(g,a){return!Object.is(g,c[a])}))}(a.resetKeys,f)&&(null==(e=(k=this.props).onResetKeysChange)||e.call(k,a.resetKeys,f),this.reset())},g.render=function(){var a=this.state.error,d=this.props,f=d.fallbackRender,e=d.FallbackComponent;if(d=d.fallback,null!==a){if(a={error:a,resetErrorBoundary:this.resetErrorBoundary},h.isValidElement(d))return d;if("function"==typeof f)return f(a);if(e)return h.createElement(e,a);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},c}(h.Component);module.exports=function({children:b,onError:c}){return h.createElement(u,{fallback:h.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:c},b)}},"./node_modules/@lexical/react/LexicalHistoryPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalHistoryPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalHistoryPlugin.prod.js");module.exports=LexicalHistoryPlugin},"./node_modules/@lexical/react/LexicalHistoryPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),history=__webpack_require__("./node_modules/@lexical/history/LexicalHistory.js"),f=__webpack_require__("./node_modules/react/index.js");exports.createEmptyHistoryState=history.createEmptyHistoryState,exports.HistoryPlugin=function({externalHistoryState:a}){let[b]=c.useLexicalComposerContext();return function g(a,b,d=1e3){let e=f.useMemo((()=>b||history.createEmptyHistoryState()),[b]);f.useEffect((()=>history.registerHistory(a,e,d)),[d,a,e])}(b,a),null}},"./node_modules/@lexical/react/LexicalHorizontalRuleNode.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalHorizontalRuleNode=__webpack_require__("./node_modules/@lexical/react/LexicalHorizontalRuleNode.prod.js");module.exports=LexicalHorizontalRuleNode},"./node_modules/@lexical/react/LexicalHorizontalRuleNode.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var a=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),f=__webpack_require__("./node_modules/@lexical/react/useLexicalNodeSelection.js"),g=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),k=__webpack_require__("./node_modules/lexical/Lexical.js"),n=__webpack_require__("./node_modules/react/index.js");let p=k.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");function q({nodeKey:b}){let[d]=a.useLexicalComposerContext(),[e,l,m]=f.useLexicalNodeSelection(b),h=n.useCallback((c=>(e&&k.$isNodeSelection(k.$getSelection())&&(c.preventDefault(),r(c=k.$getNodeByKey(b))&&c.remove()),!1)),[e,b]);return n.useEffect((()=>g.mergeRegister(d.registerCommand(k.CLICK_COMMAND,(c=>{let v=d.getElementByKey(b);return c.target===v&&(c.shiftKey||m(),l(!e),!0)}),k.COMMAND_PRIORITY_LOW),d.registerCommand(k.KEY_DELETE_COMMAND,h,k.COMMAND_PRIORITY_LOW),d.registerCommand(k.KEY_BACKSPACE_COMMAND,h,k.COMMAND_PRIORITY_LOW))),[m,d,e,b,h,l]),n.useEffect((()=>{let c=d.getElementByKey(b);null!==c&&(c.className=e?"selected":"")}),[d,e,b]),null}class t extends k.DecoratorNode{static getType(){return"horizontalrule"}static clone(b){return new t(b.__key)}static importJSON(){return u()}static importDOM(){return{hr:()=>({conversion:w,priority:0})}}exportJSON(){return{type:"horizontalrule",version:1}}exportDOM(){return{element:document.createElement("hr")}}createDOM(){return document.createElement("hr")}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return n.createElement(q,{nodeKey:this.__key})}}function w(){return{node:u()}}function u(){return k.$applyNodeReplacement(new t)}function r(b){return b instanceof t}exports.$createHorizontalRuleNode=u,exports.$isHorizontalRuleNode=r,exports.HorizontalRuleNode=t,exports.INSERT_HORIZONTAL_RULE_COMMAND=p},"./node_modules/@lexical/react/LexicalHorizontalRulePlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalHorizontalRulePlugin=__webpack_require__("./node_modules/@lexical/react/LexicalHorizontalRulePlugin.prod.js");module.exports=LexicalHorizontalRulePlugin},"./node_modules/@lexical/react/LexicalHorizontalRulePlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),c=__webpack_require__("./node_modules/@lexical/react/LexicalHorizontalRuleNode.js"),e=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),f=__webpack_require__("./node_modules/lexical/Lexical.js"),g=__webpack_require__("./node_modules/react/index.js");exports.HorizontalRulePlugin=function(){let[d]=b.useLexicalComposerContext();return g.useEffect((()=>d.registerCommand(c.INSERT_HORIZONTAL_RULE_COMMAND,(()=>{var a=f.$getSelection();return!!f.$isRangeSelection(a)&&(null!==a.focus.getNode()&&(a=c.$createHorizontalRuleNode(),e.$insertNodeToNearestRoot(a)),!0)}),f.COMMAND_PRIORITY_EDITOR)),[d]),null}},"./node_modules/@lexical/react/LexicalLinkPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalLinkPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalLinkPlugin.prod.js");module.exports=LexicalLinkPlugin},"./node_modules/@lexical/react/LexicalLinkPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/@lexical/link/LexicalLink.js"),c=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),k=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),l=__webpack_require__("./node_modules/lexical/Lexical.js"),m=__webpack_require__("./node_modules/react/index.js");exports.LinkPlugin=function({validateUrl:d}){let[e]=c.useLexicalComposerContext();return m.useEffect((()=>{if(!e.hasNodes([b.LinkNode]))throw Error("LinkPlugin: LinkNode not registered on editor");return k.mergeRegister(e.registerCommand(b.TOGGLE_LINK_COMMAND,(a=>{if(null===a)return b.toggleLink(a),!0;if("string"==typeof a)return!(void 0!==d&&!d(a))&&(b.toggleLink(a),!0);let{url:f,target:g,rel:h,title:n}=a;return b.toggleLink(f,{rel:h,target:g,title:n}),!0}),l.COMMAND_PRIORITY_LOW),void 0!==d?e.registerCommand(l.PASTE_COMMAND,(a=>{let f=l.$getSelection();if(!l.$isRangeSelection(f)||f.isCollapsed()||!(a instanceof ClipboardEvent)||null==a.clipboardData)return!1;let g=a.clipboardData.getData("text");return!!d(g)&&(!f.getNodes().some((h=>l.$isElementNode(h)))&&(e.dispatchCommand(b.TOGGLE_LINK_COMMAND,g),a.preventDefault(),!0))}),l.COMMAND_PRIORITY_LOW):()=>{})}),[e,d]),null}},"./node_modules/@lexical/react/LexicalListPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalListPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalListPlugin.prod.js");module.exports=LexicalListPlugin},"./node_modules/@lexical/react/LexicalListPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/@lexical/list/LexicalList.js"),c=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),d=__webpack_require__("./node_modules/react/index.js"),e=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),f=__webpack_require__("./node_modules/lexical/Lexical.js");exports.ListPlugin=function(){let[a]=c.useLexicalComposerContext();return d.useEffect((()=>{if(!a.hasNodes([b.ListNode,b.ListItemNode]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[a]),function g(a){d.useEffect((()=>e.mergeRegister(a.registerCommand(b.INSERT_ORDERED_LIST_COMMAND,(()=>(b.insertList(a,"number"),!0)),f.COMMAND_PRIORITY_LOW),a.registerCommand(b.INSERT_UNORDERED_LIST_COMMAND,(()=>(b.insertList(a,"bullet"),!0)),f.COMMAND_PRIORITY_LOW),a.registerCommand(b.REMOVE_LIST_COMMAND,(()=>(b.removeList(a),!0)),f.COMMAND_PRIORITY_LOW),a.registerCommand(f.INSERT_PARAGRAPH_COMMAND,(()=>!!b.$handleListInsertParagraph()),f.COMMAND_PRIORITY_LOW))),[a])}(a),null}},"./node_modules/@lexical/react/LexicalNestedComposer.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalNestedComposer=__webpack_require__("./node_modules/@lexical/react/LexicalNestedComposer.prod.js");module.exports=LexicalNestedComposer},"./node_modules/@lexical/react/LexicalNestedComposer.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/react/LexicalCollaborationContext.js"),h=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),p=__webpack_require__("./node_modules/react/index.js");exports.LexicalNestedComposer=function({initialEditor:a,children:f,initialNodes:d,initialTheme:r,skipCollabChecks:t}){let n=p.useRef(!1),k=p.useContext(h.LexicalComposerContext);null==k&&function q(a){let f=new URLSearchParams;f.append("code",a);for(let d=1;d<arguments.length;d++)f.append("v",arguments[d]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${f} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(9);let[e,{getTheme:u}]=k,x=p.useMemo((()=>{var b=r||u()||void 0;const v=h.createLexicalComposerContext(k,b);if(void 0!==b&&(a._config.theme=b),a._parentEditor=e,d)for(var g of d)b=g.getType(),a._nodes.set(b,{klass:g,replace:null,replaceWithKlass:null,transforms:new Set});else{g=a._nodes=new Map(e._nodes);for(const[w,l]of g)a._nodes.set(w,{klass:l.klass,replace:l.replace,replaceWithKlass:l.replaceWithKlass,transforms:new Set})}return a._config.namespace=e._config.namespace,a._editable=e._editable,[a,v]}),[]),{isCollabActive:y,yjsDocMap:z}=c.useCollaborationContext(),m=t||n.current||z.has(a.getKey());return p.useEffect((()=>{m&&(n.current=!0)}),[m]),p.useEffect((()=>e.registerEditableListener((b=>{a.setEditable(b)}))),[a,e]),p.createElement(h.LexicalComposerContext.Provider,{value:x},!y||m?f:null)}},"./node_modules/@lexical/react/LexicalRichTextPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalRichTextPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.prod.js");module.exports=LexicalRichTextPlugin},"./node_modules/@lexical/react/LexicalRichTextPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),g=__webpack_require__("./node_modules/@lexical/react/useLexicalEditable.js"),l=__webpack_require__("./node_modules/react/index.js"),m=__webpack_require__("./node_modules/@lexical/text/LexicalText.js"),n=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),p=__webpack_require__("./node_modules/react-dom/index.js"),t=__webpack_require__("./node_modules/@lexical/dragon/LexicalDragon.js"),u=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.js"),v="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.useLayoutEffect:l.useEffect;function w(a){return a.getEditorState().read(m.$canShowPlaceholderCurry(a.isComposing()))}function C({content:a}){var[d]=b.useLexicalComposerContext();d=function x(a){let[d,c]=l.useState((()=>w(a)));return v((()=>{function e(){let f=w(a);c(f)}return e(),n.mergeRegister(a.registerUpdateListener((()=>{e()})),a.registerEditableListener((()=>{e()})))}),[a]),d}(d);let c=g();return d?"function"==typeof a?a(c):a:null}exports.RichTextPlugin=function({contentEditable:a,placeholder:d,ErrorBoundary:c}){let[e]=b.useLexicalComposerContext();return c=function y(a,d){let[c,e]=l.useState((()=>a.getDecorators()));return v((()=>a.registerDecoratorListener((f=>{p.flushSync((()=>{e(f)}))}))),[a]),l.useEffect((()=>{e(a.getDecorators())}),[a]),l.useMemo((()=>{let f=[],q=Object.keys(c);for(let h=0;h<q.length;h++){let k=q[h],A=l.createElement(d,{onError:z=>a._onError(z)},l.createElement(l.Suspense,{fallback:null},c[k])),r=a.getElementByKey(k);null!==r&&f.push(p.createPortal(A,r,k))}return f}),[d,c,a])}(e,c),function B(a){v((()=>n.mergeRegister(u.registerRichText(a),t.registerDragonSupport(a))),[a])}(e),l.createElement(l.Fragment,null,a,l.createElement(C,{content:d}),c)}},"./node_modules/@lexical/react/LexicalTabIndentationPlugin.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalTabIndentationPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalTabIndentationPlugin.prod.js");module.exports=LexicalTabIndentationPlugin},"./node_modules/@lexical/react/LexicalTabIndentationPlugin.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var d=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),e=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),f=__webpack_require__("./node_modules/lexical/Lexical.js"),g=__webpack_require__("./node_modules/react/index.js");function k(b){return b.registerCommand(f.KEY_TAB_COMMAND,(a=>{let c=f.$getSelection();return!!f.$isRangeSelection(c)&&(a.preventDefault(),a=function h(b){var a=b.getNodes();if(0<e.$filter(a,(c=>f.$isBlockElementNode(c)&&c.canIndent()?c:null)).length)return!0;if(a=b.anchor,a=(b=(b=b.focus).isBefore(a)?b:a).getNode(),(a=e.$getNearestBlockElementAncestorOrThrow(a)).canIndent()){a=a.getKey();let c=f.$createRangeSelection();if(c.anchor.set(a,0,"element"),c.focus.set(a,0,"element"),c=f.$normalizeSelection__EXPERIMENTAL(c),c.anchor.is(b))return!0}return!1}(c)?a.shiftKey?f.OUTDENT_CONTENT_COMMAND:f.INDENT_CONTENT_COMMAND:f.INSERT_TAB_COMMAND,b.dispatchCommand(a,void 0))}),f.COMMAND_PRIORITY_EDITOR)}exports.TabIndentationPlugin=function(){let[b]=d.useLexicalComposerContext();return g.useEffect((()=>k(b))),null},exports.registerTabIndentation=k},"./node_modules/@lexical/react/useLexicalEditable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const useLexicalEditable=__webpack_require__("./node_modules/@lexical/react/useLexicalEditable.prod.js");module.exports=useLexicalEditable},"./node_modules/@lexical/react/useLexicalEditable.prod.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var b=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),k=__webpack_require__("./node_modules/react/index.js"),l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?k.useLayoutEffect:k.useEffect;function r(a){return{initialValueFn:()=>a.isEditable(),subscribe:c=>a.registerEditableListener(c)}}module.exports=function(){return function m(a){let[c]=b.useLexicalComposerContext(),e=k.useMemo((()=>a(c)),[c,a]),d=k.useRef(e.initialValueFn()),[n,g]=k.useState(d.current);return l((()=>{let{initialValueFn:p,subscribe:q}=e,f=p();return d.current!==f&&(d.current=f,g(f)),q((h=>{d.current=h,g(h)}))}),[e,a]),n}(r)}},"./node_modules/@lexical/react/useLexicalNodeSelection.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const useLexicalNodeSelection=__webpack_require__("./node_modules/@lexical/react/useLexicalNodeSelection.prod.js");module.exports=useLexicalNodeSelection},"./node_modules/@lexical/react/useLexicalNodeSelection.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.js"),f=__webpack_require__("./node_modules/lexical/Lexical.js"),h=__webpack_require__("./node_modules/react/index.js");function k(b,a){return b.getEditorState().read((()=>{let g=f.$getNodeByKey(a);return null!==g&&g.isSelected()}))}exports.useLexicalNodeSelection=function(b){let[a]=c.useLexicalComposerContext(),[g,l]=h.useState((()=>k(a,b)));return h.useEffect((()=>{let d=!0,e=a.registerUpdateListener((()=>{d&&l(k(a,b))}));return()=>{d=!1,e()}}),[a,b]),[g,h.useCallback((d=>{a.update((()=>{let e=f.$getSelection();f.$isNodeSelection(e)||(e=f.$createNodeSelection(),f.$setSelection(e)),d?e.add(b):e.delete(b)}))}),[a,b]),h.useCallback((()=>{a.update((()=>{const d=f.$getSelection();f.$isNodeSelection(d)&&d.clear()}))}),[a])]}},"./node_modules/@lexical/rich-text/LexicalRichText.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalRichText=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.prod.js");module.exports=LexicalRichText},"./node_modules/@lexical/rich-text/LexicalRichText.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var c=__webpack_require__("./node_modules/@lexical/clipboard/LexicalClipboard.js"),g=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js"),h=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),k=__webpack_require__("./node_modules/lexical/Lexical.js");function l(b,a){return void 0!==document.caretRangeFromPoint?null===(b=document.caretRangeFromPoint(b,a))?null:{node:b.startContainer,offset:b.startOffset}:"undefined"!==document.caretPositionFromPoint?null===(b=document.caretPositionFromPoint(b,a))?null:{node:b.offsetNode,offset:b.offset}:null}let n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=n&&"documentMode"in document?document.documentMode:null;n&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),n&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let q=!(!n||!("InputEvent"in window)||p)&&"getTargetRanges"in new window.InputEvent("input"),r=n&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),t=n&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u=n&&/^(?=.*Chrome).*/i.test(navigator.userAgent),v=n&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!u,w=k.createCommand("DRAG_DROP_PASTE_FILE");class x extends k.ElementNode{static getType(){return"quote"}static clone(b){return new x(b.__key)}constructor(b){super(b)}createDOM(b){let a=document.createElement("blockquote");return h.addClassNamesToElement(a,b.theme.quote),a}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:y,priority:0})}}exportDOM(b){if(({element:b}=super.exportDOM(b)),b&&h.isHTMLElement(b)){this.isEmpty()&&b.append(document.createElement("br"));var a=this.getFormatType();b.style.textAlign=a,(a=this.getDirection())&&(b.dir=a)}return{element:b}}static importJSON(b){let a=z();return a.setFormat(b.format),a.setIndent(b.indent),a.setDirection(b.direction),a}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(b,a){b=k.$createParagraphNode();let d=this.getDirection();return b.setDirection(d),this.insertAfter(b,a),b}collapseAtStart(){let b=k.$createParagraphNode();return this.getChildren().forEach((a=>b.append(a))),this.replace(b),!0}}function z(){return k.$applyNodeReplacement(new x)}class B extends k.ElementNode{static getType(){return"heading"}static clone(b){return new B(b.__tag,b.__key)}constructor(b,a){super(a),this.__tag=b}getTag(){return this.__tag}createDOM(b){let a=this.__tag,d=document.createElement(a);return void 0!==(b=b.theme.heading)&&h.addClassNamesToElement(d,b[a]),d}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:C,priority:0}),h2:()=>({conversion:C,priority:0}),h3:()=>({conversion:C,priority:0}),h4:()=>({conversion:C,priority:0}),h5:()=>({conversion:C,priority:0}),h6:()=>({conversion:C,priority:0}),p:b=>null!==(b=b.firstChild)&&D(b)?{conversion:()=>({node:null}),priority:3}:null,span:b=>D(b)?{conversion:()=>({node:E("h1")}),priority:3}:null}}exportDOM(b){if(({element:b}=super.exportDOM(b)),b&&h.isHTMLElement(b)){this.isEmpty()&&b.append(document.createElement("br"));var a=this.getFormatType();b.style.textAlign=a,(a=this.getDirection())&&(b.dir=a)}return{element:b}}static importJSON(b){let a=E(b.tag);return a.setFormat(b.format),a.setIndent(b.indent),a.setDirection(b.direction),a}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(b,a=!0){b=0<(b=b?b.anchor.offset:0)&&b<this.getTextContentSize()?E(this.getTag()):k.$createParagraphNode();let d=this.getDirection();return b.setDirection(d),this.insertAfter(b,a),b}collapseAtStart(){let b=this.isEmpty()?k.$createParagraphNode():E(this.getTag());return this.getChildren().forEach((a=>b.append(a))),this.replace(b),!0}extractWithChild(){return!0}}function D(b){return"span"===b.nodeName.toLowerCase()&&"26pt"===b.style.fontSize}function C(b){let a=b.nodeName.toLowerCase(),d=null;return"h1"!==a&&"h2"!==a&&"h3"!==a&&"h4"!==a&&"h5"!==a&&"h6"!==a||(d=E(a),null!==b.style&&d.setFormat(b.style.textAlign)),{node:d}}function y(b){let a=z();return null!==b.style&&a.setFormat(b.style.textAlign),{node:a}}function E(b){return k.$applyNodeReplacement(new B(b))}function H(b){let a=null;if(b instanceof DragEvent?a=b.dataTransfer:b instanceof ClipboardEvent&&(a=b.clipboardData),null===a)return[!1,[],!1];var d=a.types;return b=d.includes("Files"),d=d.includes("text/html")||d.includes("text/plain"),[b,Array.from(a.files),d]}function I(b){var a=k.$getSelection();if(!k.$isRangeSelection(a))return!1;let d=new Set;a=a.getNodes();for(let m=0;m<a.length;m++){var e=a[m],f=e.getKey();d.has(f)||(f=(e=h.$getNearestBlockElementAncestorOrThrow(e)).getKey(),e.canIndent()&&!d.has(f)&&(d.add(f),b(e)))}return 0<d.size}function J(b){return b=k.$getNearestNodeFromDOMNode(b),k.$isDecoratorNode(b)}exports.$createHeadingNode=E,exports.$createQuoteNode=z,exports.$isHeadingNode=function(b){return b instanceof B},exports.$isQuoteNode=function(b){return b instanceof x},exports.DRAG_DROP_PASTE=w,exports.HeadingNode=B,exports.QuoteNode=x,exports.eventFiles=H,exports.registerRichText=function(b){return h.mergeRegister(b.registerCommand(k.CLICK_COMMAND,(()=>{const a=k.$getSelection();return!!k.$isNodeSelection(a)&&(a.clear(),!0)}),0),b.registerCommand(k.DELETE_CHARACTER_COMMAND,(a=>{const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(d.deleteCharacter(a),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.DELETE_WORD_COMMAND,(a=>{const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(d.deleteWord(a),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.DELETE_LINE_COMMAND,(a=>{const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(d.deleteLine(a),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.CONTROLLED_TEXT_INSERTION_COMMAND,(a=>{const d=k.$getSelection();if("string"==typeof a)k.$isRangeSelection(d)?d.insertText(a):k.DEPRECATED_$isGridSelection(d);else{if(!k.$isRangeSelection(d)&&!k.DEPRECATED_$isGridSelection(d))return!1;const e=a.dataTransfer;null!=e?c.$insertDataTransferForRichText(e,d,b):k.$isRangeSelection(d)&&(a=a.data)&&d.insertText(a)}return!0}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.REMOVE_TEXT_COMMAND,(()=>{const a=k.$getSelection();return!!k.$isRangeSelection(a)&&(a.removeText(),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.FORMAT_TEXT_COMMAND,(a=>{const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(d.formatText(a),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.FORMAT_ELEMENT_COMMAND,(a=>{var d=k.$getSelection();if(!k.$isRangeSelection(d)&&!k.$isNodeSelection(d))return!1;d=d.getNodes();for(const e of d)null!==(d=h.$findMatchingParent(e,(f=>k.$isElementNode(f)&&!f.isInline())))&&d.setFormat(a);return!0}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.INSERT_LINE_BREAK_COMMAND,(a=>{const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(d.insertLineBreak(a),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.INSERT_PARAGRAPH_COMMAND,(()=>{const a=k.$getSelection();return!!k.$isRangeSelection(a)&&(a.insertParagraph(),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.INSERT_TAB_COMMAND,(()=>(k.$insertNodes([k.$createTabNode()]),!0)),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.INDENT_CONTENT_COMMAND,(()=>I((a=>{const d=a.getIndent();a.setIndent(d+1)}))),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.OUTDENT_CONTENT_COMMAND,(()=>I((a=>{const d=a.getIndent();0<d&&a.setIndent(d-1)}))),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ARROW_UP_COMMAND,(a=>{var d=k.$getSelection();if(k.$isNodeSelection(d)&&!J(a.target)){if(0<(a=d.getNodes()).length)return a[0].selectPrevious(),!0}else if(k.$isRangeSelection(d)&&(d=k.$getAdjacentNode(d.focus,!0),!a.shiftKey&&k.$isDecoratorNode(d)&&!d.isIsolated()&&!d.isInline()))return d.selectPrevious(),a.preventDefault(),!0;return!1}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ARROW_DOWN_COMMAND,(a=>{var d=k.$getSelection();if(k.$isNodeSelection(d)){if(0<(a=d.getNodes()).length)return a[0].selectNext(0,0),!0}else if(k.$isRangeSelection(d)){let e=d.focus;if("root"===e.key&&e.offset===k.$getRoot().getChildrenSize())return a.preventDefault(),!0;if(d=k.$getAdjacentNode(d.focus,!1),!a.shiftKey&&k.$isDecoratorNode(d)&&!d.isIsolated()&&!d.isInline())return d.selectNext(),a.preventDefault(),!0}return!1}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ARROW_LEFT_COMMAND,(a=>{const d=k.$getSelection();if(k.$isNodeSelection(d)){var e=d.getNodes();if(0<e.length)return a.preventDefault(),e[0].selectPrevious(),!0}return!!k.$isRangeSelection(d)&&(!!g.$shouldOverrideDefaultCharacterSelection(d,!0)&&(e=a.shiftKey,a.preventDefault(),g.$moveCharacter(d,e,!0),!0))}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ARROW_RIGHT_COMMAND,(a=>{const d=k.$getSelection();if(k.$isNodeSelection(d)&&!J(a.target)){var e=d.getNodes();if(0<e.length)return a.preventDefault(),e[0].selectNext(0,0),!0}return!!k.$isRangeSelection(d)&&(e=a.shiftKey,!!g.$shouldOverrideDefaultCharacterSelection(d,!1)&&(a.preventDefault(),g.$moveCharacter(d,e,!1),!0))}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_BACKSPACE_COMMAND,(a=>{if(J(a.target))return!1;const d=k.$getSelection();if(!k.$isRangeSelection(d))return!1;a.preventDefault(),({anchor:a}=d);const e=a.getNode();return d.isCollapsed()&&0===a.offset&&!k.$isRootNode(e)&&0<h.$getNearestBlockElementAncestorOrThrow(e).getIndent()?b.dispatchCommand(k.OUTDENT_CONTENT_COMMAND,void 0):b.dispatchCommand(k.DELETE_CHARACTER_COMMAND,!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_DELETE_COMMAND,(a=>{if(J(a.target))return!1;const d=k.$getSelection();return!!k.$isRangeSelection(d)&&(a.preventDefault(),b.dispatchCommand(k.DELETE_CHARACTER_COMMAND,!1))}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ENTER_COMMAND,(a=>{const d=k.$getSelection();if(!k.$isRangeSelection(d))return!1;if(null!==a){if((t||r||v)&&q)return!1;if(a.preventDefault(),a.shiftKey)return b.dispatchCommand(k.INSERT_LINE_BREAK_COMMAND,!1)}return b.dispatchCommand(k.INSERT_PARAGRAPH_COMMAND,void 0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.KEY_ESCAPE_COMMAND,(()=>{const a=k.$getSelection();return!!k.$isRangeSelection(a)&&(b.blur(),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.DROP_COMMAND,(a=>{const[,d]=H(a);if(0<d.length){var e=l(a.clientX,a.clientY);if(null!==e){const{offset:m,node:K}=e;var f=k.$getNearestNodeFromDOMNode(K);if(null!==f){if(e=k.$createRangeSelection(),k.$isTextNode(f))e.anchor.set(f.getKey(),m,"text"),e.focus.set(f.getKey(),m,"text");else{const A=f.getParentOrThrow().getKey();f=f.getIndexWithinParent()+1,e.anchor.set(A,f,"element"),e.focus.set(A,f,"element")}e=k.$normalizeSelection__EXPERIMENTAL(e),k.$setSelection(e)}b.dispatchCommand(w,d)}return a.preventDefault(),!0}return a=k.$getSelection(),!!k.$isRangeSelection(a)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.DRAGSTART_COMMAND,(a=>{[a]=H(a);const d=k.$getSelection();return!(a&&!k.$isRangeSelection(d))}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.DRAGOVER_COMMAND,(a=>{var[d]=H(a);const e=k.$getSelection();return!(d&&!k.$isRangeSelection(e))&&(null!==(d=l(a.clientX,a.clientY))&&(d=k.$getNearestNodeFromDOMNode(d.node),k.$isDecoratorNode(d)&&a.preventDefault()),!0)}),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.SELECT_ALL_COMMAND,(()=>(k.$selectAll(),!0)),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.COPY_COMMAND,(a=>(c.copyToClipboard(b,h.objectKlassEquals(a,ClipboardEvent)?a:null),!0)),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.CUT_COMMAND,(a=>(async function G(b,a){await c.copyToClipboard(a,h.objectKlassEquals(b,ClipboardEvent)?b:null),a.update((()=>{let d=k.$getSelection();k.$isRangeSelection(d)?d.removeText():k.$isNodeSelection(d)&&d.getNodes().forEach((e=>e.remove()))}))}(a,b),!0)),k.COMMAND_PRIORITY_EDITOR),b.registerCommand(k.PASTE_COMMAND,(a=>{const[,d,e]=H(a);if(0<d.length&&!e)return b.dispatchCommand(w,d),!0;if(k.isSelectionCapturedInDecoratorInput(a.target))return!1;const f=k.$getSelection();return!(!k.$isRangeSelection(f)&&!k.DEPRECATED_$isGridSelection(f))&&(function F(b,a){b.preventDefault(),a.update((()=>{let d=k.$getSelection(),e=b instanceof InputEvent||b instanceof KeyboardEvent?null:b.clipboardData;null!=e&&(k.$isRangeSelection(d)||k.DEPRECATED_$isGridSelection(d))&&c.$insertDataTransferForRichText(e,d,a)}),{tag:"paste"})}(a,b),!0)}),k.COMMAND_PRIORITY_EDITOR))}},"./node_modules/@lexical/selection/LexicalSelection.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalSelection=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.prod.js");module.exports=LexicalSelection},"./node_modules/@lexical/selection/LexicalSelection.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var k=__webpack_require__("./node_modules/lexical/Lexical.js");let u=new Map;function v(a){for(;null!=a;){if(a.nodeType===Node.TEXT_NODE)return a;a=a.firstChild}return null}function w(a){let b=a.parentNode;if(null==b)throw Error("Should never happen");return[b,Array.from(b.childNodes).indexOf(a)]}function y(a){let b={};a=a.split(";");for(let c of a)if(""!==c){let[e,d]=c.split(/:([^]+)/);b[e.trim()]=d.trim()}return b}function z(a){let b=u.get(a);return void 0===b&&(b=y(a),u.set(a,b)),b}function B(a,b){var c=z("getStyle"in a?a.getStyle():a.style);c=function A(a){let b="";for(let c in a)c&&(b+=`${c}: ${a[c]};`);return b}(b=Object.entries(b).reduce(((e,[d,f])=>(null===f?delete e[d]:e[d]=f,e)),{...c})),a.setStyle(c),u.set(c,b)}function D(a){for(;null!==a&&!k.$isRootOrShadowRoot(a);){let b=a.getLatest(),c=a.getParent();0===b.getChildrenSize()&&a.remove(!0),a=c}}function E(a,b,c,e,d=null){if(0!==b.length){var f=b[0],h=new Map,g=[];(f=k.$isElementNode(f)?f:f.getParentOrThrow()).isInline()&&(f=f.getParentOrThrow());for(var l=!1;null!==f;){var m=f.getPreviousSibling();if(null!==m){f=m,l=!0;break}if(f=f.getParentOrThrow(),k.$isRootOrShadowRoot(f))break}m=new Set;for(var p=0;p<c;p++){var n=b[p];k.$isElementNode(n)&&0===n.getChildrenSize()&&m.add(n.getKey())}var r=new Set;for(p=0;p<c;p++){var q=(n=b[p]).getParent();if(null!==q&&q.isInline()&&(q=q.getParent()),null!==q&&k.$isLeafNode(n)&&!r.has(n.getKey())){if(n=q.getKey(),void 0===h.get(n)){let t=e();t.setFormat(q.getFormatType()),t.setIndent(q.getIndent()),g.push(t),h.set(n,t),q.getChildren().forEach((x=>{t.append(x),r.add(x.getKey()),k.$isElementNode(x)&&x.getChildrenKeys().forEach((H=>r.add(H)))})),D(q)}}else m.has(n.getKey())&&((q=e()).setFormat(n.getFormatType()),q.setIndent(n.getIndent()),g.push(q),n.remove(!0))}if(null!==d)for(b=0;b<g.length;b++)d.append(g[b]);if(b=null,k.$isRootOrShadowRoot(f))if(l)if(null!==d)f.insertAfter(d);else for(d=g.length-1;0<=d;d--)f.insertAfter(g[d]);else if(l=f.getFirstChild(),k.$isElementNode(l)&&(f=l),null===l)if(d)f.append(d);else for(d=0;d<g.length;d++)l=g[d],f.append(l),b=l;else if(null!==d)l.insertBefore(d);else for(f=0;f<g.length;f++)d=g[f],l.insertBefore(d),b=d;else if(d)f.insertAfter(d);else for(d=g.length-1;0<=d;d--)l=g[d],f.insertAfter(l),b=l;g=k.$getPreviousSelection(),k.$isRangeSelection(g)&&g.anchor.getNode().isAttached()&&g.focus.getNode().isAttached()?k.$setSelection(g.clone()):null!==b?b.selectEnd():a.dirty=!0}}function F(a,b,c,e){a.modify(b?"extend":"move",c,e)}function G(a){return a=a.anchor.getNode(),"rtl"===(k.$isRootNode(a)?a:a.getParentOrThrow()).getDirection()}exports.$addNodeStyle=function(a){let b=y(a=a.getStyle());u.set(a,b)},exports.$cloneWithProperties=function(a){let b=a.constructor.clone(a);return b.__parent=a.__parent,b.__next=a.__next,b.__prev=a.__prev,k.$isElementNode(a)&&k.$isElementNode(b)?(b.__first=a.__first,b.__last=a.__last,b.__size=a.__size,b.__format=a.__format,b.__indent=a.__indent,b.__dir=a.__dir,b):(k.$isTextNode(a)&&k.$isTextNode(b)&&(b.__format=a.__format,b.__style=a.__style,b.__mode=a.__mode,b.__detail=a.__detail),b)},exports.$getSelectionStyleValueForProperty=function(a,b,c=""){let e=null,d=a.getNodes();var f=a.anchor,h=a.focus,g=a.isBackward();let l=g?h.offset:f.offset;if(f=g?h.getNode():f.getNode(),""!==a.style&&(null!==(a=z(a.style))&&b in a))return a[b];for(a=0;a<d.length;a++){var m=d[a];if((0===a||0!==l||!m.is(f))&&k.$isTextNode(m))if(h=b,g=c,h=null!==(m=z(m=m.getStyle()))&&m[h]||g,null===e)e=h;else if(e!==h){e="";break}}return null===e?c:e},exports.$isAtNodeEnd=function(a){return"text"===a.type?a.offset===a.getNode().getTextContentSize():a.offset===a.getNode().getChildrenSize()},exports.$isParentElementRTL=G,exports.$moveCaretSelection=F,exports.$moveCharacter=function(a,b,c){let e=G(a);F(a,b,c?!e:e,"character")},exports.$patchStyleText=function C(a,b){var c=a.getNodes(),e=c.length;if(k.DEPRECATED_$isGridSelection(a)){for(var d=k.$createRangeSelection(),f=d.anchor,h=d.focus,g=0;g<e;g++){var l=c[g];k.DEPRECATED_$isGridCellNode(l)&&(f.set(l.getKey(),0,"element"),h.set(l.getKey(),l.getChildrenSize(),"element"),C(k.$normalizeSelection__EXPERIMENTAL(d),b))}k.$setSelection(a)}else if(--e,d=c[0],f=c[e],a.isCollapsed())B(a,b);else{var m=a.anchor,p=a.focus;g=d.getTextContent().length,l=p.offset;var n=m.offset,r=m.isBefore(p);h=r?n:l,a=r?l:n;var q=r?m.type:p.type,t=r?p.type:m.type;if(m=r?p.key:m.key,k.$isTextNode(d)&&h===g&&(p=d.getNextSibling(),k.$isTextNode(p)&&(h=n=0,d=p)),1===c.length)k.$isTextNode(d)&&((h="element"===q?0:n>l?l:n)!==(a="element"===t?g:n>l?n:l)&&(0===h&&a===g?(B(d,b),d.select(h,a)):(c=d.splitText(h,a),B(c=0===h?c[0]:c[1],b),c.select(0,a-h))));else for(k.$isTextNode(d)&&h<d.getTextContentSize()&&(0!==h&&(d=d.splitText(h)[1]),B(d,b)),k.$isTextNode(f)&&(h=f.getTextContent().length,f.__key!==m&&0!==a&&(a=h),a!==h&&([f]=f.splitText(a)),0!==a&&B(f,b)),a=1;a<e;a++)g=(h=c[a]).getKey(),k.$isTextNode(h)&&g!==d.getKey()&&g!==f.getKey()&&!h.isToken()&&B(h,b)}},exports.$selectAll=function(a){let b=a.anchor;a=a.focus;var c=b.getNode().getTopLevelElementOrThrow().getParentOrThrow();let e=c.getFirstDescendant();c=c.getLastDescendant();let d="element",f="element",h=0;k.$isTextNode(e)?d="text":k.$isElementNode(e)||null===e||(e=e.getParentOrThrow()),k.$isTextNode(c)?(f="text",h=c.getTextContentSize()):k.$isElementNode(c)||null===c||(c=c.getParentOrThrow()),e&&c&&(b.set(e.getKey(),0,d),a.set(c.getKey(),h,f))},exports.$setBlocksType=function(a,b){if("root"===a.anchor.key){b=b();var c=k.$getRoot();(a=c.getFirstChild())?a.replace(b,!0):c.append(b)}else for(c=a.getNodes(),a=a.anchor.getNode().getParentOrThrow(),-1===c.indexOf(a)&&c.push(a),a.isInline()&&(a=a.getParentOrThrow(),-1===c.indexOf(a)&&c.push(a)),a=0;a<c.length;a++){let f=c[a];var e=f;if(!k.$isElementNode(e)||k.$isRootOrShadowRoot(e))e=!1;else{var d=e.getFirstChild();d=null===d||k.$isLineBreakNode(d)||k.$isTextNode(d)||d.isInline(),e=!e.isInline()&&!1!==e.canBeEmpty()&&d}e&&((e=b()).setFormat(f.getFormatType()),e.setIndent(f.getIndent()),f.replace(e,!0))}},exports.$shouldOverrideDefaultCharacterSelection=function(a,b){return a=k.$getAdjacentNode(a.focus,b),k.$isDecoratorNode(a)&&!a.isIsolated()||k.$isElementNode(a)&&!a.isInline()&&!a.canBeEmpty()},exports.$sliceSelectedTextNodeContent=function(a,b){if(b.isSelected()&&!b.isSegmented()&&!b.isToken()&&(k.$isRangeSelection(a)||k.DEPRECATED_$isGridSelection(a))){var c=a.anchor.getNode(),e=a.focus.getNode(),d=b.is(c),f=b.is(e);if(d||f){d=a.isBackward();let l,[h,g]=a.getCharacterOffsets();a=c.is(e),f=b.is(d?e:c),e=b.is(d?c:e),c=0,a?(c=h>g?g:h,l=h>g?h:g):f?(c=d?g:h,l=void 0):e&&(c=0,l=d=d?h:g),b.__text=b.__text.slice(c,l)}}return b},exports.$wrapNodes=function(a,b,c=null){var e=a.getNodes();let d=e.length;var f=a.anchor;if(0===d||1===d&&"element"===f.type&&0===f.getNode().getChildrenSize()){e=(a="text"===f.type?f.getNode().getParentOrThrow():f.getNode()).getChildren();let g=b();g.setFormat(a.getFormatType()),g.setIndent(a.getIndent()),e.forEach((l=>g.append(l))),c&&(g=c.append(g)),a.replace(g)}else{f=null;var h=[];for(let g=0;g<d;g++){let l=e[g];k.$isRootOrShadowRoot(l)?(E(a,h,h.length,b,c),h=[],f=l):null===f||null!==f&&k.$hasAncestor(l,f)?h.push(l):(E(a,h,h.length,b,c),h=[l])}E(a,h,h.length,b,c)}},exports.createDOMRange=function(a,b,c,e,d){let f=b.getKey(),h=e.getKey(),g=document.createRange(),l=a.getElementByKey(f);if(a=a.getElementByKey(h),k.$isTextNode(b)&&(l=v(l)),k.$isTextNode(e)&&(a=v(a)),void 0===b||void 0===e||null===l||null===a)return null;"BR"===l.nodeName&&([l,c]=w(l)),"BR"===a.nodeName&&([a,d]=w(a)),b=l.firstChild,l===a&&null!=b&&"BR"===b.nodeName&&0===c&&0===d&&(d=1);try{g.setStart(l,c),g.setEnd(a,d)}catch(m){return null}return!g.collapsed||c===d&&f===h||(g.setStart(a,d),g.setEnd(l,c)),g},exports.createRectsFromDOMRange=function(a,b){var c=a.getRootElement();if(null===c)return[];a=c.getBoundingClientRect(),c=getComputedStyle(c),c=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight);let d,e=(b=Array.from(b.getClientRects())).length;b.sort(((f,h)=>{let g=f.top-h.top;return 3>=Math.abs(g)?f.left-h.left:g}));for(let f=0;f<e;f++){let h=b[f],g=h.width+c===a.width;d&&d.top<=h.top&&d.top+d.height>h.top&&d.left+d.width>h.left||g?(b.splice(f--,1),e--):d=h}return b},exports.getStyleObjectFromCSS=z,exports.trimTextContentFromAnchor=function(a,b,c){let e=b.getNode();if(k.$isElementNode(e)){var d=e.getDescendantByIndex(b.offset);null!==d&&(e=d)}for(;0<c&&null!==e;){var f=e.getPreviousSibling(),h=0;if(null===f){for(var g=(d=e.getParentOrThrow()).getPreviousSibling();null===g;){if(null===(d=d.getParent())){f=null;break}g=d.getPreviousSibling()}null!==d&&(h=d.isInline()?0:2,f=k.$isElementNode(g)?g.getLastDescendant():g)}if(""===(g=e.getTextContent())&&k.$isElementNode(e)&&!e.isInline()&&(g="\n\n"),d=g.length,!k.$isTextNode(e)||c>=d)g=e.getParent(),e.remove(),null==g||0!==g.getChildrenSize()||k.$isRootNode(g)||g.remove(),c-=d+h,e=f;else{let l=e.getKey();h=a.getEditorState().read((()=>{const p=k.$getNodeByKey(l);return k.$isTextNode(p)&&p.isSimpleText()?p.getTextContent():null})),f=d-c;let m=g.slice(0,f);null!==h&&h!==g?(c=k.$getPreviousSelection(),d=e,e.isSimpleText()?e.setTextContent(h):(d=k.$createTextNode(h),e.replace(d)),k.$isRangeSelection(c)&&c.isCollapsed()&&(c=c.anchor.offset,d.select(c,c))):e.isSimpleText()?(h=b.key===l,(g=b.offset)<c&&(g=d),c=h?g-c:0,d=h?g:f,h&&0===c?([c]=e.splitText(c,d),c.remove()):([,c]=e.splitText(c,d),c.remove())):(c=k.$createTextNode(m),e.replace(c)),c=0}}}},"./node_modules/@lexical/text/LexicalText.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalText=__webpack_require__("./node_modules/@lexical/text/LexicalText.prod.js");module.exports=LexicalText},"./node_modules/@lexical/text/LexicalText.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var g=__webpack_require__("./node_modules/lexical/Lexical.js");function r(c,h=!0){return!c&&(c=t(),h&&(c=c.trim()),""===c)}function t(){return g.$getRoot().getTextContent()}function u(c){if(!r(c,!1))return!1;let h=(c=g.$getRoot().getChildren()).length;if(1<h)return!1;for(let e=0;e<h;e++){var b=c[e];if(g.$isDecoratorNode(b))return!1;if(g.$isElementNode(b)){if(!g.$isParagraphNode(b)||0!==b.__indent)return!1;let n=(b=b.getChildren()).length;for(let q=0;q<n;q++)if(!g.$isTextNode(b[e]))return!1}}return!0}exports.$canShowPlaceholder=u,exports.$canShowPlaceholderCurry=function(c){return()=>u(c)},exports.$findTextIntersectionFromCharacters=function(c,h){var b=c.getFirstChild();c=0;a:for(;null!==b;){if(g.$isElementNode(b)){var e=b.getFirstChild();if(null!==e){b=e;continue}}else if(g.$isTextNode(b)){if(c+(e=b.getTextContentSize())>h)return{node:b,offset:h-c};c+=e}if(null===(e=b.getNextSibling())){for(b=b.getParent();null!==b;){if(null!==(e=b.getNextSibling())){b=e;continue a}b=b.getParent()}break}b=e}return null},exports.$isRootTextContentEmpty=r,exports.$isRootTextContentEmptyCurry=function(c,h){return()=>r(c,h)},exports.$rootTextContent=t,exports.registerLexicalTextEntity=function(c,h,b,e){let n=a=>{const d=g.$createTextNode(a.getTextContent());d.setFormat(a.getFormat()),a.replace(d)};return[c.registerNodeTransform(g.TextNode,(a=>{if(a.isSimpleText()){var d=a.getPreviousSibling(),l=a.getTextContent(),m=a;if(g.$isTextNode(d)){var k=d.getTextContent(),f=h(k+l);if(d instanceof b){if(null===f||0!==d.getLatest().__mode)return void n(d);if(0<(f=f.end-k.length))return m=k+(m=l.slice(0,f)),d.select(),d.setTextContent(m),void(f===l.length?a.remove():(d=l.slice(f),a.setTextContent(d)))}else if(null===f||f.start<k.length)return}for(;;){if(l=f=null===(a=h(l))?"":l.slice(a.end),""===f){if(k=m.getNextSibling(),g.$isTextNode(k)){if(f=m.getTextContent()+k.getTextContent(),null===(f=h(f))){k instanceof b?n(k):k.markDirty();break}if(0!==f.start)break}}else if(null!==(k=h(f))&&0===k.start)break;if(null===a)break;if(0===a.start&&g.$isTextNode(d)&&d.isTextEntity())continue;let p;if(0===a.start?[p,m]=m.splitText(a.end):[,p,m]=m.splitText(a.start,a.end),(a=e(p)).setFormat(p.getFormat()),p.replace(a),null==m)break}}})),c=c.registerNodeTransform(b,(a=>{var d=a.getTextContent();const l=h(d);null===l||0!==l.start?n(a):d.length>l.end?a.splitText(l.end):(d=a.getPreviousSibling(),g.$isTextNode(d)&&d.isTextEntity()&&(n(d),n(a)),d=a.getNextSibling(),g.$isTextNode(d)&&d.isTextEntity()&&(n(d),a instanceof b&&n(a)))}))]}},"./node_modules/@lexical/utils/LexicalUtils.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const LexicalUtils=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.prod.js");module.exports=LexicalUtils},"./node_modules/@lexical/utils/LexicalUtils.prod.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var g=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js"),n=__webpack_require__("./node_modules/lexical/Lexical.js");function r(a,b){for(let c of b)if(a.type.startsWith(c))return!0;return!1}function t(a,b){for(;a!==n.$getRoot()&&null!=a;){if(b(a))return a;a=a.getParent()}return null}exports.$splitNode=n.$splitNode,exports.isHTMLAnchorElement=n.isHTMLAnchorElement,exports.isHTMLElement=n.isHTMLElement,exports.$dfs=function(a,b){let c=[];a=(a||n.$getRoot()).getLatest(),b=b||(n.$isElementNode(a)?a.getLastDescendant():a);for(var e=a,d=0;null!==(e=e.getParent());)d++;for(e=d;null!==a&&!a.is(b);)if(c.push({depth:e,node:a}),n.$isElementNode(a)&&0<a.getChildrenSize())a=a.getFirstChild(),e++;else for(d=null;null===d&&null!==a;)null===(d=a.getNextSibling())?(a=a.getParent(),e--):a=d;return null!==a&&a.is(b)&&c.push({depth:e,node:a}),c},exports.$filter=function(a,b){let c=[];for(let e=0;e<a.length;e++){let d=b(a[e]);null!==d&&c.push(d)}return c},exports.$findMatchingParent=t,exports.$getNearestBlockElementAncestorOrThrow=function(a){let b=t(a,(c=>n.$isElementNode(c)&&!c.isInline()));return n.$isElementNode(b)||function p(a){let b=new URLSearchParams;b.append("code",a);for(let c=1;c<arguments.length;c++)b.append("v",arguments[c]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${b} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,a.__key),b},exports.$getNearestNodeOfType=function(a,b){for(;null!=a;){if(a instanceof b)return a;a=a.getParent()}return null},exports.$insertFirst=function(a,b){let c=a.getFirstChild();null!==c?c.insertBefore(b):a.append(b)},exports.$insertNodeToNearestRoot=function(a){var b=n.$getSelection()||n.$getPreviousSelection();if(n.$isRangeSelection(b)){var{focus:c}=b;if(b=c.getNode(),c=c.offset,n.$isRootOrShadowRoot(b))null==(c=b.getChildAtIndex(c))?b.append(a):c.insertBefore(a),a.selectNext();else{let e,d;n.$isTextNode(b)?(e=b.getParentOrThrow(),d=b.getIndexWithinParent(),0<c&&(d+=1,b.splitText(c))):(e=b,d=c),[,b]=n.$splitNode(e,d),b.insertBefore(a),b.selectStart()}}else n.$isNodeSelection(b)||n.DEPRECATED_$isGridSelection(b)?(b=b.getNodes())[b.length-1].getTopLevelElementOrThrow().insertAfter(a):n.$getRoot().append(a),b=n.$createParagraphNode(),a.insertAfter(b),b.select();return a.getLatest()},exports.$restoreEditorState=function(a,b){let c=new Map,e=a._pendingEditorState;for(let[d,f]of b._nodeMap){let h=g.$cloneWithProperties(f);n.$isTextNode(h)&&(h.__text=f.__text),c.set(d,h)}e&&(e._nodeMap=c),a._dirtyType=2,a=b._selection,n.$setSelection(null===a?null:a.clone())},exports.$wrapNodeInElement=function(a,b){return b=b(),a.replace(b),b.append(a),b},exports.addClassNamesToElement=function(a,...b){b.forEach((c=>{"string"==typeof c&&(c=c.split(" ").filter((e=>""!==e)),a.classList.add(...c))}))},exports.isMimeType=r,exports.mediaFileReader=function(a,b){let c=a[Symbol.iterator]();return new Promise(((e,d)=>{let f=[],h=()=>{const{done:m,value:k}=c.next();if(m)return e(f);const l=new FileReader;l.addEventListener("error",d),l.addEventListener("load",(()=>{const q=l.result;"string"==typeof q&&f.push({file:k,result:q}),h()})),r(k,b)?l.readAsDataURL(k):h()};h()}))},exports.mergeRegister=function(...a){return()=>{a.forEach((b=>b()))}},exports.objectKlassEquals=function(a,b){return null!==a&&Object.getPrototypeOf(a).constructor.name===b.name},exports.registerNestedElementResolver=function(a,b,c,e){return a.registerNodeTransform(b,(d=>{a:{for(var f=d.getChildren(),h=0;h<f.length;h++)if(f[h]instanceof b){f=null;break a}for(f=d;null!==f;)if(h=f,(f=f.getParent())instanceof b){f={child:h,parent:f};break a}f=null}if(null!==f){const{child:m,parent:k}=f;if(m.is(d)){if(e(k,d),f=(d=m.getNextSiblings()).length,k.insertAfter(m),0!==f){h=c(k),m.insertAfter(h);for(let l=0;l<f;l++)h.append(d[l])}k.canBeEmpty()||0!==k.getChildrenSize()||k.remove()}}}))},exports.removeClassNamesFromElement=function(a,...b){b.forEach((c=>{"string"==typeof c&&a.classList.remove(...c.split(" "))}))}},"./node_modules/@mdxeditor/editor/dist/FormatConstants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A8:()=>IS_UNDERLINE,Dh:()=>IS_BOLD,UW:()=>IS_ITALIC,pQ:()=>IS_CODE});const IS_BOLD=1,IS_ITALIC=2,IS_UNDERLINE=8,IS_CODE=16},"./node_modules/@mdxeditor/editor/dist/MDXEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>MDXEditor});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_styles_lexicalTheme_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/lexicalTheme.js"),_lexical_react_LexicalComposer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@lexical/react/LexicalComposer.js"),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),_lexical_react_LexicalRichTextPlugin_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.js"),_lexical_react_LexicalContentEditable_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.js"),_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.js"),_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_4__),classnames__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__),_utils_fp_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/fp.js"),_gurx_react_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const LexicalProvider=({children})=>{const[initialRootEditorState,nodes,readOnly]=_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__.vY.useEmitterValues("initialRootEditorState","usedLexicalNodes","readOnly");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_lexical_react_LexicalComposer_js__WEBPACK_IMPORTED_MODULE_1__.LexicalComposer,{initialConfig:{editable:!readOnly,editorState:initialRootEditorState,namespace:"MDXEditor",theme:_styles_lexicalTheme_js__WEBPACK_IMPORTED_MODULE_7__.c,nodes,onError:error=>{throw error}}},children)},RichTextEditor=()=>{const[contentEditableClassName,composerChildren,topAreaChildren,editorWrappers,placeholder]=_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__.vY.useEmitterValues("contentEditableClassName","composerChildren","topAreaChildren","editorWrappers","placeholder");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,topAreaChildren.map(((Child,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Child,{key:index}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(RenderRecurisveWrappers,{wrappers:editorWrappers},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.rootContentEditableWrapper)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_lexical_react_LexicalRichTextPlugin_js__WEBPACK_IMPORTED_MODULE_2__.RichTextPlugin,{contentEditable:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_lexical_react_LexicalContentEditable_js__WEBPACK_IMPORTED_MODULE_3__.ContentEditable,{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.contentEditable,contentEditableClassName)}),placeholder:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.contentEditable,_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.placeholder,contentEditableClassName)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,placeholder)),ErrorBoundary:_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_4___default()}))),composerChildren.map(((Child,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Child,{key:index}))))},DEFAULT_MARKDOWN_OPTIONS={listItemIndent:"one"},RenderRecurisveWrappers=({wrappers,children})=>{if(0===wrappers.length)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children);const Wrapper=wrappers[0];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(RenderRecurisveWrappers,{wrappers:wrappers.slice(1)},children))},EditorRootElement=({children,className})=>{const editorRootElementRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setEditorRootElementRef=_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__.vY.usePublisher("editorRootElementRef");return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{const popupContainer=document.createElement("div");return popupContainer.classList.add(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.editorRoot),className&&className.split(" ").forEach((c=>{popupContainer.classList.add(c)})),document.body.appendChild(popupContainer),editorRootElementRef.current=popupContainer,setEditorRootElementRef(editorRootElementRef),()=>{popupContainer.remove()}}),[className,editorRootElementRef,setEditorRootElementRef]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.editorRoot,_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_8__.ZP.editorWrapper,className,"mdxeditor")},children)},Methods=({mdxRef})=>{const realm=_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__.vY.useRealmContext(),hasDiffSourcePlugin=(0,_gurx_react_js__WEBPACK_IMPORTED_MODULE_9__.hO)("diff-source");return react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(mdxRef,(()=>({getMarkdown:()=>hasDiffSourcePlugin&&"source"===realm.getKeyValue("viewMode")?realm.getKeyValue("markdownSourceEditorValue"):realm.getKeyValue("markdown"),setMarkdown:markdown=>{realm.pubKey("setMarkdown",markdown)},focus:(callbackFn,opts)=>{var _a;null==(_a=realm.getKeyValue("rootEditor"))||_a.focus(callbackFn,opts)}})),[realm,hasDiffSourcePlugin]),null},MDXEditor=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_gurx_react_js__WEBPACK_IMPORTED_MODULE_9__.FQ,{plugins:[(0,_plugins_core_index_js__WEBPACK_IMPORTED_MODULE_6__.m6)({contentEditableClassName:props.contentEditableClassName??"",initialMarkdown:props.markdown,onChange:props.onChange??_utils_fp_js__WEBPACK_IMPORTED_MODULE_10__.ZT,onBlur:props.onBlur??_utils_fp_js__WEBPACK_IMPORTED_MODULE_10__.ZT,toMarkdownOptions:props.toMarkdownOptions??DEFAULT_MARKDOWN_OPTIONS,autoFocus:props.autoFocus??!1,placeholder:props.placeholder??"",readOnly:Boolean(props.readOnly)}),...props.plugins||[]]},react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorRootElement,{className:props.className},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LexicalProvider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(RichTextEditor,null))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Methods,{mdxRef:ref}))))},"./node_modules/@mdxeditor/editor/dist/directive-editors/AdmonitionDirectiveDescriptor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>AdmonitionDirectiveDescriptor,n:()=>ADMONITION_TYPES});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_plugins_core_NestedLexicalEditor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/NestedLexicalEditor.js");const ADMONITION_TYPES=["note","tip","danger","info","caution"],AdmonitionDirectiveDescriptor={name:"admonition",attributes:[],hasChildren:!0,testNode:node=>ADMONITION_TYPES.includes(node.name),Editor({mdastNode}){const{config:{theme}}=(0,_plugins_core_NestedLexicalEditor_js__WEBPACK_IMPORTED_MODULE_1__.rg)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:theme.admonition[mdastNode.name]},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_plugins_core_NestedLexicalEditor_js__WEBPACK_IMPORTED_MODULE_1__.zI,{block:!0,getContent:node=>node.children,getUpdatedMdastNode:(mdastNode2,children)=>({...mdastNode2,children})}))}}},"./node_modules/@mdxeditor/editor/dist/exportMarkdownFromLexical.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>exportLexicalTreeToMdast,v:()=>exportMarkdownFromLexical});var Lexical=__webpack_require__("./node_modules/lexical/Lexical.js");const own={}.hasOwnProperty;function configure(base,extension){let key,index=-1;if(extension.extensions)for(;++index<extension.extensions.length;)configure(base,extension.extensions[index]);for(key in extension)"extensions"===key||("unsafe"===key||"join"===key?base[key]=[...base[key]||[],...extension[key]||[]]:"handlers"===key?base[key]=Object.assign(base[key],extension[key]||{}):base.options[key]=extension[key]);return base}function map(line,_,blank){return">"+(blank?"":" ")+line}function patternInScope(stack,pattern){return listInScope(stack,pattern.inConstruct,!0)&&!listInScope(stack,pattern.notInConstruct,!1)}function listInScope(stack,list,none){if("string"==typeof list&&(list=[list]),!list||0===list.length)return none;let index=-1;for(;++index<list.length;)if(stack.includes(list[index]))return!0;return!1}function hardBreak(_,_1,state,info){let index=-1;for(;++index<state.unsafe.length;)if("\n"===state.unsafe[index].character&&patternInScope(state.stack,state.unsafe[index]))return/[ \t]/.test(info.before)?"":" ";return"\\\n"}function formatCodeAsIndented(node,state){return Boolean(!state.options.fences&&node.value&&!node.lang&&/[^ \r\n]/.test(node.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(node.value))}function code_map(line,_,blank){return(blank?"":"    ")+line}var check_quote=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/check-quote.js");function emphasis(node,_,state,info){const marker=function checkEmphasis(state){const marker=state.options.emphasis||"*";if("*"!==marker&&"_"!==marker)throw new Error("Cannot serialize emphasis with `"+marker+"` for `options.emphasis`, expected `*`, or `_`");return marker}(state),exit=state.enter("emphasis"),tracker=state.createTracker(info);let value=tracker.move(marker);return value+=tracker.move(state.containerPhrasing(node,{before:value,after:marker,...tracker.current()})),value+=tracker.move(marker),exit(),value}emphasis.peek=function emphasisPeek(_,_1,state){return state.options.emphasis||"*"};var lib=__webpack_require__("./node_modules/unist-util-visit-parents/lib/index.js");const visit=function(tree,test,visitor,reverse){"function"==typeof test&&"function"!=typeof visitor&&(reverse=visitor,visitor=test,test=null),(0,lib.S4)(tree,test,(function overload(node,parents){const parent=parents[parents.length-1];return visitor(node,parent?parent.children.indexOf(node):null,parent)}),reverse)};var mdast_util_to_string_lib=__webpack_require__("./node_modules/mdast-util-to-string/lib/index.js");function formatHeadingAsSetext(node,state){let literalWithBreak=!1;return visit(node,(node=>{if("value"in node&&/\r?\n|\r/.test(node.value)||"break"===node.type)return literalWithBreak=!0,lib.BK})),Boolean((!node.depth||node.depth<3)&&(0,mdast_util_to_string_lib.B)(node)&&(state.options.setext||literalWithBreak))}function html(node){return node.value||""}function image_image(node,_,state,info){const quote=(0,check_quote.l)(state),suffix='"'===quote?"Quote":"Apostrophe",exit=state.enter("image");let subexit=state.enter("label");const tracker=state.createTracker(info);let value=tracker.move("![");return value+=tracker.move(state.safe(node.alt,{before:value,after:"]",...tracker.current()})),value+=tracker.move("]("),subexit(),!node.url&&node.title||/[\0- \u007F]/.test(node.url)?(subexit=state.enter("destinationLiteral"),value+=tracker.move("<"),value+=tracker.move(state.safe(node.url,{before:value,after:">",...tracker.current()})),value+=tracker.move(">")):(subexit=state.enter("destinationRaw"),value+=tracker.move(state.safe(node.url,{before:value,after:node.title?" ":")",...tracker.current()}))),subexit(),node.title&&(subexit=state.enter(`title${suffix}`),value+=tracker.move(" "+quote),value+=tracker.move(state.safe(node.title,{before:value,after:quote,...tracker.current()})),value+=tracker.move(quote),subexit()),value+=tracker.move(")"),exit(),value}function imageReference(node,_,state,info){const type=node.referenceType,exit=state.enter("imageReference");let subexit=state.enter("label");const tracker=state.createTracker(info);let value=tracker.move("![");const alt=state.safe(node.alt,{before:value,after:"]",...tracker.current()});value+=tracker.move(alt+"]["),subexit();const stack=state.stack;state.stack=[],subexit=state.enter("reference");const reference=state.safe(state.associationId(node),{before:value,after:"]",...tracker.current()});return subexit(),state.stack=stack,exit(),"full"!==type&&alt&&alt===reference?"shortcut"===type?value=value.slice(0,-1):value+=tracker.move("]"):value+=tracker.move(reference+"]"),value}html.peek=function htmlPeek(){return"<"},image_image.peek=function imagePeek(){return"!"},imageReference.peek=function imageReferencePeek(){return"!"};var inline_code=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/handle/inline-code.js");function formatLinkAsAutolink(node,state){const raw=(0,mdast_util_to_string_lib.B)(node);return Boolean(!state.options.resourceLink&&node.url&&!node.title&&node.children&&1===node.children.length&&"text"===node.children[0].type&&(raw===node.url||"mailto:"+raw===node.url)&&/^[a-z][a-z+.-]+:/i.test(node.url)&&!/[\0- <>\u007F]/.test(node.url))}function link_link(node,_,state,info){const quote=(0,check_quote.l)(state),suffix='"'===quote?"Quote":"Apostrophe",tracker=state.createTracker(info);let exit,subexit;if(formatLinkAsAutolink(node,state)){const stack=state.stack;state.stack=[],exit=state.enter("autolink");let value=tracker.move("<");return value+=tracker.move(state.containerPhrasing(node,{before:value,after:">",...tracker.current()})),value+=tracker.move(">"),exit(),state.stack=stack,value}exit=state.enter("link"),subexit=state.enter("label");let value=tracker.move("[");return value+=tracker.move(state.containerPhrasing(node,{before:value,after:"](",...tracker.current()})),value+=tracker.move("]("),subexit(),!node.url&&node.title||/[\0- \u007F]/.test(node.url)?(subexit=state.enter("destinationLiteral"),value+=tracker.move("<"),value+=tracker.move(state.safe(node.url,{before:value,after:">",...tracker.current()})),value+=tracker.move(">")):(subexit=state.enter("destinationRaw"),value+=tracker.move(state.safe(node.url,{before:value,after:node.title?" ":")",...tracker.current()}))),subexit(),node.title&&(subexit=state.enter(`title${suffix}`),value+=tracker.move(" "+quote),value+=tracker.move(state.safe(node.title,{before:value,after:quote,...tracker.current()})),value+=tracker.move(quote),subexit()),value+=tracker.move(")"),exit(),value}function linkReference(node,_,state,info){const type=node.referenceType,exit=state.enter("linkReference");let subexit=state.enter("label");const tracker=state.createTracker(info);let value=tracker.move("[");const text=state.containerPhrasing(node,{before:value,after:"]",...tracker.current()});value+=tracker.move(text+"]["),subexit();const stack=state.stack;state.stack=[],subexit=state.enter("reference");const reference=state.safe(state.associationId(node),{before:value,after:"]",...tracker.current()});return subexit(),state.stack=stack,exit(),"full"!==type&&text&&text===reference?"shortcut"===type?value=value.slice(0,-1):value+=tracker.move("]"):value+=tracker.move(reference+"]"),value}function checkBullet(state){const marker=state.options.bullet||"*";if("*"!==marker&&"+"!==marker&&"-"!==marker)throw new Error("Cannot serialize items with `"+marker+"` for `options.bullet`, expected `*`, `+`, or `-`");return marker}function checkBulletOrdered(state){const marker=state.options.bulletOrdered||".";if("."!==marker&&")"!==marker)throw new Error("Cannot serialize items with `"+marker+"` for `options.bulletOrdered`, expected `.` or `)`");return marker}function checkRule(state){const marker=state.options.rule||"*";if("*"!==marker&&"-"!==marker&&"_"!==marker)throw new Error("Cannot serialize rules with `"+marker+"` for `options.rule`, expected `*`, `-`, or `_`");return marker}link_link.peek=function linkPeek(node,_,state){return formatLinkAsAutolink(node,state)?"<":"["},linkReference.peek=function linkReferencePeek(){return"["};const phrasing=(0,__webpack_require__("./node_modules/unist-util-is/lib/index.js").O)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","link","linkReference","strong","text"]);function strong(node,_,state,info){const marker=function checkStrong(state){const marker=state.options.strong||"*";if("*"!==marker&&"_"!==marker)throw new Error("Cannot serialize strong with `"+marker+"` for `options.strong`, expected `*`, or `_`");return marker}(state),exit=state.enter("strong"),tracker=state.createTracker(info);let value=tracker.move(marker+marker);return value+=tracker.move(state.containerPhrasing(node,{before:value,after:marker,...tracker.current()})),value+=tracker.move(marker+marker),exit(),value}strong.peek=function strongPeek(_,_1,state){return state.options.strong||"*"};const handle={blockquote:function blockquote(node,_,state,info){const exit=state.enter("blockquote"),tracker=state.createTracker(info);tracker.move("> "),tracker.shift(2);const value=state.indentLines(state.containerFlow(node,tracker.current()),map);return exit(),value},break:hardBreak,code:function code(node,_,state,info){const marker=function checkFence(state){const marker=state.options.fence||"`";if("`"!==marker&&"~"!==marker)throw new Error("Cannot serialize code with `"+marker+"` for `options.fence`, expected `` ` `` or `~`");return marker}(state),raw=node.value||"",suffix="`"===marker?"GraveAccent":"Tilde";if(formatCodeAsIndented(node,state)){const exit=state.enter("codeIndented"),value=state.indentLines(raw,code_map);return exit(),value}const tracker=state.createTracker(info),sequence=marker.repeat(Math.max(function longestStreak(value,substring){const source=String(value);let index=source.indexOf(substring),expected=index,count=0,max=0;if("string"!=typeof substring)throw new TypeError("Expected substring");for(;-1!==index;)index===expected?++count>max&&(max=count):count=1,expected=index+substring.length,index=source.indexOf(substring,expected);return max}(raw,marker)+1,3)),exit=state.enter("codeFenced");let value=tracker.move(sequence);if(node.lang){const subexit=state.enter(`codeFencedLang${suffix}`);value+=tracker.move(state.safe(node.lang,{before:value,after:" ",encode:["`"],...tracker.current()})),subexit()}if(node.lang&&node.meta){const subexit=state.enter(`codeFencedMeta${suffix}`);value+=tracker.move(" "),value+=tracker.move(state.safe(node.meta,{before:value,after:"\n",encode:["`"],...tracker.current()})),subexit()}return value+=tracker.move("\n"),raw&&(value+=tracker.move(raw+"\n")),value+=tracker.move(sequence),exit(),value},definition:function definition(node,_,state,info){const quote=(0,check_quote.l)(state),suffix='"'===quote?"Quote":"Apostrophe",exit=state.enter("definition");let subexit=state.enter("label");const tracker=state.createTracker(info);let value=tracker.move("[");return value+=tracker.move(state.safe(state.associationId(node),{before:value,after:"]",...tracker.current()})),value+=tracker.move("]: "),subexit(),!node.url||/[\0- \u007F]/.test(node.url)?(subexit=state.enter("destinationLiteral"),value+=tracker.move("<"),value+=tracker.move(state.safe(node.url,{before:value,after:">",...tracker.current()})),value+=tracker.move(">")):(subexit=state.enter("destinationRaw"),value+=tracker.move(state.safe(node.url,{before:value,after:node.title?" ":"\n",...tracker.current()}))),subexit(),node.title&&(subexit=state.enter(`title${suffix}`),value+=tracker.move(" "+quote),value+=tracker.move(state.safe(node.title,{before:value,after:quote,...tracker.current()})),value+=tracker.move(quote),subexit()),exit(),value},emphasis,hardBreak,heading:function heading(node,_,state,info){const rank=Math.max(Math.min(6,node.depth||1),1),tracker=state.createTracker(info);if(formatHeadingAsSetext(node,state)){const exit=state.enter("headingSetext"),subexit=state.enter("phrasing"),value=state.containerPhrasing(node,{...tracker.current(),before:"\n",after:"\n"});return subexit(),exit(),value+"\n"+(1===rank?"=":"-").repeat(value.length-(Math.max(value.lastIndexOf("\r"),value.lastIndexOf("\n"))+1))}const sequence="#".repeat(rank),exit=state.enter("headingAtx"),subexit=state.enter("phrasing");tracker.move(sequence+" ");let value=state.containerPhrasing(node,{before:"# ",after:"\n",...tracker.current()});return/^[\t ]/.test(value)&&(value="&#x"+value.charCodeAt(0).toString(16).toUpperCase()+";"+value.slice(1)),value=value?sequence+" "+value:sequence,state.options.closeAtx&&(value+=" "+sequence),subexit(),exit(),value},html,image:image_image,imageReference,inlineCode:inline_code.Y,link:link_link,linkReference,list:function list(node,parent,state,info){const exit=state.enter("list"),bulletCurrent=state.bulletCurrent;let bullet=node.ordered?checkBulletOrdered(state):checkBullet(state);const bulletOther=node.ordered?function checkBulletOrderedOther(state){const bulletOrdered=checkBulletOrdered(state),bulletOrderedOther=state.options.bulletOrderedOther;if(!bulletOrderedOther)return"."===bulletOrdered?")":".";if("."!==bulletOrderedOther&&")"!==bulletOrderedOther)throw new Error("Cannot serialize items with `"+bulletOrderedOther+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(bulletOrderedOther===bulletOrdered)throw new Error("Expected `bulletOrdered` (`"+bulletOrdered+"`) and `bulletOrderedOther` (`"+bulletOrderedOther+"`) to be different");return bulletOrderedOther}(state):function checkBulletOther(state){const bullet=checkBullet(state),bulletOther=state.options.bulletOther;if(!bulletOther)return"*"===bullet?"-":"*";if("*"!==bulletOther&&"+"!==bulletOther&&"-"!==bulletOther)throw new Error("Cannot serialize items with `"+bulletOther+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(bulletOther===bullet)throw new Error("Expected `bullet` (`"+bullet+"`) and `bulletOther` (`"+bulletOther+"`) to be different");return bulletOther}(state),bulletLastUsed=state.bulletLastUsed;let useDifferentMarker=!1;if(parent&&(node.ordered?state.options.bulletOrderedOther:state.options.bulletOther)&&bulletLastUsed&&bullet===bulletLastUsed&&(useDifferentMarker=!0),!node.ordered){const firstListItem=node.children?node.children[0]:void 0;if("*"!==bullet&&"-"!==bullet||!firstListItem||firstListItem.children&&firstListItem.children[0]||"list"!==state.stack[state.stack.length-1]||"listItem"!==state.stack[state.stack.length-2]||"list"!==state.stack[state.stack.length-3]||"listItem"!==state.stack[state.stack.length-4]||0!==state.indexStack[state.indexStack.length-1]||0!==state.indexStack[state.indexStack.length-2]||0!==state.indexStack[state.indexStack.length-3]||(useDifferentMarker=!0),checkRule(state)===bullet&&firstListItem){let index=-1;for(;++index<node.children.length;){const item=node.children[index];if(item&&"listItem"===item.type&&item.children&&item.children[0]&&"thematicBreak"===item.children[0].type){useDifferentMarker=!0;break}}}}useDifferentMarker&&(bullet=bulletOther),state.bulletCurrent=bullet;const value=state.containerFlow(node,info);return state.bulletLastUsed=bullet,state.bulletCurrent=bulletCurrent,exit(),value},listItem:function listItem(node,parent,state,info){const listItemIndent=function checkListItemIndent(state){const style=state.options.listItemIndent||"tab";if(1===style||"1"===style)return"one";if("tab"!==style&&"one"!==style&&"mixed"!==style)throw new Error("Cannot serialize items with `"+style+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return style}(state);let bullet=state.bulletCurrent||checkBullet(state);parent&&"list"===parent.type&&parent.ordered&&(bullet=("number"==typeof parent.start&&parent.start>-1?parent.start:1)+(!1===state.options.incrementListMarker?0:parent.children.indexOf(node))+bullet);let size=bullet.length+1;("tab"===listItemIndent||"mixed"===listItemIndent&&(parent&&"list"===parent.type&&parent.spread||node.spread))&&(size=4*Math.ceil(size/4));const tracker=state.createTracker(info);tracker.move(bullet+" ".repeat(size-bullet.length)),tracker.shift(size);const exit=state.enter("listItem"),value=state.indentLines(state.containerFlow(node,tracker.current()),(function map(line,index,blank){if(index)return(blank?"":" ".repeat(size))+line;return(blank?bullet:bullet+" ".repeat(size-bullet.length))+line}));return exit(),value},paragraph:function paragraph(node,_,state,info){const exit=state.enter("paragraph"),subexit=state.enter("phrasing"),value=state.containerPhrasing(node,info);return subexit(),exit(),value},root:function root(node,_,state,info){return(node.children.some((d=>phrasing(d)))?state.containerPhrasing:state.containerFlow).call(state,node,info)},strong,text:function text_text(node,_,state,info){return state.safe(node.value,info)},thematicBreak:function thematicBreak(_,_1,state){const value=(checkRule(state)+(state.options.ruleSpaces?" ":"")).repeat(function checkRuleRepetition(state){const repetition=state.options.ruleRepetition||3;if(repetition<3)throw new Error("Cannot serialize rules with repetition `"+repetition+"` for `options.ruleRepetition`, expected `3` or more");return repetition}(state));return state.options.ruleSpaces?value.slice(0,-1):value}},join=[function joinDefaults(left,right,parent,state){if("code"===right.type&&formatCodeAsIndented(right,state)&&("list"===left.type||left.type===right.type&&formatCodeAsIndented(left,state)))return!1;if("list"===left.type&&left.type===right.type&&Boolean(left.ordered)===Boolean(right.ordered)&&!(left.ordered?state.options.bulletOrderedOther:state.options.bulletOther))return!1;if("spread"in parent&&"boolean"==typeof parent.spread){if("paragraph"===left.type&&(left.type===right.type||"definition"===right.type||"heading"===right.type&&formatHeadingAsSetext(right,state)))return;return parent.spread?1:0}}];const fullPhrasingSpans=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],unsafe=[{character:"\t",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:"(?:[ \t\r\n*])"},{character:"*",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"+",after:"(?:[ \t\r\n])"},{atBreak:!0,character:"-",after:"(?:[ \t\r\n-])"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ \t\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:fullPhrasingSpans},{atBreak:!0,character:"~"}];var micromark_util_decode_string=__webpack_require__("./node_modules/micromark-util-decode-string/index.js");function association(node){return node.label||!node.identifier?node.label||"":(0,micromark_util_decode_string.v)(node.identifier)}var container_phrasing=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/container-phrasing.js"),container_flow=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/container-flow.js");const eol=/\r?\n|\r/g;function indentLines(value,map){const result=[];let match,start=0,line=0;for(;match=eol.exec(value);)one(value.slice(start,match.index)),result.push(match[0]),start=match.index+match[0].length,line++;return one(value.slice(start)),result.join("");function one(value){result.push(map(value,line,!value))}}var pattern_compile=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/pattern-compile.js");function numerical(a,b){return a-b}function escapeBackslashes(value,after){const expression=/\\(?=[!-/:-@[-`{-~])/g,positions=[],results=[],whole=value+after;let match,index=-1,start=0;for(;match=expression.exec(whole);)positions.push(match.index);for(;++index<positions.length;)start!==positions[index]&&results.push(value.slice(start,positions[index])),results.push("\\"),start=positions[index];return results.push(value.slice(start)),results.join("")}var track=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/track.js");function toMarkdown(tree,options={}){const state={enter:function enter(name){return state.stack.push(name),function exit(){state.stack.pop()}},indentLines,associationId:association,containerPhrasing:containerPhrasingBound,containerFlow:containerFlowBound,createTracker:track.j,safe:safeBound,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[],handle:void 0};configure(state,{unsafe,join,handlers:handle}),configure(state,options),state.options.tightDefinitions&&configure(state,{join:[joinDefinition]}),state.handle=function zwitch(key,options){const settings=options||{};function one(value,...parameters){let fn=one.invalid;const handlers=one.handlers;if(value&&own.call(value,key)){const id=String(value[key]);fn=own.call(handlers,id)?handlers[id]:one.unknown}if(fn)return fn.call(this,value,...parameters)}return one.handlers=settings.handlers||{},one.invalid=settings.invalid,one.unknown=settings.unknown,one}("type",{invalid,unknown,handlers:state.handlers});let result=state.handle(tree,void 0,state,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0});return result&&10!==result.charCodeAt(result.length-1)&&13!==result.charCodeAt(result.length-1)&&(result+="\n"),result}function invalid(value){throw new Error("Cannot handle value `"+value+"`, expected node")}function unknown(node){throw new Error("Cannot handle unknown node `"+node.type+"`")}function joinDefinition(left,right){if("definition"===left.type&&left.type===right.type)return 0}function containerPhrasingBound(parent,info){return(0,container_phrasing.p)(parent,this,info)}function containerFlowBound(parent,info){return(0,container_flow.K)(parent,this,info)}function safeBound(value,config){return function safe(state,input,config){const value=(config.before||"")+(input||"")+(config.after||""),positions=[],result=[],infos={};let index=-1;for(;++index<state.unsafe.length;){const pattern=state.unsafe[index];if(!patternInScope(state.stack,pattern))continue;const expression=(0,pattern_compile.T)(pattern);let match;for(;match=expression.exec(value);){const before="before"in pattern||Boolean(pattern.atBreak),after="after"in pattern,position=match.index+(before?match[1].length:0);positions.includes(position)?(infos[position].before&&!before&&(infos[position].before=!1),infos[position].after&&!after&&(infos[position].after=!1)):(positions.push(position),infos[position]={before,after})}}positions.sort(numerical);let start=config.before?config.before.length:0;const end=value.length-(config.after?config.after.length:0);for(index=-1;++index<positions.length;){const position=positions[index];position<start||position>=end||position+1<end&&positions[index+1]===position+1&&infos[position].after&&!infos[position+1].before&&!infos[position+1].after||positions[index-1]===position-1&&infos[position].before&&!infos[position-1].before&&!infos[position-1].after||(start!==position&&result.push(escapeBackslashes(value.slice(start,position),"\\")),start=position,!/[!-/:-@[-`{-~]/.test(value.charAt(position))||config.encode&&config.encode.includes(value.charAt(position))?(result.push("&#x"+value.charCodeAt(position).toString(16).toUpperCase()+";"),start++):result.push("\\"))}return result.push(escapeBackslashes(value.slice(start,end),config.after)),result.join("")}(this,value,config)}function exportLexicalTreeToMdast({root,visitors,jsxComponentDescriptors,jsxIsAvailable}){let unistRoot=null;const referredComponents=new Set;function registerReferredComponent(componentName){referredComponents.add(componentName)}function appendToParent(parentNode,node){if(null===unistRoot)return unistRoot=node,unistRoot;if(!function isParent(node){return node.children instanceof Array}(parentNode))throw new Error("Attempting to append children to a non-parent");const siblings=parentNode.children,prevSibling=siblings.at(-1);if(prevSibling){const joinVisitor=visitors.find((visitor=>{var _a;return null==(_a=visitor.shouldJoin)?void 0:_a.call(visitor,prevSibling,node)}));if(joinVisitor){const joinedNode=joinVisitor.join(prevSibling,node);return siblings.splice(siblings.length-1,1,joinedNode),joinedNode}}return siblings.push(node),node}function visitChildren(lexicalNode,parentNode){lexicalNode.getChildren().forEach((lexicalChild=>{visit(lexicalChild,parentNode)}))}function visit(lexicalNode,mdastParent){var _a;const visitor=visitors.find((visitor2=>{var _a2;return null==(_a2=visitor2.testLexicalNode)?void 0:_a2.call(visitor2,lexicalNode)}));if(!visitor)throw new Error(`no lexical visitor found for ${lexicalNode.getType()}`,{cause:lexicalNode});null==(_a=visitor.visitLexicalNode)||_a.call(visitor,{lexicalNode,mdastParent,actions:{addAndStepInto(type,props={},hasChildren=!0){const newNode={type,...props,...hasChildren?{children:[]}:{}};appendToParent(mdastParent,newNode),(0,Lexical.$isElementNode)(lexicalNode)&&hasChildren&&visitChildren(lexicalNode,newNode)},appendToParent,visitChildren,registerReferredComponent}})}if(visit(root,null),null===unistRoot)throw new Error("traversal ended with no root element");const importsMap=new Map,defaultImportsMap=new Map;for(const componentName of referredComponents){const descriptor=jsxComponentDescriptors.find((descriptor2=>descriptor2.name===componentName));if(!descriptor)throw new Error(`Component ${componentName} is used but not imported`);if(descriptor.source)if(descriptor.defaultExport)defaultImportsMap.set(componentName,descriptor.source);else{const{source}=descriptor,existing=importsMap.get(source);existing?existing.push(componentName):importsMap.set(source,[componentName])}}const imports=Array.from(importsMap).map((([source,componentNames])=>({type:"mdxjsEsm",value:`import { ${componentNames.join(", ")} } from '${source}'`})));imports.push(...Array.from(defaultImportsMap).map((([componentName,source])=>({type:"mdxjsEsm",value:`import ${componentName} from '${source}'`}))));const typedRoot=unistRoot,frontmatter=typedRoot.children.find((child=>"yaml"===child.type));return frontmatter?typedRoot.children.splice(typedRoot.children.indexOf(frontmatter)+1,0,...imports):typedRoot.children.unshift(...imports),fixWrappingWhitespace(typedRoot,[]),jsxIsAvailable||convertUnderlineJsxToHtml(typedRoot),typedRoot}function convertUnderlineJsxToHtml(node){if(Object.hasOwn(node,"children")){const nodeAsParent=node,newChildren=[];nodeAsParent.children.forEach((child=>{"mdxJsxTextElement"===child.type&&"u"===child.name?newChildren.push({type:"html",value:"<u>"},...child.children,{type:"html",value:"</u>"}):(newChildren.push(child),convertUnderlineJsxToHtml(child))})),nodeAsParent.children=newChildren}}const TRAILING_WHITESPACE_REGEXP=/\s+$/,LEADING_WHITESPACE_REGEXP=/^\s+/;function fixWrappingWhitespace(node,parentChain){if("strong"===node.type||"emphasis"===node.type){const lastChild=node.children.at(-1);if("text"===(null==lastChild?void 0:lastChild.type)){const trailingWhitespace=lastChild.value.match(TRAILING_WHITESPACE_REGEXP);if(trailingWhitespace){lastChild.value=lastChild.value.replace(TRAILING_WHITESPACE_REGEXP,"");const parent=parentChain.at(-1);parent&&(parent.children.splice(parent.children.indexOf(node)+1,0,{type:"text",value:trailingWhitespace[0]}),fixWrappingWhitespace(parent,parentChain.slice(0,-1)))}}const firstChild=node.children.at(0);if("text"===(null==firstChild?void 0:firstChild.type)){const leadingWhitespace=firstChild.value.match(LEADING_WHITESPACE_REGEXP);if(leadingWhitespace){firstChild.value=firstChild.value.replace(LEADING_WHITESPACE_REGEXP,"");const parent=parentChain.at(-1);parent&&(parent.children.splice(parent.children.indexOf(node),0,{type:"text",value:leadingWhitespace[0]}),fixWrappingWhitespace(parent,parentChain.slice(0,-1)))}}}if(Object.hasOwn(node,"children")){const nodeAsParent=node;nodeAsParent.children.forEach((child=>fixWrappingWhitespace(child,[...parentChain,nodeAsParent])))}}function exportMarkdownFromLexical({root,toMarkdownOptions,toMarkdownExtensions,visitors,jsxComponentDescriptors,jsxIsAvailable}){return toMarkdown(exportLexicalTreeToMdast({root,visitors,jsxComponentDescriptors,jsxIsAvailable}),{extensions:toMarkdownExtensions,...toMarkdownOptions})}},"./node_modules/@mdxeditor/editor/dist/gurx/react.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FQ:()=>RealmPluginInitializer,hO:()=>useHasPlugin,nq:()=>realmPlugin});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_realmFactory_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js");const useIsomorphicLayoutEffect="undefined"!=typeof document?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect,GurxContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);function sysHooks(){const Context=GurxContext;return{useRealmContext:()=>react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context),useEmitter:(key,callback)=>{const realm=react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context);useIsomorphicLayoutEffect((()=>realm.subKey(key,callback)),[callback])},useEmitterValues:(...keys)=>{const realm=react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context),[values,setValues]=react__WEBPACK_IMPORTED_MODULE_0__.useState((()=>realm.getKeyValues(keys)));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>null==realm?void 0:realm.subKeys(keys,(newValues=>{(()=>{1===keys.length&&(newValues=[newValues]);for(let i=0;i<keys.length;i++)newValues[i]!==values[i]&&setValues(newValues)})()}))),[keys,realm,values]),values},usePubKeys:()=>react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context).pubKeys,usePublisher:key=>{const realm=react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context);return react__WEBPACK_IMPORTED_MODULE_0__.useCallback((value=>{realm.pubKey(key,value)}),[key,realm])}}}const UsedPluginsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(new Set);function realmPlugin(params){return[pluginParams=>({systemSpec:params.systemSpec,pluginParams,applyParamsToSystem:params.applyParamsToSystem,init:params.init,id:params.id,dependencies:params.dependencies}),sysHooks()]}const RealmPluginInitializer=function({plugins,children}){const validPlugins=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const availablePlugins=plugins.map((plugin=>plugin.id));return plugins.filter((plugin=>!plugin.dependencies||!plugin.dependencies.some((dep=>!availablePlugins.includes(dep)))||(console.warn("MDXEditor plugin",plugin.id,"has some missing dependencies",plugin.dependencies,", skipping"),!1)))}),[plugins]),realm=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const specs=validPlugins.map((plugin=>plugin.systemSpec)),pluginIds=validPlugins.map((plugin=>plugin.id)),realm2=(0,_realmFactory_js__WEBPACK_IMPORTED_MODULE_1__.w8)(...specs);return validPlugins.forEach((plugin=>{var _a,_b;null==(_a=plugin.init)||_a.call(plugin,realm2,plugin.pluginParams,pluginIds),null==(_b=plugin.applyParamsToSystem)||_b.call(plugin,realm2,plugin.pluginParams)})),realm2}),[]);react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{validPlugins.forEach((plugin=>{var _a;null==(_a=plugin.applyParamsToSystem)||_a.call(plugin,realm,plugin.pluginParams)}))}),[realm,validPlugins]);const Context=GurxContext;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Context.Provider,{value:realm},react__WEBPACK_IMPORTED_MODULE_0__.createElement(UsedPluginsContext.Provider,{value:new Set(plugins.map((plugin=>plugin.id)))},children))};function useHasPlugin(id){return react__WEBPACK_IMPORTED_MODULE_0__.useContext(UsedPluginsContext).has(id)}},"./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w8:()=>realmFactory,By:()=>system});var uuid4=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/uuid4.js"),fp=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/fp.js"),__defProp=Object.defineProperty,__publicField=(obj,key,value)=>(((obj,key,value)=>{key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value})(obj,"symbol"!=typeof key?key+"":key,value),value);function defaultComparator(current,next){return current===next}class SetMap{constructor(){__publicField(this,"map",new Map)}getOrCreate(key){let record=this.map.get(key);return record||(record=new Set,this.map.set(key,record)),record}get(key){return this.map.get(key)}use(key,cb){const set=this.get(key);void 0!==set&&cb(set)}delete(key){return this.map.delete(key)}}class RefCount{constructor(map=new Map){__publicField(this,"map"),this.map=map}clone(){return new RefCount(new Map(this.map))}increment(key){const counter=this.map.get(key)??0;this.map.set(key,counter+1)}decrement(key,ifZero){let counter=this.map.get(key);void 0!==counter&&(counter-=1,this.map.set(key,counter),0===counter&&ifZero())}}const NO_VALUE=Symbol("NO_VALUE");function realm(){const subscriptions=new SetMap,singletonSubscriptions=new Map,graph=new SetMap,state=new Map,distinctNodes=new Map,labels={};function node(value=NO_VALUE,distinct=!1){const key=(0,uuid4.k)();return value!==NO_VALUE&&state.set(key,value),!1!==distinct&&distinctNodes.set(key,!0===distinct?defaultComparator:distinct),{key,toString:()=>key}}function subSingle({key},subscription){const nodeSubscriptions=subscriptions.getOrCreate(key);return nodeSubscriptions.add(subscription),()=>nodeSubscriptions.delete(subscription)}function singletonSub({key},subscription){return subscription?singletonSubscriptions.set(key,subscription):singletonSubscriptions.delete(key),()=>singletonSubscriptions.delete(key)}function sub(...args){const[subscription]=args.slice(-1),nodes=args.slice(0,-1);return 1===nodes.length?subSingle(nodes[0],subscription):function subMultiple(sources,cb){const sink=node();return connect({map:done=>(...args)=>{done(args)},sink,sources}),subSingle(sink,cb)}(nodes,subscription)}function calculateExecutionMap(keys){const participatingNodeKeys=[],visitedNodes=new Set,pendingPulls=new SetMap,refCount=new RefCount,projections=new SetMap;function visit(key,insertIndex=0){refCount.increment(key),visitedNodes.has(key)||(pendingPulls.use(key,(pulls=>{insertIndex=Math.max(...Array.from(pulls).map((key2=>participatingNodeKeys.indexOf(key2))))+1})),graph.use(key,(sinkProjections=>{sinkProjections.forEach((projection=>{projection.sources.has(key)?(projections.getOrCreate(projection.sink).add(projection),visit(projection.sink,insertIndex)):pendingPulls.getOrCreate(projection.sink).add(key)}))})),visitedNodes.add(key),participatingNodeKeys.splice(insertIndex,0,key))}return keys.forEach((key=>visit(key))),{participatingNodeKeys,pendingPulls,projections,refCount}}const executionMaps=new Map;function pubIn(values){var _a;const keys=Object.keys(values),executionMapKey=keys.join(",");executionMaps.has(executionMapKey)||executionMaps.set(executionMapKey,calculateExecutionMap(keys));const map2=executionMaps.get(executionMapKey),refCount=map2.refCount.clone(),participatingNodeKeys=map2.participatingNodeKeys.slice(),transientState=new Map(state);function nodeWillNotEmit(key){graph.use(key,(projections=>{projections.forEach((({sources,sink})=>{sources.has(key)&&refCount.decrement(sink,(()=>{participatingNodeKeys.splice(participatingNodeKeys.indexOf(sink),1),nodeWillNotEmit(sink)}))}))}))}let nodeKey;for(;nodeKey=participatingNodeKeys.shift();){let resolved=!1;const done=value=>{distinctNodes.has(nodeKey)&&distinctNodes.get(nodeKey)(state.get(nodeKey),value)?resolved=!1:(resolved=!0,transientState.set(nodeKey,value),state.has(nodeKey)&&state.set(nodeKey,value))};if(Object.prototype.hasOwnProperty.call(values,nodeKey)?done(values[nodeKey]):map2.projections.use(nodeKey,(nodeProjections=>{nodeProjections.forEach((projection=>{const args=[...Array.from(projection.sources),...Array.from(projection.pulls)].map((id=>transientState.get(id)));projection.map(done)(...args)}))})),resolved){const value=transientState.get(nodeKey);subscriptions.use(nodeKey,(nodeSubscriptions=>{nodeSubscriptions.forEach((subscription=>subscription(value)))})),null==(_a=singletonSubscriptions.get(nodeKey))||_a(value)}else nodeWillNotEmit(nodeKey)}}function nodesToKeySet(nodes){return new Set(nodes.map((s=>s.key)))}function connect({sources,pulls=[],map:map2,sink:{key:sink}}){const dependency={map:map2,pulls:nodesToKeySet(pulls),sink,sources:nodesToKeySet(sources)};[...sources,...pulls].forEach((({key:sourceKey})=>{graph.getOrCreate(sourceKey).add(dependency)})),executionMaps.clear()}function pub(...args){const map2={};for(let index=0;index<args.length;index+=2){map2[args[index].key]=args[index+1]}pubIn(map2)}function pubKeys(values){pubIn(Object.entries(values).reduce(((acc,[key,value])=>(0,fp.bw)(acc,(acc2=>{const label2=labels[key];if(!label2)throw new Error(`No label for key ${key}. Do you miss a plugin?`);return acc2[label2.key]=value,value}))),{}))}return{combine:function combine(...nodes){const sink=node();return connect({map:done=>(...args)=>done(args),sink,sources:nodes}),sink},connect,debug:function debug(){Object.entries(labels).forEach((([name,value])=>{state.get(value.key)}))},derive:function derive(source,initial){return(0,fp.bw)(node(initial,!0),(sink=>{connect({map:done=>value=>done(value),sink,sources:[source]})}))},getKeyValue:function getKeyValue(key){return state.get(labels[key].key)},getValue:function getValue(node2){return state.get(node2.key)},getKeyValues:function getKeyValues(keys){return keys.map((key=>{const label2=labels[key];if(!label2)throw new Error(`No label for key ${key}. Do you miss a plugin?`);return state.get(label2.key)}))},label:function label(newLabels){Object.assign(labels,newLabels)},labels,link:function link(source,sink){connect({map:done=>value=>done(value),sink,sources:[source]})},node,o:{delayWithMicrotask:function delayWithMicrotask(){return source=>{const sink=node();return sub(source,(value=>queueMicrotask((()=>pub(sink,value))))),sink}},debounceTime:function debounceTime(delay){return source=>{const sink=node();let currentValue,timeout;return sub(source,(value=>{currentValue=value,timeout&&clearTimeout(timeout),timeout=setTimeout((()=>{pub(sink,currentValue)}),delay)})),sink}},filter:function filter(predicate){return source=>{const sink=node();return connect({map:done=>value=>predicate(value)&&done(value),sink,sources:[source]}),sink}},map:function map(mapFunction){return source=>{const sink=node();return connect({map:done=>value=>{done(mapFunction(value))},sink,sources:[source]}),sink}},mapTo:function mapTo(value){return source=>{const sink=node();return connect({map:done=>()=>done(value),sink,sources:[source]}),sink}},onNext:function onNext(bufNode){return source=>{const sink=node();let pendingValue=NO_VALUE;return sub(source,(value=>pendingValue=value)),connect({map:done=>value=>{pendingValue!==NO_VALUE&&(done([pendingValue,value]),pendingValue=NO_VALUE)},sink,sources:[bufNode]}),sink}},scan:function scan(accumulator,seed){return source=>{const sink=node();return connect({map:done=>value=>done(seed=accumulator(seed,value)),sink,sources:[source]}),sink}},throttleTime:function throttleTime(delay){return source=>{const sink=node();let currentValue,timeout;return sub(source,(value=>{currentValue=value,timeout||(timeout=setTimeout((()=>{timeout=void 0,pub(sink,currentValue)}),delay))})),sink}},withLatestFrom:function withLatestFrom(...nodes){return source=>{const sink=node();return connect({map:done=>(...args)=>done(args),pulls:nodes,sink,sources:[source]}),sink}},once:function once(){return source=>{const sink=node();let passed=!1;return connect({map:done=>value=>{passed||(passed=!0,done(value))},sink,sources:[source]}),sink}},passOnlyAfterNodeHasEmittedBefore:function passOnlyAfterNodeHasEmittedBefore(starterNode,durationNode){return source=>{const sink=node();let startTime=0;return sub(starterNode,(()=>startTime=Date.now())),connect({map:done=>value=>{Date.now()<startTime+state.get(durationNode.key)&&done(value)},sink,sources:[source]}),sink}}},pipe:function pipe(source,...operators){for(const operator of operators)source=operator(source);return source},pub,pubIn,pubKey:function pubKey(key,value){pubKeys({[key]:value})},pubKeys,resetSingletonSubs:function resetSingletonSubs(){singletonSubscriptions.clear()},singletonSub,singletonSubKey:function singletonSubKey(key,subscription){return singletonSub(labels[key],subscription)},spread:function spread(source,initialValues){return initialValues.map(((initialValue,index)=>(0,fp.bw)(node(initialValue,!0),(sink=>{connect({map:done=>sourceValue=>{done(sourceValue[index])},sink,sources:[source]})}))))},sub,subKey:function subKey(key,subscription){return sub(labels[key],subscription)},subKeys:function subKeys(keys,subscription){return sub(...keys.map((key=>labels[key])).concat(subscription))}}}function system(constructor,dependencies=[]){return{constructor,dependencies,id:(0,uuid4.k)()}}function realmFactory(...specs){const singletons=new Map,r=realm(),_init=({id,constructor,dependencies})=>{if(singletons.has(id))return singletons.get(id);const system2=constructor(r,dependencies.map((t=>_init(specs.find((spec=>spec.id===t.id))))));return r.label(system2),singletons.set(id,system2),system2};return specs.forEach(_init),r}},"./node_modules/@mdxeditor/editor/dist/icons/arrow_drop_down.svg.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>DropDownIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const DropDownIcon=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M0 0h24v24H0z"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{mask:"url(#a)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"m12 15-5-5h10l-5 5Z"})))},"./node_modules/@mdxeditor/editor/dist/importMarkdownToLexical.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>importMarkdownToLexical,K:()=>importMdastTreeToLexical});var constructs_namespaceObject={};__webpack_require__.r(constructs_namespaceObject),__webpack_require__.d(constructs_namespaceObject,{attentionMarkers:()=>attentionMarkers,contentInitial:()=>contentInitial,disable:()=>disable,document:()=>constructs_document,flow:()=>constructs_flow,flowInitial:()=>flowInitial,insideSpan:()=>insideSpan,string:()=>constructs_string,text:()=>constructs_text});var lib=__webpack_require__("./node_modules/mdast-util-to-string/lib/index.js");function splice(list,start,remove,items){const end=list.length;let parameters,chunkStart=0;if(start=start<0?-start>end?0:end+start:start>end?end:start,remove=remove>0?remove:0,items.length<1e4)parameters=Array.from(items),parameters.unshift(start,remove),list.splice(...parameters);else for(remove&&list.splice(start,remove);chunkStart<items.length;)parameters=items.slice(chunkStart,chunkStart+1e4),parameters.unshift(start,0),list.splice(...parameters),chunkStart+=1e4,start+=1e4}function push(list,items){return list.length>0?(splice(list,list.length,0,items),list):items}const micromark_util_combine_extensions_hasOwnProperty={}.hasOwnProperty;function syntaxExtension(all,extension){let hook;for(hook in extension){const left=(micromark_util_combine_extensions_hasOwnProperty.call(all,hook)?all[hook]:void 0)||(all[hook]={}),right=extension[hook];let code;if(right)for(code in right){micromark_util_combine_extensions_hasOwnProperty.call(left,code)||(left[code]=[]);const value=right[code];constructs(left[code],Array.isArray(value)?value:value?[value]:[])}}}function constructs(existing,list){let index=-1;const before=[];for(;++index<list.length;)("after"===list[index].add?existing:before).push(list[index]);splice(existing,0,0,before)}var micromark_factory_space=__webpack_require__("./node_modules/micromark-factory-space/index.js"),micromark_util_character=__webpack_require__("./node_modules/micromark-util-character/index.js");const content={tokenize:function initializeContent(effects){const contentStart=effects.attempt(this.parser.constructs.contentInitial,(function afterContentStartConstruct(code){if(null===code)return void effects.consume(code);return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),(0,micromark_factory_space.f)(effects,contentStart,"linePrefix")}),(function paragraphInitial(code){return effects.enter("paragraph"),lineStart(code)}));let previous;return contentStart;function lineStart(code){const token=effects.enter("chunkText",{contentType:"text",previous});return previous&&(previous.next=token),previous=token,data(code)}function data(code){return null===code?(effects.exit("chunkText"),effects.exit("paragraph"),void effects.consume(code)):(0,micromark_util_character.Ch)(code)?(effects.consume(code),effects.exit("chunkText"),lineStart):(effects.consume(code),data)}}};const document_document={tokenize:function initializeDocument(effects){const self=this,stack=[];let childFlow,childToken,lineStartOffset,continued=0;return start;function start(code){if(continued<stack.length){const item=stack[continued];return self.containerState=item[1],effects.attempt(item[0].continuation,documentContinue,checkNewContainers)(code)}return checkNewContainers(code)}function documentContinue(code){if(continued++,self.containerState._closeFlow){self.containerState._closeFlow=void 0,childFlow&&closeFlow();const indexBeforeExits=self.events.length;let point,indexBeforeFlow=indexBeforeExits;for(;indexBeforeFlow--;)if("exit"===self.events[indexBeforeFlow][0]&&"chunkFlow"===self.events[indexBeforeFlow][1].type){point=self.events[indexBeforeFlow][1].end;break}exitContainers(continued);let index=indexBeforeExits;for(;index<self.events.length;)self.events[index][1].end=Object.assign({},point),index++;return splice(self.events,indexBeforeFlow+1,0,self.events.slice(indexBeforeExits)),self.events.length=index,checkNewContainers(code)}return start(code)}function checkNewContainers(code){if(continued===stack.length){if(!childFlow)return documentContinued(code);if(childFlow.currentConstruct&&childFlow.currentConstruct.concrete)return flowStart(code);self.interrupt=Boolean(childFlow.currentConstruct&&!childFlow._gfmTableDynamicInterruptHack)}return self.containerState={},effects.check(containerConstruct,thereIsANewContainer,thereIsNoNewContainer)(code)}function thereIsANewContainer(code){return childFlow&&closeFlow(),exitContainers(continued),documentContinued(code)}function thereIsNoNewContainer(code){return self.parser.lazy[self.now().line]=continued!==stack.length,lineStartOffset=self.now().offset,flowStart(code)}function documentContinued(code){return self.containerState={},effects.attempt(containerConstruct,containerContinue,flowStart)(code)}function containerContinue(code){return continued++,stack.push([self.currentConstruct,self.containerState]),documentContinued(code)}function flowStart(code){return null===code?(childFlow&&closeFlow(),exitContainers(0),void effects.consume(code)):(childFlow=childFlow||self.parser.flow(self.now()),effects.enter("chunkFlow",{contentType:"flow",previous:childToken,_tokenizer:childFlow}),flowContinue(code))}function flowContinue(code){return null===code?(writeToChild(effects.exit("chunkFlow"),!0),exitContainers(0),void effects.consume(code)):(0,micromark_util_character.Ch)(code)?(effects.consume(code),writeToChild(effects.exit("chunkFlow")),continued=0,self.interrupt=void 0,start):(effects.consume(code),flowContinue)}function writeToChild(token,eof){const stream=self.sliceStream(token);if(eof&&stream.push(null),token.previous=childToken,childToken&&(childToken.next=token),childToken=token,childFlow.defineSkip(token.start),childFlow.write(stream),self.parser.lazy[token.start.line]){let index=childFlow.events.length;for(;index--;)if(childFlow.events[index][1].start.offset<lineStartOffset&&(!childFlow.events[index][1].end||childFlow.events[index][1].end.offset>lineStartOffset))return;const indexBeforeExits=self.events.length;let seen,point,indexBeforeFlow=indexBeforeExits;for(;indexBeforeFlow--;)if("exit"===self.events[indexBeforeFlow][0]&&"chunkFlow"===self.events[indexBeforeFlow][1].type){if(seen){point=self.events[indexBeforeFlow][1].end;break}seen=!0}for(exitContainers(continued),index=indexBeforeExits;index<self.events.length;)self.events[index][1].end=Object.assign({},point),index++;splice(self.events,indexBeforeFlow+1,0,self.events.slice(indexBeforeExits)),self.events.length=index}}function exitContainers(size){let index=stack.length;for(;index-- >size;){const entry=stack[index];self.containerState=entry[1],entry[0].exit.call(self,effects)}stack.length=size}function closeFlow(){childFlow.write([null]),childToken=void 0,childFlow=void 0,self.containerState._closeFlow=void 0}}},containerConstruct={tokenize:function tokenizeContainer(effects,ok,nok){return(0,micromark_factory_space.f)(effects,effects.attempt(this.parser.constructs.document,ok,nok),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const blankLine={tokenize:function tokenizeBlankLine(effects,ok,nok){return function start(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,after,"linePrefix")(code):after(code)};function after(code){return null===code||(0,micromark_util_character.Ch)(code)?ok(code):nok(code)}},partial:!0};function subtokenize(events){const jumps={};let event,lineIndex,otherIndex,otherEvent,parameters,subevents,more,index=-1;for(;++index<events.length;){for(;index in jumps;)index=jumps[index];if(event=events[index],index&&"chunkFlow"===event[1].type&&"listItemPrefix"===events[index-1][1].type&&(subevents=event[1]._tokenizer.events,otherIndex=0,otherIndex<subevents.length&&"lineEndingBlank"===subevents[otherIndex][1].type&&(otherIndex+=2),otherIndex<subevents.length&&"content"===subevents[otherIndex][1].type))for(;++otherIndex<subevents.length&&"content"!==subevents[otherIndex][1].type;)"chunkText"===subevents[otherIndex][1].type&&(subevents[otherIndex][1]._isInFirstContentOfListItem=!0,otherIndex++);if("enter"===event[0])event[1].contentType&&(Object.assign(jumps,subcontent(events,index)),index=jumps[index],more=!0);else if(event[1]._container){for(otherIndex=index,lineIndex=void 0;otherIndex--&&(otherEvent=events[otherIndex],"lineEnding"===otherEvent[1].type||"lineEndingBlank"===otherEvent[1].type);)"enter"===otherEvent[0]&&(lineIndex&&(events[lineIndex][1].type="lineEndingBlank"),otherEvent[1].type="lineEnding",lineIndex=otherIndex);lineIndex&&(event[1].end=Object.assign({},events[lineIndex][1].start),parameters=events.slice(lineIndex,index),parameters.unshift(event),splice(events,lineIndex,index-lineIndex+1,parameters))}}return!more}function subcontent(events,eventIndex){const token=events[eventIndex][1],context=events[eventIndex][2];let startPosition=eventIndex-1;const startPositions=[],tokenizer=token._tokenizer||context.parser[token.contentType](token.start),childEvents=tokenizer.events,jumps=[],gaps={};let stream,previous,index=-1,current=token,adjust=0,start=0;const breaks=[start];for(;current;){for(;events[++startPosition][1]!==current;);startPositions.push(startPosition),current._tokenizer||(stream=context.sliceStream(current),current.next||stream.push(null),previous&&tokenizer.defineSkip(current.start),current._isInFirstContentOfListItem&&(tokenizer._gfmTasklistFirstContentOfListItem=!0),tokenizer.write(stream),current._isInFirstContentOfListItem&&(tokenizer._gfmTasklistFirstContentOfListItem=void 0)),previous=current,current=current.next}for(current=token;++index<childEvents.length;)"exit"===childEvents[index][0]&&"enter"===childEvents[index-1][0]&&childEvents[index][1].type===childEvents[index-1][1].type&&childEvents[index][1].start.line!==childEvents[index][1].end.line&&(start=index+1,breaks.push(start),current._tokenizer=void 0,current.previous=void 0,current=current.next);for(tokenizer.events=[],current?(current._tokenizer=void 0,current.previous=void 0):breaks.pop(),index=breaks.length;index--;){const slice=childEvents.slice(breaks[index],breaks[index+1]),start=startPositions.pop();jumps.unshift([start,start+slice.length-1]),splice(events,start,2,slice)}for(index=-1;++index<jumps.length;)gaps[adjust+jumps[index][0]]=adjust+jumps[index][1],adjust+=jumps[index][1]-jumps[index][0]-1;return gaps}const content_content={tokenize:function tokenizeContent(effects,ok){let previous;return function chunkStart(code){return effects.enter("content"),previous=effects.enter("chunkContent",{contentType:"content"}),chunkInside(code)};function chunkInside(code){return null===code?contentEnd(code):(0,micromark_util_character.Ch)(code)?effects.check(continuationConstruct,contentContinue,contentEnd)(code):(effects.consume(code),chunkInside)}function contentEnd(code){return effects.exit("chunkContent"),effects.exit("content"),ok(code)}function contentContinue(code){return effects.consume(code),effects.exit("chunkContent"),previous.next=effects.enter("chunkContent",{contentType:"content",previous}),previous=previous.next,chunkInside}},resolve:function resolveContent(events){return subtokenize(events),events}},continuationConstruct={tokenize:function tokenizeContinuation(effects,ok,nok){const self=this;return function startLookahead(code){return effects.exit("chunkContent"),effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),(0,micromark_factory_space.f)(effects,prefixed,"linePrefix")};function prefixed(code){if(null===code||(0,micromark_util_character.Ch)(code))return nok(code);const tail=self.events[self.events.length-1];return!self.parser.constructs.disable.null.includes("codeIndented")&&tail&&"linePrefix"===tail[1].type&&tail[2].sliceSerialize(tail[1],!0).length>=4?ok(code):effects.interrupt(self.parser.constructs.flow,nok,ok)(code)}},partial:!0};const flow={tokenize:function initializeFlow(effects){const self=this,initial=effects.attempt(blankLine,(function atBlankEnding(code){if(null===code)return void effects.consume(code);return effects.enter("lineEndingBlank"),effects.consume(code),effects.exit("lineEndingBlank"),self.currentConstruct=void 0,initial}),effects.attempt(this.parser.constructs.flowInitial,afterConstruct,(0,micromark_factory_space.f)(effects,effects.attempt(this.parser.constructs.flow,afterConstruct,effects.attempt(content_content,afterConstruct)),"linePrefix")));return initial;function afterConstruct(code){if(null!==code)return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),self.currentConstruct=void 0,initial;effects.consume(code)}}};const resolver={resolveAll:createResolver()},string=initializeFactory("string"),text_text=initializeFactory("text");function initializeFactory(field){return{tokenize:function initializeText(effects){const self=this,constructs=this.parser.constructs[field],text=effects.attempt(constructs,start,notText);return start;function start(code){return atBreak(code)?text(code):notText(code)}function notText(code){if(null!==code)return effects.enter("data"),effects.consume(code),data;effects.consume(code)}function data(code){return atBreak(code)?(effects.exit("data"),text(code)):(effects.consume(code),data)}function atBreak(code){if(null===code)return!0;const list=constructs[code];let index=-1;if(list)for(;++index<list.length;){const item=list[index];if(!item.previous||item.previous.call(self,self.previous))return!0}return!1}},resolveAll:createResolver("text"===field?resolveAllLineSuffixes:void 0)}}function createResolver(extraResolver){return function resolveAllText(events,context){let enter,index=-1;for(;++index<=events.length;)void 0===enter?events[index]&&"data"===events[index][1].type&&(enter=index,index++):events[index]&&"data"===events[index][1].type||(index!==enter+2&&(events[enter][1].end=events[index-1][1].end,events.splice(enter+2,index-enter-2),index=enter+2),enter=void 0);return extraResolver?extraResolver(events,context):events}}function resolveAllLineSuffixes(events,context){let eventIndex=0;for(;++eventIndex<=events.length;)if((eventIndex===events.length||"lineEnding"===events[eventIndex][1].type)&&"data"===events[eventIndex-1][1].type){const data=events[eventIndex-1][1],chunks=context.sliceStream(data);let tabs,index=chunks.length,bufferIndex=-1,size=0;for(;index--;){const chunk=chunks[index];if("string"==typeof chunk){for(bufferIndex=chunk.length;32===chunk.charCodeAt(bufferIndex-1);)size++,bufferIndex--;if(bufferIndex)break;bufferIndex=-1}else if(-2===chunk)tabs=!0,size++;else if(-1!==chunk){index++;break}}if(size){const token={type:eventIndex===events.length||tabs||size<2?"lineSuffix":"hardBreakTrailing",start:{line:data.end.line,column:data.end.column-size,offset:data.end.offset-size,_index:data.start._index+index,_bufferIndex:index?bufferIndex:data.start._bufferIndex+bufferIndex},end:Object.assign({},data.end)};data.end=Object.assign({},token.start),data.start.offset===data.end.offset?Object.assign(data,token):(events.splice(eventIndex,0,["enter",token,context],["exit",token,context]),eventIndex+=2)}eventIndex++}return events}function resolveAll(constructs,events,context){const called=[];let index=-1;for(;++index<constructs.length;){const resolve=constructs[index].resolveAll;resolve&&!called.includes(resolve)&&(events=resolve(events,context),called.push(resolve))}return events}function createTokenizer(parser,initialize,from){let point=Object.assign(from?Object.assign({},from):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const columnStart={},resolveAllConstructs=[];let chunks=[],stack=[],consumed=!0;const effects={consume:function consume(code){(0,micromark_util_character.Ch)(code)?(point.line++,point.column=1,point.offset+=-3===code?2:1,accountForPotentialSkip()):-1!==code&&(point.column++,point.offset++);point._bufferIndex<0?point._index++:(point._bufferIndex++,point._bufferIndex===chunks[point._index].length&&(point._bufferIndex=-1,point._index++));context.previous=code,consumed=!0},enter:function enter(type,fields){const token=fields||{};return token.type=type,token.start=now(),context.events.push(["enter",token,context]),stack.push(token),token},exit:function exit(type){const token=stack.pop();return token.end=now(),context.events.push(["exit",token,context]),token},attempt:constructFactory((function onsuccessfulconstruct(construct,info){addResult(construct,info.from)})),check:constructFactory(onsuccessfulcheck),interrupt:constructFactory(onsuccessfulcheck,{interrupt:!0})},context={previous:null,code:null,containerState:{},events:[],parser,sliceStream,sliceSerialize:function sliceSerialize(token,expandTabs){return function serializeChunks(chunks,expandTabs){let index=-1;const result=[];let atTab;for(;++index<chunks.length;){const chunk=chunks[index];let value;if("string"==typeof chunk)value=chunk;else switch(chunk){case-5:value="\r";break;case-4:value="\n";break;case-3:value="\r\n";break;case-2:value=expandTabs?" ":"\t";break;case-1:if(!expandTabs&&atTab)continue;value=" ";break;default:value=String.fromCharCode(chunk)}atTab=-2===chunk,result.push(value)}return result.join("")}(sliceStream(token),expandTabs)},now,defineSkip:function defineSkip(value){columnStart[value.line]=value.column,accountForPotentialSkip()},write:function write(slice){if(chunks=push(chunks,slice),main(),null!==chunks[chunks.length-1])return[];return addResult(initialize,0),context.events=resolveAll(resolveAllConstructs,context.events,context),context.events}};let expectedCode,state=initialize.tokenize.call(context,effects);return initialize.resolveAll&&resolveAllConstructs.push(initialize),context;function sliceStream(token){return function sliceChunks(chunks,token){const startIndex=token.start._index,startBufferIndex=token.start._bufferIndex,endIndex=token.end._index,endBufferIndex=token.end._bufferIndex;let view;if(startIndex===endIndex)view=[chunks[startIndex].slice(startBufferIndex,endBufferIndex)];else{if(view=chunks.slice(startIndex,endIndex),startBufferIndex>-1){const head=view[0];"string"==typeof head?view[0]=head.slice(startBufferIndex):view.shift()}endBufferIndex>0&&view.push(chunks[endIndex].slice(0,endBufferIndex))}return view}(chunks,token)}function now(){const{line,column,offset,_index,_bufferIndex}=point;return{line,column,offset,_index,_bufferIndex}}function main(){let chunkIndex;for(;point._index<chunks.length;){const chunk=chunks[point._index];if("string"==typeof chunk)for(chunkIndex=point._index,point._bufferIndex<0&&(point._bufferIndex=0);point._index===chunkIndex&&point._bufferIndex<chunk.length;)go(chunk.charCodeAt(point._bufferIndex));else go(chunk)}}function go(code){consumed=void 0,expectedCode=code,state=state(code)}function onsuccessfulcheck(_,info){info.restore()}function constructFactory(onreturn,fields){return function hook(constructs,returnState,bogusState){let listOfConstructs,constructIndex,currentConstruct,info;return Array.isArray(constructs)?handleListOfConstructs(constructs):"tokenize"in constructs?handleListOfConstructs([constructs]):function handleMapOfConstructs(map){return start;function start(code){const def=null!==code&&map[code],all=null!==code&&map.null;return handleListOfConstructs([...Array.isArray(def)?def:def?[def]:[],...Array.isArray(all)?all:all?[all]:[]])(code)}}(constructs);function handleListOfConstructs(list){return listOfConstructs=list,constructIndex=0,0===list.length?bogusState:handleConstruct(list[constructIndex])}function handleConstruct(construct){return function start(code){info=function store(){const startPoint=now(),startPrevious=context.previous,startCurrentConstruct=context.currentConstruct,startEventsIndex=context.events.length,startStack=Array.from(stack);return{restore,from:startEventsIndex};function restore(){point=startPoint,context.previous=startPrevious,context.currentConstruct=startCurrentConstruct,context.events.length=startEventsIndex,stack=startStack,accountForPotentialSkip()}}(),currentConstruct=construct,construct.partial||(context.currentConstruct=construct);if(construct.name&&context.parser.constructs.disable.null.includes(construct.name))return nok(code);return construct.tokenize.call(fields?Object.assign(Object.create(context),fields):context,effects,ok,nok)(code)}}function ok(code){return consumed=!0,onreturn(currentConstruct,info),returnState}function nok(code){return consumed=!0,info.restore(),++constructIndex<listOfConstructs.length?handleConstruct(listOfConstructs[constructIndex]):bogusState}}}function addResult(construct,from){construct.resolveAll&&!resolveAllConstructs.includes(construct)&&resolveAllConstructs.push(construct),construct.resolve&&splice(context.events,from,context.events.length-from,construct.resolve(context.events.slice(from),context)),construct.resolveTo&&(context.events=construct.resolveTo(context.events,context))}function accountForPotentialSkip(){point.line in columnStart&&point.column<2&&(point.column=columnStart[point.line],point.offset+=columnStart[point.line]-1)}}const thematicBreak={name:"thematicBreak",tokenize:function tokenizeThematicBreak(effects,ok,nok){let marker,size=0;return function start(code){return effects.enter("thematicBreak"),function before(code){return marker=code,atBreak(code)}(code)};function atBreak(code){return code===marker?(effects.enter("thematicBreakSequence"),sequence(code)):size>=3&&(null===code||(0,micromark_util_character.Ch)(code))?(effects.exit("thematicBreak"),ok(code)):nok(code)}function sequence(code){return code===marker?(effects.consume(code),size++,sequence):(effects.exit("thematicBreakSequence"),(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,atBreak,"whitespace")(code):atBreak(code))}}};const list={name:"list",tokenize:function tokenizeListStart(effects,ok,nok){const self=this,tail=self.events[self.events.length-1];let initialSize=tail&&"linePrefix"===tail[1].type?tail[2].sliceSerialize(tail[1],!0).length:0,size=0;return function start(code){const kind=self.containerState.type||(42===code||43===code||45===code?"listUnordered":"listOrdered");if("listUnordered"===kind?!self.containerState.marker||code===self.containerState.marker:(0,micromark_util_character.pY)(code)){if(self.containerState.type||(self.containerState.type=kind,effects.enter(kind,{_container:!0})),"listUnordered"===kind)return effects.enter("listItemPrefix"),42===code||45===code?effects.check(thematicBreak,nok,atMarker)(code):atMarker(code);if(!self.interrupt||49===code)return effects.enter("listItemPrefix"),effects.enter("listItemValue"),inside(code)}return nok(code)};function inside(code){return(0,micromark_util_character.pY)(code)&&++size<10?(effects.consume(code),inside):(!self.interrupt||size<2)&&(self.containerState.marker?code===self.containerState.marker:41===code||46===code)?(effects.exit("listItemValue"),atMarker(code)):nok(code)}function atMarker(code){return effects.enter("listItemMarker"),effects.consume(code),effects.exit("listItemMarker"),self.containerState.marker=self.containerState.marker||code,effects.check(blankLine,self.interrupt?nok:onBlank,effects.attempt(listItemPrefixWhitespaceConstruct,endOfPrefix,otherPrefix))}function onBlank(code){return self.containerState.initialBlankLine=!0,initialSize++,endOfPrefix(code)}function otherPrefix(code){return(0,micromark_util_character.xz)(code)?(effects.enter("listItemPrefixWhitespace"),effects.consume(code),effects.exit("listItemPrefixWhitespace"),endOfPrefix):nok(code)}function endOfPrefix(code){return self.containerState.size=initialSize+self.sliceSerialize(effects.exit("listItemPrefix"),!0).length,ok(code)}},continuation:{tokenize:function tokenizeListContinuation(effects,ok,nok){const self=this;return self.containerState._closeFlow=void 0,effects.check(blankLine,(function onBlank(code){return self.containerState.furtherBlankLines=self.containerState.furtherBlankLines||self.containerState.initialBlankLine,(0,micromark_factory_space.f)(effects,ok,"listItemIndent",self.containerState.size+1)(code)}),(function notBlank(code){if(self.containerState.furtherBlankLines||!(0,micromark_util_character.xz)(code))return self.containerState.furtherBlankLines=void 0,self.containerState.initialBlankLine=void 0,notInCurrentItem(code);return self.containerState.furtherBlankLines=void 0,self.containerState.initialBlankLine=void 0,effects.attempt(indentConstruct,ok,notInCurrentItem)(code)}));function notInCurrentItem(code){return self.containerState._closeFlow=!0,self.interrupt=void 0,(0,micromark_factory_space.f)(effects,effects.attempt(list,ok,nok),"linePrefix",self.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(code)}}},exit:function tokenizeListEnd(effects){effects.exit(this.containerState.type)}},listItemPrefixWhitespaceConstruct={tokenize:function tokenizeListItemPrefixWhitespace(effects,ok,nok){const self=this;return(0,micromark_factory_space.f)(effects,(function afterPrefix(code){const tail=self.events[self.events.length-1];return!(0,micromark_util_character.xz)(code)&&tail&&"listItemPrefixWhitespace"===tail[1].type?ok(code):nok(code)}),"listItemPrefixWhitespace",self.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},indentConstruct={tokenize:function tokenizeIndent(effects,ok,nok){const self=this;return(0,micromark_factory_space.f)(effects,(function afterPrefix(code){const tail=self.events[self.events.length-1];return tail&&"listItemIndent"===tail[1].type&&tail[2].sliceSerialize(tail[1],!0).length===self.containerState.size?ok(code):nok(code)}),"listItemIndent",self.containerState.size+1)},partial:!0};const blockQuote={name:"blockQuote",tokenize:function tokenizeBlockQuoteStart(effects,ok,nok){const self=this;return function start(code){if(62===code){const state=self.containerState;return state.open||(effects.enter("blockQuote",{_container:!0}),state.open=!0),effects.enter("blockQuotePrefix"),effects.enter("blockQuoteMarker"),effects.consume(code),effects.exit("blockQuoteMarker"),after}return nok(code)};function after(code){return(0,micromark_util_character.xz)(code)?(effects.enter("blockQuotePrefixWhitespace"),effects.consume(code),effects.exit("blockQuotePrefixWhitespace"),effects.exit("blockQuotePrefix"),ok):(effects.exit("blockQuotePrefix"),ok(code))}},continuation:{tokenize:function tokenizeBlockQuoteContinuation(effects,ok,nok){const self=this;return function contStart(code){if((0,micromark_util_character.xz)(code))return(0,micromark_factory_space.f)(effects,contBefore,"linePrefix",self.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(code);return contBefore(code)};function contBefore(code){return effects.attempt(blockQuote,ok,nok)(code)}}},exit:function exit(effects){effects.exit("blockQuote")}};function factoryDestination(effects,ok,nok,type,literalType,literalMarkerType,rawType,stringType,max){const limit=max||Number.POSITIVE_INFINITY;let balance=0;return function start(code){if(60===code)return effects.enter(type),effects.enter(literalType),effects.enter(literalMarkerType),effects.consume(code),effects.exit(literalMarkerType),enclosedBefore;if(null===code||32===code||41===code||(0,micromark_util_character.Av)(code))return nok(code);return effects.enter(type),effects.enter(rawType),effects.enter(stringType),effects.enter("chunkString",{contentType:"string"}),raw(code)};function enclosedBefore(code){return 62===code?(effects.enter(literalMarkerType),effects.consume(code),effects.exit(literalMarkerType),effects.exit(literalType),effects.exit(type),ok):(effects.enter(stringType),effects.enter("chunkString",{contentType:"string"}),enclosed(code))}function enclosed(code){return 62===code?(effects.exit("chunkString"),effects.exit(stringType),enclosedBefore(code)):null===code||60===code||(0,micromark_util_character.Ch)(code)?nok(code):(effects.consume(code),92===code?enclosedEscape:enclosed)}function enclosedEscape(code){return 60===code||62===code||92===code?(effects.consume(code),enclosed):enclosed(code)}function raw(code){return balance||null!==code&&41!==code&&!(0,micromark_util_character.z3)(code)?balance<limit&&40===code?(effects.consume(code),balance++,raw):41===code?(effects.consume(code),balance--,raw):null===code||32===code||40===code||(0,micromark_util_character.Av)(code)?nok(code):(effects.consume(code),92===code?rawEscape:raw):(effects.exit("chunkString"),effects.exit(stringType),effects.exit(rawType),effects.exit(type),ok(code))}function rawEscape(code){return 40===code||41===code||92===code?(effects.consume(code),raw):raw(code)}}function factoryLabel(effects,ok,nok,type,markerType,stringType){const self=this;let seen,size=0;return function start(code){return effects.enter(type),effects.enter(markerType),effects.consume(code),effects.exit(markerType),effects.enter(stringType),atBreak};function atBreak(code){return size>999||null===code||91===code||93===code&&!seen||94===code&&!size&&"_hiddenFootnoteSupport"in self.parser.constructs?nok(code):93===code?(effects.exit(stringType),effects.enter(markerType),effects.consume(code),effects.exit(markerType),effects.exit(type),ok):(0,micromark_util_character.Ch)(code)?(effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),atBreak):(effects.enter("chunkString",{contentType:"string"}),labelInside(code))}function labelInside(code){return null===code||91===code||93===code||(0,micromark_util_character.Ch)(code)||size++>999?(effects.exit("chunkString"),atBreak(code)):(effects.consume(code),seen||(seen=!(0,micromark_util_character.xz)(code)),92===code?labelEscape:labelInside)}function labelEscape(code){return 91===code||92===code||93===code?(effects.consume(code),size++,labelInside):labelInside(code)}}function factoryTitle(effects,ok,nok,type,markerType,stringType){let marker;return function start(code){if(34===code||39===code||40===code)return effects.enter(type),effects.enter(markerType),effects.consume(code),effects.exit(markerType),marker=40===code?41:code,begin;return nok(code)};function begin(code){return code===marker?(effects.enter(markerType),effects.consume(code),effects.exit(markerType),effects.exit(type),ok):(effects.enter(stringType),atBreak(code))}function atBreak(code){return code===marker?(effects.exit(stringType),begin(marker)):null===code?nok(code):(0,micromark_util_character.Ch)(code)?(effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),(0,micromark_factory_space.f)(effects,atBreak,"linePrefix")):(effects.enter("chunkString",{contentType:"string"}),inside(code))}function inside(code){return code===marker||null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("chunkString"),atBreak(code)):(effects.consume(code),92===code?escape:inside)}function escape(code){return code===marker||92===code?(effects.consume(code),inside):inside(code)}}var micromark_factory_whitespace=__webpack_require__("./node_modules/micromark-factory-whitespace/index.js");function normalizeIdentifier(value){return value.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const definition={name:"definition",tokenize:function tokenizeDefinition(effects,ok,nok){const self=this;let identifier;return function start(code){return effects.enter("definition"),function before(code){return factoryLabel.call(self,effects,labelAfter,nok,"definitionLabel","definitionLabelMarker","definitionLabelString")(code)}(code)};function labelAfter(code){return identifier=normalizeIdentifier(self.sliceSerialize(self.events[self.events.length-1][1]).slice(1,-1)),58===code?(effects.enter("definitionMarker"),effects.consume(code),effects.exit("definitionMarker"),markerAfter):nok(code)}function markerAfter(code){return(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,destinationBefore)(code):destinationBefore(code)}function destinationBefore(code){return factoryDestination(effects,destinationAfter,nok,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(code)}function destinationAfter(code){return effects.attempt(titleBefore,after,after)(code)}function after(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,afterWhitespace,"whitespace")(code):afterWhitespace(code)}function afterWhitespace(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("definition"),self.parser.defined.push(identifier),ok(code)):nok(code)}}},titleBefore={tokenize:function tokenizeTitleBefore(effects,ok,nok){return function titleBefore(code){return(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,beforeMarker)(code):nok(code)};function beforeMarker(code){return factoryTitle(effects,titleAfter,nok,"definitionTitle","definitionTitleMarker","definitionTitleString")(code)}function titleAfter(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,titleAfterOptionalWhitespace,"whitespace")(code):titleAfterOptionalWhitespace(code)}function titleAfterOptionalWhitespace(code){return null===code||(0,micromark_util_character.Ch)(code)?ok(code):nok(code)}},partial:!0};const codeIndented={name:"codeIndented",tokenize:function tokenizeCodeIndented(effects,ok,nok){const self=this;return function start(code){return effects.enter("codeIndented"),(0,micromark_factory_space.f)(effects,afterPrefix,"linePrefix",5)(code)};function afterPrefix(code){const tail=self.events[self.events.length-1];return tail&&"linePrefix"===tail[1].type&&tail[2].sliceSerialize(tail[1],!0).length>=4?atBreak(code):nok(code)}function atBreak(code){return null===code?after(code):(0,micromark_util_character.Ch)(code)?effects.attempt(furtherStart,atBreak,after)(code):(effects.enter("codeFlowValue"),inside(code))}function inside(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("codeFlowValue"),atBreak(code)):(effects.consume(code),inside)}function after(code){return effects.exit("codeIndented"),ok(code)}}},furtherStart={tokenize:function tokenizeFurtherStart(effects,ok,nok){const self=this;return furtherStart;function furtherStart(code){return self.parser.lazy[self.now().line]?nok(code):(0,micromark_util_character.Ch)(code)?(effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),furtherStart):(0,micromark_factory_space.f)(effects,afterPrefix,"linePrefix",5)(code)}function afterPrefix(code){const tail=self.events[self.events.length-1];return tail&&"linePrefix"===tail[1].type&&tail[2].sliceSerialize(tail[1],!0).length>=4?ok(code):(0,micromark_util_character.Ch)(code)?furtherStart(code):nok(code)}},partial:!0};const headingAtx={name:"headingAtx",tokenize:function tokenizeHeadingAtx(effects,ok,nok){let size=0;return function start(code){return effects.enter("atxHeading"),function before(code){return effects.enter("atxHeadingSequence"),sequenceOpen(code)}(code)};function sequenceOpen(code){return 35===code&&size++<6?(effects.consume(code),sequenceOpen):null===code||(0,micromark_util_character.z3)(code)?(effects.exit("atxHeadingSequence"),atBreak(code)):nok(code)}function atBreak(code){return 35===code?(effects.enter("atxHeadingSequence"),sequenceFurther(code)):null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("atxHeading"),ok(code)):(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,atBreak,"whitespace")(code):(effects.enter("atxHeadingText"),data(code))}function sequenceFurther(code){return 35===code?(effects.consume(code),sequenceFurther):(effects.exit("atxHeadingSequence"),atBreak(code))}function data(code){return null===code||35===code||(0,micromark_util_character.z3)(code)?(effects.exit("atxHeadingText"),atBreak(code)):(effects.consume(code),data)}},resolve:function resolveHeadingAtx(events,context){let content,text,contentEnd=events.length-2,contentStart=3;"whitespace"===events[contentStart][1].type&&(contentStart+=2);contentEnd-2>contentStart&&"whitespace"===events[contentEnd][1].type&&(contentEnd-=2);"atxHeadingSequence"===events[contentEnd][1].type&&(contentStart===contentEnd-1||contentEnd-4>contentStart&&"whitespace"===events[contentEnd-2][1].type)&&(contentEnd-=contentStart+1===contentEnd?2:4);contentEnd>contentStart&&(content={type:"atxHeadingText",start:events[contentStart][1].start,end:events[contentEnd][1].end},text={type:"chunkText",start:events[contentStart][1].start,end:events[contentEnd][1].end,contentType:"text"},splice(events,contentStart,contentEnd-contentStart+1,[["enter",content,context],["enter",text,context],["exit",text,context],["exit",content,context]]));return events}};const setextUnderline={name:"setextUnderline",tokenize:function tokenizeSetextUnderline(effects,ok,nok){const self=this;let marker;return function start(code){let paragraph,index=self.events.length;for(;index--;)if("lineEnding"!==self.events[index][1].type&&"linePrefix"!==self.events[index][1].type&&"content"!==self.events[index][1].type){paragraph="paragraph"===self.events[index][1].type;break}if(!self.parser.lazy[self.now().line]&&(self.interrupt||paragraph))return effects.enter("setextHeadingLine"),marker=code,function before(code){return effects.enter("setextHeadingLineSequence"),inside(code)}(code);return nok(code)};function inside(code){return code===marker?(effects.consume(code),inside):(effects.exit("setextHeadingLineSequence"),(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,after,"lineSuffix")(code):after(code))}function after(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("setextHeadingLine"),ok(code)):nok(code)}},resolveTo:function resolveToSetextUnderline(events,context){let content,text,definition,index=events.length;for(;index--;)if("enter"===events[index][0]){if("content"===events[index][1].type){content=index;break}"paragraph"===events[index][1].type&&(text=index)}else"content"===events[index][1].type&&events.splice(index,1),definition||"definition"!==events[index][1].type||(definition=index);const heading={type:"setextHeading",start:Object.assign({},events[text][1].start),end:Object.assign({},events[events.length-1][1].end)};events[text][1].type="setextHeadingText",definition?(events.splice(text,0,["enter",heading,context]),events.splice(definition+1,0,["exit",events[content][1],context]),events[content][1].end=Object.assign({},events[definition][1].end)):events[content][1]=heading;return events.push(["exit",heading,context]),events}};const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:function tokenizeHtmlFlow(effects,ok,nok){const self=this;let marker,closingTag,buffer,index,markerB;return function start(code){return function before(code){return effects.enter("htmlFlow"),effects.enter("htmlFlowData"),effects.consume(code),open}(code)};function open(code){return 33===code?(effects.consume(code),declarationOpen):47===code?(effects.consume(code),closingTag=!0,tagCloseStart):63===code?(effects.consume(code),marker=3,self.interrupt?ok:continuationDeclarationInside):(0,micromark_util_character.jv)(code)?(effects.consume(code),buffer=String.fromCharCode(code),tagName):nok(code)}function declarationOpen(code){return 45===code?(effects.consume(code),marker=2,commentOpenInside):91===code?(effects.consume(code),marker=5,index=0,cdataOpenInside):(0,micromark_util_character.jv)(code)?(effects.consume(code),marker=4,self.interrupt?ok:continuationDeclarationInside):nok(code)}function commentOpenInside(code){return 45===code?(effects.consume(code),self.interrupt?ok:continuationDeclarationInside):nok(code)}function cdataOpenInside(code){return code==="CDATA[".charCodeAt(index++)?(effects.consume(code),6===index?self.interrupt?ok:continuation:cdataOpenInside):nok(code)}function tagCloseStart(code){return(0,micromark_util_character.jv)(code)?(effects.consume(code),buffer=String.fromCharCode(code),tagName):nok(code)}function tagName(code){if(null===code||47===code||62===code||(0,micromark_util_character.z3)(code)){const slash=47===code,name=buffer.toLowerCase();return slash||closingTag||!htmlRawNames.includes(name)?htmlBlockNames.includes(buffer.toLowerCase())?(marker=6,slash?(effects.consume(code),basicSelfClosing):self.interrupt?ok(code):continuation(code)):(marker=7,self.interrupt&&!self.parser.lazy[self.now().line]?nok(code):closingTag?completeClosingTagAfter(code):completeAttributeNameBefore(code)):(marker=1,self.interrupt?ok(code):continuation(code))}return 45===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),buffer+=String.fromCharCode(code),tagName):nok(code)}function basicSelfClosing(code){return 62===code?(effects.consume(code),self.interrupt?ok:continuation):nok(code)}function completeClosingTagAfter(code){return(0,micromark_util_character.xz)(code)?(effects.consume(code),completeClosingTagAfter):completeEnd(code)}function completeAttributeNameBefore(code){return 47===code?(effects.consume(code),completeEnd):58===code||95===code||(0,micromark_util_character.jv)(code)?(effects.consume(code),completeAttributeName):(0,micromark_util_character.xz)(code)?(effects.consume(code),completeAttributeNameBefore):completeEnd(code)}function completeAttributeName(code){return 45===code||46===code||58===code||95===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),completeAttributeName):completeAttributeNameAfter(code)}function completeAttributeNameAfter(code){return 61===code?(effects.consume(code),completeAttributeValueBefore):(0,micromark_util_character.xz)(code)?(effects.consume(code),completeAttributeNameAfter):completeAttributeNameBefore(code)}function completeAttributeValueBefore(code){return null===code||60===code||61===code||62===code||96===code?nok(code):34===code||39===code?(effects.consume(code),markerB=code,completeAttributeValueQuoted):(0,micromark_util_character.xz)(code)?(effects.consume(code),completeAttributeValueBefore):completeAttributeValueUnquoted(code)}function completeAttributeValueQuoted(code){return code===markerB?(effects.consume(code),markerB=null,completeAttributeValueQuotedAfter):null===code||(0,micromark_util_character.Ch)(code)?nok(code):(effects.consume(code),completeAttributeValueQuoted)}function completeAttributeValueUnquoted(code){return null===code||34===code||39===code||47===code||60===code||61===code||62===code||96===code||(0,micromark_util_character.z3)(code)?completeAttributeNameAfter(code):(effects.consume(code),completeAttributeValueUnquoted)}function completeAttributeValueQuotedAfter(code){return 47===code||62===code||(0,micromark_util_character.xz)(code)?completeAttributeNameBefore(code):nok(code)}function completeEnd(code){return 62===code?(effects.consume(code),completeAfter):nok(code)}function completeAfter(code){return null===code||(0,micromark_util_character.Ch)(code)?continuation(code):(0,micromark_util_character.xz)(code)?(effects.consume(code),completeAfter):nok(code)}function continuation(code){return 45===code&&2===marker?(effects.consume(code),continuationCommentInside):60===code&&1===marker?(effects.consume(code),continuationRawTagOpen):62===code&&4===marker?(effects.consume(code),continuationClose):63===code&&3===marker?(effects.consume(code),continuationDeclarationInside):93===code&&5===marker?(effects.consume(code),continuationCdataInside):!(0,micromark_util_character.Ch)(code)||6!==marker&&7!==marker?null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("htmlFlowData"),continuationStart(code)):(effects.consume(code),continuation):(effects.exit("htmlFlowData"),effects.check(blankLineBefore,continuationAfter,continuationStart)(code))}function continuationStart(code){return effects.check(nonLazyContinuationStart,continuationStartNonLazy,continuationAfter)(code)}function continuationStartNonLazy(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),continuationBefore}function continuationBefore(code){return null===code||(0,micromark_util_character.Ch)(code)?continuationStart(code):(effects.enter("htmlFlowData"),continuation(code))}function continuationCommentInside(code){return 45===code?(effects.consume(code),continuationDeclarationInside):continuation(code)}function continuationRawTagOpen(code){return 47===code?(effects.consume(code),buffer="",continuationRawEndTag):continuation(code)}function continuationRawEndTag(code){if(62===code){const name=buffer.toLowerCase();return htmlRawNames.includes(name)?(effects.consume(code),continuationClose):continuation(code)}return(0,micromark_util_character.jv)(code)&&buffer.length<8?(effects.consume(code),buffer+=String.fromCharCode(code),continuationRawEndTag):continuation(code)}function continuationCdataInside(code){return 93===code?(effects.consume(code),continuationDeclarationInside):continuation(code)}function continuationDeclarationInside(code){return 62===code?(effects.consume(code),continuationClose):45===code&&2===marker?(effects.consume(code),continuationDeclarationInside):continuation(code)}function continuationClose(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("htmlFlowData"),continuationAfter(code)):(effects.consume(code),continuationClose)}function continuationAfter(code){return effects.exit("htmlFlow"),ok(code)}},resolveTo:function resolveToHtmlFlow(events){let index=events.length;for(;index--&&("enter"!==events[index][0]||"htmlFlow"!==events[index][1].type););index>1&&"linePrefix"===events[index-2][1].type&&(events[index][1].start=events[index-2][1].start,events[index+1][1].start=events[index-2][1].start,events.splice(index-2,2));return events},concrete:!0},blankLineBefore={tokenize:function tokenizeBlankLineBefore(effects,ok,nok){return function start(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),effects.attempt(blankLine,ok,nok)}},partial:!0},nonLazyContinuationStart={tokenize:function tokenizeNonLazyContinuationStart(effects,ok,nok){const self=this;return function start(code){if((0,micromark_util_character.Ch)(code))return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),after;return nok(code)};function after(code){return self.parser.lazy[self.now().line]?nok(code):ok(code)}},partial:!0};const nonLazyContinuation={tokenize:function tokenizeNonLazyContinuation(effects,ok,nok){const self=this;return function start(code){if(null===code)return nok(code);return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),lineStart};function lineStart(code){return self.parser.lazy[self.now().line]?nok(code):ok(code)}},partial:!0},codeFenced={name:"codeFenced",tokenize:function tokenizeCodeFenced(effects,ok,nok){const self=this,closeStart={tokenize:function tokenizeCloseStart(effects,ok,nok){let size=0;return startBefore;function startBefore(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),start}function start(code){return effects.enter("codeFencedFence"),(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,beforeSequenceClose,"linePrefix",self.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(code):beforeSequenceClose(code)}function beforeSequenceClose(code){return code===marker?(effects.enter("codeFencedFenceSequence"),sequenceClose(code)):nok(code)}function sequenceClose(code){return code===marker?(size++,effects.consume(code),sequenceClose):size>=sizeOpen?(effects.exit("codeFencedFenceSequence"),(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,sequenceCloseAfter,"whitespace")(code):sequenceCloseAfter(code)):nok(code)}function sequenceCloseAfter(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("codeFencedFence"),ok(code)):nok(code)}},partial:!0};let marker,initialPrefix=0,sizeOpen=0;return function start(code){return function beforeSequenceOpen(code){const tail=self.events[self.events.length-1];return initialPrefix=tail&&"linePrefix"===tail[1].type?tail[2].sliceSerialize(tail[1],!0).length:0,marker=code,effects.enter("codeFenced"),effects.enter("codeFencedFence"),effects.enter("codeFencedFenceSequence"),sequenceOpen(code)}(code)};function sequenceOpen(code){return code===marker?(sizeOpen++,effects.consume(code),sequenceOpen):sizeOpen<3?nok(code):(effects.exit("codeFencedFenceSequence"),(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,infoBefore,"whitespace")(code):infoBefore(code))}function infoBefore(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("codeFencedFence"),self.interrupt?ok(code):effects.check(nonLazyContinuation,atNonLazyBreak,after)(code)):(effects.enter("codeFencedFenceInfo"),effects.enter("chunkString",{contentType:"string"}),info(code))}function info(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("chunkString"),effects.exit("codeFencedFenceInfo"),infoBefore(code)):(0,micromark_util_character.xz)(code)?(effects.exit("chunkString"),effects.exit("codeFencedFenceInfo"),(0,micromark_factory_space.f)(effects,metaBefore,"whitespace")(code)):96===code&&code===marker?nok(code):(effects.consume(code),info)}function metaBefore(code){return null===code||(0,micromark_util_character.Ch)(code)?infoBefore(code):(effects.enter("codeFencedFenceMeta"),effects.enter("chunkString",{contentType:"string"}),meta(code))}function meta(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("chunkString"),effects.exit("codeFencedFenceMeta"),infoBefore(code)):96===code&&code===marker?nok(code):(effects.consume(code),meta)}function atNonLazyBreak(code){return effects.attempt(closeStart,after,contentBefore)(code)}function contentBefore(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),contentStart}function contentStart(code){return initialPrefix>0&&(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,beforeContentChunk,"linePrefix",initialPrefix+1)(code):beforeContentChunk(code)}function beforeContentChunk(code){return null===code||(0,micromark_util_character.Ch)(code)?effects.check(nonLazyContinuation,atNonLazyBreak,after)(code):(effects.enter("codeFlowValue"),contentChunk(code))}function contentChunk(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("codeFlowValue"),beforeContentChunk(code)):(effects.consume(code),contentChunk)}function after(code){return effects.exit("codeFenced"),ok(code)}},concrete:!0};var index_dom=__webpack_require__("./node_modules/decode-named-character-reference/index.dom.js");const characterReference={name:"characterReference",tokenize:function tokenizeCharacterReference(effects,ok,nok){const self=this;let max,test,size=0;return function start(code){return effects.enter("characterReference"),effects.enter("characterReferenceMarker"),effects.consume(code),effects.exit("characterReferenceMarker"),open};function open(code){return 35===code?(effects.enter("characterReferenceMarkerNumeric"),effects.consume(code),effects.exit("characterReferenceMarkerNumeric"),numeric):(effects.enter("characterReferenceValue"),max=31,test=micromark_util_character.H$,value(code))}function numeric(code){return 88===code||120===code?(effects.enter("characterReferenceMarkerHexadecimal"),effects.consume(code),effects.exit("characterReferenceMarkerHexadecimal"),effects.enter("characterReferenceValue"),max=6,test=micromark_util_character.AF,value):(effects.enter("characterReferenceValue"),max=7,test=micromark_util_character.pY,value(code))}function value(code){if(59===code&&size){const token=effects.exit("characterReferenceValue");return test!==micromark_util_character.H$||(0,index_dom.T)(self.sliceSerialize(token))?(effects.enter("characterReferenceMarker"),effects.consume(code),effects.exit("characterReferenceMarker"),effects.exit("characterReference"),ok):nok(code)}return test(code)&&size++<max?(effects.consume(code),value):nok(code)}}};const characterEscape={name:"characterEscape",tokenize:function tokenizeCharacterEscape(effects,ok,nok){return function start(code){return effects.enter("characterEscape"),effects.enter("escapeMarker"),effects.consume(code),effects.exit("escapeMarker"),inside};function inside(code){return(0,micromark_util_character.sR)(code)?(effects.enter("characterEscapeValue"),effects.consume(code),effects.exit("characterEscapeValue"),effects.exit("characterEscape"),ok):nok(code)}}};const lineEnding={name:"lineEnding",tokenize:function tokenizeLineEnding(effects,ok){return function start(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),(0,micromark_factory_space.f)(effects,ok,"linePrefix")}}};const labelEnd={name:"labelEnd",tokenize:function tokenizeLabelEnd(effects,ok,nok){const self=this;let labelStart,defined,index=self.events.length;for(;index--;)if(("labelImage"===self.events[index][1].type||"labelLink"===self.events[index][1].type)&&!self.events[index][1]._balanced){labelStart=self.events[index][1];break}return function start(code){if(!labelStart)return nok(code);if(labelStart._inactive)return labelEndNok(code);return defined=self.parser.defined.includes(normalizeIdentifier(self.sliceSerialize({start:labelStart.end,end:self.now()}))),effects.enter("labelEnd"),effects.enter("labelMarker"),effects.consume(code),effects.exit("labelMarker"),effects.exit("labelEnd"),after};function after(code){return 40===code?effects.attempt(resourceConstruct,labelEndOk,defined?labelEndOk:labelEndNok)(code):91===code?effects.attempt(referenceFullConstruct,labelEndOk,defined?referenceNotFull:labelEndNok)(code):defined?labelEndOk(code):labelEndNok(code)}function referenceNotFull(code){return effects.attempt(referenceCollapsedConstruct,labelEndOk,labelEndNok)(code)}function labelEndOk(code){return ok(code)}function labelEndNok(code){return labelStart._balanced=!0,nok(code)}},resolveTo:function resolveToLabelEnd(events,context){let token,open,close,media,index=events.length,offset=0;for(;index--;)if(token=events[index][1],open){if("link"===token.type||"labelLink"===token.type&&token._inactive)break;"enter"===events[index][0]&&"labelLink"===token.type&&(token._inactive=!0)}else if(close){if("enter"===events[index][0]&&("labelImage"===token.type||"labelLink"===token.type)&&!token._balanced&&(open=index,"labelLink"!==token.type)){offset=2;break}}else"labelEnd"===token.type&&(close=index);const group={type:"labelLink"===events[open][1].type?"link":"image",start:Object.assign({},events[open][1].start),end:Object.assign({},events[events.length-1][1].end)},label={type:"label",start:Object.assign({},events[open][1].start),end:Object.assign({},events[close][1].end)},text={type:"labelText",start:Object.assign({},events[open+offset+2][1].end),end:Object.assign({},events[close-2][1].start)};return media=[["enter",group,context],["enter",label,context]],media=push(media,events.slice(open+1,open+offset+3)),media=push(media,[["enter",text,context]]),media=push(media,resolveAll(context.parser.constructs.insideSpan.null,events.slice(open+offset+4,close-3),context)),media=push(media,[["exit",text,context],events[close-2],events[close-1],["exit",label,context]]),media=push(media,events.slice(close+1)),media=push(media,[["exit",group,context]]),splice(events,open,events.length,media),events},resolveAll:function resolveAllLabelEnd(events){let index=-1;for(;++index<events.length;){const token=events[index][1];"labelImage"!==token.type&&"labelLink"!==token.type&&"labelEnd"!==token.type||(events.splice(index+1,"labelImage"===token.type?4:2),token.type="data",index++)}return events}},resourceConstruct={tokenize:function tokenizeResource(effects,ok,nok){return function resourceStart(code){return effects.enter("resource"),effects.enter("resourceMarker"),effects.consume(code),effects.exit("resourceMarker"),resourceBefore};function resourceBefore(code){return(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,resourceOpen)(code):resourceOpen(code)}function resourceOpen(code){return 41===code?resourceEnd(code):factoryDestination(effects,resourceDestinationAfter,resourceDestinationMissing,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(code)}function resourceDestinationAfter(code){return(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,resourceBetween)(code):resourceEnd(code)}function resourceDestinationMissing(code){return nok(code)}function resourceBetween(code){return 34===code||39===code||40===code?factoryTitle(effects,resourceTitleAfter,nok,"resourceTitle","resourceTitleMarker","resourceTitleString")(code):resourceEnd(code)}function resourceTitleAfter(code){return(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,resourceEnd)(code):resourceEnd(code)}function resourceEnd(code){return 41===code?(effects.enter("resourceMarker"),effects.consume(code),effects.exit("resourceMarker"),effects.exit("resource"),ok):nok(code)}}},referenceFullConstruct={tokenize:function tokenizeReferenceFull(effects,ok,nok){const self=this;return function referenceFull(code){return factoryLabel.call(self,effects,referenceFullAfter,referenceFullMissing,"reference","referenceMarker","referenceString")(code)};function referenceFullAfter(code){return self.parser.defined.includes(normalizeIdentifier(self.sliceSerialize(self.events[self.events.length-1][1]).slice(1,-1)))?ok(code):nok(code)}function referenceFullMissing(code){return nok(code)}}},referenceCollapsedConstruct={tokenize:function tokenizeReferenceCollapsed(effects,ok,nok){return function referenceCollapsedStart(code){return effects.enter("reference"),effects.enter("referenceMarker"),effects.consume(code),effects.exit("referenceMarker"),referenceCollapsedOpen};function referenceCollapsedOpen(code){return 93===code?(effects.enter("referenceMarker"),effects.consume(code),effects.exit("referenceMarker"),effects.exit("reference"),ok):nok(code)}}};function classifyCharacter(code){return null===code||(0,micromark_util_character.z3)(code)||(0,micromark_util_character.B8)(code)?1:(0,micromark_util_character.Xh)(code)?2:void 0}const attention={name:"attention",tokenize:function tokenizeAttention(effects,ok){const attentionMarkers=this.parser.constructs.attentionMarkers.null,previous=this.previous,before=classifyCharacter(previous);let marker;return function start(code){return marker=code,effects.enter("attentionSequence"),inside(code)};function inside(code){if(code===marker)return effects.consume(code),inside;const token=effects.exit("attentionSequence"),after=classifyCharacter(code),open=!after||2===after&&before||attentionMarkers.includes(code),close=!before||2===before&&after||attentionMarkers.includes(previous);return token._open=Boolean(42===marker?open:open&&(before||!close)),token._close=Boolean(42===marker?close:close&&(after||!open)),ok(code)}},resolveAll:function resolveAllAttention(events,context){let open,group,text,openingSequence,closingSequence,use,nextEvents,offset,index=-1;for(;++index<events.length;)if("enter"===events[index][0]&&"attentionSequence"===events[index][1].type&&events[index][1]._close)for(open=index;open--;)if("exit"===events[open][0]&&"attentionSequence"===events[open][1].type&&events[open][1]._open&&context.sliceSerialize(events[open][1]).charCodeAt(0)===context.sliceSerialize(events[index][1]).charCodeAt(0)){if((events[open][1]._close||events[index][1]._open)&&(events[index][1].end.offset-events[index][1].start.offset)%3&&!((events[open][1].end.offset-events[open][1].start.offset+events[index][1].end.offset-events[index][1].start.offset)%3))continue;use=events[open][1].end.offset-events[open][1].start.offset>1&&events[index][1].end.offset-events[index][1].start.offset>1?2:1;const start=Object.assign({},events[open][1].end),end=Object.assign({},events[index][1].start);movePoint(start,-use),movePoint(end,use),openingSequence={type:use>1?"strongSequence":"emphasisSequence",start,end:Object.assign({},events[open][1].end)},closingSequence={type:use>1?"strongSequence":"emphasisSequence",start:Object.assign({},events[index][1].start),end},text={type:use>1?"strongText":"emphasisText",start:Object.assign({},events[open][1].end),end:Object.assign({},events[index][1].start)},group={type:use>1?"strong":"emphasis",start:Object.assign({},openingSequence.start),end:Object.assign({},closingSequence.end)},events[open][1].end=Object.assign({},openingSequence.start),events[index][1].start=Object.assign({},closingSequence.end),nextEvents=[],events[open][1].end.offset-events[open][1].start.offset&&(nextEvents=push(nextEvents,[["enter",events[open][1],context],["exit",events[open][1],context]])),nextEvents=push(nextEvents,[["enter",group,context],["enter",openingSequence,context],["exit",openingSequence,context],["enter",text,context]]),nextEvents=push(nextEvents,resolveAll(context.parser.constructs.insideSpan.null,events.slice(open+1,index),context)),nextEvents=push(nextEvents,[["exit",text,context],["enter",closingSequence,context],["exit",closingSequence,context],["exit",group,context]]),events[index][1].end.offset-events[index][1].start.offset?(offset=2,nextEvents=push(nextEvents,[["enter",events[index][1],context],["exit",events[index][1],context]])):offset=0,splice(events,open-1,index-open+3,nextEvents),index=open+nextEvents.length-offset-2;break}index=-1;for(;++index<events.length;)"attentionSequence"===events[index][1].type&&(events[index][1].type="data");return events}};function movePoint(point,offset){point.column+=offset,point.offset+=offset,point._bufferIndex+=offset}const htmlText={name:"htmlText",tokenize:function tokenizeHtmlText(effects,ok,nok){const self=this;let marker,index,returnState;return function start(code){return effects.enter("htmlText"),effects.enter("htmlTextData"),effects.consume(code),open};function open(code){return 33===code?(effects.consume(code),declarationOpen):47===code?(effects.consume(code),tagCloseStart):63===code?(effects.consume(code),instruction):(0,micromark_util_character.jv)(code)?(effects.consume(code),tagOpen):nok(code)}function declarationOpen(code){return 45===code?(effects.consume(code),commentOpenInside):91===code?(effects.consume(code),index=0,cdataOpenInside):(0,micromark_util_character.jv)(code)?(effects.consume(code),declaration):nok(code)}function commentOpenInside(code){return 45===code?(effects.consume(code),commentEnd):nok(code)}function comment(code){return null===code?nok(code):45===code?(effects.consume(code),commentClose):(0,micromark_util_character.Ch)(code)?(returnState=comment,lineEndingBefore(code)):(effects.consume(code),comment)}function commentClose(code){return 45===code?(effects.consume(code),commentEnd):comment(code)}function commentEnd(code){return 62===code?end(code):45===code?commentClose(code):comment(code)}function cdataOpenInside(code){return code==="CDATA[".charCodeAt(index++)?(effects.consume(code),6===index?cdata:cdataOpenInside):nok(code)}function cdata(code){return null===code?nok(code):93===code?(effects.consume(code),cdataClose):(0,micromark_util_character.Ch)(code)?(returnState=cdata,lineEndingBefore(code)):(effects.consume(code),cdata)}function cdataClose(code){return 93===code?(effects.consume(code),cdataEnd):cdata(code)}function cdataEnd(code){return 62===code?end(code):93===code?(effects.consume(code),cdataEnd):cdata(code)}function declaration(code){return null===code||62===code?end(code):(0,micromark_util_character.Ch)(code)?(returnState=declaration,lineEndingBefore(code)):(effects.consume(code),declaration)}function instruction(code){return null===code?nok(code):63===code?(effects.consume(code),instructionClose):(0,micromark_util_character.Ch)(code)?(returnState=instruction,lineEndingBefore(code)):(effects.consume(code),instruction)}function instructionClose(code){return 62===code?end(code):instruction(code)}function tagCloseStart(code){return(0,micromark_util_character.jv)(code)?(effects.consume(code),tagClose):nok(code)}function tagClose(code){return 45===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),tagClose):tagCloseBetween(code)}function tagCloseBetween(code){return(0,micromark_util_character.Ch)(code)?(returnState=tagCloseBetween,lineEndingBefore(code)):(0,micromark_util_character.xz)(code)?(effects.consume(code),tagCloseBetween):end(code)}function tagOpen(code){return 45===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),tagOpen):47===code||62===code||(0,micromark_util_character.z3)(code)?tagOpenBetween(code):nok(code)}function tagOpenBetween(code){return 47===code?(effects.consume(code),end):58===code||95===code||(0,micromark_util_character.jv)(code)?(effects.consume(code),tagOpenAttributeName):(0,micromark_util_character.Ch)(code)?(returnState=tagOpenBetween,lineEndingBefore(code)):(0,micromark_util_character.xz)(code)?(effects.consume(code),tagOpenBetween):end(code)}function tagOpenAttributeName(code){return 45===code||46===code||58===code||95===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),tagOpenAttributeName):tagOpenAttributeNameAfter(code)}function tagOpenAttributeNameAfter(code){return 61===code?(effects.consume(code),tagOpenAttributeValueBefore):(0,micromark_util_character.Ch)(code)?(returnState=tagOpenAttributeNameAfter,lineEndingBefore(code)):(0,micromark_util_character.xz)(code)?(effects.consume(code),tagOpenAttributeNameAfter):tagOpenBetween(code)}function tagOpenAttributeValueBefore(code){return null===code||60===code||61===code||62===code||96===code?nok(code):34===code||39===code?(effects.consume(code),marker=code,tagOpenAttributeValueQuoted):(0,micromark_util_character.Ch)(code)?(returnState=tagOpenAttributeValueBefore,lineEndingBefore(code)):(0,micromark_util_character.xz)(code)?(effects.consume(code),tagOpenAttributeValueBefore):(effects.consume(code),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuoted(code){return code===marker?(effects.consume(code),marker=void 0,tagOpenAttributeValueQuotedAfter):null===code?nok(code):(0,micromark_util_character.Ch)(code)?(returnState=tagOpenAttributeValueQuoted,lineEndingBefore(code)):(effects.consume(code),tagOpenAttributeValueQuoted)}function tagOpenAttributeValueUnquoted(code){return null===code||34===code||39===code||60===code||61===code||96===code?nok(code):47===code||62===code||(0,micromark_util_character.z3)(code)?tagOpenBetween(code):(effects.consume(code),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuotedAfter(code){return 47===code||62===code||(0,micromark_util_character.z3)(code)?tagOpenBetween(code):nok(code)}function end(code){return 62===code?(effects.consume(code),effects.exit("htmlTextData"),effects.exit("htmlText"),ok):nok(code)}function lineEndingBefore(code){return effects.exit("htmlTextData"),effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),lineEndingAfter}function lineEndingAfter(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,lineEndingAfterPrefix,"linePrefix",self.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(code):lineEndingAfterPrefix(code)}function lineEndingAfterPrefix(code){return effects.enter("htmlTextData"),returnState(code)}}};const codeText={name:"codeText",tokenize:function tokenizeCodeText(effects,ok,nok){let size,token,sizeOpen=0;return function start(code){return effects.enter("codeText"),effects.enter("codeTextSequence"),sequenceOpen(code)};function sequenceOpen(code){return 96===code?(effects.consume(code),sizeOpen++,sequenceOpen):(effects.exit("codeTextSequence"),between(code))}function between(code){return null===code?nok(code):32===code?(effects.enter("space"),effects.consume(code),effects.exit("space"),between):96===code?(token=effects.enter("codeTextSequence"),size=0,sequenceClose(code)):(0,micromark_util_character.Ch)(code)?(effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),between):(effects.enter("codeTextData"),data(code))}function data(code){return null===code||32===code||96===code||(0,micromark_util_character.Ch)(code)?(effects.exit("codeTextData"),between(code)):(effects.consume(code),data)}function sequenceClose(code){return 96===code?(effects.consume(code),size++,sequenceClose):size===sizeOpen?(effects.exit("codeTextSequence"),effects.exit("codeText"),ok(code)):(token.type="codeTextData",data(code))}},resolve:function resolveCodeText(events){let index,enter,tailExitIndex=events.length-4,headEnterIndex=3;if(!("lineEnding"!==events[headEnterIndex][1].type&&"space"!==events[headEnterIndex][1].type||"lineEnding"!==events[tailExitIndex][1].type&&"space"!==events[tailExitIndex][1].type))for(index=headEnterIndex;++index<tailExitIndex;)if("codeTextData"===events[index][1].type){events[headEnterIndex][1].type="codeTextPadding",events[tailExitIndex][1].type="codeTextPadding",headEnterIndex+=2,tailExitIndex-=2;break}index=headEnterIndex-1,tailExitIndex++;for(;++index<=tailExitIndex;)void 0===enter?index!==tailExitIndex&&"lineEnding"!==events[index][1].type&&(enter=index):index!==tailExitIndex&&"lineEnding"!==events[index][1].type||(events[enter][1].type="codeTextData",index!==enter+2&&(events[enter][1].end=events[index-1][1].end,events.splice(enter+2,index-enter-2),tailExitIndex-=index-enter-2,index=enter+2),enter=void 0);return events},previous:function previous(code){return 96!==code||"characterEscape"===this.events[this.events.length-1][1].type}};const constructs_document={42:list,43:list,45:list,48:list,49:list,50:list,51:list,52:list,53:list,54:list,55:list,56:list,57:list,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},constructs_flow={35:headingAtx,42:thematicBreak,45:[setextUnderline,thematicBreak],60:htmlFlow,61:setextUnderline,95:thematicBreak,96:codeFenced,126:codeFenced},constructs_string={38:characterReference,92:characterEscape},constructs_text={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:{name:"labelStartImage",tokenize:function tokenizeLabelStartImage(effects,ok,nok){const self=this;return function start(code){return effects.enter("labelImage"),effects.enter("labelImageMarker"),effects.consume(code),effects.exit("labelImageMarker"),open};function open(code){return 91===code?(effects.enter("labelMarker"),effects.consume(code),effects.exit("labelMarker"),effects.exit("labelImage"),after):nok(code)}function after(code){return 94===code&&"_hiddenFootnoteSupport"in self.parser.constructs?nok(code):ok(code)}},resolveAll:labelEnd.resolveAll},38:characterReference,42:attention,60:[{name:"autolink",tokenize:function tokenizeAutolink(effects,ok,nok){let size=0;return function start(code){return effects.enter("autolink"),effects.enter("autolinkMarker"),effects.consume(code),effects.exit("autolinkMarker"),effects.enter("autolinkProtocol"),open};function open(code){return(0,micromark_util_character.jv)(code)?(effects.consume(code),schemeOrEmailAtext):emailAtext(code)}function schemeOrEmailAtext(code){return 43===code||45===code||46===code||(0,micromark_util_character.H$)(code)?(size=1,schemeInsideOrEmailAtext(code)):emailAtext(code)}function schemeInsideOrEmailAtext(code){return 58===code?(effects.consume(code),size=0,urlInside):(43===code||45===code||46===code||(0,micromark_util_character.H$)(code))&&size++<32?(effects.consume(code),schemeInsideOrEmailAtext):(size=0,emailAtext(code))}function urlInside(code){return 62===code?(effects.exit("autolinkProtocol"),effects.enter("autolinkMarker"),effects.consume(code),effects.exit("autolinkMarker"),effects.exit("autolink"),ok):null===code||32===code||60===code||(0,micromark_util_character.Av)(code)?nok(code):(effects.consume(code),urlInside)}function emailAtext(code){return 64===code?(effects.consume(code),emailAtSignOrDot):(0,micromark_util_character.n9)(code)?(effects.consume(code),emailAtext):nok(code)}function emailAtSignOrDot(code){return(0,micromark_util_character.H$)(code)?emailLabel(code):nok(code)}function emailLabel(code){return 46===code?(effects.consume(code),size=0,emailAtSignOrDot):62===code?(effects.exit("autolinkProtocol").type="autolinkEmail",effects.enter("autolinkMarker"),effects.consume(code),effects.exit("autolinkMarker"),effects.exit("autolink"),ok):emailValue(code)}function emailValue(code){if((45===code||(0,micromark_util_character.H$)(code))&&size++<63){const next=45===code?emailValue:emailLabel;return effects.consume(code),next}return nok(code)}}},htmlText],91:{name:"labelStartLink",tokenize:function tokenizeLabelStartLink(effects,ok,nok){const self=this;return function start(code){return effects.enter("labelLink"),effects.enter("labelMarker"),effects.consume(code),effects.exit("labelMarker"),effects.exit("labelLink"),after};function after(code){return 94===code&&"_hiddenFootnoteSupport"in self.parser.constructs?nok(code):ok(code)}},resolveAll:labelEnd.resolveAll},92:[{name:"hardBreakEscape",tokenize:function tokenizeHardBreakEscape(effects,ok,nok){return function start(code){return effects.enter("hardBreakEscape"),effects.consume(code),after};function after(code){return(0,micromark_util_character.Ch)(code)?(effects.exit("hardBreakEscape"),ok(code)):nok(code)}}},characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]};function parse(options){const constructs=function combineExtensions(extensions){const all={};let index=-1;for(;++index<extensions.length;)syntaxExtension(all,extensions[index]);return all}([constructs_namespaceObject,...(options||{}).extensions||[]]),parser={defined:[],lazy:{},constructs,content:create(content),document:create(document_document),flow:create(flow),string:create(string),text:create(text_text)};return parser;function create(initial){return function creator(from){return createTokenizer(parser,initial,from)}}}const search=/[\0\t\n\r]/g;var micromark_util_decode_numeric_character_reference=__webpack_require__("./node_modules/micromark-util-decode-numeric-character-reference/index.js"),micromark_util_decode_string=__webpack_require__("./node_modules/micromark-util-decode-string/index.js");function stringifyPosition(value){return value&&"object"==typeof value?"position"in value||"type"in value?position(value.position):"start"in value||"end"in value?position(value):"line"in value||"column"in value?point(value):"":""}function point(point){return index(point&&point.line)+":"+index(point&&point.column)}function position(pos){return point(pos&&pos.start)+"-"+point(pos&&pos.end)}function index(value){return value&&"number"==typeof value?value:1}const own={}.hasOwnProperty,fromMarkdown=function(value,encoding,options){return"string"!=typeof encoding&&(options=encoding,encoding=void 0),function compiler(options){const config={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:opener(link),autolinkProtocol:onenterdata,autolinkEmail:onenterdata,atxHeading:opener(heading),blockQuote:opener(blockQuote),characterEscape:onenterdata,characterReference:onenterdata,codeFenced:opener(codeFlow),codeFencedFenceInfo:buffer,codeFencedFenceMeta:buffer,codeIndented:opener(codeFlow,buffer),codeText:opener(codeText,buffer),codeTextData:onenterdata,data:onenterdata,codeFlowValue:onenterdata,definition:opener(definition),definitionDestinationString:buffer,definitionLabelString:buffer,definitionTitleString:buffer,emphasis:opener(emphasis),hardBreakEscape:opener(hardBreak),hardBreakTrailing:opener(hardBreak),htmlFlow:opener(html,buffer),htmlFlowData:onenterdata,htmlText:opener(html,buffer),htmlTextData:onenterdata,image:opener(image),label:buffer,link:opener(link),listItem:opener(listItem),listItemValue:onenterlistitemvalue,listOrdered:opener(list,onenterlistordered),listUnordered:opener(list),paragraph:opener(paragraph),reference:onenterreference,referenceString:buffer,resourceDestinationString:buffer,resourceTitleString:buffer,setextHeading:opener(heading),strong:opener(strong),thematicBreak:opener(thematicBreak)},exit:{atxHeading:closer(),atxHeadingSequence:onexitatxheadingsequence,autolink:closer(),autolinkEmail:onexitautolinkemail,autolinkProtocol:onexitautolinkprotocol,blockQuote:closer(),characterEscapeValue:onexitdata,characterReferenceMarkerHexadecimal:onexitcharacterreferencemarker,characterReferenceMarkerNumeric:onexitcharacterreferencemarker,characterReferenceValue:onexitcharacterreferencevalue,codeFenced:closer(onexitcodefenced),codeFencedFence:onexitcodefencedfence,codeFencedFenceInfo:onexitcodefencedfenceinfo,codeFencedFenceMeta:onexitcodefencedfencemeta,codeFlowValue:onexitdata,codeIndented:closer(onexitcodeindented),codeText:closer(onexitcodetext),codeTextData:onexitdata,data:onexitdata,definition:closer(),definitionDestinationString:onexitdefinitiondestinationstring,definitionLabelString:onexitdefinitionlabelstring,definitionTitleString:onexitdefinitiontitlestring,emphasis:closer(),hardBreakEscape:closer(onexithardbreak),hardBreakTrailing:closer(onexithardbreak),htmlFlow:closer(onexithtmlflow),htmlFlowData:onexitdata,htmlText:closer(onexithtmltext),htmlTextData:onexitdata,image:closer(onexitimage),label:onexitlabel,labelText:onexitlabeltext,lineEnding:onexitlineending,link:closer(onexitlink),listItem:closer(),listOrdered:closer(),listUnordered:closer(),paragraph:closer(),referenceString:onexitreferencestring,resourceDestinationString:onexitresourcedestinationstring,resourceTitleString:onexitresourcetitlestring,resource:onexitresource,setextHeading:closer(onexitsetextheading),setextHeadingLineSequence:onexitsetextheadinglinesequence,setextHeadingText:onexitsetextheadingtext,strong:closer(),thematicBreak:closer()}};configure(config,(options||{}).mdastExtensions||[]);const data={};return compile;function compile(events){let tree={type:"root",children:[]};const context={stack:[tree],tokenStack:[],config,enter,exit,buffer,resume,setData,getData},listStack=[];let index=-1;for(;++index<events.length;)if("listOrdered"===events[index][1].type||"listUnordered"===events[index][1].type)if("enter"===events[index][0])listStack.push(index);else{index=prepareList(events,listStack.pop(),index)}for(index=-1;++index<events.length;){const handler=config[events[index][0]];own.call(handler,events[index][1].type)&&handler[events[index][1].type].call(Object.assign({sliceSerialize:events[index][2].sliceSerialize},context),events[index][1])}if(context.tokenStack.length>0){const tail=context.tokenStack[context.tokenStack.length-1];(tail[1]||defaultOnError).call(context,void 0,tail[0])}for(tree.position={start:lib_point(events.length>0?events[0][1].start:{line:1,column:1,offset:0}),end:lib_point(events.length>0?events[events.length-2][1].end:{line:1,column:1,offset:0})},index=-1;++index<config.transforms.length;)tree=config.transforms[index](tree)||tree;return tree}function prepareList(events,start,length){let listItem,lineIndex,firstBlankLineIndex,atMarker,index=start-1,containerBalance=-1,listSpread=!1;for(;++index<=length;){const event=events[index];if("listUnordered"===event[1].type||"listOrdered"===event[1].type||"blockQuote"===event[1].type?("enter"===event[0]?containerBalance++:containerBalance--,atMarker=void 0):"lineEndingBlank"===event[1].type?"enter"===event[0]&&(!listItem||atMarker||containerBalance||firstBlankLineIndex||(firstBlankLineIndex=index),atMarker=void 0):"linePrefix"===event[1].type||"listItemValue"===event[1].type||"listItemMarker"===event[1].type||"listItemPrefix"===event[1].type||"listItemPrefixWhitespace"===event[1].type||(atMarker=void 0),!containerBalance&&"enter"===event[0]&&"listItemPrefix"===event[1].type||-1===containerBalance&&"exit"===event[0]&&("listUnordered"===event[1].type||"listOrdered"===event[1].type)){if(listItem){let tailIndex=index;for(lineIndex=void 0;tailIndex--;){const tailEvent=events[tailIndex];if("lineEnding"===tailEvent[1].type||"lineEndingBlank"===tailEvent[1].type){if("exit"===tailEvent[0])continue;lineIndex&&(events[lineIndex][1].type="lineEndingBlank",listSpread=!0),tailEvent[1].type="lineEnding",lineIndex=tailIndex}else if("linePrefix"!==tailEvent[1].type&&"blockQuotePrefix"!==tailEvent[1].type&&"blockQuotePrefixWhitespace"!==tailEvent[1].type&&"blockQuoteMarker"!==tailEvent[1].type&&"listItemIndent"!==tailEvent[1].type)break}firstBlankLineIndex&&(!lineIndex||firstBlankLineIndex<lineIndex)&&(listItem._spread=!0),listItem.end=Object.assign({},lineIndex?events[lineIndex][1].start:event[1].end),events.splice(lineIndex||index,0,["exit",listItem,event[2]]),index++,length++}"listItemPrefix"===event[1].type&&(listItem={type:"listItem",_spread:!1,start:Object.assign({},event[1].start),end:void 0},events.splice(index,0,["enter",listItem,event[2]]),index++,length++,firstBlankLineIndex=void 0,atMarker=!0)}}return events[start][1]._spread=listSpread,length}function setData(key,value){data[key]=value}function getData(key){return data[key]}function opener(create,and){return open;function open(token){enter.call(this,create(token),token),and&&and.call(this,token)}}function buffer(){this.stack.push({type:"fragment",children:[]})}function enter(node,token,errorHandler){return this.stack[this.stack.length-1].children.push(node),this.stack.push(node),this.tokenStack.push([token,errorHandler]),node.position={start:lib_point(token.start)},node}function closer(and){return close;function close(token){and&&and.call(this,token),exit.call(this,token)}}function exit(token,onExitError){const node=this.stack.pop(),open=this.tokenStack.pop();if(!open)throw new Error("Cannot close `"+token.type+"` ("+stringifyPosition({start:token.start,end:token.end})+"): its not open");if(open[0].type!==token.type)if(onExitError)onExitError.call(this,token,open[0]);else{(open[1]||defaultOnError).call(this,token,open[0])}return node.position.end=lib_point(token.end),node}function resume(){return(0,lib.B)(this.stack.pop())}function onenterlistordered(){setData("expectingFirstListItemValue",!0)}function onenterlistitemvalue(token){if(getData("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(token),10),setData("expectingFirstListItemValue")}}function onexitcodefencedfenceinfo(){const data=this.resume();this.stack[this.stack.length-1].lang=data}function onexitcodefencedfencemeta(){const data=this.resume();this.stack[this.stack.length-1].meta=data}function onexitcodefencedfence(){getData("flowCodeInside")||(this.buffer(),setData("flowCodeInside",!0))}function onexitcodefenced(){const data=this.resume();this.stack[this.stack.length-1].value=data.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),setData("flowCodeInside")}function onexitcodeindented(){const data=this.resume();this.stack[this.stack.length-1].value=data.replace(/(\r?\n|\r)$/g,"")}function onexitdefinitionlabelstring(token){const label=this.resume(),node=this.stack[this.stack.length-1];node.label=label,node.identifier=normalizeIdentifier(this.sliceSerialize(token)).toLowerCase()}function onexitdefinitiontitlestring(){const data=this.resume();this.stack[this.stack.length-1].title=data}function onexitdefinitiondestinationstring(){const data=this.resume();this.stack[this.stack.length-1].url=data}function onexitatxheadingsequence(token){const node=this.stack[this.stack.length-1];if(!node.depth){const depth=this.sliceSerialize(token).length;node.depth=depth}}function onexitsetextheadingtext(){setData("setextHeadingSlurpLineEnding",!0)}function onexitsetextheadinglinesequence(token){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(token).charCodeAt(0)?1:2}function onexitsetextheading(){setData("setextHeadingSlurpLineEnding")}function onenterdata(token){const node=this.stack[this.stack.length-1];let tail=node.children[node.children.length-1];tail&&"text"===tail.type||(tail=text(),tail.position={start:lib_point(token.start)},node.children.push(tail)),this.stack.push(tail)}function onexitdata(token){const tail=this.stack.pop();tail.value+=this.sliceSerialize(token),tail.position.end=lib_point(token.end)}function onexitlineending(token){const context=this.stack[this.stack.length-1];if(getData("atHardBreak")){return context.children[context.children.length-1].position.end=lib_point(token.end),void setData("atHardBreak")}!getData("setextHeadingSlurpLineEnding")&&config.canContainEols.includes(context.type)&&(onenterdata.call(this,token),onexitdata.call(this,token))}function onexithardbreak(){setData("atHardBreak",!0)}function onexithtmlflow(){const data=this.resume();this.stack[this.stack.length-1].value=data}function onexithtmltext(){const data=this.resume();this.stack[this.stack.length-1].value=data}function onexitcodetext(){const data=this.resume();this.stack[this.stack.length-1].value=data}function onexitlink(){const node=this.stack[this.stack.length-1];if(getData("inReference")){const referenceType=getData("referenceType")||"shortcut";node.type+="Reference",node.referenceType=referenceType,delete node.url,delete node.title}else delete node.identifier,delete node.label;setData("referenceType")}function onexitimage(){const node=this.stack[this.stack.length-1];if(getData("inReference")){const referenceType=getData("referenceType")||"shortcut";node.type+="Reference",node.referenceType=referenceType,delete node.url,delete node.title}else delete node.identifier,delete node.label;setData("referenceType")}function onexitlabeltext(token){const string=this.sliceSerialize(token),ancestor=this.stack[this.stack.length-2];ancestor.label=(0,micromark_util_decode_string.v)(string),ancestor.identifier=normalizeIdentifier(string).toLowerCase()}function onexitlabel(){const fragment=this.stack[this.stack.length-1],value=this.resume(),node=this.stack[this.stack.length-1];if(setData("inReference",!0),"link"===node.type){const children=fragment.children;node.children=children}else node.alt=value}function onexitresourcedestinationstring(){const data=this.resume();this.stack[this.stack.length-1].url=data}function onexitresourcetitlestring(){const data=this.resume();this.stack[this.stack.length-1].title=data}function onexitresource(){setData("inReference")}function onenterreference(){setData("referenceType","collapsed")}function onexitreferencestring(token){const label=this.resume(),node=this.stack[this.stack.length-1];node.label=label,node.identifier=normalizeIdentifier(this.sliceSerialize(token)).toLowerCase(),setData("referenceType","full")}function onexitcharacterreferencemarker(token){setData("characterReferenceType",token.type)}function onexitcharacterreferencevalue(token){const data=this.sliceSerialize(token),type=getData("characterReferenceType");let value;if(type)value=(0,micromark_util_decode_numeric_character_reference.o)(data,"characterReferenceMarkerNumeric"===type?10:16),setData("characterReferenceType");else{value=(0,index_dom.T)(data)}const tail=this.stack.pop();tail.value+=value,tail.position.end=lib_point(token.end)}function onexitautolinkprotocol(token){onexitdata.call(this,token);this.stack[this.stack.length-1].url=this.sliceSerialize(token)}function onexitautolinkemail(token){onexitdata.call(this,token);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(token)}function blockQuote(){return{type:"blockquote",children:[]}}function codeFlow(){return{type:"code",lang:null,meta:null,value:""}}function codeText(){return{type:"inlineCode",value:""}}function definition(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function emphasis(){return{type:"emphasis",children:[]}}function heading(){return{type:"heading",depth:void 0,children:[]}}function hardBreak(){return{type:"break"}}function html(){return{type:"html",value:""}}function image(){return{type:"image",title:null,url:"",alt:null}}function link(){return{type:"link",title:null,url:"",children:[]}}function list(token){return{type:"list",ordered:"listOrdered"===token.type,start:null,spread:token._spread,children:[]}}function listItem(token){return{type:"listItem",spread:token._spread,checked:null,children:[]}}function paragraph(){return{type:"paragraph",children:[]}}function strong(){return{type:"strong",children:[]}}function text(){return{type:"text",value:""}}function thematicBreak(){return{type:"thematicBreak"}}}(options)(function postprocess(events){for(;!subtokenize(events););return events}(parse(options).document().write(function preprocess(){let atCarriageReturn,column=1,buffer="",start=!0;return function preprocessor(value,encoding,end){const chunks=[];let match,next,startPosition,endPosition,code;for(value=buffer+value.toString(encoding),startPosition=0,buffer="",start&&(65279===value.charCodeAt(0)&&startPosition++,start=void 0);startPosition<value.length;){if(search.lastIndex=startPosition,match=search.exec(value),endPosition=match&&void 0!==match.index?match.index:value.length,code=value.charCodeAt(endPosition),!match){buffer=value.slice(startPosition);break}if(10===code&&startPosition===endPosition&&atCarriageReturn)chunks.push(-3),atCarriageReturn=void 0;else switch(atCarriageReturn&&(chunks.push(-5),atCarriageReturn=void 0),startPosition<endPosition&&(chunks.push(value.slice(startPosition,endPosition)),column+=endPosition-startPosition),code){case 0:chunks.push(65533),column++;break;case 9:for(next=4*Math.ceil(column/4),chunks.push(-2);column++<next;)chunks.push(-1);break;case 10:chunks.push(-4),column=1;break;default:atCarriageReturn=!0,column=1}startPosition=endPosition+1}return end&&(atCarriageReturn&&chunks.push(-5),buffer&&chunks.push(buffer),chunks.push(null)),chunks}}()(value,encoding,!0))))};function lib_point(d){return{line:d.line,column:d.column,offset:d.offset}}function configure(combined,extensions){let index=-1;for(;++index<extensions.length;){const value=extensions[index];Array.isArray(value)?configure(combined,value):extension(combined,value)}}function extension(combined,extension){let key;for(key in extension)if(own.call(extension,key))if("canContainEols"===key){const right=extension[key];right&&combined[key].push(...right)}else if("transforms"===key){const right=extension[key];right&&combined[key].push(...right)}else if("enter"===key||"exit"===key){const right=extension[key];right&&Object.assign(combined[key],right)}}function defaultOnError(left,right){throw left?new Error("Cannot close `"+left.type+"` ("+stringifyPosition({start:left.start,end:left.end})+"): a different token (`"+right.type+"`, "+stringifyPosition({start:right.start,end:right.end})+") is open"):new Error("Cannot close document, a token (`"+right.type+"`, "+stringifyPosition({start:right.start,end:right.end})+") is still open")}function isParent(node){return node.children instanceof Array}function importMarkdownToLexical({root,markdown,visitors,syntaxExtensions,mdastExtensions}){var _a;const mdastRoot=fromMarkdown(markdown,{extensions:syntaxExtensions,mdastExtensions});0===mdastRoot.children.length&&mdastRoot.children.push({type:"paragraph",children:[]}),"paragraph"!==(null==(_a=mdastRoot.children.at(-1))?void 0:_a.type)&&mdastRoot.children.push({type:"paragraph",children:[]}),importMdastTreeToLexical({root,mdastRoot,visitors})}function importMdastTreeToLexical({root,mdastRoot,visitors}){const formattingMap=new WeakMap;function visitChildren(mdastNode,lexicalParent){if(!isParent(mdastNode))throw new Error("Attempting to visit children of a non-parent");mdastNode.children.forEach((child=>visit(child,lexicalParent,mdastNode)))}function visit(mdastNode,lexicalParent,mdastParent){const visitor=visitors.find((visitor2=>"string"==typeof visitor2.testNode?visitor2.testNode===mdastNode.type:visitor2.testNode(mdastNode)));if(!visitor)throw new Error(`no MdastImportVisitor found for ${mdastNode.type} ${JSON.stringify(mdastNode)}`,{cause:mdastNode});visitor.visitNode({mdastNode,lexicalParent,mdastParent,actions:{visitChildren,addAndStepInto(lexicalNode){lexicalParent.append(lexicalNode),isParent(mdastNode)&&visitChildren(mdastNode,lexicalNode)},addFormatting(format,node=mdastNode){formattingMap.set(node,format|(formattingMap.get(mdastParent)??0))},removeFormatting(format,node=mdastNode){formattingMap.set(node,format^(formattingMap.get(mdastParent)??0))},getParentFormatting:()=>formattingMap.get(mdastParent)??0}})}visit(mdastRoot,root,null)}},"./node_modules/@mdxeditor/editor/dist/plugins/codeblock/CodeBlockNode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$8:()=>useCodeBlockEditorContext,YG:()=>$createCodeBlockNode,fu:()=>$isCodeBlockNode,kf:()=>CodeBlockNode});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),lexical__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lexical/Lexical.js"),_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js"),_utils_voidEmitter_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/voidEmitter.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),__defProp=Object.defineProperty,__publicField=(obj,key,value)=>(((obj,key,value)=>{key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value})(obj,"symbol"!=typeof key?key+"":key,value),value);class CodeBlockNode extends lexical__WEBPACK_IMPORTED_MODULE_1__.DecoratorNode{constructor(code,language,meta,key){super(key),__publicField(this,"__code"),__publicField(this,"__meta"),__publicField(this,"__language"),__publicField(this,"__focusEmitter",(0,_utils_voidEmitter_js__WEBPACK_IMPORTED_MODULE_2__.E)()),__publicField(this,"setCode",(code=>{code!==this.__code&&(this.getWritable().__code=code)})),__publicField(this,"setMeta",(meta=>{meta!==this.__meta&&(this.getWritable().__meta=meta)})),__publicField(this,"setLanguage",(language=>{language!==this.__language&&(this.getWritable().__language=language)})),__publicField(this,"select",(()=>{this.__focusEmitter.publish()})),this.__code=code,this.__meta=meta,this.__language=language}static getType(){return"codeblock"}static clone(node){return new CodeBlockNode(node.__code,node.__language,node.__meta,node.__key)}static importJSON(serializedNode){const{code,meta,language}=serializedNode;return $createCodeBlockNode({code,language,meta})}exportJSON(){return{code:this.getCode(),language:this.getLanguage(),meta:this.getMeta(),type:"codeblock",version:1}}createDOM(_config){return document.createElement("div")}updateDOM(){return!1}getCode(){return this.__code}getMeta(){return this.__meta}getLanguage(){return this.__language}decorate(editor){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeBlockEditorContainer,{parentEditor:editor,code:this.getCode(),meta:this.getMeta(),language:this.getLanguage(),codeBlockNode:this,nodeKey:this.getKey(),focusEmitter:this.__focusEmitter})}isInline(){return!1}}const CodeBlockEditorContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),CodeBlockEditorContextProvider=({parentEditor,lexicalNode,children})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeBlockEditorContext.Provider,{value:{lexicalNode,setCode:code=>{parentEditor.update((()=>{lexicalNode.setCode(code),setTimeout((()=>{parentEditor.dispatchCommand(_core_index_js__WEBPACK_IMPORTED_MODULE_3__.g8,void 0)}),0)}))},setLanguage:language=>{parentEditor.update((()=>{lexicalNode.setLanguage(language)}))},setMeta:meta=>{parentEditor.update((()=>{lexicalNode.setMeta(meta)}))}}},children);function useCodeBlockEditorContext(){const context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(CodeBlockEditorContext);if(!context)throw new Error("useCodeBlockEditor must be used within a CodeBlockEditor");return context}function CodeBlockEditorContainer(props){const[codeBlockEditorDescriptors]=_index_js__WEBPACK_IMPORTED_MODULE_4__.ob.useEmitterValues("codeBlockEditorDescriptors"),descriptor=codeBlockEditorDescriptors.sort(((a,b)=>b.priority-a.priority)).find((descriptor2=>descriptor2.match(props.language||"",props.meta||"")));if(!descriptor)throw new Error(`No CodeBlockEditor registered for language=${props.language} meta=${props.meta}`);const Editor=descriptor.Editor,{codeBlockNode:_,parentEditor:__,...restProps}=props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeBlockEditorContextProvider,{parentEditor:props.parentEditor,lexicalNode:props.codeBlockNode},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Editor,{...restProps}))}function $createCodeBlockNode(options){const{code="",language="",meta=""}=options;return new CodeBlockNode(code,language,meta)}function $isCodeBlockNode(node){return node instanceof CodeBlockNode}},"./node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u9:()=>codeBlockPlugin,ob:()=>codeBlockPluginHooks,yQ:()=>codeBlockSystem});var CodeBlockNode=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/CodeBlockNode.js");const CodeBlockVisitor={testLexicalNode:CodeBlockNode.fu,visitLexicalNode:({lexicalNode,actions})=>{actions.addAndStepInto("code",{value:lexicalNode.getCode(),lang:lexicalNode.getLanguage(),meta:lexicalNode.getMeta()})}},MdastCodeVisitor={testNode:"code",visitNode({mdastNode,actions}){actions.addAndStepInto((0,CodeBlockNode.YG)({code:mdastNode.value,language:mdastNode.lang,meta:mdastNode.meta}))}};var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const codeBlockSystem=(0,realmFactory.By)(((r,[{insertDecoratorNode}])=>{const codeBlockEditorDescriptors=r.node([]),appendCodeBlockEditorDescriptor=r.node(),insertCodeBlock=r.node(),defaultCodeBlockLanguage=r.node("");return r.link(r.pipe(insertCodeBlock,r.o.withLatestFrom(defaultCodeBlockLanguage),r.o.map((([payload,defaultCodeBlockLanguage2])=>()=>(0,CodeBlockNode.YG)({language:defaultCodeBlockLanguage2,...payload})))),insertDecoratorNode),r.link(r.pipe(appendCodeBlockEditorDescriptor,r.o.withLatestFrom(codeBlockEditorDescriptors),r.o.map((([newValue,values])=>values.includes(newValue)?values:[...values,newValue]))),codeBlockEditorDescriptors),{codeBlockEditorDescriptors,defaultCodeBlockLanguage,appendCodeBlockEditorDescriptor,insertCodeBlock}}),[core.Wo]),[codeBlockPlugin,codeBlockPluginHooks]=(0,react.nq)({id:"codeblock",systemSpec:codeBlockSystem,applyParamsToSystem(realm,params){realm.pubKey("defaultCodeBlockLanguage",(null==params?void 0:params.defaultCodeBlockLanguage)||"")},init:(realm,params)=>{realm.pubKey("codeBlockEditorDescriptors",(null==params?void 0:params.codeBlockEditorDescriptors)||[]),realm.pubKey("addImportVisitor",MdastCodeVisitor),realm.pubKey("addLexicalNode",CodeBlockNode.kf),realm.pubKey("addExportVisitor",CodeBlockVisitor)}})},"./node_modules/@mdxeditor/editor/dist/plugins/codemirror/CodeMirrorEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>CodeMirrorEditor});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),t="colors",n="sizes",r="space",i={gap:r,gridGap:r,columnGap:r,gridColumnGap:r,rowGap:r,gridRowGap:r,inset:r,insetBlock:r,insetBlockEnd:r,insetBlockStart:r,insetInline:r,insetInlineEnd:r,insetInlineStart:r,margin:r,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r,marginBlock:r,marginBlockEnd:r,marginBlockStart:r,marginInline:r,marginInlineEnd:r,marginInlineStart:r,padding:r,paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r,paddingBlock:r,paddingBlockEnd:r,paddingBlockStart:r,paddingInline:r,paddingInlineEnd:r,paddingInlineStart:r,top:r,right:r,bottom:r,left:r,scrollMargin:r,scrollMarginTop:r,scrollMarginRight:r,scrollMarginBottom:r,scrollMarginLeft:r,scrollMarginX:r,scrollMarginY:r,scrollMarginBlock:r,scrollMarginBlockEnd:r,scrollMarginBlockStart:r,scrollMarginInline:r,scrollMarginInlineEnd:r,scrollMarginInlineStart:r,scrollPadding:r,scrollPaddingTop:r,scrollPaddingRight:r,scrollPaddingBottom:r,scrollPaddingLeft:r,scrollPaddingX:r,scrollPaddingY:r,scrollPaddingBlock:r,scrollPaddingBlockEnd:r,scrollPaddingBlockStart:r,scrollPaddingInline:r,scrollPaddingInlineEnd:r,scrollPaddingInlineStart:r,fontSize:"fontSizes",background:t,backgroundColor:t,backgroundImage:t,borderImage:t,border:t,borderBlock:t,borderBlockEnd:t,borderBlockStart:t,borderBottom:t,borderBottomColor:t,borderColor:t,borderInline:t,borderInlineEnd:t,borderInlineStart:t,borderLeft:t,borderLeftColor:t,borderRight:t,borderRightColor:t,borderTop:t,borderTopColor:t,caretColor:t,color:t,columnRuleColor:t,fill:t,outline:t,outlineColor:t,stroke:t,textDecorationColor:t,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:n,minBlockSize:n,maxBlockSize:n,inlineSize:n,minInlineSize:n,maxInlineSize:n,width:n,minWidth:n,maxWidth:n,height:n,minHeight:n,maxHeight:n,flexBasis:n,gridTemplateColumns:n,gridTemplateRows:n,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},o=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,l=()=>{const e=Object.create(null);return(t,n,...r)=>{const i=(e=>JSON.stringify(e,o))(t);return i in e?e[i]:e[i]=n(t,...r)}},s=Symbol.for("sxs.internal"),a=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),c=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:d}=Object.prototype,g=e=>e.includes("-")?e:e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),p=/\s+(?![^()]*\))/,u=e=>t=>e(..."string"==typeof t?String(t).split(p):[t]),h={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:u(((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e}))),marginInline:u(((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e}))),maxSize:u(((e,t)=>({maxBlockSize:e,maxInlineSize:t||e}))),minSize:u(((e,t)=>({minBlockSize:e,minInlineSize:t||e}))),paddingBlock:u(((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e}))),paddingInline:u(((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e})))},f=/([\d.]+)([^]*)/,m=(e,t)=>e.length?e.reduce(((e,n)=>(e.push(...t.map((e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?`:is(${n})`:n):n+" "+e))),e)),[]):t,b=(e,t)=>e in S&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,n,r,i)=>n+("stretch"===r?`-moz-available${i};${g(e)}:${n}-webkit-fill-available`:`-moz-fit-content${i};${g(e)}:${n}fit-content`)+i)):String(t),S={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},k=e=>e?e+"-":"",y=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((e,r,i,o,l)=>"$"==o==!!i?e:(r||"--"==o?"calc(":"")+"var(--"+("$"===o?k(t)+(l.includes("$")?"":k(n))+l.replace(/\$/g,"-"):l)+")"+(r||"--"==o?"*"+(r||"")+(i||"1")+")":""))),B=/\s*,\s*(?![^()]*\))/,$=Object.prototype.toString,x=(e,t,n,r,i)=>{let o,l,s;const a=(e,t,n)=>{let c,d;const p=e=>{for(c in e){const x=64===c.charCodeAt(0),z=x&&Array.isArray(e[c])?e[c]:[e[c]];for(d of z){const e=/[A-Z]/.test(S=c)?S:S.replace(/-[^]/g,(e=>e[1].toUpperCase())),z="object"==typeof d&&d&&d.toString===$&&(!r.utils[e]||!t.length);if(e in r.utils&&!z){const t=r.utils[e];if(t!==l){l=t,p(t(d)),l=null;continue}}else if(e in h){const t=h[e];if(t!==s){s=t,p(t(d)),s=null;continue}}if(x&&(u=c.slice(1)in r.media?"@media "+r.media[c.slice(1)]:c,c=u.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((e,t,n,r,i,o)=>{const l=f.test(t),s=.0625*(l?-1:1),[a,c]=l?[r,t]:[t,r];return"("+("="===n[0]?"":">"===n[0]===l?"max-":"min-")+a+":"+("="!==n[0]&&1===n.length?c.replace(f,((e,t,r)=>Number(t)+s*(">"===n?1:-1)+r)):c)+(i?") and ("+(">"===i[0]?"min-":"max-")+a+":"+(1===i.length?o.replace(f,((e,t,n)=>Number(t)+s*(">"===i?-1:1)+n)):o):"")+")"}))),z){const e=x?n.concat(c):[...n],r=x?[...t]:m(t,c.split(B));void 0!==o&&i(I(...o)),o=void 0,a(d,r,e)}else void 0===o&&(o=[[],t,n]),c=x||36!==c.charCodeAt(0)?c:`--${k(r.prefix)}${c.slice(1).replace(/\$/g,"-")}`,d=z?d:"number"==typeof d?d&&e in R?String(d)+"px":String(d):y(b(e,null==d?"":d),r.prefix,r.themeMap[e]),o[0].push(`${x?`${c} `:`${g(c)}:`}${d}`)}}var u,S};p(e),void 0!==o&&i(I(...o)),o=void 0};a(e,t,n)},I=(e,t,n)=>`${n.map((e=>`${e}{`)).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,R={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},z=e=>String.fromCharCode(e+(e>25?39:97)),W=e=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=z(t%52)+n;return z(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(e))>>>0),j=["themed","global","styled","onevar","resonevar","allvar","inline"],E=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},T=e=>{let t;const n=()=>{const{cssRules:e}=t.sheet;return[].map.call(e,((n,r)=>{const{cssText:i}=n;let o="";if(i.startsWith("--sxs"))return"";if(e[r-1]&&(o=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(const e in t.rules)if(t.rules[e].group===n)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${i}`;return n.cssRules.length?`${o}${i}`:""}return i})).join("")},r=()=>{if(t){const{rules:e,sheet:n}=t;if(!n.deleteRule){for(;3===Object(Object(n.cssRules)[0]).type;)n.cssRules.splice(0,1);n.cssRules=[]}for(const t in e)delete e[t]}const i=Object(e).styleSheets||[];for(const e of i)if(E(e)){for(let i=0,o=e.cssRules;o[i];++i){const l=Object(o[i]);if(1!==l.type)continue;const s=Object(o[i+1]);if(4!==s.type)continue;++i;const{cssText:a}=l;if(!a.startsWith("--sxs"))continue;const c=a.slice(14,-3).trim().split(/\s+/),d=j[c[0]];d&&(t||(t={sheet:e,reset:r,rules:{},toString:n}),t.rules[d]={group:s,index:i,cache:new Set(c)})}if(t)break}if(!t){const i=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,i(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,(e=>e.cssText)).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:i("","text/css"),rules:{},reset:r,toString:n}}const{sheet:o,rules:l}=t;for(let e=j.length-1;e>=0;--e){const t=j[e];if(!l[t]){const n=j[e+1],r=l[n]?l[n].index:o.cssRules.length;o.insertRule("@media{}",r),o.insertRule(`--sxs{--sxs:${e}}`,r),l[t]={group:o.cssRules[r+1],index:r,cache:new Set([e])}}v(l[t])}};return r(),t},v=e=>{const t=e.group;let n=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,n),++n}catch(e){}}},M=Symbol(),w=l(),C=(e,t)=>w(e,(()=>(...n)=>{let r={type:null,composers:new Set};for(const t of n)if(null!=t)if(t[s]){null==r.type&&(r.type=t[s].type);for(const e of t[s].composers)r.composers.add(e)}else t.constructor!==Object||t.$$typeof?null==r.type&&(r.type=t):r.composers.add(P(t,e));return null==r.type&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),L(e,r,t)})),P=({variants:e,compoundVariants:t,defaultVariants:n,...r},i)=>{const o=`${k(i.prefix)}c-${W(r)}`,l=[],s=[],a=Object.create(null),g=[];for(const e in n)a[e]=String(n[e]);if("object"==typeof e&&e)for(const t in e){p=a,u=t,d.call(p,u)||(a[t]="undefined");const n=e[t];for(const e in n){const r={[t]:String(e)};"undefined"===String(e)&&g.push(t);const i=n[e],o=[r,i,!c(i)];l.push(o)}}var p,u;if("object"==typeof t&&t)for(const e of t){let{css:t,...n}=e;t="object"==typeof t&&t||{};for(const e in n)n[e]=String(n[e]);const r=[n,t,!c(t)];s.push(r)}return[o,r,l,s,a,g]},L=(e,t,n)=>{const[r,i,o,l]=O(t.composers),c="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let n=0;n<t[M].length;n++){const[r,i]=t[M][n];e.rules[r].apply(i)}return t[M]=[],null}return t[M]=[],t.rules={},j.forEach((e=>t.rules[e]={apply:n=>t[M].push([e,n])})),t})(n):null,d=(c||n).rules,g=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,p=s=>{s="object"==typeof s&&s||D;const{css:a,...p}=s,u={};for(const e in o)if(delete p[e],e in s){let t=s[e];"object"==typeof t&&t?u[e]={"@initial":o[e],...t}:(t=String(t),u[e]="undefined"!==t||l.has(e)?t:o[e])}else u[e]=o[e];const h=new Set([...i]);for(const[r,i,o,l]of t.composers){n.rules.styled.cache.has(r)||(n.rules.styled.cache.add(r),x(i,[`.${r}`],[],e,(e=>{d.styled.apply(e)})));const t=A(o,u,e.media),s=A(l,u,e.media,!0);for(const i of t)if(void 0!==i)for(const[t,o,l]of i){const i=`${r}-${W(o)}-${t}`;h.add(i);const s=(l?n.rules.resonevar:n.rules.onevar).cache,a=l?d.resonevar:d.onevar;s.has(i)||(s.add(i),x(o,[`.${i}`],[],e,(e=>{a.apply(e)})))}for(const t of s)if(void 0!==t)for(const[i,o]of t){const t=`${r}-${W(o)}-${i}`;h.add(t),n.rules.allvar.cache.has(t)||(n.rules.allvar.cache.add(t),x(o,[`.${t}`],[],e,(e=>{d.allvar.apply(e)})))}}if("object"==typeof a&&a){const t=`${r}-i${W(a)}-css`;h.add(t),n.rules.inline.cache.has(t)||(n.rules.inline.cache.add(t),x(a,[`.${t}`],[],e,(e=>{d.inline.apply(e)})))}for(const e of String(s.className||"").trim().split(/\s+/))e&&h.add(e);const f=p.className=[...h].join(" ");return{type:t.type,className:f,selector:g,props:p,toString:()=>f,deferredInjector:c}};return a(p,{className:r,selector:g,[s]:t,toString:()=>(n.rules.styled.cache.has(r)||p(),r)})},O=e=>{let t="";const n=[],r={},i=[];for(const[o,,,,l,s]of e){""===t&&(t=o),n.push(o),i.push(...s);for(const e in l){const t=l[e];(void 0===r[e]||"undefined"!==t||s.includes(t))&&(r[e]=t)}}return[t,n,r,new Set(i)]},A=(e,t,n,r)=>{const i=[];e:for(let[o,l,s]of e){if(s)continue;let e,a=0,c=!1;for(e in o){const r=o[e];let i=t[e];if(i!==r){if("object"!=typeof i||!i)continue e;{let e,t,o=0;for(const l in i){if(r===String(i[l])){if("@initial"!==l){const e=l.slice(1);(t=t||[]).push(e in n?n[e]:l.replace(/^@media ?/,"")),c=!0}a+=o,e=!0}++o}if(t&&t.length&&(l={["@media "+t.join(", ")]:l}),!e)continue e}}}(i[a]=i[a]||[]).push([r?"cv":`${e}-${o[e]}`,l,c])}return i},D={},H=l(),N=(e,t)=>H(e,(()=>(...n)=>{const r=()=>{for(let r of n){r="object"==typeof r&&r||{};let n=W(r);if(!t.rules.global.cache.has(n)){if(t.rules.global.cache.add(n),"@import"in r){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let n of[].concat(r["@import"]))n=n.includes('"')||n.includes("'")?n:`"${n}"`,t.sheet.insertRule(`@import ${n};`,e++);delete r["@import"]}x(r,[],[],e,(e=>{t.rules.global.apply(e)}))}}return""};return a(r,{toString:r})})),V=l(),G=(e,t)=>V(e,(()=>n=>{const r=`${k(e.prefix)}k-${W(n)}`,i=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);const i=[];x(n,[],[],e,(e=>i.push(e)));const o=`@keyframes ${r}{${i.join("")}}`;t.rules.global.apply(o)}return r};return a(i,{get name(){return i()},toString:i})})),F=class{constructor(e,t,n,r){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==n?"":String(n),this.prefix=null==r?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+k(this.prefix)+k(this.scale)+this.token}toString(){return this.computedValue}},J=l(),U=(e,t)=>J(e,(()=>(n,r)=>{r="object"==typeof n&&n||Object(r);const i=`.${n=(n="string"==typeof n?n:"")||`${k(e.prefix)}t-${W(r)}`}`,o={},l=[];for(const t in r){o[t]={};for(const n in r[t]){const i=`--${k(e.prefix)}${t}-${n}`,s=y(String(r[t][n]),e.prefix,t);o[t][n]=new F(n,s,t,e.prefix),l.push(`${i}:${s}`)}}const s=()=>{if(l.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const i=`${r===e.theme?":root,":""}.${n}{${l.join(";")}}`;t.rules.themed.apply(i)}return n};return{...o,get className(){return s()},selector:i,toString:s}})),Z=l(),X=e=>{let t=!1;const n=Z(e,(e=>{t=!0;const n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},o="object"==typeof e.root?e.root||null:globalThis.document||null,l="object"==typeof e.theme&&e.theme||{},s={prefix:n,media:r,theme:l,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...i},utils:"object"==typeof e.utils&&e.utils||{}},a=T(o),c={css:C(s,a),globalCss:N(s,a),keyframes:G(s,a),createTheme:U(s,a),reset(){a.reset(),c.theme.toString()},theme:{},sheet:a,config:s,prefix:n,getCssText:a.toString,toString:a.toString};return String(c.theme=c.createTheme(l)),c}));return t||n.reset(),n},dist=__webpack_require__("./node_modules/dequal/dist/index.mjs"),types_36e5ec0d=__webpack_require__("./node_modules/@codesandbox/sandpack-client/dist/types-36e5ec0d.mjs");__webpack_require__("./node_modules/outvariant/lib/index.mjs");function loadSandpackClient(iframeSelector,sandboxSetup,options){var _a;return void 0===options&&(options={}),(0,types_36e5ec0d._)(this,void 0,void 0,(function(){var template,Client;return(0,types_36e5ec0d.a)(this,(function(_c){switch(_c.label){case 0:switch(template=null!==(_a=sandboxSetup.template)&&void 0!==_a?_a:"parcel",template){case"node":return[3,1];case"static":return[3,3]}return[3,5];case 1:return[4,Promise.all([__webpack_require__.e(960),__webpack_require__.e(7863)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs")).then((function(m){return m.SandpackNode}))];case 2:return Client=_c.sent(),[3,7];case 3:return[4,Promise.all([__webpack_require__.e(960),__webpack_require__.e(2448)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codesandbox/sandpack-client/dist/index-fc68d414.mjs")).then((function(m){return m.SandpackStatic}))];case 4:return Client=_c.sent(),[3,7];case 5:return[4,__webpack_require__.e(532).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codesandbox/sandpack-client/dist/clients/runtime/index.mjs")).then((function(m){return m.SandpackRuntime}))];case 6:Client=_c.sent(),_c.label=7;case 7:return[2,new Client(iframeSelector,sandboxSetup,options)]}}))}))}class Text{lineAt(pos){if(pos<0||pos>this.length)throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);return this.lineInner(pos,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(from,to,text){let parts=[];return this.decompose(0,from,parts,2),text.length&&text.decompose(0,text.length,parts,3),this.decompose(to,this.length,parts,1),TextNode.from(parts,this.length-(to-from)+text.length)}append(other){return this.replace(this.length,this.length,other)}slice(from,to=this.length){let parts=[];return this.decompose(from,to,parts,0),TextNode.from(parts,to-from)}eq(other){if(other==this)return!0;if(other.length!=this.length||other.lines!=this.lines)return!1;let start=this.scanIdentical(other,1),end=this.length-this.scanIdentical(other,-1),a=new RawTextCursor(this),b=new RawTextCursor(other);for(let skip=start,pos=start;;){if(a.next(skip),b.next(skip),skip=0,a.lineBreak!=b.lineBreak||a.done!=b.done||a.value!=b.value)return!1;if(pos+=a.value.length,a.done||pos>=end)return!0}}iter(dir=1){return new RawTextCursor(this,dir)}iterRange(from,to=this.length){return new PartialTextCursor(this,from,to)}iterLines(from,to){let inner;if(null==from)inner=this.iter();else{null==to&&(to=this.lines+1);let start=this.line(from).from;inner=this.iterRange(start,Math.max(start,to==this.lines+1?this.length:to<=1?0:this.line(to-1).to))}return new LineCursor(inner)}toString(){return this.sliceString(0)}toJSON(){let lines=[];return this.flatten(lines),lines}constructor(){}static of(text){if(0==text.length)throw new RangeError("A document must have at least one line");return 1!=text.length||text[0]?text.length<=32?new TextLeaf(text):TextNode.from(TextLeaf.split(text,[])):Text.empty}}class TextLeaf extends Text{constructor(text,length=function textLength(text){let length=-1;for(let line of text)length+=line.length+1;return length}(text)){super(),this.text=text,this.length=length}get lines(){return this.text.length}get children(){return null}lineInner(target,isLine,line,offset){for(let i=0;;i++){let string=this.text[i],end=offset+string.length;if((isLine?line:end)>=target)return new Line(offset,end,line,string);offset=end+1,line++}}decompose(from,to,target,open){let text=from<=0&&to>=this.length?this:new TextLeaf(sliceText(this.text,from,to),Math.min(to,this.length)-Math.max(0,from));if(1&open){let prev=target.pop(),joined=appendText(text.text,prev.text.slice(),0,text.length);if(joined.length<=32)target.push(new TextLeaf(joined,prev.length+text.length));else{let mid=joined.length>>1;target.push(new TextLeaf(joined.slice(0,mid)),new TextLeaf(joined.slice(mid)))}}else target.push(text)}replace(from,to,text){if(!(text instanceof TextLeaf))return super.replace(from,to,text);let lines=appendText(this.text,appendText(text.text,sliceText(this.text,0,from)),to),newLen=this.length+text.length-(to-from);return lines.length<=32?new TextLeaf(lines,newLen):TextNode.from(TextLeaf.split(lines,[]),newLen)}sliceString(from,to=this.length,lineSep="\n"){let result="";for(let pos=0,i=0;pos<=to&&i<this.text.length;i++){let line=this.text[i],end=pos+line.length;pos>from&&i&&(result+=lineSep),from<end&&to>pos&&(result+=line.slice(Math.max(0,from-pos),to-pos)),pos=end+1}return result}flatten(target){for(let line of this.text)target.push(line)}scanIdentical(){return 0}static split(text,target){let part=[],len=-1;for(let line of text)part.push(line),len+=line.length+1,32==part.length&&(target.push(new TextLeaf(part,len)),part=[],len=-1);return len>-1&&target.push(new TextLeaf(part,len)),target}}class TextNode extends Text{constructor(children,length){super(),this.children=children,this.length=length,this.lines=0;for(let child of children)this.lines+=child.lines}lineInner(target,isLine,line,offset){for(let i=0;;i++){let child=this.children[i],end=offset+child.length,endLine=line+child.lines-1;if((isLine?endLine:end)>=target)return child.lineInner(target,isLine,line,offset);offset=end+1,line=endLine+1}}decompose(from,to,target,open){for(let i=0,pos=0;pos<=to&&i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(from<=end&&to>=pos){let childOpen=open&((pos<=from?1:0)|(end>=to?2:0));pos>=from&&end<=to&&!childOpen?target.push(child):child.decompose(from-pos,to-pos,target,childOpen)}pos=end+1}}replace(from,to,text){if(text.lines<this.lines)for(let i=0,pos=0;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(from>=pos&&to<=end){let updated=child.replace(from-pos,to-pos,text),totalLines=this.lines-child.lines+updated.lines;if(updated.lines<totalLines>>4&&updated.lines>totalLines>>6){let copy=this.children.slice();return copy[i]=updated,new TextNode(copy,this.length-(to-from)+text.length)}return super.replace(pos,end,updated)}pos=end+1}return super.replace(from,to,text)}sliceString(from,to=this.length,lineSep="\n"){let result="";for(let i=0,pos=0;i<this.children.length&&pos<=to;i++){let child=this.children[i],end=pos+child.length;pos>from&&i&&(result+=lineSep),from<end&&to>pos&&(result+=child.sliceString(from-pos,to-pos,lineSep)),pos=end+1}return result}flatten(target){for(let child of this.children)child.flatten(target)}scanIdentical(other,dir){if(!(other instanceof TextNode))return 0;let length=0,[iA,iB,eA,eB]=dir>0?[0,0,this.children.length,other.children.length]:[this.children.length-1,other.children.length-1,-1,-1];for(;;iA+=dir,iB+=dir){if(iA==eA||iB==eB)return length;let chA=this.children[iA],chB=other.children[iB];if(chA!=chB)return length+chA.scanIdentical(chB,dir);length+=chA.length+1}}static from(children,length=children.reduce(((l,ch)=>l+ch.length+1),-1)){let lines=0;for(let ch of children)lines+=ch.lines;if(lines<32){let flat=[];for(let ch of children)ch.flatten(flat);return new TextLeaf(flat,length)}let chunk=Math.max(32,lines>>5),maxChunk=chunk<<1,minChunk=chunk>>1,chunked=[],currentLines=0,currentLen=-1,currentChunk=[];function add(child){let last;if(child.lines>maxChunk&&child instanceof TextNode)for(let node of child.children)add(node);else child.lines>minChunk&&(currentLines>minChunk||!currentLines)?(flush(),chunked.push(child)):child instanceof TextLeaf&&currentLines&&(last=currentChunk[currentChunk.length-1])instanceof TextLeaf&&child.lines+last.lines<=32?(currentLines+=child.lines,currentLen+=child.length+1,currentChunk[currentChunk.length-1]=new TextLeaf(last.text.concat(child.text),last.length+1+child.length)):(currentLines+child.lines>chunk&&flush(),currentLines+=child.lines,currentLen+=child.length+1,currentChunk.push(child))}function flush(){0!=currentLines&&(chunked.push(1==currentChunk.length?currentChunk[0]:TextNode.from(currentChunk,currentLen)),currentLen=-1,currentLines=currentChunk.length=0)}for(let child of children)add(child);return flush(),1==chunked.length?chunked[0]:new TextNode(chunked,length)}}function appendText(text,target,from=0,to=1e9){for(let pos=0,i=0,first=!0;i<text.length&&pos<=to;i++){let line=text[i],end=pos+line.length;end>=from&&(end>to&&(line=line.slice(0,to-pos)),pos<from&&(line=line.slice(from-pos)),first?(target[target.length-1]+=line,first=!1):target.push(line)),pos=end+1}return target}function sliceText(text,from,to){return appendText(text,[""],from,to)}Text.empty=new TextLeaf([""],0);class RawTextCursor{constructor(text,dir=1){this.dir=dir,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[text],this.offsets=[dir>0?1:(text instanceof TextLeaf?text.text.length:text.children.length)<<1]}nextInner(skip,dir){for(this.done=this.lineBreak=!1;;){let last=this.nodes.length-1,top=this.nodes[last],offsetValue=this.offsets[last],offset=offsetValue>>1,size=top instanceof TextLeaf?top.text.length:top.children.length;if(offset==(dir>0?size:0)){if(0==last)return this.done=!0,this.value="",this;dir>0&&this.offsets[last-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&offsetValue)==(dir>0?0:1)){if(this.offsets[last]+=dir,0==skip)return this.lineBreak=!0,this.value="\n",this;skip--}else if(top instanceof TextLeaf){let next=top.text[offset+(dir<0?-1:0)];if(this.offsets[last]+=dir,next.length>Math.max(0,skip))return this.value=0==skip?next:dir>0?next.slice(skip):next.slice(0,next.length-skip),this;skip-=next.length}else{let next=top.children[offset+(dir<0?-1:0)];skip>next.length?(skip-=next.length,this.offsets[last]+=dir):(dir<0&&this.offsets[last]--,this.nodes.push(next),this.offsets.push(dir>0?1:(next instanceof TextLeaf?next.text.length:next.children.length)<<1))}}}next(skip=0){return skip<0&&(this.nextInner(-skip,-this.dir),skip=this.value.length),this.nextInner(skip,this.dir)}}class PartialTextCursor{constructor(text,start,end){this.value="",this.done=!1,this.cursor=new RawTextCursor(text,start>end?-1:1),this.pos=start>end?text.length:0,this.from=Math.min(start,end),this.to=Math.max(start,end)}nextInner(skip,dir){if(dir<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;skip+=Math.max(0,dir<0?this.pos-this.to:this.from-this.pos);let limit=dir<0?this.pos-this.from:this.to-this.pos;skip>limit&&(skip=limit),limit-=skip;let{value}=this.cursor.next(skip);return this.pos+=(value.length+skip)*dir,this.value=value.length<=limit?value:dir<0?value.slice(value.length-limit):value.slice(0,limit),this.done=!this.value,this}next(skip=0){return skip<0?skip=Math.max(skip,this.from-this.pos):skip>0&&(skip=Math.min(skip,this.to-this.pos)),this.nextInner(skip,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class LineCursor{constructor(inner){this.inner=inner,this.afterBreak=!0,this.value="",this.done=!1}next(skip=0){let{done,lineBreak,value}=this.inner.next(skip);return done?(this.done=!0,this.value=""):lineBreak?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=value,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(from,to,number,text){this.from=from,this.to=to,this.number=number,this.text=text}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((s=>s?parseInt(s,36):1));for(let i=1;i<extend.length;i++)extend[i]+=extend[i-1];function isExtendingChar(code){for(let i=1;i<extend.length;i+=2)if(extend[i]>code)return extend[i-1]<=code;return!1}function isRegionalIndicator(code){return code>=127462&&code<=127487}const ZWJ=8205;function findClusterBreak(str,pos,forward=!0,includeExtending=!0){return(forward?nextClusterBreak:prevClusterBreak)(str,pos,includeExtending)}function nextClusterBreak(str,pos,includeExtending){if(pos==str.length)return pos;pos&&surrogateLow(str.charCodeAt(pos))&&surrogateHigh(str.charCodeAt(pos-1))&&pos--;let prev=codePointAt(str,pos);for(pos+=codePointSize(prev);pos<str.length;){let next=codePointAt(str,pos);if(prev==ZWJ||next==ZWJ||includeExtending&&isExtendingChar(next))pos+=codePointSize(next),prev=next;else{if(!isRegionalIndicator(next))break;{let countBefore=0,i=pos-2;for(;i>=0&&isRegionalIndicator(codePointAt(str,i));)countBefore++,i-=2;if(countBefore%2==0)break;pos+=2}}}return pos}function prevClusterBreak(str,pos,includeExtending){for(;pos>0;){let found=nextClusterBreak(str,pos-2,includeExtending);if(found<pos)return found;pos--}return 0}function surrogateLow(ch){return ch>=56320&&ch<57344}function surrogateHigh(ch){return ch>=55296&&ch<56320}function codePointAt(str,pos){let code0=str.charCodeAt(pos);if(!surrogateHigh(code0)||pos+1==str.length)return code0;let code1=str.charCodeAt(pos+1);return surrogateLow(code1)?code1-56320+(code0-55296<<10)+65536:code0}function fromCodePoint(code){return code<=65535?String.fromCharCode(code):(code-=65536,String.fromCharCode(55296+(code>>10),56320+(1023&code)))}function codePointSize(code){return code<65536?1:2}const DefaultSplit=/\r\n?|\n/;var dist_MapMode=function(MapMode){return MapMode[MapMode.Simple=0]="Simple",MapMode[MapMode.TrackDel=1]="TrackDel",MapMode[MapMode.TrackBefore=2]="TrackBefore",MapMode[MapMode.TrackAfter=3]="TrackAfter",MapMode}(dist_MapMode||(dist_MapMode={}));class ChangeDesc{constructor(sections){this.sections=sections}get length(){let result=0;for(let i=0;i<this.sections.length;i+=2)result+=this.sections[i];return result}get newLength(){let result=0;for(let i=0;i<this.sections.length;i+=2){let ins=this.sections[i+1];result+=ins<0?this.sections[i]:ins}return result}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(f){for(let i=0,posA=0,posB=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];ins<0?(f(posA,posB,len),posB+=len):posB+=ins,posA+=len}}iterChangedRanges(f,individual=!1){iterChanges(this,f,individual)}get invertedDesc(){let sections=[];for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];ins<0?sections.push(len,ins):sections.push(ins,len)}return new ChangeDesc(sections)}composeDesc(other){return this.empty?other:other.empty?this:composeSets(this,other)}mapDesc(other,before=!1){return other.empty?this:mapSet(this,other,before)}mapPos(pos,assoc=-1,mode=dist_MapMode.Simple){let posA=0,posB=0;for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++],endA=posA+len;if(ins<0){if(endA>pos)return posB+(pos-posA);posB+=len}else{if(mode!=dist_MapMode.Simple&&endA>=pos&&(mode==dist_MapMode.TrackDel&&posA<pos&&endA>pos||mode==dist_MapMode.TrackBefore&&posA<pos||mode==dist_MapMode.TrackAfter&&endA>pos))return null;if(endA>pos||endA==pos&&assoc<0&&!len)return pos==posA||assoc<0?posB:posB+ins;posB+=ins}posA=endA}if(pos>posA)throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);return posB}touchesRange(from,to=from){for(let i=0,pos=0;i<this.sections.length&&pos<=to;){let end=pos+this.sections[i++];if(this.sections[i++]>=0&&pos<=to&&end>=from)return!(pos<from&&end>to)||"cover";pos=end}return!1}toString(){let result="";for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];result+=(result?" ":"")+len+(ins>=0?":"+ins:"")}return result}toJSON(){return this.sections}static fromJSON(json){if(!Array.isArray(json)||json.length%2||json.some((a=>"number"!=typeof a)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(json)}static create(sections){return new ChangeDesc(sections)}}class ChangeSet extends ChangeDesc{constructor(sections,inserted){super(sections),this.inserted=inserted}apply(doc){if(this.length!=doc.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,((fromA,toA,fromB,_toB,text)=>doc=doc.replace(fromB,fromB+(toA-fromA),text)),!1),doc}mapDesc(other,before=!1){return mapSet(this,other,before,!0)}invert(doc){let sections=this.sections.slice(),inserted=[];for(let i=0,pos=0;i<sections.length;i+=2){let len=sections[i],ins=sections[i+1];if(ins>=0){sections[i]=ins,sections[i+1]=len;let index=i>>1;for(;inserted.length<index;)inserted.push(Text.empty);inserted.push(len?doc.slice(pos,pos+len):Text.empty)}pos+=len}return new ChangeSet(sections,inserted)}compose(other){return this.empty?other:other.empty?this:composeSets(this,other,!0)}map(other,before=!1){return other.empty?this:mapSet(this,other,before,!0)}iterChanges(f,individual=!1){iterChanges(this,f,individual)}get desc(){return ChangeDesc.create(this.sections)}filter(ranges){let resultSections=[],resultInserted=[],filteredSections=[],iter=new SectionIter(this);done:for(let i=0,pos=0;;){let next=i==ranges.length?1e9:ranges[i++];for(;pos<next||pos==next&&0==iter.len;){if(iter.done)break done;let len=Math.min(iter.len,next-pos);addSection(filteredSections,len,-1);let ins=-1==iter.ins?-1:0==iter.off?iter.ins:0;addSection(resultSections,len,ins),ins>0&&addInsert(resultInserted,resultSections,iter.text),iter.forward(len),pos+=len}let end=ranges[i++];for(;pos<end;){if(iter.done)break done;let len=Math.min(iter.len,end-pos);addSection(resultSections,len,-1),addSection(filteredSections,len,-1==iter.ins?-1:0==iter.off?iter.ins:0),iter.forward(len),pos+=len}}return{changes:new ChangeSet(resultSections,resultInserted),filtered:ChangeDesc.create(filteredSections)}}toJSON(){let parts=[];for(let i=0;i<this.sections.length;i+=2){let len=this.sections[i],ins=this.sections[i+1];ins<0?parts.push(len):0==ins?parts.push([len]):parts.push([len].concat(this.inserted[i>>1].toJSON()))}return parts}static of(changes,length,lineSep){let sections=[],inserted=[],pos=0,total=null;function flush(force=!1){if(!force&&!sections.length)return;pos<length&&addSection(sections,length-pos,-1);let set=new ChangeSet(sections,inserted);total=total?total.compose(set.map(total)):set,sections=[],inserted=[],pos=0}return function process(spec){if(Array.isArray(spec))for(let sub of spec)process(sub);else if(spec instanceof ChangeSet){if(spec.length!=length)throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);flush(),total=total?total.compose(spec.map(total)):spec}else{let{from,to=from,insert}=spec;if(from>to||from<0||to>length)throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);let insText=insert?"string"==typeof insert?Text.of(insert.split(lineSep||DefaultSplit)):insert:Text.empty,insLen=insText.length;if(from==to&&0==insLen)return;from<pos&&flush(),from>pos&&addSection(sections,from-pos,-1),addSection(sections,to-from,insLen),addInsert(inserted,sections,insText),pos=to}}(changes),flush(!total),total}static empty(length){return new ChangeSet(length?[length,-1]:[],[])}static fromJSON(json){if(!Array.isArray(json))throw new RangeError("Invalid JSON representation of ChangeSet");let sections=[],inserted=[];for(let i=0;i<json.length;i++){let part=json[i];if("number"==typeof part)sections.push(part,-1);else{if(!Array.isArray(part)||"number"!=typeof part[0]||part.some(((e,i)=>i&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==part.length)sections.push(part[0],0);else{for(;inserted.length<i;)inserted.push(Text.empty);inserted[i]=Text.of(part.slice(1)),sections.push(part[0],inserted[i].length)}}}return new ChangeSet(sections,inserted)}static createSet(sections,inserted){return new ChangeSet(sections,inserted)}}function addSection(sections,len,ins,forceJoin=!1){if(0==len&&ins<=0)return;let last=sections.length-2;last>=0&&ins<=0&&ins==sections[last+1]?sections[last]+=len:0==len&&0==sections[last]?sections[last+1]+=ins:forceJoin?(sections[last]+=len,sections[last+1]+=ins):sections.push(len,ins)}function addInsert(values,sections,value){if(0==value.length)return;let index=sections.length-2>>1;if(index<values.length)values[values.length-1]=values[values.length-1].append(value);else{for(;values.length<index;)values.push(Text.empty);values.push(value)}}function iterChanges(desc,f,individual){let inserted=desc.inserted;for(let posA=0,posB=0,i=0;i<desc.sections.length;){let len=desc.sections[i++],ins=desc.sections[i++];if(ins<0)posA+=len,posB+=len;else{let endA=posA,endB=posB,text=Text.empty;for(;endA+=len,endB+=ins,ins&&inserted&&(text=text.append(inserted[i-2>>1])),!(individual||i==desc.sections.length||desc.sections[i+1]<0);)len=desc.sections[i++],ins=desc.sections[i++];f(posA,endA,posB,endB,text),posA=endA,posB=endB}}}function mapSet(setA,setB,before,mkSet=!1){let sections=[],insert=mkSet?[]:null,a=new SectionIter(setA),b=new SectionIter(setB);for(let inserted=-1;;)if(-1==a.ins&&-1==b.ins){let len=Math.min(a.len,b.len);addSection(sections,len,-1),a.forward(len),b.forward(len)}else if(b.ins>=0&&(a.ins<0||inserted==a.i||0==a.off&&(b.len<a.len||b.len==a.len&&!before))){let len=b.len;for(addSection(sections,b.ins,-1);len;){let piece=Math.min(a.len,len);a.ins>=0&&inserted<a.i&&a.len<=piece&&(addSection(sections,0,a.ins),insert&&addInsert(insert,sections,a.text),inserted=a.i),a.forward(piece),len-=piece}b.next()}else{if(!(a.ins>=0)){if(a.done&&b.done)return insert?ChangeSet.createSet(sections,insert):ChangeDesc.create(sections);throw new Error("Mismatched change set lengths")}{let len=0,left=a.len;for(;left;)if(-1==b.ins){let piece=Math.min(left,b.len);len+=piece,left-=piece,b.forward(piece)}else{if(!(0==b.ins&&b.len<left))break;left-=b.len,b.next()}addSection(sections,len,inserted<a.i?a.ins:0),insert&&inserted<a.i&&addInsert(insert,sections,a.text),inserted=a.i,a.forward(a.len-left)}}}function composeSets(setA,setB,mkSet=!1){let sections=[],insert=mkSet?[]:null,a=new SectionIter(setA),b=new SectionIter(setB);for(let open=!1;;){if(a.done&&b.done)return insert?ChangeSet.createSet(sections,insert):ChangeDesc.create(sections);if(0==a.ins)addSection(sections,a.len,0,open),a.next();else if(0!=b.len||b.done){if(a.done||b.done)throw new Error("Mismatched change set lengths");{let len=Math.min(a.len2,b.len),sectionLen=sections.length;if(-1==a.ins){let insB=-1==b.ins?-1:b.off?0:b.ins;addSection(sections,len,insB,open),insert&&insB&&addInsert(insert,sections,b.text)}else-1==b.ins?(addSection(sections,a.off?0:a.len,len,open),insert&&addInsert(insert,sections,a.textBit(len))):(addSection(sections,a.off?0:a.len,b.off?0:b.ins,open),insert&&!b.off&&addInsert(insert,sections,b.text));open=(a.ins>len||b.ins>=0&&b.len>len)&&(open||sections.length>sectionLen),a.forward2(len),b.forward(len)}}else addSection(sections,0,b.ins,open),insert&&addInsert(insert,sections,b.text),b.next()}}class SectionIter{constructor(set){this.set=set,this.i=0,this.next()}next(){let{sections}=this.set;this.i<sections.length?(this.len=sections[this.i++],this.ins=sections[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted}=this.set,index=this.i-2>>1;return index>=inserted.length?Text.empty:inserted[index]}textBit(len){let{inserted}=this.set,index=this.i-2>>1;return index>=inserted.length&&!len?Text.empty:inserted[index].slice(this.off,null==len?void 0:this.off+len)}forward(len){len==this.len?this.next():(this.len-=len,this.off+=len)}forward2(len){-1==this.ins?this.forward(len):len==this.ins?this.next():(this.ins-=len,this.off+=len)}}class SelectionRange{constructor(from,to,flags){this.from=from,this.to=to,this.flags=flags}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let level=7&this.flags;return 7==level?null:level}get goalColumn(){let value=this.flags>>6;return 16777215==value?void 0:value}map(change,assoc=-1){let from,to;return this.empty?from=to=change.mapPos(this.from,assoc):(from=change.mapPos(this.from,1),to=change.mapPos(this.to,-1)),from==this.from&&to==this.to?this:new SelectionRange(from,to,this.flags)}extend(from,to=from){if(from<=this.anchor&&to>=this.anchor)return dist_EditorSelection.range(from,to);let head=Math.abs(from-this.anchor)>Math.abs(to-this.anchor)?from:to;return dist_EditorSelection.range(this.anchor,head)}eq(other){return this.anchor==other.anchor&&this.head==other.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(json){if(!json||"number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid JSON representation for SelectionRange");return dist_EditorSelection.range(json.anchor,json.head)}static create(from,to,flags){return new SelectionRange(from,to,flags)}}class dist_EditorSelection{constructor(ranges,mainIndex){this.ranges=ranges,this.mainIndex=mainIndex}map(change,assoc=-1){return change.empty?this:dist_EditorSelection.create(this.ranges.map((r=>r.map(change,assoc))),this.mainIndex)}eq(other){if(this.ranges.length!=other.ranges.length||this.mainIndex!=other.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(other.ranges[i]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new dist_EditorSelection([this.main],0)}addRange(range,main=!0){return dist_EditorSelection.create([range].concat(this.ranges),main?0:this.mainIndex+1)}replaceRange(range,which=this.mainIndex){let ranges=this.ranges.slice();return ranges[which]=range,dist_EditorSelection.create(ranges,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((r=>r.toJSON())),main:this.mainIndex}}static fromJSON(json){if(!json||!Array.isArray(json.ranges)||"number"!=typeof json.main||json.main>=json.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new dist_EditorSelection(json.ranges.map((r=>SelectionRange.fromJSON(r))),json.main)}static single(anchor,head=anchor){return new dist_EditorSelection([dist_EditorSelection.range(anchor,head)],0)}static create(ranges,mainIndex=0){if(0==ranges.length)throw new RangeError("A selection needs at least one range");for(let pos=0,i=0;i<ranges.length;i++){let range=ranges[i];if(range.empty?range.from<=pos:range.from<pos)return dist_EditorSelection.normalized(ranges.slice(),mainIndex);pos=range.to}return new dist_EditorSelection(ranges,mainIndex)}static cursor(pos,assoc=0,bidiLevel,goalColumn){return SelectionRange.create(pos,pos,(0==assoc?0:assoc<0?8:16)|(null==bidiLevel?7:Math.min(6,bidiLevel))|(null!=goalColumn?goalColumn:16777215)<<6)}static range(anchor,head,goalColumn,bidiLevel){let flags=(null!=goalColumn?goalColumn:16777215)<<6|(null==bidiLevel?7:Math.min(6,bidiLevel));return head<anchor?SelectionRange.create(head,anchor,48|flags):SelectionRange.create(anchor,head,(head>anchor?8:0)|flags)}static normalized(ranges,mainIndex=0){let main=ranges[mainIndex];ranges.sort(((a,b)=>a.from-b.from)),mainIndex=ranges.indexOf(main);for(let i=1;i<ranges.length;i++){let range=ranges[i],prev=ranges[i-1];if(range.empty?range.from<=prev.to:range.from<prev.to){let from=prev.from,to=Math.max(range.to,prev.to);i<=mainIndex&&mainIndex--,ranges.splice(--i,2,range.anchor>range.head?dist_EditorSelection.range(to,from):dist_EditorSelection.range(from,to))}}return new dist_EditorSelection(ranges,mainIndex)}}function checkSelection(selection,docLength){for(let range of selection.ranges)if(range.to>docLength)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(combine,compareInput,compare,isStatic,enables){this.combine=combine,this.compareInput=compareInput,this.compare=compare,this.isStatic=isStatic,this.id=nextID++,this.default=combine([]),this.extensions="function"==typeof enables?enables(this):enables}get reader(){return this}static define(config={}){return new Facet(config.combine||(a=>a),config.compareInput||((a,b)=>a===b),config.compare||(config.combine?(a,b)=>a===b:sameArray),!!config.static,config.enables)}of(value){return new FacetProvider([],this,0,value)}compute(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,1,get)}computeN(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,2,get)}from(field,get){return get||(get=x=>x),this.compute([field],(state=>get(state.field(field))))}}function sameArray(a,b){return a==b||a.length==b.length&&a.every(((e,i)=>e===b[i]))}class FacetProvider{constructor(dependencies,facet,type,value){this.dependencies=dependencies,this.facet=facet,this.type=type,this.value=value,this.id=nextID++}dynamicSlot(addresses){var _a;let getter=this.value,compare=this.facet.compareInput,id=this.id,idx=addresses[id]>>1,multi=2==this.type,depDoc=!1,depSel=!1,depAddrs=[];for(let dep of this.dependencies)"doc"==dep?depDoc=!0:"selection"==dep?depSel=!0:0==(1&(null!==(_a=addresses[dep.id])&&void 0!==_a?_a:1))&&depAddrs.push(addresses[dep.id]);return{create:state=>(state.values[idx]=getter(state),1),update(state,tr){if(depDoc&&tr.docChanged||depSel&&(tr.docChanged||tr.selection)||ensureAll(state,depAddrs)){let newVal=getter(state);if(multi?!compareArray(newVal,state.values[idx],compare):!compare(newVal,state.values[idx]))return state.values[idx]=newVal,1}return 0},reconfigure:(state,oldState)=>{let newVal,oldAddr=oldState.config.address[id];if(null!=oldAddr){let oldVal=getAddr(oldState,oldAddr);if(this.dependencies.every((dep=>dep instanceof Facet?oldState.facet(dep)===state.facet(dep):!(dep instanceof dist_StateField)||oldState.field(dep,!1)==state.field(dep,!1)))||(multi?compareArray(newVal=getter(state),oldVal,compare):compare(newVal=getter(state),oldVal)))return state.values[idx]=oldVal,0}else newVal=getter(state);return state.values[idx]=newVal,1}}}}function compareArray(a,b,compare){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!compare(a[i],b[i]))return!1;return!0}function ensureAll(state,addrs){let changed=!1;for(let addr of addrs)1&ensureAddr(state,addr)&&(changed=!0);return changed}function dynamicFacetSlot(addresses,facet,providers){let providerAddrs=providers.map((p=>addresses[p.id])),providerTypes=providers.map((p=>p.type)),dynamic=providerAddrs.filter((p=>!(1&p))),idx=addresses[facet.id]>>1;function get(state){let values=[];for(let i=0;i<providerAddrs.length;i++){let value=getAddr(state,providerAddrs[i]);if(2==providerTypes[i])for(let val of value)values.push(val);else values.push(value)}return facet.combine(values)}return{create(state){for(let addr of providerAddrs)ensureAddr(state,addr);return state.values[idx]=get(state),1},update(state,tr){if(!ensureAll(state,dynamic))return 0;let value=get(state);return facet.compare(value,state.values[idx])?0:(state.values[idx]=value,1)},reconfigure(state,oldState){let depChanged=ensureAll(state,providerAddrs),oldProviders=oldState.config.facets[facet.id],oldValue=oldState.facet(facet);if(oldProviders&&!depChanged&&sameArray(providers,oldProviders))return state.values[idx]=oldValue,0;let value=get(state);return facet.compare(value,oldValue)?(state.values[idx]=oldValue,0):(state.values[idx]=value,1)}}}const initField=Facet.define({static:!0});class dist_StateField{constructor(id,createF,updateF,compareF,spec){this.id=id,this.createF=createF,this.updateF=updateF,this.compareF=compareF,this.spec=spec,this.provides=void 0}static define(config){let field=new dist_StateField(nextID++,config.create,config.update,config.compare||((a,b)=>a===b),config);return config.provide&&(field.provides=config.provide(field)),field}create(state){let init=state.facet(initField).find((i=>i.field==this));return((null==init?void 0:init.create)||this.createF)(state)}slot(addresses){let idx=addresses[this.id]>>1;return{create:state=>(state.values[idx]=this.create(state),1),update:(state,tr)=>{let oldVal=state.values[idx],value=this.updateF(oldVal,tr);return this.compareF(oldVal,value)?0:(state.values[idx]=value,1)},reconfigure:(state,oldState)=>null!=oldState.config.address[this.id]?(state.values[idx]=oldState.field(this),0):(state.values[idx]=this.create(state),1)}}init(create){return[this,initField.of({field:this,create})]}get extension(){return this}}const Prec__lowest=4,Prec__low=3,Prec__default=2,Prec__high=1;function prec(value){return ext=>new PrecExtension(ext,value)}const dist_Prec={highest:prec(0),high:prec(Prec__high),default:prec(Prec__default),low:prec(Prec__low),lowest:prec(Prec__lowest)};class PrecExtension{constructor(inner,prec){this.inner=inner,this.prec=prec}}class Compartment{of(ext){return new CompartmentInstance(this,ext)}reconfigure(content){return Compartment.reconfigure.of({compartment:this,extension:content})}get(state){return state.config.compartments.get(this)}}class CompartmentInstance{constructor(compartment,inner){this.compartment=compartment,this.inner=inner}}class Configuration{constructor(base,compartments,dynamicSlots,address,staticValues,facets){for(this.base=base,this.compartments=compartments,this.dynamicSlots=dynamicSlots,this.address=address,this.staticValues=staticValues,this.facets=facets,this.statusTemplate=[];this.statusTemplate.length<dynamicSlots.length;)this.statusTemplate.push(0)}staticFacet(facet){let addr=this.address[facet.id];return null==addr?facet.default:this.staticValues[addr>>1]}static resolve(base,compartments,oldState){let fields=[],facets=Object.create(null),newCompartments=new Map;for(let ext of function flatten(extension,compartments,newCompartments){let result=[[],[],[],[],[]],seen=new Map;function inner(ext,prec){let known=seen.get(ext);if(null!=known){if(known<=prec)return;let found=result[known].indexOf(ext);found>-1&&result[known].splice(found,1),ext instanceof CompartmentInstance&&newCompartments.delete(ext.compartment)}if(seen.set(ext,prec),Array.isArray(ext))for(let e of ext)inner(e,prec);else if(ext instanceof CompartmentInstance){if(newCompartments.has(ext.compartment))throw new RangeError("Duplicate use of compartment in extensions");let content=compartments.get(ext.compartment)||ext.inner;newCompartments.set(ext.compartment,content),inner(content,prec)}else if(ext instanceof PrecExtension)inner(ext.inner,ext.prec);else if(ext instanceof dist_StateField)result[prec].push(ext),ext.provides&&inner(ext.provides,prec);else if(ext instanceof FacetProvider)result[prec].push(ext),ext.facet.extensions&&inner(ext.facet.extensions,Prec__default);else{let content=ext.extension;if(!content)throw new Error(`Unrecognized extension value in extension set (${ext}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);inner(content,prec)}}return inner(extension,Prec__default),result.reduce(((a,b)=>a.concat(b)))}(base,compartments,newCompartments))ext instanceof dist_StateField?fields.push(ext):(facets[ext.facet.id]||(facets[ext.facet.id]=[])).push(ext);let address=Object.create(null),staticValues=[],dynamicSlots=[];for(let field of fields)address[field.id]=dynamicSlots.length<<1,dynamicSlots.push((a=>field.slot(a)));let oldFacets=null==oldState?void 0:oldState.config.facets;for(let id in facets){let providers=facets[id],facet=providers[0].facet,oldProviders=oldFacets&&oldFacets[id]||[];if(providers.every((p=>0==p.type)))if(address[facet.id]=staticValues.length<<1|1,sameArray(oldProviders,providers))staticValues.push(oldState.facet(facet));else{let value=facet.combine(providers.map((p=>p.value)));staticValues.push(oldState&&facet.compare(value,oldState.facet(facet))?oldState.facet(facet):value)}else{for(let p of providers)0==p.type?(address[p.id]=staticValues.length<<1|1,staticValues.push(p.value)):(address[p.id]=dynamicSlots.length<<1,dynamicSlots.push((a=>p.dynamicSlot(a))));address[facet.id]=dynamicSlots.length<<1,dynamicSlots.push((a=>dynamicFacetSlot(a,facet,providers)))}}let dynamic=dynamicSlots.map((f=>f(address)));return new Configuration(base,newCompartments,dynamic,address,staticValues,facets)}}function ensureAddr(state,addr){if(1&addr)return 2;let idx=addr>>1,status=state.status[idx];if(4==status)throw new Error("Cyclic dependency between fields and/or facets");if(2&status)return status;state.status[idx]=4;let changed=state.computeSlot(state,state.config.dynamicSlots[idx]);return state.status[idx]=2|changed}function getAddr(state,addr){return 1&addr?state.config.staticValues[addr>>1]:state.values[addr>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:values=>values.some((v=>v)),static:!0}),lineSeparator=Facet.define({combine:values=>values.length?values[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:values=>!!values.length&&values[0]});class Annotation{constructor(type,value){this.type=type,this.value=value}static define(){return new AnnotationType}}class AnnotationType{of(value){return new Annotation(this,value)}}class StateEffectType{constructor(map){this.map=map}of(value){return new dist_StateEffect(this,value)}}class dist_StateEffect{constructor(type,value){this.type=type,this.value=value}map(mapping){let mapped=this.type.map(this.value,mapping);return void 0===mapped?void 0:mapped==this.value?this:new dist_StateEffect(this.type,mapped)}is(type){return this.type==type}static define(spec={}){return new StateEffectType(spec.map||(v=>v))}static mapEffects(effects,mapping){if(!effects.length)return effects;let result=[];for(let effect of effects){let mapped=effect.map(mapping);mapped&&result.push(mapped)}return result}}dist_StateEffect.reconfigure=dist_StateEffect.define(),dist_StateEffect.appendConfig=dist_StateEffect.define();class Transaction{constructor(startState,changes,selection,effects,annotations,scrollIntoView){this.startState=startState,this.changes=changes,this.selection=selection,this.effects=effects,this.annotations=annotations,this.scrollIntoView=scrollIntoView,this._doc=null,this._state=null,selection&&checkSelection(selection,changes.newLength),annotations.some((a=>a.type==Transaction.time))||(this.annotations=annotations.concat(Transaction.time.of(Date.now())))}static create(startState,changes,selection,effects,annotations,scrollIntoView){return new Transaction(startState,changes,selection,effects,annotations,scrollIntoView)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(type){for(let ann of this.annotations)if(ann.type==type)return ann.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(event){let e=this.annotation(Transaction.userEvent);return!(!e||!(e==event||e.length>event.length&&e.slice(0,event.length)==event&&"."==e[event.length]))}}function joinRanges(a,b){let result=[];for(let iA=0,iB=0;;){let from,to;if(iA<a.length&&(iB==b.length||b[iB]>=a[iA]))from=a[iA++],to=a[iA++];else{if(!(iB<b.length))return result;from=b[iB++],to=b[iB++]}!result.length||result[result.length-1]<from?result.push(from,to):result[result.length-1]<to&&(result[result.length-1]=to)}}function mergeTransaction(a,b,sequential){var _a;let mapForA,mapForB,changes;return sequential?(mapForA=b.changes,mapForB=ChangeSet.empty(b.changes.length),changes=a.changes.compose(b.changes)):(mapForA=b.changes.map(a.changes),mapForB=a.changes.mapDesc(b.changes,!0),changes=a.changes.compose(mapForA)),{changes,selection:b.selection?b.selection.map(mapForB):null===(_a=a.selection)||void 0===_a?void 0:_a.map(mapForA),effects:dist_StateEffect.mapEffects(a.effects,mapForA).concat(dist_StateEffect.mapEffects(b.effects,mapForB)),annotations:a.annotations.length?a.annotations.concat(b.annotations):b.annotations,scrollIntoView:a.scrollIntoView||b.scrollIntoView}}function resolveTransactionInner(state,spec,docSize){let sel=spec.selection,annotations=asArray(spec.annotations);return spec.userEvent&&(annotations=annotations.concat(Transaction.userEvent.of(spec.userEvent))),{changes:spec.changes instanceof ChangeSet?spec.changes:ChangeSet.of(spec.changes||[],docSize,state.facet(lineSeparator)),selection:sel&&(sel instanceof dist_EditorSelection?sel:dist_EditorSelection.single(sel.anchor,sel.head)),effects:asArray(spec.effects),annotations,scrollIntoView:!!spec.scrollIntoView}}function resolveTransaction(state,specs,filter){let s=resolveTransactionInner(state,specs.length?specs[0]:{},state.doc.length);specs.length&&!1===specs[0].filter&&(filter=!1);for(let i=1;i<specs.length;i++){!1===specs[i].filter&&(filter=!1);let seq=!!specs[i].sequential;s=mergeTransaction(s,resolveTransactionInner(state,specs[i],seq?s.changes.newLength:state.doc.length),seq)}let tr=Transaction.create(state,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return function extendTransaction(tr){let state=tr.startState,extenders=state.facet(transactionExtender),spec=tr;for(let i=extenders.length-1;i>=0;i--){let extension=extenders[i](tr);extension&&Object.keys(extension).length&&(spec=mergeTransaction(spec,resolveTransactionInner(state,extension,tr.changes.newLength),!0))}return spec==tr?tr:Transaction.create(state,tr.changes,tr.selection,spec.effects,spec.annotations,spec.scrollIntoView)}(filter?function filterTransaction(tr){let state=tr.startState,result=!0;for(let filter of state.facet(changeFilter)){let value=filter(tr);if(!1===value){result=!1;break}Array.isArray(value)&&(result=!0===result?value:joinRanges(result,value))}if(!0!==result){let changes,back;if(!1===result)back=tr.changes.invertedDesc,changes=ChangeSet.empty(state.doc.length);else{let filtered=tr.changes.filter(result);changes=filtered.changes,back=filtered.filtered.mapDesc(filtered.changes).invertedDesc}tr=Transaction.create(state,changes,tr.selection&&tr.selection.map(back),dist_StateEffect.mapEffects(tr.effects,back),tr.annotations,tr.scrollIntoView)}let filters=state.facet(transactionFilter);for(let i=filters.length-1;i>=0;i--){let filtered=filters[i](tr);tr=filtered instanceof Transaction?filtered:Array.isArray(filtered)&&1==filtered.length&&filtered[0]instanceof Transaction?filtered[0]:resolveTransaction(state,asArray(filtered),!1)}return tr}(tr):tr)}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();const none=[];function asArray(value){return null==value?none:Array.isArray(value)?value:[value]}var dist_CharCategory=function(CharCategory){return CharCategory[CharCategory.Word=0]="Word",CharCategory[CharCategory.Space=1]="Space",CharCategory[CharCategory.Other=2]="Other",CharCategory}(dist_CharCategory||(dist_CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(_){}function makeCategorizer(wordChars){return char=>{if(!/\S/.test(char))return dist_CharCategory.Space;if(function hasWordChar(str){if(wordChar)return wordChar.test(str);for(let i=0;i<str.length;i++){let ch=str[i];if(/\w/.test(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch)))return!0}return!1}(char))return dist_CharCategory.Word;for(let i=0;i<wordChars.length;i++)if(char.indexOf(wordChars[i])>-1)return dist_CharCategory.Word;return dist_CharCategory.Other}}class dist_EditorState{constructor(config,doc,selection,values,computeSlot,tr){this.config=config,this.doc=doc,this.selection=selection,this.values=values,this.status=config.statusTemplate.slice(),this.computeSlot=computeSlot,tr&&(tr._state=this);for(let i=0;i<this.config.dynamicSlots.length;i++)ensureAddr(this,i<<1);this.computeSlot=null}field(field,require=!0){let addr=this.config.address[field.id];if(null!=addr)return ensureAddr(this,addr),getAddr(this,addr);if(require)throw new RangeError("Field is not present in this state")}update(...specs){return resolveTransaction(this,specs,!0)}applyTransaction(tr){let startValues,conf=this.config,{base,compartments}=conf;for(let effect of tr.effects)effect.is(Compartment.reconfigure)?(conf&&(compartments=new Map,conf.compartments.forEach(((val,key)=>compartments.set(key,val))),conf=null),compartments.set(effect.value.compartment,effect.value.extension)):effect.is(dist_StateEffect.reconfigure)?(conf=null,base=effect.value):effect.is(dist_StateEffect.appendConfig)&&(conf=null,base=asArray(base).concat(effect.value));if(conf)startValues=tr.startState.values.slice();else{conf=Configuration.resolve(base,compartments,this),startValues=new dist_EditorState(conf,this.doc,this.selection,conf.dynamicSlots.map((()=>null)),((state,slot)=>slot.reconfigure(state,this)),null).values}new dist_EditorState(conf,tr.newDoc,tr.newSelection,startValues,((state,slot)=>slot.update(state,tr)),tr)}replaceSelection(text){return"string"==typeof text&&(text=this.toText(text)),this.changeByRange((range=>({changes:{from:range.from,to:range.to,insert:text},range:dist_EditorSelection.cursor(range.from+text.length)})))}changeByRange(f){let sel=this.selection,result1=f(sel.ranges[0]),changes=this.changes(result1.changes),ranges=[result1.range],effects=asArray(result1.effects);for(let i=1;i<sel.ranges.length;i++){let result=f(sel.ranges[i]),newChanges=this.changes(result.changes),newMapped=newChanges.map(changes);for(let j=0;j<i;j++)ranges[j]=ranges[j].map(newMapped);let mapBy=changes.mapDesc(newChanges,!0);ranges.push(result.range.map(mapBy)),changes=changes.compose(newMapped),effects=dist_StateEffect.mapEffects(effects,newMapped).concat(dist_StateEffect.mapEffects(asArray(result.effects),mapBy))}return{changes,selection:dist_EditorSelection.create(ranges,sel.mainIndex),effects}}changes(spec=[]){return spec instanceof ChangeSet?spec:ChangeSet.of(spec,this.doc.length,this.facet(dist_EditorState.lineSeparator))}toText(string){return Text.of(string.split(this.facet(dist_EditorState.lineSeparator)||DefaultSplit))}sliceDoc(from=0,to=this.doc.length){return this.doc.sliceString(from,to,this.lineBreak)}facet(facet){let addr=this.config.address[facet.id];return null==addr?facet.default:(ensureAddr(this,addr),getAddr(this,addr))}toJSON(fields){let result={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(fields)for(let prop in fields){let value=fields[prop];value instanceof dist_StateField&&null!=this.config.address[value.id]&&(result[prop]=value.spec.toJSON(this.field(fields[prop]),this))}return result}static fromJSON(json,config={},fields){if(!json||"string"!=typeof json.doc)throw new RangeError("Invalid JSON representation for EditorState");let fieldInit=[];if(fields)for(let prop in fields)if(Object.prototype.hasOwnProperty.call(json,prop)){let field=fields[prop],value=json[prop];fieldInit.push(field.init((state=>field.spec.fromJSON(value,state))))}return dist_EditorState.create({doc:json.doc,selection:dist_EditorSelection.fromJSON(json.selection),extensions:config.extensions?fieldInit.concat([config.extensions]):fieldInit})}static create(config={}){let configuration=Configuration.resolve(config.extensions||[],new Map),doc=config.doc instanceof Text?config.doc:Text.of((config.doc||"").split(configuration.staticFacet(dist_EditorState.lineSeparator)||DefaultSplit)),selection=config.selection?config.selection instanceof dist_EditorSelection?config.selection:dist_EditorSelection.single(config.selection.anchor,config.selection.head):dist_EditorSelection.single(0);return checkSelection(selection,doc.length),configuration.staticFacet(allowMultipleSelections)||(selection=selection.asSingle()),new dist_EditorState(configuration,doc,selection,configuration.dynamicSlots.map((()=>null)),((state,slot)=>slot.create(state)),null)}get tabSize(){return this.facet(dist_EditorState.tabSize)}get lineBreak(){return this.facet(dist_EditorState.lineSeparator)||"\n"}get readOnly(){return this.facet(readOnly)}phrase(phrase,...insert){for(let map of this.facet(dist_EditorState.phrases))if(Object.prototype.hasOwnProperty.call(map,phrase)){phrase=map[phrase];break}return insert.length&&(phrase=phrase.replace(/\$(\$|\d*)/g,((m,i)=>{if("$"==i)return"$";let n=+(i||1);return!n||n>insert.length?m:insert[n-1]}))),phrase}languageDataAt(name,pos,side=-1){let values=[];for(let provider of this.facet(languageData))for(let result of provider(this,pos,side))Object.prototype.hasOwnProperty.call(result,name)&&values.push(result[name]);return values}charCategorizer(at){return makeCategorizer(this.languageDataAt("wordChars",at).join(""))}wordAt(pos){let{text,from,length}=this.doc.lineAt(pos),cat=this.charCategorizer(pos),start=pos-from,end=pos-from;for(;start>0;){let prev=findClusterBreak(text,start,!1);if(cat(text.slice(prev,start))!=dist_CharCategory.Word)break;start=prev}for(;end<length;){let next=findClusterBreak(text,end);if(cat(text.slice(end,next))!=dist_CharCategory.Word)break;end=next}return start==end?null:dist_EditorSelection.range(start+from,end+from)}}function combineConfig(configs,defaults,combine={}){let result={};for(let config of configs)for(let key of Object.keys(config)){let value=config[key],current=result[key];if(void 0===current)result[key]=value;else if(current===value||void 0===value);else{if(!Object.hasOwnProperty.call(combine,key))throw new Error("Config merge conflict for field "+key);result[key]=combine[key](current,value)}}for(let key in defaults)void 0===result[key]&&(result[key]=defaults[key]);return result}dist_EditorState.allowMultipleSelections=allowMultipleSelections,dist_EditorState.tabSize=Facet.define({combine:values=>values.length?values[0]:4}),dist_EditorState.lineSeparator=lineSeparator,dist_EditorState.readOnly=readOnly,dist_EditorState.phrases=Facet.define({compare(a,b){let kA=Object.keys(a),kB=Object.keys(b);return kA.length==kB.length&&kA.every((k=>a[k]==b[k]))}}),dist_EditorState.languageData=languageData,dist_EditorState.changeFilter=changeFilter,dist_EditorState.transactionFilter=transactionFilter,dist_EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=dist_StateEffect.define();class RangeValue{eq(other){return this==other}range(from,to=from){return Range.create(from,to,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=dist_MapMode.TrackDel;class Range{constructor(from,to,value){this.from=from,this.to=to,this.value=value}static create(from,to,value){return new Range(from,to,value)}}function cmpRange(a,b){return a.from-b.from||a.value.startSide-b.value.startSide}class Chunk{constructor(from,to,value,maxPoint){this.from=from,this.to=to,this.value=value,this.maxPoint=maxPoint}get length(){return this.to[this.to.length-1]}findIndex(pos,side,end,startAt=0){let arr=end?this.to:this.from;for(let lo=startAt,hi=arr.length;;){if(lo==hi)return lo;let mid=lo+hi>>1,diff=arr[mid]-pos||(end?this.value[mid].endSide:this.value[mid].startSide)-side;if(mid==lo)return diff>=0?lo:hi;diff>=0?hi=mid:lo=mid+1}}between(offset,from,to,f){for(let i=this.findIndex(from,-1e9,!0),e=this.findIndex(to,1e9,!1,i);i<e;i++)if(!1===f(this.from[i]+offset,this.to[i]+offset,this.value[i]))return!1}map(offset,changes){let value=[],from=[],to=[],newPos=-1,maxPoint=-1;for(let i=0;i<this.value.length;i++){let newFrom,newTo,val=this.value[i],curFrom=this.from[i]+offset,curTo=this.to[i]+offset;if(curFrom==curTo){let mapped=changes.mapPos(curFrom,val.startSide,val.mapMode);if(null==mapped)continue;if(newFrom=newTo=mapped,val.startSide!=val.endSide&&(newTo=changes.mapPos(curFrom,val.endSide),newTo<newFrom))continue}else if(newFrom=changes.mapPos(curFrom,val.startSide),newTo=changes.mapPos(curTo,val.endSide),newFrom>newTo||newFrom==newTo&&val.startSide>0&&val.endSide<=0)continue;(newTo-newFrom||val.endSide-val.startSide)<0||(newPos<0&&(newPos=newFrom),val.point&&(maxPoint=Math.max(maxPoint,newTo-newFrom)),value.push(val),from.push(newFrom-newPos),to.push(newTo-newPos))}return{mapped:value.length?new Chunk(from,to,value,maxPoint):null,pos:newPos}}}class dist_RangeSet{constructor(chunkPos,chunk,nextLayer,maxPoint){this.chunkPos=chunkPos,this.chunk=chunk,this.nextLayer=nextLayer,this.maxPoint=maxPoint}static create(chunkPos,chunk,nextLayer,maxPoint){return new dist_RangeSet(chunkPos,chunk,nextLayer,maxPoint)}get length(){let last=this.chunk.length-1;return last<0?0:Math.max(this.chunkEnd(last),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let size=this.nextLayer.size;for(let chunk of this.chunk)size+=chunk.value.length;return size}chunkEnd(index){return this.chunkPos[index]+this.chunk[index].length}update(updateSpec){let{add=[],sort=!1,filterFrom=0,filterTo=this.length}=updateSpec,filter=updateSpec.filter;if(0==add.length&&!filter)return this;if(sort&&(add=add.slice().sort(cmpRange)),this.isEmpty)return add.length?dist_RangeSet.of(add):this;let cur=new LayerCursor(this,null,-1).goto(0),i=0,spill=[],builder=new dist_RangeSetBuilder;for(;cur.value||i<add.length;)if(i<add.length&&(cur.from-add[i].from||cur.startSide-add[i].value.startSide)>=0){let range=add[i++];builder.addInner(range.from,range.to,range.value)||spill.push(range)}else 1==cur.rangeIndex&&cur.chunkIndex<this.chunk.length&&(i==add.length||this.chunkEnd(cur.chunkIndex)<add[i].from)&&(!filter||filterFrom>this.chunkEnd(cur.chunkIndex)||filterTo<this.chunkPos[cur.chunkIndex])&&builder.addChunk(this.chunkPos[cur.chunkIndex],this.chunk[cur.chunkIndex])?cur.nextChunk():((!filter||filterFrom>cur.to||filterTo<cur.from||filter(cur.from,cur.to,cur.value))&&(builder.addInner(cur.from,cur.to,cur.value)||spill.push(Range.create(cur.from,cur.to,cur.value))),cur.next());return builder.finishInner(this.nextLayer.isEmpty&&!spill.length?dist_RangeSet.empty:this.nextLayer.update({add:spill,filter,filterFrom,filterTo}))}map(changes){if(changes.empty||this.isEmpty)return this;let chunks=[],chunkPos=[],maxPoint=-1;for(let i=0;i<this.chunk.length;i++){let start=this.chunkPos[i],chunk=this.chunk[i],touch=changes.touchesRange(start,start+chunk.length);if(!1===touch)maxPoint=Math.max(maxPoint,chunk.maxPoint),chunks.push(chunk),chunkPos.push(changes.mapPos(start));else if(!0===touch){let{mapped,pos}=chunk.map(start,changes);mapped&&(maxPoint=Math.max(maxPoint,mapped.maxPoint),chunks.push(mapped),chunkPos.push(pos))}}let next=this.nextLayer.map(changes);return 0==chunks.length?next:new dist_RangeSet(chunkPos,chunks,next||dist_RangeSet.empty,maxPoint)}between(from,to,f){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let start=this.chunkPos[i],chunk=this.chunk[i];if(to>=start&&from<=start+chunk.length&&!1===chunk.between(start,from-start,to-start,f))return}this.nextLayer.between(from,to,f)}}iter(from=0){return HeapCursor.from([this]).goto(from)}get isEmpty(){return this.nextLayer==this}static iter(sets,from=0){return HeapCursor.from(sets).goto(from)}static compare(oldSets,newSets,textDiff,comparator,minPointSize=-1){let a=oldSets.filter((set=>set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize)),b=newSets.filter((set=>set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize)),sharedChunks=findSharedChunks(a,b,textDiff),sideA=new SpanCursor(a,sharedChunks,minPointSize),sideB=new SpanCursor(b,sharedChunks,minPointSize);textDiff.iterGaps(((fromA,fromB,length)=>compare(sideA,fromA,sideB,fromB,length,comparator))),textDiff.empty&&0==textDiff.length&&compare(sideA,0,sideB,0,0,comparator)}static eq(oldSets,newSets,from=0,to){null==to&&(to=999999999);let a=oldSets.filter((set=>!set.isEmpty&&newSets.indexOf(set)<0)),b=newSets.filter((set=>!set.isEmpty&&oldSets.indexOf(set)<0));if(a.length!=b.length)return!1;if(!a.length)return!0;let sharedChunks=findSharedChunks(a,b),sideA=new SpanCursor(a,sharedChunks,0).goto(from),sideB=new SpanCursor(b,sharedChunks,0).goto(from);for(;;){if(sideA.to!=sideB.to||!sameValues(sideA.active,sideB.active)||sideA.point&&(!sideB.point||!sideA.point.eq(sideB.point)))return!1;if(sideA.to>to)return!0;sideA.next(),sideB.next()}}static spans(sets,from,to,iterator,minPointSize=-1){let cursor=new SpanCursor(sets,null,minPointSize).goto(from),pos=from,openRanges=cursor.openStart;for(;;){let curTo=Math.min(cursor.to,to);if(cursor.point){let active=cursor.activeForPoint(cursor.to),openCount=cursor.pointFrom<from?active.length+1:Math.min(active.length,openRanges);iterator.point(pos,curTo,cursor.point,active,openCount,cursor.pointRank),openRanges=Math.min(cursor.openEnd(curTo),active.length)}else curTo>pos&&(iterator.span(pos,curTo,cursor.active,openRanges),openRanges=cursor.openEnd(curTo));if(cursor.to>to)return openRanges+(cursor.point&&cursor.to>to?1:0);pos=cursor.to,cursor.next()}}static of(ranges,sort=!1){let build=new dist_RangeSetBuilder;for(let range of ranges instanceof Range?[ranges]:sort?function lazySort(ranges){if(ranges.length>1)for(let prev=ranges[0],i=1;i<ranges.length;i++){let cur=ranges[i];if(cmpRange(prev,cur)>0)return ranges.slice().sort(cmpRange);prev=cur}return ranges}(ranges):ranges)build.add(range.from,range.to,range.value);return build.finish()}}dist_RangeSet.empty=new dist_RangeSet([],[],null,-1),dist_RangeSet.empty.nextLayer=dist_RangeSet.empty;class dist_RangeSetBuilder{finishChunk(newArrays){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,newArrays&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(from,to,value){this.addInner(from,to,value)||(this.nextLayer||(this.nextLayer=new dist_RangeSetBuilder)).add(from,to,value)}addInner(from,to,value){let diff=from-this.lastTo||value.startSide-this.last.endSide;if(diff<=0&&(from-this.lastFrom||value.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(diff<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=from),this.from.push(from-this.chunkStart),this.to.push(to-this.chunkStart),this.last=value,this.lastFrom=from,this.lastTo=to,this.value.push(value),value.point&&(this.maxPoint=Math.max(this.maxPoint,to-from)),!0)}addChunk(from,chunk){if((from-this.lastTo||chunk.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,chunk.maxPoint),this.chunks.push(chunk),this.chunkPos.push(from);let last=chunk.value.length-1;return this.last=chunk.value[last],this.lastFrom=chunk.from[last]+from,this.lastTo=chunk.to[last]+from,!0}finish(){return this.finishInner(dist_RangeSet.empty)}finishInner(next){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return next;let result=dist_RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(next):next,this.setMaxPoint);return this.from=null,result}}function findSharedChunks(a,b,textDiff){let inA=new Map;for(let set of a)for(let i=0;i<set.chunk.length;i++)set.chunk[i].maxPoint<=0&&inA.set(set.chunk[i],set.chunkPos[i]);let shared=new Set;for(let set of b)for(let i=0;i<set.chunk.length;i++){let known=inA.get(set.chunk[i]);null==known||(textDiff?textDiff.mapPos(known):known)!=set.chunkPos[i]||(null==textDiff?void 0:textDiff.touchesRange(known,known+set.chunk[i].length))||shared.add(set.chunk[i])}return shared}class LayerCursor{constructor(layer,skip,minPoint,rank=0){this.layer=layer,this.skip=skip,this.minPoint=minPoint,this.rank=rank}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(pos,side=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(pos,side,!1),this}gotoInner(pos,side,forward){for(;this.chunkIndex<this.layer.chunk.length;){let next=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(next)||this.layer.chunkEnd(this.chunkIndex)<pos||next.maxPoint<this.minPoint))break;this.chunkIndex++,forward=!1}if(this.chunkIndex<this.layer.chunk.length){let rangeIndex=this.layer.chunk[this.chunkIndex].findIndex(pos-this.layer.chunkPos[this.chunkIndex],side,!0);(!forward||this.rangeIndex<rangeIndex)&&this.setRangeIndex(rangeIndex)}this.next()}forward(pos,side){(this.to-pos||this.endSide-side)<0&&this.gotoInner(pos,side,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let chunkPos=this.layer.chunkPos[this.chunkIndex],chunk=this.layer.chunk[this.chunkIndex],from=chunkPos+chunk.from[this.rangeIndex];if(this.from=from,this.to=chunkPos+chunk.to[this.rangeIndex],this.value=chunk.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(index){if(index==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=index}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(other){return this.from-other.from||this.startSide-other.startSide||this.rank-other.rank||this.to-other.to||this.endSide-other.endSide}}class HeapCursor{constructor(heap){this.heap=heap}static from(sets,skip=null,minPoint=-1){let heap=[];for(let i=0;i<sets.length;i++)for(let cur=sets[i];!cur.isEmpty;cur=cur.nextLayer)cur.maxPoint>=minPoint&&heap.push(new LayerCursor(cur,skip,minPoint,i));return 1==heap.length?heap[0]:new HeapCursor(heap)}get startSide(){return this.value?this.value.startSide:0}goto(pos,side=-1e9){for(let cur of this.heap)cur.goto(pos,side);for(let i=this.heap.length>>1;i>=0;i--)heapBubble(this.heap,i);return this.next(),this}forward(pos,side){for(let cur of this.heap)cur.forward(pos,side);for(let i=this.heap.length>>1;i>=0;i--)heapBubble(this.heap,i);(this.to-pos||this.value.endSide-side)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let top=this.heap[0];this.from=top.from,this.to=top.to,this.value=top.value,this.rank=top.rank,top.value&&top.next(),heapBubble(this.heap,0)}}}function heapBubble(heap,index){for(let cur=heap[index];;){let childIndex=1+(index<<1);if(childIndex>=heap.length)break;let child=heap[childIndex];if(childIndex+1<heap.length&&child.compare(heap[childIndex+1])>=0&&(child=heap[childIndex+1],childIndex++),cur.compare(child)<0)break;heap[childIndex]=cur,heap[index]=child,index=childIndex}}class SpanCursor{constructor(sets,skip,minPoint){this.minPoint=minPoint,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(sets,skip,minPoint)}goto(pos,side=-1e9){return this.cursor.goto(pos,side),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=pos,this.endSide=side,this.openStart=-1,this.next(),this}forward(pos,side){for(;this.minActive>-1&&(this.activeTo[this.minActive]-pos||this.active[this.minActive].endSide-side)<0;)this.removeActive(this.minActive);this.cursor.forward(pos,side)}removeActive(index){remove(this.active,index),remove(this.activeTo,index),remove(this.activeRank,index),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(trackOpen){let i=0,{value,to,rank}=this.cursor;for(;i<this.activeRank.length&&this.activeRank[i]<=rank;)i++;insert(this.active,i,value),insert(this.activeTo,i,to),insert(this.activeRank,i,rank),trackOpen&&insert(trackOpen,i,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let from=this.to,wasPoint=this.point;this.point=null;let trackOpen=this.openStart<0?[]:null;for(;;){let a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>from){this.to=this.activeTo[a],this.endSide=this.active[a].endSide;break}this.removeActive(a),trackOpen&&remove(trackOpen,a)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>from){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let nextVal=this.cursor.value;if(nextVal.point){if(!(wasPoint&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=nextVal,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=nextVal.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(trackOpen),this.cursor.next()}}}if(trackOpen){this.openStart=0;for(let i=trackOpen.length-1;i>=0&&trackOpen[i]<from;i--)this.openStart++}}activeForPoint(to){if(!this.active.length)return this.active;let active=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>to||this.activeTo[i]==to&&this.active[i].endSide>=this.point.endSide)&&active.push(this.active[i]);return active.reverse()}openEnd(to){let open=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>to;i--)open++;return open}}function compare(a,startA,b,startB,length,comparator){a.goto(startA),b.goto(startB);let endB=startB+length,pos=startB,dPos=startB-startA;for(;;){let diff=a.to+dPos-b.to||a.endSide-b.endSide,end=diff<0?a.to+dPos:b.to,clipEnd=Math.min(end,endB);if(a.point||b.point?a.point&&b.point&&(a.point==b.point||a.point.eq(b.point))&&sameValues(a.activeForPoint(a.to),b.activeForPoint(b.to))||comparator.comparePoint(pos,clipEnd,a.point,b.point):clipEnd>pos&&!sameValues(a.active,b.active)&&comparator.compareRange(pos,clipEnd,a.active,b.active),end>endB)break;pos=end,diff<=0&&a.next(),diff>=0&&b.next()}}function sameValues(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(a[i]!=b[i]&&!a[i].eq(b[i]))return!1;return!0}function remove(array,index){for(let i=index,e=array.length-1;i<e;i++)array[i]=array[i+1];array.pop()}function insert(array,index,value){for(let i=array.length-1;i>=index;i--)array[i+1]=array[i];array[index]=value}function findMinIndex(value,array){let found=-1,foundPos=1e9;for(let i=0;i<array.length;i++)(array[i]-foundPos||value[i].endSide-value[found].endSide)<0&&(found=i,foundPos=array[i]);return found}function dist_countColumn(string,tabSize,to=string.length){let n=0;for(let i=0;i<to;)9==string.charCodeAt(i)?(n+=tabSize-n%tabSize,i++):(n++,i=findClusterBreak(string,i));return n}const COUNT="undefined"==typeof Symbol?"__":Symbol.for(""),SET="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),style_mod_top="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class StyleModule{constructor(spec,options){this.rules=[];let{finish}=options||{};function splitSelector(selector){return/^@/.test(selector)?[selector]:selector.split(/,\s*/)}function render(selectors,spec,target,isKeyframes){let local=[],isAt=/^@(\w+)\b/.exec(selectors[0]),keyframes=isAt&&"keyframes"==isAt[1];if(isAt&&null==spec)return target.push(selectors[0]+";");for(let prop in spec){let value=spec[prop];if(/&/.test(prop))render(prop.split(/,\s*/).map((part=>selectors.map((sel=>part.replace(/&/,sel))))).reduce(((a,b)=>a.concat(b))),value,target);else if(value&&"object"==typeof value){if(!isAt)throw new RangeError("The value of a property ("+prop+") should be a primitive value.");render(splitSelector(prop),value,local,keyframes)}else null!=value&&local.push(prop.replace(/_.*/,"").replace(/[A-Z]/g,(l=>"-"+l.toLowerCase()))+": "+value+";")}(local.length||keyframes)&&target.push((!finish||isAt||isKeyframes?selectors:selectors.map(finish)).join(", ")+" {"+local.join(" ")+"}")}for(let prop in spec)render(splitSelector(prop),spec[prop],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let id=style_mod_top[COUNT]||1;return style_mod_top[COUNT]=id+1,""+id.toString(36)}static mount(root,modules,options){let set=root[SET],nonce=options&&options.nonce;set?nonce&&set.setNonce(nonce):set=new StyleSet(root,nonce),set.mount(Array.isArray(modules)?modules:[modules])}}let adoptedSet=new Map;class StyleSet{constructor(root,nonce){let doc=root.ownerDocument||root,win=doc.defaultView;if(!root.head&&root.adoptedStyleSheets&&win.CSSStyleSheet){let adopted=adoptedSet.get(doc);if(adopted)return root.adoptedStyleSheets=[adopted.sheet,...root.adoptedStyleSheets],root[SET]=adopted;this.sheet=new win.CSSStyleSheet,root.adoptedStyleSheets=[this.sheet,...root.adoptedStyleSheets],adoptedSet.set(doc,this)}else{this.styleTag=doc.createElement("style"),nonce&&this.styleTag.setAttribute("nonce",nonce);let target=root.head||root;target.insertBefore(this.styleTag,target.firstChild)}this.modules=[],root[SET]=this}mount(modules){let sheet=this.sheet,pos=0,j=0;for(let i=0;i<modules.length;i++){let mod=modules[i],index=this.modules.indexOf(mod);if(index<j&&index>-1&&(this.modules.splice(index,1),j--,index=-1),-1==index){if(this.modules.splice(j++,0,mod),sheet)for(let k=0;k<mod.rules.length;k++)sheet.insertRule(mod.rules[k],pos++)}else{for(;j<index;)pos+=this.modules[j++].rules.length;pos+=mod.rules.length,j++}}if(!sheet){let text="";for(let i=0;i<this.modules.length;i++)text+=this.modules[i].getRules()+"\n";this.styleTag.textContent=text}}setNonce(nonce){this.styleTag&&this.styleTag.getAttribute("nonce")!=nonce&&this.styleTag.setAttribute("nonce",nonce)}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),w3c_keyname_i=0;w3c_keyname_i<10;w3c_keyname_i++)base[48+w3c_keyname_i]=base[96+w3c_keyname_i]=String(w3c_keyname_i);for(w3c_keyname_i=1;w3c_keyname_i<=24;w3c_keyname_i++)base[w3c_keyname_i+111]="F"+w3c_keyname_i;for(w3c_keyname_i=65;w3c_keyname_i<=90;w3c_keyname_i++)base[w3c_keyname_i]=String.fromCharCode(w3c_keyname_i+32),shift[w3c_keyname_i]=String.fromCharCode(w3c_keyname_i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function getSelection(root){let target;return target=11==root.nodeType?root.getSelection?root:root.ownerDocument:root,target.getSelection()}function contains(dom,node){return!!node&&(dom==node||dom.contains(1!=node.nodeType?node.parentNode:node))}function hasSelection(dom,selection){if(!selection.anchorNode)return!1;try{return contains(dom,selection.anchorNode)}catch(_){return!1}}function clientRectsFor(dom){return 3==dom.nodeType?textRange(dom,0,dom.nodeValue.length).getClientRects():1==dom.nodeType?dom.getClientRects():[]}function isEquivalentPosition(node,off,targetNode,targetOff){return!!targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))}function domIndex(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index}function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:maxOffset(node))){if("DIV"==node.nodeName)return!1;let parent=node.parentNode;if(!parent||1!=parent.nodeType)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if(1==(node=node.childNodes[off+(dir<0?-1:0)]).nodeType&&"false"==node.contentEditable)return!1;off=dir<0?maxOffset(node):0}}}function maxOffset(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function flattenRect(rect,left){let x=left?rect.left:rect.right;return{left:x,right:x,top:rect.top,bottom:rect.bottom}}function windowRect(win){return{left:0,right:win.innerWidth,top:0,bottom:win.innerHeight}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(domSel){return this.anchorNode==domSel.anchorNode&&this.anchorOffset==domSel.anchorOffset&&this.focusNode==domSel.focusNode&&this.focusOffset==domSel.focusOffset}setRange(range){let{anchorNode,focusNode}=range;this.set(anchorNode,Math.min(range.anchorOffset,anchorNode?maxOffset(anchorNode):0),focusNode,Math.min(range.focusOffset,focusNode?maxOffset(focusNode):0))}set(anchorNode,anchorOffset,focusNode,focusOffset){this.anchorNode=anchorNode,this.anchorOffset=anchorOffset,this.focusNode=focusNode,this.focusOffset=focusOffset}}let scratchRange,preventScrollSupported=null;function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);let stack=[];for(let cur=dom;cur&&(stack.push(cur,cur.scrollTop,cur.scrollLeft),cur!=cur.ownerDocument);cur=cur.parentNode);if(dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let i=0;i<stack.length;){let elt=stack[i++],top=stack[i++],left=stack[i++];elt.scrollTop!=top&&(elt.scrollTop=top),elt.scrollLeft!=left&&(elt.scrollLeft=left)}}}function textRange(node,from,to=from){let range=scratchRange||(scratchRange=document.createRange());return range.setEnd(node,to),range.setStart(node,from),range}function dispatchKey(elt,name,code){let options={key:name,code:name,keyCode:code,which:code,cancelable:!0},down=new KeyboardEvent("keydown",options);down.synthetic=!0,elt.dispatchEvent(down);let up=new KeyboardEvent("keyup",options);return up.synthetic=!0,elt.dispatchEvent(up),down.defaultPrevented||up.defaultPrevented}function clearAttributes(node){for(;node.attributes.length;)node.removeAttributeNode(node.attributes[0])}function isScrolledToBottom(elt){return elt.scrollTop>Math.max(1,elt.scrollHeight-elt.clientHeight-4)}class DOMPos{constructor(node,offset,precise=!0){this.node=node,this.offset=offset,this.precise=precise}static before(dom,precise){return new DOMPos(dom.parentNode,domIndex(dom),precise)}static after(dom,precise){return new DOMPos(dom.parentNode,domIndex(dom)+1,precise)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(view){let pos=this.posAtStart;for(let child of this.children){if(child==view)return pos;pos+=child.length+child.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(view){return this.posBefore(view)+view.length}sync(view,track){if(2&this.flags){let next,parent=this.dom,prev=null;for(let child of this.children){if(7&child.flags){if(!child.dom&&(next=prev?prev.nextSibling:parent.firstChild)){let contentView=ContentView.get(next);(!contentView||!contentView.parent&&contentView.canReuseDOM(child))&&child.reuseDOM(next)}child.sync(view,track),child.flags&=-8}if(next=prev?prev.nextSibling:parent.firstChild,track&&!track.written&&track.node==parent&&next!=child.dom&&(track.written=!0),child.dom.parentNode==parent)for(;next&&next!=child.dom;)next=rm$1(next);else parent.insertBefore(child.dom,next);prev=child.dom}for(next=prev?prev.nextSibling:parent.firstChild,next&&track&&track.node==parent&&(track.written=!0);next;)next=rm$1(next)}else if(1&this.flags)for(let child of this.children)7&child.flags&&(child.sync(view,track),child.flags&=-8)}reuseDOM(_dom){}localPosFromDOM(node,offset){let after;if(node==this.dom)after=this.dom.childNodes[offset];else{let bias=0==maxOffset(node)?0:0==offset?-1:1;for(;;){let parent=node.parentNode;if(parent==this.dom)break;0==bias&&parent.firstChild!=parent.lastChild&&(bias=node==parent.firstChild?-1:1),node=parent}after=bias<0?node:node.nextSibling}if(after==this.dom.firstChild)return 0;for(;after&&!ContentView.get(after);)after=after.nextSibling;if(!after)return this.length;for(let i=0,pos=0;;i++){let child=this.children[i];if(child.dom==after)return pos;pos+=child.length+child.breakAfter}}domBoundsAround(from,to,offset=0){let fromI=-1,fromStart=-1,toI=-1,toEnd=-1;for(let i=0,pos=offset,prevEnd=offset;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(pos<from&&end>to)return child.domBoundsAround(from,to,pos);if(end>=from&&-1==fromI&&(fromI=i,fromStart=pos),pos>to&&child.dom.parentNode==this.dom){toI=i,toEnd=prevEnd;break}prevEnd=end,pos=end+child.breakAfter}return{from:fromStart,to:toEnd<0?offset+this.length:toEnd,startDOM:(fromI?this.children[fromI-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:toI<this.children.length&&toI>=0?this.children[toI].dom:null}}markDirty(andParent=!1){this.flags|=2,this.markParentsDirty(andParent)}markParentsDirty(childList){for(let parent=this.parent;parent;parent=parent.parent){if(childList&&(parent.flags|=2),1&parent.flags)return;parent.flags|=1,childList=!1}}setParent(parent){this.parent!=parent&&(this.parent=parent,7&this.flags&&this.markParentsDirty(!0))}setDOM(dom){this.dom!=dom&&(this.dom&&(this.dom.cmView=null),this.dom=dom,dom.cmView=this)}get rootView(){for(let v=this;;){let parent=v.parent;if(!parent)return v;v=parent}}replaceChildren(from,to,children=noChildren){this.markDirty();for(let i=from;i<to;i++){let child=this.children[i];child.parent==this&&child.destroy()}this.children.splice(from,to-from,...children);for(let i=0;i<children.length;i++)children[i].setParent(this)}ignoreMutation(_rec){return!1}ignoreEvent(_event){return!1}childCursor(pos=this.length){return new ChildCursor(this.children,pos,this.children.length)}childPos(pos,bias=1){return this.childCursor().findPos(pos,bias)}toString(){let name=this.constructor.name.replace("View","");return name+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==name?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(node){return node.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(from,to,source,hasStart,openStart,openEnd){return!1}become(other){return!1}canReuseDOM(other){return other.constructor==this.constructor&&!(8&(this.flags|other.flags))}getSide(){return 0}destroy(){this.parent=null}}function rm$1(dom){let next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}ContentView.prototype.breakAfter=0;class ChildCursor{constructor(children,pos,i){this.children=children,this.pos=pos,this.i=i,this.off=0}findPos(pos,bias=1){for(;;){if(pos>this.pos||pos==this.pos&&(bias>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=pos-this.pos,this;let next=this.children[--this.i];this.pos-=next.length+next.breakAfter}}}function replaceRange(parent,fromI,fromOff,toI,toOff,insert,breakAtStart,openStart,openEnd){let{children}=parent,before=children.length?children[fromI]:null,last=insert.length?insert[insert.length-1]:null,breakAtEnd=last?last.breakAfter:breakAtStart;if(!(fromI==toI&&before&&!breakAtStart&&!breakAtEnd&&insert.length<2&&before.merge(fromOff,toOff,insert.length?last:null,0==fromOff,openStart,openEnd))){if(toI<children.length){let after=children[toI];after&&(toOff<after.length||after.breakAfter&&(null==last?void 0:last.breakAfter))?(fromI==toI&&(after=after.split(toOff),toOff=0),!breakAtEnd&&last&&after.merge(0,toOff,last,!0,0,openEnd)?insert[insert.length-1]=after:((toOff||after.children.length&&!after.children[0].length)&&after.merge(0,toOff,null,!1,0,openEnd),insert.push(after))):(null==after?void 0:after.breakAfter)&&(last?last.breakAfter=1:breakAtStart=1),toI++}for(before&&(before.breakAfter=breakAtStart,fromOff>0&&(!breakAtStart&&insert.length&&before.merge(fromOff,before.length,insert[0],!1,openStart,0)?before.breakAfter=insert.shift().breakAfter:(fromOff<before.length||before.children.length&&0==before.children[before.children.length-1].length)&&before.merge(fromOff,before.length,null,!1,openStart,0),fromI++));fromI<toI&&insert.length;)if(children[toI-1].become(insert[insert.length-1]))toI--,insert.pop(),openEnd=insert.length?0:openStart;else{if(!children[fromI].become(insert[0]))break;fromI++,insert.shift(),openStart=insert.length?0:openEnd}!insert.length&&fromI&&toI<children.length&&!children[fromI-1].breakAfter&&children[toI].merge(0,0,children[fromI-1],!1,openStart,openEnd)&&fromI--,(fromI<toI||insert.length)&&parent.replaceChildren(fromI,toI,insert)}}function mergeChildrenInto(parent,from,to,insert,openStart,openEnd){let cur=parent.childCursor(),{i:toI,off:toOff}=cur.findPos(to,1),{i:fromI,off:fromOff}=cur.findPos(from,-1),dLen=from-to;for(let view of insert)dLen+=view.length;parent.length+=dLen,replaceRange(parent,fromI,fromOff,toI,toOff,insert,0,openStart,openEnd)}let nav="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},doc="undefined"!=typeof document?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),dist_ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!dist_ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!dist_ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!dist_ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:dist_ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=doc.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class TextView extends ContentView{constructor(text){super(),this.text=text}get length(){return this.text.length}createDOM(textDOM){this.setDOM(textDOM||document.createTextNode(this.text))}sync(view,track){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(track&&track.node==this.dom&&(track.written=!0),this.dom.nodeValue=this.text)}reuseDOM(dom){3==dom.nodeType&&this.createDOM(dom)}merge(from,to,source){return!(8&this.flags||source&&(!(source instanceof TextView)||this.length-(to-from)+source.length>256||8&source.flags))&&(this.text=this.text.slice(0,from)+(source?source.text:"")+this.text.slice(to),this.markDirty(),!0)}split(from){let result=new TextView(this.text.slice(from));return this.text=this.text.slice(0,from),this.markDirty(),result.flags|=8&this.flags,result}localPosFromDOM(node,offset){return node==this.dom?offset:offset?this.text.length:0}domAtPos(pos){return new DOMPos(this.dom,pos)}domBoundsAround(_from,_to,offset){return{from:offset,to:offset+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(pos,side){return function textCoords(text,pos,side){let length=text.nodeValue.length;pos>length&&(pos=length);let from=pos,to=pos,flatten=0;0==pos&&side<0||pos==length&&side>=0?browser.chrome||browser.gecko||(pos?(from--,flatten=1):to<length&&(to++,flatten=-1)):side<0?from--:to<length&&to++;let rects=textRange(text,from,to).getClientRects();if(!rects.length)return null;let rect=rects[(flatten?flatten<0:side>=0)?0:rects.length-1];browser.safari&&!flatten&&0==rect.width&&(rect=Array.prototype.find.call(rects,(r=>r.width))||rect);return flatten?flattenRect(rect,flatten<0):rect||null}(this.dom,pos,side)}}class MarkView extends ContentView{constructor(mark,children=[],length=0){super(),this.mark=mark,this.children=children,this.length=length;for(let ch of children)ch.setParent(this)}setAttrs(dom){if(clearAttributes(dom),this.mark.class&&(dom.className=this.mark.class),this.mark.attrs)for(let name in this.mark.attrs)dom.setAttribute(name,this.mark.attrs[name]);return dom}canReuseDOM(other){return super.canReuseDOM(other)&&!(8&(this.flags|other.flags))}reuseDOM(node){node.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(node),this.flags|=6)}sync(view,track){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(view,track)}merge(from,to,source,_hasStart,openStart,openEnd){return(!source||!(!(source instanceof MarkView&&source.mark.eq(this.mark))||from&&openStart<=0||to<this.length&&openEnd<=0))&&(mergeChildrenInto(this,from,to,source?source.children:[],openStart-1,openEnd-1),this.markDirty(),!0)}split(from){let result=[],off=0,detachFrom=-1,i=0;for(let elt of this.children){let end=off+elt.length;end>from&&result.push(off<from?elt.split(from-off):elt),detachFrom<0&&off>=from&&(detachFrom=i),off=end,i++}let length=this.length-from;return this.length=from,detachFrom>-1&&(this.children.length=detachFrom,this.markDirty()),new MarkView(this.mark,result,length)}domAtPos(pos){return inlineDOMAtPos(this,pos)}coordsAt(pos,side){return coordsInChildren(this,pos,side)}}class WidgetView extends ContentView{static create(widget,length,side){return new WidgetView(widget,length,side)}constructor(widget,length,side){super(),this.widget=widget,this.length=length,this.side=side,this.prevWidget=null}split(from){let result=WidgetView.create(this.widget,this.length-from,this.side);return this.length-=from,result}sync(view){this.dom&&this.widget.updateDOM(this.dom,view)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(view)),this.dom.contentEditable="false")}getSide(){return this.side}merge(from,to,source,hasStart,openStart,openEnd){return!(source&&(!(source instanceof WidgetView&&this.widget.compare(source.widget))||from>0&&openStart<=0||to<this.length&&openEnd<=0))&&(this.length=from+(source?source.length:0)+(this.length-to),!0)}become(other){return other instanceof WidgetView&&other.side==this.side&&this.widget.constructor==other.widget.constructor&&(this.widget.compare(other.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=other.widget,this.length=other.length,!0)}ignoreMutation(){return!0}ignoreEvent(event){return this.widget.ignoreEvent(event)}get overrideDOMText(){if(0==this.length)return Text.empty;let top=this;for(;top.parent;)top=top.parent;let{view}=top,text=view&&view.state.doc,start=this.posAtStart;return text?text.slice(start,start+this.length):Text.empty}domAtPos(pos){return(this.length?0==pos:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,pos==this.length)}domBoundsAround(){return null}coordsAt(pos,side){let custom=this.widget.coordsAt(this.dom,pos,side);if(custom)return custom;let rects=this.dom.getClientRects(),rect=null;if(!rects.length)return null;let fromBack=this.side?this.side<0:pos>0;for(let i=fromBack?rects.length-1:0;rect=rects[i],!(pos>0?0==i:i==rects.length-1||rect.top<rect.bottom);i+=fromBack?-1:1);return flattenRect(rect,!fromBack)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(side){super(),this.side=side}get length(){return 0}merge(){return!1}become(other){return other instanceof WidgetBufferView&&other.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let dom=document.createElement("img");dom.className="cm-widgetBuffer",dom.setAttribute("aria-hidden","true"),this.setDOM(dom)}}getSide(){return this.side}domAtPos(pos){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(pos){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}function inlineDOMAtPos(parent,pos){let dom=parent.dom,{children}=parent,i=0;for(let off=0;i<children.length;i++){let child=children[i],end=off+child.length;if(!(end==off&&child.getSide()<=0)){if(pos>off&&pos<end&&child.dom.parentNode==dom)return child.domAtPos(pos-off);if(pos<=off)break;off=end}}for(let j=i;j>0;j--){let prev=children[j-1];if(prev.dom.parentNode==dom)return prev.domAtPos(prev.length)}for(let j=i;j<children.length;j++){let next=children[j];if(next.dom.parentNode==dom)return next.domAtPos(0)}return new DOMPos(dom,0)}function joinInlineInto(parent,view,open){let last,{children}=parent;open>0&&view instanceof MarkView&&children.length&&(last=children[children.length-1])instanceof MarkView&&last.mark.eq(view.mark)?joinInlineInto(last,view.children[0],open-1):(children.push(view),view.setParent(parent)),parent.length+=view.length}function coordsInChildren(view,pos,side){let before=null,beforePos=-1,after=null,afterPos=-1;!function scan(view,pos){for(let i=0,off=0;i<view.children.length&&off<=pos;i++){let child=view.children[i],end=off+child.length;end>=pos&&(child.children.length?scan(child,pos-off):(!after||after.isHidden&&side>0)&&(end>pos||off==end&&child.getSide()>0)?(after=child,afterPos=pos-off):(off<pos||off==end&&child.getSide()<0&&!child.isHidden)&&(before=child,beforePos=pos-off)),off=end}}(view,pos);let target=(side<0?before:after)||before||after;return target?target.coordsAt(Math.max(0,target==before?beforePos:afterPos),side):function fallbackRect(view){let last=view.dom.lastChild;if(!last)return view.dom.getBoundingClientRect();let rects=clientRectsFor(last);return rects[rects.length-1]||null}(view)}function combineAttrs(source,target){for(let name in source)"class"==name&&target.class?target.class+=" "+source.class:"style"==name&&target.style?target.style+=";"+source.style:target[name]=source[name];return target}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;const noAttrs=Object.create(null);function attrsEq(a,b,ignore){if(a==b)return!0;a||(a=noAttrs),b||(b=noAttrs);let keysA=Object.keys(a),keysB=Object.keys(b);if(keysA.length-(ignore&&keysA.indexOf(ignore)>-1?1:0)!=keysB.length-(ignore&&keysB.indexOf(ignore)>-1?1:0))return!1;for(let key of keysA)if(key!=ignore&&(-1==keysB.indexOf(key)||a[key]!==b[key]))return!1;return!0}function updateAttrs(dom,prev,attrs){let changed=!1;if(prev)for(let name in prev)attrs&&name in attrs||(changed=!0,"style"==name?dom.style.cssText="":dom.removeAttribute(name));if(attrs)for(let name in attrs)prev&&prev[name]==attrs[name]||(changed=!0,"style"==name?dom.style.cssText=attrs[name]:dom.setAttribute(name,attrs[name]));return changed}function getAttrs(dom){let attrs=Object.create(null);for(let i=0;i<dom.attributes.length;i++){let attr=dom.attributes[i];attrs[attr.name]=attr.value}return attrs}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(from,to,source,hasStart,openStart,openEnd){if(source){if(!(source instanceof LineView))return!1;this.dom||source.transferDOM(this)}return hasStart&&this.setDeco(source?source.attrs:null),mergeChildrenInto(this,from,to,source?source.children:[],openStart,openEnd),!0}split(at){let end=new LineView;if(end.breakAfter=this.breakAfter,0==this.length)return end;let{i,off}=this.childPos(at);off&&(end.append(this.children[i].split(off),0),this.children[i].merge(off,this.children[i].length,null,!1,0,0),i++);for(let j=i;j<this.children.length;j++)end.append(this.children[j],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=at,end}transferDOM(other){this.dom&&(this.markDirty(),other.setDOM(this.dom),other.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(attrs){attrsEq(this.attrs,attrs)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=attrs)}append(child,openStart){joinInlineInto(this,child,openStart)}addLineDeco(deco){let attrs=deco.spec.attributes,cls=deco.spec.class;attrs&&(this.attrs=combineAttrs(attrs,this.attrs||{})),cls&&(this.attrs=combineAttrs({class:cls},this.attrs||{}))}domAtPos(pos){return inlineDOMAtPos(this,pos)}reuseDOM(node){"DIV"==node.nodeName&&(this.setDOM(node),this.flags|=6)}sync(view,track){var _a;this.dom?4&this.flags&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(view,track);let last=this.dom.lastChild;for(;last&&ContentView.get(last)instanceof MarkView;)last=last.lastChild;if(!(last&&this.length&&("BR"==last.nodeName||0!=(null===(_a=ContentView.get(last))||void 0===_a?void 0:_a.isEditable)||browser.ios&&this.children.some((ch=>ch instanceof TextView))))){let hack=document.createElement("BR");hack.cmIgnore=!0,this.dom.appendChild(hack)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let textHeight,totalWidth=0;for(let child of this.children){if(!(child instanceof TextView)||/[^ -~]/.test(child.text))return null;let rects=clientRectsFor(child.dom);if(1!=rects.length)return null;totalWidth+=rects[0].width,textHeight=rects[0].height}return totalWidth?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:totalWidth/this.length,textHeight}:null}coordsAt(pos,side){let rect=coordsInChildren(this,pos,side);if(!this.children.length&&rect&&this.parent){let{heightOracle}=this.parent.view.viewState,height=rect.bottom-rect.top;if(Math.abs(height-heightOracle.lineHeight)<2&&heightOracle.textHeight<height){let dist=(height-heightOracle.textHeight)/2;return{top:rect.top+dist,bottom:rect.bottom-dist,left:rect.left,right:rect.left}}}return rect}become(_other){return!1}covers(){return!0}static find(docView,pos){for(let i=0,off=0;i<docView.children.length;i++){let block=docView.children[i],end=off+block.length;if(end>=pos){if(block instanceof LineView)return block;if(end>pos)break}off=end+block.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(widget,length,deco){super(),this.widget=widget,this.length=length,this.deco=deco,this.breakAfter=0,this.prevWidget=null}merge(from,to,source,_takeDeco,openStart,openEnd){return!(source&&(!(source instanceof BlockWidgetView&&this.widget.compare(source.widget))||from>0&&openStart<=0||to<this.length&&openEnd<=0))&&(this.length=from+(source?source.length:0)+(this.length-to),!0)}domAtPos(pos){return 0==pos?DOMPos.before(this.dom):DOMPos.after(this.dom,pos==this.length)}split(at){let len=this.length-at;this.length=at;let end=new BlockWidgetView(this.widget,len,this.deco);return end.breakAfter=this.breakAfter,end}get children(){return noChildren}sync(view){this.dom&&this.widget.updateDOM(this.dom,view)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(view)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(other){return other instanceof BlockWidgetView&&other.widget.constructor==this.widget.constructor&&(other.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=other.widget,this.length=other.length,this.deco=other.deco,this.breakAfter=other.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(event){return this.widget.ignoreEvent(event)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(pos,side){return this.widget.coordsAt(this.dom,pos,side)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(side){let{startSide,endSide}=this.deco;return startSide!=endSide&&(side<0?startSide<0:endSide>0)}}class WidgetType{eq(widget){return!1}updateDOM(dom,view){return!1}compare(other){return this==other||this.constructor==other.constructor&&this.eq(other)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(event){return!0}coordsAt(dom,pos,side){return null}get isHidden(){return!1}destroy(dom){}}var BlockType=function(BlockType){return BlockType[BlockType.Text=0]="Text",BlockType[BlockType.WidgetBefore=1]="WidgetBefore",BlockType[BlockType.WidgetAfter=2]="WidgetAfter",BlockType[BlockType.WidgetRange=3]="WidgetRange",BlockType}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(startSide,endSide,widget,spec){super(),this.startSide=startSide,this.endSide=endSide,this.widget=widget,this.spec=spec}get heightRelevant(){return!1}static mark(spec){return new MarkDecoration(spec)}static widget(spec){let side=Math.max(-1e4,Math.min(1e4,spec.side||0)),block=!!spec.block;return side+=block&&!spec.inlineOrder?side>0?3e8:-4e8:side>0?1e8:-1e8,new PointDecoration(spec,side,side,block,spec.widget||null,!1)}static replace(spec){let startSide,endSide,block=!!spec.block;if(spec.isBlockGap)startSide=-5e8,endSide=4e8;else{let{start,end}=getInclusive(spec,block);startSide=(start?block?-3e8:-1:5e8)-1,endSide=1+(end?block?2e8:1:-6e8)}return new PointDecoration(spec,startSide,endSide,block,spec.widget||null,!0)}static line(spec){return new LineDecoration(spec)}static set(of,sort=!1){return dist_RangeSet.of(of,sort)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Decoration.none=dist_RangeSet.empty;class MarkDecoration extends Decoration{constructor(spec){let{start,end}=getInclusive(spec);super(start?-1:5e8,end?1:-6e8,null,spec),this.tagName=spec.tagName||"span",this.class=spec.class||"",this.attrs=spec.attributes||null}eq(other){var _a,_b;return this==other||other instanceof MarkDecoration&&this.tagName==other.tagName&&(this.class||(null===(_a=this.attrs)||void 0===_a?void 0:_a.class))==(other.class||(null===(_b=other.attrs)||void 0===_b?void 0:_b.class))&&attrsEq(this.attrs,other.attrs,"class")}range(from,to=from){if(from>=to)throw new RangeError("Mark decorations may not be empty");return super.range(from,to)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(spec){super(-2e8,-2e8,null,spec)}eq(other){return other instanceof LineDecoration&&this.spec.class==other.spec.class&&attrsEq(this.spec.attributes,other.spec.attributes)}range(from,to=from){if(to!=from)throw new RangeError("Line decoration ranges must be zero-length");return super.range(from,to)}}LineDecoration.prototype.mapMode=dist_MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(spec,startSide,endSide,block,widget,isReplace){super(startSide,endSide,widget,spec),this.block=block,this.isReplace=isReplace,this.mapMode=block?startSide<=0?dist_MapMode.TrackBefore:dist_MapMode.TrackAfter:dist_MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(other){return other instanceof PointDecoration&&function widgetsEq(a,b){return a==b||!!(a&&b&&a.compare(b))}(this.widget,other.widget)&&this.block==other.block&&this.startSide==other.startSide&&this.endSide==other.endSide}range(from,to=from){if(this.isReplace&&(from>to||from==to&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&to!=from)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(from,to)}}function getInclusive(spec,block=!1){let{inclusiveStart:start,inclusiveEnd:end}=spec;return null==start&&(start=spec.inclusive),null==end&&(end=spec.inclusive),{start:null!=start?start:block,end:null!=end?end:block}}function addRange(from,to,ranges,margin=0){let last=ranges.length-1;last>=0&&ranges[last]+margin>=from?ranges[last]=Math.max(ranges[last],to):ranges.push(from,to)}PointDecoration.prototype.point=!0;class ContentBuilder{constructor(doc,pos,end,disallowBlockEffectsFor){this.doc=doc,this.pos=pos,this.end=end,this.disallowBlockEffectsFor=disallowBlockEffectsFor,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=doc.iter(),this.skip=pos}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let last=this.content[this.content.length-1];return!(last.breakAfter||last instanceof BlockWidgetView&&last.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(active=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),active),active.length),this.pendingBuffer=0)}addBlockWidget(view){this.flushBuffer(),this.curLine=null,this.content.push(view)}finish(openEnd){this.pendingBuffer&&openEnd<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||openEnd&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView||this.getLine()}buildText(length,active,openStart){for(;length>0;){if(this.textOff==this.text.length){let{value,lineBreak,done}=this.cursor.next(this.skip);if(this.skip=0,done)throw new Error("Ran out of text content when drawing inline views");if(lineBreak){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,length--;continue}this.text=value,this.textOff=0}let take=Math.min(this.text.length-this.textOff,length,512);this.flushBuffer(active.slice(active.length-openStart)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+take)),active),openStart),this.atCursorPos=!0,this.textOff+=take,length-=take,openStart=0}}span(from,to,active,openStart){this.buildText(to-from,active,openStart),this.pos=to,this.openStart<0&&(this.openStart=openStart)}point(from,to,deco,active,openStart,index){if(this.disallowBlockEffectsFor[index]&&deco instanceof PointDecoration){if(deco.block)throw new RangeError("Block decorations may not be specified via plugins");if(to>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let len=to-from;if(deco instanceof PointDecoration)if(deco.block)deco.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(deco.widget||new NullWidget("div"),len,deco));else{let view=WidgetView.create(deco.widget||new NullWidget("span"),len,len?0:deco.startSide),cursorBefore=this.atCursorPos&&!view.isEditable&&openStart<=active.length&&(from<to||deco.startSide>0),cursorAfter=!view.isEditable&&(from<to||openStart>active.length||deco.startSide<=0),line=this.getLine();2!=this.pendingBuffer||cursorBefore||view.isEditable||(this.pendingBuffer=0),this.flushBuffer(active),cursorBefore&&(line.append(wrapMarks(new WidgetBufferView(1),active),openStart),openStart=active.length+Math.max(0,openStart-active.length)),line.append(wrapMarks(view,active),openStart),this.atCursorPos=cursorAfter,this.pendingBuffer=cursorAfter?from<to||openStart>active.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=active.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(deco);len&&(this.textOff+len<=this.text.length?this.textOff+=len:(this.skip+=len-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=to),this.openStart<0&&(this.openStart=openStart)}static build(text,from,to,decorations,dynamicDecorationMap){let builder=new ContentBuilder(text,from,to,dynamicDecorationMap);return builder.openEnd=dist_RangeSet.spans(decorations,from,to,builder),builder.openStart<0&&(builder.openStart=builder.openEnd),builder.finish(builder.openEnd),builder}}function wrapMarks(view,active){for(let mark of active)view=new MarkView(mark,[view],view.length);return view}class NullWidget extends WidgetType{constructor(tag){super(),this.tag=tag}eq(other){return other.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(elt){return elt.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:values=>values.some((x=>x))}),nativeSelectionHidden=Facet.define({combine:values=>values.some((x=>x))});class ScrollTarget{constructor(range,y="nearest",x="nearest",yMargin=5,xMargin=5){this.range=range,this.y=y,this.x=x,this.yMargin=yMargin,this.xMargin=xMargin}map(changes){return changes.empty?this:new ScrollTarget(this.range.map(changes),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView=dist_StateEffect.define({map:(t,ch)=>t.map(ch)});function logException(state,exception,context){let handler=state.facet(exceptionSink);handler.length?handler[0](exception):window.onerror?window.onerror(String(exception),context,void 0,void 0,exception):context?console.error(context+":",exception):console.error(exception)}const editable=Facet.define({combine:values=>!values.length||values[0]});let nextPluginID=0;const viewPlugin=Facet.define();class dist_ViewPlugin{constructor(id,create,domEventHandlers,domEventObservers,buildExtensions){this.id=id,this.create=create,this.domEventHandlers=domEventHandlers,this.domEventObservers=domEventObservers,this.extension=buildExtensions(this)}static define(create,spec){const{eventHandlers,eventObservers,provide,decorations:deco}=spec||{};return new dist_ViewPlugin(nextPluginID++,create,eventHandlers,eventObservers,(plugin=>{let ext=[viewPlugin.of(plugin)];return deco&&ext.push(decorations.of((view=>{let pluginInst=view.plugin(plugin);return pluginInst?deco(pluginInst):Decoration.none}))),provide&&ext.push(provide(plugin)),ext}))}static fromClass(cls,spec){return dist_ViewPlugin.define((view=>new cls(view)),spec)}}class PluginInstance{constructor(spec){this.spec=spec,this.mustUpdate=null,this.value=null}update(view){if(this.value){if(this.mustUpdate){let update=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(update)}catch(e){if(logException(update.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(_){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(view)}catch(e){logException(view.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(view){var _a;if(null===(_a=this.value)||void 0===_a?void 0:_a.destroy)try{this.value.destroy()}catch(e){logException(view.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(view,from,to){let isolates=view.state.facet(bidiIsolatedRanges);if(!isolates.length)return isolates;let sets=isolates.map((i=>i instanceof Function?i(view):i)),result=[];return dist_RangeSet.spans(sets,from,to,{point(){},span(from,to,active,open){let level=result;for(let i=active.length-1;i>=0;i--,open--){let update,iso=active[i].spec.bidiIsolate;if(null!=iso)if(open>0&&level.length&&(update=level[level.length-1]).to==from&&update.direction==iso)update.to=to,level=update.inner;else{let add={from,to,direction:iso,inner:[]};level.push(add),level=add.inner}}}}),result}const scrollMargins=Facet.define();function getScrollMargins(view){let left=0,right=0,top=0,bottom=0;for(let source of view.state.facet(scrollMargins)){let m=source(view);m&&(null!=m.left&&(left=Math.max(left,m.left)),null!=m.right&&(right=Math.max(right,m.right)),null!=m.top&&(top=Math.max(top,m.top)),null!=m.bottom&&(bottom=Math.max(bottom,m.bottom)))}return{left,right,top,bottom}}const styleModule=Facet.define();class ChangedRange{constructor(fromA,toA,fromB,toB){this.fromA=fromA,this.toA=toA,this.fromB=fromB,this.toB=toB}join(other){return new ChangedRange(Math.min(this.fromA,other.fromA),Math.max(this.toA,other.toA),Math.min(this.fromB,other.fromB),Math.max(this.toB,other.toB))}addToSet(set){let i=set.length,me=this;for(;i>0;i--){let range=set[i-1];if(!(range.fromA>me.toA)){if(range.toA<me.fromA)break;me=me.join(range),set.splice(i-1,1)}}return set.splice(i,0,me),set}static extendWithRanges(diff,ranges){if(0==ranges.length)return diff;let result=[];for(let dI=0,rI=0,posA=0,posB=0;;dI++){let next=dI==diff.length?null:diff[dI],off=posA-posB,end=next?next.fromB:1e9;for(;rI<ranges.length&&ranges[rI]<end;){let from=ranges[rI],to=ranges[rI+1],fromB=Math.max(posB,from),toB=Math.min(end,to);if(fromB<=toB&&new ChangedRange(fromB+off,toB+off,fromB,toB).addToSet(result),to>end)break;rI+=2}if(!next)return result;new ChangedRange(next.fromA,next.toA,next.fromB,next.toB).addToSet(result),posA=next.toA,posB=next.toB}}}class ViewUpdate{constructor(view,state,transactions){this.view=view,this.state=state,this.transactions=transactions,this.flags=0,this.startState=view.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let tr of transactions)this.changes=this.changes.compose(tr.changes);let changedRanges=[];this.changes.iterChangedRanges(((fromA,toA,fromB,toB)=>changedRanges.push(new ChangedRange(fromA,toA,fromB,toB)))),this.changedRanges=changedRanges}static create(view,state,transactions){return new ViewUpdate(view,state,transactions)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((tr=>tr.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Direction=function(Direction){return Direction[Direction.LTR=0]="LTR",Direction[Direction.RTL=1]="RTL",Direction}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(str){let result=[];for(let i=0;i<str.length;i++)result.push(1<<+str[i]);return result}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let p of["()","[]","{}"]){let l=p.charCodeAt(0),r=p.charCodeAt(1);Brackets[l]=r,Brackets[r]=-l}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(from,to,level){this.from=from,this.to=to,this.level=level}side(end,dir){return this.dir==dir==end?this.to:this.from}static find(order,index,level,assoc){let maybe=-1;for(let i=0;i<order.length;i++){let span=order[i];if(span.from<=index&&span.to>=index){if(span.level==level)return i;(maybe<0||(0!=assoc?assoc<0?span.from<index:span.to>index:order[maybe].level>span.level))&&(maybe=i)}}if(maybe<0)throw new RangeError("Index out of range");return maybe}}function isolatesEq(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++){let iA=a[i],iB=b[i];if(iA.from!=iB.from||iA.to!=iB.to||iA.direction!=iB.direction||!isolatesEq(iA.inner,iB.inner))return!1}return!0}const types=[];function emitSpans(line,from,to,level,baseLevel,isolates,order){let ourType=level%2?2:1;if(level%2==baseLevel%2)for(let iCh=from,iI=0;iCh<to;){let sameDir=!0,isNum=!1;if(iI==isolates.length||iCh<isolates[iI].from){let next=types[iCh];next!=ourType&&(sameDir=!1,isNum=16==next)}let recurse=sameDir||1!=ourType?null:[],localLevel=sameDir?level:level+1,iScan=iCh;run:for(;;)if(iI<isolates.length&&iScan==isolates[iI].from){if(isNum)break run;let iso=isolates[iI];if(!sameDir)for(let upto=iso.to,jI=iI+1;;){if(upto==to)break run;if(!(jI<isolates.length&&isolates[jI].from==upto)){if(types[upto]==ourType)break run;break}upto=isolates[jI++].to}if(iI++,recurse)recurse.push(iso);else{iso.from>iCh&&order.push(new BidiSpan(iCh,iso.from,localLevel)),computeSectionOrder(line,iso.direction==LTR!=!(localLevel%2)?level+1:level,baseLevel,iso.inner,iso.from,iso.to,order),iCh=iso.to}iScan=iso.to}else{if(iScan==to||(sameDir?types[iScan]!=ourType:types[iScan]==ourType))break;iScan++}recurse?emitSpans(line,iCh,iScan,level+1,baseLevel,recurse,order):iCh<iScan&&order.push(new BidiSpan(iCh,iScan,localLevel)),iCh=iScan}else for(let iCh=to,iI=isolates.length;iCh>from;){let sameDir=!0,isNum=!1;if(!iI||iCh>isolates[iI-1].to){let next=types[iCh-1];next!=ourType&&(sameDir=!1,isNum=16==next)}let recurse=sameDir||1!=ourType?null:[],localLevel=sameDir?level:level+1,iScan=iCh;run:for(;;)if(iI&&iScan==isolates[iI-1].to){if(isNum)break run;let iso=isolates[--iI];if(!sameDir)for(let upto=iso.from,jI=iI;;){if(upto==from)break run;if(!jI||isolates[jI-1].to!=upto){if(types[upto-1]==ourType)break run;break}upto=isolates[--jI].from}if(recurse)recurse.push(iso);else{iso.to<iCh&&order.push(new BidiSpan(iso.to,iCh,localLevel)),computeSectionOrder(line,iso.direction==LTR!=!(localLevel%2)?level+1:level,baseLevel,iso.inner,iso.from,iso.to,order),iCh=iso.from}iScan=iso.from}else{if(iScan==from||(sameDir?types[iScan-1]!=ourType:types[iScan-1]==ourType))break;iScan--}recurse?emitSpans(line,iScan,iCh,level+1,baseLevel,recurse,order):iScan<iCh&&order.push(new BidiSpan(iScan,iCh,localLevel)),iCh=iScan}}function computeSectionOrder(line,level,baseLevel,isolates,from,to,order){let outerType=level%2?2:1;!function computeCharTypes(line,rFrom,rTo,isolates,outerType){for(let iI=0;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo,prevType=iI?256:outerType;for(let i=from,prev=prevType,prevStrong=prevType;i<to;i++){let type=(ch=line.charCodeAt(i))<=247?LowTypes[ch]:1424<=ch&&ch<=1524?2:1536<=ch&&ch<=1785?ArabicTypes[ch-1536]:1774<=ch&&ch<=2220?4:8192<=ch&&ch<=8203?256:64336<=ch&&ch<=65023?4:8204==ch?256:1;512==type?type=prev:8==type&&4==prevStrong&&(type=16),types[i]=4==type?2:type,7&type&&(prevStrong=type),prev=type}for(let i=from,prev=prevType,prevStrong=prevType;i<to;i++){let type=types[i];if(128==type)i<to-1&&prev==types[i+1]&&24&prev?type=types[i]=prev:types[i]=256;else if(64==type){let end=i+1;for(;end<to&&64==types[end];)end++;let replace=i&&8==prev||end<rTo&&8==types[end]?1==prevStrong?1:8:256;for(let j=i;j<end;j++)types[j]=replace;i=end-1}else 8==type&&1==prevStrong&&(types[i]=1);prev=type,7&type&&(prevStrong=type)}}var ch}(line,from,to,isolates,outerType),function processBracketPairs(line,rFrom,rTo,isolates,outerType){let oppositeType=1==outerType?2:1;for(let iI=0,sI=0,context=0;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(let ch,br,type,i=from;i<to;i++)if(br=Brackets[ch=line.charCodeAt(i)])if(br<0){for(let sJ=sI-3;sJ>=0;sJ-=3)if(BracketStack[sJ+1]==-br){let flags=BracketStack[sJ+2],type=2&flags?outerType:4&flags?1&flags?oppositeType:outerType:0;type&&(types[i]=types[BracketStack[sJ]]=type),sI=sJ;break}}else{if(189==BracketStack.length)break;BracketStack[sI++]=i,BracketStack[sI++]=ch,BracketStack[sI++]=context}else if(2==(type=types[i])||1==type){let embed=type==outerType;context=embed?0:1;for(let sJ=sI-3;sJ>=0;sJ-=3){let cur=BracketStack[sJ+2];if(2&cur)break;if(embed)BracketStack[sJ+2]|=2;else{if(4&cur)break;BracketStack[sJ+2]|=4}}}}}(line,from,to,isolates,outerType),function processNeutrals(rFrom,rTo,isolates,outerType){for(let iI=0,prev=outerType;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(let i=from;i<to;){let type=types[i];if(256==type){let end=i+1;for(;;)if(end==to){if(iI==isolates.length)break;end=isolates[iI++].to,to=iI<isolates.length?isolates[iI].from:rTo}else{if(256!=types[end])break;end++}let beforeL=1==prev,replace=beforeL==(1==(end<rTo?types[end]:outerType))?beforeL?1:2:outerType;for(let j=end,jI=iI,fromJ=jI?isolates[jI-1].to:rFrom;j>i;)j==fromJ&&(j=isolates[--jI].from,fromJ=jI?isolates[jI-1].to:rFrom),types[--j]=replace;i=end}else prev=type,i++}}}(from,to,isolates,outerType),emitSpans(line,from,to,level,baseLevel,isolates,order)}function computeOrder(line,direction,isolates){if(!line)return[new BidiSpan(0,0,direction==RTL?1:0)];if(direction==LTR&&!isolates.length&&!BidiRE.test(line))return trivialOrder(line.length);if(isolates.length)for(;line.length>types.length;)types[types.length]=256;let order=[],level=direction==LTR?0:1;return computeSectionOrder(line,level,level,isolates,0,line.length,order),order}function trivialOrder(length){return[new BidiSpan(0,length,0)]}let movedOver="";function moveVisually(line,order,dir,start,forward){var _a;let startIndex=start.head-line.from,spanI=-1;if(0==startIndex){if(!forward||!line.length)return null;order[0].level!=dir&&(startIndex=order[0].side(!1,dir),spanI=0)}else if(startIndex==line.length){if(forward)return null;let last=order[order.length-1];last.level!=dir&&(startIndex=last.side(!0,dir),spanI=order.length-1)}spanI<0&&(spanI=BidiSpan.find(order,startIndex,null!==(_a=start.bidiLevel)&&void 0!==_a?_a:-1,start.assoc));let span=order[spanI];startIndex==span.side(forward,dir)&&(span=order[spanI+=forward?1:-1],startIndex=span.side(!forward,dir));let indexForward=forward==(span.dir==dir),nextIndex=findClusterBreak(line.text,startIndex,indexForward);if(movedOver=line.text.slice(Math.min(startIndex,nextIndex),Math.max(startIndex,nextIndex)),nextIndex!=span.side(forward,dir))return dist_EditorSelection.cursor(nextIndex+line.from,indexForward?-1:1,span.level);let nextSpan=spanI==(forward?order.length-1:0)?null:order[spanI+(forward?1:-1)];return nextSpan||span.level==dir?nextSpan&&nextSpan.level<span.level?dist_EditorSelection.cursor(nextSpan.side(!forward,dir)+line.from,forward?1:-1,nextSpan.level):dist_EditorSelection.cursor(nextIndex+line.from,forward?-1:1,span.level):dist_EditorSelection.cursor(forward?line.to:line.from,forward?-1:1,dir)}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(view){super(),this.view=view,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(view.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,view.state.doc.length)],0,null)}update(update){var _a;let changedRanges=update.changedRanges;this.minWidth>0&&changedRanges.length&&(changedRanges.every((({fromA,toA})=>toA<this.minWidthFrom||fromA>this.minWidthTo))?(this.minWidthFrom=update.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=update.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let readCompositionAt=-1;this.view.inputState.composing>=0&&((null===(_a=this.domChanged)||void 0===_a?void 0:_a.newSel)?readCompositionAt=this.domChanged.newSel.head:function touchesComposition(changes,composition){let touched=!1;composition&&changes.iterChangedRanges(((from,to)=>{from<composition.to&&to>composition.from&&(touched=!0)}));return touched}(update.changes,this.hasComposition)||update.selectionSet||(readCompositionAt=update.state.selection.main.head));let composition=readCompositionAt>-1?function findCompositionRange(view,changes,headPos){let found=findCompositionNode(view,headPos);if(!found)return null;let{node:textNode,from,to}=found,text=textNode.nodeValue;if(/[\n\r]/.test(text))return null;if(view.state.doc.sliceString(found.from,found.to)!=text)return null;let inv=changes.invertedDesc,range=new ChangedRange(inv.mapPos(from),inv.mapPos(to),from,to),marks=[];for(let parent=textNode.parentNode;;parent=parent.parentNode){let parentView=ContentView.get(parent);if(parentView instanceof MarkView)marks.push({node:parent,deco:parentView.mark});else{if(parentView instanceof LineView||"DIV"==parent.nodeName&&parent.parentNode==view.contentDOM)return{range,text:textNode,marks,line:parent};if(parent==view.contentDOM)return null;marks.push({node:parent,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(parent),tagName:parent.tagName.toLowerCase()})})}}}(this.view,update.changes,readCompositionAt):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from,to}=this.hasComposition;changedRanges=new ChangedRange(from,to,update.changes.mapPos(from,-1),update.changes.mapPos(to,1)).addToSet(changedRanges.slice())}this.hasComposition=composition?{from:composition.range.fromB,to:composition.range.toB}:null,(browser.ie||browser.chrome)&&!composition&&update&&update.state.doc.lines!=update.startState.doc.lines&&(this.forceSelection=!0);let decoDiff=function findChangedDeco(a,b,diff){let comp=new DecorationComparator$1;return dist_RangeSet.compare(a,b,diff,comp),comp.changes}(this.decorations,this.updateDeco(),update.changes);return changedRanges=ChangedRange.extendWithRanges(changedRanges,decoDiff),!!(7&this.flags||0!=changedRanges.length)&&(this.updateInner(changedRanges,update.startState.doc.length,composition),update.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(changes,oldLength,composition){this.view.viewState.mustMeasureContent=!0,this.updateChildren(changes,oldLength,composition);let{observer}=this.view;observer.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let track=browser.chrome||browser.ios?{node:observer.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,track),this.flags&=-8,track&&(track.written||observer.selectionRange.focusNode!=track.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((cView=>cView.flags&=-9));let gaps=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let child of this.children)child instanceof BlockWidgetView&&child.widget instanceof BlockGapWidget&&gaps.push(child.dom);observer.updateGaps(gaps)}updateChildren(changes,oldLength,composition){let ranges=composition?composition.range.addToSet(changes.slice()):changes,cursor=this.childCursor(oldLength);for(let i=ranges.length-1;;i--){let next=i>=0?ranges[i]:null;if(!next)break;let content,breakAtStart,openStart,openEnd,{fromA,toA,fromB,toB}=next;if(composition&&composition.range.fromB<toB&&composition.range.toB>fromB){let before=ContentBuilder.build(this.view.state.doc,fromB,composition.range.fromB,this.decorations,this.dynamicDecorationMap),after=ContentBuilder.build(this.view.state.doc,composition.range.toB,toB,this.decorations,this.dynamicDecorationMap);breakAtStart=before.breakAtStart,openStart=before.openStart,openEnd=after.openEnd;let compLine=this.compositionView(composition);after.breakAtStart?compLine.breakAfter=1:after.content.length&&compLine.merge(compLine.length,compLine.length,after.content[0],!1,after.openStart,0)&&(compLine.breakAfter=after.content[0].breakAfter,after.content.shift()),before.content.length&&compLine.merge(0,0,before.content[before.content.length-1],!0,0,before.openEnd)&&before.content.pop(),content=before.content.concat(compLine).concat(after.content)}else({content,breakAtStart,openStart,openEnd}=ContentBuilder.build(this.view.state.doc,fromB,toB,this.decorations,this.dynamicDecorationMap));let{i:toI,off:toOff}=cursor.findPos(toA,1),{i:fromI,off:fromOff}=cursor.findPos(fromA,-1);replaceRange(this,fromI,fromOff,toI,toOff,content,breakAtStart,openStart,openEnd)}composition&&this.fixCompositionDOM(composition)}compositionView(composition){let cur=new TextView(composition.text.nodeValue);cur.flags|=8;for(let{deco}of composition.marks)cur=new MarkView(deco,[cur],cur.length);let line=new LineView;return line.append(cur,0),line}fixCompositionDOM(composition){let fix=(dom,cView)=>{cView.flags|=8|(cView.children.some((c=>7&c.flags))?1:0),this.markedForComposition.add(cView);let prev=ContentView.get(dom);prev&&prev!=cView&&(prev.dom=null),cView.setDOM(dom)},pos=this.childPos(composition.range.fromB,1),cView=this.children[pos.i];fix(composition.line,cView);for(let i=composition.marks.length-1;i>=-1;i--)pos=cView.childPos(pos.off,1),cView=cView.children[pos.i],fix(i>=0?composition.marks[i].node:composition.text,cView)}updateSelection(mustRead=!1,fromPointer=!1){!mustRead&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let activeElt=this.view.root.activeElement,focused=activeElt==this.dom,selectionNotFocus=!focused&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(activeElt&&this.dom.contains(activeElt));if(!(focused||fromPointer||selectionNotFocus))return;let force=this.forceSelection;this.forceSelection=!1;let main=this.view.state.selection.main,anchor=this.moveToLine(this.domAtPos(main.anchor)),head=main.empty?anchor:this.moveToLine(this.domAtPos(main.head));if(browser.gecko&&main.empty&&!this.hasComposition&&function betweenUneditable(pos){return 1==pos.node.nodeType&&pos.node.firstChild&&(0==pos.offset||"false"==pos.node.childNodes[pos.offset-1].contentEditable)&&(pos.offset==pos.node.childNodes.length||"false"==pos.node.childNodes[pos.offset].contentEditable)}(anchor)){let dummy=document.createTextNode("");this.view.observer.ignore((()=>anchor.node.insertBefore(dummy,anchor.node.childNodes[anchor.offset]||null))),anchor=head=new DOMPos(dummy,0),force=!0}let domSel=this.view.observer.selectionRange;!force&&domSel.focusNode&&isEquivalentPosition(anchor.node,anchor.offset,domSel.anchorNode,domSel.anchorOffset)&&isEquivalentPosition(head.node,head.offset,domSel.focusNode,domSel.focusOffset)||(this.view.observer.ignore((()=>{browser.android&&browser.chrome&&this.dom.contains(domSel.focusNode)&&function inUneditable(node,inside){for(let cur=node;cur&&cur!=inside;cur=cur.assignedSlot||cur.parentNode)if(1==cur.nodeType&&"false"==cur.contentEditable)return!0;return!1}(domSel.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let rawSel=getSelection(this.view.root);if(rawSel)if(main.empty){if(browser.gecko){let nextTo=function nextToUneditable(node,offset){return 1!=node.nodeType?0:(offset&&"false"==node.childNodes[offset-1].contentEditable?1:0)|(offset<node.childNodes.length&&"false"==node.childNodes[offset].contentEditable?2:0)}(anchor.node,anchor.offset);if(nextTo&&3!=nextTo){let text=nearbyTextNode(anchor.node,anchor.offset,1==nextTo?1:-1);text&&(anchor=new DOMPos(text.node,text.offset))}}rawSel.collapse(anchor.node,anchor.offset),null!=main.bidiLevel&&void 0!==rawSel.caretBidiLevel&&(rawSel.caretBidiLevel=main.bidiLevel)}else if(rawSel.extend){rawSel.collapse(anchor.node,anchor.offset);try{rawSel.extend(head.node,head.offset)}catch(_){}}else{let range=document.createRange();main.anchor>main.head&&([anchor,head]=[head,anchor]),range.setEnd(head.node,head.offset),range.setStart(anchor.node,anchor.offset),rawSel.removeAllRanges(),rawSel.addRange(range)}else;selectionNotFocus&&this.view.root.activeElement==this.dom&&(this.dom.blur(),activeElt&&activeElt.focus())})),this.view.observer.setSelectionRange(anchor,head)),this.impreciseAnchor=anchor.precise?null:new DOMPos(domSel.anchorNode,domSel.anchorOffset),this.impreciseHead=head.precise?null:new DOMPos(domSel.focusNode,domSel.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view}=this,cursor=view.state.selection.main,sel=getSelection(view.root),{anchorNode,anchorOffset}=view.observer.selectionRange;if(!(sel&&cursor.empty&&cursor.assoc&&sel.modify))return;let line=LineView.find(this,cursor.head);if(!line)return;let lineStart=line.posAtStart;if(cursor.head==lineStart||cursor.head==lineStart+line.length)return;let before=this.coordsAt(cursor.head,-1),after=this.coordsAt(cursor.head,1);if(!before||!after||before.bottom>after.top)return;let dom=this.domAtPos(cursor.head+cursor.assoc);sel.collapse(dom.node,dom.offset),sel.modify("move",cursor.assoc<0?"forward":"backward","lineboundary"),view.observer.readSelectionRange();let newRange=view.observer.selectionRange;view.docView.posFromDOM(newRange.anchorNode,newRange.anchorOffset)!=cursor.from&&sel.collapse(anchorNode,anchorOffset)}moveToLine(pos){let newPos,dom=this.dom;if(pos.node!=dom)return pos;for(let i=pos.offset;!newPos&&i<dom.childNodes.length;i++){let view=ContentView.get(dom.childNodes[i]);view instanceof LineView&&(newPos=view.domAtPos(0))}for(let i=pos.offset-1;!newPos&&i>=0;i--){let view=ContentView.get(dom.childNodes[i]);view instanceof LineView&&(newPos=view.domAtPos(view.length))}return newPos?new DOMPos(newPos.node,newPos.offset,!0):pos}nearest(dom){for(let cur=dom;cur;){let domView=ContentView.get(cur);if(domView&&domView.rootView==this)return domView;cur=cur.parentNode}return null}posFromDOM(node,offset){let view=this.nearest(node);if(!view)throw new RangeError("Trying to find position for a DOM position outside of the document");return view.localPosFromDOM(node,offset)+view.posAtStart}domAtPos(pos){let{i,off}=this.childCursor().findPos(pos,-1);for(;i<this.children.length-1;){let child=this.children[i];if(off<child.length||child instanceof LineView)break;i++,off=0}return this.children[i].domAtPos(off)}coordsAt(pos,side){let best=null,bestPos=0;for(let off=this.length,i=this.children.length-1;i>=0;i--){let child=this.children[i],end=off-child.breakAfter,start=end-child.length;if(end<pos)break;start<=pos&&(start<pos||child.covers(-1))&&(end>pos||child.covers(1))&&(!best||child instanceof LineView&&!(best instanceof LineView&&side>=0))&&(best=child,bestPos=start),off=start}return best?best.coordsAt(pos-bestPos,side):null}coordsForChar(pos){let{i,off}=this.childPos(pos,1),child=this.children[i];if(!(child instanceof LineView))return null;for(;child.children.length;){let{i,off:childOff}=child.childPos(off,1);for(;;i++){if(i==child.children.length)return null;if((child=child.children[i]).length)break}off=childOff}if(!(child instanceof TextView))return null;let end=findClusterBreak(child.text,off);if(end==off)return null;let rects=textRange(child.dom,off,end).getClientRects();for(let i=0;i<rects.length;i++){let rect=rects[i];if(i==rects.length-1||rect.top<rect.bottom&&rect.left<rect.right)return rect}return null}measureVisibleLineHeights(viewport){let result=[],{from,to}=viewport,contentWidth=this.view.contentDOM.clientWidth,isWider=contentWidth>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,widest=-1,ltr=this.view.textDirection==Direction.LTR;for(let pos=0,i=0;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(end>to)break;if(pos>=from){let childRect=child.dom.getBoundingClientRect();if(result.push(childRect.height),isWider){let last=child.dom.lastChild,rects=last?clientRectsFor(last):[];if(rects.length){let rect=rects[rects.length-1],width=ltr?rect.right-childRect.left:childRect.right-rect.left;width>widest&&(widest=width,this.minWidth=contentWidth,this.minWidthFrom=pos,this.minWidthTo=end)}}}pos=end+child.breakAfter}return result}textDirectionAt(pos){let{i}=this.childPos(pos,1);return"rtl"==getComputedStyle(this.children[i].dom).direction?Direction.RTL:Direction.LTR}measureTextSize(){for(let child of this.children)if(child instanceof LineView){let measure=child.measureTextSize();if(measure)return measure}let lineHeight,charWidth,textHeight,dummy=document.createElement("div");return dummy.className="cm-line",dummy.style.width="99999px",dummy.style.position="absolute",dummy.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(dummy);let rect=clientRectsFor(dummy.firstChild)[0];lineHeight=dummy.getBoundingClientRect().height,charWidth=rect?rect.width/27:7,textHeight=rect?rect.height:lineHeight,dummy.remove()})),{lineHeight,charWidth,textHeight}}childCursor(pos=this.length){let i=this.children.length;return i&&(pos-=this.children[--i].length),new ChildCursor(this.children,pos,i)}computeBlockGapDeco(){let deco=[],vs=this.view.viewState;for(let pos=0,i=0;;i++){let next=i==vs.viewports.length?null:vs.viewports[i],end=next?next.from-1:this.length;if(end>pos){let height=(vs.lineBlockAt(end).bottom-vs.lineBlockAt(pos).top)/this.view.scaleY;deco.push(Decoration.replace({widget:new BlockGapWidget(height),block:!0,inclusive:!0,isBlockGap:!0}).range(pos,end))}if(!next)break;pos=next.to+1}return Decoration.set(deco)}updateDeco(){let allDeco=this.view.state.facet(decorations).map(((d,i)=>(this.dynamicDecorationMap[i]="function"==typeof d)?d(this.view):d));for(let i=allDeco.length;i<allDeco.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...allDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(target){let other,{range}=target,rect=this.coordsAt(range.head,range.empty?range.assoc:range.head>range.anchor?-1:1);if(!rect)return;!range.empty&&(other=this.coordsAt(range.anchor,range.anchor>range.head?-1:1))&&(rect={left:Math.min(rect.left,other.left),top:Math.min(rect.top,other.top),right:Math.max(rect.right,other.right),bottom:Math.max(rect.bottom,other.bottom)});let margins=getScrollMargins(this.view),targetRect={left:rect.left-margins.left,top:rect.top-margins.top,right:rect.right+margins.right,bottom:rect.bottom+margins.bottom};!function scrollRectIntoView(dom,rect,side,x,y,xMargin,yMargin,ltr){let doc=dom.ownerDocument,win=doc.defaultView||window;for(let cur=dom,stop=!1;cur&&!stop;)if(1==cur.nodeType){let bounding,top=cur==doc.body,scaleX=1,scaleY=1;if(top)bounding=windowRect(win);else{if(/^(fixed|sticky)$/.test(getComputedStyle(cur).position)&&(stop=!0),cur.scrollHeight<=cur.clientHeight&&cur.scrollWidth<=cur.clientWidth){cur=cur.assignedSlot||cur.parentNode;continue}let rect=cur.getBoundingClientRect();scaleX=rect.width/cur.offsetWidth,scaleY=rect.height/cur.offsetHeight,bounding={left:rect.left,right:rect.left+cur.clientWidth*scaleX,top:rect.top,bottom:rect.top+cur.clientHeight*scaleY}}let moveX=0,moveY=0;if("nearest"==y)rect.top<bounding.top?(moveY=-(bounding.top-rect.top+yMargin),side>0&&rect.bottom>bounding.bottom+moveY&&(moveY=rect.bottom-bounding.bottom+moveY+yMargin)):rect.bottom>bounding.bottom&&(moveY=rect.bottom-bounding.bottom+yMargin,side<0&&rect.top-moveY<bounding.top&&(moveY=-(bounding.top+moveY-rect.top+yMargin)));else{let rectHeight=rect.bottom-rect.top,boundingHeight=bounding.bottom-bounding.top;moveY=("center"==y&&rectHeight<=boundingHeight?rect.top+rectHeight/2-boundingHeight/2:"start"==y||"center"==y&&side<0?rect.top-yMargin:rect.bottom-boundingHeight+yMargin)-bounding.top}if("nearest"==x?rect.left<bounding.left?(moveX=-(bounding.left-rect.left+xMargin),side>0&&rect.right>bounding.right+moveX&&(moveX=rect.right-bounding.right+moveX+xMargin)):rect.right>bounding.right&&(moveX=rect.right-bounding.right+xMargin,side<0&&rect.left<bounding.left+moveX&&(moveX=-(bounding.left+moveX-rect.left+xMargin))):moveX=("center"==x?rect.left+(rect.right-rect.left)/2-(bounding.right-bounding.left)/2:"start"==x==ltr?rect.left-xMargin:rect.right-(bounding.right-bounding.left)+xMargin)-bounding.left,moveX||moveY)if(top)win.scrollBy(moveX,moveY);else{let movedX=0,movedY=0;if(moveY){let start=cur.scrollTop;cur.scrollTop+=moveY/scaleY,movedY=(cur.scrollTop-start)*scaleY}if(moveX){let start=cur.scrollLeft;cur.scrollLeft+=moveX/scaleX,movedX=(cur.scrollLeft-start)*scaleX}rect={left:rect.left-movedX,top:rect.top-movedY,right:rect.right-movedX,bottom:rect.bottom-movedY},movedX&&Math.abs(movedX-moveX)<1&&(x="nearest"),movedY&&Math.abs(movedY-moveY)<1&&(y="nearest")}if(top)break;cur=cur.assignedSlot||cur.parentNode}else{if(11!=cur.nodeType)break;cur=cur.host}}(this.view.scrollDOM,targetRect,range.head<range.anchor?-1:1,target.x,target.y,target.xMargin,target.yMargin,this.view.textDirection==Direction.LTR)}}class BlockGapWidget extends WidgetType{constructor(height){super(),this.height=height}toDOM(){let elt=document.createElement("div");return this.updateDOM(elt),elt}eq(other){return other.height==this.height}updateDOM(elt){return elt.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function findCompositionNode(view,headPos){let sel=view.observer.selectionRange,textNode=sel.focusNode&&nearbyTextNode(sel.focusNode,sel.focusOffset,0);if(!textNode)return null;let from=headPos-textNode.offset;return{from,to:from+textNode.node.nodeValue.length,node:textNode.node}}function nearbyTextNode(startNode,startOffset,side){if(side<=0)for(let node=startNode,offset=startOffset;;){if(3==node.nodeType)return{node,offset};if(!(1==node.nodeType&&offset>0))break;node=node.childNodes[offset-1],offset=maxOffset(node)}if(side>=0)for(let node=startNode,offset=startOffset;;){if(3==node.nodeType)return{node,offset};if(!(1==node.nodeType&&offset<node.childNodes.length&&side>=0))break;node=node.childNodes[offset],offset=0}return null}let DecorationComparator$1=class DecorationComparator{constructor(){this.changes=[]}compareRange(from,to){addRange(from,to,this.changes)}comparePoint(from,to){addRange(from,to,this.changes)}};function getdx(x,rect){return rect.left>x?rect.left-x:Math.max(0,x-rect.right)}function getdy(y,rect){return rect.top>y?rect.top-y:Math.max(0,y-rect.bottom)}function yOverlap(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function upTop(rect,top){return top<rect.top?{top,left:rect.left,right:rect.right,bottom:rect.bottom}:rect}function upBot(rect,bottom){return bottom>rect.bottom?{top:rect.top,left:rect.left,right:rect.right,bottom}:rect}function domPosAtCoords(parent,x,y){let closest,closestRect,closestX,closestY,above,below,aboveRect,belowRect,closestOverlap=!1;for(let child=parent.firstChild;child;child=child.nextSibling){let rects=clientRectsFor(child);for(let i=0;i<rects.length;i++){let rect=rects[i];closestRect&&yOverlap(closestRect,rect)&&(rect=upTop(upBot(rect,closestRect.bottom),closestRect.top));let dx=getdx(x,rect),dy=getdy(y,rect);if(0==dx&&0==dy)return 3==child.nodeType?domPosInText(child,x,y):domPosAtCoords(child,x,y);if(!closest||closestY>dy||closestY==dy&&closestX>dx){closest=child,closestRect=rect,closestX=dx,closestY=dy;let side=dy?y<rect.top?-1:1:dx?x<rect.left?-1:1:0;closestOverlap=!side||(side>0?i<rects.length-1:i>0)}0==dx?y>rect.bottom&&(!aboveRect||aboveRect.bottom<rect.bottom)?(above=child,aboveRect=rect):y<rect.top&&(!belowRect||belowRect.top>rect.top)&&(below=child,belowRect=rect):aboveRect&&yOverlap(aboveRect,rect)?aboveRect=upBot(aboveRect,rect.bottom):belowRect&&yOverlap(belowRect,rect)&&(belowRect=upTop(belowRect,rect.top))}}if(aboveRect&&aboveRect.bottom>=y?(closest=above,closestRect=aboveRect):belowRect&&belowRect.top<=y&&(closest=below,closestRect=belowRect),!closest)return{node:parent,offset:0};let clipX=Math.max(closestRect.left,Math.min(closestRect.right,x));return 3==closest.nodeType?domPosInText(closest,clipX,y):closestOverlap&&"false"!=closest.contentEditable?domPosAtCoords(closest,clipX,y):{node:parent,offset:Array.prototype.indexOf.call(parent.childNodes,closest)+(x>=(closestRect.left+closestRect.right)/2?1:0)}}function domPosInText(node,x,y){let len=node.nodeValue.length,closestOffset=-1,closestDY=1e9,generalSide=0;for(let i=0;i<len;i++){let rects=textRange(node,i,i+1).getClientRects();for(let j=0;j<rects.length;j++){let rect=rects[j];if(rect.top==rect.bottom)continue;generalSide||(generalSide=x-rect.left);let dy=(rect.top>y?rect.top-y:y-rect.bottom)-1;if(rect.left-1<=x&&rect.right+1>=x&&dy<closestDY){let right=x>=(rect.left+rect.right)/2,after=right;if(browser.chrome||browser.gecko){textRange(node,i).getBoundingClientRect().left==rect.right&&(after=!right)}if(dy<=0)return{node,offset:i+(after?1:0)};closestOffset=i+(after?1:0),closestDY=dy}}}return{node,offset:closestOffset>-1?closestOffset:generalSide>0?node.nodeValue.length:0}}function posAtCoords(view,coords,precise,bias=-1){var _a,_b;let block,content=view.contentDOM.getBoundingClientRect(),docTop=content.top+view.viewState.paddingTop,{docHeight}=view.viewState,{x,y}=coords,yOffset=y-docTop;if(yOffset<0)return 0;if(yOffset>docHeight)return view.state.doc.length;for(let halfLine=view.viewState.heightOracle.textHeight/2,bounced=!1;block=view.elementAtHeight(yOffset),block.type!=BlockType.Text;)for(;yOffset=bias>0?block.bottom+halfLine:block.top-halfLine,!(yOffset>=0&&yOffset<=docHeight);){if(bounced)return precise?null:0;bounced=!0,bias=-bias}y=docTop+yOffset;let lineStart=block.from;if(lineStart<view.viewport.from)return 0==view.viewport.from?0:precise?null:posAtCoordsImprecise(view,content,block,x,y);if(lineStart>view.viewport.to)return view.viewport.to==view.state.doc.length?view.state.doc.length:precise?null:posAtCoordsImprecise(view,content,block,x,y);let doc=view.dom.ownerDocument,root=view.root.elementFromPoint?view.root:doc,element=root.elementFromPoint(x,y);element&&!view.contentDOM.contains(element)&&(element=null),element||(x=Math.max(content.left+1,Math.min(content.right-1,x)),element=root.elementFromPoint(x,y),element&&!view.contentDOM.contains(element)&&(element=null));let node,offset=-1;if(element&&0!=(null===(_a=view.docView.nearest(element))||void 0===_a?void 0:_a.isEditable))if(doc.caretPositionFromPoint){let pos=doc.caretPositionFromPoint(x,y);pos&&({offsetNode:node,offset}=pos)}else if(doc.caretRangeFromPoint){let range=doc.caretRangeFromPoint(x,y);range&&(({startContainer:node,startOffset:offset}=range),(!view.contentDOM.contains(node)||browser.safari&&function isSuspiciousSafariCaretResult(node,offset,x){let len;if(3!=node.nodeType||offset!=(len=node.nodeValue.length))return!1;for(let next=node.nextSibling;next;next=next.nextSibling)if(1!=next.nodeType||"BR"!=next.nodeName)return!1;return textRange(node,len-1,len).getBoundingClientRect().left>x}(node,offset,x)||browser.chrome&&function isSuspiciousChromeCaretResult(node,offset,x){if(0!=offset)return!1;for(let cur=node;;){let parent=cur.parentNode;if(!parent||1!=parent.nodeType||parent.firstChild!=cur)return!1;if(parent.classList.contains("cm-line"))break;cur=parent}let rect=1==node.nodeType?node.getBoundingClientRect():textRange(node,0,Math.max(node.nodeValue.length,1)).getBoundingClientRect();return x-rect.left>5}(node,offset,x))&&(node=void 0))}if(!node||!view.docView.dom.contains(node)){let line=LineView.find(view.docView,lineStart);if(!line)return yOffset>block.top+block.height/2?block.to:block.from;({node,offset}=domPosAtCoords(line.dom,x,y))}let nearest=view.docView.nearest(node);if(!nearest)return null;if(nearest.isWidget&&1==(null===(_b=nearest.dom)||void 0===_b?void 0:_b.nodeType)){let rect=nearest.dom.getBoundingClientRect();return coords.y<rect.top||coords.y<=rect.bottom&&coords.x<=(rect.left+rect.right)/2?nearest.posAtStart:nearest.posAtEnd}return nearest.localPosFromDOM(node,offset)+nearest.posAtStart}function posAtCoordsImprecise(view,contentRect,block,x,y){let into=Math.round((x-contentRect.left)*view.defaultCharacterWidth);if(view.lineWrapping&&block.height>1.5*view.defaultLineHeight){let textHeight=view.viewState.heightOracle.textHeight;into+=Math.floor((y-block.top-.5*(view.defaultLineHeight-textHeight))/textHeight)*view.viewState.heightOracle.lineLength}let content=view.state.sliceDoc(block.from,block.to);return block.from+function dist_findColumn(string,col,tabSize,strict){for(let i=0,n=0;;){if(n>=col)return i;if(i==string.length)break;n+=9==string.charCodeAt(i)?tabSize-n%tabSize:1,i=findClusterBreak(string,i)}return!0===strict?-1:string.length}(content,into,view.state.tabSize)}function blockAt(view,pos){let line=view.lineBlockAt(pos);if(Array.isArray(line.type))for(let l of line.type)if(l.to>pos||l.to==pos&&(l.to==line.to||l.type==BlockType.Text))return l;return line}function moveByChar(view,start,forward,by){let line=view.state.doc.lineAt(start.head),spans=view.bidiSpans(line),direction=view.textDirectionAt(line.from);for(let cur=start,check=null;;){let next=moveVisually(line,spans,direction,cur,forward),char=movedOver;if(!next){if(line.number==(forward?view.state.doc.lines:1))return cur;char="\n",line=view.state.doc.line(line.number+(forward?1:-1)),spans=view.bidiSpans(line),next=dist_EditorSelection.cursor(forward?line.from:line.to)}if(check){if(!check(char))return cur}else{if(!by)return next;check=by(char)}cur=next}}function skipAtomicRanges(atoms,pos,bias){for(;;){let moved=0;for(let set of atoms)set.between(pos-1,pos+1,((from,to,value)=>{if(pos>from&&pos<to){let side=moved||bias||(pos-from<to-pos?-1:1);pos=side<0?from:to,moved=side}}));if(!moved)return pos}}function skipAtoms(view,oldPos,pos){let newPos=skipAtomicRanges(view.state.facet(atomicRanges).map((f=>f(view))),pos.from,oldPos.head>pos.from?-1:1);return newPos==pos.from?pos:dist_EditorSelection.cursor(newPos,newPos<pos.from?1:-1)}class InputState{setSelectionOrigin(origin){this.lastSelectionOrigin=origin,this.lastSelectionTime=Date.now()}constructor(view){this.view=view,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=view.hasFocus,browser.safari&&view.contentDOM.addEventListener("input",(()=>null)),browser.gecko&&function firefoxCopyCutHack(doc){appliedFirefoxHack.has(doc)||(appliedFirefoxHack.add(doc),doc.addEventListener("copy",(()=>{})),doc.addEventListener("cut",(()=>{})))}(view.contentDOM.ownerDocument)}handleEvent(event){(function eventBelongsToEditor(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(let cView,node=event.target;node!=view.contentDOM;node=node.parentNode)if(!node||11==node.nodeType||(cView=ContentView.get(node))&&cView.ignoreEvent(event))return!1;return!0})(this.view,event)&&!this.ignoreDuringComposition(event)&&("keydown"==event.type&&this.keydown(event)||this.runHandlers(event.type,event))}runHandlers(type,event){let handlers=this.handlers[type];if(handlers){for(let observer of handlers.observers)observer(this.view,event);for(let handler of handlers.handlers){if(event.defaultPrevented)break;if(handler(this.view,event)){event.preventDefault();break}}}}ensureHandlers(plugins){let handlers=computeHandlers(plugins),prev=this.handlers,dom=this.view.contentDOM;for(let type in handlers)if("scroll"!=type){let passive=!handlers[type].handlers.length,exists=prev[type];exists&&passive!=!exists.handlers.length&&(dom.removeEventListener(type,this.handleEvent),exists=null),exists||dom.addEventListener(type,this.handleEvent,{passive})}for(let type in prev)"scroll"==type||handlers[type]||dom.removeEventListener(type,this.handleEvent);this.handlers=handlers}keydown(event){if(this.lastKeyCode=event.keyCode,this.lastKeyTime=Date.now(),9==event.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=event.keyCode&&modifierCodes.indexOf(event.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!event.synthetic&&(13==event.keyCode||8==event.keyCode))return this.view.observer.delayAndroidKey(event.key,event.keyCode),!0;let pending;return!browser.ios||event.synthetic||event.altKey||event.metaKey||!((pending=PendingKeys.find((key=>key.keyCode==event.keyCode)))&&!event.ctrlKey||EmacsyPendingKeys.indexOf(event.key)>-1&&event.ctrlKey&&!event.shiftKey)?(229!=event.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=pending||event,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(){let key=this.pendingIOSKey;return!!key&&(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,key.key,key.keyCode))}ignoreDuringComposition(event){return!!/^key/.test(event.type)&&(this.composing>0||!!(browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(mouseSelection){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=mouseSelection}update(update){this.mouseSelection&&this.mouseSelection.update(update),update.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(plugin,handler){return(view,event)=>{try{return handler.call(plugin,event,view)}catch(e){logException(view.state,e)}}}function computeHandlers(plugins){let result=Object.create(null);function record(type){return result[type]||(result[type]={observers:[],handlers:[]})}for(let plugin of plugins){let spec=plugin.spec;if(spec&&spec.domEventHandlers)for(let type in spec.domEventHandlers){let f=spec.domEventHandlers[type];f&&record(type).handlers.push(bindHandler(plugin.value,f))}if(spec&&spec.domEventObservers)for(let type in spec.domEventObservers){let f=spec.domEventObservers[type];f&&record(type).observers.push(bindHandler(plugin.value,f))}}for(let type in handlers)record(type).handlers.push(handlers[type]);for(let type in observers)record(type).observers.push(observers[type]);return result}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(dist){return.7*Math.max(0,dist)+8}class MouseSelection{constructor(view,startEvent,style,mustSelect){this.view=view,this.startEvent=startEvent,this.style=style,this.mustSelect=mustSelect,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=startEvent,this.scrollParent=function scrollableParent(dom){let doc=dom.ownerDocument;for(let cur=dom.parentNode;cur&&cur!=doc.body;)if(1==cur.nodeType){if(cur.scrollHeight>cur.clientHeight||cur.scrollWidth>cur.clientWidth)return cur;cur=cur.assignedSlot||cur.parentNode}else{if(11!=cur.nodeType)break;cur=cur.host}return null}(view.contentDOM),this.atoms=view.state.facet(atomicRanges).map((f=>f(view)));let doc=view.contentDOM.ownerDocument;doc.addEventListener("mousemove",this.move=this.move.bind(this)),doc.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=startEvent.shiftKey,this.multiple=view.state.facet(dist_EditorState.allowMultipleSelections)&&function addsSelectionRange(view,event){let facet=view.state.facet(clickAddsSelectionRange);return facet.length?facet[0](event):browser.mac?event.metaKey:event.ctrlKey}(view,startEvent),this.dragging=!(!function isInPrimarySelection(view,event){let{main}=view.state.selection;if(main.empty)return!1;let sel=getSelection(view.root);if(!sel||0==sel.rangeCount)return!0;let rects=sel.getRangeAt(0).getClientRects();for(let i=0;i<rects.length;i++){let rect=rects[i];if(rect.left<=event.clientX&&rect.right>=event.clientX&&rect.top<=event.clientY&&rect.bottom>=event.clientY)return!0}return!1}(view,startEvent)||1!=getClickType(startEvent))&&null}start(event){!1===this.dragging&&this.select(event)}move(event){var _a;if(0==event.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function dist_dist(a,b){return Math.max(Math.abs(a.clientX-b.clientX),Math.abs(a.clientY-b.clientY))}(this.startEvent,event)<10)return;this.select(this.lastEvent=event);let sx=0,sy=0,rect=(null===(_a=this.scrollParent)||void 0===_a?void 0:_a.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},margins=getScrollMargins(this.view);event.clientX-margins.left<=rect.left+6?sx=-dragScrollSpeed(rect.left-event.clientX):event.clientX+margins.right>=rect.right-6&&(sx=dragScrollSpeed(event.clientX-rect.right)),event.clientY-margins.top<=rect.top+6?sy=-dragScrollSpeed(rect.top-event.clientY):event.clientY+margins.bottom>=rect.bottom-6&&(sy=dragScrollSpeed(event.clientY-rect.bottom)),this.setScrollSpeed(sx,sy)}up(event){null==this.dragging&&this.select(this.lastEvent),this.dragging||event.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let doc=this.view.contentDOM.ownerDocument;doc.removeEventListener("mousemove",this.move),doc.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(sx,sy){this.scrollSpeed={x:sx,y:sy},sx||sy?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(sel){let ranges=null;for(let i=0;i<sel.ranges.length;i++){let range=sel.ranges[i],updated=null;if(range.empty){let pos=skipAtomicRanges(this.atoms,range.from,0);pos!=range.from&&(updated=dist_EditorSelection.cursor(pos,-1))}else{let from=skipAtomicRanges(this.atoms,range.from,-1),to=skipAtomicRanges(this.atoms,range.to,1);from==range.from&&to==range.to||(updated=dist_EditorSelection.range(range.from==range.anchor?from:to,range.from==range.head?from:to))}updated&&(ranges||(ranges=sel.ranges.slice()),ranges[i]=updated)}return ranges?dist_EditorSelection.create(ranges,sel.mainIndex):sel}select(event){let{view}=this,selection=this.skipAtoms(this.style.get(event,this.extend,this.multiple));(this.mustSelect||!selection.eq(view.state.selection)||selection.main.assoc!=view.state.selection.main.assoc&&!1===this.dragging)&&this.view.dispatch({selection,userEvent:"select.pointer"}),this.mustSelect=!1}update(update){update.docChanged&&this.dragging&&(this.dragging=this.dragging.map(update.changes)),this.style.update(update)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function doPaste(view,input){let changes,{state}=view,i=1,text=state.toText(input),byLine=text.lines==state.selection.ranges.length,linewise=null!=lastLinewiseCopy&&state.selection.ranges.every((r=>r.empty))&&lastLinewiseCopy==text.toString();if(linewise){let lastLine=-1;changes=state.changeByRange((range=>{let line=state.doc.lineAt(range.from);if(line.from==lastLine)return{range};lastLine=line.from;let insert=state.toText((byLine?text.line(i++).text:input)+state.lineBreak);return{changes:{from:line.from,insert},range:dist_EditorSelection.cursor(range.from+insert.length)}}))}else changes=byLine?state.changeByRange((range=>{let line=text.line(i++);return{changes:{from:range.from,to:range.to,insert:line.text},range:dist_EditorSelection.cursor(range.from+line.length)}})):state.replaceSelection(text);view.dispatch(changes,{userEvent:"input.paste",scrollIntoView:!0})}function rangeForClick(view,pos,bias,type){if(1==type)return dist_EditorSelection.cursor(pos,bias);if(2==type)return function groupAt(state,pos,bias=1){let categorize=state.charCategorizer(pos),line=state.doc.lineAt(pos),linePos=pos-line.from;if(0==line.length)return dist_EditorSelection.cursor(pos);0==linePos?bias=1:linePos==line.length&&(bias=-1);let from=linePos,to=linePos;bias<0?from=findClusterBreak(line.text,linePos,!1):to=findClusterBreak(line.text,linePos);let cat=categorize(line.text.slice(from,to));for(;from>0;){let prev=findClusterBreak(line.text,from,!1);if(categorize(line.text.slice(prev,from))!=cat)break;from=prev}for(;to<line.length;){let next=findClusterBreak(line.text,to);if(categorize(line.text.slice(to,next))!=cat)break;to=next}return dist_EditorSelection.range(from+line.from,to+line.from)}(view.state,pos,bias);{let visual=LineView.find(view.docView,pos),line=view.state.doc.lineAt(visual?visual.posAtEnd:pos),from=visual?visual.posAtStart:line.from,to=visual?visual.posAtEnd:line.to;return to<view.state.doc.length&&to==line.to&&to++,dist_EditorSelection.range(from,to)}}observers.scroll=view=>{view.inputState.lastScrollTop=view.scrollDOM.scrollTop,view.inputState.lastScrollLeft=view.scrollDOM.scrollLeft},handlers.keydown=(view,event)=>(view.inputState.setSelectionOrigin("select"),27==event.keyCode&&(view.inputState.lastEscPress=Date.now()),!1),observers.touchstart=(view,e)=>{view.inputState.lastTouchTime=Date.now(),view.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=view=>{view.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(view,event)=>{if(view.observer.flush(),view.inputState.lastTouchTime>Date.now()-2e3)return!1;let style=null;for(let makeStyle of view.state.facet(mouseSelectionStyle))if(style=makeStyle(view,event),style)break;if(style||0!=event.button||(style=function basicMouseSelection(view,event){let start=queryPos(view,event),type=getClickType(event),startSel=view.state.selection;return{update(update){update.docChanged&&(start.pos=update.changes.mapPos(start.pos),startSel=startSel.map(update.changes))},get(event,extend,multiple){let removed,cur=queryPos(view,event),range=rangeForClick(view,cur.pos,cur.bias,type);if(start.pos!=cur.pos&&!extend){let startRange=rangeForClick(view,start.pos,start.bias,type),from=Math.min(startRange.from,range.from),to=Math.max(startRange.to,range.to);range=from<range.from?dist_EditorSelection.range(from,to):dist_EditorSelection.range(to,from)}return extend?startSel.replaceRange(startSel.main.extend(range.from,range.to)):multiple&&1==type&&startSel.ranges.length>1&&(removed=function removeRangeAround(sel,pos){for(let i=0;i<sel.ranges.length;i++){let{from,to}=sel.ranges[i];if(from<=pos&&to>=pos)return dist_EditorSelection.create(sel.ranges.slice(0,i).concat(sel.ranges.slice(i+1)),sel.mainIndex==i?0:sel.mainIndex-(sel.mainIndex>i?1:0))}return null}(startSel,cur.pos))?removed:multiple?startSel.addRange(range):dist_EditorSelection.create([range])}}}(view,event)),style){let mustFocus=!view.hasFocus;view.inputState.startMouseSelection(new MouseSelection(view,event,style,mustFocus)),mustFocus&&view.observer.ignore((()=>focusPreventScroll(view.contentDOM)));let mouseSel=view.inputState.mouseSelection;if(mouseSel)return mouseSel.start(event),!1===mouseSel.dragging}return!1};let insideY=(y,rect)=>y>=rect.top&&y<=rect.bottom,inside=(x,y,rect)=>insideY(y,rect)&&x>=rect.left&&x<=rect.right;function findPositionSide(view,pos,x,y){let line=LineView.find(view.docView,pos);if(!line)return 1;let off=pos-line.posAtStart;if(0==off)return 1;if(off==line.length)return-1;let before=line.coordsAt(off,-1);if(before&&inside(x,y,before))return-1;let after=line.coordsAt(off,1);return after&&inside(x,y,after)?1:before&&insideY(y,before)?-1:1}function queryPos(view,event){let pos=view.posAtCoords({x:event.clientX,y:event.clientY},!1);return{pos,bias:findPositionSide(view,pos,event.clientX,event.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(event){if(!BadMouseDetail)return event.detail;let last=lastMouseDown,lastTime=lastMouseDownTime;return lastMouseDown=event,lastMouseDownTime=Date.now(),lastMouseDownCount=!last||lastTime>Date.now()-400&&Math.abs(last.clientX-event.clientX)<2&&Math.abs(last.clientY-event.clientY)<2?(lastMouseDownCount+1)%3:1}function dropText(view,event,text,direct){if(!text)return;let dropPos=view.posAtCoords({x:event.clientX,y:event.clientY},!1),{mouseSelection}=view.inputState,del=direct&&mouseSelection&&mouseSelection.dragging&&function dragMovesSelection(view,event){let facet=view.state.facet(dragMovesSelection$1);return facet.length?facet[0](event):browser.mac?!event.altKey:!event.ctrlKey}(view,event)?{from:mouseSelection.dragging.from,to:mouseSelection.dragging.to}:null,ins={from:dropPos,insert:text},changes=view.state.changes(del?[del,ins]:ins);view.focus(),view.dispatch({changes,selection:{anchor:changes.mapPos(dropPos,-1),head:changes.mapPos(dropPos,1)},userEvent:del?"move.drop":"input.drop"})}handlers.dragstart=(view,event)=>{let{selection:{main}}=view.state,{mouseSelection}=view.inputState;return mouseSelection&&(mouseSelection.dragging=main),event.dataTransfer&&(event.dataTransfer.setData("Text",view.state.sliceDoc(main.from,main.to)),event.dataTransfer.effectAllowed="copyMove"),!1},handlers.drop=(view,event)=>{if(!event.dataTransfer)return!1;if(view.state.readOnly)return!0;let files=event.dataTransfer.files;if(files&&files.length){let text=Array(files.length),read=0,finishFile=()=>{++read==files.length&&dropText(view,event,text.filter((s=>null!=s)).join(view.state.lineBreak),!1)};for(let i=0;i<files.length;i++){let reader=new FileReader;reader.onerror=finishFile,reader.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(reader.result)||(text[i]=reader.result),finishFile()},reader.readAsText(files[i])}return!0}{let text=event.dataTransfer.getData("Text");if(text)return dropText(view,event,text,!0),!0}return!1},handlers.paste=(view,event)=>{if(view.state.readOnly)return!0;view.observer.flush();let data=brokenClipboardAPI?null:event.clipboardData;return data?(doPaste(view,data.getData("text/plain")||data.getData("text/uri-text")),!0):(function capturePaste(view){let parent=view.dom.parentNode;if(!parent)return;let target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout((()=>{view.focus(),target.remove(),doPaste(view,target.value)}),50)}(view),!1)};let lastLinewiseCopy=null;handlers.copy=handlers.cut=(view,event)=>{let{text,ranges,linewise}=function copiedRange(state){let content=[],ranges=[],linewise=!1;for(let range of state.selection.ranges)range.empty||(content.push(state.sliceDoc(range.from,range.to)),ranges.push(range));if(!content.length){let upto=-1;for(let{from}of state.selection.ranges){let line=state.doc.lineAt(from);line.number>upto&&(content.push(line.text),ranges.push({from:line.from,to:Math.min(state.doc.length,line.to+1)})),upto=line.number}linewise=!0}return{text:content.join(state.lineBreak),ranges,linewise}}(view.state);if(!text&&!linewise)return!1;lastLinewiseCopy=linewise?text:null,"cut"!=event.type||view.state.readOnly||view.dispatch({changes:ranges,scrollIntoView:!0,userEvent:"delete.cut"});let data=brokenClipboardAPI?null:event.clipboardData;return data?(data.clearData(),data.setData("text/plain",text),!0):(function captureCopy(view,text){let parent=view.dom.parentNode;if(!parent)return;let target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px",target.value=text,target.focus(),target.selectionEnd=text.length,target.selectionStart=0,setTimeout((()=>{target.remove(),view.focus()}),50)}(view,text),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(state,focus){let effects=[];for(let getEffect of state.facet(focusChangeEffect)){let effect=getEffect(state,focus);effect&&effects.push(effect)}return effects?state.update({effects,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(view){setTimeout((()=>{let focus=view.hasFocus;if(focus!=view.inputState.notifiedFocused){let tr=focusChangeTransaction(view.state,focus);tr?view.dispatch(tr):view.update([])}}),10)}observers.focus=view=>{view.inputState.lastFocusTime=Date.now(),view.scrollDOM.scrollTop||!view.inputState.lastScrollTop&&!view.inputState.lastScrollLeft||(view.scrollDOM.scrollTop=view.inputState.lastScrollTop,view.scrollDOM.scrollLeft=view.inputState.lastScrollLeft),updateForFocusChange(view)},observers.blur=view=>{view.observer.clearSelectionRange(),updateForFocusChange(view)},observers.compositionstart=observers.compositionupdate=view=>{null==view.inputState.compositionFirstChange&&(view.inputState.compositionFirstChange=!0),view.inputState.composing<0&&(view.inputState.composing=0)},observers.compositionend=view=>{view.inputState.composing=-1,view.inputState.compositionEndedAt=Date.now(),view.inputState.compositionPendingKey=!0,view.inputState.compositionPendingChange=view.observer.pendingRecords().length>0,view.inputState.compositionFirstChange=null,browser.chrome&&browser.android?view.observer.flushSoon():view.inputState.compositionPendingChange?Promise.resolve().then((()=>view.observer.flush())):setTimeout((()=>{view.inputState.composing<0&&view.docView.hasComposition&&view.update([])}),50)},observers.contextmenu=view=>{view.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(view,event)=>{var _a;let pending;if(browser.chrome&&browser.android&&(pending=PendingKeys.find((key=>key.inputType==event.inputType)))&&(view.observer.delayAndroidKey(pending.key,pending.keyCode),"Backspace"==pending.key||"Delete"==pending.key)){let startViewHeight=(null===(_a=window.visualViewport)||void 0===_a?void 0:_a.height)||0;setTimeout((()=>{var _a;((null===(_a=window.visualViewport)||void 0===_a?void 0:_a.height)||0)>startViewHeight+10&&view.hasFocus&&(view.contentDOM.blur(),view.focus())}),100)}return!1};const appliedFirefoxHack=new Set;const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(lineWrapping){this.lineWrapping=lineWrapping,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(from,to){let lines=this.doc.lineAt(to).number-this.doc.lineAt(from).number+1;return this.lineWrapping&&(lines+=Math.max(0,Math.ceil((to-from-lines*this.lineLength*.5)/this.lineLength))),this.lineHeight*lines}heightForLine(length){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((length-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(doc){return this.doc=doc,this}mustRefreshForWrapping(whiteSpace){return wrappingWhiteSpace.indexOf(whiteSpace)>-1!=this.lineWrapping}mustRefreshForHeights(lineHeights){let newHeight=!1;for(let i=0;i<lineHeights.length;i++){let h=lineHeights[i];h<0?i++:this.heightSamples[Math.floor(10*h)]||(newHeight=!0,this.heightSamples[Math.floor(10*h)]=!0)}return newHeight}refresh(whiteSpace,lineHeight,charWidth,textHeight,lineLength,knownHeights){let lineWrapping=wrappingWhiteSpace.indexOf(whiteSpace)>-1,changed=Math.round(lineHeight)!=Math.round(this.lineHeight)||this.lineWrapping!=lineWrapping;if(this.lineWrapping=lineWrapping,this.lineHeight=lineHeight,this.charWidth=charWidth,this.textHeight=textHeight,this.lineLength=lineLength,changed){this.heightSamples={};for(let i=0;i<knownHeights.length;i++){let h=knownHeights[i];h<0?i++:this.heightSamples[Math.floor(10*h)]=!0}}return changed}}class MeasuredHeights{constructor(from,heights){this.from=from,this.heights=heights,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(from,length,top,height,_content){this.from=from,this.length=length,this.top=top,this.height=height,this._content=_content}get type(){return"number"==typeof this._content?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(other){let content=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(other._content)?other._content:[other]);return new BlockInfo(this.from,this.length+other.length,this.top,this.height+other.height,content)}}var QueryType=function(QueryType){return QueryType[QueryType.ByPos=0]="ByPos",QueryType[QueryType.ByHeight=1]="ByHeight",QueryType[QueryType.ByPosNoHeight=2]="ByPosNoHeight",QueryType}(QueryType||(QueryType={}));class HeightMap{constructor(length,height,flags=2){this.length=length,this.height=height,this.flags=flags}get outdated(){return(2&this.flags)>0}set outdated(value){this.flags=(value?2:0)|-3&this.flags}setHeight(oracle,height){this.height!=height&&(Math.abs(this.height-height)>.001&&(oracle.heightChanged=!0),this.height=height)}replace(_from,_to,nodes){return HeightMap.of(nodes)}decomposeLeft(_to,result){result.push(this)}decomposeRight(_from,result){result.push(this)}applyChanges(decorations,oldDoc,oracle,changes){let me=this,doc=oracle.doc;for(let i=changes.length-1;i>=0;i--){let{fromA,toA,fromB,toB}=changes[i],start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle.setDoc(oldDoc),0,0),end=start.to>=toA?start:me.lineAt(toA,QueryType.ByPosNoHeight,oracle,0,0);for(toB+=end.to-toA,toA=end.to;i>0&&start.from<=changes[i-1].toA;)fromA=changes[i-1].fromA,fromB=changes[i-1].fromB,i--,fromA<start.from&&(start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle,0,0));fromB+=start.from-fromA,fromA=start.from;let nodes=NodeBuilder.build(oracle.setDoc(doc),decorations,fromB,toB);me=me.replace(fromA,toA,nodes)}return me.updateHeight(oracle,0)}static empty(){return new HeightMapText(0,0)}static of(nodes){if(1==nodes.length)return nodes[0];let i=0,j=nodes.length,before=0,after=0;for(;;)if(i==j)if(before>2*after){let split=nodes[i-1];split.break?nodes.splice(--i,1,split.left,null,split.right):nodes.splice(--i,1,split.left,split.right),j+=1+split.break,before-=split.size}else{if(!(after>2*before))break;{let split=nodes[j];split.break?nodes.splice(j,1,split.left,null,split.right):nodes.splice(j,1,split.left,split.right),j+=2+split.break,after-=split.size}}else if(before<after){let next=nodes[i++];next&&(before+=next.size)}else{let next=nodes[--j];next&&(after+=next.size)}let brk=0;return null==nodes[i-1]?(brk=1,i--):null==nodes[i]&&(brk=1,j++),new HeightMapBranch(HeightMap.of(nodes.slice(0,i)),brk,HeightMap.of(nodes.slice(j)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(length,height,deco){super(length,height),this.deco=deco}blockAt(_height,_oracle,top,offset){return new BlockInfo(offset,this.length,top,this.height,this.deco||0)}lineAt(_value,_type,oracle,top,offset){return this.blockAt(0,oracle,top,offset)}forEachLine(from,to,oracle,top,offset,f){from<=offset+this.length&&to>=offset&&f(this.blockAt(0,oracle,top,offset))}updateHeight(oracle,offset=0,_force=!1,measured){return measured&&measured.from<=offset&&measured.more&&this.setHeight(oracle,measured.heights[measured.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(length,height){super(length,height,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(_height,_oracle,top,offset){return new BlockInfo(offset,this.length,top,this.height,this.breaks)}replace(_from,_to,nodes){let node=nodes[0];return 1==nodes.length&&(node instanceof HeightMapText||node instanceof HeightMapGap&&4&node.flags)&&Math.abs(this.length-node.length)<10?(node instanceof HeightMapGap?node=new HeightMapText(node.length,this.height):node.height=this.height,this.outdated||(node.outdated=!1),node):HeightMap.of(nodes)}updateHeight(oracle,offset=0,force=!1,measured){return measured&&measured.from<=offset&&measured.more?this.setHeight(oracle,measured.heights[measured.index++]):(force||this.outdated)&&this.setHeight(oracle,Math.max(this.widgetHeight,oracle.heightForLine(this.length-this.collapsed))+this.breaks*oracle.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(length){super(length,0)}heightMetrics(oracle,offset){let perLine,firstLine=oracle.doc.lineAt(offset).number,lastLine=oracle.doc.lineAt(offset+this.length).number,lines=lastLine-firstLine+1,perChar=0;if(oracle.lineWrapping){let totalPerLine=Math.min(this.height,oracle.lineHeight*lines);perLine=totalPerLine/lines,this.length>lines+1&&(perChar=(this.height-totalPerLine)/(this.length-lines-1))}else perLine=this.height/lines;return{firstLine,lastLine,perLine,perChar}}blockAt(height,oracle,top,offset){let{firstLine,lastLine,perLine,perChar}=this.heightMetrics(oracle,offset);if(oracle.lineWrapping){let guess=offset+Math.round(Math.max(0,Math.min(1,(height-top)/this.height))*this.length),line=oracle.doc.lineAt(guess),lineHeight=perLine+line.length*perChar,lineTop=Math.max(top,height-lineHeight/2);return new BlockInfo(line.from,line.length,lineTop,lineHeight,0)}{let line=Math.max(0,Math.min(lastLine-firstLine,Math.floor((height-top)/perLine))),{from,length}=oracle.doc.line(firstLine+line);return new BlockInfo(from,length,top+perLine*line,perLine,0)}}lineAt(value,type,oracle,top,offset){if(type==QueryType.ByHeight)return this.blockAt(value,oracle,top,offset);if(type==QueryType.ByPosNoHeight){let{from,to}=oracle.doc.lineAt(value);return new BlockInfo(from,to-from,0,0,0)}let{firstLine,perLine,perChar}=this.heightMetrics(oracle,offset),line=oracle.doc.lineAt(value),lineHeight=perLine+line.length*perChar,linesAbove=line.number-firstLine,lineTop=top+perLine*linesAbove+perChar*(line.from-offset-linesAbove);return new BlockInfo(line.from,line.length,Math.max(top,Math.min(lineTop,top+this.height-lineHeight)),lineHeight,0)}forEachLine(from,to,oracle,top,offset,f){from=Math.max(from,offset),to=Math.min(to,offset+this.length);let{firstLine,perLine,perChar}=this.heightMetrics(oracle,offset);for(let pos=from,lineTop=top;pos<=to;){let line=oracle.doc.lineAt(pos);if(pos==from){let linesAbove=line.number-firstLine;lineTop+=perLine*linesAbove+perChar*(from-offset-linesAbove)}let lineHeight=perLine+perChar*line.length;f(new BlockInfo(line.from,line.length,lineTop,lineHeight,0)),lineTop+=lineHeight,pos=line.to+1}}replace(from,to,nodes){let after=this.length-to;if(after>0){let last=nodes[nodes.length-1];last instanceof HeightMapGap?nodes[nodes.length-1]=new HeightMapGap(last.length+after):nodes.push(null,new HeightMapGap(after-1))}if(from>0){let first=nodes[0];first instanceof HeightMapGap?nodes[0]=new HeightMapGap(from+first.length):nodes.unshift(new HeightMapGap(from-1),null)}return HeightMap.of(nodes)}decomposeLeft(to,result){result.push(new HeightMapGap(to-1),null)}decomposeRight(from,result){result.push(null,new HeightMapGap(this.length-from-1))}updateHeight(oracle,offset=0,force=!1,measured){let end=offset+this.length;if(measured&&measured.from<=offset+this.length&&measured.more){let nodes=[],pos=Math.max(offset,measured.from),singleHeight=-1;for(measured.from>offset&&nodes.push(new HeightMapGap(measured.from-offset-1).updateHeight(oracle,offset));pos<=end&&measured.more;){let len=oracle.doc.lineAt(pos).length;nodes.length&&nodes.push(null);let height=measured.heights[measured.index++];-1==singleHeight?singleHeight=height:Math.abs(height-singleHeight)>=.001&&(singleHeight=-2);let line=new HeightMapText(len,height);line.outdated=!1,nodes.push(line),pos+=len+1}pos<=end&&nodes.push(null,new HeightMapGap(end-pos).updateHeight(oracle,pos));let result=HeightMap.of(nodes);return(singleHeight<0||Math.abs(result.height-this.height)>=.001||Math.abs(singleHeight-this.heightMetrics(oracle,offset).perLine)>=.001)&&(oracle.heightChanged=!0),result}return(force||this.outdated)&&(this.setHeight(oracle,oracle.heightForGap(offset,offset+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(left,brk,right){super(left.length+brk+right.length,left.height+right.height,brk|(left.outdated||right.outdated?2:0)),this.left=left,this.right=right,this.size=left.size+right.size}get break(){return 1&this.flags}blockAt(height,oracle,top,offset){let mid=top+this.left.height;return height<mid?this.left.blockAt(height,oracle,top,offset):this.right.blockAt(height,oracle,mid,offset+this.left.length+this.break)}lineAt(value,type,oracle,top,offset){let rightTop=top+this.left.height,rightOffset=offset+this.left.length+this.break,left=type==QueryType.ByHeight?value<rightTop:value<rightOffset,base=left?this.left.lineAt(value,type,oracle,top,offset):this.right.lineAt(value,type,oracle,rightTop,rightOffset);if(this.break||(left?base.to<rightOffset:base.from>rightOffset))return base;let subQuery=type==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return left?base.join(this.right.lineAt(rightOffset,subQuery,oracle,rightTop,rightOffset)):this.left.lineAt(rightOffset,subQuery,oracle,top,offset).join(base)}forEachLine(from,to,oracle,top,offset,f){let rightTop=top+this.left.height,rightOffset=offset+this.left.length+this.break;if(this.break)from<rightOffset&&this.left.forEachLine(from,to,oracle,top,offset,f),to>=rightOffset&&this.right.forEachLine(from,to,oracle,rightTop,rightOffset,f);else{let mid=this.lineAt(rightOffset,QueryType.ByPos,oracle,top,offset);from<mid.from&&this.left.forEachLine(from,mid.from-1,oracle,top,offset,f),mid.to>=from&&mid.from<=to&&f(mid),to>mid.to&&this.right.forEachLine(mid.to+1,to,oracle,rightTop,rightOffset,f)}}replace(from,to,nodes){let rightStart=this.left.length+this.break;if(to<rightStart)return this.balanced(this.left.replace(from,to,nodes),this.right);if(from>this.left.length)return this.balanced(this.left,this.right.replace(from-rightStart,to-rightStart,nodes));let result=[];from>0&&this.decomposeLeft(from,result);let left=result.length;for(let node of nodes)result.push(node);if(from>0&&mergeGaps(result,left-1),to<this.length){let right=result.length;this.decomposeRight(to,result),mergeGaps(result,right)}return HeightMap.of(result)}decomposeLeft(to,result){let left=this.left.length;if(to<=left)return this.left.decomposeLeft(to,result);result.push(this.left),this.break&&(left++,to>=left&&result.push(null)),to>left&&this.right.decomposeLeft(to-left,result)}decomposeRight(from,result){let left=this.left.length,right=left+this.break;if(from>=right)return this.right.decomposeRight(from-right,result);from<left&&this.left.decomposeRight(from,result),this.break&&from<right&&result.push(null),result.push(this.right)}balanced(left,right){return left.size>2*right.size||right.size>2*left.size?HeightMap.of(this.break?[left,null,right]:[left,right]):(this.left=left,this.right=right,this.height=left.height+right.height,this.outdated=left.outdated||right.outdated,this.size=left.size+right.size,this.length=left.length+this.break+right.length,this)}updateHeight(oracle,offset=0,force=!1,measured){let{left,right}=this,rightStart=offset+left.length+this.break,rebalance=null;return measured&&measured.from<=offset+left.length&&measured.more?rebalance=left=left.updateHeight(oracle,offset,force,measured):left.updateHeight(oracle,offset,force),measured&&measured.from<=rightStart+right.length&&measured.more?rebalance=right=right.updateHeight(oracle,rightStart,force,measured):right.updateHeight(oracle,rightStart,force),rebalance?this.balanced(left,right):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(nodes,around){let before,after;null==nodes[around]&&(before=nodes[around-1])instanceof HeightMapGap&&(after=nodes[around+1])instanceof HeightMapGap&&nodes.splice(around-1,3,new HeightMapGap(before.length+1+after.length))}class NodeBuilder{constructor(pos,oracle){this.pos=pos,this.oracle=oracle,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=pos}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(_from,to){if(this.lineStart>-1){let end=Math.min(to,this.lineEnd),last=this.nodes[this.nodes.length-1];last instanceof HeightMapText?last.length+=end-this.pos:(end>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(end-this.pos,-1)),this.writtenTo=end,to>end&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=to}point(from,to,deco){if(from<to||deco.heightRelevant){let height=deco.widget?deco.widget.estimatedHeight:0,breaks=deco.widget?deco.widget.lineBreaks:0;height<0&&(height=this.oracle.lineHeight);let len=to-from;deco.block?this.addBlock(new HeightMapBlock(len,height,deco)):(len||breaks||height>=5)&&this.addLineDeco(height,breaks,len)}else to>from&&this.span(from,to);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from,to}=this.oracle.doc.lineAt(this.pos);this.lineStart=from,this.lineEnd=to,this.writtenTo<from&&((this.writtenTo<from-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,from-1)),this.nodes.push(null)),this.pos>from&&this.nodes.push(new HeightMapText(this.pos-from,-1)),this.writtenTo=this.pos}blankContent(from,to){let gap=new HeightMapGap(to-from);return this.oracle.doc.lineAt(from).to==to&&(gap.flags|=4),gap}ensureLine(){this.enterLine();let last=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(last instanceof HeightMapText)return last;let line=new HeightMapText(0,-1);return this.nodes.push(line),line}addBlock(block){this.enterLine();let deco=block.deco;deco&&deco.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(block),this.writtenTo=this.pos=this.pos+block.length,deco&&deco.endSide>0&&(this.covering=block)}addLineDeco(height,breaks,length){let line=this.ensureLine();line.length+=length,line.collapsed+=length,line.widgetHeight=Math.max(line.widgetHeight,height),line.breaks+=breaks,this.writtenTo=this.pos=this.pos+length}finish(from){let last=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||last instanceof HeightMapText||this.isCovered?(this.writtenTo<this.pos||null==last)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new HeightMapText(0,-1));let pos=from;for(let node of this.nodes)node instanceof HeightMapText&&node.updateHeight(this.oracle,pos),pos+=node?node.length:1;return this.nodes}static build(oracle,decorations,from,to){let builder=new NodeBuilder(from,oracle);return dist_RangeSet.spans(decorations,from,to,builder,0),builder.finish(from)}}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(from,to,a,b){(from<to||a&&a.heightRelevant||b&&b.heightRelevant)&&addRange(from,to,this.changes,5)}}function visiblePixelRange(dom,paddingTop){let rect=dom.getBoundingClientRect(),doc=dom.ownerDocument,win=doc.defaultView||window,left=Math.max(0,rect.left),right=Math.min(win.innerWidth,rect.right),top=Math.max(0,rect.top),bottom=Math.min(win.innerHeight,rect.bottom);for(let parent=dom.parentNode;parent&&parent!=doc.body;)if(1==parent.nodeType){let elt=parent,style=window.getComputedStyle(elt);if((elt.scrollHeight>elt.clientHeight||elt.scrollWidth>elt.clientWidth)&&"visible"!=style.overflow){let parentRect=elt.getBoundingClientRect();left=Math.max(left,parentRect.left),right=Math.min(right,parentRect.right),top=Math.max(top,parentRect.top),bottom=parent==dom.parentNode?parentRect.bottom:Math.min(bottom,parentRect.bottom)}parent="absolute"==style.position||"fixed"==style.position?elt.offsetParent:elt.parentNode}else{if(11!=parent.nodeType)break;parent=parent.host}return{left:left-rect.left,right:Math.max(left,right)-rect.left,top:top-(rect.top+paddingTop),bottom:Math.max(top,bottom)-(rect.top+paddingTop)}}function fullPixelRange(dom,paddingTop){let rect=dom.getBoundingClientRect();return{left:0,right:rect.right-rect.left,top:paddingTop,bottom:rect.bottom-(rect.top+paddingTop)}}class LineGap{constructor(from,to,size){this.from=from,this.to=to,this.size=size}static same(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++){let gA=a[i],gB=b[i];if(gA.from!=gB.from||gA.to!=gB.to||gA.size!=gB.size)return!1}return!0}draw(viewState,wrapping){return Decoration.replace({widget:new LineGapWidget(this.size*(wrapping?viewState.scaleY:viewState.scaleX),wrapping)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(size,vertical){super(),this.size=size,this.vertical=vertical}eq(other){return other.size==this.size&&other.vertical==this.vertical}toDOM(){let elt=document.createElement("div");return this.vertical?elt.style.height=this.size+"px":(elt.style.width=this.size+"px",elt.style.height="2px",elt.style.display="inline-block"),elt}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(state){this.state=state,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let guessWrapping=state.facet(contentAttributes).some((v=>"function"!=typeof v&&"cm-lineWrapping"==v.class));this.heightOracle=new HeightOracle(guessWrapping),this.stateDeco=state.facet(decorations).filter((d=>"function"!=typeof d)),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(state.doc),[new ChangedRange(0,0,0,state.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map((gap=>gap.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let viewports=[this.viewport],{main}=this.state.selection;for(let i=0;i<=1;i++){let pos=i?main.head:main.anchor;if(!viewports.some((({from,to})=>pos>=from&&pos<=to))){let{from,to}=this.lineBlockAt(pos);viewports.push(new Viewport(from,to))}}this.viewports=viewports.sort(((a,b)=>a.from-b.from)),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(block=>{this.viewportLines.push(1==this.scaler.scale?block:scaleBlock(block,this.scaler))}))}update(update,scrollTarget=null){this.state=update.state;let prevDeco=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter((d=>"function"!=typeof d));let contentChanges=update.changedRanges,heightChanges=ChangedRange.extendWithRanges(contentChanges,function heightRelevantDecoChanges(a,b,diff){let comp=new DecorationComparator;return dist_RangeSet.compare(a,b,diff,comp,0),comp.changes}(prevDeco,this.stateDeco,update?update.changes:ChangeSet.empty(this.state.doc.length))),prevHeight=this.heightMap.height,scrollAnchor=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,update.startState.doc,this.heightOracle.setDoc(this.state.doc),heightChanges),this.heightMap.height!=prevHeight&&(update.flags|=2),scrollAnchor?(this.scrollAnchorPos=update.changes.mapPos(scrollAnchor.from,-1),this.scrollAnchorHeight=scrollAnchor.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let viewport=heightChanges.length?this.mapViewport(this.viewport,update.changes):this.viewport;(scrollTarget&&(scrollTarget.range.head<viewport.from||scrollTarget.range.head>viewport.to)||!this.viewportIsAppropriate(viewport))&&(viewport=this.getViewport(0,scrollTarget));let updateLines=!update.changes.empty||2&update.flags||viewport.from!=this.viewport.from||viewport.to!=this.viewport.to;this.viewport=viewport,this.updateForViewport(),updateLines&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,update.changes))),update.flags|=this.computeVisibleRanges(),scrollTarget&&(this.scrollTarget=scrollTarget),!this.mustEnforceCursorAssoc&&update.selectionSet&&update.view.lineWrapping&&update.state.selection.main.empty&&update.state.selection.main.assoc&&!update.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(view){let dom=view.contentDOM,style=window.getComputedStyle(dom),oracle=this.heightOracle,whiteSpace=style.whiteSpace;this.defaultTextDirection="rtl"==style.direction?Direction.RTL:Direction.LTR;let refresh=this.heightOracle.mustRefreshForWrapping(whiteSpace),domRect=dom.getBoundingClientRect(),measureContent=refresh||this.mustMeasureContent||this.contentDOMHeight!=domRect.height;this.contentDOMHeight=domRect.height,this.mustMeasureContent=!1;let result=0,bias=0;if(domRect.width&&domRect.height){let scaleX=domRect.width/dom.offsetWidth,scaleY=domRect.height/dom.offsetHeight;(scaleX>.995&&scaleX<1.005||!isFinite(scaleX)||Math.abs(domRect.width-dom.offsetWidth)<1)&&(scaleX=1),(scaleY>.995&&scaleY<1.005||!isFinite(scaleY)||Math.abs(domRect.height-dom.offsetHeight)<1)&&(scaleY=1),this.scaleX==scaleX&&this.scaleY==scaleY||(this.scaleX=scaleX,this.scaleY=scaleY,result|=8,refresh=measureContent=!0)}let paddingTop=(parseInt(style.paddingTop)||0)*this.scaleY,paddingBottom=(parseInt(style.paddingBottom)||0)*this.scaleY;this.paddingTop==paddingTop&&this.paddingBottom==paddingBottom||(this.paddingTop=paddingTop,this.paddingBottom=paddingBottom,result|=10),this.editorWidth!=view.scrollDOM.clientWidth&&(oracle.lineWrapping&&(measureContent=!0),this.editorWidth=view.scrollDOM.clientWidth,result|=8);let scrollTop=view.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=scrollTop),this.scrolledToBottom=isScrolledToBottom(view.scrollDOM);let pixelViewport=(this.printing?fullPixelRange:visiblePixelRange)(dom,this.paddingTop),dTop=pixelViewport.top-this.pixelViewport.top,dBottom=pixelViewport.bottom-this.pixelViewport.bottom;this.pixelViewport=pixelViewport;let inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(inView!=this.inView&&(this.inView=inView,inView&&(measureContent=!0)),!this.inView&&!this.scrollTarget)return 0;let contentWidth=domRect.width;if(this.contentDOMWidth==contentWidth&&this.editorHeight==view.scrollDOM.clientHeight||(this.contentDOMWidth=domRect.width,this.editorHeight=view.scrollDOM.clientHeight,result|=8),measureContent){let lineHeights=view.docView.measureVisibleLineHeights(this.viewport);if(oracle.mustRefreshForHeights(lineHeights)&&(refresh=!0),refresh||oracle.lineWrapping&&Math.abs(contentWidth-this.contentDOMWidth)>oracle.charWidth){let{lineHeight,charWidth,textHeight}=view.docView.measureTextSize();refresh=lineHeight>0&&oracle.refresh(whiteSpace,lineHeight,charWidth,textHeight,contentWidth/charWidth,lineHeights),refresh&&(view.docView.minWidth=0,result|=8)}dTop>0&&dBottom>0?bias=Math.max(dTop,dBottom):dTop<0&&dBottom<0&&(bias=Math.min(dTop,dBottom)),oracle.heightChanged=!1;for(let vp of this.viewports){let heights=vp.from==this.viewport.from?lineHeights:view.docView.measureVisibleLineHeights(vp);this.heightMap=(refresh?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,view.state.doc.length)]):this.heightMap).updateHeight(oracle,0,refresh,new MeasuredHeights(vp.from,heights))}oracle.heightChanged&&(result|=2)}let viewportChange=!this.viewportIsAppropriate(this.viewport,bias)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return viewportChange&&(this.viewport=this.getViewport(bias,this.scrollTarget)),this.updateForViewport(),(2&result||viewportChange)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(refresh?[]:this.lineGaps,view)),result|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,view.docView.enforceCursorAssoc()),result}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(bias,scrollTarget){let marginTop=.5-Math.max(-.5,Math.min(.5,bias/1e3/2)),map=this.heightMap,oracle=this.heightOracle,{visibleTop,visibleBottom}=this,viewport=new Viewport(map.lineAt(visibleTop-1e3*marginTop,QueryType.ByHeight,oracle,0,0).from,map.lineAt(visibleBottom+1e3*(1-marginTop),QueryType.ByHeight,oracle,0,0).to);if(scrollTarget){let{head}=scrollTarget.range;if(head<viewport.from||head>viewport.to){let topPos,viewHeight=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),block=map.lineAt(head,QueryType.ByPos,oracle,0,0);topPos="center"==scrollTarget.y?(block.top+block.bottom)/2-viewHeight/2:"start"==scrollTarget.y||"nearest"==scrollTarget.y&&head<viewport.from?block.top:block.bottom-viewHeight,viewport=new Viewport(map.lineAt(topPos-500,QueryType.ByHeight,oracle,0,0).from,map.lineAt(topPos+viewHeight+500,QueryType.ByHeight,oracle,0,0).to)}}return viewport}mapViewport(viewport,changes){let from=changes.mapPos(viewport.from,-1),to=changes.mapPos(viewport.to,1);return new Viewport(this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from,to},bias=0){if(!this.inView)return!0;let{top}=this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0),{bottom}=this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0),{visibleTop,visibleBottom}=this;return(0==from||top<=visibleTop-Math.max(10,Math.min(-bias,250)))&&(to==this.state.doc.length||bottom>=visibleBottom+Math.max(10,Math.min(bias,250)))&&top>visibleTop-2e3&&bottom<visibleBottom+2e3}mapLineGaps(gaps,changes){if(!gaps.length||changes.empty)return gaps;let mapped=[];for(let gap of gaps)changes.touchesRange(gap.from,gap.to)||mapped.push(new LineGap(changes.mapPos(gap.from),changes.mapPos(gap.to),gap.size));return mapped}ensureLineGaps(current,mayMeasure){let wrapping=this.heightOracle.lineWrapping,margin=wrapping?1e4:2e3,halfMargin=margin>>1,doubleMargin=margin<<1;if(this.defaultTextDirection!=Direction.LTR&&!wrapping)return[];let gaps=[],addGap=(from,to,line,structure)=>{if(to-from<halfMargin)return;let sel=this.state.selection.main,avoid=[sel.from];sel.empty||avoid.push(sel.to);for(let pos of avoid)if(pos>from&&pos<to)return addGap(from,pos-10,line,structure),void addGap(pos+10,to,line,structure);let gap=function find(array,f){for(let val of array)if(f(val))return val;return}(current,(gap=>gap.from>=line.from&&gap.to<=line.to&&Math.abs(gap.from-from)<halfMargin&&Math.abs(gap.to-to)<halfMargin&&!avoid.some((pos=>gap.from<pos&&gap.to>pos))));if(!gap){if(to<line.to&&mayMeasure&&wrapping&&mayMeasure.visibleRanges.some((r=>r.from<=to&&r.to>=to))){let lineStart=mayMeasure.moveToLineBoundary(dist_EditorSelection.cursor(to),!1,!0).head;lineStart>from&&(to=lineStart)}gap=new LineGap(from,to,this.gapSize(line,from,to,structure))}gaps.push(gap)};for(let line of this.viewportLines){if(line.length<doubleMargin)continue;let structure=lineStructure(line.from,line.to,this.stateDeco);if(structure.total<doubleMargin)continue;let viewFrom,viewTo,target=this.scrollTarget?this.scrollTarget.range.head:null;if(wrapping){let top,bot,marginHeight=margin/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=target){let targetFrac=findFraction(structure,target),spaceFrac=((this.visibleBottom-this.visibleTop)/2+marginHeight)/line.height;top=targetFrac-spaceFrac,bot=targetFrac+spaceFrac}else top=(this.visibleTop-line.top-marginHeight)/line.height,bot=(this.visibleBottom-line.top+marginHeight)/line.height;viewFrom=findPosition(structure,top),viewTo=findPosition(structure,bot)}else{let left,right,totalWidth=structure.total*this.heightOracle.charWidth,marginWidth=margin*this.heightOracle.charWidth;if(null!=target){let targetFrac=findFraction(structure,target),spaceFrac=((this.pixelViewport.right-this.pixelViewport.left)/2+marginWidth)/totalWidth;left=targetFrac-spaceFrac,right=targetFrac+spaceFrac}else left=(this.pixelViewport.left-marginWidth)/totalWidth,right=(this.pixelViewport.right+marginWidth)/totalWidth;viewFrom=findPosition(structure,left),viewTo=findPosition(structure,right)}viewFrom>line.from&&addGap(line.from,viewFrom,line,structure),viewTo<line.to&&addGap(viewTo,line.to,line,structure)}return gaps}gapSize(line,from,to,structure){let fraction=findFraction(structure,to)-findFraction(structure,from);return this.heightOracle.lineWrapping?line.height*fraction:structure.total*this.heightOracle.charWidth*fraction}updateLineGaps(gaps){LineGap.same(gaps,this.lineGaps)||(this.lineGaps=gaps,this.lineGapDeco=Decoration.set(gaps.map((gap=>gap.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let deco=this.stateDeco;this.lineGaps.length&&(deco=deco.concat(this.lineGapDeco));let ranges=[];dist_RangeSet.spans(deco,this.viewport.from,this.viewport.to,{span(from,to){ranges.push({from,to})},point(){}},20);let changed=ranges.length!=this.visibleRanges.length||this.visibleRanges.some(((r,i)=>r.from!=ranges[i].from||r.to!=ranges[i].to));return this.visibleRanges=ranges,changed?4:0}lineBlockAt(pos){return pos>=this.viewport.from&&pos<=this.viewport.to&&this.viewportLines.find((b=>b.from<=pos&&b.to>=pos))||scaleBlock(this.heightMap.lineAt(pos,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(height){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(scrollTop){let block=this.lineBlockAtHeight(scrollTop+8);return block.from>=this.viewport.from||this.viewportLines[0].top-scrollTop>200?block:this.viewportLines[0]}elementAtHeight(height){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(from,to){this.from=from,this.to=to}}function lineStructure(from,to,stateDeco){let ranges=[],pos=from,total=0;return dist_RangeSet.spans(stateDeco,from,to,{span(){},point(from,to){from>pos&&(ranges.push({from:pos,to:from}),total+=from-pos),pos=to}},20),pos<to&&(ranges.push({from:pos,to}),total+=to-pos),{total,ranges}}function findPosition({total,ranges},ratio){if(ratio<=0)return ranges[0].from;if(ratio>=1)return ranges[ranges.length-1].to;let dist=Math.floor(total*ratio);for(let i=0;;i++){let{from,to}=ranges[i],size=to-from;if(dist<=size)return from+dist;dist-=size}}function findFraction(structure,pos){let counted=0;for(let{from,to}of structure.ranges){if(pos<=to){counted+=pos-from;break}counted+=to-from}return counted/structure.total}const IdScaler={toDOM:n=>n,fromDOM:n=>n,scale:1};class BigScaler{constructor(oracle,heightMap,viewports){let vpHeight=0,base=0,domBase=0;this.viewports=viewports.map((({from,to})=>{let top=heightMap.lineAt(from,QueryType.ByPos,oracle,0,0).top,bottom=heightMap.lineAt(to,QueryType.ByPos,oracle,0,0).bottom;return vpHeight+=bottom-top,{from,to,top,bottom,domTop:0,domBottom:0}})),this.scale=(7e6-vpHeight)/(heightMap.height-vpHeight);for(let obj of this.viewports)obj.domTop=domBase+(obj.top-base)*this.scale,domBase=obj.domBottom=obj.domTop+(obj.bottom-obj.top),base=obj.bottom}toDOM(n){for(let i=0,base=0,domBase=0;;i++){let vp=i<this.viewports.length?this.viewports[i]:null;if(!vp||n<vp.top)return domBase+(n-base)*this.scale;if(n<=vp.bottom)return vp.domTop+(n-vp.top);base=vp.bottom,domBase=vp.domBottom}}fromDOM(n){for(let i=0,base=0,domBase=0;;i++){let vp=i<this.viewports.length?this.viewports[i]:null;if(!vp||n<vp.domTop)return base+(n-domBase)/this.scale;if(n<=vp.domBottom)return vp.top+(n-vp.domTop);base=vp.bottom,domBase=vp.domBottom}}}function scaleBlock(block,scaler){if(1==scaler.scale)return block;let bTop=scaler.toDOM(block.top),bBottom=scaler.toDOM(block.bottom);return new BlockInfo(block.from,block.length,bTop,bBottom-bTop,Array.isArray(block._content)?block._content.map((b=>scaleBlock(b,scaler))):block._content)}const theme=Facet.define({combine:strs=>strs.join(" ")}),darkTheme=Facet.define({combine:values=>values.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(main,spec,scopes){return new StyleModule(spec,{finish:sel=>/&/.test(sel)?sel.replace(/&\w*/,(m=>{if("&"==m)return main;if(!scopes||!scopes[m])throw new RangeError(`Unsupported selector: ${m}`);return scopes[m]})):main+" "+sel})}const baseTheme$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMReader{constructor(points,state){this.points=points,this.text="",this.lineSeparator=state.facet(dist_EditorState.lineSeparator)}append(text){this.text+=text}lineBreak(){this.text+=""}readRange(start,end){if(!start)return this;let parent=start.parentNode;for(let cur=start;;){this.findPointBefore(parent,cur);let oldLen=this.text.length;this.readNode(cur);let next=cur.nextSibling;if(next==end)break;let view=ContentView.get(cur),nextView=ContentView.get(next);(view&&nextView?view.breakAfter:(view?view.breakAfter:isBlockElement(cur))||isBlockElement(next)&&("BR"!=cur.nodeName||cur.cmIgnore)&&this.text.length>oldLen)&&this.lineBreak(),cur=next}return this.findPointBefore(parent,end),this}readTextNode(node){let text=node.nodeValue;for(let point of this.points)point.node==node&&(point.pos=this.text.length+Math.min(point.offset,text.length));for(let off=0,re=this.lineSeparator?null:/\r\n?|\n/g;;){let m,nextBreak=-1,breakSize=1;if(this.lineSeparator?(nextBreak=text.indexOf(this.lineSeparator,off),breakSize=this.lineSeparator.length):(m=re.exec(text))&&(nextBreak=m.index,breakSize=m[0].length),this.append(text.slice(off,nextBreak<0?text.length:nextBreak)),nextBreak<0)break;if(this.lineBreak(),breakSize>1)for(let point of this.points)point.node==node&&point.pos>this.text.length&&(point.pos-=breakSize-1);off=nextBreak+breakSize}}readNode(node){if(node.cmIgnore)return;let view=ContentView.get(node),fromView=view&&view.overrideDOMText;if(null!=fromView){this.findPointInside(node,fromView.length);for(let i=fromView.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==node.nodeType?this.readTextNode(node):"BR"==node.nodeName?node.nextSibling&&this.lineBreak():1==node.nodeType&&this.readRange(node.firstChild,null)}findPointBefore(node,next){for(let point of this.points)point.node==node&&node.childNodes[point.offset]==next&&(point.pos=this.text.length)}findPointInside(node,length){for(let point of this.points)(3==node.nodeType?point.node==node:node.contains(point.node))&&(point.pos=this.text.length+(isAtEnd(node,point.node,point.offset)?length:0))}}function isAtEnd(parent,node,offset){for(;;){if(!node||offset<maxOffset(node))return!1;if(node==parent)return!0;offset=domIndex(node)+1,node=node.parentNode}}function isBlockElement(node){return 1==node.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(node.nodeName)}class DOMPoint{constructor(node,offset){this.node=node,this.offset=offset,this.pos=-1}}class DOMChange{constructor(view,start,end,typeOver){this.typeOver=typeOver,this.bounds=null,this.text="";let{impreciseHead:iHead,impreciseAnchor:iAnchor}=view.docView;if(view.state.readOnly&&start>-1)this.newSel=null;else if(start>-1&&(this.bounds=view.docView.domBoundsAround(start,end,0))){let selPoints=iHead||iAnchor?[]:function selectionPoints(view){let result=[];if(view.root.activeElement!=view.contentDOM)return result;let{anchorNode,anchorOffset,focusNode,focusOffset}=view.observer.selectionRange;anchorNode&&(result.push(new DOMPoint(anchorNode,anchorOffset)),focusNode==anchorNode&&focusOffset==anchorOffset||result.push(new DOMPoint(focusNode,focusOffset)));return result}(view),reader=new DOMReader(selPoints,view.state);reader.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=reader.text,this.newSel=function selectionFromPoints(points,base){if(0==points.length)return null;let anchor=points[0].pos,head=2==points.length?points[1].pos:anchor;return anchor>-1&&head>-1?dist_EditorSelection.single(anchor+base,head+base):null}(selPoints,this.bounds.from)}else{let domSel=view.observer.selectionRange,head=iHead&&iHead.node==domSel.focusNode&&iHead.offset==domSel.focusOffset||!contains(view.contentDOM,domSel.focusNode)?view.state.selection.main.head:view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset),anchor=iAnchor&&iAnchor.node==domSel.anchorNode&&iAnchor.offset==domSel.anchorOffset||!contains(view.contentDOM,domSel.anchorNode)?view.state.selection.main.anchor:view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);this.newSel=dist_EditorSelection.single(anchor,head)}}}function applyDOMChange(view,domChange){let change,{newSel}=domChange,sel=view.state.selection.main,lastKey=view.inputState.lastKeyTime>Date.now()-100?view.inputState.lastKeyCode:-1;if(domChange.bounds){let{from,to}=domChange.bounds,preferredPos=sel.from,preferredSide=null;(8===lastKey||browser.android&&domChange.text.length<to-from)&&(preferredPos=sel.to,preferredSide="end");let diff=function findDiff(a,b,preferredPos,preferredSide){let minLen=Math.min(a.length,b.length),from=0;for(;from<minLen&&a.charCodeAt(from)==b.charCodeAt(from);)from++;if(from==minLen&&a.length==b.length)return null;let toA=a.length,toB=b.length;for(;toA>0&&toB>0&&a.charCodeAt(toA-1)==b.charCodeAt(toB-1);)toA--,toB--;if("end"==preferredSide){preferredPos-=toA+Math.max(0,from-Math.min(toA,toB))-from}if(toA<from&&a.length<b.length){from-=preferredPos<=from&&preferredPos>=toA?from-preferredPos:0,toB=from+(toB-toA),toA=from}else if(toB<from){from-=preferredPos<=from&&preferredPos>=toB?from-preferredPos:0,toA=from+(toA-toB),toB=from}return{from,toA,toB}}(view.state.doc.sliceString(from,to,""),domChange.text,preferredPos-from,preferredSide);diff&&(browser.chrome&&13==lastKey&&diff.toB==diff.from+2&&""==domChange.text.slice(diff.from,diff.toB)&&diff.toB--,change={from:from+diff.from,to:from+diff.toA,insert:Text.of(domChange.text.slice(diff.from,diff.toB).split(""))})}else newSel&&(!view.hasFocus&&view.state.facet(editable)||newSel.main.eq(sel))&&(newSel=null);if(!change&&!newSel)return!1;if(!change&&domChange.typeOver&&!sel.empty&&newSel&&newSel.main.empty?change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,sel.to)}:change&&change.from>=sel.from&&change.to<=sel.to&&(change.from!=sel.from||change.to!=sel.to)&&sel.to-sel.from-(change.to-change.from)<=4?change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,change.from).append(change.insert).append(view.state.doc.slice(change.to,sel.to))}:(browser.mac||browser.android)&&change&&change.from==change.to&&change.from==sel.head-1&&/^\. ?$/.test(change.insert.toString())&&"off"==view.contentDOM.getAttribute("autocorrect")?(newSel&&2==change.insert.length&&(newSel=dist_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1)),change={from:sel.from,to:sel.to,insert:Text.of([" "])}):browser.chrome&&change&&change.from==change.to&&change.from==sel.head&&"\n "==change.insert.toString()&&view.lineWrapping&&(newSel&&(newSel=dist_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1)),change={from:sel.from,to:sel.to,insert:Text.of([" "])}),change){if(browser.ios&&view.inputState.flushIOSKey())return!0;if(browser.android&&(change.from==sel.from&&change.to==sel.to&&1==change.insert.length&&2==change.insert.lines&&dispatchKey(view.contentDOM,"Enter",13)||(change.from==sel.from-1&&change.to==sel.to&&0==change.insert.length||8==lastKey&&change.insert.length<change.to-change.from&&change.to>sel.head)&&dispatchKey(view.contentDOM,"Backspace",8)||change.from==sel.from&&change.to==sel.to+1&&0==change.insert.length&&dispatchKey(view.contentDOM,"Delete",46)))return!0;let defaultTr,text=change.insert.toString();view.inputState.composing>=0&&view.inputState.composing++;let defaultInsert=()=>defaultTr||(defaultTr=function applyDefaultInsert(view,change,newSel){let tr,startState=view.state,sel=startState.selection.main;if(change.from>=sel.from&&change.to<=sel.to&&change.to-change.from>=(sel.to-sel.from)/3&&(!newSel||newSel.main.empty&&newSel.main.from==change.from+change.insert.length)&&view.inputState.composing<0){let before=sel.from<change.from?startState.sliceDoc(sel.from,change.from):"",after=sel.to>change.to?startState.sliceDoc(change.to,sel.to):"";tr=startState.replaceSelection(view.state.toText(before+change.insert.sliceString(0,void 0,view.state.lineBreak)+after))}else{let changes=startState.changes(change),mainSel=newSel&&newSel.main.to<=changes.newLength?newSel.main:void 0;if(startState.selection.ranges.length>1&&view.inputState.composing>=0&&change.to<=sel.to&&change.to>=sel.to-10){let compositionRange,replaced=view.state.sliceDoc(change.from,change.to),composition=newSel&&findCompositionNode(view,newSel.main.head);if(composition){let dLen=change.insert.length-(change.to-change.from);compositionRange={from:composition.from,to:composition.to-dLen}}else compositionRange=view.state.doc.lineAt(sel.head);let offset=sel.to-change.to,size=sel.to-sel.from;tr=startState.changeByRange((range=>{if(range.from==sel.from&&range.to==sel.to)return{changes,range:mainSel||range.map(changes)};let to=range.to-offset,from=to-replaced.length;if(range.to-range.from!=size||view.state.sliceDoc(from,to)!=replaced||range.to>=compositionRange.from&&range.from<=compositionRange.to)return{range};let rangeChanges=startState.changes({from,to,insert:change.insert}),selOff=range.to-sel.to;return{changes:rangeChanges,range:mainSel?dist_EditorSelection.range(Math.max(0,mainSel.anchor+selOff),Math.max(0,mainSel.head+selOff)):range.map(rangeChanges)}}))}else tr={changes,selection:mainSel&&startState.selection.replaceRange(mainSel)}}let userEvent="input.type";(view.composing||view.inputState.compositionPendingChange&&view.inputState.compositionEndedAt>Date.now()-50)&&(view.inputState.compositionPendingChange=!1,userEvent+=".compose",view.inputState.compositionFirstChange&&(userEvent+=".start",view.inputState.compositionFirstChange=!1));return startState.update(tr,{userEvent,scrollIntoView:!0})}(view,change,newSel));return view.state.facet(inputHandler).some((h=>h(view,change.from,change.to,text,defaultInsert)))||view.dispatch(defaultInsert()),!0}if(newSel&&!newSel.main.eq(sel)){let scrollIntoView=!1,userEvent="select";return view.inputState.lastSelectionTime>Date.now()-50&&("select"==view.inputState.lastSelectionOrigin&&(scrollIntoView=!0),userEvent=view.inputState.lastSelectionOrigin),view.dispatch({selection:newSel,scrollIntoView,userEvent}),!0}return!1}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(view){this.view=view,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=view.contentDOM,this.observer=new MutationObserver((mutations=>{for(let mut of mutations)this.queue.push(mut);(browser.ie&&browser.ie_version<=11||browser.ios&&view.composing)&&mutations.some((m=>"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length))?this.flushSoon():this.flush()})),useCharData&&(this.onCharData=event=>{this.queue.push({target:event.target,type:"characterData",oldValue:event.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var _a;(null===(_a=this.view.docView)||void 0===_a?void 0:_a.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(view.scrollDOM)),this.addWindowListeners(this.win=view.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((entries=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),entries.length>0&&entries[entries.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((entries=>{entries.length>0&&entries[entries.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(gaps){if(this.gapIntersection&&(gaps.length!=this.gaps.length||this.gaps.some(((g,i)=>g!=gaps[i])))){this.gapIntersection.disconnect();for(let gap of gaps)this.gapIntersection.observe(gap);this.gaps=gaps}}onSelectionChange(event){let wasChanged=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view}=this,sel=this.selectionRange;if(view.state.facet(editable)?view.root.activeElement!=this.dom:!hasSelection(view.dom,sel))return;let context=sel.anchorNode&&view.docView.nearest(sel.anchorNode);context&&context.ignoreEvent(event)?wasChanged||(this.selectionChanged=!1):(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!view.state.selection.main.empty&&sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view}=this,range=browser.safari&&11==view.root.nodeType&&function deepActiveElement(doc){let elt=doc.activeElement;for(;elt&&elt.shadowRoot;)elt=elt.shadowRoot.activeElement;return elt}(this.dom.ownerDocument)==this.dom&&function safariSelectionRangeHack(view){let found=null;function read(event){event.preventDefault(),event.stopImmediatePropagation(),found=event.getTargetRanges()[0]}if(view.contentDOM.addEventListener("beforeinput",read,!0),view.dom.ownerDocument.execCommand("indent"),view.contentDOM.removeEventListener("beforeinput",read,!0),!found)return null;let anchorNode=found.startContainer,anchorOffset=found.startOffset,focusNode=found.endContainer,focusOffset=found.endOffset,curAnchor=view.docView.domAtPos(view.state.selection.main.anchor);isEquivalentPosition(curAnchor.node,curAnchor.offset,focusNode,focusOffset)&&([anchorNode,anchorOffset,focusNode,focusOffset]=[focusNode,focusOffset,anchorNode,anchorOffset]);return{anchorNode,anchorOffset,focusNode,focusOffset}}(this.view)||getSelection(view.root);if(!range||this.selectionRange.eq(range))return!1;let local=hasSelection(this.dom,range);return local&&!this.selectionChanged&&view.inputState.lastFocusTime>Date.now()-200&&view.inputState.lastTouchTime<Date.now()-300&&function atElementStart(doc,selection){let node=selection.focusNode,offset=selection.focusOffset;if(!node||selection.anchorNode!=node||selection.anchorOffset!=offset)return!1;for(offset=Math.min(offset,maxOffset(node));;)if(offset){if(1!=node.nodeType)return!1;let prev=node.childNodes[offset-1];"false"==prev.contentEditable?offset--:(node=prev,offset=maxOffset(node))}else{if(node==doc)return!0;offset=domIndex(node),node=node.parentNode}}(this.dom,range)?(this.view.inputState.lastFocusTime=0,view.docView.updateSelection(),!1):(this.selectionRange.setRange(range),local&&(this.selectionChanged=!0),!0)}setSelectionRange(anchor,head){this.selectionRange.set(anchor.node,anchor.offset,head.node,head.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let i=0,changed=null;for(let dom=this.dom;dom;)if(1==dom.nodeType)!changed&&i<this.scrollTargets.length&&this.scrollTargets[i]==dom?i++:changed||(changed=this.scrollTargets.slice(0,i)),changed&&changed.push(dom),dom=dom.assignedSlot||dom.parentNode;else{if(11!=dom.nodeType)break;dom=dom.host}if(i<this.scrollTargets.length&&!changed&&(changed=this.scrollTargets.slice(0,i)),changed){for(let dom of this.scrollTargets)dom.removeEventListener("scroll",this.onScroll);for(let dom of this.scrollTargets=changed)dom.addEventListener("scroll",this.onScroll)}}ignore(f){if(!this.active)return f();try{return this.stop(),f()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(key,keyCode){var _a;if(!this.delayedAndroidKey){let flush=()=>{let key=this.delayedAndroidKey;if(key){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=key.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&key.force&&dispatchKey(this.dom,key.key,key.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(flush)}this.delayedAndroidKey&&"Enter"!=key||(this.delayedAndroidKey={key,keyCode,force:this.lastChange<Date.now()-50||!!(null===(_a=this.delayedAndroidKey)||void 0===_a?void 0:_a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let mut of this.observer.takeRecords())this.queue.push(mut);return this.queue}processRecords(){let records=this.pendingRecords();records.length&&(this.queue=[]);let from=-1,to=-1,typeOver=!1;for(let record of records){let range=this.readMutation(record);range&&(range.typeOver&&(typeOver=!0),-1==from?({from,to}=range):(from=Math.min(range.from,from),to=Math.max(range.to,to)))}return{from,to,typeOver}}readChange(){let{from,to,typeOver}=this.processRecords(),newSel=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(from<0&&!newSel)return null;from>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let change=new DOMChange(this.view,from,to,typeOver);return this.view.docView.domChanged={newSel:change.newSel?change.newSel.main:null},change}flush(readSelection=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;readSelection&&this.readSelectionRange();let domChange=this.readChange();if(!domChange)return this.view.requestMeasure(),!1;let startState=this.view.state,handled=applyDOMChange(this.view,domChange);return this.view.state==startState&&this.view.update([]),handled}readMutation(rec){let cView=this.view.docView.nearest(rec.target);if(!cView||cView.ignoreMutation(rec))return null;if(cView.markDirty("attributes"==rec.type),"attributes"==rec.type&&(cView.flags|=4),"childList"==rec.type){let childBefore=findChild(cView,rec.previousSibling||rec.target.previousSibling,-1),childAfter=findChild(cView,rec.nextSibling||rec.target.nextSibling,1);return{from:childBefore?cView.posAfter(childBefore):cView.posAtStart,to:childAfter?cView.posBefore(childAfter):cView.posAtEnd,typeOver:!1}}return"characterData"==rec.type?{from:cView.posAtStart,to:cView.posAtEnd,typeOver:rec.target.nodeValue==rec.oldValue}:null}setWindow(win){win!=this.win&&(this.removeWindowListeners(this.win),this.win=win,this.addWindowListeners(this.win))}addWindowListeners(win){win.addEventListener("resize",this.onResize),win.addEventListener("beforeprint",this.onPrint),win.addEventListener("scroll",this.onScroll),win.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(win){win.removeEventListener("scroll",this.onScroll),win.removeEventListener("resize",this.onResize),win.removeEventListener("beforeprint",this.onPrint),win.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var _a,_b,_c;this.stop(),null===(_a=this.intersection)||void 0===_a||_a.disconnect(),null===(_b=this.gapIntersection)||void 0===_b||_b.disconnect(),null===(_c=this.resizeScroll)||void 0===_c||_c.disconnect();for(let dom of this.scrollTargets)dom.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(cView,dom,dir){for(;dom;){let curView=ContentView.get(dom);if(curView&&curView.parent==cView)return curView;let parent=dom.parentNode;dom=parent!=cView.dom?parent:dir>0?dom.nextSibling:dom.previousSibling}return null}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(config={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch}=config;this.dispatchTransactions=config.dispatchTransactions||dispatch&&(trs=>trs.forEach((tr=>dispatch(tr,this))))||(trs=>this.update(trs)),this.dispatch=this.dispatch.bind(this),this._root=config.root||function getRoot(node){for(;node;){if(node&&(9==node.nodeType||11==node.nodeType&&node.host))return node;node=node.assignedSlot||node.parentNode}return null}(config.parent)||document,this.viewState=new ViewState(config.state||dist_EditorState.create(config)),this.plugins=this.state.facet(viewPlugin).map((spec=>new PluginInstance(spec)));for(let plugin of this.plugins)plugin.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),config.parent&&config.parent.appendChild(this.dom)}dispatch(...input){let trs=1==input.length&&input[0]instanceof Transaction?input:1==input.length&&Array.isArray(input[0])?input[0]:[this.state.update(...input)];this.dispatchTransactions(trs,this)}update(transactions){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let update,redrawn=!1,attrsChanged=!1,state=this.state;for(let tr of transactions){if(tr.startState!=state)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");state=tr.state}if(this.destroyed)return void(this.viewState.state=state);let focus=this.hasFocus,focusFlag=0,dispatchFocus=null;transactions.some((tr=>tr.annotation(isFocusChange)))?(this.inputState.notifiedFocused=focus,focusFlag=1):focus!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=focus,dispatchFocus=focusChangeTransaction(state,focus),dispatchFocus||(focusFlag=1));let pendingKey=this.observer.delayedAndroidKey,domChange=null;if(pendingKey?(this.observer.clearDelayedAndroidKey(),domChange=this.observer.readChange(),(domChange&&!this.state.doc.eq(state.doc)||!this.state.selection.eq(state.selection))&&(domChange=null)):this.observer.clear(),state.facet(dist_EditorState.phrases)!=this.state.facet(dist_EditorState.phrases))return this.setState(state);update=ViewUpdate.create(this,state,transactions),update.flags|=focusFlag;let scrollTarget=this.viewState.scrollTarget;try{this.updateState=2;for(let tr of transactions){if(scrollTarget&&(scrollTarget=scrollTarget.map(tr.changes)),tr.scrollIntoView){let{main}=tr.state.selection;scrollTarget=new ScrollTarget(main.empty?main:dist_EditorSelection.cursor(main.head,main.head>main.anchor?-1:1))}for(let e of tr.effects)e.is(scrollIntoView)&&(scrollTarget=e.value)}this.viewState.update(update,scrollTarget),this.bidiCache=CachedOrder.update(this.bidiCache,update.changes),update.empty||(this.updatePlugins(update),this.inputState.update(update)),redrawn=this.docView.update(update),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),attrsChanged=this.updateAttrs(),this.showAnnouncements(transactions),this.docView.updateSelection(redrawn,transactions.some((tr=>tr.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(update.startState.facet(theme)!=update.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(redrawn||attrsChanged||scrollTarget||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!update.empty)for(let listener of this.state.facet(updateListener))listener(update);(dispatchFocus||domChange)&&Promise.resolve().then((()=>{dispatchFocus&&this.state==dispatchFocus.startState&&this.dispatch(dispatchFocus),domChange&&!applyDOMChange(this,domChange)&&pendingKey.force&&dispatchKey(this.contentDOM,pendingKey.key,pendingKey.keyCode)}))}setState(newState){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=newState);this.updateState=2;let hadFocus=this.hasFocus;try{for(let plugin of this.plugins)plugin.destroy(this);this.viewState=new ViewState(newState),this.plugins=newState.facet(viewPlugin).map((spec=>new PluginInstance(spec))),this.pluginMap.clear();for(let plugin of this.plugins)plugin.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}hadFocus&&this.focus(),this.requestMeasure()}updatePlugins(update){let prevSpecs=update.startState.facet(viewPlugin),specs=update.state.facet(viewPlugin);if(prevSpecs!=specs){let newPlugins=[];for(let spec of specs){let found=prevSpecs.indexOf(spec);if(found<0)newPlugins.push(new PluginInstance(spec));else{let plugin=this.plugins[found];plugin.mustUpdate=update,newPlugins.push(plugin)}}for(let plugin of this.plugins)plugin.mustUpdate!=update&&plugin.destroy(this);this.plugins=newPlugins,this.pluginMap.clear()}else for(let p of this.plugins)p.mustUpdate=update;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);prevSpecs!=specs&&this.inputState.ensureHandlers(this.plugins)}measure(flush=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,flush&&this.observer.forceFlush();let updated=null,sDOM=this.scrollDOM,scrollTop=sDOM.scrollTop*this.scaleY,{scrollAnchorPos,scrollAnchorHeight}=this.viewState;Math.abs(scrollTop-this.viewState.scrollTop)>1&&(scrollAnchorHeight=-1),this.viewState.scrollAnchorHeight=-1;try{for(let i=0;;i++){if(scrollAnchorHeight<0)if(isScrolledToBottom(sDOM))scrollAnchorPos=-1,scrollAnchorHeight=this.viewState.heightMap.height;else{let block=this.viewState.scrollAnchorAt(scrollTop);scrollAnchorPos=block.from,scrollAnchorHeight=block.top}this.updateState=1;let changed=this.viewState.measure(this);if(!changed&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let measuring=[];4&changed||([this.measureRequests,measuring]=[measuring,this.measureRequests]);let measured=measuring.map((m=>{try{return m.read(this)}catch(e){return logException(this.state,e),BadMeasure}})),update=ViewUpdate.create(this,this.state,[]),redrawn=!1;update.flags|=changed,updated?updated.flags|=changed:updated=update,this.updateState=2,update.empty||(this.updatePlugins(update),this.inputState.update(update),this.updateAttrs(),redrawn=this.docView.update(update));for(let i=0;i<measuring.length;i++)if(measured[i]!=BadMeasure)try{let m=measuring[i];m.write&&m.write(measured[i],this)}catch(e){logException(this.state,e)}if(redrawn&&this.docView.updateSelection(!0),!update.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}{let diff=(scrollAnchorPos<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(scrollAnchorPos).top)-scrollAnchorHeight;if(diff>1||diff<-1){scrollTop+=diff,sDOM.scrollTop=scrollTop/this.scaleY,scrollAnchorHeight=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(updated&&!updated.empty)for(let listener of this.state.facet(updateListener))listener(updated)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let editorAttrs=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),contentAttrs={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(contentAttrs["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,contentAttrs);let changed=this.observer.ignore((()=>{let changedContent=updateAttrs(this.contentDOM,this.contentAttrs,contentAttrs),changedEditor=updateAttrs(this.dom,this.editorAttrs,editorAttrs);return changedContent||changedEditor}));return this.editorAttrs=editorAttrs,this.contentAttrs=contentAttrs,changed}showAnnouncements(trs){let first=!0;for(let tr of trs)for(let effect of tr.effects)if(effect.is(EditorView.announce)){first&&(this.announceDOM.textContent=""),first=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=effect.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let nonce=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1).reverse(),nonce?{nonce}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(request){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),request){if(this.measureRequests.indexOf(request)>-1)return;if(null!=request.key)for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===request.key)return void(this.measureRequests[i]=request);this.measureRequests.push(request)}}plugin(plugin){let known=this.pluginMap.get(plugin);return(void 0===known||known&&known.spec!=plugin)&&this.pluginMap.set(plugin,known=this.plugins.find((p=>p.spec==plugin))||null),known&&known.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(height){return this.readMeasured(),this.viewState.elementAtHeight(height)}lineBlockAtHeight(height){return this.readMeasured(),this.viewState.lineBlockAtHeight(height)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(pos){return this.viewState.lineBlockAt(pos)}get contentHeight(){return this.viewState.contentHeight}moveByChar(start,forward,by){return skipAtoms(this,start,moveByChar(this,start,forward,by))}moveByGroup(start,forward){return skipAtoms(this,start,moveByChar(this,start,forward,(initial=>function byGroup(view,pos,start){let categorize=view.state.charCategorizer(pos),cat=categorize(start);return next=>{let nextCat=categorize(next);return cat==dist_CharCategory.Space&&(cat=nextCat),cat==nextCat}}(this,start.head,initial))))}moveToLineBoundary(start,forward,includeWrap=!0){return function moveToLineBoundary(view,start,forward,includeWrap){let line=blockAt(view,start.head),coords=includeWrap&&line.type==BlockType.Text&&(view.lineWrapping||line.widgetLineBreaks)?view.coordsAtPos(start.assoc<0&&start.head>line.from?start.head-1:start.head):null;if(coords){let editorRect=view.dom.getBoundingClientRect(),direction=view.textDirectionAt(line.from),pos=view.posAtCoords({x:forward==(direction==Direction.LTR)?editorRect.right-1:editorRect.left+1,y:(coords.top+coords.bottom)/2});if(null!=pos)return dist_EditorSelection.cursor(pos,forward?-1:1)}return dist_EditorSelection.cursor(forward?line.to:line.from,forward?-1:1)}(this,start,forward,includeWrap)}moveVertically(start,forward,distance){return skipAtoms(this,start,function moveVertically(view,start,forward,distance){let startPos=start.head,dir=forward?1:-1;if(startPos==(forward?view.state.doc.length:0))return dist_EditorSelection.cursor(startPos,start.assoc);let startY,goal=start.goalColumn,rect=view.contentDOM.getBoundingClientRect(),startCoords=view.coordsAtPos(startPos,start.assoc||-1),docTop=view.documentTop;if(startCoords)null==goal&&(goal=startCoords.left-rect.left),startY=dir<0?startCoords.top:startCoords.bottom;else{let line=view.viewState.lineBlockAt(startPos);null==goal&&(goal=Math.min(rect.right-rect.left,view.defaultCharacterWidth*(startPos-line.from))),startY=(dir<0?line.top:line.bottom)+docTop}let resolvedGoal=rect.left+goal,dist=null!=distance?distance:view.viewState.heightOracle.textHeight>>1;for(let extra=0;;extra+=10){let curY=startY+(dist+extra)*dir,pos=posAtCoords(view,{x:resolvedGoal,y:curY},!1,dir);if(curY<rect.top||curY>rect.bottom||(dir<0?pos<startPos:pos>startPos)){let charRect=view.docView.coordsForChar(pos),assoc=!charRect||curY<charRect.top?-1:1;return dist_EditorSelection.cursor(pos,assoc,void 0,goal)}}}(this,start,forward,distance))}domAtPos(pos){return this.docView.domAtPos(pos)}posAtDOM(node,offset=0){return this.docView.posFromDOM(node,offset)}posAtCoords(coords,precise=!0){return this.readMeasured(),posAtCoords(this,coords,precise)}coordsAtPos(pos,side=1){this.readMeasured();let rect=this.docView.coordsAt(pos,side);if(!rect||rect.left==rect.right)return rect;let line=this.state.doc.lineAt(pos),order=this.bidiSpans(line);return flattenRect(rect,order[BidiSpan.find(order,pos-line.from,-1,side)].dir==Direction.LTR==side>0)}coordsForChar(pos){return this.readMeasured(),this.docView.coordsForChar(pos)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(pos){return!this.state.facet(perLineTextDirection)||pos<this.viewport.from||pos>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(pos))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(line){if(line.length>MaxBidiLine)return trivialOrder(line.length);let isolates,dir=this.textDirectionAt(line.from);for(let entry of this.bidiCache)if(entry.from==line.from&&entry.dir==dir&&(entry.fresh||isolatesEq(entry.isolates,isolates=getIsolatedRanges(this,line.from,line.to))))return entry.order;isolates||(isolates=getIsolatedRanges(this,line.from,line.to));let order=computeOrder(line.text,dir,isolates);return this.bidiCache.push(new CachedOrder(line.from,line.to,dir,isolates,!0,order)),order}get hasFocus(){var _a;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(null===(_a=this.inputState)||void 0===_a?void 0:_a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()}))}setRoot(root){this._root!=root&&(this._root=root,this.observer.setWindow((9==root.nodeType?root:root.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let plugin of this.plugins)plugin.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(pos,options={}){return scrollIntoView.of(new ScrollTarget("number"==typeof pos?dist_EditorSelection.cursor(pos):pos,options.y,options.x,options.yMargin,options.xMargin))}static domEventHandlers(handlers){return dist_ViewPlugin.define((()=>({})),{eventHandlers:handlers})}static domEventObservers(observers){return dist_ViewPlugin.define((()=>({})),{eventObservers:observers})}static theme(spec,options){let prefix=StyleModule.newName(),result=[theme.of(prefix),styleModule.of(buildTheme(`.${prefix}`,spec))];return options&&options.dark&&result.push(darkTheme.of(!0)),result}static baseTheme(spec){return dist_Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,spec,lightDarkIDs)))}static findFromDOM(dom){var _a;let content=dom.querySelector(".cm-content"),cView=content&&ContentView.get(content)||ContentView.get(dom);return(null===(_a=null==cView?void 0:cView.rootView)||void 0===_a?void 0:_a.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:values=>values.length?values[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=dist_StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(from,to,dir,isolates,fresh,order){this.from=from,this.to=to,this.dir=dir,this.isolates=isolates,this.fresh=fresh,this.order=order}static update(cache,changes){if(changes.empty&&!cache.some((c=>c.fresh)))return cache;let result=[],lastDir=cache.length?cache[cache.length-1].dir:Direction.LTR;for(let i=Math.max(0,cache.length-10);i<cache.length;i++){let entry=cache[i];entry.dir!=lastDir||changes.touchesRange(entry.from,entry.to)||result.push(new CachedOrder(changes.mapPos(entry.from,1),changes.mapPos(entry.to,-1),entry.dir,entry.isolates,!1,entry.order))}return result}}function attrsFromFacet(view,facet,base){for(let sources=view.state.facet(facet),i=sources.length-1;i>=0;i--){let source=sources[i],value="function"==typeof source?source(view):source;value&&combineAttrs(value,base)}return base}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function modifiers(name,event,shift){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),!1!==shift&&event.shiftKey&&(name="Shift-"+name),name}const handleKeyEvents=dist_Prec.default(EditorView.domEventHandlers({keydown:(event,view)=>runHandlers(getKeymap(view.state),event,view,"editor")})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(state){let bindings=state.facet(keymap),map=Keymaps.get(bindings);return map||Keymaps.set(bindings,map=function buildKeymap(bindings,platform=currentPlatform){let bound=Object.create(null),isPrefix=Object.create(null),checkPrefix=(name,is)=>{let current=isPrefix[name];if(null==current)isPrefix[name]=is;else if(current!=is)throw new Error("Key binding "+name+" is used both as a regular binding and as a multi-stroke prefix")},add=(scope,key,command,preventDefault,stopPropagation)=>{var _a,_b;let scopeObj=bound[scope]||(bound[scope]=Object.create(null)),parts=key.split(/ (?!$)/).map((k=>function normalizeKeyName(name,platform){const parts=name.split(/-(?!$)/);let alt,ctrl,shift,meta,result=parts[parts.length-1];"Space"==result&&(result=" ");for(let i=0;i<parts.length-1;++i){const mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);"mac"==platform?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}(k,platform)));for(let i=1;i<parts.length;i++){let prefix=parts.slice(0,i).join(" ");checkPrefix(prefix,!0),scopeObj[prefix]||(scopeObj[prefix]={preventDefault:!0,stopPropagation:!1,run:[view=>{let ourObj=storedPrefix={view,prefix,scope};return setTimeout((()=>{storedPrefix==ourObj&&(storedPrefix=null)}),PrefixTimeout),!0}]})}let full=parts.join(" ");checkPrefix(full,!1);let binding=scopeObj[full]||(scopeObj[full]={preventDefault:!1,stopPropagation:!1,run:(null===(_b=null===(_a=scopeObj._any)||void 0===_a?void 0:_a.run)||void 0===_b?void 0:_b.slice())||[]});command&&binding.run.push(command),preventDefault&&(binding.preventDefault=!0),stopPropagation&&(binding.stopPropagation=!0)};for(let b of bindings){let scopes=b.scope?b.scope.split(" "):["editor"];if(b.any)for(let scope of scopes){let scopeObj=bound[scope]||(bound[scope]=Object.create(null));scopeObj._any||(scopeObj._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let key in scopeObj)scopeObj[key].run.push(b.any)}let name=b[platform]||b.key;if(name)for(let scope of scopes)add(scope,name,b.run,b.preventDefault,b.stopPropagation),b.shift&&add(scope,"Shift-"+name,b.shift,b.preventDefault,b.stopPropagation)}return bound}(bindings.reduce(((a,b)=>a.concat(b)),[]))),map}let storedPrefix=null;const PrefixTimeout=4e3;function runHandlers(map,event,view,scope){let name=function keyName(event){var name=!(mac&&event.metaKey&&event.shiftKey&&!event.ctrlKey&&!event.altKey||ie&&event.shiftKey&&event.key&&1==event.key.length||"Unidentified"==event.key)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),isChar=codePointSize(codePointAt(name,0))==name.length&&" "!=name,prefix="",handled=!1,prevented=!1,stopPropagation=!1;storedPrefix&&storedPrefix.view==view&&storedPrefix.scope==scope&&(prefix=storedPrefix.prefix+" ",modifierCodes.indexOf(event.keyCode)<0&&(prevented=!0,storedPrefix=null));let baseName,shiftName,ran=new Set,runFor=binding=>{if(binding){for(let cmd of binding.run)if(!ran.has(cmd)&&(ran.add(cmd),cmd(view,event)))return binding.stopPropagation&&(stopPropagation=!0),!0;binding.preventDefault&&(binding.stopPropagation&&(stopPropagation=!0),prevented=!0)}return!1},scopeObj=map[scope];return scopeObj&&(runFor(scopeObj[prefix+modifiers(name,event,!isChar)])?handled=!0:isChar&&(event.altKey||event.metaKey||event.ctrlKey)&&!(browser.windows&&event.ctrlKey&&event.altKey)&&(baseName=base[event.keyCode])&&baseName!=name?(runFor(scopeObj[prefix+modifiers(baseName,event,!0)])||event.shiftKey&&(shiftName=shift[event.keyCode])!=name&&shiftName!=baseName&&runFor(scopeObj[prefix+modifiers(shiftName,event,!1)]))&&(handled=!0):isChar&&event.shiftKey&&runFor(scopeObj[prefix+modifiers(name,event,!0)])&&(handled=!0),!handled&&runFor(scopeObj._any)&&(handled=!0)),prevented&&(handled=!0),handled&&stopPropagation&&event.stopPropagation(),handled}const CanHidePrimary=!browser.ios;const themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");function iterMatches(doc,re,from,to,f){re.lastIndex=0;for(let m,cursor=doc.iterRange(from,to),pos=from;!cursor.next().done;pos+=cursor.value.length)if(!cursor.lineBreak)for(;m=re.exec(cursor.value);)f(pos+m.index,m)}class MatchDecorator{constructor(config){const{regexp,decoration,decorate,boundary,maxLength=1e3}=config;if(!regexp.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=regexp,decorate)this.addMatch=(match,view,from,add)=>decorate(add,from,from+match[0].length,match,view);else if("function"==typeof decoration)this.addMatch=(match,view,from,add)=>{let deco=decoration(match,view,from);deco&&add(from,from+match[0].length,deco)};else{if(!decoration)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(match,_view,from,add)=>add(from,from+match[0].length,decoration)}this.boundary=boundary,this.maxLength=maxLength}createDeco(view){let build=new dist_RangeSetBuilder,add=build.add.bind(build);for(let{from,to}of function matchRanges(view,maxLength){let visible=view.visibleRanges;if(1==visible.length&&visible[0].from==view.viewport.from&&visible[0].to==view.viewport.to)return visible;let result=[];for(let{from,to}of visible)from=Math.max(view.state.doc.lineAt(from).from,from-maxLength),to=Math.min(view.state.doc.lineAt(to).to,to+maxLength),result.length&&result[result.length-1].to>=from?result[result.length-1].to=to:result.push({from,to});return result}(view,this.maxLength))iterMatches(view.state.doc,this.regexp,from,to,((from,m)=>this.addMatch(m,view,from,add)));return build.finish()}updateDeco(update,deco){let changeFrom=1e9,changeTo=-1;return update.docChanged&&update.changes.iterChanges(((_f,_t,from,to)=>{to>update.view.viewport.from&&from<update.view.viewport.to&&(changeFrom=Math.min(from,changeFrom),changeTo=Math.max(to,changeTo))})),update.viewportChanged||changeTo-changeFrom>1e3?this.createDeco(update.view):changeTo>-1?this.updateRange(update.view,deco.map(update.changes),changeFrom,changeTo):deco}updateRange(view,deco,updateFrom,updateTo){for(let r of view.visibleRanges){let from=Math.max(r.from,updateFrom),to=Math.min(r.to,updateTo);if(to>from){let fromLine=view.state.doc.lineAt(from),toLine=fromLine.to<to?view.state.doc.lineAt(to):fromLine,start=Math.max(r.from,fromLine.from),end=Math.min(r.to,toLine.to);if(this.boundary){for(;from>fromLine.from;from--)if(this.boundary.test(fromLine.text[from-1-fromLine.from])){start=from;break}for(;to<toLine.to;to++)if(this.boundary.test(toLine.text[to-toLine.from])){end=to;break}}let m,ranges=[],add=(from,to,deco)=>ranges.push(deco.range(from,to));if(fromLine==toLine)for(this.regexp.lastIndex=start-fromLine.from;(m=this.regexp.exec(fromLine.text))&&m.index<end-fromLine.from;)this.addMatch(m,view,m.index+fromLine.from,add);else iterMatches(view.state.doc,this.regexp,start,end,((from,m)=>this.addMatch(m,view,from,add)));deco=deco.update({filterFrom:start,filterTo:end,filter:(from,to)=>from<start||to>end,add:ranges})}}return deco}}const UnicodeRegexpSupport=null!=/x/.unicode?"gu":"g",Specials=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;const specialCharConfig=Facet.define({combine(configs){let config=combineConfig(configs,{render:null,specialChars:Specials,addSpecialChars:null});return(config.replaceTabs=!function supportsTabSize(){var _a;if(null==_supportsTabSize&&"undefined"!=typeof document&&document.body){let styles=document.body.style;_supportsTabSize=null!=(null!==(_a=styles.tabSize)&&void 0!==_a?_a:styles.MozTabSize)}return _supportsTabSize||!1}())&&(config.specialChars=new RegExp("\t|"+config.specialChars.source,UnicodeRegexpSupport)),config.addSpecialChars&&(config.specialChars=new RegExp(config.specialChars.source+"|"+config.addSpecialChars.source,UnicodeRegexpSupport)),config}});function highlightSpecialChars(config={}){return[specialCharConfig.of(config),_plugin||(_plugin=dist_ViewPlugin.fromClass(class{constructor(view){this.view=view,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(view.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(view)}makeDecorator(conf){return new MatchDecorator({regexp:conf.specialChars,decoration:(m,view,pos)=>{let{doc}=view.state,code=codePointAt(m[0],0);if(9==code){let line=doc.lineAt(pos),size=view.state.tabSize,col=dist_countColumn(line.text,size,pos-line.from);return Decoration.replace({widget:new TabWidget((size-col%size)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[code]||(this.decorationCache[code]=Decoration.replace({widget:new SpecialCharWidget(conf,code)}))},boundary:conf.replaceTabs?void 0:/[^]/})}update(update){let conf=update.state.facet(specialCharConfig);update.startState.facet(specialCharConfig)!=conf?(this.decorator=this.makeDecorator(conf),this.decorations=this.decorator.createDeco(update.view)):this.decorations=this.decorator.updateDeco(update,this.decorations)}},{decorations:v=>v.decorations}))]}let _plugin=null;class SpecialCharWidget extends WidgetType{constructor(options,code){super(),this.options=options,this.code=code}eq(other){return other.code==this.code}toDOM(view){let ph=function placeholder$1(code){return code>=32?"":10==code?"":String.fromCharCode(9216+code)}(this.code),desc=view.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),custom=this.options.render&&this.options.render(this.code,desc,ph);if(custom)return custom;let span=document.createElement("span");return span.textContent=ph,span.title=desc,span.setAttribute("aria-label",desc),span.className="cm-specialChar",span}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(width){super(),this.width=width}eq(other){return other.width==this.width}toDOM(){let span=document.createElement("span");return span.textContent="\t",span.className="cm-tab",span.style.width=this.width+"px",span}ignoreEvent(){return!1}}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=dist_ViewPlugin.fromClass(class{constructor(view){this.decorations=this.getDeco(view)}update(update){(update.docChanged||update.selectionSet)&&(this.decorations=this.getDeco(update.view))}getDeco(view){let lastLineStart=-1,deco=[];for(let r of view.state.selection.ranges){let line=view.lineBlockAt(r.head);line.from>lastLineStart&&(deco.push(lineDeco.range(line.from)),lastLineStart=line.from)}return Decoration.set(deco)}},{decorations:v=>v.decorations});class dist_GutterMarker extends RangeValue{compare(other){return this==other||this.constructor==other.constructor&&this.eq(other)}eq(other){return!1}destroy(dom){}}dist_GutterMarker.prototype.elementClass="",dist_GutterMarker.prototype.toDOM=void 0,dist_GutterMarker.prototype.mapMode=dist_MapMode.TrackBefore,dist_GutterMarker.prototype.startSide=dist_GutterMarker.prototype.endSide=-1,dist_GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),activeGutters=Facet.define();const unfixGutters=Facet.define({combine:values=>values.some((x=>x))});function gutters(config){let result=[gutterView];return config&&!1===config.fixed&&result.push(unfixGutters.of(!0)),result}const gutterView=dist_ViewPlugin.fromClass(class{constructor(view){this.view=view,this.prevViewport=view.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=view.state.facet(activeGutters).map((conf=>new SingleGutterView(view,conf)));for(let gutter of this.gutters)this.dom.appendChild(gutter.dom);this.fixed=!view.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),view.scrollDOM.insertBefore(this.dom,view.contentDOM)}update(update){if(this.updateGutters(update)){let vpA=this.prevViewport,vpB=update.view.viewport,vpOverlap=Math.min(vpA.to,vpB.to)-Math.max(vpA.from,vpB.from);this.syncGutters(vpOverlap<.8*(vpB.to-vpB.from))}update.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=update.view.viewport}syncGutters(detach){let after=this.dom.nextSibling;detach&&this.dom.remove();let lineClasses=dist_RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),classSet=[],contexts=this.gutters.map((gutter=>new UpdateContext(gutter,this.view.viewport,-this.view.documentPadding.top)));for(let line of this.view.viewportLineBlocks)if(classSet.length&&(classSet=[]),Array.isArray(line.type)){let first=!0;for(let b of line.type)if(b.type==BlockType.Text&&first){advanceCursor(lineClasses,classSet,b.from);for(let cx of contexts)cx.line(this.view,b,classSet);first=!1}else if(b.widget)for(let cx of contexts)cx.widget(this.view,b)}else if(line.type==BlockType.Text){advanceCursor(lineClasses,classSet,line.from);for(let cx of contexts)cx.line(this.view,line,classSet)}else if(line.widget)for(let cx of contexts)cx.widget(this.view,line);for(let cx of contexts)cx.finish();detach&&this.view.scrollDOM.insertBefore(this.dom,after)}updateGutters(update){let prev=update.startState.facet(activeGutters),cur=update.state.facet(activeGutters),change=update.docChanged||update.heightChanged||update.viewportChanged||!dist_RangeSet.eq(update.startState.facet(gutterLineClass),update.state.facet(gutterLineClass),update.view.viewport.from,update.view.viewport.to);if(prev==cur)for(let gutter of this.gutters)gutter.update(update)&&(change=!0);else{change=!0;let gutters=[];for(let conf of cur){let known=prev.indexOf(conf);known<0?gutters.push(new SingleGutterView(this.view,conf)):(this.gutters[known].update(update),gutters.push(this.gutters[known]))}for(let g of this.gutters)g.dom.remove(),gutters.indexOf(g)<0&&g.destroy();for(let g of gutters)this.dom.appendChild(g.dom);this.gutters=gutters}return change}destroy(){for(let view of this.gutters)view.destroy();this.dom.remove()}},{provide:plugin=>EditorView.scrollMargins.of((view=>{let value=view.plugin(plugin);return value&&0!=value.gutters.length&&value.fixed?view.textDirection==Direction.LTR?{left:value.dom.offsetWidth*view.scaleX}:{right:value.dom.offsetWidth*view.scaleX}:null}))});function dist_asArray(val){return Array.isArray(val)?val:[val]}function advanceCursor(cursor,collect,pos){for(;cursor.value&&cursor.from<=pos;)cursor.from==pos&&collect.push(cursor.value),cursor.next()}class UpdateContext{constructor(gutter,viewport,height){this.gutter=gutter,this.height=height,this.i=0,this.cursor=dist_RangeSet.iter(gutter.markers,viewport.from)}addElement(view,block,markers){let{gutter}=this,above=(block.top-this.height)/view.scaleY,height=block.height/view.scaleY;if(this.i==gutter.elements.length){let newElt=new GutterElement(view,height,above,markers);gutter.elements.push(newElt),gutter.dom.appendChild(newElt.dom)}else gutter.elements[this.i].update(view,height,above,markers);this.height=block.bottom,this.i++}line(view,line,extraMarkers){let localMarkers=[];advanceCursor(this.cursor,localMarkers,line.from),extraMarkers.length&&(localMarkers=localMarkers.concat(extraMarkers));let forLine=this.gutter.config.lineMarker(view,line,localMarkers);forLine&&localMarkers.unshift(forLine);let gutter=this.gutter;(0!=localMarkers.length||gutter.config.renderEmptyElements)&&this.addElement(view,line,localMarkers)}widget(view,block){let marker=this.gutter.config.widgetMarker(view,block.widget,block);marker&&this.addElement(view,block,[marker])}finish(){let gutter=this.gutter;for(;gutter.elements.length>this.i;){let last=gutter.elements.pop();gutter.dom.removeChild(last.dom),last.destroy()}}}class SingleGutterView{constructor(view,config){this.view=view,this.config=config,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let prop in config.domEventHandlers)this.dom.addEventListener(prop,(event=>{let y,target=event.target;if(target!=this.dom&&this.dom.contains(target)){for(;target.parentNode!=this.dom;)target=target.parentNode;let rect=target.getBoundingClientRect();y=(rect.top+rect.bottom)/2}else y=event.clientY;let line=view.lineBlockAtHeight(y-view.documentTop);config.domEventHandlers[prop](view,line,event)&&event.preventDefault()}));this.markers=dist_asArray(config.markers(view)),config.initialSpacer&&(this.spacer=new GutterElement(view,0,0,[config.initialSpacer(view)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(update){let prevMarkers=this.markers;if(this.markers=dist_asArray(this.config.markers(update.view)),this.spacer&&this.config.updateSpacer){let updated=this.config.updateSpacer(this.spacer.markers[0],update);updated!=this.spacer.markers[0]&&this.spacer.update(update.view,0,0,[updated])}let vp=update.view.viewport;return!dist_RangeSet.eq(this.markers,prevMarkers,vp.from,vp.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(update)}destroy(){for(let elt of this.elements)elt.destroy()}}class GutterElement{constructor(view,height,above,markers){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(view,height,above,markers)}update(view,height,above,markers){this.height!=height&&(this.height=height,this.dom.style.height=height+"px"),this.above!=above&&(this.dom.style.marginTop=(this.above=above)?above+"px":""),function sameMarkers(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].compare(b[i]))return!1;return!0}(this.markers,markers)||this.setMarkers(view,markers)}setMarkers(view,markers){let cls="cm-gutterElement",domPos=this.dom.firstChild;for(let iNew=0,iOld=0;;){let skipTo=iOld,marker=iNew<markers.length?markers[iNew++]:null,matched=!1;if(marker){let c=marker.elementClass;c&&(cls+=" "+c);for(let i=iOld;i<this.markers.length;i++)if(this.markers[i].compare(marker)){skipTo=i,matched=!0;break}}else skipTo=this.markers.length;for(;iOld<skipTo;){let next=this.markers[iOld++];if(next.toDOM){next.destroy(domPos);let after=domPos.nextSibling;domPos.remove(),domPos=after}}if(!marker)break;marker.toDOM&&(matched?domPos=domPos.nextSibling:this.dom.insertBefore(marker.toDOM(view),domPos)),matched&&iOld++}this.dom.className=cls,this.markers=markers}destroy(){this.setMarkers(null,[])}}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine:values=>combineConfig(values,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(a,b){let result=Object.assign({},a);for(let event in b){let exists=result[event],add=b[event];result[event]=exists?(view,line,event)=>exists(view,line,event)||add(view,line,event):add}return result}})});class NumberMarker extends dist_GutterMarker{constructor(number){super(),this.number=number}eq(other){return this.number==other.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(view,number){return view.state.facet(lineNumberConfig).formatNumber(number,view.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],(state=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:view=>view.state.facet(lineNumberMarkers),lineMarker:(view,line,others)=>others.some((m=>m.toDOM))?null:new NumberMarker(formatNumber(view,view.state.doc.lineAt(line.from).number)),widgetMarker:()=>null,lineMarkerChange:update=>update.startState.facet(lineNumberConfig)!=update.state.facet(lineNumberConfig),initialSpacer:view=>new NumberMarker(formatNumber(view,maxLineNumber(view.state.doc.lines))),updateSpacer(spacer,update){let max=formatNumber(update.view,maxLineNumber(update.view.state.doc.lines));return max==spacer.number?spacer:new NumberMarker(max)},domEventHandlers:state.facet(lineNumberConfig).domEventHandlers})));function maxLineNumber(lines){let last=9;for(;last<lines;)last=10*last+9;return last}const DefaultBufferLength=1024;let nextPropID=0;class dist_Range{constructor(from,to){this.from=from,this.to=to}}class dist_NodeProp{constructor(config={}){this.id=nextPropID++,this.perNode=!!config.perNode,this.deserialize=config.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(match){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof match&&(match=dist_NodeType.match(match)),type=>{let result=match(type);return void 0===result?null:[this,result]}}}dist_NodeProp.closedBy=new dist_NodeProp({deserialize:str=>str.split(" ")}),dist_NodeProp.openedBy=new dist_NodeProp({deserialize:str=>str.split(" ")}),dist_NodeProp.group=new dist_NodeProp({deserialize:str=>str.split(" ")}),dist_NodeProp.contextHash=new dist_NodeProp({perNode:!0}),dist_NodeProp.lookAhead=new dist_NodeProp({perNode:!0}),dist_NodeProp.mounted=new dist_NodeProp({perNode:!0});class MountedTree{constructor(tree,overlay,parser){this.tree=tree,this.overlay=overlay,this.parser=parser}static get(tree){return tree&&tree.props&&tree.props[dist_NodeProp.mounted.id]}}const noProps=Object.create(null);class dist_NodeType{constructor(name,props,id,flags=0){this.name=name,this.props=props,this.id=id,this.flags=flags}static define(spec){let props=spec.props&&spec.props.length?Object.create(null):noProps,flags=(spec.top?1:0)|(spec.skipped?2:0)|(spec.error?4:0)|(null==spec.name?8:0),type=new dist_NodeType(spec.name||"",props,spec.id,flags);if(spec.props)for(let src of spec.props)if(Array.isArray(src)||(src=src(type)),src){if(src[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");props[src[0].id]=src[1]}return type}prop(prop){return this.props[prop.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(name){if("string"==typeof name){if(this.name==name)return!0;let group=this.prop(dist_NodeProp.group);return!!group&&group.indexOf(name)>-1}return this.id==name}static match(map){let direct=Object.create(null);for(let prop in map)for(let name of prop.split(" "))direct[name]=map[prop];return node=>{for(let groups=node.prop(dist_NodeProp.group),i=-1;i<(groups?groups.length:0);i++){let found=direct[i<0?node.name:groups[i]];if(found)return found}}}}dist_NodeType.none=new dist_NodeType("",Object.create(null),0,8);class NodeSet{constructor(types){this.types=types;for(let i=0;i<types.length;i++)if(types[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...props){let newTypes=[];for(let type of this.types){let newProps=null;for(let source of props){let add=source(type);add&&(newProps||(newProps=Object.assign({},type.props)),newProps[add[0].id]=add[1])}newTypes.push(newProps?new dist_NodeType(type.name,newProps,type.id,type.flags):type)}return new NodeSet(newTypes)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;!function(IterMode){IterMode[IterMode.ExcludeBuffers=1]="ExcludeBuffers",IterMode[IterMode.IncludeAnonymous=2]="IncludeAnonymous",IterMode[IterMode.IgnoreMounts=4]="IgnoreMounts",IterMode[IterMode.IgnoreOverlays=8]="IgnoreOverlays"}(IterMode||(IterMode={}));class dist_Tree{constructor(type,children,positions,length,props){if(this.type=type,this.children=children,this.positions=positions,this.length=length,this.props=null,props&&props.length){this.props=Object.create(null);for(let[prop,value]of props)this.props["number"==typeof prop?prop:prop.id]=value}}toString(){let mounted=MountedTree.get(this);if(mounted&&!mounted.overlay)return mounted.tree.toString();let children="";for(let ch of this.children){let str=ch.toString();str&&(children&&(children+=","),children+=str)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(children.length?"("+children+")":""):children}cursor(mode=0){return new TreeCursor(this.topNode,mode)}cursorAt(pos,side=0,mode=0){let scope=CachedNode.get(this)||this.topNode,cursor=new TreeCursor(scope);return cursor.moveTo(pos,side),CachedNode.set(this,cursor._tree),cursor}get topNode(){return new TreeNode(this,0,0,null)}resolve(pos,side=0){let node=resolveNode(CachedNode.get(this)||this.topNode,pos,side,!1);return CachedNode.set(this,node),node}resolveInner(pos,side=0){let node=resolveNode(CachedInnerNode.get(this)||this.topNode,pos,side,!0);return CachedInnerNode.set(this,node),node}resolveStack(pos,side=0){return function stackIterator(tree,pos,side){let inner=tree.resolveInner(pos,side),layers=null;for(let scan=inner instanceof TreeNode?inner:inner.context.parent;scan;scan=scan.parent)if(scan.index<0){let parent=scan.parent;(layers||(layers=[inner])).push(parent.resolve(pos,side)),scan=parent}else{let mount=MountedTree.get(scan.tree);if(mount&&mount.overlay&&mount.overlay[0].from<=pos&&mount.overlay[mount.overlay.length-1].to>=pos){let root=new TreeNode(mount.tree,mount.overlay[0].from+scan.from,0,null);(layers||(layers=[inner])).push(resolveNode(root,pos,side,!1))}}return layers?iterStack(layers):inner}(this,pos,side)}iterate(spec){let{enter,leave,from=0,to=this.length}=spec,mode=spec.mode||0,anon=(mode&IterMode.IncludeAnonymous)>0;for(let c=this.cursor(mode|IterMode.IncludeAnonymous);;){let entered=!1;if(c.from<=to&&c.to>=from&&(!anon&&c.type.isAnonymous||!1!==enter(c))){if(c.firstChild())continue;entered=!0}for(;entered&&leave&&(anon||!c.type.isAnonymous)&&leave(c),!c.nextSibling();){if(!c.parent())return;entered=!0}}}prop(prop){return prop.perNode?this.props?this.props[prop.id]:void 0:this.type.prop(prop)}get propValues(){let result=[];if(this.props)for(let id in this.props)result.push([+id,this.props[id]]);return result}balance(config={}){return this.children.length<=8?this:balanceRange(dist_NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,((children,positions,length)=>new dist_Tree(this.type,children,positions,length,this.propValues)),config.makeTree||((children,positions,length)=>new dist_Tree(dist_NodeType.none,children,positions,length)))}static build(data){return function buildTree(data){var _a;let{buffer,nodeSet,maxBufferLength=DefaultBufferLength,reused=[],minRepeatType=nodeSet.types.length}=data,cursor=Array.isArray(buffer)?new FlatBufferCursor(buffer,buffer.length):buffer,types=nodeSet.types,contextHash=0,lookAhead=0;function takeNode(parentStart,minPos,children,positions,inRepeat){let{id,start,end,size}=cursor,lookAheadAtStart=lookAhead;for(;size<0;){if(cursor.next(),-1==size){let node=reused[id];return children.push(node),void positions.push(start-parentStart)}if(-3==size)return void(contextHash=id);if(-4==size)return void(lookAhead=id);throw new RangeError(`Unrecognized record size: ${size}`)}let node,buffer,type=types[id],startPos=start-parentStart;if(end-start<=maxBufferLength&&(buffer=findBufferSize(cursor.pos-minPos,inRepeat))){let data=new Uint16Array(buffer.size-buffer.skip),endPos=cursor.pos-buffer.size,index=data.length;for(;cursor.pos>endPos;)index=copyToBuffer(buffer.start,data,index);node=new TreeBuffer(data,end-buffer.start,nodeSet),startPos=buffer.start-parentStart}else{let endPos=cursor.pos-size;cursor.next();let localChildren=[],localPositions=[],localInRepeat=id>=minRepeatType?id:-1,lastGroup=0,lastEnd=end;for(;cursor.pos>endPos;)localInRepeat>=0&&cursor.id==localInRepeat&&cursor.size>=0?(cursor.end<=lastEnd-maxBufferLength&&(makeRepeatLeaf(localChildren,localPositions,start,lastGroup,cursor.end,lastEnd,localInRepeat,lookAheadAtStart),lastGroup=localChildren.length,lastEnd=cursor.end),cursor.next()):takeNode(start,endPos,localChildren,localPositions,localInRepeat);if(localInRepeat>=0&&lastGroup>0&&lastGroup<localChildren.length&&makeRepeatLeaf(localChildren,localPositions,start,lastGroup,start,lastEnd,localInRepeat,lookAheadAtStart),localChildren.reverse(),localPositions.reverse(),localInRepeat>-1&&lastGroup>0){let make=makeBalanced(type);node=balanceRange(type,localChildren,localPositions,0,localChildren.length,0,end-start,make,make)}else node=makeTree(type,localChildren,localPositions,end-start,lookAheadAtStart-end)}children.push(node),positions.push(startPos)}function makeBalanced(type){return(children,positions,length)=>{let last,lookAheadProp,lookAhead=0,lastI=children.length-1;if(lastI>=0&&(last=children[lastI])instanceof dist_Tree){if(!lastI&&last.type==type&&last.length==length)return last;(lookAheadProp=last.prop(dist_NodeProp.lookAhead))&&(lookAhead=positions[lastI]+last.length+lookAheadProp)}return makeTree(type,children,positions,length,lookAhead)}}function makeRepeatLeaf(children,positions,base,i,from,to,type,lookAhead){let localChildren=[],localPositions=[];for(;children.length>i;)localChildren.push(children.pop()),localPositions.push(positions.pop()+base-from);children.push(makeTree(nodeSet.types[type],localChildren,localPositions,to-from,lookAhead-to)),positions.push(from-base)}function makeTree(type,children,positions,length,lookAhead=0,props){if(contextHash){let pair=[dist_NodeProp.contextHash,contextHash];props=props?[pair].concat(props):[pair]}if(lookAhead>25){let pair=[dist_NodeProp.lookAhead,lookAhead];props=props?[pair].concat(props):[pair]}return new dist_Tree(type,children,positions,length,props)}function findBufferSize(maxSize,inRepeat){let fork=cursor.fork(),size=0,start=0,skip=0,minStart=fork.end-maxBufferLength,result={size:0,start:0,skip:0};scan:for(let minPos=fork.pos-maxSize;fork.pos>minPos;){let nodeSize=fork.size;if(fork.id==inRepeat&&nodeSize>=0){result.size=size,result.start=start,result.skip=skip,skip+=4,size+=4,fork.next();continue}let startPos=fork.pos-nodeSize;if(nodeSize<0||startPos<minPos||fork.start<minStart)break;let localSkipped=fork.id>=minRepeatType?4:0,nodeStart=fork.start;for(fork.next();fork.pos>startPos;){if(fork.size<0){if(-3!=fork.size)break scan;localSkipped+=4}else fork.id>=minRepeatType&&(localSkipped+=4);fork.next()}start=nodeStart,size+=nodeSize,skip+=localSkipped}return(inRepeat<0||size==maxSize)&&(result.size=size,result.start=start,result.skip=skip),result.size>4?result:void 0}function copyToBuffer(bufferStart,buffer,index){let{id,start,end,size}=cursor;if(cursor.next(),size>=0&&id<minRepeatType){let startIndex=index;if(size>4){let endPos=cursor.pos-(size-4);for(;cursor.pos>endPos;)index=copyToBuffer(bufferStart,buffer,index)}buffer[--index]=startIndex,buffer[--index]=end-bufferStart,buffer[--index]=start-bufferStart,buffer[--index]=id}else-3==size?contextHash=id:-4==size&&(lookAhead=id);return index}let children=[],positions=[];for(;cursor.pos>0;)takeNode(data.start||0,data.bufferStart||0,children,positions,-1);let length=null!==(_a=data.length)&&void 0!==_a?_a:children.length?positions[0]+children[0].length:0;return new dist_Tree(types[data.topID],children.reverse(),positions.reverse(),length)}(data)}}dist_Tree.empty=new dist_Tree(dist_NodeType.none,[],[],0);class FlatBufferCursor{constructor(buffer,index){this.buffer=buffer,this.index=index}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(buffer,length,set){this.buffer=buffer,this.length=length,this.set=set}get type(){return dist_NodeType.none}toString(){let result=[];for(let index=0;index<this.buffer.length;)result.push(this.childString(index)),index=this.buffer[index+3];return result.join(",")}childString(index){let id=this.buffer[index],endIndex=this.buffer[index+3],type=this.set.types[id],result=type.name;if(/\W/.test(result)&&!type.isError&&(result=JSON.stringify(result)),endIndex==(index+=4))return result;let children=[];for(;index<endIndex;)children.push(this.childString(index)),index=this.buffer[index+3];return result+"("+children.join(",")+")"}findChild(startIndex,endIndex,dir,pos,side){let{buffer}=this,pick=-1;for(let i=startIndex;i!=endIndex&&!(checkSide(side,pos,buffer[i+1],buffer[i+2])&&(pick=i,dir>0));i=buffer[i+3]);return pick}slice(startI,endI,from){let b=this.buffer,copy=new Uint16Array(endI-startI),len=0;for(let i=startI,j=0;i<endI;){copy[j++]=b[i++],copy[j++]=b[i++]-from;let to=copy[j++]=b[i++]-from;copy[j++]=b[i++]-startI,len=Math.max(len,to)}return new TreeBuffer(copy,len,this.set)}}function checkSide(side,pos,from,to){switch(side){case-2:return from<pos;case-1:return to>=pos&&from<pos;case 0:return from<pos&&to>pos;case 1:return from<=pos&&to>pos;case 2:return to>pos;case 4:return!0}}function resolveNode(node,pos,side,overlays){for(var _a;node.from==node.to||(side<1?node.from>=pos:node.from>pos)||(side>-1?node.to<=pos:node.to<pos);){let parent=!overlays&&node instanceof TreeNode&&node.index<0?null:node.parent;if(!parent)return node;node=parent}let mode=overlays?0:IterMode.IgnoreOverlays;if(overlays)for(let scan=node,parent=scan.parent;parent;scan=parent,parent=scan.parent)scan instanceof TreeNode&&scan.index<0&&(null===(_a=parent.enter(pos,side,mode))||void 0===_a?void 0:_a.from)!=scan.from&&(node=parent);for(;;){let inner=node.enter(pos,side,mode);if(!inner)return node;node=inner}}class BaseNode{cursor(mode=0){return new TreeCursor(this,mode)}getChild(type,before=null,after=null){let r=getChildren(this,type,before,after);return r.length?r[0]:null}getChildren(type,before=null,after=null){return getChildren(this,type,before,after)}resolve(pos,side=0){return resolveNode(this,pos,side,!1)}resolveInner(pos,side=0){return resolveNode(this,pos,side,!0)}matchContext(context){return matchNodeContext(this,context)}enterUnfinishedNodesBefore(pos){let scan=this.childBefore(pos),node=this;for(;scan;){let last=scan.lastChild;if(!last||last.to!=scan.to)break;last.type.isError&&last.from==last.to?(node=scan,scan=last.prevSibling):scan=last}return node}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(_tree,from,index,_parent){super(),this._tree=_tree,this.from=from,this.index=index,this._parent=_parent}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(i,dir,pos,side,mode=0){for(let parent=this;;){for(let{children,positions}=parent._tree,e=dir>0?children.length:-1;i!=e;i+=dir){let next=children[i],start=positions[i]+parent.from;if(checkSide(side,pos,start,start+next.length))if(next instanceof TreeBuffer){if(mode&IterMode.ExcludeBuffers)continue;let index=next.findChild(0,next.buffer.length,dir,pos-start,side);if(index>-1)return new BufferNode(new BufferContext(parent,next,i,start),null,index)}else if(mode&IterMode.IncludeAnonymous||!next.type.isAnonymous||hasChild(next)){let mounted;if(!(mode&IterMode.IgnoreMounts)&&(mounted=MountedTree.get(next))&&!mounted.overlay)return new TreeNode(mounted.tree,start,i,parent);let inner=new TreeNode(next,start,i,parent);return mode&IterMode.IncludeAnonymous||!inner.type.isAnonymous?inner:inner.nextChild(dir<0?next.children.length-1:0,dir,pos,side)}}if(mode&IterMode.IncludeAnonymous||!parent.type.isAnonymous)return null;if(i=parent.index>=0?parent.index+dir:dir<0?-1:parent._parent._tree.children.length,parent=parent._parent,!parent)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(pos){return this.nextChild(0,1,pos,2)}childBefore(pos){return this.nextChild(this._tree.children.length-1,-1,pos,-2)}enter(pos,side,mode=0){let mounted;if(!(mode&IterMode.IgnoreOverlays)&&(mounted=MountedTree.get(this._tree))&&mounted.overlay){let rPos=pos-this.from;for(let{from,to}of mounted.overlay)if((side>0?from<=rPos:from<rPos)&&(side<0?to>=rPos:to>rPos))return new TreeNode(mounted.tree,mounted.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,pos,side,mode)}nextSignificantParent(){let val=this;for(;val.type.isAnonymous&&val._parent;)val=val._parent;return val}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(node,type,before,after){let cur=node.cursor(),result=[];if(!cur.firstChild())return result;if(null!=before)for(;!cur.type.is(before);)if(!cur.nextSibling())return result;for(;;){if(null!=after&&cur.type.is(after))return result;if(cur.type.is(type)&&result.push(cur.node),!cur.nextSibling())return null==after?result:[]}}function matchNodeContext(node,context,i=context.length-1){for(let p=node.parent;i>=0;p=p.parent){if(!p)return!1;if(!p.type.isAnonymous){if(context[i]&&context[i]!=p.name)return!1;i--}}return!0}class BufferContext{constructor(parent,buffer,index,start){this.parent=parent,this.buffer=buffer,this.index=index,this.start=start}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(context,_parent,index){super(),this.context=context,this._parent=_parent,this.index=index,this.type=context.buffer.set.types[context.buffer.buffer[index]]}child(dir,pos,side){let{buffer}=this.context,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.context.start,side);return index<0?null:new BufferNode(this.context,this,index)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(pos){return this.child(1,pos,2)}childBefore(pos){return this.child(-1,pos,-2)}enter(pos,side,mode=0){if(mode&IterMode.ExcludeBuffers)return null;let{buffer}=this.context,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],side>0?1:-1,pos-this.context.start,side);return index<0?null:new BufferNode(this.context,this,index)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(dir){return this._parent?null:this.context.parent.nextChild(this.context.index+dir,dir,0,4)}get nextSibling(){let{buffer}=this.context,after=buffer.buffer[this.index+3];return after<(this._parent?buffer.buffer[this._parent.index+3]:buffer.buffer.length)?new BufferNode(this.context,this._parent,after):this.externalSibling(1)}get prevSibling(){let{buffer}=this.context,parentStart=this._parent?this._parent.index+4:0;return this.index==parentStart?this.externalSibling(-1):new BufferNode(this.context,this._parent,buffer.findChild(parentStart,this.index,-1,0,4))}get tree(){return null}toTree(){let children=[],positions=[],{buffer}=this.context,startI=this.index+4,endI=buffer.buffer[this.index+3];if(endI>startI){let from=buffer.buffer[this.index+1];children.push(buffer.slice(startI,endI,from)),positions.push(0)}return new dist_Tree(this.type,children,positions,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(heads){if(!heads.length)return null;if(1==heads.length)return heads[0];let pick=0,picked=heads[0];for(let i=1;i<heads.length;i++){let node=heads[i];(node.from>picked.from||node.to<picked.to)&&(picked=node,pick=i)}let next=picked instanceof TreeNode&&picked.index<0?null:picked.parent,newHeads=heads.slice();return next?newHeads[pick]=next:newHeads.splice(pick,1),new StackIterator(newHeads,picked)}class StackIterator{constructor(heads,node){this.heads=heads,this.node=node}get next(){return iterStack(this.heads)}}class TreeCursor{get name(){return this.type.name}constructor(node,mode=0){if(this.mode=mode,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,node instanceof TreeNode)this.yieldNode(node);else{this._tree=node.context.parent,this.buffer=node.context;for(let n=node._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=node,this.yieldBuf(node.index)}}yieldNode(node){return!!node&&(this._tree=node,this.type=node.type,this.from=node.from,this.to=node.to,!0)}yieldBuf(index,type){this.index=index;let{start,buffer}=this.buffer;return this.type=type||buffer.set.types[buffer.buffer[index]],this.from=start+buffer.buffer[index+1],this.to=start+buffer.buffer[index+2],!0}yield(node){return!!node&&(node instanceof TreeNode?(this.buffer=null,this.yieldNode(node)):(this.buffer=node.context,this.yieldBuf(node.index,node.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(dir,pos,side){if(!this.buffer)return this.yield(this._tree.nextChild(dir<0?this._tree._tree.children.length-1:0,dir,pos,side,this.mode));let{buffer}=this.buffer,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.buffer.start,side);return!(index<0)&&(this.stack.push(this.index),this.yieldBuf(index))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(pos){return this.enterChild(1,pos,2)}childBefore(pos){return this.enterChild(-1,pos,-2)}enter(pos,side,mode=this.mode){return this.buffer?!(mode&IterMode.ExcludeBuffers)&&this.enterChild(1,pos,side):this.yield(this._tree.enter(pos,side,mode))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let parent=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(parent)}sibling(dir){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+dir,dir,0,4,this.mode));let{buffer}=this.buffer,d=this.stack.length-1;if(dir<0){let parentStart=d<0?0:this.stack[d]+4;if(this.index!=parentStart)return this.yieldBuf(buffer.findChild(parentStart,this.index,-1,0,4))}else{let after=buffer.buffer[this.index+3];if(after<(d<0?buffer.buffer.length:buffer.buffer[this.stack[d]+3]))return this.yieldBuf(after)}return d<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+dir,dir,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(dir){let index,parent,{buffer}=this;if(buffer){if(dir>0){if(this.index<buffer.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(buffer.buffer.buffer[i+3]<this.index)return!1;({index,parent}=buffer)}else({index,_parent:parent}=this._tree);for(;parent;({index,_parent:parent}=parent))if(index>-1)for(let i=index+dir,e=dir<0?-1:parent._tree.children.length;i!=e;i+=dir){let child=parent._tree.children[i];if(this.mode&IterMode.IncludeAnonymous||child instanceof TreeBuffer||!child.type.isAnonymous||hasChild(child))return!1}return!0}move(dir,enter){if(enter&&this.enterChild(dir,0,4))return!0;for(;;){if(this.sibling(dir))return!0;if(this.atLastNode(dir)||!this.parent())return!1}}next(enter=!0){return this.move(1,enter)}prev(enter=!0){return this.move(-1,enter)}moveTo(pos,side=0){for(;(this.from==this.to||(side<1?this.from>=pos:this.from>pos)||(side>-1?this.to<=pos:this.to<pos))&&this.parent(););for(;this.enterChild(1,pos,side););return this}get node(){if(!this.buffer)return this._tree;let cache=this.bufferNode,result=null,depth=0;if(cache&&cache.context==this.buffer)scan:for(let index=this.index,d=this.stack.length;d>=0;){for(let c=cache;c;c=c._parent)if(c.index==index){if(index==this.index)return c;result=c,depth=d+1;break scan}index=this.stack[--d]}for(let i=depth;i<this.stack.length;i++)result=new BufferNode(this.buffer,result,this.stack[i]);return this.bufferNode=new BufferNode(this.buffer,result,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(enter,leave){for(let depth=0;;){let mustLeave=!1;if(this.type.isAnonymous||!1!==enter(this)){if(this.firstChild()){depth++;continue}this.type.isAnonymous||(mustLeave=!0)}for(;mustLeave&&leave&&leave(this),mustLeave=this.type.isAnonymous,!this.nextSibling();){if(!depth)return;this.parent(),depth--,mustLeave=!0}}}matchContext(context){if(!this.buffer)return matchNodeContext(this.node,context);let{buffer}=this.buffer,{types}=buffer.set;for(let i=context.length-1,d=this.stack.length-1;i>=0;d--){if(d<0)return matchNodeContext(this.node,context,i);let type=types[buffer.buffer[this.stack[d]]];if(!type.isAnonymous){if(context[i]&&context[i]!=type.name)return!1;i--}}return!0}}function hasChild(tree){return tree.children.some((ch=>ch instanceof TreeBuffer||!ch.type.isAnonymous||hasChild(ch)))}const nodeSizeCache=new WeakMap;function nodeSize(balanceType,node){if(!balanceType.isAnonymous||node instanceof TreeBuffer||node.type!=balanceType)return 1;let size=nodeSizeCache.get(node);if(null==size){size=1;for(let child of node.children){if(child.type!=balanceType||!(child instanceof dist_Tree)){size=1;break}size+=nodeSize(balanceType,child)}nodeSizeCache.set(node,size)}return size}function balanceRange(balanceType,children,positions,from,to,start,length,mkTop,mkTree){let total=0;for(let i=from;i<to;i++)total+=nodeSize(balanceType,children[i]);let maxChild=Math.ceil(1.5*total/8),localChildren=[],localPositions=[];return function divide(children,positions,from,to,offset){for(let i=from;i<to;){let groupFrom=i,groupStart=positions[i],groupSize=nodeSize(balanceType,children[i]);for(i++;i<to;i++){let nextSize=nodeSize(balanceType,children[i]);if(groupSize+nextSize>=maxChild)break;groupSize+=nextSize}if(i==groupFrom+1){if(groupSize>maxChild){let only=children[groupFrom];divide(only.children,only.positions,0,only.children.length,positions[groupFrom]+offset);continue}localChildren.push(children[groupFrom])}else{let length=positions[i-1]+children[i-1].length-groupStart;localChildren.push(balanceRange(balanceType,children,positions,groupFrom,i,groupStart,length,null,mkTree))}localPositions.push(groupStart+offset-start)}}(children,positions,from,to,0),(mkTop||mkTree)(localChildren,localPositions,length)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(buffer,index,value){let inner=this.map.get(buffer);inner||this.map.set(buffer,inner=new Map),inner.set(index,value)}getBuffer(buffer,index){let inner=this.map.get(buffer);return inner&&inner.get(index)}set(node,value){node instanceof BufferNode?this.setBuffer(node.context.buffer,node.index,value):node instanceof TreeNode&&this.map.set(node.tree,value)}get(node){return node instanceof BufferNode?this.getBuffer(node.context.buffer,node.index):node instanceof TreeNode?this.map.get(node.tree):void 0}cursorSet(cursor,value){cursor.buffer?this.setBuffer(cursor.buffer.buffer,cursor.index,value):this.map.set(cursor.tree,value)}cursorGet(cursor){return cursor.buffer?this.getBuffer(cursor.buffer.buffer,cursor.index):this.map.get(cursor.tree)}}class TreeFragment{constructor(from,to,tree,offset,openStart=!1,openEnd=!1){this.from=from,this.to=to,this.tree=tree,this.offset=offset,this.open=(openStart?1:0)|(openEnd?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(tree,fragments=[],partial=!1){let result=[new TreeFragment(0,tree.length,tree,0,!1,partial)];for(let f of fragments)f.to>tree.length&&result.push(f);return result}static applyChanges(fragments,changes,minGap=128){if(!changes.length)return fragments;let result=[],fI=1,nextF=fragments.length?fragments[0]:null;for(let cI=0,pos=0,off=0;;cI++){let nextC=cI<changes.length?changes[cI]:null,nextPos=nextC?nextC.fromA:1e9;if(nextPos-pos>=minGap)for(;nextF&&nextF.from<nextPos;){let cut=nextF;if(pos>=cut.from||nextPos<=cut.to||off){let fFrom=Math.max(cut.from,pos)-off,fTo=Math.min(cut.to,nextPos)-off;cut=fFrom>=fTo?null:new TreeFragment(fFrom,fTo,cut.tree,cut.offset+off,cI>0,!!nextC)}if(cut&&result.push(cut),nextF.to>nextPos)break;nextF=fI<fragments.length?fragments[fI++]:null}if(!nextC)break;pos=nextC.toA,off=nextC.toA-nextC.toB}return result}}class dist_Parser{startParse(input,fragments,ranges){return"string"==typeof input&&(input=new StringInput(input)),ranges=ranges?ranges.length?ranges.map((r=>new dist_Range(r.from,r.to))):[new dist_Range(0,0)]:[new dist_Range(0,input.length)],this.createParse(input,fragments||[],ranges)}parse(input,fragments,ranges){let parse=this.startParse(input,fragments,ranges);for(;;){let done=parse.advance();if(done)return done}}}class StringInput{constructor(string){this.string=string}get length(){return this.string.length}chunk(from){return this.string.slice(from)}get lineChunks(){return!1}read(from,to){return this.string.slice(from,to)}}class InnerParse{constructor(parser,parse,overlay,target,ranges){if(this.parser=parser,this.parse=parse,this.overlay=overlay,this.target=target,this.ranges=ranges,!ranges.length||ranges.some((r=>r.from>=r.to)))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(ranges))}}class ActiveOverlay{constructor(parser,predicate,mounts,index,start,target,prev){this.parser=parser,this.predicate=predicate,this.mounts=mounts,this.index=index,this.start=start,this.target=target,this.prev=prev,this.depth=0,this.ranges=[]}}const stoppedInner=new dist_NodeProp({perNode:!0});class MixedParse{constructor(base,nest,input,fragments,ranges){this.nest=nest,this.input=input,this.fragments=fragments,this.ranges=ranges,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=base}advance(){if(this.baseParse){let done=this.baseParse.advance();if(!done)return null;if(this.baseParse=null,this.baseTree=done,this.startInner(),null!=this.stoppedAt)for(let inner of this.inner)inner.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let result=this.baseTree;return null!=this.stoppedAt&&(result=new dist_Tree(result.type,result.children,result.positions,result.length,result.propValues.concat([[stoppedInner,this.stoppedAt]]))),result}let inner=this.inner[this.innerDone],done=inner.parse.advance();if(done){this.innerDone++;let props=Object.assign(Object.create(null),inner.target.props);props[dist_NodeProp.mounted.id]=new MountedTree(done,inner.overlay,inner.parser),inner.target.props=props}return null}get parsedPos(){if(this.baseParse)return 0;let pos=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].ranges[0].from<pos&&(pos=Math.min(pos,this.inner[i].parse.parsedPos));return pos}stopAt(pos){if(this.stoppedAt=pos,this.baseParse)this.baseParse.stopAt(pos);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(pos)}startInner(){let fragmentCursor=new FragmentCursor(this.fragments),overlay=null,covered=null,cursor=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);scan:for(let nest,isCovered;null==this.stoppedAt||cursor.from<this.stoppedAt;){let range,enter=!0;if(fragmentCursor.hasNode(cursor)){if(overlay){let match=overlay.mounts.find((m=>m.frag.from<=cursor.from&&m.frag.to>=cursor.to&&m.mount.overlay));if(match)for(let r of match.mount.overlay){let from=r.from+match.pos,to=r.to+match.pos;from>=cursor.from&&to<=cursor.to&&!overlay.ranges.some((r=>r.from<to&&r.to>from))&&overlay.ranges.push({from,to})}}enter=!1}else if(covered&&(isCovered=checkCover(covered.ranges,cursor.from,cursor.to)))enter=2!=isCovered;else if(!cursor.type.isAnonymous&&cursor.from<cursor.to&&(nest=this.nest(cursor,this.input))){cursor.tree||materialize(cursor);let oldMounts=fragmentCursor.findMounts(cursor.from,nest.parser);if("function"==typeof nest.overlay)overlay=new ActiveOverlay(nest.parser,nest.overlay,oldMounts,this.inner.length,cursor.from,cursor.tree,overlay);else{let ranges=punchRanges(this.ranges,nest.overlay||[new dist_Range(cursor.from,cursor.to)]);ranges.length&&this.inner.push(new InnerParse(nest.parser,nest.parser.startParse(this.input,enterFragments(oldMounts,ranges),ranges),nest.overlay?nest.overlay.map((r=>new dist_Range(r.from-cursor.from,r.to-cursor.from))):null,cursor.tree,ranges)),nest.overlay?ranges.length&&(covered={ranges,depth:0,prev:covered}):enter=!1}}else overlay&&(range=overlay.predicate(cursor))&&(!0===range&&(range=new dist_Range(cursor.from,cursor.to)),range.from<range.to&&overlay.ranges.push(range));if(enter&&cursor.firstChild())overlay&&overlay.depth++,covered&&covered.depth++;else for(;!cursor.nextSibling();){if(!cursor.parent())break scan;if(overlay&&! --overlay.depth){let ranges=punchRanges(this.ranges,overlay.ranges);ranges.length&&this.inner.splice(overlay.index,0,new InnerParse(overlay.parser,overlay.parser.startParse(this.input,enterFragments(overlay.mounts,ranges),ranges),overlay.ranges.map((r=>new dist_Range(r.from-overlay.start,r.to-overlay.start))),overlay.target,ranges)),overlay=overlay.prev}covered&&! --covered.depth&&(covered=covered.prev)}}}}function checkCover(covered,from,to){for(let range of covered){if(range.from>=to)break;if(range.to>from)return range.from<=from&&range.to>=to?2:1}return 0}function sliceBuf(buf,startI,endI,nodes,positions,off){if(startI<endI){let from=buf.buffer[startI+1];nodes.push(buf.slice(startI,endI,from)),positions.push(from-off)}}function materialize(cursor){let{node}=cursor,depth=0;do{cursor.parent(),depth++}while(!cursor.tree);let i=0,base=cursor.tree,off=0;for(;off=base.positions[i]+cursor.from,!(off<=node.from&&off+base.children[i].length>=node.to);i++);let buf=base.children[i],b=buf.buffer;base.children[i]=function split(startI,endI,type,innerOffset,length){let i=startI;for(;b[i+2]+off<=node.from;)i=b[i+3];let children=[],positions=[];sliceBuf(buf,startI,i,children,positions,innerOffset);let from=b[i+1],to=b[i+2],isTarget=from+off==node.from&&to+off==node.to&&b[i]==node.type.id;return children.push(isTarget?node.toTree():split(i+4,b[i+3],buf.set.types[b[i]],from,to-from)),positions.push(from-innerOffset),sliceBuf(buf,b[i+3],endI,children,positions,innerOffset),new dist_Tree(type,children,positions,length)}(0,b.length,dist_NodeType.none,0,buf.length);for(let d=0;d<=depth;d++)cursor.childAfter(node.from)}class StructureCursor{constructor(root,offset){this.offset=offset,this.done=!1,this.cursor=root.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(pos){let{cursor}=this,p=pos-this.offset;for(;!this.done&&cursor.from<p;)cursor.to>=pos&&cursor.enter(p,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||cursor.next(!1)||(this.done=!0)}hasNode(cursor){if(this.moveTo(cursor.from),!this.done&&this.cursor.from+this.offset==cursor.from&&this.cursor.tree)for(let tree=this.cursor.tree;;){if(tree==cursor.tree)return!0;if(!(tree.children.length&&0==tree.positions[0]&&tree.children[0]instanceof dist_Tree))break;tree=tree.children[0]}return!1}}class FragmentCursor{constructor(fragments){var _a;if(this.fragments=fragments,this.curTo=0,this.fragI=0,fragments.length){let first=this.curFrag=fragments[0];this.curTo=null!==(_a=first.tree.prop(stoppedInner))&&void 0!==_a?_a:first.to,this.inner=new StructureCursor(first.tree,-first.offset)}else this.curFrag=this.inner=null}hasNode(node){for(;this.curFrag&&node.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=node.from&&this.curTo>=node.to&&this.inner.hasNode(node)}nextFrag(){var _a;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let frag=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(_a=frag.tree.prop(stoppedInner))&&void 0!==_a?_a:frag.to,this.inner=new StructureCursor(frag.tree,-frag.offset)}}findMounts(pos,parser){var _a;let result=[];if(this.inner){this.inner.cursor.moveTo(pos,1);for(let pos=this.inner.cursor.node;pos;pos=pos.parent){let mount=null===(_a=pos.tree)||void 0===_a?void 0:_a.prop(dist_NodeProp.mounted);if(mount&&mount.parser==parser)for(let i=this.fragI;i<this.fragments.length;i++){let frag=this.fragments[i];if(frag.from>=pos.to)break;frag.tree==this.curFrag.tree&&result.push({frag,pos:pos.from-frag.offset,mount})}}}return result}}function punchRanges(outer,ranges){let copy=null,current=ranges;for(let i=1,j=0;i<outer.length;i++){let gapFrom=outer[i-1].to,gapTo=outer[i].from;for(;j<current.length;j++){let r=current[j];if(r.from>=gapTo)break;r.to<=gapFrom||(copy||(current=copy=ranges.slice()),r.from<gapFrom?(copy[j]=new dist_Range(r.from,gapFrom),r.to>gapTo&&copy.splice(j+1,0,new dist_Range(gapTo,r.to))):r.to>gapTo?copy[j--]=new dist_Range(gapTo,r.to):copy.splice(j--,1))}}return current}function findCoverChanges(a,b,from,to){let iA=0,iB=0,inA=!1,inB=!1,pos=-1e9,result=[];for(;;){let nextA=iA==a.length?1e9:inA?a[iA].to:a[iA].from,nextB=iB==b.length?1e9:inB?b[iB].to:b[iB].from;if(inA!=inB){let start=Math.max(pos,from),end=Math.min(nextA,nextB,to);start<end&&result.push(new dist_Range(start,end))}if(pos=Math.min(nextA,nextB),1e9==pos)break;nextA==pos&&(inA?(inA=!1,iA++):inA=!0),nextB==pos&&(inB?(inB=!1,iB++):inB=!0)}return result}function enterFragments(mounts,ranges){let result=[];for(let{pos,mount,frag}of mounts){let startPos=pos+(mount.overlay?mount.overlay[0].from:0),endPos=startPos+mount.tree.length,from=Math.max(frag.from,startPos),to=Math.min(frag.to,endPos);if(mount.overlay){let overlay=mount.overlay.map((r=>new dist_Range(r.from+pos,r.to+pos))),changes=findCoverChanges(ranges,overlay,from,to);for(let i=0,pos=from;;i++){let last=i==changes.length,end=last?to:changes[i].from;if(end>pos&&result.push(new TreeFragment(pos,end,mount.tree,-startPos,frag.from>=pos||frag.openStart,frag.to<=end||frag.openEnd)),last)break;pos=changes[i].to}}else result.push(new TreeFragment(from,to,mount.tree,-startPos,frag.from>=startPos||frag.openStart,frag.to<=endPos||frag.openEnd))}return result}let nextTagID=0;class Tag{constructor(set,base,modified){this.set=set,this.base=base,this.modified=modified,this.id=nextTagID++}static define(parent){if(null==parent?void 0:parent.base)throw new Error("Can not derive from a modified tag");let tag=new Tag([],null,[]);if(tag.set.push(tag),parent)for(let t of parent.set)tag.set.push(t);return tag}static defineModifier(){let mod=new Modifier;return tag=>tag.modified.indexOf(mod)>-1?tag:Modifier.get(tag.base||tag,tag.modified.concat(mod).sort(((a,b)=>a.id-b.id)))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(base,mods){if(!mods.length)return base;let exists=mods[0].instances.find((t=>t.base==base&&function dist_sameArray(a,b){return a.length==b.length&&a.every(((x,i)=>x==b[i]))}(mods,t.modified)));if(exists)return exists;let set=[],tag=new Tag(set,base,mods);for(let m of mods)m.instances.push(tag);let configs=function powerSet(array){let sets=[[]];for(let i=0;i<array.length;i++)for(let j=0,e=sets.length;j<e;j++)sets.push(sets[j].concat(array[i]));return sets.sort(((a,b)=>b.length-a.length))}(mods);for(let parent of base.set)if(!parent.modified.length)for(let config of configs)set.push(Modifier.get(parent,config));return tag}}function styleTags(spec){let byName=Object.create(null);for(let prop in spec){let tags=spec[prop];Array.isArray(tags)||(tags=[tags]);for(let part of prop.split(" "))if(part){let pieces=[],mode=2,rest=part;for(let pos=0;;){if("..."==rest&&pos>0&&pos+3==part.length){mode=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rest);if(!m)throw new RangeError("Invalid path: "+part);if(pieces.push("*"==m[0]?"":'"'==m[0][0]?JSON.parse(m[0]):m[0]),pos+=m[0].length,pos==part.length)break;let next=part[pos++];if(pos==part.length&&"!"==next){mode=0;break}if("/"!=next)throw new RangeError("Invalid path: "+part);rest=part.slice(pos)}let last=pieces.length-1,inner=pieces[last];if(!inner)throw new RangeError("Invalid path: "+part);let rule=new Rule(tags,mode,last>0?pieces.slice(0,last):null);byName[inner]=rule.sort(byName[inner])}}return ruleNodeProp.add(byName)}const ruleNodeProp=new dist_NodeProp;class Rule{constructor(tags,mode,context,next){this.tags=tags,this.mode=mode,this.context=context,this.next=next}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(other){return!other||other.depth<this.depth?(this.next=other,this):(other.next=this.sort(other.next),other)}get depth(){return this.context?this.context.length:0}}function tagHighlighter(tags,options){let map=Object.create(null);for(let style of tags)if(Array.isArray(style.tag))for(let tag of style.tag)map[tag.id]=style.class;else map[style.tag.id]=style.class;let{scope,all=null}=options||{};return{style:tags=>{let cls=all;for(let tag of tags)for(let sub of tag.set){let tagClass=map[sub.id];if(tagClass){cls=cls?cls+" "+tagClass:tagClass;break}}return cls},scope}}function highlightTree(tree,highlighter,putStyle,from=0,to=tree.length){let builder=new HighlightBuilder(from,Array.isArray(highlighter)?highlighter:[highlighter],putStyle);builder.highlightRange(tree.cursor(),from,to,"",builder.highlighters),builder.flush(to)}Rule.empty=new Rule([],2,null);class HighlightBuilder{constructor(at,highlighters,span){this.at=at,this.highlighters=highlighters,this.span=span,this.class=""}startSpan(at,cls){cls!=this.class&&(this.flush(at),at>this.at&&(this.at=at),this.class=cls)}flush(to){to>this.at&&this.class&&this.span(this.at,to,this.class)}highlightRange(cursor,from,to,inheritedClass,highlighters){let{type,from:start,to:end}=cursor;if(start>=to||end<=from)return;type.isTop&&(highlighters=this.highlighters.filter((h=>!h.scope||h.scope(type))));let cls=inheritedClass,rule=function getStyleTags(node){let rule=node.type.prop(ruleNodeProp);for(;rule&&rule.context&&!node.matchContext(rule.context);)rule=rule.next;return rule||null}(cursor)||Rule.empty,tagCls=function highlightTags(highlighters,tags){let result=null;for(let highlighter of highlighters){let value=highlighter.style(tags);value&&(result=result?result+" "+value:value)}return result}(highlighters,rule.tags);if(tagCls&&(cls&&(cls+=" "),cls+=tagCls,1==rule.mode&&(inheritedClass+=(inheritedClass?" ":"")+tagCls)),this.startSpan(Math.max(from,start),cls),rule.opaque)return;let mounted=cursor.tree&&cursor.tree.prop(dist_NodeProp.mounted);if(mounted&&mounted.overlay){let inner=cursor.node.enter(mounted.overlay[0].from+start,1),innerHighlighters=this.highlighters.filter((h=>!h.scope||h.scope(mounted.tree.type))),hasChild=cursor.firstChild();for(let i=0,pos=start;;i++){let next=i<mounted.overlay.length?mounted.overlay[i]:null,nextPos=next?next.from+start:end,rangeFrom=Math.max(from,pos),rangeTo=Math.min(to,nextPos);if(rangeFrom<rangeTo&&hasChild)for(;cursor.from<rangeTo&&(this.highlightRange(cursor,rangeFrom,rangeTo,inheritedClass,highlighters),this.startSpan(Math.min(rangeTo,cursor.to),cls),!(cursor.to>=nextPos)&&cursor.nextSibling()););if(!next||nextPos>to)break;pos=next.to+start,pos>from&&(this.highlightRange(inner.cursor(),Math.max(from,next.from+start),Math.min(to,pos),"",innerHighlighters),this.startSpan(Math.min(to,pos),cls))}hasChild&&cursor.parent()}else if(cursor.firstChild()){mounted&&(inheritedClass="");do{if(!(cursor.to<=from)){if(cursor.from>=to)break;this.highlightRange(cursor,from,to,inheritedClass,highlighters),this.startSpan(Math.min(to,cursor.to),cls)}}while(cursor.nextSibling());cursor.parent()}}}const dist_t=Tag.define,comment=dist_t(),dist_name=dist_t(),typeName=dist_t(dist_name),propertyName=dist_t(dist_name),literal=dist_t(),string=dist_t(literal),number=dist_t(literal),content=dist_t(),heading=dist_t(content),keyword=dist_t(),operator=dist_t(),punctuation=dist_t(),bracket=dist_t(punctuation),meta=dist_t(),tags={comment,lineComment:dist_t(comment),blockComment:dist_t(comment),docComment:dist_t(comment),name:dist_name,variableName:dist_t(dist_name),typeName,tagName:dist_t(typeName),propertyName,attributeName:dist_t(propertyName),className:dist_t(dist_name),labelName:dist_t(dist_name),namespace:dist_t(dist_name),macroName:dist_t(dist_name),literal,string,docString:dist_t(string),character:dist_t(string),attributeValue:dist_t(string),number,integer:dist_t(number),float:dist_t(number),bool:dist_t(literal),regexp:dist_t(literal),escape:dist_t(literal),color:dist_t(literal),url:dist_t(literal),keyword,self:dist_t(keyword),null:dist_t(keyword),atom:dist_t(keyword),unit:dist_t(keyword),modifier:dist_t(keyword),operatorKeyword:dist_t(keyword),controlKeyword:dist_t(keyword),definitionKeyword:dist_t(keyword),moduleKeyword:dist_t(keyword),operator,derefOperator:dist_t(operator),arithmeticOperator:dist_t(operator),logicOperator:dist_t(operator),bitwiseOperator:dist_t(operator),compareOperator:dist_t(operator),updateOperator:dist_t(operator),definitionOperator:dist_t(operator),typeOperator:dist_t(operator),controlOperator:dist_t(operator),punctuation,separator:dist_t(punctuation),bracket,angleBracket:dist_t(bracket),squareBracket:dist_t(bracket),paren:dist_t(bracket),brace:dist_t(bracket),content,heading,heading1:dist_t(heading),heading2:dist_t(heading),heading3:dist_t(heading),heading4:dist_t(heading),heading5:dist_t(heading),heading6:dist_t(heading),contentSeparator:dist_t(content),list:dist_t(content),quote:dist_t(content),emphasis:dist_t(content),strong:dist_t(content),link:dist_t(content),monospace:dist_t(content),strikethrough:dist_t(content),inserted:dist_t(),deleted:dist_t(),changed:dist_t(),invalid:dist_t(),meta,documentMeta:dist_t(meta),annotation:dist_t(meta),processingInstruction:dist_t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new dist_NodeProp;function defineLanguageFacet(baseData){return Facet.define({combine:baseData?values=>values.concat(baseData):void 0})}const sublanguageProp=new dist_NodeProp;class Language{constructor(data,parser,extraExtensions=[],name=""){this.data=data,this.name=name,dist_EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(dist_EditorState.prototype,"tree",{get(){return dist_syntaxTree(this)}}),this.parser=parser,this.extension=[language.of(this),dist_EditorState.languageData.of(((state,pos,side)=>{let top=topNodeAt(state,pos,side),data=top.type.prop(languageDataProp);if(!data)return[];let base=state.facet(data),sub=top.type.prop(sublanguageProp);if(sub){let innerNode=top.resolve(pos-top.from,side);for(let sublang of sub)if(sublang.test(innerNode,state)){let data=state.facet(sublang.facet);return"replace"==sublang.type?data:data.concat(base)}}return base}))].concat(extraExtensions)}isActiveAt(state,pos,side=-1){return topNodeAt(state,pos,side).type.prop(languageDataProp)==this.data}findRegions(state){let lang=state.facet(language);if((null==lang?void 0:lang.data)==this.data)return[{from:0,to:state.doc.length}];if(!lang||!lang.allowsNesting)return[];let result=[],explore=(tree,from)=>{if(tree.prop(languageDataProp)==this.data)return void result.push({from,to:from+tree.length});let mount=tree.prop(dist_NodeProp.mounted);if(mount){if(mount.tree.prop(languageDataProp)==this.data){if(mount.overlay)for(let r of mount.overlay)result.push({from:r.from+from,to:r.to+from});else result.push({from,to:from+tree.length});return}if(mount.overlay){let size=result.length;if(explore(mount.tree,mount.overlay[0].from+from),result.length>size)return}}for(let i=0;i<tree.children.length;i++){let ch=tree.children[i];ch instanceof dist_Tree&&explore(ch,tree.positions[i]+from)}};return explore(dist_syntaxTree(state),0),result}get allowsNesting(){return!0}}function topNodeAt(state,pos,side){let topLang=state.facet(language),tree=dist_syntaxTree(state).topNode;if(!topLang||topLang.allowsNesting)for(let node=tree;node;node=node.enter(pos,side,IterMode.ExcludeBuffers))node.type.isTop&&(tree=node);return tree}Language.setState=dist_StateEffect.define();class LRLanguage extends Language{constructor(data,parser,name){super(data,parser,[],name),this.parser=parser}static define(spec){let data=defineLanguageFacet(spec.languageData);return new LRLanguage(data,spec.parser.configure({props:[languageDataProp.add((type=>type.isTop?data:void 0))]}),spec.name)}configure(options,name){return new LRLanguage(this.data,this.parser.configure(options),name||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function dist_syntaxTree(state){let field=state.field(Language.state,!1);return field?field.tree:dist_Tree.empty}class DocInput{constructor(doc){this.doc=doc,this.cursorPos=0,this.string="",this.cursor=doc.iter()}get length(){return this.doc.length}syncTo(pos){return this.string=this.cursor.next(pos-this.cursorPos).value,this.cursorPos=pos+this.string.length,this.cursorPos-this.string.length}chunk(pos){return this.syncTo(pos),this.string}get lineChunks(){return!0}read(from,to){let stringStart=this.cursorPos-this.string.length;return from<stringStart||to>=this.cursorPos?this.doc.sliceString(from,to):this.string.slice(from-stringStart,to-stringStart)}}let currentContext=null;class ParseContext{constructor(parser,state,fragments=[],tree,treeLen,viewport,skipped,scheduleOn){this.parser=parser,this.state=state,this.fragments=fragments,this.tree=tree,this.treeLen=treeLen,this.viewport=viewport,this.skipped=skipped,this.scheduleOn=scheduleOn,this.parse=null,this.tempSkipped=[]}static create(parser,state,viewport){return new ParseContext(parser,state,[],dist_Tree.empty,0,viewport,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(until,upto){return null!=upto&&upto>=this.state.doc.length&&(upto=void 0),this.tree!=dist_Tree.empty&&this.isDone(null!=upto?upto:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var _a;if("number"==typeof until){let endTime=Date.now()+until;until=()=>Date.now()>endTime}for(this.parse||(this.parse=this.startParse()),null!=upto&&(null==this.parse.stoppedAt||this.parse.stoppedAt>upto)&&upto<this.state.doc.length&&this.parse.stopAt(upto);;){let done=this.parse.advance();if(done){if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(done,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(_a=this.parse.stoppedAt)&&void 0!==_a?_a:this.state.doc.length,this.tree=done,this.parse=null,!(this.treeLen<(null!=upto?upto:this.state.doc.length)))return!0;this.parse=this.startParse()}if(until())return!1}}))}takeTree(){let pos,tree;this.parse&&(pos=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>pos)&&this.parse.stopAt(pos),this.withContext((()=>{for(;!(tree=this.parse.advance()););})),this.treeLen=pos,this.tree=tree,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(f){let prev=currentContext;currentContext=this;try{return f()}finally{currentContext=prev}}withoutTempSkipped(fragments){for(let r;r=this.tempSkipped.pop();)fragments=cutFragments(fragments,r.from,r.to);return fragments}changes(changes,newState){let{fragments,tree,treeLen,viewport,skipped}=this;if(this.takeTree(),!changes.empty){let ranges=[];if(changes.iterChangedRanges(((fromA,toA,fromB,toB)=>ranges.push({fromA,toA,fromB,toB}))),fragments=TreeFragment.applyChanges(fragments,ranges),tree=dist_Tree.empty,treeLen=0,viewport={from:changes.mapPos(viewport.from,-1),to:changes.mapPos(viewport.to,1)},this.skipped.length){skipped=[];for(let r of this.skipped){let from=changes.mapPos(r.from,1),to=changes.mapPos(r.to,-1);from<to&&skipped.push({from,to})}}}return new ParseContext(this.parser,newState,fragments,tree,treeLen,viewport,skipped,this.scheduleOn)}updateViewport(viewport){if(this.viewport.from==viewport.from&&this.viewport.to==viewport.to)return!1;this.viewport=viewport;let startLen=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from,to}=this.skipped[i];from<viewport.to&&to>viewport.from&&(this.fragments=cutFragments(this.fragments,from,to),this.skipped.splice(i--,1))}return!(this.skipped.length>=startLen)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(from,to){this.skipped.push({from,to})}static getSkippingParser(until){return new class extends dist_Parser{createParse(input,fragments,ranges){let from=ranges[0].from,to=ranges[ranges.length-1].to,parser={parsedPos:from,advance(){let cx=currentContext;if(cx){for(let r of ranges)cx.tempSkipped.push(r);until&&(cx.scheduleOn=cx.scheduleOn?Promise.all([cx.scheduleOn,until]):until)}return this.parsedPos=to,new dist_Tree(dist_NodeType.none,[],[],to-from)},stoppedAt:null,stopAt(){}};return parser}}}isDone(upto){upto=Math.min(upto,this.state.doc.length);let frags=this.fragments;return this.treeLen>=upto&&frags.length&&0==frags[0].from&&frags[0].to>=upto}static get(){return currentContext}}function cutFragments(fragments,from,to){return TreeFragment.applyChanges(fragments,[{fromA:from,toA:to,fromB:from,toB:to}])}class LanguageState{constructor(context){this.context=context,this.tree=context.tree}apply(tr){if(!tr.docChanged&&this.tree==this.context.tree)return this;let newCx=this.context.changes(tr.changes,tr.state),upto=this.context.treeLen==tr.startState.doc.length?void 0:Math.max(tr.changes.mapPos(this.context.treeLen),newCx.viewport.to);return newCx.work(20,upto)||newCx.takeTree(),new LanguageState(newCx)}static init(state){let vpTo=Math.min(3e3,state.doc.length),parseState=ParseContext.create(state.facet(language).parser,state,{from:0,to:vpTo});return parseState.work(20,vpTo)||parseState.takeTree(),new LanguageState(parseState)}}Language.state=dist_StateField.define({create:LanguageState.init,update(value,tr){for(let e of tr.effects)if(e.is(Language.setState))return e.value;return tr.startState.facet(language)!=tr.state.facet(language)?LanguageState.init(tr.state):value.apply(tr)}});let requestIdle=callback=>{let timeout=setTimeout((()=>callback()),500);return()=>clearTimeout(timeout)};"undefined"!=typeof requestIdleCallback&&(requestIdle=callback=>{let idle=-1,timeout=setTimeout((()=>{idle=requestIdleCallback(callback,{timeout:400})}),100);return()=>idle<0?clearTimeout(timeout):cancelIdleCallback(idle)});const isInputPending="undefined"!=typeof navigator&&(null===(_a=navigator.scheduling)||void 0===_a?void 0:_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=dist_ViewPlugin.fromClass(class ParseWorker{constructor(view){this.view=view,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(update){let cx=this.view.state.field(Language.state).context;(cx.updateViewport(update.view.viewport)||this.view.viewport.to>cx.treeLen)&&this.scheduleWork(),(update.docChanged||update.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(cx)}scheduleWork(){if(this.working)return;let{state}=this.view,field=state.field(Language.state);field.tree==field.context.tree&&field.context.isDone(state.doc.length)||(this.working=requestIdle(this.work))}work(deadline){this.working=null;let now=Date.now();if(this.chunkEnd<now&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=now+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state,viewport:{to:vpTo}}=this.view,field=state.field(Language.state);if(field.tree==field.context.tree&&field.context.isDone(vpTo+1e5))return;let endTime=Date.now()+Math.min(this.chunkBudget,100,deadline&&!isInputPending?Math.max(25,deadline.timeRemaining()-5):1e9),viewportFirst=field.context.treeLen<vpTo&&state.doc.length>vpTo+1e3,done=field.context.work((()=>isInputPending&&isInputPending()||Date.now()>endTime),vpTo+(viewportFirst?0:1e5));this.chunkBudget-=Date.now()-now,(done||this.chunkBudget<=0)&&(field.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(field.context))})),this.chunkBudget>0&&(!done||viewportFirst)&&this.scheduleWork(),this.checkAsyncSchedule(field.context)}checkAsyncSchedule(cx){cx.scheduleOn&&(this.workScheduled++,cx.scheduleOn.then((()=>this.scheduleWork())).catch((err=>logException(this.view.state,err))).then((()=>this.workScheduled--)),cx.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine:languages=>languages.length?languages[0]:null,enables:language=>[Language.state,parseWorker,EditorView.contentAttributes.compute([language],(state=>{let lang=state.facet(language);return lang&&lang.name?{"data-language":lang.name}:{}}))]});class LanguageSupport{constructor(language,support=[]){this.language=language,this.support=support,this.extension=[language,support]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:values=>{if(!values.length)return"  ";let unit=values[0];if(!unit||/\S/.test(unit)||Array.from(unit).some((e=>e!=unit[0])))throw new Error("Invalid indent unit: "+JSON.stringify(values[0]));return unit}});function getIndentUnit(state){let unit=state.facet(indentUnit);return 9==unit.charCodeAt(0)?state.tabSize*unit.length:unit.length}function indentString(state,cols){let result="",ts=state.tabSize,ch=state.facet(indentUnit)[0];if("\t"==ch){for(;cols>=ts;)result+="\t",cols-=ts;ch=" "}for(let i=0;i<cols;i++)result+=ch;return result}function getIndentation(context,pos){context instanceof dist_EditorState&&(context=new IndentContext(context));for(let service of context.state.facet(indentService)){let result=service(context,pos);if(void 0!==result)return result}let tree=dist_syntaxTree(context.state);return tree.length>=pos?function syntaxIndentation(cx,ast,pos){let stack=ast.resolveStack(pos),inner=stack.node.enterUnfinishedNodesBefore(pos);if(inner!=stack.node){let add=[];for(let cur=inner;cur!=stack.node;cur=cur.parent)add.push(cur);for(let i=add.length-1;i>=0;i--)stack={node:add[i],next:stack}}return indentFor(stack,cx,pos)}(context,tree,pos):null}class IndentContext{constructor(state,options={}){this.state=state,this.options=options,this.unit=getIndentUnit(state)}lineAt(pos,bias=1){let line=this.state.doc.lineAt(pos),{simulateBreak,simulateDoubleBreak}=this.options;return null!=simulateBreak&&simulateBreak>=line.from&&simulateBreak<=line.to?simulateDoubleBreak&&simulateBreak==pos?{text:"",from:pos}:(bias<0?simulateBreak<pos:simulateBreak<=pos)?{text:line.text.slice(simulateBreak-line.from),from:simulateBreak}:{text:line.text.slice(0,simulateBreak-line.from),from:line.from}:line}textAfterPos(pos,bias=1){if(this.options.simulateDoubleBreak&&pos==this.options.simulateBreak)return"";let{text,from}=this.lineAt(pos,bias);return text.slice(pos-from,Math.min(text.length,pos+100-from))}column(pos,bias=1){let{text,from}=this.lineAt(pos,bias),result=this.countColumn(text,pos-from),override=this.options.overrideIndentation?this.options.overrideIndentation(from):-1;return override>-1&&(result+=override-this.countColumn(text,text.search(/\S|$/))),result}countColumn(line,pos=line.length){return dist_countColumn(line,this.state.tabSize,pos)}lineIndent(pos,bias=1){let{text,from}=this.lineAt(pos,bias),override=this.options.overrideIndentation;if(override){let overriden=override(from);if(overriden>-1)return overriden}return this.countColumn(text,text.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new dist_NodeProp;function indentFor(stack,cx,pos){for(let cur=stack;cur;cur=cur.next){let strategy=indentStrategy(cur.node);if(strategy)return strategy(TreeIndentContext.create(cx,pos,cur))}return 0}function indentStrategy(tree){let strategy=tree.type.prop(indentNodeProp);if(strategy)return strategy;let close,first=tree.firstChild;if(first&&(close=first.type.prop(dist_NodeProp.closedBy))){let last=tree.lastChild,closed=last&&close.indexOf(last.name)>-1;return cx=>delimitedStrategy(cx,!0,1,void 0,closed&&!function ignoreClosed(cx){return cx.pos==cx.options.simulateBreak&&cx.options.simulateDoubleBreak}(cx)?last.from:void 0)}return null==tree.parent?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(base,pos,context){super(base.state,base.options),this.base=base,this.pos=pos,this.context=context}get node(){return this.context.node}static create(base,pos,context){return new TreeIndentContext(base,pos,context)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(node){let line=this.state.doc.lineAt(node.from);for(;;){let atBreak=node.resolve(line.from);for(;atBreak.parent&&atBreak.parent.from==atBreak.from;)atBreak=atBreak.parent;if(isParent(atBreak,node))break;line=this.state.doc.lineAt(atBreak.from)}return this.lineIndent(line.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(parent,of){for(let cur=of;cur;cur=cur.parent)if(parent==cur)return!0;return!1}function delimitedIndent({closing,align=!0,units=1}){return context=>delimitedStrategy(context,align,units,closing)}function delimitedStrategy(context,align,units,closing,closedAt){let after=context.textAfter,space=after.match(/^\s*/)[0].length,closed=closing&&after.slice(space,space+closing.length)==closing||closedAt==context.pos+space,aligned=align?function bracketedAligned(context){let tree=context.node,openToken=tree.childAfter(tree.from),last=tree.lastChild;if(!openToken)return null;let sim=context.options.simulateBreak,openLine=context.state.doc.lineAt(openToken.from),lineEnd=null==sim||sim<=openLine.from?openLine.to:Math.min(openLine.to,sim);for(let pos=openToken.to;;){let next=tree.childAfter(pos);if(!next||next==last)return null;if(!next.type.isSkipped)return next.from<lineEnd?openToken:null;pos=next.to}}(context):null;return aligned?closed?context.column(aligned.from):context.column(aligned.to):context.baseIndent+(closed?0:context.unit*units)}function continuedIndent({except,units=1}={}){return context=>{let matchExcept=except&&except.test(context.textAfter);return context.baseIndent+(matchExcept?0:units*context.unit)}}const foldNodeProp=new dist_NodeProp;function foldInside(node){let first=node.firstChild,last=node.lastChild;return first&&first.to<last.from?{from:first.to,to:last.type.isError?node.to:last.from}:null}class HighlightStyle{constructor(specs,options){let modSpec;function def(spec){let cls=StyleModule.newName();return(modSpec||(modSpec=Object.create(null)))["."+cls]=spec,cls}this.specs=specs;const all="string"==typeof options.all?options.all:options.all?def(options.all):void 0,scopeOpt=options.scope;this.scope=scopeOpt instanceof Language?type=>type.prop(languageDataProp)==scopeOpt.data:scopeOpt?type=>type==scopeOpt:void 0,this.style=tagHighlighter(specs.map((style=>({tag:style.tag,class:style.class||def(Object.assign({},style,{tag:null}))}))),{all}).style,this.module=modSpec?new StyleModule(modSpec):null,this.themeType=options.themeType}static define(specs,options){return new HighlightStyle(specs,options||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine:values=>values.length?[values[0]]:null});function getHighlighters(state){let main=state.facet(highlighterFacet);return main.length?main:state.facet(fallbackHighlighter)}function syntaxHighlighting(highlighter,options){let themeType,ext=[treeHighlighter];return highlighter instanceof HighlightStyle&&(highlighter.module&&ext.push(EditorView.styleModule.of(highlighter.module)),themeType=highlighter.themeType),(null==options?void 0:options.fallback)?ext.push(fallbackHighlighter.of(highlighter)):themeType?ext.push(highlighterFacet.computeN([EditorView.darkTheme],(state=>state.facet(EditorView.darkTheme)==("dark"==themeType)?[highlighter]:[]))):ext.push(highlighterFacet.of(highlighter)),ext}class TreeHighlighter{constructor(view){this.markCache=Object.create(null),this.tree=dist_syntaxTree(view.state),this.decorations=this.buildDeco(view,getHighlighters(view.state))}update(update){let tree=dist_syntaxTree(update.state),highlighters=getHighlighters(update.state),styleChange=highlighters!=getHighlighters(update.startState);tree.length<update.view.viewport.to&&!styleChange&&tree.type==this.tree.type?this.decorations=this.decorations.map(update.changes):(tree!=this.tree||update.viewportChanged||styleChange)&&(this.tree=tree,this.decorations=this.buildDeco(update.view,highlighters))}buildDeco(view,highlighters){if(!highlighters||!this.tree.length)return Decoration.none;let builder=new dist_RangeSetBuilder;for(let{from,to}of view.visibleRanges)highlightTree(this.tree,highlighters,((from,to,style)=>{builder.add(from,to,this.markCache[style]||(this.markCache[style]=Decoration.mark({class:style})))}),from,to);return builder.finish()}}const treeHighlighter=dist_Prec.high(dist_ViewPlugin.fromClass(TreeHighlighter,{decorations:v=>v.decorations})),dist_baseTheme=(tags.meta,tags.link,tags.heading,tags.emphasis,tags.strong,tags.strikethrough,tags.keyword,tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName,tags.literal,tags.inserted,tags.string,tags.deleted,tags.regexp,tags.escape,tags.string,tags.variableName,tags.variableName,tags.typeName,tags.namespace,tags.className,tags.variableName,tags.macroName,tags.propertyName,tags.comment,tags.invalid,EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}})),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine:configs=>combineConfig(configs,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(match){let decorations=[],mark=match.matched?matchingMark:nonmatchingMark;return decorations.push(mark.range(match.start.from,match.start.to)),match.end&&decorations.push(mark.range(match.end.from,match.end.to)),decorations}const bracketMatchingState=dist_StateField.define({create:()=>Decoration.none,update(deco,tr){if(!tr.docChanged&&!tr.selection)return deco;let decorations=[],config=tr.state.facet(bracketMatchingConfig);for(let range of tr.state.selection.ranges){if(!range.empty)continue;let match=matchBrackets(tr.state,range.head,-1,config)||range.head>0&&matchBrackets(tr.state,range.head-1,1,config)||config.afterCursor&&(matchBrackets(tr.state,range.head,1,config)||range.head<tr.state.doc.length&&matchBrackets(tr.state,range.head+1,-1,config));match&&(decorations=decorations.concat(config.renderMatch(match,tr.state)))}return Decoration.set(decorations,!0)},provide:f=>EditorView.decorations.from(f)}),bracketMatchingUnique=[bracketMatchingState,dist_baseTheme];const bracketMatchingHandle=new dist_NodeProp;function matchingNodes(node,dir,brackets){let byProp=node.prop(dir<0?dist_NodeProp.openedBy:dist_NodeProp.closedBy);if(byProp)return byProp;if(1==node.name.length){let index=brackets.indexOf(node.name);if(index>-1&&index%2==(dir<0?1:0))return[brackets[index+dir]]}return null}function findHandle(node){let hasHandle=node.type.prop(bracketMatchingHandle);return hasHandle?hasHandle(node.node):node}function matchBrackets(state,pos,dir,config={}){let maxScanDistance=config.maxScanDistance||DefaultScanDist,brackets=config.brackets||DefaultBrackets,tree=dist_syntaxTree(state),node=tree.resolveInner(pos,dir);for(let cur=node;cur;cur=cur.parent){let matches=matchingNodes(cur.type,dir,brackets);if(matches&&cur.from<cur.to){let handle=findHandle(cur);if(handle&&(dir>0?pos>=handle.from&&pos<handle.to:pos>handle.from&&pos<=handle.to))return matchMarkedBrackets(state,pos,dir,cur,handle,matches,brackets)}}return function matchPlainBrackets(state,pos,dir,tree,tokenType,maxScanDistance,brackets){let startCh=dir<0?state.sliceDoc(pos-1,pos):state.sliceDoc(pos,pos+1),bracket=brackets.indexOf(startCh);if(bracket<0||bracket%2==0!=dir>0)return null;let startToken={from:dir<0?pos-1:pos,to:dir>0?pos+1:pos},iter=state.doc.iterRange(pos,dir>0?state.doc.length:0),depth=0;for(let distance=0;!iter.next().done&&distance<=maxScanDistance;){let text=iter.value;dir<0&&(distance+=text.length);let basePos=pos+distance*dir;for(let pos=dir>0?0:text.length-1,end=dir>0?text.length:-1;pos!=end;pos+=dir){let found=brackets.indexOf(text[pos]);if(!(found<0||tree.resolveInner(basePos+pos,1).type!=tokenType))if(found%2==0==dir>0)depth++;else{if(1==depth)return{start:startToken,end:{from:basePos+pos,to:basePos+pos+1},matched:found>>1==bracket>>1};depth--}}dir>0&&(distance+=text.length)}return iter.done?{start:startToken,matched:!1}:null}(state,pos,dir,tree,node.type,maxScanDistance,brackets)}function matchMarkedBrackets(_state,_pos,dir,token,handle,matching,brackets){let parent=token.parent,firstToken={from:handle.from,to:handle.to},depth=0,cursor=null==parent?void 0:parent.cursor();if(cursor&&(dir<0?cursor.childBefore(token.from):cursor.childAfter(token.to)))do{if(dir<0?cursor.to<=token.from:cursor.from>=token.to){if(0==depth&&matching.indexOf(cursor.type.name)>-1&&cursor.from<cursor.to){let endHandle=findHandle(cursor);return{start:firstToken,end:endHandle?{from:endHandle.from,to:endHandle.to}:void 0,matched:!0}}if(matchingNodes(cursor.type,dir,brackets))depth++;else if(matchingNodes(cursor.type,-dir,brackets)){if(0==depth){let endHandle=findHandle(cursor);return{start:firstToken,end:endHandle&&endHandle.from<endHandle.to?{from:endHandle.from,to:endHandle.to}:void 0,matched:!1}}depth--}}}while(dir<0?cursor.prevSibling():cursor.nextSibling());return{start:firstToken,matched:!1}}const noTokens=Object.create(null),typeArray=[dist_NodeType.none],warned=[],defaultTable=Object.create(null);for(let[legacyName,name]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[legacyName]=createTokenType(noTokens,name);function warnForPart(part,msg){warned.indexOf(part)>-1||(warned.push(part),console.warn(msg))}function createTokenType(extra,tagStr){let tags$1=[];for(let name of tagStr.split(" ")){let found=[];for(let part of name.split(".")){let value=extra[part]||tags[part];value?"function"==typeof value?found.length?found=found.map(value):warnForPart(part,`Modifier ${part} used at start of tag`):found.length?warnForPart(part,`Tag ${part} used as modifier`):found=Array.isArray(value)?value:[value]:warnForPart(part,`Unknown highlighting tag ${part}`)}for(let tag of found)tags$1.push(tag)}if(!tags$1.length)return 0;let name=tagStr.replace(/ /g,"_"),type=dist_NodeType.define({id:typeArray.length,name,props:[styleTags({[name]:tags$1})]});return typeArray.push(type),type.id}function toSet(chars){let flat=Object.keys(chars).join(""),words=/\w/.test(flat);return words&&(flat=flat.replace(/\w/g,"")),`[${words?"\\w":""}${flat.replace(/[^\w\s]/g,"\\$&")}]`}function completeFromList(list){let options=list.map((o=>"string"==typeof o?{label:o}:o)),[validFor,match]=options.every((o=>/^\w+$/.test(o.label)))?[/\w*$/,/\w+$/]:function prefixMatch(options){let first=Object.create(null),rest=Object.create(null);for(let{label}of options){first[label[0]]=!0;for(let i=1;i<label.length;i++)rest[label[i]]=!0}let source=toSet(first)+toSet(rest)+"*$";return[new RegExp("^"+source),new RegExp(source)]}(options);return context=>{let token=context.matchBefore(match);return token||context.explicit?{from:token?token.from:context.pos,options,validFor}:null}}const pickedCompletion=Annotation.define();const autocomplete_dist_baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(field,line,from,to){this.field=field,this.line=line,this.from=from,this.to=to}}class FieldRange{constructor(field,from,to){this.field=field,this.from=from,this.to=to}map(changes){let from=changes.mapPos(this.from,-1,dist_MapMode.TrackDel),to=changes.mapPos(this.to,1,dist_MapMode.TrackDel);return null==from||null==to?null:new FieldRange(this.field,from,to)}}class Snippet{constructor(lines,fieldPositions){this.lines=lines,this.fieldPositions=fieldPositions}instantiate(state,pos){let text=[],lineStart=[pos],lineObj=state.doc.lineAt(pos),baseIndent=/^\s*/.exec(lineObj.text)[0];for(let line of this.lines){if(text.length){let indent=baseIndent,tabs=/^\t*/.exec(line)[0].length;for(let i=0;i<tabs;i++)indent+=state.facet(indentUnit);lineStart.push(pos+indent.length-tabs),line=indent+line.slice(tabs)}text.push(line),pos+=line.length+1}let ranges=this.fieldPositions.map((pos=>new FieldRange(pos.field,lineStart[pos.line]+pos.from,lineStart[pos.line]+pos.to)));return{text,ranges}}static parse(template){let m,fields=[],lines=[],positions=[];for(let line of template.split(/\r\n?|\n/)){for(;m=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(line);){let seq=m[1]?+m[1]:null,name=m[2]||m[3]||"",found=-1;for(let i=0;i<fields.length;i++)(null!=seq?fields[i].seq==seq:name&&fields[i].name==name)&&(found=i);if(found<0){let i=0;for(;i<fields.length&&(null==seq||null!=fields[i].seq&&fields[i].seq<seq);)i++;fields.splice(i,0,{seq,name}),found=i;for(let pos of positions)pos.field>=found&&pos.field++}positions.push(new FieldPos(found,lines.length,m.index,m.index+name.length)),line=line.slice(0,m.index)+name+line.slice(m.index+m[0].length)}for(let esc;esc=/\\([{}])/.exec(line);){line=line.slice(0,esc.index)+esc[1]+line.slice(esc.index+esc[0].length);for(let pos of positions)pos.line==lines.length&&pos.from>esc.index&&(pos.from--,pos.to--)}lines.push(line)}return new Snippet(lines,positions)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let span=document.createElement("span");return span.className="cm-snippetFieldPosition",span}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(ranges,active){this.ranges=ranges,this.active=active,this.deco=Decoration.set(ranges.map((r=>(r.from==r.to?fieldMarker:fieldRange).range(r.from,r.to))))}map(changes){let ranges=[];for(let r of this.ranges){let mapped=r.map(changes);if(!mapped)return null;ranges.push(mapped)}return new ActiveSnippet(ranges,this.active)}selectionInsideField(sel){return sel.ranges.every((range=>this.ranges.some((r=>r.field==this.active&&r.from<=range.from&&r.to>=range.to))))}}const setActive=dist_StateEffect.define({map:(value,changes)=>value&&value.map(changes)}),moveToField=dist_StateEffect.define(),snippetState=dist_StateField.define({create:()=>null,update(value,tr){for(let effect of tr.effects){if(effect.is(setActive))return effect.value;if(effect.is(moveToField)&&value)return new ActiveSnippet(value.ranges,effect.value)}return value&&tr.docChanged&&(value=value.map(tr.changes)),value&&tr.selection&&!value.selectionInsideField(tr.selection)&&(value=null),value},provide:f=>EditorView.decorations.from(f,(val=>val?val.deco:Decoration.none))});function fieldSelection(ranges,field){return dist_EditorSelection.create(ranges.filter((r=>r.field==field)).map((r=>dist_EditorSelection.range(r.from,r.to))))}function snippet(template){let snippet=Snippet.parse(template);return(editor,completion,from,to)=>{let{text,ranges}=snippet.instantiate(editor.state,from),spec={changes:{from,to,insert:Text.of(text)},scrollIntoView:!0,annotations:completion?pickedCompletion.of(completion):void 0};if(ranges.length&&(spec.selection=fieldSelection(ranges,0)),ranges.length>1){let active=new ActiveSnippet(ranges,0),effects=spec.effects=[setActive.of(active)];void 0===editor.state.field(snippetState,!1)&&effects.push(dist_StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,autocomplete_dist_baseTheme]))}editor.dispatch(editor.state.update(spec))}}function moveField(dir){return({state,dispatch})=>{let active=state.field(snippetState,!1);if(!active||dir<0&&0==active.active)return!1;let next=active.active+dir,last=dir>0&&!active.ranges.some((r=>r.field==next+dir));return dispatch(state.update({selection:fieldSelection(active.ranges,next),effects:setActive.of(last?null:new ActiveSnippet(active.ranges,next)),scrollIntoView:!0})),!0}}const defaultSnippetKeymap=[{key:"Tab",run:moveField(1),shift:moveField(-1)},{key:"Escape",run:({state,dispatch})=>!!state.field(snippetState,!1)&&(dispatch(state.update({effects:setActive.of(null)})),!0)}],snippetKeymap=Facet.define({combine:maps=>maps.length?maps[0]:defaultSnippetKeymap}),addSnippetKeymap=dist_Prec.highest(keymap.compute([snippetKeymap],(state=>state.facet(snippetKeymap))));function snippetCompletion(template,completion){return Object.assign(Object.assign({},completion),{apply:snippet(template)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(event,view){let pos,active=view.state.field(snippetState,!1);if(!active||null==(pos=view.posAtCoords({x:event.clientX,y:event.clientY})))return!1;let match=active.ranges.find((r=>r.from<=pos&&r.to>=pos));return!(!match||match.field==active.active)&&(view.dispatch({selection:fieldSelection(active.ranges,match.field),effects:setActive.of(active.ranges.some((r=>r.field>match.field))?new ActiveSnippet(active.ranges,match.field):null),scrollIntoView:!0}),!0)}});const dist_defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=dist_StateEffect.define({map(value,mapping){let mapped=mapping.mapPos(value,-1,dist_MapMode.TrackAfter);return null==mapped?void 0:mapped}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=dist_StateField.define({create:()=>dist_RangeSet.empty,update(value,tr){if(tr.selection){let lineStart=tr.state.doc.lineAt(tr.selection.main.head).from,prevLineStart=tr.startState.doc.lineAt(tr.startState.selection.main.head).from;lineStart!=tr.changes.mapPos(prevLineStart,-1)&&(value=dist_RangeSet.empty)}value=value.map(tr.changes);for(let effect of tr.effects)effect.is(closeBracketEffect)&&(value=value.update({add:[closedBracket.range(effect.value,effect.value+1)]}));return value}});const definedClosing="()[]{}<>";function closing(ch){for(let i=0;i<definedClosing.length;i+=2)if(definedClosing.charCodeAt(i)==ch)return definedClosing.charAt(i+1);return fromCodePoint(ch<128?ch:ch+1)}function config(state,pos){return state.languageDataAt("closeBrackets",pos)[0]||dist_defaults}const android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),dist_inputHandler=EditorView.inputHandler.of(((view,from,to,insert)=>{if((android?view.composing:view.compositionStarted)||view.state.readOnly)return!1;let sel=view.state.selection.main;if(insert.length>2||2==insert.length&&1==codePointSize(codePointAt(insert,0))||from!=sel.from||to!=sel.to)return!1;let tr=function insertBracket(state,bracket){let conf=config(state,state.selection.main.head),tokens=conf.brackets||dist_defaults.brackets;for(let tok of tokens){let closed=closing(codePointAt(tok,0));if(bracket==tok)return closed==tok?handleSame(state,tok,tokens.indexOf(tok+tok+tok)>-1,conf):handleOpen(state,tok,closed,conf.before||dist_defaults.before);if(bracket==closed&&closedBracketAt(state,state.selection.main.from))return handleClose(state,tok,closed)}return null}(view.state,insert);return!!tr&&(view.dispatch(tr),!0)})),closeBracketsKeymap=[{key:"Backspace",run:({state,dispatch})=>{if(state.readOnly)return!1;let tokens=config(state,state.selection.main.head).brackets||dist_defaults.brackets,dont=null,changes=state.changeByRange((range=>{if(range.empty){let before=function prevChar(doc,pos){let prev=doc.sliceString(pos-2,pos);return codePointSize(codePointAt(prev,0))==prev.length?prev:prev.slice(1)}(state.doc,range.head);for(let token of tokens)if(token==before&&nextChar(state.doc,range.head)==closing(codePointAt(token,0)))return{changes:{from:range.head-token.length,to:range.head+token.length},range:dist_EditorSelection.cursor(range.head-token.length)}}return{range:dont=range}}));return dont||dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"delete.backward"})),!dont}}];function closedBracketAt(state,pos){let found=!1;return state.field(bracketState).between(0,state.doc.length,(from=>{from==pos&&(found=!0)})),found}function nextChar(doc,pos){let next=doc.sliceString(pos,pos+2);return next.slice(0,codePointSize(codePointAt(next,0)))}function handleOpen(state,open,close,closeBefore){let dont=null,changes=state.changeByRange((range=>{if(!range.empty)return{changes:[{insert:open,from:range.from},{insert:close,from:range.to}],effects:closeBracketEffect.of(range.to+open.length),range:dist_EditorSelection.range(range.anchor+open.length,range.head+open.length)};let next=nextChar(state.doc,range.head);return!next||/\s/.test(next)||closeBefore.indexOf(next)>-1?{changes:{insert:open+close,from:range.head},effects:closeBracketEffect.of(range.head+open.length),range:dist_EditorSelection.cursor(range.head+open.length)}:{range:dont=range}}));return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(state,_open,close){let dont=null,changes=state.changeByRange((range=>range.empty&&nextChar(state.doc,range.head)==close?{changes:{from:range.head,to:range.head+close.length,insert:close},range:dist_EditorSelection.cursor(range.head+close.length)}:dont={range}));return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(state,token,allowTriple,config){let stringPrefixes=config.stringPrefixes||dist_defaults.stringPrefixes,dont=null,changes=state.changeByRange((range=>{if(!range.empty)return{changes:[{insert:token,from:range.from},{insert:token,from:range.to}],effects:closeBracketEffect.of(range.to+token.length),range:dist_EditorSelection.range(range.anchor+token.length,range.head+token.length)};let start,pos=range.head,next=nextChar(state.doc,pos);if(next==token){if(nodeStart(state,pos))return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)};if(closedBracketAt(state,pos)){let content=allowTriple&&state.sliceDoc(pos,pos+3*token.length)==token+token+token?token+token+token:token;return{changes:{from:pos,to:pos+content.length,insert:content},range:dist_EditorSelection.cursor(pos+content.length)}}}else{if(allowTriple&&state.sliceDoc(pos-2*token.length,pos)==token+token&&(start=canStartStringAt(state,pos-2*token.length,stringPrefixes))>-1&&nodeStart(state,start))return{changes:{insert:token+token+token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)};if(state.charCategorizer(pos)(next)!=dist_CharCategory.Word&&canStartStringAt(state,pos,stringPrefixes)>-1&&!function probablyInString(state,pos,quoteToken,prefixes){let node=dist_syntaxTree(state).resolveInner(pos,-1),maxPrefix=prefixes.reduce(((m,p)=>Math.max(m,p.length)),0);for(let i=0;i<5;i++){let start=state.sliceDoc(node.from,Math.min(node.to,node.from+quoteToken.length+maxPrefix)),quotePos=start.indexOf(quoteToken);if(!quotePos||quotePos>-1&&prefixes.indexOf(start.slice(0,quotePos))>-1){let first=node.firstChild;for(;first&&first.from==node.from&&first.to-first.from>quoteToken.length+quotePos;){if(state.sliceDoc(first.to-quoteToken.length,first.to)==quoteToken)return!1;first=first.firstChild}return!0}let parent=node.to==pos&&node.parent;if(!parent)break;node=parent}return!1}(state,pos,token,stringPrefixes))return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)}}return{range:dont=range}}));return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(state,pos){let tree=dist_syntaxTree(state).resolveInner(pos+1);return tree.parent&&tree.from==pos}function canStartStringAt(state,pos,prefixes){let charCat=state.charCategorizer(pos);if(charCat(state.sliceDoc(pos-1,pos))!=dist_CharCategory.Word)return pos;for(let prefix of prefixes){let start=pos-prefix.length;if(state.sliceDoc(start,pos)==prefix&&charCat(state.sliceDoc(start-1,start))!=dist_CharCategory.Word)return start}return-1}function command(f,option){return({state,dispatch})=>{if(state.readOnly)return!1;let tr=f(option,state);return!!tr&&(dispatch(state.update(tr)),!0)}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command(((o,s)=>changeBlockComment(o,s,function selectedLineRanges(state){let ranges=[];for(let r of state.selection.ranges){let fromLine=state.doc.lineAt(r.from),toLine=r.to<=fromLine.to?fromLine:state.doc.lineAt(r.to),last=ranges.length-1;last>=0&&ranges[last].to>fromLine.from?ranges[last].to=toLine.to:ranges.push({from:fromLine.from+/^\s*/.exec(fromLine.text)[0].length,to:toLine.to})}return ranges}(s))),0);function getConfig(state,pos){let data=state.languageDataAt("commentTokens",pos);return data.length?data[0]:{}}const SearchMargin=50;function changeBlockComment(option,state,ranges=state.selection.ranges){let tokens=ranges.map((r=>getConfig(state,r.from).block));if(!tokens.every((c=>c)))return null;let comments=ranges.map(((r,i)=>function findBlockComment(state,{open,close},from,to){let startText,endText,textBefore=state.sliceDoc(from-SearchMargin,from),textAfter=state.sliceDoc(to,to+SearchMargin),spaceBefore=/\s*$/.exec(textBefore)[0].length,spaceAfter=/^\s*/.exec(textAfter)[0].length,beforeOff=textBefore.length-spaceBefore;if(textBefore.slice(beforeOff-open.length,beforeOff)==open&&textAfter.slice(spaceAfter,spaceAfter+close.length)==close)return{open:{pos:from-spaceBefore,margin:spaceBefore&&1},close:{pos:to+spaceAfter,margin:spaceAfter&&1}};to-from<=2*SearchMargin?startText=endText=state.sliceDoc(from,to):(startText=state.sliceDoc(from,from+SearchMargin),endText=state.sliceDoc(to-SearchMargin,to));let startSpace=/^\s*/.exec(startText)[0].length,endSpace=/\s*$/.exec(endText)[0].length,endOff=endText.length-endSpace-close.length;return startText.slice(startSpace,startSpace+open.length)==open&&endText.slice(endOff,endOff+close.length)==close?{open:{pos:from+startSpace+open.length,margin:/\s/.test(startText.charAt(startSpace+open.length))?1:0},close:{pos:to-endSpace-close.length,margin:/\s/.test(endText.charAt(endOff-1))?1:0}}:null}(state,tokens[i],r.from,r.to)));if(2!=option&&!comments.every((c=>c)))return{changes:state.changes(ranges.map(((range,i)=>comments[i]?[]:[{from:range.from,insert:tokens[i].open+" "},{from:range.to,insert:" "+tokens[i].close}])))};if(1!=option&&comments.some((c=>c))){let changes=[];for(let comment,i=0;i<comments.length;i++)if(comment=comments[i]){let token=tokens[i],{open,close}=comment;changes.push({from:open.pos-token.open.length,to:open.pos+open.margin},{from:close.pos-close.margin,to:close.pos+token.close.length})}return{changes}}return null}function changeLineComment(option,state,ranges=state.selection.ranges){let lines=[],prevLine=-1;for(let{from,to}of ranges){let startI=lines.length,minIndent=1e9,token=getConfig(state,from).line;if(token){for(let pos=from;pos<=to;){let line=state.doc.lineAt(pos);if(line.from>prevLine&&(from==to||to>line.from)){prevLine=line.from;let indent=/^\s*/.exec(line.text)[0].length,empty=indent==line.length,comment=line.text.slice(indent,indent+token.length)==token?indent:-1;indent<line.text.length&&indent<minIndent&&(minIndent=indent),lines.push({line,comment,token,indent,empty,single:!1})}pos=line.to+1}if(minIndent<1e9)for(let i=startI;i<lines.length;i++)lines[i].indent<lines[i].line.text.length&&(lines[i].indent=minIndent);lines.length==startI+1&&(lines[startI].single=!0)}}if(2!=option&&lines.some((l=>l.comment<0&&(!l.empty||l.single)))){let changes=[];for(let{line,token,indent,empty,single}of lines)!single&&empty||changes.push({from:line.from+indent,insert:token+" "});let changeSet=state.changes(changes);return{changes:changeSet,selection:state.selection.map(changeSet,1)}}if(1!=option&&lines.some((l=>l.comment>=0))){let changes=[];for(let{line,comment,token}of lines)if(comment>=0){let from=line.from+comment,to=from+token.length;" "==line.text[to-line.from]&&to++,changes.push({from,to})}return{changes}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine:configs=>combineConfig(configs,{minDepth:100,newGroupDelay:500,joinToEvent:(_t,isAdjacent)=>isAdjacent},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(a,b)=>(tr,adj)=>a(tr,adj)||b(tr,adj)})});const historyField_=dist_StateField.define({create:()=>HistoryState.empty,update(state,tr){let config=tr.state.facet(historyConfig),fromHist=tr.annotation(fromHistory);if(fromHist){let selection=tr.docChanged?dist_EditorSelection.single(function changeEnd(changes){let end=0;return changes.iterChangedRanges(((_,to)=>end=to)),end}(tr.changes)):void 0,item=HistEvent.fromTransaction(tr,selection),from=fromHist.side,other=0==from?state.undone:state.done;return other=item?updateBranch(other,other.length,config.minDepth,item):addSelection(other,tr.startState.selection),new HistoryState(0==from?fromHist.rest:other,0==from?other:fromHist.rest)}let isolate=tr.annotation(isolateHistory);if("full"!=isolate&&"before"!=isolate||(state=state.isolate()),!1===tr.annotation(Transaction.addToHistory))return tr.changes.empty?state:state.addMapping(tr.changes.desc);let event=HistEvent.fromTransaction(tr),time=tr.annotation(Transaction.time),userEvent=tr.annotation(Transaction.userEvent);return event?state=state.addChanges(event,time,userEvent,config,tr):tr.selection&&(state=state.addSelection(tr.startState.selection,time,userEvent,config.newGroupDelay)),"full"!=isolate&&"after"!=isolate||(state=state.isolate()),state},toJSON:value=>({done:value.done.map((e=>e.toJSON())),undone:value.undone.map((e=>e.toJSON()))}),fromJSON:json=>new HistoryState(json.done.map(HistEvent.fromJSON),json.undone.map(HistEvent.fromJSON))});function dist_history(config={}){return[historyField_,historyConfig.of(config),EditorView.domEventHandlers({beforeinput(e,view){let command="historyUndo"==e.inputType?undo:"historyRedo"==e.inputType?redo:null;return!!command&&(e.preventDefault(),command(view))}})]}function cmd(side,selection){return function({state,dispatch}){if(!selection&&state.readOnly)return!1;let historyState=state.field(historyField_,!1);if(!historyState)return!1;let tr=historyState.pop(side,state,selection);return!!tr&&(dispatch(tr),!0)}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(changes,effects,mapped,startSelection,selectionsAfter){this.changes=changes,this.effects=effects,this.mapped=mapped,this.startSelection=startSelection,this.selectionsAfter=selectionsAfter}setSelAfter(after){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,after)}toJSON(){var _a,_b,_c;return{changes:null===(_a=this.changes)||void 0===_a?void 0:_a.toJSON(),mapped:null===(_b=this.mapped)||void 0===_b?void 0:_b.toJSON(),startSelection:null===(_c=this.startSelection)||void 0===_c?void 0:_c.toJSON(),selectionsAfter:this.selectionsAfter.map((s=>s.toJSON()))}}static fromJSON(json){return new HistEvent(json.changes&&ChangeSet.fromJSON(json.changes),[],json.mapped&&ChangeDesc.fromJSON(json.mapped),json.startSelection&&dist_EditorSelection.fromJSON(json.startSelection),json.selectionsAfter.map(dist_EditorSelection.fromJSON))}static fromTransaction(tr,selection){let effects=commands_dist_none;for(let invert of tr.startState.facet(invertedEffects)){let result=invert(tr);result.length&&(effects=effects.concat(result))}return!effects.length&&tr.changes.empty?null:new HistEvent(tr.changes.invert(tr.startState.doc),effects,void 0,selection||tr.startState.selection,commands_dist_none)}static selection(selections){return new HistEvent(void 0,commands_dist_none,void 0,void 0,selections)}}function updateBranch(branch,to,maxLen,newEvent){let start=to+1>maxLen+20?to-maxLen-1:0,newBranch=branch.slice(start,to);return newBranch.push(newEvent),newBranch}function conc(a,b){return a.length?b.length?a.concat(b):a:b}const commands_dist_none=[],MaxSelectionsPerEvent=200;function addSelection(branch,selection){if(branch.length){let lastEvent=branch[branch.length-1],sels=lastEvent.selectionsAfter.slice(Math.max(0,lastEvent.selectionsAfter.length-MaxSelectionsPerEvent));return sels.length&&sels[sels.length-1].eq(selection)?branch:(sels.push(selection),updateBranch(branch,branch.length-1,1e9,lastEvent.setSelAfter(sels)))}return[HistEvent.selection([selection])]}function popSelection(branch){let last=branch[branch.length-1],newBranch=branch.slice();return newBranch[branch.length-1]=last.setSelAfter(last.selectionsAfter.slice(0,last.selectionsAfter.length-1)),newBranch}function addMappingToBranch(branch,mapping){if(!branch.length)return branch;let length=branch.length,selections=commands_dist_none;for(;length;){let event=mapEvent(branch[length-1],mapping,selections);if(event.changes&&!event.changes.empty||event.effects.length){let result=branch.slice(0,length);return result[length-1]=event,result}mapping=event.mapped,length--,selections=event.selectionsAfter}return selections.length?[HistEvent.selection(selections)]:commands_dist_none}function mapEvent(event,mapping,extraSelections){let selections=conc(event.selectionsAfter.length?event.selectionsAfter.map((s=>s.map(mapping))):commands_dist_none,extraSelections);if(!event.changes)return HistEvent.selection(selections);let mappedChanges=event.changes.map(mapping),before=mapping.mapDesc(event.changes,!0),fullMapping=event.mapped?event.mapped.composeDesc(before):before;return new HistEvent(mappedChanges,dist_StateEffect.mapEffects(event.effects,mapping),fullMapping,event.startSelection.map(before),selections)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(done,undone,prevTime=0,prevUserEvent=void 0){this.done=done,this.undone=undone,this.prevTime=prevTime,this.prevUserEvent=prevUserEvent}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(event,time,userEvent,config,tr){let done=this.done,lastEvent=done[done.length-1];return done=lastEvent&&lastEvent.changes&&!lastEvent.changes.empty&&event.changes&&(!userEvent||joinableUserEvent.test(userEvent))&&(!lastEvent.selectionsAfter.length&&time-this.prevTime<config.newGroupDelay&&config.joinToEvent(tr,function isAdjacent(a,b){let ranges=[],isAdjacent=!1;return a.iterChangedRanges(((f,t)=>ranges.push(f,t))),b.iterChangedRanges(((_f,_t,f,t)=>{for(let i=0;i<ranges.length;){let from=ranges[i++],to=ranges[i++];t>=from&&f<=to&&(isAdjacent=!0)}})),isAdjacent}(lastEvent.changes,event.changes))||"input.type.compose"==userEvent)?updateBranch(done,done.length-1,config.minDepth,new HistEvent(event.changes.compose(lastEvent.changes),conc(event.effects,lastEvent.effects),lastEvent.mapped,lastEvent.startSelection,commands_dist_none)):updateBranch(done,done.length,config.minDepth,event),new HistoryState(done,commands_dist_none,time,userEvent)}addSelection(selection,time,userEvent,newGroupDelay){let last=this.done.length?this.done[this.done.length-1].selectionsAfter:commands_dist_none;return last.length>0&&time-this.prevTime<newGroupDelay&&userEvent==this.prevUserEvent&&userEvent&&/^select($|\.)/.test(userEvent)&&function eqSelectionShape(a,b){return a.ranges.length==b.ranges.length&&0===a.ranges.filter(((r,i)=>r.empty!=b.ranges[i].empty)).length}(last[last.length-1],selection)?this:new HistoryState(addSelection(this.done,selection),this.undone,time,userEvent)}addMapping(mapping){return new HistoryState(addMappingToBranch(this.done,mapping),addMappingToBranch(this.undone,mapping),this.prevTime,this.prevUserEvent)}pop(side,state,selection){let branch=0==side?this.done:this.undone;if(0==branch.length)return null;let event=branch[branch.length-1];if(selection&&event.selectionsAfter.length)return state.update({selection:event.selectionsAfter[event.selectionsAfter.length-1],annotations:fromHistory.of({side,rest:popSelection(branch)}),userEvent:0==side?"select.undo":"select.redo",scrollIntoView:!0});if(event.changes){let rest=1==branch.length?commands_dist_none:branch.slice(0,branch.length-1);return event.mapped&&(rest=addMappingToBranch(rest,event.mapped)),state.update({changes:event.changes,selection:event.startSelection,effects:event.effects,annotations:fromHistory.of({side,rest}),filter:!1,userEvent:0==side?"undo":"redo",scrollIntoView:!0})}return null}}HistoryState.empty=new HistoryState(commands_dist_none,commands_dist_none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(sel,by){return dist_EditorSelection.create(sel.ranges.map(by),sel.mainIndex)}function setSel(state,selection){return state.update({selection,scrollIntoView:!0,userEvent:"select"})}function moveSel({state,dispatch},how){let selection=updateSel(state.selection,how);return!selection.eq(state.selection)&&(dispatch(setSel(state,selection)),!0)}function rangeEnd(range,forward){return dist_EditorSelection.cursor(forward?range.to:range.from)}function cursorByChar(view,forward){return moveSel(view,(range=>range.empty?view.moveByChar(range,forward):rangeEnd(range,forward)))}function ltrAtCursor(view){return view.textDirectionAt(view.state.selection.main.head)==Direction.LTR}const cursorCharLeft=view=>cursorByChar(view,!ltrAtCursor(view)),cursorCharRight=view=>cursorByChar(view,ltrAtCursor(view));function cursorByGroup(view,forward){return moveSel(view,(range=>range.empty?view.moveByGroup(range,forward):rangeEnd(range,forward)))}"undefined"!=typeof Intl&&Intl.Segmenter;function interestingNode(state,node,bracketProp){if(node.type.prop(bracketProp))return!0;let len=node.to-node.from;return len&&(len>2||/[^\s,.;:]/.test(state.sliceDoc(node.from,node.to)))||node.firstChild}function moveBySyntax(state,start,forward){let match,newPos,pos=dist_syntaxTree(state).resolveInner(start.head),bracketProp=forward?dist_NodeProp.closedBy:dist_NodeProp.openedBy;for(let at=start.head;;){let next=forward?pos.childAfter(at):pos.childBefore(at);if(!next)break;interestingNode(state,next,bracketProp)?pos=next:at=forward?next.to:next.from}return newPos=pos.type.prop(bracketProp)&&(match=forward?matchBrackets(state,pos.from,1):matchBrackets(state,pos.to,-1))&&match.matched?forward?match.end.to:match.end.from:forward?pos.to:pos.from,dist_EditorSelection.cursor(newPos,forward?-1:1)}function cursorByLine(view,forward){return moveSel(view,(range=>{if(!range.empty)return rangeEnd(range,forward);let moved=view.moveVertically(range,forward);return moved.head!=range.head?moved:view.moveToLineBoundary(range,forward)}))}const cursorLineUp=view=>cursorByLine(view,!1),cursorLineDown=view=>cursorByLine(view,!0);function pageInfo(view){let height,selfScroll=view.scrollDOM.clientHeight<view.scrollDOM.scrollHeight-2,marginTop=0,marginBottom=0;if(selfScroll){for(let source of view.state.facet(EditorView.scrollMargins)){let margins=source(view);(null==margins?void 0:margins.top)&&(marginTop=Math.max(null==margins?void 0:margins.top,marginTop)),(null==margins?void 0:margins.bottom)&&(marginBottom=Math.max(null==margins?void 0:margins.bottom,marginBottom))}height=view.scrollDOM.clientHeight-marginTop-marginBottom}else height=(view.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop,marginBottom,selfScroll,height:Math.max(view.defaultLineHeight,height-5)}}function cursorByPage(view,forward){let effect,page=pageInfo(view),{state}=view,selection=updateSel(state.selection,(range=>range.empty?view.moveVertically(range,forward,page.height):rangeEnd(range,forward)));if(selection.eq(state.selection))return!1;if(page.selfScroll){let startPos=view.coordsAtPos(state.selection.main.head),scrollRect=view.scrollDOM.getBoundingClientRect(),scrollTop=scrollRect.top+page.marginTop,scrollBottom=scrollRect.bottom-page.marginBottom;startPos&&startPos.top>scrollTop&&startPos.bottom<scrollBottom&&(effect=EditorView.scrollIntoView(selection.main.head,{y:"start",yMargin:startPos.top-scrollTop}))}return view.dispatch(setSel(state,selection),{effects:effect}),!0}const cursorPageUp=view=>cursorByPage(view,!1),cursorPageDown=view=>cursorByPage(view,!0);function moveByLineBoundary(view,start,forward){let line=view.lineBlockAt(start.head),moved=view.moveToLineBoundary(start,forward);if(moved.head==start.head&&moved.head!=(forward?line.to:line.from)&&(moved=view.moveToLineBoundary(start,forward,!1)),!forward&&moved.head==line.from&&line.length){let space=/^\s*/.exec(view.state.sliceDoc(line.from,Math.min(line.from+100,line.to)))[0].length;space&&start.head!=line.from+space&&(moved=dist_EditorSelection.cursor(line.from+space))}return moved}function toMatchingBracket(state,dispatch,extend){let found=!1,selection=updateSel(state.selection,(range=>{let matching=matchBrackets(state,range.head,-1)||matchBrackets(state,range.head,1)||range.head>0&&matchBrackets(state,range.head-1,1)||range.head<state.doc.length&&matchBrackets(state,range.head+1,-1);if(!matching||!matching.end)return range;found=!0;let head=matching.start.from==range.head?matching.end.to:matching.end.from;return extend?dist_EditorSelection.range(range.anchor,head):dist_EditorSelection.cursor(head)}));return!!found&&(dispatch(setSel(state,selection)),!0)}function extendSel(view,how){let selection=updateSel(view.state.selection,(range=>{let head=how(range);return dist_EditorSelection.range(range.anchor,head.head,head.goalColumn,head.bidiLevel||void 0)}));return!selection.eq(view.state.selection)&&(view.dispatch(setSel(view.state,selection)),!0)}function selectByChar(view,forward){return extendSel(view,(range=>view.moveByChar(range,forward)))}const selectCharLeft=view=>selectByChar(view,!ltrAtCursor(view)),selectCharRight=view=>selectByChar(view,ltrAtCursor(view));function selectByGroup(view,forward){return extendSel(view,(range=>view.moveByGroup(range,forward)))}function selectByLine(view,forward){return extendSel(view,(range=>view.moveVertically(range,forward)))}const selectLineUp=view=>selectByLine(view,!1),selectLineDown=view=>selectByLine(view,!0);function selectByPage(view,forward){return extendSel(view,(range=>view.moveVertically(range,forward,pageInfo(view).height)))}const selectPageUp=view=>selectByPage(view,!1),selectPageDown=view=>selectByPage(view,!0),cursorDocStart=({state,dispatch})=>(dispatch(setSel(state,{anchor:0})),!0),cursorDocEnd=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.doc.length})),!0),selectDocStart=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.selection.main.anchor,head:0})),!0),selectDocEnd=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.selection.main.anchor,head:state.doc.length})),!0);function deleteBy(target,by){if(target.state.readOnly)return!1;let event="delete.selection",{state}=target,changes=state.changeByRange((range=>{let{from,to}=range;if(from==to){let towards=by(range);towards<from?(event="delete.backward",towards=skipAtomic(target,towards,!1)):towards>from&&(event="delete.forward",towards=skipAtomic(target,towards,!0)),from=Math.min(from,towards),to=Math.max(to,towards)}else from=skipAtomic(target,from,!1),to=skipAtomic(target,to,!0);return from==to?{range}:{changes:{from,to},range:dist_EditorSelection.cursor(from,from<range.head?-1:1)}}));return!changes.changes.empty&&(target.dispatch(state.update(changes,{scrollIntoView:!0,userEvent:event,effects:"delete.selection"==event?EditorView.announce.of(state.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(target,pos,forward){if(target instanceof EditorView)for(let ranges of target.state.facet(EditorView.atomicRanges).map((f=>f(target))))ranges.between(pos,pos,((from,to)=>{from<pos&&to>pos&&(pos=forward?to:from)}));return pos}const deleteByChar=(target,forward)=>deleteBy(target,(range=>{let before,targetPos,pos=range.from,{state}=target,line=state.doc.lineAt(pos);if(!forward&&pos>line.from&&pos<line.from+200&&!/[^ \t]/.test(before=line.text.slice(0,pos-line.from))){if("\t"==before[before.length-1])return pos-1;let drop=dist_countColumn(before,state.tabSize)%getIndentUnit(state)||getIndentUnit(state);for(let i=0;i<drop&&" "==before[before.length-1-i];i++)pos--;targetPos=pos}else targetPos=findClusterBreak(line.text,pos-line.from,forward,forward)+line.from,targetPos==pos&&line.number!=(forward?state.doc.lines:1)&&(targetPos+=forward?1:-1);return targetPos})),deleteCharBackward=view=>deleteByChar(view,!1),deleteCharForward=view=>deleteByChar(view,!0),deleteByGroup=(target,forward)=>deleteBy(target,(range=>{let pos=range.head,{state}=target,line=state.doc.lineAt(pos),categorize=state.charCategorizer(pos);for(let cat=null;;){if(pos==(forward?line.to:line.from)){pos==range.head&&line.number!=(forward?state.doc.lines:1)&&(pos+=forward?1:-1);break}let next=findClusterBreak(line.text,pos-line.from,forward)+line.from,nextChar=line.text.slice(Math.min(pos,next)-line.from,Math.max(pos,next)-line.from),nextCat=categorize(nextChar);if(null!=cat&&nextCat!=cat)break;" "==nextChar&&pos==range.head||(cat=nextCat),pos=next}return pos})),deleteGroupBackward=target=>deleteByGroup(target,!1);function selectedLineBlocks(state){let blocks=[],upto=-1;for(let range of state.selection.ranges){let startLine=state.doc.lineAt(range.from),endLine=state.doc.lineAt(range.to);if(range.empty||range.to!=endLine.from||(endLine=state.doc.lineAt(range.to-1)),upto>=startLine.number){let prev=blocks[blocks.length-1];prev.to=endLine.to,prev.ranges.push(range)}else blocks.push({from:startLine.from,to:endLine.to,ranges:[range]});upto=endLine.number+1}return blocks}function moveLine(state,dispatch,forward){if(state.readOnly)return!1;let changes=[],ranges=[];for(let block of selectedLineBlocks(state)){if(forward?block.to==state.doc.length:0==block.from)continue;let nextLine=state.doc.lineAt(forward?block.to+1:block.from-1),size=nextLine.length+1;if(forward){changes.push({from:block.to,to:nextLine.to},{from:block.from,insert:nextLine.text+state.lineBreak});for(let r of block.ranges)ranges.push(dist_EditorSelection.range(Math.min(state.doc.length,r.anchor+size),Math.min(state.doc.length,r.head+size)))}else{changes.push({from:nextLine.from,to:block.from},{from:block.to,insert:state.lineBreak+nextLine.text});for(let r of block.ranges)ranges.push(dist_EditorSelection.range(r.anchor-size,r.head-size))}}return!!changes.length&&(dispatch(state.update({changes,scrollIntoView:!0,selection:dist_EditorSelection.create(ranges,state.selection.mainIndex),userEvent:"move.line"})),!0)}function copyLine(state,dispatch,forward){if(state.readOnly)return!1;let changes=[];for(let block of selectedLineBlocks(state))forward?changes.push({from:block.from,insert:state.doc.slice(block.from,block.to)+state.lineBreak}):changes.push({from:block.to,insert:state.lineBreak+state.doc.slice(block.from,block.to)});return dispatch(state.update({changes,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(atEof){return({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange((range=>{let{from,to}=range,line=state.doc.lineAt(from),explode=!atEof&&from==to&&function isBetweenBrackets(state,pos){if(/\(\)|\[\]|\{\}/.test(state.sliceDoc(pos-1,pos+1)))return{from:pos,to:pos};let closedBy,context=dist_syntaxTree(state).resolveInner(pos),before=context.childBefore(pos),after=context.childAfter(pos);return before&&after&&before.to<=pos&&after.from>=pos&&(closedBy=before.type.prop(dist_NodeProp.closedBy))&&closedBy.indexOf(after.name)>-1&&state.doc.lineAt(before.to).from==state.doc.lineAt(after.from).from&&!/\S/.test(state.sliceDoc(before.to,after.from))?{from:before.to,to:after.from}:null}(state,from);atEof&&(from=to=(to<=line.to?line:state.doc.lineAt(to)).to);let cx=new IndentContext(state,{simulateBreak:from,simulateDoubleBreak:!!explode}),indent=getIndentation(cx,from);for(null==indent&&(indent=dist_countColumn(/^\s*/.exec(state.doc.lineAt(from).text)[0],state.tabSize));to<line.to&&/\s/.test(line.text[to-line.from]);)to++;explode?({from,to}=explode):from>line.from&&from<line.from+100&&!/\S/.test(line.text.slice(0,from))&&(from=line.from);let insert=["",indentString(state,indent)];return explode&&insert.push(indentString(state,cx.lineIndent(line.from,-1))),{changes:{from,to,insert:Text.of(insert)},range:dist_EditorSelection.cursor(from+1+insert[1].length)}}));return dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(state,f){let atLine=-1;return state.changeByRange((range=>{let changes=[];for(let pos=range.from;pos<=range.to;){let line=state.doc.lineAt(pos);line.number>atLine&&(range.empty||range.to>line.from)&&(f(line,changes,range),atLine=line.number),pos=line.to+1}let changeSet=state.changes(changes);return{changes,range:dist_EditorSelection.range(changeSet.mapPos(range.anchor,1),changeSet.mapPos(range.head,1))}}))}const indentMore=({state,dispatch})=>!state.readOnly&&(dispatch(state.update(changeBySelectedLine(state,((line,changes)=>{changes.push({from:line.from,insert:state.facet(indentUnit)})})),{userEvent:"input.indent"})),!0),indentLess=({state,dispatch})=>!state.readOnly&&(dispatch(state.update(changeBySelectedLine(state,((line,changes)=>{let space=/^\s*/.exec(line.text)[0];if(!space)return;let col=dist_countColumn(space,state.tabSize),keep=0,insert=indentString(state,Math.max(0,col-getIndentUnit(state)));for(;keep<space.length&&keep<insert.length&&space.charCodeAt(keep)==insert.charCodeAt(keep);)keep++;changes.push({from:line.from+keep,to:line.from+space.length,insert:insert.slice(keep)})})),{userEvent:"delete.dedent"})),!0),standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:view=>cursorByGroup(view,!ltrAtCursor(view)),shift:view=>selectByGroup(view,!ltrAtCursor(view)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:view=>moveSel(view,(range=>moveByLineBoundary(view,range,!ltrAtCursor(view)))),shift:view=>extendSel(view,(range=>moveByLineBoundary(view,range,!ltrAtCursor(view)))),preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:view=>cursorByGroup(view,ltrAtCursor(view)),shift:view=>selectByGroup(view,ltrAtCursor(view)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:view=>moveSel(view,(range=>moveByLineBoundary(view,range,ltrAtCursor(view)))),shift:view=>extendSel(view,(range=>moveByLineBoundary(view,range,ltrAtCursor(view)))),preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:view=>moveSel(view,(range=>moveByLineBoundary(view,range,!1))),shift:view=>extendSel(view,(range=>moveByLineBoundary(view,range,!1))),preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:view=>moveSel(view,(range=>moveByLineBoundary(view,range,!0))),shift:view=>extendSel(view,(range=>moveByLineBoundary(view,range,!0))),preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:({state,dispatch})=>(dispatch(state.update({selection:{anchor:0,head:state.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:target=>deleteByGroup(target,!0)},{mac:"Mod-Backspace",run:view=>deleteBy(view,(range=>{let lineStart=view.moveToLineBoundary(range,!1).head;return range.head>lineStart?lineStart:Math.max(0,range.head-1)}))},{mac:"Mod-Delete",run:view=>deleteBy(view,(range=>{let lineStart=view.moveToLineBoundary(range,!0).head;return range.head<lineStart?lineStart:Math.min(view.state.doc.length,range.head+1)}))}].concat([{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:view=>moveSel(view,(range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).from,1))),shift:view=>extendSel(view,(range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).from)))},{key:"Ctrl-e",run:view=>moveSel(view,(range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).to,-1))),shift:view=>extendSel(view,(range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).to)))},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:view=>deleteBy(view,(range=>{let lineEnd=view.lineBlockAt(range.head).to;return range.head<lineEnd?lineEnd:Math.min(view.state.doc.length,range.head+1)}))},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange((range=>({changes:{from:range.from,to:range.to,insert:Text.of(["",""])},range:dist_EditorSelection.cursor(range.from)})));return dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange((range=>{if(!range.empty||0==range.from||range.from==state.doc.length)return{range};let pos=range.from,line=state.doc.lineAt(pos),from=pos==line.from?pos-1:findClusterBreak(line.text,pos-line.from,!1)+line.from,to=pos==line.to?pos+1:findClusterBreak(line.text,pos-line.from,!0)+line.from;return{changes:{from,to,insert:state.doc.slice(pos,to).append(state.doc.slice(from,pos))},range:dist_EditorSelection.cursor(to)}}));return!changes.changes.empty&&(dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:cursorPageDown}].map((b=>({mac:b.key,run:b.run,shift:b.shift})))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:view=>moveSel(view,(range=>moveBySyntax(view.state,range,!ltrAtCursor(view)))),shift:view=>extendSel(view,(range=>moveBySyntax(view.state,range,!ltrAtCursor(view))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:view=>moveSel(view,(range=>moveBySyntax(view.state,range,ltrAtCursor(view)))),shift:view=>extendSel(view,(range=>moveBySyntax(view.state,range,ltrAtCursor(view))))},{key:"Alt-ArrowUp",run:({state,dispatch})=>moveLine(state,dispatch,!1)},{key:"Shift-Alt-ArrowUp",run:({state,dispatch})=>copyLine(state,dispatch,!1)},{key:"Alt-ArrowDown",run:({state,dispatch})=>moveLine(state,dispatch,!0)},{key:"Shift-Alt-ArrowDown",run:({state,dispatch})=>copyLine(state,dispatch,!0)},{key:"Escape",run:({state,dispatch})=>{let cur=state.selection,selection=null;return cur.ranges.length>1?selection=dist_EditorSelection.create([cur.main]):cur.main.empty||(selection=dist_EditorSelection.create([dist_EditorSelection.cursor(cur.main.head)])),!!selection&&(dispatch(setSel(state,selection)),!0)}},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:({state,dispatch})=>{let ranges=selectedLineBlocks(state).map((({from,to})=>dist_EditorSelection.range(from,Math.min(to+1,state.doc.length))));return dispatch(state.update({selection:dist_EditorSelection.create(ranges),userEvent:"select"})),!0}},{key:"Mod-i",run:({state,dispatch})=>{let selection=updateSel(state.selection,(range=>{var _a;for(let cur=dist_syntaxTree(state).resolveStack(range.from,1);cur;cur=cur.next){let{node}=cur;if((node.from<range.from&&node.to>=range.to||node.to>range.to&&node.from<=range.from)&&(null===(_a=node.parent)||void 0===_a?void 0:_a.parent))return dist_EditorSelection.range(node.to,node.from)}return range}));return dispatch(setSel(state,selection)),!0},preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:({state,dispatch})=>{if(state.readOnly)return!1;let updated=Object.create(null),context=new IndentContext(state,{overrideIndentation:start=>{let found=updated[start];return null==found?-1:found}}),changes=changeBySelectedLine(state,((line,changes,range)=>{let indent=getIndentation(context,line.from);if(null==indent)return;/\S/.test(line.text)||(indent=0);let cur=/^\s*/.exec(line.text)[0],norm=indentString(state,indent);(cur!=norm||range.from<line.from+cur.length)&&(updated[line.from]=indent,changes.push({from:line.from,to:line.from+cur.length,insert:norm}))}));return changes.changes.empty||dispatch(state.update(changes,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:view=>{if(view.state.readOnly)return!1;let{state}=view,changes=state.changes(selectedLineBlocks(state).map((({from,to})=>(from>0?from--:to<state.doc.length&&to++,{from,to})))),selection=updateSel(state.selection,(range=>view.moveVertically(range,!0))).map(changes);return view.dispatch({changes,selection,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state,dispatch})=>toMatchingBracket(state,dispatch,!1)},{key:"Mod-/",run:target=>{let{state}=target,line=state.doc.lineAt(state.selection.main.from),config=getConfig(target.state,line.from);return config.line?toggleLineComment(target):!!config.block&&toggleBlockCommentByLine(target)}},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap);__webpack_require__("./node_modules/intersection-observer/intersection-observer.js");const dist_module=react["undefined"!=typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"];const _intersectionObserver=new Map;function getIntersectionObserver(options){const{root,...keys}=options,key=JSON.stringify(keys);let base=_intersectionObserver.get(root);return base||(base={},_intersectionObserver.set(root,base)),base[key]?base[key]:base[key]=function createIntersectionObserver({root=null,pollInterval=null,useMutationObserver=!1,rootMargin="0px 0px 0px 0px",threshold=0}){const callbacks=new Set;if("undefined"==typeof IntersectionObserver)return null;const observer=new IntersectionObserver((entries=>{for(const callback of callbacks)callback(entries,observer)}),{root,rootMargin,threshold});return observer.POLL_INTERVAL=pollInterval,observer.USE_MUTATION_OBSERVER=useMutationObserver,{observer,getListeners:()=>callbacks,subscribe:callback=>callbacks.add(callback),unsubscribe:callback=>callbacks.delete(callback)}}(options)}const intersection_observer_dist_module=function useIntersectionObserver(target,options={}){const{root=null,pollInterval=null,useMutationObserver=!1,rootMargin="0px 0px 0px 0px",threshold=0,initialIsIntersecting=!1}=options,[entry,setEntry]=react.useState((()=>({boundingClientRect:null,intersectionRatio:0,intersectionRect:null,isIntersecting:initialIsIntersecting,rootBounds:null,target:null,time:0}))),[observer,setObserver]=react.useState((()=>getIntersectionObserver({root,pollInterval,useMutationObserver,rootMargin,threshold})));return react.useEffect((()=>{const observer=getIntersectionObserver({root,pollInterval,useMutationObserver,rootMargin,threshold});setObserver(observer)}),[root,rootMargin,pollInterval,useMutationObserver,JSON.stringify(threshold)]),dist_module((()=>{const targetEl=target&&"current"in target?target.current:target;if(!observer||!targetEl)return;let didUnsubscribe=!1;observer.observer.observe(targetEl);const callback=entries=>{if(!didUnsubscribe)for(let i=0;i<entries.length;i++){const entry=entries[i];entry.target===targetEl&&setEntry(entry)}};return observer.subscribe(callback),()=>{didUnsubscribe=!0,observer.observer.unobserve(targetEl),observer.unsubscribe(callback)}}),[target,observer]),entry};var process=__webpack_require__("./node_modules/process/browser.js");class Stack{constructor(p,stack,state,reducePos,pos,score,buffer,bufferBase,curContext,lookAhead=0,parent){this.p=p,this.stack=stack,this.state=state,this.reducePos=reducePos,this.pos=pos,this.score=score,this.buffer=buffer,this.bufferBase=bufferBase,this.curContext=curContext,this.lookAhead=lookAhead,this.parent=parent}toString(){return`[${this.stack.filter(((_,i)=>i%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(p,state,pos=0){let cx=p.parser.context;return new Stack(p,[],state,pos,pos,0,[],0,cx?new StackContext(cx,cx.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(state,start){this.stack.push(this.state,start,this.bufferBase+this.buffer.length),this.state=state}reduce(action){var _a;let depth=action>>19,type=65535&action,{parser}=this.p,dPrec=parser.dynamicPrecedence(type);if(dPrec&&(this.score+=dPrec),0==depth)return this.pushState(parser.getGoto(this.state,type,!0),this.reducePos),type<parser.minRepeatTerm&&this.storeNode(type,this.reducePos,this.reducePos,4,!0),void this.reduceContext(type,this.reducePos);let base=this.stack.length-3*(depth-1)-(262144&action?6:0),start=base?this.stack[base-2]:this.p.ranges[0].from,size=this.reducePos-start;size>=2e3&&!(null===(_a=this.p.parser.nodeSet.types[type])||void 0===_a?void 0:_a.isAnonymous)&&(start==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=size):this.p.lastBigReductionSize<size&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=start,this.p.lastBigReductionSize=size));let bufferBase=base?this.stack[base-1]:0,count=this.bufferBase+this.buffer.length-bufferBase;if(type<parser.minRepeatTerm||131072&action){let pos=parser.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(type,start,pos,count+4,!0)}if(262144&action)this.state=this.stack[base];else{let baseStateID=this.stack[base-3];this.state=parser.getGoto(baseStateID,type,!0)}for(;this.stack.length>base;)this.stack.pop();this.reduceContext(type,start)}storeNode(term,start,end,size=4,isReduce=!1){if(0==term&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let cur=this,top=this.buffer.length;if(0==top&&cur.parent&&(top=cur.bufferBase-cur.parent.bufferBase,cur=cur.parent),top>0&&0==cur.buffer[top-4]&&cur.buffer[top-1]>-1){if(start==end)return;if(cur.buffer[top-2]>=start)return void(cur.buffer[top-2]=end)}}if(isReduce&&this.pos!=end){let index=this.buffer.length;if(index>0&&0!=this.buffer[index-4])for(;index>0&&this.buffer[index-2]>end;)this.buffer[index]=this.buffer[index-4],this.buffer[index+1]=this.buffer[index-3],this.buffer[index+2]=this.buffer[index-2],this.buffer[index+3]=this.buffer[index-1],index-=4,size>4&&(size-=4);this.buffer[index]=term,this.buffer[index+1]=start,this.buffer[index+2]=end,this.buffer[index+3]=size}else this.buffer.push(term,start,end,size)}shift(action,type,start,end){if(131072&action)this.pushState(65535&action,this.pos);else if(0==(262144&action)){let nextState=action,{parser}=this.p;(end>this.pos||type<=parser.maxNode)&&(this.pos=end,parser.stateFlag(nextState,1)||(this.reducePos=end)),this.pushState(nextState,start),this.shiftContext(type,start),type<=parser.maxNode&&this.buffer.push(type,start,end,4)}else this.pos=end,this.shiftContext(type,start),type<=this.p.parser.maxNode&&this.buffer.push(type,start,end,4)}apply(action,next,nextStart,nextEnd){65536&action?this.reduce(action):this.shift(action,next,nextStart,nextEnd)}useNode(value,next){let index=this.p.reused.length-1;(index<0||this.p.reused[index]!=value)&&(this.p.reused.push(value),index++);let start=this.pos;this.reducePos=this.pos=start+value.length,this.pushState(next,start),this.buffer.push(index,start,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,value,this,this.p.stream.reset(this.pos-value.length)))}split(){let parent=this,off=parent.buffer.length;for(;off>0&&parent.buffer[off-2]>parent.reducePos;)off-=4;let buffer=parent.buffer.slice(off),base=parent.bufferBase+off;for(;parent&&base==parent.bufferBase;)parent=parent.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,buffer,base,this.curContext,this.lookAhead,parent)}recoverByDelete(next,nextEnd){let isNode=next<=this.p.parser.maxNode;isNode&&this.storeNode(next,this.pos,nextEnd,4),this.storeNode(0,this.pos,nextEnd,isNode?8:4),this.pos=this.reducePos=nextEnd,this.score-=190}canShift(term){for(let sim=new SimulatedStack(this);;){let action=this.p.parser.stateSlot(sim.state,4)||this.p.parser.hasAction(sim.state,term);if(0==action)return!1;if(0==(65536&action))return!0;sim.reduce(action)}}recoverByInsert(next){if(this.stack.length>=300)return[];let nextStates=this.p.parser.nextStates(this.state);if(nextStates.length>8||this.stack.length>=120){let best=[];for(let s,i=0;i<nextStates.length;i+=2)(s=nextStates[i+1])!=this.state&&this.p.parser.hasAction(s,next)&&best.push(nextStates[i],s);if(this.stack.length<120)for(let i=0;best.length<8&&i<nextStates.length;i+=2){let s=nextStates[i+1];best.some(((v,i)=>1&i&&v==s))||best.push(nextStates[i],s)}nextStates=best}let result=[];for(let i=0;i<nextStates.length&&result.length<4;i+=2){let s=nextStates[i+1];if(s==this.state)continue;let stack=this.split();stack.pushState(s,this.pos),stack.storeNode(0,stack.pos,stack.pos,4,!0),stack.shiftContext(nextStates[i],this.pos),stack.reducePos=this.pos,stack.score-=200,result.push(stack)}return result}forceReduce(){let{parser}=this.p,reduce=parser.stateSlot(this.state,5);if(0==(65536&reduce))return!1;if(!parser.validAction(this.state,reduce)){let depth=reduce>>19,term=65535&reduce,target=this.stack.length-3*depth;if(target<0||parser.getGoto(this.stack[target],term,!1)<0){let backup=this.findForcedReduction();if(null==backup)return!1;reduce=backup}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(reduce),!0}findForcedReduction(){let{parser}=this.p,seen=[],explore=(state,depth)=>{if(!seen.includes(state))return seen.push(state),parser.allActions(state,(action=>{if(393216&action);else if(65536&action){let rDepth=(action>>19)-depth;if(rDepth>1){let term=65535&action,target=this.stack.length-3*rDepth;if(target>=0&&parser.getGoto(this.stack[target],term,!1)>=0)return rDepth<<19|65536|term}}else{let found=explore(action,depth+1);if(null!=found)return found}}))};return explore(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser}=this.p;return 65535==parser.data[parser.stateSlot(this.state,1)]&&!parser.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(other){if(this.state!=other.state||this.stack.length!=other.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=other.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(dialectID){return this.p.parser.dialect.flags[dialectID]}shiftContext(term,start){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,term,this,this.p.stream.reset(start)))}reduceContext(term,start){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,term,this,this.p.stream.reset(start)))}emitContext(){let last=this.buffer.length-1;(last<0||-3!=this.buffer[last])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let last=this.buffer.length-1;(last<0||-4!=this.buffer[last])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(context){if(context!=this.curContext.context){let newCx=new StackContext(this.curContext.tracker,context);newCx.hash!=this.curContext.hash&&this.emitContext(),this.curContext=newCx}}setLookAhead(lookAhead){lookAhead>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=lookAhead)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(tracker,context){this.tracker=tracker,this.context=context,this.hash=tracker.strict?tracker.hash(context):0}}class SimulatedStack{constructor(start){this.start=start,this.state=start.state,this.stack=start.stack,this.base=this.stack.length}reduce(action){let term=65535&action,depth=action>>19;0==depth?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(depth-1);let goto=this.start.p.parser.getGoto(this.stack[this.base-3],term,!0);this.state=goto}}class StackBufferCursor{constructor(stack,pos,index){this.stack=stack,this.pos=pos,this.index=index,this.buffer=stack.buffer,0==this.index&&this.maybeNext()}static create(stack,pos=stack.bufferBase+stack.buffer.length){return new StackBufferCursor(stack,pos,pos-stack.bufferBase)}maybeNext(){let next=this.stack.parent;null!=next&&(this.index=this.stack.bufferBase-next.bufferBase,this.stack=next,this.buffer=next.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(input,Type=Uint16Array){if("string"!=typeof input)return input;let array=null;for(let pos=0,out=0;pos<input.length;){let value=0;for(;;){let next=input.charCodeAt(pos++),stop=!1;if(126==next){value=65535;break}next>=92&&next--,next>=34&&next--;let digit=next-32;if(digit>=46&&(digit-=46,stop=!0),value+=digit,stop)break;value*=46}array?array[out++]=value:array=new Type(value)}return array}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(input,ranges){this.input=input,this.ranges=ranges,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=ranges[0].from,this.range=ranges[0],this.end=ranges[ranges.length-1].to,this.readNext()}resolveOffset(offset,assoc){let range=this.range,index=this.rangeIndex,pos=this.pos+offset;for(;pos<range.from;){if(!index)return null;let next=this.ranges[--index];pos-=range.from-next.to,range=next}for(;assoc<0?pos>range.to:pos>=range.to;){if(index==this.ranges.length-1)return null;let next=this.ranges[++index];pos+=next.from-range.to,range=next}return pos}clipPos(pos){if(pos>=this.range.from&&pos<this.range.to)return pos;for(let range of this.ranges)if(range.to>pos)return Math.max(pos,range.from);return this.end}peek(offset){let pos,result,idx=this.chunkOff+offset;if(idx>=0&&idx<this.chunk.length)pos=this.pos+offset,result=this.chunk.charCodeAt(idx);else{let resolved=this.resolveOffset(offset,1);if(null==resolved)return-1;if(pos=resolved,pos>=this.chunk2Pos&&pos<this.chunk2Pos+this.chunk2.length)result=this.chunk2.charCodeAt(pos-this.chunk2Pos);else{let i=this.rangeIndex,range=this.range;for(;range.to<=pos;)range=this.ranges[++i];this.chunk2=this.input.chunk(this.chunk2Pos=pos),pos+this.chunk2.length>range.to&&(this.chunk2=this.chunk2.slice(0,range.to-pos)),result=this.chunk2.charCodeAt(0)}}return pos>=this.token.lookAhead&&(this.token.lookAhead=pos+1),result}acceptToken(token,endOffset=0){let end=endOffset?this.resolveOffset(endOffset,-1):this.pos;if(null==end||end<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=token,this.token.end=end}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk,chunkPos}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=chunk,this.chunk2Pos=chunkPos,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let nextChunk=this.input.chunk(this.pos),end=this.pos+nextChunk.length;this.chunk=end>this.range.to?nextChunk.slice(0,this.range.to-this.pos):nextChunk,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(n=1){for(this.chunkOff+=n;this.pos+n>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();n-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=n,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(pos,token){if(token?(this.token=token,token.start=pos,token.lookAhead=pos+1,token.value=token.extended=-1):this.token=nullToken,this.pos!=pos){if(this.pos=pos,pos==this.end)return this.setDone(),this;for(;pos<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;pos>=this.range.to;)this.range=this.ranges[++this.rangeIndex];pos>=this.chunkPos&&pos<this.chunkPos+this.chunk.length?this.chunkOff=pos-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(from,to){if(from>=this.chunkPos&&to<=this.chunkPos+this.chunk.length)return this.chunk.slice(from-this.chunkPos,to-this.chunkPos);if(from>=this.chunk2Pos&&to<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(from-this.chunk2Pos,to-this.chunk2Pos);if(from>=this.range.from&&to<=this.range.to)return this.input.read(from,to);let result="";for(let r of this.ranges){if(r.from>=to)break;r.to>from&&(result+=this.input.read(Math.max(r.from,from),Math.min(r.to,to)))}return result}}class TokenGroup{constructor(data,id){this.data=data,this.id=id}token(input,stack){let{parser}=stack.p;dist_readToken(this.data,input,stack,this.id,parser.data,parser.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(data,precTable,elseToken){this.precTable=precTable,this.elseToken=elseToken,this.data="string"==typeof data?decodeArray(data):data}token(input,stack){let start=input.pos,skipped=0;for(;;){let atEof=input.next<0,nextPos=input.resolveOffset(1,1);if(dist_readToken(this.data,input,stack,0,this.data,this.precTable),input.token.value>-1)break;if(null==this.elseToken)return;if(atEof||skipped++,null==nextPos)break;input.reset(nextPos,input.token)}skipped&&(input.reset(start,input.token),input.acceptToken(this.elseToken,skipped))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(token,options={}){this.token=token,this.contextual=!!options.contextual,this.fallback=!!options.fallback,this.extend=!!options.extend}}function dist_readToken(data,input,stack,group,precTable,precOffset){let state=0,groupMask=1<<group,{dialect}=stack.p.parser;scan:for(;0!=(groupMask&data[state]);){let accEnd=data[state+1];for(let i=state+3;i<accEnd;i+=2)if((data[i+1]&groupMask)>0){let term=data[i];if(dialect.allows(term)&&(-1==input.token.value||input.token.value==term||overrides(term,input.token.value,precTable,precOffset))){input.acceptToken(term);break}}let next=input.next,low=0,high=data[state+2];if(!(input.next<0&&high>low&&65535==data[accEnd+3*high-3]&&65535==data[accEnd+3*high-3])){for(;low<high;){let mid=low+high>>1,index=accEnd+mid+(mid<<1),from=data[index],to=data[index+1]||65536;if(next<from)high=mid;else{if(!(next>=to)){state=data[index+2],input.advance();continue scan}low=mid+1}}break}state=data[accEnd+3*high-1]}}function findOffset(data,start,term){for(let next,i=start;65535!=(next=data[i]);i++)if(next==term)return i-start;return-1}function overrides(token,prev,tableData,tableOffset){let iPrev=findOffset(tableData,tableOffset,prev);return iPrev<0||findOffset(tableData,tableOffset,token)<iPrev}const verbose=void 0!==process&&process.env&&/\bparse\b/.test(process.env.LOG);let stackIDs=null;function cutAt(tree,pos,side){let cursor=tree.cursor(IterMode.IncludeAnonymous);for(cursor.moveTo(pos);;)if(!(side<0?cursor.childBefore(pos):cursor.childAfter(pos)))for(;;){if((side<0?cursor.to<pos:cursor.from>pos)&&!cursor.type.isError)return side<0?Math.max(0,Math.min(cursor.to-1,pos-25)):Math.min(tree.length,Math.max(cursor.from+1,pos+25));if(side<0?cursor.prevSibling():cursor.nextSibling())break;if(!cursor.parent())return side<0?0:tree.length}}class dist_FragmentCursor{constructor(fragments,nodeSet){this.fragments=fragments,this.nodeSet=nodeSet,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let fr=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(fr){for(this.safeFrom=fr.openStart?cutAt(fr.tree,fr.from+fr.offset,1)-fr.offset:fr.from,this.safeTo=fr.openEnd?cutAt(fr.tree,fr.to+fr.offset,-1)-fr.offset:fr.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(fr.tree),this.start.push(-fr.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(pos){if(pos<this.nextStart)return null;for(;this.fragment&&this.safeTo<=pos;)this.nextFragment();if(!this.fragment)return null;for(;;){let last=this.trees.length-1;if(last<0)return this.nextFragment(),null;let top=this.trees[last],index=this.index[last];if(index==top.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let next=top.children[index],start=this.start[last]+top.positions[index];if(start>pos)return this.nextStart=start,null;if(next instanceof dist_Tree){if(start==pos){if(start<this.safeFrom)return null;let end=start+next.length;if(end<=this.safeTo){let lookAhead=next.prop(dist_NodeProp.lookAhead);if(!lookAhead||end+lookAhead<this.fragment.to)return next}}this.index[last]++,start+next.length>=Math.max(this.safeFrom,pos)&&(this.trees.push(next),this.start.push(start),this.index.push(0))}else this.index[last]++,this.nextStart=start+next.length}}}class TokenCache{constructor(parser,stream){this.stream=stream,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=parser.tokenizers.map((_=>new CachedToken))}getActions(stack){let actionIndex=0,main=null,{parser}=stack.p,{tokenizers}=parser,mask=parser.stateSlot(stack.state,3),context=stack.curContext?stack.curContext.hash:0,lookAhead=0;for(let i=0;i<tokenizers.length;i++){if(0==(1<<i&mask))continue;let tokenizer=tokenizers[i],token=this.tokens[i];if((!main||tokenizer.fallback)&&((tokenizer.contextual||token.start!=stack.pos||token.mask!=mask||token.context!=context)&&(this.updateCachedToken(token,tokenizer,stack),token.mask=mask,token.context=context),token.lookAhead>token.end+25&&(lookAhead=Math.max(token.lookAhead,lookAhead)),0!=token.value)){let startIndex=actionIndex;if(token.extended>-1&&(actionIndex=this.addActions(stack,token.extended,token.end,actionIndex)),actionIndex=this.addActions(stack,token.value,token.end,actionIndex),!tokenizer.extend&&(main=token,actionIndex>startIndex))break}}for(;this.actions.length>actionIndex;)this.actions.pop();return lookAhead&&stack.setLookAhead(lookAhead),main||stack.pos!=this.stream.end||(main=new CachedToken,main.value=stack.p.parser.eofTerm,main.start=main.end=stack.pos,actionIndex=this.addActions(stack,main.value,main.end,actionIndex)),this.mainToken=main,this.actions}getMainToken(stack){if(this.mainToken)return this.mainToken;let main=new CachedToken,{pos,p}=stack;return main.start=pos,main.end=Math.min(pos+1,p.stream.end),main.value=pos==p.stream.end?p.parser.eofTerm:0,main}updateCachedToken(token,tokenizer,stack){let start=this.stream.clipPos(stack.pos);if(tokenizer.token(this.stream.reset(start,token),stack),token.value>-1){let{parser}=stack.p;for(let i=0;i<parser.specialized.length;i++)if(parser.specialized[i]==token.value){let result=parser.specializers[i](this.stream.read(token.start,token.end),stack);if(result>=0&&stack.p.parser.dialect.allows(result>>1)){0==(1&result)?token.value=result>>1:token.extended=result>>1;break}}}else token.value=0,token.end=this.stream.clipPos(start+1)}putAction(action,token,end,index){for(let i=0;i<index;i+=3)if(this.actions[i]==action)return index;return this.actions[index++]=action,this.actions[index++]=token,this.actions[index++]=end,index}addActions(stack,token,end,index){let{state}=stack,{parser}=stack.p,{data}=parser;for(let set=0;set<2;set++)for(let i=parser.stateSlot(state,set?2:1);;i+=3){if(65535==data[i]){if(1!=data[i+1]){0==index&&2==data[i+1]&&(index=this.putAction(pair(data,i+2),token,end,index));break}i=pair(data,i+2)}data[i]==token&&(index=this.putAction(pair(data,i+1),token,end,index))}return index}}class dist_Parse{constructor(parser,input,fragments,ranges){this.parser=parser,this.input=input,this.ranges=ranges,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(input,ranges),this.tokens=new TokenCache(parser,this.stream),this.topTerm=parser.top[1];let{from}=ranges[0];this.stacks=[Stack.start(this,parser.top[0],from)],this.fragments=fragments.length&&this.stream.end-from>4*parser.bufferLength?new dist_FragmentCursor(fragments,parser.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let stopped,stoppedTokens,stacks=this.stacks,pos=this.minStackPos,newStacks=this.stacks=[];if(this.bigReductionCount>300&&1==stacks.length){let[s]=stacks;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<stacks.length;i++){let stack=stacks[i];for(;;){if(this.tokens.mainToken=null,stack.pos>pos)newStacks.push(stack);else{if(this.advanceStack(stack,newStacks,stacks))continue;{stopped||(stopped=[],stoppedTokens=[]),stopped.push(stack);let tok=this.tokens.getMainToken(stack);stoppedTokens.push(tok.value,tok.end)}}break}}if(!newStacks.length){let finished=stopped&&function findFinished(stacks){let best=null;for(let stack of stacks){let stopped=stack.p.stoppedAt;(stack.pos==stack.p.stream.end||null!=stopped&&stack.pos>stopped)&&stack.p.parser.stateFlag(stack.state,2)&&(!best||best.score<stack.score)&&(best=stack)}return best}(stopped);if(finished)return verbose&&console.log("Finish with "+this.stackID(finished)),this.stackToTree(finished);if(this.parser.strict)throw verbose&&stopped&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+pos);this.recovering||(this.recovering=5)}if(this.recovering&&stopped){let finished=null!=this.stoppedAt&&stopped[0].pos>this.stoppedAt?stopped[0]:this.runRecovery(stopped,stoppedTokens,newStacks);if(finished)return verbose&&console.log("Force-finish "+this.stackID(finished)),this.stackToTree(finished.forceAll())}if(this.recovering){let maxRemaining=1==this.recovering?1:3*this.recovering;if(newStacks.length>maxRemaining)for(newStacks.sort(((a,b)=>b.score-a.score));newStacks.length>maxRemaining;)newStacks.pop();newStacks.some((s=>s.reducePos>pos))&&this.recovering--}else if(newStacks.length>1){outer:for(let i=0;i<newStacks.length-1;i++){let stack=newStacks[i];for(let j=i+1;j<newStacks.length;j++){let other=newStacks[j];if(stack.sameState(other)||stack.buffer.length>500&&other.buffer.length>500){if(!((stack.score-other.score||stack.buffer.length-other.buffer.length)>0)){newStacks.splice(i--,1);continue outer}newStacks.splice(j--,1)}}}newStacks.length>12&&newStacks.splice(12,newStacks.length-12)}this.minStackPos=newStacks[0].pos;for(let i=1;i<newStacks.length;i++)newStacks[i].pos<this.minStackPos&&(this.minStackPos=newStacks[i].pos);return null}stopAt(pos){if(null!=this.stoppedAt&&this.stoppedAt<pos)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=pos}advanceStack(stack,stacks,split){let start=stack.pos,{parser}=this,base=verbose?this.stackID(stack)+" -> ":"";if(null!=this.stoppedAt&&start>this.stoppedAt)return stack.forceReduce()?stack:null;if(this.fragments){let strictCx=stack.curContext&&stack.curContext.tracker.strict,cxHash=strictCx?stack.curContext.hash:0;for(let cached=this.fragments.nodeAt(start);cached;){let match=this.parser.nodeSet.types[cached.type.id]==cached.type?parser.getGoto(stack.state,cached.type.id):-1;if(match>-1&&cached.length&&(!strictCx||(cached.prop(dist_NodeProp.contextHash)||0)==cxHash))return stack.useNode(cached,match),verbose&&console.log(base+this.stackID(stack)+` (via reuse of ${parser.getName(cached.type.id)})`),!0;if(!(cached instanceof dist_Tree)||0==cached.children.length||cached.positions[0]>0)break;let inner=cached.children[0];if(!(inner instanceof dist_Tree&&0==cached.positions[0]))break;cached=inner}}let defaultReduce=parser.stateSlot(stack.state,4);if(defaultReduce>0)return stack.reduce(defaultReduce),verbose&&console.log(base+this.stackID(stack)+` (via always-reduce ${parser.getName(65535&defaultReduce)})`),!0;if(stack.stack.length>=9e3)for(;stack.stack.length>6e3&&stack.forceReduce(););let actions=this.tokens.getActions(stack);for(let i=0;i<actions.length;){let action=actions[i++],term=actions[i++],end=actions[i++],last=i==actions.length||!split,localStack=last?stack:stack.split(),main=this.tokens.mainToken;if(localStack.apply(action,term,main?main.start:localStack.pos,end),verbose&&console.log(base+this.stackID(localStack)+` (via ${0==(65536&action)?"shift":`reduce of ${parser.getName(65535&action)}`} for ${parser.getName(term)} @ ${start}${localStack==stack?"":", split"})`),last)return!0;localStack.pos>start?stacks.push(localStack):split.push(localStack)}return!1}advanceFully(stack,newStacks){let pos=stack.pos;for(;;){if(!this.advanceStack(stack,null,null))return!1;if(stack.pos>pos)return pushStackDedup(stack,newStacks),!0}}runRecovery(stacks,tokens,newStacks){let finished=null,restarted=!1;for(let i=0;i<stacks.length;i++){let stack=stacks[i],token=tokens[i<<1],tokenEnd=tokens[1+(i<<1)],base=verbose?this.stackID(stack)+" -> ":"";if(stack.deadEnd){if(restarted)continue;if(restarted=!0,stack.restart(),verbose&&console.log(base+this.stackID(stack)+" (restarted)"),this.advanceFully(stack,newStacks))continue}let force=stack.split(),forceBase=base;for(let j=0;force.forceReduce()&&j<10;j++){if(verbose&&console.log(forceBase+this.stackID(force)+" (via force-reduce)"),this.advanceFully(force,newStacks))break;verbose&&(forceBase=this.stackID(force)+" -> ")}for(let insert of stack.recoverByInsert(token))verbose&&console.log(base+this.stackID(insert)+" (via recover-insert)"),this.advanceFully(insert,newStacks);this.stream.end>stack.pos?(tokenEnd==stack.pos&&(tokenEnd++,token=0),stack.recoverByDelete(token,tokenEnd),verbose&&console.log(base+this.stackID(stack)+` (via recover-delete ${this.parser.getName(token)})`),pushStackDedup(stack,newStacks)):(!finished||finished.score<stack.score)&&(finished=stack)}return finished}stackToTree(stack){return stack.close(),dist_Tree.build({buffer:StackBufferCursor.create(stack),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:stack.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(stack){let id=(stackIDs||(stackIDs=new WeakMap)).get(stack);return id||stackIDs.set(stack,id=String.fromCodePoint(this.nextStackID++)),id+stack}}function pushStackDedup(stack,newStacks){for(let i=0;i<newStacks.length;i++){let other=newStacks[i];if(other.pos==stack.pos&&other.sameState(stack))return void(newStacks[i].score<stack.score&&(newStacks[i]=stack))}newStacks.push(stack)}class Dialect{constructor(source,flags,disabled){this.source=source,this.flags=flags,this.disabled=disabled}allows(term){return!this.disabled||0==this.disabled[term]}}const id=x=>x;class ContextTracker{constructor(spec){this.start=spec.start,this.shift=spec.shift||id,this.reduce=spec.reduce||id,this.reuse=spec.reuse||id,this.hash=spec.hash||(()=>0),this.strict=!1!==spec.strict}}class LRParser extends dist_Parser{constructor(spec){if(super(),this.wrappers=[],14!=spec.version)throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (14)`);let nodeNames=spec.nodeNames.split(" ");this.minRepeatTerm=nodeNames.length;for(let i=0;i<spec.repeatNodeCount;i++)nodeNames.push("");let topTerms=Object.keys(spec.topRules).map((r=>spec.topRules[r][1])),nodeProps=[];for(let i=0;i<nodeNames.length;i++)nodeProps.push([]);function setProp(nodeID,prop,value){nodeProps[nodeID].push([prop,prop.deserialize(String(value))])}if(spec.nodeProps)for(let propSpec of spec.nodeProps){let prop=propSpec[0];"string"==typeof prop&&(prop=dist_NodeProp[prop]);for(let i=1;i<propSpec.length;){let next=propSpec[i++];if(next>=0)setProp(next,prop,propSpec[i++]);else{let value=propSpec[i+-next];for(let j=-next;j>0;j--)setProp(propSpec[i++],prop,value);i++}}}this.nodeSet=new NodeSet(nodeNames.map(((name,i)=>dist_NodeType.define({name:i>=this.minRepeatTerm?void 0:name,id:i,props:nodeProps[i],top:topTerms.indexOf(i)>-1,error:0==i,skipped:spec.skippedNodes&&spec.skippedNodes.indexOf(i)>-1})))),spec.propSources&&(this.nodeSet=this.nodeSet.extend(...spec.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let tokenArray=decodeArray(spec.tokenData);this.context=spec.context,this.specializerSpecs=spec.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let i=0;i<this.specializerSpecs.length;i++)this.specialized[i]=this.specializerSpecs[i].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(spec.states,Uint32Array),this.data=decodeArray(spec.stateData),this.goto=decodeArray(spec.goto),this.maxTerm=spec.maxTerm,this.tokenizers=spec.tokenizers.map((value=>"number"==typeof value?new TokenGroup(tokenArray,value):value)),this.topRules=spec.topRules,this.dialects=spec.dialects||{},this.dynamicPrecedences=spec.dynamicPrecedences||null,this.tokenPrecTable=spec.tokenPrec,this.termNames=spec.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(input,fragments,ranges){let parse=new dist_Parse(this,input,fragments,ranges);for(let w of this.wrappers)parse=w(parse,input,fragments,ranges);return parse}getGoto(state,term,loose=!1){let table=this.goto;if(term>=table[0])return-1;for(let pos=table[term+1];;){let groupTag=table[pos++],last=1&groupTag,target=table[pos++];if(last&&loose)return target;for(let end=pos+(groupTag>>1);pos<end;pos++)if(table[pos]==state)return target;if(last)return-1}}hasAction(state,terminal){let data=this.data;for(let set=0;set<2;set++)for(let next,i=this.stateSlot(state,set?2:1);;i+=3){if(65535==(next=data[i])){if(1!=data[i+1]){if(2==data[i+1])return pair(data,i+2);break}next=data[i=pair(data,i+2)]}if(next==terminal||0==next)return pair(data,i+1)}return 0}stateSlot(state,slot){return this.states[6*state+slot]}stateFlag(state,flag){return(this.stateSlot(state,0)&flag)>0}validAction(state,action){return!!this.allActions(state,(a=>a==action||null))}allActions(state,action){let deflt=this.stateSlot(state,4),result=deflt?action(deflt):void 0;for(let i=this.stateSlot(state,1);null==result;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=pair(this.data,i+2)}result=action(pair(this.data,i+1))}return result}nextStates(state){let result=[];for(let i=this.stateSlot(state,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=pair(this.data,i+2)}if(0==(1&this.data[i+2])){let value=this.data[i+1];result.some(((v,i)=>1&i&&v==value))||result.push(this.data[i],value)}}return result}configure(config){let copy=Object.assign(Object.create(LRParser.prototype),this);if(config.props&&(copy.nodeSet=this.nodeSet.extend(...config.props)),config.top){let info=this.topRules[config.top];if(!info)throw new RangeError(`Invalid top rule name ${config.top}`);copy.top=info}return config.tokenizers&&(copy.tokenizers=this.tokenizers.map((t=>{let found=config.tokenizers.find((r=>r.from==t));return found?found.to:t}))),config.specializers&&(copy.specializers=this.specializers.slice(),copy.specializerSpecs=this.specializerSpecs.map(((s,i)=>{let found=config.specializers.find((r=>r.from==s.external));if(!found)return s;let spec=Object.assign(Object.assign({},s),{external:found.to});return copy.specializers[i]=getSpecializer(spec),spec}))),config.contextTracker&&(copy.context=config.contextTracker),config.dialect&&(copy.dialect=this.parseDialect(config.dialect)),null!=config.strict&&(copy.strict=config.strict),config.wrap&&(copy.wrappers=copy.wrappers.concat(config.wrap)),null!=config.bufferLength&&(copy.bufferLength=config.bufferLength),copy}hasWrappers(){return this.wrappers.length>0}getName(term){return this.termNames?this.termNames[term]:String(term<=this.maxNode&&this.nodeSet.types[term].name||term)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(term){let prec=this.dynamicPrecedences;return null==prec?0:prec[term]||0}parseDialect(dialect){let values=Object.keys(this.dialects),flags=values.map((()=>!1));if(dialect)for(let part of dialect.split(" ")){let id=values.indexOf(part);id>=0&&(flags[id]=!0)}let disabled=null;for(let i=0;i<values.length;i++)if(!flags[i])for(let id,j=this.dialects[values[i]];65535!=(id=this.data[j++]);)(disabled||(disabled=new Uint8Array(this.maxTerm+1)))[id]=1;return new Dialect(dialect,flags,disabled)}static deserialize(spec){return new LRParser(spec)}}function pair(data,off){return data[off]|data[off+1]<<16}function getSpecializer(spec){if(spec.external){let mask=spec.extend?1:0;return(value,stack)=>spec.external(value,stack)<<1|mask}return spec.get}const space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];function isAlpha(ch){return ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=161}const identifiers=new ExternalTokenizer(((input,stack)=>{for(let inside=!1,dashes=0,i=0;;i++){let{next}=input;if(!(isAlpha(next)||45==next||95==next||inside&&(ch=next,ch>=48&&ch<=57))){inside&&input.acceptToken(40==next?97:2==dashes&&stack.canShift(2)?2:98);break}!inside&&(45!=next||i>0)&&(inside=!0),dashes===i&&45==next&&dashes++,input.advance()}var ch})),descendant=new ExternalTokenizer((input=>{if(space.includes(input.peek(-1))){let{next}=input;(isAlpha(next)||95==next||35==next||46==next||91==next||58==next||45==next)&&input.acceptToken(96)}})),unitToken=new ExternalTokenizer((input=>{if(!space.includes(input.peek(-1))){let{next}=input;if(37==next&&(input.advance(),input.acceptToken(1)),isAlpha(next)){do{input.advance()}while(isAlpha(input.next));input.acceptToken(1)}}})),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags.definitionKeyword,"from to selector":tags.keyword,NamespaceName:tags.namespace,KeyframeName:tags.labelName,KeyframeRangeName:tags.operatorKeyword,TagName:tags.tagName,ClassName:tags.className,PseudoClassName:tags.constant(tags.className),IdName:tags.labelName,"FeatureName PropertyName":tags.propertyName,AttributeName:tags.attributeName,NumberLiteral:tags.number,KeywordQuery:tags.keyword,UnaryQueryOp:tags.operatorKeyword,"CallTag ValueName":tags.atom,VariableName:tags.variableName,Callee:tags.operatorKeyword,Unit:tags.unit,"UniversalSelector NestingSelector":tags.definitionOperator,MatchOp:tags.compareOperator,"ChildOp SiblingOp, LogicOp":tags.logicOperator,BinOp:tags.arithmeticOperator,Important:tags.modifier,Comment:tags.blockComment,ColorLiteral:tags.color,"ParenthesizedContent StringLiteral":tags.string,":":tags.punctuation,"PseudoOp #":tags.derefOperator,"; ,":tags.separator,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace}),spec_callee={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},spec_AtKeyword={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},spec_identifier={__proto__:null,not:128,only:128},parser=LRParser.deserialize({version:14,states:"9bQYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#ChO$qQ[O'#DPO$vQ[O'#DTOOQP'#Ej'#EjO${QdO'#DeO%gQ[O'#DrO${QdO'#DtO%xQ[O'#DvO&TQ[O'#DyO&]Q[O'#EPO&kQ[O'#EROOQS'#Ei'#EiOOQS'#EU'#EUQYQ[OOO&rQXO'#CdO'gQWO'#DaO'lQWO'#EpO'wQ[O'#EpQOQWOOP(RO#tO'#C_POOO)C@X)C@XOOQP'#Cg'#CgOOQP,59Q,59QO#kQ[O,59QO(^Q[O'#EXO(xQWO,58{O)QQ[O,59SO$qQ[O,59kO$vQ[O,59oO(^Q[O,59sO(^Q[O,59uO(^Q[O,59vO)]Q[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO)dQWO,59SO)iQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO)nQ`O,59oOOQS'#Cp'#CpO${QdO'#CqO)vQvO'#CsO+TQtO,5:POOQO'#Cx'#CxO)iQWO'#CwO+iQWO'#CyOOQS'#Em'#EmOOQO'#Dh'#DhO+nQ[O'#DoO+|QWO'#EqO&]Q[O'#DmO,[QWO'#DpOOQO'#Er'#ErO({QWO,5:^O,aQpO,5:`OOQS'#Dx'#DxO,iQWO,5:bO,nQ[O,5:bOOQO'#D{'#D{O,vQWO,5:eO,{QWO,5:kO-TQWO,5:mOOQS-E8S-E8SO${QdO,59{O-]Q[O'#EZO-jQWO,5;[O-jQWO,5;[POOO'#ET'#ETP-uO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO.lQXO,5:sOOQO-E8V-E8VOOQS1G.g1G.gOOQP1G.n1G.nO)dQWO1G.nO)iQWO1G.nOOQP1G/V1G/VO.yQ`O1G/ZO/dQXO1G/_O/zQXO1G/aO0bQXO1G/bO0xQWO,59zO0}Q[O'#DOO1UQdO'#CoOOQP1G/Z1G/ZO${QdO1G/ZO1]QpO,59]OOQS,59_,59_O${QdO,59aO1eQWO1G/kOOQS,59c,59cO1jQ!bO,59eO1rQWO'#DhO1}QWO,5:TO2SQWO,5:ZO&]Q[O,5:VO&]Q[O'#E[O2[QWO,5;]O2gQWO,5:XO(^Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O2xQWO1G/|O2}QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XO3YQtO1G/gOOQO,5:u,5:uO3pQ[O,5:uOOQO-E8X-E8XO3}QWO1G0vPOOO-E8R-E8RPOOO1G.e1G.eOOQP7+$Y7+$YOOQP7+$u7+$uO${QdO7+$uOOQS1G/f1G/fO4YQXO'#EoO4aQWO,59jO4fQtO'#EVO5ZQdO'#ElO5eQWO,59ZO5jQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO5rQWO1G/PO${QdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO5wQWO,5:vOOQO-E8Y-E8YO6VQXO1G/vOOQS7+%h7+%hO6^QYO'#CsOOQO'#EO'#EOO6iQ`O'#D}OOQO'#D}'#D}O6tQWO'#E]O6|QdO,5:hOOQS,5:h,5:hO7XQtO'#EYO${QdO'#EYO8VQdO7+%ROOQO7+%R7+%ROOQO1G0a1G0aO8jQpO<<HaO8rQWO,5;ZOOQP1G/U1G/UOOQS-E8T-E8TO${QdO'#EWO8zQWO,5;WOOQT1G.u1G.uOOQP<<Ha<<HaOOQS7+$k7+$kO9SQdO7+%ZOOQO7+%b7+%bOOQO,5:i,5:iO3QQdO'#E^O6tQWO,5:wOOQS,5:w,5:wOOQS-E8Z-E8ZOOQS1G0S1G0SO9ZQtO,5:tOOQS-E8W-E8WOOQO<<Hm<<HmOOQPAN={AN={O:XQdO,5:rOOQO-E8U-E8UOOQO<<Hu<<HuOOQO,5:x,5:xOOQO-E8[-E8[OOQS1G0c1G0c",stateData:":k~O#WOS#XQQ~OUYOXYO]VO^VOtWOxXO!YaO!ZZO!g[O!i]O!k^O!n_O!t`O#URO#_TO~OQfOUYOXYO]VO^VOtWOxXO!YaO!ZZO!g[O!i]O!k^O!n_O!t`O#UeO#_TO~O#R#dP~P!ZO#XjO~O#UlO~O]qO^qOpoOtrOxsO|tO!PvO#SuO#_nO~O!RwO~P#pO`}O#TzO#UyO~O#U!OO~O#U!QO~OQ!ZOb!TOf!ZOh!ZOn!YO#T!WO#U!SO#b!UO~Ob!]O!b!_O!e!`O#U![O!R#eP~Oh!eOn!YO#U!dO~Oh!gO#U!gO~Ob!]O!b!_O!e!`O#U![O~O!W#eP~P%gO]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#SWX#_WX~O]!lO~O!W!mO#R#dX!Q#dX~O#R#dX!Q#dX~P!ZO#Y!pO#Z!pO#[!rO~OUYOXYO]VO^VOtWOxXO#URO#_TO~OpoO!RwO~O`!yO#TzO#UyO~O!Q#dP~P!ZOb#QO~Ob#RO~Ov#SOz#TO~OP#VObgXjgX!WgX!bgX!egX#UgXagXQgXfgXhgXngXpgX!VgX#RgX#TgX#bgXvgX!QgX~Ob!]Oj#WO!b!_O!e!`O#U![O!W#eP~Ob#ZO~Ob!]O!b!_O!e!`O#U#[O~Op#`O!`#_O!R#eX!W#eX~Ob#cO~Oj#WO!W#eO~O!W#fO~Oh#gOn!YO~O!R#hO~O!RwO!`#_O~O!RwO!W#kO~O!W!}X#R!}X!Q!}X~P!ZO!W!mO#R#da!Q#da~O#Y!pO#Z!pO#[#rO~O]qO^qOtrOxsO|tO!PvO#SuO#_nO~Op!{a!R!{aa!{a~P.QOv#tOz#uO~O]qO^qOtrOxsO#_nO~Op{i|{i!P{i!R{i#S{ia{i~P/ROp}i|}i!P}i!R}i#S}ia}i~P/ROp!Oi|!Oi!P!Oi!R!Oi#S!Oia!Oi~P/RO!Q#vO~Oa#cP~P(^Oa#`P~P${Oa#}Oj#WO~O!W$PO~Oh$QOo$QO~O]!^Xa![X!`![X~O]$RO~Oa$SO!`#_O~Op#`O!R#ea!W#ea~O!`#_Op!aa!R!aa!W!aaa!aa~O!W$XO~O!Q$`O#U$ZO#b$YO~Oj#WOp$bO!V$dO!W!Ti#R!Ti!Q!Ti~P${O!W!}a#R!}a!Q!}a~P!ZO!W!mO#R#di!Q#di~Oa#cX~P#pOa$hO~Oj#WOQ!yXa!yXb!yXf!yXh!yXn!yXp!yX#T!yX#U!yX#b!yX~Op$jOa#`X~P${Oa$lO~Oj#WOv$mO~Oa$nO~O!`#_Op#Oa!R#Oa!W#Oa~Oa$pO~P.QOP#VOpgX!RgX~O#b$YOp!qX!R!qX~Op$rO!RwO~O!Q$vO#U$ZO#b$YO~Oj#WOQ!|Xb!|Xf!|Xh!|Xn!|Xp!|X!V!|X!W!|X#R!|X#T!|X#U!|X#b!|X!Q!|X~Op$bO!V$yO!W!Tq#R!Tq!Q!Tq~P${Oj#WOv$zO~OpoOa#ca~Op$jOa#`a~Oa$}O~P${Oj#WOQ!|ab!|af!|ah!|an!|ap!|a!V!|a!W!|a#R!|a#T!|a#U!|a#b!|a!Q!|a~Oa!zap!za~P${O#Wo#X#bj!P#b~",goto:"-Y#gPPP#hP#kP#t$TP#t$d#tPP$jPPP$p$y$yP%]P$yP$y%w&ZPPP&s&y#tP'PP#tP'VP#tP#t#tPPP']'r(PPP#kPP(W(W(b(WP(WP(W(WP#kP#kP#kP(e#kP(h(k(n(u#kP#kP(z)Q)a)o)u*P*V*a*g*mPPPPPPPPPP*s*|P+i+lP,b,e,k,tRkQ_bOPdhw!m#nkYOPdhotuvw!m#Q#c#nkSOPdhotuvw!m#Q#c#nQmTR!snQ{VR!wqQ!w}Q#Y!XR#s!yq!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${p!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${U$]#h$_$rR$q$[q!XZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${p!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${Q!e^R#g!fQ|VR!xqQ!w|R#s!xQ!PWR!zrQ!RXR!{sQxUQ!vpQ#d!bQ#j!iQ#k!jQ$t$^R%Q$sSgPwQ!ohQ#m!mR$e#nZfPhw!m#na!a[`a!V!]!_#_#`R#]!]R!f^R!h_R#i!hS$^#h$_R%O$rV$[#h$_$rQ!qjR#q!qQdOShPwU!kdh#nR#n!mQ#z#RU$i#z$o${Q$o$RR${$jQ$k#zR$|$kQpUS!up$gR$g#wQ$c#lR$x$cQ!ngS#o!n#pR#p!oQ#a!^R$V#aQ$_#hR$u$_Q$s$^R%P$s_cOPdhw!m#n^UOPdhw!m#nQ!toQ!|tQ!}uQ#OvQ#w#QR$W#cR#{#RQ!VZQ!c]Q#U!TQ#l!l[#y#R#z$R$j$o${Q#|#TQ$O#WS$a#l$cQ$f#uR$w$bR#x#QQiPR#PwQ!b[Q!jaR#X!VU!^[a!VQ!i`Q#^!]Q#b!_Q$T#_R$U#`",nodeNames:" Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:114,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[cssHighlighting],skippedNodes:[0,3,85],repeatNodeCount:10,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSo`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#W~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#W~o`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUo`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Uo`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUo`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Uo`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUo`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Uo`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUo`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Uo`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!V[o`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYtQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYo`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYo`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYf[o`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYf[o`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYo`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYf[o`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYo`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSf[o`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QSzSo`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSb^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOa~n9{UUQjWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWjW!PQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUo`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYo`#b[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYo`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUo`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUo`#b[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[o`#b[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSp^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWjWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VU#_QOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSo`#X~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#b[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU]QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S^Qo`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!W^Oy%^z;'S%^;'S;=`%o<%lO%^dCoSzSOy%^z;'S%^;'S;=`%o<%lO%^bDQU|QOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS|Qo`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[!YQo`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bFfSxQOy%^z;'S%^;'S;=`%o<%lO%^lFwSv[Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUo`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!`Qo`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!RUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!Q^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!PQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[descendant,unitToken,identifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#Z~~dP!P!Qg~lO#[~~",28,102)],topRules:{StyleSheet:[0,4],Styles:[1,84]},specialized:[{term:97,get:value=>spec_callee[value]||-1},{term:56,get:value=>spec_AtKeyword[value]||-1},{term:98,get:value=>spec_identifier[value]||-1}],tokenPrec:1169});let _properties=null;function properties(){if(!_properties&&"object"==typeof document&&document.body){let{style}=document.body,names=[],seen=new Set;for(let prop in style)"cssText"!=prop&&"cssFloat"!=prop&&"string"==typeof style[prop]&&(/[A-Z]/.test(prop)&&(prop=prop.replace(/[A-Z]/g,(ch=>"-"+ch.toLowerCase()))),seen.has(prop)||(names.push(prop),seen.add(prop)));_properties=names.sort().map((name=>({type:"property",label:name})))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map((name=>({type:"class",label:name}))),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map((name=>({type:"keyword",label:name}))).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map((name=>({type:"constant",label:name})))),dist_tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map((name=>({type:"type",label:name}))),dist_identifier=/^(\w[\w-]*|-\w[\w-]*|)$/,variable=/^-(-[\w-]*)?$/;const VariablesByNode=new NodeWeakMap,declSelector=["Declaration"];function astTop(node){for(let cur=node;;){if(cur.type.isTop)return cur;if(!(cur=cur.parent))return node}}function variableNames(doc,node,isVariable){if(node.to-node.from>4096){let known=VariablesByNode.get(node);if(known)return known;let result=[],seen=new Set,cursor=node.cursor(IterMode.IncludeAnonymous);if(cursor.firstChild())do{for(let option of variableNames(doc,cursor.node,isVariable))seen.has(option.label)||(seen.add(option.label),result.push(option))}while(cursor.nextSibling());return VariablesByNode.set(node,result),result}{let result=[],seen=new Set;return node.cursor().iterate((node=>{var _a;if(isVariable(node)&&node.matchContext(declSelector)&&":"==(null===(_a=node.node.nextSibling)||void 0===_a?void 0:_a.name)){let name=doc.sliceString(node.from,node.to);seen.has(name)||(seen.add(name),result.push({label:name,type:"variable"}))}})),result}}const defineCSSCompletionSource=isVariable=>context=>{let{state,pos}=context,node=dist_syntaxTree(state).resolveInner(pos,-1),isDash=node.type.isError&&node.from==node.to-1&&"-"==state.doc.sliceString(node.from,node.to);if("PropertyName"==node.name||(isDash||"TagName"==node.name)&&/^(Block|Styles)$/.test(node.resolve(node.to).name))return{from:node.from,options:properties(),validFor:dist_identifier};if("ValueName"==node.name)return{from:node.from,options:values,validFor:dist_identifier};if("PseudoClassName"==node.name)return{from:node.from,options:pseudoClasses,validFor:dist_identifier};if(isVariable(node)||(context.explicit||isDash)&&function isVarArg(node,doc){var _a;if(("("==node.name||node.type.isError)&&(node=node.parent||node),"ArgList"!=node.name)return!1;let callee=null===(_a=node.parent)||void 0===_a?void 0:_a.firstChild;return"Callee"==(null==callee?void 0:callee.name)&&"var"==doc.sliceString(callee.from,callee.to)}(node,state.doc))return{from:isVariable(node)||isDash?node.from:pos,options:variableNames(state.doc,astTop(node),isVariable),validFor:variable};if("TagName"==node.name){for(let{parent}=node;parent;parent=parent.parent)if("Block"==parent.name)return{from:node.from,options:properties(),validFor:dist_identifier};return{from:node.from,options:dist_tags,validFor:dist_identifier}}if(!context.explicit)return null;let above=node.resolve(pos),before=above.childBefore(pos);return before&&":"==before.name&&"PseudoClassSelector"==above.name?{from:pos,options:pseudoClasses,validFor:dist_identifier}:before&&":"==before.name&&"Declaration"==above.name||"ArgList"==above.name?{from:pos,options:values,validFor:dist_identifier}:"Block"==above.name||"Styles"==above.name?{from:pos,options:properties(),validFor:dist_identifier}:null},cssCompletionSource=defineCSSCompletionSource((n=>"VariableName"==n.name)),cssLanguage=LRLanguage.define({name:"css",parser:parser.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const Element=20,TagName=22,Attribute=23,AttributeName=24,AttributeValue=26,UnquotedAttributeValue=27,ScriptText=28,StyleText=31,TextareaText=34,CloseTag=37,selfClosers={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},closeOnOpen={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function isSpace(ch){return 9==ch||10==ch||13==ch||32==ch}let cachedName=null,cachedInput=null,cachedPos=0;function tagNameAfter(input,offset){let pos=input.pos+offset;if(cachedPos==pos&&cachedInput==input)return cachedName;let next=input.peek(offset);for(;isSpace(next);)next=input.peek(++offset);let name="";for(;45==(ch=next)||46==ch||58==ch||ch>=65&&ch<=90||95==ch||ch>=97&&ch<=122||ch>=161;)name+=String.fromCharCode(next),next=input.peek(++offset);var ch;return cachedInput=input,cachedPos=pos,cachedName=name?name.toLowerCase():next==question||next==bang?void 0:null}const question=63,bang=33;function ElementContext(name,parent){this.name=name,this.parent=parent,this.hash=parent?parent.hash:0;for(let i=0;i<name.length;i++)this.hash+=(this.hash<<4)+name.charCodeAt(i)+(name.charCodeAt(i)<<8)}const startTagTerms=[6,10,7,8,9],elementContext=new ContextTracker({start:null,shift:(context,term,stack,input)=>startTagTerms.indexOf(term)>-1?new ElementContext(tagNameAfter(input,1)||"",context):context,reduce:(context,term)=>term==Element&&context?context.parent:context,reuse(context,node,stack,input){let type=node.type.id;return 6==type||36==type?new ElementContext(tagNameAfter(input,1)||"",context):context},hash:context=>context?context.hash:0,strict:!1}),tagStart=new ExternalTokenizer(((input,stack)=>{if(60!=input.next)return void(input.next<0&&stack.context&&input.acceptToken(57));input.advance();let close=47==input.next;close&&input.advance();let name=tagNameAfter(input,0);if(void 0===name)return;if(!name)return input.acceptToken(close?14:6);let parent=stack.context?stack.context.name:null;if(close){if(name==parent)return input.acceptToken(11);if(parent&&implicitlyClosed[parent])return input.acceptToken(57,-2);if(stack.dialectEnabled(0))return input.acceptToken(12);for(let cx=stack.context;cx;cx=cx.parent)if(cx.name==name)return;input.acceptToken(13)}else{if("script"==name)return input.acceptToken(7);if("style"==name)return input.acceptToken(8);if("textarea"==name)return input.acceptToken(9);if(selfClosers.hasOwnProperty(name))return input.acceptToken(10);parent&&closeOnOpen[parent]&&closeOnOpen[parent][name]?input.acceptToken(57,-1):input.acceptToken(6)}}),{contextual:!0}),commentContent=new ExternalTokenizer((input=>{for(let dashes=0,i=0;;i++){if(input.next<0){i&&input.acceptToken(58);break}if(45==input.next)dashes++;else{if(62==input.next&&dashes>=2){i>3&&input.acceptToken(58,-2);break}dashes=0}input.advance()}}));const endTag=new ExternalTokenizer(((input,stack)=>{if(47==input.next&&62==input.peek(1)){let selfClosing=stack.dialectEnabled(1)||function inForeignElement(context){for(;context;context=context.parent)if("svg"==context.name||"math"==context.name)return!0;return!1}(stack.context);input.acceptToken(selfClosing?5:4,2)}else 62==input.next&&input.acceptToken(4,1)}));function contentTokenizer(tag,textToken,endToken){let lastState=2+tag.length;return new ExternalTokenizer((input=>{for(let state=0,matchedLen=0,i=0;;i++){if(input.next<0){i&&input.acceptToken(textToken);break}if(0==state&&60==input.next||1==state&&47==input.next||state>=2&&state<lastState&&input.next==tag.charCodeAt(state-2))state++,matchedLen++;else if(2!=state&&state!=lastState||!isSpace(input.next)){if(state==lastState&&62==input.next){i>matchedLen?input.acceptToken(textToken,-matchedLen):input.acceptToken(endToken,-(matchedLen-2));break}if((10==input.next||13==input.next)&&i){input.acceptToken(textToken,1);break}state=matchedLen=0}else matchedLen++;input.advance()}}))}const scriptTokens=contentTokenizer("script",54,1),styleTokens=contentTokenizer("style",55,2),textareaTokens=contentTokenizer("textarea",56,3),htmlHighlighting=styleTags({"Text RawText":tags.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags.angleBracket,TagName:tags.tagName,"MismatchedCloseTag/TagName":[tags.tagName,tags.invalid],AttributeName:tags.attributeName,"AttributeValue UnquotedAttributeValue":tags.attributeValue,Is:tags.definitionOperator,"EntityReference CharacterReference":tags.character,Comment:tags.blockComment,ProcessingInst:tags.processingInstruction,DoctypeDecl:tags.documentMeta}),dist_parser=LRParser.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%WQ&rO,59fO%`Q&rO,59iO%hQ&rO,59lO%sQ&rO,59nOOOa'#D^'#D^O%{OaO'#CxO&WOaO,59[OOOb'#D_'#D_O&`ObO'#C{O&kObO,59[OOOd'#D`'#D`O&sOdO'#DOO'OOdO,59[OOO`'#Da'#DaO'WO!rO,59[O'_Q#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'dO$fO,59oOOO`,59o,59oO'lQ#|O,59qO'qQ#|O,59rOOO`-E7W-E7WO'vQ&rO'#CsOOQW'#DZ'#DZO(UQ&rO1G.wOOOa1G.w1G.wO(^Q&rO1G/QOOOb1G/Q1G/QO(fQ&rO1G/TOOOd1G/T1G/TO(nQ&rO1G/WOOO`1G/W1G/WOOO`1G/Y1G/YO(yQ&rO1G/YOOOa-E7[-E7[O)RQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)WQ#tO'#C|OOOd-E7^-E7^O)]Q#tO'#DPOOO`-E7_-E7_O)bQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O)gQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rOOO`7+$t7+$tO)rQ#|O,59eO)wQ#|O,59hO)|Q#|O,59kOOO`1G/X1G/XO*RO7[O'#CvO*dOMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O*uO7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+WOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:"+s~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OhyO~OS!OOhyO~OS!QOhyO~OS!SOT!TOhyO~OS!TOhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXhgXTgX~OS!fOhyO~OS!gOhyO~OS!hOhyO~OS!iOT!jOhyO~OS!jOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{}!P!R!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!UeZ!e{}!P!R!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:485},tokenPrec:487});function dist_getAttrs(openTag,input){let attrs=Object.create(null);for(let att of openTag.getChildren(Attribute)){let name=att.getChild(AttributeName),value=att.getChild(AttributeValue)||att.getChild(UnquotedAttributeValue);name&&(attrs[input.read(name.from,name.to)]=value?value.type.id==AttributeValue?input.read(value.from+1,value.to-1):input.read(value.from,value.to):"")}return attrs}function findTagName(openTag,input){let tagNameNode=openTag.getChild(TagName);return tagNameNode?input.read(tagNameNode.from,tagNameNode.to):" "}function maybeNest(node,input,tags){let attrs;for(let tag of tags)if(!tag.attrs||tag.attrs(attrs||(attrs=dist_getAttrs(node.node.parent.firstChild,input))))return{parser:tag.parser};return null}function configureNesting(tags=[],attributes=[]){let script=[],style=[],textarea=[],other=[];for(let tag of tags){("script"==tag.tag?script:"style"==tag.tag?style:"textarea"==tag.tag?textarea:other).push(tag)}let attrs=attributes.length?Object.create(null):null;for(let attr of attributes)(attrs[attr.name]||(attrs[attr.name]=[])).push(attr);return function parseMixed(nest){return(parse,input,fragments,ranges)=>new MixedParse(parse,nest,input,fragments,ranges)}(((node,input)=>{let id=node.type.id;if(id==ScriptText)return maybeNest(node,input,script);if(id==StyleText)return maybeNest(node,input,style);if(id==TextareaText)return maybeNest(node,input,textarea);if(id==Element&&other.length){let attrs,n=node.node,open=n.firstChild,tagName=open&&findTagName(open,input);if(tagName)for(let tag of other)if(tag.tag==tagName&&(!tag.attrs||tag.attrs(attrs||(attrs=dist_getAttrs(n,input))))){let close=n.lastChild;return{parser:tag.parser,overlay:[{from:open.to,to:close.type.id==CloseTag?close.from:n.to}]}}}if(attrs&&id==Attribute){let nameNode,n=node.node;if(nameNode=n.firstChild){let matches=attrs[input.read(nameNode.from,nameNode.to)];if(matches)for(let attr of matches){if(attr.tagName&&attr.tagName!=findTagName(n.parent,input))continue;let value=n.lastChild;if(value.type.id==AttributeValue){let from=value.from+1,last=value.lastChild,to=value.to-(last&&last.isError?0:1);if(to>from)return{parser:attr.parser,overlay:[{from,to}]}}else if(value.type.id==UnquotedAttributeValue)return{parser:attr.parser,overlay:[{from:value.from,to:value.to}]}}}}return null}))}const dist_space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],trackNewline=new ContextTracker({start:!1,shift:(context,term)=>3==term||4==term||307==term?context:308==term,strict:!1}),insertSemicolon=new ExternalTokenizer(((input,stack)=>{let{next}=input;(125==next||-1==next||stack.context)&&input.acceptToken(305)}),{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer(((input,stack)=>{let after,{next}=input;dist_space.indexOf(next)>-1||(47!=next||47!=(after=input.peek(1))&&42!=after)&&(125==next||59==next||-1==next||stack.context||input.acceptToken(304))}),{contextual:!0}),incdecToken=new ExternalTokenizer(((input,stack)=>{let{next}=input;if((43==next||45==next)&&(input.advance(),next==input.next)){input.advance();let mayPostfix=!stack.context&&stack.canShift(1);input.acceptToken(mayPostfix?1:2)}}),{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),dist_spec_identifier={__proto__:null,export:16,as:21,from:29,default:32,async:37,function:38,extends:48,this:52,true:60,false:60,null:72,void:76,typeof:80,super:98,new:132,delete:148,yield:157,await:161,class:166,public:223,private:223,protected:223,readonly:225,instanceof:244,satisfies:247,in:248,const:250,import:282,keyof:337,unique:341,infer:347,is:383,abstract:403,implements:405,type:407,let:410,var:412,using:415,interface:421,enum:425,namespace:431,module:433,declare:437,global:441,for:460,of:469,while:472,with:476,do:480,if:484,else:486,switch:490,case:496,try:502,catch:506,finally:510,return:514,throw:518,break:522,continue:526,debugger:530},spec_word={__proto__:null,async:119,get:121,set:123,declare:183,public:185,private:185,protected:185,static:187,abstract:189,override:191,readonly:197,accessor:199,new:387},spec_LessThan={__proto__:null,"<":139},javascript_dist_parser=LRParser.deserialize({version:14,states:"$6zO%TQUOOO%[QUOOO'_QWOOP(lOSOOO*zQ(CjO'#CgO+ROpO'#ChO+aO!bO'#ChO+oO07`O'#D[O.QQUO'#DbO.bQUO'#DmO%[QUO'#DwO0fQUO'#EPOOQ(CY'#EX'#EXO1PQSO'#EUOOQO'#Ej'#EjOOQO'#Id'#IdO1XQSO'#GlO1dQSO'#EiO1iQSO'#EiO3kQ(CjO'#JeO6[Q(CjO'#JfO6xQSO'#FXO6}Q#tO'#FpOOQ(CY'#Fa'#FaO7YO&jO'#FaO7hQ,UO'#FwO9OQSO'#FvOOQ(CY'#Jf'#JfOOQ(CW'#Je'#JeO9TQSO'#GpOOQQ'#KQ'#KQO9`QSO'#IQO9eQ(C[O'#IROOQQ'#JR'#JROOQQ'#IV'#IVQ`QUOOO`QUOOO%[QUO'#DoO9mQUO'#D{O9tQUO'#D}O9ZQSO'#GlO9{Q,UO'#CmO:ZQSO'#EhO:fQSO'#EsO:kQ,UO'#F`O;YQSO'#GlOOQO'#KR'#KRO;_QSO'#KRO;mQSO'#GtO;mQSO'#GuO;mQSO'#GwO9ZQSO'#GzO<dQSO'#G}O={QSO'#CcO>]QSO'#HZO>eQSO'#HaO>eQSO'#HcO`QUO'#HeO>eQSO'#HgO>eQSO'#HjO>jQSO'#HpO>oQ(C]O'#HvO%[QUO'#HxO>zQ(C]O'#HzO?VQ(C]O'#H|O9eQ(C[O'#IOO?bQ(CjO'#CgO@dQWO'#DgQOQSOOO%[QUO'#D}O@zQSO'#EQO9{Q,UO'#EhOAVQSO'#EhOAbQ`O'#F`OOQQ'#Ce'#CeOOQ(CW'#Dl'#DlOOQ(CW'#Ji'#JiO%[QUO'#JiOOQO'#Jm'#JmOOQO'#Ia'#IaOBbQWO'#EaOOQ(CW'#E`'#E`OC^Q(C`O'#EaOChQWO'#ETOOQO'#Jl'#JlOC|QWO'#JmOEZQWO'#ETOChQWO'#EaPEhO?MpO'#C`POOO)CDp)CDpOOOO'#IW'#IWOEsOpO,59SOOQ(CY,59S,59SOOOO'#IX'#IXOFRO!bO,59SO%[QUO'#D^OOOO'#IZ'#IZOFaO07`O,59vOOQ(CY,59v,59vOFoQUO'#I[OGSQSO'#JgOIUQbO'#JgO+}QUO'#JgOI]QSO,59|OIsQSO'#EjOJQQSO'#JuOJ]QSO'#JtOJ]QSO'#JtOJeQSO,5;WOJjQSO'#JsOOQ(CY,5:X,5:XOJqQUO,5:XOLrQ(CjO,5:cOMcQSO,5:kOM|Q(C[O'#JrONTQSO'#JqO9TQSO'#JqONiQSO'#JqONqQSO,5;VONvQSO'#JqO!#OQbO'#JfOOQ(CY'#Cg'#CgO%[QUO'#EPO!#nQ`O,5:pOOQO'#Jn'#JnOOQO-E<b-E<bO9ZQSO,5=WO!$UQSO,5=WO!$ZQUO,5;TO!&^Q,UO'#EeO!'qQSO,5;TO!)ZQ,UO'#DqO!)bQUO'#DvO!)lQWO,5;^O!)tQWO,5;^O%[QUO,5;^OOQQ'#FP'#FPOOQQ'#FR'#FRO%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_O%[QUO,5;_OOQQ'#FV'#FVO!*SQUO,5;pOOQ(CY,5;u,5;uOOQ(CY,5;v,5;vO!,VQSO,5;vOOQ(CY,5;w,5;wO%[QUO'#IhO!,_Q(C[O,5<dO!&^Q,UO,5;_O!,|Q,UO,5;_O%[QUO,5;sO!-TQ#tO'#FfO!.QQ#tO'#JyO!-lQ#tO'#JyO!.XQ#tO'#JyOOQO'#Jy'#JyO!.mQ#tO,5<OOOOO,5<[,5<[O!/OQUO'#FrOOOO'#Ig'#IgO7YO&jO,5;{O!/VQ#tO'#FtOOQ(CY,5;{,5;{O!/vQ7[O'#CsOOQ(CY'#Cw'#CwO!0ZQSO'#CwO!0`O07`O'#C{O!0|Q,UO,5<aO!1TQSO,5<cO!2jQMhO'#GRO!2wQSO'#GSO!2|QSO'#GSO!3RQMhO'#GWO!4QQWO'#G[O!4sQ7[O'#J`OOQ(CY'#J`'#J`O!4}QSO'#J_O!5]QSO'#J^O!5eQSO'#CrOOQ(CY'#Cu'#CuOOQ(CY'#DP'#DPOOQ(CY'#DR'#DRO1SQSO'#DTO!'vQ,UO'#FyO!'vQ,UO'#F{O!5mQSO'#F}O!5rQSO'#GOO!2|QSO'#GUO!'vQ,UO'#GZO!5wQSO'#EkO!6fQSO,5<bOOQ(CW'#Cp'#CpO!6nQSO'#ElO!7hQWO'#EmOOQ(CW'#Js'#JsO!7oQ(C[O'#KSO9eQ(C[O,5=[O`QUO,5>lOOQQ'#JZ'#JZOOQQ,5>m,5>mOOQQ-E<T-E<TO!9qQ(CjO,5:ZO!<_Q(CjO,5:gO%[QUO,5:gO!>xQ(CjO,5:iOOQO,5@m,5@mO!?iQ,UO,5=WO!?wQ(C[O'#J[O9OQSO'#J[O!@YQ(C[O,59XO!@eQWO,59XO!@mQ,UO,59XO9{Q,UO,59XO!@xQSO,5;TO!AQQSO'#HYO!AcQSO'#KVO%[QUO,5;xO!7cQWO,5;zO!AkQSO,5=sO!ApQSO,5=sO!AuQSO,5=sO9eQ(C[O,5=sO;mQSO,5=cOOQO'#Cs'#CsO!BTQWO,5=`O!B]Q,UO,5=aO!BhQSO,5=cO!BmQ`O,5=fO!BuQSO'#KRO>jQSO'#HPO9ZQSO'#HRO!BzQSO'#HRO9{Q,UO'#HTO!CPQSO'#HTOOQQ,5=i,5=iO!CUQSO'#HUO!C^QSO'#CmO!CcQSO,58}O!CmQSO,58}O!ErQUO,58}OOQQ,58},58}O!FSQ(C[O,58}O%[QUO,58}O!H_QUO'#H]OOQQ'#H^'#H^OOQQ'#H_'#H_O`QUO,5=uO!HuQSO,5=uO`QUO,5={O`QUO,5=}O!HzQSO,5>PO`QUO,5>RO!IPQSO,5>UO!IUQUO,5>[OOQQ,5>b,5>bO%[QUO,5>bO9eQ(C[O,5>dOOQQ,5>f,5>fO!M`QSO,5>fOOQQ,5>h,5>hO!M`QSO,5>hOOQQ,5>j,5>jO!MeQWO'#DYO%[QUO'#JiO!NSQWO'#JiO!NqQWO'#DhO# SQWO'#DhO##eQUO'#DhO##lQSO'#JhO##tQSO,5:RO##yQSO'#EnO#$XQSO'#JvO#$aQSO,5;XO#$fQWO'#DhO#$sQWO'#ESOOQ(CY,5:l,5:lO%[QUO,5:lO#$zQSO,5:lO>jQSO,5;SO!@eQWO,5;SO!@mQ,UO,5;SO9{Q,UO,5;SO#%SQSO,5@TO#%XQ!LQO,5:pOOQO-E<_-E<_O#&_Q(C`O,5:{OChQWO,5:oO#&iQWO,5:oOChQWO,5:{O!@YQ(C[O,5:oOOQ(CW'#Ed'#EdOOQO,5:{,5:{O%[QUO,5:{O#&vQ(C[O,5:{O#'RQ(C[O,5:{O!@eQWO,5:oOOQO,5;R,5;RO#'aQ(C[O,5:{POOO'#IU'#IUP#'uO?MpO,58zPOOO,58z,58zOOOO-E<U-E<UOOQ(CY1G.n1G.nOOOO-E<V-E<VO#(QQ`O,59xOOOO-E<X-E<XOOQ(CY1G/b1G/bO#(VQbO,5>vO+}QUO,5>vOOQO,5>|,5>|O#(aQUO'#I[OOQO-E<Y-E<YO#(nQSO,5@RO#(vQbO,5@RO#(}QSO,5@`OOQ(CY1G/h1G/hO%[QUO,5@aO#)VQSO'#IbOOQO-E<`-E<`O#(}QSO,5@`OOQ(CW1G0r1G0rOOQ(CY1G/s1G/sOOQ(CY1G0V1G0VO%[QUO,5@^O#)kQ(C[O,5@^O#)|Q(C[O,5@^O#*TQSO,5@]O9TQSO,5@]O#*]QSO,5@]O#*kQSO'#IeO#*TQSO,5@]OOQ(CW1G0q1G0qO!)lQWO,5:rO!)wQWO,5:rOOQO,5:t,5:tO#+]QSO,5:tO#+eQ,UO1G2rO9ZQSO1G2rOOQ(CY1G0o1G0oO#+sQ(CjO1G0oO#,xQ(ChO,5;POOQ(CY'#GQ'#GQO#-fQ(CjO'#J`O!$ZQUO1G0oO#/nQ,UO'#JjO#/xQSO,5:]O#/}QbO'#JkO%[QUO'#JkO#0XQSO,5:bOOQ(CY'#DY'#DYOOQ(CY1G0x1G0xO%[QUO1G0xOOQ(CY1G1b1G1bO#0^QSO1G0xO#2uQ(CjO1G0yO#2|Q(CjO1G0yO#5gQ(CjO1G0yO#5nQ(CjO1G0yO#7xQ(CjO1G0yO#8`Q(CjO1G0yO#;YQ(CjO1G0yO#;aQ(CjO1G0yO#=zQ(CjO1G0yO#>RQ(CjO1G0yO#?yQ(CjO1G0yO#ByQ$IUO'#CgO#DwQ$IUO1G1[O#EOQ$IUO'#JfO!,YQSO1G1bO#E`Q(CjO,5?SOOQ(CW-E<f-E<fO#FSQ(CjO1G0yOOQ(CY1G0y1G0yO#H_Q(CjO1G1_O#IRQ#tO,5<SO#IZQ#tO,5<TO#IcQ#tO'#FkO#IzQSO'#FjOOQO'#Jz'#JzOOQO'#If'#IfO#JPQ#tO1G1jOOQ(CY1G1j1G1jOOOO1G1u1G1uO#JbQ$IUO'#JeO#JlQSO,5<^O!*SQUO,5<^OOOO-E<e-E<eOOQ(CY1G1g1G1gO#JqQWO'#JyOOQ(CY,5<`,5<`O#JyQWO,5<`OOQ(CY,59c,59cO!&^Q,UO'#C}OOOO'#IY'#IYO#KOO07`O,59gOOQ(CY,59g,59gO%[QUO1G1{O!5rQSO'#IjO#KZQ,UO,5<tOOQ(CY,5<q,5<qOOQO'#Gg'#GgO!'vQ,UO,5=QOOQO'#Gi'#GiO!'vQ,UO,5=SO!&^Q,UO,5=UOOQO1G1}1G1}O#KbQ`O'#CpO#KuQ`O,5<mO#K|QSO'#J}O9ZQSO'#J}O#L[QSO,5<oO!'vQ,UO,5<nO#LaQSO'#GTO#LlQSO,5<nO#LqQ`O'#GQO#MOQ`O'#KOO#MYQSO'#KOO!&^Q,UO'#KOO#M_QSO,5<rO#MdQWO'#G]O!3{QWO'#G]O#MuQSO'#G_O#MzQSO'#GaO!2|QSO'#GdO#NPQ(C[O'#IlO#N[QWO,5<vOOQ(CY,5<v,5<vO#NcQWO'#G]O#NqQWO'#G^O#NyQWO'#G^OOQ(CY,5=V,5=VO!'vQ,UO,5?yO!'vQ,UO,5?yO$ OQSO'#ImO$ ZQSO,5?xO$ cQSO,59^O$!SQ,UO,59oOOQ(CY,59o,59oO$!uQ,UO,5<eO$#hQ,UO,5<gO@[QSO,5<iOOQ(CY,5<j,5<jO$#rQSO,5<pO$#wQ,UO,5<uO$$XQSO'#JqO!$ZQUO1G1|O$$^QSO1G1|O9TQSO'#JtO9TQSO'#EnO%[QUO'#EnO9TQSO'#IoO$$cQ(C[O,5@nOOQQ1G2v1G2vOOQQ1G4W1G4WOOQ(CY1G/u1G/uO!,VQSO1G/uO$&hQ(CjO1G0ROOQQ1G2r1G2rO!&^Q,UO1G2rO%[QUO1G2rO$'XQSO1G2rO$'dQ,UO'#EeOOQ(CW,5?v,5?vO$'nQ(C[O,5?vOOQQ1G.s1G.sO!@YQ(C[O1G.sO!@eQWO1G.sO!@mQ,UO1G.sO$(PQSO1G0oO$(UQSO'#CgO$(aQSO'#KWO$(iQSO,5=tO$(nQSO'#KWO$(sQSO'#KWO$)OQSO'#IuO$)^QSO,5@qO$)fQbO1G1dOOQ(CY1G1f1G1fO9ZQSO1G3_O@[QSO1G3_O$)mQSO1G3_O$)rQSO1G3_OOQQ1G3_1G3_O!BhQSO1G2}O!&^Q,UO1G2zO$)wQSO1G2zOOQQ1G2{1G2{O!&^Q,UO1G2{O$)|QSO1G2{O$*UQWO'#GyOOQQ1G2}1G2}O!3{QWO'#IqO!BmQ`O1G3QOOQQ1G3Q1G3QOOQQ,5=k,5=kO$*^Q,UO,5=mO9ZQSO,5=mO#MzQSO,5=oO9OQSO,5=oO!@eQWO,5=oO!@mQ,UO,5=oO9{Q,UO,5=oO$*lQSO'#KUO$*wQSO,5=pOOQQ1G.i1G.iO$*|Q(C[O1G.iO@[QSO1G.iO$+XQSO1G.iO9eQ(C[O1G.iO$-^QbO,5@sO$-nQSO,5@sO9TQSO,5@sO$-yQUO,5=wO$.QQSO,5=wOOQQ1G3a1G3aO`QUO1G3aOOQQ1G3g1G3gOOQQ1G3i1G3iO>eQSO1G3kO$.VQUO1G3mO$2ZQUO'#HlOOQQ1G3p1G3pO$2hQSO'#HrO>jQSO'#HtOOQQ1G3v1G3vO$2pQUO1G3vO9eQ(C[O1G3|OOQQ1G4O1G4OOOQ(CW'#GX'#GXO9eQ(C[O1G4QO9eQ(C[O1G4SO$6wQSO,5@TO!*SQUO,5;YO9TQSO,5;YO>jQSO,5:SO!*SQUO,5:SO!@eQWO,5:SO$6|Q$IUO,5:SOOQO,5;Y,5;YO$7WQWO'#I]O$7nQSO,5@SOOQ(CY1G/m1G/mO$7vQWO'#IcO$8QQSO,5@bOOQ(CW1G0s1G0sO# SQWO,5:SOOQO'#I`'#I`O$8YQWO,5:nOOQ(CY,5:n,5:nO#$}QSO1G0WOOQ(CY1G0W1G0WO%[QUO1G0WOOQ(CY1G0n1G0nO>jQSO1G0nO!@eQWO1G0nO!@mQ,UO1G0nOOQ(CW1G5o1G5oO!@YQ(C[O1G0ZOOQO1G0g1G0gO%[QUO1G0gO$8aQ(C[O1G0gO$8lQ(C[O1G0gO!@eQWO1G0ZOChQWO1G0ZO$8zQ(C[O1G0gOOQO1G0Z1G0ZO$9`Q(CjO1G0gPOOO-E<S-E<SPOOO1G.f1G.fOOOO1G/d1G/dO$9jQ`O,5<dO$9rQbO1G4bOOQO1G4h1G4hO%[QUO,5>vO$9|QSO1G5mO$:UQSO1G5zO$:^QbO1G5{O9TQSO,5>|O$:hQ(CjO1G5xO%[QUO1G5xO$:xQ(C[O1G5xO$;ZQSO1G5wO$;ZQSO1G5wO9TQSO1G5wO$;cQSO,5?PO9TQSO,5?POOQO,5?P,5?PO$;wQSO,5?PO$$XQSO,5?POOQO-E<c-E<cOOQO1G0^1G0^OOQO1G0`1G0`O!,YQSO1G0`OOQQ7+(^7+(^O!&^Q,UO7+(^O%[QUO7+(^O$<VQSO7+(^O$<bQ,UO7+(^O$<pQ(CjO,59oO$>xQ(CjO,5<eO$ATQ(CjO,5<gO$C`Q(CjO,5<uOOQ(CY7+&Z7+&ZO$EqQ(CjO7+&ZO$FeQ,UO'#I^O$FoQSO,5@UOOQ(CY1G/w1G/wO$FwQUO'#I_O$GUQSO,5@VO$G^QbO,5@VOOQ(CY1G/|1G/|O$GhQSO7+&dOOQ(CY7+&d7+&dO$GmQ$IUO,5:cO%[QUO7+&vO$GwQ$IUO,5:ZO$HUQ$IUO,5:gO$H`Q$IUO,5:iOOQ(CY7+&|7+&|OOQO1G1n1G1nOOQO1G1o1G1oO$HjQ#tO,5<VO!*SQUO,5<UOOQO-E<d-E<dOOQ(CY7+'U7+'UOOOO7+'a7+'aOOOO1G1x1G1xO$HuQSO1G1xOOQ(CY1G1z1G1zO$HzQ`O,59iOOOO-E<W-E<WOOQ(CY1G/R1G/RO$IRQ(CjO7+'gOOQ(CY,5?U,5?UO$IuQ`O,5?UOOQ(CY1G2`1G2`P!&^Q,UO'#IjPOQ(CY-E<h-E<hO$JeQ,UO1G2lO$KWQ,UO1G2nO$KbQ`O1G2pOOQ(CY1G2X1G2XO$KiQSO'#IiO$KwQSO,5@iO$KwQSO,5@iO$LPQSO,5@iO$L[QSO,5@iOOQO1G2Z1G2ZO$LjQ,UO1G2YO!'vQ,UO1G2YO$LzQMhO'#IkO$M[QSO,5@jO!&^Q,UO,5@jO$MdQ`O,5@jOOQ(CY1G2^1G2^OOQ(CW,5<w,5<wOOQ(CW,5<x,5<xO$$XQSO,5<xOCXQSO,5<xO!@eQWO,5<wOOQO'#G`'#G`O$MnQSO,5<yOOQ(CW,5<{,5<{O$$XQSO,5=OOOQO,5?W,5?WOOQO-E<j-E<jOOQ(CY1G2b1G2bO!3{QWO,5<wO$MvQSO,5<xO#MuQSO,5<yO!3{QWO,5<xO$NRQ,UO1G5eO$N]Q,UO1G5eOOQO,5?X,5?XOOQO-E<k-E<kOOQO1G.x1G.xO!7cQWO,59qO%[QUO,59qO$NjQSO1G2TO!'vQ,UO1G2[O$NoQ(CjO7+'hOOQ(CY7+'h7+'hO!$ZQUO7+'hO% cQSO,5;YOOQ(CW,5?Z,5?ZOOQ(CW-E<m-E<mOOQ(CY7+%a7+%aO% hQ`O'#KPO#$}QSO7+(^O% rQbO7+(^O$<YQSO7+(^O% yQ(ChO'#CgO%!^Q(ChO,5<|O%#OQSO,5<|OOQ(CW1G5b1G5bOOQQ7+$_7+$_O!@YQ(C[O7+$_O!@eQWO7+$_O!$ZQUO7+&ZO%#TQSO'#ItO%#iQSO,5@rOOQO1G3`1G3`O9ZQSO,5@rO%#iQSO,5@rO%#qQSO,5@rOOQO,5?a,5?aOOQO-E<s-E<sOOQ(CY7+'O7+'OO%#vQSO7+(yO9eQ(C[O7+(yO9ZQSO7+(yO@[QSO7+(yOOQQ7+(i7+(iO%#{Q(ChO7+(fO!&^Q,UO7+(fO%$VQ`O7+(gOOQQ7+(g7+(gO!&^Q,UO7+(gO%$^QSO'#KTO%$iQSO,5=eOOQO,5?],5?]OOQO-E<o-E<oOOQQ7+(l7+(lO%%xQWO'#HSOOQQ1G3X1G3XO!&^Q,UO1G3XO%[QUO1G3XO%&PQSO1G3XO%&[Q,UO1G3XO9eQ(C[O1G3ZO#MzQSO1G3ZO9OQSO1G3ZO!@eQWO1G3ZO!@mQ,UO1G3ZO%&jQSO'#IsO%&uQSO,5@pO%&}QWO,5@pOOQ(CW1G3[1G3[OOQQ7+$T7+$TO@[QSO7+$TO9eQ(C[O7+$TO%'YQSO7+$TO%[QUO1G6_O%[QUO1G6`O%'_Q(C[O1G6_O%'iQUO1G3cO%'pQSO1G3cO%'uQUO1G3cOOQQ7+({7+({O9eQ(C[O7+)VO`QUO7+)XOOQQ'#KZ'#KZOOQQ'#Iv'#IvO%'|QUO,5>WOOQQ,5>W,5>WO%[QUO'#HmO%(ZQSO'#HoOOQQ,5>^,5>^O9TQSO,5>^OOQQ,5>`,5>`OOQQ7+)b7+)bOOQQ7+)h7+)hOOQQ7+)l7+)lOOQQ7+)n7+)nO%(`QWO1G5oO%(tQ$IUO1G0tO%)OQSO1G0tOOQO1G/n1G/nO%)ZQ$IUO1G/nO>jQSO1G/nO!*SQUO'#DhOOQO,5>w,5>wOOQO-E<Z-E<ZOOQO,5>},5>}OOQO-E<a-E<aO!@eQWO1G/nOOQO-E<^-E<^OOQ(CY1G0Y1G0YOOQ(CY7+%r7+%rO#$}QSO7+%rOOQ(CY7+&Y7+&YO>jQSO7+&YO!@eQWO7+&YOOQO7+%u7+%uO$9`Q(CjO7+&ROOQO7+&R7+&RO%[QUO7+&RO%)eQ(C[O7+&RO!@YQ(C[O7+%uO!@eQWO7+%uO%)pQ(C[O7+&RO%*OQ(CjO7++dO%[QUO7++dO%*`QSO7++cO%*`QSO7++cOOQO1G4k1G4kO9TQSO1G4kO%*hQSO1G4kOOQO7+%z7+%zO#$}QSO<<KxO% rQbO<<KxO%*vQSO<<KxOOQQ<<Kx<<KxO!&^Q,UO<<KxO%[QUO<<KxO%+OQSO<<KxO%+ZQ(CjO1G2lO%-fQ(CjO1G2nO%/qQ(CjO1G2YO%2SQ,UO,5>xOOQO-E<[-E<[O%2^QbO,5>yO%[QUO,5>yOOQO-E<]-E<]O%2hQSO1G5qOOQ(CY<<JO<<JOO%2pQ$IUO1G0oO%4zQ$IUO1G0yO%5RQ$IUO1G0yO%7VQ$IUO1G0yO%7^Q$IUO1G0yO%9RQ$IUO1G0yO%9iQ$IUO1G0yO%;|Q$IUO1G0yO%<TQ$IUO1G0yO%>XQ$IUO1G0yO%>`Q$IUO1G0yO%@WQ$IUO1G0yO%@kQ(CjO<<JbO%ApQ$IUO1G0yO%CfQ$IUO'#J`O%EiQ$IUO1G1_O%EvQ$IUO1G0RO!*SQUO'#FmOOQO'#J{'#J{OOQO1G1q1G1qO%FQQSO1G1pO%FVQ$IUO,5?SOOOO7+'d7+'dOOOO1G/T1G/TOOQ(CY1G4p1G4pO!'vQ,UO7+([O%FaQSO,5?TO9ZQSO,5?TOOQO-E<g-E<gO%FoQSO1G6TO%FoQSO1G6TO%FwQSO1G6TO%GSQ,UO7+'tO%GdQ`O,5?VO%GnQSO,5?VO!&^Q,UO,5?VOOQO-E<i-E<iO%GsQ`O1G6UO%G}QSO1G6UOOQ(CW1G2d1G2dO$$XQSO1G2dOOQ(CW1G2c1G2cO%HVQSO1G2eO!&^Q,UO1G2eOOQ(CW1G2j1G2jO!@eQWO1G2cOCXQSO1G2dO%H[QSO1G2eO%HdQSO1G2dO!'vQ,UO7++POOQ(CY1G/]1G/]O%HoQSO1G/]OOQ(CY7+'o7+'oO%HtQ,UO7+'vO%IUQ(CjO<<KSOOQ(CY<<KS<<KSO%IxQSO1G0tO!&^Q,UO'#InO%I}QSO,5@kO!&^Q,UO1G2hOOQQ<<Gy<<GyO!@YQ(C[O<<GyO%JVQ(CjO<<IuOOQ(CY<<Iu<<IuOOQO,5?`,5?`O%JyQSO,5?`O$(sQSO,5?`OOQO-E<r-E<rO%KOQSO1G6^O%KOQSO1G6^O9ZQSO1G6^O@[QSO<<LeOOQQ<<Le<<LeO%KWQSO<<LeO9eQ(C[O<<LeOOQQ<<LQ<<LQO%#{Q(ChO<<LQOOQQ<<LR<<LRO%$VQ`O<<LRO%K]QWO'#IpO%KhQSO,5@oO!*SQUO,5@oOOQQ1G3P1G3PO%KpQUO'#JiOOQO'#Ir'#IrO9eQ(C[O'#IrO%KzQWO,5=nOOQQ,5=n,5=nO%LRQWO'#EaO%LgQSO7+(sO%LlQSO7+(sOOQQ7+(s7+(sO!&^Q,UO7+(sO%[QUO7+(sO%LtQSO7+(sOOQQ7+(u7+(uO9eQ(C[O7+(uO#MzQSO7+(uO9OQSO7+(uO!@eQWO7+(uO%MPQSO,5?_OOQO-E<q-E<qOOQO'#HV'#HVO%M[QSO1G6[O9eQ(C[O<<GoOOQQ<<Go<<GoO@[QSO<<GoO%MdQSO7++yO%MiQSO7++zO%[QUO7++yO%[QUO7++zOOQQ7+(}7+(}O%MnQSO7+(}O%MsQUO7+(}O%MzQSO7+(}OOQQ<<Lq<<LqOOQQ<<Ls<<LsOOQQ-E<t-E<tOOQQ1G3r1G3rO%NPQSO,5>XOOQQ,5>Z,5>ZO%NUQSO1G3xO9TQSO7+&`O!*SQUO7+&`OOQO7+%Y7+%YO%NZQ$IUO1G5{O>jQSO7+%YOOQ(CY<<I^<<I^OOQ(CY<<It<<ItO>jQSO<<ItOOQO<<Im<<ImO$9`Q(CjO<<ImO%[QUO<<ImOOQO<<Ia<<IaO!@YQ(C[O<<IaO%NeQ(C[O<<ImO%NpQ(CjO<= OO& QQSO<<N}OOQO7+*V7+*VO9TQSO7+*VOOQQANAdANAdO& YQSOANAdO!&^Q,UOANAdO#$}QSOANAdO% rQbOANAdO%[QUOANAdO& bQ(CjO7+'tO&#sQ(CjO7+'vO&&UQbO1G4eO&&`Q$IUO7+&ZO&&mQ$IUO,59oO&(pQ$IUO,5<eO&*sQ$IUO,5<gO&,vQ$IUO,5<uO&.lQ$IUO7+'gO&.yQ$IUO7+'hO&/WQSO,5<XOOQO7+'[7+'[O&/]Q,UO<<KvOOQO1G4o1G4oO&/dQSO1G4oO&/oQSO1G4oO&/}QSO7++oO&/}QSO7++oO!&^Q,UO1G4qO&0VQ`O1G4qO&0aQSO7++pOOQ(CW7+(O7+(OO$$XQSO7+(PO&0iQ`O7+(POOQ(CW7+'}7+'}O$$XQSO7+(OO&0pQSO7+(PO!&^Q,UO7+(POCXQSO7+(OO&0uQ,UO<<NkOOQ(CY7+$w7+$wO&1PQ`O,5?YOOQO-E<l-E<lO&1ZQ(ChO7+(SOOQQAN=eAN=eO9ZQSO1G4zOOQO1G4z1G4zO&1kQSO1G4zO&1pQSO7++xO&1pQSO7++xO9eQ(C[OANBPO@[QSOANBPOOQQANBPANBPOOQQANAlANAlOOQQANAmANAmO&1xQSO,5?[OOQO-E<n-E<nO&2TQ$IUO1G6ZO&4eQbO'#CgOOQO,5?^,5?^OOQO-E<p-E<pOOQQ1G3Y1G3YO%KpQUO,5<yOOQQ<<L_<<L_O!&^Q,UO<<L_O%LgQSO<<L_O&4oQSO<<L_O%[QUO<<L_OOQQ<<La<<LaO9eQ(C[O<<LaO#MzQSO<<LaO9OQSO<<LaO&4wQWO1G4yO&5SQSO7++vOOQQAN=ZAN=ZO9eQ(C[OAN=ZOOQQ<= e<= eOOQQ<= f<= fO&5[QSO<= eO&5aQSO<= fOOQQ<<Li<<LiO&5fQSO<<LiO&5kQUO<<LiOOQQ1G3s1G3sO>jQSO7+)dO&5rQSO<<IzO&5}Q$IUO<<IzOOQO<<Ht<<HtOOQ(CYAN?`AN?`OOQOAN?XAN?XO$9`Q(CjOAN?XOOQOAN>{AN>{O%[QUOAN?XOOQO<<Mq<<MqOOQQG27OG27OO!&^Q,UOG27OO#$}QSOG27OO&6XQSOG27OO% rQbOG27OO&6aQ$IUO<<JbO&6nQ$IUO1G2YO&8dQ$IUO1G2lO&:gQ$IUO1G2nO&<jQ$IUO<<KSO&<wQ$IUO<<IuOOQO1G1s1G1sO!'vQ,UOANAbOOQO7+*Z7+*ZO&=UQSO7+*ZO&=aQSO<= ZO&=iQ`O7+*]OOQ(CW<<Kk<<KkO$$XQSO<<KkOOQ(CW<<Kj<<KjO&=sQ`O<<KkO$$XQSO<<KjOOQO7+*f7+*fO9ZQSO7+*fO&=zQSO<= dOOQQG27kG27kO9eQ(C[OG27kO!*SQUO1G4vO&>SQSO7++uO%LgQSOANAyOOQQANAyANAyO!&^Q,UOANAyO&>[QSOANAyOOQQANA{ANA{O9eQ(C[OANA{O#MzQSOANA{OOQO'#HW'#HWOOQO7+*e7+*eOOQQG22uG22uOOQQANEPANEPOOQQANEQANEQOOQQANBTANBTO&>dQSOANBTOOQQ<<MO<<MOO!*SQUOAN?fOOQOG24sG24sO$9`Q(CjOG24sO#$}QSOLD,jOOQQLD,jLD,jO!&^Q,UOLD,jO&>iQSOLD,jO&>qQ$IUO7+'tO&@gQ$IUO7+'vO&B]Q,UOG26|OOQO<<Mu<<MuOOQ(CWANAVANAVO$$XQSOANAVOOQ(CWANAUANAUOOQO<<NQ<<NQOOQQLD-VLD-VO&BmQ$IUO7+*bOOQQG27eG27eO%LgQSOG27eO!&^Q,UOG27eOOQQG27gG27gO9eQ(C[OG27gOOQQG27oG27oO&BwQ$IUOG25QOOQOLD*_LD*_OOQQ!$(!U!$(!UO#$}QSO!$(!UO!&^Q,UO!$(!UO&CRQ(CjOG26|OOQ(CWG26qG26qOOQQLD-PLD-PO%LgQSOLD-POOQQLD-RLD-ROOQQ!)9Ep!)9EpO#$}QSO!)9EpOOQQ!$(!k!$(!kOOQQ!.K;[!.K;[O&EdQ$IUOG26|O!*SQUO'#DwO1PQSO'#EUO&GYQbO'#JeO!*SQUO'#DoO&GaQUO'#D{O&GhQbO'#CgO&JOQbO'#CgO!*SQUO'#D}O&J`QUO,5;TO!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO,5;_O!*SQUO'#IhO&LcQSO,5<dO&LkQ,UO,5;_O&NOQ,UO,5;_O!*SQUO,5;sO1SQSO'#DTO1SQSO'#DTO!&^Q,UO'#FyO&LkQ,UO'#FyO!&^Q,UO'#F{O&LkQ,UO'#F{O!&^Q,UO'#GZO&LkQ,UO'#GZO!*SQUO,5:gO!*SQUO,5@aO&J`QUO1G0oO&NVQ$IUO'#CgO!*SQUO1G1{O!&^Q,UO,5=QO&LkQ,UO,5=QO!&^Q,UO,5=SO&LkQ,UO,5=SO!&^Q,UO,5<nO&LkQ,UO,5<nO&J`QUO1G1|O!*SQUO7+&vO!&^Q,UO1G2YO&LkQ,UO1G2YO!&^Q,UO1G2[O&LkQ,UO1G2[O&J`QUO7+'hO&J`QUO7+&ZO!&^Q,UOANAbO&LkQ,UOANAbO&NaQSO'#EiO&NfQSO'#EiO&NnQSO'#FXO&NsQSO'#EsO&NxQSO'#JuO' TQSO'#JsO' `QSO,5;TO' eQ,UO,5<aO' lQSO'#GSO' qQSO'#GSO' vQSO,5<bO'!OQSO,5;TO'!WQ$IUO1G1[O'!_QSO,5<nO'!dQSO,5<nO'!iQSO,5<pO'!nQSO,5<pO'!sQSO1G1|O'!xQSO1G0oO'!}Q,UO<<KvO'#UQ,UO<<KvO7hQ,UO'#FwO9OQSO'#FvOAVQSO'#EhO!*SQUO,5;pO!2|QSO'#GSO!2|QSO'#GSO!2|QSO'#GUO!2|QSO'#GUO!'vQ,UO7+([O!'vQ,UO7+([O$KbQ`O1G2pO$KbQ`O1G2pO!&^Q,UO,5=UO!&^Q,UO,5=U",stateData:"'$_~O'oOS'pOSROS'qRQ~OPYOQYOW!VO_qObzOcyOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!YXO!duO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#q!PO$R|O$VfO%a}O%c!QO%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO%r!UO&O!WO&U!XO&W!YO&Y!ZO&[![O&_!]O&e!^O&k!_O&m!`O&o!aO&q!bO&s!cO'vSO'xTO'{UO(TVO(c[O(piO~OUtO~P`OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~O_!vOm!nO}!oO!]!xO!^!uO!_!uO!y9rO!}!pO#O!pO#P!wO#Q!pO#R!pO#U!yO#V!yO'w!lO'xTO'{UO(W!mO(c!sO~O'q!zO~OPZXYZX_ZXlZXzZX{ZX}ZX!WZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX'mZX(TZX(dZX(kZX(lZX~O!b${X~P(qO]!|O'x#OO'y!|O'z#OO~O]#PO'z#OO'{#OO'|#PO~Or#RO!P#SO(U#SO(V#UO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v9vO'xTO'{UO(TVO(c[O(piO~O!V#YO!W#VO!T(ZP!T(hP~P+}O!X#bO~P`OPYOQYOb!jOc!iOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'xTO'{UO(TVO(c[O(piO~Oj#lO!V#hO!y]O#c#kO#d#hO'v9wO!h(eP~P.iO!i#nO'v#mO~O!u#rO!y]O%a#sO~O#e#tO~O!b#uO#e#tO~OP$]OY$dOl$QOz#yO{#zO}#{O!W$aO!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O_(XX'm(XX'k(XX!h(XX!T(XX!Y(XX%b(XX!b(XX~P1qO#Y$eO#|$eOP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#p(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX!Y(YX%b(YX~O_(YX!g(YX'm(YX'k(YX!T(YX!h(YXp(YX!b(YX~P4XO#Y$eO~O$X$gO$Z$fO$b$lO~O!Y$mO$VfO$e$nO$g$pO~Oj%SOl$tOm$sOn$sOt%TOv%UOx%VO}${O!Y$|O!d%[O!i$xO#d%]O$R%YO$n%WO$p%XO$s%ZO'v$rO'xTO'{UO(P%RO(T$uOe(QP~O!i%^O~O}%aO!Y%bO'v%`O~O!b%fO~O_%gO'm%gO~O'w!lO~P%[O%g%nO~P%[O!i%^O'v%`O'w!lO(P%RO~Oc%uO!i%^O'v%`O~O#p$SO~Oz%zO!Y%wO!i%yO%c%}O'v%`O'w!lO'xTO'{UO^(yP~O!u#rO~O%l&PO}(uX!Y(uX'v(uX~O'v&QO~O!r&VO#q!PO%c!QO%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO~Ob&[Oc&ZO!u&XO%a&YO%t&WO~P;rOb&_OcyO!Y&^O!r&VO!uxO!y]O#q!PO%a}O%e!OO%f!OO%g!OO%j!RO%l!SO%o!TO%p!TO%r!UO~O`&bO#Y&eO%c&`O'w!lO~P<wO!i&fO!r&jO~O!i#nO~O!YXO~O_%gO'l&rO'm%gO~O_%gO'l&uO'm%gO~O_%gO'l&wO'm%gO~O'kZX!TZXpZX!hZX&SZX!YZX%bZX!bZX~P(qO!]'UO!^&}O!_&}O'w!lO'xTO'{UO~Om&{O}&zO!V'OO(W&yO!X([P!X(jP~P@OOh'XO!Y'VO'v%`O~Oc'^O!i%^O'v%`O~Oz%zO!i%yO~Om!nO}!oO!y9rO!}!pO#O!pO#Q!pO#R!pO'w!lO'xTO'{UO(W!mO(c!sO~O!]'dO!^'cO!_'cO#P!pO#U'eO#V'eO~PAjO_%gO!b#uO!i%^O'm%gO(P%RO(d'gO~O!m'kO#Y'iO~PBxOm!nO}!oO'xTO'{UO(W!mO(c!sO~O!YXOm(aX}(aX!](aX!^(aX!_(aX!y(aX!}(aX#O(aX#P(aX#Q(aX#R(aX#U(aX#V(aX'w(aX'x(aX'{(aX(W(aX(c(aX~O!^'cO!_'cO'w!lO~PChO'r'oO's'oO't'qO~O]!|O'x'sO'y!|O'z'sO~O]#PO'z'sO'{'sO'|#PO~Or#RO!P#SO(U#SO(V'wO~O!V'yO!T'OX!T'UX!W'OX!W'UX~P+}O!W'{O!T(ZX~OP$]OY$dOl$QOz#yO{#zO}#{O!W'{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O!T(ZX~PG[O!T(QO~O!T(gX!W(gX!b(gX!h(gX(d(gX~O#Y(gX#e#^X!X(gX~PIbO#Y(RO!T(iX!W(iX~O!W(SO!T(hX~O!T(VO~O#Y$eO~PIbO!X(WO~P`Oz#yO{#zO}#{O!g#wO!i#xO(TVOP!kaY!kal!ka!W!ka!f!ka!m!ka#h!ka#i!ka#j!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#r!ka#t!ka#v!ka#w!ka(d!ka(k!ka(l!ka~O_!ka'm!ka'k!ka!T!ka!h!kap!ka!Y!ka%b!ka!b!ka~PJxO!h(XO~O!b#uO#Y(YO(d'gO!W(fX_(fX'm(fX~O!h(fX~PMhO}%aO!Y%bO!y]O#c(_O#d(^O'v%`O~O!W(`O!h(eX~O!h(bO~O}%aO!Y%bO#d(^O'v%`O~OP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!g(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#p(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX~O!b#uO!h(YX~P! UOz(cO{(dO!g#wO!i#xO!y!xa}!xa~O!u!xa%a!xa!Y!xa#c!xa#d!xa'v!xa~P!#YO!u(hO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!YXO!duO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~Oj%SOl$tOm$sOn$sOt%TOv%UOx:[O}${O!Y$|O!d;fO!i$xO#d:bO$R%YO$n:^O$p:`O$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~O#e(nO~Oj%SOl$tOm$sOn$sOt%TOv%UOx%VO}${O!Y$|O!d%[O!i$xO#d%]O$R%YO$n%WO$p%XO$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~Oe(^P~P!'vO!V(rO!h(_P~P%[O(W(tO(c[O~O}(vO!i#xO(W(tO(c[O~OP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!Y!eO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'v)UO'xTO'{UO(TVO(c[O(p;`O~O{)XO!i#xO~O!W$aO_$la'm$la'k$la!h$la!T$la!Y$la%b$la!b$la~O#q)]O~P!&^Oz)`O!b)_O!Y$YX$U$YX$X$YX$Z$YX$b$YX~O!b)_O!Y(mX$U(mX$X(mX$Z(mX$b(mX~Oz)`O~P!-lOz)`O!Y(mX$U(mX$X(mX$Z(mX$b(mX~O!Y)bO$U)fO$X)aO$Z)aO$b)gO~O!V)jO~P!*SO$X$gO$Z$fO$b)nO~Oh$tXz$tX}$tX!g$tX(k$tX(l$tX~OegXe$tXhgX!WgX#YgX~P!/bOm)pO~Or)qO(U)rO(V)tO~Oh)}Oz)vO})wO(k)yO(l){O~Oe)uO~P!0kOe*OO~Oj%SOl$tOm$sOn$sOt%TOv%UOx:[O}${O!Y$|O!d;fO!i$xO#d:bO$R%YO$n:^O$p:`O$s%ZO'xTO'{UO(P%RO(T$uO~O!V*SO'v*PO!h(qP~P!1YO#e*UO~O!i*VO~O!V*[O'v*XO!T(rP~P!1YOl*hO}*`O!]*fO!^*_O!_*_O!i*VO#U*gO%X*bO'w!lO(W!mO~O!X*eO~P!3`O!g#wOh(SXz(SX}(SX(k(SX(l(SX!W(SX#Y(SX~Oe(SX#z(SX~P!4XOh*kO#Y*jOe(RX!W(RX~O!W*lOe(QX~O'v&QOe(QP~O!i*sO~O'v(lO~Oj*wO}%aO!V#hO!Y%bO!y]O#c#kO#d#hO'v%`O!h(eP~O!b#uO#e*xO~O}%aO!V*zO!W(SO!Y%bO'v%`O!T(hP~Om'RO}*|O!V*{O'xTO'{UO(W(tO~O!X(jP~P!7SO!W*}O_(vX'm(vX~OP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO#w$YO(TVO(d$ZO(k#|O(l#}O~O_!ca!W!ca'm!ca'k!ca!T!ca!h!cap!ca!Y!ca%b!ca!b!ca~P!7zOz#yO{#zO}#{O!g#wO!i#xO(TVOP!oaY!oal!oa!W!oa!f!oa!m!oa#h!oa#i!oa#j!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#r!oa#t!oa#v!oa#w!oa(d!oa(k!oa(l!oa~O_!oa'm!oa'k!oa!T!oa!h!oap!oa!Y!oa%b!oa!b!oa~P!:eOz#yO{#zO}#{O!g#wO!i#xO(TVOP!qaY!qal!qa!W!qa!f!qa!m!qa#h!qa#i!qa#j!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#r!qa#t!qa#v!qa#w!qa(d!qa(k!qa(l!qa~O_!qa'm!qa'k!qa!T!qa!h!qap!qa!Y!qa%b!qa!b!qa~P!=OOh+WO!Y'VO%b+VO(P%RO~O!b+YO_(OX!Y(OX'm(OX!W(OX~O_%gO!YXO'm%gO~O!i%^O(P%RO~O!i%^O'v%`O(P%RO~O!b#uO#e(nO~O%c+fO'v+bO'xTO'{UO!X(zP~O!W+gO^(yX~OY+kO~O^+lO~O!Y%wO'v%`O'w!lO^(yP~O#Y+qO(P%RO~Oh+tO!Y$|O(P%RO~O!Y+vO~Oz+xO!YXO~O%g%nO~O!u+}O~Oc,SO~O'v#mO!X(xP~Oc%uO~O%c!QO'v&QO~P<wOY,YO^,XO~OPYOQYObzOcyOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!duO!iZO!lYO!mYO!nYO!pvO!uxO!y]O$VfO%a}O'xTO'{UO(TVO(c[O(piO~O!Y!eO!r!gO$R!kO'v!dO~P!CuO^,XO_%gO'm%gO~OPYOQYOb!jOc!iOjkOlYOmkOnkOtkOvYOxYO}WO!RkO!SkO!Y!eO!duO!iZO!lYO!mYO!nYO!pvO!u!hO$R!kO$VfO'v!dO'xTO'{UO(TVO(c[O(piO~O_,_O!rwO#q!OO%e!OO%f!OO%g!OO~P!F_O!i&fO~O&U,eO~O!Y,gO~O&g,iO&i,jOP&daQ&daW&da_&dab&dac&daj&dal&dam&dan&dat&dav&dax&da}&da!R&da!S&da!Y&da!d&da!i&da!l&da!m&da!n&da!p&da!r&da!u&da!y&da#q&da$R&da$V&da%a&da%c&da%e&da%f&da%g&da%j&da%l&da%o&da%p&da%r&da&O&da&U&da&W&da&Y&da&[&da&_&da&e&da&k&da&m&da&o&da&q&da&s&da'k&da'v&da'x&da'{&da(T&da(c&da(p&da!X&da&]&da`&da&b&da~O'v,oO~O!W|X!W!`X!X|X!X!`X!b|X!b!`X!i!`X#Y|X(P!`X~O!b,tO#Y,sO!W#bX!W(]X!X#bX!X(]X!b(]X!i(]X(P(]X~O!b,vO!i%^O(P%RO!W![X!X![X~Om!nO}!oO'xTO'{UO(W!mO~OP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!Y!eO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'xTO'{UO(TVO(c[O(p;`O~O'v:gO~P# eO!W,zO!X([X~O!X,|O~O!b,tO#Y,sO!W#bX!X#bX~O!W,}O!X(jX~O!X-PO~O!^-QO!_-QO'w!lO~P# SO!X-TO~P'_Oh-WO!Y'VO~O!T-]O~Om!xa!]!xa!^!xa!_!xa!}!xa#O!xa#P!xa#Q!xa#R!xa#U!xa#V!xa'w!xa'x!xa'{!xa(W!xa(c!xa~P!#YO!m-bO#Y-`O~PBxO!^-dO!_-dO'w!lO~PChO_%gO#Y-`O'm%gO~O_%gO!b#uO#Y-`O'm%gO~O_%gO!b#uO!m-bO#Y-`O'm%gO(d'gO~O'r'oO's'oO't-iO~Op-jO~O!T'Oa!W'Oa~P!7zO!V-nO!T'OX!W'OX~P%[O!W'{O!T(Za~O!T(Za~PG[O!W(SO!T(ha~O}%aO!V-rO!Y%bO'v%`O!T'UX!W'UX~O#Y-tO!W(fa!h(fa_(fa'm(fa~O!b#uO~P#)kO!W(`O!h(ea~O}%aO!Y%bO#d-xO'v%`O~Oj-}O}%aO!V-zO!Y%bO!y]O#c-|O#d-zO'v%`O!W'XX!h'XX~O{.RO!i#xO~Oh.UO!Y'VO%b.TO(P%RO~O_#]i!W#]i'm#]i'k#]i!T#]i!h#]ip#]i!Y#]i%b#]i!b#]i~P!7zOh;lOz)vO})wO(k)yO(l){O~O#e#Xa_#Xa#Y#Xa'm#Xa!W#Xa!h#Xa!Y#Xa!T#Xa~P#,gO#e(SXP(SXY(SX_(SXl(SX{(SX!f(SX!i(SX!m(SX#h(SX#i(SX#j(SX#k(SX#l(SX#m(SX#n(SX#o(SX#p(SX#r(SX#t(SX#v(SX#w(SX'm(SX(T(SX(d(SX!h(SX!T(SX'k(SXp(SX!Y(SX%b(SX!b(SX~P!4XO!W._Oe(^X~P!0kOe.aO~O!W.bO!h(_X~P!7zO!h.eO~O!T.gO~OP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O(TVOY#gi_#gil#gi!W#gi!f#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O#h#gi~P#0cO#h$OO~P#0cOP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO(TVOY#gi_#gi!W#gi!f#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~Ol#gi~P#3TOl$QO~P#3TOP$]Ol$QOz#yO{#zO}#{O!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO(TVO_#gi!W#gi#r#gi#t#gi#v#gi#w#gi'm#gi(d#gi(k#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~OY#gi!f#gi#m#gi#n#gi#o#gi#p#gi~P#5uOY$dO!f$SO#m$SO#n$SO#o$cO#p$SO~P#5uOP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO(TVO_#gi!W#gi#t#gi#v#gi#w#gi'm#gi(d#gi(l#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O(k#gi~P#8vO(k#|O~P#8vOP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO(TVO(k#|O_#gi!W#gi#v#gi#w#gi'm#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~O(l#gi~P#;hO(l#}O~P#;hOP$]OY$dOl$QOz#yO{#zO}#{O!f$SO!g#wO!i#xO!m$]O#h$OO#i$PO#j$PO#k$PO#l$RO#m$SO#n$SO#o$cO#p$SO#r$TO#t$VO#v$XO(TVO(k#|O(l#}O~O_#gi!W#gi#w#gi'm#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~P#>YOPZXYZXlZXzZX{ZX}ZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX!WZX!XZX~O#zZX~P#@sOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO#v:TO#w:UO(TVO(d$ZO(k#|O(l#}O~O#z.iO~P#CQO#Y:ZO#|:ZO#z(YX!X(YX~P! UO_'[a!W'[a'm'[a'k'[a!h'[a!T'[ap'[a!Y'[a%b'[a!b'[a~P!7zOP#giY#gi_#gil#gi{#gi!W#gi!f#gi!g#gi!i#gi!m#gi#h#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi'm#gi(T#gi(d#gi'k#gi!T#gi!h#gip#gi!Y#gi%b#gi!b#gi~P#,gO_#{i!W#{i'm#{i'k#{i!T#{i!h#{ip#{i!Y#{i%b#{i!b#{i~P!7zO$X.nO$Z.nO~O$X.oO$Z.oO~O!b)_O#Y.pO!Y$_X$U$_X$X$_X$Z$_X$b$_X~O!V.qO~O!Y)bO$U.sO$X)aO$Z)aO$b.tO~O!W:VO!X(XX~P#CQO!X.uO~O!b)_O$b(mX~O$b.wO~Or)qO(U)rO(V.zO~O!T/OO~P!&^O!WdX!bdX!hdX!h$tX(ddX~P!/bO!h/UO~P#,gO!W/VO!b#uO(d'gO!h(qX~O!h/[O~O!V*SO'v%`O!h(qP~O#e/^O~O!T$tX!W$tX!b${X~P!/bO!W/_O!T(rX~P#,gO!b/aO~O!T/cO~Ol/gO!b#uO!i%^O(P%RO(d'gO~O'v/iO~O!b+YO~O_%gO!W/mO'm%gO~O!X/oO~P!3`O!^/pO!_/pO'w!lO(W!mO~O}/rO(W!mO~O#U/sO~O'v&QOe'aX!W'aX~O!W*lOe(Qa~Oe/xO~Oz/yO{/yO}/zOhwa(kwa(lwa!Wwa#Ywa~Oewa#zwa~P$ hOz)vO})wOh$ma(k$ma(l$ma!W$ma#Y$ma~Oe$ma#z$ma~P$!^Oz)vO})wOh$oa(k$oa(l$oa!W$oa#Y$oa~Oe$oa#z$oa~P$#PO#e/|O~Oe$}a!W$}a#Y$}a#z$}a~P!0kO!b#uO~O#e0PO~O!W*}O_(va'm(va~Oz#yO{#zO}#{O!g#wO!i#xO(TVOP!oiY!oil!oi!W!oi!f!oi!m!oi#h!oi#i!oi#j!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#r!oi#t!oi#v!oi#w!oi(d!oi(k!oi(l!oi~O_!oi'm!oi'k!oi!T!oi!h!oip!oi!Y!oi%b!oi!b!oi~P$$nOh.UO!Y'VO%b.TO~Oj0ZO'v0YO~P!1]O!b+YO_(Oa!Y(Oa'm(Oa!W(Oa~O#e0aO~OYZX!WdX!XdX~O!W0bO!X(zX~O!X0dO~OY0eO~O'v+bO'xTO'{UO~O!Y%wO'v%`O^'iX!W'iX~O!W+gO^(ya~O!h0jO~P!7zOY0mO~O^0nO~O#Y0qO~Oh0tO!Y$|O~O(W(tO!X(wP~Oh0}O!Y0zO%b0|O(P%RO~OY1XO!W1VO!X(xX~O!X1YO~O^1[O_%gO'm%gO~O'v#mO'xTO'{UO~O#Y$eO#|$eOP(YXY(YXl(YXz(YX{(YX}(YX!W(YX!f(YX!i(YX!m(YX#h(YX#i(YX#j(YX#k(YX#l(YX#m(YX#n(YX#o(YX#r(YX#t(YX#v(YX#w(YX(T(YX(d(YX(k(YX(l(YX~O#p1_O&S1`O_(YX!g(YX~P$+dO#Y$eO#p1_O&S1`O~O_1bO~P%[O_1dO~O&]1gOP&ZiQ&ZiW&Zi_&Zib&Zic&Zij&Zil&Zim&Zin&Zit&Ziv&Zix&Zi}&Zi!R&Zi!S&Zi!Y&Zi!d&Zi!i&Zi!l&Zi!m&Zi!n&Zi!p&Zi!r&Zi!u&Zi!y&Zi#q&Zi$R&Zi$V&Zi%a&Zi%c&Zi%e&Zi%f&Zi%g&Zi%j&Zi%l&Zi%o&Zi%p&Zi%r&Zi&O&Zi&U&Zi&W&Zi&Y&Zi&[&Zi&_&Zi&e&Zi&k&Zi&m&Zi&o&Zi&q&Zi&s&Zi'k&Zi'v&Zi'x&Zi'{&Zi(T&Zi(c&Zi(p&Zi!X&Zi`&Zi&b&Zi~O`1mO!X1kO&b1lO~P`O!YXO!i1oO~O&i,jOP&diQ&diW&di_&dib&dic&dij&dil&dim&din&dit&div&dix&di}&di!R&di!S&di!Y&di!d&di!i&di!l&di!m&di!n&di!p&di!r&di!u&di!y&di#q&di$R&di$V&di%a&di%c&di%e&di%f&di%g&di%j&di%l&di%o&di%p&di%r&di&O&di&U&di&W&di&Y&di&[&di&_&di&e&di&k&di&m&di&o&di&q&di&s&di'k&di'v&di'x&di'{&di(T&di(c&di(p&di!X&di&]&di`&di&b&di~O!T1uO~O!W![a!X![a~P#CQOm!nO}!oO!V1{O(W!mO!W'PX!X'PX~P@OO!W,zO!X([a~O!W'VX!X'VX~P!7SO!W,}O!X(ja~O!X2SO~P'_O_%gO#Y2]O'm%gO~O_%gO!b#uO#Y2]O'm%gO~O_%gO!b#uO!m2aO#Y2]O'm%gO(d'gO~O_%gO'm%gO~P!7zO!W$aOp$la~O!T'Oi!W'Oi~P!7zO!W'{O!T(Zi~O!W(SO!T(hi~O!T(ii!W(ii~P!7zO!W(fi!h(fi_(fi'm(fi~P!7zO#Y2cO!W(fi!h(fi_(fi'm(fi~O!W(`O!h(ei~O}%aO!Y%bO!y]O#c2hO#d2gO'v%`O~O}%aO!Y%bO#d2gO'v%`O~Oh2oO!Y'VO%b2nO~Oh2oO!Y'VO%b2nO(P%RO~O#ewaPwaYwa_walwa!fwa!gwa!iwa!mwa#hwa#iwa#jwa#kwa#lwa#mwa#nwa#owa#pwa#rwa#twa#vwa#wwa'mwa(Twa(dwa!hwa!Twa'kwapwa!Ywa%bwa!bwa~P$ hO#e$maP$maY$ma_$mal$ma{$ma!f$ma!g$ma!i$ma!m$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#o$ma#p$ma#r$ma#t$ma#v$ma#w$ma'm$ma(T$ma(d$ma!h$ma!T$ma'k$map$ma!Y$ma%b$ma!b$ma~P$!^O#e$oaP$oaY$oa_$oal$oa{$oa!f$oa!g$oa!i$oa!m$oa#h$oa#i$oa#j$oa#k$oa#l$oa#m$oa#n$oa#o$oa#p$oa#r$oa#t$oa#v$oa#w$oa'm$oa(T$oa(d$oa!h$oa!T$oa'k$oap$oa!Y$oa%b$oa!b$oa~P$#PO#e$}aP$}aY$}a_$}al$}a{$}a!W$}a!f$}a!g$}a!i$}a!m$}a#h$}a#i$}a#j$}a#k$}a#l$}a#m$}a#n$}a#o$}a#p$}a#r$}a#t$}a#v$}a#w$}a'm$}a(T$}a(d$}a!h$}a!T$}a'k$}a#Y$}ap$}a!Y$}a%b$}a!b$}a~P#,gO_#]q!W#]q'm#]q'k#]q!T#]q!h#]qp#]q!Y#]q%b#]q!b#]q~P!7zOe'QX!W'QX~P!'vO!W._Oe(^a~O!V2wO!W'RX!h'RX~P%[O!W.bO!h(_a~O!W.bO!h(_a~P!7zO!T2zO~O#z!ka!X!ka~PJxO#z!ca!W!ca!X!ca~P#CQO#z!oa!X!oa~P!:eO#z!qa!X!qa~P!=OO!Y3^O$VfO$`3_O~O!X3cO~Op3dO~P#,gO_$iq!W$iq'm$iq'k$iq!T$iq!h$iqp$iq!Y$iq%b$iq!b$iq~P!7zO!T3eO~P#,gOz)vO})wO(l){Oh%Yi(k%Yi!W%Yi#Y%Yi~Oe%Yi#z%Yi~P$I|Oz)vO})wOh%[i(k%[i(l%[i!W%[i#Y%[i~Oe%[i#z%[i~P$JoO(d$ZO~P#,gO!V3hO'v%`O!W']X!h']X~O!W/VO!h(qa~O!W/VO!b#uO!h(qa~O!W/VO!b#uO(d'gO!h(qa~Oe$vi!W$vi#Y$vi#z$vi~P!0kO!V3pO'v*XO!T'_X!W'_X~P!1YO!W/_O!T(ra~O!W/_O!T(ra~P#,gO!b#uO#p3xO~Ol3{O!b#uO(d'gO~Oe(Ri!W(Ri~P!0kO#Y4OOe(Ri!W(Ri~P!0kO!h4RO~O_$jq!W$jq'm$jq'k$jq!T$jq!h$jqp$jq!Y$jq%b$jq!b$jq~P!7zO!T4VO~O!W4WO!Y(sX~P#,gO!g#wO~P4XO_$tX!Y$tX%VZX'm$tX!W$tX~P!/bO%V4YO_iXhiXziX}iX!YiX'miX(kiX(liX!WiX~O%V4YO~O%c4aO'v+bO'xTO'{UO!W'hX!X'hX~O!W0bO!X(za~OY4eO~O^4fO~O_%gO'm%gO~P#,gO!Y$|O~P#,gO!W4nO#Y4pO!X(wX~O!X4qO~Om!nO}4rO!]!xO!^!uO!_!uO!y9rO!}!pO#O!pO#P!pO#Q!pO#R!pO#U4wO#V!yO'w!lO'xTO'{UO(W!mO(c!sO~O!X4vO~P%$nOh4|O!Y0zO%b4{O~Oh4|O!Y0zO%b4{O(P%RO~O'v#mO!W'gX!X'gX~O!W1VO!X(xa~O'xTO'{UO(W5VO~O^5ZO~O#p5^O&S5_O~PMhO!h5`O~P%[O_5bO~O_5bO~P%[O`1mO!X5gO&b1lO~P`O!b5iO~O!b5kO!W(]i!X(]i!b(]i!i(]i(P(]i~O!W#bi!X#bi~P#CQO#Y5lO!W#bi!X#bi~O!W![i!X![i~P#CQO_%gO#Y5uO'm%gO~O_%gO!b#uO#Y5uO'm%gO~O!W(fq!h(fq_(fq'm(fq~P!7zO!W(`O!h(eq~O}%aO!Y%bO#d5|O'v%`O~O!Y'VO%b6PO~Oh6SO!Y'VO%b6PO~O#e%YiP%YiY%Yi_%Yil%Yi{%Yi!f%Yi!g%Yi!i%Yi!m%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#o%Yi#p%Yi#r%Yi#t%Yi#v%Yi#w%Yi'm%Yi(T%Yi(d%Yi!h%Yi!T%Yi'k%Yip%Yi!Y%Yi%b%Yi!b%Yi~P$I|O#e%[iP%[iY%[i_%[il%[i{%[i!f%[i!g%[i!i%[i!m%[i#h%[i#i%[i#j%[i#k%[i#l%[i#m%[i#n%[i#o%[i#p%[i#r%[i#t%[i#v%[i#w%[i'm%[i(T%[i(d%[i!h%[i!T%[i'k%[ip%[i!Y%[i%b%[i!b%[i~P$JoO#e$viP$viY$vi_$vil$vi{$vi!W$vi!f$vi!g$vi!i$vi!m$vi#h$vi#i$vi#j$vi#k$vi#l$vi#m$vi#n$vi#o$vi#p$vi#r$vi#t$vi#v$vi#w$vi'm$vi(T$vi(d$vi!h$vi!T$vi'k$vi#Y$vip$vi!Y$vi%b$vi!b$vi~P#,gOe'Qa!W'Qa~P!0kO!W'Ra!h'Ra~P!7zO!W.bO!h(_i~O#z#]i!W#]i!X#]i~P#CQOP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O(TVOY#gil#gi!f#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~O#h#gi~P%2}O#h9zO~P%2}OP$]Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O(TVOY#gi!f#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~Ol#gi~P%5YOl9|O~P%5YOP$]Ol9|Oz#yO{#zO}#{O!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O(TVO#r#gi#t#gi#v#gi#w#gi#z#gi(d#gi(k#gi(l#gi!W#gi!X#gi~OY#gi!f#gi#m#gi#n#gi#o#gi#p#gi~P%7eOY:YO!f:OO#m:OO#n:OO#o:XO#p:OO~P%7eOP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO(TVO#t#gi#v#gi#w#gi#z#gi(d#gi(l#gi!W#gi!X#gi~O(k#gi~P%:PO(k#|O~P%:POP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO(TVO(k#|O#v#gi#w#gi#z#gi(d#gi!W#gi!X#gi~O(l#gi~P%<[O(l#}O~P%<[OP$]OY:YOl9|Oz#yO{#zO}#{O!f:OO!g#wO!i#xO!m$]O#h9zO#i9{O#j9{O#k9{O#l9}O#m:OO#n:OO#o:XO#p:OO#r:PO#t:RO#v:TO(TVO(k#|O(l#}O~O#w#gi#z#gi(d#gi!W#gi!X#gi~P%>gO_#xy!W#xy'm#xy'k#xy!T#xy!h#xyp#xy!Y#xy%b#xy!b#xy~P!7zOh;mOz)vO})wO(k)yO(l){O~OP#giY#gil#gi{#gi!f#gi!g#gi!i#gi!m#gi#h#gi#i#gi#j#gi#k#gi#l#gi#m#gi#n#gi#o#gi#p#gi#r#gi#t#gi#v#gi#w#gi#z#gi(T#gi(d#gi!W#gi!X#gi~P%A_O!g#wOP(SXY(SXh(SXl(SXz(SX{(SX}(SX!f(SX!i(SX!m(SX#h(SX#i(SX#j(SX#k(SX#l(SX#m(SX#n(SX#o(SX#p(SX#r(SX#t(SX#v(SX#w(SX#z(SX(T(SX(d(SX(k(SX(l(SX!W(SX!X(SX~O#z#{i!W#{i!X#{i~P#CQO#z!oi!X!oi~P$$nO!X6`O~O!W'[a!X'[a~P#CQO!b#uO(d'gO!W']a!h']a~O!W/VO!h(qi~O!W/VO!b#uO!h(qi~Oe$vq!W$vq#Y$vq#z$vq~P!0kO!T'_a!W'_a~P#,gO!b6gO~O!W/_O!T(ri~P#,gO!W/_O!T(ri~O!T6kO~O!b#uO#p6pO~Ol6qO!b#uO(d'gO~O!T6sO~Oe$xq!W$xq#Y$xq#z$xq~P!0kO_$jy!W$jy'm$jy'k$jy!T$jy!h$jyp$jy!Y$jy%b$jy!b$jy~P!7zO!b5kO~O!W4WO!Y(sa~O_#]y!W#]y'm#]y'k#]y!T#]y!h#]yp#]y!Y#]y%b#]y!b#]y~P!7zOY6xO~O!W0bO!X(zi~O^7OO~O(W(tO!W'dX!X'dX~O!W4nO!X(wa~OjkO'v7VO~P.iO!X7YO~P%$nOm!nO}7ZO'xTO'{UO(W!mO(c!sO~O!Y0zO~O!Y0zO%b7]O~Oh7`O!Y0zO%b7]O~OY7eO!W'ga!X'ga~O!W1VO!X(xi~O!h7iO~O!h7jO~O!h7mO~O!h7mO~P%[O_7oO~O!b7pO~O!h7qO~O!W(ii!X(ii~P#CQO_%gO#Y7yO'm%gO~O!W(fy!h(fy_(fy'm(fy~P!7zO!W(`O!h(ey~O!Y'VO%b7|O~O#e$vqP$vqY$vq_$vql$vq{$vq!W$vq!f$vq!g$vq!i$vq!m$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#o$vq#p$vq#r$vq#t$vq#v$vq#w$vq'm$vq(T$vq(d$vq!h$vq!T$vq'k$vq#Y$vqp$vq!Y$vq%b$vq!b$vq~P#,gO#e$xqP$xqY$xq_$xql$xq{$xq!W$xq!f$xq!g$xq!i$xq!m$xq#h$xq#i$xq#j$xq#k$xq#l$xq#m$xq#n$xq#o$xq#p$xq#r$xq#t$xq#v$xq#w$xq'm$xq(T$xq(d$xq!h$xq!T$xq'k$xq#Y$xqp$xq!Y$xq%b$xq!b$xq~P#,gO!W'Ri!h'Ri~P!7zO#z#]q!W#]q!X#]q~P#CQOz/yO{/yO}/zOPwaYwahwalwa!fwa!gwa!iwa!mwa#hwa#iwa#jwa#kwa#lwa#mwa#nwa#owa#pwa#rwa#twa#vwa#wwa#zwa(Twa(dwa(kwa(lwa!Wwa!Xwa~Oz)vO})wOP$maY$mah$mal$ma{$ma!f$ma!g$ma!i$ma!m$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#o$ma#p$ma#r$ma#t$ma#v$ma#w$ma#z$ma(T$ma(d$ma(k$ma(l$ma!W$ma!X$ma~Oz)vO})wOP$oaY$oah$oal$oa{$oa!f$oa!g$oa!i$oa!m$oa#h$oa#i$oa#j$oa#k$oa#l$oa#m$oa#n$oa#o$oa#p$oa#r$oa#t$oa#v$oa#w$oa#z$oa(T$oa(d$oa(k$oa(l$oa!W$oa!X$oa~OP$}aY$}al$}a{$}a!f$}a!g$}a!i$}a!m$}a#h$}a#i$}a#j$}a#k$}a#l$}a#m$}a#n$}a#o$}a#p$}a#r$}a#t$}a#v$}a#w$}a#z$}a(T$}a(d$}a!W$}a!X$}a~P%A_O#z$iq!W$iq!X$iq~P#CQO#z$jq!W$jq!X$jq~P#CQO!X8WO~O#z8XO~P!0kO!b#uO!W']i!h']i~O!b#uO(d'gO!W']i!h']i~O!W/VO!h(qq~O!T'_i!W'_i~P#,gO!W/_O!T(rq~O!T8_O~P#,gO!T8_O~Oe(Ry!W(Ry~P!0kO!W'ba!Y'ba~P#,gO_%Uq!Y%Uq'm%Uq!W%Uq~P#,gOY8dO~O!W0bO!X(zq~O#Y8hO!W'da!X'da~O!W4nO!X(wi~P#CQOPZXYZXlZXzZX{ZX}ZX!TZX!WZX!fZX!gZX!iZX!mZX#YZX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX~O!b%SX#p%SX~P&2_O!Y0zO%b8lO~O'xTO'{UO(W8qO~O!W1VO!X(xq~O!h8tO~O!h8uO~O!h8vO~O!h8vO~P%[O#Y8yO!W#by!X#by~O!W#by!X#by~P#CQO!Y'VO%b9OO~O#z#xy!W#xy!X#xy~P#CQOP$viY$vil$vi{$vi!f$vi!g$vi!i$vi!m$vi#h$vi#i$vi#j$vi#k$vi#l$vi#m$vi#n$vi#o$vi#p$vi#r$vi#t$vi#v$vi#w$vi#z$vi(T$vi(d$vi!W$vi!X$vi~P%A_Oz)vO})wO(l){OP%YiY%Yih%Yil%Yi{%Yi!f%Yi!g%Yi!i%Yi!m%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#o%Yi#p%Yi#r%Yi#t%Yi#v%Yi#w%Yi#z%Yi(T%Yi(d%Yi(k%Yi!W%Yi!X%Yi~Oz)vO})wOP%[iY%[ih%[il%[i{%[i!f%[i!g%[i!i%[i!m%[i#h%[i#i%[i#j%[i#k%[i#l%[i#m%[i#n%[i#o%[i#p%[i#r%[i#t%[i#v%[i#w%[i#z%[i(T%[i(d%[i(k%[i(l%[i!W%[i!X%[i~O#z$jy!W$jy!X$jy~P#CQO#z#]y!W#]y!X#]y~P#CQO!b#uO!W']q!h']q~O!W/VO!h(qy~O!T'_q!W'_q~P#,gO!T9VO~P#,gO!W0bO!X(zy~O!W4nO!X(wq~O!Y0zO%b9^O~O!h9aO~O!Y'VO%b9fO~OP$vqY$vql$vq{$vq!f$vq!g$vq!i$vq!m$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#o$vq#p$vq#r$vq#t$vq#v$vq#w$vq#z$vq(T$vq(d$vq!W$vq!X$vq~P%A_OP$xqY$xql$xq{$xq!f$xq!g$xq!i$xq!m$xq#h$xq#i$xq#j$xq#k$xq#l$xq#m$xq#n$xq#o$xq#p$xq#r$xq#t$xq#v$xq#w$xq#z$xq(T$xq(d$xq!W$xq!X$xq~P%A_Oe%^!Z!W%^!Z#Y%^!Z#z%^!Z~P!0kO!W'dq!X'dq~P#CQO!W#b!Z!X#b!Z~P#CQO#e%^!ZP%^!ZY%^!Z_%^!Zl%^!Z{%^!Z!W%^!Z!f%^!Z!g%^!Z!i%^!Z!m%^!Z#h%^!Z#i%^!Z#j%^!Z#k%^!Z#l%^!Z#m%^!Z#n%^!Z#o%^!Z#p%^!Z#r%^!Z#t%^!Z#v%^!Z#w%^!Z'm%^!Z(T%^!Z(d%^!Z!h%^!Z!T%^!Z'k%^!Z#Y%^!Zp%^!Z!Y%^!Z%b%^!Z!b%^!Z~P#,gOP%^!ZY%^!Zl%^!Z{%^!Z!f%^!Z!g%^!Z!i%^!Z!m%^!Z#h%^!Z#i%^!Z#j%^!Z#k%^!Z#l%^!Z#m%^!Z#n%^!Z#o%^!Z#p%^!Z#r%^!Z#t%^!Z#v%^!Z#w%^!Z#z%^!Z(T%^!Z(d%^!Z!W%^!Z!X%^!Z~P%A_Op(XX~P1qO'w!lO~P!*SO!TdX!WdX#YdX~P&2_OPZXYZXlZXzZX{ZX}ZX!WZX!WdX!fZX!gZX!iZX!mZX#YZX#YdX#edX#hZX#iZX#jZX#kZX#lZX#mZX#nZX#oZX#pZX#rZX#tZX#vZX#wZX#|ZX(TZX(dZX(kZX(lZX~O!bdX!hZX!hdX(ddX~P&GuOP9qOQ9qOb;bOc!iOjkOl9qOmkOnkOtkOv9qOx9qO}WO!RkO!SkO!YXO!d9tO!iZO!l9qO!m9qO!n9qO!p9uO!r9xO!u!hO$R!kO$VfO'v)UO'xTO'{UO(TVO(c[O(p;`O~O!W:VO!X$la~Oj%SOl$tOm$sOn$sOt%TOv%UOx:]O}${O!Y$|O!d;gO!i$xO#d:cO$R%YO$n:_O$p:aO$s%ZO'v(lO'xTO'{UO(P%RO(T$uO~O#q)]O~P&LkO!XZX!XdX~P&GuO#e9yO~O!b#uO#e9yO~O#Y:ZO~O#p:OO~O#Y:eO!W(iX!X(iX~O#Y:ZO!W(gX!X(gX~O#e:fO~Oe:hO~P!0kO#e:mO~O#e:nO~O!b#uO#e:oO~O!b#uO#e:fO~O#z:pO~P#CQO#e:qO~O#e:rO~O#e:sO~O#e:tO~O#e:uO~O#e:vO~O#z:wO~P!0kO#z:xO~P!0kO$V~!g!}#O#Q#R#U#c#d#o(p$n$p$s%V%a%b%c%j%l%o%p%r%t~'qR$V(p#i!S'o'w#jm#h#klz'p(W'p'v$X$Z$X~",goto:"$'R)OPPPP)PPP)SP)eP*t.xPPPP5YPP5pP;l>sP?WP?WPPP?WP@xP?WP?WP?WP@|PPARPAlPFdPPPFhPPPPFhIiPPPIoJjPFhPLxPPPP! WFhPPPFhPFhP!#fFhP!&z!'|!(VP!(y!(}!(yPPPPP!,Y!'|PP!,v!-pP!0dFhFh!0i!3s!8Y!8Y!<OPPP!<VFhPPPPPPPPPPP!?dP!@uPPFh!BSPFhPFhFhFhFhPFh!CfPP!FnP!IrP!Iv!JQ!JU!JUP!FkP!JY!JYP!M^P!MbFhFh!Mh#!k?WP?WP?W?WP##v?W?W#%r?W#(R?W#)w?W?W#*f#,d#,d#,h#,p#,d#,xP#,dP?W#-b?W#.k?W?W5YPPP#/wPPP#0b#0bP#0bP#0x#0bPP#1OP#0uP#0u#1c#0u#1}#2T5V)S#2W)SP#2_#2_#2_P)SP)SP)SP)SPP)SP#2e#2hP#2h)SP#2lP#2oP)SP)SP)SP)SP)SP)S)SPP#2u#2{#3W#3^#3d#3j#3p#4O#4U#4[#4f#4l#4v#5V#5]#5}#6a#6g#6m#6{#7b#8s#9R#9X#9_#9e#9k#9u#9{#:R#:]#:o#:uPPPPPPPPPP#:{PPPPPPP#;p#>wP#@W#@_#@gPPPP#Du#Gl#NT#NW#NZ$ S$ V$ Y$ a$ iPP$ o$ s$!k$#j$#n$$SPP$$W$$^$$bP$$e$$i$$l$%b$%y$&b$&f$&i$&l$&r$&u$&y$&}R!{RoqOXst!Z#c%f&i&k&l&n,b,g1g1jY!uQ'V-S0z4uQ%lvQ%tyQ%{|Q&a!VS&}!e,zQ']!iS'c!r!xS*_$|*dQ+`%uQ+m%}Q,R&ZQ-Q'UQ-['^Q-d'dQ/p*fQ1U,SR:d9u%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|,_,b,g-W-`-n-t.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2w4r4|5^5_5b5u7Z7`7o7yS#p]9r!r)W$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ*o%VQ+e%wQ,T&^Q,[&fQ.X:[Q0W+WQ0[+YQ0g+fQ1^,YQ2k.UQ4`0bQ5T1VQ6R2oQ6X:]Q6z4aR8P6S&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;ct!nQ!r!u!x!y&}'U'V'c'd'e,z-Q-S-d0z4u4w$^$si#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mQ&O|Q&{!eS'R%b,}Q+e%wQ/{*sQ0g+fQ0l+lQ1],XQ1^,YQ4`0bQ4i0nQ5W1XQ5X1[Q6z4aQ6}4fQ7h5ZQ8g7OR8r7ernOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jR,V&b&v^OPXYstuvwz!Z!`!g!j!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'X'i'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;b;c[#[WZ#V#Y'O'y!S%cm#g#h#k%^%a(S(^(_(`*z*{*},^,t-r-x-y-z-|1o2g2h5k5|Q%oxQ%syS%x|%}Q&U!TQ'Y!hQ'[!iQ(g#rS*R$x*VS+_%t%uQ+c%wQ+|&XQ,Q&ZS-Z']'^Q.W(hQ/Z*SQ0`+`Q0f+fQ0h+gQ0k+kQ1P+}S1T,R,SQ2X-[Q3g/VQ4_0bQ4c0eQ4h0mQ5S1UQ6d3hQ6y4aQ6|4eQ8c6xR9X8dv$zi#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i!S%qy!i!t%s%t%u&|'[']'^'b'l*^+_+`,w-Z-[-c/h0`2Q2X2`3zQ+X%oQ+r&RQ+u&SQ,P&ZQ.V(gQ1O+|U1S,Q,R,SQ2p.WQ4}1PS5R1T1UQ7d5S#O;d#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mg;e:X:Y:_:a:c:j:l:n:r:t:xW%Pi%R*l;`S&R!Q&`Q&S!RQ&T!SR+p&P$_%Oi#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mT)r$u)sV*p%V:[:]U'R!e%b,}S(u#y#zQ+j%zS.P(c(dQ0u+vQ4P/yR7S4n&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;c$i$`c#X#d%j%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.j.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VT#SV#T&}kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ'P!eR1|,zv!nQ!e!r!u!x!y&}'U'V'c'd'e,z-Q-S-d0z4u4wS*^$|*dS/h*_*fQ/q*gQ0w+xQ3z/pR3}/snqOXst!Z#c%f&i&k&l&n,b,g1g1jQ&p!^Q'm!wS(i#t9yQ+]%rQ+z&UQ+{&WQ-X'ZQ-f'fS.](n:fS0O*x:oQ0^+^Q0y+yQ1n,iQ1p,jQ1x,uQ2V-YQ2Y-^S4U0P:uQ4Z0_S4^0a:vQ5m1zQ5q2WQ5v2_Q6w4[Q7t5oQ7u5rQ7x5wR8x7q$d$_c#X#d%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VS(f#o'`U*i$}(m3ZS+S%j.jQ2l0WQ6O2kQ8O6RR9P8P$d$^c#X#d%k%m'x(O(j(q(y(z({(|(})O)P)Q)R)S)T)V)Y)^)h+T+i,x-g-l-q-s.^.d.h.k.l.{/}1v1y2Z2b2v2{2|2}3O3P3Q3R3S3T3U3V3W3X3[3]3b4T4]5n5t5y6V6W6]6^7U7s7w8Q8U8V8{9Z9b9s;VS(e#o'`S(w#z$_S+R%j.jS.Q(d(fQ.m)XQ0T+SR2i.R&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cS#p]9rQ&k!XQ&l!YQ&n![Q&o!]R1f,eQ'W!hQ+U%oQ-V'YS.S(g+XQ2T-UW2m.V.W0V0XQ5p2UU5}2j2l2pS7{6O6QS8}7}8OS9d8|9PQ9l9eR9o9mU!vQ'V-ST4s0z4u!Q_OXZ`st!V!Z#c#g%^%f&`&b&i&k&l&n(`,b,g-y1g1j]!pQ!r'V-S0z4uT#p]9r%Y{OPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yS(u#y#zS.P(c(d!s:|$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cY!tQ'V-S0z4uQ'b!rS'l!u!xS'n!y4wS-c'c'dQ-e'eR2`-dQ'k!tS([#f1aS-b'b'nQ/Y*RQ/f*^Q2a-eQ3l/ZS3u/g/qQ6c3gS6n3{3}Q8Z6dR8b6qQ#vbQ'j!tS(Z#f1aS(]#l*wQ*y%_Q+Z%pQ+a%vU-a'b'k'nQ-u([Q/X*RQ/e*^Q/k*aQ0]+[Q1Q,OS2^-b-eQ2f-}S3k/Y/ZS3t/f/qQ3w/jQ3y/lQ5P1RQ5x2aQ6b3gQ6f3lS6j3u3}Q6o3|Q7b5QS8Y6c6dQ8^6kQ8`6nQ8o7cQ9T8ZQ9U8_Q9W8bQ9`8pQ9h9VQ;P:zQ;[;TR;];UV!vQ'V-S%YaOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yS#vz!j!r:y$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cR;P;b%YbOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yQ%_j!S%py!i!t%s%t%u&|'[']'^'b'l*^+_+`,w-Z-[-c/h0`2Q2X2`3zS%vz!jQ+[%qQ,O&ZW1R,P,Q,R,SU5Q1S1T1US7c5R5SQ8p7d!r:z$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ;T;aR;U;b$|eOPXYstuvw!Z!`!g!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7yY#aWZ#V#Y'y!S%cm#g#h#k%^%a(S(^(_(`*z*{*},^,t-r-x-y-z-|1o2g2h5k5|Q,]&f!p:{$[$m)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cR;O'OS'S!e%bR2O,}%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|,_,b,g-W-`-n-t.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2w4r4|5^5_5b5u7Z7`7o7y!r)W$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cQ,[&fQ0W+WQ2k.UQ6R2oR8P6S!f$Uc#X%j'x(O(j(q)Q)R)S)T)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9s!T:Q)V)h,x.j1v1y2{3T3U3V3W3[3b5n6W6]6^7U7s8Q8U8V9Z9b;V!b$Wc#X%j'x(O(j(q)S)T)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9s!P:S)V)h,x.j1v1y2{3V3W3[3b5n6W6]6^7U7s8Q8U8V9Z9b;V!^$[c#X%j'x(O(j(q)Y)^+i-g-l-q-s.^.d.{/}2Z2b2v3X4T4]5t5y6V7w8{9sQ3f/Tz;c)V)h,x.j1v1y2{3[3b5n6W6]6^7U7s8Q8U8V9Z9b;VQ;h;jR;i;k&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cS$nh$oR3_.p'TgOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.p.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cT$jf$pQ$hfS)a$k)eR)m$pT$if$pT)c$k)e'ThOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%f%l%y&b&e&f&i&k&l&n&r&z'O'X'i'y'{(R(Y(n(r(v)j)u*x*|+W,_,b,g,s,v-W-`-n-t.U.b.i.p.q/z0P0a0}1_1`1b1d1g1j1l1{2]2c2o2w3^4p4r4|5^5_5b5l5u6S7Z7`7o7y8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;cT$nh$oQ$qhR)l$o%YjOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%f%l%y&b&e&f&i&k&l&n&r&z'X'i'y'{(R(Y(n(r(v)u*x*|+W,_,b,g-W-`-n-t.U.b.i/z0P0a0}1_1`1b1d1g1j1l2]2c2o2w4r4|5^5_5b5u6S7Z7`7o7y!s;a$[$m'O)j,s,v.q1{3^4p5l8h8y9q9t9u9x9y9z9{9|9}:O:P:Q:R:S:T:U:V:Z:d:e:f:h:o:p:u:v;c#clOPXZst!Z!`!o#R#c#n#{$m%f&b&e&f&i&k&l&n&r&z'X(v)j*|+W,_,b,g-W.U.q/z0}1_1`1b1d1g1j1l2o3^4r4|5^5_5b6S7Z7`7ov$}i#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i#O(m#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mQ*t%ZQ.|)vg3Z:X:Y:_:a:c:j:l:n:r:t:xv$yi#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;iQ*W$zS*a$|*dQ*u%[Q/l*b#O;R#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mf;S:X:Y:_:a:c:j:l:n:r:t:xQ;W;dQ;X;eQ;Y;fR;Z;gv$}i#w%W%X%])z)|*U*j*k._/^/|3f4O8X;`;h;i#O(m#u$c$d$x${)q)w)}*[+V+Y+q+t.T/P/_/a0q0t0|2n3p3x4W4Y4{6P6g6p7]7|8l9O9^9f:^:`:b:i:k:m:q:s:w;l;mg3Z:X:Y:_:a:c:j:l:n:r:t:xnoOXst!Z#c%f&i&k&l&n,b,g1g1jQ*Z${Q,p&uQ,q&wR3o/_$^%Oi#u#w$c$d$x${%W%X%])q)w)z)|)}*U*[*j*k+V+Y+q+t.T._/P/^/_/a/|0q0t0|2n3f3p3x4O4W4Y4{6P6g6p7]7|8X8l9O9^9f:X:Y:^:_:`:a:b:c:i:j:k:l:m:n:q:r:s:t:w:x;`;h;i;l;mQ+s&SQ0s+uQ4l0rR7R4mT*c$|*dS*c$|*dT4t0z4uS/j*`4rT3|/r7ZQ+Z%pQ/k*aQ0]+[Q1Q,OQ5P1RQ7b5QQ8o7cR9`8pn)z$v(o*v/]/t/u2t3m4S6a6r9S;Q;^;_!Y:i(k)[*Q*Y.[.x.}/T/b0U0p0r2s3n3r4k4m6T6U6h6l6t6v8]8a9g;j;k]:j3Y6[8R9Q9R9pp)|$v(o*v/R/]/t/u2t3m4S6a6r9S;Q;^;_![:k(k)[*Q*Y.[.x.}/T/b0U0p0r2q2s3n3r4k4m6T6U6h6l6t6v8]8a9g;j;k_:l3Y6[8R8S9Q9R9prnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jQ&]!UR,_&frnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jR&]!UQ+w&TR0o+psnOXst!V!Z#c%f&`&i&k&l&n,b,g1g1jQ0{+|S4z1O1PU7[4x4y4}S8k7^7_S9[8j8mQ9i9]R9n9jQ&d!VR,W&`R5W1XS%x|%}R0h+gQ&i!WR,b&jR,h&oT1h,g1jR,l&pQ,k&pR1q,lQ'p!zR-h'pSsOtQ#cXT%is#cQ!}TR'r!}Q#QUR't#QQ)s$uR.y)sQ#TVR'v#TQ#WWU'|#W'}-oQ'}#XR-o(OQ,{'PR1},{Q.`(oR2u.`Q.c(qS2x.c2yR2y.dQ-S'VR2R-SY!rQ'V-S0z4uR'a!rS#^W%aU(T#^(U-pQ(U#_R-p(PQ-O'SR2P-Ot`OXst!V!Z#c%f&`&b&i&k&l&n,b,g1g1jS#gZ%^U#q`#g-yR-y(`Q(a#iQ-v(]W.O(a-v2d5zQ2d-wR5z2eQ)e$kR.r)eQ$ohR)k$oQ$bcU)Z$b-k:WQ-k9sR:W)hQ/W*RW3i/W3j6e8[U3j/X/Y/ZS6e3k3lR8[6f#o)x$v(k(o)[*Q*Y*q*r*v.Y.Z.[.x.}/R/S/T/]/b/t/u0U0p0r2q2r2s2t3Y3m3n3r4S4k4m6T6U6Y6Z6[6a6h6l6r6t6v8R8S8T8]8a9Q9R9S9g9p;Q;^;_;j;kQ/`*YU3q/`3s6iQ3s/bR6i3rQ*d$|R/n*dQ*m%QR/w*mQ4X0UR6u4XQ+O%dR0S+OQ4o0uS7T4o8iR8i7UQ+y&UR0x+yQ4u0zR7X4uQ1W,TS5U1W7fR7f5WQ0c+cW4b0c4d6{8eQ4d0fQ6{4cR8e6|Q+h%xR0i+hQ1j,gR5f1jYrOXst#cQ&m!ZQ+Q%fQ,a&iQ,c&kQ,d&lQ,f&nQ1e,bS1h,g1jR5e1gQ%hpQ&q!_Q&t!aQ&v!bQ&x!cQ'h!tQ+P%eQ+]%rQ+o&OQ,V&dQ,n&sW-_'b'j'k'nQ-f'fQ/m*cQ0^+^S1Z,W,ZQ1r,mQ1s,pQ1t,qQ2Y-^W2[-a-b-e-gQ4Z0_Q4g0lQ4j0pQ5O1QQ5Y1]Q5d1fU5s2Z2^2aQ5v2_Q6w4[Q7P4iQ7Q4kQ7W4tQ7a5PQ7g5XS7v5t5xQ7x5wQ8f6}Q8n7bQ8s7hQ8z7wQ9Y8gQ9_8oQ9c8{R9k9`Q%ryQ'Z!iQ'f!tU+^%s%t%uQ,u&|U-Y'[']'^S-^'b'lQ/d*^S0_+_+`Q1z,wS2W-Z-[Q2_-cQ3v/hQ4[0`Q5o2QQ5r2XQ5w2`R6m3zS$wi;`R*n%RU%Qi%R;`R/v*lQ$viS(k#u+YQ(o#wS)[$c$dQ*Q$xQ*Y${Q*q%WQ*r%XQ*v%]Q.Y:^Q.Z:`Q.[:bQ.x)qS.})w/PQ/R)zQ/S)|Q/T)}Q/]*UQ/b*[Q/t*jQ/u*kh0U+V.T0|2n4{6P7]7|8l9O9^9fQ0p+qQ0r+tQ2q:iQ2r:kQ2s:mQ2t._S3Y:X:YQ3m/^Q3n/_Q3r/aQ4S/|Q4k0qQ4m0tQ6T:qQ6U:sQ6Y:_Q6Z:aQ6[:cQ6a3fQ6h3pQ6l3xQ6r4OQ6t4WQ6v4YQ8R:nQ8S:jQ8T:lQ8]6gQ8a6pQ9Q:rQ9R:tQ9S8XQ9g:wQ9p:xQ;Q;`Q;^;hQ;_;iQ;j;lR;k;mnpOXst!Z#c%f&i&k&l&n,b,g1g1jQ!fPS#eZ#nQ&s!`U'_!o4r7ZQ'u#RQ(x#{Q)i$mS,Z&b&eQ,`&fQ,m&rQ,r&zQ-U'XQ.f(vQ.v)jQ0Q*|Q0X+WQ1c,_Q2U-WQ2l.UQ3a.qQ4Q/zQ4y0}Q5[1_Q5]1`Q5a1bQ5c1dQ5h1lQ6O2oQ6_3^Q7_4|Q7k5^Q7l5_Q7n5bQ8O6SQ8m7`R8w7o#WcOPXZst!Z!`!o#c#n#{%f&b&e&f&i&k&l&n&r&z'X(v*|+W,_,b,g-W.U/z0}1_1`1b1d1g1j1l2o4r4|5^5_5b6S7Z7`7oQ#XWQ#dYQ%juQ%kvS%mw!gS'x#V'{Q(O#YQ(j#tQ(q#xQ(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)R$WQ)S$XQ)T$YQ)V$[Q)Y$aQ)^$eW)h$m)j.q3^Q+T%lQ+i%yS,x'O1{Q-g'iS-l'y-nQ-q(RQ-s(YQ.^(nQ.d(rQ.h9qQ.j9tQ.k9uQ.l9xQ.{)uQ/}*xQ1v,sQ1y,vQ2Z-`Q2b-tQ2v.bQ2{9yQ2|9zQ2}9{Q3O9|Q3P9}Q3Q:OQ3R:PQ3S:QQ3T:RQ3U:SQ3V:TQ3W:UQ3X.iQ3[:ZQ3]:dQ3b:VQ4T0PQ4]0aQ5n:eQ5t2]Q5y2cQ6V2wQ6W:fQ6]:hQ6^:oQ7U4pQ7s5lQ7w5uQ8Q:pQ8U:uQ8V:vQ8{7yQ9Z8hQ9b8yQ9s#RR;V;cR#ZWR'Q!eY!tQ'V-S0z4uS&|!e,zQ'b!rS'l!u!xS'n!y4wS,w&}'US-c'c'dQ-e'eQ2Q-QR2`-dR(p#wR(s#xQ!fQT-R'V-S]!qQ!r'V-S0z4uQ#o]R'`9rT#jZ%^S#iZ%^S%dm,^U(]#g#h#kS-w(^(_Q-{(`Q0R*}Q2e-xU2f-y-z-|S5{2g2hR7z5|`#]W#V#Y%a'y(S*z-rr#fZm#g#h#k%^(^(_(`*}-x-y-z-|2g2h5|Q1a,^Q1w,tQ5j1oQ7r5kT:}'O*{T#`W%aS#_W%aS'z#V(SS(P#Y*zS,y'O*{T-m'y-rT'T!e%bQ$kfR)o$pT)d$k)eR3`.pT*T$x*VR*]${Q0V+VQ2j.TQ4x0|Q6Q2nQ7^4{Q7}6PQ8j7]Q8|7|Q9]8lQ9e9OQ9j9^R9m9fnqOXst!Z#c%f&i&k&l&n,b,g1g1jQ&c!VR,V&`tmOXst!U!V!Z#c%f&`&i&k&l&n,b,g1g1jR,^&fT%em,^R0v+vR,U&^Q%||R+n%}R+d%wT&g!W&jT&h!W&jT1i,g1j",nodeNames:" ArithOp ArithOp LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:367,context:trackNewline,nodeProps:[["group",-26,7,15,17,63,200,204,208,209,211,214,217,227,229,235,237,239,241,244,250,256,258,260,262,264,266,267,"Statement",-32,11,12,26,29,30,36,46,49,50,52,57,65,73,77,79,81,82,104,105,114,115,132,135,137,138,139,140,142,143,163,164,166,"Expression",-23,25,27,31,35,37,39,167,169,171,172,174,175,176,178,179,180,182,183,184,194,196,198,199,"Type",-3,85,97,103,"ClassItem"],["openedBy",32,"InterpolationStart",51,"[",55,"{",70,"(",144,"JSXStartTag",156,"JSXStartTag JSXStartCloseTag"],["closedBy",34,"InterpolationEnd",45,"]",56,"}",71,")",145,"JSXSelfCloseEndTag JSXEndTag",161,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,270],repeatNodeCount:33,tokenData:"$Fl(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#8g!R![#:v![!]#Gv!]!^#IS!^!_#J^!_!`#Nu!`!a$#a!a!b$(n!b!c$,m!c!}Er!}#O$-w#O#P$/R#P#Q$4j#Q#R$5t#R#SEr#S#T$7R#T#o$8]#o#p$<m#p#q$=c#q#r$>s#r#s$@P#s$f%Z$f$g+g$g#BYEr#BY#BZ$AZ#BZ$ISEr$IS$I_$AZ$I_$I|Er$I|$I}$Df$I}$JO$Df$JO$JTEr$JT$JU$AZ$JU$KVEr$KV$KW$AZ$KW&FUEr&FU&FV$AZ&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AZ?HUOEr(n%d_$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$e&j'|!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'|!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$e&j'ypOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'ypOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$e&j'yp'|!b'o(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'z#S$e&j'p(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$e&j'yp'|!b'p(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$e&j!m$Ip'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#r$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#r$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'x$(n$e&j'|!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$e&j'|!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$e&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$`#t$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$`#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$`#t$e&j'|!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'|!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$`#t'|!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hh$e&j'yp'|!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__US$e&j'yp'|!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]US$e&j'|!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXUS$e&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSUSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWUS'|!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]US$e&j'ypOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWUS'ypOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYUS'yp'|!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S#%|C}i$e&j(c!L^'yp'|!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr#%|EoP;=`<%lCr(CSFRk$e&j'yp'|!b(W!LY'v&;d$X#tOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$e&j'yp'|!b$X#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv(CSJPP;=`<%lEr%#SJ_`$e&j'yp'|!b#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SKl_$e&j#|$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfLva(l%<v$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SNW`$e&j#v$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b! c_'{$)`$e&j'ypOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b*Q!!i_$e&j'ypOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b)`!#mX$e&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h#t!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y#t!$oP;=`<%l!$Y)`!$uP;=`<%l!#h*Q!%R]$`#t$e&j'ypOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$f!&PZ'ypOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z$f!&yU$`#t'ypOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$f!'`P;=`<%l!%z*Q!'fP;=`<%l!!b(*Q!'t_!i(!b$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!)O_!hM|$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!*[b$e&j'yp'|!b'w#)d#k$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!+o`$e&j'yp'|!b#h$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!,|`$e&j'yp'|!bl&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!.Z_!W&;l$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!/ec$e&j'yp'|!bz'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!0ya$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!2Z_!VMt$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3eg$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!5Vg$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!6wc$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!8_c$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!9uf$e&j'yp'|!b#i$IdOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpxz!;Zz{#,f{!P!;Z!P!Q#-{!Q!^!;Z!^!_#'Z!_!`#5k!`!a#7Q!a!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(r!;fb$e&j'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(Q!<w`$e&j'|!b!SSOY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eb!Q!^!<n!^!_!GY!_!}!<n!}#O!Ja#O#P!Dj#P#o!<n#o#p!GY#p;'S!<n;'S;=`!Kj<%lO!<n&n!>Q^$e&j!SSOY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@Y!_!}!=y!}#O!Bw#O#P!Dj#P#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!?Ta$e&j!SSO!^&c!_#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&cS!@_X!SSOY!@YZ!P!@Y!P!Q!@z!Q!}!@Y!}#O!Ac#O#P!Bb#P;'S!@Y;'S;=`!Bq<%lO!@YS!APU!SS#Z#[!@z#]#^!@z#a#b!@z#g#h!@z#i#j!@z#m#n!@zS!AfVOY!AcZ#O!Ac#O#P!A{#P#Q!@Y#Q;'S!Ac;'S;=`!B[<%lO!AcS!BOSOY!AcZ;'S!Ac;'S;=`!B[<%lO!AcS!B_P;=`<%l!AcS!BeSOY!@YZ;'S!@Y;'S;=`!Bq<%lO!@YS!BtP;=`<%l!@Y&n!B|[$e&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#O!Bw#O#P!Cr#P#Q!=y#Q#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!CwX$e&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!DgP;=`<%l!Bw&n!DoX$e&jOY!=yYZ&cZ!^!=y!^!_!@Y!_#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!E_P;=`<%l!=y(Q!Eki$e&j'|!b!SSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Eb#[#]&}#]#^!Eb#^#a&}#a#b!Eb#b#g&}#g#h!Eb#h#i&}#i#j!Eb#j#m&}#m#n!Eb#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!GaZ'|!b!SSOY!GYZw!GYwx!@Yx!P!GY!P!Q!HS!Q!}!GY!}#O!Ic#O#P!Bb#P;'S!GY;'S;=`!JZ<%lO!GY!f!HZb'|!b!SSOY'}Zw'}x#O'}#P#Z'}#Z#[!HS#[#]'}#]#^!HS#^#a'}#a#b!HS#b#g'}#g#h!HS#h#i'}#i#j!HS#j#m'}#m#n!HS#n;'S'};'S;=`(f<%lO'}!f!IhX'|!bOY!IcZw!Icwx!Acx#O!Ic#O#P!A{#P#Q!GY#Q;'S!Ic;'S;=`!JT<%lO!Ic!f!JWP;=`<%l!Ic!f!J^P;=`<%l!GY(Q!Jh^$e&j'|!bOY!JaYZ&cZw!Jawx!Bwx!^!Ja!^!_!Ic!_#O!Ja#O#P!Cr#P#Q!<n#Q#o!Ja#o#p!Ic#p;'S!Ja;'S;=`!Kd<%lO!Ja(Q!KgP;=`<%l!Ja(Q!KmP;=`<%l!<n'`!Ky`$e&j'yp!SSOY!KpYZ&cZr!Kprs!=ys!P!Kp!P!Q!L{!Q!^!Kp!^!_!Ns!_!}!Kp!}#O##z#O#P!Dj#P#o!Kp#o#p!Ns#p;'S!Kp;'S;=`#%T<%lO!Kp'`!MUi$e&j'yp!SSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!L{#[#](r#]#^!L{#^#a(r#a#b!L{#b#g(r#g#h!L{#h#i(r#i#j!L{#j#m(r#m#n!L{#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!NzZ'yp!SSOY!NsZr!Nsrs!@Ys!P!Ns!P!Q# m!Q!}!Ns!}#O#!|#O#P!Bb#P;'S!Ns;'S;=`##t<%lO!Nst# tb'yp!SSOY)rZr)rs#O)r#P#Z)r#Z#[# m#[#])r#]#^# m#^#a)r#a#b# m#b#g)r#g#h# m#h#i)r#i#j# m#j#m)r#m#n# m#n;'S)r;'S;=`*Z<%lO)rt##RX'ypOY#!|Zr#!|rs!Acs#O#!|#O#P!A{#P#Q!Ns#Q;'S#!|;'S;=`##n<%lO#!|t##qP;=`<%l#!|t##wP;=`<%l!Ns'`#$R^$e&j'ypOY##zYZ&cZr##zrs!Bws!^##z!^!_#!|!_#O##z#O#P!Cr#P#Q!Kp#Q#o##z#o#p#!|#p;'S##z;'S;=`#$}<%lO##z'`#%QP;=`<%l##z'`#%WP;=`<%l!Kp(r#%fk$e&j'yp'|!b!SSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[#%Z#[#]%Z#]#^#%Z#^#a%Z#a#b#%Z#b#g%Z#g#h#%Z#h#i%Z#i#j#%Z#j#m%Z#m#n#%Z#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W#'d]'yp'|!b!SSOY#'ZZr#'Zrs!GYsw#'Zwx!Nsx!P#'Z!P!Q#(]!Q!}#'Z!}#O#)w#O#P!Bb#P;'S#'Z;'S;=`#*w<%lO#'Z#W#(fe'yp'|!b!SSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#(]#[#]*g#]#^#(]#^#a*g#a#b#(]#b#g*g#g#h#(]#h#i*g#i#j#(]#j#m*g#m#n#(]#n;'S*g;'S;=`+Z<%lO*g#W#*OZ'yp'|!bOY#)wZr#)wrs!Icsw#)wwx#!|x#O#)w#O#P!A{#P#Q#'Z#Q;'S#)w;'S;=`#*q<%lO#)w#W#*tP;=`<%l#)w#W#*zP;=`<%l#'Z(r#+W`$e&j'yp'|!bOY#*}YZ&cZr#*}rs!Jasw#*}wx##zx!^#*}!^!_#)w!_#O#*}#O#P!Cr#P#Q!;Z#Q#o#*}#o#p#)w#p;'S#*};'S;=`#,Y<%lO#*}(r#,]P;=`<%l#*}(r#,cP;=`<%l!;Z(CS#,sb$e&j'yp'|!b'q(;d!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(CS#.W_$e&j'yp'|!bR(;dOY#-{YZ&cZr#-{rs#/Vsw#-{wx#2gx!^#-{!^!_#4f!_#O#-{#O#P#0X#P#o#-{#o#p#4f#p;'S#-{;'S;=`#5e<%lO#-{(Bb#/`]$e&j'|!bR(;dOY#/VYZ&cZw#/Vwx#0Xx!^#/V!^!_#1j!_#O#/V#O#P#0X#P#o#/V#o#p#1j#p;'S#/V;'S;=`#2a<%lO#/V(AO#0`X$e&jR(;dOY#0XYZ&cZ!^#0X!^!_#0{!_#o#0X#o#p#0{#p;'S#0X;'S;=`#1d<%lO#0X(;d#1QSR(;dOY#0{Z;'S#0{;'S;=`#1^<%lO#0{(;d#1aP;=`<%l#0{(AO#1gP;=`<%l#0X(<v#1qW'|!bR(;dOY#1jZw#1jwx#0{x#O#1j#O#P#0{#P;'S#1j;'S;=`#2Z<%lO#1j(<v#2^P;=`<%l#1j(Bb#2dP;=`<%l#/V(Ap#2p]$e&j'ypR(;dOY#2gYZ&cZr#2grs#0Xs!^#2g!^!_#3i!_#O#2g#O#P#0X#P#o#2g#o#p#3i#p;'S#2g;'S;=`#4`<%lO#2g(<U#3pW'ypR(;dOY#3iZr#3irs#0{s#O#3i#O#P#0{#P;'S#3i;'S;=`#4Y<%lO#3i(<U#4]P;=`<%l#3i(Ap#4cP;=`<%l#2g(=h#4oY'yp'|!bR(;dOY#4fZr#4frs#1jsw#4fwx#3ix#O#4f#O#P#0{#P;'S#4f;'S;=`#5_<%lO#4f(=h#5bP;=`<%l#4f(CS#5hP;=`<%l#-{%#W#5xb$e&j#|$Id'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z+h#7_b$U#t$e&j'yp'|!b!SSOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z$/l#8rp$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#U%Z#U#V#>Q#V#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#d#AY#d#l%Z#l#m#D[#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;Rk$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=R_$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>Zd$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?tf$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Acc$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bye$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Deg$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#FXi$e&j'yp'|!bm$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#HT_!b$b$e&j#z%<f'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#I___l$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Jm^(P!*v!f'.r'yp'|!b$V)d(pSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Ki!Q!^*g!^!_#L_!_!`#NP!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#KrX$g&j'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#LhZ#l$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#MZ!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#MdX#|$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#NYX#m$Id'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh$ Qa#Y%?x$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$!V!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W$!b_#e$Ih$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh$#paeBf#m$Id$b#|$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$$u!`!a$&P!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$%Q_#m$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$&[a#l$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$'a!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'l`#l$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$(yc(d$Ip$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$*U!P!^%Z!^!_*g!_!a%Z!a!b$+`!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$*a_{'#p$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$+k`$e&j#w$Id'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$,x_!y!Ln$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$.S_}(8n$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/WZ$e&jO!^$/y!^!_$0a!_#i$/y#i#j$0f#j#l$/y#l#m$2X#m#o$/y#o#p$0a#p;'S$/y;'S;=`$4d<%lO$/y(n$0QT]#S$e&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0fO]#S(n$0k[$e&jO!Q&c!Q![$1a![!^&c!_!c&c!c!i$1a!i#T&c#T#Z$1a#Z#o&c#o#p$3w#p;'S&c;'S;=`&w<%lO&c(n$1fZ$e&jO!Q&c!Q![$2X![!^&c!_!c&c!c!i$2X!i#T&c#T#Z$2X#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2^Z$e&jO!Q&c!Q![$3P![!^&c!_!c&c!c!i$3P!i#T&c#T#Z$3P#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3UZ$e&jO!Q&c!Q![$/y![!^&c!_!c&c!c!i$/y!i#T&c#T#Z$/y#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$3zR!Q![$4T!c!i$4T#T#Z$4T#S$4WS!Q![$4T!c!i$4T#T#Z$4T#q#r$0a(n$4gP;=`<%l$/y!2r$4u_!T!+S$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$6P`#t$Id$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$7^_$e&j'yp'|!b(T&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$8lk$e&j'yp'|!b(W!LY'v&;d$Z#tOY%ZYZ&cZr%Zrs&}st%Ztu$8]uw%Zwx(rx}%Z}!O$:a!O!Q%Z!Q![$8]![!^%Z!^!_*g!_!c%Z!c!}$8]!}#O%Z#O#P&c#P#R%Z#R#S$8]#S#T%Z#T#o$8]#o#p*g#p$g%Z$g;'S$8];'S;=`$<g<%lO$8]+d$:lk$e&j'yp'|!b$Z#tOY%ZYZ&cZr%Zrs&}st%Ztu$:auw%Zwx(rx}%Z}!O$:a!O!Q%Z!Q![$:a![!^%Z!^!_*g!_!c%Z!c!}$:a!}#O%Z#O#P&c#P#R%Z#R#S$:a#S#T%Z#T#o$:a#o#p*g#p$g%Z$g;'S$:a;'S;=`$<a<%lO$:a+d$<dP;=`<%l$:a(CS$<jP;=`<%l$8]!5p$<vX!Y!3l'yp'|!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$=na(k%<v$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+`#q;'S%Z;'S;=`+a<%lO%Z%#`$?Q_!X$I`p`$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$@[_!nS$e&j'yp'|!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$Al|$e&j'yp'|!b'o(;d(W!LY'v&;d$X#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$AZ#BZ$ISEr$IS$I_$AZ$I_$JTEr$JT$JU$AZ$JU$KVEr$KV$KW$AZ$KW&FUEr&FU&FV$AZ&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AZ?HUOEr(CS$Dwk$e&j'yp'|!b'p(;d(W!LY'v&;d$X#tOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOr~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!P~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(V~~",141,328),new LocalTokenGroup("j~RQYZXz{^~^O's~~aP!P!Qd~iO't~~",25,310)],topRules:{Script:[0,5],SingleExpression:[1,268],SingleClassItem:[2,269]},dialects:{jsx:12801,ts:12803},dynamicPrecedences:{67:1,77:1,79:1,164:1,192:1},specialized:[{term:314,get:value=>dist_spec_identifier[value]||-1},{term:330,get:value=>spec_word[value]||-1},{term:68,get:value=>spec_LessThan[value]||-1}],tokenPrec:12827}),snippets=[snippetCompletion("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(type){return(node,def)=>{let id=node.node.getChild("VariableDefinition");return id&&def(id,type),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(node,def){node.matchContext(functionContext)||def(node,"variable")},TypeDefinition(node,def){def(node,"type")},__proto__:null};function getScope(doc,node){let cached=cache.get(node);if(cached)return cached;let completions=[],top=!0;function def(node,type){let name=doc.sliceString(node.from,node.to);completions.push({label:name,type})}return node.cursor(IterMode.IncludeAnonymous).iterate((node=>{if(top)top=!1;else if(node.name){let gather=gatherCompletions[node.name];if(gather&&gather(node,def)||ScopeNodes.has(node.name))return!1}else if(node.to-node.from>8192){for(let c of getScope(doc,node.node))completions.push(c);return!1}})),cache.set(node,completions),completions}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(context){let inner=dist_syntaxTree(context.state).resolveInner(context.pos,-1);if(dontComplete.indexOf(inner.name)>-1)return null;let isWord="VariableName"==inner.name||inner.to-inner.from<20&&Identifier.test(context.state.sliceDoc(inner.from,inner.to));if(!isWord&&!context.explicit)return null;let options=[];for(let pos=inner;pos;pos=pos.parent)ScopeNodes.has(pos.name)&&(options=options.concat(getScope(context.state.doc,pos)));return{options,from:isWord?inner.from:context.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:javascript_dist_parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:context=>context.baseIndent,SwitchBody:context=>{let after=context.textAfter,closed=/^\s*\}/.test(after),isCase=/^\s*(case|default)\b/.test(after);return context.baseIndent+(closed?0:isCase?1:2)*context.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:cx=>cx.baseIndent+cx.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(context){let closed=/^\s*<\//.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit)},JSXEscape(context){let closed=/\s*\}/.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit)},"JSXOpenTag JSXSelfClosingTag":context=>context.column(context.node.from)+context.unit}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment:tree=>({from:tree.from+2,to:tree.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:node=>/^JSX/.test(node.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add((n=>n.isTop?[jsxSublanguage]:void 0))]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add((n=>n.isTop?[jsxSublanguage]:void 0))]},"typescript");let kwCompletion=name=>({label:name,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(config={}){let lang=config.jsx?config.typescript?tsxLanguage:jsxLanguage:config.typescript?typescriptLanguage:javascriptLanguage,completions=config.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(lang,[javascriptLanguage.data.of({autocomplete:(nodes=dontComplete,source=completeFromList(completions),context=>{for(let pos=dist_syntaxTree(context.state).resolveInner(context.pos,-1);pos;pos=pos.parent){if(nodes.indexOf(pos.name)>-1)return null;if(pos.type.isTop)break}return source(context)})}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),config.jsx?autoCloseTags:[]]);var nodes,source}function elementName(doc,tree,max=doc.length){for(let ch=null==tree?void 0:tree.firstChild;ch;ch=ch.nextSibling)if("JSXIdentifier"==ch.name||"JSXBuiltin"==ch.name||"JSXNamespacedName"==ch.name||"JSXMemberExpression"==ch.name)return doc.sliceString(ch.from,Math.min(ch.to,max));return""}const dist_android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of(((view,from,to,text,defaultInsert)=>{if((dist_android?view.composing:view.compositionStarted)||view.state.readOnly||from!=to||">"!=text&&"/"!=text||!javascriptLanguage.isActiveAt(view.state,from,-1))return!1;let base=defaultInsert(),{state}=base,closeTags=state.changeByRange((range=>{var _a;let name,{head}=range,around=dist_syntaxTree(state).resolveInner(head-1,-1);if("JSXStartTag"==around.name&&(around=around.parent),state.doc.sliceString(head-1,head)!=text||"JSXAttributeValue"==around.name&&around.to>head);else{if(">"==text&&"JSXFragmentTag"==around.name)return{range,changes:{from:head,insert:"</>"}};if("/"==text&&"JSXStartCloseTag"==around.name){let empty=around.parent,base=empty.parent;if(base&&empty.from==head-2&&((name=elementName(state.doc,base.firstChild,head))||"JSXFragmentTag"==(null===(_a=base.firstChild)||void 0===_a?void 0:_a.name))){let insert=`${name}>`;return{range:dist_EditorSelection.cursor(head+insert.length,-1),changes:{from:head,insert}}}}else if(">"==text){let openTag=function findOpenTag(node){for(;;){if("JSXOpenTag"==node.name||"JSXSelfClosingTag"==node.name||"JSXFragmentTag"==node.name)return node;if("JSXEscape"==node.name||!node.parent)return null;node=node.parent}}(around);if(openTag&&!/^\/?>|^<\//.test(state.doc.sliceString(head,head+2))&&(name=elementName(state.doc,openTag,head)))return{range,changes:{from:head,insert:`</${name}>`}}}}return{range}}));return!closeTags.changes.empty&&(view.dispatch([base,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));const Targets=["_blank","_self","_top","_parent"],Charsets=["ascii","utf-8","utf-16","latin1","latin1"],Methods=["get","post","put","delete"],Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Bool=["true","false"],dist_S={},Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:dist_S,address:dist_S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:dist_S,aside:dist_S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:dist_S,base:{attrs:{href:null,target:Targets}},bdi:dist_S,bdo:dist_S,blockquote:{attrs:{cite:null}},body:dist_S,br:dist_S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:dist_S,center:dist_S,cite:dist_S,code:dist_S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:dist_S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:dist_S,div:dist_S,dl:dist_S,dt:dist_S,em:dist_S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:dist_S,figure:dist_S,footer:dist_S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:dist_S,h2:dist_S,h3:dist_S,h4:dist_S,h5:dist_S,h6:dist_S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:dist_S,hgroup:dist_S,hr:dist_S,html:{attrs:{manifest:null}},i:dist_S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:dist_S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:dist_S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:dist_S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:dist_S,noscript:dist_S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:dist_S,param:{attrs:{name:null,value:null}},pre:dist_S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:dist_S,rt:dist_S,ruby:dist_S,samp:dist_S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:dist_S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:dist_S,source:{attrs:{src:null,type:null,media:null}},span:dist_S,strong:dist_S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:dist_S,summary:dist_S,sup:dist_S,table:dist_S,tbody:dist_S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:dist_S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:dist_S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:dist_S,time:{attrs:{datetime:null}},title:dist_S,tr:dist_S,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:dist_S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:dist_S},GlobalAttrs={accesskey:null,class:null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eventAttributes="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map((n=>"on"+n));for(let a of eventAttributes)GlobalAttrs[a]=null;class Schema{constructor(extraTags,extraAttrs){this.tags=Object.assign(Object.assign({},Tags),extraTags),this.globalAttrs=Object.assign(Object.assign({},GlobalAttrs),extraAttrs),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function dist_elementName(doc,tree,max=doc.length){if(!tree)return"";let tag=tree.firstChild,name=tag&&tag.getChild("TagName");return name?doc.sliceString(name.from,Math.min(name.to,max)):""}function findParentElement(tree,skip=!1){for(;tree;tree=tree.parent)if("Element"==tree.name){if(!skip)return tree;skip=!1}return null}function allowedChildren(doc,tree,schema){let parentInfo=schema.tags[dist_elementName(doc,findParentElement(tree))];return(null==parentInfo?void 0:parentInfo.children)||schema.allTags}function openTags(doc,tree){let open=[];for(let parent=findParentElement(tree);parent&&!parent.type.isTop;parent=findParentElement(parent.parent)){let tagName=dist_elementName(doc,parent);if(tagName&&"CloseTag"==parent.lastChild.name)break;tagName&&open.indexOf(tagName)<0&&("EndTag"==tree.name||tree.from>=parent.firstChild.to)&&open.push(tagName)}return open}Schema.default=new Schema;const lang_html_dist_identifier=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(state,schema,tree,from,to){let end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">",parent=findParentElement(tree,!0);return{from,to,options:allowedChildren(state.doc,parent,schema).map((tagName=>({label:tagName,type:"type"}))).concat(openTags(state.doc,tree).map(((tag,i)=>({label:"/"+tag,apply:"/"+tag+end,type:"type",boost:99-i})))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(state,tree,from,to){let end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">";return{from,to,options:openTags(state.doc,tree).map(((tag,i)=>({label:tag,apply:tag+end,type:"type",boost:99-i}))),validFor:lang_html_dist_identifier}}function htmlCompletionFor(schema,context){let{state,pos}=context,tree=dist_syntaxTree(state).resolveInner(pos,-1),around=tree.resolve(pos);for(let before,scan=pos;around==tree&&(before=tree.childBefore(scan));){let last=before.lastChild;if(!last||!last.type.isError||last.from<last.to)break;around=tree=before,scan=last.from}return"TagName"==tree.name?tree.parent&&/CloseTag$/.test(tree.parent.name)?completeCloseTag(state,tree,tree.from,pos):completeTag(state,schema,tree,tree.from,pos):"StartTag"==tree.name?completeTag(state,schema,tree,pos,pos):"StartCloseTag"==tree.name||"IncompleteCloseTag"==tree.name?completeCloseTag(state,tree,pos,pos):context.explicit&&("OpenTag"==tree.name||"SelfClosingTag"==tree.name)||"AttributeName"==tree.name?function completeAttrName(state,schema,tree,from,to){let elt=findParentElement(tree),info=elt?schema.tags[dist_elementName(state.doc,elt)]:null,localAttrs=info&&info.attrs?Object.keys(info.attrs):[];return{from,to,options:(info&&!1===info.globalAttrs?localAttrs:localAttrs.length?localAttrs.concat(schema.globalAttrNames):schema.globalAttrNames).map((attrName=>({label:attrName,type:"property"}))),validFor:lang_html_dist_identifier}}(state,schema,tree,"AttributeName"==tree.name?tree.from:pos,pos):"Is"==tree.name||"AttributeValue"==tree.name||"UnquotedAttributeValue"==tree.name?function completeAttrValue(state,schema,tree,from,to){var _a;let token,nameNode=null===(_a=tree.parent)||void 0===_a?void 0:_a.getChild("AttributeName"),options=[];if(nameNode){let attrName=state.sliceDoc(nameNode.from,nameNode.to),attrs=schema.globalAttrs[attrName];if(!attrs){let elt=findParentElement(tree),info=elt?schema.tags[dist_elementName(state.doc,elt)]:null;attrs=(null==info?void 0:info.attrs)&&info.attrs[attrName]}if(attrs){let base=state.sliceDoc(from,to).toLowerCase(),quoteStart='"',quoteEnd='"';/^['"]/.test(base)?(token='"'==base[0]?/^[^"]*$/:/^[^']*$/,quoteStart="",quoteEnd=state.sliceDoc(to,to+1)==base[0]?"":base[0],base=base.slice(1),from++):token=/^[^\s<>='"]*$/;for(let value of attrs)options.push({label:value,apply:quoteStart+value+quoteEnd,type:"constant"})}}return{from,to,options,validFor:token}}(state,schema,tree,"Is"==tree.name?pos:tree.from,pos):!context.explicit||"Element"!=around.name&&"Text"!=around.name&&"Document"!=around.name?null:function completeStartTag(state,schema,tree,pos){let options=[],level=0;for(let tagName of allowedChildren(state.doc,tree,schema))options.push({label:"<"+tagName,type:"type"});for(let open of openTags(state.doc,tree))options.push({label:"</"+open+">",type:"type",boost:99-level++});return{from:pos,to:pos,options,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(state,schema,tree,pos)}function htmlCompletionSourceWith(config){let{extraTags,extraGlobalAttributes:extraAttrs}=config,schema=extraAttrs||extraTags?new Schema(extraTags,extraAttrs):Schema.default;return context=>htmlCompletionFor(schema,context)}const jsonParser=javascriptLanguage.parser.configure({top:"SingleExpression"}),defaultNesting=[{tag:"script",attrs:attrs=>"text/typescript"==attrs.type||"ts"==attrs.lang,parser:typescriptLanguage.parser},{tag:"script",attrs:attrs=>"text/babel"==attrs.type||"text/jsx"==attrs.type,parser:jsxLanguage.parser},{tag:"script",attrs:attrs=>"text/typescript-jsx"==attrs.type,parser:tsxLanguage.parser},{tag:"script",attrs:attrs=>"importmap"==attrs.type||"speculationrules"==attrs.type,parser:jsonParser},{tag:"script",attrs:attrs=>!attrs.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(attrs.type),parser:javascriptLanguage.parser},{tag:"style",attrs:attrs=>(!attrs.lang||"css"==attrs.lang)&&(!attrs.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(attrs.type)),parser:cssLanguage.parser}],defaultAttrs=[{name:"style",parser:cssLanguage.parser.configure({top:"Styles"})}].concat(eventAttributes.map((name=>({name,parser:javascriptLanguage.parser})))),htmlPlain=LRLanguage.define({name:"html",parser:dist_parser.configure({props:[indentNodeProp.add({Element(context){let after=/^(\s*)(<\/)?/.exec(context.textAfter);return context.node.to<=context.pos+after[0].length?context.continue():context.lineIndent(context.node.from)+(after[2]?0:context.unit)},"OpenTag CloseTag SelfClosingTag":context=>context.column(context.node.from)+context.unit,Document(context){if(context.pos+/\s*/.exec(context.textAfter)[0].length<context.node.to)return context.continue();let close,endElt=null;for(let cur=context.node;;){let last=cur.lastChild;if(!last||"Element"!=last.name||last.to!=cur.to)break;endElt=cur=last}return endElt&&(!(close=endElt.lastChild)||"CloseTag"!=close.name&&"SelfClosingTag"!=close.name)?context.lineIndent(endElt.from)+context.unit:null}}),foldNodeProp.add({Element(node){let first=node.firstChild,last=node.lastChild;return first&&"OpenTag"==first.name?{from:first.to,to:"CloseTag"==last.name?last.from:node.to}:null}}),bracketMatchingHandle.add({"OpenTag CloseTag":node=>node.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),htmlLanguage=htmlPlain.configure({wrap:configureNesting(defaultNesting,defaultAttrs)});function html(config={}){let wrap,dialect="";!1===config.matchClosingTags&&(dialect="noMatch"),!0===config.selfClosingTags&&(dialect=(dialect?dialect+" ":"")+"selfClosing"),(config.nestedLanguages&&config.nestedLanguages.length||config.nestedAttributes&&config.nestedAttributes.length)&&(wrap=configureNesting((config.nestedLanguages||[]).concat(defaultNesting),(config.nestedAttributes||[]).concat(defaultAttrs)));let lang=wrap?htmlPlain.configure({wrap,dialect}):dialect?htmlLanguage.configure({dialect}):htmlLanguage;return new LanguageSupport(lang,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(config)}),!1!==config.autoCloseTags?dist_autoCloseTags:[],javascript().support,css().support])}const dist_selfClosers=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),dist_autoCloseTags=EditorView.inputHandler.of(((view,from,to,text,insertTransaction)=>{if(view.composing||view.state.readOnly||from!=to||">"!=text&&"/"!=text||!htmlLanguage.isActiveAt(view.state,from,-1))return!1;let base=insertTransaction(),{state}=base,closeTags=state.changeByRange((range=>{var _a,_b,_c;let name,didType=state.doc.sliceString(range.from-1,range.to)==text,{head}=range,around=dist_syntaxTree(state).resolveInner(head-1,-1);if("TagName"!=around.name&&"StartTag"!=around.name||(around=around.parent),didType&&">"==text&&"OpenTag"==around.name){if("CloseTag"!=(null===(_b=null===(_a=around.parent)||void 0===_a?void 0:_a.lastChild)||void 0===_b?void 0:_b.name)&&(name=dist_elementName(state.doc,around.parent,head))&&!dist_selfClosers.has(name)){return{range,changes:{from:head,to:head+(">"===state.doc.sliceString(head,head+1)?1:0),insert:`</${name}>`}}}}else if(didType&&"/"==text&&"IncompleteCloseTag"==around.name){let base=around.parent;if(around.from==head-2&&"CloseTag"!=(null===(_c=base.lastChild)||void 0===_c?void 0:_c.name)&&(name=dist_elementName(state.doc,base,head))&&!dist_selfClosers.has(name)){let to=head+(">"===state.doc.sliceString(head,head+1)?1:0),insert=`${name}>`;return{range:dist_EditorSelection.cursor(head+insert.length,-1),changes:{from:head,to,insert}}}}return{range}}));return!closeTags.changes.empty&&(view.dispatch([base,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));var anser_lib=__webpack_require__("./node_modules/anser/lib/index.js"),lib_default=__webpack_require__.n(anser_lib),escape_carriage=__webpack_require__("./node_modules/escape-carriage/index.js"),lz_string=__webpack_require__("./node_modules/lz-string/libs/lz-string.js"),lz_string_default=__webpack_require__.n(lz_string),__assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}var _a$a,_a$9,SVG=function(props){return(0,jsx_runtime.jsx)("svg",__assign({fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},props),void 0)},SignInIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({viewBox:"0 0 48 48"},{children:[(0,jsx_runtime.jsx)("title",{children:"Sign in"},void 0),(0,jsx_runtime.jsx)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z"},void 0)]}),void 0)},SignOutIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({viewBox:"0 0 48 48"},{children:[(0,jsx_runtime.jsx)("title",{children:"Sign out"},void 0),(0,jsx_runtime.jsx)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z"},void 0)]}),void 0)},RestartIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({fill:"none",stroke:"currentColor"},{children:[(0,jsx_runtime.jsx)("title",{children:"Restart script"},void 0),(0,jsx_runtime.jsx)("path",{d:"M8 2C4.68629 2 2 4.68629 2 8C2 10.0946 3.07333 11.9385 4.7 13.0118",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M14.0005 7.9998C14.0005 5.82095 12.8391 3.91335 11.1016 2.8623",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M14.0003 2.3335H11.167C10.8908 2.3335 10.667 2.55735 10.667 2.8335V5.66683",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M1.99967 13.6665L4.83301 13.6665C5.10915 13.6665 5.33301 13.4426 5.33301 13.1665L5.33301 10.3332",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M10 10L12 12L10 14",strokeLinecap:"round",strokeLinejoin:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M14.667 14L12.667 14",strokeLinecap:"round",strokeLinejoin:"round"},void 0)]}),void 0)},RunIcon=function(){return(0,jsx_runtime.jsxs)(SVG,{children:[(0,jsx_runtime.jsx)("title",{children:"Run sandbox"},void 0),(0,jsx_runtime.jsx)("path",{d:"M11.0792 8.1078C11.2793 8.25007 11.27 8.55012 11.0616 8.67981L6.02535 11.8135C5.79638 11.956 5.5 11.7913 5.5 11.5216L5.5 8.40703L5.5 4.80661C5.5 4.52735 5.81537 4.36463 6.04296 4.52647L11.0792 8.1078Z"},void 0)]},void 0)},BackwardIcon=function(){return(0,jsx_runtime.jsxs)(SVG,{children:[(0,jsx_runtime.jsx)("title",{children:"Click to go back"},void 0),(0,jsx_runtime.jsx)("path",{d:"M9.64645 12.3536C9.84171 12.5488 10.1583 12.5488 10.3536 12.3536C10.5488 12.1583 10.5488 11.8417 10.3536 11.6464L9.64645 12.3536ZM10.3536 4.35355C10.5488 4.15829 10.5488 3.84171 10.3536 3.64644C10.1583 3.45118 9.84171 3.45118 9.64645 3.64644L10.3536 4.35355ZM6.07072 7.92929L5.71716 7.57573L6.07072 7.92929ZM10.3536 11.6464L6.42427 7.71716L5.71716 8.42426L9.64645 12.3536L10.3536 11.6464ZM6.42427 8.28284L10.3536 4.35355L9.64645 3.64644L5.71716 7.57573L6.42427 8.28284ZM6.42427 7.71716C6.58048 7.87337 6.58048 8.12663 6.42427 8.28284L5.71716 7.57573C5.48285 7.81005 5.48285 8.18995 5.71716 8.42426L6.42427 7.71716Z"},void 0)]},void 0)},ForwardIcon=function(){return(0,jsx_runtime.jsxs)(SVG,{children:[(0,jsx_runtime.jsx)("title",{children:"Click to go forward"},void 0),(0,jsx_runtime.jsx)("path",{d:"M6.35355 3.64645C6.15829 3.45118 5.84171 3.45118 5.64645 3.64645C5.45118 3.84171 5.45118 4.15829 5.64645 4.35355L6.35355 3.64645ZM5.64645 11.6464C5.45118 11.8417 5.45118 12.1583 5.64645 12.3536C5.84171 12.5488 6.15829 12.5488 6.35355 12.3536L5.64645 11.6464ZM9.92929 8.07071L10.2828 8.42426L9.92929 8.07071ZM5.64645 4.35355L9.57574 8.28284L10.2828 7.57574L6.35355 3.64645L5.64645 4.35355ZM9.57574 7.71716L5.64645 11.6464L6.35355 12.3536L10.2828 8.42426L9.57574 7.71716ZM9.57574 8.28284C9.41952 8.12663 9.41953 7.87337 9.57574 7.71716L10.2828 8.42426C10.5172 8.18995 10.5172 7.81005 10.2828 7.57574L9.57574 8.28284Z"},void 0)]},void 0)},RefreshIcon=function(){return(0,jsx_runtime.jsxs)(SVG,{children:[(0,jsx_runtime.jsx)("title",{children:"Refresh preview"},void 0),(0,jsx_runtime.jsx)("path",{clipRule:"evenodd",d:"M3.83325 7.99992C3.83325 5.69867 5.69853 3.83325 7.99934 3.83325C9.81246 3.83325 11.3563 4.99195 11.9285 6.61097C11.9396 6.6425 11.9536 6.67221 11.97 6.69992H8.80005C8.52391 6.69992 8.30005 6.92378 8.30005 7.19992C8.30005 7.47606 8.52391 7.69992 8.80005 7.69992H12.5667C12.8981 7.69992 13.1667 7.43129 13.1667 7.09992V3.33325C13.1667 3.05711 12.9429 2.83325 12.6667 2.83325C12.3906 2.83325 12.1667 3.05711 12.1667 3.33325V4.94608C11.2268 3.66522 9.7106 2.83325 7.99934 2.83325C5.14613 2.83325 2.83325 5.14651 2.83325 7.99992C2.83325 10.8533 5.14613 13.1666 7.99934 13.1666C9.91218 13.1666 11.5815 12.1266 12.474 10.5836C12.6123 10.3446 12.5306 10.0387 12.2915 9.90044C12.0525 9.76218 11.7466 9.84387 11.6084 10.0829C10.8873 11.3296 9.54072 12.1666 7.99934 12.1666C5.69853 12.1666 3.83325 10.3012 3.83325 7.99992Z",fillRule:"evenodd"},void 0)]},void 0)},CleanIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({fill:"none",stroke:"currentColor"},{children:[(0,jsx_runtime.jsx)("title",{children:"Clean"},void 0),(0,jsx_runtime.jsx)("circle",{cx:"7.99998",cy:"8.00004",r:"4.66667",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M4.66669 4.66663L11.3334 11.3333"},void 0)]}),void 0)},ExportIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({fill:"none",stroke:"currentColor"},{children:[(0,jsx_runtime.jsx)("title",{children:"Open on CodeSandbox"},void 0),(0,jsx_runtime.jsx)("path",{d:"M6.66665 3.33337H4.33331C3.78103 3.33337 3.33331 3.78109 3.33331 4.33337V11.6667C3.33331 12.219 3.78103 12.6667 4.33331 12.6667H11.6666C12.2189 12.6667 12.6666 12.219 12.6666 11.6667V9.33337",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M10 3.33337H12.5667C12.6219 3.33337 12.6667 3.37815 12.6667 3.43337V6.00004",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M7.33331 8.66668L12.5333 3.46667",strokeLinecap:"round"},void 0)]}),void 0)},CloseIcon=function(){return(0,jsx_runtime.jsxs)(SVG,__assign({stroke:"currentColor"},{children:[(0,jsx_runtime.jsx)("title",{children:"Close file"},void 0),(0,jsx_runtime.jsx)("path",{d:"M12 4L4 12",strokeLinecap:"round"},void 0),(0,jsx_runtime.jsx)("path",{d:"M4 4L12 12",strokeLinecap:"round"},void 0)]}),void 0)},ConsoleIcon=function(){return(0,jsx_runtime.jsxs)(SVG,{children:[(0,jsx_runtime.jsx)("title",{children:"Open browser console"},void 0),(0,jsx_runtime.jsx)("path",{d:"M5.65871 3.62037C5.44905 3.44066 5.1334 3.46494 4.95368 3.6746C4.77397 3.88427 4.79825 4.19992 5.00792 4.37963L5.65871 3.62037ZM5.00792 11.6204C4.79825 11.8001 4.77397 12.1157 4.95368 12.3254C5.1334 12.5351 5.44905 12.5593 5.65871 12.3796L5.00792 11.6204ZM9.9114 7.92407L10.2368 7.54445L9.9114 7.92407ZM5.00792 4.37963L9.586 8.3037L10.2368 7.54445L5.65871 3.62037L5.00792 4.37963ZM9.586 7.6963L5.00792 11.6204L5.65871 12.3796L10.2368 8.45555L9.586 7.6963ZM9.586 8.3037C9.39976 8.14407 9.39976 7.85594 9.586 7.6963L10.2368 8.45555C10.5162 8.2161 10.5162 7.7839 10.2368 7.54445L9.586 8.3037Z"},void 0),(0,jsx_runtime.jsx)("path",{d:"M10 11.5C9.72386 11.5 9.5 11.7239 9.5 12C9.5 12.2761 9.72386 12.5 10 12.5V11.5ZM14.6667 12.5C14.9428 12.5 15.1667 12.2761 15.1667 12C15.1667 11.7239 14.9428 11.5 14.6667 11.5V12.5ZM10 12.5H14.6667V11.5H10V12.5Z"},void 0)]},void 0)},defaultLight={colors:{surface1:"#ffffff",surface2:"#EFEFEF",surface3:"#F3F3F3",disabled:"#C5C5C5",base:"#323232",clickable:"#808080",hover:"#4D4D4D",accent:"#3973E0",error:"#EA3323",errorSurface:"#FCF1F0",warning:"#6A4516",warningSurface:"#FEF2C0"},syntax:{plain:"#151515",comment:{color:"#999",fontStyle:"italic"},keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},defaultDark={colors:{surface1:"#151515",surface2:"#252525",surface3:"#2F2F2F",disabled:"#4D4D4D",base:"#808080",clickable:"#999999",hover:"#C5C5C5",accent:"#E5E5E5",error:"#FFB4A6",errorSurface:"#690000",warning:"#E7C400",warningSurface:"#3A3000"},syntax:{plain:"#FFFFFF",comment:{color:"#757575",fontStyle:"italic"},keyword:"#77B7D7",tag:"#DFAB5C",punctuation:"#ffffff",definition:"#86D9CA",property:"#77B7D7",static:"#C64640",string:"#977CDC"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},SANDPACK_THEMES={light:defaultLight,dark:defaultDark,auto:"undefined"!=typeof window&&(null===(_a$a=null===window||void 0===window?void 0:window.matchMedia)||void 0===_a$a?void 0:_a$a.call(window,"(prefers-color-scheme: dark)").matches)?defaultDark:defaultLight},getFileName=function(filePath){var lastIndexOfSlash=filePath.lastIndexOf("/");return filePath.slice(lastIndexOfSlash+1)},isDarkColor=function(color){var r=0,g=0,b=0;if(color.startsWith("#")){if(color.length<7)return!0;r=parseInt(color.substr(1,2),16),g=parseInt(color.substr(3,2),16),b=parseInt(color.substr(5,2),16)}else{var rgbValues=color.replace("rgb(","").replace("rgba(","").replace(")","").split(",");if(rgbValues.length<3)return!0;r=parseInt(rgbValues[0],10),g=parseInt(rgbValues[1],10),b=parseInt(rgbValues[2],10)}return(299*r+587*g+114*b)/1e3<128},lastCount=0,generateRandomId=function(){return(+(Date.now().toString(10).substr(0,4)+lastCount++)).toString(16)},dist_toString=function(){return""},defineProperty=Object.getOwnPropertyDescriptors({toString:dist_toString});Object.defineProperties(dist_toString,defineProperty);var createTheme=(_a$9=X({prefix:"sp"})).createTheme,dist_css=_a$9.css,keyframes=(_a$9.getCssText,_a$9.keyframes),defaultVariables={space:new Array(11).fill(" ").reduce((function(acc,_,index){var _a;return __assign(__assign({},acc),((_a={})[index+1]=4*(index+1)+"px",_a))}),{}),border:{radius:"4px"},layout:{height:"300px",headerHeight:"40px"},transitions:{default:"150ms ease"},zIndices:{base:"1",overlay:"2",top:"3"}},simpleHashFunction=function(str){for(var hash=0,i=0;i<str.length;hash&=hash)hash=31*hash+str.charCodeAt(i++);return Math.abs(hash)},fakeCss=function(){return""};fakeCss.toString=fakeCss;var ClassNamesContext=(0,react.createContext)({}),ClassNamesProvider=function(_a){var children=_a.children,classes=_a.classes;return(0,jsx_runtime.jsx)(ClassNamesContext.Provider,__assign({value:classes||{}},{children}),void 0)},useClassNames=function(){var contextClassNames=(0,react.useContext)(ClassNamesContext);return function sandpackClassNames(customClassName,allClassNames){void 0===allClassNames&&(allClassNames=[]);var custom="sp-"+customClassName;return joinClassNames.apply(void 0,__spreadArray(__spreadArray([],allClassNames,!1),[custom,contextClassNames[custom]],!1))}},joinClassNames=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return args.filter(Boolean).join(" ")},wrapperClassName$3=dist_css({all:"initial",fontSize:"$font$size",fontFamily:"$font$body",display:"block",boxSizing:"border-box",textRendering:"optimizeLegibility",WebkitTapHighlightColor:"transparent",WebkitFontSmoothing:"subpixel-antialiased",variants:{variant:{dark:{colorScheme:"dark"},light:{colorScheme:"light"}}},"@media screen and (min-resolution: 2dppx)":{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},"*":{boxSizing:"border-box"},".sp-wrapper:focus":{outline:"0"}}),SandpackThemeContext=react.createContext({theme:defaultLight,id:"light",mode:"light"}),SandpackThemeProvider=function(_a){var themeFromProps=_a.theme,children=_a.children,className=_a.className,props=__rest(_a,["theme","children","className"]),_b=function(inputTheme){var _a,_b,_c,_d,_e;if(void 0===inputTheme&&(inputTheme="light"),"string"==typeof inputTheme){var predefinedTheme=SANDPACK_THEMES[inputTheme];if(!predefinedTheme)throw new Error("[sandpack-react]: invalid theme '"+inputTheme+"' provided.");return{theme:predefinedTheme,id:inputTheme,mode:isDarkColor(predefinedTheme.colors.surface1)?"dark":"light"}}var mode=isDarkColor(null!==(_b=null===(_a=null==inputTheme?void 0:inputTheme.colors)||void 0===_a?void 0:_a.surface1)&&void 0!==_b?_b:defaultLight.colors.surface1)?"dark":"light",baseTheme="dark"===mode?defaultDark:defaultLight,theme={colors:__assign(__assign({},baseTheme.colors),null!==(_c=null==inputTheme?void 0:inputTheme.colors)&&void 0!==_c?_c:{}),syntax:__assign(__assign({},baseTheme.syntax),null!==(_d=null==inputTheme?void 0:inputTheme.syntax)&&void 0!==_d?_d:{}),font:__assign(__assign({},baseTheme.font),null!==(_e=null==inputTheme?void 0:inputTheme.font)&&void 0!==_e?_e:{})};return{theme,id:"sp-"+(inputTheme?simpleHashFunction(JSON.stringify(theme)):"default"),mode}}(themeFromProps),theme=_b.theme,id=_b.id,mode=_b.mode,classNames=useClassNames(),themeClassName=react.useMemo((function(){return createTheme(id,function(theme){var syntax=Object.entries(theme.syntax).reduce((function(tokenAcc,_a){var _b,tokenName=_a[0],tokenValue=_a[1],newValues=((_b={})["color-"+tokenName]=tokenValue,_b);return"object"==typeof tokenValue&&(newValues=Object.entries(tokenValue).reduce((function(valueAcc,_a){var _b,styleProp=_a[0],styleValue=_a[1];return __assign(__assign({},valueAcc),((_b={})[styleProp+"-"+tokenName]=styleValue,_b))}),{})),__assign(__assign({},tokenAcc),newValues)}),{});return __assign(__assign({},defaultVariables),{colors:theme.colors,font:theme.font,syntax})}(theme))}),[theme,id]);return(0,jsx_runtime.jsx)(SandpackThemeContext.Provider,__assign({value:{theme,id,mode}},{children:(0,jsx_runtime.jsx)("div",__assign({className:classNames("wrapper",[themeClassName,wrapperClassName$3({variant:mode}),className])},props,{children}),void 0)}),void 0)},commonFiles=(SandpackThemeContext.Consumer,{"/styles.css":{code:"body {\n  font-family: sans-serif;\n  -webkit-font-smoothing: auto;\n  -moz-font-smoothing: auto;\n  -moz-osx-font-smoothing: grayscale;\n  font-smoothing: auto;\n  text-rendering: optimizeLegibility;\n  font-smooth: always;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\nh1 {\n  font-size: 1.5rem;\n}"}}),ASTRO_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/pages/index.astro":{code:'---\nimport "../styles.css";\nconst data = "world";\n---\n\n<h1>Hello {data}</h1>\n\n<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>'},".env":{code:'ASTRO_TELEMETRY_DISABLED="1"'},"/package.json":{code:JSON.stringify({dependencies:{astro:"^1.6.12","esbuild-wasm":"^0.15.16"},scripts:{dev:"astro dev",start:"astro dev",build:"astro build",preview:"astro preview",astro:"astro"}})}},main:"/src/pages/index.astro",environment:"node"},NEXTJS_TEMPLATE={files:__assign(__assign({},commonFiles),{"/pages/_app.js":{code:"import '../styles.css'\n\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}"},"/pages/index.js":{code:'export default function Home({ data }) {\n  return (\n    <div>\n      <h1>Hello {data}</h1>\n    </div>\n  );\n}\n  \nexport function getServerSideProps() {\n  return {\n    props: { data: "world" },\n  }\n}\n'},"/next.config.js":{code:"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n}\n\nmodule.exports = nextConfig\n"},"/package.json":{code:JSON.stringify({name:"my-app",version:"0.1.0",private:!0,scripts:{dev:"NEXT_TELEMETRY_DISABLED=1 next dev",build:"next build",start:"next start",lint:"next lint"},dependencies:{next:"12.1.6",react:"18.2.0","react-dom":"18.2.0","@next/swc-wasm-nodejs":"12.1.6"}})}}),main:"/pages/index.js",environment:"node"},NODE_TEMPLATE={files:{"/index.js":{code:"const http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/html');\n  res.end('Hello world');\n});\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});"},"/package.json":{code:JSON.stringify({dependencies:{},scripts:{start:"node index.js"},main:"index.js"})}},main:"/index.js",environment:"node"},VITE_TEMPLATE={files:__assign(__assign({},commonFiles),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/index.js"><\/script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},devDependencies:{vite:"4.1.4","esbuild-wasm":"0.17.12"}})}}),main:"/index.js",environment:"node"},VITE_REACT_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.jsx":{code:'export default function App() {\n  const data = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.jsx":{code:'import { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.jsx"><\/script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0"},devDependencies:{"@vitejs/plugin-react":"3.1.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})},"/vite.config.js":{code:'import { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react";\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n});\n'}}),main:"/App.jsx",environment:"node"},VITE_REACT_TS_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.tsx":{code:'export default function App() {\n  const data: string = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.tsx":{code:'import { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\nimport React from "react";\n\nconst root = createRoot(document.getElementById("root") as HTMLElement);\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.tsx"><\/script>\n  </body>\n</html>\n'},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,lib:["DOM","DOM.Iterable","ESNext"],allowJs:!1,skipLibCheck:!0,esModuleInterop:!1,allowSyntheticDefaultImports:!0,strict:!0,forceConsistentCasingInFileNames:!0,module:"ESNext",moduleResolution:"Node",resolveJsonModule:!0,isolatedModules:!0,noEmit:!0,jsx:"react-jsx"},include:["src"],references:[{path:"./tsconfig.node.json"}]},null,2)},"/tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0"},devDependencies:{"@types/react":"^18.0.28","@types/react-dom":"^18.0.11","@vitejs/plugin-react":"^3.1.0",typescript:"^4.9.5",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n})\n"}}),main:"/App.tsx",environment:"node"},VITE_PREACT_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.jsx":{code:'export default function App() {\n  const data = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.jsx":{code:'import { render } from "preact";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = document.getElementById("root");\nrender(<App />, root);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.jsx"><\/script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{preact:"^10.16.0"},devDependencies:{"@preact/preset-vite":"^2.5.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})},"/vite.config.js":{code:"import { defineConfig } from \"vite\";\nimport preact from '@preact/preset-vite'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [preact()],\n});\n"}}),main:"/App.jsx",environment:"node"},VITE_PREACT_TS_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.tsx":{code:'export default function App() {\n  const data: string = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.tsx":{code:'import { render } from "preact";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = document.getElementById("root") as HTMLElement;\nrender(<App />, root);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.tsx"><\/script>\n  </body>\n</html>\n'},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,lib:["DOM","DOM.Iterable","ESNext"],allowJs:!1,skipLibCheck:!0,esModuleInterop:!1,allowSyntheticDefaultImports:!0,strict:!0,forceConsistentCasingInFileNames:!0,module:"ESNext",moduleResolution:"Node",resolveJsonModule:!0,isolatedModules:!0,noEmit:!0,jsx:"react-jsx",jsxImportSource:"preact"},include:["src"],references:[{path:"./tsconfig.node.json"}]},null,2)},"/tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{preact:"^10.16.0"},devDependencies:{"@preact/preset-vite":"^2.5.0",typescript:"^4.9.5",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport preact from '@preact/preset-vite'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [preact()],\n})\n"}}),main:"/App.tsx",environment:"node"},VITE_SVELTE_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.svelte":{code:'<script>\nconst data = "world";\n<\/script>\n\n<h1>Hello {data}</h1>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import App from './App.svelte'\nimport \"./styles.css\"\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"><\/script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [svelte()],\n})"},"/package.json":{code:JSON.stringify({type:"module",scripts:{dev:"vite"},devDependencies:{"@sveltejs/vite-plugin-svelte":"^2.0.2",svelte:"^3.55.1",vite:"4.0.4","esbuild-wasm":"^0.17.12"}})}},main:"/src/App.svelte",environment:"node"},VITE_SVELTE_TS_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.svelte":{code:'<script lang="ts">\nconst data: string = "world";\n<\/script>\n\n<h1>Hello {data}</h1>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.ts":{code:"import App from './App.svelte'\nimport \"./styles.css\"\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.ts"><\/script>\n  </body>\n</html>\n'},"/vite-env.d.ts":{code:'/// <reference types="svelte" />\n/// <reference types="vite/client" />'},"svelte.config.js":{code:"import { vitePreprocess } from '@sveltejs/vite-plugin-svelte'\n\nexport default {\n  // Consult https://svelte.dev/docs#compile-time-svelte-preprocess\n  // for more information about preprocessors\n  preprocess: vitePreprocess(),\n}\n"},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [svelte()],\n})"},"tsconfig.json":{code:JSON.stringify({extends:"@tsconfig/svelte/tsconfig.json",compilerOptions:{target:"ESNext",useDefineForClassFields:!0,module:"ESNext",resolveJsonModule:!0,allowJs:!0,checkJs:!0,isolatedModules:!0},include:["src/**/*.d.ts","src/**/*.ts","src/**/*.js","src/**/*.svelte"],references:[{path:"./tsconfig.node.json"}]},null,2)},"tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node"},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({type:"module",scripts:{dev:"vite"},devDependencies:{"@sveltejs/vite-plugin-svelte":"^2.0.2","@tsconfig/svelte":"^3.0.0",svelte:"^3.55.1","svelte-check":"^2.10.3",tslib:"^2.5.0",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)}},main:"/src/App.svelte",environment:"node"},VITE_VUE_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.vue":{code:'<script setup>\nimport { ref } from "vue";\n\nconst data = ref("world");\n<\/script>\n\n<template>\n  <h1>Hello {{ data }}</h1>\n</template>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\"\n            \ncreateApp(App).mount('#app')            \n"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"><\/script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n"},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{vue:"^3.2.45"},devDependencies:{"@vitejs/plugin-vue":"3.2.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})}},main:"/src/App.vue",environment:"node"},VITE_VUE_TS_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.vue":{code:'<script setup lang="ts">\nimport { ref } from "vue";\n\nconst data = ref<string>("world");\n<\/script>\n\n<template>\n  <h1>Hello {{ data }}</h1>\n</template>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.ts":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\"\n\ncreateApp(App).mount('#app')\n"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.ts"><\/script>\n  </body>\n</html>\n'},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n"},"tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,module:"ESNext",moduleResolution:"Node",strict:!0,jsx:"preserve",resolveJsonModule:!0,isolatedModules:!0,esModuleInterop:!0,lib:["ESNext","DOM"],skipLibCheck:!0,noEmit:!0},include:["src/**/*.ts","src/**/*.d.ts","src/**/*.tsx","src/**/*.vue"],references:[{path:"./tsconfig.node.json"}]},null,2)},"tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{vue:"^3.2.47"},devDependencies:{"@vitejs/plugin-vue":"^4.0.0",vite:"4.1.4","vue-tsc":"^1.2.0",typescript:"^4.9.5","esbuild-wasm":"^0.17.12"}},null,2)}},main:"/src/App.vue",environment:"node"},ANGULAR_TEMPLATE={files:{"/src/app/app.component.css":commonFiles["/styles.css"],"/src/app/app.component.html":{code:"<div>\n<h1>{{ helloWorld }}</h1>\n</div>     \n"},"/src/app/app.component.ts":{code:'import { Component } from "@angular/core";\n\n@Component({\n  selector: "app-root",\n  templateUrl: "./app.component.html",\n  styleUrls: ["./app.component.css"]\n})\nexport class AppComponent {\n  helloWorld = "Hello world";\n}           \n'},"/src/app/app.module.ts":{code:'import { BrowserModule } from "@angular/platform-browser";\nimport { NgModule } from "@angular/core";\n      \nimport { AppComponent } from "./app.component";\n      \n@NgModule({\n  declarations: [AppComponent],\n  imports: [BrowserModule],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}       \n'},"/src/index.html":{code:'<!doctype html>\n<html lang="en">\n      \n<head>\n  <meta charset="utf-8">\n  <title>Angular</title>\n  <base href="/">\n      \n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <link rel="icon" type="image/x-icon" href="favicon.ico">\n</head>\n      \n<body>\n   <app-root></app-root>\n</body>\n      \n</html>\n'},"/src/main.ts":{code:'import { enableProdMode } from "@angular/core";\nimport { platformBrowserDynamic } from "@angular/platform-browser-dynamic";\n      \nimport { AppModule } from "./app/app.module";      \n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n      \n'},"/src/polyfills.ts":{code:'import "core-js/proposals/reflect-metadata";   \n      import "zone.js/dist/zone";\n'},"/package.json":{code:JSON.stringify({dependencies:{"@angular/core":"^11.2.0","@angular/platform-browser":"^11.2.0","@angular/platform-browser-dynamic":"^11.2.0","@angular/common":"^11.2.0","@angular/compiler":"^11.2.0","zone.js":"0.11.3","core-js":"3.8.3",rxjs:"6.6.3"},main:"/src/main.ts"})}},main:"/src/app/app.component.ts",environment:"angular-cli"},REACT_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.js":{code:"export default function App() {\n  return <h1>Hello world</h1>\n}\n"},"/index.js":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^5.0.0"},main:"/index.js"})}}),main:"/App.js",environment:"create-react-app"},REACT_TYPESCRIPT_TEMPLATE={files:__assign(__assign({},commonFiles),{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/App.tsx":{code:"export default function App(): JSX.Element {\n  return <h1>Hello world</h1>\n}\n"},"/index.tsx":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^4.0.0"},devDependencies:{"@types/react":"^18.0.0","@types/react-dom":"^18.0.0",typescript:"^4.0.0"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"create-react-app"},SOLID_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.tsx":{code:'import { Component } from "solid-js";\n\nconst App: Component = () => {\n  return <h1>Hello world</h1>\n};\n\nexport default App;'},"/index.tsx":{code:'import { render } from "solid-js/web";\nimport App from "./App";\n\nimport "./styles.css";\n\nrender(() => <App />, document.getElementById("app"));'},"/index.html":{code:'<html>\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n<body>\n  <div id="app"></div>\n  <script src="src/index.tsx"><\/script>\n</body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{"solid-js":"1.3.15"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"solid"},SVELTE_TEMPLATE={files:__assign(__assign({},commonFiles),{"/App.svelte":{code:"<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>\n\n<script>\n  let name = 'world';\n<\/script>\n\n<main>\n  <h1>Hello {name}</h1>\n</main>"},"/index.js":{code:'import App from "./App.svelte";\nimport "./styles.css";\n\nconst app = new App({\n  target: document.body\n});\n\nexport default app;\n      '},"/public/index.html":{code:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf8" />\n    <meta name="viewport" content="width=device-width" />\n\n    <title>Svelte app</title>\n\n    <link rel="stylesheet" href="public/bundle.css" />\n  </head>\n\n  <body>\n    <script src="bundle.js"><\/script>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{svelte:"^3.0.0"},main:"/index.js"})}}),main:"/App.svelte",environment:"svelte"},TEST_TYPESCRIPT_TEMPLATE={files:{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/add.ts":{code:"export const add = (a: number, b: number): number => a + b;"},"/add.test.ts":{code:"import { add } from './add';\n\ndescribe('add', () => {\n  test('Commutative Law of Addition', () => {\n    expect(add(1, 2)).toBe(add(2, 1));\n  });\n});"},"package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/add.ts"})}},main:"/add.test.ts",environment:"parcel",mode:"tests"},VANILLA_TEMPLATE={files:__assign(__assign({},commonFiles),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.js">\n  <\/script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},main:"/index.js"})}}),main:"/index.js",environment:"parcel"},VANILLA_TYPESCRIPT_TEMPLATE={files:__assign(__assign({},commonFiles),{"tsconfig.json":{code:'{\n  "compilerOptions": {\n    "strict": true,\n    "module": "commonjs",\n    "jsx": "preserve",\n    "esModuleInterop": true,\n    "sourceMap": true,\n    "allowJs": true,\n    "lib": [\n      "es6",\n      "dom"\n    ],\n    "rootDir": "src",\n    "moduleResolution": "node"\n  }\n}'},"/index.ts":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.ts">\n  <\/script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/index.ts"})}}),main:"/index.ts",environment:"parcel"},VUE_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nconst msg = ref('world');\n<\/script>"},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    \x3c!-- built files will be auto injected --\x3e\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3",version:"0.1.0",private:!0,main:"/src/main.js",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-service":"^5.0.8"}})}},main:"/src/App.vue",environment:"vue-cli"},VUE_TS_TEMPLATE={files:{"/src/styles.css":commonFiles["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nconst msg = ref<string>('world');\n<\/script>"},"/src/main.ts":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/src/shims-vue.d.ts":'/* eslint-disable */\ndeclare module "*.vue" {\n  import type { DefineComponent } from "vue";\n  const component: DefineComponent<{}, {}, any>;\n  export default component;\n}',"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    \x3c!-- built files will be auto injected --\x3e\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3-ts",version:"0.1.0",private:!0,main:"/src/main.ts",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-plugin-typescript":"^5.0.8","@vue/cli-service":"^5.0.8",typescript:"^4.9.3"}})},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"esnext",module:"esnext",strict:!0,jsx:"preserve",moduleResolution:"node",experimentalDecorators:!0,skipLibCheck:!0,esModuleInterop:!0,allowSyntheticDefaultImports:!0,forceConsistentCasingInFileNames:!0,useDefineForClassFields:!0,sourceMap:!1,baseUrl:".",types:["webpack-env"],paths:{"@/*":["src/*"]},lib:["esnext","dom","dom.iterable","scripthost"]},include:["src/**/*.ts","src/**/*.tsx","src/**/*.vue","tests/**/*.ts","tests/**/*.tsx"],exclude:["node_modules"]})}},main:"/src/App.vue",environment:"vue-cli"},SANDBOX_TEMPLATES={static:{files:__assign(__assign({},commonFiles),{"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n  <link rel="stylesheet" href="/styles.css" />\n</head>\n\n<body>\n  <h1>Hello world</h1>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},main:"/index.html"})}}),main:"/index.html",environment:"static"},angular:ANGULAR_TEMPLATE,react:REACT_TEMPLATE,"react-ts":REACT_TYPESCRIPT_TEMPLATE,solid:SOLID_TEMPLATE,svelte:SVELTE_TEMPLATE,"test-ts":TEST_TYPESCRIPT_TEMPLATE,"vanilla-ts":VANILLA_TYPESCRIPT_TEMPLATE,vanilla:VANILLA_TEMPLATE,vue:VUE_TEMPLATE,"vue-ts":VUE_TS_TEMPLATE,node:NODE_TEMPLATE,nextjs:NEXTJS_TEMPLATE,vite:VITE_TEMPLATE,"vite-react":VITE_REACT_TEMPLATE,"vite-react-ts":VITE_REACT_TS_TEMPLATE,"vite-preact":VITE_PREACT_TEMPLATE,"vite-preact-ts":VITE_PREACT_TS_TEMPLATE,"vite-vue":VITE_VUE_TEMPLATE,"vite-vue-ts":VITE_VUE_TS_TEMPLATE,"vite-svelte":VITE_SVELTE_TEMPLATE,"vite-svelte-ts":VITE_SVELTE_TS_TEMPLATE,astro:ASTRO_TEMPLATE},getSandpackStateFromProps=function(props){var _a,_b,_c,_d,_e,_f,normalizedFilesPath=(0,types_36e5ec0d.f)(props.files),projectSetup=combineTemplateFilesToSetup({template:props.template,customSetup:props.customSetup,files:normalizedFilesPath}),visibleFiles=(0,types_36e5ec0d.f)(null!==(_b=null===(_a=props.options)||void 0===_a?void 0:_a.visibleFiles)&&void 0!==_b?_b:[]),activeFile=(null===(_c=props.options)||void 0===_c?void 0:_c.activeFile)?resolveFile(null===(_d=props.options)||void 0===_d?void 0:_d.activeFile,projectSetup.files):void 0;0===visibleFiles.length&&normalizedFilesPath&&Object.keys(normalizedFilesPath).forEach((function(filePath){var file=normalizedFilesPath[filePath];"string"!=typeof file?(!activeFile&&file.active&&(activeFile=filePath,!0===file.hidden&&visibleFiles.push(filePath)),file.hidden||visibleFiles.push(filePath)):visibleFiles.push(filePath)})),0===visibleFiles.length&&(visibleFiles=[projectSetup.main]),projectSetup.entry&&!projectSetup.files[projectSetup.entry]&&(projectSetup.entry=resolveFile(projectSetup.entry,projectSetup.files)),!activeFile&&projectSetup.main&&(activeFile=projectSetup.main),activeFile&&projectSetup.files[activeFile]||(activeFile=visibleFiles[0]),visibleFiles.includes(activeFile)||visibleFiles.push(activeFile);var files=(0,types_36e5ec0d.d)(projectSetup.files,null!==(_e=projectSetup.dependencies)&&void 0!==_e?_e:{},null!==(_f=projectSetup.devDependencies)&&void 0!==_f?_f:{},projectSetup.entry);return{visibleFiles:visibleFiles.filter((function(path){return files[path]})),activeFile,files,environment:projectSetup.environment,shouldUpdatePreview:!0}},resolveFile=function(path,files){var normalizedFilesPath=(0,types_36e5ec0d.f)(files),normalizedPath=(0,types_36e5ec0d.f)(path);if(normalizedPath in normalizedFilesPath)return normalizedPath;if(!path)return null;for(var resolvedPath=null,index=0,strategies=[".js",".jsx",".ts",".tsx"];!resolvedPath&&index<strategies.length;){var attemptPath=""+normalizedPath.split(".")[0]+strategies[index];void 0!==normalizedFilesPath[attemptPath]&&(resolvedPath=attemptPath),index++}return resolvedPath},combineTemplateFilesToSetup=function(_a){var files=_a.files,template=_a.template,customSetup=_a.customSetup;if(!template){if(!customSetup){var defaultTemplate=SANDBOX_TEMPLATES.vanilla;return __assign(__assign({},defaultTemplate),{files:__assign(__assign({},defaultTemplate.files),convertedFilesToBundlerFiles(files))})}if(!files||0===Object.keys(files).length)throw new Error("[sandpack-react]: without a template, you must pass at least one file");return __assign(__assign({},customSetup),{files:convertedFilesToBundlerFiles(files)})}var baseTemplate=SANDBOX_TEMPLATES[template];if(!baseTemplate)throw new Error('[sandpack-react]: invalid template "'+template+'" provided');return customSetup||files?{files:convertedFilesToBundlerFiles(__assign(__assign({},baseTemplate.files),files)),dependencies:__assign(__assign({},baseTemplate.dependencies),null==customSetup?void 0:customSetup.dependencies),devDependencies:__assign(__assign({},baseTemplate.devDependencies),null==customSetup?void 0:customSetup.devDependencies),entry:(0,types_36e5ec0d.f)(null==customSetup?void 0:customSetup.entry),main:baseTemplate.main,environment:(null==customSetup?void 0:customSetup.environment)||baseTemplate.environment}:baseTemplate},convertedFilesToBundlerFiles=function(files){return files?Object.keys(files).reduce((function(acc,key){return"string"==typeof files[key]?acc[key]={code:files[key]}:acc[key]=files[key],acc}),{}):{}},Sandpack$1=react.createContext(null),SandpackProvider=function(props){var _a,_b,children=props.children,options=props.options,style=props.style,className=props.className,theme=props.theme,_c=function(props){var originalStateFromProps=getSandpackStateFromProps(props),_a=(0,react.useState)(originalStateFromProps),state=_a[0],setState=_a[1],isMountedRef=(0,react.useRef)(!1);(0,react.useEffect)((function(){isMountedRef.current?setState(getSandpackStateFromProps(props)):isMountedRef.current=!0}),[props.files,props.customSetup,props.template]);var updateFile=function(pathOrFiles,code,shouldUpdatePreview){void 0===shouldUpdatePreview&&(shouldUpdatePreview=!0),setState((function(prev){var _a,files=prev.files;return"string"==typeof pathOrFiles&&"string"==typeof code?files=__assign(__assign({},files),((_a={})[pathOrFiles]={code},_a)):"object"==typeof pathOrFiles&&(files=__assign(__assign({},files),convertedFilesToBundlerFiles(pathOrFiles))),__assign(__assign({},prev),{files:(0,types_36e5ec0d.f)(files),shouldUpdatePreview})}))},operations={openFile:function(path){setState((function(_a){var visibleFiles=_a.visibleFiles,rest=__rest(_a,["visibleFiles"]),newPaths=visibleFiles.includes(path)?visibleFiles:__spreadArray(__spreadArray([],visibleFiles,!0),[path],!1);return __assign(__assign({},rest),{activeFile:path,visibleFiles:newPaths})}))},resetFile:function(path){setState((function(prevState){var _a;return __assign(__assign({},prevState),{files:__assign(__assign({},prevState.files),(_a={},_a[path]=originalStateFromProps.files[path],_a))})}))},resetAllFiles:function(){setState((function(prev){return __assign(__assign({},prev),{files:originalStateFromProps.files})}))},setActiveFile:function(activeFile){state.files[activeFile]&&setState((function(prev){return __assign(__assign({},prev),{activeFile})}))},updateCurrentFile:function(code,shouldUpdatePreview){void 0===shouldUpdatePreview&&(shouldUpdatePreview=!0),updateFile(state.activeFile,code,shouldUpdatePreview)},updateFile,addFile:updateFile,closeFile:function(path){1!==state.visibleFiles.length&&setState((function(_a){var visibleFiles=_a.visibleFiles,activeFile=_a.activeFile,prev=__rest(_a,["visibleFiles","activeFile"]),indexOfRemovedPath=visibleFiles.indexOf(path),newPaths=visibleFiles.filter((function(openPath){return openPath!==path}));return __assign(__assign({},prev),{activeFile:path===activeFile?0===indexOfRemovedPath?visibleFiles[1]:visibleFiles[indexOfRemovedPath-1]:activeFile,visibleFiles:newPaths})}))},deleteFile:function(path,shouldUpdatePreview){void 0===shouldUpdatePreview&&(shouldUpdatePreview=!0),setState((function(_a){var visibleFiles=_a.visibleFiles,files=_a.files,activeFile=_a.activeFile,rest=__rest(_a,["visibleFiles","files","activeFile"]),newFiles=__assign({},files);delete newFiles[path];var remainingVisibleFiles=visibleFiles.filter((function(openPath){return openPath!==path}));if(0===remainingVisibleFiles.length){var nextFile=Object.keys(files)[Object.keys(files).length-1];return __assign(__assign({},rest),{visibleFiles:[nextFile],activeFile:nextFile,files:newFiles,shouldUpdatePreview})}return __assign(__assign({},rest),{visibleFiles:remainingVisibleFiles,activeFile:path===activeFile?remainingVisibleFiles[remainingVisibleFiles.length-1]:activeFile,files:newFiles,shouldUpdatePreview})}))}};return[__assign(__assign({},state),{visibleFilesFromProps:originalStateFromProps.visibleFiles}),operations]}(props),fileState=_c[0],fileOperations=_c[1],_d=function(_a,filesState){var _b,_c,_d,options=_a.options,customSetup=_a.customSetup,teamId=_a.teamId,sandboxId=_a.sandboxId;null!=options||(options={}),null!=customSetup||(customSetup={});var initModeFromProps=(null==options?void 0:options.initMode)||"lazy",_e=(0,react.useState)({startRoute:null==options?void 0:options.startRoute,bundlerState:void 0,error:null,initMode:initModeFromProps,reactDevTools:void 0,status:null===(_b=null==options?void 0:options.autorun)||void 0===_b||_b?"initial":"idle"}),state=_e[0],setState=_e[1],intersectionObserver=(0,react.useRef)(null),lazyAnchorRef=(0,react.useRef)(null),registeredIframes=(0,react.useRef)({}),clients=(0,react.useRef)({}),timeoutHook=(0,react.useRef)(null),unsubscribeClientListeners=(0,react.useRef)({}),unsubscribe=(0,react.useRef)(),queuedListeners=(0,react.useRef)({global:{}}),debounceHook=(0,react.useRef)(),prevEnvironment=(0,react.useRef)(filesState.environment),createClient=(0,react.useCallback)((function(iframe,clientId,clientPropsOverride){return __awaiter(void 0,void 0,void 0,(function(){var timeOut,client,_a,_b,_c;return __generator(this,(function(_d){switch(_d.label){case 0:return clients.current[clientId]&&clients.current[clientId].destroy(),null!=options||(options={}),null!=customSetup||(customSetup={}),timeOut=null!==(_a=null==options?void 0:options.bundlerTimeOut)&&void 0!==_a?_a:4e4,timeoutHook.current&&clearTimeout(timeoutHook.current),"function"!=typeof unsubscribe.current&&(timeoutHook.current=setTimeout((function(){unregisterAllClients(),setState((function(prev){return __assign(__assign({},prev),{status:"timeout"})}))}),timeOut)),[4,loadSandpackClient(iframe,{files:filesState.files,template:filesState.environment},{externalResources:options.externalResources,bundlerURL:options.bundlerURL,startRoute:null!==(_b=null==clientPropsOverride?void 0:clientPropsOverride.startRoute)&&void 0!==_b?_b:options.startRoute,fileResolver:options.fileResolver,skipEval:null!==(_c=options.skipEval)&&void 0!==_c&&_c,logLevel:options.logLevel,showOpenInCodeSandbox:!1,showErrorScreen:!0,showLoadingScreen:!1,reactDevTools:state.reactDevTools,customNpmRegistries:null==customSetup?void 0:customSetup.npmRegistries,teamId,sandboxId})];case 1:return client=_d.sent(),"function"!=typeof unsubscribe.current&&(unsubscribe.current=client.listen(handleMessage)),unsubscribeClientListeners.current[clientId]=unsubscribeClientListeners.current[clientId]||{},queuedListeners.current[clientId]&&(Object.keys(queuedListeners.current[clientId]).forEach((function(listenerId){var listener=queuedListeners.current[clientId][listenerId],unsubscribe=client.listen(listener);unsubscribeClientListeners.current[clientId][listenerId]=unsubscribe})),queuedListeners.current[clientId]={}),Object.entries(queuedListeners.current.global).forEach((function(_a){var listenerId=_a[0],listener=_a[1],unsubscribe=client.listen(listener);unsubscribeClientListeners.current[clientId][listenerId]=unsubscribe})),clients.current[clientId]=client,[2]}}))}))}),[filesState.environment,filesState.files,state.reactDevTools]),unregisterAllClients=(0,react.useCallback)((function(){Object.keys(clients.current).map(unregisterBundler),"function"==typeof unsubscribe.current&&(unsubscribe.current(),unsubscribe.current=void 0)}),[]),runSandpack=(0,react.useCallback)((function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,Promise.all(Object.entries(registeredIframes.current).map((function(_a){var clientId=_a[0],_b=_a[1],iframe=_b.iframe,_c=_b.clientPropsOverride,clientPropsOverride=void 0===_c?{}:_c;return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(_d){switch(_d.label){case 0:return[4,createClient(iframe,clientId,clientPropsOverride)];case 1:return _d.sent(),[2]}}))}))})))];case 1:return _a.sent(),setState((function(prev){return __assign(__assign({},prev),{error:null,status:"running"})})),[2]}}))}))}),[createClient]),initializeSandpackIframe=(0,react.useCallback)((function(){var _a,_b,_c;if(null===(_a=null==options?void 0:options.autorun)||void 0===_a||_a){var observerOptions=null!==(_b=null==options?void 0:options.initModeObserverOptions)&&void 0!==_b?_b:{rootMargin:"1000px 0px"};intersectionObserver.current&&lazyAnchorRef.current&&(null===(_c=intersectionObserver.current)||void 0===_c||_c.unobserve(lazyAnchorRef.current)),lazyAnchorRef.current&&"lazy"===state.initMode?(intersectionObserver.current=new IntersectionObserver((function(entries){var _a;entries.some((function(entry){return entry.isIntersecting}))&&(runSandpack(),lazyAnchorRef.current&&(null===(_a=intersectionObserver.current)||void 0===_a||_a.unobserve(lazyAnchorRef.current)))}),observerOptions),intersectionObserver.current.observe(lazyAnchorRef.current)):lazyAnchorRef.current&&"user-visible"===state.initMode?(intersectionObserver.current=new IntersectionObserver((function(entries){entries.some((function(entry){return entry.isIntersecting}))?runSandpack():(Object.keys(clients.current).map(unregisterBundler),unregisterAllClients())}),observerOptions),intersectionObserver.current.observe(lazyAnchorRef.current)):runSandpack()}}),[null==options?void 0:options.autorun,null==options?void 0:options.initModeObserverOptions,runSandpack,state.initMode,unregisterAllClients]),registerBundler=(0,react.useCallback)((function(iframe,clientId,clientPropsOverride){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return registeredIframes.current[clientId]={iframe,clientPropsOverride},"running"!==state.status?[3,2]:[4,createClient(iframe,clientId,clientPropsOverride)];case 1:_a.sent(),_a.label=2;case 2:return[2]}}))}))}),[createClient,state.status]),unregisterBundler=function(clientId){var _a,_b,client=clients.current[clientId];client&&(client.destroy(),null===(_a=client.iframe.contentWindow)||void 0===_a||_a.location.replace("about:blank"),client.iframe.removeAttribute("src"),delete clients.current[clientId]),delete registeredIframes.current[clientId],timeoutHook.current&&clearTimeout(timeoutHook.current),Object.values(null!==(_b=unsubscribeClientListeners.current[clientId])&&void 0!==_b?_b:{}).forEach((function(listenerOfClient){Object.values(listenerOfClient).forEach((function(unsubscribe){return unsubscribe()}))}));var status=Object.keys(clients.current).length>0?"running":"idle";setState((function(prev){return __assign(__assign({},prev),{status})}))},handleMessage=function(msg){"start"===msg.type?setState((function(prev){return __assign(__assign({},prev),{error:null})})):"state"===msg.type?setState((function(prev){return __assign(__assign({},prev),{bundlerState:msg.state})})):"done"===msg.type&&!msg.compilatonError||"connected"===msg.type?(timeoutHook.current&&clearTimeout(timeoutHook.current),setState((function(prev){return __assign(__assign({},prev),{error:null})}))):"action"===msg.type&&"show-error"===msg.action?setState((function(prev){return __assign(__assign({},prev),{error:(0,types_36e5ec0d.e)(msg)})})):"action"===msg.type&&"notification"===msg.action&&"error"===msg.notificationType&&setState((function(prev){return __assign(__assign({},prev),{error:{message:msg.title}})}))},recompileMode=null!==(_c=null==options?void 0:options.recompileMode)&&void 0!==_c?_c:"delayed",recompileDelay=null!==(_d=null==options?void 0:options.recompileDelay)&&void 0!==_d?_d:500;return(0,react.useEffect)((function watchFileChanges(){if("running"===state.status&&filesState.shouldUpdatePreview){if(prevEnvironment.current!==filesState.environment&&(prevEnvironment.current=filesState.environment,Object.entries(clients.current).forEach((function(_a){var key=_a[0],client=_a[1];registerBundler(client.iframe,key)}))),"immediate"===recompileMode&&Object.values(clients.current).forEach((function(client){"done"===client.status&&client.updateSandbox({files:filesState.files,template:filesState.environment})})),"delayed"===recompileMode){if("undefined"==typeof window)return;window.clearTimeout(debounceHook.current),debounceHook.current=window.setTimeout((function(){Object.values(clients.current).forEach((function(client){"done"===client.status&&client.updateSandbox({files:filesState.files,template:filesState.environment})}))}),recompileDelay)}return function(){window.clearTimeout(debounceHook.current)}}}),[filesState.files,filesState.environment,filesState.shouldUpdatePreview,recompileDelay,recompileMode,registerBundler,state.status]),(0,react.useEffect)((function watchInitMode(){initModeFromProps!==state.initMode&&(setState((function(prev){return __assign(__assign({},prev),{initMode:initModeFromProps})})),initializeSandpackIframe())}),[initModeFromProps,initializeSandpackIframe,state.initMode]),(0,react.useEffect)((function(){return function unmountClient(){"function"==typeof unsubscribe.current&&unsubscribe.current(),timeoutHook.current&&clearTimeout(timeoutHook.current),debounceHook.current&&clearTimeout(debounceHook.current),intersectionObserver.current&&intersectionObserver.current.disconnect()}}),[]),[state,{clients:clients.current,initializeSandpackIframe,runSandpack,registerBundler,unregisterBundler,registerReactDevTools:function(value){setState((function(prev){return __assign(__assign({},prev),{reactDevTools:value})}))},addListener:function(listener,clientId){if(clientId){if(clients.current[clientId])return clients.current[clientId].listen(listener);var listenerId_1=generateRandomId();return queuedListeners.current[clientId]=queuedListeners.current[clientId]||{},unsubscribeClientListeners.current[clientId]=unsubscribeClientListeners.current[clientId]||{},queuedListeners.current[clientId][listenerId_1]=listener,function(){queuedListeners.current[clientId][listenerId_1]?delete queuedListeners.current[clientId][listenerId_1]:unsubscribeClientListeners.current[clientId][listenerId_1]&&(unsubscribeClientListeners.current[clientId][listenerId_1](),delete unsubscribeClientListeners.current[clientId][listenerId_1])}}var listenerId_2=generateRandomId();queuedListeners.current.global[listenerId_2]=listener;var currentClientUnsubscribeListeners_1=Object.values(clients.current).map((function(client){return client.listen(listener)})),unsubscribeListener=function(){currentClientUnsubscribeListeners_1.forEach((function(unsubscribe){return unsubscribe()})),delete queuedListeners.current.global[listenerId_2],Object.values(unsubscribeClientListeners.current).forEach((function(client){var _a;null===(_a=null==client?void 0:client[listenerId_2])||void 0===_a||_a.call(client)}))};return unsubscribeListener},dispatchMessage:function(message,clientId){"running"===state.status?clientId?clients.current[clientId].dispatch(message):Object.values(clients.current).forEach((function(client){client.dispatch(message)})):console.warn("[sandpack-react]: dispatch cannot be called while in idle mode")},lazyAnchorRef,unsubscribeClientListenersRef:unsubscribeClientListeners,queuedListenersRef:queuedListeners}]}(props,fileState),clientState=_d[0],_e=_d[1],dispatchMessage=_e.dispatchMessage,addListener=_e.addListener,clientOperations=__rest(_e,["dispatchMessage","addListener"]),appState=function(props,files){var _a=(0,react.useState)({editorState:"pristine",teamId:props.teamId}),state=_a[0],setState=_a[1],originalStateFromProps=getSandpackStateFromProps(props),editorState=(0,dist.J)(originalStateFromProps.files,files)?"pristine":"dirty";return editorState!==state.editorState&&setState((function(prev){return __assign(__assign({},prev),{editorState})})),state}(props,fileState.files);return react.useEffect((function(){clientOperations.initializeSandpackIframe()}),[]),(0,jsx_runtime.jsx)(Sandpack$1.Provider,__assign({value:__assign(__assign(__assign(__assign(__assign(__assign({},fileState),clientState),appState),fileOperations),clientOperations),{autoReload:null===(_b=null===(_a=props.options)||void 0===_a?void 0:_a.autoReload)||void 0===_b||_b,listen:addListener,dispatch:dispatchMessage})},{children:(0,jsx_runtime.jsx)(ClassNamesProvider,__assign({classes:null==options?void 0:options.classes},{children:(0,jsx_runtime.jsx)(SandpackThemeProvider,__assign({className,style,theme},{children}),void 0)}),void 0)}),void 0)};Sandpack$1.Consumer;function useSandpack(){var sandpack=react.useContext(Sandpack$1);if(null===sandpack)throw new Error('[sandpack-react]: "useSandpack" must be wrapped by a "SandpackProvider"');var dispatch=sandpack.dispatch,listen=sandpack.listen,rest=__rest(sandpack,["dispatch","listen"]);return{sandpack:__assign({},rest),dispatch,listen}}var _a$8,_b$2,_c,_a$7,_a$6,useActiveCode=function(){var _a,_b,_c,sandpack=useSandpack().sandpack;return{code:null===(_a=sandpack.files[sandpack.activeFile])||void 0===_a?void 0:_a.code,readOnly:null!==(_c=null===(_b=sandpack.files[sandpack.activeFile])||void 0===_b?void 0:_b.readOnly)&&void 0!==_c&&_c,updateCode:sandpack.updateCurrentFile}},iconStandaloneClassName=dist_css({svg:{margin:"auto"}}),buttonClassName=dist_css(((_a$8={appearance:"none",outline:"none",display:"flex",alignItems:"center",fontSize:"inherit",fontFamily:"inherit",backgroundColor:"transparent",transition:"color $default, background $default",cursor:"pointer",color:"$colors$clickable",border:0,textDecoration:"none","&:disabled":{color:"$colors$disabled"},"&:hover:not(:disabled,[data-active='true'])":{color:"$colors$hover"},'&[data-active="true"]':{color:"$colors$accent"},svg:{minWidth:"$space$4",width:"$space$4",height:"$space$4"}})["&."+iconStandaloneClassName]={padding:"$space$1",height:"$space$7",display:"flex"},_a$8["&."+iconStandaloneClassName+"&:not(:has(span))"]={width:"$space$7"},_a$8["&."+iconStandaloneClassName+"&:has(svg + span)"]={paddingRight:"$space$3",paddingLeft:"$space$2",gap:"$space$1"},_a$8)),roundedButtonClassName=dist_css({backgroundColor:"$colors$surface2",borderRadius:"99999px",border:"1px solid $colors$surface3",'&[data-active="true"]':{color:"$colors$surface1",background:"$colors$accent"},"&:hover:not(:disabled,[data-active='true'])":{backgroundColor:"$colors$surface3"}}),iconClassName=dist_css({padding:0}),fadeIn=keyframes({"0%":{opacity:0},"100%":{opacity:1}}),absoluteClassName=dist_css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0",margin:"0",overflow:"auto",height:"100%",zIndex:"$top"}),errorClassName=dist_css(((_b$2={whiteSpace:"pre-wrap",padding:"$space$10",backgroundColor:"$colors$surface1",display:"flex",gap:"$space$2",flexDirection:"column"})["."+buttonClassName]={width:"auto",gap:"$space$2",padding:"0 $space$3 0 $space$2",marginTop:"$space$1"},_b$2.variants={solidBg:{true:{backgroundColor:"$colors$errorSurface"}}},_b$2)),errorBundlerClassName=dist_css(((_c={padding:"$space$10",backgroundColor:"$colors$surface1"})["."+buttonClassName]={marginTop:"$space$6",width:"auto",gap:"$space$2",padding:"0 $space$3 0 $space$2"},_c)),errorMessageClassName=dist_css({animation:fadeIn+" 150ms ease",color:"$colors$error",display:"flex",flexDirection:"column",gap:"$space$3",variants:{errorCode:{true:{fontFamily:"$font$mono"}}},a:{color:"inherit"},p:{margin:0}}),tabsClassName=dist_css({borderBottom:"1px solid $colors$surface2",background:"$colors$surface1"}),tabsScrollableClassName=dist_css({padding:"0 $space$2",overflow:"auto",display:"flex",flexWrap:"nowrap",alignItems:"stretch",minHeight:"40px",marginBottom:"-1px"}),closeButtonClassName=dist_css({padding:"0 $space$1 0 $space$1",borderRadius:"$border$radius",marginLeft:"$space$1",width:"$space$5",visibility:"hidden",svg:{width:"$space$3",height:"$space$3",display:"block",position:"relative",top:1}}),tabButton=dist_css(((_a$7={padding:"0 $space$2",height:"$layout$headerHeight",whiteSpace:"nowrap","&:focus":{outline:"none"}})["&:hover > ."+closeButtonClassName]={visibility:"unset"},_a$7)),FileTabs=function(_a){var closableTabs=_a.closableTabs,className=_a.className,props=__rest(_a,["closableTabs","className"]),sandpack=useSandpack().sandpack,classNames=useClassNames(),activeFile=sandpack.activeFile,visibleFiles=sandpack.visibleFiles,setActiveFile=sandpack.setActiveFile,handleCloseFile=function(ev){ev.stopPropagation();var tabElm=ev.target.closest("[data-active]"),pathToClose=null==tabElm?void 0:tabElm.getAttribute("title");pathToClose&&sandpack.closeFile(pathToClose)};return(0,jsx_runtime.jsx)("div",__assign({className:classNames("tabs",[tabsClassName,className]),translate:"no"},props,{children:(0,jsx_runtime.jsx)("div",__assign({"aria-label":"Select active file",className:classNames("tabs-scrollable-container",[tabsScrollableClassName]),role:"tablist"},{children:visibleFiles.map((function(filePath){return(0,jsx_runtime.jsxs)("button",__assign({"aria-selected":filePath===activeFile,className:classNames("tab-button",[buttonClassName,tabButton]),"data-active":filePath===activeFile,onClick:function(){return setActiveFile(filePath)},role:"tab",title:filePath,type:"button"},{children:[(currentPath=filePath,documentFileName=getFileName(currentPath),pathsWithDuplicateFileNames=visibleFiles.reduce((function(prev,curr){return curr===currentPath?prev:getFileName(curr)===documentFileName?(prev.push(curr),prev):prev}),[]),0===pathsWithDuplicateFileNames.length?documentFileName:function(currentPath,otherPaths){var currentPathParts=("/"===currentPath[0]?currentPath.slice(1):currentPath).split("/"),resultPathParts=[];if(1===currentPathParts.length)resultPathParts.unshift(currentPathParts[0]);else for(var fileIndex=0;fileIndex<otherPaths.length;fileIndex++)for(var otherPathParts=otherPaths[fileIndex].split("/"),partsFromEnd=1;partsFromEnd<=currentPathParts.length;partsFromEnd++){var currentPathPart=currentPathParts[currentPathParts.length-partsFromEnd],otherPathPart=otherPathParts[otherPathParts.length-partsFromEnd];if(resultPathParts.length<partsFromEnd&&resultPathParts.unshift(currentPathPart),currentPathPart!==otherPathPart)break}return resultPathParts.length<currentPathParts.length&&resultPathParts.unshift(".."),resultPathParts.join("/")}(currentPath,pathsWithDuplicateFileNames)),closableTabs&&visibleFiles.length>1&&(0,jsx_runtime.jsx)("span",__assign({className:classNames("close-button",[closeButtonClassName]),onClick:handleCloseFile},{children:(0,jsx_runtime.jsx)(CloseIcon,{},void 0)}),void 0)]}),filePath);var currentPath,documentFileName,pathsWithDuplicateFileNames}))}),void 0)}),void 0)},RoundedButton=function(_a){var onClick=_a.onClick,className=_a.className,children=_a.children,classNames=useClassNames();return(0,jsx_runtime.jsx)("button",__assign({className:classNames("button",[classNames("icon-standalone"),buttonClassName,iconStandaloneClassName,roundedButtonClassName,className]),onClick,type:"button"},{children}),void 0)},runButtonClassName=dist_css({position:"absolute",bottom:"$space$2",right:"$space$2",paddingRight:"$space$3"}),RunButton$1=function(_a){_a.className;var onClick=_a.onClick,props=__rest(_a,["className","onClick"]),sandpack=useSandpack().sandpack;return(0,jsx_runtime.jsxs)(RoundedButton,__assign({className:runButtonClassName.toString(),onClick:function(event){sandpack.runSandpack(),null==onClick||onClick(event)}},props,{children:[(0,jsx_runtime.jsx)(RunIcon,{},void 0),(0,jsx_runtime.jsx)("span",{children:"Run"},void 0)]}),void 0)},stackClassName=dist_css(((_a$6={display:"flex",flexDirection:"column",width:"100%",position:"relative",backgroundColor:"$colors$surface1",gap:1})["&:has(.sp-stack)"]={backgroundColor:"$colors$surface2"},_a$6)),SandpackStack=function(_a){var className=_a.className,props=__rest(_a,["className"]),classNames=useClassNames();return(0,jsx_runtime.jsx)("div",__assign({className:classNames("stack",[stackClassName,className])},props),void 0)},useSandpackTheme=function(){var _a=react.useContext(SandpackThemeContext);return{theme:_a.theme,themeId:_a.id,themeMode:_a.mode}},shallowEqual=function(a,b){if(a.length!==b.length)return!1;for(var result=!0,index=0;index<a.length;index++)if(a[index]!==b[index]){result=!1;break}return result},getCodeMirrorPosition=function(doc,_a){var line=_a.line,column=_a.column;return doc.line(line).from+(null!=column?column:0)-1},classNameToken=function(name){return"sp-syntax-"+name},useCombinedRefs=function(){for(var refs=[],_i=0;_i<arguments.length;_i++)refs[_i]=arguments[_i];return react.useCallback((function(element){return refs.forEach((function(ref){if(ref)return"function"==typeof ref?ref(element):void(ref.current=element)}))}),refs)};var _a$5,_b$1,_a$4,_b,dist_lineDeco=Decoration.line({attributes:{class:"cm-errorLine"}}),dist_activeLineHighlighter=dist_ViewPlugin.fromClass(function(){function class_1(){this.decorations=Decoration.none}return class_1.prototype.update=function(update){var _this=this;update.transactions.forEach((function(trans){var errorValue=trans.annotation("show-error");if(void 0!==errorValue){var position=getCodeMirrorPosition(update.view.state.doc,{line:errorValue})+1;_this.decorations=Decoration.set([dist_lineDeco.range(position)])}else trans.annotation("remove-errors")&&(_this.decorations=Decoration.none)}))},class_1}(),{decorations:function(v){return v.decorations}}),placeholderClassName=dist_css({margin:"0",display:"block",fontFamily:"$font$mono",fontSize:"$font$size",color:"$syntax$color$plain",lineHeight:"$font$lineHeight"}),tokensClassName=dist_css(["string","plain","comment","keyword","definition","punctuation","property","tag","static"].reduce((function(acc,token){var _a;return __assign(__assign({},acc),((_a={})["."+classNameToken(token)]={color:"$syntax$color$"+token,fontStyle:"$syntax$fontStyle$"+token},_a))}),{})),editorClassName=dist_css(((_a$5={flex:1,position:"relative",overflow:"auto",background:"$colors$surface1",".cm-scroller":{padding:"$space$4 0"}})["."+placeholderClassName]={padding:"$space$4 0"},_a$5["@media screen and (max-width: 768px)"]={"@supports (-webkit-overflow-scrolling: touch)":{".cm-content":{fontSize:"16px"}}},_a$5)),cmClassName=dist_css({margin:"0",outline:"none",height:"100%"}),readOnlyClassName=dist_css(((_b$1={fontFamily:"$font$mono",fontSize:"0.8em",position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",color:"$colors$clickable",backgroundColor:"$colors$surface2",borderRadius:"99999px",padding:"calc($space$1 / 2) $space$2"})["& + ."+buttonClassName]={right:"calc($space$11 * 2)"},_b$1)),CodeMirror=react.forwardRef((function(_a,ref){var _b=_a.code,code=void 0===_b?"":_b,filePath=_a.filePath,fileType=_a.fileType,onCodeUpdate=_a.onCodeUpdate,_c=_a.showLineNumbers,showLineNumbers=void 0!==_c&&_c,_d=_a.showInlineErrors,showInlineErrors=void 0!==_d&&_d,_e=_a.wrapContent,wrapContent=void 0!==_e&&_e,_f=_a.editorState,editorState=void 0===_f?"pristine":_f,_g=_a.readOnly,readOnly=void 0!==_g&&_g,_h=_a.showReadOnly,showReadOnly=void 0===_h||_h,decorators=_a.decorators,_j=_a.initMode,initMode=void 0===_j?"lazy":_j,_k=_a.extensions,extensions=void 0===_k?[]:_k,_l=_a.extensionsKeymap,extensionsKeymap=void 0===_l?[]:_l,_m=_a.additionalLanguages,additionalLanguages=void 0===_m?[]:_m,wrapper=react.useRef(null),combinedRef=useCombinedRefs(wrapper,ref),cmView=react.useRef(),_o=useSandpackTheme(),theme=_o.theme,themeId=_o.themeId,_p=react.useState(code),internalCode=_p[0],setInternalCode=_p[1],_q=react.useState("immediate"===initMode),shouldInitEditor=_q[0],setShouldInitEditor=_q[1],classNames=useClassNames(),listen=useSandpack().listen,prevExtension=react.useRef([]),prevExtensionKeymap=react.useRef([]),isIntersecting=intersection_observer_dist_module(wrapper,{rootMargin:"600px 0px",threshold:.2}).isIntersecting;react.useImperativeHandle(ref,(function(){return{getCodemirror:function(){return cmView.current}}})),react.useEffect((function(){("lazy"===initMode||"user-visible"===initMode)&&isIntersecting&&setShouldInitEditor(!0)}),[initMode,isIntersecting]);var languageExtension=function(filePath,fileType,additionalLanguages){if(!filePath&&!fileType)return"javascript";var extension=fileType;if(!extension&&filePath){var extensionDotIndex=filePath.lastIndexOf(".");extension=filePath.slice(extensionDotIndex+1)}for(var _i=0,additionalLanguages_1=additionalLanguages;_i<additionalLanguages_1.length;_i++){var additionalLanguage=additionalLanguages_1[_i];if(extension===additionalLanguage.name||additionalLanguage.extensions.includes(extension||""))return additionalLanguage.name}switch(extension){case"ts":case"tsx":return"typescript";case"html":case"svelte":case"vue":case"astro":return"html";case"css":case"less":case"scss":return"css";default:return"javascript"}}(filePath,fileType,additionalLanguages),langSupport=function(extension,additionalLanguages){for(var options={javascript:javascript({jsx:!0,typescript:!1}),typescript:javascript({jsx:!0,typescript:!0}),html:html(),css:css()},_i=0,additionalLanguages_2=additionalLanguages;_i<additionalLanguages_2.length;_i++){var additionalLanguage=additionalLanguages_2[_i];if(extension===additionalLanguage.name)return additionalLanguage.language}return options[extension]}(languageExtension,additionalLanguages),highlightTheme=function(theme){return HighlightStyle.define([{tag:tags.link,textDecoration:"underline"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.keyword,class:classNameToken("keyword")},{tag:[tags.atom,tags.number,tags.bool],class:classNameToken("static")},{tag:tags.variableName,class:classNameToken("plain")},{tag:tags.standard(tags.tagName),class:classNameToken("tag")},{tag:[tags.function(tags.variableName),tags.definition(tags.function(tags.variableName)),tags.tagName],class:classNameToken("definition")},{tag:tags.propertyName,class:classNameToken("property")},{tag:[tags.literal,tags.inserted],class:classNameToken(theme.syntax.string?"string":"static")},{tag:tags.punctuation,class:classNameToken("punctuation")},{tag:[tags.comment,tags.quote],class:classNameToken("comment")}])}(theme),syntaxHighlightRender=function(_a){var langSupport=_a.langSupport,highlightTheme=_a.highlightTheme,_b=_a.code,code=void 0===_b?"":_b,tree=langSupport.language.parser.parse(code),offSet=0,codeElementsRender=[],addElement=function(to,className){if(to>offSet){var children=code.slice(offSet,to);codeElementsRender.push(className?(0,react.createElement)("span",{children,className,key:""+to+offSet}):children),offSet=to}};return highlightTree(tree,highlightTheme,(function(from,to,className){addElement(from,""),addElement(to,className)})),offSet<code.length&&(null==code?void 0:code.includes("\n"))&&codeElementsRender.push("\n\n"),codeElementsRender}({langSupport,highlightTheme,code}),sortedDecorators=react.useMemo((function(){return decorators?decorators.sort((function(d1,d2){return d1.line-d2.line})):decorators}),[decorators]);react.useEffect((function(){if(wrapper.current&&shouldInitEditor){var customCommandsKeymap=[{key:"Tab",run:function(view){var _a,_b;indentMore(view);var customKey=extensionsKeymap.find((function(_a){return"Tab"===_a.key}));return null===(_b=null===(_a=null==customKey?void 0:customKey.run)||void 0===_a?void 0:_a.call(customKey,view))||void 0===_b||_b}},{key:"Shift-Tab",run:function(_a){var _b,_c,state=_a.state,dispatch=_a.dispatch;indentLess({state,dispatch});var customKey=extensionsKeymap.find((function(_a){return"Shift-Tab"===_a.key}));return null===(_c=null===(_b=null==customKey?void 0:customKey.run)||void 0===_b?void 0:_b.call(customKey,view))||void 0===_c||_c}},{key:"Escape",run:function(){return readOnly||wrapper.current&&wrapper.current.focus(),!0}},{key:"mod-Backspace",run:deleteGroupBackward}],extensionList=__spreadArray(__spreadArray([highlightSpecialChars(),dist_history(),[dist_inputHandler,bracketState]],extensions,!0),[keymap.of(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],closeBracketsKeymap,!0),defaultKeymap,!0),historyKeymap,!0),customCommandsKeymap,!0),extensionsKeymap,!0)),langSupport,EditorView.theme({"&":{backgroundColor:"var(--sp-colors-surface1)",color:"var(--sp-syntax-color-plain)",height:"100%"},".cm-matchingBracket, .cm-nonmatchingBracket, &.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{color:"inherit",backgroundColor:"rgba(128,128,128,.25)",backgroundBlendMode:"difference"},"&.cm-editor.cm-focused":{outline:"none"},".cm-activeLine":{backgroundColor:"var(--sp-colors-surface3)",borderRadius:"var(--sp-border-radius)"},".cm-errorLine":{backgroundColor:"var(--sp-colors-errorSurface)",borderRadius:"var(--sp-border-radius)"},".cm-content":{caretColor:"var(--sp-colors-accent)",padding:"0 var(--sp-space-4)"},".cm-scroller":{fontFamily:"var(--sp-font-mono)",lineHeight:"var(--sp-font-lineHeight)"},".cm-gutters":{backgroundColor:"var(--sp-colors-surface1)",color:"var(--sp-colors-disabled)",border:"none",paddingLeft:"var(--sp-space-1)"},".cm-gutter.cm-lineNumbers":{fontSize:".6em"},".cm-lineNumbers .cm-gutterElement":{lineHeight:"var(--sp-font-lineHeight)",minWidth:"var(--sp-space-5)"},".cm-content .cm-line":{paddingLeft:"var(--sp-space-1)"},".cm-content.cm-readonly .cm-line":{paddingLeft:0}}),syntaxHighlighting(highlightTheme)],!1);readOnly?(extensionList.push(dist_EditorState.readOnly.of(!0)),extensionList.push(EditorView.editable.of(!1))):(extensionList.push(function bracketMatching(config={}){return[bracketMatchingConfig.of(config),bracketMatchingUnique]}()),extensionList.push(function highlightActiveLine(){return activeLineHighlighter}())),sortedDecorators&&extensionList.push(function highlightDecorators(positions){return dist_ViewPlugin.fromClass(function(){function class_1(view){this.decorations=this.getDecoration(view)}return class_1.prototype.update=function(update){},class_1.prototype.getDecoration=function(view){if(!positions)return Decoration.none;var rangesDecorators=positions.map((function(item){var _a,_b,_c,lineDeco=Decoration.line({attributes:{class:null!==(_a=item.className)&&void 0!==_a?_a:""}}),markDeco=Decoration.mark({class:null!==(_b=item.className)&&void 0!==_b?_b:"",attributes:null!==(_c=item.elementAttributes)&&void 0!==_c?_c:void 0}),positionLineStart=getCodeMirrorPosition(view.state.doc,{line:item.line,column:item.startColumn})+1;if(item.startColumn&&item.endColumn){var positionLineEnd=getCodeMirrorPosition(view.state.doc,{line:item.line,column:item.endColumn})+1;return markDeco.range(positionLineStart,positionLineEnd)}return lineDeco.range(positionLineStart)}));return Decoration.set(rangesDecorators)},class_1}(),{decorations:function(v){return v.decorations}})}(sortedDecorators)),wrapContent&&extensionList.push(EditorView.lineWrapping),showLineNumbers&&extensionList.push(function lineNumbers(config={}){return[lineNumberConfig.of(config),gutters(),lineNumberGutter]}()),showInlineErrors&&extensionList.push(function highlightInlineError(){return dist_activeLineHighlighter}());var parentDiv=wrapper.current,existingPlaceholder=parentDiv.querySelector(".sp-pre-placeholder");existingPlaceholder&&parentDiv.removeChild(existingPlaceholder);var view=new EditorView({doc:code,extensions:extensionList,parent:parentDiv,dispatch:function(tr){if(view.update([tr]),tr.docChanged){var newCode=tr.newDoc.sliceString(0,tr.newDoc.length);setInternalCode(newCode),null==onCodeUpdate||onCodeUpdate(newCode)}}});return view.contentDOM.setAttribute("data-gramm","false"),view.contentDOM.setAttribute("data-lt-active","false"),view.contentDOM.setAttribute("aria-label",filePath?"Code Editor for "+getFileName(filePath):"Code Editor"),readOnly?view.contentDOM.classList.add("cm-readonly"):view.contentDOM.setAttribute("tabIndex","-1"),cmView.current=view,function(){var _a;null===(_a=cmView.current)||void 0===_a||_a.destroy()}}}),[shouldInitEditor,showLineNumbers,wrapContent,themeId,sortedDecorators,readOnly]),react.useEffect((function applyExtensions(){var view=cmView.current,dependenciesAreDiff=!shallowEqual(extensions,prevExtension.current)||!shallowEqual(extensionsKeymap,prevExtensionKeymap.current);view&&dependenciesAreDiff&&(view.dispatch({effects:dist_StateEffect.appendConfig.of(extensions)}),view.dispatch({effects:dist_StateEffect.appendConfig.of(keymap.of(__spreadArray([],extensionsKeymap,!0)))}),prevExtension.current=extensions,prevExtensionKeymap.current=extensionsKeymap)}),[extensions,extensionsKeymap]),react.useEffect((function(){cmView.current&&"dirty"===editorState&&window.matchMedia("(min-width: 768px)").matches&&cmView.current.contentDOM.focus()}),[]),react.useEffect((function(){if(cmView.current&&"string"==typeof code&&code!==internalCode){var view=cmView.current,selection=view.state.selection.ranges.some((function(_a){var to=_a.to,from=_a.from;return to>code.length||from>code.length}))?dist_EditorSelection.cursor(code.length):view.state.selection,changes={from:0,to:view.state.doc.length,insert:code};view.dispatch({changes,selection})}}),[code]),react.useEffect((function messageToInlineError(){if(showInlineErrors){var unsubscribe=listen((function(message){var view=cmView.current;"success"===message.type?null==view||view.dispatch({annotations:[new Annotation("remove-errors",!0)]}):"action"===message.type&&"show-error"===message.action&&message.path===filePath&&message.line&&(null==view||view.dispatch({annotations:[new Annotation("show-error",message.line)]}))}));return function(){return unsubscribe()}}}),[listen,showInlineErrors]);var gutterLineOffset=function(){var offset=4;return showLineNumbers&&(offset+=6),readOnly||(offset+=1),"var(--sp-space-"+offset+")"};return readOnly?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("pre",__assign({ref:combinedRef,className:classNames("cm",[classNames(editorState),classNames(languageExtension),cmClassName,tokensClassName]),translate:"no"},{children:(0,jsx_runtime.jsx)("code",__assign({className:classNames("pre-placeholder",[placeholderClassName]),style:{marginLeft:gutterLineOffset()}},{children:syntaxHighlightRender}),void 0)}),void 0),readOnly&&showReadOnly&&(0,jsx_runtime.jsx)("span",__assign({className:classNames("read-only",[readOnlyClassName])},{},{children:"Read-only"}),void 0)]},void 0):(0,jsx_runtime.jsx)("div",__assign({ref:combinedRef,"aria-autocomplete":"list","aria-label":filePath?"Code Editor for "+getFileName(filePath):"Code Editor","aria-multiline":"true",className:classNames("cm",[classNames(editorState),classNames(languageExtension),cmClassName,tokensClassName]),onKeyDown:function(evt){"Enter"===evt.key&&cmView.current&&(evt.preventDefault(),cmView.current.contentDOM.focus())},role:"textbox",tabIndex:0,translate:"no",suppressHydrationWarning:!0},{children:(0,jsx_runtime.jsx)("pre",__assign({className:classNames("pre-placeholder",[placeholderClassName]),style:{marginLeft:gutterLineOffset()}},{children:syntaxHighlightRender}),void 0)}),void 0)})),layoutClassName=((0,react.forwardRef)((function(_a,ref){var showTabs=_a.showTabs,_b=_a.showLineNumbers,showLineNumbers=void 0!==_b&&_b,_c=_a.showInlineErrors,showInlineErrors=void 0!==_c&&_c,_d=_a.showRunButton,showRunButton=void 0===_d||_d,_e=_a.wrapContent,wrapContent=void 0!==_e&&_e,_f=_a.closableTabs,closableTabs=void 0!==_f&&_f,initMode=_a.initMode,extensions=_a.extensions,extensionsKeymap=_a.extensionsKeymap,readOnly=_a.readOnly,showReadOnly=_a.showReadOnly,additionalLanguages=_a.additionalLanguages,className=_a.className,props=__rest(_a,["showTabs","showLineNumbers","showInlineErrors","showRunButton","wrapContent","closableTabs","initMode","extensions","extensionsKeymap","readOnly","showReadOnly","additionalLanguages","className"]),sandpack=useSandpack().sandpack,_g=useActiveCode(),code=_g.code,updateCode=_g.updateCode,readOnlyFile=_g.readOnly,activeFile=sandpack.activeFile,status=sandpack.status,editorState=sandpack.editorState,shouldShowTabs=null!=showTabs?showTabs:sandpack.visibleFiles.length>1,classNames=useClassNames();return(0,jsx_runtime.jsxs)(SandpackStack,__assign({className:classNames("editor",[className])},props,{children:[shouldShowTabs&&(0,jsx_runtime.jsx)(FileTabs,{closableTabs},void 0),(0,jsx_runtime.jsxs)("div",__assign({className:classNames("code-editor",[editorClassName])},{children:[(0,jsx_runtime.jsx)(CodeMirror,{ref,additionalLanguages,code,editorState,extensions,extensionsKeymap,filePath:activeFile,initMode:initMode||sandpack.initMode,onCodeUpdate:function(newCode){var _a;return function(newCode,shouldUpdatePreview){void 0===shouldUpdatePreview&&(shouldUpdatePreview=!0),updateCode(newCode,shouldUpdatePreview)}(newCode,null===(_a=sandpack.autoReload)||void 0===_a||_a)},readOnly:readOnly||readOnlyFile,showInlineErrors,showLineNumbers,showReadOnly,wrapContent},activeFile),!showRunButton||sandpack.autoReload&&"idle"!==status?null:(0,jsx_runtime.jsx)(RunButton$1,{},void 0)]}),void 0)]}),void 0)})),react.forwardRef((function(_a,ref){var showTabs=_a.showTabs,showLineNumbers=_a.showLineNumbers,decorators=_a.decorators,propCode=_a.code,initMode=_a.initMode,wrapContent=_a.wrapContent,additionalLanguages=_a.additionalLanguages,props=__rest(_a,["showTabs","showLineNumbers","decorators","code","initMode","wrapContent","additionalLanguages"]),sandpack=useSandpack().sandpack,code=useActiveCode().code,classNames=useClassNames(),shouldShowTabs=null!=showTabs?showTabs:sandpack.visibleFiles.length>1;return(0,jsx_runtime.jsxs)(SandpackStack,__assign({className:classNames("editor-viewer")},props,{children:[shouldShowTabs?(0,jsx_runtime.jsx)(FileTabs,{},void 0):null,(0,jsx_runtime.jsx)("div",__assign({className:classNames("code-editor",[editorClassName])},{children:(0,jsx_runtime.jsx)(CodeMirror,{ref,additionalLanguages,code:null!=propCode?propCode:code,decorators,filePath:sandpack.activeFile,initMode:initMode||sandpack.initMode,showLineNumbers,showReadOnly:!1,wrapContent,readOnly:!0},void 0)}),void 0),"idle"===sandpack.status?(0,jsx_runtime.jsx)(RunButton$1,{},void 0):null]}),void 0)})),dist_css(((_a$4={border:"1px solid $colors$surface2",display:"flex",flexWrap:"wrap",alignItems:"stretch",borderRadius:"$border$radius",overflow:"hidden",position:"relative",backgroundColor:"$colors$surface2",gap:1})["> ."+stackClassName]={flexGrow:1,flexShrink:1,flexBasis:"0",height:"$layout$height",overflow:"hidden","@media print":{height:"auto",display:"block"},"@media screen and (max-width: 768px)":(_b={},_b["&:not(.sp-preview, .sp-editor, .sp-preset-column)"]={height:"calc($layout$height / 2)"},_b.minWidth="100%;",_b)},_a$4["> .sp-file-explorer"]={flex:.2,minWidth:200,"@media screen and (max-width: 768px)":{flex:1}},_a$4)));react.forwardRef((function(_a,ref){var children=_a.children,className=_a.className,props=__rest(_a,["children","className"]),sandpack=useSandpack().sandpack,classNames=useClassNames(),combinedRef=useCombinedRefs(sandpack.lazyAnchorRef,ref);return(0,jsx_runtime.jsx)("div",__assign({ref:combinedRef,className:classNames("layout",[layoutClassName,className])},props,{children}),void 0)}));var useSandpackClient=function(clientPropsOverride){var _a=useSandpack(),sandpack=_a.sandpack,listen=_a.listen,dispatch=_a.dispatch,iframeRef=react.useRef(null),clientId=react.useRef(generateRandomId());react.useEffect((function(){var iframeElement=iframeRef.current,clientIdValue=clientId.current;return null!==iframeElement&&sandpack.registerBundler(iframeElement,clientIdValue,clientPropsOverride),function(){return sandpack.unregisterBundler(clientIdValue)}}),[]);return{sandpack,getClient:function(){return sandpack.clients[clientId.current]||null},clientId:clientId.current,iframe:iframeRef,listen:function(listener){return listen(listener,clientId.current)},dispatch:function(message){return dispatch(message,clientId.current)}}},useSandpackShell=function(clientId){var dispatch=useSandpack().dispatch;return{restart:function(){return dispatch({type:"shell/restart"},clientId)},openPreview:function(){return dispatch({type:"shell/openPreview"},clientId)}}},useSandpackPreviewProgress=function(props){var _a=react.useState(!1),isReady=_a[0],setIsReady=_a[1],_b=react.useState(),totalDependencies=_b[0],setTotalDependencies=_b[1],_c=react.useState(null),loadingMessage=_c[0],setLoadingMessage=_c[1],timeout=null==props?void 0:props.timeout,clientId=null==props?void 0:props.clientId,listen=useSandpack().listen;return react.useEffect((function(){var timer,unsubscribe=listen((function(message){"start"===message.type&&message.firstLoad&&setIsReady(!1),timeout&&(timer=setTimeout((function(){setLoadingMessage(null)}),timeout)),"shell/progress"!==message.type||isReady||(totalDependencies||"downloaded_module"!==message.data.state||setTotalDependencies(message.data.totalPending),void 0!==totalDependencies&&setLoadingMessage(function(originalMessage,firstTotalPending){var _a;switch(originalMessage.state){case"downloading_manifest":return"[1/3] Downloading manifest";case"downloaded_module":return"[2/3] Downloaded "+originalMessage.name+" ("+(firstTotalPending-originalMessage.totalPending)+"/"+firstTotalPending+")";case"starting_command":return"[3/3] Starting command";case"command_running":return'[3/3] Running "'+(null===(_a=originalMessage.command)||void 0===_a?void 0:_a.trim())+'"'}}(message.data,totalDependencies))),"done"===message.type&&!1===message.compilatonError&&(setLoadingMessage(null),setIsReady(!0),clearTimeout(timer))}),clientId);return function(){timer&&clearTimeout(timer),unsubscribe()}}),[clientId,isReady,totalDependencies,timeout]),loadingMessage},useSandpackShellStdout=function(_a){var clientId=_a.clientId,_b=_a.maxMessageCount,maxMessageCount=void 0===_b?800:_b;_a.resetOnPreviewRestart;var _d=react.useState([]),logs=_d[0],setLogs=_d[1],listen=useSandpack().listen;return react.useEffect((function(){return listen((function(message){"start"===message.type?setLogs([]):"stdout"===message.type&&message.payload.data&&Boolean(message.payload.data.trim())&&setLogs((function(prev){for(var messages=__spreadArray(__spreadArray([],prev,!0),[{data:message.payload.data,id:generateRandomId()}],!1);messages.length>maxMessageCount;)messages.shift();return messages}))}),clientId)}),[maxMessageCount,clientId]),{logs,reset:function(){return setLogs([])}}},mapBundlerErrors=function(originalMessage){var errorMessage=originalMessage.replace("[sandpack-client]: ","");if(/process.exit/.test(errorMessage)){var exitCode=errorMessage.match(/process.exit\((\d+)\)/);return exitCode?0===Number(exitCode[1])?"Server is not running, would you like to start it again?":"Server has crashed with status code "+exitCode[1]+", would you like to restart the server?":errorMessage}return errorMessage},ErrorOverlay=function(props){var children=props.children,className=props.className,otherProps=__rest(props,["children","className"]),errorMessage=function(){var _a,error=useSandpack().sandpack.error;return null!==(_a=null==error?void 0:error.message)&&void 0!==_a?_a:null}(),restart=useSandpackShell().restart,classNames=useClassNames(),_a=useSandpack().sandpack,runSandpack=_a.runSandpack,teamId=_a.teamId,dispatch=useSandpack().dispatch;if(!errorMessage&&!children)return null;var isSandpackBundlerError=null==errorMessage?void 0:errorMessage.startsWith("[sandpack-client]");return(null==errorMessage?void 0:errorMessage.includes("NPM_REGISTRY_UNAUTHENTICATED_REQUEST"))?(0,jsx_runtime.jsxs)("div",__assign({className:classNames("overlay",[classNames("error"),absoluteClassName,errorBundlerClassName,className])},props,{children:[(0,jsx_runtime.jsx)("p",__assign({className:classNames("error-message",[errorMessageClassName])},{children:(0,jsx_runtime.jsx)("strong",{children:"Unable to fetch required dependency."},void 0)}),void 0),(0,jsx_runtime.jsx)("div",__assign({className:classNames("error-message",[errorMessageClassName])},{children:(0,jsx_runtime.jsxs)("p",{children:["Authentication required. Please sign in to your account (make sure to allow pop-ups to this page) and try again. If the issue persists, contact"," ",(0,jsx_runtime.jsx)("a",__assign({href:"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error"},{children:"support"}),void 0)," ","for further assistance."]},void 0)}),void 0),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("button",__assign({className:classNames("button",[buttonClassName,iconStandaloneClassName,roundedButtonClassName]),onClick:function(){teamId&&dispatch({type:"sign-in",teamId})}},{children:[(0,jsx_runtime.jsx)(SignInIcon,{},void 0),(0,jsx_runtime.jsx)("span",{children:"Sign in"},void 0)]}),void 0)},void 0)]}),void 0):isSandpackBundlerError&&errorMessage?(0,jsx_runtime.jsx)("div",__assign({className:classNames("overlay",[classNames("error"),absoluteClassName,errorBundlerClassName,className])},otherProps,{children:(0,jsx_runtime.jsxs)("div",__assign({className:classNames("error-message",[errorMessageClassName])},{children:[(0,jsx_runtime.jsx)("p",__assign({className:classNames("error-title",[dist_css({fontWeight:"bold"})])},{children:"Couldn't connect to server"}),void 0),(0,jsx_runtime.jsx)("p",{children:mapBundlerErrors(errorMessage)},void 0),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("button",__assign({className:classNames("button",[classNames("icon-standalone"),buttonClassName,iconStandaloneClassName,roundedButtonClassName]),onClick:function(){restart(),runSandpack()},title:"Restart script",type:"button"},{children:[(0,jsx_runtime.jsx)(RestartIcon,{},void 0)," ",(0,jsx_runtime.jsx)("span",{children:"Restart"},void 0)]}),void 0)},void 0)]}),void 0)}),void 0):(0,jsx_runtime.jsxs)("div",__assign({className:classNames("overlay",[classNames("error"),absoluteClassName,errorClassName({solidBg:!0}),className]),translate:"no"},otherProps,{children:[(0,jsx_runtime.jsx)("p",__assign({className:classNames("error-message",[errorMessageClassName])},{children:(0,jsx_runtime.jsx)("strong",{children:"Something went wrong"},void 0)}),void 0),(0,jsx_runtime.jsx)("p",__assign({className:classNames("error-message",[errorMessageClassName({errorCode:!0})])},{children:errorMessage||children}),void 0)]}),void 0)};function convertBundleIntoReact(linkify,useClasses,bundle,key){var style=useClasses?null:function createStyle(bundle){var style={};switch(bundle.bg&&(style.backgroundColor="rgb("+bundle.bg+")"),bundle.fg&&(style.color="rgb("+bundle.fg+")"),bundle.decoration){case"bold":style.fontWeight="bold";break;case"dim":style.opacity="0.5";break;case"italic":style.fontStyle="italic";break;case"hidden":style.visibility="hidden";break;case"strikethrough":style.textDecoration="line-through";break;case"underline":style.textDecoration="underline";break;case"blink":style.textDecoration="blink"}return style}(bundle),className=useClasses?function createClass(bundle){var classNames="";return bundle.bg&&(classNames+=bundle.bg+"-bg "),bundle.fg&&(classNames+=bundle.fg+"-fg "),bundle.decoration&&(classNames+="ansi-"+bundle.decoration+" "),""===classNames?null:classNames=classNames.substring(0,classNames.length-1)}(bundle):null;if(!linkify)return react.createElement("span",{style,key,className},bundle.content);for(var match,content=[],linkRegex=/(\s|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,index=0;null!==(match=linkRegex.exec(bundle.content));){var pre=match[1],url=match[2],startIndex=match.index+pre.length;startIndex>index&&content.push(bundle.content.substring(index,startIndex));var href=url.startsWith("www.")?"http://"+url:url;content.push(react.createElement("a",{key:index,href,target:"_blank"},""+url)),index=linkRegex.lastIndex}return index<bundle.content.length&&content.push(bundle.content.substring(index)),react.createElement("span",{style,key,className},content)}function Ansi(props){var className=props.className,useClasses=props.useClasses,children=props.children,linkify=props.linkify;return react.createElement("code",{className},function ansiToJSON(input,use_classes){return void 0===use_classes&&(use_classes=!1),input=(0,escape_carriage.escapeCarriageReturn)(function fixBackspace(txt){var tmp=txt;do{tmp=(txt=tmp).replace(/[^\n]\x08/gm,"")}while(tmp.length<txt.length);return txt}(input)),lib_default().ansiToJson(input,{json:!0,remove_empty:!0,use_classes})}(null!=children?children:"",null!=useClasses&&useClasses).map(convertBundleIntoReact.bind(null,null!=linkify&&linkify,null!=useClasses&&useClasses)))}var _a$3,_a$2,_a$1,Arithmetic,StdoutList=function(_a){var data=_a.data,classNames=useClassNames();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.map((function(_a){var data=_a.data,id=_a.id;return(0,jsx_runtime.jsx)("div",__assign({className:classNames("console-item",[consoleItemClassName$1])},{children:(0,jsx_runtime.jsx)(Ansi,{children:data},void 0)}),id)}))},void 0)},consoleItemClassName$1=dist_css({width:"100%",padding:"$space$3 $space$2",fontSize:".85em",position:"relative",whiteSpace:"pre","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"}}),CSB_URL="https://codesandbox.io/api/v1/sandboxes/define",getFileParameters=function(files,environment){var parameters,normalizedFiles=Object.keys(files).reduce((function(prev,next){var _a,fileName=next.replace("/",""),value={content:files[next].code,isBinary:!1};return __assign(__assign({},prev),((_a={})[fileName]=value,_a))}),{});return parameters=__assign({files:normalizedFiles},environment?{template:environment}:null),lz_string_default().compressToBase64(JSON.stringify(parameters)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},UnstyledOpenInCodeSandboxButton=function(_a){var _b,_c,_d,children=_a.children,props=__rest(_a,["children"]),sandpack=useSandpack().sandpack,formRef=react.useRef(null),_e=react.useState(),paramsValues=_e[0],setParamsValues=_e[1];return react.useEffect((function debounce(){var timer=setTimeout((function(){var params=getFileParameters(sandpack.files,sandpack.environment),searchParams=new URLSearchParams({parameters:params,query:new URLSearchParams({file:sandpack.activeFile,utm_medium:"sandpack"}).toString()});setParamsValues(searchParams)}),600);return function(){clearTimeout(timer)}}),[sandpack.activeFile,sandpack.environment,sandpack.files]),(null!==(_d=null===(_c=null===(_b=null==paramsValues?void 0:paramsValues.get)||void 0===_b?void 0:_b.call(paramsValues,"parameters"))||void 0===_c?void 0:_c.length)&&void 0!==_d?_d:0)>1500?(0,jsx_runtime.jsxs)("button",__assign({onClick:function(){var _a;return null===(_a=formRef.current)||void 0===_a?void 0:_a.submit()},title:"Open in CodeSandbox",type:"button"},props,{children:[(0,jsx_runtime.jsxs)("form",__assign({ref:formRef,action:CSB_URL,method:"POST",style:{visibility:"hidden"},target:"_blank"},{children:[(0,jsx_runtime.jsx)("input",{name:"environment",type:"hidden",value:"node"===sandpack.environment?"server":sandpack.environment},void 0),Array.from(paramsValues,(function(_a){var key=_a[0],value=_a[1];return(0,jsx_runtime.jsx)("input",{name:key,type:"hidden",value},key)}))]}),void 0),children]}),void 0):(0,jsx_runtime.jsx)("a",__assign({href:CSB_URL+"?"+(null==paramsValues?void 0:paramsValues.toString())+"&environment="+("node"===sandpack.environment?"server":sandpack.environment),rel:"noreferrer noopener",target:"_blank",title:"Open in CodeSandbox"},props,{children}),void 0)},OpenInCodeSandboxButton=function(){var classNames=useClassNames();return(0,jsx_runtime.jsxs)(UnstyledOpenInCodeSandboxButton,__assign({className:classNames("button",[classNames("icon-standalone"),buttonClassName,iconStandaloneClassName,roundedButtonClassName])},{children:[(0,jsx_runtime.jsx)(ExportIcon,{},void 0),(0,jsx_runtime.jsx)("span",{children:"Open Sandbox"},void 0)]}),void 0)},cubeClassName=dist_css({transform:"translate(-4px, 9px) scale(0.13, 0.13)","*":{position:"absolute",width:"96px",height:"96px"}}),wrapperClassName$2=dist_css(((_a$3={position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",width:"32px",height:"32px",borderRadius:"$border$radius"})["."+cubeClassName]={display:"flex"},_a$3[".sp-button."+buttonClassName]={display:"none"},_a$3["&:hover .sp-button."+buttonClassName]={display:"flex"},_a$3["&:hover .sp-button."+buttonClassName+" > span"]={display:"none"},_a$3["&:hover ."+cubeClassName]={display:"none"},_a$3)),cubeRotate=keyframes({"0%":{transform:"rotateX(-25.5deg) rotateY(45deg)"},"100%":{transform:"rotateX(-25.5deg) rotateY(405deg)"}}),sidesClassNames=dist_css({animation:cubeRotate+" 1s linear infinite",animationFillMode:"forwards",transformStyle:"preserve-3d",transform:"rotateX(-25.5deg) rotateY(45deg)","*":{border:"10px solid $colors$clickable",borderRadius:"8px",background:"$colors$surface1"},".top":{transform:"rotateX(90deg) translateZ(44px)",transformOrigin:"50% 50%"},".bottom":{transform:"rotateX(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".front":{transform:"rotateY(0deg) translateZ(44px)",transformOrigin:"50% 50%"},".back":{transform:"rotateY(-180deg) translateZ(44px)",transformOrigin:"50% 50%"},".left":{transform:"rotateY(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".right":{transform:"rotateY(90deg) translateZ(44px)",transformOrigin:"50% 50%"}}),Loading=function(_a){var className=_a.className,showOpenInCodeSandbox=_a.showOpenInCodeSandbox,props=__rest(_a,["className","showOpenInCodeSandbox"]),classNames=useClassNames();return(0,jsx_runtime.jsxs)("div",__assign({className:classNames("cube-wrapper",[wrapperClassName$2,className]),title:"Open in CodeSandbox"},props,{children:[showOpenInCodeSandbox&&(0,jsx_runtime.jsx)(OpenInCodeSandboxButton,{},void 0),(0,jsx_runtime.jsx)("div",__assign({className:classNames("cube",[cubeClassName])},{children:(0,jsx_runtime.jsxs)("div",__assign({className:classNames("sides",[sidesClassNames])},{children:[(0,jsx_runtime.jsx)("div",{className:"top"},void 0),(0,jsx_runtime.jsx)("div",{className:"right"},void 0),(0,jsx_runtime.jsx)("div",{className:"bottom"},void 0),(0,jsx_runtime.jsx)("div",{className:"left"},void 0),(0,jsx_runtime.jsx)("div",{className:"front"},void 0),(0,jsx_runtime.jsx)("div",{className:"back"},void 0)]}),void 0)}),void 0)]}),void 0)},loadingClassName=dist_css({backgroundColor:"$colors$surface1"}),LoadingOverlay=function(_a){var clientId=_a.clientId,loading=_a.loading,className=_a.className,style=_a.style,showOpenInCodeSandbox=_a.showOpenInCodeSandbox,props=__rest(_a,["clientId","loading","className","style","showOpenInCodeSandbox"]),classNames=useClassNames(),_b=useSandpack().sandpack,runSandpack=_b.runSandpack,environment=_b.environment,_c=react.useState(!1),shouldShowStdout=_c[0],setShouldShowStdout=_c[1],loadingOverlayState=function(clientId,externalLoading){var _a=useSandpack(),sandpack=_a.sandpack,listen=_a.listen,_b=react.useState("LOADING"),state=_b[0],setState=_b[1];return react.useEffect((function(){var unsubscribe=listen((function(message){"start"===message.type&&!0===message.firstLoad&&setState("LOADING"),"done"===message.type&&setState((function(prev){return"LOADING"===prev?"PRE_FADING":"HIDDEN"}))}),clientId);return function(){unsubscribe()}}),[clientId,"idle"===sandpack.status]),react.useEffect((function(){var fadeTimeout;return"PRE_FADING"!==state||externalLoading?"FADING"===state&&(fadeTimeout=setTimeout((function(){return setState("HIDDEN")}),200)):setState("FADING"),function(){clearTimeout(fadeTimeout)}}),[state,externalLoading]),"timeout"===sandpack.status?"TIMEOUT":"running"!==sandpack.status?"HIDDEN":state}(clientId,loading),progressMessage=useSandpackPreviewProgress({clientId}),stdoutData=useSandpackShellStdout({clientId}).logs;if(react.useEffect((function(){var timer;return(null==progressMessage?void 0:progressMessage.includes("Running"))&&(timer=setTimeout((function(){setShouldShowStdout(!0)}),3e3)),function(){timer&&clearTimeout(timer)}}),[progressMessage]),"HIDDEN"===loadingOverlayState)return null;if("TIMEOUT"===loadingOverlayState)return(0,jsx_runtime.jsx)("div",__assign({className:classNames("overlay",[classNames("error"),absoluteClassName,errorClassName,errorBundlerClassName,className])},props,{children:(0,jsx_runtime.jsxs)("div",__assign({className:classNames("error-message",[errorMessageClassName])},{children:[(0,jsx_runtime.jsx)("p",__assign({className:classNames("error-title",[dist_css({fontWeight:"bold"})])},{children:"Couldn't connect to server"}),void 0),(0,jsx_runtime.jsx)("div",__assign({className:classNames("error-message",[errorMessageClassName])},{children:(0,jsx_runtime.jsxs)("p",{children:["This means sandpack cannot connect to the runtime or your network is having some issues. Please check the network tab in your browser and try again. If the problem persists, report it via"," ",(0,jsx_runtime.jsx)("a",__assign({href:"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error"},{children:"email"}),void 0)," ","or submit an issue on"," ",(0,jsx_runtime.jsx)("a",__assign({href:"https://github.com/codesandbox/sandpack/issues",rel:"noreferrer noopener",target:"_blank"},{children:"GitHub."}),void 0)]},void 0)}),void 0),(0,jsx_runtime.jsxs)("p",__assign({className:classNames("error-message",[errorMessageClassName({errorCode:!0})])},{children:["ENV: ",environment,(0,jsx_runtime.jsx)("br",{},void 0),"ERROR: TIME_OUT"]}),void 0),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("button",__assign({className:classNames("button",[classNames("icon-standalone"),buttonClassName,iconStandaloneClassName,roundedButtonClassName]),onClick:runSandpack,title:"Restart script",type:"button"},{children:[(0,jsx_runtime.jsx)(RestartIcon,{},void 0)," ",(0,jsx_runtime.jsx)("span",{children:"Try again"},void 0)]}),void 0)},void 0)]}),void 0)}),void 0);var stillLoading="LOADING"===loadingOverlayState||"PRE_FADING"===loadingOverlayState;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",__assign({className:classNames("overlay",[classNames("loading"),absoluteClassName,loadingClassName,className]),style:__assign(__assign({},style),{opacity:stillLoading?1:0,transition:"opacity 200ms ease-out"})},props,{children:[shouldShowStdout&&(0,jsx_runtime.jsx)("div",__assign({className:stdoutPreview.toString()},{children:(0,jsx_runtime.jsx)(StdoutList,{data:stdoutData},void 0)}),void 0),(0,jsx_runtime.jsx)(Loading,{showOpenInCodeSandbox},void 0)]}),void 0),progressMessage&&(0,jsx_runtime.jsx)("div",__assign({className:progressClassName$1.toString()},{children:(0,jsx_runtime.jsx)("p",{children:progressMessage},void 0)}),void 0)]},void 0)},stdoutPreview=dist_css({position:"absolute",left:0,right:0,bottom:"$space$8",overflow:"auto",opacity:.5,overflowX:"hidden"}),progressClassName$1=dist_css({position:"absolute",left:"$space$5",bottom:"$space$4",zIndex:"$top",color:"$colors$clickable",animation:fadeIn+" 150ms ease",fontFamily:"$font$mono",fontSize:".8em",width:"75%",p:{whiteSpace:"nowrap",margin:0,textOverflow:"ellipsis",overflow:"hidden"}}),DependenciesProgress=function(_a){var clientId=_a.clientId,progressMessage=useSandpackPreviewProgress({timeout:3e3,clientId});return progressMessage?(0,jsx_runtime.jsx)("div",__assign({className:progressClassName.toString()},{children:(0,jsx_runtime.jsx)("p",{children:progressMessage},void 0)}),void 0):null},progressClassName=dist_css({position:"absolute",left:"$space$5",bottom:"$space$4",zIndex:"$top",color:"$colors$clickable",animation:fadeIn+" 150ms ease",fontFamily:"$font$mono",fontSize:".8em",width:"75%",p:{whiteSpace:"nowrap",margin:0,textOverflow:"ellipsis",overflow:"hidden"}}),navigatorClassName=(dist_css({borderRadius:"0",width:"100%",padding:0,marginBottom:"$space$2",span:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},svg:{marginRight:"$space$1"}}),dist_css({padding:"$space$3",overflow:"auto",height:"100%"}),dist_css({display:"flex",alignItems:"center",height:"$layout$headerHeight",borderBottom:"1px solid $colors$surface2",padding:"$space$3 $space$2",background:"$colors$surface1"})),inputClassName=dist_css({backgroundColor:"$colors$surface2",color:"$colors$clickable",padding:"$space$1 $space$3",borderRadius:"99999px",border:"1px solid $colors$surface2",height:"24px",lineHeight:"24px",fontSize:"inherit",outline:"none",flex:1,marginLeft:"$space$4",width:"0",transition:"background $transitions$default","&:hover":{backgroundColor:"$colors$surface3"},"&:focus":{backgroundColor:"$surface1",border:"1px solid $colors$accent",color:"$colors$base"}}),Navigator=function(_a){var _b,clientId=_a.clientId,onURLChange=_a.onURLChange,className=_a.className,startRoute=_a.startRoute,props=__rest(_a,["clientId","onURLChange","className","startRoute"]),_c=react.useState(""),baseUrl=_c[0],setBaseUrl=_c[1],_d=useSandpack(),sandpack=_d.sandpack,dispatch=_d.dispatch,listen=_d.listen,_e=react.useState(null!==(_b=null!=startRoute?startRoute:sandpack.startRoute)&&void 0!==_b?_b:"/"),relativeUrl=_e[0],setRelativeUrl=_e[1],_f=react.useState(!1),backEnabled=_f[0],setBackEnabled=_f[1],_g=react.useState(!1),forwardEnabled=_g[0],setForwardEnabled=_g[1],classNames=useClassNames();react.useEffect((function(){var unsub=listen((function(message){if("urlchange"===message.type){var url=message.url,back=message.back,forward=message.forward,_a=function(url){var match=url.match(/(https?:\/\/.*?)\//);return match&&match[1]?[match[1],url.replace(match[1],"")]:[url,"/"]}(url),newBaseUrl=_a[0],newRelativeUrl=_a[1];setBaseUrl(newBaseUrl),setRelativeUrl(newRelativeUrl),setBackEnabled(back),setForwardEnabled(forward)}}),clientId);return function(){return unsub()}}),[]);var buttonsClassNames=classNames("button",[classNames("icon"),buttonClassName,iconClassName,dist_css({minWidth:"$space$6",justifyContent:"center"})]);return(0,jsx_runtime.jsxs)("div",__assign({className:classNames("navigator",[navigatorClassName,className])},props,{children:[(0,jsx_runtime.jsx)("button",__assign({"aria-label":"Go back one page",className:buttonsClassNames,disabled:!backEnabled,onClick:function(){dispatch({type:"urlback"})},type:"button"},{children:(0,jsx_runtime.jsx)(BackwardIcon,{},void 0)}),void 0),(0,jsx_runtime.jsx)("button",__assign({"aria-label":"Go forward one page",className:buttonsClassNames,disabled:!forwardEnabled,onClick:function(){dispatch({type:"urlforward"})},type:"button"},{children:(0,jsx_runtime.jsx)(ForwardIcon,{},void 0)}),void 0),(0,jsx_runtime.jsx)("button",__assign({"aria-label":"Refresh page",className:buttonsClassNames,onClick:function(){dispatch({type:"refresh"})},type:"button"},{children:(0,jsx_runtime.jsx)(RefreshIcon,{},void 0)}),void 0),(0,jsx_runtime.jsx)("input",{"aria-label":"Current Sandpack URL",className:classNames("input",[inputClassName]),name:"Current Sandpack URL",onChange:function(e){var path=e.target.value.startsWith("/")?e.target.value:"/"+e.target.value;setRelativeUrl(path)},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation(),"function"==typeof onURLChange&&onURLChange(baseUrl+e.currentTarget.value))},type:"text",value:relativeUrl},void 0)]}),void 0)},previewClassName=dist_css(((_a$2={flex:1,display:"flex",flexDirection:"column",background:"white",overflow:"auto",position:"relative"})[".sp-bridge-frame"]={border:0,position:"absolute",left:"$space$2",bottom:"$space$2",zIndex:"$top",height:12,width:"30%",mixBlendMode:"multiply",pointerEvents:"none"},_a$2)),previewIframe=dist_css({border:"0",outline:"0",width:"100%",height:"100%",minHeight:"160px",maxHeight:"2000px",flex:1}),previewActionsClassName$1=dist_css({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay",gap:"$space$2"}),color=(react.forwardRef((function(_a,ref){var _b=_a.showNavigator,showNavigator=void 0!==_b&&_b,_c=_a.showRefreshButton,showRefreshButton=void 0===_c||_c,_d=_a.showOpenInCodeSandbox,showOpenInCodeSandbox=void 0===_d||_d,_e=_a.showSandpackErrorOverlay,showSandpackErrorOverlay=void 0===_e||_e;_a.showOpenNewtab;var _g=_a.showRestartButton,showRestartButton=void 0===_g||_g,_h=_a.actionsChildren,actionsChildren=void 0===_h?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{},void 0):_h,children=_a.children,className=_a.className,_j=_a.startRoute,startRoute=void 0===_j?"/":_j,props=__rest(_a,["showNavigator","showRefreshButton","showOpenInCodeSandbox","showSandpackErrorOverlay","showOpenNewtab","showRestartButton","actionsChildren","children","className","startRoute"]),_k=useSandpackClient({startRoute}),sandpack=_k.sandpack,listen=_k.listen,iframe=_k.iframe,getClient=_k.getClient,clientId=_k.clientId,dispatch=_k.dispatch,_l=react.useState(null),iframeComputedHeight=_l[0],setComputedAutoHeight=_l[1],status=sandpack.status,refresh=function(clientId){var dispatch=useSandpack().dispatch;return{refresh:function(){return dispatch({type:"refresh"},clientId)},back:function(){return dispatch({type:"urlback"},clientId)},forward:function(){return dispatch({type:"urlforward"},clientId)}}}(clientId).refresh,restart=useSandpackShell(clientId).restart,classNames=useClassNames();react.useEffect((function(){return listen((function(message){"resize"===message.type&&setComputedAutoHeight(message.height)}))}),[]),react.useImperativeHandle(ref,(function(){return{clientId,getClient}}),[getClient,clientId]);return(0,jsx_runtime.jsxs)(SandpackStack,__assign({className:classNames("preview",[className])},props,{children:[showNavigator&&(0,jsx_runtime.jsx)(Navigator,{clientId,onURLChange:function(newUrl){iframe.current&&(iframe.current.src=newUrl)},startRoute},void 0),(0,jsx_runtime.jsxs)("div",__assign({className:classNames("preview-container",[previewClassName])},{children:[(0,jsx_runtime.jsx)("iframe",{ref:iframe,className:classNames("preview-iframe",[previewIframe]),style:{height:iframeComputedHeight||void 0},title:"Sandpack Preview"},void 0),(0,jsx_runtime.jsxs)("div",__assign({className:classNames("preview-actions",[previewActionsClassName$1])},{children:[actionsChildren,showRestartButton&&"node"===sandpack.environment&&(0,jsx_runtime.jsx)(RoundedButton,__assign({onClick:restart},{children:(0,jsx_runtime.jsx)(RestartIcon,{},void 0)}),void 0),!showNavigator&&showRefreshButton&&"running"===status&&(0,jsx_runtime.jsx)(RoundedButton,__assign({onClick:refresh},{children:(0,jsx_runtime.jsx)(RefreshIcon,{},void 0)}),void 0),sandpack.teamId&&(0,jsx_runtime.jsx)("button",__assign({className:classNames("button",[classNames("icon-standalone"),buttonClassName,iconStandaloneClassName,roundedButtonClassName]),onClick:function(){return dispatch({type:"sign-out"})},title:"Sign out",type:"button"},{children:(0,jsx_runtime.jsx)(SignOutIcon,{},void 0)}),void 0),showOpenInCodeSandbox&&(0,jsx_runtime.jsx)(OpenInCodeSandboxButton,{},void 0)]}),void 0),(0,jsx_runtime.jsx)(LoadingOverlay,{clientId,showOpenInCodeSandbox},void 0),showSandpackErrorOverlay&&(0,jsx_runtime.jsx)(ErrorOverlay,{},void 0),children]}),void 0)]}),void 0)})),dist_css(((_a$1={display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"auto",minHeight:"160px",flex:1})[".sp-stack"]={height:"100%"},_a$1)),dist_css({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),dist_css({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"}),dist_css({variants:{status:{pass:{color:"var(--test-pass)"},fail:{color:"var(--test-fail)"},skip:{color:"var(--test-skip)"},title:{color:"var(--test-title)"}}}})),background=(color({status:"pass"}),color({status:"fail"}),color({status:"skip"}),color({status:"title"}),dist_css({variants:{status:{pass:{background:"var(--test-pass)",color:"$colors$surface1"},fail:{background:"var(--test-fail)",color:"$colors$surface1"},run:{background:"var(--test-run)",color:"$colors$surface1"}}}})),SYNTAX_ERROR_PATTERN=(background({status:"run"}),background({status:"pass"}),background({status:"fail"}),dist_css({marginLeft:"$space$4"}),dist_css({marginBottom:"$space$2",color:"$colors$clickable"}),dist_css({marginBottom:"$space$2",color:"$colors$hover"}),dist_css({marginLeft:"$space$2"}),dist_css({marginRight:"$space$2"}),dist_css({color:"$colors$hover",marginBottom:"$space$2"}),dist_css({marginLeft:"$space$4"}),dist_css({color:"$colors$hover",fontSize:"$font$size",padding:"$space$2",whiteSpace:"pre-wrap"}),dist_css({display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"$space$2"}),dist_css({marginBottom:"$space$2"}),dist_css({fontWeight:"bold"}),dist_css({borderRadius:"calc($border$radius / 2)"}),dist_css({padding:"$space$1 $space$2",fontFamily:"$font$mono",textTransform:"uppercase",marginRight:"$space$2"}),dist_css({fontFamily:"$font$mono",cursor:"pointer",display:"inline-block"}),dist_css({color:"$colors$clickable",textDecorationStyle:"dotted",textDecorationLine:"underline"}),dist_css({color:"$colors$hover",fontWeight:"bold",textDecorationStyle:"dotted",textDecorationLine:"underline"}),dist_css({marginBottom:"$space$2"}),dist_css({fontWeight:"bold",color:"$colors$hover",whiteSpace:"pre-wrap"}),dist_css({fontWeight:"bold",color:"$colors$clickable"}),dist_css({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay","> *":{marginLeft:"$space$2"}}),dist_css({padding:"$space$4",height:"100%",overflow:"auto",display:"flex",flexDirection:"column",position:"relative",fontFamily:"$font$mono"}),dist_css({fontWeight:"bold",color:"$colors$base"}),["SyntaxError: ","Error in sandbox:"]),CLEAR_LOG={id:"random",method:"clear",data:["Console was cleared"]},GLOBAL=function getGlobal(){return(0,eval)("this")}(),ARRAY_BUFFER_SUPPORTED="function"==typeof ArrayBuffer,MAP_SUPPORTED="function"==typeof Map,SET_SUPPORTED="function"==typeof Set;!function(Arithmetic){Arithmetic[Arithmetic.infinity=0]="infinity",Arithmetic[Arithmetic.minusInfinity=1]="minusInfinity",Arithmetic[Arithmetic.minusZero=2]="minusZero"}(Arithmetic||(Arithmetic={}));var dist_a,transformers={Arithmetic:function(data){return data===Arithmetic.infinity?1/0:data===Arithmetic.minusInfinity?-1/0:data===Arithmetic.minusZero?-0:data},HTMLElement:function(data){var sandbox=document.implementation.createHTMLDocument("sandbox");try{var element=sandbox.createElement(data.tagName);element.innerHTML=data.innerHTML;for(var _i=0,_a=Object.keys(data.attributes);_i<_a.length;_i++){var attribute=_a[_i];try{element.setAttribute(attribute,data.attributes[attribute])}catch(_b){}}return element}catch(e){return data}},Function:function(data){var tempFun=function(){};return Object.defineProperty(tempFun,"toString",{value:function(){return"function "+data.name+"() {"+data.body+"}"}}),tempFun},"[[NaN]]":function(){return NaN},"[[undefined]]":function(){},"[[Date]]":function(val){var date=new Date;return date.setTime(val),date},"[[RegExp]]":function(val){return new RegExp(val.src,val.flags)},"[[Error]]":function(val){var err=new(GLOBAL[val.name]||Error)(val.message);return err.stack=val.stack,err},"[[ArrayBuffer]]":function(val){if(ARRAY_BUFFER_SUPPORTED){var buffer=new ArrayBuffer(val.length);return new Int8Array(buffer).set(val),buffer}return val},"[[TypedArray]]":function(val){return"function"==typeof GLOBAL[val.ctorName]?new GLOBAL[val.ctorName](val.arr):val.arr},"[[Map]]":function(val){if(MAP_SUPPORTED){for(var map=new Map,i=0;i<val.length;i+=2)map.set(val[i],val[i+1]);return map}for(var kvArr=[],j=0;j<val.length;j+=2)kvArr.push([val[i],val[i+1]]);return kvArr},"[[Set]]":function(val){if(SET_SUPPORTED){for(var set=new Set,i=0;i<val.length;i++)set.add(val[i]);return set}return val}},formatSymbols=function(message){var _a;if("string"==typeof message||"number"==typeof message||null===message)return message;if(Array.isArray(message))return message.map(formatSymbols);if("object"==typeof message&&"@t"in message){var type=message["@t"];return(0,transformers[type])(message.data)}if("object"==typeof message&&"#@t"in message){type=message["#@t"];return(0,transformers[type])(message.data)}if("object"==typeof message&&"NodeList"===(null===(_a=message.constructor)||void 0===_a?void 0:_a.name)){var NodeList_1={};return Object.entries(message).forEach((function(_a){var key=_a[0],value=_a[1];NodeList_1[key]=formatSymbols(value)})),NodeList_1}return message},fromConsoleToString=function(message,references,level){var _a;void 0===level&&(level=0);try{var output_1=formatSymbols(message);if(Array.isArray(output_1))return function(output,references,level){return"["+output.reduce((function(acc,curr,index){return acc+(index?", ":"")+fromConsoleToString(curr,references,level)}),"")+"]"}(output_1,references,level+1);switch(typeof output_1){case"string":return('"'+output_1+'"').slice(0,1e4);case"number":case"function":case"symbol":return output_1.toString();case"boolean":return String(output_1);case"undefined":return"undefined";default:if(output_1 instanceof RegExp||output_1 instanceof Error||output_1 instanceof Date)return output_1.toString();if(null===output_1)return String(null);if(output_1 instanceof HTMLElement)return output_1.outerHTML.slice(0,1e4);if(0===Object.entries(output_1).length)return"{}";if("@r"in output_1){if(level>2)return"Unable to print information";var newMessage=references[output_1["@r"]];return fromConsoleToString(newMessage,references,level+1)}if("NodeList"===(null===(_a=output_1.constructor)||void 0===_a?void 0:_a.name)){var length_1=output_1.length,nodes=new Array(length_1).fill(null).map((function(_,index){return fromConsoleToString(output_1[index],references)}));return"NodeList("+output_1.length+")["+nodes+"]"}return function(output,references,level){var constructorName="Object"!==output.constructor.name?output.constructor.name+" ":"";if(level>2)return constructorName;var entries=Object.entries(output),formattedObject=Object.entries(output).reduce((function(acc,_a,index){var key=_a[0],value=_a[1],comma=0===index?"":", ",breakLine=entries.length>10?"\n  ":"",formatted=fromConsoleToString(value,references,level);return 400===index?acc+breakLine+"...":index>400?acc:acc+""+comma+breakLine+key+": "+formatted}),"");return constructorName+"{ "+formattedObject+(entries.length>10?"\n":" ")+"}"}(output_1,references,level+1)}}catch(_b){return"Unable to print information"}},getType=function(message){switch(message){case"warn":return"warning";case"clear":return"clear";case"error":return"error";default:return"info"}},ConsoleList=function(_a){var data=_a.data,classNames=useClassNames();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.map((function(_a,logIndex,references){var data=_a.data,id=_a.id,method=_a.method;return data&&Array.isArray(data)?(0,jsx_runtime.jsx)(react.Fragment,{children:data.map((function(msg,msgIndex){var fixReferences=references.slice(logIndex,references.length);return(0,jsx_runtime.jsx)("div",__assign({className:classNames("console-item",[consoleItemClassName({variant:getType(method)})])},{children:(0,jsx_runtime.jsx)(CodeMirror,{code:"clear"===method?msg:fromConsoleToString(msg,fixReferences),fileType:"js",initMode:"user-visible",showReadOnly:!1,readOnly:!0,wrapContent:!0},void 0)}),id+"-"+msgIndex)}))},id):null}))},void 0)},consoleItemClassName=dist_css(((dist_a={width:"100%",padding:"$space$3 $space$2",fontSize:".8em",position:"relative","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"},".sp-cm":{padding:0},".cm-editor":{background:"none"},".cm-content":{padding:0}})[".sp-pre-placeholder"]={margin:"0 !important",fontSize:"1em"},dist_a.variants={variant:{error:{color:"$colors$error",background:"$colors$errorSurface","&:not(:first-child):after":{background:"$colors$error",opacity:.07}},warning:{color:"$colors$warning",background:"$colors$warningSurface","&:not(:first-child):after":{background:"$colors$warning",opacity:.07}},clear:{fontStyle:"italic"},info:{}}},dist_a)),wrapperClassName=dist_css({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),flexClassName=dist_css({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"}),Header=function(_a){var currentTab=_a.currentTab,setCurrentTab=_a.setCurrentTab,node=_a.node,classNames=useClassNames(),buttonsClassName=classNames("console-header-button",[buttonClassName,roundedButtonClassName,dist_css({padding:"$space$1 $space$3"})]);return(0,jsx_runtime.jsxs)("div",__assign({className:classNames("console-header",[wrapperClassName,flexClassName])},{children:[(0,jsx_runtime.jsxs)("p",__assign({className:classNames("console-header-title",[dist_css({lineHeight:1,margin:0,color:"$colors$base",fontSize:"$font$size",display:"flex",alignItems:"center",gap:"$space$2"})])},{children:[(0,jsx_runtime.jsx)(ConsoleIcon,{},void 0),(0,jsx_runtime.jsx)("span",{children:"Terminal"},void 0)]}),void 0),node&&(0,jsx_runtime.jsxs)("div",__assign({className:classNames("console-header-actions",[flexClassName])},{children:[(0,jsx_runtime.jsx)("button",__assign({className:buttonsClassName,"data-active":"server"===currentTab,onClick:function(){return setCurrentTab("server")},type:"button"},{children:"Server"}),void 0),(0,jsx_runtime.jsx)("button",__assign({className:buttonsClassName,"data-active":"client"===currentTab,onClick:function(){return setCurrentTab("client")},type:"button"},{children:"Client"}),void 0)]}),void 0)]}),void 0)},ui_module_css=(react.forwardRef((function(_a,ref){var _b,_c=_a.showHeader,showHeader=void 0===_c||_c,_d=_a.showSyntaxError,showSyntaxError=void 0!==_d&&_d,maxMessageCount=_a.maxMessageCount,onLogsChange=_a.onLogsChange,className=_a.className;_a.showSetupProgress;var _f=_a.resetOnPreviewRestart,resetOnPreviewRestart=void 0!==_f&&_f,_g=_a.actionsChildren,actionsChildren=void 0===_g?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{},void 0):_g,_h=_a.standalone,standalone=void 0!==_h&&_h,props=__rest(_a,["showHeader","showSyntaxError","maxMessageCount","onLogsChange","className","showSetupProgress","resetOnPreviewRestart","actionsChildren","standalone"]),environment=useSandpack().sandpack.environment,_j=useSandpackClient(),iframe=_j.iframe,internalClientId=_j.clientId,restart=useSandpackShell().restart,_k=react.useState("node"===environment?"server":"client"),currentTab=_k[0],setCurrentTab=_k[1],clientId=standalone?internalClientId:void 0,_l=function(_a){var clientId=_a.clientId,_b=_a.maxMessageCount,maxMessageCount=void 0===_b?800:_b,_c=_a.showSyntaxError,showSyntaxError=void 0!==_c&&_c,_d=_a.resetOnPreviewRestart,resetOnPreviewRestart=void 0!==_d&&_d,_e=react.useState([]),logs=_e[0],setLogs=_e[1],listen=useSandpack().listen;return react.useEffect((function(){var unsubscribe=listen((function(message){if(resetOnPreviewRestart&&"start"===message.type)setLogs([]);else if("console"===message.type&&message.codesandbox){var payloadLog=Array.isArray(message.log)?message.log:[message.log];if(payloadLog.find((function(_a){return"clear"===_a.method})))return setLogs([CLEAR_LOG]);var logsMessages_1=showSyntaxError?payloadLog:payloadLog.filter((function(messageItem){var _a,_b,_c;return(null!==(_c=null===(_b=null===(_a=null==messageItem?void 0:messageItem.data)||void 0===_a?void 0:_a.filter)||void 0===_b?void 0:_b.call(_a,(function(dataItem){return"string"!=typeof dataItem||0===SYNTAX_ERROR_PATTERN.filter((function(lookFor){return dataItem.startsWith(lookFor)})).length})))&&void 0!==_c?_c:[]).length>0}));if(!logsMessages_1)return;setLogs((function(prev){for(var messages=__spreadArray(__spreadArray([],prev,!0),logsMessages_1,!0).filter((function(value,index,self){return index===self.findIndex((function(s){return s.id===value.id}))}));messages.length>maxMessageCount;)messages.shift();return messages}))}}),clientId);return unsubscribe}),[showSyntaxError,maxMessageCount,clientId,resetOnPreviewRestart]),{logs,reset:function(){return setLogs([])}}}({maxMessageCount,showSyntaxError,resetOnPreviewRestart,clientId}),consoleData=_l.logs,resetConsole=_l.reset,_m=useSandpackShellStdout({maxMessageCount,resetOnPreviewRestart,clientId}),stdoutData=_m.logs,resetStdout=_m.reset,wrapperRef=react.useRef(null);react.useEffect((function(){null==onLogsChange||onLogsChange(consoleData),wrapperRef.current&&(wrapperRef.current.scrollTop=wrapperRef.current.scrollHeight)}),[onLogsChange,consoleData,stdoutData,currentTab]);var isServerTab="server"===currentTab,isNodeEnvironment="node"===environment;react.useImperativeHandle(ref,(function(){return{reset:function(){resetConsole(),resetStdout()}}}));var classNames=useClassNames();return(0,jsx_runtime.jsxs)(SandpackStack,__assign({className:classNames("console",[dist_css((_b={height:"100%",background:"$surface1",iframe:{display:"none"}},_b[".sp-bridge-frame"]={display:"block",border:0,position:"absolute",left:"$space$2",bottom:"$space$2",zIndex:"$top",height:12,width:"30%",mixBlendMode:"multiply",pointerEvents:"none"},_b)),className])},props,{children:[showHeader&&isNodeEnvironment&&(0,jsx_runtime.jsx)(Header,{currentTab,node:isNodeEnvironment,setCurrentTab},void 0),(0,jsx_runtime.jsx)("div",__assign({ref:wrapperRef,className:classNames("console-list",[dist_css({overflow:"auto",scrollBehavior:"smooth"})])},{children:isServerTab?(0,jsx_runtime.jsx)(StdoutList,{data:stdoutData},void 0):(0,jsx_runtime.jsx)(ConsoleList,{data:consoleData},void 0)}),void 0),(0,jsx_runtime.jsxs)("div",__assign({className:classNames("console-actions",[dist_css({position:"absolute",bottom:"$space$2",right:"$space$2",display:"flex",gap:"$space$2"})])},{children:[actionsChildren,isServerTab&&(0,jsx_runtime.jsx)(RoundedButton,__assign({onClick:function(){restart(),resetConsole(),resetStdout()}},{children:(0,jsx_runtime.jsx)(RestartIcon,{},void 0)}),void 0),(0,jsx_runtime.jsx)(RoundedButton,__assign({onClick:function(){"client"===currentTab?resetConsole():resetStdout()}},{children:(0,jsx_runtime.jsx)(CleanIcon,{},void 0)}),void 0)]}),void 0),standalone&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DependenciesProgress,{clientId},void 0),(0,jsx_runtime.jsx)("iframe",{ref:iframe},void 0)]},void 0)]}),void 0)})),dist_css({position:"absolute",zIndex:"$top",variants:{direction:{vertical:{right:0,left:0,height:10,cursor:"ns-resize"},horizontal:{top:0,bottom:0,width:10,cursor:"ew-resize"}}},"@media screen and (max-width: 768px)":{display:"none"}}),dist_css({position:"relative",strong:{background:"$colors$clickable",color:"$colors$surface1",minWidth:12,height:12,padding:"0 2px",borderRadius:12,fontSize:8,lineHeight:"12px",position:"absolute",top:0,right:0,fontWeight:"normal"}}),dist_css({width:"100%",overflow:"hidden"}),dist_css({flexDirection:"row-reverse","@media screen and (max-width: 768px)":{flexFlow:"wrap-reverse !important",flexDirection:"initial"}}),__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js")),CodeBlockNode=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/CodeBlockNode.js"),core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js");const CodeMirrorEditor=({language,nodeKey,code,focusEmitter})=>{const codeMirrorRef=function useCodeMirrorRef(nodeKey,editorType,language,focusEmitter){const[theEditor]=core.vY.useEmitterValues("activeEditor"),setEditorInFocus=core.vY.usePublisher("editorInFocus"),codeMirrorRef=react.useRef(null),{lexicalNode}=(0,CodeBlockNode.$8)(),atBottom=react.useRef(!1),atTop=react.useRef(!1),onFocusHandler=react.useCallback((()=>{setEditorInFocus({editorType,rootNode:lexicalNode})}),[editorType,lexicalNode,setEditorInFocus]),onKeyDownHandler=react.useCallback((e=>{var _a,_b,_c,_d;if("ArrowDown"===e.key){const state=null==(_b=null==(_a=null==codeMirrorRef?void 0:codeMirrorRef.current)?void 0:_a.getCodemirror())?void 0:_b.state;state&&state.doc.length===state.selection.ranges[0].to&&(atBottom.current?(null==theEditor||theEditor.update((()=>{var _a2,_b2;const node=(0,Lexical.$getNodeByKey)(nodeKey);node.getNextSibling()?(null==(_b2=null==(_a2=null==codeMirrorRef?void 0:codeMirrorRef.current)?void 0:_a2.getCodemirror())||_b2.contentDOM.blur(),node.selectNext()):node.insertAfter((0,Lexical.$createParagraphNode)())})),atBottom.current=!1):atBottom.current=!0)}else if("ArrowUp"===e.key){const state=null==(_d=null==(_c=null==codeMirrorRef?void 0:codeMirrorRef.current)?void 0:_c.getCodemirror())?void 0:_d.state;state&&0===state.selection.ranges[0].from&&(atTop.current?(null==theEditor||theEditor.update((()=>{var _a2,_b2;const node=(0,Lexical.$getNodeByKey)(nodeKey);node.getPreviousSibling()&&(null==(_b2=null==(_a2=null==codeMirrorRef?void 0:codeMirrorRef.current)?void 0:_a2.getCodemirror())||_b2.contentDOM.blur(),node.selectPrevious())})),atTop.current=!1):atTop.current=!0)}else"Enter"===e.key&&e.stopPropagation()}),[theEditor,nodeKey]);return react.useEffect((()=>{const codeMirror=codeMirrorRef.current;return setTimeout((()=>{var _a,_b,_c,_d;null==(_b=null==(_a=null==codeMirror?void 0:codeMirror.getCodemirror())?void 0:_a.contentDOM)||_b.addEventListener("focus",onFocusHandler),null==(_d=null==(_c=null==codeMirror?void 0:codeMirror.getCodemirror())?void 0:_c.contentDOM)||_d.addEventListener("keydown",onKeyDownHandler)}),100),()=>{var _a,_b;null==(_a=null==codeMirror?void 0:codeMirror.getCodemirror())||_a.contentDOM.removeEventListener("focus",onFocusHandler),null==(_b=null==codeMirror?void 0:codeMirror.getCodemirror())||_b.contentDOM.removeEventListener("keydown",onKeyDownHandler)}}),[codeMirrorRef,onFocusHandler,onKeyDownHandler,language]),react.useEffect((()=>{focusEmitter.subscribe((()=>{var _a,_b;null==(_b=null==(_a=null==codeMirrorRef?void 0:codeMirrorRef.current)?void 0:_a.getCodemirror())||_b.focus(),onFocusHandler()}))}),[focusEmitter,codeMirrorRef,nodeKey,onFocusHandler]),codeMirrorRef}(nodeKey,"codeblock","jsx",focusEmitter),[readOnly]=core.vY.useEmitterValues("readOnly"),{setCode}=(0,CodeBlockNode.$8)();return react.useEffect((()=>{var _a,_b;null==(_b=null==(_a=codeMirrorRef.current)?void 0:_a.getCodemirror())||_b.dom.addEventListener("paste",(e=>{e.stopPropagation()}))}),[codeMirrorRef]),react.createElement("div",{className:ui_module_css.ZP.sandpackWrapper,onKeyDown:e=>{e.stopPropagation()}},react.createElement(SandpackProvider,null,react.createElement(CodeMirror,{readOnly,showLineNumbers:!0,initMode:"immediate",key:language,filePath:`file.${language||"txt"}`,code,onCodeUpdate:setCode,ref:codeMirrorRef})))}},"./node_modules/@mdxeditor/editor/dist/plugins/codemirror/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AX:()=>codeMirrorPlugin,qt:()=>codeMirrorHooks});var _core_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_codeblock_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js"),_CodeMirrorEditor_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codemirror/CodeMirrorEditor.js"),_gurx_realmFactory_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),_gurx_react_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const defaultCodeBlockLanguages={js:"JavaScript",ts:"TypeScript",tsx:"TypeScript (React)",jsx:"JavaScript (React)",css:"CSS"},codeMirrorSystem=(0,_gurx_realmFactory_js__WEBPACK_IMPORTED_MODULE_0__.By)(((r,[,{insertCodeBlock}])=>{const codeBlockLanguages=r.node(defaultCodeBlockLanguages),insertCodeMirror=r.node();return r.link(r.pipe(insertCodeMirror,r.o.map((({language,code})=>({code,language,meta:""})))),insertCodeBlock),{codeBlockLanguages,insertCodeMirror}}),[_core_index_js__WEBPACK_IMPORTED_MODULE_1__.Wo,_codeblock_index_js__WEBPACK_IMPORTED_MODULE_2__.yQ]),[codeMirrorPlugin,codeMirrorHooks]=(0,_gurx_react_js__WEBPACK_IMPORTED_MODULE_3__.nq)({id:"codemirror",systemSpec:codeMirrorSystem,applyParamsToSystem(r,params){r.pubKey("codeBlockLanguages",params.codeBlockLanguages)},init(r,{codeBlockLanguages}){r.pubKey("appendCodeBlockEditorDescriptor",{match:(language,meta)=>codeBlockLanguages.hasOwnProperty(language)&&""===meta,priority:1,Editor:_CodeMirrorEditor_js__WEBPACK_IMPORTED_MODULE_4__.s})}})},"./node_modules/@mdxeditor/editor/dist/plugins/core/NestedLexicalEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cr:()=>NestedEditorsContext,rg:()=>useNestedEditorContext,zI:()=>NestedLexicalEditor});var lexical__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lexical/Lexical.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_index_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_lexical_react_LexicalContentEditable_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.js"),_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.js"),_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_3__),_lexical_react_LexicalNestedComposer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@lexical/react/LexicalNestedComposer.js"),_lexical_react_LexicalRichTextPlugin_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.js"),_styles_lexicalTheme_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/lexicalTheme.js"),_exportMarkdownFromLexical_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/exportMarkdownFromLexical.js"),_importMarkdownToLexical_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/importMarkdownToLexical.js"),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),_SharedHistoryPlugin_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/SharedHistoryPlugin.js"),_lexical_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),_utils_isPartOftheEditorUI_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/isPartOftheEditorUI.js");const NestedEditorsContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);function useNestedEditorContext(){const context=react__WEBPACK_IMPORTED_MODULE_1__.useContext(NestedEditorsContext);if(!context)throw new Error("useNestedEditor must be used within a NestedEditorsProvider");return context}const NestedLexicalEditor=function(props){const{getContent,getUpdatedMdastNode,contentEditableProps,block=!1}=props,{mdastNode,lexicalNode,focusEmitter}=useNestedEditorContext(),updateMdastNode=function useMdastNodeUpdater(){const{parentEditor,mdastNode,lexicalNode}=useNestedEditorContext();return function updateMdastNode(node){parentEditor.update((()=>{(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$addUpdateTag)("history-push");const currentNode=(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$getNodeByKey)(lexicalNode.getKey());currentNode&&currentNode.setMdastNode({...mdastNode,...node})}))}}(),removeNode=function useLexicalNodeRemove(){const{parentEditor,lexicalNode}=useNestedEditorContext();return()=>{parentEditor.update((()=>{const node=(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$getNodeByKey)(lexicalNode.getKey());node.selectNext(),node.remove()}))}}(),content=getContent(mdastNode),[rootEditor]=_index_js__WEBPACK_IMPORTED_MODULE_7__.vY.useEmitterValues("rootEditor"),[importVisitors,exportVisitors,usedLexicalNodes,jsxComponentDescriptors,jsxIsAvailable,nestedEditorChildren]=_index_js__WEBPACK_IMPORTED_MODULE_7__.vY.useEmitterValues("importVisitors","exportVisitors","usedLexicalNodes","jsxComponentDescriptors","jsxIsAvailable","nestedEditorChildren"),setEditorInFocus=_index_js__WEBPACK_IMPORTED_MODULE_7__.vY.usePublisher("editorInFocus"),[editor]=react__WEBPACK_IMPORTED_MODULE_1__.useState((()=>(0,lexical__WEBPACK_IMPORTED_MODULE_0__.createEditor)({nodes:usedLexicalNodes,theme:_styles_lexicalTheme_js__WEBPACK_IMPORTED_MODULE_8__.c})));return react__WEBPACK_IMPORTED_MODULE_1__.useEffect((()=>{null==focusEmitter||focusEmitter.subscribe((()=>{editor.focus()}))}),[editor,focusEmitter]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect((()=>{editor.update((()=>{(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$getRoot)().clear();let theContent=content;block?0===theContent.length&&(theContent=[{type:"paragraph",children:[]}]):theContent=[{type:"paragraph",children:content}],(0,_importMarkdownToLexical_js__WEBPACK_IMPORTED_MODULE_9__.K)({root:(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$getRoot)(),mdastRoot:{type:"root",children:theContent},visitors:importVisitors})}))}),[editor,block,importVisitors]),react__WEBPACK_IMPORTED_MODULE_1__.useEffect((()=>{function updateParentNode(){editor.getEditorState().read((()=>{const mdast=(0,_exportMarkdownFromLexical_js__WEBPACK_IMPORTED_MODULE_10__.T)({root:(0,lexical__WEBPACK_IMPORTED_MODULE_0__.$getRoot)(),visitors:exportVisitors,jsxComponentDescriptors,jsxIsAvailable}),content2=block?mdast.children:mdast.children[0].children;updateMdastNode(getUpdatedMdastNode(structuredClone(mdastNode),content2))}))}return(0,_lexical_utils__WEBPACK_IMPORTED_MODULE_6__.mergeRegister)(editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_0__.BLUR_COMMAND,(payload=>{const relatedTarget=payload.relatedTarget;return!(0,_utils_isPartOftheEditorUI_js__WEBPACK_IMPORTED_MODULE_11__.s)(relatedTarget,rootEditor.getRootElement())&&(updateParentNode(),setEditorInFocus(null),!0)}),lexical__WEBPACK_IMPORTED_MODULE_0__.COMMAND_PRIORITY_EDITOR),editor.registerCommand(_index_js__WEBPACK_IMPORTED_MODULE_7__.g8,(()=>(updateParentNode(),!0)),lexical__WEBPACK_IMPORTED_MODULE_0__.COMMAND_PRIORITY_EDITOR),editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_0__.SELECTION_CHANGE_COMMAND,(()=>(setEditorInFocus({editorType:"lexical",rootNode:lexicalNode}),!1)),lexical__WEBPACK_IMPORTED_MODULE_0__.COMMAND_PRIORITY_HIGH),editor.registerCommand(lexical__WEBPACK_IMPORTED_MODULE_0__.KEY_BACKSPACE_COMMAND,((_,editor2)=>{const editorElement=editor2.getRootElement();return"\n"===(null==editorElement?void 0:editorElement.innerText)&&(removeNode(),!0)}),lexical__WEBPACK_IMPORTED_MODULE_0__.COMMAND_PRIORITY_CRITICAL))}),[block,editor,exportVisitors,getUpdatedMdastNode,jsxComponentDescriptors,jsxIsAvailable,lexicalNode,mdastNode,removeNode,setEditorInFocus,updateMdastNode,rootEditor]),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_lexical_react_LexicalNestedComposer_js__WEBPACK_IMPORTED_MODULE_4__.LexicalNestedComposer,{initialEditor:editor},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_lexical_react_LexicalRichTextPlugin_js__WEBPACK_IMPORTED_MODULE_5__.RichTextPlugin,{contentEditable:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_lexical_react_LexicalContentEditable_js__WEBPACK_IMPORTED_MODULE_2__.ContentEditable,{...contentEditableProps,className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_12__.ZP.nestedEditor}),placeholder:null,ErrorBoundary:_lexical_react_LexicalErrorBoundary_js__WEBPACK_IMPORTED_MODULE_3___default()}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_SharedHistoryPlugin_js__WEBPACK_IMPORTED_MODULE_13__.S,null),nestedEditorChildren.map(((Child,index)=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(Child,{key:index}))))}},"./node_modules/@mdxeditor/editor/dist/plugins/core/SharedHistoryPlugin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>SharedHistoryPlugin});var _lexical_react_LexicalHistoryPlugin_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@lexical/react/LexicalHistoryPlugin.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js");const SharedHistoryPlugin=()=>{const[historyState]=_index_js__WEBPACK_IMPORTED_MODULE_2__.vY.useEmitterValues("historyState");return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_lexical_react_LexicalHistoryPlugin_js__WEBPACK_IMPORTED_MODULE_0__.HistoryPlugin,{externalHistoryState:historyState})}},"./node_modules/@mdxeditor/editor/dist/plugins/core/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g8:()=>NESTED_EDITOR_UPDATED_COMMAND,m6:()=>corePlugin,vY:()=>corePluginHooks,Wo:()=>coreSystem});var LexicalHistoryPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalHistoryPlugin.js"),LexicalRichText=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.js"),LexicalSelection=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js"),LexicalUtils=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),exportMarkdownFromLexical=__webpack_require__("./node_modules/@mdxeditor/editor/dist/exportMarkdownFromLexical.js"),importMarkdownToLexical=__webpack_require__("./node_modules/@mdxeditor/editor/dist/importMarkdownToLexical.js");const LexicalLinebreakVisitor={testLexicalNode:Lexical.$isLineBreakNode,visitLexicalNode:({mdastParent,actions})=>{actions.appendToParent(mdastParent,{type:"text",value:"\n"})}},LexicalParagraphVisitor={testLexicalNode:Lexical.$isParagraphNode,visitLexicalNode:({actions})=>{actions.addAndStepInto("paragraph")}},LexicalRootVisitor={testLexicalNode:Lexical.$isRootNode,visitLexicalNode:({actions})=>{actions.addAndStepInto("root")}};var FormatConstants=__webpack_require__("./node_modules/@mdxeditor/editor/dist/FormatConstants.js");function isMdastText(mdastNode){return"text"===mdastNode.type}const LexicalTextVisitor={shouldJoin:(prevNode,currentNode)=>["text","emphasis","strong","mdxJsxTextElement"].includes(prevNode.type)&&prevNode.type===currentNode.type,join:(prevNode,currentNode)=>isMdastText(prevNode)&&isMdastText(currentNode)?{type:"text",value:prevNode.value+currentNode.value}:{...prevNode,children:[...prevNode.children,...currentNode.children]},testLexicalNode:Lexical.$isTextNode,visitLexicalNode:({lexicalNode,mdastParent,actions})=>{const previousSibling=lexicalNode.getPreviousSibling(),prevFormat=(0,Lexical.$isTextNode)(previousSibling)?previousSibling.getFormat():0,textContent=lexicalNode.getTextContent(),format=lexicalNode.getFormat()??0;if(format&FormatConstants.pQ)return void actions.addAndStepInto("inlineCode",{value:textContent});let localParentNode=mdastParent;prevFormat&format&FormatConstants.UW&&(localParentNode=actions.appendToParent(localParentNode,{type:"emphasis",children:[]})),prevFormat&format&FormatConstants.Dh&&(localParentNode=actions.appendToParent(localParentNode,{type:"strong",children:[]})),prevFormat&format&FormatConstants.A8&&(localParentNode=actions.appendToParent(localParentNode,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),format&FormatConstants.UW&&!(prevFormat&FormatConstants.UW)&&(localParentNode=actions.appendToParent(localParentNode,{type:"emphasis",children:[]})),format&FormatConstants.Dh&&!(prevFormat&FormatConstants.Dh)&&(localParentNode=actions.appendToParent(localParentNode,{type:"strong",children:[]})),format&FormatConstants.A8&&!(prevFormat&FormatConstants.A8)&&(localParentNode=actions.appendToParent(localParentNode,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),actions.appendToParent(localParentNode,{type:"text",value:textContent})}};function isOpeningUnderlineNode(node){return"html"===node.type&&"<u>"===node.value}function isClosingUnderlineNode(node){return"html"===node.type&&"</u>"===node.value}function isJsxUnderlineNode(node){return"mdxJsxTextElement"===node.type&&"u"===node.name}const MdastFormattingVisitor={testNode:mdastNode=>"emphasis"===mdastNode.type||"strong"===mdastNode.type||isJsxUnderlineNode(mdastNode)||isOpeningUnderlineNode(mdastNode)||isClosingUnderlineNode(mdastNode),visitNode({mdastNode,lexicalParent,actions,mdastParent}){isOpeningUnderlineNode(mdastNode)?actions.addFormatting(FormatConstants.A8,mdastParent):isClosingUnderlineNode(mdastNode)?actions.removeFormatting(FormatConstants.A8,mdastParent):("emphasis"===mdastNode.type?actions.addFormatting(FormatConstants.UW):"strong"===mdastNode.type?actions.addFormatting(FormatConstants.Dh):isJsxUnderlineNode(mdastNode)&&actions.addFormatting(FormatConstants.A8),actions.visitChildren(mdastNode,lexicalParent))}};function isOpeningCodeNode(node){return"html"===node.type&&"<code>"===node.value}function isClosingCodeNode(node){return"html"===node.type&&"</code>"===node.value}const MdastInlineCodeVisitor={testNode:node=>"inlineCode"===node.type||isOpeningCodeNode(node)||isClosingCodeNode(node),visitNode({mdastNode,actions,mdastParent}){isOpeningCodeNode(mdastNode)?actions.addFormatting(FormatConstants.pQ,mdastParent):isClosingCodeNode(mdastNode)?actions.removeFormatting(FormatConstants.pQ,mdastParent):actions.addAndStepInto((0,Lexical.$createTextNode)(mdastNode.value).setFormat(FormatConstants.pQ))}},lexicalTypesThatShouldSkipParagraphs=["listitem","quote","admonition"],MdastParagraphVisitor={testNode:"paragraph",visitNode:function({mdastNode,lexicalParent,actions}){lexicalTypesThatShouldSkipParagraphs.includes(lexicalParent.getType())?actions.visitChildren(mdastNode,lexicalParent):actions.addAndStepInto((0,Lexical.$createParagraphNode)())}},MdastRootVisitor={testNode:"root",visitNode({actions,mdastNode,lexicalParent}){actions.visitChildren(mdastNode,lexicalParent)}},MdastTextVisitor={testNode:"text",visitNode({mdastNode,actions}){actions.addAndStepInto((0,Lexical.$createTextNode)(mdastNode.value).setFormat(actions.getParentFormatting()))}};var SharedHistoryPlugin=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/SharedHistoryPlugin.js"),fp=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/fp.js"),detectMac=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/detectMac.js");const MdastBreakVisitor={testNode:"break",visitNode:function({lexicalParent}){lexicalParent.append((0,Lexical.$createLineBreakNode)())}};var realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const NESTED_EDITOR_UPDATED_COMMAND=(0,Lexical.createCommand)("NESTED_EDITOR_UPDATED_COMMAND"),coreSystem=(0,realmFactory.By)((r=>{function createAppendNodeFor(node){const appendNode=r.node();return r.link(r.pipe(appendNode,r.o.withLatestFrom(node),r.o.map((([newValue,values])=>values.includes(newValue)?values:[...values,newValue]))),node),appendNode}const rootEditor=r.node(null),activeEditor=r.node(null,!0),contentEditableClassName=r.node(""),readOnly=r.node(!1),placeholder=r.node(""),autoFocus=r.node(!1),inFocus=r.node(!1,!0),currentFormat=r.node(0,!0),applyFormat=r.node(),currentSelection=r.node(null),activeEditorSubscriptions=r.node([]),rootEditorSubscriptions=r.node([]),editorInFocus=r.node(null),onBlur=r.node(),rebind=()=>r.o.scan(((teardowns,[subs,activeEditorValue])=>(teardowns.forEach((teardown=>{if(!teardown)throw new Error("You have a subscription that does not return a teardown");teardown()})),activeEditorValue?subs.map((s=>s(activeEditorValue))):[])),[]);r.pipe(r.combine(activeEditorSubscriptions,activeEditor),rebind()),r.pipe(r.combine(rootEditorSubscriptions,rootEditor),rebind());const createRootEditorSubscription=createAppendNodeFor(rootEditorSubscriptions),createActiveEditorSubscription=createAppendNodeFor(activeEditorSubscriptions);function handleSelectionChange(){const selection=(0,Lexical.$getSelection)();(0,Lexical.$isRangeSelection)(selection)&&r.pubKeys({currentSelection:selection,currentFormat:selection.format})}r.pub(createRootEditorSubscription,(theRootEditor=>theRootEditor.registerCommand(Lexical.SELECTION_CHANGE_COMMAND,((_,theActiveEditor)=>(r.pubIn({[activeEditor.key]:theActiveEditor,[inFocus.key]:!0}),null===theActiveEditor._parentEditor&&theActiveEditor.getEditorState().read((()=>{r.pub(editorInFocus,{rootNode:(0,Lexical.$getRoot)(),editorType:"lexical"})})),handleSelectionChange(),!1)),Lexical.COMMAND_PRIORITY_CRITICAL))),r.pub(createRootEditorSubscription,(theRootEditor=>theRootEditor.registerUpdateListener((({dirtyElements,dirtyLeaves,editorState})=>{if(0===dirtyElements.size&&0===dirtyLeaves.size)return;let theNewMarkdownValue;editorState.read((()=>{theNewMarkdownValue=(0,exportMarkdownFromLexical.v)({root:(0,Lexical.$getRoot)(),visitors:r.getValue(exportVisitors),jsxComponentDescriptors:r.getValue(jsxComponentDescriptors),toMarkdownExtensions:r.getValue(toMarkdownExtensions),toMarkdownOptions:r.getValue(toMarkdownOptions),jsxIsAvailable:r.getValue(jsxIsAvailable)})})),r.pub(markdown,theNewMarkdownValue.trim())}))));const initialMarkdown=r.node(""),markdown=r.node("",!0);r.link(initialMarkdown,markdown);const importVisitors=r.node([]),syntaxExtensions=r.node([]),mdastExtensions=r.node([]),usedLexicalNodes=r.node([]),exportVisitors=r.node([]),toMarkdownExtensions=r.node([]),toMarkdownOptions=r.node({},!0),jsxIsAvailable=r.node(!1),jsxComponentDescriptors=r.node([]),editorRootElementRef=r.node(null),addLexicalNode=createAppendNodeFor(usedLexicalNodes),addImportVisitor=createAppendNodeFor(importVisitors),addSyntaxExtension=createAppendNodeFor(syntaxExtensions),addMdastExtension=createAppendNodeFor(mdastExtensions),addExportVisitor=createAppendNodeFor(exportVisitors),addToMarkdownExtension=createAppendNodeFor(toMarkdownExtensions),setMarkdown=r.node();r.sub(r.pipe(setMarkdown,r.o.withLatestFrom(rootEditor,importVisitors,mdastExtensions,syntaxExtensions,inFocus)),(([theNewMarkdownValue,editor,importVisitors2,mdastExtensions2,syntaxExtensions2,inFocus2])=>{null==editor||editor.update((()=>{(0,Lexical.$getRoot)().clear(),(0,importMarkdownToLexical.U)({root:(0,Lexical.$getRoot)(),visitors:importVisitors2,mdastExtensions:mdastExtensions2,markdown:theNewMarkdownValue,syntaxExtensions:syntaxExtensions2}),inFocus2||(0,Lexical.$setSelection)(null)}))}));const initialRootEditorState=r.node((theRootEditor=>{r.pub(rootEditor,theRootEditor),r.pub(activeEditor,theRootEditor),(0,importMarkdownToLexical.U)({root:(0,Lexical.$getRoot)(),visitors:r.getValue(importVisitors),mdastExtensions:r.getValue(mdastExtensions),markdown:r.getValue(initialMarkdown),syntaxExtensions:r.getValue(syntaxExtensions)});const autoFocusValue=r.getValue(autoFocus);if(autoFocusValue){if(!0===autoFocusValue)return void setTimeout((()=>theRootEditor.focus(fp.ZT,{defaultSelection:"rootStart"})));setTimeout((()=>theRootEditor.focus(fp.ZT,{defaultSelection:autoFocusValue.defaultSelection??"rootStart"})))}}));r.pub(createActiveEditorSubscription,(editor=>editor.registerUpdateListener((({editorState})=>{editorState.read((()=>{handleSelectionChange()}))})))),r.pub(createActiveEditorSubscription,(theEditor=>theEditor.registerCommand(Lexical.BLUR_COMMAND,(payload=>{var _a;const theRootEditor=r.getValue(rootEditor);if(theRootEditor){!(null==(_a=theRootEditor.getRootElement())?void 0:_a.contains(payload.relatedTarget))&&r.pubIn({[inFocus.key]:!1,[onBlur.key]:payload})}return!1}),Lexical.COMMAND_PRIORITY_CRITICAL))),r.pub(createRootEditorSubscription,(theRootEditor=>theRootEditor.registerCommand(Lexical.KEY_DOWN_COMMAND,(event=>{const{keyCode,ctrlKey,metaKey}=event;if(65===keyCode&&(0,detectMac.ZA)(metaKey,ctrlKey)){let shouldOverride=!1;if(theRootEditor.getEditorState().read((()=>{shouldOverride=(0,Lexical.$isDecoratorNode)((0,Lexical.$getRoot)().getFirstChild())||(0,Lexical.$isDecoratorNode)((0,Lexical.$getRoot)().getLastChild())})),shouldOverride)return event.preventDefault(),event.stopImmediatePropagation(),theRootEditor.update((()=>{var _a;const rootElement=theRootEditor.getRootElement();null==(_a=window.getSelection())||_a.selectAllChildren(rootElement),rootElement.focus({preventScroll:!0})})),!0}return!1}),Lexical.COMMAND_PRIORITY_CRITICAL)));const composerChildren=r.node([]),addComposerChild=createAppendNodeFor(composerChildren),topAreaChildren=r.node([]),addTopAreaChild=createAppendNodeFor(topAreaChildren),editorWrappers=r.node([]),addEditorWrapper=createAppendNodeFor(editorWrappers),nestedEditorChildren=r.node([]),addNestedEditorChild=createAppendNodeFor(nestedEditorChildren),historyState=r.node((0,LexicalHistoryPlugin.createEmptyHistoryState)());r.sub(r.pipe(applyFormat,r.o.withLatestFrom(activeEditor)),(([format,theEditor])=>{null==theEditor||theEditor.dispatchCommand(Lexical.FORMAT_TEXT_COMMAND,format)}));const currentBlockType=r.node(""),applyBlockType=r.node();r.sub(r.pipe(currentSelection,r.o.withLatestFrom(activeEditor)),(([selection,theEditor])=>{if(!selection||!theEditor)return;const anchorNode=selection.anchor.getNode();let element="root"===anchorNode.getKey()?anchorNode:(0,LexicalUtils.$findMatchingParent)(anchorNode,(e=>{const parent=e.getParent();return null!==parent&&(0,Lexical.$isRootOrShadowRoot)(parent)}));null===element&&(element=anchorNode.getTopLevelElementOrThrow());const elementKey=element.getKey();if(null!==theEditor.getElementByKey(elementKey)){const blockType=(0,LexicalRichText.$isHeadingNode)(element)?element.getTag():element.getType();r.pub(currentBlockType,blockType)}}));const convertSelectionToNode=r.node();r.sub(r.pipe(convertSelectionToNode,r.o.withLatestFrom(activeEditor)),(([factory,editor])=>{null==editor||editor.update((()=>{const selection=(0,Lexical.$getSelection)();(0,Lexical.$isRangeSelection)(selection)&&((0,LexicalSelection.$setBlocksType)(selection,factory),setTimeout((()=>{editor.focus()})))}))}));const insertDecoratorNode=r.node();return r.sub(r.pipe(insertDecoratorNode,r.o.withLatestFrom(activeEditor)),(([nodeFactory,theEditor])=>{null==theEditor||theEditor.focus((()=>{theEditor.getEditorState().read((()=>{const selection=(0,Lexical.$getSelection)();if((0,Lexical.$isRangeSelection)(selection)){null!==selection.focus.getNode()&&theEditor.update((()=>{const node=nodeFactory();node.isInline()?((0,Lexical.$insertNodes)([node]),(0,Lexical.$isRootOrShadowRoot)(node.getParentOrThrow())&&(0,LexicalUtils.$wrapNodeInElement)(node,Lexical.$createParagraphNode).selectEnd()):(0,LexicalUtils.$insertNodeToNearestRoot)(node),Object.hasOwn(node,"select")&&"function"==typeof node.select&&setTimeout((()=>node.select()))}))}}))}),{defaultSelection:"rootEnd"})})),r.sub(r.pipe(readOnly,r.o.withLatestFrom(rootEditor)),(([readOnly2,theRootEditor])=>{null==theRootEditor||theRootEditor.setEditable(!readOnly2)})),{activeEditor,inFocus,historyState,currentSelection,jsxIsAvailable,jsxComponentDescriptors,initialRootEditorState,rootEditor,createRootEditorSubscription,createActiveEditorSubscription,importVisitors,syntaxExtensions,mdastExtensions,usedLexicalNodes,addImportVisitor,addLexicalNode,addSyntaxExtension,addMdastExtension,toMarkdownExtensions,toMarkdownOptions,addToMarkdownExtension,addExportVisitor,exportVisitors,initialMarkdown,setMarkdown,markdown,editorRootElementRef,contentEditableClassName,placeholder,autoFocus,readOnly,composerChildren,addComposerChild,topAreaChildren,addTopAreaChild,nestedEditorChildren,addNestedEditorChild,editorWrappers,addEditorWrapper,currentFormat,editorInFocus,applyFormat,currentBlockType,applyBlockType,convertSelectionToNode,insertDecoratorNode,onBlur}}),[]),[corePlugin,corePluginHooks]=(0,react.nq)({id:"core",systemSpec:coreSystem,applyParamsToSystem(realm,params){realm.pubKeys({contentEditableClassName:params.contentEditableClassName,toMarkdownOptions:params.toMarkdownOptions,autoFocus:params.autoFocus,placeholder:params.placeholder,readOnly:params.readOnly}),realm.singletonSubKey("markdown",params.onChange),realm.singletonSubKey("onBlur",params.onBlur)},init(realm,params){realm.pubKey("initialMarkdown",params.initialMarkdown.trim()),realm.pubKey("addImportVisitor",MdastRootVisitor),realm.pubKey("addImportVisitor",MdastParagraphVisitor),realm.pubKey("addImportVisitor",MdastTextVisitor),realm.pubKey("addImportVisitor",MdastFormattingVisitor),realm.pubKey("addImportVisitor",MdastInlineCodeVisitor),realm.pubKey("addImportVisitor",MdastBreakVisitor),realm.pubKey("addLexicalNode",Lexical.ParagraphNode),realm.pubKey("addLexicalNode",Lexical.TextNode),realm.pubKey("addExportVisitor",LexicalRootVisitor),realm.pubKey("addExportVisitor",LexicalParagraphVisitor),realm.pubKey("addExportVisitor",LexicalTextVisitor),realm.pubKey("addExportVisitor",LexicalLinebreakVisitor),realm.pubKey("addComposerChild",SharedHistoryPlugin.S)}})},"./node_modules/@mdxeditor/editor/dist/plugins/directives/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{we:()=>directivesPlugin,zM:()=>directivesPluginHooks});var plugins_core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),micromark_factory_space=__webpack_require__("./node_modules/micromark-factory-space/index.js"),micromark_util_character=__webpack_require__("./node_modules/micromark-util-character/index.js"),micromark_factory_whitespace=__webpack_require__("./node_modules/micromark-factory-whitespace/index.js");function factoryAttributes(effects,ok,nok,attributesType,attributesMarkerType,attributeType,attributeIdType,attributeClassType,attributeNameType,attributeInitializerType,attributeValueLiteralType,attributeValueType,attributeValueMarker,attributeValueData,disallowEol){let type,marker;return function start(code){return effects.enter(attributesType),effects.enter(attributesMarkerType),effects.consume(code),effects.exit(attributesMarkerType),between};function between(code){return 35===code?(type=attributeIdType,shortcutStart(code)):46===code?(type=attributeClassType,shortcutStart(code)):58===code||95===code||(0,micromark_util_character.jv)(code)?(effects.enter(attributeType),effects.enter(attributeNameType),effects.consume(code),name):disallowEol&&(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,between,"whitespace")(code):!disallowEol&&(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,between)(code):end(code)}function shortcutStart(code){return effects.enter(attributeType),effects.enter(type),effects.enter(type+"Marker"),effects.consume(code),effects.exit(type+"Marker"),shortcutStartAfter}function shortcutStartAfter(code){return null===code||34===code||35===code||39===code||46===code||60===code||61===code||62===code||96===code||125===code||(0,micromark_util_character.z3)(code)?nok(code):(effects.enter(type+"Value"),effects.consume(code),shortcut)}function shortcut(code){return null===code||34===code||39===code||60===code||61===code||62===code||96===code?nok(code):35===code||46===code||125===code||(0,micromark_util_character.z3)(code)?(effects.exit(type+"Value"),effects.exit(type),effects.exit(attributeType),between(code)):(effects.consume(code),shortcut)}function name(code){return 45===code||46===code||58===code||95===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),name):(effects.exit(attributeNameType),disallowEol&&(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,nameAfter,"whitespace")(code):!disallowEol&&(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,nameAfter)(code):nameAfter(code))}function nameAfter(code){return 61===code?(effects.enter(attributeInitializerType),effects.consume(code),effects.exit(attributeInitializerType),valueBefore):(effects.exit(attributeType),between(code))}function valueBefore(code){return null===code||60===code||61===code||62===code||96===code||125===code||disallowEol&&(0,micromark_util_character.Ch)(code)?nok(code):34===code||39===code?(effects.enter(attributeValueLiteralType),effects.enter(attributeValueMarker),effects.consume(code),effects.exit(attributeValueMarker),marker=code,valueQuotedStart):disallowEol&&(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,valueBefore,"whitespace")(code):!disallowEol&&(0,micromark_util_character.z3)(code)?(0,micromark_factory_whitespace.S)(effects,valueBefore)(code):(effects.enter(attributeValueType),effects.enter(attributeValueData),effects.consume(code),marker=void 0,valueUnquoted)}function valueUnquoted(code){return null===code||34===code||39===code||60===code||61===code||62===code||96===code?nok(code):125===code||(0,micromark_util_character.z3)(code)?(effects.exit(attributeValueData),effects.exit(attributeValueType),effects.exit(attributeType),between(code)):(effects.consume(code),valueUnquoted)}function valueQuotedStart(code){return code===marker?(effects.enter(attributeValueMarker),effects.consume(code),effects.exit(attributeValueMarker),effects.exit(attributeValueLiteralType),effects.exit(attributeType),valueQuotedAfter):(effects.enter(attributeValueType),valueQuotedBetween(code))}function valueQuotedBetween(code){return code===marker?(effects.exit(attributeValueType),valueQuotedStart(code)):null===code?nok(code):(0,micromark_util_character.Ch)(code)?disallowEol?nok(code):(0,micromark_factory_whitespace.S)(effects,valueQuotedBetween)(code):(effects.enter(attributeValueData),effects.consume(code),valueQuoted)}function valueQuoted(code){return code===marker||null===code||(0,micromark_util_character.Ch)(code)?(effects.exit(attributeValueData),valueQuotedBetween(code)):(effects.consume(code),valueQuoted)}function valueQuotedAfter(code){return 125===code||(0,micromark_util_character.z3)(code)?between(code):end(code)}function end(code){return 125===code?(effects.enter(attributesMarkerType),effects.consume(code),effects.exit(attributesMarkerType),effects.exit(attributesType),ok):nok(code)}}function factoryLabel(effects,ok,nok,type,markerType,stringType,disallowEol){let previous,size=0,balance=0;return function start(code){return effects.enter(type),effects.enter(markerType),effects.consume(code),effects.exit(markerType),afterStart};function afterStart(code){return 93===code?(effects.enter(markerType),effects.consume(code),effects.exit(markerType),effects.exit(type),ok):(effects.enter(stringType),lineStart(code))}function lineStart(code){if(93===code&&!balance)return atClosingBrace(code);const token=effects.enter("chunkText",{contentType:"text",previous});return previous&&(previous.next=token),previous=token,data(code)}function data(code){return null===code||size>999||91===code&&++balance>32?nok(code):93!==code||balance--?(0,micromark_util_character.Ch)(code)?disallowEol?nok(code):(effects.consume(code),effects.exit("chunkText"),lineStart):(effects.consume(code),92===code?dataEscape:data):(effects.exit("chunkText"),atClosingBrace(code))}function dataEscape(code){return 91===code||92===code||93===code?(effects.consume(code),size++,data):data(code)}function atClosingBrace(code){return effects.exit(stringType),effects.enter(markerType),effects.consume(code),effects.exit(markerType),effects.exit(type),ok}}function factoryName(effects,ok,nok,type){const self=this;return function start(code){if((0,micromark_util_character.jv)(code))return effects.enter(type),effects.consume(code),name;return nok(code)};function name(code){return 45===code||95===code||(0,micromark_util_character.H$)(code)?(effects.consume(code),name):(effects.exit(type),45===self.previous||95===self.previous?nok(code):ok(code))}}const directiveContainer={tokenize:function tokenizeDirectiveContainer(effects,ok,nok){const self=this,tail=self.events[self.events.length-1],initialSize=tail&&"linePrefix"===tail[1].type?tail[2].sliceSerialize(tail[1],!0).length:0;let previous,sizeOpen=0;return function start(code){return effects.enter("directiveContainer"),effects.enter("directiveContainerFence"),effects.enter("directiveContainerSequence"),sequenceOpen(code)};function sequenceOpen(code){return 58===code?(effects.consume(code),sizeOpen++,sequenceOpen):sizeOpen<3?nok(code):(effects.exit("directiveContainerSequence"),factoryName.call(self,effects,afterName,nok,"directiveContainerName")(code))}function afterName(code){return 91===code?effects.attempt(label,afterLabel,afterLabel)(code):afterLabel(code)}function afterLabel(code){return 123===code?effects.attempt(attributes,afterAttributes,afterAttributes)(code):afterAttributes(code)}function afterAttributes(code){return(0,micromark_factory_space.f)(effects,openAfter,"whitespace")(code)}function openAfter(code){return effects.exit("directiveContainerFence"),null===code?afterOpening(code):(0,micromark_util_character.Ch)(code)?self.interrupt?ok(code):effects.attempt(nonLazyLine,contentStart,afterOpening)(code):nok(code)}function afterOpening(code){return effects.exit("directiveContainer"),ok(code)}function contentStart(code){return null===code?(effects.exit("directiveContainer"),ok(code)):(effects.enter("directiveContainerContent"),lineStart(code))}function lineStart(code){return null===code?after(code):effects.attempt({tokenize:tokenizeClosingFence,partial:!0},after,initialSize?(0,micromark_factory_space.f)(effects,chunkStart,"linePrefix",initialSize+1):chunkStart)(code)}function chunkStart(code){if(null===code)return after(code);const token=effects.enter("chunkDocument",{contentType:"document",previous});return previous&&(previous.next=token),previous=token,contentContinue(code)}function contentContinue(code){if(null===code){const t=effects.exit("chunkDocument");return self.parser.lazy[t.start.line]=!1,after(code)}return(0,micromark_util_character.Ch)(code)?effects.check(nonLazyLine,nonLazyLineAfter,lineAfter)(code):(effects.consume(code),contentContinue)}function nonLazyLineAfter(code){effects.consume(code);const t=effects.exit("chunkDocument");return self.parser.lazy[t.start.line]=!1,lineStart}function lineAfter(code){const t=effects.exit("chunkDocument");return self.parser.lazy[t.start.line]=!1,after(code)}function after(code){return effects.exit("directiveContainerContent"),effects.exit("directiveContainer"),ok(code)}function tokenizeClosingFence(effects,ok,nok){let size=0;return(0,micromark_factory_space.f)(effects,(function closingPrefixAfter(code){return effects.enter("directiveContainerFence"),effects.enter("directiveContainerSequence"),closingSequence(code)}),"linePrefix",4);function closingSequence(code){return 58===code?(effects.consume(code),size++,closingSequence):size<sizeOpen?nok(code):(effects.exit("directiveContainerSequence"),(0,micromark_factory_space.f)(effects,closingSequenceEnd,"whitespace")(code))}function closingSequenceEnd(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("directiveContainerFence"),ok(code)):nok(code)}}},concrete:!0},label={tokenize:function tokenizeLabel(effects,ok,nok){return factoryLabel(effects,ok,nok,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)},partial:!0},attributes={tokenize:function tokenizeAttributes(effects,ok,nok){return factoryAttributes(effects,ok,nok,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)},partial:!0},nonLazyLine={tokenize:function tokenizeNonLazyLine(effects,ok,nok){const self=this;return function start(code){return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),lineStart};function lineStart(code){return self.parser.lazy[self.now().line]?nok(code):ok(code)}},partial:!0};const directiveLeaf={tokenize:function tokenizeDirectiveLeaf(effects,ok,nok){const self=this;return function start(code){return effects.enter("directiveLeaf"),effects.enter("directiveLeafSequence"),effects.consume(code),inStart};function inStart(code){return 58===code?(effects.consume(code),effects.exit("directiveLeafSequence"),factoryName.call(self,effects,afterName,nok,"directiveLeafName")):nok(code)}function afterName(code){return 91===code?effects.attempt(directive_leaf_label,afterLabel,afterLabel)(code):afterLabel(code)}function afterLabel(code){return 123===code?effects.attempt(directive_leaf_attributes,afterAttributes,afterAttributes)(code):afterAttributes(code)}function afterAttributes(code){return(0,micromark_factory_space.f)(effects,end,"whitespace")(code)}function end(code){return null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("directiveLeaf"),ok(code)):nok(code)}}},directive_leaf_label={tokenize:function directive_leaf_tokenizeLabel(effects,ok,nok){return factoryLabel(effects,ok,nok,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)},partial:!0},directive_leaf_attributes={tokenize:function directive_leaf_tokenizeAttributes(effects,ok,nok){return factoryAttributes(effects,ok,nok,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)},partial:!0};const directiveText={tokenize:function tokenizeDirectiveText(effects,ok,nok){const self=this;return function start(code){return effects.enter("directiveText"),effects.enter("directiveTextMarker"),effects.consume(code),effects.exit("directiveTextMarker"),factoryName.call(self,effects,afterName,nok,"directiveTextName")};function afterName(code){return 58===code?nok(code):91===code?effects.attempt(directive_text_label,afterLabel,afterLabel)(code):afterLabel(code)}function afterLabel(code){return 123===code?effects.attempt(directive_text_attributes,afterAttributes,afterAttributes)(code):afterAttributes(code)}function afterAttributes(code){return effects.exit("directiveText"),ok(code)}},previous:function previous(code){return 58!==code||"characterEscape"===this.events[this.events.length-1][1].type}},directive_text_label={tokenize:function directive_text_tokenizeLabel(effects,ok,nok){return factoryLabel(effects,ok,nok,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")},partial:!0},directive_text_attributes={tokenize:function directive_text_tokenizeAttributes(effects,ok,nok){return factoryAttributes(effects,ok,nok,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")},partial:!0};const characterEntitiesLegacy=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],characterReferenceInvalid={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function isDecimal(character){const code="string"==typeof character?character.charCodeAt(0):character;return code>=48&&code<=57}function isHexadecimal(character){const code="string"==typeof character?character.charCodeAt(0):character;return code>=97&&code<=102||code>=65&&code<=70||code>=48&&code<=57}function isAlphanumerical(character){return function isAlphabetical(character){const code="string"==typeof character?character.charCodeAt(0):character;return code>=97&&code<=122||code>=65&&code<=90}(character)||function is_decimal_isDecimal(character){const code="string"==typeof character?character.charCodeAt(0):character;return code>=48&&code<=57}(character)}var index_dom=__webpack_require__("./node_modules/decode-named-character-reference/index.dom.js");const fromCharCode=String.fromCharCode,messages=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function parseEntities(value,options={}){const additional="string"==typeof options.additional?options.additional.charCodeAt(0):options.additional,result=[];let point,indent,index=0,lines=-1,queue="";options.position&&("start"in options.position||"indent"in options.position?(indent=options.position.indent,point=options.position.start):point=options.position);let character,line=(point?point.line:0)||1,column=(point?point.column:0)||1,previous=now();for(index--;++index<=value.length;)if(10===character&&(column=(indent?indent[lines]:0)||1),character=value.charCodeAt(index),38===character){const following=value.charCodeAt(index+1);if(9===following||10===following||12===following||32===following||38===following||60===following||Number.isNaN(following)||additional&&following===additional){queue+=fromCharCode(character),column++;continue}const start=index+1;let type,begin=start,end=start;if(35===following){end=++begin;const following=value.charCodeAt(end);88===following||120===following?(type="hexadecimal",end=++begin):type="decimal"}else type="named";let characterReferenceCharacters="",characterReference="",characters="";const test="named"===type?isAlphanumerical:"decimal"===type?isDecimal:isHexadecimal;for(end--;++end<=value.length;){const following=value.charCodeAt(end);if(!test(following))break;characters+=fromCharCode(following),"named"===type&&characterEntitiesLegacy.includes(characters)&&(characterReferenceCharacters=characters,characterReference=(0,index_dom.T)(characters))}let terminated=59===value.charCodeAt(end);if(terminated){end++;const namedReference="named"===type&&(0,index_dom.T)(characters);namedReference&&(characterReferenceCharacters=characters,characterReference=namedReference)}let diff=1+end-start,reference="";if(terminated||!1!==options.nonTerminated)if(characters)if("named"===type){if(terminated&&!characterReference)warning(5,1);else if(characterReferenceCharacters!==characters&&(end=begin+characterReferenceCharacters.length,diff=1+end-begin,terminated=!1),!terminated){const reason=characterReferenceCharacters?1:3;if(options.attribute){const following=value.charCodeAt(end);61===following?(warning(reason,diff),characterReference=""):isAlphanumerical(following)?characterReference="":warning(reason,diff)}else warning(reason,diff)}reference=characterReference}else{terminated||warning(2,diff);let referenceCode=Number.parseInt(characters,"hexadecimal"===type?16:10);if((code=referenceCode)>=55296&&code<=57343||code>1114111)warning(7,diff),reference=fromCharCode(65533);else if(referenceCode in characterReferenceInvalid)warning(6,diff),reference=characterReferenceInvalid[referenceCode];else{let output="";disallowed(referenceCode)&&warning(6,diff),referenceCode>65535&&(referenceCode-=65536,output+=fromCharCode(referenceCode>>>10|55296),referenceCode=56320|1023&referenceCode),reference=output+fromCharCode(referenceCode)}}else"named"!==type&&warning(4,diff);else;if(reference){flush(),previous=now(),index=end-1,column+=end-start+1,result.push(reference);const next=now();next.offset++,options.reference&&options.reference.call(options.referenceContext,reference,{start:previous,end:next},value.slice(start-1,end)),previous=next}else characters=value.slice(start-1,end),queue+=characters,column+=characters.length,index=end-1}else 10===character&&(line++,lines++,column=0),Number.isNaN(character)?flush():(queue+=fromCharCode(character),column++);var code;return result.join("");function now(){return{line,column,offset:index+((point?point.offset:0)||0)}}function warning(code,offset){let position;options.warning&&(position=now(),position.column+=offset,position.offset+=offset,options.warning.call(options.warningContext,messages[code],position,code))}function flush(){queue&&(result.push(queue),options.text&&options.text.call(options.textContext,queue,{start:previous,end:now()}),queue="")}}function disallowed(code){return code>=1&&code<=8||11===code||code>=13&&code<=31||code>=127&&code<=159||code>=64976&&code<=65007||65535==(65535&code)||65534==(65535&code)}function core_core(value,options){return value=value.replace(options.subset?function charactersToExpression(subset){const groups=[];let index=-1;for(;++index<subset.length;)groups.push(subset[index].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+groups.join("|")+")","g")}(options.subset):/["&'<>`]/g,basic),options.subset||options.escapeOnly?value:value.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function surrogate(pair,index,all){return options.format(1024*(pair.charCodeAt(0)-55296)+pair.charCodeAt(1)-56320+65536,all.charCodeAt(index+2),options)})).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,basic);function basic(character,index,all){return options.format(character.charCodeAt(0),all.charCodeAt(index+1),options)}}function formatBasic(code){return"&#x"+code.toString(16).toUpperCase()+";"}var lib=__webpack_require__("./node_modules/unist-util-visit-parents/lib/index.js"),container_flow=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/container-flow.js"),container_phrasing=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/container-phrasing.js"),check_quote=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/check-quote.js"),track=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/track.js");const own={}.hasOwnProperty,shortcut=/^[^\t\n\r "#'.<=>`}]+$/;handleDirective.peek=function peekDirective(){return":"};const directiveFromMarkdown={canContainEols:["textDirective"],enter:{directiveContainer:function enterContainer(token){enter.call(this,"containerDirective",token)},directiveContainerAttributes:enterAttributes,directiveContainerLabel:function enterContainerLabel(token){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},token)},directiveLeaf:function enterLeaf(token){enter.call(this,"leafDirective",token)},directiveLeafAttributes:enterAttributes,directiveText:function enterText(token){enter.call(this,"textDirective",token)},directiveTextAttributes:enterAttributes},exit:{directiveContainer:exit,directiveContainerAttributeClassValue:exitAttributeClassValue,directiveContainerAttributeIdValue:exitAttributeIdValue,directiveContainerAttributeName:exitAttributeName,directiveContainerAttributeValue:exitAttributeValue,directiveContainerAttributes:exitAttributes,directiveContainerLabel:function exitContainerLabel(token){this.exit(token)},directiveContainerName:exitName,directiveLeaf:exit,directiveLeafAttributeClassValue:exitAttributeClassValue,directiveLeafAttributeIdValue:exitAttributeIdValue,directiveLeafAttributeName:exitAttributeName,directiveLeafAttributeValue:exitAttributeValue,directiveLeafAttributes:exitAttributes,directiveLeafName:exitName,directiveText:exit,directiveTextAttributeClassValue:exitAttributeClassValue,directiveTextAttributeIdValue:exitAttributeIdValue,directiveTextAttributeName:exitAttributeName,directiveTextAttributeValue:exitAttributeValue,directiveTextAttributes:exitAttributes,directiveTextName:exitName}},directiveToMarkdown={unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:"\n",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}],handlers:{containerDirective:handleDirective,leafDirective:handleDirective,textDirective:handleDirective}};function enter(type,token){this.enter({type,name:"",attributes:{},children:[]},token)}function exitName(token){this.stack[this.stack.length-1].name=this.sliceSerialize(token)}function enterAttributes(){this.setData("directiveAttributes",[]),this.buffer()}function exitAttributeIdValue(token){this.getData("directiveAttributes").push(["id",parseEntities(this.sliceSerialize(token),{attribute:!0})])}function exitAttributeClassValue(token){this.getData("directiveAttributes").push(["class",parseEntities(this.sliceSerialize(token),{attribute:!0})])}function exitAttributeValue(token){const list=this.getData("directiveAttributes");list[list.length-1][1]=parseEntities(this.sliceSerialize(token),{attribute:!0})}function exitAttributeName(token){this.getData("directiveAttributes").push([this.sliceSerialize(token),""])}function exitAttributes(){const list=this.getData("directiveAttributes"),cleaned={};let index=-1;for(;++index<list.length;){const attribute=list[index];"class"===attribute[0]&&cleaned.class?cleaned.class+=" "+attribute[1]:cleaned[attribute[0]]=attribute[1]}this.setData("directiveAttributes"),this.resume();this.stack[this.stack.length-1].attributes=cleaned}function exit(token){this.exit(token)}function handleDirective(node,_,state,safeOptions){const tracker=(0,track.j)(safeOptions),sequence=function fence(node){let size=0;"containerDirective"===node.type?((0,lib.S4)(node,(function(node,parents){if("containerDirective"===node.type){let index=parents.length,nesting=0;for(;index--;)"containerDirective"===parents[index].type&&nesting++;nesting>size&&(size=nesting)}})),size+=3):size="leafDirective"===node.type?2:1;return":".repeat(size)}(node),exit=state.enter(node.type);let label,value=tracker.move(sequence+(node.name||""));if("containerDirective"===node.type){const head=(node.children||[])[0];label=inlineDirectiveLabel(head)?head:void 0}else label=node;if(label&&label.children&&label.children.length>0){const exit=state.enter("label"),labelType=`${node.type}Label`,subexit=state.enter(labelType);value+=tracker.move("["),value+=tracker.move((0,container_phrasing.p)(label,state,{...tracker.current(),before:value,after:"]"})),value+=tracker.move("]"),subexit(),exit()}if(value+=tracker.move(function lib_attributes(node,state){const quote=(0,check_quote.l)(state),subset="textDirective"===node.type?[quote]:[quote,"\n","\r"],attrs=node.attributes||{},values=[];let classesFull,classes,id,key;for(key in attrs)if(own.call(attrs,key)&&void 0!==attrs[key]&&null!==attrs[key]){const value=String(attrs[key]);if("id"===key)id=shortcut.test(value)?"#"+value:quoted("id",value);else if("class"===key){const list=value.split(/[\t\n\r ]+/g),classesFullList=[],classesList=[];let index=-1;for(;++index<list.length;)(shortcut.test(list[index])?classesList:classesFullList).push(list[index]);classesFull=classesFullList.length>0?quoted("class",classesFullList.join(" ")):"",classes=classesList.length>0?"."+classesList.join("."):""}else values.push(quoted(key,value))}classesFull&&values.unshift(classesFull);classes&&values.unshift(classes);id&&values.unshift(id);return values.length>0?"{"+values.join(" ")+"}":"";function quoted(key,value){return key+(value?"="+quote+function stringifyEntitiesLight(value,options){return core_core(value,Object.assign({format:formatBasic},options))}(value,{subset})+quote:"")}}(node,state)),"containerDirective"===node.type){let shallow=node;inlineDirectiveLabel((node.children||[])[0])&&(shallow=Object.assign({},node,{children:node.children.slice(1)})),shallow&&shallow.children&&shallow.children.length>0&&(value+=tracker.move("\n"),value+=tracker.move((0,container_flow.K)(shallow,state,tracker.current()))),value+=tracker.move("\n"+sequence)}return exit(),value}function inlineDirectiveLabel(node){return Boolean(node&&"paragraph"===node.type&&node.data&&node.data.directiveLabel)}var react=__webpack_require__("./node_modules/react/index.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),NestedLexicalEditor=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/NestedLexicalEditor.js"),voidEmitter=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/voidEmitter.js"),__defProp=Object.defineProperty,__publicField=(obj,key,value)=>(((obj,key,value)=>{key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value})(obj,"symbol"!=typeof key?key+"":key,value),value);let GENERATION=0;class DirectiveNode extends Lexical.DecoratorNode{constructor(mdastNode,key){super(key),__publicField(this,"__mdastNode"),__publicField(this,"__focusEmitter",(0,voidEmitter.E)()),__publicField(this,"select",(()=>{this.__focusEmitter.publish()})),this.__mdastNode=mdastNode,this.generation=GENERATION++}static getType(){return"directive"}static clone(node){return new DirectiveNode(structuredClone(node.__mdastNode),node.__key)}static importJSON(serializedNode){return $createDirectiveNode(serializedNode.mdastNode)}getMdastNode(){return this.__mdastNode}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"directive",version:1}}createDOM(){return document.createElement("textDirective"===this.__mdastNode.type?"span":"div")}updateDOM(){return!1}setMdastNode(mdastNode){this.getWritable().__mdastNode=mdastNode}decorate(parentEditor,config){return react.createElement(DirectiveEditorContainer,{lexicalNode:this,mdastNode:this.getMdastNode(),parentEditor,config,focusEmitter:this.__focusEmitter})}isInline(){return"textDirective"===this.__mdastNode.type}isKeyboardSelectable(){return!0}}function DirectiveEditorContainer(props){const{mdastNode}=props,[directiveDescriptors]=directivesPluginHooks.useEmitterValues("directiveDescriptors"),descriptor=directiveDescriptors.find((descriptor2=>descriptor2.testNode(mdastNode)));if(!descriptor)throw new Error(`No descriptor found for directive ${mdastNode.name}`);const Editor=descriptor.Editor;return react.createElement(NestedLexicalEditor.Cr.Provider,{value:props},react.createElement(Editor,{descriptor,mdastNode,lexicalNode:props.lexicalNode,parentEditor:props.parentEditor}))}function $createDirectiveNode(mdastNode,key){return new DirectiveNode(mdastNode,key)}const DirectiveVisitor={testLexicalNode:function $isDirectiveNode(node){return node instanceof DirectiveNode},visitLexicalNode({actions,mdastParent,lexicalNode}){actions.appendToParent(mdastParent,lexicalNode.getMdastNode())}},DIRECTIVE_TYPES=["leafDirective","containerDirective","textDirective"],MdastDirectiveVisitor={testNode:node=>DIRECTIVE_TYPES.includes(node.type),visitNode({lexicalParent,mdastNode}){lexicalParent.append($createDirectiveNode(mdastNode))}};var realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),gurx_react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const directivesSystem=(0,realmFactory.By)(((r,[{insertDecoratorNode}])=>{const directiveDescriptors=r.node([]),insertDirective=r.node();return r.link(r.pipe(insertDirective,r.o.map((payload=>()=>$createDirectiveNode({children:[],...payload})))),insertDecoratorNode),{directiveDescriptors,insertDirective}}),[plugins_core.Wo]),[directivesPlugin,directivesPluginHooks]=(0,gurx_react.nq)({id:"directives",systemSpec:directivesSystem,applyParamsToSystem:(realm,params)=>{realm.pubKey("directiveDescriptors",(null==params?void 0:params.directiveDescriptors)||[])},init:(realm,_)=>{realm.pubKey("addMdastExtension",directiveFromMarkdown),realm.pubKey("addSyntaxExtension",function directive(){return{text:{58:directiveText},flow:{58:[directiveContainer,directiveLeaf]}}}()),realm.pubKey("addImportVisitor",MdastDirectiveVisitor),realm.pubKey("addLexicalNode",DirectiveNode),realm.pubKey("addExportVisitor",DirectiveVisitor),realm.pubKey("addToMarkdownExtension",directiveToMarkdown)}})},"./node_modules/@mdxeditor/editor/dist/plugins/headings/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{bB:()=>headingsPlugin,Cb:()=>headingsPluginHooks});var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),LexicalRichText=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.js");const MdastHeadingVisitor={testNode:"heading",visitNode:function({mdastNode,actions}){actions.addAndStepInto((0,LexicalRichText.$createHeadingNode)(`h${mdastNode.depth}`))}},LexicalHeadingVisitor={testLexicalNode:LexicalRichText.$isHeadingNode,visitLexicalNode:({lexicalNode,actions})=>{const depth=parseInt(lexicalNode.getTag()[1],10);actions.addAndStepInto("heading",{depth})}};var Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),detectMac=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/detectMac.js"),realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const FORMATTING_KEYS=[48,49,50,51,52,53,54],ALL_HEADING_LEVELS=[1,2,3,4,5,6],CODE_TO_HEADING_LEVEL_MAP={49:1,50:2,51:3,52:4,53:5,54:6},headingsSystem=(0,realmFactory.By)(((r,[{createRootEditorSubscription,convertSelectionToNode}])=>{const allowedHeadingLevels=r.node(ALL_HEADING_LEVELS);return r.pub(createRootEditorSubscription,(theRootEditor=>theRootEditor.registerCommand(Lexical.KEY_DOWN_COMMAND,(event=>{const{keyCode,ctrlKey,metaKey,altKey}=event;return!!(FORMATTING_KEYS.includes(keyCode)&&(0,detectMac.ZA)(metaKey,ctrlKey)&&altKey)&&(event.preventDefault(),theRootEditor.update((()=>{if(48===keyCode)r.pub(convertSelectionToNode,(()=>(0,Lexical.$createParagraphNode)()));else{const allowedHeadingLevelsValues=r.getValue(allowedHeadingLevels),requestedHeadingLevel=CODE_TO_HEADING_LEVEL_MAP[keyCode];allowedHeadingLevelsValues.includes(requestedHeadingLevel)||r.pub(convertSelectionToNode,(()=>(0,LexicalRichText.$createHeadingNode)(`h${requestedHeadingLevel}`)))}})),!0)}),Lexical.COMMAND_PRIORITY_LOW))),{allowedHeadingLevels}}),[core.Wo]),[headingsPlugin,headingsPluginHooks]=(0,react.nq)({id:"headings",systemSpec:headingsSystem,applyParamsToSystem(realm,params){realm.pubKey("allowedHeadingLevels",(null==params?void 0:params.allowedHeadingLevels)??ALL_HEADING_LEVELS)},init:realm=>{realm.pubKey("addImportVisitor",MdastHeadingVisitor),realm.pubKey("addLexicalNode",LexicalRichText.HeadingNode),realm.pubKey("addExportVisitor",LexicalHeadingVisitor)}})},"./node_modules/@mdxeditor/editor/dist/plugins/link-dialog/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>linkDialogPlugin,W:()=>linkDialogPluginHooks});var LexicalLink=__webpack_require__("./node_modules/@lexical/link/LexicalLink.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),detectMac=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/detectMac.js"),LexicalSelection=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.js");function getSelectionRectangle(editor){const selection=(0,Lexical.$getSelection)(),nativeSelection=window.getSelection(),activeElement=document.activeElement,rootElement=editor.getRootElement();if(null!==selection&&null!==nativeSelection&&null!==rootElement&&rootElement.contains(nativeSelection.anchorNode)&&editor.isEditable()){const domRange=nativeSelection.getRangeAt(0);let rect;if(nativeSelection.anchorNode===rootElement){let inner=rootElement;for(;null!=inner.firstElementChild;)inner=inner.firstElementChild;rect=inner.getBoundingClientRect()}else rect=domRange.getBoundingClientRect();return{top:Math.round(rect.top),left:Math.round(rect.left),width:Math.round(rect.width),height:Math.round(rect.height)}}return activeElement&&activeElement.className,null}var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),dist=__webpack_require__("./node_modules/@mdxeditor/editor/node_modules/@radix-ui/react-popover/dist/index.mjs"),react_tooltip_dist=__webpack_require__("./node_modules/@radix-ui/react-tooltip/dist/index.mjs"),react=__webpack_require__("./node_modules/react/index.js");const CheckIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"m9.55 18-5.7-5.7 1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4 9.55 18Z"}))),CopyIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M7 18V2h13v16H7Zm2-2h9V4H9v12Zm-6 6V6h2v14h11v2H3Z"}))),EditIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6V19ZM19.3 8.925l-4.25-4.2L17.875 1.9 22.1 6.125l-2.8 2.8ZM3 21v-4.25l10.6-10.6 4.25 4.25L7.25 21H3Z"}))),LinkOffIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"m19.25 16.45-1.5-1.55a3.05 3.05 0 0 0 1.625-1.063A2.867 2.867 0 0 0 20 12c0-.833-.292-1.542-.875-2.125A2.893 2.893 0 0 0 17 9h-4V7h4c1.383 0 2.563.487 3.538 1.462C21.513 9.437 22 10.617 22 12c0 .95-.246 1.825-.737 2.625a4.79 4.79 0 0 1-2.013 1.825ZM15.85 13l-2-2H16v2h-.15Zm3.95 9.6L1.4 4.2l1.4-1.4 18.4 18.4-1.4 1.4ZM11 17H7c-1.383 0-2.562-.488-3.537-1.463C2.488 14.562 2 13.383 2 12c0-1.15.35-2.175 1.05-3.075.7-.9 1.6-1.492 2.7-1.775L7.6 9H7c-.833 0-1.542.292-2.125.875A2.893 2.893 0 0 0 4 12c0 .833.292 1.542.875 2.125A2.893 2.893 0 0 0 7 15h4v2Zm-3-4v-2h1.625l1.975 2H8Z"}))),OpenInNewIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 21V3h9v2H5v14h14v-7h2v9H3Zm6.7-5.3-1.4-1.4L17.6 5H14V3h7v7h-2V6.4l-9.3 9.3Z"})));var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),ui_module_css=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),isCheckBoxInput=element=>"checkbox"===element.type,isDateObject=value=>value instanceof Date,isNullOrUndefined=value=>null==value;const isObjectType=value=>"object"==typeof value;var isObject=value=>!isNullOrUndefined(value)&&!Array.isArray(value)&&isObjectType(value)&&!isDateObject(value),getEventValue=event=>isObject(event)&&event.target?isCheckBoxInput(event.target)?event.target.checked:event.target.value:event,isNameInFieldArray=(names,name)=>names.has((name=>name.substring(0,name.search(/\.\d+(\.|$)/))||name)(name)),isPlainObject=tempObject=>{const prototypeCopy=tempObject.constructor&&tempObject.constructor.prototype;return isObject(prototypeCopy)&&prototypeCopy.hasOwnProperty("isPrototypeOf")},isWeb="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function cloneObject(data){let copy;const isArray=Array.isArray(data);if(data instanceof Date)copy=new Date(data);else if(data instanceof Set)copy=new Set(data);else{if(isWeb&&(data instanceof Blob||data instanceof FileList)||!isArray&&!isObject(data))return data;if(copy=isArray?[]:{},isArray||isPlainObject(data))for(const key in data)data.hasOwnProperty(key)&&(copy[key]=cloneObject(data[key]));else copy=data}return copy}var compact=value=>Array.isArray(value)?value.filter(Boolean):[],isUndefined=val=>void 0===val,get=(obj,path,defaultValue)=>{if(!path||!isObject(obj))return defaultValue;const result=compact(path.split(/[,[\].]+?/)).reduce(((result,key)=>isNullOrUndefined(result)?result:result[key]),obj);return isUndefined(result)||result===obj?isUndefined(obj[path])?defaultValue:obj[path]:result},isBoolean=value=>"boolean"==typeof value;const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES_max="max",INPUT_VALIDATION_RULES_min="min",INPUT_VALIDATION_RULES_maxLength="maxLength",INPUT_VALIDATION_RULES_minLength="minLength",INPUT_VALIDATION_RULES_pattern="pattern",INPUT_VALIDATION_RULES_required="required",INPUT_VALIDATION_RULES_validate="validate",HookFormContext=react.createContext(null),useFormContext=()=>react.useContext(HookFormContext);var getProxyFormState=(formState,control,localProxyFormState,isRoot=!0)=>{const result={defaultValues:control._defaultValues};for(const key in formState)Object.defineProperty(result,key,{get:()=>{const _key=key;return control._proxyFormState[_key]!==VALIDATION_MODE.all&&(control._proxyFormState[_key]=!isRoot||VALIDATION_MODE.all),localProxyFormState&&(localProxyFormState[_key]=!0),formState[_key]}});return result},isEmptyObject=value=>isObject(value)&&!Object.keys(value).length,shouldRenderFormState=(formStateData,_proxyFormState,updateFormState,isRoot)=>{updateFormState(formStateData);const{name,...formState}=formStateData;return isEmptyObject(formState)||Object.keys(formState).length>=Object.keys(_proxyFormState).length||Object.keys(formState).find((key=>_proxyFormState[key]===(!isRoot||VALIDATION_MODE.all)))},convertToArrayPayload=value=>Array.isArray(value)?value:[value],shouldSubscribeByName=(name,signalName,exact)=>!name||!signalName||name===signalName||convertToArrayPayload(name).some((currentName=>currentName&&(exact?currentName===signalName:currentName.startsWith(signalName)||signalName.startsWith(currentName))));function useSubscribe(props){const _props=react.useRef(props);_props.current=props,react.useEffect((()=>{const subscription=!props.disabled&&_props.current.subject&&_props.current.subject.subscribe({next:_props.current.next});return()=>{subscription&&subscription.unsubscribe()}}),[props.disabled])}var isString=value=>"string"==typeof value,generateWatchOutput=(names,_names,formValues,isGlobal,defaultValue)=>isString(names)?(isGlobal&&_names.watch.add(names),get(formValues,names,defaultValue)):Array.isArray(names)?names.map((fieldName=>(isGlobal&&_names.watch.add(fieldName),get(formValues,fieldName)))):(isGlobal&&(_names.watchAll=!0),formValues);var isKey=value=>/^\w*$/.test(value),stringToPath=input=>compact(input.replace(/["|']|\]/g,"").split(/\.|\[/));function set(object,path,value){let index=-1;const tempPath=isKey(path)?[path]:stringToPath(path),length=tempPath.length,lastIndex=length-1;for(;++index<length;){const key=tempPath[index];let newValue=value;if(index!==lastIndex){const objValue=object[key];newValue=isObject(objValue)||Array.isArray(objValue)?objValue:isNaN(+tempPath[index+1])?{}:[]}object[key]=newValue,object=object[key]}return object}function useController(props){const methods=useFormContext(),{name,disabled,control=methods.control,shouldUnregister}=props,isArrayField=isNameInFieldArray(control._names.array,name),value=function useWatch(props){const methods=useFormContext(),{control=methods.control,name,defaultValue,disabled,exact}=props||{},_name=react.useRef(name);_name.current=name,useSubscribe({disabled,subject:control._subjects.values,next:formState=>{shouldSubscribeByName(_name.current,formState.name,exact)&&updateValue(cloneObject(generateWatchOutput(_name.current,control._names,formState.values||control._formValues,!1,defaultValue)))}});const[value,updateValue]=react.useState(control._getWatch(name,defaultValue));return react.useEffect((()=>control._removeUnmounted())),value}({control,name,defaultValue:get(control._formValues,name,get(control._defaultValues,name,props.defaultValue)),exact:!0}),formState=function useFormState(props){const methods=useFormContext(),{control=methods.control,disabled,name,exact}=props||{},[formState,updateFormState]=react.useState(control._formState),_mounted=react.useRef(!0),_localProxyFormState=react.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),_name=react.useRef(name);return _name.current=name,useSubscribe({disabled,next:value=>_mounted.current&&shouldSubscribeByName(_name.current,value.name,exact)&&shouldRenderFormState(value,_localProxyFormState.current,control._updateFormState)&&updateFormState({...control._formState,...value}),subject:control._subjects.state}),react.useEffect((()=>(_mounted.current=!0,_localProxyFormState.current.isValid&&control._updateValid(!0),()=>{_mounted.current=!1})),[control]),getProxyFormState(formState,control,_localProxyFormState.current,!1)}({control,name}),_registerProps=react.useRef(control.register(name,{...props.rules,value}));return _registerProps.current=control.register(name,props.rules),react.useEffect((()=>{const _shouldUnregisterField=control._options.shouldUnregister||shouldUnregister,updateMounted=(name,value)=>{const field=get(control._fields,name);field&&(field._f.mount=value)};if(updateMounted(name,!0),_shouldUnregisterField){const value=cloneObject(get(control._options.defaultValues,name));set(control._defaultValues,name,value),isUndefined(get(control._formValues,name))&&set(control._formValues,name,value)}return()=>{(isArrayField?_shouldUnregisterField&&!control._state.action:_shouldUnregisterField)?control.unregister(name):updateMounted(name,!1)}}),[name,control,isArrayField,shouldUnregister]),react.useEffect((()=>{get(control._fields,name)&&control._updateDisabledField({disabled,fields:control._fields,name})}),[disabled,name,control]),{field:{name,value,...isBoolean(disabled)?{disabled}:{},onChange:react.useCallback((event=>_registerProps.current.onChange({target:{value:getEventValue(event),name},type:EVENTS.CHANGE})),[name]),onBlur:react.useCallback((()=>_registerProps.current.onBlur({target:{value:get(control._formValues,name),name},type:EVENTS.BLUR})),[name,control]),ref:elm=>{const field=get(control._fields,name);field&&elm&&(field._f.ref={focus:()=>elm.focus(),select:()=>elm.select(),setCustomValidity:message=>elm.setCustomValidity(message),reportValidity:()=>elm.reportValidity()})}},formState,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(formState.errors,name)},isDirty:{enumerable:!0,get:()=>!!get(formState.dirtyFields,name)},isTouched:{enumerable:!0,get:()=>!!get(formState.touchedFields,name)},error:{enumerable:!0,get:()=>get(formState.errors,name)}})}}const Controller=props=>props.render(useController(props));var appendErrors=(name,validateAllFieldCriteria,errors,type,message)=>validateAllFieldCriteria?{...errors[name],types:{...errors[name]&&errors[name].types?errors[name].types:{},[type]:message||!0}}:{};const focusFieldBy=(fields,callback,fieldsNames)=>{for(const key of fieldsNames||Object.keys(fields)){const field=get(fields,key);if(field){const{_f,...currentField}=field;if(_f&&callback(_f.name)){if(_f.ref.focus){_f.ref.focus();break}if(_f.refs&&_f.refs[0].focus){_f.refs[0].focus();break}}else isObject(currentField)&&focusFieldBy(currentField,callback)}}};var getValidationModes=mode=>({isOnSubmit:!mode||mode===VALIDATION_MODE.onSubmit,isOnBlur:mode===VALIDATION_MODE.onBlur,isOnChange:mode===VALIDATION_MODE.onChange,isOnAll:mode===VALIDATION_MODE.all,isOnTouch:mode===VALIDATION_MODE.onTouched}),isWatched=(name,_names,isBlurEvent)=>!isBlurEvent&&(_names.watchAll||_names.watch.has(name)||[..._names.watch].some((watchName=>name.startsWith(watchName)&&/^\.\w+/.test(name.slice(watchName.length))))),updateFieldArrayRootError=(errors,error,name)=>{const fieldArrayErrors=compact(get(errors,name));return set(fieldArrayErrors,"root",error[name]),set(errors,name,fieldArrayErrors),errors},isFileInput=element=>"file"===element.type,isFunction=value=>"function"==typeof value,isHTMLElement=value=>{if(!isWeb)return!1;const owner=value?value.ownerDocument:0;return value instanceof(owner&&owner.defaultView?owner.defaultView.HTMLElement:HTMLElement)},isMessage=value=>isString(value),isRadioInput=element=>"radio"===element.type,isRegex=value=>value instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=options=>{if(Array.isArray(options)){if(options.length>1){const values=options.filter((option=>option&&option.checked&&!option.disabled)).map((option=>option.value));return{value:values,isValid:!!values.length}}return options[0].checked&&!options[0].disabled?options[0].attributes&&!isUndefined(options[0].attributes.value)?isUndefined(options[0].value)||""===options[0].value?validResult:{value:options[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=options=>Array.isArray(options)?options.reduce(((previous,option)=>option&&option.checked&&!option.disabled?{isValid:!0,value:option.value}:previous),defaultReturn):defaultReturn;function getValidateError(result,ref,type="validate"){if(isMessage(result)||Array.isArray(result)&&result.every(isMessage)||isBoolean(result)&&!result)return{type,message:isMessage(result)?result:"",ref}}var getValueAndMessage=validationData=>isObject(validationData)&&!isRegex(validationData)?validationData:{value:validationData,message:""},validateField=async(field,formValues,validateAllFieldCriteria,shouldUseNativeValidation,isFieldArray)=>{const{ref,refs,required,maxLength,minLength,min,max,pattern,validate,name,valueAsNumber,mount,disabled}=field._f,inputValue=get(formValues,name);if(!mount||disabled)return{};const inputRef=refs?refs[0]:ref,setCustomValidity=message=>{shouldUseNativeValidation&&inputRef.reportValidity&&(inputRef.setCustomValidity(isBoolean(message)?"":message||""),inputRef.reportValidity())},error={},isRadio=isRadioInput(ref),isCheckBox=isCheckBoxInput(ref),isRadioOrCheckbox=isRadio||isCheckBox,isEmpty=(valueAsNumber||isFileInput(ref))&&isUndefined(ref.value)&&isUndefined(inputValue)||isHTMLElement(ref)&&""===ref.value||""===inputValue||Array.isArray(inputValue)&&!inputValue.length,appendErrorsCurry=appendErrors.bind(null,name,validateAllFieldCriteria,error),getMinMaxMessage=(exceedMax,maxLengthMessage,minLengthMessage,maxType=INPUT_VALIDATION_RULES_maxLength,minType=INPUT_VALIDATION_RULES_minLength)=>{const message=exceedMax?maxLengthMessage:minLengthMessage;error[name]={type:exceedMax?maxType:minType,message,ref,...appendErrorsCurry(exceedMax?maxType:minType,message)}};if(isFieldArray?!Array.isArray(inputValue)||!inputValue.length:required&&(!isRadioOrCheckbox&&(isEmpty||isNullOrUndefined(inputValue))||isBoolean(inputValue)&&!inputValue||isCheckBox&&!getCheckboxValue(refs).isValid||isRadio&&!getRadioValue(refs).isValid)){const{value,message}=isMessage(required)?{value:!!required,message:required}:getValueAndMessage(required);if(value&&(error[name]={type:INPUT_VALIDATION_RULES_required,message,ref:inputRef,...appendErrorsCurry(INPUT_VALIDATION_RULES_required,message)},!validateAllFieldCriteria))return setCustomValidity(message),error}if(!(isEmpty||isNullOrUndefined(min)&&isNullOrUndefined(max))){let exceedMax,exceedMin;const maxOutput=getValueAndMessage(max),minOutput=getValueAndMessage(min);if(isNullOrUndefined(inputValue)||isNaN(inputValue)){const valueDate=ref.valueAsDate||new Date(inputValue),convertTimeToDate=time=>new Date((new Date).toDateString()+" "+time),isTime="time"==ref.type,isWeek="week"==ref.type;isString(maxOutput.value)&&inputValue&&(exceedMax=isTime?convertTimeToDate(inputValue)>convertTimeToDate(maxOutput.value):isWeek?inputValue>maxOutput.value:valueDate>new Date(maxOutput.value)),isString(minOutput.value)&&inputValue&&(exceedMin=isTime?convertTimeToDate(inputValue)<convertTimeToDate(minOutput.value):isWeek?inputValue<minOutput.value:valueDate<new Date(minOutput.value))}else{const valueNumber=ref.valueAsNumber||(inputValue?+inputValue:inputValue);isNullOrUndefined(maxOutput.value)||(exceedMax=valueNumber>maxOutput.value),isNullOrUndefined(minOutput.value)||(exceedMin=valueNumber<minOutput.value)}if((exceedMax||exceedMin)&&(getMinMaxMessage(!!exceedMax,maxOutput.message,minOutput.message,INPUT_VALIDATION_RULES_max,INPUT_VALIDATION_RULES_min),!validateAllFieldCriteria))return setCustomValidity(error[name].message),error}if((maxLength||minLength)&&!isEmpty&&(isString(inputValue)||isFieldArray&&Array.isArray(inputValue))){const maxLengthOutput=getValueAndMessage(maxLength),minLengthOutput=getValueAndMessage(minLength),exceedMax=!isNullOrUndefined(maxLengthOutput.value)&&inputValue.length>+maxLengthOutput.value,exceedMin=!isNullOrUndefined(minLengthOutput.value)&&inputValue.length<+minLengthOutput.value;if((exceedMax||exceedMin)&&(getMinMaxMessage(exceedMax,maxLengthOutput.message,minLengthOutput.message),!validateAllFieldCriteria))return setCustomValidity(error[name].message),error}if(pattern&&!isEmpty&&isString(inputValue)){const{value:patternValue,message}=getValueAndMessage(pattern);if(isRegex(patternValue)&&!inputValue.match(patternValue)&&(error[name]={type:INPUT_VALIDATION_RULES_pattern,message,ref,...appendErrorsCurry(INPUT_VALIDATION_RULES_pattern,message)},!validateAllFieldCriteria))return setCustomValidity(message),error}if(validate)if(isFunction(validate)){const validateError=getValidateError(await validate(inputValue,formValues),inputRef);if(validateError&&(error[name]={...validateError,...appendErrorsCurry(INPUT_VALIDATION_RULES_validate,validateError.message)},!validateAllFieldCriteria))return setCustomValidity(validateError.message),error}else if(isObject(validate)){let validationResult={};for(const key in validate){if(!isEmptyObject(validationResult)&&!validateAllFieldCriteria)break;const validateError=getValidateError(await validate[key](inputValue,formValues),inputRef,key);validateError&&(validationResult={...validateError,...appendErrorsCurry(key,validateError.message)},setCustomValidity(validateError.message),validateAllFieldCriteria&&(error[name]=validationResult))}if(!isEmptyObject(validationResult)&&(error[name]={ref:inputRef,...validationResult},!validateAllFieldCriteria))return error}return setCustomValidity(!0),error};function unset(object,path){const paths=Array.isArray(path)?path:isKey(path)?[path]:stringToPath(path),childObject=1===paths.length?object:function baseGet(object,updatePath){const length=updatePath.slice(0,-1).length;let index=0;for(;index<length;)object=isUndefined(object)?index++:object[updatePath[index++]];return object}(object,paths),index=paths.length-1,key=paths[index];return childObject&&delete childObject[key],0!==index&&(isObject(childObject)&&isEmptyObject(childObject)||Array.isArray(childObject)&&function isEmptyArray(obj){for(const key in obj)if(obj.hasOwnProperty(key)&&!isUndefined(obj[key]))return!1;return!0}(childObject))&&unset(object,paths.slice(0,-1)),object}function createSubject(){let _observers=[];return{get observers(){return _observers},next:value=>{for(const observer of _observers)observer.next&&observer.next(value)},subscribe:observer=>(_observers.push(observer),{unsubscribe:()=>{_observers=_observers.filter((o=>o!==observer))}}),unsubscribe:()=>{_observers=[]}}}var isPrimitive=value=>isNullOrUndefined(value)||!isObjectType(value);function deepEqual(object1,object2){if(isPrimitive(object1)||isPrimitive(object2))return object1===object2;if(isDateObject(object1)&&isDateObject(object2))return object1.getTime()===object2.getTime();const keys1=Object.keys(object1),keys2=Object.keys(object2);if(keys1.length!==keys2.length)return!1;for(const key of keys1){const val1=object1[key];if(!keys2.includes(key))return!1;if("ref"!==key){const val2=object2[key];if(isDateObject(val1)&&isDateObject(val2)||isObject(val1)&&isObject(val2)||Array.isArray(val1)&&Array.isArray(val2)?!deepEqual(val1,val2):val1!==val2)return!1}}return!0}var isMultipleSelect=element=>"select-multiple"===element.type,isRadioOrCheckbox=ref=>isRadioInput(ref)||isCheckBoxInput(ref),live=ref=>isHTMLElement(ref)&&ref.isConnected,objectHasFunction=data=>{for(const key in data)if(isFunction(data[key]))return!0;return!1};function markFieldsDirty(data,fields={}){const isParentNodeArray=Array.isArray(data);if(isObject(data)||isParentNodeArray)for(const key in data)Array.isArray(data[key])||isObject(data[key])&&!objectHasFunction(data[key])?(fields[key]=Array.isArray(data[key])?[]:{},markFieldsDirty(data[key],fields[key])):isNullOrUndefined(data[key])||(fields[key]=!0);return fields}function getDirtyFieldsFromDefaultValues(data,formValues,dirtyFieldsFromValues){const isParentNodeArray=Array.isArray(data);if(isObject(data)||isParentNodeArray)for(const key in data)Array.isArray(data[key])||isObject(data[key])&&!objectHasFunction(data[key])?isUndefined(formValues)||isPrimitive(dirtyFieldsFromValues[key])?dirtyFieldsFromValues[key]=Array.isArray(data[key])?markFieldsDirty(data[key],[]):{...markFieldsDirty(data[key])}:getDirtyFieldsFromDefaultValues(data[key],isNullOrUndefined(formValues)?{}:formValues[key],dirtyFieldsFromValues[key]):dirtyFieldsFromValues[key]=!deepEqual(data[key],formValues[key]);return dirtyFieldsFromValues}var getDirtyFields=(defaultValues,formValues)=>getDirtyFieldsFromDefaultValues(defaultValues,formValues,markFieldsDirty(formValues)),getFieldValueAs=(value,{valueAsNumber,valueAsDate,setValueAs})=>isUndefined(value)?value:valueAsNumber?""===value?NaN:value?+value:value:valueAsDate&&isString(value)?new Date(value):setValueAs?setValueAs(value):value;function getFieldValue(_f){const ref=_f.ref;if(!(_f.refs?_f.refs.every((ref=>ref.disabled)):ref.disabled))return isFileInput(ref)?ref.files:isRadioInput(ref)?getRadioValue(_f.refs).value:isMultipleSelect(ref)?[...ref.selectedOptions].map((({value})=>value)):isCheckBoxInput(ref)?getCheckboxValue(_f.refs).value:getFieldValueAs(isUndefined(ref.value)?_f.ref.value:ref.value,_f)}var getResolverOptions=(fieldsNames,_fields,criteriaMode,shouldUseNativeValidation)=>{const fields={};for(const name of fieldsNames){const field=get(_fields,name);field&&set(fields,name,field._f)}return{criteriaMode,names:[...fieldsNames],fields,shouldUseNativeValidation}},getRuleValue=rule=>isUndefined(rule)?rule:isRegex(rule)?rule.source:isObject(rule)?isRegex(rule.value)?rule.value.source:rule.value:rule,hasValidation=options=>options.mount&&(options.required||options.min||options.max||options.maxLength||options.minLength||options.pattern||options.validate);function schemaErrorLookup(errors,_fields,name){const error=get(errors,name);if(error||isKey(name))return{error,name};const names=name.split(".");for(;names.length;){const fieldName=names.join("."),field=get(_fields,fieldName),foundError=get(errors,fieldName);if(field&&!Array.isArray(field)&&name!==fieldName)return{name};if(foundError&&foundError.type)return{name:fieldName,error:foundError};names.pop()}return{name}}var skipValidation=(isBlurEvent,isTouched,isSubmitted,reValidateMode,mode)=>!mode.isOnAll&&(!isSubmitted&&mode.isOnTouch?!(isTouched||isBlurEvent):(isSubmitted?reValidateMode.isOnBlur:mode.isOnBlur)?!isBlurEvent:!(isSubmitted?reValidateMode.isOnChange:mode.isOnChange)||isBlurEvent),unsetEmptyArray=(ref,name)=>!compact(get(ref,name)).length&&unset(ref,name);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(props={},flushRootRender){let delayErrorCallback,_options={...defaultOptions,...props},_formState={submitCount:0,isDirty:!1,isLoading:isFunction(_options.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},_fields={},_defaultValues=(isObject(_options.defaultValues)||isObject(_options.values))&&cloneObject(_options.defaultValues||_options.values)||{},_formValues=_options.shouldUnregister?{}:cloneObject(_defaultValues),_state={action:!1,mount:!1,watch:!1},_names={mount:new Set,unMount:new Set,array:new Set,watch:new Set},timer=0;const _proxyFormState={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_subjects={values:createSubject(),array:createSubject(),state:createSubject()},shouldCaptureDirtyFields=props.resetOptions&&props.resetOptions.keepDirtyValues,validationModeBeforeSubmit=getValidationModes(_options.mode),validationModeAfterSubmit=getValidationModes(_options.reValidateMode),shouldDisplayAllAssociatedErrors=_options.criteriaMode===VALIDATION_MODE.all,_updateValid=async shouldUpdateValid=>{if(_proxyFormState.isValid||shouldUpdateValid){const isValid=_options.resolver?isEmptyObject((await _executeSchema()).errors):await executeBuiltInValidation(_fields,!0);isValid!==_formState.isValid&&_subjects.state.next({isValid})}},_updateIsValidating=value=>_proxyFormState.isValidating&&_subjects.state.next({isValidating:value}),updateValidAndValue=(name,shouldSkipSetValueAs,value,ref)=>{const field=get(_fields,name);if(field){const defaultValue=get(_formValues,name,isUndefined(value)?get(_defaultValues,name):value);isUndefined(defaultValue)||ref&&ref.defaultChecked||shouldSkipSetValueAs?set(_formValues,name,shouldSkipSetValueAs?defaultValue:getFieldValue(field._f)):setFieldValue(name,defaultValue),_state.mount&&_updateValid()}},updateTouchAndDirty=(name,fieldValue,isBlurEvent,shouldDirty,shouldRender)=>{let shouldUpdateField=!1,isPreviousDirty=!1;const output={name};if(!isBlurEvent||shouldDirty){_proxyFormState.isDirty&&(isPreviousDirty=_formState.isDirty,_formState.isDirty=output.isDirty=_getDirty(),shouldUpdateField=isPreviousDirty!==output.isDirty);const isCurrentFieldPristine=deepEqual(get(_defaultValues,name),fieldValue);isPreviousDirty=get(_formState.dirtyFields,name),isCurrentFieldPristine?unset(_formState.dirtyFields,name):set(_formState.dirtyFields,name,!0),output.dirtyFields=_formState.dirtyFields,shouldUpdateField=shouldUpdateField||_proxyFormState.dirtyFields&&isPreviousDirty!==!isCurrentFieldPristine}if(isBlurEvent){const isPreviousFieldTouched=get(_formState.touchedFields,name);isPreviousFieldTouched||(set(_formState.touchedFields,name,isBlurEvent),output.touchedFields=_formState.touchedFields,shouldUpdateField=shouldUpdateField||_proxyFormState.touchedFields&&isPreviousFieldTouched!==isBlurEvent)}return shouldUpdateField&&shouldRender&&_subjects.state.next(output),shouldUpdateField?output:{}},shouldRenderByError=(name,isValid,error,fieldState)=>{const previousFieldError=get(_formState.errors,name),shouldUpdateValid=_proxyFormState.isValid&&isBoolean(isValid)&&_formState.isValid!==isValid;var callback;if(props.delayError&&error?(callback=()=>((name,error)=>{set(_formState.errors,name,error),_subjects.state.next({errors:_formState.errors})})(name,error),delayErrorCallback=wait=>{clearTimeout(timer),timer=setTimeout(callback,wait)},delayErrorCallback(props.delayError)):(clearTimeout(timer),delayErrorCallback=null,error?set(_formState.errors,name,error):unset(_formState.errors,name)),(error?!deepEqual(previousFieldError,error):previousFieldError)||!isEmptyObject(fieldState)||shouldUpdateValid){const updatedFormState={...fieldState,...shouldUpdateValid&&isBoolean(isValid)?{isValid}:{},errors:_formState.errors,name};_formState={..._formState,...updatedFormState},_subjects.state.next(updatedFormState)}_updateIsValidating(!1)},_executeSchema=async name=>_options.resolver(_formValues,_options.context,getResolverOptions(name||_names.mount,_fields,_options.criteriaMode,_options.shouldUseNativeValidation)),executeBuiltInValidation=async(fields,shouldOnlyCheckValid,context={valid:!0})=>{for(const name in fields){const field=fields[name];if(field){const{_f,...fieldValue}=field;if(_f){const isFieldArrayRoot=_names.array.has(_f.name),fieldError=await validateField(field,_formValues,shouldDisplayAllAssociatedErrors,_options.shouldUseNativeValidation&&!shouldOnlyCheckValid,isFieldArrayRoot);if(fieldError[_f.name]&&(context.valid=!1,shouldOnlyCheckValid))break;!shouldOnlyCheckValid&&(get(fieldError,_f.name)?isFieldArrayRoot?updateFieldArrayRootError(_formState.errors,fieldError,_f.name):set(_formState.errors,_f.name,fieldError[_f.name]):unset(_formState.errors,_f.name))}fieldValue&&await executeBuiltInValidation(fieldValue,shouldOnlyCheckValid,context)}}return context.valid},_getDirty=(name,data)=>(name&&data&&set(_formValues,name,data),!deepEqual(getValues(),_defaultValues)),_getWatch=(names,defaultValue,isGlobal)=>generateWatchOutput(names,_names,{..._state.mount?_formValues:isUndefined(defaultValue)?_defaultValues:isString(names)?{[names]:defaultValue}:defaultValue},isGlobal,defaultValue),setFieldValue=(name,value,options={})=>{const field=get(_fields,name);let fieldValue=value;if(field){const fieldReference=field._f;fieldReference&&(!fieldReference.disabled&&set(_formValues,name,getFieldValueAs(value,fieldReference)),fieldValue=isHTMLElement(fieldReference.ref)&&isNullOrUndefined(value)?"":value,isMultipleSelect(fieldReference.ref)?[...fieldReference.ref.options].forEach((optionRef=>optionRef.selected=fieldValue.includes(optionRef.value))):fieldReference.refs?isCheckBoxInput(fieldReference.ref)?fieldReference.refs.length>1?fieldReference.refs.forEach((checkboxRef=>(!checkboxRef.defaultChecked||!checkboxRef.disabled)&&(checkboxRef.checked=Array.isArray(fieldValue)?!!fieldValue.find((data=>data===checkboxRef.value)):fieldValue===checkboxRef.value))):fieldReference.refs[0]&&(fieldReference.refs[0].checked=!!fieldValue):fieldReference.refs.forEach((radioRef=>radioRef.checked=radioRef.value===fieldValue)):isFileInput(fieldReference.ref)?fieldReference.ref.value="":(fieldReference.ref.value=fieldValue,fieldReference.ref.type||_subjects.values.next({name,values:{..._formValues}})))}(options.shouldDirty||options.shouldTouch)&&updateTouchAndDirty(name,fieldValue,options.shouldTouch,options.shouldDirty,!0),options.shouldValidate&&trigger(name)},setValues=(name,value,options)=>{for(const fieldKey in value){const fieldValue=value[fieldKey],fieldName=`${name}.${fieldKey}`,field=get(_fields,fieldName);!_names.array.has(name)&&isPrimitive(fieldValue)&&(!field||field._f)||isDateObject(fieldValue)?setFieldValue(fieldName,fieldValue,options):setValues(fieldName,fieldValue,options)}},setValue=(name,value,options={})=>{const field=get(_fields,name),isFieldArray=_names.array.has(name),cloneValue=cloneObject(value);set(_formValues,name,cloneValue),isFieldArray?(_subjects.array.next({name,values:{..._formValues}}),(_proxyFormState.isDirty||_proxyFormState.dirtyFields)&&options.shouldDirty&&_subjects.state.next({name,dirtyFields:getDirtyFields(_defaultValues,_formValues),isDirty:_getDirty(name,cloneValue)})):!field||field._f||isNullOrUndefined(cloneValue)?setFieldValue(name,cloneValue,options):setValues(name,cloneValue,options),isWatched(name,_names)&&_subjects.state.next({..._formState}),_subjects.values.next({name,values:{..._formValues}}),!_state.mount&&flushRootRender()},onChange=async event=>{const target=event.target;let name=target.name,isFieldValueUpdated=!0;const field=get(_fields,name);if(field){let error,isValid;const fieldValue=target.type?getFieldValue(field._f):getEventValue(event),isBlurEvent=event.type===EVENTS.BLUR||event.type===EVENTS.FOCUS_OUT,shouldSkipValidation=!hasValidation(field._f)&&!_options.resolver&&!get(_formState.errors,name)&&!field._f.deps||skipValidation(isBlurEvent,get(_formState.touchedFields,name),_formState.isSubmitted,validationModeAfterSubmit,validationModeBeforeSubmit),watched=isWatched(name,_names,isBlurEvent);set(_formValues,name,fieldValue),isBlurEvent?(field._f.onBlur&&field._f.onBlur(event),delayErrorCallback&&delayErrorCallback(0)):field._f.onChange&&field._f.onChange(event);const fieldState=updateTouchAndDirty(name,fieldValue,isBlurEvent,!1),shouldRender=!isEmptyObject(fieldState)||watched;if(!isBlurEvent&&_subjects.values.next({name,type:event.type,values:{..._formValues}}),shouldSkipValidation)return _proxyFormState.isValid&&_updateValid(),shouldRender&&_subjects.state.next({name,...watched?{}:fieldState});if(!isBlurEvent&&watched&&_subjects.state.next({..._formState}),_updateIsValidating(!0),_options.resolver){const{errors}=await _executeSchema([name]),previousErrorLookupResult=schemaErrorLookup(_formState.errors,_fields,name),errorLookupResult=schemaErrorLookup(errors,_fields,previousErrorLookupResult.name||name);error=errorLookupResult.error,name=errorLookupResult.name,isValid=isEmptyObject(errors)}else error=(await validateField(field,_formValues,shouldDisplayAllAssociatedErrors,_options.shouldUseNativeValidation))[name],isFieldValueUpdated=Number.isNaN(fieldValue)||fieldValue===get(_formValues,name,fieldValue),isFieldValueUpdated&&(error?isValid=!1:_proxyFormState.isValid&&(isValid=await executeBuiltInValidation(_fields,!0)));isFieldValueUpdated&&(field._f.deps&&trigger(field._f.deps),shouldRenderByError(name,isValid,error,fieldState))}},trigger=async(name,options={})=>{let isValid,validationResult;const fieldNames=convertToArrayPayload(name);if(_updateIsValidating(!0),_options.resolver){const errors=await(async names=>{const{errors}=await _executeSchema(names);if(names)for(const name of names){const error=get(errors,name);error?set(_formState.errors,name,error):unset(_formState.errors,name)}else _formState.errors=errors;return errors})(isUndefined(name)?name:fieldNames);isValid=isEmptyObject(errors),validationResult=name?!fieldNames.some((name=>get(errors,name))):isValid}else name?(validationResult=(await Promise.all(fieldNames.map((async fieldName=>{const field=get(_fields,fieldName);return await executeBuiltInValidation(field&&field._f?{[fieldName]:field}:field)})))).every(Boolean),(validationResult||_formState.isValid)&&_updateValid()):validationResult=isValid=await executeBuiltInValidation(_fields);return _subjects.state.next({...!isString(name)||_proxyFormState.isValid&&isValid!==_formState.isValid?{}:{name},..._options.resolver||!name?{isValid}:{},errors:_formState.errors,isValidating:!1}),options.shouldFocus&&!validationResult&&focusFieldBy(_fields,(key=>key&&get(_formState.errors,key)),name?fieldNames:_names.mount),validationResult},getValues=fieldNames=>{const values={..._defaultValues,..._state.mount?_formValues:{}};return isUndefined(fieldNames)?values:isString(fieldNames)?get(values,fieldNames):fieldNames.map((name=>get(values,name)))},getFieldState=(name,formState)=>({invalid:!!get((formState||_formState).errors,name),isDirty:!!get((formState||_formState).dirtyFields,name),isTouched:!!get((formState||_formState).touchedFields,name),error:get((formState||_formState).errors,name)}),setError=(name,error,options)=>{const ref=(get(_fields,name,{_f:{}})._f||{}).ref;set(_formState.errors,name,{...error,ref}),_subjects.state.next({name,errors:_formState.errors,isValid:!1}),options&&options.shouldFocus&&ref&&ref.focus&&ref.focus()},unregister=(name,options={})=>{for(const fieldName of name?convertToArrayPayload(name):_names.mount)_names.mount.delete(fieldName),_names.array.delete(fieldName),options.keepValue||(unset(_fields,fieldName),unset(_formValues,fieldName)),!options.keepError&&unset(_formState.errors,fieldName),!options.keepDirty&&unset(_formState.dirtyFields,fieldName),!options.keepTouched&&unset(_formState.touchedFields,fieldName),!_options.shouldUnregister&&!options.keepDefaultValue&&unset(_defaultValues,fieldName);_subjects.values.next({values:{..._formValues}}),_subjects.state.next({..._formState,...options.keepDirty?{isDirty:_getDirty()}:{}}),!options.keepIsValid&&_updateValid()},_updateDisabledField=({disabled,name,field,fields})=>{if(isBoolean(disabled)){const value=disabled?void 0:get(_formValues,name,getFieldValue(field?field._f:get(fields,name)._f));set(_formValues,name,value),updateTouchAndDirty(name,value,!1,!1,!0)}},register=(name,options={})=>{let field=get(_fields,name);const disabledIsDefined=isBoolean(options.disabled);return set(_fields,name,{...field||{},_f:{...field&&field._f?field._f:{ref:{name}},name,mount:!0,...options}}),_names.mount.add(name),field?_updateDisabledField({field,disabled:options.disabled,name}):updateValidAndValue(name,!0,options.value),{...disabledIsDefined?{disabled:options.disabled}:{},..._options.progressive?{required:!!options.required,min:getRuleValue(options.min),max:getRuleValue(options.max),minLength:getRuleValue(options.minLength),maxLength:getRuleValue(options.maxLength),pattern:getRuleValue(options.pattern)}:{},name,onChange,onBlur:onChange,ref:ref=>{if(ref){register(name,options),field=get(_fields,name);const fieldRef=isUndefined(ref.value)&&ref.querySelectorAll&&ref.querySelectorAll("input,select,textarea")[0]||ref,radioOrCheckbox=isRadioOrCheckbox(fieldRef),refs=field._f.refs||[];if(radioOrCheckbox?refs.find((option=>option===fieldRef)):fieldRef===field._f.ref)return;set(_fields,name,{_f:{...field._f,...radioOrCheckbox?{refs:[...refs.filter(live),fieldRef,...Array.isArray(get(_defaultValues,name))?[{}]:[]],ref:{type:fieldRef.type,name}}:{ref:fieldRef}}}),updateValidAndValue(name,!1,void 0,fieldRef)}else field=get(_fields,name,{}),field._f&&(field._f.mount=!1),(_options.shouldUnregister||options.shouldUnregister)&&(!isNameInFieldArray(_names.array,name)||!_state.action)&&_names.unMount.add(name)}}},_focusError=()=>_options.shouldFocusError&&focusFieldBy(_fields,(key=>key&&get(_formState.errors,key)),_names.mount),handleSubmit=(onValid,onInvalid)=>async e=>{e&&(e.preventDefault&&e.preventDefault(),e.persist&&e.persist());let fieldValues=cloneObject(_formValues);if(_subjects.state.next({isSubmitting:!0}),_options.resolver){const{errors,values}=await _executeSchema();_formState.errors=errors,fieldValues=values}else await executeBuiltInValidation(_fields);unset(_formState.errors,"root"),isEmptyObject(_formState.errors)?(_subjects.state.next({errors:{}}),await onValid(fieldValues,e)):(onInvalid&&await onInvalid({..._formState.errors},e),_focusError(),setTimeout(_focusError)),_subjects.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(_formState.errors),submitCount:_formState.submitCount+1,errors:_formState.errors})},_reset=(formValues,keepStateOptions={})=>{const updatedValues=formValues?cloneObject(formValues):_defaultValues,cloneUpdatedValues=cloneObject(updatedValues),values=formValues&&!isEmptyObject(formValues)?cloneUpdatedValues:_defaultValues;if(keepStateOptions.keepDefaultValues||(_defaultValues=updatedValues),!keepStateOptions.keepValues){if(keepStateOptions.keepDirtyValues||shouldCaptureDirtyFields)for(const fieldName of _names.mount)get(_formState.dirtyFields,fieldName)?set(values,fieldName,get(_formValues,fieldName)):setValue(fieldName,get(values,fieldName));else{if(isWeb&&isUndefined(formValues))for(const name of _names.mount){const field=get(_fields,name);if(field&&field._f){const fieldReference=Array.isArray(field._f.refs)?field._f.refs[0]:field._f.ref;if(isHTMLElement(fieldReference)){const form=fieldReference.closest("form");if(form){form.reset();break}}}}_fields={}}_formValues=props.shouldUnregister?keepStateOptions.keepDefaultValues?cloneObject(_defaultValues):{}:cloneObject(values),_subjects.array.next({values:{...values}}),_subjects.values.next({values:{...values}})}_names={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_state.mount&&flushRootRender(),_state.mount=!_proxyFormState.isValid||!!keepStateOptions.keepIsValid,_state.watch=!!props.shouldUnregister,_subjects.state.next({submitCount:keepStateOptions.keepSubmitCount?_formState.submitCount:0,isDirty:keepStateOptions.keepDirty?_formState.isDirty:!(!keepStateOptions.keepDefaultValues||deepEqual(formValues,_defaultValues)),isSubmitted:!!keepStateOptions.keepIsSubmitted&&_formState.isSubmitted,dirtyFields:keepStateOptions.keepDirtyValues?_formState.dirtyFields:keepStateOptions.keepDefaultValues&&formValues?getDirtyFields(_defaultValues,formValues):{},touchedFields:keepStateOptions.keepTouched?_formState.touchedFields:{},errors:keepStateOptions.keepErrors?_formState.errors:{},isSubmitSuccessful:!!keepStateOptions.keepIsSubmitSuccessful&&_formState.isSubmitSuccessful,isSubmitting:!1})},reset=(formValues,keepStateOptions)=>_reset(isFunction(formValues)?formValues(_formValues):formValues,keepStateOptions);return{control:{register,unregister,getFieldState,handleSubmit,setError,_executeSchema,_getWatch,_getDirty,_updateValid,_removeUnmounted:()=>{for(const name of _names.unMount){const field=get(_fields,name);field&&(field._f.refs?field._f.refs.every((ref=>!live(ref))):!live(field._f.ref))&&unregister(name)}_names.unMount=new Set},_updateFieldArray:(name,values=[],method,args,shouldSetValues=!0,shouldUpdateFieldsAndState=!0)=>{if(args&&method){if(_state.action=!0,shouldUpdateFieldsAndState&&Array.isArray(get(_fields,name))){const fieldValues=method(get(_fields,name),args.argA,args.argB);shouldSetValues&&set(_fields,name,fieldValues)}if(shouldUpdateFieldsAndState&&Array.isArray(get(_formState.errors,name))){const errors=method(get(_formState.errors,name),args.argA,args.argB);shouldSetValues&&set(_formState.errors,name,errors),unsetEmptyArray(_formState.errors,name)}if(_proxyFormState.touchedFields&&shouldUpdateFieldsAndState&&Array.isArray(get(_formState.touchedFields,name))){const touchedFields=method(get(_formState.touchedFields,name),args.argA,args.argB);shouldSetValues&&set(_formState.touchedFields,name,touchedFields)}_proxyFormState.dirtyFields&&(_formState.dirtyFields=getDirtyFields(_defaultValues,_formValues)),_subjects.state.next({name,isDirty:_getDirty(name,values),dirtyFields:_formState.dirtyFields,errors:_formState.errors,isValid:_formState.isValid})}else set(_formValues,name,values)},_updateDisabledField,_getFieldArray:name=>compact(get(_state.mount?_formValues:_defaultValues,name,props.shouldUnregister?get(_defaultValues,name,[]):[])),_reset,_resetDefaultValues:()=>isFunction(_options.defaultValues)&&_options.defaultValues().then((values=>{reset(values,_options.resetOptions),_subjects.state.next({isLoading:!1})})),_updateFormState:updatedFormState=>{_formState={..._formState,...updatedFormState}},_subjects,_proxyFormState,get _fields(){return _fields},get _formValues(){return _formValues},get _state(){return _state},set _state(value){_state=value},get _defaultValues(){return _defaultValues},get _names(){return _names},set _names(value){_names=value},get _formState(){return _formState},set _formState(value){_formState=value},get _options(){return _options},set _options(value){_options={..._options,...value}}},trigger,register,handleSubmit,watch:(name,defaultValue)=>isFunction(name)?_subjects.values.subscribe({next:payload=>name(_getWatch(void 0,defaultValue),payload)}):_getWatch(name,defaultValue,!0),setValue,getValues,reset,resetField:(name,options={})=>{get(_fields,name)&&(isUndefined(options.defaultValue)?setValue(name,get(_defaultValues,name)):(setValue(name,options.defaultValue),set(_defaultValues,name,options.defaultValue)),options.keepTouched||unset(_formState.touchedFields,name),options.keepDirty||(unset(_formState.dirtyFields,name),_formState.isDirty=options.defaultValue?_getDirty(name,get(_defaultValues,name)):_getDirty()),options.keepError||(unset(_formState.errors,name),_proxyFormState.isValid&&_updateValid()),_subjects.state.next({..._formState}))},clearErrors:name=>{name&&convertToArrayPayload(name).forEach((inputName=>unset(_formState.errors,inputName))),_subjects.state.next({errors:name?_formState.errors:{}})},unregister,setError,setFocus:(name,options={})=>{const field=get(_fields,name),fieldReference=field&&field._f;if(fieldReference){const fieldRef=fieldReference.refs?fieldReference.refs[0]:fieldReference.ref;fieldRef.focus&&(fieldRef.focus(),options.shouldSelect&&fieldRef.select())}},getFieldState}}function objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);__webpack_require__("./node_modules/react-is/index.js");let e=e=>"object"==typeof e&&null!=e&&1===e.nodeType,t=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,n=(e,n)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let l=getComputedStyle(e,null);return t(l.overflowY,n)||t(l.overflowX,n)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},l=(e,t,n,l,i,o,r,d)=>o<e&&r>t||o>e&&r<t?0:o<=e&&d<=n||r>=t&&d>=n?o-e-l:r>t&&d<n||o<e&&d>n?r-t+i:0,i=e=>{let t=e.parentElement;return null==t?e.getRootNode().host||null:t};var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),idCounter=0;function noop(){}function scrollIntoView(node,menuNode){if(node){var actions=((t,o)=>{var r,d,h,f,u,s;if("undefined"==typeof document)return[];let{scrollMode:a,block:c,inline:g,boundary:m,skipOverflowHiddenElements:p}=o,w="function"==typeof m?m:e=>e!==m;if(!e(t))throw new TypeError("Invalid target");let W=document.scrollingElement||document.documentElement,H=[],b=t;for(;e(b)&&w(b);){if(b=i(b),b===W){H.push(b);break}null!=b&&b===document.body&&n(b)&&!n(document.documentElement)||null!=b&&n(b,p)&&H.push(b)}let v=null!=(d=null==(r=window.visualViewport)?void 0:r.width)?d:innerWidth,y=null!=(f=null==(h=window.visualViewport)?void 0:h.height)?f:innerHeight,E=null!=(u=window.scrollX)?u:pageXOffset,M=null!=(s=window.scrollY)?s:pageYOffset,{height:x,width:I,top:C,right:R,bottom:T,left:V}=t.getBoundingClientRect(),k="start"===c||"nearest"===c?C:"end"===c?T:C+x/2,B="center"===g?V+I/2:"end"===g?R:V,D=[];for(let e=0;e<H.length;e++){let t=H[e],{height:n,width:i,top:o,right:r,bottom:d,left:h}=t.getBoundingClientRect();if("if-needed"===a&&C>=0&&V>=0&&T<=y&&R<=v&&C>=o&&T<=d&&V>=h&&R<=r)return D;let f=getComputedStyle(t),u=parseInt(f.borderLeftWidth,10),s=parseInt(f.borderTopWidth,10),m=parseInt(f.borderRightWidth,10),p=parseInt(f.borderBottomWidth,10),w=0,b=0,O="offsetWidth"in t?t.offsetWidth-t.clientWidth-u-m:0,X="offsetHeight"in t?t.offsetHeight-t.clientHeight-s-p:0,Y="offsetWidth"in t?0===t.offsetWidth?0:i/t.offsetWidth:0,L="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(W===t)w="start"===c?k:"end"===c?k-y:"nearest"===c?l(M,M+y,y,s,p,M+k,M+k+x,x):k-y/2,b="start"===g?B:"center"===g?B-v/2:"end"===g?B-v:l(E,E+v,v,u,m,E+B,E+B+I,I),w=Math.max(0,w+M),b=Math.max(0,b+E);else{w="start"===c?k-o-s:"end"===c?k-d+p+X:"nearest"===c?l(o,d,n,s,p+X,k,k+x,x):k-(o+n/2)+X/2,b="start"===g?B-h-u:"center"===g?B-(h+i/2)+O/2:"end"===g?B-r+m+O:l(h,r,i,u,m+O,B,B+I,I);let{scrollLeft:e,scrollTop:f}=t;w=Math.max(0,Math.min(f+w/L,t.scrollHeight-n/L+X)),b=Math.max(0,Math.min(e+b/Y,t.scrollWidth-i/Y+O)),k+=f-w,B+=e-b}D.push({el:t,top:w,left:b})}return D})(node,{boundary:menuNode,block:"nearest",scrollMode:"if-needed"});actions.forEach((function(_ref){var el=_ref.el,top=_ref.top,left=_ref.left;el.scrollTop=top,el.scrollLeft=left}))}}function isOrContainsNode(parent,child,environment){return parent===child||child instanceof environment.Node&&parent.contains&&parent.contains(child)}function debounce(fn,time){var timeoutId;function cancel(){timeoutId&&clearTimeout(timeoutId)}function wrapper(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];cancel(),timeoutId=setTimeout((function(){timeoutId=null,fn.apply(void 0,args)}),time)}return wrapper.cancel=cancel,wrapper}function callAllEventHandlers(){for(var _len2=arguments.length,fns=new Array(_len2),_key2=0;_key2<_len2;_key2++)fns[_key2]=arguments[_key2];return function(event){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return fns.some((function(fn){return fn&&fn.apply(void 0,[event].concat(args)),event.preventDownshiftDefault||event.hasOwnProperty("nativeEvent")&&event.nativeEvent.preventDownshiftDefault}))}}function handleRefs(){for(var _len4=arguments.length,refs=new Array(_len4),_key4=0;_key4<_len4;_key4++)refs[_key4]=arguments[_key4];return function(node){refs.forEach((function(ref){"function"==typeof ref?ref(node):ref&&(ref.current=node)}))}}function downshift_esm_generateId(){return String(idCounter++)}function getA11yStatusMessage$1(_ref2){var isOpen=_ref2.isOpen,resultCount=_ref2.resultCount,previousResultCount=_ref2.previousResultCount;return isOpen?resultCount?resultCount!==previousResultCount?resultCount+" result"+(1===resultCount?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function getState(state,props){return Object.keys(state).reduce((function(prevState,key){return prevState[key]=isControlledProp(props,key)?props[key]:state[key],prevState}),{})}function isControlledProp(props,key){return void 0!==props[key]}function normalizeArrowKey(event){var key=event.key,keyCode=event.keyCode;return keyCode>=37&&keyCode<=40&&0!==key.indexOf("Arrow")?"Arrow"+key:key}function getNextWrappingIndex(moveAmount,baseIndex,itemCount,getItemNodeFromIndex,circular){if(void 0===circular&&(circular=!0),0===itemCount)return-1;var itemsLastIndex=itemCount-1;("number"!=typeof baseIndex||baseIndex<0||baseIndex>=itemCount)&&(baseIndex=moveAmount>0?-1:itemsLastIndex+1);var newIndex=baseIndex+moveAmount;newIndex<0?newIndex=circular?itemsLastIndex:0:newIndex>itemsLastIndex&&(newIndex=circular?0:itemsLastIndex);var nonDisabledNewIndex=getNextNonDisabledIndex(moveAmount,newIndex,itemCount,getItemNodeFromIndex,circular);return-1===nonDisabledNewIndex?baseIndex>=itemCount?-1:baseIndex:nonDisabledNewIndex}function getNextNonDisabledIndex(moveAmount,baseIndex,itemCount,getItemNodeFromIndex,circular){var currentElementNode=getItemNodeFromIndex(baseIndex);if(!currentElementNode||!currentElementNode.hasAttribute("disabled"))return baseIndex;if(moveAmount>0){for(var index=baseIndex+1;index<itemCount;index++)if(!getItemNodeFromIndex(index).hasAttribute("disabled"))return index}else for(var _index=baseIndex-1;_index>=0;_index--)if(!getItemNodeFromIndex(_index).hasAttribute("disabled"))return _index;return circular?moveAmount>0?getNextNonDisabledIndex(1,0,itemCount,getItemNodeFromIndex,!1):getNextNonDisabledIndex(-1,itemCount-1,itemCount,getItemNodeFromIndex,!1):-1}function targetWithinDownshift(target,downshiftElements,environment,checkActiveElement){return void 0===checkActiveElement&&(checkActiveElement=!0),downshiftElements.some((function(contextNode){return contextNode&&(isOrContainsNode(contextNode,target,environment)||checkActiveElement&&isOrContainsNode(contextNode,environment.document.activeElement,environment))}))}var cleanupStatus=debounce((function(documentProp){getStatusDiv(documentProp).textContent=""}),500);function setStatus(status,documentProp){var div=getStatusDiv(documentProp);status&&(div.textContent=status,cleanupStatus(documentProp))}function getStatusDiv(documentProp){void 0===documentProp&&(documentProp=document);var statusDiv=documentProp.getElementById("a11y-status-message");return statusDiv||((statusDiv=documentProp.createElement("div")).setAttribute("id","a11y-status-message"),statusDiv.setAttribute("role","status"),statusDiv.setAttribute("aria-live","polite"),statusDiv.setAttribute("aria-relevant","additions text"),Object.assign(statusDiv.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),documentProp.body.appendChild(statusDiv),statusDiv)}var _excluded$3=["isInitialMount","highlightedIndex","items","environment"],dropdownDefaultStateValues={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function callOnChangeProps(action,state,newState){var props=action.props,type=action.type,changes={};Object.keys(state).forEach((function(key){!function invokeOnChangeHandler(key,action,state,newState){var props=action.props,type=action.type,handler="on"+capitalizeString(key)+"Change";props[handler]&&void 0!==newState[key]&&newState[key]!==state[key]&&props[handler]((0,esm_extends.Z)({type},newState))}(key,action,state,newState),newState[key]!==state[key]&&(changes[key]=newState[key])})),props.onStateChange&&Object.keys(changes).length&&props.onStateChange((0,esm_extends.Z)({type},changes))}var updateA11yStatus=debounce((function(getA11yMessage,document){setStatus(getA11yMessage(),document)}),200),useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?react.useLayoutEffect:react.useEffect;function useElementIds(_ref){var _ref$id=_ref.id,id=void 0===_ref$id?"downshift-"+downshift_esm_generateId():_ref$id,labelId=_ref.labelId,menuId=_ref.menuId,getItemId=_ref.getItemId,toggleButtonId=_ref.toggleButtonId,inputId=_ref.inputId;return(0,react.useRef)({labelId:labelId||id+"-label",menuId:menuId||id+"-menu",getItemId:getItemId||function(index){return id+"-item-"+index},toggleButtonId:toggleButtonId||id+"-toggle-button",inputId:inputId||id+"-input"}).current}function getItemAndIndex(itemProp,indexProp,items,errorMessage){var item,index;if(void 0===itemProp){if(void 0===indexProp)throw new Error(errorMessage);item=items[indexProp],index=indexProp}else index=void 0===indexProp?items.indexOf(itemProp):indexProp,item=itemProp;return[item,index]}function capitalizeString(string){return""+string.slice(0,1).toUpperCase()+string.slice(1)}function useLatestRef(val){var ref=(0,react.useRef)(val);return ref.current=val,ref}function useEnhancedReducer(reducer,initialState,props){var prevStateRef=(0,react.useRef)(),actionRef=(0,react.useRef)(),enhancedReducer=(0,react.useCallback)((function(state,action){actionRef.current=action,state=getState(state,action.props);var changes=reducer(state,action);return action.props.stateReducer(state,(0,esm_extends.Z)({},action,{changes}))}),[reducer]),_useReducer=(0,react.useReducer)(enhancedReducer,initialState),state=_useReducer[0],dispatch=_useReducer[1],propsRef=useLatestRef(props),dispatchWithProps=(0,react.useCallback)((function(action){return dispatch((0,esm_extends.Z)({props:propsRef.current},action))}),[propsRef]),action=actionRef.current;return(0,react.useEffect)((function(){action&&prevStateRef.current&&prevStateRef.current!==state&&callOnChangeProps(action,getState(prevStateRef.current,action.props),state),prevStateRef.current=state}),[state,props,action]),[state,dispatchWithProps]}var defaultProps$3={itemToString:function itemToString(item){return item?String(item):""},stateReducer:function stateReducer(s,a){return a.changes},getA11ySelectionMessage:function getA11ySelectionMessage(selectionParameters){var selectedItem=selectionParameters.selectedItem,itemToStringLocal=selectionParameters.itemToString;return selectedItem?itemToStringLocal(selectedItem)+" has been selected.":""},scrollIntoView,environment:"undefined"==typeof window?{}:window};function getDefaultValue$1(props,propKey,defaultStateValues){void 0===defaultStateValues&&(defaultStateValues=dropdownDefaultStateValues);var defaultValue=props["default"+capitalizeString(propKey)];return void 0!==defaultValue?defaultValue:defaultStateValues[propKey]}function getInitialValue$1(props,propKey,defaultStateValues){void 0===defaultStateValues&&(defaultStateValues=dropdownDefaultStateValues);var value=props[propKey];if(void 0!==value)return value;var initialValue=props["initial"+capitalizeString(propKey)];return void 0!==initialValue?initialValue:getDefaultValue$1(props,propKey,defaultStateValues)}function getInitialState$2(props){var selectedItem=getInitialValue$1(props,"selectedItem"),isOpen=getInitialValue$1(props,"isOpen"),highlightedIndex=getInitialValue$1(props,"highlightedIndex"),inputValue=getInitialValue$1(props,"inputValue");return{highlightedIndex:highlightedIndex<0&&selectedItem&&isOpen?props.items.indexOf(selectedItem):highlightedIndex,isOpen,selectedItem,inputValue}}function getHighlightedIndexOnOpen(props,state,offset){var items=props.items,initialHighlightedIndex=props.initialHighlightedIndex,defaultHighlightedIndex=props.defaultHighlightedIndex,selectedItem=state.selectedItem,highlightedIndex=state.highlightedIndex;return 0===items.length?-1:void 0!==initialHighlightedIndex&&highlightedIndex===initialHighlightedIndex?initialHighlightedIndex:void 0!==defaultHighlightedIndex?defaultHighlightedIndex:selectedItem?items.indexOf(selectedItem):0===offset?-1:offset<0?items.length-1:0}function useMouseAndTouchTracker(isOpen,downshiftElementRefs,environment,handleBlur){var mouseAndTouchTrackersRef=(0,react.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,react.useEffect)((function(){if(null!=(null==environment?void 0:environment.addEventListener)){var onMouseDown=function onMouseDown(){mouseAndTouchTrackersRef.current.isMouseDown=!0},onMouseUp=function onMouseUp(event){mouseAndTouchTrackersRef.current.isMouseDown=!1,isOpen&&!targetWithinDownshift(event.target,downshiftElementRefs.map((function(ref){return ref.current})),environment)&&handleBlur()},onTouchStart=function onTouchStart(){mouseAndTouchTrackersRef.current.isTouchMove=!1},onTouchMove=function onTouchMove(){mouseAndTouchTrackersRef.current.isTouchMove=!0},onTouchEnd=function onTouchEnd(event){!isOpen||mouseAndTouchTrackersRef.current.isTouchMove||targetWithinDownshift(event.target,downshiftElementRefs.map((function(ref){return ref.current})),environment,!1)||handleBlur()};return environment.addEventListener("mousedown",onMouseDown),environment.addEventListener("mouseup",onMouseUp),environment.addEventListener("touchstart",onTouchStart),environment.addEventListener("touchmove",onTouchMove),environment.addEventListener("touchend",onTouchEnd),function cleanup(){environment.removeEventListener("mousedown",onMouseDown),environment.removeEventListener("mouseup",onMouseUp),environment.removeEventListener("touchstart",onTouchStart),environment.removeEventListener("touchmove",onTouchMove),environment.removeEventListener("touchend",onTouchEnd)}}}),[isOpen,environment]),mouseAndTouchTrackersRef}var useGetterPropsCalledChecker=function useGetterPropsCalledChecker(){return noop};function useA11yMessageSetter(getA11yMessage,dependencyArray,_ref2){var isInitialMount=_ref2.isInitialMount,highlightedIndex=_ref2.highlightedIndex,items=_ref2.items,environment=_ref2.environment,rest=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_ref2,_excluded$3);(0,react.useEffect)((function(){isInitialMount||updateA11yStatus((function(){return getA11yMessage((0,esm_extends.Z)({highlightedIndex,highlightedItem:items[highlightedIndex],resultCount:items.length},rest))}),environment.document)}),dependencyArray)}function useScrollIntoView(_ref3){var highlightedIndex=_ref3.highlightedIndex,isOpen=_ref3.isOpen,itemRefs=_ref3.itemRefs,getItemNodeFromIndex=_ref3.getItemNodeFromIndex,menuElement=_ref3.menuElement,scrollIntoViewProp=_ref3.scrollIntoView,shouldScrollRef=(0,react.useRef)(!0);return useIsomorphicLayoutEffect((function(){highlightedIndex<0||!isOpen||!Object.keys(itemRefs.current).length||(!1===shouldScrollRef.current?shouldScrollRef.current=!0:scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex),menuElement))}),[highlightedIndex]),shouldScrollRef}var useControlPropsValidator=noop;function getChangesOnSelection(props,highlightedIndex,inputValue){var _props$items;void 0===inputValue&&(inputValue=!0);var shouldSelect=(null==(_props$items=props.items)?void 0:_props$items.length)&&highlightedIndex>=0;return(0,esm_extends.Z)({isOpen:!1,highlightedIndex:-1},shouldSelect&&(0,esm_extends.Z)({selectedItem:props.items[highlightedIndex],isOpen:getDefaultValue$1(props,"isOpen"),highlightedIndex:getDefaultValue$1(props,"highlightedIndex")},inputValue&&{inputValue:props.itemToString(props.items[highlightedIndex])}))}function downshiftCommonReducer(state,action,stateChangeTypes){var changes,type=action.type,props=action.props;switch(type){case stateChangeTypes.ItemMouseMove:changes={highlightedIndex:action.disabled?-1:action.index};break;case stateChangeTypes.MenuMouseLeave:changes={highlightedIndex:-1};break;case stateChangeTypes.ToggleButtonClick:case stateChangeTypes.FunctionToggleMenu:changes={isOpen:!state.isOpen,highlightedIndex:state.isOpen?-1:getHighlightedIndexOnOpen(props,state,0)};break;case stateChangeTypes.FunctionOpenMenu:changes={isOpen:!0,highlightedIndex:getHighlightedIndexOnOpen(props,state,0)};break;case stateChangeTypes.FunctionCloseMenu:changes={isOpen:!1};break;case stateChangeTypes.FunctionSetHighlightedIndex:changes={highlightedIndex:action.highlightedIndex};break;case stateChangeTypes.FunctionSetInputValue:changes={inputValue:action.inputValue};break;case stateChangeTypes.FunctionReset:changes={highlightedIndex:getDefaultValue$1(props,"highlightedIndex"),isOpen:getDefaultValue$1(props,"isOpen"),selectedItem:getDefaultValue$1(props,"selectedItem"),inputValue:getDefaultValue$1(props,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return(0,esm_extends.Z)({},state,changes)}prop_types_default().array.isRequired,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().number,prop_types_default().number,prop_types_default().number,prop_types_default().bool,prop_types_default().bool,prop_types_default().bool,prop_types_default().any,prop_types_default().any,prop_types_default().any,prop_types_default().string,prop_types_default().string,prop_types_default().string,prop_types_default().func,prop_types_default().string,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().shape({addEventListener:prop_types_default().func,removeEventListener:prop_types_default().func,document:prop_types_default().shape({getElementById:prop_types_default().func,activeElement:prop_types_default().any,body:prop_types_default().any})});(0,tslib_es6.pi)((0,tslib_es6.pi)({},defaultProps$3),{getA11yStatusMessage:function getA11yStatusMessage(_a){var isOpen=_a.isOpen,resultCount=_a.resultCount,previousResultCount=_a.previousResultCount;return isOpen?resultCount?resultCount!==previousResultCount?"".concat(resultCount," result").concat(1===resultCount?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}});var InputKeyDownArrowDown=0,InputKeyDownArrowUp=1,InputKeyDownEscape=2,InputKeyDownHome=3,InputKeyDownEnd=4,InputKeyDownPageUp=5,InputKeyDownPageDown=6,InputKeyDownEnter=7,InputChange=8,InputBlur=9,InputFocus=10,ItemClick=13,FunctionSelectItem=19,ControlledPropUpdatedSelectedItem=22,stateChangeTypes$1=Object.freeze({__proto__:null,InputKeyDownArrowDown,InputKeyDownArrowUp,InputKeyDownEscape,InputKeyDownHome,InputKeyDownEnd,InputKeyDownPageUp,InputKeyDownPageDown,InputKeyDownEnter,InputChange,InputBlur,InputFocus,MenuMouseLeave:11,ItemMouseMove:12,ItemClick,ToggleButtonClick:14,FunctionToggleMenu:15,FunctionOpenMenu:16,FunctionCloseMenu:17,FunctionSetHighlightedIndex:18,FunctionSelectItem,FunctionSetInputValue:20,FunctionReset:21,ControlledPropUpdatedSelectedItem});prop_types_default().array.isRequired,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().number,prop_types_default().number,prop_types_default().number,prop_types_default().bool,prop_types_default().bool,prop_types_default().bool,prop_types_default().any,prop_types_default().any,prop_types_default().any,prop_types_default().string,prop_types_default().string,prop_types_default().string,prop_types_default().string,prop_types_default().string,prop_types_default().string,prop_types_default().func,prop_types_default().string,prop_types_default().string,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().shape({addEventListener:prop_types_default().func,removeEventListener:prop_types_default().func,document:prop_types_default().shape({getElementById:prop_types_default().func,activeElement:prop_types_default().any,body:prop_types_default().any})});var validatePropTypes$1=noop;var defaultProps$1=(0,esm_extends.Z)({},defaultProps$3,{selectedItemChanged:function selectedItemChanged(prevItem,item){return prevItem!==item},getA11yStatusMessage:getA11yStatusMessage$1});function downshiftUseComboboxReducer(state,action){var _props$items,changes,type=action.type,props=action.props,altKey=action.altKey;switch(type){case ItemClick:changes={isOpen:getDefaultValue$1(props,"isOpen"),highlightedIndex:getDefaultValue$1(props,"highlightedIndex"),selectedItem:props.items[action.index],inputValue:props.itemToString(props.items[action.index])};break;case InputKeyDownArrowDown:changes=state.isOpen?{highlightedIndex:getNextWrappingIndex(1,state.highlightedIndex,props.items.length,action.getItemNodeFromIndex,!0)}:{highlightedIndex:altKey&&null==state.selectedItem?-1:getHighlightedIndexOnOpen(props,state,1,action.getItemNodeFromIndex),isOpen:props.items.length>=0};break;case InputKeyDownArrowUp:changes=state.isOpen?altKey?getChangesOnSelection(props,state.highlightedIndex):{highlightedIndex:getNextWrappingIndex(-1,state.highlightedIndex,props.items.length,action.getItemNodeFromIndex,!0)}:{highlightedIndex:getHighlightedIndexOnOpen(props,state,-1,action.getItemNodeFromIndex),isOpen:props.items.length>=0};break;case InputKeyDownEnter:changes=getChangesOnSelection(props,state.highlightedIndex);break;case InputKeyDownEscape:changes=(0,esm_extends.Z)({isOpen:!1,highlightedIndex:-1},!state.isOpen&&{selectedItem:null,inputValue:""});break;case InputKeyDownPageUp:changes={highlightedIndex:getNextWrappingIndex(-10,state.highlightedIndex,props.items.length,action.getItemNodeFromIndex,!1)};break;case InputKeyDownPageDown:changes={highlightedIndex:getNextWrappingIndex(10,state.highlightedIndex,props.items.length,action.getItemNodeFromIndex,!1)};break;case InputKeyDownHome:changes={highlightedIndex:getNextNonDisabledIndex(1,0,props.items.length,action.getItemNodeFromIndex,!1)};break;case InputKeyDownEnd:changes={highlightedIndex:getNextNonDisabledIndex(-1,props.items.length-1,props.items.length,action.getItemNodeFromIndex,!1)};break;case InputBlur:changes=(0,esm_extends.Z)({isOpen:!1,highlightedIndex:-1},state.highlightedIndex>=0&&(null==(_props$items=props.items)?void 0:_props$items.length)&&action.selectItem&&{selectedItem:props.items[state.highlightedIndex],inputValue:props.itemToString(props.items[state.highlightedIndex])});break;case InputChange:changes={isOpen:!0,highlightedIndex:getDefaultValue$1(props,"highlightedIndex"),inputValue:action.inputValue};break;case InputFocus:changes={isOpen:!0,highlightedIndex:getHighlightedIndexOnOpen(props,state,0)};break;case FunctionSelectItem:changes={selectedItem:action.selectedItem,inputValue:props.itemToString(action.selectedItem)};break;case ControlledPropUpdatedSelectedItem:changes={inputValue:action.inputValue};break;default:return downshiftCommonReducer(state,action,stateChangeTypes$1)}return(0,esm_extends.Z)({},state,changes)}var _excluded$1=["onMouseLeave","refKey","ref"],_excluded2$1=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],_excluded3=["onClick","onPress","refKey","ref"],_excluded4=["onKeyDown","onChange","onInput","onFocus","onBlur","onChangeText","refKey","ref"];function useCombobox(userProps){void 0===userProps&&(userProps={}),validatePropTypes$1(userProps,useCombobox);var props=(0,esm_extends.Z)({},defaultProps$1,userProps),initialIsOpen=props.initialIsOpen,defaultIsOpen=props.defaultIsOpen,items=props.items,scrollIntoView=props.scrollIntoView,environment=props.environment,getA11yStatusMessage=props.getA11yStatusMessage,getA11ySelectionMessage=props.getA11ySelectionMessage,itemToString=props.itemToString,initialState=function getInitialState$1(props){var initialState=getInitialState$2(props),selectedItem=initialState.selectedItem,inputValue=initialState.inputValue;return""===inputValue&&selectedItem&&void 0===props.defaultInputValue&&void 0===props.initialInputValue&&void 0===props.inputValue&&(inputValue=props.itemToString(selectedItem)),(0,esm_extends.Z)({},initialState,{inputValue})}(props),_useControlledReducer=function useControlledReducer(reducer,initialState,props){var previousSelectedItemRef=(0,react.useRef)(),_useEnhancedReducer=useEnhancedReducer(reducer,initialState,props),state=_useEnhancedReducer[0],dispatch=_useEnhancedReducer[1];return(0,react.useEffect)((function(){isControlledProp(props,"selectedItem")&&(props.selectedItemChanged(previousSelectedItemRef.current,props.selectedItem)&&dispatch({type:ControlledPropUpdatedSelectedItem,inputValue:props.itemToString(props.selectedItem)}),previousSelectedItemRef.current=state.selectedItem===previousSelectedItemRef.current?props.selectedItem:state.selectedItem)}),[state.selectedItem,props.selectedItem]),[getState(state,props),dispatch]}(downshiftUseComboboxReducer,initialState,props),state=_useControlledReducer[0],dispatch=_useControlledReducer[1],isOpen=state.isOpen,highlightedIndex=state.highlightedIndex,selectedItem=state.selectedItem,inputValue=state.inputValue,menuRef=(0,react.useRef)(null),itemRefs=(0,react.useRef)({}),inputRef=(0,react.useRef)(null),toggleButtonRef=(0,react.useRef)(null),isInitialMountRef=(0,react.useRef)(!0),elementIds=useElementIds(props),previousResultCountRef=(0,react.useRef)(),latest=useLatestRef({state,props}),getItemNodeFromIndex=(0,react.useCallback)((function(index){return itemRefs.current[elementIds.getItemId(index)]}),[elementIds]);useA11yMessageSetter(getA11yStatusMessage,[isOpen,highlightedIndex,inputValue,items],(0,esm_extends.Z)({isInitialMount:isInitialMountRef.current,previousResultCount:previousResultCountRef.current,items,environment,itemToString},state)),useA11yMessageSetter(getA11ySelectionMessage,[selectedItem],(0,esm_extends.Z)({isInitialMount:isInitialMountRef.current,previousResultCount:previousResultCountRef.current,items,environment,itemToString},state));var shouldScrollRef=useScrollIntoView({menuElement:menuRef.current,highlightedIndex,isOpen,itemRefs,scrollIntoView,getItemNodeFromIndex});useControlPropsValidator({isInitialMount:isInitialMountRef.current,props,state}),(0,react.useEffect)((function(){(initialIsOpen||defaultIsOpen||isOpen)&&inputRef.current&&inputRef.current.focus()}),[]),(0,react.useEffect)((function(){isInitialMountRef.current||(previousResultCountRef.current=items.length)}));var mouseAndTouchTrackersRef=useMouseAndTouchTracker(isOpen,[inputRef,menuRef,toggleButtonRef],environment,(function(){dispatch({type:InputBlur,selectItem:!1})})),setGetterPropCallInfo=useGetterPropsCalledChecker();(0,react.useEffect)((function(){return isInitialMountRef.current=!1,function(){isInitialMountRef.current=!0}}),[]),(0,react.useEffect)((function(){var _environment$document;if(isOpen){if((null==(_environment$document=environment.document)?void 0:_environment$document.activeElement)!==inputRef.current){var _inputRef$current;null==inputRef||null==(_inputRef$current=inputRef.current)||_inputRef$current.focus()}}else itemRefs.current={}}),[isOpen,environment]);var inputKeyDownHandlers=(0,react.useMemo)((function(){return{ArrowDown:function ArrowDown(event){event.preventDefault(),dispatch({type:InputKeyDownArrowDown,altKey:event.altKey,getItemNodeFromIndex})},ArrowUp:function ArrowUp(event){event.preventDefault(),dispatch({type:InputKeyDownArrowUp,altKey:event.altKey,getItemNodeFromIndex})},Home:function Home(event){latest.current.state.isOpen&&(event.preventDefault(),dispatch({type:InputKeyDownHome,getItemNodeFromIndex}))},End:function End(event){latest.current.state.isOpen&&(event.preventDefault(),dispatch({type:InputKeyDownEnd,getItemNodeFromIndex}))},Escape:function Escape(event){var latestState=latest.current.state;(latestState.isOpen||latestState.inputValue||latestState.selectedItem||latestState.highlightedIndex>-1)&&(event.preventDefault(),dispatch({type:InputKeyDownEscape}))},Enter:function Enter(event){latest.current.state.isOpen&&229!==event.which&&(event.preventDefault(),dispatch({type:InputKeyDownEnter,getItemNodeFromIndex}))},PageUp:function PageUp(event){latest.current.state.isOpen&&(event.preventDefault(),dispatch({type:InputKeyDownPageUp,getItemNodeFromIndex}))},PageDown:function PageDown(event){latest.current.state.isOpen&&(event.preventDefault(),dispatch({type:InputKeyDownPageDown,getItemNodeFromIndex}))}}}),[dispatch,latest,getItemNodeFromIndex]),getLabelProps=(0,react.useCallback)((function(labelProps){return(0,esm_extends.Z)({id:elementIds.labelId,htmlFor:elementIds.inputId},labelProps)}),[elementIds]),getMenuProps=(0,react.useCallback)((function(_temp,_temp2){var _extends2,_ref=void 0===_temp?{}:_temp,onMouseLeave=_ref.onMouseLeave,_ref$refKey=_ref.refKey,refKey=void 0===_ref$refKey?"ref":_ref$refKey,ref=_ref.ref,rest=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_ref,_excluded$1),_ref2$suppressRefErro=(void 0===_temp2?{}:_temp2).suppressRefError;return setGetterPropCallInfo("getMenuProps",void 0!==_ref2$suppressRefErro&&_ref2$suppressRefErro,refKey,menuRef),(0,esm_extends.Z)(((_extends2={})[refKey]=handleRefs(ref,(function(menuNode){menuRef.current=menuNode})),_extends2.id=elementIds.menuId,_extends2.role="listbox",_extends2["aria-labelledby"]=rest&&rest["aria-label"]?void 0:""+elementIds.labelId,_extends2.onMouseLeave=callAllEventHandlers(onMouseLeave,(function(){dispatch({type:11})})),_extends2),rest)}),[dispatch,setGetterPropCallInfo,elementIds]),getItemProps=(0,react.useCallback)((function(_temp3){var _extends3,_ref4,_ref3=void 0===_temp3?{}:_temp3,itemProp=_ref3.item,indexProp=_ref3.index,_ref3$refKey=_ref3.refKey,refKey=void 0===_ref3$refKey?"ref":_ref3$refKey,ref=_ref3.ref,onMouseMove=_ref3.onMouseMove,onMouseDown=_ref3.onMouseDown,onClick=_ref3.onClick;_ref3.onPress;var disabled=_ref3.disabled,rest=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_ref3,_excluded2$1),_latest$current=latest.current,latestProps=_latest$current.props,latestState=_latest$current.state,index=getItemAndIndex(itemProp,indexProp,latestProps.items,"Pass either item or index to getItemProps!")[1],customClickHandler=onClick;return(0,esm_extends.Z)(((_extends3={})[refKey]=handleRefs(ref,(function(itemNode){itemNode&&(itemRefs.current[elementIds.getItemId(index)]=itemNode)})),_extends3.disabled=disabled,_extends3.role="option",_extends3["aria-selected"]=""+(index===latestState.highlightedIndex),_extends3.id=elementIds.getItemId(index),_extends3),!disabled&&((_ref4={}).onClick=callAllEventHandlers(customClickHandler,(function itemHandleClick(){dispatch({type:ItemClick,index})})),_ref4),{onMouseMove:callAllEventHandlers(onMouseMove,(function itemHandleMouseMove(){index!==latestState.highlightedIndex&&(shouldScrollRef.current=!1,dispatch({type:12,index,disabled}))})),onMouseDown:callAllEventHandlers(onMouseDown,(function itemHandleMouseDown(e){return e.preventDefault()}))},rest)}),[dispatch,latest,shouldScrollRef,elementIds]),getToggleButtonProps=(0,react.useCallback)((function(_temp4){var _extends4,_ref5=void 0===_temp4?{}:_temp4,onClick=_ref5.onClick;_ref5.onPress;var _ref5$refKey=_ref5.refKey,refKey=void 0===_ref5$refKey?"ref":_ref5$refKey,ref=_ref5.ref,rest=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_ref5,_excluded3),latestState=latest.current.state;return(0,esm_extends.Z)(((_extends4={})[refKey]=handleRefs(ref,(function(toggleButtonNode){toggleButtonRef.current=toggleButtonNode})),_extends4["aria-controls"]=elementIds.menuId,_extends4["aria-expanded"]=latestState.isOpen,_extends4.id=elementIds.toggleButtonId,_extends4.tabIndex=-1,_extends4),!rest.disabled&&(0,esm_extends.Z)({},{onClick:callAllEventHandlers(onClick,(function toggleButtonHandleClick(){dispatch({type:14})}))}),rest)}),[dispatch,latest,elementIds]),getInputProps=(0,react.useCallback)((function(_temp5,_temp6){var _extends5,_ref6=void 0===_temp5?{}:_temp5,onKeyDown=_ref6.onKeyDown,onChange=_ref6.onChange,onInput=_ref6.onInput,onFocus=_ref6.onFocus,onBlur=_ref6.onBlur;_ref6.onChangeText;var _ref6$refKey=_ref6.refKey,refKey=void 0===_ref6$refKey?"ref":_ref6$refKey,ref=_ref6.ref,rest=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_ref6,_excluded4),_ref7$suppressRefErro=(void 0===_temp6?{}:_temp6).suppressRefError;setGetterPropCallInfo("getInputProps",void 0!==_ref7$suppressRefErro&&_ref7$suppressRefErro,refKey,inputRef);var _eventHandlers,latestState=latest.current.state,eventHandlers={};rest.disabled||((_eventHandlers={}).onChange=callAllEventHandlers(onChange,onInput,(function inputHandleChange(event){dispatch({type:InputChange,inputValue:event.target.value})})),_eventHandlers.onKeyDown=callAllEventHandlers(onKeyDown,(function inputHandleKeyDown(event){var key=normalizeArrowKey(event);key&&inputKeyDownHandlers[key]&&inputKeyDownHandlers[key](event)})),_eventHandlers.onBlur=callAllEventHandlers(onBlur,(function inputHandleBlur(event){if(latestState.isOpen&&!mouseAndTouchTrackersRef.current.isMouseDown){var isBlurByTabChange=null===event.relatedTarget&&environment.document.activeElement!==environment.document.body;dispatch({type:InputBlur,selectItem:!isBlurByTabChange})}})),_eventHandlers.onFocus=callAllEventHandlers(onFocus,(function inputHandleFocus(){latestState.isOpen||dispatch({type:InputFocus})})),eventHandlers=_eventHandlers);return(0,esm_extends.Z)(((_extends5={})[refKey]=handleRefs(ref,(function(inputNode){inputRef.current=inputNode})),_extends5["aria-activedescendant"]=latestState.isOpen&&latestState.highlightedIndex>-1?elementIds.getItemId(latestState.highlightedIndex):"",_extends5["aria-autocomplete"]="list",_extends5["aria-controls"]=elementIds.menuId,_extends5["aria-expanded"]=latestState.isOpen,_extends5["aria-labelledby"]=rest&&rest["aria-label"]?void 0:""+elementIds.labelId,_extends5.autoComplete="off",_extends5.id=elementIds.inputId,_extends5.role="combobox",_extends5.value=latestState.inputValue,_extends5),eventHandlers,rest)}),[setGetterPropCallInfo,latest,elementIds,inputKeyDownHandlers,dispatch,mouseAndTouchTrackersRef,environment]),toggleMenu=(0,react.useCallback)((function(){dispatch({type:15})}),[dispatch]),closeMenu=(0,react.useCallback)((function(){dispatch({type:17})}),[dispatch]),openMenu=(0,react.useCallback)((function(){dispatch({type:16})}),[dispatch]),setHighlightedIndex=(0,react.useCallback)((function(newHighlightedIndex){dispatch({type:18,highlightedIndex:newHighlightedIndex})}),[dispatch]),selectItem=(0,react.useCallback)((function(newSelectedItem){dispatch({type:FunctionSelectItem,selectedItem:newSelectedItem})}),[dispatch]);return{getItemProps,getLabelProps,getMenuProps,getInputProps,getToggleButtonProps,toggleMenu,openMenu,closeMenu,setHighlightedIndex,setInputValue:(0,react.useCallback)((function(newInputValue){dispatch({type:20,inputValue:newInputValue})}),[dispatch]),selectItem,reset:(0,react.useCallback)((function(){dispatch({type:21})}),[dispatch]),highlightedIndex,isOpen,selectedItem,inputValue}}useCombobox.stateChangeTypes=stateChangeTypes$1;prop_types_default().array,prop_types_default().array,prop_types_default().array,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().number,prop_types_default().number,prop_types_default().number,prop_types_default().func,prop_types_default().func,prop_types_default().string,prop_types_default().string,prop_types_default().shape({addEventListener:prop_types_default().func,removeEventListener:prop_types_default().func,document:prop_types_default().shape({getElementById:prop_types_default().func,activeElement:prop_types_default().any,body:prop_types_default().any})});var arrow_drop_down_svg=__webpack_require__("./node_modules/@mdxeditor/editor/dist/icons/arrow_drop_down.svg.js");const DownshiftAutoComplete=({autofocus,suggestions,control,inputName,placeholder,initialInputValue,setValue})=>{const[items,setItems]=react.useState(suggestions.slice(0,20)),enableAutoComplete=suggestions.length>0,{isOpen,getToggleButtonProps,getMenuProps,getInputProps,highlightedIndex,getItemProps,selectedItem}=useCombobox({initialInputValue,onInputValueChange({inputValue=""}){setValue(inputName,inputValue),inputValue=(null==inputValue?void 0:inputValue.toLowerCase())||"";const matchingItems=[];for(const suggestion of suggestions)if(suggestion.toLowerCase().includes(inputValue)&&(matchingItems.push(suggestion),matchingItems.length>=20))break;setItems(matchingItems)},items,itemToString:item=>item??""}),dropdownIsVisible=isOpen&&items.length>0;return react.createElement("div",{className:ui_module_css.ZP.downshiftAutocompleteContainer},react.createElement("div",{"data-visible-dropdown":dropdownIsVisible,className:ui_module_css.ZP.downshiftInputWrapper},react.createElement(Controller,{name:inputName,control,render:({field})=>{const downshiftSrcProps=getInputProps();return react.createElement("input",{...downshiftSrcProps,name:field.name,placeholder,className:ui_module_css.ZP.downshiftInput,size:30,"data-editor-dialog":!0,autoFocus:autofocus})}}),enableAutoComplete&&react.createElement("button",{"aria-label":"toggle menu",type:"button",...getToggleButtonProps()},react.createElement(arrow_drop_down_svg.Z,null))),react.createElement("div",{className:ui_module_css.ZP.downshiftAutocompleteContainer},react.createElement("ul",{...getMenuProps(),"data-visible":dropdownIsVisible},items.map(((item,index)=>react.createElement("li",{"data-selected":selectedItem===item,"data-highlighted":highlightedIndex===index,key:`${item}${index}`,...getItemProps({item,index})},item))))))};function LinkEditForm({url,title,onSubmit,onCancel,linkAutocompleteSuggestions}){const{register,handleSubmit,control,setValue,reset:_}=function useForm(props={}){const _formControl=react.useRef(),_values=react.useRef(),[formState,updateFormState]=react.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(props.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(props.defaultValues)?void 0:props.defaultValues});_formControl.current||(_formControl.current={...createFormControl(props,(()=>updateFormState((formState=>({...formState}))))),formState});const control=_formControl.current.control;return control._options=props,useSubscribe({subject:control._subjects.state,next:value=>{shouldRenderFormState(value,control._proxyFormState,control._updateFormState,!0)&&updateFormState({...control._formState})}}),react.useEffect((()=>{props.values&&!deepEqual(props.values,_values.current)?(control._reset(props.values,control._options.resetOptions),_values.current=props.values):control._resetDefaultValues()}),[props.values,control]),react.useEffect((()=>{control._state.mount||(control._updateValid(),control._state.mount=!0),control._state.watch&&(control._state.watch=!1,control._subjects.state.next({...control._formState})),control._removeUnmounted()})),_formControl.current.formState=getProxyFormState(formState,control),_formControl.current}({values:{url,title}});return react.createElement("form",{onSubmit:e=>{handleSubmit(onSubmit)(e),e.stopPropagation(),e.preventDefault()},onReset:e=>{e.stopPropagation(),onCancel()},className:classnames_default()(ui_module_css.ZP.multiFieldForm,ui_module_css.ZP.linkDialogEditForm)},react.createElement("div",{className:ui_module_css.ZP.formField},react.createElement("label",{htmlFor:"link-url"},"URL"),react.createElement(DownshiftAutoComplete,{initialInputValue:url,inputName:"url",suggestions:linkAutocompleteSuggestions,setValue,control,placeholder:"Select or paste an URL",autofocus:!0})),react.createElement("div",{className:ui_module_css.ZP.formField},react.createElement("label",{htmlFor:"link-title"},"Title"),react.createElement("input",{id:"link-title",className:ui_module_css.ZP.textInput,size:40,...register("title")})),react.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},react.createElement("button",{type:"submit",title:"Set URL","aria-label":"Set URL",className:classnames_default()(ui_module_css.ZP.primaryButton)},"Save"),react.createElement("button",{type:"reset",title:"Cancel change","aria-label":"Cancel change",className:classnames_default()(ui_module_css.ZP.secondaryButton)},"Cancel")))}(0,Lexical.createCommand)();const LinkDialog=()=>{const[editorRootElementRef]=core.vY.useEmitterValues("editorRootElementRef"),publishWindowChange=linkDialogPluginHooks.usePublisher("onWindowChange"),[activeEditor]=core.vY.useEmitterValues("activeEditor"),[linkDialogState,linkAutocompleteSuggestions]=linkDialogPluginHooks.useEmitterValues("linkDialogState","linkAutocompleteSuggestions"),updateLink=linkDialogPluginHooks.usePublisher("updateLink"),cancelLinkEdit=linkDialogPluginHooks.usePublisher("cancelLinkEdit"),switchFromPreviewToLinkEdit=linkDialogPluginHooks.usePublisher("switchFromPreviewToLinkEdit"),removeLink=linkDialogPluginHooks.usePublisher("removeLink");react.useEffect((()=>{const update=()=>{null==activeEditor||activeEditor.getEditorState().read((()=>{publishWindowChange(!0)}))};return window.addEventListener("resize",update),window.addEventListener("scroll",update),()=>{window.removeEventListener("resize",update),window.removeEventListener("scroll",update)}}),[activeEditor,publishWindowChange]);const[copyUrlTooltipOpen,setCopyUrlTooltipOpen]=react.useState(!1),theRect=null==linkDialogState?void 0:linkDialogState.rectangle,urlIsExternal="preview"===linkDialogState.type&&linkDialogState.url.startsWith("http");return react.createElement(dist.fC,{open:"inactive"!==linkDialogState.type},react.createElement(dist.ee,{"data-visible":"edit"===linkDialogState.type,className:ui_module_css.ZP.linkDialogAnchor,style:{top:`${(null==theRect?void 0:theRect.top)??0}px`,left:`${(null==theRect?void 0:theRect.left)??0}px`,width:`${(null==theRect?void 0:theRect.width)??0}px`,height:`${(null==theRect?void 0:theRect.height)??0}px`}}),react.createElement(dist.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react.createElement(dist.VY,{className:classnames_default()(ui_module_css.ZP.linkDialogPopoverContent),sideOffset:5,onOpenAutoFocus:e=>e.preventDefault(),key:linkDialogState.linkNodeKey},"edit"===linkDialogState.type&&react.createElement(LinkEditForm,{url:linkDialogState.url,title:linkDialogState.title,onSubmit:updateLink,onCancel:cancelLinkEdit.bind(null,!0),linkAutocompleteSuggestions}),"preview"===linkDialogState.type&&react.createElement(react.Fragment,null,react.createElement("a",{className:ui_module_css.ZP.linkDialogPreviewAnchor,href:linkDialogState.url,...urlIsExternal?{target:"_blank",rel:"noreferrer"}:{},title:urlIsExternal?`Open ${linkDialogState.url} in new window`:linkDialogState.url},react.createElement("span",null,linkDialogState.url),urlIsExternal&&react.createElement(OpenInNewIcon,null)),react.createElement(ActionButton,{onClick:()=>switchFromPreviewToLinkEdit(!0),title:"Edit link URL","aria-label":"Edit link URL"},react.createElement(EditIcon,null)),react.createElement(react_tooltip_dist.zt,null,react.createElement(react_tooltip_dist.fC,{open:copyUrlTooltipOpen},react.createElement(react_tooltip_dist.xz,{asChild:!0},react.createElement(ActionButton,{title:"Copy to clipboard","aria-label":"Copy link URL",onClick:()=>{window.navigator.clipboard.writeText(linkDialogState.url).then((()=>{setCopyUrlTooltipOpen(!0),setTimeout((()=>setCopyUrlTooltipOpen(!1)),1e3)}))}},copyUrlTooltipOpen?react.createElement(CheckIcon,null):react.createElement(CopyIcon,null))),react.createElement(react_tooltip_dist.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react.createElement(react_tooltip_dist.VY,{className:classnames_default()(ui_module_css.ZP.tooltipContent),sideOffset:5},"Copied!",react.createElement(react_tooltip_dist.Eh,null))))),react.createElement(ActionButton,{title:"Remove link","aria-label":"Remove link",onClick:()=>removeLink(!0)},react.createElement(LinkOffIcon,null))))))},ActionButton=react.forwardRef((({className,...props},ref)=>react.createElement("button",{className:classnames_default()(ui_module_css.ZP.actionButton,className),ref,...props})));var realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),gurx_react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");function getLinkNodeInSelection(selection){if(!selection)return null;const node=function getSelectedNode(selection){try{const anchor=selection.anchor,focus=selection.focus,anchorNode=selection.anchor.getNode(),focusNode=selection.focus.getNode();return anchorNode===focusNode?anchorNode:selection.isBackward()?(0,LexicalSelection.$isAtNodeEnd)(focus)?anchorNode:focusNode:(0,LexicalSelection.$isAtNodeEnd)(anchor)?anchorNode:focusNode}catch{return null}}(selection);if(null===node)return null;const parent=node.getParent();return(0,LexicalLink.$isLinkNode)(parent)?parent:(0,LexicalLink.$isLinkNode)(node)?node:null}const linkDialogSystem=(0,realmFactory.By)(((r,[{activeEditor,currentSelection,createActiveEditorSubscription}])=>{const dialogState=r.node(!1),onWindowChange=r.node(),linkDialogState=r.node({type:"inactive"},!0),updateLink=r.node(),cancelLinkEdit=r.node(),applyLinkChanges=r.node(),switchFromPreviewToLinkEdit=r.node(),removeLink=r.node(),openLinkEditDialog=r.node(),linkAutocompleteSuggestions=r.node([]);return r.sub(r.pipe(openLinkEditDialog,r.o.withLatestFrom(currentSelection,activeEditor),r.o.filter((([,selection])=>(0,Lexical.$isRangeSelection)(selection)))),(([,selection,editor])=>{null==editor||editor.focus((()=>{null==editor||editor.getEditorState().read((()=>{const node=getLinkNodeInSelection(selection),rectangle=getSelectionRectangle(editor);node?r.pub(linkDialogState,{type:"edit",initialUrl:node.getURL(),initialTitle:node.getTitle()||"",url:node.getURL(),title:node.getTitle()||"",linkNodeKey:node.getKey(),rectangle}):r.pub(linkDialogState,{type:"edit",initialUrl:"",initialTitle:"",title:"",url:"",linkNodeKey:"",rectangle})}))}))})),r.sub(r.pipe(removeLink,r.o.withLatestFrom(activeEditor)),(([,editor])=>{null==editor||editor.dispatchCommand(LexicalLink.TOGGLE_LINK_COMMAND,null)})),r.pub(createActiveEditorSubscription,(editor=>editor.registerCommand(Lexical.KEY_ESCAPE_COMMAND,(()=>"preview"===r.getValue(linkDialogState).type&&(r.pub(linkDialogState,{type:"inactive"}),!0)),Lexical.COMMAND_PRIORITY_LOW))),r.pub(createActiveEditorSubscription,(editor=>editor.registerCommand(Lexical.KEY_MODIFIER_COMMAND,(event=>{if("k"===event.key&&(detectMac.jB?event.metaKey:event.ctrlKey)){const selection=(0,Lexical.$getSelection)();return!(!(0,Lexical.$isRangeSelection)(selection)||!getLinkNodeInSelection(selection)&&selection.isCollapsed())&&(r.pub(openLinkEditDialog,!0),event.stopPropagation(),event.preventDefault(),!0)}return!1}),Lexical.COMMAND_PRIORITY_HIGH))),r.link(r.pipe(switchFromPreviewToLinkEdit,r.o.withLatestFrom(linkDialogState),r.o.map((([,state])=>{if("preview"===state.type)return{type:"edit",initialUrl:state.url,url:state.url,linkNodeKey:state.linkNodeKey,rectangle:state.rectangle};throw new Error("Cannot switch to edit mode when not in preview mode")}))),linkDialogState),r.sub(r.pipe(updateLink,r.o.withLatestFrom(activeEditor,linkDialogState)),(([payload,editor,state])=>{const url=payload.url.trim(),title=payload.title.trim();""!==url.trim()?(null==editor||editor.dispatchCommand(LexicalLink.TOGGLE_LINK_COMMAND,{url,title}),setTimeout((()=>{null==editor||editor.update((()=>{const node=getLinkNodeInSelection((0,Lexical.$getSelection)());null==node||node.setTitle(title)}))})),r.pub(linkDialogState,{type:"preview",linkNodeKey:state.linkNodeKey,rectangle:state.rectangle,url})):("edit"===state.type&&""!==state.initialUrl&&(null==editor||editor.dispatchCommand(LexicalLink.TOGGLE_LINK_COMMAND,null)),r.pub(linkDialogState,{type:"inactive"}))})),r.link(r.pipe(cancelLinkEdit,r.o.withLatestFrom(linkDialogState,activeEditor),r.o.map((([,state,editor])=>{if("edit"===state.type)return null==editor||editor.focus(),""===state.initialUrl?{type:"inactive"}:{type:"preview",url:state.initialUrl,linkNodeKey:state.linkNodeKey,rectangle:state.rectangle};throw new Error("Cannot cancel edit when not in edit mode")}))),linkDialogState),r.link(r.pipe(r.combine(currentSelection,onWindowChange),r.o.withLatestFrom(activeEditor,linkDialogState),r.o.map((([[selection],activeEditor2])=>{if((0,Lexical.$isRangeSelection)(selection)&&activeEditor2){const node=getLinkNodeInSelection(selection);return node?{type:"preview",url:node.getURL(),linkNodeKey:node.getKey(),rectangle:getSelectionRectangle(activeEditor2)}:{type:"inactive"}}return{type:"inactive"}}))),linkDialogState),{dialogState,onWindowChange,linkDialogState,updateLink,switchFromPreviewToLinkEdit,cancelLinkEdit,removeLink,openLinkEditDialog,applyLinkChanges,linkAutocompleteSuggestions}}),[core.Wo]),[linkDialogPlugin,linkDialogPluginHooks]=(0,gurx_react.nq)({id:"link-dialog",dependencies:["link"],systemSpec:linkDialogSystem,applyParamsToSystem(r,params={}){r.pubKey("linkAutocompleteSuggestions",params.linkAutocompleteSuggestions||[])},init(r){r.pubKey("addComposerChild",LinkDialog)}})},"./node_modules/@mdxeditor/editor/dist/plugins/link/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>linkPlugin});var react=__webpack_require__("./node_modules/react/index.js"),core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),LexicalLink=__webpack_require__("./node_modules/@lexical/link/LexicalLink.js");const MdastLinkVisitor={testNode:"link",visitNode({mdastNode,actions}){actions.addAndStepInto((0,LexicalLink.$createLinkNode)(mdastNode.url,{title:mdastNode.title}))}},LexicalLinkVisitor={testLexicalNode:LexicalLink.$isLinkNode,visitLexicalNode:({lexicalNode,actions})=>{actions.addAndStepInto("link",{url:lexicalNode.getURL(),title:lexicalNode.getTitle()})}};var LexicalLinkPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalLinkPlugin.js"),LexicalAutoLinkPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalAutoLinkPlugin.js");const MATCHERS=[(0,LexicalAutoLinkPlugin.createLinkMatcherWithRegExp)(/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,(text=>text.startsWith("http")?text:`https://${text}`)),(0,LexicalAutoLinkPlugin.createLinkMatcherWithRegExp)(/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,(text=>`mailto:${text}`))],AutoLinkPlugin_LexicalAutoLinkPlugin=()=>react.createElement(LexicalAutoLinkPlugin.AutoLinkPlugin,{matchers:MATCHERS});var realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),gurx_react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const linkSystem=(0,realmFactory.By)((r=>({disableAutoLink:r.node(!1)})),[core.Wo]),[linkPlugin]=(0,gurx_react.nq)({id:"link",systemSpec:linkSystem,init:(realm,params)=>{const disableAutoLink=Boolean(null==params?void 0:params.disableAutoLink);realm.pubKey("addImportVisitor",MdastLinkVisitor),realm.pubKey("addLexicalNode",LexicalLink.LinkNode),realm.pubKey("addLexicalNode",LexicalLink.AutoLinkNode),realm.pubKey("addExportVisitor",LexicalLinkVisitor),realm.pubKey("disableAutoLink",disableAutoLink);const linkPluginProps=(null==params?void 0:params.validateUrl)?{validateUrl:params.validateUrl}:{};realm.pubKey("addComposerChild",(()=>react.createElement(react.Fragment,null,react.createElement(LexicalLinkPlugin.LinkPlugin,{...linkPluginProps}),disableAutoLink?null:react.createElement(AutoLinkPlugin_LexicalAutoLinkPlugin,null))))}})},"./node_modules/@mdxeditor/editor/dist/plugins/lists/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{df:()=>listsPlugin,qT:()=>listsPluginHooks});var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),LexicalList=__webpack_require__("./node_modules/@lexical/list/LexicalList.js");const MdastListVisitor={testNode:"list",visitNode:function({mdastNode,lexicalParent,actions}){const lexicalNode=(0,LexicalList.$createListNode)(mdastNode.ordered?"number":"bullet");if((0,LexicalList.$isListItemNode)(lexicalParent)){const dedicatedParent=(0,LexicalList.$createListItemNode)();dedicatedParent.append(lexicalNode),lexicalParent.insertAfter(dedicatedParent)}else lexicalParent.append(lexicalNode);actions.visitChildren(mdastNode,lexicalNode)}},MdastListItemVisitor={testNode:"listItem",visitNode({actions}){actions.addAndStepInto((0,LexicalList.$createListItemNode)())}},LexicalListVisitor={testLexicalNode:LexicalList.$isListNode,visitLexicalNode:({lexicalNode,actions})=>{actions.addAndStepInto("list",{ordered:"number"===lexicalNode.getListType(),spread:!1})}},LexicalListItemVisitor={testLexicalNode:LexicalList.$isListItemNode,visitLexicalNode:({lexicalNode,mdastParent,actions})=>{const children=lexicalNode.getChildren(),firstChild=children[0];if(1===children.length&&(0,LexicalList.$isListNode)(firstChild)){const prevListItemNode=mdastParent.children.at(-1);actions.visitChildren(lexicalNode,prevListItemNode)}else{const listItem=actions.appendToParent(mdastParent,{type:"listItem",spread:!1,children:[{type:"paragraph",children:[]}]});actions.visitChildren(lexicalNode,listItem.children[0])}}};var Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),LexicalTabIndentationPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalTabIndentationPlugin.js"),LexicalListPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalListPlugin.js"),LexicalUtils=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const ListTypeCommandMap=new Map([["number",LexicalList.INSERT_ORDERED_LIST_COMMAND],["bullet",LexicalList.INSERT_UNORDERED_LIST_COMMAND],["",LexicalList.REMOVE_LIST_COMMAND]]),listsSystem=(0,realmFactory.By)(((r,[{activeEditor,currentSelection}])=>{const currentListType=r.node(""),applyListType=r.node();return r.sub(r.pipe(applyListType,r.o.withLatestFrom(activeEditor)),(([listType,theEditor])=>{null==theEditor||theEditor.dispatchCommand(ListTypeCommandMap.get(listType),void 0)})),r.sub(r.pipe(currentSelection,r.o.withLatestFrom(activeEditor)),(([selection,theEditor])=>{if(!selection||!theEditor)return;const anchorNode=selection.anchor.getNode();let element="root"===anchorNode.getKey()?anchorNode:(0,LexicalUtils.$findMatchingParent)(anchorNode,(e=>{const parent=e.getParent();return null!==parent&&(0,Lexical.$isRootOrShadowRoot)(parent)}));null===element&&(element=anchorNode.getTopLevelElementOrThrow());const elementKey=element.getKey();if(null!==theEditor.getElementByKey(elementKey))if((0,LexicalList.$isListNode)(element)){const parentList=(0,LexicalUtils.$getNearestNodeOfType)(anchorNode,LexicalList.ListNode),type=parentList?parentList.getListType():element.getListType();r.pub(currentListType,type)}else r.pub(currentListType,null)})),{currentListType,applyListType}}),[core.Wo]),[listsPlugin,listsPluginHooks]=(0,react.nq)({id:"lists",systemSpec:listsSystem,init:realm=>{var _a;realm.pubKey("addImportVisitor",MdastListVisitor),realm.pubKey("addImportVisitor",MdastListItemVisitor),realm.pubKey("addLexicalNode",LexicalList.ListItemNode),realm.pubKey("addLexicalNode",LexicalList.ListNode),realm.pubKey("addExportVisitor",LexicalListVisitor),realm.pubKey("addExportVisitor",LexicalListItemVisitor),null==(_a=realm.getKeyValue("rootEditor"))||_a.registerCommand(Lexical.INDENT_CONTENT_COMMAND,(()=>!function isIndentPermitted(maxDepth){const selection=(0,Lexical.$getSelection)();if(!(0,Lexical.$isRangeSelection)(selection))return!1;const elementNodesInSelection=function getElementNodesInSelection(selection){const nodesInSelection=selection.getNodes();if(0===nodesInSelection.length)return new Set([selection.anchor.getNode().getParentOrThrow(),selection.focus.getNode().getParentOrThrow()]);return new Set(nodesInSelection.map((n=>(0,Lexical.$isElementNode)(n)?n:n.getParentOrThrow())))}(selection);let totalDepth=0;for(const elementNode of elementNodesInSelection)if((0,LexicalList.$isListNode)(elementNode))totalDepth=Math.max((0,LexicalList.$getListDepth)(elementNode)+1,totalDepth);else if((0,LexicalList.$isListItemNode)(elementNode)){const parent=elementNode.getParent();if(1===(null==parent?void 0:parent.getChildren().length)){const grandParentListItem=null==parent?void 0:parent.getParent();if((0,LexicalList.$isListItemNode)(grandParentListItem)&&1===grandParentListItem.getChildren().length)return!1}if(!(0,LexicalList.$isListNode)(parent))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");totalDepth=Math.max((0,LexicalList.$getListDepth)(parent)+1,totalDepth)}return totalDepth<=maxDepth}(7)),Lexical.COMMAND_PRIORITY_CRITICAL),realm.pubKey("addComposerChild",LexicalTabIndentationPlugin.TabIndentationPlugin),realm.pubKey("addComposerChild",LexicalListPlugin.ListPlugin)}})},"./node_modules/@mdxeditor/editor/dist/plugins/quote/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>quotePlugin});var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),LexicalRichText=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.js");const MdastBlockQuoteVisitor={testNode:"blockquote",visitNode({actions}){actions.addAndStepInto((0,LexicalRichText.$createQuoteNode)())}},LexicalQuoteVisitor={testLexicalNode:LexicalRichText.$isQuoteNode,visitLexicalNode:({lexicalNode,mdastParent,actions})=>{const paragraph={type:"paragraph",children:[]};actions.appendToParent(mdastParent,{type:"blockquote",children:[paragraph]}),actions.visitChildren(lexicalNode,paragraph)}};var react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js"),realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js");const[quotePlugin,quotePluginHooks]=(0,react.nq)({id:"quote",systemSpec:(0,realmFactory.By)((()=>({})),[core.Wo]),init:realm=>{realm.pubKey("addImportVisitor",MdastBlockQuoteVisitor),realm.pubKey("addLexicalNode",LexicalRichText.QuoteNode),realm.pubKey("addExportVisitor",LexicalQuoteVisitor)}})},"./node_modules/@mdxeditor/editor/dist/plugins/table/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{zf:()=>tablePlugin,vx:()=>tablePluginHooks});var container_phrasing=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/container-phrasing.js"),inline_code=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/handle/inline-code.js");function defaultStringLength(value){return value.length}function toAlignment(value){const code="string"==typeof value?value.codePointAt(0):0;return 67===code||99===code?99:76===code||108===code?108:82===code||114===code?114:0}const gfmTableFromMarkdown={enter:{table:function enterTable(token){const align=token._align;this.enter({type:"table",align:align.map((d=>"none"===d?null:d)),children:[]},token),this.setData("inTable",!0)},tableData:enterCell,tableHeader:enterCell,tableRow:function enterRow(token){this.enter({type:"tableRow",children:[]},token)}},exit:{codeText:function exitCodeText(token){let value=this.resume();this.getData("inTable")&&(value=value.replace(/\\([\\|])/g,replace));this.stack[this.stack.length-1].value=value,this.exit(token)},table:function exitTable(token){this.exit(token),this.setData("inTable")},tableData:exit,tableHeader:exit,tableRow:exit}};function exit(token){this.exit(token)}function enterCell(token){this.enter({type:"tableCell",children:[]},token)}function replace($0,$1){return"|"===$1?$1:$0}function gfmTableToMarkdown(options){const settings=options||{},padding=settings.tableCellPadding,alignDelimiters=settings.tablePipeAlign,stringLength=settings.stringLength,around=padding?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function handleTable(node,_,context,safeOptions){return serializeData(function handleTableAsData(node,context,safeOptions){const children=node.children;let index=-1;const result=[],subexit=context.enter("table");for(;++index<children.length;)result[index]=handleTableRowAsData(children[index],context,safeOptions);return subexit(),result}(node,context,safeOptions),node.align)},tableRow:function handleTableRow(node,_,context,safeOptions){const value=serializeData([handleTableRowAsData(node,context,safeOptions)]);return value.slice(0,value.indexOf("\n"))},tableCell:handleTableCell,inlineCode:function inlineCodeWithTable(node,parent,context){let value=(0,inline_code.Y)(node,parent,context);context.stack.includes("tableCell")&&(value=value.replace(/\|/g,"\\$&"));return value}}};function handleTableCell(node,_,context,safeOptions){const exit=context.enter("tableCell"),subexit=context.enter("phrasing"),value=(0,container_phrasing.p)(node,context,{...safeOptions,before:around,after:around});return subexit(),exit(),value}function serializeData(matrix,align){return function markdownTable(table,options={}){const align=(options.align||[]).concat(),stringLength=options.stringLength||defaultStringLength,alignments=[],cellMatrix=[],sizeMatrix=[],longestCellByColumn=[];let mostCellsPerRow=0,rowIndex=-1;for(;++rowIndex<table.length;){const row=[],sizes=[];let columnIndex=-1;for(table[rowIndex].length>mostCellsPerRow&&(mostCellsPerRow=table[rowIndex].length);++columnIndex<table[rowIndex].length;){const cell=null==(value=table[rowIndex][columnIndex])?"":String(value);if(!1!==options.alignDelimiters){const size=stringLength(cell);sizes[columnIndex]=size,(void 0===longestCellByColumn[columnIndex]||size>longestCellByColumn[columnIndex])&&(longestCellByColumn[columnIndex]=size)}row.push(cell)}cellMatrix[rowIndex]=row,sizeMatrix[rowIndex]=sizes}var value;let columnIndex=-1;if("object"==typeof align&&"length"in align)for(;++columnIndex<mostCellsPerRow;)alignments[columnIndex]=toAlignment(align[columnIndex]);else{const code=toAlignment(align);for(;++columnIndex<mostCellsPerRow;)alignments[columnIndex]=code}columnIndex=-1;const row=[],sizes=[];for(;++columnIndex<mostCellsPerRow;){const code=alignments[columnIndex];let before="",after="";99===code?(before=":",after=":"):108===code?before=":":114===code&&(after=":");let size=!1===options.alignDelimiters?1:Math.max(1,longestCellByColumn[columnIndex]-before.length-after.length);const cell=before+"-".repeat(size)+after;!1!==options.alignDelimiters&&(size=before.length+size+after.length,size>longestCellByColumn[columnIndex]&&(longestCellByColumn[columnIndex]=size),sizes[columnIndex]=size),row[columnIndex]=cell}cellMatrix.splice(1,0,row),sizeMatrix.splice(1,0,sizes),rowIndex=-1;const lines=[];for(;++rowIndex<cellMatrix.length;){const row=cellMatrix[rowIndex],sizes=sizeMatrix[rowIndex];columnIndex=-1;const line=[];for(;++columnIndex<mostCellsPerRow;){const cell=row[columnIndex]||"";let before="",after="";if(!1!==options.alignDelimiters){const size=longestCellByColumn[columnIndex]-(sizes[columnIndex]||0),code=alignments[columnIndex];114===code?before=" ".repeat(size):99===code?size%2?(before=" ".repeat(size/2+.5),after=" ".repeat(size/2-.5)):(before=" ".repeat(size/2),after=before):after=" ".repeat(size)}!1===options.delimiterStart||columnIndex||line.push("|"),!1===options.padding||!1===options.alignDelimiters&&""===cell||!1===options.delimiterStart&&!columnIndex||line.push(" "),!1!==options.alignDelimiters&&line.push(before),line.push(cell),!1!==options.alignDelimiters&&line.push(after),!1!==options.padding&&line.push(" "),!1===options.delimiterEnd&&columnIndex===mostCellsPerRow-1||line.push("|")}lines.push(!1===options.delimiterEnd?line.join("").replace(/ +$/,""):line.join(""))}return lines.join("\n")}(matrix,{align,alignDelimiters,padding,stringLength})}function handleTableRowAsData(node,context,safeOptions){const children=node.children;let index=-1;const result=[],subexit=context.enter("tableRow");for(;++index<children.length;)result[index]=handleTableCell(children[index],0,context,safeOptions);return subexit(),result}}var micromark_factory_space=__webpack_require__("./node_modules/micromark-factory-space/index.js"),micromark_util_character=__webpack_require__("./node_modules/micromark-util-character/index.js");class EditMap{constructor(){this.map=[]}add(index,remove,add){!function addImpl(editMap,at,remove,add){let index=0;if(0===remove&&0===add.length)return;for(;index<editMap.map.length;){if(editMap.map[index][0]===at)return editMap.map[index][1]+=remove,void editMap.map[index][2].push(...add);index+=1}editMap.map.push([at,remove,add])}(this,index,remove,add)}consume(events){if(this.map.sort(((a,b)=>a[0]-b[0])),0===this.map.length)return;let index=this.map.length;const vecs=[];for(;index>0;)index-=1,vecs.push(events.slice(this.map[index][0]+this.map[index][1])),vecs.push(this.map[index][2]),events.length=this.map[index][0];vecs.push([...events]),events.length=0;let slice=vecs.pop();for(;slice;)events.push(...slice),slice=vecs.pop();this.map.length=0}}function gfmTableAlign(events,index){let inDelimiterRow=!1;const align=[];for(;index<events.length;){const event=events[index];if(inDelimiterRow){if("enter"===event[0])"tableContent"===event[1].type&&align.push("tableDelimiterMarker"===events[index+1][1].type?"left":"none");else if("tableContent"===event[1].type){if("tableDelimiterMarker"===events[index-1][1].type){const alignIndex=align.length-1;align[alignIndex]="left"===align[alignIndex]?"center":"right"}}else if("tableDelimiterRow"===event[1].type)break}else"enter"===event[0]&&"tableDelimiterRow"===event[1].type&&(inDelimiterRow=!0);index+=1}return align}const gfmTable={flow:{null:{tokenize:function tokenizeTable(effects,ok,nok){const self=this;let seen,size=0,sizeB=0;return function start(code){let index=self.events.length-1;for(;index>-1;){const type=self.events[index][1].type;if("lineEnding"!==type&&"linePrefix"!==type)break;index--}const tail=index>-1?self.events[index][1].type:null,next="tableHead"===tail||"tableRow"===tail?bodyRowStart:headRowBefore;if(next===bodyRowStart&&self.parser.lazy[self.now().line])return nok(code);return next(code)};function headRowBefore(code){return effects.enter("tableHead"),effects.enter("tableRow"),function headRowStart(code){if(124===code)return headRowBreak(code);return seen=!0,sizeB+=1,headRowBreak(code)}(code)}function headRowBreak(code){return null===code?nok(code):(0,micromark_util_character.Ch)(code)?sizeB>1?(sizeB=0,self.interrupt=!0,effects.exit("tableRow"),effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),headDelimiterStart):nok(code):(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,headRowBreak,"whitespace")(code):(sizeB+=1,seen&&(seen=!1,size+=1),124===code?(effects.enter("tableCellDivider"),effects.consume(code),effects.exit("tableCellDivider"),seen=!0,headRowBreak):(effects.enter("data"),headRowData(code)))}function headRowData(code){return null===code||124===code||(0,micromark_util_character.z3)(code)?(effects.exit("data"),headRowBreak(code)):(effects.consume(code),92===code?headRowEscape:headRowData)}function headRowEscape(code){return 92===code||124===code?(effects.consume(code),headRowData):headRowData(code)}function headDelimiterStart(code){return self.interrupt=!1,self.parser.lazy[self.now().line]?nok(code):(effects.enter("tableDelimiterRow"),seen=!1,(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,headDelimiterBefore,"linePrefix",self.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(code):headDelimiterBefore(code))}function headDelimiterBefore(code){return 45===code||58===code?headDelimiterValueBefore(code):124===code?(seen=!0,effects.enter("tableCellDivider"),effects.consume(code),effects.exit("tableCellDivider"),headDelimiterCellBefore):headDelimiterNok(code)}function headDelimiterCellBefore(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,headDelimiterValueBefore,"whitespace")(code):headDelimiterValueBefore(code)}function headDelimiterValueBefore(code){return 58===code?(sizeB+=1,seen=!0,effects.enter("tableDelimiterMarker"),effects.consume(code),effects.exit("tableDelimiterMarker"),headDelimiterLeftAlignmentAfter):45===code?(sizeB+=1,headDelimiterLeftAlignmentAfter(code)):null===code||(0,micromark_util_character.Ch)(code)?headDelimiterCellAfter(code):headDelimiterNok(code)}function headDelimiterLeftAlignmentAfter(code){return 45===code?(effects.enter("tableDelimiterFiller"),headDelimiterFiller(code)):headDelimiterNok(code)}function headDelimiterFiller(code){return 45===code?(effects.consume(code),headDelimiterFiller):58===code?(seen=!0,effects.exit("tableDelimiterFiller"),effects.enter("tableDelimiterMarker"),effects.consume(code),effects.exit("tableDelimiterMarker"),headDelimiterRightAlignmentAfter):(effects.exit("tableDelimiterFiller"),headDelimiterRightAlignmentAfter(code))}function headDelimiterRightAlignmentAfter(code){return(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,headDelimiterCellAfter,"whitespace")(code):headDelimiterCellAfter(code)}function headDelimiterCellAfter(code){return 124===code?headDelimiterBefore(code):(null===code||(0,micromark_util_character.Ch)(code))&&seen&&size===sizeB?(effects.exit("tableDelimiterRow"),effects.exit("tableHead"),ok(code)):headDelimiterNok(code)}function headDelimiterNok(code){return nok(code)}function bodyRowStart(code){return effects.enter("tableRow"),bodyRowBreak(code)}function bodyRowBreak(code){return 124===code?(effects.enter("tableCellDivider"),effects.consume(code),effects.exit("tableCellDivider"),bodyRowBreak):null===code||(0,micromark_util_character.Ch)(code)?(effects.exit("tableRow"),ok(code)):(0,micromark_util_character.xz)(code)?(0,micromark_factory_space.f)(effects,bodyRowBreak,"whitespace")(code):(effects.enter("data"),bodyRowData(code))}function bodyRowData(code){return null===code||124===code||(0,micromark_util_character.z3)(code)?(effects.exit("data"),bodyRowBreak(code)):(effects.consume(code),92===code?bodyRowEscape:bodyRowData)}function bodyRowEscape(code){return 92===code||124===code?(effects.consume(code),bodyRowData):bodyRowData(code)}},resolveAll:function resolveTable(events,context){let currentTable,currentBody,currentCell,index=-1,inFirstCellAwaitingPipe=!0,rowKind=0,lastCell=[0,0,0,0],cell=[0,0,0,0],afterHeadAwaitingFirstBodyRow=!1,lastTableEnd=0;const map=new EditMap;for(;++index<events.length;){const event=events[index],token=event[1];"enter"===event[0]?"tableHead"===token.type?(afterHeadAwaitingFirstBodyRow=!1,0!==lastTableEnd&&(flushTableEnd(map,context,lastTableEnd,currentTable,currentBody),currentBody=void 0,lastTableEnd=0),currentTable={type:"table",start:Object.assign({},token.start),end:Object.assign({},token.end)},map.add(index,0,[["enter",currentTable,context]])):"tableRow"===token.type||"tableDelimiterRow"===token.type?(inFirstCellAwaitingPipe=!0,currentCell=void 0,lastCell=[0,0,0,0],cell=[0,index+1,0,0],afterHeadAwaitingFirstBodyRow&&(afterHeadAwaitingFirstBodyRow=!1,currentBody={type:"tableBody",start:Object.assign({},token.start),end:Object.assign({},token.end)},map.add(index,0,[["enter",currentBody,context]])),rowKind="tableDelimiterRow"===token.type?2:currentBody?3:1):!rowKind||"data"!==token.type&&"tableDelimiterMarker"!==token.type&&"tableDelimiterFiller"!==token.type?"tableCellDivider"===token.type&&(inFirstCellAwaitingPipe?inFirstCellAwaitingPipe=!1:(0!==lastCell[1]&&(cell[0]=cell[1],currentCell=flushCell(map,context,lastCell,rowKind,void 0,currentCell)),lastCell=cell,cell=[lastCell[1],index,0,0])):(inFirstCellAwaitingPipe=!1,0===cell[2]&&(0!==lastCell[1]&&(cell[0]=cell[1],currentCell=flushCell(map,context,lastCell,rowKind,void 0,currentCell),lastCell=[0,0,0,0]),cell[2]=index)):"tableHead"===token.type?(afterHeadAwaitingFirstBodyRow=!0,lastTableEnd=index):"tableRow"===token.type||"tableDelimiterRow"===token.type?(lastTableEnd=index,0!==lastCell[1]?(cell[0]=cell[1],currentCell=flushCell(map,context,lastCell,rowKind,index,currentCell)):0!==cell[1]&&(currentCell=flushCell(map,context,cell,rowKind,index,currentCell)),rowKind=0):!rowKind||"data"!==token.type&&"tableDelimiterMarker"!==token.type&&"tableDelimiterFiller"!==token.type||(cell[3]=index)}0!==lastTableEnd&&flushTableEnd(map,context,lastTableEnd,currentTable,currentBody);map.consume(context.events),index=-1;for(;++index<context.events.length;){const event=context.events[index];"enter"===event[0]&&"table"===event[1].type&&(event[1]._align=gfmTableAlign(context.events,index))}return events}}}};function flushCell(map,context,range,rowKind,rowEnd,previousCell){const groupName=1===rowKind?"tableHeader":2===rowKind?"tableDelimiter":"tableData";0!==range[0]&&(previousCell.end=Object.assign({},getPoint(context.events,range[0])),map.add(range[0],0,[["exit",previousCell,context]]));const now=getPoint(context.events,range[1]);if(previousCell={type:groupName,start:Object.assign({},now),end:Object.assign({},now)},map.add(range[1],0,[["enter",previousCell,context]]),0!==range[2]){const relatedStart=getPoint(context.events,range[2]),relatedEnd=getPoint(context.events,range[3]),valueToken={type:"tableContent",start:Object.assign({},relatedStart),end:Object.assign({},relatedEnd)};if(map.add(range[2],0,[["enter",valueToken,context]]),2!==rowKind){const start=context.events[range[2]],end=context.events[range[3]];if(start[1].end=Object.assign({},end[1].end),start[1].type="chunkText",start[1].contentType="text",range[3]>range[2]+1){const a=range[2]+1,b=range[3]-range[2]-1;map.add(a,b,[])}}map.add(range[3]+1,0,[["exit",valueToken,context]])}return void 0!==rowEnd&&(previousCell.end=Object.assign({},getPoint(context.events,rowEnd)),map.add(rowEnd,0,[["exit",previousCell,context]]),previousCell=void 0),previousCell}function flushTableEnd(map,context,index,table,tableBody){const exits=[],related=getPoint(context.events,index);tableBody&&(tableBody.end=Object.assign({},related),exits.push(["exit",tableBody,context])),table.end=Object.assign({},related),exits.push(["exit",table,context]),map.add(index+1,0,exits)}function getPoint(events,index){const event=events[index],side="enter"===event[0]?"start":"end";return event[1][side]}var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),react=__webpack_require__("./node_modules/react/index.js"),fp=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/fp.js"),LexicalContentEditable=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.js"),LexicalErrorBoundary=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.js"),LexicalErrorBoundary_default=__webpack_require__.n(LexicalErrorBoundary),LexicalNestedComposer=__webpack_require__("./node_modules/@lexical/react/LexicalNestedComposer.js"),LexicalRichTextPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.js"),dist=__webpack_require__("./node_modules/@mdxeditor/editor/node_modules/@radix-ui/react-popover/dist/index.mjs"),lexicalTheme=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/lexicalTheme.js"),exportMarkdownFromLexical=__webpack_require__("./node_modules/@mdxeditor/editor/dist/exportMarkdownFromLexical.js"),importMarkdownToLexical=__webpack_require__("./node_modules/@mdxeditor/editor/dist/importMarkdownToLexical.js");const AddColumnIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z",transform:"matrix(0 -1 -1 0 20 20)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3.25 10.5H6v2.75h1.5V10.5h2.75V9H7.5V6.25H6V9H3.25v1.5ZM6 17h8V3H6v2.5h1.5v-1h5v11h-5V14H6v3Z"}))),AddRowIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M20 20h20v20H20z",transform:"rotate(180 20 20)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M10.5 3.25V6h2.75v1.5H10.5v2.75H9V7.5H6.25V6H9V3.25h1.5ZM17 6v8H3V6h2.5v1.5h-1v5h11v-5H14V6h3Z"}))),DeleteSmallIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M6.5 17a1.45 1.45 0 0 1-1.06-.44A1.445 1.445 0 0 1 5 15.5v-10H4V4h4V3h4v1h4v1.5h-1v9.991c0 .423-.147.78-.44 1.072A1.45 1.45 0 0 1 13.5 17h-7Zm7-11.5h-7v10h7v-10ZM8 14h1.5V7H8v7Zm2.5 0H12V7h-1.5v7Z"}))),AlignCenterIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 17v-1.5h14V17H3Zm3-3.125v-1.5h8v1.5H6ZM3 10.75v-1.5h14v1.5H3Zm3-3.125v-1.5h8v1.5H6ZM3 4.5V3h14v1.5H3Z"}))),AlignLeftIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 17v-1.5h14V17H3Zm0-3.125v-1.5h10v1.5H3Zm0-3.125v-1.5h14v1.5H3Zm0-3.125v-1.5h10v1.5H3ZM3 4.5V3h14v1.5H3Z"}))),AlignRightIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 17v-1.5h14V17H3Zm4-3.125v-1.5h10v1.5H7ZM3 10.75v-1.5h14v1.5H3Zm4-3.125v-1.5h10v1.5H7ZM3 4.5V3h14v1.5H3Z"}))),InsertColLeftIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 20h20v20H0z",transform:"rotate(-90 0 20)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M15.75 4.5H13v2.75h-1.5V4.5H8.75V3h2.75V.25H13V3h2.75v1.5ZM13 17H5V3h2.25v1.5H6.5v11h5V8.75H13V17Z"}))),InsertColRightIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z",transform:"matrix(0 -1 -1 0 20 20)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M4.25 4.5H7v2.75h1.5V4.5h2.75V3H8.5V.25H7V3H4.25v1.5ZM7 17h8V3h-2.25v1.5h.75v11h-5V8.75H7V17Z"}))),InsertRowAboveIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h20v20H0z",transform:"matrix(-1 0 0 1 20 0)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M4.5 16.75V14h2.75v-1.5H4.5V9.75H3v2.75H.25V14H3v2.75h1.5ZM17 14V6H3v2.25h1.5V7.5h11v5H8.75V14H17Z"}))),InsertRowBelowIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 20 20",...props},react.createElement("mask",{id:"a",width:20,height:20,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M20 20h20v20H20z",transform:"rotate(180 20 20)"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M4.5 3.25V6h2.75v1.5H4.5v2.75H3V7.5H.25V6H3V3.25h1.5ZM17 6v8H3v-2.25h1.5v.75h11v-5H8.75V6H17Z"}))),MoreHorizIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M6 14c-.55 0-1.02-.196-1.412-.588A1.926 1.926 0 0 1 4 12c0-.55.196-1.02.588-1.412A1.926 1.926 0 0 1 6 10c.55 0 1.02.196 1.412.588.392.391.588.862.588 1.412 0 .55-.196 1.02-.588 1.412A1.926 1.926 0 0 1 6 14Zm6 0c-.55 0-1.02-.196-1.412-.588A1.926 1.926 0 0 1 10 12c0-.55.196-1.02.588-1.412A1.926 1.926 0 0 1 12 10c.55 0 1.02.196 1.412.588.392.391.588.862.588 1.412 0 .55-.196 1.02-.588 1.412A1.926 1.926 0 0 1 12 14Zm6 0c-.55 0-1.02-.196-1.413-.588A1.926 1.926 0 0 1 16 12c0-.55.196-1.02.587-1.412A1.926 1.926 0 0 1 18 10c.55 0 1.02.196 1.413.588.391.391.587.862.587 1.412 0 .55-.196 1.02-.587 1.412A1.926 1.926 0 0 1 18 14Z"})));var react_toolbar_dist=__webpack_require__("./node_modules/@radix-ui/react-toolbar/dist/index.mjs"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),ui_module_css=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),LexicalHistoryPlugin=__webpack_require__("./node_modules/@lexical/react/LexicalHistoryPlugin.js"),LexicalUtils=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),isPartOftheEditorUI=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/isPartOftheEditorUI.js"),uuid4=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/uuid4.js");const AlignToTailwindClassMap={center:ui_module_css.ZP.centeredCell,left:ui_module_css.ZP.leftAlignedCell,right:ui_module_css.ZP.rightAlignedCell},TableEditor=({mdastNode,parentEditor,lexicalTable})=>{const[activeCell,setActiveCell]=react.useState(null),getCellKey=react.useMemo((()=>{const cellKeyMap=new WeakMap;return cell=>(cellKeyMap.has(cell)||cellKeyMap.set(cell,(0,uuid4.k)()),cellKeyMap.get(cell))}),[]),setActiveCellWithBoundaries=react.useCallback((cell=>{const colCount=lexicalTable.getColCount();if(null===cell)return void setActiveCell(null);let[colIndex,rowIndex]=cell;return colIndex>colCount-1&&(colIndex=0,rowIndex++),colIndex<0&&(colIndex=colCount-1,rowIndex-=1),rowIndex>lexicalTable.getRowCount()-1?(setActiveCell(null),void parentEditor.update((()=>{if(lexicalTable.getLatest().getNextSibling())lexicalTable.getLatest().selectNext();else{const newParagraph=(0,Lexical.$createParagraphNode)();lexicalTable.insertAfter(newParagraph),newParagraph.select()}}))):rowIndex<0?(setActiveCell(null),void parentEditor.update((()=>{lexicalTable.getLatest().selectPrevious()}))):void setActiveCell([colIndex,rowIndex])}),[lexicalTable,parentEditor]);react.useEffect((()=>{lexicalTable.focusEmitter.subscribe(setActiveCellWithBoundaries)}),[lexicalTable,setActiveCellWithBoundaries]);const addRowToBottom=react.useCallback((e=>{e.preventDefault(),parentEditor.update((()=>{lexicalTable.addRowToBottom(),setActiveCell([0,lexicalTable.getRowCount()])}))}),[parentEditor,lexicalTable]),addColumnToRight=react.useCallback((e=>{e.preventDefault(),parentEditor.update((()=>{lexicalTable.addColumnToRight(),setActiveCell([lexicalTable.getColCount(),0])}))}),[parentEditor,lexicalTable]),[highlightedCoordinates,setHighlightedCoordinates]=react.useState([-1,-1]),onTableMouseOver=react.useCallback((e=>{let tableCell=e.target;for(;tableCell&&!["TH","TD"].includes(tableCell.tagName);){if(tableCell===e.currentTarget)return;tableCell=tableCell.parentElement}if(null===tableCell)return;const tableRow=tableCell.parentElement,colIndex="TFOOT"===tableRow.parentElement.tagName?-1:Array.from(tableRow.children).indexOf(tableCell),rowIndex="TH"===tableCell.tagName?-1:Array.from(tableRow.parentElement.children).indexOf(tableRow);setHighlightedCoordinates([colIndex,rowIndex])}),[]);return react.createElement("table",{className:ui_module_css.ZP.tableEditor,onMouseOver:onTableMouseOver,onMouseLeave:()=>setHighlightedCoordinates([-1,-1])},react.createElement("colgroup",null,react.createElement("col",null),Array.from({length:mdastNode.children[0].children.length},((_,colIndex)=>{const currentColumnAlign=(mdastNode.align||[])[colIndex]||"left",className=AlignToTailwindClassMap[currentColumnAlign];return react.createElement("col",{key:colIndex,className})})),react.createElement("col",null)),react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",{className:ui_module_css.ZP.tableToolsColumn,"data-tool-cell":!0},react.createElement("button",{className:ui_module_css.ZP.iconButton,type:"button",title:"Delete table",onClick:e=>{e.preventDefault(),parentEditor.update((()=>{lexicalTable.selectNext(),lexicalTable.remove()}))}},react.createElement(DeleteSmallIcon,null))),Array.from({length:mdastNode.children[0].children.length},((_,colIndex)=>react.createElement("th",{key:colIndex,"data-tool-cell":!0},react.createElement(ColumnEditor,{setActiveCellWithBoundaries,parentEditor,colIndex,highlightedCoordinates,lexicalTable,align:(mdastNode.align||[])[colIndex]})))),react.createElement("th",{className:ui_module_css.ZP.tableToolsColumn}))),react.createElement("tbody",null,mdastNode.children.map(((row,rowIndex)=>react.createElement("tr",{key:rowIndex},react.createElement("td",{className:ui_module_css.ZP.toolCell,"data-tool-cell":!0},react.createElement(RowEditor,{setActiveCellWithBoundaries,parentEditor,rowIndex,highlightedCoordinates,lexicalTable})),row.children.map(((mdastCell,colIndex)=>{var _a;return react.createElement(Cell,{align:null==(_a=mdastNode.align)?void 0:_a[colIndex],key:getCellKey(mdastCell),contents:mdastCell.children,setActiveCell:setActiveCellWithBoundaries,rowIndex,colIndex,lexicalTable,parentEditor,activeCell})})),0===rowIndex&&react.createElement("th",{rowSpan:lexicalTable.getRowCount(),"data-tool-cell":!0},react.createElement("button",{type:"button",className:ui_module_css.ZP.addColumnButton,onClick:addColumnToRight},react.createElement(AddColumnIcon,null))))))),react.createElement("tfoot",null,react.createElement("tr",null,react.createElement("th",null),react.createElement("th",{colSpan:lexicalTable.getColCount()},react.createElement("button",{type:"button",className:ui_module_css.ZP.addRowButton,onClick:addRowToBottom},react.createElement(AddRowIcon,null))),react.createElement("th",null))))},Cell=({align,...props})=>{const{activeCell,setActiveCell}=props,isActive=Boolean(activeCell&&activeCell[0]===props.colIndex&&activeCell[1]===props.rowIndex),className=AlignToTailwindClassMap[align||"left"];return react.createElement("td",{className,"data-active":isActive,onClick:()=>{setActiveCell([props.colIndex,props.rowIndex])}},react.createElement(CellEditor,{...props,focus:isActive}))},CellEditor=({focus,setActiveCell,parentEditor,lexicalTable,contents,colIndex,rowIndex})=>{const[importVisitors,exportVisitors,usedLexicalNodes,jsxComponentDescriptors,jsxIsAvailable,rootEditor]=core.vY.useEmitterValues("importVisitors","exportVisitors","usedLexicalNodes","jsxComponentDescriptors","jsxIsAvailable","rootEditor"),[editor]=react.useState((()=>{const editor2=(0,Lexical.createEditor)({nodes:usedLexicalNodes,theme:lexicalTheme.c});return editor2.update((()=>{(0,importMarkdownToLexical.K)({root:(0,Lexical.$getRoot)(),mdastRoot:{type:"root",children:[{type:"paragraph",children:contents}]},visitors:importVisitors})})),editor2})),saveAndFocus=react.useCallback((nextCell=>{editor.getEditorState().read((()=>{const mdast=(0,exportMarkdownFromLexical.T)({root:(0,Lexical.$getRoot)(),jsxComponentDescriptors,visitors:exportVisitors,jsxIsAvailable});parentEditor.update((()=>{lexicalTable.updateCellContents(colIndex,rowIndex,mdast.children[0].children)}))})),setActiveCell(nextCell)}),[colIndex,editor,exportVisitors,jsxComponentDescriptors,jsxIsAvailable,lexicalTable,parentEditor,rowIndex,setActiveCell]);return react.useEffect((()=>(0,LexicalUtils.mergeRegister)(editor.registerCommand(Lexical.KEY_TAB_COMMAND,(payload=>{payload.preventDefault();const nextCell=payload.shiftKey?[colIndex-1,rowIndex]:[colIndex+1,rowIndex];return saveAndFocus(nextCell),!0}),Lexical.COMMAND_PRIORITY_CRITICAL),editor.registerCommand(Lexical.FOCUS_COMMAND,(()=>(setActiveCell([colIndex,rowIndex]),!1)),Lexical.COMMAND_PRIORITY_LOW),editor.registerCommand(Lexical.KEY_ENTER_COMMAND,(payload=>{null==payload||payload.preventDefault();const nextCell=(null==payload?void 0:payload.shiftKey)?[colIndex,rowIndex-1]:[colIndex,rowIndex+1];return saveAndFocus(nextCell),!0}),Lexical.COMMAND_PRIORITY_CRITICAL),editor.registerCommand(Lexical.BLUR_COMMAND,(payload=>{const relatedTarget=payload.relatedTarget;return!(0,isPartOftheEditorUI.s)(relatedTarget,rootEditor.getRootElement())&&(saveAndFocus(null),!0)}),Lexical.COMMAND_PRIORITY_CRITICAL))),[colIndex,editor,rootEditor,rowIndex,saveAndFocus,setActiveCell]),react.useEffect((()=>{focus&&(null==editor||editor.focus())}),[focus,editor]),react.createElement(LexicalNestedComposer.LexicalNestedComposer,{initialEditor:editor},react.createElement(LexicalRichTextPlugin.RichTextPlugin,{contentEditable:react.createElement(LexicalContentEditable.ContentEditable,null),placeholder:react.createElement("div",null),ErrorBoundary:LexicalErrorBoundary_default()}),react.createElement(LexicalHistoryPlugin.HistoryPlugin,null))},ColumnEditor=({parentEditor,highlightedCoordinates,align,lexicalTable,colIndex,setActiveCellWithBoundaries})=>{const[editorRootElementRef]=core.vY.useEmitterValues("editorRootElementRef"),insertColumnAt=react.useCallback((colIndex2=>{parentEditor.update((()=>{lexicalTable.insertColumnAt(colIndex2)})),setActiveCellWithBoundaries([colIndex2,0])}),[parentEditor,lexicalTable,setActiveCellWithBoundaries]),deleteColumnAt=react.useCallback((colIndex2=>{parentEditor.update((()=>{lexicalTable.deleteColumnAt(colIndex2)}))}),[parentEditor,lexicalTable]),setColumnAlign=react.useCallback(((colIndex2,align2)=>{parentEditor.update((()=>{lexicalTable.setColumnAlign(colIndex2,align2)}))}),[parentEditor,lexicalTable]);return react.createElement(dist.fC,null,react.createElement(dist.xo,{className:ui_module_css.ZP.tableColumnEditorTrigger,"data-active":highlightedCoordinates[0]===colIndex+1,title:"Column menu"},react.createElement(MoreHorizIcon,null)),react.createElement(dist.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react.createElement(dist.yk,{className:classnames_default()(ui_module_css.ZP.tableColumnEditorPopoverContent),onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,side:"top"},react.createElement(react_toolbar_dist.fC,{className:ui_module_css.ZP.tableColumnEditorToolbar},react.createElement(react_toolbar_dist.tX,{className:ui_module_css.ZP.toggleGroupRoot,onValueChange:value=>{setColumnAlign(colIndex,value)},value:align||"left",type:"single","aria-label":"Text alignment"},react.createElement(react_toolbar_dist.HP,{value:"left",title:"Align left"},react.createElement(AlignLeftIcon,null)),react.createElement(react_toolbar_dist.HP,{value:"center",title:"Align center"},react.createElement(AlignCenterIcon,null)),react.createElement(react_toolbar_dist.HP,{value:"right",title:"Align right"},react.createElement(AlignRightIcon,null))),react.createElement(react_toolbar_dist.Z0,null),react.createElement(react_toolbar_dist.zx,{onClick:insertColumnAt.bind(null,colIndex),title:"Insert a column to the left of this one"},react.createElement(InsertColLeftIcon,null)),react.createElement(react_toolbar_dist.zx,{onClick:insertColumnAt.bind(null,colIndex+1),title:"Insert a column to the right of this one"},react.createElement(InsertColRightIcon,null)),react.createElement(react_toolbar_dist.zx,{onClick:deleteColumnAt.bind(null,colIndex),title:"Delete this column"},react.createElement(DeleteSmallIcon,null))))))},RowEditor=({parentEditor,highlightedCoordinates,lexicalTable,rowIndex,setActiveCellWithBoundaries})=>{const[editorRootElementRef]=core.vY.useEmitterValues("editorRootElementRef"),insertRowAt=react.useCallback((rowIndex2=>{parentEditor.update((()=>{lexicalTable.insertRowAt(rowIndex2)})),setActiveCellWithBoundaries([0,rowIndex2])}),[parentEditor,lexicalTable,setActiveCellWithBoundaries]),deleteRowAt=react.useCallback((rowIndex2=>{parentEditor.update((()=>{lexicalTable.deleteRowAt(rowIndex2)}))}),[parentEditor,lexicalTable]);return react.createElement(dist.fC,null,react.createElement(dist.xo,{className:ui_module_css.ZP.tableColumnEditorTrigger,"data-active":highlightedCoordinates[1]===rowIndex},react.createElement(MoreHorizIcon,null)),react.createElement(dist.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react.createElement(dist.yk,{className:classnames_default()(ui_module_css.ZP.tableColumnEditorPopoverContent),onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,side:"bottom"},react.createElement(react_toolbar_dist.fC,{className:ui_module_css.ZP.tableColumnEditorToolbar},react.createElement(react_toolbar_dist.zx,{onClick:insertRowAt.bind(null,rowIndex),title:"Insert a row above this one"},react.createElement(InsertRowAboveIcon,null)),react.createElement(react_toolbar_dist.zx,{onClick:insertRowAt.bind(null,rowIndex+1),title:"Insert a row below this one"},react.createElement(InsertRowBelowIcon,null)),react.createElement(react_toolbar_dist.zx,{onClick:deleteRowAt.bind(null,rowIndex),title:"Delete this row"},react.createElement(DeleteSmallIcon,null))))))};var __defProp=Object.defineProperty,__publicField=(obj,key,value)=>(((obj,key,value)=>{key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value})(obj,"symbol"!=typeof key?key+"":key,value),value);const EMPTY_CELL={type:"tableCell",children:[]};class TableNode extends Lexical.DecoratorNode{constructor(mdastNode,key){super(key),__publicField(this,"__mdastNode"),__publicField(this,"focusEmitter",function coordinatesEmitter(){let subscription=fp.ZT;return{publish:coords=>{subscription(coords)},subscribe:cb=>{subscription=cb}}}()),this.__mdastNode=mdastNode||{type:"table",children:[]}}static getType(){return"table"}static clone(node){return new TableNode(structuredClone(node.__mdastNode),node.__key)}static importJSON(serializedNode){return $createTableNode(serializedNode.mdastNode)}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"table",version:1}}getMdastNode(){return this.__mdastNode}getRowCount(){return this.__mdastNode.children.length}getColCount(){var _a;return(null==(_a=this.__mdastNode.children[0])?void 0:_a.children.length)||0}createDOM(){return document.createElement("div")}updateDOM(){return!1}updateCellContents(colIndex,rowIndex,children){const table=this.getWritable().__mdastNode,row=table.children[rowIndex],cells=row.children,cell=cells[colIndex],cellsClone=Array.from(cells),cellClone={...cell,children},rowClone={...row,children:cellsClone};cellsClone[colIndex]=cellClone,table.children[rowIndex]=rowClone}insertColumnAt(colIndex){const table=this.getWritable().__mdastNode;for(let rowIndex=0;rowIndex<table.children.length;rowIndex++){const row=table.children[rowIndex],cells=row.children,cellsClone=Array.from(cells),rowClone={...row,children:cellsClone};cellsClone.splice(colIndex,0,structuredClone(EMPTY_CELL)),table.children[rowIndex]=rowClone}table.align&&table.align.length>0&&table.align.splice(colIndex,0,"left")}deleteColumnAt(colIndex){const table=this.getWritable().__mdastNode;for(let rowIndex=0;rowIndex<table.children.length;rowIndex++){const row=table.children[rowIndex],cells=row.children,cellsClone=Array.from(cells),rowClone={...row,children:cellsClone};cellsClone.splice(colIndex,1),table.children[rowIndex]=rowClone}}insertRowAt(y){const table=this.getWritable().__mdastNode,newRow={type:"tableRow",children:Array.from({length:this.getColCount()},(()=>structuredClone(EMPTY_CELL)))};table.children.splice(y,0,newRow)}deleteRowAt(rowIndex){1===this.getRowCount()?(this.selectNext(),this.remove()):this.getWritable().__mdastNode.children.splice(rowIndex,1)}addRowToBottom(){this.insertRowAt(this.getRowCount())}addColumnToRight(){this.insertColumnAt(this.getColCount())}setColumnAlign(colIndex,align){const table=this.getWritable().__mdastNode;null==table.align&&(table.align=[]),table.align[colIndex]=align}decorate(parentEditor){return react.createElement(TableEditor,{lexicalTable:this,mdastNode:this.__mdastNode,parentEditor})}select(coords){this.focusEmitter.publish(coords||[0,0])}isInline(){return!1}}function $createTableNode(mdastNode){return new TableNode(mdastNode)}const LexicalTableVisitor={testLexicalNode:function $isTableNode(node){return node instanceof TableNode},visitLexicalNode({actions,mdastParent,lexicalNode}){actions.appendToParent(mdastParent,lexicalNode.getMdastNode())}},MdastTableVisitor={testNode:"table",visitNode({mdastNode,lexicalParent}){lexicalParent.append($createTableNode(mdastNode))}};var realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),gurx_react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const tableSystem=(0,realmFactory.By)(((r,[{insertDecoratorNode}])=>{const insertTable=r.node();return r.link(r.pipe(insertTable,r.o.mapTo((()=>$createTableNode({type:"table",children:[{type:"tableRow",children:[{type:"tableCell",children:[]}]}]})))),insertDecoratorNode),{insertTable}}),[core.Wo]),[tablePlugin,tablePluginHooks]=(0,gurx_react.nq)({id:"table",systemSpec:tableSystem,init:realm=>{realm.pubKey("addMdastExtension",gfmTableFromMarkdown),realm.pubKey("addSyntaxExtension",gfmTable),realm.pubKey("addImportVisitor",MdastTableVisitor),realm.pubKey("addLexicalNode",TableNode),realm.pubKey("addExportVisitor",LexicalTableVisitor),realm.pubKey("addToMarkdownExtension",gfmTableToMarkdown({tableCellPadding:!0,tablePipeAlign:!0}))}})},"./node_modules/@mdxeditor/editor/dist/plugins/thematic-break/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{nz:()=>thematicBreakPlugin,vs:()=>thematicBreakPluginHooks});var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),LexicalHorizontalRuleNode=__webpack_require__("./node_modules/@lexical/react/LexicalHorizontalRuleNode.js");const MdastThematicBreakVisitor={testNode:"thematicBreak",visitNode({actions}){actions.addAndStepInto((0,LexicalHorizontalRuleNode.$createHorizontalRuleNode)())}},LexicalThematicBreakVisitor={testLexicalNode:LexicalHorizontalRuleNode.$isHorizontalRuleNode,visitLexicalNode({actions}){actions.addAndStepInto("thematicBreak")}};var LexicalHorizontalRulePlugin=__webpack_require__("./node_modules/@lexical/react/LexicalHorizontalRulePlugin.js"),realmFactory=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),react=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const thematicBreakSystem=(0,realmFactory.By)(((r,[{activeEditor}])=>{const insertThematicBreak=r.node();return r.sub(r.pipe(insertThematicBreak,r.o.withLatestFrom(activeEditor)),(([,theEditor])=>{null==theEditor||theEditor.dispatchCommand(LexicalHorizontalRuleNode.INSERT_HORIZONTAL_RULE_COMMAND,void 0)})),{insertThematicBreak}}),[core.Wo]),[thematicBreakPlugin,thematicBreakPluginHooks]=(0,react.nq)({id:"thematic-break",systemSpec:thematicBreakSystem,init:realm=>{realm.pubKey("addImportVisitor",MdastThematicBreakVisitor),realm.pubKey("addLexicalNode",LexicalHorizontalRuleNode.HorizontalRuleNode),realm.pubKey("addExportVisitor",LexicalThematicBreakVisitor),realm.pubKey("addComposerChild",LexicalHorizontalRulePlugin.HorizontalRulePlugin)}})},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BlockTypeSelect.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>BlockTypeSelect});var _lexical_rich_text__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@lexical/rich-text/LexicalRichText.js"),lexical__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lexical/Lexical.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_primitives_select_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/select.js"),_headings_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/headings/index.js"),_gurx_react_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const BlockTypeSelect=()=>{const convertSelectionToNode=_core_index_js__WEBPACK_IMPORTED_MODULE_3__.vY.usePublisher("convertSelectionToNode"),[currentBlockType]=_core_index_js__WEBPACK_IMPORTED_MODULE_3__.vY.useEmitterValues("currentBlockType"),hasQuote=(0,_gurx_react_js__WEBPACK_IMPORTED_MODULE_4__.hO)("quote"),hasHeadings=(0,_gurx_react_js__WEBPACK_IMPORTED_MODULE_4__.hO)("headings");if(!hasQuote&&!hasHeadings)return null;const items=[{label:"Paragraph",value:"paragraph"}];if(hasQuote&&items.push({label:"Quote",value:"quote"}),hasHeadings){const[allowedHeadingLevels]=_headings_index_js__WEBPACK_IMPORTED_MODULE_5__.Cb.useEmitterValues("allowedHeadingLevels");items.push(...allowedHeadingLevels.map((n=>({label:`Heading ${n}`,value:`h${n}`}))))}return react__WEBPACK_IMPORTED_MODULE_2__.createElement(_primitives_select_js__WEBPACK_IMPORTED_MODULE_6__.Ph,{value:currentBlockType,onChange:blockType=>{switch(blockType){case"quote":convertSelectionToNode((()=>(0,_lexical_rich_text__WEBPACK_IMPORTED_MODULE_0__.$createQuoteNode)()));break;case"paragraph":convertSelectionToNode((()=>(0,lexical__WEBPACK_IMPORTED_MODULE_1__.$createParagraphNode)()));break;default:if(""==blockType);else{if(!blockType.startsWith("h"))throw new Error(`Unknown block type: ${blockType}`);convertSelectionToNode((()=>(0,_lexical_rich_text__WEBPACK_IMPORTED_MODULE_0__.$createHeadingNode)(blockType)))}}},triggerTitle:"Select block type",placeholder:"Block type",items})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/BoldItalicUnderlineToggles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>BoldItalicUnderlineToggles});var react=__webpack_require__("./node_modules/react/index.js"),core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),FormatConstants=__webpack_require__("./node_modules/@mdxeditor/editor/dist/FormatConstants.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const BoldIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M6.8 19V5h5.525c1.083 0 2.083.333 3 1 .917.667 1.375 1.592 1.375 2.775 0 .85-.192 1.504-.575 1.962-.383.459-.742.788-1.075.988.417.183.88.525 1.388 1.025.508.5.762 1.25.762 2.25 0 1.483-.542 2.521-1.625 3.113-1.083.591-2.1.887-3.05.887H6.8Zm3.025-2.8h2.6c.8 0 1.287-.204 1.462-.613.175-.408.263-.704.263-.887 0-.183-.088-.48-.263-.888-.175-.408-.687-.612-1.537-.612H9.825v3Zm0-5.7h2.325c.55 0 .95-.142 1.2-.425a1.4 1.4 0 0 0 .375-.95c0-.4-.142-.725-.425-.975-.283-.25-.65-.375-1.1-.375H9.825V10.5Z"}))),ItalicIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M5 19v-2.5h4l3-9H8V5h10v2.5h-3.5l-3 9H15V19H5Z"}))),UnderlinedIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M5 21v-2h14v2H5Zm7-4c-1.683 0-2.992-.525-3.925-1.575-.933-1.05-1.4-2.442-1.4-4.175V3H9.25v8.4c0 .933.233 1.692.7 2.275.467.583 1.15.875 2.05.875.9 0 1.583-.292 2.05-.875.467-.583.7-1.342.7-2.275V3h2.575v8.25c0 1.733-.467 3.125-1.4 4.175C14.992 16.475 13.683 17 12 17Z"}))),BoldItalicUnderlineToggles=()=>{const[currentFormat]=core.vY.useEmitterValues("currentFormat"),applyFormat=core.vY.usePublisher("applyFormat"),boldIsOn=0!=(currentFormat&FormatConstants.Dh),italicIsOn=0!=(currentFormat&FormatConstants.UW),underlineIsOn=0!=(currentFormat&FormatConstants.A8),boldTitle=boldIsOn?"Remove bold":"Bold",italicTitle=italicIsOn?"Remove italic":"Italic",underlineTitle=underlineIsOn?"Remove underline":"Underline";return react.createElement(toolbar.N_,{items:[{title:boldTitle,contents:react.createElement(BoldIcon,null),active:boldIsOn,onChange:applyFormat.bind(null,"bold")},{title:italicTitle,contents:react.createElement(ItalicIcon,null),active:italicIsOn,onChange:applyFormat.bind(null,"italic")},{title:underlineTitle,contents:react.createElement(UnderlinedIcon,{style:{transform:"translateY(2px)"}}),active:underlineIsOn,onChange:applyFormat.bind(null,"underline")}]})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ChangeAdmonitionType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ChangeAdmonitionType});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_primitives_select_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/select.js"),_directive_editors_AdmonitionDirectiveDescriptor_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/directive-editors/AdmonitionDirectiveDescriptor.js");const ChangeAdmonitionType=()=>{const[editorInFocus,rootEditor]=_core_index_js__WEBPACK_IMPORTED_MODULE_1__.vY.useEmitterValues("editorInFocus","rootEditor"),admonitionNode=editorInFocus.rootNode;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_primitives_select_js__WEBPACK_IMPORTED_MODULE_2__.Ph,{value:admonitionNode.getMdastNode().name,onChange:name=>{null==rootEditor||rootEditor.update((()=>{admonitionNode.setMdastNode({...admonitionNode.getMdastNode(),name}),setTimeout((()=>{null==rootEditor||rootEditor.update((()=>{admonitionNode.getLatest().select()}))}),80)}))},triggerTitle:"Select admonition type",placeholder:"Admonition type",items:_directive_editors_AdmonitionDirectiveDescriptor_js__WEBPACK_IMPORTED_MODULE_3__.n.map((type=>({label:type,value:type})))})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ChangeCodeMirrorLanguage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>ChangeCodeMirrorLanguage});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_primitives_select_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/select.js"),_codemirror_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codemirror/index.js"),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js");const ChangeCodeMirrorLanguage=()=>{const[editorInFocus,theEditor]=_core_index_js__WEBPACK_IMPORTED_MODULE_1__.vY.useEmitterValues("editorInFocus","activeEditor"),codeBlockNode=editorInFocus.rootNode,[codeBlockLanguages]=_codemirror_index_js__WEBPACK_IMPORTED_MODULE_2__.qt.useEmitterValues("codeBlockLanguages");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectWithLabel},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,"Code block language:"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_primitives_select_js__WEBPACK_IMPORTED_MODULE_4__.Ph,{value:codeBlockNode.getLanguage(),onChange:language=>{null==theEditor||theEditor.update((()=>{codeBlockNode.setLanguage(language),setTimeout((()=>{null==theEditor||theEditor.update((()=>{codeBlockNode.getLatest().select()}))}))}))},triggerTitle:"Select code block language",placeholder:"Code block language",items:Object.entries(codeBlockLanguages).map((([value,label])=>({value,label})))}))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CodeToggle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>CodeToggle});var react=__webpack_require__("./node_modules/react/index.js"),FormatConstants=__webpack_require__("./node_modules/@mdxeditor/editor/dist/FormatConstants.js");const CodeIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"m8 18-6-6 6-6 1.425 1.425-4.6 4.6L9.4 16.6 8 18Zm8 0-1.425-1.425 4.6-4.6L14.6 7.4 16 6l6 6-6 6Z"})));var core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const CodeToggle=()=>{const[currentFormat]=core.vY.useEmitterValues("currentFormat"),applyFormat=core.vY.usePublisher("applyFormat"),codeIsOn=0!=(currentFormat&FormatConstants.pQ),title=codeIsOn?"Remove code format":"Inline code format";return react.createElement(toolbar.N_,{items:[{title,contents:react.createElement(CodeIcon,null),active:codeIsOn,onChange:applyFormat.bind(null,"code")}]})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/CreateLink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>CreateLink});var react=__webpack_require__("./node_modules/react/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const LinkIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M11 17H7c-1.383 0-2.562-.488-3.537-1.463C2.488 14.562 2 13.383 2 12s.488-2.563 1.463-3.538C4.438 7.487 5.617 7 7 7h4v2H7c-.833 0-1.542.292-2.125.875A2.893 2.893 0 0 0 4 12c0 .833.292 1.542.875 2.125A2.893 2.893 0 0 0 7 15h4v2Zm-3-4v-2h8v2H8Zm5 4v-2h4c.833 0 1.542-.292 2.125-.875A2.893 2.893 0 0 0 20 12c0-.833-.292-1.542-.875-2.125A2.893 2.893 0 0 0 17 9h-4V7h4c1.383 0 2.563.487 3.538 1.462C21.513 9.437 22 10.617 22 12s-.487 2.562-1.462 3.537C19.563 16.512 18.383 17 17 17h-4Z"})));var link_dialog=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/link-dialog/index.js");const CreateLink=()=>{const openLinkDialog=link_dialog.W.usePublisher("openLinkEditDialog");return react.createElement(toolbar.g$,{title:"Create link",onClick:_=>{openLinkDialog(!0)}},react.createElement(LinkIcon,null))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertAdmonition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>InsertAdmonition});var react=__webpack_require__("./node_modules/react/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const AdmonitionIcon=props=>react.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...props},react.createElement("mask",{id:"mask0_403_47",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:24,height:24},react.createElement("rect",{width:24,height:24,fill:"#D9D9D9"})),react.createElement("g",{mask:"url(#mask0_403_47)"},react.createElement("path",{d:"M11 6.625H13V13.375H11V6.625ZM12 16C11.7166 16 11.4791 15.9042 11.2875 15.7125C11.0958 15.5208 11 15.2833 11 15C11 14.7167 11.0958 14.4792 11.2875 14.2875C11.4791 14.0958 11.7166 14 12 14C12.2833 14 12.5208 14.0958 12.7125 14.2875C12.9041 14.4792 13 14.7167 13 15C13 15.2833 12.9041 15.5208 12.7125 15.7125C12.5208 15.9042 12.2833 16 12 16ZM12 22.8L1.19995 12L12 1.2L22.8 12L12 22.8ZM12 20L20 12L12 4L3.99995 12L12 20Z",fill:"currentColor"})));var directives=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/directives/index.js"),AdmonitionDirectiveDescriptor=__webpack_require__("./node_modules/@mdxeditor/editor/dist/directive-editors/AdmonitionDirectiveDescriptor.js");const InsertAdmonition=()=>{const insertDirective=directives.zM.usePublisher("insertDirective"),items=react.useMemo((()=>AdmonitionDirectiveDescriptor.n.map((type=>({value:type,label:type.replace(/^./,(l=>l.toUpperCase()))})))),[]);return react.createElement(toolbar.mB,{title:"Insert admonition",onChoose:admonitionName=>{insertDirective({type:"containerDirective",name:admonitionName})},items},react.createElement(AdmonitionIcon,null))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertCodeBlock.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>InsertCodeBlock});var react=__webpack_require__("./node_modules/react/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const FrameSourceIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 21v-6h2v4h4v2H3Zm12 0v-2h4v-4h2v6h-6Zm-6.4-5.4L5 12l3.6-3.6L10 9.825 7.825 12 10 14.175 8.6 15.6Zm6.8 0L14 14.175 16.175 12 14 9.825 15.4 8.4 19 12l-3.6 3.6ZM3 9V3h6v2H5v4H3Zm16 0V5h-4V3h6v6h-2Z"})));var codeblock=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/codeblock/index.js");const InsertCodeBlock=()=>{const insertCodeBlock=codeblock.ob.usePublisher("insertCodeBlock");return react.createElement(toolbar.g$,{title:"Insert code block",onClick:()=>{insertCodeBlock({})}},react.createElement(FrameSourceIcon,null))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertTable.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>InsertTable});var toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js"),react=__webpack_require__("./node_modules/react/index.js"),table=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/table/index.js");const TableIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 21V3h18v18H3ZM5 9h14V5H5v4Zm5.325 5h3.35v-3h-3.35v3Zm0 5h3.35v-3h-3.35v3ZM5 14h3.325v-3H5v3Zm10.675 0H19v-3h-3.325v3ZM5 19h3.325v-3H5v3Zm10.675 0H19v-3h-3.325v3Z"}),react.createElement("path",{d:"M8.325 9h2V5h-2v4Zm5.35 0h2V5h-2v4Z"}))),InsertTable=()=>{const insertTable=table.vx.usePublisher("insertTable");return react.createElement(toolbar.g$,{title:"Insert table",onClick:()=>{insertTable(!0)}},react.createElement(TableIcon,null))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/InsertThematicBreak.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>InsertThematicBreak});var react=__webpack_require__("./node_modules/react/index.js"),thematic_break=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/thematic-break/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const HorizontalRuleIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M4 13v-2h16v2H4Z"}))),InsertThematicBreak=()=>{const insertThematicBreak=thematic_break.vs.usePublisher("insertThematicBreak");return react.createElement(toolbar.g$,{title:"Insert thematic break",onClick:insertThematicBreak.bind(null,!0)},react.createElement(HorizontalRuleIcon,null))}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/ListsToggle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>ListsToggle});var react=__webpack_require__("./node_modules/react/index.js");const BulletedListIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M9 19v-2h12v2H9Zm0-6v-2h12v2H9Zm0-6V5h12v2H9ZM5 20a1.93 1.93 0 0 1-1.413-.587A1.928 1.928 0 0 1 3 18c0-.55.196-1.021.587-1.413A1.928 1.928 0 0 1 5 16c.55 0 1.02.196 1.412.587.392.392.588.863.588 1.413s-.196 1.021-.588 1.413A1.925 1.925 0 0 1 5 20Zm0-6c-.55 0-1.021-.196-1.413-.588A1.925 1.925 0 0 1 3 12c0-.55.196-1.021.587-1.413A1.928 1.928 0 0 1 5 10c.55 0 1.02.196 1.412.587.392.392.588.863.588 1.413s-.196 1.02-.588 1.412A1.923 1.923 0 0 1 5 14Zm0-6c-.55 0-1.021-.196-1.413-.588A1.925 1.925 0 0 1 3 6c0-.55.196-1.02.587-1.412A1.927 1.927 0 0 1 5 4c.55 0 1.02.196 1.412.588C6.804 4.979 7 5.45 7 6c0 .55-.196 1.02-.588 1.412A1.923 1.923 0 0 1 5 8Z"}))),NumberedListIcon=props=>react.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...props},react.createElement("mask",{id:"a",width:24,height:24,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},react.createElement("path",{d:"M0 0h24v24H0z"})),react.createElement("g",{mask:"url(#a)"},react.createElement("path",{d:"M3 22v-1.5h2.5v-.75H4v-1.5h1.5v-.75H3V16h4v2.25L6 19l1 .75V22H3Zm0-7v-3.75h2.5v-.75H3V9h4v3.75H4.5v.75H7V15H3Zm1.5-7V3.5H3V2h3v6H4.5ZM9 19v-2h12v2H9Zm0-6v-2h12v2H9Zm0-6V5h12v2H9Z"})));var lists=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/lists/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const ListsToggle=()=>{const[currentListType]=lists.qT.useEmitterValues("currentListType"),applyListType=lists.qT.usePublisher("applyListType");return react.createElement(toolbar.xQ,{value:currentListType||"",items:[{title:"Bulleted list",contents:react.createElement(BulletedListIcon,null),value:"bullet"},{title:"Numbered list",contents:react.createElement(NumberedListIcon,null),value:"number"}],onChange:applyListType})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/components/UndoRedo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>UndoRedo});var LexicalUtils=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.js"),Lexical=__webpack_require__("./node_modules/lexical/Lexical.js"),react=__webpack_require__("./node_modules/react/index.js");const RedoIcon=props=>react.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...props},react.createElement("mask",{id:"mask0_404_65",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:24,height:24},react.createElement("rect",{width:24,height:24,fill:"#D9D9D9"})),react.createElement("g",{mask:"url(#mask0_404_65)"},react.createElement("path",{d:"M9.9 19C8.28333 19 6.89583 18.475 5.7375 17.425C4.57917 16.375 4 15.0667 4 13.5C4 11.9333 4.57917 10.625 5.7375 9.575C6.89583 8.525 8.28333 8 9.9 8H16.2L13.6 5.4L15 4L20 9L15 14L13.6 12.6L16.2 10H9.9C8.85 10 7.9375 10.3333 7.1625 11C6.3875 11.6667 6 12.5 6 13.5C6 14.5 6.3875 15.3333 7.1625 16C7.9375 16.6667 8.85 17 9.9 17H17V19H9.9Z",fill:"currentColor"}))),UndoIcon=props=>react.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...props},react.createElement("mask",{id:"mask0_404_71",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:24,height:24},react.createElement("rect",{width:24,height:24,fill:"#D9D9D9"})),react.createElement("g",{mask:"url(#mask0_404_71)"},react.createElement("path",{d:"M7 19V17H14.1C15.15 17 16.0625 16.6667 16.8375 16C17.6125 15.3333 18 14.5 18 13.5C18 12.5 17.6125 11.6667 16.8375 11C16.0625 10.3333 15.15 10 14.1 10H7.8L10.4 12.6L9 14L4 9L9 4L10.4 5.4L7.8 8H14.1C15.7167 8 17.1042 8.525 18.2625 9.575C19.4208 10.625 20 11.9333 20 13.5C20 15.0667 19.4208 16.375 18.2625 17.425C17.1042 18.475 15.7167 19 14.1 19H7Z",fill:"currentColor"})));var detectMac=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/detectMac.js"),core=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),toolbar=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js");const UndoRedo=()=>{const[activeEditor]=core.vY.useEmitterValues("activeEditor"),[canUndo,setCanUndo]=react.useState(!1),[canRedo,setCanRedo]=react.useState(!1);return react.useEffect((()=>{if(activeEditor)return(0,LexicalUtils.mergeRegister)(activeEditor.registerCommand(Lexical.CAN_UNDO_COMMAND,(payload=>(setCanUndo(payload),!1)),Lexical.COMMAND_PRIORITY_CRITICAL),activeEditor.registerCommand(Lexical.CAN_REDO_COMMAND,(payload=>(setCanRedo(payload),!1)),Lexical.COMMAND_PRIORITY_CRITICAL))}),[activeEditor]),react.createElement(toolbar.N_,{items:[{title:detectMac.jB?"Undo (Z)":"Undo (Ctrl+Z)",disabled:!canUndo,contents:react.createElement(UndoIcon,null),active:!1,onChange:()=>null==activeEditor?void 0:activeEditor.dispatchCommand(Lexical.UNDO_COMMAND,void 0)},{title:detectMac.jB?"Redo (Y)":"Redo (Ctrl+Y)",disabled:!canRedo,contents:react.createElement(RedoIcon,null),active:!1,onChange:()=>null==activeEditor?void 0:activeEditor.dispatchCommand(Lexical.REDO_COMMAND,void 0)}]})}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N2:()=>toolbarPlugin});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js"),_primitives_toolbar_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js"),_gurx_realmFactory_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/realmFactory.js"),_gurx_react_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/gurx/react.js");const toolbarSystem=(0,_gurx_realmFactory_js__WEBPACK_IMPORTED_MODULE_1__.By)((r=>({toolbarContents:r.node((()=>null))})),[_core_index_js__WEBPACK_IMPORTED_MODULE_2__.Wo]),DEFAULT_TOOLBAR_CONTENTS=()=>"This is an empty toolbar. Pass `{toolbarContents: () => { return <>toolbar components</> }}` to the toolbarPlugin to customize it.",[toolbarPlugin,toolbarPluginHooks]=(0,_gurx_react_js__WEBPACK_IMPORTED_MODULE_3__.nq)({id:"toolbar",systemSpec:toolbarSystem,init:(realm,params)=>{realm.pubKey("toolbarContents",(null==params?void 0:params.toolbarContents)??DEFAULT_TOOLBAR_CONTENTS),realm.pubKey("addTopAreaChild",ToolbarWrapper)}}),ToolbarWrapper=()=>{const[toolbarContents]=toolbarPluginHooks.useEmitterValues("toolbarContents"),[readOnly]=_core_index_js__WEBPACK_IMPORTED_MODULE_2__.vY.useEmitterValues("readOnly");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_primitives_toolbar_js__WEBPACK_IMPORTED_MODULE_4__.fC,{readOnly},toolbarContents())}},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/TooltipWrap.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>TooltipWrap});var _radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-tooltip/dist/index.mjs"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js");const TooltipWrap=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({title,children},ref)=>{const[editorRootElementRef]=_core_index_js__WEBPACK_IMPORTED_MODULE_2__.vY.useEmitterValues("editorRootElementRef");return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.zt,{delayDuration:100},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.fC,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.xz,{ref,asChild:!0},react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",null,children)),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.VY,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.tooltipContent),sideOffset:10},title))))}))},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Bw:()=>SelectContent,Ph:()=>Select,Ql:()=>SelectItem,sV:()=>SelectButtonTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-select/dist/index.mjs"),_icons_arrow_drop_down_svg_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/icons/arrow_drop_down.svg.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/TooltipWrap.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js");const SelectItem=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((({children,className,...props},forwardedRef)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.ck,{...props,ref:forwardedRef,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(className,_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectItem)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.eT,null,children)))),SelectTrigger=({title,placeholder,className})=>{const[readOnly]=_core_index_js__WEBPACK_IMPORTED_MODULE_4__.vY.useEmitterValues("readOnly");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_5__.h,{title},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.xz,{"aria-label":placeholder,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectTrigger,className),"data-toolbar-item":!0,disabled:readOnly},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.B4,{placeholder}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JO,{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectDropdownArrow},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_icons_arrow_drop_down_svg_js__WEBPACK_IMPORTED_MODULE_6__.Z,null))))},SelectContent=({children,className=_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectContainer})=>{const[editorRootElementRef]=_core_index_js__WEBPACK_IMPORTED_MODULE_4__.vY.useEmitterValues("editorRootElementRef");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.h_,{container:null==editorRootElementRef?void 0:editorRootElementRef.current},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.VY,{className,onCloseAutoFocus:e=>e.preventDefault(),position:"popper"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.l_,{"data-editor-dropdown":!0},children)))},SelectButtonTrigger=({children,title,className})=>{const[readOnly]=_core_index_js__WEBPACK_IMPORTED_MODULE_4__.vY.useEmitterValues("readOnly");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_5__.h,{title},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.xz,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.toolbarButtonSelectTrigger,className),disabled:readOnly},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JO,{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_3__.ZP.selectDropdownArrow},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_icons_arrow_drop_down_svg_js__WEBPACK_IMPORTED_MODULE_6__.Z,null))))},Select=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.fC,{value:props.value||void 0,onValueChange:props.onChange},react__WEBPACK_IMPORTED_MODULE_0__.createElement(SelectTrigger,{title:props.triggerTitle,placeholder:props.placeholder}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(SelectContent,null,props.items.map(((item,index)=>"separator"===item?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.Z0,{key:index}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(SelectItem,{key:index,value:item.value},item.label)))))},"./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/toolbar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N_:()=>MultipleChoiceToggleGroup,Z0:()=>Separator,bu:()=>ConditionalContents,fC:()=>Root,g$:()=>ButtonWithTooltip,mB:()=>ButtonOrDropdownButton,xQ:()=>SingleChoiceToggleGroup});var _radix_ui_react_select__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@radix-ui/react-select/dist/index.mjs"),_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-toolbar/dist/index.mjs"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js"),_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/TooltipWrap.js"),_select_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/toolbar/primitives/select.js"),_core_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/plugins/core/index.js");function decorateWithRef(Component,decoratedProps){return react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((props,ref)=>{const className=classnames__WEBPACK_IMPORTED_MODULE_0___default()(decoratedProps.className,props.className);return react__WEBPACK_IMPORTED_MODULE_1__.createElement(Component,{...decoratedProps,...props,className,ref})}))}const Root=({readOnly,children})=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.fC,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarRoot,{[_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.readOnlyToolbarRoot]:readOnly}),...readOnly?{tabIndex:-1}:{}},children),ButtonWithTooltip=function addTooltipToChildren(Component){return({title,children,...props})=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(Component,{...props},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_2__.h,{title},children))}(decorateWithRef(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.zx,{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarButton,"data-toolbar-item":!0})),ToolbarToggleItem=decorateWithRef(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.HP,{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarToggleItem,"data-toolbar-item":!0}),ToggleSingleGroupWithItem=(decorateWithRef(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.tX,{type:"single",className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarToggleSingleGroup}),react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({on,title,children,disabled,...props},forwardedRef)=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.tX,{type:"single",className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarToggleSingleGroup,...props,value:on?"on":"off",ref:forwardedRef},react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolbarToggleItem,{title,value:"on",disabled},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_2__.h,{title},children)))))),MultipleChoiceToggleGroup=({items})=>react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarGroupOfGroups},items.map(((item,index)=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToggleSingleGroupWithItem,{key:index,title:item.title,on:item.active,onValueChange:v=>item.onChange("on"===v),disabled:item.disabled},item.contents)))),SingleChoiceToggleGroup=({value,onChange,className,items})=>react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarGroupOfGroups},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.tX,{type:"single",className:classnames__WEBPACK_IMPORTED_MODULE_0___default()(_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarToggleSingleGroup,className),onValueChange:onChange,value:value||"",onFocus:e=>e.preventDefault()},items.map(((item,index)=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(ToolbarToggleItem,{key:index,value:item.value},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_TooltipWrap_js__WEBPACK_IMPORTED_MODULE_2__.h,{title:item.title},item.contents)))))),ButtonOrDropdownButton=props=>{const[readOnly]=_core_index_js__WEBPACK_IMPORTED_MODULE_5__.vY.useEmitterValues("readOnly");return react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,1===props.items.length?react__WEBPACK_IMPORTED_MODULE_1__.createElement(ButtonWithTooltip,{title:props.title,onClick:()=>props.onChoose(""),disabled:readOnly},props.children):react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_6__.fC,{value:"",onValueChange:props.onChoose},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_select_js__WEBPACK_IMPORTED_MODULE_7__.sV,{title:props.title},props.children),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_select_js__WEBPACK_IMPORTED_MODULE_7__.Bw,{className:_styles_ui_module_css_js__WEBPACK_IMPORTED_MODULE_4__.ZP.toolbarButtonDropdownContainer},props.items.map(((item,index)=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(_select_js__WEBPACK_IMPORTED_MODULE_7__.Ql,{key:index,value:item.value},item.label))))))};function isConditionalContentsOption(option){return Object.hasOwn(option,"when")}const ConditionalContents=({options})=>{const[editorInFocus]=_core_index_js__WEBPACK_IMPORTED_MODULE_5__.vY.useEmitterValues("editorInFocus"),contents=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((()=>{const option=options.find((option2=>!isConditionalContentsOption(option2)||(!!option2.when(editorInFocus)||void 0)));return option?isConditionalContentsOption(option)?option.contents():option.fallback():null}),[options,editorInFocus]);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{display:"flex"}},contents)},Separator=_radix_ui_react_toolbar__WEBPACK_IMPORTED_MODULE_3__.Z0},"./node_modules/@mdxeditor/editor/dist/styles/lexicalTheme.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>lexicalTheme});const lexicalTheme={text:{bold:"_bold_13nbk_10",italic:"_italic_13nbk_14",underline:"_underline_13nbk_18",code:"_code_13nbk_52",strikethrough:"_strikethrough_13nbk_34",subscript:"_subscript_13nbk_42",superscript:"_superscript_13nbk_47",underlineStrikethrough:"_underlineStrikethrough_13nbk_38"},list:{nested:{listitem:"_nestedListItem_13nbk_59"}},admonition:{danger:"_admonitionDanger_13nbk_63",info:"_admonitionInfo_13nbk_63",note:"_admonitionNote_13nbk_63",tip:"_admonitionTip_13nbk_63",caution:"_admonitionCaution_13nbk_63"}}},"./node_modules/@mdxeditor/editor/dist/styles/ui.module.css.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>styles});const styles={editorRoot:"_editorRoot_16b3d_36",editorWrapper:"_editorWrapper_16b3d_134",nestedListItem:"_nestedListItem_16b3d_137",toolbarRoot:"_toolbarRoot_16b3d_141",readOnlyToolbarRoot:"_readOnlyToolbarRoot_16b3d_164",toolbarModeSwitch:"_toolbarModeSwitch_16b3d_172",toolbarToggleItem:"_toolbarToggleItem_16b3d_182",toolbarGroupOfGroups:"_toolbarGroupOfGroups_16b3d_192",toolbarToggleSingleGroup:"_toolbarToggleSingleGroup_16b3d_197",toolbarButton:"_toolbarButton_16b3d_211",activeToolbarButton:"_activeToolbarButton_16b3d_241",toolbarNodeKindSelectContainer:"_toolbarNodeKindSelectContainer_16b3d_249",toolbarButtonDropdownContainer:"_toolbarButtonDropdownContainer_16b3d_250",toolbarCodeBlockLanguageSelectContent:"_toolbarCodeBlockLanguageSelectContent_16b3d_251",selectContainer:"_selectContainer_16b3d_252",toolbarNodeKindSelectTrigger:"_toolbarNodeKindSelectTrigger_16b3d_266",toolbarButtonSelectTrigger:"_toolbarButtonSelectTrigger_16b3d_267",selectTrigger:"_selectTrigger_16b3d_268",toolbarCodeBlockLanguageSelectTrigger:"_toolbarCodeBlockLanguageSelectTrigger_16b3d_304",toolbarNodeKindSelectItem:"_toolbarNodeKindSelectItem_16b3d_310",selectItem:"_selectItem_16b3d_311",toolbarNodeKindSelectDropdownArrow:"_toolbarNodeKindSelectDropdownArrow_16b3d_335",selectDropdownArrow:"_selectDropdownArrow_16b3d_336",contentEditable:"_contentEditable_16b3d_340",sandpackWrapper:"_sandpackWrapper_16b3d_350",frontmatterWrapper:"_frontmatterWrapper_16b3d_354",frontmatterToggleButton:"_frontmatterToggleButton_16b3d_364",propertyPanelTitle:"_propertyPanelTitle_16b3d_372",propertyEditorTable:"_propertyEditorTable_16b3d_380",iconButton:"_iconButton_16b3d_397",readOnlyColumnCell:"_readOnlyColumnCell_16b3d_402",propertyEditorLabelCell:"_propertyEditorLabelCell_16b3d_407",buttonsFooter:"_buttonsFooter_16b3d_415",propertyEditorInput:"_propertyEditorInput_16b3d_421",primaryButton:"_primaryButton_16b3d_442",secondaryButton:"_secondaryButton_16b3d_442",smallButton:"_smallButton_16b3d_456",dialogForm:"_dialogForm_16b3d_468",linkDialogEditForm:"_linkDialogEditForm_16b3d_474",linkDialogInputContainer:"_linkDialogInputContainer_16b3d_482",linkDialogInputWrapper:"_linkDialogInputWrapper_16b3d_488",linkDialogInput:"_linkDialogInput_16b3d_482",dialogInput:"_dialogInput_16b3d_508",linkDialogAnchor:"_linkDialogAnchor_16b3d_518",linkDialogPopoverContent:"_linkDialogPopoverContent_16b3d_532",tableColumnEditorPopoverContent:"_tableColumnEditorPopoverContent_16b3d_532",dialogContent:"_dialogContent_16b3d_532",largeDialogContent:"_largeDialogContent_16b3d_544",dialogTitle:"_dialogTitle_16b3d_554",dialogCloseButton:"_dialogCloseButton_16b3d_560",popoverContent:"_popoverContent_16b3d_567",popoverArrow:"_popoverArrow_16b3d_579",linkDialogPreviewAnchor:"_linkDialogPreviewAnchor_16b3d_585",tooltipContent:"_tooltipContent_16b3d_607",actionButton:"_actionButton_16b3d_621",primaryActionButton:"_primaryActionButton_16b3d_627",tableEditor:"_tableEditor_16b3d_636",toolCell:"_toolCell_16b3d_647",tableColumnEditorTrigger:"_tableColumnEditorTrigger_16b3d_664",tableRowEditorTrigger:"_tableRowEditorTrigger_16b3d_664",addRowButton:"_addRowButton_16b3d_664",addColumnButton:"_addColumnButton_16b3d_664",tableColumnEditorToolbar:"_tableColumnEditorToolbar_16b3d_698",toggleGroupRoot:"_toggleGroupRoot_16b3d_710",tableToolsColumn:"_tableToolsColumn_16b3d_727",leftAlignedCell:"_leftAlignedCell_16b3d_735",rightAlignedCell:"_rightAlignedCell_16b3d_739",centeredCell:"_centeredCell_16b3d_743",dialogOverlay:"_dialogOverlay_16b3d_771",overlayShow:"_overlayShow_16b3d_1",contentShow:"_contentShow_16b3d_1",focusedImage:"_focusedImage_16b3d_814",imageWrapper:"_imageWrapper_16b3d_818",editImageButton:"_editImageButton_16b3d_830",inlineEditor:"_inlineEditor_16b3d_842",blockEditor:"_blockEditor_16b3d_851",nestedEditor:"_nestedEditor_16b3d_860",genericComponentName:"_genericComponentName_16b3d_877",diffSourceToggle:"_diffSourceToggle_16b3d_883",selectWithLabel:"_selectWithLabel_16b3d_897",toolbarTitleMode:"_toolbarTitleMode_16b3d_911",imageControlWrapperResizing:"_imageControlWrapperResizing_16b3d_917",imageResizer:"_imageResizer_16b3d_921",imageResizerN:"_imageResizerN_16b3d_930",imageResizerNe:"_imageResizerNe_16b3d_936",imageResizerE:"_imageResizerE_16b3d_942",imageResizerSe:"_imageResizerSe_16b3d_948",imageResizerS:"_imageResizerS_16b3d_948",imageResizerSw:"_imageResizerSw_16b3d_960",imageResizerW:"_imageResizerW_16b3d_966",imageResizerNw:"_imageResizerNw_16b3d_972",placeholder:"_placeholder_16b3d_978",rootContentEditableWrapper:"_rootContentEditableWrapper_16b3d_991",downshiftContainer:"_downshiftContainer_16b3d_997",downshiftInputWrapper:"_downshiftInputWrapper_16b3d_1003",downshiftInput:"_downshiftInput_16b3d_1003",downshiftAutocompleteContainer:"_downshiftAutocompleteContainer_16b3d_1033",textInput:"_textInput_16b3d_1078",multiFieldForm:"_multiFieldForm_16b3d_1086",formField:"_formField_16b3d_1092"}},"./node_modules/@mdxeditor/editor/dist/utils/detectMac.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZA:()=>controlOrMeta,jB:()=>IS_APPLE});const IS_APPLE="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);function controlOrMeta(metaKey,ctrlKey){return IS_APPLE?metaKey:ctrlKey}},"./node_modules/@mdxeditor/editor/dist/utils/fp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function tap(arg,proc){return proc(arg),arg}function noop(){}__webpack_require__.d(__webpack_exports__,{ZT:()=>noop,bw:()=>tap})},"./node_modules/@mdxeditor/editor/dist/utils/isPartOftheEditorUI.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isPartOftheEditorUI(element,editorRoot){return null!==element&&element!==editorRoot&&(!(void 0===element.dataset.editorDialog&&void 0===element.dataset.toolbarItem&&!element.dataset.editorDropdown)||isPartOftheEditorUI(element.parentElement,editorRoot))}__webpack_require__.d(__webpack_exports__,{s:()=>isPartOftheEditorUI})},"./node_modules/@mdxeditor/editor/dist/utils/uuid4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function uuidv4(){const hex=[...Array(256).keys()].map((index=>index.toString(16).padStart(2,"0"))),r=crypto.getRandomValues(new Uint8Array(16));return r[6]=15&r[6]|64,r[8]=63&r[8]|128,[...r.entries()].map((([index,int])=>[4,6,8,10].includes(index)?`-${hex[int]}`:hex[int])).join("")}__webpack_require__.d(__webpack_exports__,{k:()=>uuidv4})},"./node_modules/@mdxeditor/editor/dist/utils/voidEmitter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>voidEmitter});var _fp_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mdxeditor/editor/dist/utils/fp.js");function voidEmitter(){let subscription=_fp_js__WEBPACK_IMPORTED_MODULE_0__.ZT;return{publish:()=>{subscription()},subscribe:cb=>{subscription=cb}}}},"./node_modules/@mdxeditor/editor/node_modules/@radix-ui/react-popover/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{VY:()=>$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,ee:()=>$cb5cc270b50c6fcd$export$b688253958b8dfe7,fC:()=>$cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,h_:()=>$cb5cc270b50c6fcd$export$602eac185826482c,xo:()=>$cb5cc270b50c6fcd$export$7dacb05d26466c3,yk:()=>$cb5cc270b50c6fcd$export$d7e1f420b25549ff});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"),_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@radix-ui/react-focus-guards/dist/index.mjs"),_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@radix-ui/react-focus-scope/dist/index.mjs"),_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-id/dist/index.mjs"),_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-popper/dist/index.mjs"),_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@radix-ui/react-portal/dist/index.mjs"),_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@radix-ui/react-presence/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),aria_hidden__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/aria-hidden/dist/es2015/index.js"),react_remove_scroll__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/react-remove-scroll/dist/es2015/Combination.js");const[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__.b)("Popover",[_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.D7]),$cb5cc270b50c6fcd$var$usePopperScope=(0,_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.D7)(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext("Popover"),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=props=>{const{__scopePopover,children,open:openProp,defaultOpen,onOpenChange,modal=!1}=props,popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover),triggerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[hasCustomAnchor,setHasCustomAnchor]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[open=!1,setOpen]=(0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_3__.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.fC,popperScope,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PopoverProvider,{scope:__scopePopover,contentId:(0,_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_4__.M)(),triggerRef,open,onOpenChange:setOpen,onOpenToggle:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setOpen((prevOpen=>!prevOpen))),[setOpen]),hasCustomAnchor,onCustomAnchorAdd:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setHasCustomAnchor(!0)),[]),onCustomAnchorRemove:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setHasCustomAnchor(!1)),[]),modal},children))},$cb5cc270b50c6fcd$export$96e5381f42521a79=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopePopover,...anchorProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverAnchor",__scopePopover),popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover),{onCustomAnchorAdd,onCustomAnchorRemove}=context;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(onCustomAnchorAdd(),()=>onCustomAnchorRemove())),[onCustomAnchorAdd,onCustomAnchorRemove]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.ee,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({},popperScope,anchorProps,{ref:forwardedRef}))})),$cb5cc270b50c6fcd$export$7dacb05d26466c3=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopePopover,...triggerProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverTrigger",__scopePopover),popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover),composedTriggerRef=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.e)(forwardedRef,context.triggerRef),trigger=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.WV.button,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":context.open,"aria-controls":context.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(context.open)},triggerProps,{ref:composedTriggerRef,onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onClick,context.onOpenToggle)}));return context.hasCustomAnchor?trigger:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.ee,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({asChild:!0},popperScope),trigger)})),[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext("PopoverPortal",{forceMount:void 0}),$cb5cc270b50c6fcd$export$dd679ffb4362d2d4=props=>{const{__scopePopover,forceMount,children,container}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverPortal",__scopePopover);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PortalProvider,{scope:__scopePopover,forceMount},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.z,{present:forceMount||context.open},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__.h,{asChild:!0,container},children)))},$cb5cc270b50c6fcd$export$d7e1f420b25549ff=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const portalContext=$cb5cc270b50c6fcd$var$usePortalContext("PopoverContent",props.__scopePopover),{forceMount=portalContext.forceMount,...contentProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.z,{present:forceMount||context.open},context.modal?(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PopoverContentModal,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({},contentProps,{ref:forwardedRef})):(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PopoverContentNonModal,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({},contentProps,{ref:forwardedRef})))})),$cb5cc270b50c6fcd$var$PopoverContentModal=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover),contentRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_6__.e)(forwardedRef,contentRef),isRightClickOutsideRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const content=contentRef.current;if(content)return(0,aria_hidden__WEBPACK_IMPORTED_MODULE_11__.Ry)(content)}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react_remove_scroll__WEBPACK_IMPORTED_MODULE_12__.Z,{as:_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_13__.g7,allowPinchZoom:!0},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PopoverContentImpl,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({},props,{ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onCloseAutoFocus,(event=>{var _context$triggerRef$c;event.preventDefault(),isRightClickOutsideRef.current||null===(_context$triggerRef$c=context.triggerRef.current)||void 0===_context$triggerRef$c||_context$triggerRef$c.focus()})),onPointerDownOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onPointerDownOutside,(event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey,isRightClick=2===originalEvent.button||ctrlLeftClick;isRightClickOutsideRef.current=isRightClick}),{checkForDefaultPrevented:!1}),onFocusOutside:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onFocusOutside,(event=>event.preventDefault()),{checkForDefaultPrevented:!1})})))})),$cb5cc270b50c6fcd$var$PopoverContentNonModal=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover),hasInteractedOutsideRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),hasPointerDownOutsideRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cb5cc270b50c6fcd$var$PopoverContentImpl,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({},props,{ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:event=>{var _props$onCloseAutoFoc,_context$triggerRef$c2;(null===(_props$onCloseAutoFoc=props.onCloseAutoFocus)||void 0===_props$onCloseAutoFoc||_props$onCloseAutoFoc.call(props,event),event.defaultPrevented)||(hasInteractedOutsideRef.current||null===(_context$triggerRef$c2=context.triggerRef.current)||void 0===_context$triggerRef$c2||_context$triggerRef$c2.focus(),event.preventDefault());hasInteractedOutsideRef.current=!1,hasPointerDownOutsideRef.current=!1},onInteractOutside:event=>{var _props$onInteractOuts,_context$triggerRef$c3;null===(_props$onInteractOuts=props.onInteractOutside)||void 0===_props$onInteractOuts||_props$onInteractOuts.call(props,event),event.defaultPrevented||(hasInteractedOutsideRef.current=!0,"pointerdown"===event.detail.originalEvent.type&&(hasPointerDownOutsideRef.current=!0));const target=event.target;(null===(_context$triggerRef$c3=context.triggerRef.current)||void 0===_context$triggerRef$c3?void 0:_context$triggerRef$c3.contains(target))&&event.preventDefault(),"focusin"===event.detail.originalEvent.type&&hasPointerDownOutsideRef.current&&event.preventDefault()}}))})),$cb5cc270b50c6fcd$var$PopoverContentImpl=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopePopover,trapFocus,onOpenAutoFocus,onCloseAutoFocus,disableOutsidePointerEvents,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,...contentProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",__scopePopover),popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover);return(0,_radix_ui_react_focus_guards__WEBPACK_IMPORTED_MODULE_14__.EW)(),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_focus_scope__WEBPACK_IMPORTED_MODULE_15__.M,{asChild:!0,loop:!0,trapped:trapFocus,onMountAutoFocus:onOpenAutoFocus,onUnmountAutoFocus:onCloseAutoFocus},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_16__.XB,{asChild:!0,disableOutsidePointerEvents,onInteractOutside,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onDismiss:()=>context.onOpenChange(!1)},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.VY,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_5__.Z)({"data-state":$cb5cc270b50c6fcd$var$getState(context.open),role:"dialog",id:context.contentId},popperScope,contentProps,{ref:forwardedRef,style:{...contentProps.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}));function $cb5cc270b50c6fcd$var$getState(open){return open?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$b688253958b8dfe7=$cb5cc270b50c6fcd$export$96e5381f42521a79,$cb5cc270b50c6fcd$export$602eac185826482c=$cb5cc270b50c6fcd$export$dd679ffb4362d2d4,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff},"./node_modules/@monaco-editor/react/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function state_local_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function state_local_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function state_local_objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?state_local_ownKeys(Object(source),!0).forEach((function(key){state_local_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):state_local_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function curry(fn){return function curried(){for(var _this=this,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return args.length>=fn.length?fn.apply(this,args):function(){for(var _len3=arguments.length,nextArgs=new Array(_len3),_key3=0;_key3<_len3;_key3++)nextArgs[_key3]=arguments[_key3];return curried.apply(_this,[].concat(args,nextArgs))}}}function isObject(value){return{}.toString.call(value).includes("Object")}function isFunction(value){return"function"==typeof value}__webpack_require__.d(__webpack_exports__,{ZP:()=>Fe,_m:()=>es_loader});var errorHandler=curry((function throwError(errorMessages,type){throw new Error(errorMessages[type]||errorMessages.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),validators={changes:function validateChanges(initial,changes){return isObject(changes)||errorHandler("changeType"),Object.keys(changes).some((function(field){return!function state_local_hasOwnProperty(object,property){return Object.prototype.hasOwnProperty.call(object,property)}(initial,field)}))&&errorHandler("changeField"),changes},selector:function validateSelector(selector){isFunction(selector)||errorHandler("selectorType")},handler:function validateHandler(handler){isFunction(handler)||isObject(handler)||errorHandler("handlerType"),isObject(handler)&&Object.values(handler).some((function(_handler){return!isFunction(_handler)}))&&errorHandler("handlersType")},initial:function validateInitial(initial){initial||errorHandler("initialIsRequired"),isObject(initial)||errorHandler("initialType"),function isEmpty(obj){return!Object.keys(obj).length}(initial)&&errorHandler("initialContent")}};function extractChanges(state,causedChanges){return isFunction(causedChanges)?causedChanges(state.current):causedChanges}function updateState(state,changes){return state.current=state_local_objectSpread2(state_local_objectSpread2({},state.current),changes),changes}function didStateUpdate(state,handler,changes){return isFunction(handler)?handler(state.current):Object.keys(changes).forEach((function(field){var _handler$field;return null===(_handler$field=handler[field])||void 0===_handler$field?void 0:_handler$field.call(handler,state.current[field])})),changes}const state_local={create:function create(initial){var handler=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};validators.initial(initial),validators.handler(handler);var state={current:initial},didUpdate=curry(didStateUpdate)(state,handler),update=curry(updateState)(state),validate=curry(validators.changes)(initial),getChanges=curry(extractChanges)(state);return[function getState(){var selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(state){return state};return validators.selector(selector),selector(state.current)},function setState(causedChanges){!function compose(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(x){return fns.reduceRight((function(y,f){return f(y)}),x)}}(didUpdate,update,validate,getChanges)(causedChanges)}]}};const es_config={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs"}};const utils_isObject=function isObject_isObject(value){return{}.toString.call(value).includes("Object")};var validators_errorMessages={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},validators_errorHandler=function curry_curry(fn){return function curried(){for(var _this=this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return args.length>=fn.length?fn.apply(this,args):function(){for(var _len2=arguments.length,nextArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)nextArgs[_key2]=arguments[_key2];return curried.apply(_this,[].concat(args,nextArgs))}}}((function validators_throwError(errorMessages,type){throw new Error(errorMessages[type]||errorMessages.default)}))(validators_errorMessages),validators_validators={config:function validateConfig(config){return config||validators_errorHandler("configIsRequired"),utils_isObject(config)||validators_errorHandler("configType"),config.urls?(function informAboutDeprecation(){console.warn(validators_errorMessages.deprecation)}(),{paths:{vs:config.urls.monacoBase}}):config}};const es_validators=validators_validators;const utils_compose=function compose(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(x){return fns.reduceRight((function(y,f){return f(y)}),x)}};const deepMerge=function merge(target,source){return Object.keys(source).forEach((function(key){source[key]instanceof Object&&target[key]&&Object.assign(source[key],merge(target[key],source[key]))})),_objectSpread2(_objectSpread2({},target),source)};var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};const utils_makeCancelable=function makeCancelable(promise){var hasCanceled_=!1,wrappedPromise=new Promise((function(resolve,reject){promise.then((function(val){return hasCanceled_?reject(CANCELATION_MESSAGE):resolve(val)})),promise.catch(reject)}));return wrappedPromise.cancel=function(){return hasCanceled_=!0},wrappedPromise};var _state$create2=function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(state_local.create({config:es_config,isInitialized:!1,resolve:null,reject:null,monaco:null}),2),getState=_state$create2[0],setState=_state$create2[1];function injectScripts(script){return document.body.appendChild(script)}function getMonacoLoaderScript(configureLoader){var state=getState((function(_ref2){return{config:_ref2.config,reject:_ref2.reject}})),loaderScript=function createScript(src){var script=document.createElement("script");return src&&(script.src=src),script}("".concat(state.config.paths.vs,"/loader.js"));return loaderScript.onload=function(){return configureLoader()},loaderScript.onerror=state.reject,loaderScript}function configureLoader(){var state=getState((function(_ref3){return{config:_ref3.config,resolve:_ref3.resolve,reject:_ref3.reject}})),require=window.require;require.config(state.config),require(["vs/editor/editor.main"],(function(monaco){storeMonacoInstance(monaco),state.resolve(monaco)}),(function(error){state.reject(error)}))}function storeMonacoInstance(monaco){getState().monaco||setState({monaco})}var wrapperPromise=new Promise((function(resolve,reject){return setState({resolve,reject})})),loader={config:function loader_config(globalConfig){var _validators$config=es_validators.config(globalConfig),monaco=_validators$config.monaco,config=_objectWithoutProperties(_validators$config,["monaco"]);setState((function(state){return{config:deepMerge(state.config,config),monaco}}))},init:function init(){var state=getState((function(_ref){return{monaco:_ref.monaco,isInitialized:_ref.isInitialized,resolve:_ref.resolve}}));if(!state.isInitialized){if(setState({isInitialized:!0}),state.monaco)return state.resolve(state.monaco),utils_makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),state.resolve(window.monaco),utils_makeCancelable(wrapperPromise);utils_compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return utils_makeCancelable(wrapperPromise)},__getMonacoInstance:function __getMonacoInstance(){return getState((function(_ref4){return _ref4.monaco}))}};const es_loader=loader;var react=__webpack_require__("./node_modules/react/index.js"),v={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Y={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var $=function Mt({children:t}){return react.createElement("div",{style:Y.container},t)};var tt=function Et({width:t,height:r,isEditorReady:n,loading:e,_ref:a,className:m,wrapperProps:E}){return react.createElement("section",{style:{...v.wrapper,width:t,height:r},...E},!n&&react.createElement($,null,e),react.createElement("div",{ref:a,style:{...v.fullWidth,...!n&&v.hide},className:m}))},H=(0,react.memo)(tt);var b=function Ct(t){(0,react.useEffect)(t,[])};var l=function ht(t,r,n=!0){let e=(0,react.useRef)(!0);(0,react.useEffect)(e.current||!n?()=>{e.current=!1}:t,r)};function h(){}function R(t,r,n,e){return function Dt(t,r){return t.editor.getModel(et(t,r))}(t,e)||function bt(t,r,n,e){return t.editor.createModel(r,n,e?et(t,e):void 0)}(t,r,n,e)}function et(t,r){return t.Uri.parse(r)}var it=function Ot({original:t,modified:r,language:n,originalLanguage:e,modifiedLanguage:a,originalModelPath:m,modifiedModelPath:E,keepCurrentOriginalModel:S=!1,keepCurrentModifiedModel:N=!1,theme:x="light",loading:P="Loading...",options:y={},height:V="100%",width:z="100%",className:F,wrapperProps:j={},beforeMount:A=h,onMount:q=h}){let[M,O]=(0,react.useState)(!1),[T,s]=(0,react.useState)(!0),u=(0,react.useRef)(null),c=(0,react.useRef)(null),w=(0,react.useRef)(null),d=(0,react.useRef)(q),o=(0,react.useRef)(A),D=(0,react.useRef)(!1);b((()=>{let i=es_loader.init();return i.then((f=>(c.current=f)&&s(!1))).catch((f=>"cancelation"!==f?.type&&console.error("Monaco initialization: error:",f))),()=>u.current?function I(){let i=u.current?.getModel();S||i?.original?.dispose(),N||i?.modified?.dispose(),u.current?.dispose()}():i.cancel()})),l((()=>{let i=u.current.getModifiedEditor();i.getOption(c.current.editor.EditorOption.readOnly)?i.setValue(r||""):r!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),i.pushUndoStop())}),[r],M),l((()=>{u.current?.getModel()?.original.setValue(t||"")}),[t],M),l((()=>{let{original:i,modified:f}=u.current.getModel();c.current.editor.setModelLanguage(i,e||n||"text"),c.current.editor.setModelLanguage(f,a||n||"text")}),[n,e,a],M),l((()=>{c.current?.editor.setTheme(x)}),[x],M),l((()=>{u.current?.updateOptions(y)}),[y],M);let U=(0,react.useCallback)((()=>{if(!c.current)return;o.current(c.current);let i=R(c.current,t||"",e||n||"text",m||""),f=R(c.current,r||"",a||n||"text",E||"");u.current?.setModel({original:i,modified:f})}),[n,r,a,t,e,m,E]),L=(0,react.useCallback)((()=>{!D.current&&w.current&&(u.current=c.current.editor.createDiffEditor(w.current,{automaticLayout:!0,...y}),U(),c.current?.editor.setTheme(x),O(!0),D.current=!0)}),[y,x,U]);return(0,react.useEffect)((()=>{M&&d.current(u.current,c.current)}),[M]),(0,react.useEffect)((()=>{!T&&!M&&L()}),[T,M,L]),l((()=>{if(u.current&&c.current){let i=u.current.getOriginalEditor(),f=R(c.current,t||"",e||n||"text",m||"");f!==i.getModel()&&i.setModel(f)}}),[m],M),l((()=>{if(u.current&&c.current){let i=u.current.getModifiedEditor(),f=R(c.current,r||"",a||n||"text",E||"");f!==i.getModel()&&i.setModel(f)}}),[E],M),react.createElement(H,{width:z,height:V,isEditorReady:M,loading:P,_ref:w,className:F,wrapperProps:j})};(0,react.memo)(it);var st=function Ht(t){let r=(0,react.useRef)();return(0,react.useEffect)((()=>{r.current=t}),[t]),r.current},_=new Map;var ft=function Vt({defaultValue:t,defaultLanguage:r,defaultPath:n,value:e,language:a,path:m,theme:E="light",line:S,loading:N="Loading...",options:x={},overrideServices:P={},saveViewState:y=!0,keepCurrentModel:V=!1,width:z="100%",height:F="100%",className:j,wrapperProps:A={},beforeMount:q=h,onMount:M=h,onChange:O,onValidate:T=h}){let[s,u]=(0,react.useState)(!1),[c,w]=(0,react.useState)(!0),d=(0,react.useRef)(null),o=(0,react.useRef)(null),D=(0,react.useRef)(null),U=(0,react.useRef)(M),L=(0,react.useRef)(q),I=(0,react.useRef)(),i=(0,react.useRef)(e),f=st(m),Q=(0,react.useRef)(!1),B=(0,react.useRef)(!1);b((()=>{let p=es_loader.init();return p.then((g=>(d.current=g)&&w(!1))).catch((g=>"cancelation"!==g?.type&&console.error("Monaco initialization: error:",g))),()=>o.current?function pt(){I.current?.dispose(),V?y&&_.set(m,o.current.saveViewState()):o.current.getModel()?.dispose(),o.current.dispose()}():p.cancel()})),l((()=>{let p=R(d.current,t||e||"",r||a||"",m||n||"");p!==o.current?.getModel()&&(y&&_.set(f,o.current?.saveViewState()),o.current?.setModel(p),y&&o.current?.restoreViewState(_.get(m)))}),[m],s),l((()=>{o.current?.updateOptions(x)}),[x],s),l((()=>{!o.current||void 0===e||(o.current.getOption(d.current.editor.EditorOption.readOnly)?o.current.setValue(e):e!==o.current.getValue()&&(B.current=!0,o.current.executeEdits("",[{range:o.current.getModel().getFullModelRange(),text:e,forceMoveMarkers:!0}]),o.current.pushUndoStop(),B.current=!1))}),[e],s),l((()=>{let p=o.current?.getModel();p&&a&&d.current?.editor.setModelLanguage(p,a)}),[a],s),l((()=>{void 0!==S&&o.current?.revealLine(S)}),[S],s),l((()=>{d.current?.editor.setTheme(E)}),[E],s);let X=(0,react.useCallback)((()=>{if(D.current&&d.current&&!Q.current){L.current(d.current);let p=m||n,g=R(d.current,e||t||"",r||a||"",p||"");o.current=d.current?.editor.create(D.current,{model:g,automaticLayout:!0,...x},P),y&&o.current.restoreViewState(_.get(p)),d.current.editor.setTheme(E),u(!0),Q.current=!0}}),[t,r,n,e,a,m,x,P,y,E]);return(0,react.useEffect)((()=>{s&&U.current(o.current,d.current)}),[s]),(0,react.useEffect)((()=>{!c&&!s&&X()}),[c,s,X]),i.current=e,(0,react.useEffect)((()=>{s&&O&&(I.current?.dispose(),I.current=o.current?.onDidChangeModelContent((p=>{B.current||O(o.current.getValue(),p)})))}),[s,O]),(0,react.useEffect)((()=>{if(s){let p=d.current.editor.onDidChangeMarkers((g=>{let G=o.current.getModel()?.uri;if(G&&g.find((J=>J.path===G.path))){let J=d.current.editor.getModelMarkers({resource:G});T?.(J)}}));return()=>{p?.dispose()}}return()=>{}}),[s,T]),react.createElement(H,{width:z,height:F,isEditorReady:s,loading:N,_ref:D,className:j,wrapperProps:A})},Fe=(0,react.memo)(ft)},"./node_modules/@radix-ui/number/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(value,[min,max]){return Math.min(max,Math.max(min,value))}__webpack_require__.d(__webpack_exports__,{u:()=>$ae6933e535247d3d$export$7d15b64cf5a3a4c4})},"./node_modules/@radix-ui/primitive/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function $e42e1063c40fb3ef$export$b9ecd428b558ff10(originalEventHandler,ourEventHandler,{checkForDefaultPrevented=!0}={}){return function handleEvent(event){if(null==originalEventHandler||originalEventHandler(event),!1===checkForDefaultPrevented||!event.defaultPrevented)return null==ourEventHandler?void 0:ourEventHandler(event)}}__webpack_require__.d(__webpack_exports__,{M:()=>$e42e1063c40fb3ef$export$b9ecd428b558ff10})},"./node_modules/@radix-ui/react-arrow/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>$7e8f5cd07187803e$export$be92b6f5f03c0fe9});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs");const $7e8f5cd07187803e$export$21b07c8f274aebd5=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{children,width=10,height=5,...arrowProps}=props;return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_1__.WV.svg,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__.Z)({},arrowProps,{ref:forwardedRef,width,height,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),props.asChild?children:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("polygon",{points:"0,0 30,0 15,10"}))})),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5},"./node_modules/@radix-ui/react-collection/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>$e02a7d9cb1dc128c$export$c74125a8e3af6bb2});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs");function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(name){const PROVIDER_NAME=name+"CollectionProvider",[createCollectionContext,createCollectionScope]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__.b)(PROVIDER_NAME),[CollectionProviderImpl,useCollectionContext]=createCollectionContext(PROVIDER_NAME,{collectionRef:{current:null},itemMap:new Map}),CollectionProvider=props=>{const{scope,children}=props,ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),itemMap=react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Map).current;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CollectionProviderImpl,{scope,itemMap,collectionRef:ref},children)},COLLECTION_SLOT_NAME=name+"CollectionSlot",CollectionSlot=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const{scope,children}=props,context=useCollectionContext(COLLECTION_SLOT_NAME,scope),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(forwardedRef,context.collectionRef);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.g7,{ref:composedRefs},children)})),ITEM_SLOT_NAME=name+"CollectionItemSlot",CollectionItemSlot=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const{scope,children,...itemData}=props,ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(forwardedRef,ref),context=useCollectionContext(ITEM_SLOT_NAME,scope);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(context.itemMap.set(ref,{ref,...itemData}),()=>{context.itemMap.delete(ref)}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.g7,{"data-radix-collection-item":"",ref:composedRefs},children)}));return[{Provider:CollectionProvider,Slot:CollectionSlot,ItemSlot:CollectionItemSlot},function useCollection(scope){const context=useCollectionContext(name+"CollectionConsumer",scope);return react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{const collectionNode=context.collectionRef.current;if(!collectionNode)return[];const orderedNodes=Array.from(collectionNode.querySelectorAll("[data-radix-collection-item]"));return Array.from(context.itemMap.values()).sort(((a,b)=>orderedNodes.indexOf(a.ref.current)-orderedNodes.indexOf(b.ref.current)))}),[context.collectionRef,context.itemMap])},createCollectionScope]}},"./node_modules/@radix-ui/react-compose-refs/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>$6ed0406888f73fc4$export$43e446d32b3d21af,e:()=>$6ed0406888f73fc4$export$c7b2cbe3552a0d05});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function $6ed0406888f73fc4$export$43e446d32b3d21af(...refs){return node=>refs.forEach((ref=>function $6ed0406888f73fc4$var$setRef(ref,value){"function"==typeof ref?ref(value):null!=ref&&(ref.current=value)}(ref,node)))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...refs){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)($6ed0406888f73fc4$export$43e446d32b3d21af(...refs),refs)}},"./node_modules/@radix-ui/react-context/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>$c512c27ab02ef895$export$50c7b4e9d9f19c1,k:()=>$c512c27ab02ef895$export$fd42f52fd3ae1109});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function $c512c27ab02ef895$export$fd42f52fd3ae1109(rootComponentName,defaultContext){const Context=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(defaultContext);function Provider(props){const{children,...context}=props,value=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>context),Object.values(context));return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Context.Provider,{value},children)}return Provider.displayName=rootComponentName+"Provider",[Provider,function useContext(consumerName){const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context);if(context)return context;if(void 0!==defaultContext)return defaultContext;throw new Error(`\`${consumerName}\` must be used within \`${rootComponentName}\``)}]}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(scopeName,createContextScopeDeps=[]){let defaultContexts=[];const createScope=()=>{const scopeContexts=defaultContexts.map((defaultContext=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(defaultContext)));return function useScope(scope){const contexts=(null==scope?void 0:scope[scopeName])||scopeContexts;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({[`__scope${scopeName}`]:{...scope,[scopeName]:contexts}})),[scope,contexts])}};return createScope.scopeName=scopeName,[function $c512c27ab02ef895$export$fd42f52fd3ae1109(rootComponentName,defaultContext){const BaseContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(defaultContext),index=defaultContexts.length;function Provider(props){const{scope,children,...context}=props,Context=(null==scope?void 0:scope[scopeName][index])||BaseContext,value=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>context),Object.values(context));return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Context.Provider,{value},children)}return defaultContexts=[...defaultContexts,defaultContext],Provider.displayName=rootComponentName+"Provider",[Provider,function useContext(consumerName,scope){const Context=(null==scope?void 0:scope[scopeName][index])||BaseContext,context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context);if(context)return context;if(void 0!==defaultContext)return defaultContext;throw new Error(`\`${consumerName}\` must be used within \`${rootComponentName}\``)}]},$c512c27ab02ef895$var$composeContextScopes(createScope,...createContextScopeDeps)]}function $c512c27ab02ef895$var$composeContextScopes(...scopes){const baseScope=scopes[0];if(1===scopes.length)return baseScope;const createScope1=()=>{const scopeHooks=scopes.map((createScope=>({useScope:createScope(),scopeName:createScope.scopeName})));return function useComposedScopes(overrideScopes){const nextScopes1=scopeHooks.reduce(((nextScopes,{useScope,scopeName})=>({...nextScopes,...useScope(overrideScopes)[`__scope${scopeName}`]})),{});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({[`__scope${baseScope.scopeName}`]:nextScopes1})),[nextScopes1])}};return createScope1.scopeName=baseScope.scopeName,createScope1}},"./node_modules/@radix-ui/react-direction/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{gm:()=>$f631663db3294ace$export$b39126d51d94e6f3});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const $f631663db3294ace$var$DirectionContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(localDir){const globalDir=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)($f631663db3294ace$var$DirectionContext);return localDir||globalDir||"ltr"}},"./node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I0:()=>$5cb92bef7577960e$export$aecb2ddcb55c95be,XB:()=>$5cb92bef7577960e$export$177fb62ff3ec1f22,fC:()=>$5cb92bef7577960e$export$be92b6f5f03c0fe9});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs"),_radix_ui_react_use_escape_keydown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-use-escape-keydown/dist/index.mjs");let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{var _node$ownerDocument;const{disableOutsidePointerEvents=!1,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,onDismiss,...layerProps}=props,context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)($5cb92bef7577960e$var$DismissableLayerContext),[node1,setNode]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),ownerDocument=null!==(_node$ownerDocument=null==node1?void 0:node1.ownerDocument)&&void 0!==_node$ownerDocument?_node$ownerDocument:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,force]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_1__.e)(forwardedRef,(node=>setNode(node))),layers=Array.from(context.layers),[highestLayerWithOutsidePointerEventsDisabled]=[...context.layersWithOutsidePointerEventsDisabled].slice(-1),highestLayerWithOutsidePointerEventsDisabledIndex=layers.indexOf(highestLayerWithOutsidePointerEventsDisabled),index=node1?layers.indexOf(node1):-1,isBodyPointerEventsDisabled=context.layersWithOutsidePointerEventsDisabled.size>0,isPointerEventsEnabled=index>=highestLayerWithOutsidePointerEventsDisabledIndex,pointerDownOutside=function $5cb92bef7577960e$var$usePointerDownOutside(onPointerDownOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handlePointerDownOutside=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_6__.W)(onPointerDownOutside),isPointerInsideReactTreeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),handleClickRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((()=>{}));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handlePointerDown=event=>{if(event.target&&!isPointerInsideReactTreeRef.current){const eventDetail={originalEvent:event};function handleAndDispatchPointerDownOutsideEvent(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.pointerDownOutside",handlePointerDownOutside,eventDetail,{discrete:!0})}"touch"===event.pointerType?(ownerDocument.removeEventListener("click",handleClickRef.current),handleClickRef.current=handleAndDispatchPointerDownOutsideEvent,ownerDocument.addEventListener("click",handleClickRef.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent()}else ownerDocument.removeEventListener("click",handleClickRef.current);isPointerInsideReactTreeRef.current=!1},timerId=window.setTimeout((()=>{ownerDocument.addEventListener("pointerdown",handlePointerDown)}),0);return()=>{window.clearTimeout(timerId),ownerDocument.removeEventListener("pointerdown",handlePointerDown),ownerDocument.removeEventListener("click",handleClickRef.current)}}),[ownerDocument,handlePointerDownOutside]),{onPointerDownCapture:()=>isPointerInsideReactTreeRef.current=!0}}((event=>{const target=event.target,isPointerDownOnBranch=[...context.branches].some((branch=>branch.contains(target)));isPointerEventsEnabled&&!isPointerDownOnBranch&&(null==onPointerDownOutside||onPointerDownOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument),focusOutside=function $5cb92bef7577960e$var$useFocusOutside(onFocusOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handleFocusOutside=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_6__.W)(onFocusOutside),isFocusInsideReactTreeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handleFocus=event=>{if(event.target&&!isFocusInsideReactTreeRef.current){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.focusOutside",handleFocusOutside,{originalEvent:event},{discrete:!1})}};return ownerDocument.addEventListener("focusin",handleFocus),()=>ownerDocument.removeEventListener("focusin",handleFocus)}),[ownerDocument,handleFocusOutside]),{onFocusCapture:()=>isFocusInsideReactTreeRef.current=!0,onBlurCapture:()=>isFocusInsideReactTreeRef.current=!1}}((event=>{const target=event.target;[...context.branches].some((branch=>branch.contains(target)))||(null==onFocusOutside||onFocusOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument);return(0,_radix_ui_react_use_escape_keydown__WEBPACK_IMPORTED_MODULE_2__.e)((event=>{index===context.layers.size-1&&(null==onEscapeKeyDown||onEscapeKeyDown(event),!event.defaultPrevented&&onDismiss&&(event.preventDefault(),onDismiss()))}),ownerDocument),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(node1)return disableOutsidePointerEvents&&(0===context.layersWithOutsidePointerEventsDisabled.size&&($5cb92bef7577960e$var$originalBodyPointerEvents=ownerDocument.body.style.pointerEvents,ownerDocument.body.style.pointerEvents="none"),context.layersWithOutsidePointerEventsDisabled.add(node1)),context.layers.add(node1),$5cb92bef7577960e$var$dispatchUpdate(),()=>{disableOutsidePointerEvents&&1===context.layersWithOutsidePointerEventsDisabled.size&&(ownerDocument.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}}),[node1,ownerDocument,disableOutsidePointerEvents,context]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{node1&&(context.layers.delete(node1),context.layersWithOutsidePointerEventsDisabled.delete(node1),$5cb92bef7577960e$var$dispatchUpdate())}),[node1,context]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handleUpdate=()=>force({});return document.addEventListener("dismissableLayer.update",handleUpdate),()=>document.removeEventListener("dismissableLayer.update",handleUpdate)}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({},layerProps,{ref:composedRefs,style:{pointerEvents:isBodyPointerEventsDisabled?isPointerEventsEnabled?"auto":"none":void 0,...props.style},onFocusCapture:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_5__.M)(props.onFocusCapture,focusOutside.onFocusCapture),onBlurCapture:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_5__.M)(props.onBlurCapture,focusOutside.onBlurCapture),onPointerDownCapture:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_5__.M)(props.onPointerDownCapture,pointerDownOutside.onPointerDownCapture)}))})),$5cb92bef7577960e$export$4d5eb2109db14228=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)($5cb92bef7577960e$var$DismissableLayerContext),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_1__.e)(forwardedRef,ref);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const node=ref.current;if(node)return context.branches.add(node),()=>{context.branches.delete(node)}}),[context.branches]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({},props,{ref:composedRefs}))}));function $5cb92bef7577960e$var$dispatchUpdate(){const event=new CustomEvent("dismissableLayer.update");document.dispatchEvent(event)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(name,handler,detail,{discrete}){const target=detail.originalEvent.target,event=new CustomEvent(name,{bubbles:!1,cancelable:!0,detail});handler&&target.addEventListener(name,handler,{once:!0}),discrete?(0,_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.jH)(target,event):target.dispatchEvent(event)}const $5cb92bef7577960e$export$be92b6f5f03c0fe9=$5cb92bef7577960e$export$177fb62ff3ec1f22,$5cb92bef7577960e$export$aecb2ddcb55c95be=$5cb92bef7577960e$export$4d5eb2109db14228},"./node_modules/@radix-ui/react-focus-guards/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EW:()=>$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{var _edgeGuards$,_edgeGuards$2;const edgeGuards=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(_edgeGuards$=edgeGuards[0])&&void 0!==_edgeGuards$?_edgeGuards$:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",null!==(_edgeGuards$2=edgeGuards[1])&&void 0!==_edgeGuards$2?_edgeGuards$2:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{1===$3db38b7d1fb3fe6a$var$count&&document.querySelectorAll("[data-radix-focus-guard]").forEach((node=>node.remove())),$3db38b7d1fb3fe6a$var$count--}}),[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const element=document.createElement("span");return element.setAttribute("data-radix-focus-guard",""),element.tabIndex=0,element.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",element}},"./node_modules/@radix-ui/react-focus-scope/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>$d3863c46a17e8a28$export$20e40289641fbbb6});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs");const $d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{loop=!1,trapped=!1,onMountAutoFocus:onMountAutoFocusProp,onUnmountAutoFocus:onUnmountAutoFocusProp,...scopeProps}=props,[container1,setContainer]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),onMountAutoFocus=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__.W)(onMountAutoFocusProp),onUnmountAutoFocus=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__.W)(onUnmountAutoFocusProp),lastFocusedElementRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(forwardedRef,(node=>setContainer(node))),focusScope=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(trapped){function handleFocusIn(event){if(focusScope.paused||!container1)return;const target=event.target;container1.contains(target)?lastFocusedElementRef.current=target:$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0})}function handleFocusOut(event){if(focusScope.paused||!container1)return;const relatedTarget=event.relatedTarget;null!==relatedTarget&&(container1.contains(relatedTarget)||$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0}))}function handleMutations(mutations){if(document.activeElement===document.body)for(const mutation of mutations)mutation.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(container1)}document.addEventListener("focusin",handleFocusIn),document.addEventListener("focusout",handleFocusOut);const mutationObserver=new MutationObserver(handleMutations);return container1&&mutationObserver.observe(container1,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn),document.removeEventListener("focusout",handleFocusOut),mutationObserver.disconnect()}}}),[trapped,container1,focusScope.paused]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(container1){$d3863c46a17e8a28$var$focusScopesStack.add(focusScope);const previouslyFocusedElement=document.activeElement;if(!container1.contains(previouslyFocusedElement)){const mountEvent=new CustomEvent("focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),container1.dispatchEvent(mountEvent),mountEvent.defaultPrevented||(!function $d3863c46a17e8a28$var$focusFirst(candidates,{select=!1}={}){const previouslyFocusedElement=document.activeElement;for(const candidate of candidates)if($d3863c46a17e8a28$var$focus(candidate,{select}),document.activeElement!==previouslyFocusedElement)return}(function $d3863c46a17e8a28$var$removeLinks(items){return items.filter((item=>"A"!==item.tagName))}($d3863c46a17e8a28$var$getTabbableCandidates(container1)),{select:!0}),document.activeElement===previouslyFocusedElement&&$d3863c46a17e8a28$var$focus(container1))}return()=>{container1.removeEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),setTimeout((()=>{const unmountEvent=new CustomEvent("focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),container1.dispatchEvent(unmountEvent),unmountEvent.defaultPrevented||$d3863c46a17e8a28$var$focus(null!=previouslyFocusedElement?previouslyFocusedElement:document.body,{select:!0}),container1.removeEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),$d3863c46a17e8a28$var$focusScopesStack.remove(focusScope)}),0)}}}),[container1,onMountAutoFocus,onUnmountAutoFocus,focusScope]);const handleKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{if(!loop&&!trapped)return;if(focusScope.paused)return;const isTabKey="Tab"===event.key&&!event.altKey&&!event.ctrlKey&&!event.metaKey,focusedElement=document.activeElement;if(isTabKey&&focusedElement){const container=event.currentTarget,[first,last]=function $d3863c46a17e8a28$var$getTabbableEdges(container){const candidates=$d3863c46a17e8a28$var$getTabbableCandidates(container),first=$d3863c46a17e8a28$var$findVisible(candidates,container),last=$d3863c46a17e8a28$var$findVisible(candidates.reverse(),container);return[first,last]}(container);first&&last?event.shiftKey||focusedElement!==last?event.shiftKey&&focusedElement===first&&(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(last,{select:!0})):(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(first,{select:!0})):focusedElement===container&&event.preventDefault()}}),[loop,trapped,focusScope.paused]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({tabIndex:-1},scopeProps,{ref:composedRefs,onKeyDown:handleKeyDown}))}));function $d3863c46a17e8a28$var$getTabbableCandidates(container){const nodes=[],walker=document.createTreeWalker(container,NodeFilter.SHOW_ELEMENT,{acceptNode:node=>{const isHiddenInput="INPUT"===node.tagName&&"hidden"===node.type;return node.disabled||node.hidden||isHiddenInput?NodeFilter.FILTER_SKIP:node.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;walker.nextNode();)nodes.push(walker.currentNode);return nodes}function $d3863c46a17e8a28$var$findVisible(elements,container){for(const element of elements)if(!$d3863c46a17e8a28$var$isHidden(element,{upTo:container}))return element}function $d3863c46a17e8a28$var$isHidden(node,{upTo}){if("hidden"===getComputedStyle(node).visibility)return!0;for(;node;){if(void 0!==upTo&&node===upTo)return!1;if("none"===getComputedStyle(node).display)return!0;node=node.parentElement}return!1}function $d3863c46a17e8a28$var$focus(element,{select=!1}={}){if(element&&element.focus){const previouslyFocusedElement=document.activeElement;element.focus({preventScroll:!0}),element!==previouslyFocusedElement&&function $d3863c46a17e8a28$var$isSelectableInput(element){return element instanceof HTMLInputElement&&"select"in element}(element)&&select&&element.select()}}const $d3863c46a17e8a28$var$focusScopesStack=function $d3863c46a17e8a28$var$createFocusScopesStack(){let stack=[];return{add(focusScope){const activeFocusScope=stack[0];focusScope!==activeFocusScope&&(null==activeFocusScope||activeFocusScope.pause()),stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),stack.unshift(focusScope)},remove(focusScope){var _stack$;stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),null===(_stack$=stack[0])||void 0===_stack$||_stack$.resume()}}}();function $d3863c46a17e8a28$var$arrayRemove(array,item){const updatedArray=[...array],index=updatedArray.indexOf(item);return-1!==index&&updatedArray.splice(index,1),updatedArray}},"./node_modules/@radix-ui/react-id/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var react__WEBPACK_IMPORTED_MODULE_0___namespace_cache;__webpack_require__.d(__webpack_exports__,{M:()=>$1746a345f3d73bb7$export$f680877a34711e37});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs");const $1746a345f3d73bb7$var$useReactId=(react__WEBPACK_IMPORTED_MODULE_0___namespace_cache||(react__WEBPACK_IMPORTED_MODULE_0___namespace_cache=__webpack_require__.t(react__WEBPACK_IMPORTED_MODULE_0__,2)))["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(deterministicId){const[id,setId]=react__WEBPACK_IMPORTED_MODULE_0__.useState($1746a345f3d73bb7$var$useReactId());return(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__.b)((()=>{deterministicId||setId((reactId=>null!=reactId?reactId:String($1746a345f3d73bb7$var$count++)))}),[deterministicId]),deterministicId||(id?`radix-${id}`:"")}},"./node_modules/@radix-ui/react-popper/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D7:()=>$cf1ac5d9fe0e8206$export$722aac194ae923,Eh:()=>$cf1ac5d9fe0e8206$export$21b07c8f274aebd5,VY:()=>$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,ee:()=>$cf1ac5d9fe0e8206$export$b688253958b8dfe7,fC:()=>$cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs"),_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@floating-ui/core/dist/floating-ui.core.mjs"),_radix_ui_react_arrow__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@radix-ui/react-arrow/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs"),_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs"),_radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/react-use-size/dist/index.mjs");const[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__.b)("Popper"),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext("Popper"),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=props=>{const{__scopePopper,children}=props,[anchor,setAnchor]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cf1ac5d9fe0e8206$var$PopperProvider,{scope:__scopePopper,anchor,onAnchorChange:setAnchor},children)},$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopePopper,virtualRef,...anchorProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperAnchor",__scopePopper),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(forwardedRef,ref);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{context.onAnchorChange((null==virtualRef?void 0:virtualRef.current)||ref.current)})),virtualRef?null:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({},anchorProps,{ref:composedRefs}))})),[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext("PopperContent"),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{var _arrowSize$width,_arrowSize$height,_middlewareData$arrow,_middlewareData$arrow2,_middlewareData$arrow3,_middlewareData$trans,_middlewareData$trans2,_middlewareData$hide;const{__scopePopper,side="bottom",sideOffset=0,align="center",alignOffset=0,arrowPadding=0,avoidCollisions=!0,collisionBoundary=[],collisionPadding:collisionPaddingProp=0,sticky="partial",hideWhenDetached=!1,updatePositionStrategy="optimized",onPlaced,...contentProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperContent",__scopePopper),[content,setContent]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(forwardedRef,(node=>setContent(node))),[arrow,setArrow]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),arrowSize=(0,_radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_5__.t)(arrow),arrowWidth=null!==(_arrowSize$width=null==arrowSize?void 0:arrowSize.width)&&void 0!==_arrowSize$width?_arrowSize$width:0,arrowHeight=null!==(_arrowSize$height=null==arrowSize?void 0:arrowSize.height)&&void 0!==_arrowSize$height?_arrowSize$height:0,desiredPlacement=side+("center"!==align?"-"+align:""),collisionPadding="number"==typeof collisionPaddingProp?collisionPaddingProp:{top:0,right:0,bottom:0,left:0,...collisionPaddingProp},boundary=Array.isArray(collisionBoundary)?collisionBoundary:[collisionBoundary],hasExplicitBoundaries=boundary.length>0,detectOverflowOptions={padding:collisionPadding,boundary:boundary.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:hasExplicitBoundaries},{refs,floatingStyles,placement,isPositioned,middlewareData}=(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_6__.YF)({strategy:"fixed",placement:desiredPlacement,whileElementsMounted:(...args)=>(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_7__.Me)(...args,{animationFrame:"always"===updatePositionStrategy}),elements:{reference:context.anchor},middleware:[(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.cv)({mainAxis:sideOffset+arrowHeight,alignmentAxis:alignOffset}),avoidCollisions&&(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.uY)({mainAxis:!0,crossAxis:!1,limiter:"partial"===sticky?(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.dr)():void 0,...detectOverflowOptions}),avoidCollisions&&(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.RR)({...detectOverflowOptions}),(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.dp)({...detectOverflowOptions,apply:({elements,rects,availableWidth,availableHeight})=>{const{width:anchorWidth,height:anchorHeight}=rects.reference,contentStyle=elements.floating.style;contentStyle.setProperty("--radix-popper-available-width",`${availableWidth}px`),contentStyle.setProperty("--radix-popper-available-height",`${availableHeight}px`),contentStyle.setProperty("--radix-popper-anchor-width",`${anchorWidth}px`),contentStyle.setProperty("--radix-popper-anchor-height",`${anchorHeight}px`)}}),arrow&&(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_6__.x7)({element:arrow,padding:arrowPadding}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth,arrowHeight}),hideWhenDetached&&(0,_floating_ui_react_dom__WEBPACK_IMPORTED_MODULE_8__.Cp)({strategy:"referenceHidden",...detectOverflowOptions})]}),[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),handlePlaced=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_9__.W)(onPlaced);(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_10__.b)((()=>{isPositioned&&(null==handlePlaced||handlePlaced())}),[isPositioned,handlePlaced]);const arrowX=null===(_middlewareData$arrow=middlewareData.arrow)||void 0===_middlewareData$arrow?void 0:_middlewareData$arrow.x,arrowY=null===(_middlewareData$arrow2=middlewareData.arrow)||void 0===_middlewareData$arrow2?void 0:_middlewareData$arrow2.y,cannotCenterArrow=0!==(null===(_middlewareData$arrow3=middlewareData.arrow)||void 0===_middlewareData$arrow3?void 0:_middlewareData$arrow3.centerOffset),[contentZIndex,setContentZIndex]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();return(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_10__.b)((()=>{content&&setContentZIndex(window.getComputedStyle(content).zIndex)}),[content]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{ref:refs.setFloating,"data-radix-popper-content-wrapper":"",style:{...floatingStyles,transform:isPositioned?floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:contentZIndex,"--radix-popper-transform-origin":[null===(_middlewareData$trans=middlewareData.transformOrigin)||void 0===_middlewareData$trans?void 0:_middlewareData$trans.x,null===(_middlewareData$trans2=middlewareData.transformOrigin)||void 0===_middlewareData$trans2?void 0:_middlewareData$trans2.y].join(" ")},dir:props.dir},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:__scopePopper,placedSide,onArrowChange:setArrow,arrowX,arrowY,shouldHideArrow:cannotCenterArrow},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_3__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({"data-side":placedSide,"data-align":placedAlign},contentProps,{ref:composedRefs,style:{...contentProps.style,animation:isPositioned?void 0:"none",opacity:null!==(_middlewareData$hide=middlewareData.hide)&&void 0!==_middlewareData$hide&&_middlewareData$hide.referenceHidden?0:void 0}}))))})),$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function $cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0(props,forwardedRef){const{__scopePopper,...arrowProps}=props,contentContext=$cf1ac5d9fe0e8206$var$useContentContext("PopperArrow",__scopePopper),baseSide=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[contentContext.placedSide];return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",{ref:contentContext.onArrowChange,style:{position:"absolute",left:contentContext.arrowX,top:contentContext.arrowY,[baseSide]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[contentContext.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[contentContext.placedSide],visibility:contentContext.shouldHideArrow?"hidden":void 0}},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_arrow__WEBPACK_IMPORTED_MODULE_11__.f,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({},arrowProps,{ref:forwardedRef,style:{...arrowProps.style,display:"block"}})))}));function $cf1ac5d9fe0e8206$var$isNotNull(value){return null!==value}const $cf1ac5d9fe0e8206$var$transformOrigin=options=>({name:"transformOrigin",options,fn(data){var _middlewareData$arrow4,_middlewareData$arrow5,_middlewareData$arrow6,_middlewareData$arrow7,_middlewareData$arrow8;const{placement,rects,middlewareData}=data,isArrowHidden=0!==(null===(_middlewareData$arrow4=middlewareData.arrow)||void 0===_middlewareData$arrow4?void 0:_middlewareData$arrow4.centerOffset),arrowWidth=isArrowHidden?0:options.arrowWidth,arrowHeight=isArrowHidden?0:options.arrowHeight,[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),noArrowAlign={start:"0%",center:"50%",end:"100%"}[placedAlign],arrowXCenter=(null!==(_middlewareData$arrow5=null===(_middlewareData$arrow6=middlewareData.arrow)||void 0===_middlewareData$arrow6?void 0:_middlewareData$arrow6.x)&&void 0!==_middlewareData$arrow5?_middlewareData$arrow5:0)+arrowWidth/2,arrowYCenter=(null!==(_middlewareData$arrow7=null===(_middlewareData$arrow8=middlewareData.arrow)||void 0===_middlewareData$arrow8?void 0:_middlewareData$arrow8.y)&&void 0!==_middlewareData$arrow7?_middlewareData$arrow7:0)+arrowHeight/2;let x="",y="";return"bottom"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=-arrowHeight+"px"):"top"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=`${rects.floating.height+arrowHeight}px`):"right"===placedSide?(x=-arrowHeight+"px",y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`):"left"===placedSide&&(x=`${rects.floating.width+arrowHeight}px`,y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`),{data:{x,y}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement){const[side,align="center"]=placement.split("-");return[side,align]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0},"./node_modules/@radix-ui/react-portal/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>$f1701beae083dbae$export$602eac185826482c});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs");const $f1701beae083dbae$export$602eac185826482c=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{var _globalThis$document;const{container=null===globalThis||void 0===globalThis||null===(_globalThis$document=globalThis.document)||void 0===_globalThis$document?void 0:_globalThis$document.body,...portalProps}=props;return container?react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_2__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},portalProps,{ref:forwardedRef})),container):null}))},"./node_modules/@radix-ui/react-presence/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>$921a889cee6df7e8$export$99c2b779aa4e8b8b});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs");const $921a889cee6df7e8$export$99c2b779aa4e8b8b=props=>{const{present,children}=props,presence=function $921a889cee6df7e8$var$usePresence(present){const[node1,setNode]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),stylesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({}),prevPresentRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(present),prevAnimationNameRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("none"),initialState=present?"mounted":"unmounted",[state,send]=function $fe963b355347cc68$export$3e6543de14f8614f(initialState,machine){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(((state,event)=>{const nextState=machine[state][event];return null!=nextState?nextState:state}),initialState)}(initialState,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const currentAnimationName=$921a889cee6df7e8$var$getAnimationName(stylesRef.current);prevAnimationNameRef.current="mounted"===state?currentAnimationName:"none"}),[state]),(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_3__.b)((()=>{const styles=stylesRef.current,wasPresent=prevPresentRef.current;if(wasPresent!==present){const prevAnimationName=prevAnimationNameRef.current,currentAnimationName=$921a889cee6df7e8$var$getAnimationName(styles);if(present)send("MOUNT");else if("none"===currentAnimationName||"none"===(null==styles?void 0:styles.display))send("UNMOUNT");else{send(wasPresent&&prevAnimationName!==currentAnimationName?"ANIMATION_OUT":"UNMOUNT")}prevPresentRef.current=present}}),[present,send]),(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_3__.b)((()=>{if(node1){const handleAnimationEnd=event=>{const isCurrentAnimation=$921a889cee6df7e8$var$getAnimationName(stylesRef.current).includes(event.animationName);event.target===node1&&isCurrentAnimation&&(0,react_dom__WEBPACK_IMPORTED_MODULE_1__.flushSync)((()=>send("ANIMATION_END")))},handleAnimationStart=event=>{event.target===node1&&(prevAnimationNameRef.current=$921a889cee6df7e8$var$getAnimationName(stylesRef.current))};return node1.addEventListener("animationstart",handleAnimationStart),node1.addEventListener("animationcancel",handleAnimationEnd),node1.addEventListener("animationend",handleAnimationEnd),()=>{node1.removeEventListener("animationstart",handleAnimationStart),node1.removeEventListener("animationcancel",handleAnimationEnd),node1.removeEventListener("animationend",handleAnimationEnd)}}send("ANIMATION_END")}),[node1,send]),{isPresent:["mounted","unmountSuspended"].includes(state),ref:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((node=>{node&&(stylesRef.current=getComputedStyle(node)),setNode(node)}),[])}}(present),child="function"==typeof children?children({present:presence.isPresent}):react__WEBPACK_IMPORTED_MODULE_0__.Children.only(children),ref=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.e)(presence.ref,child.ref);return"function"==typeof children||presence.isPresent?(0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child,{ref}):null};function $921a889cee6df7e8$var$getAnimationName(styles){return(null==styles?void 0:styles.animationName)||"none"}$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence"},"./node_modules/@radix-ui/react-primitive/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{WV:()=>$8927f6f2acc4f386$export$250ffa63cdc0d034,jH:()=>$8927f6f2acc4f386$export$6d1a0317bde7de7f});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs");const $8927f6f2acc4f386$export$250ffa63cdc0d034=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((primitive,node)=>{const Node=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{asChild,...primitiveProps}=props,Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_2__.g7:node;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Comp,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},primitiveProps,{ref:forwardedRef}))}));return Node.displayName=`Primitive.${node}`,{...primitive,[node]:Node}}),{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(target,event){target&&(0,react_dom__WEBPACK_IMPORTED_MODULE_1__.flushSync)((()=>target.dispatchEvent(event)))}},"./node_modules/@radix-ui/react-roving-focus/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Pc:()=>$d7bdfb9eb0fdf311$export$c7109489551a4f4,ck:()=>$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,fC:()=>$d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_collection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-collection/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@radix-ui/react-id/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs"),_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),_radix_ui_react_direction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/react-direction/dist/index.mjs");const $d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=(0,_radix_ui_react_collection__WEBPACK_IMPORTED_MODULE_1__.B)("RovingFocusGroup"),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__.b)("RovingFocusGroup",[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext("RovingFocusGroup"),$d7bdfb9eb0fdf311$export$8699f7c8af148338=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:props.__scopeRovingFocusGroup},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:props.__scopeRovingFocusGroup},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},props,{ref:forwardedRef})))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopeRovingFocusGroup,orientation,loop=!1,dir,currentTabStopId:currentTabStopIdProp,defaultCurrentTabStopId,onCurrentTabStopIdChange,onEntryFocus,...groupProps}=props,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_4__.e)(forwardedRef,ref),direction=(0,_radix_ui_react_direction__WEBPACK_IMPORTED_MODULE_5__.gm)(dir),[currentTabStopId=null,setCurrentTabStopId]=(0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_6__.T)({prop:currentTabStopIdProp,defaultProp:defaultCurrentTabStopId,onChange:onCurrentTabStopIdChange}),[isTabbingBackOut,setIsTabbingBackOut]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),handleEntryFocus=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_7__.W)(onEntryFocus),getItems=$d7bdfb9eb0fdf311$var$useCollection(__scopeRovingFocusGroup),isClickFocusRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),[focusableItemsCount,setFocusableItemsCount]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const node=ref.current;if(node)return node.addEventListener("rovingFocusGroup.onEntryFocus",handleEntryFocus),()=>node.removeEventListener("rovingFocusGroup.onEntryFocus",handleEntryFocus)}),[handleEntryFocus]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:__scopeRovingFocusGroup,orientation,dir:direction,loop,currentTabStopId,onItemFocus:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((tabStopId=>setCurrentTabStopId(tabStopId)),[setCurrentTabStopId]),onItemShiftTab:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setIsTabbingBackOut(!0)),[]),onFocusableItemAdd:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setFocusableItemsCount((prevCount=>prevCount+1))),[]),onFocusableItemRemove:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setFocusableItemsCount((prevCount=>prevCount-1))),[])},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_8__.WV.div,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({tabIndex:isTabbingBackOut||0===focusableItemsCount?-1:0,"data-orientation":orientation},groupProps,{ref:composedRefs,style:{outline:"none",...props.style},onMouseDown:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onMouseDown,(()=>{isClickFocusRef.current=!0})),onFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onFocus,(event=>{const isKeyboardFocus=!isClickFocusRef.current;if(event.target===event.currentTarget&&isKeyboardFocus&&!isTabbingBackOut){const entryFocusEvent=new CustomEvent("rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(event.currentTarget.dispatchEvent(entryFocusEvent),!entryFocusEvent.defaultPrevented){const items=getItems().filter((item=>item.focusable));$d7bdfb9eb0fdf311$var$focusFirst([items.find((item=>item.active)),items.find((item=>item.id===currentTabStopId)),...items].filter(Boolean).map((item=>item.ref.current)))}}isClickFocusRef.current=!1})),onBlur:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onBlur,(()=>setIsTabbingBackOut(!1)))})))})),$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopeRovingFocusGroup,focusable=!0,active=!1,tabStopId,...itemProps}=props,autoId=(0,_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_10__.M)(),id=tabStopId||autoId,context=$d7bdfb9eb0fdf311$var$useRovingFocusContext("RovingFocusGroupItem",__scopeRovingFocusGroup),isCurrentTabStop=context.currentTabStopId===id,getItems=$d7bdfb9eb0fdf311$var$useCollection(__scopeRovingFocusGroup),{onFocusableItemAdd,onFocusableItemRemove}=context;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(focusable)return onFocusableItemAdd(),()=>onFocusableItemRemove()}),[focusable,onFocusableItemAdd,onFocusableItemRemove]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:__scopeRovingFocusGroup,id,focusable,active},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_8__.WV.span,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({tabIndex:isCurrentTabStop?0:-1,"data-orientation":context.orientation},itemProps,{ref:forwardedRef,onMouseDown:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onMouseDown,(event=>{focusable?context.onItemFocus(id):event.preventDefault()})),onFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onFocus,(()=>context.onItemFocus(id))),onKeyDown:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_9__.M)(props.onKeyDown,(event=>{if("Tab"===event.key&&event.shiftKey)return void context.onItemShiftTab();if(event.target!==event.currentTarget)return;const focusIntent=function $d7bdfb9eb0fdf311$var$getFocusIntent(event,orientation,dir){const key=function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(key,dir){return"rtl"!==dir?key:"ArrowLeft"===key?"ArrowRight":"ArrowRight"===key?"ArrowLeft":key}(event.key,dir);return"vertical"===orientation&&["ArrowLeft","ArrowRight"].includes(key)||"horizontal"===orientation&&["ArrowUp","ArrowDown"].includes(key)?void 0:$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[key]}(event,context.orientation,context.dir);if(void 0!==focusIntent){event.preventDefault();let candidateNodes=getItems().filter((item=>item.focusable)).map((item=>item.ref.current));if("last"===focusIntent)candidateNodes.reverse();else if("prev"===focusIntent||"next"===focusIntent){"prev"===focusIntent&&candidateNodes.reverse();const currentIndex=candidateNodes.indexOf(event.currentTarget);candidateNodes=context.loop?function $d7bdfb9eb0fdf311$var$wrapArray(array,startIndex){return array.map(((_,index)=>array[(startIndex+index)%array.length]))}(candidateNodes,currentIndex+1):candidateNodes.slice(currentIndex+1)}setTimeout((()=>$d7bdfb9eb0fdf311$var$focusFirst(candidateNodes)))}}))})))})),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$focusFirst(candidates){const PREVIOUSLY_FOCUSED_ELEMENT=document.activeElement;for(const candidate of candidates){if(candidate===PREVIOUSLY_FOCUSED_ELEMENT)return;if(candidate.focus(),document.activeElement!==PREVIOUSLY_FOCUSED_ELEMENT)return}}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454},"./node_modules/@radix-ui/react-select/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{VY:()=>$cc7e05a45900e73f$export$7c6e2c02157bb7d2,JO:()=>$cc7e05a45900e73f$export$f04a61298a47a40f,ck:()=>$cc7e05a45900e73f$export$6d08773d2e66f8f2,eT:()=>$cc7e05a45900e73f$export$d6e5bf9c43ea9319,h_:()=>$cc7e05a45900e73f$export$602eac185826482c,fC:()=>$cc7e05a45900e73f$export$be92b6f5f03c0fe9,Z0:()=>$cc7e05a45900e73f$export$1ff3c3f08ae963c0,xz:()=>$cc7e05a45900e73f$export$41fb9f06171c75f4,B4:()=>$cc7e05a45900e73f$export$4c8d1a57a761ef94,l_:()=>$cc7e05a45900e73f$export$d5c6c08dc2d3ca7});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),dist=__webpack_require__("./node_modules/@radix-ui/number/dist/index.mjs"),primitive_dist=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),react_collection_dist=__webpack_require__("./node_modules/@radix-ui/react-collection/dist/index.mjs"),react_compose_refs_dist=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),react_context_dist=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),react_direction_dist=__webpack_require__("./node_modules/@radix-ui/react-direction/dist/index.mjs"),react_primitive_dist=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),react_use_callback_ref_dist=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs"),react_use_escape_keydown_dist=__webpack_require__("./node_modules/@radix-ui/react-use-escape-keydown/dist/index.mjs");let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=(0,react.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=(0,react.forwardRef)(((props,forwardedRef)=>{var _node$ownerDocument;const{disableOutsidePointerEvents=!1,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,onDismiss,...layerProps}=props,context=(0,react.useContext)($5cb92bef7577960e$var$DismissableLayerContext),[node1,setNode]=(0,react.useState)(null),ownerDocument=null!==(_node$ownerDocument=null==node1?void 0:node1.ownerDocument)&&void 0!==_node$ownerDocument?_node$ownerDocument:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,force]=(0,react.useState)({}),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setNode(node))),layers=Array.from(context.layers),[highestLayerWithOutsidePointerEventsDisabled]=[...context.layersWithOutsidePointerEventsDisabled].slice(-1),highestLayerWithOutsidePointerEventsDisabledIndex=layers.indexOf(highestLayerWithOutsidePointerEventsDisabled),index=node1?layers.indexOf(node1):-1,isBodyPointerEventsDisabled=context.layersWithOutsidePointerEventsDisabled.size>0,isPointerEventsEnabled=index>=highestLayerWithOutsidePointerEventsDisabledIndex,pointerDownOutside=function $5cb92bef7577960e$var$usePointerDownOutside(onPointerDownOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handlePointerDownOutside=(0,react_use_callback_ref_dist.W)(onPointerDownOutside),isPointerInsideReactTreeRef=(0,react.useRef)(!1),handleClickRef=(0,react.useRef)((()=>{}));return(0,react.useEffect)((()=>{const handlePointerDown=event=>{if(event.target&&!isPointerInsideReactTreeRef.current){const eventDetail={originalEvent:event};function handleAndDispatchPointerDownOutsideEvent(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.pointerDownOutside",handlePointerDownOutside,eventDetail,{discrete:!0})}"touch"===event.pointerType?(ownerDocument.removeEventListener("click",handleClickRef.current),handleClickRef.current=handleAndDispatchPointerDownOutsideEvent,ownerDocument.addEventListener("click",handleClickRef.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent()}isPointerInsideReactTreeRef.current=!1},timerId=window.setTimeout((()=>{ownerDocument.addEventListener("pointerdown",handlePointerDown)}),0);return()=>{window.clearTimeout(timerId),ownerDocument.removeEventListener("pointerdown",handlePointerDown),ownerDocument.removeEventListener("click",handleClickRef.current)}}),[ownerDocument,handlePointerDownOutside]),{onPointerDownCapture:()=>isPointerInsideReactTreeRef.current=!0}}((event=>{const target=event.target,isPointerDownOnBranch=[...context.branches].some((branch=>branch.contains(target)));isPointerEventsEnabled&&!isPointerDownOnBranch&&(null==onPointerDownOutside||onPointerDownOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument),focusOutside=function $5cb92bef7577960e$var$useFocusOutside(onFocusOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handleFocusOutside=(0,react_use_callback_ref_dist.W)(onFocusOutside),isFocusInsideReactTreeRef=(0,react.useRef)(!1);return(0,react.useEffect)((()=>{const handleFocus=event=>{if(event.target&&!isFocusInsideReactTreeRef.current){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.focusOutside",handleFocusOutside,{originalEvent:event},{discrete:!1})}};return ownerDocument.addEventListener("focusin",handleFocus),()=>ownerDocument.removeEventListener("focusin",handleFocus)}),[ownerDocument,handleFocusOutside]),{onFocusCapture:()=>isFocusInsideReactTreeRef.current=!0,onBlurCapture:()=>isFocusInsideReactTreeRef.current=!1}}((event=>{const target=event.target;[...context.branches].some((branch=>branch.contains(target)))||(null==onFocusOutside||onFocusOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument);return(0,react_use_escape_keydown_dist.e)((event=>{index===context.layers.size-1&&(null==onEscapeKeyDown||onEscapeKeyDown(event),!event.defaultPrevented&&onDismiss&&(event.preventDefault(),onDismiss()))}),ownerDocument),(0,react.useEffect)((()=>{if(node1)return disableOutsidePointerEvents&&(0===context.layersWithOutsidePointerEventsDisabled.size&&($5cb92bef7577960e$var$originalBodyPointerEvents=ownerDocument.body.style.pointerEvents,ownerDocument.body.style.pointerEvents="none"),context.layersWithOutsidePointerEventsDisabled.add(node1)),context.layers.add(node1),$5cb92bef7577960e$var$dispatchUpdate(),()=>{disableOutsidePointerEvents&&1===context.layersWithOutsidePointerEventsDisabled.size&&(ownerDocument.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}}),[node1,ownerDocument,disableOutsidePointerEvents,context]),(0,react.useEffect)((()=>()=>{node1&&(context.layers.delete(node1),context.layersWithOutsidePointerEventsDisabled.delete(node1),$5cb92bef7577960e$var$dispatchUpdate())}),[node1,context]),(0,react.useEffect)((()=>{const handleUpdate=()=>force({});return document.addEventListener("dismissableLayer.update",handleUpdate),()=>document.removeEventListener("dismissableLayer.update",handleUpdate)}),[]),(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},layerProps,{ref:composedRefs,style:{pointerEvents:isBodyPointerEventsDisabled?isPointerEventsEnabled?"auto":"none":void 0,...props.style},onFocusCapture:(0,primitive_dist.M)(props.onFocusCapture,focusOutside.onFocusCapture),onBlurCapture:(0,primitive_dist.M)(props.onBlurCapture,focusOutside.onBlurCapture),onPointerDownCapture:(0,primitive_dist.M)(props.onPointerDownCapture,pointerDownOutside.onPointerDownCapture)}))}));function $5cb92bef7577960e$var$dispatchUpdate(){const event=new CustomEvent("dismissableLayer.update");document.dispatchEvent(event)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(name,handler,detail,{discrete}){const target=detail.originalEvent.target,event=new CustomEvent(name,{bubbles:!1,cancelable:!0,detail});handler&&target.addEventListener(name,handler,{once:!0}),discrete?(0,react_primitive_dist.jH)(target,event):target.dispatchEvent(event)}var react_focus_guards_dist=__webpack_require__("./node_modules/@radix-ui/react-focus-guards/dist/index.mjs");const $d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=(0,react.forwardRef)(((props,forwardedRef)=>{const{loop=!1,trapped=!1,onMountAutoFocus:onMountAutoFocusProp,onUnmountAutoFocus:onUnmountAutoFocusProp,...scopeProps}=props,[container1,setContainer]=(0,react.useState)(null),onMountAutoFocus=(0,react_use_callback_ref_dist.W)(onMountAutoFocusProp),onUnmountAutoFocus=(0,react_use_callback_ref_dist.W)(onUnmountAutoFocusProp),lastFocusedElementRef=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setContainer(node))),focusScope=(0,react.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,react.useEffect)((()=>{if(trapped){function handleFocusIn(event){if(focusScope.paused||!container1)return;const target=event.target;container1.contains(target)?lastFocusedElementRef.current=target:$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0})}function handleFocusOut(event){if(focusScope.paused||!container1)return;const relatedTarget=event.relatedTarget;null!==relatedTarget&&(container1.contains(relatedTarget)||$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0}))}function handleMutations(mutations){const focusedElement=document.activeElement;for(const mutation of mutations)mutation.removedNodes.length>0&&(null!=container1&&container1.contains(focusedElement)||$d3863c46a17e8a28$var$focus(container1))}document.addEventListener("focusin",handleFocusIn),document.addEventListener("focusout",handleFocusOut);const mutationObserver=new MutationObserver(handleMutations);return container1&&mutationObserver.observe(container1,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn),document.removeEventListener("focusout",handleFocusOut),mutationObserver.disconnect()}}}),[trapped,container1,focusScope.paused]),(0,react.useEffect)((()=>{if(container1){$d3863c46a17e8a28$var$focusScopesStack.add(focusScope);const previouslyFocusedElement=document.activeElement;if(!container1.contains(previouslyFocusedElement)){const mountEvent=new CustomEvent("focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),container1.dispatchEvent(mountEvent),mountEvent.defaultPrevented||(!function $d3863c46a17e8a28$var$focusFirst(candidates,{select=!1}={}){const previouslyFocusedElement=document.activeElement;for(const candidate of candidates)if($d3863c46a17e8a28$var$focus(candidate,{select}),document.activeElement!==previouslyFocusedElement)return}(function $d3863c46a17e8a28$var$removeLinks(items){return items.filter((item=>"A"!==item.tagName))}($d3863c46a17e8a28$var$getTabbableCandidates(container1)),{select:!0}),document.activeElement===previouslyFocusedElement&&$d3863c46a17e8a28$var$focus(container1))}return()=>{container1.removeEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),setTimeout((()=>{const unmountEvent=new CustomEvent("focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),container1.dispatchEvent(unmountEvent),unmountEvent.defaultPrevented||$d3863c46a17e8a28$var$focus(null!=previouslyFocusedElement?previouslyFocusedElement:document.body,{select:!0}),container1.removeEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),$d3863c46a17e8a28$var$focusScopesStack.remove(focusScope)}),0)}}}),[container1,onMountAutoFocus,onUnmountAutoFocus,focusScope]);const handleKeyDown=(0,react.useCallback)((event=>{if(!loop&&!trapped)return;if(focusScope.paused)return;const isTabKey="Tab"===event.key&&!event.altKey&&!event.ctrlKey&&!event.metaKey,focusedElement=document.activeElement;if(isTabKey&&focusedElement){const container=event.currentTarget,[first,last]=function $d3863c46a17e8a28$var$getTabbableEdges(container){const candidates=$d3863c46a17e8a28$var$getTabbableCandidates(container),first=$d3863c46a17e8a28$var$findVisible(candidates,container),last=$d3863c46a17e8a28$var$findVisible(candidates.reverse(),container);return[first,last]}(container);first&&last?event.shiftKey||focusedElement!==last?event.shiftKey&&focusedElement===first&&(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(last,{select:!0})):(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(first,{select:!0})):focusedElement===container&&event.preventDefault()}}),[loop,trapped,focusScope.paused]);return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({tabIndex:-1},scopeProps,{ref:composedRefs,onKeyDown:handleKeyDown}))}));function $d3863c46a17e8a28$var$getTabbableCandidates(container){const nodes=[],walker=document.createTreeWalker(container,NodeFilter.SHOW_ELEMENT,{acceptNode:node=>{const isHiddenInput="INPUT"===node.tagName&&"hidden"===node.type;return node.disabled||node.hidden||isHiddenInput?NodeFilter.FILTER_SKIP:node.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;walker.nextNode();)nodes.push(walker.currentNode);return nodes}function $d3863c46a17e8a28$var$findVisible(elements,container){for(const element of elements)if(!$d3863c46a17e8a28$var$isHidden(element,{upTo:container}))return element}function $d3863c46a17e8a28$var$isHidden(node,{upTo}){if("hidden"===getComputedStyle(node).visibility)return!0;for(;node;){if(void 0!==upTo&&node===upTo)return!1;if("none"===getComputedStyle(node).display)return!0;node=node.parentElement}return!1}function $d3863c46a17e8a28$var$focus(element,{select=!1}={}){if(element&&element.focus){const previouslyFocusedElement=document.activeElement;element.focus({preventScroll:!0}),element!==previouslyFocusedElement&&function $d3863c46a17e8a28$var$isSelectableInput(element){return element instanceof HTMLInputElement&&"select"in element}(element)&&select&&element.select()}}const $d3863c46a17e8a28$var$focusScopesStack=function $d3863c46a17e8a28$var$createFocusScopesStack(){let stack=[];return{add(focusScope){const activeFocusScope=stack[0];focusScope!==activeFocusScope&&(null==activeFocusScope||activeFocusScope.pause()),stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),stack.unshift(focusScope)},remove(focusScope){var _stack$;stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),null===(_stack$=stack[0])||void 0===_stack$||_stack$.resume()}}}();function $d3863c46a17e8a28$var$arrayRemove(array,item){const updatedArray=[...array],index=updatedArray.indexOf(item);return-1!==index&&updatedArray.splice(index,1),updatedArray}var react_id_dist=__webpack_require__("./node_modules/@radix-ui/react-id/dist/index.mjs"),floating_ui_react_dom=__webpack_require__("./node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs"),floating_ui_dom=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),floating_ui_core=__webpack_require__("./node_modules/@floating-ui/core/dist/floating-ui.core.mjs"),react_use_layout_effect_dist=(__webpack_require__("./node_modules/@radix-ui/react-arrow/dist/index.mjs"),__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs")),react_use_size_dist=__webpack_require__("./node_modules/@radix-ui/react-use-size/dist/index.mjs");const[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=(0,react_context_dist.b)("Popper"),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext("Popper"),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=props=>{const{__scopePopper,children}=props,[anchor,setAnchor]=(0,react.useState)(null);return(0,react.createElement)($cf1ac5d9fe0e8206$var$PopperProvider,{scope:__scopePopper,anchor,onAnchorChange:setAnchor},children)},$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopePopper,virtualRef,...anchorProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperAnchor",__scopePopper),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref);return(0,react.useEffect)((()=>{context.onAnchorChange((null==virtualRef?void 0:virtualRef.current)||ref.current)})),virtualRef?null:(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},anchorProps,{ref:composedRefs}))})),[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext("PopperContent"),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=(0,react.forwardRef)(((props,forwardedRef)=>{var _arrowSize$width,_arrowSize$height,_middlewareData$arrow,_middlewareData$arrow2,_middlewareData$arrow3,_middlewareData$trans,_middlewareData$trans2,_middlewareData$hide;const{__scopePopper,side="bottom",sideOffset=0,align="center",alignOffset=0,arrowPadding=0,collisionBoundary=[],collisionPadding:collisionPaddingProp=0,sticky="partial",hideWhenDetached=!1,avoidCollisions=!0,onPlaced,...contentProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperContent",__scopePopper),[content,setContent]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setContent(node))),[arrow,setArrow]=(0,react.useState)(null),arrowSize=(0,react_use_size_dist.t)(arrow),arrowWidth=null!==(_arrowSize$width=null==arrowSize?void 0:arrowSize.width)&&void 0!==_arrowSize$width?_arrowSize$width:0,arrowHeight=null!==(_arrowSize$height=null==arrowSize?void 0:arrowSize.height)&&void 0!==_arrowSize$height?_arrowSize$height:0,desiredPlacement=side+("center"!==align?"-"+align:""),collisionPadding="number"==typeof collisionPaddingProp?collisionPaddingProp:{top:0,right:0,bottom:0,left:0,...collisionPaddingProp},boundary=Array.isArray(collisionBoundary)?collisionBoundary:[collisionBoundary],hasExplicitBoundaries=boundary.length>0,detectOverflowOptions={padding:collisionPadding,boundary:boundary.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:hasExplicitBoundaries},{refs,floatingStyles,placement,isPositioned,middlewareData}=(0,floating_ui_react_dom.YF)({strategy:"fixed",placement:desiredPlacement,whileElementsMounted:floating_ui_dom.Me,elements:{reference:context.anchor},middleware:[(0,floating_ui_core.cv)({mainAxis:sideOffset+arrowHeight,alignmentAxis:alignOffset}),avoidCollisions&&(0,floating_ui_core.uY)({mainAxis:!0,crossAxis:!1,limiter:"partial"===sticky?(0,floating_ui_core.dr)():void 0,...detectOverflowOptions}),avoidCollisions&&(0,floating_ui_core.RR)({...detectOverflowOptions}),(0,floating_ui_core.dp)({...detectOverflowOptions,apply:({elements,rects,availableWidth,availableHeight})=>{const{width:anchorWidth,height:anchorHeight}=rects.reference,contentStyle=elements.floating.style;contentStyle.setProperty("--radix-popper-available-width",`${availableWidth}px`),contentStyle.setProperty("--radix-popper-available-height",`${availableHeight}px`),contentStyle.setProperty("--radix-popper-anchor-width",`${anchorWidth}px`),contentStyle.setProperty("--radix-popper-anchor-height",`${anchorHeight}px`)}}),arrow&&(0,floating_ui_react_dom.x7)({element:arrow,padding:arrowPadding}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth,arrowHeight}),hideWhenDetached&&(0,floating_ui_core.Cp)({strategy:"referenceHidden"})]}),[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),handlePlaced=(0,react_use_callback_ref_dist.W)(onPlaced);(0,react_use_layout_effect_dist.b)((()=>{isPositioned&&(null==handlePlaced||handlePlaced())}),[isPositioned,handlePlaced]);const arrowX=null===(_middlewareData$arrow=middlewareData.arrow)||void 0===_middlewareData$arrow?void 0:_middlewareData$arrow.x,arrowY=null===(_middlewareData$arrow2=middlewareData.arrow)||void 0===_middlewareData$arrow2?void 0:_middlewareData$arrow2.y,cannotCenterArrow=0!==(null===(_middlewareData$arrow3=middlewareData.arrow)||void 0===_middlewareData$arrow3?void 0:_middlewareData$arrow3.centerOffset),[contentZIndex,setContentZIndex]=(0,react.useState)();return(0,react_use_layout_effect_dist.b)((()=>{content&&setContentZIndex(window.getComputedStyle(content).zIndex)}),[content]),(0,react.createElement)("div",{ref:refs.setFloating,"data-radix-popper-content-wrapper":"",style:{...floatingStyles,transform:isPositioned?floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:contentZIndex,"--radix-popper-transform-origin":[null===(_middlewareData$trans=middlewareData.transformOrigin)||void 0===_middlewareData$trans?void 0:_middlewareData$trans.x,null===(_middlewareData$trans2=middlewareData.transformOrigin)||void 0===_middlewareData$trans2?void 0:_middlewareData$trans2.y].join(" ")},dir:props.dir},(0,react.createElement)($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:__scopePopper,placedSide,onArrowChange:setArrow,arrowX,arrowY,shouldHideArrow:cannotCenterArrow},(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"data-side":placedSide,"data-align":placedAlign},contentProps,{ref:composedRefs,style:{...contentProps.style,animation:isPositioned?void 0:"none",opacity:null!==(_middlewareData$hide=middlewareData.hide)&&void 0!==_middlewareData$hide&&_middlewareData$hide.referenceHidden?0:void 0}}))))}));function $cf1ac5d9fe0e8206$var$isNotNull(value){return null!==value}const $cf1ac5d9fe0e8206$var$transformOrigin=options=>({name:"transformOrigin",options,fn(data){var _middlewareData$arrow4,_middlewareData$arrow5,_middlewareData$arrow6,_middlewareData$arrow7,_middlewareData$arrow8;const{placement,rects,middlewareData}=data,isArrowHidden=0!==(null===(_middlewareData$arrow4=middlewareData.arrow)||void 0===_middlewareData$arrow4?void 0:_middlewareData$arrow4.centerOffset),arrowWidth=isArrowHidden?0:options.arrowWidth,arrowHeight=isArrowHidden?0:options.arrowHeight,[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),noArrowAlign={start:"0%",center:"50%",end:"100%"}[placedAlign],arrowXCenter=(null!==(_middlewareData$arrow5=null===(_middlewareData$arrow6=middlewareData.arrow)||void 0===_middlewareData$arrow6?void 0:_middlewareData$arrow6.x)&&void 0!==_middlewareData$arrow5?_middlewareData$arrow5:0)+arrowWidth/2,arrowYCenter=(null!==(_middlewareData$arrow7=null===(_middlewareData$arrow8=middlewareData.arrow)||void 0===_middlewareData$arrow8?void 0:_middlewareData$arrow8.y)&&void 0!==_middlewareData$arrow7?_middlewareData$arrow7:0)+arrowHeight/2;let x="",y="";return"bottom"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=-arrowHeight+"px"):"top"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=`${rects.floating.height+arrowHeight}px`):"right"===placedSide?(x=-arrowHeight+"px",y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`):"left"===placedSide&&(x=`${rects.floating.width+arrowHeight}px`,y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`),{data:{x,y}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement){const[side,align="center"]=placement.split("-");return[side,align]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$f1701beae083dbae$export$602eac185826482c=(0,react.forwardRef)(((props,forwardedRef)=>{var _globalThis$document;const{container=null===globalThis||void 0===globalThis||null===(_globalThis$document=globalThis.document)||void 0===_globalThis$document?void 0:_globalThis$document.body,...portalProps}=props;return container?react_dom.createPortal((0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},portalProps,{ref:forwardedRef})),container):null}));var react_slot_dist=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),react_use_controllable_state_dist=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),react_use_previous_dist=__webpack_require__("./node_modules/@radix-ui/react-use-previous/dist/index.mjs"),react_visually_hidden_dist=__webpack_require__("./node_modules/@radix-ui/react-visually-hidden/dist/index.mjs"),es2015=__webpack_require__("./node_modules/aria-hidden/dist/es2015/index.js"),Combination=__webpack_require__("./node_modules/react-remove-scroll/dist/es2015/Combination.js");const $cc7e05a45900e73f$var$OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],$cc7e05a45900e73f$var$SELECTION_KEYS=[" ","Enter"],[$cc7e05a45900e73f$var$Collection,$cc7e05a45900e73f$var$useCollection,$cc7e05a45900e73f$var$createCollectionScope]=(0,react_collection_dist.B)("Select"),[$cc7e05a45900e73f$var$createSelectContext,$cc7e05a45900e73f$export$286727a75dc039bd]=(0,react_context_dist.b)("Select",[$cc7e05a45900e73f$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),$cc7e05a45900e73f$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cc7e05a45900e73f$var$SelectProvider,$cc7e05a45900e73f$var$useSelectContext]=$cc7e05a45900e73f$var$createSelectContext("Select"),[$cc7e05a45900e73f$var$SelectNativeOptionsProvider,$cc7e05a45900e73f$var$useSelectNativeOptionsContext]=$cc7e05a45900e73f$var$createSelectContext("Select"),$cc7e05a45900e73f$export$ef9b1a59e592288f=props=>{const{__scopeSelect,children,open:openProp,defaultOpen,onOpenChange,value:valueProp,defaultValue,onValueChange,dir,name,autoComplete,disabled,required}=props,popperScope=$cc7e05a45900e73f$var$usePopperScope(__scopeSelect),[trigger,setTrigger]=(0,react.useState)(null),[valueNode,setValueNode]=(0,react.useState)(null),[valueNodeHasChildren,setValueNodeHasChildren]=(0,react.useState)(!1),direction=(0,react_direction_dist.gm)(dir),[open=!1,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange}),[value,setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,defaultProp:defaultValue,onChange:onValueChange}),triggerPointerDownPosRef=(0,react.useRef)(null),isFormControl=!trigger||Boolean(trigger.closest("form")),[nativeOptionsSet,setNativeOptionsSet]=(0,react.useState)(new Set),nativeSelectKey=Array.from(nativeOptionsSet).map((option=>option.props.value)).join(";");return(0,react.createElement)($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,popperScope,(0,react.createElement)($cc7e05a45900e73f$var$SelectProvider,{required,scope:__scopeSelect,trigger,onTriggerChange:setTrigger,valueNode,onValueNodeChange:setValueNode,valueNodeHasChildren,onValueNodeHasChildrenChange:setValueNodeHasChildren,contentId:(0,react_id_dist.M)(),value,onValueChange:setValue,open,onOpenChange:setOpen,dir:direction,triggerPointerDownPosRef,disabled},(0,react.createElement)($cc7e05a45900e73f$var$Collection.Provider,{scope:__scopeSelect},(0,react.createElement)($cc7e05a45900e73f$var$SelectNativeOptionsProvider,{scope:props.__scopeSelect,onNativeOptionAdd:(0,react.useCallback)((option=>{setNativeOptionsSet((prev=>new Set(prev).add(option)))}),[]),onNativeOptionRemove:(0,react.useCallback)((option=>{setNativeOptionsSet((prev=>{const optionsSet=new Set(prev);return optionsSet.delete(option),optionsSet}))}),[])},children)),isFormControl?(0,react.createElement)($cc7e05a45900e73f$var$BubbleSelect,{key:nativeSelectKey,"aria-hidden":!0,required,tabIndex:-1,name,autoComplete,value,onChange:event=>setValue(event.target.value),disabled},void 0===value?(0,react.createElement)("option",{value:""}):null,Array.from(nativeOptionsSet)):null))},$cc7e05a45900e73f$export$3ac1e88a1c0b9f1=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,disabled=!1,...triggerProps}=props,popperScope=$cc7e05a45900e73f$var$usePopperScope(__scopeSelect),context=$cc7e05a45900e73f$var$useSelectContext("SelectTrigger",__scopeSelect),isDisabled=context.disabled||disabled,composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,context.onTriggerChange),getItems=$cc7e05a45900e73f$var$useCollection(__scopeSelect),[searchRef,handleTypeaheadSearch,resetTypeahead]=$cc7e05a45900e73f$var$useTypeaheadSearch((search=>{const enabledItems=getItems().filter((item=>!item.disabled)),currentItem=enabledItems.find((item=>item.value===context.value)),nextItem=$cc7e05a45900e73f$var$findNextItem(enabledItems,search,currentItem);void 0!==nextItem&&context.onValueChange(nextItem.value)})),handleOpen=()=>{isDisabled||(context.onOpenChange(!0),resetTypeahead())};return(0,react.createElement)($cf1ac5d9fe0e8206$export$b688253958b8dfe7,(0,esm_extends.Z)({asChild:!0},popperScope),(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button",role:"combobox","aria-controls":context.contentId,"aria-expanded":context.open,"aria-required":context.required,"aria-autocomplete":"none",dir:context.dir,"data-state":context.open?"open":"closed",disabled:isDisabled,"data-disabled":isDisabled?"":void 0,"data-placeholder":void 0===context.value?"":void 0},triggerProps,{ref:composedRefs,onClick:(0,primitive_dist.M)(triggerProps.onClick,(event=>{event.currentTarget.focus()})),onPointerDown:(0,primitive_dist.M)(triggerProps.onPointerDown,(event=>{const target=event.target;target.hasPointerCapture(event.pointerId)&&target.releasePointerCapture(event.pointerId),0===event.button&&!1===event.ctrlKey&&(handleOpen(),context.triggerPointerDownPosRef.current={x:Math.round(event.pageX),y:Math.round(event.pageY)},event.preventDefault())})),onKeyDown:(0,primitive_dist.M)(triggerProps.onKeyDown,(event=>{const isTypingAhead=""!==searchRef.current;event.ctrlKey||event.altKey||event.metaKey||1!==event.key.length||handleTypeaheadSearch(event.key),isTypingAhead&&" "===event.key||$cc7e05a45900e73f$var$OPEN_KEYS.includes(event.key)&&(handleOpen(),event.preventDefault())}))})))})),$cc7e05a45900e73f$export$e288731fd71264f0=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,className,style,children,placeholder,...valueProps}=props,context=$cc7e05a45900e73f$var$useSelectContext("SelectValue",__scopeSelect),{onValueNodeHasChildrenChange}=context,hasChildren=void 0!==children,composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,context.onValueNodeChange);return(0,react_use_layout_effect_dist.b)((()=>{onValueNodeHasChildrenChange(hasChildren)}),[onValueNodeHasChildrenChange,hasChildren]),(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({},valueProps,{ref:composedRefs,style:{pointerEvents:"none"}}),void 0===context.value&&void 0!==placeholder?placeholder:children)})),$cc7e05a45900e73f$export$99b400cabb58c515=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,children,...iconProps}=props;return(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({"aria-hidden":!0},iconProps,{ref:forwardedRef}),children||"")})),$cc7e05a45900e73f$export$b2af6c9944296213=props=>(0,react.createElement)($f1701beae083dbae$export$602eac185826482c,(0,esm_extends.Z)({asChild:!0},props)),$cc7e05a45900e73f$export$c973a4b3cb86a03d=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$cc7e05a45900e73f$var$useSelectContext("SelectContent",props.__scopeSelect),[fragment,setFragment]=(0,react.useState)();if((0,react_use_layout_effect_dist.b)((()=>{setFragment(new DocumentFragment)}),[]),!context.open){const frag=fragment;return frag?(0,react_dom.createPortal)((0,react.createElement)($cc7e05a45900e73f$var$SelectContentProvider,{scope:props.__scopeSelect},(0,react.createElement)($cc7e05a45900e73f$var$Collection.Slot,{scope:props.__scopeSelect},(0,react.createElement)("div",null,props.children))),frag):null}return(0,react.createElement)($cc7e05a45900e73f$var$SelectContentImpl,(0,esm_extends.Z)({},props,{ref:forwardedRef}))})),$cc7e05a45900e73f$var$CONTENT_MARGIN=10,[$cc7e05a45900e73f$var$SelectContentProvider,$cc7e05a45900e73f$var$useSelectContentContext]=$cc7e05a45900e73f$var$createSelectContext("SelectContent"),$cc7e05a45900e73f$var$SelectContentImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,position="item-aligned",onCloseAutoFocus,onEscapeKeyDown,onPointerDownOutside,side,sideOffset,align,alignOffset,arrowPadding,collisionBoundary,collisionPadding,sticky,hideWhenDetached,avoidCollisions,...contentProps}=props,context=$cc7e05a45900e73f$var$useSelectContext("SelectContent",__scopeSelect),[content,setContent]=(0,react.useState)(null),[viewport,setViewport]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setContent(node))),[selectedItem,setSelectedItem]=(0,react.useState)(null),[selectedItemText,setSelectedItemText]=(0,react.useState)(null),getItems=$cc7e05a45900e73f$var$useCollection(__scopeSelect),[isPositioned,setIsPositioned]=(0,react.useState)(!1),firstValidItemFoundRef=(0,react.useRef)(!1);(0,react.useEffect)((()=>{if(content)return(0,es2015.Ry)(content)}),[content]),(0,react_focus_guards_dist.EW)();const focusFirst=(0,react.useCallback)((candidates=>{const[firstItem,...restItems]=getItems().map((item=>item.ref.current)),[lastItem]=restItems.slice(-1),PREVIOUSLY_FOCUSED_ELEMENT=document.activeElement;for(const candidate of candidates){if(candidate===PREVIOUSLY_FOCUSED_ELEMENT)return;if(null==candidate||candidate.scrollIntoView({block:"nearest"}),candidate===firstItem&&viewport&&(viewport.scrollTop=0),candidate===lastItem&&viewport&&(viewport.scrollTop=viewport.scrollHeight),null==candidate||candidate.focus(),document.activeElement!==PREVIOUSLY_FOCUSED_ELEMENT)return}}),[getItems,viewport]),focusSelectedItem=(0,react.useCallback)((()=>focusFirst([selectedItem,content])),[focusFirst,selectedItem,content]);(0,react.useEffect)((()=>{isPositioned&&focusSelectedItem()}),[isPositioned,focusSelectedItem]);const{onOpenChange,triggerPointerDownPosRef}=context;(0,react.useEffect)((()=>{if(content){let pointerMoveDelta={x:0,y:0};const handlePointerMove=event=>{var _triggerPointerDownPo,_triggerPointerDownPo2,_triggerPointerDownPo3,_triggerPointerDownPo4;pointerMoveDelta={x:Math.abs(Math.round(event.pageX)-(null!==(_triggerPointerDownPo=null===(_triggerPointerDownPo2=triggerPointerDownPosRef.current)||void 0===_triggerPointerDownPo2?void 0:_triggerPointerDownPo2.x)&&void 0!==_triggerPointerDownPo?_triggerPointerDownPo:0)),y:Math.abs(Math.round(event.pageY)-(null!==(_triggerPointerDownPo3=null===(_triggerPointerDownPo4=triggerPointerDownPosRef.current)||void 0===_triggerPointerDownPo4?void 0:_triggerPointerDownPo4.y)&&void 0!==_triggerPointerDownPo3?_triggerPointerDownPo3:0))}},handlePointerUp=event=>{pointerMoveDelta.x<=10&&pointerMoveDelta.y<=10?event.preventDefault():content.contains(event.target)||onOpenChange(!1),document.removeEventListener("pointermove",handlePointerMove),triggerPointerDownPosRef.current=null};return null!==triggerPointerDownPosRef.current&&(document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp,{capture:!0})}}}),[content,onOpenChange,triggerPointerDownPosRef]),(0,react.useEffect)((()=>{const close=()=>onOpenChange(!1);return window.addEventListener("blur",close),window.addEventListener("resize",close),()=>{window.removeEventListener("blur",close),window.removeEventListener("resize",close)}}),[onOpenChange]);const[searchRef,handleTypeaheadSearch]=$cc7e05a45900e73f$var$useTypeaheadSearch((search=>{const enabledItems=getItems().filter((item=>!item.disabled)),currentItem=enabledItems.find((item=>item.ref.current===document.activeElement)),nextItem=$cc7e05a45900e73f$var$findNextItem(enabledItems,search,currentItem);nextItem&&setTimeout((()=>nextItem.ref.current.focus()))})),itemRefCallback=(0,react.useCallback)(((node,value,disabled)=>{const isFirstValidItem=!firstValidItemFoundRef.current&&!disabled;(void 0!==context.value&&context.value===value||isFirstValidItem)&&(setSelectedItem(node),isFirstValidItem&&(firstValidItemFoundRef.current=!0))}),[context.value]),handleItemLeave=(0,react.useCallback)((()=>null==content?void 0:content.focus()),[content]),itemTextRefCallback=(0,react.useCallback)(((node,value,disabled)=>{const isFirstValidItem=!firstValidItemFoundRef.current&&!disabled;(void 0!==context.value&&context.value===value||isFirstValidItem)&&setSelectedItemText(node)}),[context.value]),SelectPosition="popper"===position?$cc7e05a45900e73f$var$SelectPopperPosition:$cc7e05a45900e73f$var$SelectItemAlignedPosition,popperContentProps=SelectPosition===$cc7e05a45900e73f$var$SelectPopperPosition?{side,sideOffset,align,alignOffset,arrowPadding,collisionBoundary,collisionPadding,sticky,hideWhenDetached,avoidCollisions}:{};return(0,react.createElement)($cc7e05a45900e73f$var$SelectContentProvider,{scope:__scopeSelect,content,viewport,onViewportChange:setViewport,itemRefCallback,selectedItem,onItemLeave:handleItemLeave,itemTextRefCallback,focusSelectedItem,selectedItemText,position,isPositioned,searchRef},(0,react.createElement)(Combination.Z,{as:react_slot_dist.g7,allowPinchZoom:!0},(0,react.createElement)($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:context.open,onMountAutoFocus:event=>{event.preventDefault()},onUnmountAutoFocus:(0,primitive_dist.M)(onCloseAutoFocus,(event=>{var _context$trigger;null===(_context$trigger=context.trigger)||void 0===_context$trigger||_context$trigger.focus({preventScroll:!0}),event.preventDefault()}))},(0,react.createElement)($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown,onPointerDownOutside,onFocusOutside:event=>event.preventDefault(),onDismiss:()=>context.onOpenChange(!1)},(0,react.createElement)(SelectPosition,(0,esm_extends.Z)({role:"listbox",id:context.contentId,"data-state":context.open?"open":"closed",dir:context.dir,onContextMenu:event=>event.preventDefault()},contentProps,popperContentProps,{onPlaced:()=>setIsPositioned(!0),ref:composedRefs,style:{display:"flex",flexDirection:"column",outline:"none",...contentProps.style},onKeyDown:(0,primitive_dist.M)(contentProps.onKeyDown,(event=>{const isModifierKey=event.ctrlKey||event.altKey||event.metaKey;if("Tab"===event.key&&event.preventDefault(),isModifierKey||1!==event.key.length||handleTypeaheadSearch(event.key),["ArrowUp","ArrowDown","Home","End"].includes(event.key)){let candidateNodes=getItems().filter((item=>!item.disabled)).map((item=>item.ref.current));if(["ArrowUp","End"].includes(event.key)&&(candidateNodes=candidateNodes.slice().reverse()),["ArrowUp","ArrowDown"].includes(event.key)){const currentElement=event.target,currentIndex=candidateNodes.indexOf(currentElement);candidateNodes=candidateNodes.slice(currentIndex+1)}setTimeout((()=>focusFirst(candidateNodes))),event.preventDefault()}}))}))))))})),$cc7e05a45900e73f$var$SelectItemAlignedPosition=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,onPlaced,...popperProps}=props,context=$cc7e05a45900e73f$var$useSelectContext("SelectContent",__scopeSelect),contentContext=$cc7e05a45900e73f$var$useSelectContentContext("SelectContent",__scopeSelect),[contentWrapper,setContentWrapper]=(0,react.useState)(null),[content,setContent]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setContent(node))),getItems=$cc7e05a45900e73f$var$useCollection(__scopeSelect),shouldExpandOnScrollRef=(0,react.useRef)(!1),shouldRepositionRef=(0,react.useRef)(!0),{viewport,selectedItem,selectedItemText,focusSelectedItem}=contentContext,position=(0,react.useCallback)((()=>{if(context.trigger&&context.valueNode&&contentWrapper&&content&&viewport&&selectedItem&&selectedItemText){const triggerRect=context.trigger.getBoundingClientRect(),contentRect=content.getBoundingClientRect(),valueNodeRect=context.valueNode.getBoundingClientRect(),itemTextRect=selectedItemText.getBoundingClientRect();if("rtl"!==context.dir){const itemTextOffset=itemTextRect.left-contentRect.left,left=valueNodeRect.left-itemTextOffset,leftDelta=triggerRect.left-left,minContentWidth=triggerRect.width+leftDelta,contentWidth=Math.max(minContentWidth,contentRect.width),rightEdge=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,clampedLeft=(0,dist.u)(left,[$cc7e05a45900e73f$var$CONTENT_MARGIN,rightEdge-contentWidth]);contentWrapper.style.minWidth=minContentWidth+"px",contentWrapper.style.left=clampedLeft+"px"}else{const itemTextOffset=contentRect.right-itemTextRect.right,right=window.innerWidth-valueNodeRect.right-itemTextOffset,rightDelta=window.innerWidth-triggerRect.right-right,minContentWidth=triggerRect.width+rightDelta,contentWidth=Math.max(minContentWidth,contentRect.width),leftEdge=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,clampedRight=(0,dist.u)(right,[$cc7e05a45900e73f$var$CONTENT_MARGIN,leftEdge-contentWidth]);contentWrapper.style.minWidth=minContentWidth+"px",contentWrapper.style.right=clampedRight+"px"}const items=getItems(),availableHeight=window.innerHeight-2*$cc7e05a45900e73f$var$CONTENT_MARGIN,itemsHeight=viewport.scrollHeight,contentStyles=window.getComputedStyle(content),contentBorderTopWidth=parseInt(contentStyles.borderTopWidth,10),contentPaddingTop=parseInt(contentStyles.paddingTop,10),contentBorderBottomWidth=parseInt(contentStyles.borderBottomWidth,10),fullContentHeight=contentBorderTopWidth+contentPaddingTop+itemsHeight+parseInt(contentStyles.paddingBottom,10)+contentBorderBottomWidth,minContentHeight=Math.min(5*selectedItem.offsetHeight,fullContentHeight),viewportStyles=window.getComputedStyle(viewport),viewportPaddingTop=parseInt(viewportStyles.paddingTop,10),viewportPaddingBottom=parseInt(viewportStyles.paddingBottom,10),topEdgeToTriggerMiddle=triggerRect.top+triggerRect.height/2-$cc7e05a45900e73f$var$CONTENT_MARGIN,triggerMiddleToBottomEdge=availableHeight-topEdgeToTriggerMiddle,selectedItemHalfHeight=selectedItem.offsetHeight/2,contentTopToItemMiddle=contentBorderTopWidth+contentPaddingTop+(selectedItem.offsetTop+selectedItemHalfHeight),itemMiddleToContentBottom=fullContentHeight-contentTopToItemMiddle;if(contentTopToItemMiddle<=topEdgeToTriggerMiddle){const isLastItem=selectedItem===items[items.length-1].ref.current;contentWrapper.style.bottom="0px";const viewportOffsetBottom=content.clientHeight-viewport.offsetTop-viewport.offsetHeight,height=contentTopToItemMiddle+Math.max(triggerMiddleToBottomEdge,selectedItemHalfHeight+(isLastItem?viewportPaddingBottom:0)+viewportOffsetBottom+contentBorderBottomWidth);contentWrapper.style.height=height+"px"}else{const isFirstItem=selectedItem===items[0].ref.current;contentWrapper.style.top="0px";const height=Math.max(topEdgeToTriggerMiddle,contentBorderTopWidth+viewport.offsetTop+(isFirstItem?viewportPaddingTop:0)+selectedItemHalfHeight)+itemMiddleToContentBottom;contentWrapper.style.height=height+"px",viewport.scrollTop=contentTopToItemMiddle-topEdgeToTriggerMiddle+viewport.offsetTop}contentWrapper.style.margin=`${$cc7e05a45900e73f$var$CONTENT_MARGIN}px 0`,contentWrapper.style.minHeight=minContentHeight+"px",contentWrapper.style.maxHeight=availableHeight+"px",null==onPlaced||onPlaced(),requestAnimationFrame((()=>shouldExpandOnScrollRef.current=!0))}}),[getItems,context.trigger,context.valueNode,contentWrapper,content,viewport,selectedItem,selectedItemText,context.dir,onPlaced]);(0,react_use_layout_effect_dist.b)((()=>position()),[position]);const[contentZIndex,setContentZIndex]=(0,react.useState)();(0,react_use_layout_effect_dist.b)((()=>{content&&setContentZIndex(window.getComputedStyle(content).zIndex)}),[content]);const handleScrollButtonChange=(0,react.useCallback)((node=>{node&&!0===shouldRepositionRef.current&&(position(),null==focusSelectedItem||focusSelectedItem(),shouldRepositionRef.current=!1)}),[position,focusSelectedItem]);return(0,react.createElement)($cc7e05a45900e73f$var$SelectViewportProvider,{scope:__scopeSelect,contentWrapper,shouldExpandOnScrollRef,onScrollButtonChange:handleScrollButtonChange},(0,react.createElement)("div",{ref:setContentWrapper,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:contentZIndex}},(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},popperProps,{ref:composedRefs,style:{boxSizing:"border-box",maxHeight:"100%",...popperProps.style}}))))})),$cc7e05a45900e73f$var$SelectPopperPosition=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,align="start",collisionPadding=$cc7e05a45900e73f$var$CONTENT_MARGIN,...popperProps}=props,popperScope=$cc7e05a45900e73f$var$usePopperScope(__scopeSelect);return(0,react.createElement)($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,(0,esm_extends.Z)({},popperScope,popperProps,{ref:forwardedRef,align,collisionPadding,style:{boxSizing:"border-box",...popperProps.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))})),[$cc7e05a45900e73f$var$SelectViewportProvider,$cc7e05a45900e73f$var$useSelectViewportContext]=$cc7e05a45900e73f$var$createSelectContext("SelectContent",{}),$cc7e05a45900e73f$export$9ed6e7b40248d36d=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,...viewportProps}=props,contentContext=$cc7e05a45900e73f$var$useSelectContentContext("SelectViewport",__scopeSelect),viewportContext=$cc7e05a45900e73f$var$useSelectViewportContext("SelectViewport",__scopeSelect),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,contentContext.onViewportChange),prevScrollTopRef=(0,react.useRef)(0);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,react.createElement)($cc7e05a45900e73f$var$Collection.Slot,{scope:__scopeSelect},(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"data-radix-select-viewport":"",role:"presentation"},viewportProps,{ref:composedRefs,style:{position:"relative",flex:1,overflow:"auto",...viewportProps.style},onScroll:(0,primitive_dist.M)(viewportProps.onScroll,(event=>{const viewport=event.currentTarget,{contentWrapper,shouldExpandOnScrollRef}=viewportContext;if(null!=shouldExpandOnScrollRef&&shouldExpandOnScrollRef.current&&contentWrapper){const scrolledBy=Math.abs(prevScrollTopRef.current-viewport.scrollTop);if(scrolledBy>0){const availableHeight=window.innerHeight-2*$cc7e05a45900e73f$var$CONTENT_MARGIN,cssMinHeight=parseFloat(contentWrapper.style.minHeight),cssHeight=parseFloat(contentWrapper.style.height),prevHeight=Math.max(cssMinHeight,cssHeight);if(prevHeight<availableHeight){const nextHeight=prevHeight+scrolledBy,clampedNextHeight=Math.min(availableHeight,nextHeight),heightDiff=nextHeight-clampedNextHeight;contentWrapper.style.height=clampedNextHeight+"px","0px"===contentWrapper.style.bottom&&(viewport.scrollTop=heightDiff>0?heightDiff:0,contentWrapper.style.justifyContent="flex-end")}}}prevScrollTopRef.current=viewport.scrollTop}))}))))})),[$cc7e05a45900e73f$var$SelectGroupContextProvider,$cc7e05a45900e73f$var$useSelectGroupContext]=$cc7e05a45900e73f$var$createSelectContext("SelectGroup"),[$cc7e05a45900e73f$var$SelectItemContextProvider,$cc7e05a45900e73f$var$useSelectItemContext]=$cc7e05a45900e73f$var$createSelectContext("SelectItem"),$cc7e05a45900e73f$export$13ef48a934230896=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,value,disabled=!1,textValue:textValueProp,...itemProps}=props,context=$cc7e05a45900e73f$var$useSelectContext("SelectItem",__scopeSelect),contentContext=$cc7e05a45900e73f$var$useSelectContentContext("SelectItem",__scopeSelect),isSelected=context.value===value,[textValue,setTextValue]=(0,react.useState)(null!=textValueProp?textValueProp:""),[isFocused,setIsFocused]=(0,react.useState)(!1),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>{var _contentContext$itemR;return null===(_contentContext$itemR=contentContext.itemRefCallback)||void 0===_contentContext$itemR?void 0:_contentContext$itemR.call(contentContext,node,value,disabled)})),textId=(0,react_id_dist.M)(),handleSelect=()=>{disabled||(context.onValueChange(value),context.onOpenChange(!1))};return(0,react.createElement)($cc7e05a45900e73f$var$SelectItemContextProvider,{scope:__scopeSelect,value,disabled,textId,isSelected,onItemTextChange:(0,react.useCallback)((node=>{setTextValue((prevTextValue=>{var _node$textContent;return prevTextValue||(null!==(_node$textContent=null==node?void 0:node.textContent)&&void 0!==_node$textContent?_node$textContent:"").trim()}))}),[])},(0,react.createElement)($cc7e05a45900e73f$var$Collection.ItemSlot,{scope:__scopeSelect,value,disabled,textValue},(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({role:"option","aria-labelledby":textId,"data-highlighted":isFocused?"":void 0,"aria-selected":isSelected&&isFocused,"data-state":isSelected?"checked":"unchecked","aria-disabled":disabled||void 0,"data-disabled":disabled?"":void 0,tabIndex:disabled?void 0:-1},itemProps,{ref:composedRefs,onFocus:(0,primitive_dist.M)(itemProps.onFocus,(()=>setIsFocused(!0))),onBlur:(0,primitive_dist.M)(itemProps.onBlur,(()=>setIsFocused(!1))),onPointerUp:(0,primitive_dist.M)(itemProps.onPointerUp,handleSelect),onPointerMove:(0,primitive_dist.M)(itemProps.onPointerMove,(event=>{var _contentContext$onIte;disabled?null===(_contentContext$onIte=contentContext.onItemLeave)||void 0===_contentContext$onIte||_contentContext$onIte.call(contentContext):event.currentTarget.focus({preventScroll:!0})})),onPointerLeave:(0,primitive_dist.M)(itemProps.onPointerLeave,(event=>{var _contentContext$onIte2;event.currentTarget===document.activeElement&&(null===(_contentContext$onIte2=contentContext.onItemLeave)||void 0===_contentContext$onIte2||_contentContext$onIte2.call(contentContext))})),onKeyDown:(0,primitive_dist.M)(itemProps.onKeyDown,(event=>{var _contentContext$searc;""!==(null===(_contentContext$searc=contentContext.searchRef)||void 0===_contentContext$searc?void 0:_contentContext$searc.current)&&" "===event.key||($cc7e05a45900e73f$var$SELECTION_KEYS.includes(event.key)&&handleSelect()," "===event.key&&event.preventDefault())}))}))))})),$cc7e05a45900e73f$export$3572fb0fb821ff49=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,className,style,...itemTextProps}=props,context=$cc7e05a45900e73f$var$useSelectContext("SelectItemText",__scopeSelect),contentContext=$cc7e05a45900e73f$var$useSelectContentContext("SelectItemText",__scopeSelect),itemContext=$cc7e05a45900e73f$var$useSelectItemContext("SelectItemText",__scopeSelect),nativeOptionsContext=$cc7e05a45900e73f$var$useSelectNativeOptionsContext("SelectItemText",__scopeSelect),[itemTextNode,setItemTextNode]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setItemTextNode(node)),itemContext.onItemTextChange,(node=>{var _contentContext$itemT;return null===(_contentContext$itemT=contentContext.itemTextRefCallback)||void 0===_contentContext$itemT?void 0:_contentContext$itemT.call(contentContext,node,itemContext.value,itemContext.disabled)})),textContent=null==itemTextNode?void 0:itemTextNode.textContent,nativeOption=(0,react.useMemo)((()=>(0,react.createElement)("option",{key:itemContext.value,value:itemContext.value,disabled:itemContext.disabled},textContent)),[itemContext.disabled,itemContext.value,textContent]),{onNativeOptionAdd,onNativeOptionRemove}=nativeOptionsContext;return(0,react_use_layout_effect_dist.b)((()=>(onNativeOptionAdd(nativeOption),()=>onNativeOptionRemove(nativeOption))),[onNativeOptionAdd,onNativeOptionRemove,nativeOption]),(0,react.createElement)(react.Fragment,null,(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({id:itemContext.textId},itemTextProps,{ref:composedRefs})),itemContext.isSelected&&context.valueNode&&!context.valueNodeHasChildren?(0,react_dom.createPortal)(itemTextProps.children,context.valueNode):null)})),$cc7e05a45900e73f$export$eba4b1df07cb1d3=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSelect,...separatorProps}=props;return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"aria-hidden":!0},separatorProps,{ref:forwardedRef}))})),$cc7e05a45900e73f$var$BubbleSelect=(0,react.forwardRef)(((props,forwardedRef)=>{const{value,...selectProps}=props,ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref),prevValue=(0,react_use_previous_dist.D)(value);return(0,react.useEffect)((()=>{const select=ref.current,selectProto=window.HTMLSelectElement.prototype,setValue=Object.getOwnPropertyDescriptor(selectProto,"value").set;if(prevValue!==value&&setValue){const event=new Event("change",{bubbles:!0});setValue.call(select,value),select.dispatchEvent(event)}}),[prevValue,value]),(0,react.createElement)(react_visually_hidden_dist.T,{asChild:!0},(0,react.createElement)("select",(0,esm_extends.Z)({},selectProps,{ref:composedRefs,defaultValue:value})))}));function $cc7e05a45900e73f$var$useTypeaheadSearch(onSearchChange){const handleSearchChange=(0,react_use_callback_ref_dist.W)(onSearchChange),searchRef=(0,react.useRef)(""),timerRef=(0,react.useRef)(0),handleTypeaheadSearch=(0,react.useCallback)((key=>{const search=searchRef.current+key;handleSearchChange(search),function updateSearch(value){searchRef.current=value,window.clearTimeout(timerRef.current),""!==value&&(timerRef.current=window.setTimeout((()=>updateSearch("")),1e3))}(search)}),[handleSearchChange]),resetTypeahead=(0,react.useCallback)((()=>{searchRef.current="",window.clearTimeout(timerRef.current)}),[]);return(0,react.useEffect)((()=>()=>window.clearTimeout(timerRef.current)),[]),[searchRef,handleTypeaheadSearch,resetTypeahead]}function $cc7e05a45900e73f$var$findNextItem(items,search,currentItem){const normalizedSearch=search.length>1&&Array.from(search).every((char=>char===search[0]))?search[0]:search,currentItemIndex=currentItem?items.indexOf(currentItem):-1;let wrappedItems=function $cc7e05a45900e73f$var$wrapArray(array,startIndex){return array.map(((_,index)=>array[(startIndex+index)%array.length]))}(items,Math.max(currentItemIndex,0));1===normalizedSearch.length&&(wrappedItems=wrappedItems.filter((v=>v!==currentItem)));const nextItem=wrappedItems.find((item=>item.textValue.toLowerCase().startsWith(normalizedSearch.toLowerCase())));return nextItem!==currentItem?nextItem:void 0}$cc7e05a45900e73f$var$BubbleSelect.displayName="BubbleSelect";const $cc7e05a45900e73f$export$be92b6f5f03c0fe9=$cc7e05a45900e73f$export$ef9b1a59e592288f,$cc7e05a45900e73f$export$41fb9f06171c75f4=$cc7e05a45900e73f$export$3ac1e88a1c0b9f1,$cc7e05a45900e73f$export$4c8d1a57a761ef94=$cc7e05a45900e73f$export$e288731fd71264f0,$cc7e05a45900e73f$export$f04a61298a47a40f=$cc7e05a45900e73f$export$99b400cabb58c515,$cc7e05a45900e73f$export$602eac185826482c=$cc7e05a45900e73f$export$b2af6c9944296213,$cc7e05a45900e73f$export$7c6e2c02157bb7d2=$cc7e05a45900e73f$export$c973a4b3cb86a03d,$cc7e05a45900e73f$export$d5c6c08dc2d3ca7=$cc7e05a45900e73f$export$9ed6e7b40248d36d,$cc7e05a45900e73f$export$6d08773d2e66f8f2=$cc7e05a45900e73f$export$13ef48a934230896,$cc7e05a45900e73f$export$d6e5bf9c43ea9319=$cc7e05a45900e73f$export$3572fb0fb821ff49,$cc7e05a45900e73f$export$1ff3c3f08ae963c0=$cc7e05a45900e73f$export$eba4b1df07cb1d3},"./node_modules/@radix-ui/react-slot/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A4:()=>$5e63c961fc1ce211$export$d9f1ccf0bdb05d45,g7:()=>$5e63c961fc1ce211$export$8c6ed5c666ac1360});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs");const $5e63c961fc1ce211$export$8c6ed5c666ac1360=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{children,...slotProps}=props,childrenArray=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children),slottable=childrenArray.find($5e63c961fc1ce211$var$isSlottable);if(slottable){const newElement=slottable.props.children,newChildren=childrenArray.map((child=>child===slottable?react__WEBPACK_IMPORTED_MODULE_0__.Children.count(newElement)>1?react__WEBPACK_IMPORTED_MODULE_0__.Children.only(null):(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(newElement)?newElement.props.children:null:child));return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($5e63c961fc1ce211$var$SlotClone,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.Z)({},slotProps,{ref:forwardedRef}),(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(newElement)?(0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(newElement,void 0,newChildren):null)}return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($5e63c961fc1ce211$var$SlotClone,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.Z)({},slotProps,{ref:forwardedRef}),children)}));$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{children,...slotProps}=props;return(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(children)?(0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(children,{...$5e63c961fc1ce211$var$mergeProps(slotProps,children.props),ref:forwardedRef?(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_2__.F)(forwardedRef,children.ref):children.ref}):react__WEBPACK_IMPORTED_MODULE_0__.Children.count(children)>1?react__WEBPACK_IMPORTED_MODULE_0__.Children.only(null):null}));$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children})=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children);function $5e63c961fc1ce211$var$isSlottable(child){return(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)&&child.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(slotProps,childProps){const overrideProps={...childProps};for(const propName in childProps){const slotPropValue=slotProps[propName],childPropValue=childProps[propName];/^on[A-Z]/.test(propName)?slotPropValue&&childPropValue?overrideProps[propName]=(...args)=>{childPropValue(...args),slotPropValue(...args)}:slotPropValue&&(overrideProps[propName]=slotPropValue):"style"===propName?overrideProps[propName]={...slotPropValue,...childPropValue}:"className"===propName&&(overrideProps[propName]=[slotPropValue,childPropValue].filter(Boolean).join(" "))}return{...slotProps,...overrideProps}}},"./node_modules/@radix-ui/react-toolbar/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{zx:()=>$3dc4ded751c8bdfb$export$353f5b6fc5456de1,fC:()=>$3dc4ded751c8bdfb$export$be92b6f5f03c0fe9,Z0:()=>$3dc4ded751c8bdfb$export$1ff3c3f08ae963c0,tX:()=>$3dc4ded751c8bdfb$export$af3ec21f6cfb5e30,HP:()=>$3dc4ded751c8bdfb$export$920ad4cf87b18fc7});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),react_context_dist=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),react_roving_focus_dist=__webpack_require__("./node_modules/@radix-ui/react-roving-focus/dist/index.mjs"),react_primitive_dist=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs");const $89eedd556c436f6a$var$DEFAULT_ORIENTATION="horizontal",$89eedd556c436f6a$var$ORIENTATIONS=["horizontal","vertical"],$89eedd556c436f6a$export$1ff3c3f08ae963c0=(0,react.forwardRef)(((props,forwardedRef)=>{const{decorative,orientation:orientationProp=$89eedd556c436f6a$var$DEFAULT_ORIENTATION,...domProps}=props,orientation=$89eedd556c436f6a$var$isValidOrientation(orientationProp)?orientationProp:$89eedd556c436f6a$var$DEFAULT_ORIENTATION,semanticProps=decorative?{role:"none"}:{"aria-orientation":"vertical"===orientation?orientation:void 0,role:"separator"};return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"data-orientation":orientation},semanticProps,domProps,{ref:forwardedRef}))}));function $89eedd556c436f6a$var$isValidOrientation(orientation){return $89eedd556c436f6a$var$ORIENTATIONS.includes(orientation)}$89eedd556c436f6a$export$1ff3c3f08ae963c0.propTypes={orientation(props,propName,componentName){const propValue=props[propName],strVal=String(propValue);return propValue&&!$89eedd556c436f6a$var$isValidOrientation(propValue)?new Error(function $89eedd556c436f6a$var$getInvalidOrientationError(value,componentName){return`Invalid prop \`orientation\` of value \`${value}\` supplied to \`${componentName}\`, expected one of:\n  - horizontal\n  - vertical\n\nDefaulting to \`${$89eedd556c436f6a$var$DEFAULT_ORIENTATION}\`.`}(strVal,componentName)):null}};const $89eedd556c436f6a$export$be92b6f5f03c0fe9=$89eedd556c436f6a$export$1ff3c3f08ae963c0;var react_use_controllable_state_dist=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs");const $b3bbe2732c13b576$export$bea8ebba691c5813=(0,react.forwardRef)(((props,forwardedRef)=>{const{pressed:pressedProp,defaultPressed=!1,onPressedChange,...buttonProps}=props,[pressed=!1,setPressed]=(0,react_use_controllable_state_dist.T)({prop:pressedProp,onChange:onPressedChange,defaultProp:defaultPressed});return(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button","aria-pressed":pressed,"data-state":pressed?"on":"off","data-disabled":props.disabled?"":void 0},buttonProps,{ref:forwardedRef,onClick:(0,dist.M)(props.onClick,(()=>{props.disabled||setPressed(!pressed)}))}))}));var react_direction_dist=__webpack_require__("./node_modules/@radix-ui/react-direction/dist/index.mjs");const[$6c1fd9e6a8969628$var$createToggleGroupContext,$6c1fd9e6a8969628$export$d1c7c4bcd9f26dd4]=(0,react_context_dist.b)("ToggleGroup",[react_roving_focus_dist.Pc]),$6c1fd9e6a8969628$var$useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),$6c1fd9e6a8969628$export$af3ec21f6cfb5e30=react.forwardRef(((props,forwardedRef)=>{const{type,...toggleGroupProps}=props;if("single"===type){const singleProps=toggleGroupProps;return react.createElement($6c1fd9e6a8969628$var$ToggleGroupImplSingle,(0,esm_extends.Z)({},singleProps,{ref:forwardedRef}))}if("multiple"===type){const multipleProps=toggleGroupProps;return react.createElement($6c1fd9e6a8969628$var$ToggleGroupImplMultiple,(0,esm_extends.Z)({},multipleProps,{ref:forwardedRef}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")})),[$6c1fd9e6a8969628$var$ToggleGroupValueProvider,$6c1fd9e6a8969628$var$useToggleGroupValueContext]=$6c1fd9e6a8969628$var$createToggleGroupContext("ToggleGroup"),$6c1fd9e6a8969628$var$ToggleGroupImplSingle=react.forwardRef(((props,forwardedRef)=>{const{value:valueProp,defaultValue,onValueChange=()=>{},...toggleGroupSingleProps}=props,[value,setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,defaultProp:defaultValue,onChange:onValueChange});return react.createElement($6c1fd9e6a8969628$var$ToggleGroupValueProvider,{scope:props.__scopeToggleGroup,type:"single",value:value?[value]:[],onItemActivate:setValue,onItemDeactivate:react.useCallback((()=>setValue("")),[setValue])},react.createElement($6c1fd9e6a8969628$var$ToggleGroupImpl,(0,esm_extends.Z)({},toggleGroupSingleProps,{ref:forwardedRef})))})),$6c1fd9e6a8969628$var$ToggleGroupImplMultiple=react.forwardRef(((props,forwardedRef)=>{const{value:valueProp,defaultValue,onValueChange=()=>{},...toggleGroupMultipleProps}=props,[value1=[],setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,defaultProp:defaultValue,onChange:onValueChange}),handleButtonActivate=react.useCallback((itemValue=>setValue(((prevValue=[])=>[...prevValue,itemValue]))),[setValue]),handleButtonDeactivate=react.useCallback((itemValue=>setValue(((prevValue=[])=>prevValue.filter((value=>value!==itemValue))))),[setValue]);return react.createElement($6c1fd9e6a8969628$var$ToggleGroupValueProvider,{scope:props.__scopeToggleGroup,type:"multiple",value:value1,onItemActivate:handleButtonActivate,onItemDeactivate:handleButtonDeactivate},react.createElement($6c1fd9e6a8969628$var$ToggleGroupImpl,(0,esm_extends.Z)({},toggleGroupMultipleProps,{ref:forwardedRef})))})),[$6c1fd9e6a8969628$var$ToggleGroupContext,$6c1fd9e6a8969628$var$useToggleGroupContext]=$6c1fd9e6a8969628$var$createToggleGroupContext("ToggleGroup"),$6c1fd9e6a8969628$var$ToggleGroupImpl=react.forwardRef(((props,forwardedRef)=>{const{__scopeToggleGroup,disabled=!1,rovingFocus=!0,orientation,dir,loop=!0,...toggleGroupProps}=props,rovingFocusGroupScope=$6c1fd9e6a8969628$var$useRovingFocusGroupScope(__scopeToggleGroup),direction=(0,react_direction_dist.gm)(dir),commonProps={role:"group",dir:direction,...toggleGroupProps};return react.createElement($6c1fd9e6a8969628$var$ToggleGroupContext,{scope:__scopeToggleGroup,rovingFocus,disabled},rovingFocus?react.createElement(react_roving_focus_dist.fC,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{orientation,dir:direction,loop}),react.createElement(react_primitive_dist.WV.div,(0,esm_extends.Z)({},commonProps,{ref:forwardedRef}))):react.createElement(react_primitive_dist.WV.div,(0,esm_extends.Z)({},commonProps,{ref:forwardedRef})))})),$6c1fd9e6a8969628$export$b453109e13abe10b=react.forwardRef(((props,forwardedRef)=>{const valueContext=$6c1fd9e6a8969628$var$useToggleGroupValueContext("ToggleGroupItem",props.__scopeToggleGroup),context=$6c1fd9e6a8969628$var$useToggleGroupContext("ToggleGroupItem",props.__scopeToggleGroup),rovingFocusGroupScope=$6c1fd9e6a8969628$var$useRovingFocusGroupScope(props.__scopeToggleGroup),pressed=valueContext.value.includes(props.value),disabled=context.disabled||props.disabled,commonProps={...props,pressed,disabled},ref=react.useRef(null);return context.rovingFocus?react.createElement(react_roving_focus_dist.ck,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{focusable:!disabled,active:pressed,ref}),react.createElement($6c1fd9e6a8969628$var$ToggleGroupItemImpl,(0,esm_extends.Z)({},commonProps,{ref:forwardedRef}))):react.createElement($6c1fd9e6a8969628$var$ToggleGroupItemImpl,(0,esm_extends.Z)({},commonProps,{ref:forwardedRef}))})),$6c1fd9e6a8969628$var$ToggleGroupItemImpl=react.forwardRef(((props,forwardedRef)=>{const{__scopeToggleGroup,value,...itemProps}=props,valueContext=$6c1fd9e6a8969628$var$useToggleGroupValueContext("ToggleGroupItem",__scopeToggleGroup),singleProps={role:"radio","aria-checked":props.pressed,"aria-pressed":void 0},typeProps="single"===valueContext.type?singleProps:void 0;return react.createElement($b3bbe2732c13b576$export$bea8ebba691c5813,(0,esm_extends.Z)({},typeProps,itemProps,{ref:forwardedRef,onPressedChange:pressed=>{pressed?valueContext.onItemActivate(value):valueContext.onItemDeactivate(value)}}))})),$6c1fd9e6a8969628$export$be92b6f5f03c0fe9=$6c1fd9e6a8969628$export$af3ec21f6cfb5e30,$6c1fd9e6a8969628$export$6d08773d2e66f8f2=$6c1fd9e6a8969628$export$b453109e13abe10b,[$3dc4ded751c8bdfb$var$createToolbarContext,$3dc4ded751c8bdfb$export$233e637670877d91]=(0,react_context_dist.b)("Toolbar",[react_roving_focus_dist.Pc,$6c1fd9e6a8969628$export$d1c7c4bcd9f26dd4]),$3dc4ded751c8bdfb$var$useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),$3dc4ded751c8bdfb$var$useToggleGroupScope=$6c1fd9e6a8969628$export$d1c7c4bcd9f26dd4(),[$3dc4ded751c8bdfb$var$ToolbarProvider,$3dc4ded751c8bdfb$var$useToolbarContext]=$3dc4ded751c8bdfb$var$createToolbarContext("Toolbar"),$3dc4ded751c8bdfb$export$4c260019440d418f=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToolbar,orientation="horizontal",dir,loop=!0,...toolbarProps}=props,rovingFocusGroupScope=$3dc4ded751c8bdfb$var$useRovingFocusGroupScope(__scopeToolbar),direction=(0,react_direction_dist.gm)(dir);return(0,react.createElement)($3dc4ded751c8bdfb$var$ToolbarProvider,{scope:__scopeToolbar,orientation,dir:direction},(0,react.createElement)(react_roving_focus_dist.fC,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{orientation,dir:direction,loop}),(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({role:"toolbar","aria-orientation":orientation,dir:direction},toolbarProps,{ref:forwardedRef}))))})),$3dc4ded751c8bdfb$export$291e1a31e8ec7868=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToolbar,...separatorProps}=props,context=$3dc4ded751c8bdfb$var$useToolbarContext("ToolbarSeparator",__scopeToolbar);return(0,react.createElement)($89eedd556c436f6a$export$be92b6f5f03c0fe9,(0,esm_extends.Z)({orientation:"horizontal"===context.orientation?"vertical":"horizontal"},separatorProps,{ref:forwardedRef}))})),$3dc4ded751c8bdfb$export$e5c1a33878e86e9e=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToolbar,...buttonProps}=props,rovingFocusGroupScope=$3dc4ded751c8bdfb$var$useRovingFocusGroupScope(__scopeToolbar);return(0,react.createElement)(react_roving_focus_dist.ck,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{focusable:!props.disabled}),(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button"},buttonProps,{ref:forwardedRef})))})),$3dc4ded751c8bdfb$export$aeae28cb17562c0b=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToolbar,...toggleGroupProps}=props,context=$3dc4ded751c8bdfb$var$useToolbarContext("ToolbarToggleGroup",__scopeToolbar),toggleGroupScope=$3dc4ded751c8bdfb$var$useToggleGroupScope(__scopeToolbar);return(0,react.createElement)($6c1fd9e6a8969628$export$be92b6f5f03c0fe9,(0,esm_extends.Z)({"data-orientation":context.orientation,dir:context.dir},toggleGroupScope,toggleGroupProps,{ref:forwardedRef,rovingFocus:!1}))})),$3dc4ded751c8bdfb$export$546b879b639844a1=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToolbar,...toggleItemProps}=props,toggleGroupScope=$3dc4ded751c8bdfb$var$useToggleGroupScope(__scopeToolbar),scope={__scopeToolbar:props.__scopeToolbar};return(0,react.createElement)($3dc4ded751c8bdfb$export$e5c1a33878e86e9e,(0,esm_extends.Z)({asChild:!0},scope),(0,react.createElement)($6c1fd9e6a8969628$export$6d08773d2e66f8f2,(0,esm_extends.Z)({},toggleGroupScope,toggleItemProps,{ref:forwardedRef})))})),$3dc4ded751c8bdfb$export$be92b6f5f03c0fe9=$3dc4ded751c8bdfb$export$4c260019440d418f,$3dc4ded751c8bdfb$export$1ff3c3f08ae963c0=$3dc4ded751c8bdfb$export$291e1a31e8ec7868,$3dc4ded751c8bdfb$export$353f5b6fc5456de1=$3dc4ded751c8bdfb$export$e5c1a33878e86e9e,$3dc4ded751c8bdfb$export$af3ec21f6cfb5e30=$3dc4ded751c8bdfb$export$aeae28cb17562c0b,$3dc4ded751c8bdfb$export$920ad4cf87b18fc7=$3dc4ded751c8bdfb$export$546b879b639844a1},"./node_modules/@radix-ui/react-tooltip/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Eh:()=>$a093c7e1ec25a057$export$21b07c8f274aebd5,VY:()=>$a093c7e1ec25a057$export$7c6e2c02157bb7d2,fC:()=>$a093c7e1ec25a057$export$be92b6f5f03c0fe9,h_:()=>$a093c7e1ec25a057$export$602eac185826482c,xz:()=>$a093c7e1ec25a057$export$41fb9f06171c75f4,zt:()=>$a093c7e1ec25a057$export$2881499e37b75b9a});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"),_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-id/dist/index.mjs"),_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-popper/dist/index.mjs"),_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@radix-ui/react-portal/dist/index.mjs"),_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@radix-ui/react-presence/dist/index.mjs"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),_radix_ui_react_visually_hidden__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@radix-ui/react-visually-hidden/dist/index.mjs");const[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=(0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_1__.b)("Tooltip",[_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.D7]),$a093c7e1ec25a057$var$usePopperScope=(0,_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.D7)(),$a093c7e1ec25a057$var$DEFAULT_DELAY_DURATION=700,[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext("TooltipProvider"),$a093c7e1ec25a057$export$f78649fb9ca566b8=props=>{const{__scopeTooltip,delayDuration=$a093c7e1ec25a057$var$DEFAULT_DELAY_DURATION,skipDelayDuration=300,disableHoverableContent=!1,children}=props,[isOpenDelayed,setIsOpenDelayed]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),isPointerInTransitRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),skipDelayTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const skipDelayTimer=skipDelayTimerRef.current;return()=>window.clearTimeout(skipDelayTimer)}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$TooltipProviderContextProvider,{scope:__scopeTooltip,isOpenDelayed,delayDuration,onOpen:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{window.clearTimeout(skipDelayTimerRef.current),setIsOpenDelayed(!1)}),[]),onClose:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{window.clearTimeout(skipDelayTimerRef.current),skipDelayTimerRef.current=window.setTimeout((()=>setIsOpenDelayed(!0)),skipDelayDuration)}),[skipDelayDuration]),isPointerInTransitRef,onPointerInTransitChange:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((inTransit=>{isPointerInTransitRef.current=inTransit}),[]),disableHoverableContent},children)},[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext("Tooltip"),$a093c7e1ec25a057$export$28c660c63b792dea=props=>{const{__scopeTooltip,children,open:openProp,defaultOpen=!1,onOpenChange,disableHoverableContent:disableHoverableContentProp,delayDuration:delayDurationProp}=props,providerContext=$a093c7e1ec25a057$var$useTooltipProviderContext("Tooltip",props.__scopeTooltip),popperScope=$a093c7e1ec25a057$var$usePopperScope(__scopeTooltip),[trigger,setTrigger]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),contentId=(0,_radix_ui_react_id__WEBPACK_IMPORTED_MODULE_3__.M)(),openTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),disableHoverableContent=null!=disableHoverableContentProp?disableHoverableContentProp:providerContext.disableHoverableContent,delayDuration=null!=delayDurationProp?delayDurationProp:providerContext.delayDuration,wasOpenDelayedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),[open1=!1,setOpen]=(0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__.T)({prop:openProp,defaultProp:defaultOpen,onChange:open=>{open?(providerContext.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"))):providerContext.onClose(),null==onOpenChange||onOpenChange(open)}}),stateAttribute=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>open1?wasOpenDelayedRef.current?"delayed-open":"instant-open":"closed"),[open1]),handleOpen=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{window.clearTimeout(openTimerRef.current),wasOpenDelayedRef.current=!1,setOpen(!0)}),[setOpen]),handleClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{window.clearTimeout(openTimerRef.current),setOpen(!1)}),[setOpen]),handleDelayedOpen=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{window.clearTimeout(openTimerRef.current),openTimerRef.current=window.setTimeout((()=>{wasOpenDelayedRef.current=!0,setOpen(!0)}),delayDuration)}),[delayDuration,setOpen]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>window.clearTimeout(openTimerRef.current)),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.fC,popperScope,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$TooltipContextProvider,{scope:__scopeTooltip,contentId,open:open1,stateAttribute,trigger,onTriggerChange:setTrigger,onTriggerEnter:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{providerContext.isOpenDelayed?handleDelayedOpen():handleOpen()}),[providerContext.isOpenDelayed,handleDelayedOpen,handleOpen]),onTriggerLeave:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{disableHoverableContent?handleClose():window.clearTimeout(openTimerRef.current)}),[handleClose,disableHoverableContent]),onOpen:handleOpen,onClose:handleClose,disableHoverableContent},children))},$a093c7e1ec25a057$export$8c610744efcf8a1d=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopeTooltip,...triggerProps}=props,context=$a093c7e1ec25a057$var$useTooltipContext("TooltipTrigger",__scopeTooltip),providerContext=$a093c7e1ec25a057$var$useTooltipProviderContext("TooltipTrigger",__scopeTooltip),popperScope=$a093c7e1ec25a057$var$usePopperScope(__scopeTooltip),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_5__.e)(forwardedRef,ref,context.onTriggerChange),isPointerDownRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),hasPointerMoveOpenedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),handlePointerUp=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>isPointerDownRef.current=!1),[]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>document.removeEventListener("pointerup",handlePointerUp)),[handlePointerUp]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.ee,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({asChild:!0},popperScope),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_7__.WV.button,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({"aria-describedby":context.open?context.contentId:void 0,"data-state":context.stateAttribute},triggerProps,{ref:composedRefs,onPointerMove:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onPointerMove,(event=>{"touch"!==event.pointerType&&(hasPointerMoveOpenedRef.current||providerContext.isPointerInTransitRef.current||(context.onTriggerEnter(),hasPointerMoveOpenedRef.current=!0))})),onPointerLeave:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onPointerLeave,(()=>{context.onTriggerLeave(),hasPointerMoveOpenedRef.current=!1})),onPointerDown:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onPointerDown,(()=>{isPointerDownRef.current=!0,document.addEventListener("pointerup",handlePointerUp,{once:!0})})),onFocus:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onFocus,(()=>{isPointerDownRef.current||context.onOpen()})),onBlur:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onBlur,context.onClose),onClick:(0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_8__.M)(props.onClick,context.onClose)})))})),[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext("TooltipPortal",{forceMount:void 0}),$a093c7e1ec25a057$export$7b36b8f925ab7497=props=>{const{__scopeTooltip,forceMount,children,container}=props,context=$a093c7e1ec25a057$var$useTooltipContext("TooltipPortal",__scopeTooltip);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$PortalProvider,{scope:__scopeTooltip,forceMount},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.z,{present:forceMount||context.open},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_portal__WEBPACK_IMPORTED_MODULE_10__.h,{asChild:!0,container},children)))},$a093c7e1ec25a057$export$e9003e2be37ec060=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const portalContext=$a093c7e1ec25a057$var$usePortalContext("TooltipContent",props.__scopeTooltip),{forceMount=portalContext.forceMount,side="top",...contentProps}=props,context=$a093c7e1ec25a057$var$useTooltipContext("TooltipContent",props.__scopeTooltip);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_9__.z,{present:forceMount||context.open},context.disableHoverableContent?(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$TooltipContentImpl,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({side},contentProps,{ref:forwardedRef})):(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$TooltipContentHoverable,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({side},contentProps,{ref:forwardedRef})))})),$a093c7e1ec25a057$var$TooltipContentHoverable=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const context=$a093c7e1ec25a057$var$useTooltipContext("TooltipContent",props.__scopeTooltip),providerContext=$a093c7e1ec25a057$var$useTooltipProviderContext("TooltipContent",props.__scopeTooltip),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),composedRefs=(0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_5__.e)(forwardedRef,ref),[pointerGraceArea,setPointerGraceArea]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),{trigger,onClose}=context,content=ref.current,{onPointerInTransitChange}=providerContext,handleRemoveGraceArea=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{setPointerGraceArea(null),onPointerInTransitChange(!1)}),[onPointerInTransitChange]),handleCreateGraceArea=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((event,hoverTarget)=>{const currentTarget=event.currentTarget,exitPoint={x:event.clientX,y:event.clientY},paddedExitPoints=function $a093c7e1ec25a057$var$getPaddedExitPoints(exitPoint,exitSide,padding=5){const paddedExitPoints=[];switch(exitSide){case"top":paddedExitPoints.push({x:exitPoint.x-padding,y:exitPoint.y+padding},{x:exitPoint.x+padding,y:exitPoint.y+padding});break;case"bottom":paddedExitPoints.push({x:exitPoint.x-padding,y:exitPoint.y-padding},{x:exitPoint.x+padding,y:exitPoint.y-padding});break;case"left":paddedExitPoints.push({x:exitPoint.x+padding,y:exitPoint.y-padding},{x:exitPoint.x+padding,y:exitPoint.y+padding});break;case"right":paddedExitPoints.push({x:exitPoint.x-padding,y:exitPoint.y-padding},{x:exitPoint.x-padding,y:exitPoint.y+padding})}return paddedExitPoints}(exitPoint,function $a093c7e1ec25a057$var$getExitSideFromRect(point,rect){const top=Math.abs(rect.top-point.y),bottom=Math.abs(rect.bottom-point.y),right=Math.abs(rect.right-point.x),left=Math.abs(rect.left-point.x);switch(Math.min(top,bottom,right,left)){case left:return"left";case right:return"right";case top:return"top";case bottom:return"bottom";default:throw new Error("unreachable")}}(exitPoint,currentTarget.getBoundingClientRect())),graceArea=function $a093c7e1ec25a057$var$getHull(points){const newPoints=points.slice();return newPoints.sort(((a,b)=>a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0)),function $a093c7e1ec25a057$var$getHullPresorted(points){if(points.length<=1)return points.slice();const upperHull=[];for(let i=0;i<points.length;i++){const p=points[i];for(;upperHull.length>=2;){const q=upperHull[upperHull.length-1],r=upperHull[upperHull.length-2];if(!((q.x-r.x)*(p.y-r.y)>=(q.y-r.y)*(p.x-r.x)))break;upperHull.pop()}upperHull.push(p)}upperHull.pop();const lowerHull=[];for(let i1=points.length-1;i1>=0;i1--){const p=points[i1];for(;lowerHull.length>=2;){const q=lowerHull[lowerHull.length-1],r=lowerHull[lowerHull.length-2];if(!((q.x-r.x)*(p.y-r.y)>=(q.y-r.y)*(p.x-r.x)))break;lowerHull.pop()}lowerHull.push(p)}return lowerHull.pop(),1===upperHull.length&&1===lowerHull.length&&upperHull[0].x===lowerHull[0].x&&upperHull[0].y===lowerHull[0].y?upperHull:upperHull.concat(lowerHull)}(newPoints)}([...paddedExitPoints,...function $a093c7e1ec25a057$var$getPointsFromRect(rect){const{top,right,bottom,left}=rect;return[{x:left,y:top},{x:right,y:top},{x:right,y:bottom},{x:left,y:bottom}]}(hoverTarget.getBoundingClientRect())]);setPointerGraceArea(graceArea),onPointerInTransitChange(!0)}),[onPointerInTransitChange]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>handleRemoveGraceArea()),[handleRemoveGraceArea]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(trigger&&content){const handleTriggerLeave=event=>handleCreateGraceArea(event,content),handleContentLeave=event=>handleCreateGraceArea(event,trigger);return trigger.addEventListener("pointerleave",handleTriggerLeave),content.addEventListener("pointerleave",handleContentLeave),()=>{trigger.removeEventListener("pointerleave",handleTriggerLeave),content.removeEventListener("pointerleave",handleContentLeave)}}}),[trigger,content,handleCreateGraceArea,handleRemoveGraceArea]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(pointerGraceArea){const handleTrackPointerGrace=event=>{const target=event.target,pointerPosition={x:event.clientX,y:event.clientY},hasEnteredTarget=(null==trigger?void 0:trigger.contains(target))||(null==content?void 0:content.contains(target)),isPointerOutsideGraceArea=!function $a093c7e1ec25a057$var$isPointInPolygon(point,polygon){const{x,y}=point;let inside=!1;for(let i=0,j=polygon.length-1;i<polygon.length;j=i++){const xi=polygon[i].x,yi=polygon[i].y,xj=polygon[j].x,yj=polygon[j].y;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(inside=!inside)}return inside}(pointerPosition,pointerGraceArea);hasEnteredTarget?handleRemoveGraceArea():isPointerOutsideGraceArea&&(handleRemoveGraceArea(),onClose())};return document.addEventListener("pointermove",handleTrackPointerGrace),()=>document.removeEventListener("pointermove",handleTrackPointerGrace)}}),[trigger,content,pointerGraceArea,onClose,handleRemoveGraceArea]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$TooltipContentImpl,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({},props,{ref:composedRefs}))})),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext("Tooltip",{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopeTooltip,children,"aria-label":ariaLabel,onEscapeKeyDown,onPointerDownOutside,...contentProps}=props,context=$a093c7e1ec25a057$var$useTooltipContext("TooltipContent",__scopeTooltip),popperScope=$a093c7e1ec25a057$var$usePopperScope(__scopeTooltip),{onClose}=context;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(document.addEventListener("tooltip.open",onClose),()=>document.removeEventListener("tooltip.open",onClose))),[onClose]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(context.trigger){const handleScroll=event=>{const target=event.target;null!=target&&target.contains(context.trigger)&&onClose()};return window.addEventListener("scroll",handleScroll,{capture:!0}),()=>window.removeEventListener("scroll",handleScroll,{capture:!0})}}),[context.trigger,onClose]),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_dismissable_layer__WEBPACK_IMPORTED_MODULE_11__.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown,onPointerDownOutside,onFocusOutside:event=>event.preventDefault(),onDismiss:onClose},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.VY,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({"data-state":context.stateAttribute},popperScope,contentProps,{ref:forwardedRef,style:{...contentProps.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_12__.A4,null,children),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:__scopeTooltip,isInside:!0},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_visually_hidden__WEBPACK_IMPORTED_MODULE_13__.f,{id:context.contentId,role:"tooltip"},ariaLabel||children))))})),$a093c7e1ec25a057$export$c27ee0ad710f7559=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>{const{__scopeTooltip,...arrowProps}=props,popperScope=$a093c7e1ec25a057$var$usePopperScope(__scopeTooltip);return $a093c7e1ec25a057$var$useVisuallyHiddenContentContext("TooltipArrow",__scopeTooltip).isInside?null:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_popper__WEBPACK_IMPORTED_MODULE_2__.Eh,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({},popperScope,arrowProps,{ref:forwardedRef}))}));const $a093c7e1ec25a057$export$2881499e37b75b9a=$a093c7e1ec25a057$export$f78649fb9ca566b8,$a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$602eac185826482c=$a093c7e1ec25a057$export$7b36b8f925ab7497,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060,$a093c7e1ec25a057$export$21b07c8f274aebd5=$a093c7e1ec25a057$export$c27ee0ad710f7559},"./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>$b1b2314f5f9a1d84$export$25bec8c6f54ee79a});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(callback){const callbackRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{callbackRef.current=callback})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>(...args)=>{var _callbackRef$current;return null===(_callbackRef$current=callbackRef.current)||void 0===_callbackRef$current?void 0:_callbackRef$current.call(callbackRef,...args)}),[])}},"./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>$71cd76cc60e0454e$export$6f32135080cb4c3});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs");function $71cd76cc60e0454e$export$6f32135080cb4c3({prop,defaultProp,onChange=()=>{}}){const[uncontrolledProp,setUncontrolledProp]=function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp,onChange}){const uncontrolledState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultProp),[value]=uncontrolledState,prevValueRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value),handleChange=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__.W)(onChange);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{prevValueRef.current!==value&&(handleChange(value),prevValueRef.current=value)}),[value,prevValueRef,handleChange]),uncontrolledState}({defaultProp,onChange}),isControlled=void 0!==prop,value1=isControlled?prop:uncontrolledProp,handleChange=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__.W)(onChange);return[value1,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((nextValue=>{if(isControlled){const value="function"==typeof nextValue?nextValue(prop):nextValue;value!==prop&&handleChange(value)}else setUncontrolledProp(nextValue)}),[isControlled,prop,setUncontrolledProp,handleChange])]}},"./node_modules/@radix-ui/react-use-escape-keydown/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>$addc16e1bbe58fd0$export$3a72a57244d6e765});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs");function $addc16e1bbe58fd0$export$3a72a57244d6e765(onEscapeKeyDownProp,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const onEscapeKeyDown=(0,_radix_ui_react_use_callback_ref__WEBPACK_IMPORTED_MODULE_1__.W)(onEscapeKeyDownProp);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handleKeyDown=event=>{"Escape"===event.key&&onEscapeKeyDown(event)};return ownerDocument.addEventListener("keydown",handleKeyDown),()=>ownerDocument.removeEventListener("keydown",handleKeyDown)}),[onEscapeKeyDown,ownerDocument])}},"./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>$9f79659886946c16$export$e5c5a5f917a5871c});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const $9f79659886946c16$export$e5c5a5f917a5871c=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:()=>{}},"./node_modules/@radix-ui/react-use-previous/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>$010c2913dbd2fe3d$export$5cae361ad82dce8b});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function $010c2913dbd2fe3d$export$5cae361ad82dce8b(value){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({value,previous:value});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>(ref.current.value!==value&&(ref.current.previous=ref.current.value,ref.current.value=value),ref.current.previous)),[value])}},"./node_modules/@radix-ui/react-use-size/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>$db6c3485150b8e66$export$1ab7ae714698c4b8});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs");function $db6c3485150b8e66$export$1ab7ae714698c4b8(element){const[size,setSize]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);return(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__.b)((()=>{if(element){setSize({width:element.offsetWidth,height:element.offsetHeight});const resizeObserver=new ResizeObserver((entries=>{if(!Array.isArray(entries))return;if(!entries.length)return;const entry=entries[0];let width,height;if("borderBoxSize"in entry){const borderSizeEntry=entry.borderBoxSize,borderSize=Array.isArray(borderSizeEntry)?borderSizeEntry[0]:borderSizeEntry;width=borderSize.inlineSize,height=borderSize.blockSize}else width=element.offsetWidth,height=element.offsetHeight;setSize({width,height})}));return resizeObserver.observe(element,{box:"border-box"}),()=>resizeObserver.unobserve(element)}setSize(void 0)}),[element]),size}},"./node_modules/@radix-ui/react-visually-hidden/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>$ea1ef594cf570d83$export$439d29a4e110a164,f:()=>$ea1ef594cf570d83$export$be92b6f5f03c0fe9});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs");const $ea1ef594cf570d83$export$439d29a4e110a164=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,forwardedRef)=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_1__.WV.span,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__.Z)({},props,{ref:forwardedRef,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...props.style}})))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164},"./node_modules/@tldraw/assets/urls.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function formatAssetUrl(assetUrl,format={}){const assetUrlString="string"==typeof assetUrl?assetUrl:assetUrl.src;if("function"==typeof format)return format(assetUrlString);const{baseUrl=""}=format;return assetUrlString.startsWith("data:")||assetUrlString.match(/^https?:\/\//)?assetUrlString:`${baseUrl.replace(/\/$/,"")}/${assetUrlString.replace(/^\.?\//,"")}`}function getAssetUrlsByMetaUrl(opts){return{fonts:{monospace:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/fonts/IBMPlexMono-Medium.woff2"),__webpack_require__.b).href,opts),sansSerif:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/fonts/IBMPlexSans-Medium.woff2"),__webpack_require__.b).href,opts),serif:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/fonts/IBMPlexSerif-Medium.woff2"),__webpack_require__.b).href,opts),draw:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/fonts/Shantell_Sans-Normal-SemiBold.woff2"),__webpack_require__.b).href,opts)},icons:{"align-bottom-center":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-bottom-center.svg"),__webpack_require__.b).href,opts),"align-bottom-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-bottom-left.svg"),__webpack_require__.b).href,opts),"align-bottom-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-bottom-right.svg"),__webpack_require__.b).href,opts),"align-bottom":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-bottom.svg"),__webpack_require__.b).href,opts),"align-center-center":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-center-center.svg"),__webpack_require__.b).href,opts),"align-center-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-center-horizontal.svg"),__webpack_require__.b).href,opts),"align-center-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-center-left.svg"),__webpack_require__.b).href,opts),"align-center-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-center-right.svg"),__webpack_require__.b).href,opts),"align-center-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-center-vertical.svg"),__webpack_require__.b).href,opts),"align-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-left.svg"),__webpack_require__.b).href,opts),"align-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-right.svg"),__webpack_require__.b).href,opts),"align-top-center":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-top-center.svg"),__webpack_require__.b).href,opts),"align-top-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-top-left.svg"),__webpack_require__.b).href,opts),"align-top-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-top-right.svg"),__webpack_require__.b).href,opts),"align-top":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/align-top.svg"),__webpack_require__.b).href,opts),"arrow-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrow-left.svg"),__webpack_require__.b).href,opts),"arrowhead-arrow":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-arrow.svg"),__webpack_require__.b).href,opts),"arrowhead-bar":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-bar.svg"),__webpack_require__.b).href,opts),"arrowhead-diamond":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-diamond.svg"),__webpack_require__.b).href,opts),"arrowhead-dot":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-dot.svg"),__webpack_require__.b).href,opts),"arrowhead-none":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-none.svg"),__webpack_require__.b).href,opts),"arrowhead-square":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-square.svg"),__webpack_require__.b).href,opts),"arrowhead-triangle-inverted":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-triangle-inverted.svg"),__webpack_require__.b).href,opts),"arrowhead-triangle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/arrowhead-triangle.svg"),__webpack_require__.b).href,opts),"aspect-ratio":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/aspect-ratio.svg"),__webpack_require__.b).href,opts),avatar:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/avatar.svg"),__webpack_require__.b).href,opts),blob:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/blob.svg"),__webpack_require__.b).href,opts),"bring-forward":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/bring-forward.svg"),__webpack_require__.b).href,opts),"bring-to-front":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/bring-to-front.svg"),__webpack_require__.b).href,opts),check:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/check.svg"),__webpack_require__.b).href,opts),"checkbox-checked":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/checkbox-checked.svg"),__webpack_require__.b).href,opts),"checkbox-empty":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/checkbox-empty.svg"),__webpack_require__.b).href,opts),"chevron-down":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevron-down.svg"),__webpack_require__.b).href,opts),"chevron-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevron-left.svg"),__webpack_require__.b).href,opts),"chevron-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevron-right.svg"),__webpack_require__.b).href,opts),"chevron-up":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevron-up.svg"),__webpack_require__.b).href,opts),"chevrons-ne":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevrons-ne.svg"),__webpack_require__.b).href,opts),"chevrons-sw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/chevrons-sw.svg"),__webpack_require__.b).href,opts),"clipboard-copied":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/clipboard-copied.svg"),__webpack_require__.b).href,opts),"clipboard-copy":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/clipboard-copy.svg"),__webpack_require__.b).href,opts),code:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/code.svg"),__webpack_require__.b).href,opts),collab:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/collab.svg"),__webpack_require__.b).href,opts),color:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/color.svg"),__webpack_require__.b).href,opts),comment:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/comment.svg"),__webpack_require__.b).href,opts),"cross-2":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/cross-2.svg"),__webpack_require__.b).href,opts),cross:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/cross.svg"),__webpack_require__.b).href,opts),"dash-dashed":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dash-dashed.svg"),__webpack_require__.b).href,opts),"dash-dotted":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dash-dotted.svg"),__webpack_require__.b).href,opts),"dash-draw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dash-draw.svg"),__webpack_require__.b).href,opts),"dash-solid":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dash-solid.svg"),__webpack_require__.b).href,opts),discord:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/discord.svg"),__webpack_require__.b).href,opts),"distribute-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/distribute-horizontal.svg"),__webpack_require__.b).href,opts),"distribute-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/distribute-vertical.svg"),__webpack_require__.b).href,opts),dot:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dot.svg"),__webpack_require__.b).href,opts),"dots-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dots-horizontal.svg"),__webpack_require__.b).href,opts),"dots-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/dots-vertical.svg"),__webpack_require__.b).href,opts),"drag-handle-dots":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/drag-handle-dots.svg"),__webpack_require__.b).href,opts),duplicate:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/duplicate.svg"),__webpack_require__.b).href,opts),edit:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/edit.svg"),__webpack_require__.b).href,opts),"external-link":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/external-link.svg"),__webpack_require__.b).href,opts),file:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/file.svg"),__webpack_require__.b).href,opts),"fill-none":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/fill-none.svg"),__webpack_require__.b).href,opts),"fill-pattern":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/fill-pattern.svg"),__webpack_require__.b).href,opts),"fill-semi":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/fill-semi.svg"),__webpack_require__.b).href,opts),"fill-solid":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/fill-solid.svg"),__webpack_require__.b).href,opts),follow:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/follow.svg"),__webpack_require__.b).href,opts),following:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/following.svg"),__webpack_require__.b).href,opts),"font-draw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/font-draw.svg"),__webpack_require__.b).href,opts),"font-mono":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/font-mono.svg"),__webpack_require__.b).href,opts),"font-sans":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/font-sans.svg"),__webpack_require__.b).href,opts),"font-serif":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/font-serif.svg"),__webpack_require__.b).href,opts),"geo-arrow-down":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-arrow-down.svg"),__webpack_require__.b).href,opts),"geo-arrow-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-arrow-left.svg"),__webpack_require__.b).href,opts),"geo-arrow-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-arrow-right.svg"),__webpack_require__.b).href,opts),"geo-arrow-up":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-arrow-up.svg"),__webpack_require__.b).href,opts),"geo-check-box":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-check-box.svg"),__webpack_require__.b).href,opts),"geo-cloud":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-cloud.svg"),__webpack_require__.b).href,opts),"geo-diamond":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-diamond.svg"),__webpack_require__.b).href,opts),"geo-ellipse":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-ellipse.svg"),__webpack_require__.b).href,opts),"geo-hexagon":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-hexagon.svg"),__webpack_require__.b).href,opts),"geo-octagon":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-octagon.svg"),__webpack_require__.b).href,opts),"geo-oval":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-oval.svg"),__webpack_require__.b).href,opts),"geo-pentagon":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-pentagon.svg"),__webpack_require__.b).href,opts),"geo-rectangle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-rectangle.svg"),__webpack_require__.b).href,opts),"geo-rhombus-2":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-rhombus-2.svg"),__webpack_require__.b).href,opts),"geo-rhombus":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-rhombus.svg"),__webpack_require__.b).href,opts),"geo-star":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-star.svg"),__webpack_require__.b).href,opts),"geo-trapezoid":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-trapezoid.svg"),__webpack_require__.b).href,opts),"geo-triangle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-triangle.svg"),__webpack_require__.b).href,opts),"geo-x-box":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/geo-x-box.svg"),__webpack_require__.b).href,opts),github:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/github.svg"),__webpack_require__.b).href,opts),group:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/group.svg"),__webpack_require__.b).href,opts),hidden:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/hidden.svg"),__webpack_require__.b).href,opts),image:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/image.svg"),__webpack_require__.b).href,opts),"info-circle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/info-circle.svg"),__webpack_require__.b).href,opts),leading:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/leading.svg"),__webpack_require__.b).href,opts),link:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/link.svg"),__webpack_require__.b).href,opts),"lock-small":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/lock-small.svg"),__webpack_require__.b).href,opts),lock:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/lock.svg"),__webpack_require__.b).href,opts),menu:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/menu.svg"),__webpack_require__.b).href,opts),minus:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/minus.svg"),__webpack_require__.b).href,opts),mixed:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/mixed.svg"),__webpack_require__.b).href,opts),pack:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/pack.svg"),__webpack_require__.b).href,opts),page:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/page.svg"),__webpack_require__.b).href,opts),plus:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/plus.svg"),__webpack_require__.b).href,opts),"question-mark-circle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/question-mark-circle.svg"),__webpack_require__.b).href,opts),"question-mark":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/question-mark.svg"),__webpack_require__.b).href,opts),redo:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/redo.svg"),__webpack_require__.b).href,opts),"reset-zoom":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/reset-zoom.svg"),__webpack_require__.b).href,opts),"rotate-ccw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/rotate-ccw.svg"),__webpack_require__.b).href,opts),"rotate-cw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/rotate-cw.svg"),__webpack_require__.b).href,opts),ruler:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/ruler.svg"),__webpack_require__.b).href,opts),search:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/search.svg"),__webpack_require__.b).href,opts),"send-backward":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/send-backward.svg"),__webpack_require__.b).href,opts),"send-to-back":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/send-to-back.svg"),__webpack_require__.b).href,opts),"settings-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/settings-horizontal.svg"),__webpack_require__.b).href,opts),"settings-vertical-1":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/settings-vertical-1.svg"),__webpack_require__.b).href,opts),"settings-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/settings-vertical.svg"),__webpack_require__.b).href,opts),"share-1":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/share-1.svg"),__webpack_require__.b).href,opts),"share-2":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/share-2.svg"),__webpack_require__.b).href,opts),"size-extra-large":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/size-extra-large.svg"),__webpack_require__.b).href,opts),"size-large":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/size-large.svg"),__webpack_require__.b).href,opts),"size-medium":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/size-medium.svg"),__webpack_require__.b).href,opts),"size-small":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/size-small.svg"),__webpack_require__.b).href,opts),"spline-cubic":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/spline-cubic.svg"),__webpack_require__.b).href,opts),"spline-line":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/spline-line.svg"),__webpack_require__.b).href,opts),"stack-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/stack-horizontal.svg"),__webpack_require__.b).href,opts),"stack-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/stack-vertical.svg"),__webpack_require__.b).href,opts),"status-offline":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/status-offline.svg"),__webpack_require__.b).href,opts),"status-online":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/status-online.svg"),__webpack_require__.b).href,opts),"stretch-horizontal":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/stretch-horizontal.svg"),__webpack_require__.b).href,opts),"stretch-vertical":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/stretch-vertical.svg"),__webpack_require__.b).href,opts),"text-align-center":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/text-align-center.svg"),__webpack_require__.b).href,opts),"text-align-justify":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/text-align-justify.svg"),__webpack_require__.b).href,opts),"text-align-left":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/text-align-left.svg"),__webpack_require__.b).href,opts),"text-align-right":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/text-align-right.svg"),__webpack_require__.b).href,opts),"tool-arrow":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-arrow.svg"),__webpack_require__.b).href,opts),"tool-embed":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-embed.svg"),__webpack_require__.b).href,opts),"tool-eraser":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-eraser.svg"),__webpack_require__.b).href,opts),"tool-frame":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-frame.svg"),__webpack_require__.b).href,opts),"tool-hand":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-hand.svg"),__webpack_require__.b).href,opts),"tool-highlight":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-highlight.svg"),__webpack_require__.b).href,opts),"tool-laser":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-laser.svg"),__webpack_require__.b).href,opts),"tool-line":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-line.svg"),__webpack_require__.b).href,opts),"tool-media":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-media.svg"),__webpack_require__.b).href,opts),"tool-note":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-note.svg"),__webpack_require__.b).href,opts),"tool-pencil":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-pencil.svg"),__webpack_require__.b).href,opts),"tool-pointer":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-pointer.svg"),__webpack_require__.b).href,opts),"tool-text":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/tool-text.svg"),__webpack_require__.b).href,opts),trash:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/trash.svg"),__webpack_require__.b).href,opts),"triangle-down":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/triangle-down.svg"),__webpack_require__.b).href,opts),"triangle-up":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/triangle-up.svg"),__webpack_require__.b).href,opts),twitter:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/twitter.svg"),__webpack_require__.b).href,opts),undo:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/undo.svg"),__webpack_require__.b).href,opts),ungroup:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/ungroup.svg"),__webpack_require__.b).href,opts),"unlock-small":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/unlock-small.svg"),__webpack_require__.b).href,opts),unlock:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/unlock.svg"),__webpack_require__.b).href,opts),"vertical-align-center":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/vertical-align-center.svg"),__webpack_require__.b).href,opts),"vertical-align-end":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/vertical-align-end.svg"),__webpack_require__.b).href,opts),"vertical-align-start":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/vertical-align-start.svg"),__webpack_require__.b).href,opts),visible:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/visible.svg"),__webpack_require__.b).href,opts),"warning-triangle":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/warning-triangle.svg"),__webpack_require__.b).href,opts),"zoom-in":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/zoom-in.svg"),__webpack_require__.b).href,opts),"zoom-out":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/icons/icon/zoom-out.svg"),__webpack_require__.b).href,opts)},translations:{ar:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ar.json"),__webpack_require__.b).href,opts),ca:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ca.json"),__webpack_require__.b).href,opts),da:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/da.json"),__webpack_require__.b).href,opts),de:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/de.json"),__webpack_require__.b).href,opts),en:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/en.json"),__webpack_require__.b).href,opts),es:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/es.json"),__webpack_require__.b).href,opts),fa:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/fa.json"),__webpack_require__.b).href,opts),fi:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/fi.json"),__webpack_require__.b).href,opts),fr:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/fr.json"),__webpack_require__.b).href,opts),gl:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/gl.json"),__webpack_require__.b).href,opts),he:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/he.json"),__webpack_require__.b).href,opts),"hi-in":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/hi-in.json"),__webpack_require__.b).href,opts),hu:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/hu.json"),__webpack_require__.b).href,opts),it:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/it.json"),__webpack_require__.b).href,opts),ja:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ja.json"),__webpack_require__.b).href,opts),"ko-kr":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ko-kr.json"),__webpack_require__.b).href,opts),ku:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ku.json"),__webpack_require__.b).href,opts),languages:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/languages.json"),__webpack_require__.b).href,opts),main:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/main.json"),__webpack_require__.b).href,opts),my:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/my.json"),__webpack_require__.b).href,opts),ne:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ne.json"),__webpack_require__.b).href,opts),no:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/no.json"),__webpack_require__.b).href,opts),pl:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/pl.json"),__webpack_require__.b).href,opts),"pt-br":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/pt-br.json"),__webpack_require__.b).href,opts),"pt-pt":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/pt-pt.json"),__webpack_require__.b).href,opts),ro:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ro.json"),__webpack_require__.b).href,opts),ru:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/ru.json"),__webpack_require__.b).href,opts),sv:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/sv.json"),__webpack_require__.b).href,opts),te:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/te.json"),__webpack_require__.b).href,opts),th:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/th.json"),__webpack_require__.b).href,opts),tr:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/tr.json"),__webpack_require__.b).href,opts),uk:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/uk.json"),__webpack_require__.b).href,opts),vi:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/vi.json"),__webpack_require__.b).href,opts),"zh-cn":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/zh-cn.json"),__webpack_require__.b).href,opts),"zh-tw":formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/translations/zh-tw.json"),__webpack_require__.b).href,opts)},embedIcons:{codepen:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/codepen.png"),__webpack_require__.b).href,opts),codesandbox:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/codesandbox.png"),__webpack_require__.b).href,opts),excalidraw:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/excalidraw.png"),__webpack_require__.b).href,opts),felt:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/felt.png"),__webpack_require__.b).href,opts),figma:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/figma.png"),__webpack_require__.b).href,opts),github_gist:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/github_gist.png"),__webpack_require__.b).href,opts),google_calendar:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/google_calendar.png"),__webpack_require__.b).href,opts),google_maps:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/google_maps.png"),__webpack_require__.b).href,opts),google_slides:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/google_slides.png"),__webpack_require__.b).href,opts),observable:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/observable.png"),__webpack_require__.b).href,opts),replit:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/replit.png"),__webpack_require__.b).href,opts),scratch:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/scratch.png"),__webpack_require__.b).href,opts),spotify:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/spotify.png"),__webpack_require__.b).href,opts),tldraw:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/tldraw.png"),__webpack_require__.b).href,opts),val_town:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/val_town.png"),__webpack_require__.b).href,opts),vimeo:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/vimeo.png"),__webpack_require__.b).href,opts),youtube:formatAssetUrl(new URL(__webpack_require__("./node_modules/@tldraw/assets/embed-icons/youtube.png"),__webpack_require__.b).href,opts)}}}__webpack_require__.d(__webpack_exports__,{o:()=>getAssetUrlsByMetaUrl})},"./node_modules/@tldraw/editor/dist-esm/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KDN:()=>ANIMATION_MEDIUM_MS,uNM:()=>Arc2d,ZJj:()=>ArrowShapeArrowheadEndStyle,TAC:()=>ArrowShapeArrowheadStartStyle,Ykc:()=>AssetRecordType,osW:()=>BaseBoxShapeTool,StR:()=>BaseBoxShapeUtil,NoK:()=>Box2d_Box2d,$Gp:()=>CAMERA_SLIDE_FRICTION,Xz7:()=>Canvas,EEY:()=>Circle2d,_e1:()=>CubicSpline2d,Skg:()=>DRAG_DISTANCE,R_W:()=>DefaultColorStyle,qit:()=>DefaultColorThemePalette,ciG:()=>DefaultDashStyle,pp9:()=>DefaultFillStyle,p64:()=>DefaultFontFamilies,Y8S:()=>DefaultFontStyle,XoM:()=>DefaultHorizontalAlignStyle,yx9:()=>DefaultSelectionBackground,ST$:()=>DefaultSizeStyle,HO5:()=>DefaultVerticalAlignStyle,Ljl:()=>EASINGS,Lu5:()=>EMBED_DEFINITIONS,Ibj:()=>EPSILON,WN4:()=>Edge2d,rpf:()=>Ellipse2d,CsX:()=>ErrorScreen,Zuj:()=>GeoShapeGeoStyle,mqq:()=>Group2d,iFn:()=>HASH_PATTERN_ZOOM_NAMES,wMU:()=>HIT_TEST_MARGIN,G7H:()=>HTMLContainer,a2c:()=>LANGUAGES,t88:()=>LineShapeSplineStyle,a_T:()=>LoadingScreen,Etb:()=>MAX_PAGES,sZM:()=>MAX_ZOOM,yX5:()=>Matrix2d,xeI:()=>MediaHelpers,PI:()=>utils_PI,yoY:()=>utils_PI2,ezX:()=>PageRecordType,bMZ:()=>PngHelpers,wWH:()=>Polygon2d,qvd:()=>Polyline2d,zc7:()=>Rectangle2d,dvh:()=>SIN,gkc:()=>SVGContainer,PIN:()=>ShapeIndicator,EeJ:()=>ShapeUtil,otj:()=>SharedStyleMap,ihl:()=>Stadium2d,nui:()=>StateNode,T:()=>validation_namespaceObject,gc0:()=>TAU,gRN:()=>TldrawEditor,GF3:()=>Vec2d_Vec2d,_cv:()=>WeakMapCache,CcU:()=>angleDelta,ZmI:()=>applyRotationToSnapshotShapes,C2u:()=>approximately,_G0:()=>areAnglesCompatible,VmQ:()=>arrowShapeMigrations,si8:()=>arrowShapeProps,hu8:()=>assert,Y8W:()=>average,h9n:()=>bookmarkShapeMigrations,qU:()=>bookmarkShapeProps,f5g:()=>canonicalizeRotation,uZ5:()=>clamp,VK_:()=>clockwiseAngleDist,oA$:()=>compact,F17:()=>createShapeId,DsO:()=>debounce,hR1:()=>debugFlags,p$x:()=>deepCopy,Htt:()=>degreesToRadians,_l9:()=>drawShapeMigrations,wu8:()=>drawShapeProps,BF8:()=>embedShapeMigrations,gBS:()=>embedShapePermissionDefaults,DWN:()=>embedShapeProps,VHO:()=>featureFlags,gRP:()=>frameShapeMigrations,k7F:()=>frameShapeProps,P3D:()=>geoShapeMigrations,eGT:()=>geoShapeProps,QsC:()=>getArrowTerminalsInArrowSpace,YoS:()=>getArrowheadPathForType,LpX:()=>getCursor,dzh:()=>getCurvedArrowHandlePath,y6M:()=>getDefaultColorTheme,jKo:()=>getHashForString,_LC:()=>getIndexAbove,Xgj:()=>getIndexBelow,eIg:()=>getIndexBetween,H$$:()=>getIndices,XDj:()=>getPointOnCircle,YyG:()=>getPointerInfo,OeO:()=>getPolygonVertices,oxh:()=>getRotationSnapshot,t9i:()=>getSolidCurvedArrowPath,N7h:()=>getSolidStraightArrowPath,LPY:()=>getStarBounds,$wX:()=>getStraightArrowHandlePath,RKM:()=>getSvgPathFromPoints,WlM:()=>hardResetEditor,J14:()=>highlightShapeMigrations,VWE:()=>highlightShapeProps,y59:()=>imageShapeMigrations,FcS:()=>imageShapeProps,GcE:()=>intersectLineSegmentPolyline,tYe:()=>intersectPolygonPolygon,GT8:()=>isNonNull,r5k:()=>isPageId,YTh:()=>isShapeId,jvJ:()=>isValidUrl,Z$Q:()=>last,FHS:()=>lineShapeMigrations,BGI:()=>lineShapeProps,Fa1:()=>minBy,fNR:()=>normalizeWheel,C_M:()=>noteShapeMigrations,m0n:()=>noteShapeProps,EPv:()=>objectMapEntries,xwP:()=>openWindow,RpK:()=>perimeterOfEllipse,Ofd:()=>pointInPolygon,UQR:()=>polygonsIntersect,Yku:()=>precise,PFJ:()=>preventDefault,XEs:()=>releasePointerCapture,Vkp:()=>rng,I5b:()=>setPointerCapture,nDY:()=>snapAngle,hl1:()=>reordering_sortByIndex,beA:()=>stopEventPropagation,v4J:()=>structuredClone,pLA:()=>textShapeMigrations,XBb:()=>textShapeProps,$ZD:()=>toDomPrecision,FHy:()=>toFixed,jas:()=>track,jj$:()=>uniq,ELf:()=>uniqueId,vcd:()=>useComputed,uK4:()=>useContainer,jE2:()=>useEditor,Q1i:()=>useIsCropping,Gv6:()=>useIsDarkMode,YzH:()=>useIsEditing,oOK:()=>usePresence,BKU:()=>useQuickReactor,Ie$:()=>useSelectionEvents,Hm2:()=>useTransform,HgN:()=>useValue,lY$:()=>videoShapeMigrations,p$I:()=>videoShapeProps});var validation_namespaceObject={};__webpack_require__.r(validation_namespaceObject),__webpack_require__.d(validation_namespaceObject,{ArrayOfValidator:()=>ArrayOfValidator,DictValidator:()=>DictValidator,ObjectValidator:()=>ObjectValidator,UnionValidator:()=>UnionValidator,ValidationError:()=>ValidationError,Validator:()=>Validator,any:()=>any,array:()=>array,arrayOf:()=>arrayOf,bigint:()=>bigint,boolean:()=>validation_boolean,dict:()=>dict,integer:()=>integer,jsonDict:()=>jsonDict,jsonValue:()=>jsonValue,literal:()=>literal,literalEnum:()=>literalEnum,model:()=>model,nonZeroInteger:()=>nonZeroInteger,nonZeroNumber:()=>nonZeroNumber,nullable:()=>nullable,number:()=>number,object:()=>object,optional:()=>optional,positiveInteger:()=>positiveInteger,positiveNumber:()=>positiveNumber,setEnum:()=>setEnum,string:()=>string,union:()=>union,unknown:()=>unknown,unknownObject:()=>unknownObject});class ArraySet{arraySize=0;array=Array(8);set=null;get isEmpty(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}add(elem){if(this.array){return-1===this.array.indexOf(elem)&&(this.arraySize<8?(this.array[this.arraySize]=elem,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(elem),!0))}if(this.set)return!this.set.has(elem)&&(this.set.add(elem),!0);throw new Error("no set or array")}remove(elem){if(this.array){const idx=this.array.indexOf(elem);return-1!==idx&&(this.array[idx]=void 0,this.arraySize--,idx!==this.arraySize&&(this.array[idx]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(elem)&&(this.set.delete(elem),!0);throw new Error("no set or array")}visit(visitor){if(this.array)for(let i=0;i<this.arraySize;i++){const elem=this.array[i];void 0!==elem&&visitor(elem)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(visitor)}}}function isChild(x){return x&&"object"==typeof x&&"parents"in x}function haveParentsChanged(child){for(let i=0,n=child.parents.length;i<n;i++)if(child.parents[i].__unsafe__getWithoutCapture(),child.parents[i].lastChangedEpoch!==child.parentEpochs[i])return!0;return!1}const detach=(parent,child)=>{if(parent.children.remove(child)&&parent.children.isEmpty&&isChild(parent))for(let i=0,n=parent.parents.length;i<n;i++)detach(parent.parents[i],parent)},attach=(parent,child)=>{if(parent.children.add(child)&&isChild(parent))for(let i=0,n=parent.parents.length;i<n;i++)attach(parent.parents[i],parent)};function equals(a,b){return a===b||Object.is(a,b)||Boolean(a&&b&&"function"==typeof a.equals&&a.equals(b))}const EMPTY_ARRAY=Object.freeze([]),tldrawStateGlobalKey=Symbol.for("__@tldraw/state__"),tldrawStateGlobal=globalThis;tldrawStateGlobal[tldrawStateGlobalKey]?console.error('Multiple versions of @tldraw/state detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of @tldraw/state is loaded.'):tldrawStateGlobal[tldrawStateGlobalKey]=!0;class CaptureStackFrame{constructor(below,child){this.below=below,this.child=child}offset=0;numNewParents=0;maybeRemoved}let stack=null;function startCapturingParents(child){stack=new CaptureStackFrame(stack,child)}function stopCapturingParents(){const frame=stack;stack=frame.below;if(frame.numNewParents>0||frame.offset!==frame.child.parents.length){for(let i=frame.offset;i<frame.child.parents.length;i++){const p=frame.child.parents[i];frame.child.parents.indexOf(p)>=frame.offset&&detach(p,frame.child)}if(frame.child.parents.length=frame.offset,frame.child.parentEpochs.length=frame.offset,stack?.maybeRemoved)for(let i=0;i<stack.maybeRemoved.length;i++){const maybeRemovedParent=stack.maybeRemoved[i];-1===frame.child.parents.indexOf(maybeRemovedParent)&&detach(maybeRemovedParent,frame.child)}}}function maybeCaptureParent(p){if(stack){const idx=stack.child.parents.indexOf(p);if(idx<0&&(stack.numNewParents++,stack.child.isActivelyListening&&attach(p,stack.child)),idx<0||idx>=stack.offset){if(idx!==stack.offset&&idx>0){const maybeRemovedParent=stack.child.parents[stack.offset];stack.maybeRemoved?-1===stack.maybeRemoved.indexOf(maybeRemovedParent)&&stack.maybeRemoved.push(maybeRemovedParent):stack.maybeRemoved=[maybeRemovedParent]}stack.child.parents[stack.offset]=p,stack.child.parentEpochs[stack.offset]=p.lastChangedEpoch,stack.offset++}}}const RESET_VALUE=Symbol("RESET_VALUE");class HistoryBuffer{constructor(capacity){this.capacity=capacity,this.buffer=new Array(capacity)}index=0;buffer;pushEntry(lastComputedEpoch,currentEpoch,diff){void 0!==diff&&(diff!==RESET_VALUE?(this.buffer[this.index]=[lastComputedEpoch,currentEpoch,diff],this.index=(this.index+1)%this.capacity):this.clear())}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(sinceEpoch){const{index,capacity,buffer}=this;for(let i=0;i<capacity;i++){const offset=(index-1+capacity-i)%capacity,elem=buffer[offset];if(!elem)return RESET_VALUE;const[fromEpoch,toEpoch]=elem;if(0===i&&sinceEpoch>=toEpoch)return[];if(fromEpoch<=sinceEpoch&&sinceEpoch<toEpoch){const len=i+1,result=new Array(len);for(let j=0;j<len;j++)result[j]=buffer[(offset+j)%capacity][2];return result}}return RESET_VALUE}}let globalEpoch=0,globalIsReacting=!1;class Transaction{constructor(parent){this.parent=parent}initialAtomValues=new Map;get isRoot(){return null===this.parent}commit(){if(this.isRoot){const atoms=this.initialAtomValues;this.initialAtomValues=new Map,flushChanges(atoms.keys())}else this.initialAtomValues.forEach(((value,atom)=>{this.parent.initialAtomValues.has(atom)||this.parent.initialAtomValues.set(atom,value)}))}abort(){globalEpoch++,this.initialAtomValues.forEach(((value,atom)=>{atom.set(value),atom.historyBuffer?.clear()})),this.commit()}}function flushChanges(atoms){if(globalIsReacting)throw new Error("cannot change atoms during reaction cycle");try{globalIsReacting=!0;const reactors=new Set,traverse=node=>{node.lastTraversedEpoch!==globalEpoch&&(node.lastTraversedEpoch=globalEpoch,"maybeScheduleEffect"in node?reactors.add(node):node.children.visit(traverse))};for(const atom of atoms)atom.children.visit(traverse);for(const r of reactors)r.maybeScheduleEffect()}finally{globalIsReacting=!1}}let currentTransaction=null;function transact(fn){return currentTransaction?fn():function transaction(fn){const txn=new Transaction(currentTransaction);currentTransaction=txn;try{let rollback=!1;const result=fn((()=>rollback=!0));return rollback?txn.abort():txn.commit(),result}catch(e){throw txn.abort(),e}finally{currentTransaction=currentTransaction.parent}}(fn)}class Atom_Atom{constructor(name,current,options){this.name=name,this.current=current,this.isEqual=options?.isEqual??null,options&&(options.historyLength&&(this.historyBuffer=new HistoryBuffer(options.historyLength)),this.computeDiff=options.computeDiff)}isEqual;computeDiff;lastChangedEpoch=globalEpoch;children=new ArraySet;historyBuffer;__unsafe__getWithoutCapture(){return this.current}get value(){return maybeCaptureParent(this),this.current}set(value,diff){if(this.isEqual?.(this.current,value)??equals(this.current,value))return this.current;!function advanceGlobalEpoch(){globalEpoch++}(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,globalEpoch,diff??this.computeDiff?.(this.current,value,this.lastChangedEpoch,globalEpoch)??RESET_VALUE),this.lastChangedEpoch=globalEpoch;const oldValue=this.current;return this.current=value,function atomDidChange(atom,previousValue){currentTransaction?currentTransaction.initialAtomValues.has(atom)||currentTransaction.initialAtomValues.set(atom,previousValue):flushChanges([atom])}(this,oldValue),value}update(updater){return this.set(updater(this.current))}getDiffSince(epoch){return maybeCaptureParent(this),epoch>=this.lastChangedEpoch?EMPTY_ARRAY:this.historyBuffer?.getChangesSince(epoch)??RESET_VALUE}}function Atom_atom(name,initialValue,options){return new Atom_Atom(name,initialValue,options)}const UNINITIALIZED=Symbol("UNINITIALIZED"),isUninitialized=value=>value===UNINITIALIZED;class WithDiff{constructor(value,diff){this.value=value,this.diff=diff}}function withDiff(value,diff){return new WithDiff(value,diff)}class Computed_Computed{constructor(name,derive,options){this.name=name,this.derive=derive,options?.historyLength&&(this.historyBuffer=new HistoryBuffer(options.historyLength)),this.computeDiff=options?.computeDiff,this.isEqual=options?.isEqual??equals}lastChangedEpoch=-1;lastTraversedEpoch=-1;lastCheckedEpoch=-1;parents=[];parentEpochs=[];children=new ArraySet;get isActivelyListening(){return!this.children.isEmpty}historyBuffer;state=UNINITIALIZED;computeDiff;isEqual;__unsafe__getWithoutCapture(){const isNew=-1===this.lastChangedEpoch;if(!(isNew||this.lastCheckedEpoch!==globalEpoch&&haveParentsChanged(this)))return this.lastCheckedEpoch=globalEpoch,this.state;try{startCapturingParents(this);const result=this.derive(this.state,this.lastCheckedEpoch),newState=result instanceof WithDiff?result.value:result;if(this.state===UNINITIALIZED||!this.isEqual(newState,this.state)){if(this.historyBuffer&&!isNew){const diff=result instanceof WithDiff?result.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,globalEpoch,diff??this.computeDiff?.(this.state,newState,this.lastCheckedEpoch,globalEpoch)??RESET_VALUE)}this.lastChangedEpoch=globalEpoch,this.state=newState}return this.lastCheckedEpoch=globalEpoch,this.state}finally{stopCapturingParents()}}get value(){const value=this.__unsafe__getWithoutCapture();return maybeCaptureParent(this),value}getDiffSince(epoch){return this.value,epoch>=this.lastChangedEpoch?EMPTY_ARRAY:this.historyBuffer?.getChangesSince(epoch)??RESET_VALUE}}function computedAnnotation(options={},_target,key,descriptor){const originalMethod=descriptor.get,derivationKey=Symbol.for("__@tldraw/state__computed__"+key);return descriptor.get=function(){let d=this[derivationKey];return d||(d=new Computed_Computed(key,originalMethod.bind(this),options),Object.defineProperty(this,derivationKey,{enumerable:!1,configurable:!1,writable:!1,value:d})),d.value},descriptor}function Computed_computed(){if(1===arguments.length){const options=arguments[0];return(target,key,descriptor)=>computedAnnotation(options,0,key,descriptor)}return"string"==typeof arguments[0]?new Computed_Computed(arguments[0],arguments[1],arguments[2]):computedAnnotation(void 0,0,arguments[1],arguments[2])}class EffectScheduler_EffectScheduler{constructor(name,runEffect,options){this.name=name,this.runEffect=runEffect,this._scheduleEffect=options?.scheduleEffect}_isActivelyListening=!1;get isActivelyListening(){return this._isActivelyListening}lastTraversedEpoch=-1;lastReactedEpoch=-1;_scheduleCount=0;get scheduleCount(){return this._scheduleCount}parentEpochs=[];parents=[];_scheduleEffect;maybeScheduleEffect(){this._isActivelyListening&&this.lastReactedEpoch!==globalEpoch&&(!this.parents.length||haveParentsChanged(this)?this.scheduleEffect():this.lastReactedEpoch=globalEpoch)}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}maybeExecute=()=>{this._isActivelyListening&&this.execute()};attach(){this._isActivelyListening=!0;for(let i=0,n=this.parents.length;i<n;i++)attach(this.parents[i],this)}detach(){this._isActivelyListening=!1;for(let i=0,n=this.parents.length;i<n;i++)detach(this.parents[i],this)}execute(){try{startCapturingParents(this);const result=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=globalEpoch,result}finally{stopCapturingParents()}}}function react(name,fn,options){const scheduler=new EffectScheduler_EffectScheduler(name,fn,options);return scheduler.attach(),scheduler.scheduleEffect(),()=>{scheduler.detach()}}var node_modules_react=__webpack_require__("./node_modules/react/index.js");function useStateTracking(name,render){const renderRef=node_modules_react.useRef(render);renderRef.current=render;const[scheduler,subscribe,getSnapshot]=node_modules_react.useMemo((()=>{let scheduleUpdate=null;const scheduler2=new EffectScheduler_EffectScheduler(`useStateTracking(${name})`,(()=>renderRef.current?.()),{scheduleEffect(){scheduleUpdate?.()}});return[scheduler2,cb=>(scheduleUpdate=cb,()=>{scheduleUpdate=null}),()=>scheduler2.scheduleCount]}),[name]);return node_modules_react.useSyncExternalStore(subscribe,getSnapshot,getSnapshot),node_modules_react.useEffect((()=>(scheduler.attach(),scheduler.maybeScheduleEffect(),()=>{scheduler.detach()})),[scheduler]),scheduler.execute()}const ProxyHandlers={apply:(Component,thisArg,argumentsList)=>useStateTracking(Component.displayName??Component.name??"tracked(???)",(()=>Component.apply(thisArg,argumentsList)))},ReactMemoSymbol=Symbol.for("react.memo"),ReactForwardRefSymbol=Symbol.for("react.forward_ref");function track(baseComponent){let compare=null;const $$typeof=baseComponent.$$typeof;return $$typeof===ReactMemoSymbol&&(compare=(baseComponent=baseComponent.type).compare),$$typeof===ReactForwardRefSymbol?(0,node_modules_react.memo)((0,node_modules_react.forwardRef)(new Proxy(baseComponent.render,ProxyHandlers))):(0,node_modules_react.memo)(new Proxy(baseComponent,ProxyHandlers),compare)}function useComputed(){const name=arguments[0],compute=arguments[1],opts=3===arguments.length?void 0:arguments[2],deps=3===arguments.length?arguments[2]:arguments[3];return(0,node_modules_react.useMemo)((()=>Computed_computed(`useComputed(${name})`,compute,opts)),deps)}function useQuickReactor(name,reactFn,deps=EMPTY_ARRAY){(0,node_modules_react.useEffect)((()=>{const scheduler=new EffectScheduler_EffectScheduler(name,reactFn);return scheduler.attach(),scheduler.execute(),()=>{scheduler.detach()}}),deps)}function useValue(){const args=arguments,deps=3===args.length?args[2]:[args[0]],name=3===args.length?args[0]:`useValue(${args[0].name})`,isInRender=(0,node_modules_react.useRef)(!0);isInRender.current=!0;const $val=(0,node_modules_react.useMemo)((()=>1===args.length?args[0]:Computed_computed(name,(()=>{if(isInRender.current)return args[1]();try{return args[1]()}catch{return{}}}))),deps);try{const{subscribe,getSnapshot}=(0,node_modules_react.useMemo)((()=>({subscribe:listen=>react(`useValue(${name})`,(()=>{$val.value,listen()})),getSnapshot:()=>$val.value})),[$val]);return(0,node_modules_react.useSyncExternalStore)(subscribe,getSnapshot,getSnapshot)}finally{isInRender.current=!1}}class IncrementalSetConstructor{constructor(previousValue){this.previousValue=previousValue}nextValue;diff;get(){const numRemoved=this.diff?.removed?.size??0,numAdded=this.diff?.added?.size??0;if(0!==numRemoved||0!==numAdded)return{value:this.nextValue,diff:this.diff}}_add(item,wasAlreadyPresent){this.nextValue??=new Set(this.previousValue),this.nextValue.add(item),this.diff??={},wasAlreadyPresent?this.diff.removed?.delete(item):(this.diff.added??=new Set,this.diff.added.add(item))}add(item){const wasAlreadyPresent=this.previousValue.has(item);if(wasAlreadyPresent){const wasRemoved=this.diff?.removed?.has(item);if(!wasRemoved)return;return this._add(item,wasAlreadyPresent)}const isCurrentlyPresent=this.nextValue?.has(item);isCurrentlyPresent||this._add(item,wasAlreadyPresent)}_remove(item,wasAlreadyPresent){this.nextValue??=new Set(this.previousValue),this.nextValue.delete(item),this.diff??={},wasAlreadyPresent?(this.diff.removed??=new Set,this.diff.removed.add(item)):this.diff.added?.delete(item)}remove(item){const wasAlreadyPresent=this.previousValue.has(item);if(!wasAlreadyPresent){const wasAdded=this.diff?.added?.has(item);if(!wasAdded)return;return this._remove(item,wasAlreadyPresent)}const hasAlreadyBeenRemoved=this.diff?.removed?.has(item);hasAlreadyBeenRemoved||this._remove(item,wasAlreadyPresent)}}function dedupe(input,equals){const result=[];mainLoop:for(const item of input){for(const existing of result)if(equals?equals(item,existing):item===existing)continue mainLoop;result.push(item)}return result}function compact(arr){return arr.filter((i=>null!=i))}function last(arr){return arr[arr.length-1]}function minBy(arr,fn){let min,minVal=1/0;for(const item of arr){const val=fn(item);val<minVal&&(min=item,minVal=val)}return min}function omitFromStackTrace(fn){const wrappedFn=(...args)=>{try{return fn(...args)}catch(error){throw error instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(error,wrappedFn),error}};return wrappedFn}function exhaustiveSwitchError(value,property){const debugValue=property&&value&&"object"==typeof value&&property in value?value[property]:value;throw new Error(`Unknown switch case ${debugValue}`)}const assert=omitFromStackTrace(((value,message)=>{if(!value)throw new Error(message||"Assertion Error")})),assertExists=omitFromStackTrace(((value,message)=>{if(null==value)throw new Error(message??"value must be defined");return value}));function debounce(callback,wait){let state;const fn=(...args)=>(state||(state={},state.promise=new Promise(((resolve,reject)=>{state.resolve=resolve,state.reject=reject}))),clearTimeout(state.timeout),state.latestArgs=args,state.timeout=setTimeout((()=>{const s=state;state=void 0;try{s.resolve(callback(...s.latestArgs))}catch(e){s.reject(e)}}),wait),state.promise);return fn.cancel=()=>{state&&clearTimeout(state.timeout)},fn}const annotationsByError=new WeakMap;function annotateError(error,annotations){if("object"!=typeof error||null===error)return;let currentAnnotations=annotationsByError.get(error);currentAnnotations||(currentAnnotations={tags:{},extras:{}},annotationsByError.set(error,currentAnnotations)),annotations.tags&&(currentAnnotations.tags={...currentAnnotations.tags,...annotations.tags}),annotations.extras&&(currentAnnotations.extras={...currentAnnotations.extras,...annotations.extras})}function getHashForString(string){let hash=0;for(let i=0;i<string.length;i++)hash=(hash<<5)-hash+string.charCodeAt(i),hash|=0;return hash+""}class FileHelpers{static async base64ToFile(dataURL){return fetch(dataURL).then((function(result){return result.arrayBuffer()}))}static async fileToBase64(file){return await new Promise(((resolve,reject)=>{if(file){const reader=new FileReader;reader.readAsDataURL(file),reader.onload=()=>resolve(reader.result),reader.onerror=error=>reject(error),reader.onabort=error=>reject(error)}}))}}let TABLE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(TABLE=new Int32Array(TABLE));class PngHelpers{static isPng(view,offset){return 137===view.getUint8(offset+0)&&80===view.getUint8(offset+1)&&78===view.getUint8(offset+2)&&71===view.getUint8(offset+3)&&13===view.getUint8(offset+4)&&10===view.getUint8(offset+5)&&26===view.getUint8(offset+6)&&10===view.getUint8(offset+7)}static getChunkType(view,offset){return[String.fromCharCode(view.getUint8(offset)),String.fromCharCode(view.getUint8(offset+1)),String.fromCharCode(view.getUint8(offset+2)),String.fromCharCode(view.getUint8(offset+3))].join("")}static readChunks(view,offset=0){const chunks={};if(!PngHelpers.isPng(view,offset))throw new Error("Not a PNG");for(offset+=8;offset<=view.buffer.byteLength;){const start=offset,len=view.getInt32(offset);offset+=4;const chunkType=PngHelpers.getChunkType(view,offset);if("IDAT"===chunkType&&chunks[chunkType])offset+=len+4+4;else{if("IEND"===chunkType)break;chunks[chunkType]={start,dataOffset:offset+4,size:len},offset+=len+4+4}}return chunks}static parsePhys(view,offset){return{ppux:view.getUint32(offset),ppuy:view.getUint32(offset+4),unit:view.getUint8(offset+4)}}static findChunk(view,type){return PngHelpers.readChunks(view)[type]}static setPhysChunk(view,dpr=1,options){let offset=46,size=0;const res1=PngHelpers.findChunk(view,"pHYs");res1&&(offset=res1.start,size=res1.size);const res2=PngHelpers.findChunk(view,"IDAT");res2&&(offset=res2.start,size=0);const pHYsData=new ArrayBuffer(21),pHYsDataView=new DataView(pHYsData);pHYsDataView.setUint32(0,9),pHYsDataView.setUint8(4,"p".charCodeAt(0)),pHYsDataView.setUint8(5,"H".charCodeAt(0)),pHYsDataView.setUint8(6,"Y".charCodeAt(0)),pHYsDataView.setUint8(7,"s".charCodeAt(0));pHYsDataView.setInt32(8,2835.5*dpr),pHYsDataView.setInt32(12,2835.5*dpr),pHYsDataView.setInt8(16,1);const crcBit=new Uint8Array(pHYsData.slice(4,17));pHYsDataView.setInt32(17,((current,previous)=>{let crc2=0===previous?0:-1^~~previous;for(let index=0;index<current.length;index++)crc2=TABLE[255&(crc2^current[index])]^crc2>>>8;return-1^crc2})(crcBit));const startBuf=view.buffer.slice(0,offset),endBuf=view.buffer.slice(offset+size);return new Blob([startBuf,pHYsData,endBuf],options)}}class MediaHelpers{static async getVideoSizeFromSrc(src){return await new Promise(((resolve,reject)=>{const video=document.createElement("video");video.onloadeddata=()=>resolve({w:video.videoWidth,h:video.videoHeight}),video.onerror=e=>{console.error(e),reject(new Error("Could not get video size"))},video.crossOrigin="anonymous",video.src=src}))}static async getImageSizeFromSrc(dataURL){return await new Promise(((resolve,reject)=>{const img=new Image;img.onload=async()=>{try{const blob=await FileHelpers.base64ToFile(dataURL),view=new DataView(blob);if(PngHelpers.isPng(view,0)){const physChunk=PngHelpers.findChunk(view,"pHYs");if(physChunk){const physData=PngHelpers.parsePhys(view,physChunk.dataOffset);if(0===physData.unit&&physData.ppux===physData.ppuy){const pixelRatio=Math.round(physData.ppux/2834.5);return void resolve({w:img.width/pixelRatio,h:img.height/pixelRatio})}}}resolve({w:img.width,h:img.height})}catch(err){console.error(err),resolve({w:img.width,h:img.height})}},img.onerror=err=>{console.error(err),reject(new Error("Could not get image size"))},img.crossOrigin="anonymous",img.src=dataURL}))}}function rng(seed=""){let x=0,y=0,z=0,w=0;function next(){const t=x^x<<11;return x=y,y=z,z=w,w^=(w>>>19^t^t>>>8)>>>0,w/4294967296*2}for(let k=0;k<seed.length+64;k++)x^=0|seed.charCodeAt(k),next();return next}function modulate(value,rangeA,rangeB,clamp=!1){const[fromLow,fromHigh]=rangeA,[v0,v1]=rangeB,result=v0+(value-fromLow)/(fromHigh-fromLow)*(v1-v0);return clamp?v0<v1?Math.max(Math.min(result,v1),v0):Math.max(Math.min(result,v0),v1):result}function object_hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function getOwnProperty(obj,key){if(object_hasOwnProperty(obj,key))return obj[key]}function deepCopy(obj){if(!obj)return obj;if(Array.isArray(obj)){const arr=[],length=obj.length;for(let i=0;i<length;i++)arr.push(deepCopy(obj[i]));return arr}if("object"==typeof obj){const keys=Object.keys(obj),length=keys.length,newObject={};for(let i=0;i<length;i++){const key=keys[i];newObject[key]=deepCopy(obj[key])}return newObject}return obj}function objectMapKeys(object){return Object.keys(object)}function objectMapValues(object){return Object.values(object)}function objectMapEntries(object){return Object.entries(object)}function objectMapFromEntries(entries){return Object.fromEntries(entries)}function filterEntries(object,predicate){const result={};let didChange=!1;for(const[key,value]of objectMapEntries(object))predicate(key,value)?result[key]=value:didChange=!0;return didChange?result:object}function mapObjectMapValues(object,mapper){const result={};for(const[key,value]of objectMapEntries(object)){const newValue=mapper(key,value);result[key]=newValue}return result}var process=__webpack_require__("./node_modules/process/browser.js");const isTest=()=>void 0!==process&&!1,rafQueue=[],tick=()=>{const queue=rafQueue.splice(0,rafQueue.length);for(const fn of queue)fn()};let raf_frame;function raf(){raf_frame||(raf_frame=requestAnimationFrame((()=>{raf_frame=void 0,tick()})))}function sortById(a,b){return a.id>b.id?1:-1}const VALID_URL_REGEX=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function isValidUrl(url){return VALID_URL_REGEX.test(url)}function isNonNull(value){return null!==value}const structuredClone="undefined"!=typeof window&&window.structuredClone?window.structuredClone:i=>i?JSON.parse(JSON.stringify(i)):i;let nanoid=(size=21)=>crypto.getRandomValues(new Uint8Array(size)).reduce(((id,byte)=>id+=(byte&=63)<36?byte.toString(36):byte<62?(byte-26).toString(36).toUpperCase():byte>62?"-":"_"),"");class RecordType{constructor(typeName,config){this.typeName=typeName,this.createDefaultProperties=config.createDefaultProperties,this.migrations=config.migrations,this.validator=config.validator??{validate:r=>r},this.scope=config.scope??"document"}createDefaultProperties;migrations;validator;scope;create(properties){const result={...this.createDefaultProperties(),id:this.createId()};for(const[k,v]of Object.entries(properties))void 0!==v&&(result[k]=v);return result.typeName=this.typeName,result}clone(record){return{...structuredClone(record),id:this.createId()}}createId(customUniquePart){return this.typeName+":"+(customUniquePart??nanoid())}createCustomId(id){return this.typeName+":"+id}parseId(id){if(!this.isId(id))throw new Error(`ID "${id}" is not a valid ID for type "${this.typeName}"`);return id.slice(this.typeName.length+1)}isInstance=record=>record?.typeName===this.typeName;isId(id){if(!id)return!1;for(let i=0;i<this.typeName.length;i++)if(id[i]!==this.typeName[i])return!1;return":"===id[this.typeName.length]}withDefaultProperties(createDefaultProperties){return new RecordType(this.typeName,{createDefaultProperties,migrations:this.migrations,validator:this.validator,scope:this.scope})}validate(record){return this.validator.validate(record)}}function createRecordType(typeName,config){return new RecordType(typeName,{createDefaultProperties:()=>({}),migrations:config.migrations??{currentVersion:0,firstVersion:0,migrators:{}},validator:config.validator,scope:config.scope})}class Cache{items=new WeakMap;get(item,cb){return this.items.has(item)||this.items.set(item,cb(item)),this.items.get(item)}}var lodash_isequal=__webpack_require__("./node_modules/lodash.isequal/index.js"),lodash_isequal_default=__webpack_require__.n(lodash_isequal);function objectMatchesQuery(query,object){for(const[key,_matcher]of Object.entries(query)){const matcher=_matcher,value=object[key];if("eq"in matcher&&value!==matcher.eq)return!1;if("neq"in matcher&&value===matcher.neq)return!1;if("gt"in matcher&&("number"!=typeof value||value<=matcher.gt))return!1}return!0}function executeQuery(store,typeName,query){const matchIds=Object.fromEntries(Object.keys(query).map((key=>[key,new Set])));for(const[k,matcher]of Object.entries(query))if("eq"in matcher){const ids=store.index(typeName,k).value.get(matcher.eq);if(ids)for(const id of ids)matchIds[k].add(id)}else if("neq"in matcher){const index=store.index(typeName,k);for(const[value,ids]of index.value)if(value!==matcher.neq)for(const id of ids)matchIds[k].add(id)}else if("gt"in matcher){const index=store.index(typeName,k);for(const[value,ids]of index.value)if(value>matcher.gt)for(const id of ids)matchIds[k].add(id)}return function intersectSets(sets){if(0===sets.length)return new Set;const first=sets[0],rest=sets.slice(1),result=new Set;for(const val of first)rest.every((set=>set.has(val)))&&result.add(val);return result}(Object.values(matchIds))}class StoreQueries{constructor(atoms,history){this.atoms=atoms,this.history=history}indexCache=new Map;historyCache=new Map;filterHistory(typeName){if(this.historyCache.has(typeName))return this.historyCache.get(typeName);const filtered=Computed_computed("filterHistory:"+typeName,((lastValue,lastComputedEpoch)=>{if(isUninitialized(lastValue))return this.history.value;const diff=this.history.getDiffSince(lastComputedEpoch);if(diff===RESET_VALUE)return this.history.value;const res={added:{},removed:{},updated:{}};let numAdded=0,numRemoved=0,numUpdated=0;for(const changes of diff){for(const added of objectMapValues(changes.added))if(added.typeName===typeName)if(res.removed[added.id]){const original=res.removed[added.id];delete res.removed[added.id],numRemoved--,original!==added&&(res.updated[added.id]=[original,added],numUpdated++)}else res.added[added.id]=added,numAdded++;for(const[from,to]of objectMapValues(changes.updated))to.typeName===typeName&&(res.added[to.id]?res.added[to.id]=to:res.updated[to.id]?res.updated[to.id]=[res.updated[to.id][0],to]:(res.updated[to.id]=[from,to],numUpdated++));for(const removed of objectMapValues(changes.removed))removed.typeName===typeName&&(res.added[removed.id]?(delete res.added[removed.id],numAdded--):res.updated[removed.id]?(res.removed[removed.id]=res.updated[removed.id][0],delete res.updated[removed.id],numUpdated--,numRemoved++):(res.removed[removed.id]=removed,numRemoved++))}return numAdded||numRemoved||numUpdated?withDiff(this.history.value,res):lastValue}),{historyLength:100});return this.historyCache.set(typeName,filtered),filtered}index(typeName,property){const cacheKey=typeName+":"+property;if(this.indexCache.has(cacheKey))return this.indexCache.get(cacheKey);const index=this.__uncached_createIndex(typeName,property);return this.indexCache.set(cacheKey,index),index}__uncached_createIndex(typeName,property){const typeHistory=this.filterHistory(typeName),fromScratch=()=>{typeHistory.value;const res=new Map;for(const atom of objectMapValues(this.atoms.value)){const record=atom.value;if(record.typeName===typeName){const value=record[property];res.has(value)||res.set(value,new Set),res.get(value).add(record.id)}}return res};return Computed_computed("index:"+typeName+":"+property,((prevValue,lastComputedEpoch)=>{if(isUninitialized(prevValue))return fromScratch();const history=typeHistory.getDiffSince(lastComputedEpoch);if(history===RESET_VALUE)return fromScratch();const setConstructors=new Map,add=(value,id)=>{let setConstructor=setConstructors.get(value);setConstructor||(setConstructor=new IncrementalSetConstructor(prevValue.get(value)??new Set)),setConstructor.add(id),setConstructors.set(value,setConstructor)},remove=(value,id)=>{let set=setConstructors.get(value);set||(set=new IncrementalSetConstructor(prevValue.get(value)??new Set)),set.remove(id),setConstructors.set(value,set)};for(const changes of history){for(const record of objectMapValues(changes.added))if(record.typeName===typeName){add(record[property],record.id)}for(const[from,to]of objectMapValues(changes.updated))if(to.typeName===typeName){const prev=from[property],next=to[property];prev!==next&&(remove(prev,to.id),add(next,to.id))}for(const record of objectMapValues(changes.removed))if(record.typeName===typeName){remove(record[property],record.id)}}let nextValue,nextDiff;for(const[value,setConstructor]of setConstructors){const result=setConstructor.get();result&&(nextValue||(nextValue=new Map(prevValue)),nextDiff||(nextDiff=new Map),0===result.value.size?nextValue.delete(value):nextValue.set(value,result.value),nextDiff.set(value,result.diff))}return nextValue&&nextDiff?withDiff(nextValue,nextDiff):prevValue}),{historyLength:100})}record(typeName,queryCreator=(()=>({})),name="record:"+typeName+(queryCreator?":"+queryCreator.toString():"")){const ids=this.ids(typeName,queryCreator,name);return Computed_computed(name,(()=>{for(const id of ids.value)return this.atoms.value[id]?.value}))}records(typeName,queryCreator=(()=>({})),name="records:"+typeName+(queryCreator?":"+queryCreator.toString():"")){const ids=this.ids(typeName,queryCreator,"ids:"+name);return Computed_computed(name,(()=>[...ids.value].map((id=>{const atom=this.atoms.value[id];if(!atom)throw new Error("no atom found for record id: "+id);return atom.value}))))}ids(typeName,queryCreator=(()=>({})),name="ids:"+typeName+(queryCreator?":"+queryCreator.toString():"")){const typeHistory=this.filterHistory(typeName),fromScratch=()=>{typeHistory.value;const query=queryCreator();return 0===Object.keys(query).length?new Set(objectMapValues(this.atoms.value).flatMap((v=>{const r=v.value;return r.typeName===typeName?r.id:[]}))):executeQuery(this,typeName,query)},fromScratchWithDiff=prevValue=>{const nextValue=fromScratch(),diff=function diffSets(prev,next){const result={};for(const val of next)prev.has(val)||(result.added??=new Set,result.added.add(val));for(const val of prev)next.has(val)||(result.removed??=new Set,result.removed.add(val));return result.added||result.removed?result:void 0}(prevValue,nextValue);return diff?withDiff(nextValue,diff):prevValue},cachedQuery=Computed_computed("ids_query:"+name,queryCreator,{isEqual:lodash_isequal_default()});return Computed_computed("query:"+name,((prevValue,lastComputedEpoch)=>{const query=cachedQuery.value;if(isUninitialized(prevValue))return fromScratch();if(lastComputedEpoch<cachedQuery.lastChangedEpoch)return fromScratchWithDiff(prevValue);const history=typeHistory.getDiffSince(lastComputedEpoch);if(history===RESET_VALUE)return fromScratchWithDiff(prevValue);const setConstructor=new IncrementalSetConstructor(prevValue);for(const changes of history){for(const added of objectMapValues(changes.added))added.typeName===typeName&&objectMatchesQuery(query,added)&&setConstructor.add(added.id);for(const[_,updated]of objectMapValues(changes.updated))updated.typeName===typeName&&(objectMatchesQuery(query,updated)?setConstructor.add(updated.id):setConstructor.remove(updated.id));for(const removed of objectMapValues(changes.removed))removed.typeName===typeName&&setConstructor.remove(removed.id)}const result=setConstructor.get();return result?withDiff(result.value,result.diff):prevValue}),{historyLength:50})}exec(typeName,query){const ids=executeQuery(this,typeName,query);if(0===ids.size)return EMPTY_ARRAY;const atoms=this.atoms.value;return[...ids].map((id=>atoms[id].value))}}class Store{id=nanoid();atoms=Atom_atom("store_atoms",{});history=Atom_atom("history",0,{historyLength:1e3});query=new StoreQueries(this.atoms,this.history);listeners=new Set;historyAccumulator=new HistoryAccumulator;historyReactor;schema;props;scopedTypes;constructor(config){const{initialData,schema}=config;this.schema=schema,this.props=config.props,initialData&&this.atoms.set(objectMapFromEntries(objectMapEntries(initialData).map((([id,record])=>[id,Atom_atom("atom:"+id,this.schema.validateRecord(this,record,"initialize",null))])))),this.historyReactor=function reactor(name,fn,options){const scheduler=new EffectScheduler_EffectScheduler(name,fn,options);return{scheduler,start:options2=>{const force=options2?.force??!1;scheduler.attach(),force?scheduler.scheduleEffect():scheduler.maybeScheduleEffect()},stop:()=>{scheduler.detach()}}}("Store.historyReactor",(()=>{this.history.value,this._flushHistory()}),{scheduleEffect:cb=>function throttledRaf(fn){if(isTest())return fn();rafQueue.includes(fn)||(rafQueue.push(fn),raf())}(cb)}),this.scopedTypes={document:new Set(objectMapValues(this.schema.types).filter((t=>"document"===t.scope)).map((t=>t.typeName))),session:new Set(objectMapValues(this.schema.types).filter((t=>"session"===t.scope)).map((t=>t.typeName))),presence:new Set(objectMapValues(this.schema.types).filter((t=>"presence"===t.scope)).map((t=>t.typeName)))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const entries=this.historyAccumulator.flush();for(const{changes,source}of entries){let instanceChanges=null,documentChanges=null,presenceChanges=null;for(const{onHistory,filters}of this.listeners)if("all"===filters.source||filters.source===source)if("all"!==filters.scope)if("document"===filters.scope){if(documentChanges??=this.filterChangesByScope(changes,"document"),!documentChanges)continue;onHistory({changes:documentChanges,source})}else if("session"===filters.scope){if(instanceChanges??=this.filterChangesByScope(changes,"session"),!instanceChanges)continue;onHistory({changes:instanceChanges,source})}else{if(presenceChanges??=this.filterChangesByScope(changes,"presence"),!presenceChanges)continue;onHistory({changes:presenceChanges,source})}else onHistory({changes,source})}}}filterChangesByScope(change,scope){const result={added:filterEntries(change.added,((_,r)=>this.scopedTypes[scope].has(r.typeName))),updated:filterEntries(change.updated,((_,r)=>this.scopedTypes[scope].has(r[1].typeName))),removed:filterEntries(change.removed,((_,r)=>this.scopedTypes[scope].has(r.typeName)))};return 0===Object.keys(result.added).length&&0===Object.keys(result.updated).length&&0===Object.keys(result.removed).length?null:result}updateHistory(changes){this.historyAccumulator.add({changes,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,changes)}validate(phase){this.allRecords().forEach((record=>this.schema.validateRecord(this,record,phase,null)))}onBeforeCreate;onAfterCreate;onBeforeChange;onAfterChange;onBeforeDelete;onAfterDelete;_runCallbacks=!0;put=(records,phaseOverride)=>{transact((()=>{const updates={},additions={},currentMap=this.atoms.__unsafe__getWithoutCapture();let record,map=null,didChange=!1;const beforeCreate=this.onBeforeCreate&&this._runCallbacks?this.onBeforeCreate:null,beforeUpdate=this.onBeforeChange&&this._runCallbacks?this.onBeforeChange:null,source=this.isMergingRemoteChanges?"remote":"user";for(let i=0,n=records.length;i<n;i++){record=records[i];const recordAtom=(map??currentMap)[record.id];if(recordAtom){beforeUpdate&&(record=beforeUpdate(recordAtom.value,record,source));const initialValue=recordAtom.__unsafe__getWithoutCapture();record=this.schema.validateRecord(this,record,phaseOverride??"updateRecord",initialValue),recordAtom.set(record);const finalValue=recordAtom.__unsafe__getWithoutCapture();initialValue!==finalValue&&(didChange=!0,updates[record.id]=[initialValue,finalValue])}else beforeCreate&&(record=beforeCreate(record,source)),didChange=!0,record=this.schema.validateRecord(this,record,phaseOverride??"createRecord",null),additions[record.id]=record,map||(map={...currentMap}),map[record.id]=Atom_atom("atom:"+record.id,record)}if(map&&this.atoms.set(map),didChange&&(this.updateHistory({added:additions,updated:updates,removed:{}}),this._runCallbacks)){const{onAfterCreate,onAfterChange}=this;onAfterCreate&&Object.values(additions).forEach((record2=>{onAfterCreate(record2,source)})),onAfterChange&&Object.values(updates).forEach((([from,to])=>{onAfterChange(from,to,source)}))}}))};remove=ids=>{transact((()=>{const cancelled=[],source=this.isMergingRemoteChanges?"remote":"user";if(this.onBeforeDelete&&this._runCallbacks)for(const id of ids){const atom2=this.atoms.__unsafe__getWithoutCapture()[id];atom2&&(!1===this.onBeforeDelete(atom2.value,source)&&cancelled.push(id))}let removed;if(this.atoms.update((atoms=>{let result;for(const id of ids)cancelled.includes(id)||id in atoms&&(result||(result={...atoms}),removed||(removed={}),delete result[id],removed[id]=atoms[id].value);return result??atoms})),removed&&(this.updateHistory({added:{},updated:{},removed}),this.onAfterDelete&&this._runCallbacks)){let record;for(let i=0,n=ids.length;i<n;i++)record=removed[ids[i]],record&&this.onAfterDelete(record,source)}}))};get=id=>this.atoms.value[id]?.value;unsafeGetWithoutCapture=id=>this.atoms.value[id]?.__unsafe__getWithoutCapture();serialize=(scope="document")=>{const result={};for(const[id,atom2]of objectMapEntries(this.atoms.value)){const record=atom2.value;("all"===scope||this.scopedTypes[scope].has(record.typeName))&&(result[id]=record)}return result};getSnapshot(scope="document"){return{store:this.serialize(scope),schema:this.schema.serialize()}}migrateSnapshot(snapshot){const migrationResult=this.schema.migrateStoreSnapshot(snapshot);if("error"===migrationResult.type)throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);return{store:migrationResult.value,schema:this.schema.serialize()}}loadSnapshot(snapshot){const migrationResult=this.schema.migrateStoreSnapshot(snapshot);if("error"===migrationResult.type)throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);transact((()=>{this.clear(),this.put(Object.values(migrationResult.value)),this.ensureStoreIsUsable()}))}allRecords=()=>objectMapValues(this.atoms.value).map((atom2=>atom2.value));clear=()=>{this.remove(objectMapKeys(this.atoms.value))};update=(id,updater)=>{const atom2=this.atoms.value[id];atom2?this.put([updater(atom2.__unsafe__getWithoutCapture())]):console.error(`Record ${id} not found. This is probably an error`)};has=id=>!!this.atoms.value[id];listen=(onHistory,filters)=>{this._flushHistory();const listener={onHistory,filters:{source:filters?.source??"all",scope:filters?.scope??"all"}};return this.listeners.add(listener),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(listener),0===this.listeners.size&&this.historyReactor.stop()}};isMergingRemoteChanges=!1;mergeRemoteChanges=fn=>{if(this.isMergingRemoteChanges)return fn();try{this.isMergingRemoteChanges=!0,transact(fn)}finally{this.isMergingRemoteChanges=!1}};extractingChanges(fn){const changes=[],dispose=this.historyAccumulator.intercepting((entry=>changes.push(entry.changes)));try{return transact(fn),squashRecordDiffs(changes)}finally{dispose()}}applyDiff(diff,runCallbacks=!0){const prevRunCallbacks=this._runCallbacks;try{this._runCallbacks=runCallbacks,transact((()=>{const toPut=objectMapValues(diff.added).concat(objectMapValues(diff.updated).map((([_from,to])=>to))),toRemove=objectMapKeys(diff.removed);toPut.length&&this.put(toPut),toRemove.length&&this.remove(toRemove)}))}finally{this._runCallbacks=prevRunCallbacks}}createComputedCache=(name,derive,isEqual)=>{const cache=new Cache;return{get:id=>{const atom2=this.atoms.value[id];if(atom2)return cache.get(atom2,(()=>{const recordSignal=isEqual?Computed_computed(atom2.name+":equals",(()=>atom2.value),{isEqual}):atom2;return Computed_computed(name+":"+id,(()=>derive(recordSignal.value)))})).value}}};createSelectedComputedCache=(name,selector,derive)=>{const cache=new Cache;return{get:id=>{const atom2=this.atoms.value[id];if(!atom2)return;const d=Computed_computed(name+":"+id+":selector",(()=>selector(atom2.value)));return cache.get(atom2,(()=>Computed_computed(name+":"+id,(()=>derive(d.value))))).value}}};getRecordType=record=>{const type=this.schema.types[record.typeName];if(!type)throw new Error(`Record type ${record.typeName} not found`);return type};_integrityChecker;ensureStoreIsUsable(){this._integrityChecker??=this.schema.createIntegrityChecker(this),this._integrityChecker?.()}_isPossiblyCorrupted=!1;markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}function squashRecordDiffs(diffs){const result={added:{},removed:{},updated:{}};for(const diff of diffs){for(const[id,value]of objectMapEntries(diff.added))if(result.removed[id]){const original=result.removed[id];delete result.removed[id],original!==value&&(result.updated[id]=[original,value])}else result.added[id]=value;for(const[id,[_from,to]]of objectMapEntries(diff.updated))result.added[id]?(result.added[id]=to,delete result.updated[id],delete result.removed[id]):result.updated[id]?(result.updated[id][1]=to,delete result.removed[id]):(result.updated[id]=diff.updated[id],delete result.removed[id]);for(const[id,value]of objectMapEntries(diff.removed))result.added[id]?delete result.added[id]:result.updated[id]?(result.removed[id]=result.updated[id][0],delete result.updated[id]):result.removed[id]=value}return result}class HistoryAccumulator{_history=[];_interceptors=new Set;intercepting(fn){return this._interceptors.add(fn),()=>{this._interceptors.delete(fn)}}add(entry){this._history.push(entry);for(const interceptor of this._interceptors)interceptor(entry)}flush(){const history=function squashHistoryEntries(entries){const result=[];let entry,current=entries[0];for(let i=1,n=entries.length;i<n;i++)entry=entries[i],current.source!==entry.source?(result.push(current),current=entry):current={source:current.source,changes:squashRecordDiffs([current.changes,entry.changes])};return result.push(current),result}(this._history);return this._history=[],history}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function defineMigrations(opts){const{currentVersion,firstVersion,migrators={},subTypeKey,subTypeMigrations}=opts;if("number"==typeof currentVersion&&"number"==typeof firstVersion){if(currentVersion===firstVersion)throw Error("Current version is equal to initial version.");if(currentVersion<firstVersion)throw Error("Current version is lower than initial version.")}return{firstVersion:firstVersion??0,currentVersion:currentVersion??0,migrators,subTypeKey,subTypeMigrations}}var MigrationFailureReason=(MigrationFailureReason2=>(MigrationFailureReason2.IncompatibleSubtype="incompatible-subtype",MigrationFailureReason2.UnknownType="unknown-type",MigrationFailureReason2.TargetVersionTooNew="target-version-too-new",MigrationFailureReason2.TargetVersionTooOld="target-version-too-old",MigrationFailureReason2.MigrationError="migration-error",MigrationFailureReason2.UnrecognizedSubtype="unrecognized-subtype",MigrationFailureReason2))(MigrationFailureReason||{});function migrateRecord({record,migrations,fromVersion,toVersion}){let currentVersion=fromVersion;if(!function isRecord(record){return"object"==typeof record&&null!==record&&"id"in record&&"typeName"in record}(record))throw new Error("[migrateRecord] object is not a record");const{typeName,id,...others}=record;let recordWithoutMeta=others;for(;currentVersion<toVersion;){const nextVersion=currentVersion+1,migrator=migrations.migrators[nextVersion];if(!migrator)return{type:"error",reason:"target-version-too-new"};recordWithoutMeta=migrator.up(recordWithoutMeta),currentVersion=nextVersion}for(;currentVersion>toVersion;){const nextVersion=currentVersion-1,migrator=migrations.migrators[currentVersion];if(!migrator)return{type:"error",reason:"target-version-too-old"};recordWithoutMeta=migrator.down(recordWithoutMeta),currentVersion=nextVersion}return{type:"success",value:{...recordWithoutMeta,id,typeName}}}function migrate({value,migrations,fromVersion,toVersion}){let currentVersion=fromVersion;for(;currentVersion<toVersion;){const nextVersion=currentVersion+1,migrator=migrations.migrators[nextVersion];if(!migrator)return{type:"error",reason:"target-version-too-new"};value=migrator.up(value),currentVersion=nextVersion}for(;currentVersion>toVersion;){const nextVersion=currentVersion-1,migrator=migrations.migrators[currentVersion];if(!migrator)return{type:"error",reason:"target-version-too-old"};value=migrator.down(value),currentVersion=nextVersion}return{type:"success",value}}class StoreSchema{constructor(types,options){this.types=types,this.options=options}static create(types,options){return new StoreSchema(types,options??{})}get currentStoreVersion(){return this.options.snapshotMigrations?.currentVersion??0}validateRecord(store,record,phase,recordBefore){try{const recordType=getOwnProperty(this.types,record.typeName);if(!recordType)throw new Error(`Missing definition for record type ${record.typeName}`);return recordType.validate(record)}catch(error){if(this.options.onValidationFailure)return this.options.onValidationFailure({store,record,phase,recordBefore,error});throw error}}migratePersistedRecord(record,persistedSchema,direction="up"){const ourType=getOwnProperty(this.types,record.typeName),persistedType=persistedSchema.recordVersions[record.typeName];if(!persistedType||!ourType)return{type:"error",reason:MigrationFailureReason.UnknownType};const ourVersion=ourType.migrations.currentVersion,persistedVersion=persistedType.version;if(ourVersion!==persistedVersion){const result2=migrateRecord("up"===direction?{record,migrations:ourType.migrations,fromVersion:persistedVersion,toVersion:ourVersion}:{record,migrations:ourType.migrations,fromVersion:ourVersion,toVersion:persistedVersion});if("error"===result2.type)return result2;record=result2.value}if(!ourType.migrations.subTypeKey)return{type:"success",value:record};const ourSubTypeMigrations=ourType.migrations.subTypeMigrations?.[record[ourType.migrations.subTypeKey]],persistedSubTypeVersion="subTypeVersions"in persistedType?persistedType.subTypeVersions[record[ourType.migrations.subTypeKey]]:void 0;if(void 0===ourSubTypeMigrations)return{type:"error",reason:MigrationFailureReason.UnrecognizedSubtype};if(void 0===persistedSubTypeVersion)return{type:"error",reason:MigrationFailureReason.IncompatibleSubtype};const result=migrateRecord("up"===direction?{record,migrations:ourSubTypeMigrations,fromVersion:persistedSubTypeVersion,toVersion:ourSubTypeMigrations.currentVersion}:{record,migrations:ourSubTypeMigrations,fromVersion:ourSubTypeMigrations.currentVersion,toVersion:persistedSubTypeVersion});return"error"===result.type?result:{type:"success",value:result.value}}migrateStoreSnapshot(snapshot){let{store}=snapshot;const migrations=this.options.snapshotMigrations;if(!migrations)return{type:"success",value:store};const ourStoreVersion=migrations.currentVersion,persistedStoreVersion=snapshot.schema.storeVersion??0;if(ourStoreVersion<persistedStoreVersion)return{type:"error",reason:MigrationFailureReason.TargetVersionTooOld};if(ourStoreVersion>persistedStoreVersion){const result=migrate({value:store,migrations,fromVersion:persistedStoreVersion,toVersion:ourStoreVersion});if("error"===result.type)return result;store=result.value}const updated=[];for(const r of objectMapValues(store)){const result=this.migratePersistedRecord(r,snapshot.schema);if("error"===result.type)return result;result.value&&result.value!==r&&updated.push(result.value)}if(updated.length){store={...store};for(const r of updated)store[r.id]=r}return{type:"success",value:store}}createIntegrityChecker(store){return this.options.createIntegrityChecker?.(store)??void 0}serialize(){return{schemaVersion:1,storeVersion:this.options.snapshotMigrations?.currentVersion??0,recordVersions:Object.fromEntries(objectMapValues(this.types).map((type=>[type.typeName,type.migrations.subTypeKey&&type.migrations.subTypeMigrations?{version:type.migrations.currentVersion,subTypeKey:type.migrations.subTypeKey,subTypeVersions:type.migrations.subTypeMigrations?Object.fromEntries(Object.entries(type.migrations.subTypeMigrations).map((([k,v])=>[k,v.currentVersion]))):void 0}:{version:type.migrations.currentVersion}])))}}serializeEarliestVersion(){return{schemaVersion:1,storeVersion:this.options.snapshotMigrations?.firstVersion??0,recordVersions:Object.fromEntries(objectMapValues(this.types).map((type=>[type.typeName,type.migrations.subTypeKey&&type.migrations.subTypeMigrations?{version:type.migrations.firstVersion,subTypeKey:type.migrations.subTypeKey,subTypeVersions:type.migrations.subTypeMigrations?Object.fromEntries(Object.entries(type.migrations.subTypeMigrations).map((([k,v])=>[k,v.firstVersion]))):void 0}:{version:type.migrations.firstVersion}])))}}}class ValidationError extends Error{constructor(rawMessage,path=[]){const formattedPath=function formatPath(path){if(!path.length)return null;let formattedPath="";for(const item of path)"number"==typeof item?formattedPath+=`.${item}`:item.startsWith("(")?formattedPath.endsWith(")")?formattedPath=`${formattedPath.slice(0,-1)}, ${item.slice(1)}`:formattedPath+=item:formattedPath+=`.${item}`;return formattedPath.startsWith(".")?formattedPath.slice(1):formattedPath}(path),indentedMessage=rawMessage.split("\n").map(((line,i)=>0===i?line:`  ${line}`)).join("\n");super(path?`At ${formattedPath}: ${indentedMessage}`:indentedMessage),this.rawMessage=rawMessage,this.path=path}name="ValidationError"}function prefixError(path,fn){try{return fn()}catch(err){if(err instanceof ValidationError)throw new ValidationError(err.rawMessage,[path,...err.path]);throw new ValidationError(err.toString(),[path])}}function typeToString(value){if(null===value)return"null";if(Array.isArray(value))return"an array";const type=typeof value;switch(type){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${type}`;case"object":return`an ${type}`;case"undefined":return"undefined";default:exhaustiveSwitchError(type)}}class Validator{constructor(validationFn){this.validationFn=validationFn}validate(value){return this.validationFn(value)}nullable(){return nullable(this)}optional(){return optional(this)}refine(otherValidationFn){return new Validator((value=>otherValidationFn(this.validate(value))))}check(nameOrCheckFn,checkFn){return"string"==typeof nameOrCheckFn?this.refine((value=>(prefixError(`(check ${nameOrCheckFn})`,(()=>checkFn(value))),value))):this.refine((value=>(nameOrCheckFn(value),value)))}}class ArrayOfValidator extends Validator{constructor(itemValidator){super((value=>{const arr=array.validate(value);for(let i=0;i<arr.length;i++)prefixError(i,(()=>itemValidator.validate(arr[i])));return arr})),this.itemValidator=itemValidator}nonEmpty(){return this.check((value=>{if(0===value.length)throw new ValidationError("Expected a non-empty array")}))}lengthGreaterThan1(){return this.check((value=>{if(value.length<=1)throw new ValidationError("Expected an array with length greater than 1")}))}}class ObjectValidator extends Validator{constructor(config,shouldAllowUnknownProperties=!1){super((object2=>{if("object"!=typeof object2||null===object2)throw new ValidationError(`Expected object, got ${typeToString(object2)}`);for(const[key,validator]of Object.entries(config))prefixError(key,(()=>{validator.validate(getOwnProperty(object2,key))}));if(!shouldAllowUnknownProperties)for(const key of Object.keys(object2))if(!object_hasOwnProperty(config,key))throw new ValidationError("Unexpected property",[key]);return object2})),this.config=config,this.shouldAllowUnknownProperties=shouldAllowUnknownProperties}allowUnknownProperties(){return new ObjectValidator(this.config,!0)}extend(extension){return new ObjectValidator({...this.config,...extension})}}class UnionValidator extends Validator{constructor(key,config,unknownValueValidation){super((input=>{if("object"!=typeof input||null===input)throw new ValidationError(`Expected an object, got ${typeToString(input)}`,[]);const variant=getOwnProperty(input,key);if("string"!=typeof variant)throw new ValidationError(`Expected a string for key "${key}", got ${typeToString(variant)}`);const matchingSchema=object_hasOwnProperty(config,variant)?config[variant]:void 0;return void 0===matchingSchema?this.unknownValueValidation(input,variant):prefixError(`(${key} = ${variant})`,(()=>matchingSchema.validate(input)))})),this.key=key,this.config=config,this.unknownValueValidation=unknownValueValidation}validateUnknownVariants(unknownValueValidation){return new UnionValidator(this.key,this.config,unknownValueValidation)}}class DictValidator extends Validator{constructor(keyValidator,valueValidator){super((object2=>{if("object"!=typeof object2||null===object2)throw new ValidationError(`Expected object, got ${typeToString(object2)}`);for(const[key,value]of Object.entries(object2))prefixError(key,(()=>{keyValidator.validate(key),valueValidator.validate(value)}));return object2})),this.keyValidator=keyValidator,this.valueValidator=valueValidator}}function typeofValidator(type){return new Validator((value=>{if(typeof value!==type)throw new ValidationError(`Expected ${type}, got ${typeToString(value)}`);return value}))}const unknown=new Validator((value=>value)),any=new Validator((value=>value)),string=typeofValidator("string"),number=typeofValidator("number").check((number2=>{if(Number.isNaN(number2))throw new ValidationError("Expected a number, got NaN");if(!Number.isFinite(number2))throw new ValidationError(`Expected a finite number, got ${number2}`)})),positiveNumber=number.check((value=>{if(value<0)throw new ValidationError(`Expected a positive number, got ${value}`)})),nonZeroNumber=number.check((value=>{if(value<=0)throw new ValidationError(`Expected a non-zero positive number, got ${value}`)})),integer=number.check((value=>{if(!Number.isInteger(value))throw new ValidationError(`Expected an integer, got ${value}`)})),positiveInteger=integer.check((value=>{if(value<0)throw new ValidationError(`Expected a positive integer, got ${value}`)})),nonZeroInteger=integer.check((value=>{if(value<=0)throw new ValidationError(`Expected a non-zero positive integer, got ${value}`)})),validation_boolean=typeofValidator("boolean"),bigint=typeofValidator("bigint");function literal(expectedValue){return new Validator((actualValue=>{if(actualValue!==expectedValue)throw new ValidationError(`Expected ${expectedValue}, got ${JSON.stringify(actualValue)}`);return expectedValue}))}const array=new Validator((value=>{if(!Array.isArray(value))throw new ValidationError(`Expected an array, got ${typeToString(value)}`);return value}));function arrayOf(itemValidator){return new ArrayOfValidator(itemValidator)}const unknownObject=new Validator((value=>{if("object"!=typeof value||null===value)throw new ValidationError(`Expected object, got ${typeToString(value)}`);return value}));function object(config){return new ObjectValidator(config)}function isValidJson(value){return null===value||"number"==typeof value||"string"==typeof value||"boolean"==typeof value||(Array.isArray(value)?value.every(isValidJson):"object"==typeof value&&Object.values(value).every(isValidJson))}const jsonValue=new Validator((value=>{if(isValidJson(value))return value;throw new ValidationError("Expected json serializable value, got "+typeof value)}));function jsonDict(){return dict(string,jsonValue)}function dict(keyValidator,valueValidator){return new DictValidator(keyValidator,valueValidator)}function union(key,config){return new UnionValidator(key,config,((unknownValue,unknownVariant)=>{throw new ValidationError(`Expected one of ${Object.keys(config).map((key2=>JSON.stringify(key2))).join(" or ")}, got ${JSON.stringify(unknownVariant)}`,[key])}))}function model(name,validator){return new Validator((value=>prefixError(value&&"object"==typeof value&&"id"in value&&"string"==typeof value.id?`${name}(id = ${value.id})`:name,(()=>validator.validate(value)))))}function setEnum(values){return new Validator((value=>{if(!values.has(value)){const valuesString=Array.from(values,(value2=>JSON.stringify(value2))).join(" or ");throw new ValidationError(`Expected ${valuesString}, got ${value}`)}return value}))}function optional(validator){return new Validator((value=>{if(void 0!==value)return validator.validate(value)}))}function nullable(validator){return new Validator((value=>null===value?null:validator.validate(value)))}function literalEnum(...values){return setEnum(new Set(values))}function idValidator(prefix){return string.refine((id=>{if(!id.startsWith(`${prefix}:`))throw new Error(`${prefix} ID must start with "${prefix}:"`);return id}))}const assetIdValidator=idValidator("asset");function createAssetValidator(type,props){return object({id:assetIdValidator,typeName:literal("asset"),type:literal(type),props,meta:jsonValue})}const cameraVersions_AddMeta=1,TLCamera_CameraRecordType=createRecordType("camera",{validator:model("camera",object({typeName:literal("camera"),id:idValidator("camera"),x:number,y:number,z:number,meta:jsonValue})),migrations:defineMigrations({currentVersion:cameraVersions_AddMeta,migrators:{[cameraVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}}),scope:"session"}).withDefaultProperties((()=>({x:0,y:0,z:1,meta:{}}))),vec2dModelValidator=object({x:number,y:number,z:number.optional()}),box2dModelValidator=object({x:number,y:number,w:number,h:number}),cursorTypeValidator=setEnum(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),cursorValidator=object({type:cursorTypeValidator,rotation:number}),opacityValidator=number.check((n=>{if(n<0||n>1)throw new ValidationError("Opacity must be between 0 and 1")})),canvasUiColorTypeValidator=setEnum(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),TL_SCRIBBLE_STATES=new Set(["starting","paused","active","stopping"]),scribbleValidator=object({points:arrayOf(vec2dModelValidator),size:positiveNumber,color:canvasUiColorTypeValidator,opacity:number,state:setEnum(TL_SCRIBBLE_STATES),delay:number}),pageIdValidator=idValidator("page"),pageVersions_AddMeta=1,PageRecordType=createRecordType("page",{validator:model("page",object({typeName:literal("page"),id:pageIdValidator,name:string,index:string,meta:jsonValue})),migrations:defineMigrations({currentVersion:pageVersions_AddMeta,migrators:{[pageVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}}),scope:"document"}).withDefaultProperties((()=>({meta:{}})));function isPageId(id){return PageRecordType.isId(id)}idValidator("instance");const instanceVersions_AddHoveringCanvas=21,instanceMigrations=defineMigrations({currentVersion:instanceVersions_AddHoveringCanvas,migrators:{[1]:{up:instance=>({...instance,exportBackground:!0}),down:({exportBackground:_,...instance})=>instance},[2]:{up:({dialog:_,...instance})=>instance,down:instance=>({...instance,dialog:null})},[3]:{up:instance=>({...instance,isToolLocked:!1}),down:({isToolLocked:_,...instance})=>instance},[4]:{up:({propsForNextShape,...instance})=>({...instance,propsForNextShape:Object.fromEntries(Object.entries(propsForNextShape).filter((([key])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(key))))}),down:instance=>instance},[5]:{up:({propsForNextShape,...instance})=>({...instance,propsForNextShape:{...propsForNextShape,labelColor:"black"}}),down:instance=>{const{labelColor:_,...rest}=instance.propsForNextShape;return{...instance,propsForNextShape:{...rest}}}},[6]:{up:instance=>({...instance,followingUserId:null}),down:({followingUserId:_,...instance})=>instance},[7]:{up:instance=>{let newAlign=instance.propsForNextShape.align;return"justify"===newAlign&&(newAlign="start"),{...instance,propsForNextShape:{...instance.propsForNextShape,align:newAlign}}},down:instance=>({...instance})},[8]:{up:instance=>({...instance,zoomBrush:null}),down:({zoomBrush:_,...instance})=>instance},[9]:{up:instance=>({...instance,propsForNextShape:{...instance.propsForNextShape,verticalAlign:"middle"}}),down:instance=>{const{verticalAlign:_,...propsForNextShape}=instance.propsForNextShape;return{...instance,propsForNextShape}}},[10]:{up:instance=>null!==instance.scribble?{...instance,scribble:{...instance.scribble,delay:0}}:{...instance},down:instance=>{if(null!==instance.scribble){const{delay:_delay,...rest}=instance.scribble;return{...instance,scribble:rest}}return{...instance}}},[11]:{up:({userId:_,...instance})=>instance,down:instance=>({...instance,userId:"user:none"})},[12]:{up:instance=>({...instance,isPenMode:!1,isGridMode:!1}),down:({isPenMode:_,isGridMode:__,...instance})=>instance},[13]:{up:({propsForNextShape:{opacity,...propsForNextShape},...instance})=>({...instance,opacityForNextShape:Number(opacity??"1"),propsForNextShape}),down:({opacityForNextShape:opacity,...instance})=>({...instance,propsForNextShape:{...instance.propsForNextShape,opacity:opacity<.175?"0.1":opacity<.375?"0.25":opacity<.625?"0.5":opacity<.875?"0.75":"1"}})},[14]:{up:instance=>({...instance,chatMessage:"",isChatting:!1}),down:({chatMessage:_,isChatting:__,...instance})=>instance},[15]:{up:instance=>({...instance,highlightedUserIds:[]}),down:({highlightedUserIds:_,...instance})=>instance},[16]:{up:({propsForNextShape:_,...instance})=>({...instance,stylesForNextShape:{}}),down:({stylesForNextShape:_,...instance})=>({...instance,propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})},[17]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})},[18]:{up:record=>{const{color:_,...cursor}=record.cursor;return{...record,cursor}},down:record=>({...record,cursor:{...record.cursor,color:"black"}})},[19]:{up:record=>({...record,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1}),down:({canMoveCamera:_canMoveCamera,isFocused:_isFocused,devicePixelRatio:_devicePixelRatio,isCoarsePointer:_isCoarsePointer,openMenus:_openMenus,isChangingStyle:_isChangingStyle,isReadOnly:_isReadOnly,...record})=>({...record})},[20]:{up:({isReadOnly:_isReadOnly,...record})=>({...record,isReadonly:_isReadOnly}),down:({isReadonly:_isReadonly,...record})=>({...record,isReadOnly:_isReadonly})},[instanceVersions_AddHoveringCanvas]:{up:record=>({...record,isHoveringCanvas:null}),down:({isHoveringCanvas:_,...record})=>({...record})}}}),TLInstance_TLINSTANCE_ID="instance:instance",parentIdValidator=string.refine((id=>{if(!id.startsWith("page:")&&!id.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return id})),shapeIdValidator=idValidator("shape");const instancePageStateValidator=model("instance_page_state",object({typeName:literal("instance_page_state"),id:idValidator("instance_page_state"),pageId:pageIdValidator,selectedShapeIds:arrayOf(shapeIdValidator),hintingShapeIds:arrayOf(shapeIdValidator),erasingShapeIds:arrayOf(shapeIdValidator),hoveredShapeId:shapeIdValidator.nullable(),editingShapeId:shapeIdValidator.nullable(),croppingShapeId:shapeIdValidator.nullable(),focusedGroupId:shapeIdValidator.nullable(),meta:jsonValue})),instancePageStateVersions_RenamePropertiesAgain=5,TLPageState_InstancePageStateRecordType=createRecordType("instance_page_state",{migrations:defineMigrations({currentVersion:instancePageStateVersions_RenamePropertiesAgain,migrators:{[1]:{up:instance=>({...instance,croppingShapeId:null}),down:({croppingShapeId:_croppingShapeId,...instance})=>instance},[2]:{up:({instanceId:_,cameraId:__,...instance})=>instance,down:instance=>({...instance,instanceId:TLInstance_TLINSTANCE_ID,cameraId:TLCamera_CameraRecordType.createId("void")})},[3]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})},[4]:{up:record=>{const{selectedShapeIds,hintingShapeIds,erasingShapeIds,hoveredShapeId,editingShapeId,croppingShapeId,focusedGroupId,...rest}=record;return{selectedShapeIds,hintingShapeIds,erasingShapeIds,hoveredShapeId,editingShapeId,croppingShapeId,focusedGroupId,...rest}},down:record=>{const{selectedShapeIds,hintingShapeIds,erasingShapeIds,hoveredShapeId,editingShapeId,croppingShapeId,focusedGroupId,...rest}=record;return{selectedShapeIds,hintingShapeIds,erasingShapeIds,hoveredShapeId,editingShapeId,croppingShapeId,focusedGroupId,...rest}}},[instancePageStateVersions_RenamePropertiesAgain]:{up:record=>{const{selectedIds,hintingIds,erasingIds,hoveredId,editingId,croppingId,focusLayerId,...rest}=record;return{...rest,selectedShapeIds:selectedIds,hintingShapeIds:hintingIds,erasingShapeIds:erasingIds,hoveredShapeId:hoveredId,editingShapeId:editingId,croppingShapeId:croppingId,focusedGroupId:focusLayerId}},down:record=>{const{selectedShapeIds,hintingShapeIds,erasingShapeIds,hoveredShapeId,editingShapeId,croppingShapeId,focusedGroupId,...rest}=record;return{...rest,selectedIds:selectedShapeIds,hintingIds:hintingShapeIds,erasingIds:erasingShapeIds,hoveredId:hoveredShapeId,editingId:editingShapeId,croppingId:croppingShapeId,focusLayerId:focusedGroupId}}}}}),validator:instancePageStateValidator,scope:"session"}).withDefaultProperties((()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}}))),pointerVersions_AddMeta=1,PointerRecordType=createRecordType("pointer",{validator:model("pointer",object({typeName:literal("pointer"),id:idValidator("pointer"),x:number,y:number,lastActivityTimestamp:number,meta:jsonValue})),migrations:defineMigrations({currentVersion:pointerVersions_AddMeta,migrators:{[pointerVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}}),scope:"session"}).withDefaultProperties((()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}}))),TLPointer_TLPOINTER_ID=PointerRecordType.createId("pointer"),instancePresenceValidator=model("instance_presence",object({typeName:literal("instance_presence"),id:idValidator("instance_presence"),userId:string,userName:string,lastActivityTimestamp:number,followingUserId:string.nullable(),cursor:object({x:number,y:number,type:cursorTypeValidator,rotation:number}),color:string,camera:object({x:number,y:number,z:number}),screenBounds:box2dModelValidator,selectedShapeIds:arrayOf(idValidator("shape")),currentPageId:idValidator("page"),brush:box2dModelValidator.nullable(),scribble:scribbleValidator.nullable(),chatMessage:string,meta:jsonValue})),instancePresenceVersions_RenameSelectedShapeIds=5,TLPresence_InstancePresenceRecordType=createRecordType("instance_presence",{migrations:defineMigrations({currentVersion:instancePresenceVersions_RenameSelectedShapeIds,migrators:{[1]:{up:instance=>null!==instance.scribble?{...instance,scribble:{...instance.scribble,delay:0}}:{...instance},down:instance=>{if(null!==instance.scribble){const{delay:_delay,...rest}=instance.scribble;return{...instance,scribble:rest}}return{...instance}}},[2]:{up:({instanceId:_,...instance})=>instance,down:instance=>({...instance,instanceId:TLInstance_TLINSTANCE_ID})},[3]:{up:instance=>({...instance,chatMessage:""}),down:({chatMessage:_,...instance})=>instance},[4]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})},[instancePresenceVersions_RenameSelectedShapeIds]:{up:record=>{const{selectedShapeIds,...rest}=record;return{selectedShapeIds,...rest}},down:record=>{const{selectedShapeIds,...rest}=record;return{selectedShapeIds,...rest}}}}}),validator:instancePresenceValidator,scope:"presence"}).withDefaultProperties((()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribble:null,chatMessage:"",meta:{}}))),documentValidator=model("document",object({typeName:literal("document"),id:literal("document:document"),gridSize:number,name:string,meta:jsonValue})),documentVersions_AddMeta=2,DocumentRecordType=createRecordType("document",{migrations:defineMigrations({currentVersion:documentVersions_AddMeta,migrators:{[1]:{up:document=>({...document,name:""}),down:({name:_,...document})=>document},[documentVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}}),validator:documentValidator,scope:"document"}).withDefaultProperties((()=>({gridSize:10,name:"",meta:{}}))),TLDOCUMENT_ID=DocumentRecordType.createId("document");function sortByIndex(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function redactRecordForErrorReporting(record){"asset"===record.typeName&&("src"in record&&(record.src="<redacted>"),"src"in record.props&&(record.props.src="<redacted>"))}const onValidationFailure=({error,phase,record,recordBefore})=>{throw annotateError(error,{tags:{origin:"store.validateRecord",storePhase:phase,isExistingValidationIssue:"initialize"===phase},extras:{recordBefore:recordBefore?redactRecordForErrorReporting(structuredClone(recordBefore)):void 0,recordAfter:redactRecordForErrorReporting(structuredClone(record))}}),error};function createIntegrityChecker(store){const $pageIds=store.query.ids("page"),ensureStoreIsUsable=()=>{if(!store.has(TLDOCUMENT_ID))return store.put([DocumentRecordType.create({id:TLDOCUMENT_ID,name:store.props.defaultName})]),ensureStoreIsUsable();if(!store.has(TLPointer_TLPOINTER_ID))return store.put([PointerRecordType.create({id:TLPointer_TLPOINTER_ID})]),ensureStoreIsUsable();const pageIds=$pageIds.value;if(0===pageIds.size)return store.put(function getDefaultPages(){return[PageRecordType.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}()),ensureStoreIsUsable();const getFirstPageId=()=>[...pageIds].map((id=>store.get(id))).sort(sortByIndex)[0].id,instanceState=store.get(TLInstance_TLINSTANCE_ID);if(!instanceState)return store.put([store.schema.types.instance.create({id:TLInstance_TLINSTANCE_ID,currentPageId:getFirstPageId(),exportBackground:!0})]),ensureStoreIsUsable();if(!pageIds.has(instanceState.currentPageId))return store.put([{...instanceState,currentPageId:getFirstPageId()}]),ensureStoreIsUsable();const missingPageStateIds=new Set,missingCameraIds=new Set;for(const id of pageIds){const pageStateId=TLPageState_InstancePageStateRecordType.createId(id);store.has(pageStateId)||missingPageStateIds.add(pageStateId);const cameraId=TLCamera_CameraRecordType.createId(id);store.has(cameraId)||missingCameraIds.add(cameraId)}missingPageStateIds.size>0&&store.put([...missingPageStateIds].map((id=>TLPageState_InstancePageStateRecordType.create({id,pageId:TLPageState_InstancePageStateRecordType.parseId(id)})))),missingCameraIds.size>0&&store.put([...missingCameraIds].map((id=>TLCamera_CameraRecordType.create({id}))))};return ensureStoreIsUsable}const bookmarkAssetValidator=createAssetValidator("bookmark",object({title:string,description:string,image:string,src:string.nullable()})),bookmarkAssetMigrations=defineMigrations({}),imageAssetValidator=createAssetValidator("image",object({w:number,h:number,name:string,isAnimated:validation_boolean,mimeType:string.nullable(),src:string.nullable()})),Versions_RenameWidthHeight=2,imageAssetMigrations=defineMigrations({currentVersion:Versions_RenameWidthHeight,migrators:{[1]:{up:asset=>({...asset,props:{...asset.props,isAnimated:!1}}),down:asset=>{const{isAnimated,...rest}=asset.props;return{...asset,props:rest}}},[Versions_RenameWidthHeight]:{up:asset=>{const{width,height,...others}=asset.props;return{...asset,props:{w:width,h:height,...others}}},down:asset=>{const{w,h,...others}=asset.props;return{...asset,props:{width:w,height:h,...others}}}}}}),videoAssetValidator=createAssetValidator("video",object({w:number,h:number,name:string,isAnimated:validation_boolean,mimeType:string.nullable(),src:string.nullable()})),TLVideoAsset_Versions_RenameWidthHeight=2,videoAssetMigrations=defineMigrations({currentVersion:TLVideoAsset_Versions_RenameWidthHeight,migrators:{[1]:{up:asset=>({...asset,props:{...asset.props,isAnimated:!1}}),down:asset=>{const{isAnimated,...rest}=asset.props;return{...asset,props:rest}}},[TLVideoAsset_Versions_RenameWidthHeight]:{up:asset=>{const{width,height,...others}=asset.props;return{...asset,props:{w:width,h:height,...others}}},down:asset=>{const{w,h,...others}=asset.props;return{...asset,props:{width:w,height:h,...others}}}}}}),assetValidator=model("asset",union("type",{image:imageAssetValidator,video:videoAssetValidator,bookmark:bookmarkAssetValidator})),assetVersions_AddMeta=1,AssetRecordType=createRecordType("asset",{migrations:defineMigrations({subTypeKey:"type",subTypeMigrations:{image:imageAssetMigrations,video:videoAssetMigrations,bookmark:bookmarkAssetMigrations},currentVersion:assetVersions_AddMeta,migrators:{[assetVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}}),validator:assetValidator,scope:"document"}).withDefaultProperties((()=>({meta:{}})));class StyleProp{constructor(id,defaultValue,type){this.id=id,this.defaultValue=defaultValue,this.type=type}static define(uniqueId,options){const{defaultValue,type=any}=options;return new StyleProp(uniqueId,defaultValue,type)}static defineEnum(uniqueId,options){const{defaultValue,values}=options;return new EnumStyleProp(uniqueId,defaultValue,values)}validate(value){return this.type.validate(value)}}class EnumStyleProp extends StyleProp{constructor(id,defaultValue,values){super(id,defaultValue,literalEnum(...values)),this.values=values}}const rootShapeVersions_AddMeta=3,rootShapeMigrations=defineMigrations({currentVersion:rootShapeVersions_AddMeta,migrators:{[1]:{up:record=>({...record,isLocked:!1}),down:record=>{const{isLocked:_,...rest}=record;return{...rest}}},[2]:{up:({props:{opacity,...props},...record})=>({...record,opacity:Number(opacity??"1"),props}),down:({opacity,...record})=>({...record,props:{...record.props,opacity:opacity<.175?"0.1":opacity<.375?"0.25":opacity<.625?"0.5":opacity<.875?"0.75":"1"}})},[rootShapeVersions_AddMeta]:{up:record=>({...record,meta:{}}),down:({meta:_,...record})=>({...record})}}});function isShape(record){return!!record&&"shape"===record.typeName}function isShapeId(id){return!!id&&id.startsWith("shape:")}function createShapeId(id){return`shape:${id??nanoid()}`}function getShapePropKeysByStyle(props){const propKeysByStyle=new Map;for(const[key,prop]of Object.entries(props))if(prop instanceof StyleProp){if(propKeysByStyle.has(prop))throw new Error(`Duplicate style prop ${prop.id}. Each style prop can only be used once within a shape.`);propKeysByStyle.set(prop,key)}return propKeysByStyle}function createShapeRecordType(shapes){return createRecordType("shape",{migrations:defineMigrations({currentVersion:rootShapeMigrations.currentVersion,firstVersion:rootShapeMigrations.firstVersion,migrators:rootShapeMigrations.migrators,subTypeKey:"type",subTypeMigrations:mapObjectMapValues(shapes,((_,v)=>v.migrations??defineMigrations({})))}),scope:"document",validator:model("shape",union("type",mapObjectMapValues(shapes,((type,{props,meta})=>function createShapeValidator(type,props,meta){return object({id:shapeIdValidator,typeName:literal("shape"),x:number,y:number,rotation:number,index:string,parentId:parentIdValidator,type:literal(type),isLocked:validation_boolean,opacity:opacityValidator,props:props?object(props):jsonValue,meta:meta?object(meta):jsonValue})}(type,props,meta)))))}).withDefaultProperties((()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}})))}const store_migrations_Versions_RemoveUserDocument=4,storeMigrations=defineMigrations({currentVersion:store_migrations_Versions_RemoveUserDocument,migrators:{[1]:{up:store=>Object.fromEntries(Object.entries(store).filter((([_,v])=>"shape"!==v.typeName||"icon"!==v.type&&"code"!==v.type))),down:store=>store},[2]:{up:store=>store,down:store=>Object.fromEntries(Object.entries(store).filter((([_,v])=>"instance_presence"!==v.typeName)))},[3]:{up:store=>Object.fromEntries(Object.entries(store).filter((([_,v])=>!v.typeName.match(/^(user|user_presence)$/)))),down:store=>Object.fromEntries(Object.entries(store).filter((([_,v])=>"pointer"!==v.typeName)))},[store_migrations_Versions_RemoveUserDocument]:{up:store=>Object.fromEntries(Object.entries(store).filter((([_,v])=>!v.typeName.match("user_document")))),down:store=>store}}});function createTLSchema({shapes}){const stylesById=new Map;for(const shape of objectMapValues(shapes))for(const style of getShapePropKeysByStyle(shape.props??{}).keys()){if(stylesById.has(style.id)&&stylesById.get(style.id)!==style)throw new Error(`Multiple StyleProp instances with the same id: ${style.id}`);stylesById.set(style.id,style)}const ShapeRecordType=createShapeRecordType(shapes),InstanceRecordType=function createInstanceRecordType(stylesById){const stylesForNextShapeValidators={};for(const[id,style]of stylesById)stylesForNextShapeValidators[id]=optional(style);const instanceTypeValidator=model("instance",object({typeName:literal("instance"),id:idValidator("instance"),currentPageId:pageIdValidator,followingUserId:string.nullable(),brush:box2dModelValidator.nullable(),opacityForNextShape:opacityValidator,stylesForNextShape:object(stylesForNextShapeValidators),cursor:cursorValidator,scribble:scribbleValidator.nullable(),isFocusMode:validation_boolean,isDebugMode:validation_boolean,isToolLocked:validation_boolean,exportBackground:validation_boolean,screenBounds:box2dModelValidator,zoomBrush:box2dModelValidator.nullable(),isPenMode:validation_boolean,isGridMode:validation_boolean,chatMessage:string,isChatting:validation_boolean,highlightedUserIds:arrayOf(string),canMoveCamera:validation_boolean,isFocused:validation_boolean,devicePixelRatio:number,isCoarsePointer:validation_boolean,isHoveringCanvas:validation_boolean.nullable(),openMenus:arrayOf(string),isChangingStyle:validation_boolean,isReadonly:validation_boolean,meta:jsonValue}));return createRecordType("instance",{migrations:instanceMigrations,validator:instanceTypeValidator,scope:"session"}).withDefaultProperties((()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribble:null,cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],canMoveCamera:!0,isFocused:!1,devicePixelRatio:"undefined"==typeof window?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{}})))}(stylesById);return StoreSchema.create({asset:AssetRecordType,camera:TLCamera_CameraRecordType,document:DocumentRecordType,instance:InstanceRecordType,instance_page_state:TLPageState_InstancePageStateRecordType,page:PageRecordType,shape:ShapeRecordType,instance_presence:TLPresence_InstancePresenceRecordType,pointer:PointerRecordType},{snapshotMigrations:storeMigrations,onValidationFailure,createIntegrityChecker})}const colors=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],DefaultColorThemePalette={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4263eb",semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#adb5bd",semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4dabf7",semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#40c057",semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#ff8787",semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e599f7",semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#f76707",semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#ffc078",semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}}},darkMode:{id:"dark",text:"#f8f9fa",background:"#212529",solid:"#28292e",black:{solid:"#e1e1e1",semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4156be",semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#3b7b5e",semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#93989f",semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#588fc9",semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#599f57",semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#c67877",semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#b583c9",semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#bf612e",semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#aa3c37",semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#873fa3",semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#cba371",semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}}}};function getDefaultColorTheme(opts){return opts.isDarkMode?DefaultColorThemePalette.darkMode:DefaultColorThemePalette.lightMode}const DefaultColorStyle=StyleProp.defineEnum("tldraw:color",{defaultValue:"black",values:colors}),DefaultLabelColorStyle=StyleProp.defineEnum("tldraw:labelColor",{defaultValue:"black",values:colors}),DefaultDashStyle=StyleProp.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),DefaultFillStyle=StyleProp.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),DefaultFontStyle=StyleProp.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),DefaultFontFamilies={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},DefaultSizeStyle=StyleProp.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),arrowheadTypes=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],ArrowShapeArrowheadStartStyle=StyleProp.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:arrowheadTypes}),ArrowShapeArrowheadEndStyle=StyleProp.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:arrowheadTypes}),ArrowShapeTerminal=union("type",{binding:object({type:literal("binding"),boundShapeId:shapeIdValidator,normalizedAnchor:vec2dModelValidator,isExact:validation_boolean}),point:object({type:literal("point"),x:number,y:number})}),arrowShapeProps={labelColor:DefaultLabelColorStyle,color:DefaultColorStyle,fill:DefaultFillStyle,dash:DefaultDashStyle,size:DefaultSizeStyle,arrowheadStart:ArrowShapeArrowheadStartStyle,arrowheadEnd:ArrowShapeArrowheadEndStyle,font:DefaultFontStyle,start:ArrowShapeTerminal,end:ArrowShapeTerminal,bend:number,text:string},TLArrowShape_Versions_AddLabelColor=1,arrowShapeMigrations=defineMigrations({currentVersion:TLArrowShape_Versions_AddLabelColor,migrators:{[TLArrowShape_Versions_AddLabelColor]:{up:record=>({...record,props:{...record.props,labelColor:"black"}}),down:record=>{const{labelColor:_,...props}=record.props;return{...record,props}}}}}),bookmarkShapeProps={w:nonZeroNumber,h:nonZeroNumber,assetId:assetIdValidator.nullable(),url:string},TLBookmarkShape_Versions_NullAssetId=1,bookmarkShapeMigrations=defineMigrations({currentVersion:TLBookmarkShape_Versions_NullAssetId,migrators:{[TLBookmarkShape_Versions_NullAssetId]:{up:shape=>void 0===shape.props.assetId?{...shape,props:{...shape.props,assetId:null}}:shape,down:shape=>{if(null===shape.props.assetId){const{assetId:_,...props}=shape.props;return{...shape,props}}return shape}}}}),DrawShapeSegment=object({type:literalEnum("free","straight"),points:arrayOf(vec2dModelValidator)}),drawShapeProps={color:DefaultColorStyle,fill:DefaultFillStyle,dash:DefaultDashStyle,size:DefaultSizeStyle,segments:arrayOf(DrawShapeSegment),isComplete:validation_boolean,isClosed:validation_boolean,isPen:validation_boolean},TLDrawShape_Versions_AddInPen=1,drawShapeMigrations=defineMigrations({currentVersion:TLDrawShape_Versions_AddInPen,migrators:{[TLDrawShape_Versions_AddInPen]:{up:shape=>{const{points}=shape.props.segments[0];if(0===points.length)return{...shape,props:{...shape.props,isPen:!1}};let isPen=!(0===points[0].z||.5===points[0].z);return points[1]&&(isPen=isPen&&!(0===points[1].z||.5===points[1].z)),{...shape,props:{...shape.props,isPen}}},down:shape=>{const{isPen:_isPen,...propsWithOutIsPen}=shape.props;return{...shape,props:{...propsWithOutIsPen}}}}}});var TLEmbedShape_process=__webpack_require__("./node_modules/process/browser.js");const TLDRAW_APP_RE=/(^\/r\/[^/]+\/?$)/,safeParseUrl=url=>{try{return new URL(url)}catch(err){return}},EMBED_DEFINITIONS=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(TLDRAW_APP_RE))return url},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(TLDRAW_APP_RE))return url}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:url=>{if(url.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!url.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${url}`},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/embed\/?$/)){const outUrl=urlObj.searchParams.get("url");if(outUrl)return outUrl}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{if(url.includes("/maps/")){const match=url.match(/@(.*),(.*),(.*)z/);let result;if(match){const[,lat,lng,z]=match;result=`https://${new URL(url).host.replace("www.","")}/maps/embed/v1/view?key=${TLEmbedShape_process.env.NEXT_PUBLIC_GC_API_KEY}&center=${lat},${lng}&zoom=${z}`}else result="";return result}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(!urlObj)return;if(urlObj.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&urlObj.searchParams.has("center")&&urlObj.searchParams.get("zoom")){const zoom=urlObj.searchParams.get("zoom"),[lat,lon]=urlObj.searchParams.get("center").split(",");return`https://www.google.com/maps/@${lat},${lon},${zoom}z`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url),matches=urlObj&&urlObj.pathname.match(/\/v\/([^/]+)\/?/);if(matches)return`https://www.val.town/embed/${matches[1]}`},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url),matches=urlObj&&urlObj.pathname.match(/\/embed\/([^/]+)\/?/);if(matches)return`https://www.val.town/v/${matches[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url),matches=urlObj&&urlObj.pathname.match(/\/s\/([^/]+)\/?/);if(matches)return`https://codesandbox.io/embed/${matches[1]}`},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url),matches=urlObj&&urlObj.pathname.match(/\/embed\/([^/]+)\/?/);if(matches)return`https://codesandbox.io/s/${matches[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const matches=url.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(matches){const[_,user,id]=matches;return`https://codepen.io/${user}/embed/${id}`}},fromEmbedUrl:url=>{const matches=url.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(matches){const[_,user,id]=matches;return`https://codepen.io/${user}/pen/${id}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:url=>{const matches=url.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(matches){const[_,id]=matches;return`https://scratch.mit.edu/projects/embed/${id}`}},fromEmbedUrl:url=>{const matches=url.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(matches){const[_,id]=matches;return`https://scratch.mit.edu/projects/${id}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(!urlObj)return;const hostname=urlObj.hostname.replace(/^www./,"");if("youtu.be"===hostname){return`https://www.youtube.com/embed/${urlObj.pathname.split("/").filter(Boolean)[0]}`}if(("youtube.com"===hostname||"m.youtube.com"===hostname)&&urlObj.pathname.match(/^\/watch/)){return`https://www.youtube.com/embed/${urlObj.searchParams.get("v")}`}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(!urlObj)return;if("youtube.com"===urlObj.hostname.replace(/^www./,"")){const matches=urlObj.pathname.match(/^\/embed\/([^/]+)\/?/);if(matches)return`https://www.youtube.com/watch?v=${matches[1]}`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:url=>{const urlObj=safeParseUrl(url),cidQs=urlObj?.searchParams.get("cid");if(urlObj?.pathname.match(/\/calendar\/u\/0/)&&cidQs){urlObj.pathname="/calendar/embed";const keys=Array.from(urlObj.searchParams.keys());for(const key of keys)urlObj.searchParams.delete(key);return urlObj.searchParams.set("src",cidQs),urlObj.href}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url),srcQs=urlObj?.searchParams.get("src");if(urlObj?.pathname.match(/\/calendar\/embed/)&&srcQs){urlObj.pathname="/calendar/u/0";const keys=Array.from(urlObj.searchParams.keys());for(const key of keys)urlObj.searchParams.delete(key);return urlObj.searchParams.set("cid",srcQs),urlObj.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj?.pathname.match(/^\/presentation/)&&urlObj?.pathname.match(/\/pub\/?$/)){urlObj.pathname=urlObj.pathname.replace(/\/pub$/,"/embed");const keys=Array.from(urlObj.searchParams.keys());for(const key of keys)urlObj.searchParams.delete(key);return urlObj.href}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj?.pathname.match(/^\/presentation/)&&urlObj?.pathname.match(/\/embed\/?$/)){urlObj.pathname=urlObj.pathname.replace(/\/embed$/,"/pub");const keys=Array.from(urlObj.searchParams.keys());for(const key of keys)urlObj.searchParams.delete(key);return urlObj.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!url.split("/").pop())return;return url}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!url.split("/").pop())return;return url}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${url}?embed=true`},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/\/@([^/]+)\/([^/]+)/)&&urlObj.searchParams.has("embed"))return urlObj.searchParams.delete("embed"),urlObj.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/map\//))return urlObj.origin+"/embed"+urlObj.pathname},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/embed\/map\//))return urlObj.pathname=urlObj.pathname.replace(/^\/embed/,""),urlObj.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/(artist|album)\//))return urlObj.origin+"/embed"+urlObj.pathname},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/embed\/(artist|album)\//))return urlObj.origin+urlObj.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&"vimeo.com"===urlObj.hostname&&urlObj.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+urlObj.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&"player.vimeo.com"===urlObj.hostname){const matches=urlObj.pathname.match(/^\/video\/([^/]+)\/?$/);if(matches)return"https://vimeo.com/"+matches[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.hash.match(/#room=/))return url},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.hash.match(/#room=/))return url}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:url=>{const urlObj=safeParseUrl(url);if(urlObj&&urlObj.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${urlObj.origin}/embed${urlObj.pathname}?cell=*`;if(urlObj&&urlObj.pathname.match(/^\/d\/([^/]+)\/?$/)){const pathName=urlObj.pathname.replace(/^\/d/,"");return`${urlObj.origin}/embed${pathName}?cell=*`}},fromEmbedUrl:url=>{const urlObj=safeParseUrl(url);return urlObj&&urlObj.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?`${urlObj.origin}${urlObj.pathname.replace("/embed","")}#cell-*`:urlObj&&urlObj.pathname.match(/^\/embed\/([^/]+)\/?$/)?`${urlObj.origin}${urlObj.pathname.replace("/embed","/d")}#cell-*`:void 0}}],embedShapePermissionDefaults={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},embedShapeProps={w:nonZeroNumber,h:nonZeroNumber,url:string},TLEmbedShape_Versions_RemovePermissionOverrides=4,embedShapeMigrations=defineMigrations({currentVersion:TLEmbedShape_Versions_RemovePermissionOverrides,migrators:{[1]:{up:shape=>{const url=shape.props.url,host=new URL(url).host.replace("www.","");let originalUrl;for(const localEmbedDef of EMBED_DEFINITIONS)if(localEmbedDef.hostnames.includes(host))try{originalUrl=localEmbedDef.fromEmbedUrl(url)}catch(err){console.warn(err)}return{...shape,props:{...shape.props,tmpOldUrl:shape.props.url,url:originalUrl??""}}},down:shape=>{let newUrl=shape.props.tmpOldUrl;if(!newUrl||""===newUrl){const url=shape.props.url,host=new URL(url).host.replace("www.","");for(const localEmbedDef of EMBED_DEFINITIONS)if(localEmbedDef.hostnames.includes(host))try{newUrl=localEmbedDef.toEmbedUrl(url)}catch(err){console.warn(err)}}const{tmpOldUrl,...props}=shape.props;return{...shape,props:{...props,url:newUrl??""}}}},[2]:{up:shape=>{const{doesResize:_,...props}=shape.props;return{...shape,props:{...props}}},down:shape=>({...shape,props:{...shape.props,doesResize:!0}})},[3]:{up:shape=>{const{tmpOldUrl:_,...props}=shape.props;return{...shape,props:{...props}}},down:shape=>({...shape,props:{...shape.props}})},[TLEmbedShape_Versions_RemovePermissionOverrides]:{up:shape=>{const{overridePermissions:_,...props}=shape.props;return{...shape,props:{...props}}},down:shape=>({...shape,props:{...shape.props}})}}}),frameShapeProps={w:nonZeroNumber,h:nonZeroNumber,name:string},frameShapeMigrations=defineMigrations({}),DefaultHorizontalAlignStyle=StyleProp.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),DefaultVerticalAlignStyle=StyleProp.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),GeoShapeGeoStyle=StyleProp.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),geoShapeProps={geo:GeoShapeGeoStyle,labelColor:DefaultLabelColorStyle,color:DefaultColorStyle,fill:DefaultFillStyle,dash:DefaultDashStyle,size:DefaultSizeStyle,font:DefaultFontStyle,align:DefaultHorizontalAlignStyle,verticalAlign:DefaultVerticalAlignStyle,url:string,w:nonZeroNumber,h:nonZeroNumber,growY:positiveNumber,text:string},TLGeoShape_Versions_AddCloud=7,geoShapeMigrations=defineMigrations({currentVersion:TLGeoShape_Versions_AddCloud,migrators:{[1]:{up:shape=>({...shape,props:{...shape.props,url:""}}),down:shape=>{const{url:_,...props}=shape.props;return{...shape,props}}},[2]:{up:record=>({...record,props:{...record.props,labelColor:"black"}}),down:record=>{const{labelColor:_,...props}=record.props;return{...record,props}}},[3]:{up:shape=>{let newAlign=shape.props.align;return"justify"===newAlign&&(newAlign="start"),{...shape,props:{...shape.props,align:newAlign}}},down:shape=>({...shape})},[4]:{up:shape=>({...shape}),down:shape=>({...shape,props:{...shape.props,geo:"check-box"===shape.props.geo?"rectangle":shape.props.geo}})},[5]:{up:shape=>({...shape,props:{...shape.props,verticalAlign:"middle"}}),down:shape=>{const{verticalAlign:_,...props}=shape.props;return{...shape,props}}},[6]:{up:shape=>{let newAlign;switch(shape.props.align){case"start":newAlign="start-legacy";break;case"end":newAlign="end-legacy";break;default:newAlign="middle-legacy"}return{...shape,props:{...shape.props,align:newAlign}}},down:shape=>{let oldAlign;switch(shape.props.align){case"start-legacy":oldAlign="start";break;case"end-legacy":oldAlign="end";break;case"middle-legacy":oldAlign="middle";break;default:oldAlign=shape.props.align}return{...shape,props:{...shape.props,align:oldAlign}}}},[TLGeoShape_Versions_AddCloud]:{up:shape=>shape,down:shape=>{if("cloud"===shape.props.geo)return{...shape,props:{...shape.props,geo:"rectangle"}}}}}}),groupShapeProps={},groupShapeMigrations=defineMigrations({}),highlightShapeProps={color:DefaultColorStyle,size:DefaultSizeStyle,segments:arrayOf(DrawShapeSegment),isComplete:validation_boolean,isPen:validation_boolean},highlightShapeMigrations=defineMigrations({}),ImageShapeCrop=object({topLeft:vec2dModelValidator,bottomRight:vec2dModelValidator}),imageShapeProps={w:nonZeroNumber,h:nonZeroNumber,playing:validation_boolean,url:string,assetId:assetIdValidator.nullable(),crop:ImageShapeCrop.nullable()},TLImageShape_Versions_AddCropProp=2,imageShapeMigrations=defineMigrations({currentVersion:TLImageShape_Versions_AddCropProp,migrators:{[1]:{up:shape=>({...shape,props:{...shape.props,url:""}}),down:shape=>{const{url:_,...props}=shape.props;return{...shape,props}}},[TLImageShape_Versions_AddCropProp]:{up:shape=>({...shape,props:{...shape.props,crop:null}}),down:shape=>{const{crop:_,...props}=shape.props;return{...shape,props}}}}}),handleValidator=object({id:string,type:setEnum(new Set(["vertex","virtual","create"])),canBind:validation_boolean.optional(),canSnap:validation_boolean.optional(),index:string,x:number,y:number}),LineShapeSplineStyle=StyleProp.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),lineShapeProps={color:DefaultColorStyle,dash:DefaultDashStyle,size:DefaultSizeStyle,spline:LineShapeSplineStyle,handles:dict(string,handleValidator)},lineShapeVersions_AddSnapHandles=1,lineShapeMigrations=defineMigrations({currentVersion:lineShapeVersions_AddSnapHandles,migrators:{[lineShapeVersions_AddSnapHandles]:{up:record=>{const handles=deepCopy(record.props.handles);for(const id in handles)handles[id].canSnap=!0;return{...record,props:{...record.props,handles}}},down:record=>{const handles=deepCopy(record.props.handles);for(const id in handles)delete handles[id].canSnap;return{...record,props:{...record.props,handles}}}}}}),noteShapeProps={color:DefaultColorStyle,size:DefaultSizeStyle,font:DefaultFontStyle,align:DefaultHorizontalAlignStyle,verticalAlign:DefaultVerticalAlignStyle,growY:positiveNumber,url:string,text:string},TLNoteShape_Versions_AddVerticalAlign=4,noteShapeMigrations=defineMigrations({currentVersion:TLNoteShape_Versions_AddVerticalAlign,migrators:{[1]:{up:shape=>({...shape,props:{...shape.props,url:""}}),down:shape=>{const{url:_,...props}=shape.props;return{...shape,props}}},[2]:{up:shape=>{let newAlign=shape.props.align;return"justify"===newAlign&&(newAlign="start"),{...shape,props:{...shape.props,align:newAlign}}},down:shape=>({...shape})},[3]:{up:shape=>{let newAlign;switch(shape.props.align){case"start":newAlign="start-legacy";break;case"end":newAlign="end-legacy";break;default:newAlign="middle-legacy"}return{...shape,props:{...shape.props,align:newAlign}}},down:shape=>{let oldAlign;switch(shape.props.align){case"start-legacy":oldAlign="start";break;case"end-legacy":oldAlign="end";break;case"middle-legacy":oldAlign="middle";break;default:oldAlign=shape.props.align}return{...shape,props:{...shape.props,align:oldAlign}}}},[TLNoteShape_Versions_AddVerticalAlign]:{up:shape=>({...shape,props:{...shape.props,verticalAlign:"middle"}}),down:shape=>{const{verticalAlign:_,...props}=shape.props;return{...shape,props}}}}}),textShapeProps={color:DefaultColorStyle,size:DefaultSizeStyle,font:DefaultFontStyle,align:DefaultHorizontalAlignStyle,w:nonZeroNumber,text:string,scale:nonZeroNumber,autoSize:validation_boolean},TLTextShape_Versions_RemoveJustify=1,textShapeMigrations=defineMigrations({currentVersion:TLTextShape_Versions_RemoveJustify,migrators:{[TLTextShape_Versions_RemoveJustify]:{up:shape=>{let newAlign=shape.props.align;return"justify"===newAlign&&(newAlign="start"),{...shape,props:{...shape.props,align:newAlign}}},down:shape=>({...shape})}}}),videoShapeProps={w:nonZeroNumber,h:nonZeroNumber,time:number,playing:validation_boolean,url:string,assetId:assetIdValidator.nullable()},TLVideoShape_Versions_AddUrlProp=1,videoShapeMigrations=defineMigrations({currentVersion:TLVideoShape_Versions_AddUrlProp,migrators:{[TLVideoShape_Versions_AddUrlProp]:{up:shape=>({...shape,props:{...shape.props,url:""}}),down:shape=>{const{url:_,...props}=shape.props;return{...shape,props}}}}}),LANGUAGES=[{locale:"ar",label:""},{locale:"ca",label:"Catal"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"fa",label:""},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"he",label:""},{locale:"it",label:"Italiano"},{locale:"ja",label:""},{locale:"ko-kr",label:""},{locale:"ku",label:""},{locale:"hi-in",label:""},{locale:"hu",label:"Magyar"},{locale:"my",label:""},{locale:"ne",label:""},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:""},{locale:"th",label:""},{locale:"tr",label:"Trke"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ting Vit"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:" ()"}];const DEFAULT_LOCALE_REGIONS={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function getSupportedLocale(locale){const exactMatch=LANGUAGES.find((t=>t.locale===locale.toLowerCase()));if(exactMatch)return exactMatch.locale;const[language,region]=locale.split(/[-_]/).map((s=>s.toLowerCase()));if(region){const languageMatch=LANGUAGES.find((t=>t.locale===language));if(languageMatch)return languageMatch.locale}return language in DEFAULT_LOCALE_REGIONS?DEFAULT_LOCALE_REGIONS[language]:null}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),debug_flags_process=__webpack_require__("./node_modules/process/browser.js");const featureFlags={},debugFlags={preventDefaultLogging:createDebugValue("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:createDebugValue("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:createDebugValue("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:createDebugValue("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:createDebugValue("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:createDebugValue("debugSvg",{defaults:{all:!1}}),throwToBlob:createDebugValue("throwToBlob",{defaults:{all:!1}}),logMessages:createDebugValue("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:createDebugValue("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:createDebugValue("debugCursors",{defaults:{all:!1}}),forceSrgb:createDebugValue("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:createDebugValue("debugGeometry",{defaults:{all:!1}}),hideShapes:createDebugValue("hideShapes",{defaults:{all:!1}})};if("undefined"!=typeof window&&(window.tldrawLog=message=>{debugFlags.logMessages.set(debugFlags.logMessages.value.concat(message))}),"undefined"!=typeof Element){const nativeElementRemoveChild=Element.prototype.removeChild;react("element removal logging",(()=>{debugFlags.elementRemovalLogging.value?Element.prototype.removeChild=function(child){return console.warn("[tldraw] removing child:",child),nativeElementRemoveChild.call(this,child)}:Element.prototype.removeChild=nativeElementRemoveChild}))}function createDebugValue(name,{defaults,shouldStoreForSession=!0}){return function createDebugValueBase(def){const defaultValue=function getDefaultValue(def){switch(readEnv((()=>debug_flags_process.env.TLDRAW_ENV))??readEnv((()=>debug_flags_process.env.VERCEL_PUBLIC_TLDRAW_ENV))??readEnv((()=>debug_flags_process.env.NEXT_PUBLIC_TLDRAW_ENV))??"production"){case"production":return def.defaults.production??def.defaults.all;case"preview":case"staging":return def.defaults.staging??def.defaults.all;default:return def.defaults.development??def.defaults.all}}(def),storedValue=def.shouldStoreForSession?function getStoredInitialValue(name){try{return JSON.parse(window?.sessionStorage.getItem(`tldraw_debug:${name}`)??"null")}catch(err){return null}}(def.name):null,valueAtom=Atom_atom(`debug:${def.name}`,storedValue??defaultValue);"undefined"!=typeof window&&(def.shouldStoreForSession&&react(`debug:${def.name}`,(()=>{const currentValue=valueAtom.value;try{currentValue===defaultValue?window.sessionStorage.removeItem(`tldraw_debug:${def.name}`):window.sessionStorage.setItem(`tldraw_debug:${def.name}`,JSON.stringify(currentValue))}catch{}})),Object.defineProperty(window,`tldraw${def.name.replace(/^[a-z]/,(l=>l.toUpperCase()))}`,{get:()=>valueAtom.value,set(newValue){valueAtom.set(newValue)},configurable:!0}));return Object.assign(valueAtom,def)}({name,defaults,shouldStoreForSession})}function readEnv(fn){try{return fn()}catch{return null}}function loopToHtmlElement(elm){if(elm instanceof HTMLElement)return elm;if(elm.parentElement)return loopToHtmlElement(elm.parentElement);throw Error("Could not find a parent element of an HTML type!")}function preventDefault(event){event.preventDefault(),debugFlags.preventDefaultLogging.value&&console.warn("preventDefault called on event:",event)}function setPointerCapture(element,event){if(element.setPointerCapture(event.pointerId),debugFlags.pointerCaptureTracking.value){const trackingObj=debugFlags.pointerCaptureTrackingObject.value;trackingObj.set(element,(trackingObj.get(element)??0)+1)}debugFlags.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",element,event)}function releasePointerCapture(element,event){if(element.hasPointerCapture(event.pointerId)){if(element.releasePointerCapture(event.pointerId),debugFlags.pointerCaptureTracking.value){const trackingObj=debugFlags.pointerCaptureTrackingObject.value;1===trackingObj.get(element)?trackingObj.delete(element):trackingObj.has(element)?trackingObj.set(element,trackingObj.get(element)-1):console.warn("Release without capture")}debugFlags.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",element,event)}}const stopEventPropagation=e=>e.stopPropagation();function getPointerInfo(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}const EditorContext=node_modules_react.createContext({}),useEditor=()=>node_modules_react.useContext(EditorContext);const ContainerContext=(0,node_modules_react.createContext)(null);function ContainerProvider({container,children}){return(0,jsx_runtime.jsx)(ContainerContext.Provider,{value:container,children})}function useContainer(){return assertExists((0,node_modules_react.useContext)(ContainerContext),"useContainer used outside of <Tldraw />")}const INPUTS=["input","select","button","textarea"];function isFocusingInput(){const{activeElement}=document;return!(!activeElement||!(activeElement.getAttribute("contenteditable")||INPUTS.indexOf(activeElement.tagName.toLowerCase())>-1))}const initialState={error:null};class ErrorBoundary extends node_modules_react.Component{static getDerivedStateFromError(error){return{error}}state=initialState;componentDidCatch(error){this.props.onError?.(error)}render(){const{error}=this.state;if(null!==error){const{fallback:Fallback}=this.props;return(0,jsx_runtime.jsx)(Fallback,{error})}return this.props.children}}function OptionalErrorBoundary({children,fallback,...props}){return null===fallback?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):(0,jsx_runtime.jsx)(ErrorBoundary,{fallback,...props,children})}class ShapeWithPropsEquality{constructor(shape){this.shape=shape}equals(other){return this.shape?.isLocked===other?.shape?.isLocked&&this.shape?.props===other?.shape?.props&&this.shape?.meta===other?.shape?.meta}}const EvenInnererIndicator=({shape,util})=>useStateTracking("Indicator:"+shape.type,(()=>util.indicator(shape))),InnerIndicator=({editor,id})=>{const shape=useValue("shape",(()=>new ShapeWithPropsEquality(editor.store.get(id))),[editor,id]),{ShapeIndicatorErrorFallback}=useEditorComponents();return!shape.shape||shape.shape.isLocked?null:(0,jsx_runtime.jsx)(OptionalErrorBoundary,{fallback:ShapeIndicatorErrorFallback,onError:error=>editor.annotateError(error,{origin:"react.shapeIndicator",willCrashApp:!1}),children:(0,jsx_runtime.jsx)(EvenInnererIndicator,{shape:shape.shape,util:editor.getShapeUtil(shape.shape)},shape.shape.id)})},ShapeIndicator=node_modules_react.memo((({id,className,color,opacity})=>{const editor=useEditor(),transform=useValue("transform",(()=>{const pageTransform=editor.getShapePageTransform(id);return pageTransform?pageTransform.toCssString():""}),[editor,id]);return(0,jsx_runtime.jsx)("svg",{className:classnames_default()("tl-overlays__item",className),children:(0,jsx_runtime.jsx)("g",{className:"tl-shape-indicator",transform,stroke:color??"var(--color-selected)",opacity,children:(0,jsx_runtime.jsx)(InnerIndicator,{editor,id})})})}));function DefaultBackground(){return(0,jsx_runtime.jsx)("div",{className:"tl-background"})}function useTransform(ref,x,y,scale,rotate,additionalOffset){(0,node_modules_react.useLayoutEffect)((()=>{const elm=ref.current;if(!elm)return;if(void 0===x)return;let trans=`translate(${x}px, ${y}px)`;void 0!==scale&&(trans+=` scale(${scale})`),void 0!==rotate&&(trans+=` rotate(${rotate}rad)`),additionalOffset&&(trans+=` translate(${additionalOffset.x}px, ${additionalOffset.y}px)`),elm.style.transform=trans}))}const EASINGS={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t<=0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t>=1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t<=0?0:t>=1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2};class Vec2d_Vec2d{constructor(x=0,y=0,z=1){this.x=x,this.y=y,this.z=z}get pressure(){return this.z}set(x=this.x,y=this.y,z=this.z){return this.x=x,this.y=y,this.z=z,this}setTo({x=0,y=0,z=1}){return this.x=x,this.y=y,this.z=z,this}rot(r){if(0===r)return this;const{x,y}=this,s=Math.sin(r),c=Math.cos(r);return this.x=x*c-y*s,this.y=x*s+y*c,this}rotWith(C,r){if(0===r)return this;const x=this.x-C.x,y=this.y-C.y,s=Math.sin(r),c=Math.cos(r);return this.x=C.x+(x*c-y*s),this.y=C.y+(x*s+y*c),this}clone(){const{x,y,z}=this;return new Vec2d_Vec2d(x,y,z)}sub(V){return this.x-=V.x,this.y-=V.y,this}subXY(x,y){return this.x-=x,this.y-=y,this}subScalar(n){return this.x-=n,this.y-=n,this}add(V){return this.x+=V.x,this.y+=V.y,this}addXY(x,y){return this.x+=x,this.y+=y,this}addScalar(n){return this.x+=n,this.y+=n,this}clamp(min,max){return this.x=Math.max(this.x,min),this.y=Math.max(this.y,min),void 0!==max&&(this.x=Math.min(this.x,max),this.y=Math.min(this.y,max)),this}div(t){return this.x/=t,this.y/=t,this}divV(V){return this.x/=V.x,this.y/=V.y,this}mul(t){return this.x*=t,this.y*=t,this}mulV(V){return this.x*=V.x,this.y*=V.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(B,distance){const tan=Vec2d_Vec2d.Tan(B,this);return this.add(tan.mul(distance))}neg(){return this.x*=-1,this.y*=-1,this}cross(V){return this.x=this.y*V.z-this.z*V.y,this.y=this.z*V.x-this.x*V.z,this}dpr(V){return Vec2d_Vec2d.Dpr(this,V)}cpr(V){return Vec2d_Vec2d.Cpr(this,V)}len2(){return Vec2d_Vec2d.Len2(this)}len(){return Vec2d_Vec2d.Len(this)}pry(V){return Vec2d_Vec2d.Pry(this,V)}per(){const{x,y}=this;return this.x=y,this.y=-x,this}uni(){return Vec2d_Vec2d.Uni(this)}tan(V){return Vec2d_Vec2d.Tan(this,V)}dist(V){return Vec2d_Vec2d.Dist(this,V)}distanceToLineSegment(A,B){return Vec2d_Vec2d.DistanceToLineSegment(A,B,this)}slope(B){return Vec2d_Vec2d.Slope(this,B)}snapToGrid(gridSize){return this.x=Math.round(this.x/gridSize)*gridSize,this.y=Math.round(this.y/gridSize)*gridSize,this}angle(B){return Vec2d_Vec2d.Angle(this,B)}toAngle(){return Vec2d_Vec2d.ToAngle(this)}lrp(B,t){return this.x=this.x+(B.x-this.x)*t,this.y=this.y+(B.y-this.y)*t,this}equals(B){return Vec2d_Vec2d.Equals(this,B)}equalsXY(x,y){return Vec2d_Vec2d.EqualsXY(this,x,y)}norm(){const l=this.len();return this.x=0===l?0:this.x/l,this.y=0===l?0:this.y/l,this}toFixed(){return Vec2d_Vec2d.ToFixed(this)}toString(){return Vec2d_Vec2d.ToString(Vec2d_Vec2d.ToFixed(this))}toJson(){return Vec2d_Vec2d.ToJson(this)}toArray(){return Vec2d_Vec2d.ToArray(this)}static Add(A,B){return new Vec2d_Vec2d(A.x+B.x,A.y+B.y)}static AddXY(A,x,y){return new Vec2d_Vec2d(A.x+x,A.y+y)}static Sub(A,B){return new Vec2d_Vec2d(A.x-B.x,A.y-B.y)}static SubXY(A,x,y){return new Vec2d_Vec2d(A.x-x,A.y-y)}static AddScalar(A,n){return new Vec2d_Vec2d(A.x+n,A.y+n)}static SubScalar(A,n){return new Vec2d_Vec2d(A.x-n,A.y-n)}static Div(A,t){return new Vec2d_Vec2d(A.x/t,A.y/t)}static Mul(A,t){return new Vec2d_Vec2d(A.x*t,A.y*t)}static DivV(A,B){return new Vec2d_Vec2d(A.x/B.x,A.y/B.y)}static MulV(A,B){return new Vec2d_Vec2d(A.x*B.x,A.y*B.y)}static Neg(A){return new Vec2d_Vec2d(-A.x,-A.y)}static Per(A){return new Vec2d_Vec2d(A.y,-A.x)}static Dist2(A,B){return Vec2d_Vec2d.Sub(A,B).len2()}static Abs(A){return new Vec2d_Vec2d(Math.abs(A.x),Math.abs(A.y))}static Dist(A,B){return Math.hypot(A.y-B.y,A.x-B.x)}static Dpr(A,B){return A.x*B.x+A.y*B.y}static Cross(A,V){return new Vec2d_Vec2d(A.y*V.z-A.z*V.y,A.z*V.x-A.x*V.z)}static Cpr(A,B){return A.x*B.y-B.x*A.y}static Len2(A){return A.x*A.x+A.y*A.y}static Len(A){return Math.hypot(A.x,A.y)}static Pry(A,B){return Vec2d_Vec2d.Dpr(A,B)/Vec2d_Vec2d.Len(B)}static Uni(A){return Vec2d_Vec2d.Div(A,Vec2d_Vec2d.Len(A))}static Tan(A,B){return Vec2d_Vec2d.Uni(Vec2d_Vec2d.Sub(A,B))}static Min(A,B){return new Vec2d_Vec2d(Math.min(A.x,B.x),Math.min(A.y,B.y))}static Max(A,B){return new Vec2d_Vec2d(Math.max(A.x,B.x),Math.max(A.y,B.y))}static From({x,y,z=1}){return new Vec2d_Vec2d(x,y,z)}static FromArray(v){return new Vec2d_Vec2d(v[0],v[1])}static Rot(A,r=0){const s=Math.sin(r),c=Math.cos(r);return new Vec2d_Vec2d(A.x*c-A.y*s,A.x*s+A.y*c)}static RotWith(A,C,r){const x=A.x-C.x,y=A.y-C.y,s=Math.sin(r),c=Math.cos(r);return new Vec2d_Vec2d(C.x+(x*c-y*s),C.y+(x*s+y*c))}static NearestPointOnLineThroughPoint(A,u,P){return Vec2d_Vec2d.Mul(u,Vec2d_Vec2d.Sub(P,A).pry(u)).add(A)}static NearestPointOnLineSegment(A,B,P,clamp=!0){const u=Vec2d_Vec2d.Tan(B,A),C=Vec2d_Vec2d.Add(A,Vec2d_Vec2d.Mul(u,Vec2d_Vec2d.Sub(P,A).pry(u)));if(clamp){if(C.x<Math.min(A.x,B.x))return Vec2d_Vec2d.Cast(A.x<B.x?A:B);if(C.x>Math.max(A.x,B.x))return Vec2d_Vec2d.Cast(A.x>B.x?A:B);if(C.y<Math.min(A.y,B.y))return Vec2d_Vec2d.Cast(A.y<B.y?A:B);if(C.y>Math.max(A.y,B.y))return Vec2d_Vec2d.Cast(A.y>B.y?A:B)}return C}static DistanceToLineThroughPoint(A,u,P){return Vec2d_Vec2d.Dist(P,Vec2d_Vec2d.NearestPointOnLineThroughPoint(A,u,P))}static DistanceToLineSegment(A,B,P,clamp=!0){return Vec2d_Vec2d.Dist(P,Vec2d_Vec2d.NearestPointOnLineSegment(A,B,P,clamp))}static Snap(A,step=1){return new Vec2d_Vec2d(Math.round(A.x/step)*step,Math.round(A.y/step)*step)}static Cast(A){return A instanceof Vec2d_Vec2d?A:Vec2d_Vec2d.From(A)}static Slope(A,B){return A.x===B.y?NaN:(A.y-B.y)/(A.x-B.x)}static Angle(A,B){return Math.atan2(B.y-A.y,B.x-A.x)}static Lrp(A,B,t){return Vec2d_Vec2d.Sub(B,A).mul(t).add(A)}static Med(A,B){return new Vec2d_Vec2d((A.x+B.x)/2,(A.y+B.y)/2)}static Equals(A,B){return Math.abs(A.x-B.x)<1e-4&&Math.abs(A.y-B.y)<1e-4}static EqualsXY(A,x,y){return A.x===x&&A.y===y}static Clockwise(A,B,C){return(C.x-A.x)*(B.y-A.y)-(B.x-A.x)*(C.y-A.y)<0}static Rescale(A,n){const l=Vec2d_Vec2d.Len(A);return new Vec2d_Vec2d(n*A.x/l,n*A.y/l)}static ScaleWithOrigin(A,scale,origin){return Vec2d_Vec2d.Sub(A,origin).mul(scale).add(origin)}static ToFixed(A,n=2){return new Vec2d_Vec2d(+A.x.toFixed(n),+A.y.toFixed(n),+A.z.toFixed(n))}static Nudge(A,B,distance){return Vec2d_Vec2d.Add(A,Vec2d_Vec2d.Tan(B,A).mul(distance))}static ToString(A){return`${A.x}, ${A.y}`}static ToAngle(A){let r=Math.atan2(A.y,A.x);return r<0&&(r+=2*Math.PI),r}static FromAngle(r,length=1){return new Vec2d_Vec2d(Math.cos(r)*length,Math.sin(r)*length)}static ToArray(A){return[A.x,A.y,A.z]}static ToJson(A){const{x,y,z}=A;return{x,y,z}}static Average(arr){const len=arr.length,avg=new Vec2d_Vec2d(0,0);for(let i=0;i<len;i++)avg.add(arr[i]);return avg.div(len)}static Clamp(A,min,max){return void 0===max?new Vec2d_Vec2d(Math.min(Math.max(A.x,min)),Math.min(Math.max(A.y,min))):new Vec2d_Vec2d(Math.min(Math.max(A.x,min),max),Math.min(Math.max(A.y,min),max))}static PointsBetween(A,B,steps=6){const results=[];for(let i=0;i<steps;i++){const t=EASINGS.easeInQuad(i/(steps-1)),point=Vec2d_Vec2d.Lrp(A,B,t);point.z=Math.min(1,.5+.65*Math.abs(.5-ease(t))),results.push(point)}return results}static SnapToGrid(A,gridSize=8){return new Vec2d_Vec2d(Math.round(A.x/gridSize)*gridSize,Math.round(A.y/gridSize)*gridSize)}}const ease=t=>t<.5?2*t*t:(4-2*t)*t-1;class Box2d_Box2d{constructor(x=0,y=0,w=0,h=0){this.x=x,this.y=y,this.w=w,this.h=h}x=0;y=0;w=0;h=0;get point(){return new Vec2d_Vec2d(this.x,this.y)}set point(val){this.x=val.x,this.y=val.y}get minX(){return this.x}set minX(n){this.x=n}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(n){this.y=n}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(n){this.w=n}get height(){return this.h}set height(n){this.h=n}get aspectRatio(){return this.width/this.height}get center(){return new Vec2d_Vec2d(this.midX,this.midY)}set center(v){this.minX=v.x-this.width/2,this.minY=v.y-this.height/2}get corners(){return[new Vec2d_Vec2d(this.minX,this.minY),new Vec2d_Vec2d(this.maxX,this.minY),new Vec2d_Vec2d(this.maxX,this.maxY),new Vec2d_Vec2d(this.minX,this.maxY)]}get snapPoints(){return[new Vec2d_Vec2d(this.minX,this.minY),new Vec2d_Vec2d(this.maxX,this.minY),new Vec2d_Vec2d(this.maxX,this.maxY),new Vec2d_Vec2d(this.minX,this.maxY),this.center]}get sides(){const{corners}=this;return[[corners[0],corners[1]],[corners[1],corners[2]],[corners[2],corners[3]],[corners[3],corners[0]]]}get size(){return new Vec2d_Vec2d(this.w,this.h)}toFixed(){return this.x=toPrecision(this.x),this.y=toPrecision(this.y),this.w=toPrecision(this.w),this.h=toPrecision(this.h),this}setTo(B){return this.x=B.x,this.y=B.y,this.w=B.w,this.h=B.h,this}set(x=0,y=0,w=0,h=0){return this.x=x,this.y=y,this.w=w,this.h=h,this}expand(A){const minX=Math.min(this.minX,A.minX),minY=Math.min(this.minY,A.minY),maxX=Math.max(this.maxX,A.maxX),maxY=Math.max(this.maxY,A.maxY);return this.x=minX,this.y=minY,this.w=maxX-minX,this.h=maxY-minY,this}expandBy(n){return this.x-=n,this.y-=n,this.w+=2*n,this.h+=2*n,this}scale(n){return this.x/=n,this.y/=n,this.w/=n,this.h/=n,this}clone(){const{x,y,w,h}=this;return new Box2d_Box2d(x,y,w,h)}translate(delta){return this.x+=delta.x,this.y+=delta.y,this}snapToGrid(size){const minX=Math.round(this.minX/size)*size,minY=Math.round(this.minY/size)*size,maxX=Math.round(this.maxX/size)*size,maxY=Math.round(this.maxY/size)*size;this.minX=minX,this.minY=minY,this.width=Math.max(1,maxX-minX),this.height=Math.max(1,maxY-minY)}collides(B){return Box2d_Box2d.Collides(this,B)}contains(B){return Box2d_Box2d.Contains(this,B)}includes(B){return Box2d_Box2d.Includes(this,B)}containsPoint(V,margin=0){return Box2d_Box2d.ContainsPoint(this,V,margin)}getHandlePoint(handle){switch(handle){case"top_left":return new Vec2d_Vec2d(this.minX,this.minY);case"top_right":return new Vec2d_Vec2d(this.maxX,this.minY);case"bottom_left":return new Vec2d_Vec2d(this.minX,this.maxY);case"bottom_right":return new Vec2d_Vec2d(this.maxX,this.maxY);case"top":return new Vec2d_Vec2d(this.midX,this.minY);case"right":return new Vec2d_Vec2d(this.maxX,this.midY);case"bottom":return new Vec2d_Vec2d(this.midX,this.maxY);case"left":return new Vec2d_Vec2d(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(handle,dx,dy){const{minX:a0x,minY:a0y,maxX:a1x,maxY:a1y}=this;let{minX:b0x,minY:b0y,maxX:b1x,maxY:b1y}=this;switch(handle){case"left":case"top_left":case"bottom_left":b0x+=dx;break;case"right":case"top_right":case"bottom_right":b1x+=dx}switch(handle){case"top":case"top_left":case"top_right":b0y+=dy;break;case"bottom":case"bottom_left":case"bottom_right":b1y+=dy}if((b1x-b0x)/(a1x-a0x)<0){const t=b1x;b1x=b0x,b0x=t}if((b1y-b0y)/(a1y-a0y)<0){const t=b1y;b1y=b0y,b0y=t}this.minX=b0x,this.minY=b0y,this.width=Math.abs(b1x-b0x),this.height=Math.abs(b1y-b0y)}union(box){const minX=Math.min(this.minX,box.x),minY=Math.min(this.minY,box.y),maxX=Math.max(this.maxX,box.w+box.x),maxY=Math.max(this.maxY,box.h+box.y);return this.x=minX,this.y=minY,this.width=maxX-minX,this.height=maxY-minY,this}static From(box){return new Box2d_Box2d(box.x,box.y,box.w,box.h)}static FromPoints(points){if(0===points.length)return new Box2d_Box2d;let point,minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0,n=points.length;i<n;i++)point=points[i],minX=Math.min(point.x,minX),minY=Math.min(point.y,minY),maxX=Math.max(point.x,maxX),maxY=Math.max(point.y,maxY);return new Box2d_Box2d(minX,minY,maxX-minX,maxY-minY)}static Expand(A,B){const minX=Math.min(B.minX,A.minX),minY=Math.min(B.minY,A.minY),maxX=Math.max(B.maxX,A.maxX),maxY=Math.max(B.maxY,A.maxY);return new Box2d_Box2d(minX,minY,maxX-minX,maxY-minY)}static ExpandBy(A,n){return new Box2d_Box2d(A.minX-n,A.minY-n,A.width+2*n,A.height+2*n)}static Collides=(A,B)=>!(A.maxX<B.minX||A.minX>B.maxX||A.maxY<B.minY||A.minY>B.maxY);static Contains=(A,B)=>A.minX<B.minX&&A.minY<B.minY&&A.maxY>B.maxY&&A.maxX>B.maxX;static Includes=(A,B)=>Box2d_Box2d.Collides(A,B)||Box2d_Box2d.Contains(A,B);static ContainsPoint=(A,B,margin=0)=>!(B.x<A.minX-margin||B.y<A.minY-margin||B.x>A.maxX+margin||B.y>A.maxY+margin);static Common=boxes=>{let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0;i<boxes.length;i++){const B=boxes[i];minX=Math.min(minX,B.minX),minY=Math.min(minY,B.minY),maxX=Math.max(maxX,B.maxX),maxY=Math.max(maxY,B.maxY)}return new Box2d_Box2d(minX,minY,maxX-minX,maxY-minY)};static Sides=(A,inset=0)=>{const{corners}=A;return[[corners[0],corners[1]],[corners[1],corners[2]],[corners[2],corners[3]],[corners[3],corners[0]]]};static Resize(box,handle,dx,dy,isAspectRatioLocked=!1){const{minX:a0x,minY:a0y,maxX:a1x,maxY:a1y}=box;let{minX:b0x,minY:b0y,maxX:b1x,maxY:b1y}=box;switch(handle){case"left":case"top_left":case"bottom_left":b0x+=dx;break;case"right":case"top_right":case"bottom_right":b1x+=dx}switch(handle){case"top":case"top_left":case"top_right":b0y+=dy;break;case"bottom":case"bottom_left":case"bottom_right":b1y+=dy}const scaleX=(b1x-b0x)/(a1x-a0x),scaleY=(b1y-b0y)/(a1y-a0y),flipX=scaleX<0,flipY=scaleY<0;if(isAspectRatioLocked){const aspectRatio=(a1x-a0x)/(a1y-a0y),bw=Math.abs(b1x-b0x),bh=Math.abs(b1y-b0y),tw=bw*(scaleY<0?1:-1)*(1/aspectRatio),th=bh*(scaleX<0?1:-1)*aspectRatio,isTall=aspectRatio<bw/bh;switch(handle){case"top_left":isTall?b0y=b1y+tw:b0x=b1x+th;break;case"top_right":isTall?b0y=b1y+tw:b1x=b0x-th;break;case"bottom_right":isTall?b1y=b0y-tw:b1x=b0x-th;break;case"bottom_left":isTall?b1y=b0y-tw:b0x=b1x+th;break;case"bottom":case"top":{const m=(b0x+b1x)/2,w=bh*aspectRatio;b0x=m-w/2,b1x=m+w/2;break}case"left":case"right":{const m=(b0y+b1y)/2,h=bw/aspectRatio;b0y=m-h/2,b1y=m+h/2;break}}}if(flipX){const t=b1x;b1x=b0x,b0x=t}if(flipY){const t=b1y;b1y=b0y,b0y=t}const final=new Box2d_Box2d(b0x,b0y,Math.abs(b1x-b0x),Math.abs(b1y-b0y));return{box:final,scaleX:+(final.width/box.width*(scaleX>0?1:-1)).toFixed(5),scaleY:+(final.height/box.height*(scaleY>0?1:-1)).toFixed(5)}}equals(other){return Box2d_Box2d.Equals(this,other)}static Equals(a,b){return b.x===a.x&&b.y===a.y&&b.w===a.w&&b.h===a.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(other){return new Box2d_Box2d(other.x,other.y,Math.max(1,other.w),Math.max(1,other.h))}}function precise(A){return`${toDomPrecision(A.x)},${toDomPrecision(A.y)} `}function average(A,B){return`${toDomPrecision((A.x+B.x)/2)},${toDomPrecision((A.y+B.y)/2)} `}const utils_PI=Math.PI,TAU=utils_PI/2,utils_PI2=2*utils_PI,EPSILON=Math.PI/180,SIN=Math.sin;function clamp(n,min,max){return Math.max(min,void 0!==max?Math.min(n,max):n)}function toPrecision(n,precision=1e10){return n?Math.round(n*precision)/precision:0}function approximately(a,b,precision=1e-6){return Math.abs(a-b)<=precision}function perimeterOfEllipse(rx,ry){const h=Math.pow(rx-ry,2)/Math.pow(rx+ry,2);return utils_PI*(rx+ry)*(1+3*h/(10+Math.sqrt(4-3*h)))}function canonicalizeRotation(a){return(a%=utils_PI2)<0?a+=utils_PI2:0===a&&(a=0),a}function clockwiseAngleDist(a0,a1){return(a0=canonicalizeRotation(a0))>(a1=canonicalizeRotation(a1))&&(a1+=utils_PI2),a1-a0}function counterClockwiseAngleDist(a0,a1){return utils_PI2-clockwiseAngleDist(a0,a1)}function shortAngleDist(a0,a1){const da=(a1-a0)%utils_PI2;return 2*da%utils_PI2-da}function angleDelta(a0,a1){return shortAngleDist(a0,a1)}function clampRadians(r){return(utils_PI2+r)%utils_PI2}function snapAngle(r,segments){const seg=utils_PI2/segments;let ang=Math.floor((clampRadians(r)+seg/2)/seg)*seg%utils_PI2;return ang<utils_PI&&(ang+=utils_PI2),ang>utils_PI&&(ang-=utils_PI2),ang}function areAnglesCompatible(a,b){return a===b||approximately(a%(Math.PI/2)-b%(Math.PI/2),0)}function degreesToRadians(d){return d*utils_PI/180}function getPointOnCircle(cx,cy,r,a){return new Vec2d_Vec2d(cx+r*Math.cos(a),cy+r*Math.sin(a))}function getPolygonVertices(width,height,sides){const cx=width/2,cy=height/2,pointsOnPerimeter=[];let minX=1/0,minY=1/0;for(let i=0;i<sides;i++){const t=i*(utils_PI2/sides)-TAU,x=cx+cx*Math.cos(t),y=cy+cy*Math.sin(t);x<minX&&(minX=x),y<minY&&(minY=y),pointsOnPerimeter.push(new Vec2d_Vec2d(x,y))}if(0!==minX||0!==minY)for(let i=0;i<pointsOnPerimeter.length;i++){const pt=pointsOnPerimeter[i];pt.x-=minX,pt.y-=minY}return pointsOnPerimeter}function rangesOverlap(a0,a1,b0,b1){return a0<b1&&b0<a1}function rangeIntersection(a0,a1,b0,b1){const min=Math.max(a0,b0),max=Math.min(a1,b1);return min<=max?[min,max]:null}const getStarBounds=(sides,w,h)=>{const step=utils_PI2/sides/2,rightMostIndex=2*Math.floor(sides/4),leftMostIndex=2*sides-rightMostIndex,bottomMostIndex=2*Math.floor(sides/2),maxX=Math.cos(rightMostIndex*step-TAU)*w/2,minX=Math.cos(leftMostIndex*step-TAU)*w/2,minY=Math.sin(0*step-TAU)*h/2,maxY=Math.sin(bottomMostIndex*step-TAU)*h/2;return new Box2d_Box2d(0,0,maxX-minX,maxY-minY)};function cross(x,y,z){return(y.x-x.x)*(z.y-x.y)-(z.x-x.x)*(y.y-x.y)}function pointInPolygon(A,points){let a,b,windingNumber=0;for(let i=0;i<points.length;i++)a=points[i],b=points[(i+1)%points.length],a.y<=A.y?b.y>A.y&&cross(a,b,A)>0&&(windingNumber+=1):b.y<=A.y&&cross(a,b,A)<0&&(windingNumber-=1);return 0!==windingNumber}function toDomPrecision(v){return+v.toFixed(4)}function toFixed(v){return+v.toFixed(2)}const isSafeFloat=n=>Math.abs(n)<Number.MAX_SAFE_INTEGER,DefaultBrush=({brush,color,opacity})=>{const rSvg=(0,node_modules_react.useRef)(null);useTransform(rSvg,brush.x,brush.y);const w=toDomPrecision(Math.max(1,brush.w)),h=toDomPrecision(Math.max(1,brush.h));return(0,jsx_runtime.jsx)("svg",{className:"tl-overlays__item",ref:rSvg,children:color?(0,jsx_runtime.jsxs)("g",{className:"tl-brush",opacity,children:[(0,jsx_runtime.jsx)("rect",{width:w,height:h,fill:color,opacity:.75}),(0,jsx_runtime.jsx)("rect",{width:w,height:h,fill:"none",stroke:color,opacity:.1})]}):(0,jsx_runtime.jsx)("rect",{className:"tl-brush tl-brush__default",width:w,height:h})})},DefaultCollaboratorHint=({className,zoom,point,color,viewport,opacity=1})=>{const rSvg=(0,node_modules_react.useRef)(null);return useTransform(rSvg,clamp(point.x,viewport.minX+5/zoom,viewport.maxX-5/zoom),clamp(point.y,viewport.minY+5/zoom,viewport.maxY-5/zoom),1/zoom,Vec2d_Vec2d.Angle(viewport.center,point)),(0,jsx_runtime.jsxs)("svg",{ref:rSvg,className:classnames_default()("tl-overlays__item",className),children:[(0,jsx_runtime.jsx)("use",{href:"#cursor_hint",color,strokeWidth:3,stroke:"var(--color-background)"}),(0,jsx_runtime.jsx)("use",{href:"#cursor_hint",color,opacity})]})},DefaultCursor=(0,node_modules_react.memo)((({className,zoom,point,color,name,chatMessage})=>{const rCursor=(0,node_modules_react.useRef)(null);return useTransform(rCursor,point?.x,point?.y,1/zoom),point?(0,jsx_runtime.jsxs)("div",{ref:rCursor,className:classnames_default()("tl-overlays__item",className),children:[(0,jsx_runtime.jsx)("svg",{className:"tl-cursor",children:(0,jsx_runtime.jsx)("use",{href:"#cursor",color})}),chatMessage?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[name&&(0,jsx_runtime.jsx)("div",{className:"tl-nametag-title",style:{color},children:name}),(0,jsx_runtime.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:color},children:chatMessage})]}):name&&(0,jsx_runtime.jsx)("div",{className:"tl-nametag",style:{backgroundColor:color},children:name})]}):null})),runtime={openWindow:(url,target)=>window.open(url,target,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>await(window.__tldraw__hardReset?.())};function hardResetEditor(){runtime.hardReset()}function DefaultErrorFallback_noop(){}const DefaultErrorFallback=({error,editor})=>{const containerRef=(0,node_modules_react.useRef)(null),[shouldShowError,setShouldShowError]=(0,node_modules_react.useState)(!1),[didCopy,setDidCopy]=(0,node_modules_react.useState)(!1),[shouldShowResetConfirmation,setShouldShowResetConfirmation]=(0,node_modules_react.useState)(!1),errorMessage=error instanceof Error?error.message:String(error),errorStack=error instanceof Error?error.stack:null,isDarkModeFromApp=useValue("isDarkMode",(()=>{try{if(editor)return editor.user.isDarkMode}catch{}return null}),[editor]),[isDarkMode,setIsDarkMode]=(0,node_modules_react.useState)(null);(0,node_modules_react.useLayoutEffect)((()=>{null!==isDarkModeFromApp&&setIsDarkMode(isDarkModeFromApp);let parent=containerRef.current?.parentElement,foundParentThemeClass=!1;for(;parent;){if(parent.classList.contains("tl-theme__dark")||parent.classList.contains("tl-theme__light")){foundParentThemeClass=!0;break}parent=parent.parentElement}setIsDarkMode(foundParentThemeClass?null:window.matchMedia("(prefers-color-scheme: dark)").matches)}),[isDarkModeFromApp]),(0,node_modules_react.useEffect)((()=>{if(didCopy){const timeout=setTimeout((()=>{setDidCopy(!1)}),2e3);return()=>clearTimeout(timeout)}}),[didCopy]);const url=new URL("https://github.com/tldraw/tldraw/issues/new");return url.searchParams.set("title",errorMessage),url.searchParams.set("labels","bug"),url.searchParams.set("body",`Hey, I ran into an error while using tldraw:\n\n\`\`\`js\n${errorStack??errorMessage}\n\`\`\`\n\nMy browser: ${navigator.userAgent}`),(0,jsx_runtime.jsxs)("div",{ref:containerRef,className:classnames_default()("tl-container tl-error-boundary",null===isDarkMode?"":isDarkMode?"tl-theme__dark":"tl-theme__light"),children:[(0,jsx_runtime.jsx)("div",{className:"tl-error-boundary__overlay"}),editor&&(0,jsx_runtime.jsx)(ErrorBoundary,{onError:DefaultErrorFallback_noop,fallback:()=>null,children:(0,jsx_runtime.jsx)(EditorContext.Provider,{value:editor,children:(0,jsx_runtime.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:(0,jsx_runtime.jsx)(Canvas,{})})})}),(0,jsx_runtime.jsx)("div",{className:classnames_default()("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":shouldShowError&&!shouldShowResetConfirmation}),children:shouldShowResetConfirmation?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{children:"Are you sure?"}),(0,jsx_runtime.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,jsx_runtime.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setShouldShowResetConfirmation(!1),children:"Cancel"}),(0,jsx_runtime.jsx)("button",{className:"tl-error-boundary__reset",onClick:async()=>{hardResetEditor()},children:"Reset data"})]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{children:"Something's gone wrong."}),(0,jsx_runtime.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,jsx_runtime.jsx)("a",{href:url.toString(),children:"create a GitHub issue"})," or"," ",(0,jsx_runtime.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),shouldShowError&&(0,jsx_runtime.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,jsx_runtime.jsx)("pre",{children:(0,jsx_runtime.jsx)("code",{children:errorStack??errorMessage})}),(0,jsx_runtime.jsx)("button",{onClick:()=>{const textarea=document.createElement("textarea");textarea.value=errorStack??errorMessage,document.body.appendChild(textarea),textarea.select(),document.execCommand("copy"),textarea.remove(),setDidCopy(!0)},children:didCopy?"Copied!":"Copy"})]}),(0,jsx_runtime.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setShouldShowError(!shouldShowError),children:shouldShowError?"Hide details":"Show details"}),(0,jsx_runtime.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,jsx_runtime.jsx)("button",{className:"tl-error-boundary__reset",onClick:()=>setShouldShowResetConfirmation(!0),children:"Reset data"}),(0,jsx_runtime.jsx)("button",{className:"tl-error-boundary__refresh",onClick:()=>{!function refreshPage(){runtime.refreshPage()}()},children:"Refresh Page"})]})]})]})})]})},MAX_PAGES=40,ANIMATION_MEDIUM_MS=320,ZOOMS=[.1,.25,.5,1,2,4,8],MAX_ZOOM=8,DRAG_DISTANCE=4,SVG_PADDING=32,HASH_PATTERN_ZOOM_NAMES={};for(let zoom=1;zoom<=Math.ceil(MAX_ZOOM);zoom++)HASH_PATTERN_ZOOM_NAMES[zoom+"_dark"]=`hash_pattern_zoom_${zoom}_dark`,HASH_PATTERN_ZOOM_NAMES[zoom+"_light"]=`hash_pattern_zoom_${zoom}_light`;const DEFAULT_ANIMATION_OPTIONS={duration:0,easing:EASINGS.easeInOutCubic},CAMERA_SLIDE_FRICTION=.09,GRID_STEPS=[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],COLLABORATOR_INACTIVE_TIMEOUT=6e4,COLLABORATOR_IDLE_TIMEOUT=3e3,INTERNAL_POINTER_IDS_CAMERA_MOVE=-10,HIT_TEST_MARGIN=8,DefaultGrid=({x,y,z,size})=>(0,jsx_runtime.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("defs",{children:GRID_STEPS.map((({min,mid,step},i)=>{const s=step*size*z,xo=.5+x*z,yo=.5+y*z,gxo=xo>0?xo%s:s+xo%s,gyo=yo>0?yo%s:s+yo%s,opacity=z<mid?modulate(z,[min,mid],[0,1]):1;return(0,jsx_runtime.jsx)("pattern",{id:`grid-${step}`,width:s,height:s,patternUnits:"userSpaceOnUse",children:(0,jsx_runtime.jsx)("circle",{className:"tl-grid-dot",cx:gxo,cy:gyo,r:1,opacity})},`grid-pattern-${i}`)}))}),GRID_STEPS.map((({step},i)=>(0,jsx_runtime.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${step})`},`grid-rect-${i}`)))]}),DefaultHandle=({handle,isCoarse,className,zoom})=>{const bgRadius=(isCoarse?20:12)/zoom,fgRadius=("create"===handle.type&&isCoarse?3:4)/zoom;return(0,jsx_runtime.jsxs)("g",{className:classnames_default()("tl-handle",{"tl-handle__virtual":"virtual"===handle.type,"tl-handle__create":"create"===handle.type},className),children:[(0,jsx_runtime.jsx)("circle",{className:"tl-handle__bg",r:bgRadius}),(0,jsx_runtime.jsx)("circle",{className:"tl-handle__fg",r:fgRadius})]})},DefaultHandles=({children})=>(0,jsx_runtime.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children}),DefaultHoveredShapeIndicator=({shapeId})=>(0,jsx_runtime.jsx)(ShapeIndicator,{className:"tl-user-indicator__hovered",id:shapeId});function getSvgPathFromPoints(points,closed=!0){const len=points.length;if(len<2)return"";let a=points[0],b=points[1];if(2===len)return`M${precise(a)}L${precise(b)}`;let result="";for(let i=2,max=len-1;i<max;i++)a=points[i],b=points[i+1],result+=average(a,b);return closed?`M${average(points[0],points[1])}Q${precise(points[1])}${average(points[1],points[2])}T${result}${average(points[len-1],points[0])}${average(points[0],points[1])}Z`:`M${precise(points[0])}Q${precise(points[1])}${average(points[1],points[2])}${points.length>3?"T":""}${result}L${precise(points[len-1])}`}const DefaultScribble=({scribble,zoom,color,opacity,className})=>scribble.points.length?(0,jsx_runtime.jsx)("svg",{className:className?classnames_default()("tl-overlays__item",className):className,children:(0,jsx_runtime.jsx)("path",{className:"tl-scribble",d:getSvgPathFromPoints(scribble.points,!1),stroke:color??`var(--color-${scribble.color})`,fill:"none",strokeWidth:8/zoom,opacity:opacity??scribble.opacity})}):null,DefaultSelectionBackground=({bounds,rotation})=>{const rDiv=node_modules_react.useRef(null);return useTransform(rDiv,bounds.x,bounds.y,1,rotation),node_modules_react.useLayoutEffect((()=>{const div=rDiv.current;div&&(div.style.width=toDomPrecision(Math.max(1,bounds.width))+"px",div.style.height=toDomPrecision(Math.max(1,bounds.height))+"px")}),[bounds.width,bounds.height]),(0,jsx_runtime.jsx)("div",{ref:rDiv,className:"tl-selection__bg",draggable:!1})},DefaultSelectionForeground=({bounds,rotation})=>{const editor=useEditor(),rSvg=(0,node_modules_react.useRef)(null),onlyShape=useValue("only selected shape",(()=>editor.onlySelectedShape),[editor]),expandOutlineBy=onlyShape?editor.getShapeUtil(onlyShape).expandSelectionOutlinePx(onlyShape):0;return useTransform(rSvg,bounds?.x,bounds?.y,1,rotation,{x:-expandOutlineBy,y:-expandOutlineBy}),bounds=bounds.clone().expandBy(expandOutlineBy).zeroFix(),(0,jsx_runtime.jsx)("svg",{ref:rSvg,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-selection__fg__outline"),width:toDomPrecision(bounds.width),height:toDomPrecision(bounds.height)})})},DefaultShapeErrorFallback=()=>(0,jsx_runtime.jsx)("div",{className:"tl-shape-error-boundary"}),DefaultShapeIndicatorErrorFallback=()=>(0,jsx_runtime.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"});function PointsSnapLine({points,zoom}){const l=2.5/zoom,minX=points.reduce(((acc,p)=>Math.min(acc,p.x)),1/0),maxX=points.reduce(((acc,p)=>Math.max(acc,p.x)),-1/0),minY=points.reduce(((acc,p)=>Math.min(acc,p.y)),1/0),maxY=points.reduce(((acc,p)=>Math.max(acc,p.y)),-1/0);let firstX,firstY,secondX,secondY;return points.some((p=>p.x===minX&&p.y===minY))?(firstX=minX,firstY=minY,secondX=maxX,secondY=maxY):(firstX=minX,firstY=maxY,secondX=maxX,secondY=minY),(0,jsx_runtime.jsxs)("g",{className:"tl-snap-line",children:[(0,jsx_runtime.jsx)("line",{x1:firstX,y1:firstY,x2:secondX,y2:secondY}),points.map(((p,i)=>(0,jsx_runtime.jsx)("g",{transform:`translate(${p.x},${p.y})`,children:(0,jsx_runtime.jsx)("path",{className:"tl-snap-point",d:`M ${-l},${-l} L ${l},${l} M ${-l},${l} L ${l},${-l}`})},i)))]})}function GapsSnapLine({gaps,direction,zoom}){const l=3.5/zoom;let edgeIntersection=[-1/0,1/0],nextEdgeIntersection=null;const horizontal="horizontal"===direction;for(const gap of gaps)nextEdgeIntersection=rangeIntersection(edgeIntersection[0],edgeIntersection[1],horizontal?gap.startEdge[0].y:gap.startEdge[0].x,horizontal?gap.startEdge[1].y:gap.startEdge[1].x),nextEdgeIntersection&&(edgeIntersection=nextEdgeIntersection,nextEdgeIntersection=rangeIntersection(edgeIntersection[0],edgeIntersection[1],horizontal?gap.endEdge[0].y:gap.endEdge[0].x,horizontal?gap.endEdge[1].y:gap.endEdge[1].x),nextEdgeIntersection&&(edgeIntersection=nextEdgeIntersection));if(null===edgeIntersection)return null;const midPoint=(edgeIntersection[0]+edgeIntersection[1])/2;return(0,jsx_runtime.jsx)("g",{className:"tl-snap-line",children:gaps.map((({startEdge,endEdge},i)=>(0,jsx_runtime.jsx)(node_modules_react.Fragment,{children:horizontal?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("line",{x1:startEdge[0].x,y1:midPoint-2*l,x2:startEdge[1].x,y2:midPoint+2*l}),(0,jsx_runtime.jsx)("line",{x1:endEdge[0].x,y1:midPoint-2*l,x2:endEdge[1].x,y2:midPoint+2*l}),(0,jsx_runtime.jsx)("line",{x1:startEdge[0].x,y1:midPoint,x2:endEdge[0].x,y2:midPoint}),(0,jsx_runtime.jsx)("line",{x1:(startEdge[0].x+endEdge[0].x)/2,y1:midPoint-l,x2:(startEdge[0].x+endEdge[0].x)/2,y2:midPoint+l})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("line",{x1:midPoint-2*l,y1:startEdge[0].y,x2:midPoint+2*l,y2:startEdge[1].y}),(0,jsx_runtime.jsx)("line",{x1:midPoint-2*l,y1:endEdge[0].y,x2:midPoint+2*l,y2:endEdge[1].y}),(0,jsx_runtime.jsx)("line",{x1:midPoint,y1:startEdge[0].y,x2:midPoint,y2:endEdge[0].y}),(0,jsx_runtime.jsx)("line",{x1:midPoint-l,y1:(startEdge[0].y+endEdge[0].y)/2,x2:midPoint+l,y2:(startEdge[0].y+endEdge[0].y)/2})]})},i)))})}const DefaultSnapLine=({className,line,zoom})=>(0,jsx_runtime.jsx)("svg",{className:classnames_default()("tl-overlays__item",className),children:"points"===line.type?(0,jsx_runtime.jsx)(PointsSnapLine,{...line,zoom}):"gaps"===line.type?(0,jsx_runtime.jsx)(GapsSnapLine,{...line,zoom}):null}),DefaultSpinner=()=>(0,jsx_runtime.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,jsx_runtime.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,jsx_runtime.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:(0,jsx_runtime.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}),DefaultSvgDefs=()=>null,EditorComponentsContext=(0,node_modules_react.createContext)({});function EditorComponentsProvider({overrides,children}){return(0,jsx_runtime.jsx)(EditorComponentsContext.Provider,{value:(0,node_modules_react.useMemo)((()=>({Background:DefaultBackground,SvgDefs:DefaultSvgDefs,Brush:DefaultBrush,ZoomBrush:DefaultBrush,CollaboratorBrush:DefaultBrush,Cursor:DefaultCursor,CollaboratorCursor:DefaultCursor,CollaboratorHint:DefaultCollaboratorHint,CollaboratorShapeIndicator:ShapeIndicator,Grid:DefaultGrid,Scribble:DefaultScribble,SnapLine:DefaultSnapLine,Handles:DefaultHandles,Handle:DefaultHandle,CollaboratorScribble:DefaultScribble,ErrorFallback:DefaultErrorFallback,ShapeErrorFallback:DefaultShapeErrorFallback,ShapeIndicatorErrorFallback:DefaultShapeIndicatorErrorFallback,Spinner:DefaultSpinner,SelectionBackground:DefaultSelectionBackground,SelectionForeground:DefaultSelectionForeground,HoveredShapeIndicator:DefaultHoveredShapeIndicator,...overrides})),[overrides]),children})}function useEditorComponents(){return(0,node_modules_react.useContext)(EditorComponentsContext)}const IGNORED_TAGS=["textarea","input"];const V={toVector:(v,fallback)=>(void 0===v&&(v=fallback),Array.isArray(v)?v:[v,v]),add:(v1,v2)=>[v1[0]+v2[0],v1[1]+v2[1]],sub:(v1,v2)=>[v1[0]-v2[0],v1[1]-v2[1]],addTo(v1,v2){v1[0]+=v2[0],v1[1]+=v2[1]},subTo(v1,v2){v1[0]-=v2[0],v1[1]-=v2[1]}};function rubberband(distance,dimension,constant){return 0===dimension||Math.abs(dimension)===1/0?Math.pow(distance,5*constant):distance*dimension*constant/(dimension+constant*distance)}function rubberbandIfOutOfBounds(position,min,max,constant=.15){return 0===constant?function maths_0ab39ae9_esm_clamp(v,min,max){return Math.max(min,Math.min(v,max))}(position,min,max):position<min?-rubberband(min-position,max-min,constant)+min:position>max?+rubberband(position-max,max-min,constant)+max:position}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(string){return string?string[0].toUpperCase()+string.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function toHandlerProp(device,action="",capture=!1){const deviceProps=EVENT_TYPE_MAP[device],actionKey=deviceProps&&deviceProps[action]||action;return"on"+capitalize(device)+capitalize(actionKey)+(function hasCapture(capture=!1,actionKey){return capture&&!actionsWithoutCaptureSupported.includes(actionKey)}(capture,actionKey)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(prop){let eventKey=prop.substring(2).toLowerCase();const passive=!!~eventKey.indexOf("passive");passive&&(eventKey=eventKey.replace("passive",""));const captureKey=pointerCaptureEvents.includes(eventKey)?"capturecapture":"capture",capture=!!~eventKey.indexOf(captureKey);return capture&&(eventKey=eventKey.replace("capture","")),{device:eventKey,capture,passive}}function isTouch(event){return"touches"in event}function getPointerType(event){return isTouch(event)?"touch":"pointerType"in event?event.pointerType:"mouse"}function distanceAngle(P1,P2){try{const dx=P2.clientX-P1.clientX,dy=P2.clientY-P1.clientY,cx=(P2.clientX+P1.clientX)/2,cy=(P2.clientY+P1.clientY)/2,distance=Math.hypot(dx,dy),angle=-180*Math.atan2(dx,dy)/Math.PI;return{angle,distance,origin:[cx,cy]}}catch(_unused){}return null}function touchIds(event){return function getCurrentTargetTouchList(event){return Array.from(event.touches).filter((e=>{var _event$currentTarget,_event$currentTarget$;return e.target===event.currentTarget||(null===(_event$currentTarget=event.currentTarget)||void 0===_event$currentTarget||null===(_event$currentTarget$=_event$currentTarget.contains)||void 0===_event$currentTarget$?void 0:_event$currentTarget$.call(_event$currentTarget,e.target))}))}(event).map((touch=>touch.identifier))}function touchDistanceAngle(event,ids){const[P1,P2]=Array.from(event.touches).filter((touch=>ids.includes(touch.identifier)));return distanceAngle(P1,P2)}function wheelValues(event){let{deltaX,deltaY,deltaMode}=event;return 1===deltaMode?(deltaX*=40,deltaY*=40):2===deltaMode&&(deltaX*=800,deltaY*=800),[deltaX,deltaY]}function call(v,...args){return"function"==typeof v?v(...args):v}function actions_fe213e88_esm_noop(){}function chain(...fns){return 0===fns.length?actions_fe213e88_esm_noop:1===fns.length?fns[0]:function(){let result;for(const fn of fns)result=fn.apply(this,arguments)||result;return result}}function assignDefault(value,fallback){return Object.assign({},fallback,value||{})}class Engine{constructor(ctrl,args,key){this.ctrl=ctrl,this.args=args,this.key=key,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(state){this.ctrl.state[this.key]=state}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state,shared,ingKey,args}=this;shared[ingKey]=state._active=state.active=state._blocked=state._force=!1,state._step=[!1,!1],state.intentional=!1,state._movement=[0,0],state._distance=[0,0],state._direction=[0,0],state._delta=[0,0],state._bounds=[[-1/0,1/0],[-1/0,1/0]],state.args=args,state.axis=void 0,state.memo=void 0,state.elapsedTime=state.timeDelta=0,state.direction=[0,0],state.distance=[0,0],state.overflow=[0,0],state._movementBound=[!1,!1],state.velocity=[0,0],state.movement=[0,0],state.delta=[0,0],state.timeStamp=0}start(event){const state=this.state,config=this.config;state._active||(this.reset(),this.computeInitial(),state._active=!0,state.target=event.target,state.currentTarget=event.currentTarget,state.lastOffset=config.from?call(config.from,state):state.offset,state.offset=state.lastOffset,state.startTime=state.timeStamp=event.timeStamp)}computeValues(values){const state=this.state;state._values=values,state.values=this.config.transform(values)}computeInitial(){const state=this.state;state._initial=state._values,state.initial=state.values}compute(event){const{state,config,shared}=this;state.args=this.args;let dt=0;if(event&&(state.event=event,config.preventDefault&&event.cancelable&&state.event.preventDefault(),state.type=event.type,shared.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,shared.locked=!!document.pointerLockElement,Object.assign(shared,function getEventDetails(event){const payload={};if("buttons"in event&&(payload.buttons=event.buttons),"shiftKey"in event){const{shiftKey,altKey,metaKey,ctrlKey}=event;Object.assign(payload,{shiftKey,altKey,metaKey,ctrlKey})}return payload}(event)),shared.down=shared.pressed=shared.buttons%2==1||shared.touches>0,dt=event.timeStamp-state.timeStamp,state.timeStamp=event.timeStamp,state.elapsedTime=state.timeStamp-state.startTime),state._active){const _absoluteDelta=state._delta.map(Math.abs);V.addTo(state._distance,_absoluteDelta)}this.axisIntent&&this.axisIntent(event);const[_m0,_m1]=state._movement,[t0,t1]=config.threshold,{_step,values}=state;if(config.hasCustomTransform?(!1===_step[0]&&(_step[0]=Math.abs(_m0)>=t0&&values[0]),!1===_step[1]&&(_step[1]=Math.abs(_m1)>=t1&&values[1])):(!1===_step[0]&&(_step[0]=Math.abs(_m0)>=t0&&Math.sign(_m0)*t0),!1===_step[1]&&(_step[1]=Math.abs(_m1)>=t1&&Math.sign(_m1)*t1)),state.intentional=!1!==_step[0]||!1!==_step[1],!state.intentional)return;const movement=[0,0];if(config.hasCustomTransform){const[v0,v1]=values;movement[0]=!1!==_step[0]?v0-_step[0]:0,movement[1]=!1!==_step[1]?v1-_step[1]:0}else movement[0]=!1!==_step[0]?_m0-_step[0]:0,movement[1]=!1!==_step[1]?_m1-_step[1]:0;this.restrictToAxis&&!state._blocked&&this.restrictToAxis(movement);const previousOffset=state.offset,gestureIsActive=state._active&&!state._blocked||state.active;gestureIsActive&&(state.first=state._active&&!state.active,state.last=!state._active&&state.active,state.active=shared[this.ingKey]=state._active,event&&(state.first&&("bounds"in config&&(state._bounds=call(config.bounds,state)),this.setup&&this.setup()),state.movement=movement,this.computeOffset()));const[ox,oy]=state.offset,[[x0,x1],[y0,y1]]=state._bounds;state.overflow=[ox<x0?-1:ox>x1?1:0,oy<y0?-1:oy>y1?1:0],state._movementBound[0]=!!state.overflow[0]&&(!1===state._movementBound[0]?state._movement[0]:state._movementBound[0]),state._movementBound[1]=!!state.overflow[1]&&(!1===state._movementBound[1]?state._movement[1]:state._movementBound[1]);const rubberband=state._active&&config.rubberband||[0,0];if(state.offset=function computeRubberband(bounds,[Vx,Vy],[Rx,Ry]){const[[X0,X1],[Y0,Y1]]=bounds;return[rubberbandIfOutOfBounds(Vx,X0,X1,Rx),rubberbandIfOutOfBounds(Vy,Y0,Y1,Ry)]}(state._bounds,state.offset,rubberband),state.delta=V.sub(state.offset,previousOffset),this.computeMovement(),gestureIsActive&&(!state.last||dt>32)){state.delta=V.sub(state.offset,previousOffset);const absoluteDelta=state.delta.map(Math.abs);V.addTo(state.distance,absoluteDelta),state.direction=state.delta.map(Math.sign),state._direction=state._delta.map(Math.sign),!state.first&&dt>0&&(state.velocity=[absoluteDelta[0]/dt,absoluteDelta[1]/dt],state.timeDelta=dt)}}emit(){const state=this.state,shared=this.shared,config=this.config;if(state._active||this.clean(),(state._blocked||!state.intentional)&&!state._force&&!config.triggerAllEvents)return;const memo=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},shared),state),{},{[this.aliasKey]:state.values}));void 0!==memo&&(state.memo=memo)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class CoordinatesEngine extends Engine{constructor(...args){super(...args),_defineProperty(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V.sub(this.state.offset,this.state.lastOffset)}axisIntent(event){const state=this.state,config=this.config;if(!state.axis&&event){const threshold="object"==typeof config.axisThreshold?config.axisThreshold[getPointerType(event)]:config.axisThreshold;state.axis=function selectAxis([dx,dy],threshold){const absDx=Math.abs(dx),absDy=Math.abs(dy);return absDx>absDy&&absDx>threshold?"x":absDy>absDx&&absDy>threshold?"y":void 0}(state._movement,threshold)}state._blocked=(config.lockDirection||!!config.axis)&&!state.axis||!!config.axis&&config.axis!==state.axis}restrictToAxis(v){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":v[1]=0;break;case"y":v[0]=0}}}const identity=v=>v,commonConfigResolver={enabled:(value=!0)=>value,eventOptions:(value,_k,config)=>_objectSpread2(_objectSpread2({},config.shared.eventOptions),value),preventDefault:(value=!1)=>value,triggerAllEvents:(value=!1)=>value,rubberband(value=0){switch(value){case!0:return[.15,.15];case!1:return[0,0];default:return V.toVector(value)}},from:value=>"function"==typeof value?value:null!=value?V.toVector(value):void 0,transform(value,_k,config){const transform=value||config.shared.transform;return this.hasCustomTransform=!!transform,transform||identity},threshold:value=>V.toVector(value,0)};const coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(_v,_k,{axis}){if(this.lockDirection="lock"===axis,!this.lockDirection)return axis},axisThreshold:(value=0)=>value,bounds(value={}){if("function"==typeof value)return state=>coordinatesConfigResolver.bounds(value(state));if("current"in value)return()=>value.current;if("function"==typeof HTMLElement&&value instanceof HTMLElement)return value;const{left=-1/0,right=1/0,top=-1/0,bottom=1/0}=value;return[[left,right],[top,bottom]]}});const isBrowser="undefined"!=typeof window&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}const SUPPORT={isBrowser,gesture:function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:supportsTouchEvents(),touchscreen:function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}(),pointer:function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}(),pointerLock:function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}()},DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8};_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(_v,_k,{pointer:{touch=!1,lock=!1,mouse=!1}={}}){return this.pointerLock=lock&&SUPPORT.pointerLock,SUPPORT.touch&&touch?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!mouse?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(value,_k,{preventScroll}){if(this.preventScrollDelay="number"==typeof preventScroll?preventScroll:preventScroll||void 0===preventScroll&&value?250:void 0,SUPPORT.touchscreen&&!1!==preventScroll)return value||(void 0!==preventScroll?"y":void 0)},pointerCapture(_v,_k,{pointer:{capture=!0,buttons=1,keys=!0}={}}){return this.pointerButtons=buttons,this.keys=keys,!this.pointerLock&&"pointer"===this.device&&capture},threshold(value,_k,{filterTaps=!1,tapsThreshold=3,axis}){const threshold=V.toVector(value,filterTaps?tapsThreshold:axis?1:0);return this.filterTaps=filterTaps,this.tapsThreshold=tapsThreshold,threshold},swipe({velocity=.5,distance=50,duration=250}={}){return{velocity:this.transform(V.toVector(velocity)),distance:this.transform(V.toVector(distance)),duration}},delay(value=0){switch(value){case!0:return 180;case!1:return 0;default:return value}},axisThreshold:value=>value?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),value):DEFAULT_DRAG_AXIS_THRESHOLD,keyboardDisplacement:(value=10)=>value});function clampStateInternalMovementToBounds(state){const[ox,oy]=state.overflow,[dx,dy]=state._delta,[dirx,diry]=state._direction;(ox<0&&dx>0&&dirx<0||ox>0&&dx<0&&dirx>0)&&(state._movement[0]=state._movementBound[0]),(oy<0&&dy>0&&diry<0||oy>0&&dy<0&&diry>0)&&(state._movement[1]=state._movementBound[1])}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(_v,_k,{shared,pointer:{touch=!1}={}}){if(shared.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&touch)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(_v,_k,{scaleBounds={},angleBounds={}}){const _scaleBounds=state=>{const D=assignDefault(call(scaleBounds,state),{min:-1/0,max:1/0});return[D.min,D.max]},_angleBounds=state=>{const A=assignDefault(call(angleBounds,state),{min:-1/0,max:1/0});return[A.min,A.max]};return"function"!=typeof scaleBounds&&"function"!=typeof angleBounds?[_scaleBounds(),_angleBounds()]:state=>[_scaleBounds(state),_angleBounds(state)]},threshold(value,_k,config){this.lockDirection="lock"===config.axis;return V.toVector(value,this.lockDirection?[.1,3]:0)},modifierKey:value=>void 0===value?"ctrlKey":value,pinchOnWheel:(value=!0)=>value});_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(value=!0)=>value});const wheelConfigResolver=coordinatesConfigResolver;_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(value=!0)=>value});const EngineMap=new Map,ConfigResolverMap=new Map;function actions_fe213e88_esm_registerAction(action){EngineMap.set(action.key,action.engine),ConfigResolverMap.set(action.key,action.resolver)}const actions_fe213e88_esm_pinchAction={key:"pinch",engine:class PinchEngine extends Engine{constructor(...args){super(...args),_defineProperty(this,"ingKey","pinching"),_defineProperty(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const state=this.state;state._touchIds=[],state.canceled=!1,state.cancel=this.cancel.bind(this),state.turns=0}computeOffset(){const{type,movement,lastOffset}=this.state;this.state.offset="wheel"===type?V.add(movement,lastOffset):[(1+movement[0])*lastOffset[0],movement[1]+lastOffset[1]]}computeMovement(){const{offset,lastOffset}=this.state;this.state.movement=[offset[0]/lastOffset[0],offset[1]-lastOffset[1]]}axisIntent(){const state=this.state,[_m0,_m1]=state._movement;if(!state.axis){const axisMovementDifference=30*Math.abs(_m0)-Math.abs(_m1);axisMovementDifference<0?state.axis="angle":axisMovementDifference>0&&(state.axis="scale")}}restrictToAxis(v){this.config.lockDirection&&("scale"===this.state.axis?v[1]=0:"angle"===this.state.axis&&(v[0]=0))}cancel(){const state=this.state;state.canceled||setTimeout((()=>{state.canceled=!0,state._active=!1,this.compute(),this.emit()}),0)}touchStart(event){this.ctrl.setEventIds(event);const state=this.state,ctrlTouchIds=this.ctrl.touchIds;if(state._active&&state._touchIds.every((id=>ctrlTouchIds.has(id))))return;if(ctrlTouchIds.size<2)return;this.start(event),state._touchIds=Array.from(ctrlTouchIds).slice(0,2);const payload=touchDistanceAngle(event,state._touchIds);payload&&this.pinchStart(event,payload)}pointerStart(event){if(null!=event.buttons&&event.buttons%2!=1)return;this.ctrl.setEventIds(event),event.target.setPointerCapture(event.pointerId);const state=this.state,_pointerEvents=state._pointerEvents,ctrlPointerIds=this.ctrl.pointerIds;if(state._active&&Array.from(_pointerEvents.keys()).every((id=>ctrlPointerIds.has(id))))return;if(_pointerEvents.size<2&&_pointerEvents.set(event.pointerId,event),state._pointerEvents.size<2)return;this.start(event);const payload=distanceAngle(...Array.from(_pointerEvents.values()));payload&&this.pinchStart(event,payload)}pinchStart(event,payload){this.state.origin=payload.origin,this.computeValues([payload.distance,payload.angle]),this.computeInitial(),this.compute(event),this.emit()}touchMove(event){if(!this.state._active)return;const payload=touchDistanceAngle(event,this.state._touchIds);payload&&this.pinchMove(event,payload)}pointerMove(event){const _pointerEvents=this.state._pointerEvents;if(_pointerEvents.has(event.pointerId)&&_pointerEvents.set(event.pointerId,event),!this.state._active)return;const payload=distanceAngle(...Array.from(_pointerEvents.values()));payload&&this.pinchMove(event,payload)}pinchMove(event,payload){const state=this.state,prev_a=state._values[1],delta_a=payload.angle-prev_a;let delta_turns=0;Math.abs(delta_a)>270&&(delta_turns+=Math.sign(delta_a)),this.computeValues([payload.distance,payload.angle-360*delta_turns]),state.origin=payload.origin,state.turns=delta_turns,state._movement=[state._values[0]/state._initial[0]-1,state._values[1]-state._initial[1]],this.compute(event),this.emit()}touchEnd(event){this.ctrl.setEventIds(event),this.state._active&&this.state._touchIds.some((id=>!this.ctrl.touchIds.has(id)))&&(this.state._active=!1,this.compute(event),this.emit())}pointerEnd(event){const state=this.state;this.ctrl.setEventIds(event);try{event.target.releasePointerCapture(event.pointerId)}catch(_unused){}state._pointerEvents.has(event.pointerId)&&state._pointerEvents.delete(event.pointerId),state._active&&state._pointerEvents.size<2&&(state._active=!1,this.compute(event),this.emit())}gestureStart(event){event.cancelable&&event.preventDefault();const state=this.state;state._active||(this.start(event),this.computeValues([event.scale,event.rotation]),state.origin=[event.clientX,event.clientY],this.compute(event),this.emit())}gestureMove(event){if(event.cancelable&&event.preventDefault(),!this.state._active)return;const state=this.state;this.computeValues([event.scale,event.rotation]),state.origin=[event.clientX,event.clientY];const _previousMovement=state._movement;state._movement=[event.scale-1,event.rotation],state._delta=V.sub(state._movement,_previousMovement),this.compute(event),this.emit()}gestureEnd(event){this.state._active&&(this.state._active=!1,this.compute(event),this.emit())}wheel(event){const modifierKey=this.config.modifierKey;modifierKey&&!(Array.isArray(modifierKey)?modifierKey.find((k=>event[k])):event[modifierKey])||(this.state._active?this.wheelChange(event):this.wheelStart(event),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(event){this.start(event),this.wheelChange(event)}wheelChange(event){"uv"in event||event.cancelable&&event.preventDefault();const state=this.state;state._delta=[-wheelValues(event)[1]/100*state.offset[0],0],V.addTo(state._movement,state._delta),clampStateInternalMovementToBounds(state),this.state.origin=[event.clientX,event.clientY],this.compute(event),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(bindFunction){const device=this.config.device;device&&(bindFunction(device,"start",this[device+"Start"].bind(this)),bindFunction(device,"change",this[device+"Move"].bind(this)),bindFunction(device,"end",this[device+"End"].bind(this)),bindFunction(device,"cancel",this[device+"End"].bind(this)),bindFunction("lostPointerCapture","",this[device+"End"].bind(this))),this.config.pinchOnWheel&&bindFunction("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:pinchConfigResolver},actions_fe213e88_esm_wheelAction={key:"wheel",engine:class WheelEngine extends CoordinatesEngine{constructor(...args){super(...args),_defineProperty(this,"ingKey","wheeling")}wheel(event){this.state._active||this.start(event),this.wheelChange(event),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(event){const state=this.state;state._delta=wheelValues(event),V.addTo(state._movement,state._delta),clampStateInternalMovementToBounds(state),this.compute(event),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(bindFunction){bindFunction("wheel","",this.wheel.bind(this))}},resolver:wheelConfigResolver};function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}const sharedConfigResolver={target(value){if(value)return()=>"current"in value?value.current:value},enabled:(value=!0)=>value,window:(value=(SUPPORT.isBrowser?window:void 0))=>value,eventOptions:({passive=!0,capture=!1}={})=>({passive,capture}),transform:value=>value},_excluded=["target","eventOptions","window","enabled","transform"];function resolveWith(config={},resolvers){const result={};for(const[key,resolver]of Object.entries(resolvers))switch(typeof resolver){case"function":result[key]=resolver.call(result,config[key],key,config);break;case"object":result[key]=resolveWith(config[key],resolver);break;case"boolean":resolver&&(result[key]=config[key])}return result}class EventStore{constructor(ctrl,gestureKey){_defineProperty(this,"_listeners",new Set),this._ctrl=ctrl,this._gestureKey=gestureKey}add(element,device,action,handler,options){const listeners=this._listeners,type=function toDomEventType(device,action=""){const deviceProps=EVENT_TYPE_MAP[device];return device+(deviceProps&&deviceProps[action]||action)}(device,action),eventOptions=_objectSpread2(_objectSpread2({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),options);element.addEventListener(type,handler,eventOptions);const remove=()=>{element.removeEventListener(type,handler,eventOptions),listeners.delete(remove)};return listeners.add(remove),remove}clean(){this._listeners.forEach((remove=>remove())),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty(this,"_timeouts",new Map)}add(key,callback,ms=140,...args){this.remove(key),this._timeouts.set(key,window.setTimeout(callback,ms,...args))}remove(key){const timeout=this._timeouts.get(key);timeout&&window.clearTimeout(timeout)}clean(){this._timeouts.forEach((timeout=>{window.clearTimeout(timeout)})),this._timeouts.clear()}}class Controller{constructor(handlers){_defineProperty(this,"gestures",new Set),_defineProperty(this,"_targetEventStore",new EventStore(this)),_defineProperty(this,"gestureEventStores",{}),_defineProperty(this,"gestureTimeoutStores",{}),_defineProperty(this,"handlers",{}),_defineProperty(this,"config",{}),_defineProperty(this,"pointerIds",new Set),_defineProperty(this,"touchIds",new Set),_defineProperty(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function resolveGestures(ctrl,internalHandlers){internalHandlers.drag&&setupGesture(ctrl,"drag");internalHandlers.wheel&&setupGesture(ctrl,"wheel");internalHandlers.scroll&&setupGesture(ctrl,"scroll");internalHandlers.move&&setupGesture(ctrl,"move");internalHandlers.pinch&&setupGesture(ctrl,"pinch");internalHandlers.hover&&setupGesture(ctrl,"hover")}(this,handlers)}setEventIds(event){return isTouch(event)?(this.touchIds=new Set(touchIds(event)),this.touchIds):"pointerId"in event?("pointerup"===event.type||"pointercancel"===event.type?this.pointerIds.delete(event.pointerId):"pointerdown"===event.type&&this.pointerIds.add(event.pointerId),this.pointerIds):void 0}applyHandlers(handlers,nativeHandlers){this.handlers=handlers,this.nativeHandlers=nativeHandlers}applyConfig(config,gestureKey){this.config=function parse(newConfig,gestureKey,_config={}){const _ref=newConfig,{target,eventOptions,window,enabled,transform}=_ref,rest=_objectWithoutProperties(_ref,_excluded);if(_config.shared=resolveWith({target,eventOptions,window,enabled,transform},sharedConfigResolver),gestureKey){const resolver=ConfigResolverMap.get(gestureKey);_config[gestureKey]=resolveWith(_objectSpread2({shared:_config.shared},rest),resolver)}else for(const key in rest){const resolver=ConfigResolverMap.get(key);resolver&&(_config[key]=resolveWith(_objectSpread2({shared:_config.shared},rest[key]),resolver))}return _config}(config,gestureKey,this.config)}clean(){this._targetEventStore.clean();for(const key of this.gestures)this.gestureEventStores[key].clean(),this.gestureTimeoutStores[key].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...args){const sharedConfig=this.config.shared,props={};let target;if(!sharedConfig.target||(target=sharedConfig.target(),target)){if(sharedConfig.enabled){for(const gestureKey of this.gestures){const gestureConfig=this.config[gestureKey],bindFunction=bindToProps(props,gestureConfig.eventOptions,!!target);if(gestureConfig.enabled){new(EngineMap.get(gestureKey))(this,args,gestureKey).bind(bindFunction)}}const nativeBindFunction=bindToProps(props,sharedConfig.eventOptions,!!target);for(const eventKey in this.nativeHandlers)nativeBindFunction(eventKey,"",(event=>this.nativeHandlers[eventKey](_objectSpread2(_objectSpread2({},this.state.shared),{},{event,args}))),void 0,!0)}for(const handlerProp in props)props[handlerProp]=chain(...props[handlerProp]);if(!target)return props;for(const handlerProp in props){const{device,capture,passive}=parseProp(handlerProp);this._targetEventStore.add(target,device,"",props[handlerProp],{capture,passive})}}}}function setupGesture(ctrl,gestureKey){ctrl.gestures.add(gestureKey),ctrl.gestureEventStores[gestureKey]=new EventStore(ctrl,gestureKey),ctrl.gestureTimeoutStores[gestureKey]=new TimeoutStore}const bindToProps=(props,eventOptions,withPassiveOption)=>(device,action,handler,options={},isNative=!1)=>{var _options$capture,_options$passive;const capture=null!==(_options$capture=options.capture)&&void 0!==_options$capture?_options$capture:eventOptions.capture,passive=null!==(_options$passive=options.passive)&&void 0!==_options$passive?_options$passive:eventOptions.passive;let handlerProp=isNative?device:toHandlerProp(device,action,capture);withPassiveOption&&passive&&(handlerProp+="Passive"),props[handlerProp]=props[handlerProp]||[],props[handlerProp].push(handler)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function registerGesture(actions,handlers,handlerKey,key,internalHandlers,config){if(!actions.has(handlerKey))return;if(!EngineMap.has(key))return void 0;const startKey=handlerKey+"Start",endKey=handlerKey+"End";internalHandlers[key]=state=>{let memo;return state.first&&startKey in handlers&&handlers[startKey](state),handlerKey in handlers&&(memo=handlers[handlerKey](state)),state.last&&endKey in handlers&&handlers[endKey](state),memo},config[key]=config[key]||{}}function parseMergedHandlers(mergedHandlers,mergedConfig){const[handlers,nativeHandlers,actions]=function sortHandlers(_handlers){const native={},handlers={},actions=new Set;for(let key in _handlers)RE_NOT_NATIVE.test(key)?(actions.add(RegExp.lastMatch),handlers[key]=_handlers[key]):native[key]=_handlers[key];return[handlers,native,actions]}(mergedHandlers),internalHandlers={};return registerGesture(actions,handlers,"onDrag","drag",internalHandlers,mergedConfig),registerGesture(actions,handlers,"onWheel","wheel",internalHandlers,mergedConfig),registerGesture(actions,handlers,"onScroll","scroll",internalHandlers,mergedConfig),registerGesture(actions,handlers,"onPinch","pinch",internalHandlers,mergedConfig),registerGesture(actions,handlers,"onMove","move",internalHandlers,mergedConfig),registerGesture(actions,handlers,"onHover","hover",internalHandlers,mergedConfig),{handlers:internalHandlers,config:mergedConfig,nativeHandlers}}function useRecognizers(handlers,config={},gestureKey,nativeHandlers){const ctrl=node_modules_react.useMemo((()=>new Controller(handlers)),[]);if(ctrl.applyHandlers(handlers,nativeHandlers),ctrl.applyConfig(config,gestureKey),node_modules_react.useEffect(ctrl.effect.bind(ctrl)),node_modules_react.useEffect((()=>ctrl.clean.bind(ctrl)),[]),void 0===config.target)return ctrl.bind.bind(ctrl)}function createUseGesture(actions){return actions.forEach(actions_fe213e88_esm_registerAction),function useGesture(_handlers,_config){const{handlers,nativeHandlers,config}=parseMergedHandlers(_handlers,_config||{});return useRecognizers(handlers,config,void 0,nativeHandlers)}}const MAX_ZOOM_STEP=10,IS_DARWIN=/Mac|iPod|iPhone|iPad/.test("undefined"==typeof window?"node":window.navigator.platform);function normalizeWheel(event){let{deltaY,deltaX}=event,deltaZ=0;if(event.ctrlKey||event.altKey||event.metaKey){const signY=Math.sign(event.deltaY);let dy=deltaY;Math.abs(event.deltaY)>MAX_ZOOM_STEP&&(dy=MAX_ZOOM_STEP*signY),deltaZ=dy/100}else event.shiftKey&&!IS_DARWIN&&(deltaX=deltaY,deltaY=0);return{x:-deltaX,y:-deltaY,z:-deltaZ}}const useGestureEvents_useGesture=createUseGesture([actions_fe213e88_esm_wheelAction,actions_fe213e88_esm_pinchAction]);let lastWheelTime;const isWheelEndEvent=time=>void 0===lastWheelTime?(lastWheelTime=time,!1):time-lastWheelTime>120&&time-lastWheelTime<160?(lastWheelTime=time,!0):(lastWheelTime=time,!1);function useGestureEvents(ref){const editor=useEditor(),events=node_modules_react.useMemo((()=>{let pinchState="not sure";let initDistanceBetweenFingers=1,initZoom=1,currZoom=1,currDistanceBetweenFingers=0;const initPointBetweenFingers=new Vec2d_Vec2d,prevPointBetweenFingers=new Vec2d_Vec2d;return{onWheel:({event})=>{if(!editor.instanceState.isFocused)return;if(pinchState="not sure",isWheelEndEvent(Date.now()))return;if(editor.editingShapeId){const shape=editor.getShape(editor.editingShapeId);if(shape){if(editor.getShapeUtil(shape).canScroll(shape)){const bounds=editor.getShapePageBounds(editor.editingShapeId);if(bounds?.containsPoint(editor.inputs.currentPagePoint))return}}}preventDefault(event);const delta=normalizeWheel(event);if(0===delta.x&&0===delta.y)return;const info={type:"wheel",name:"wheel",delta,shiftKey:event.shiftKey,altKey:event.altKey,ctrlKey:event.metaKey||event.ctrlKey};editor.dispatch(info)},onPinchStart:gesture=>{const elm=ref.current;pinchState="not sure";const{event,origin,da}=gesture;event instanceof WheelEvent||(event.target===elm||elm?.contains(event.target))&&(prevPointBetweenFingers.x=origin[0],prevPointBetweenFingers.y=origin[1],initPointBetweenFingers.x=origin[0],initPointBetweenFingers.y=origin[1],initDistanceBetweenFingers=da[0],initZoom=editor.zoomLevel,editor.dispatch({type:"pinch",name:"pinch_start",point:{x:origin[0],y:origin[1],z:editor.zoomLevel},delta:{x:0,y:0},shiftKey:event.shiftKey,altKey:event.altKey,ctrlKey:event.metaKey||event.ctrlKey}))},onPinchEnd:gesture=>{const elm=ref.current,{event,origin,offset}=gesture;if(event instanceof WheelEvent)return;if(event.target!==elm&&!elm?.contains(event.target))return;const scale=offset[0];pinchState="not sure",requestAnimationFrame((()=>{editor.dispatch({type:"pinch",name:"pinch_end",point:{x:origin[0],y:origin[1],z:scale},delta:{x:origin[0],y:origin[1]},shiftKey:event.shiftKey,altKey:event.altKey,ctrlKey:event.metaKey||event.ctrlKey})}))},onPinch:gesture=>{const elm=ref.current,{event,origin,offset,da}=gesture;if(event instanceof WheelEvent)return;if(event.target!==elm&&!elm?.contains(event.target))return;const isSafariTrackpadPinch="gesturechange"===gesture.type||"gestureend"===gesture.type;currDistanceBetweenFingers=da[0];const dx=origin[0]-prevPointBetweenFingers.x,dy=origin[1]-prevPointBetweenFingers.y;switch(prevPointBetweenFingers.x=origin[0],prevPointBetweenFingers.y=origin[1],(isSafariTrackpadPinch=>{if(isSafariTrackpadPinch&&(pinchState="zooming"),"zooming"===pinchState)return;const touchDistance=Math.abs(currDistanceBetweenFingers-initDistanceBetweenFingers),originDistance=Vec2d_Vec2d.Dist(initPointBetweenFingers,prevPointBetweenFingers);switch(pinchState){case"not sure":touchDistance>24?pinchState="zooming":originDistance>16&&(pinchState="panning");break;case"panning":touchDistance>64&&(pinchState="zooming")}})(isSafariTrackpadPinch),pinchState){case"zooming":currZoom=offset[0],editor.dispatch({type:"pinch",name:"pinch",point:{x:origin[0],y:origin[1],z:currZoom},delta:{x:dx,y:dy},shiftKey:event.shiftKey,altKey:event.altKey,ctrlKey:event.metaKey||event.ctrlKey});break;case"panning":editor.dispatch({type:"pinch",name:"pinch",point:{x:origin[0],y:origin[1],z:initZoom},delta:{x:dx,y:dy},shiftKey:event.shiftKey,altKey:event.altKey,ctrlKey:event.metaKey||event.ctrlKey})}}}}),[editor,ref]);useGestureEvents_useGesture(events,{target:ref,eventOptions:{passive:!1},pinch:{from:()=>[editor.zoomLevel,0],scaleBounds:()=>({from:editor.zoomLevel,max:8,min:.05})}})}function getHandle(editor,id,handleId){const shape=editor.getShape(id);return{shape,handle:editor.getShapeHandles(shape).find((h=>h.id===handleId))}}var lodash_throttle=__webpack_require__("./node_modules/lodash.throttle/index.js"),lodash_throttle_default=__webpack_require__.n(lodash_throttle);class Matrix2d{constructor(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f}a=1;b=0;c=0;d=1;e=0;f=0;equals(m){return this.a===m.a&&this.b===m.b&&this.c===m.c&&this.d===m.d&&this.e===m.e&&this.f===m.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(m){const m2=m,{a,b,c,d,e,f}=this;return this.a=a*m2.a+c*m2.b,this.c=a*m2.c+c*m2.d,this.e=a*m2.e+c*m2.f+e,this.b=b*m2.a+d*m2.b,this.d=b*m2.c+d*m2.d,this.f=b*m2.e+d*m2.f+f,this}rotate(r,cx,cy){return 0===r?this:void 0===cx?this.multiply(Matrix2d.Rotate(r)):this.translate(cx,cy).multiply(Matrix2d.Rotate(r)).translate(-cx,-cy)}translate(x,y){return this.multiply(Matrix2d.Translate(x,y))}scale(x,y){return this.multiply(Matrix2d.Scale(x,y))}invert(){const{a,b,c,d,e,f}=this,denom=a*d-b*c;return this.a=d/denom,this.b=b/-denom,this.c=c/-denom,this.d=a/denom,this.e=(d*e-c*f)/-denom,this.f=(b*e-a*f)/denom,this}applyToPoint(point){return Matrix2d.applyToPoint(this,point)}applyToPoints(points){return Matrix2d.applyToPoints(this,points)}rotation(){return Matrix2d.Rotation(this)}point(){return Matrix2d.Point(this)}decomposed(){return Matrix2d.Decompose(this)}toCssString(){return Matrix2d.toCssString(this)}setTo(model){return Object.assign(this,model),this}decompose(){return Matrix2d.Decompose(this)}clone(){return new Matrix2d(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new Matrix2d(1,0,0,1,0,0)}static Translate(x,y){return new Matrix2d(1,0,0,1,x,y)}static Rotate(r,cx,cy){if(0===r)return Matrix2d.Identity();const cosAngle=Math.cos(r),sinAngle=Math.sin(r),rotationMatrix2d=new Matrix2d(cosAngle,sinAngle,-sinAngle,cosAngle,0,0);return void 0===cx?rotationMatrix2d:Matrix2d.Compose(Matrix2d.Translate(cx,cy),rotationMatrix2d,Matrix2d.Translate(-cx,-cy))}static Scale=(x,y,cx,cy)=>{const scaleMatrix2d=new Matrix2d(x,0,0,0,y,0);return void 0===cx?scaleMatrix2d:Matrix2d.Compose(Matrix2d.Translate(cx,cy),scaleMatrix2d,Matrix2d.Translate(-cx,-cy))};static Multiply(m1,m2){return{a:m1.a*m2.a+m1.c*m2.b,c:m1.a*m2.c+m1.c*m2.d,e:m1.a*m2.e+m1.c*m2.f+m1.e,b:m1.b*m2.a+m1.d*m2.b,d:m1.b*m2.c+m1.d*m2.d,f:m1.b*m2.e+m1.d*m2.f+m1.f}}static Inverse(m){const denom=m.a*m.d-m.b*m.c;return{a:m.d/denom,b:m.b/-denom,c:m.c/-denom,d:m.a/denom,e:(m.d*m.e-m.c*m.f)/-denom,f:(m.b*m.e-m.a*m.f)/denom}}static Absolute(m){const denom=m.a*m.d-m.b*m.c;return{a:m.d/denom,b:m.b/-denom,c:m.c/-denom,d:m.a/denom,e:(m.d*m.e-m.c*m.f)/denom,f:(m.b*m.e-m.a*m.f)/-denom}}static Compose(...matrices){const matrix=Matrix2d.Identity();for(let i=0,n=matrices.length;i<n;i++)matrix.multiply(matrices[i]);return matrix}static Point(m){return new Vec2d_Vec2d(m.e,m.f)}static Rotation(m){let rotation;if(0!==m.a||0!==m.c){const hypotAc=Math.hypot(m.a,m.c);rotation=Math.acos(m.a/hypotAc)*(m.c>0?-1:1)}else if(0!==m.b||0!==m.d){const hypotBd=Math.hypot(m.b,m.d);rotation=TAU+Math.acos(m.b/hypotBd)*(m.d>0?-1:1)}else rotation=0;return clampRadians(rotation)}static Decompose(m){let scaleX,scaleY,rotation;if(0!==m.a||0!==m.c){const hypotAc=Math.hypot(m.a,m.c);scaleX=hypotAc,scaleY=(m.a*m.d-m.b*m.c)/hypotAc,rotation=Math.acos(m.a/hypotAc)*(m.c>0?-1:1)}else if(0!==m.b||0!==m.d){const hypotBd=Math.hypot(m.b,m.d);scaleX=(m.a*m.d-m.b*m.c)/hypotBd,scaleY=hypotBd,rotation=TAU+Math.acos(m.b/hypotBd)*(m.d>0?-1:1)}else scaleX=0,scaleY=0,rotation=0;return{x:m.e,y:m.f,scaleX,scaleY,rotation:clampRadians(rotation)}}static Smooth(m,precision=1e10){return m.a=Math.round(m.a*precision)/precision,m.b=Math.round(m.b*precision)/precision,m.c=Math.round(m.c*precision)/precision,m.d=Math.round(m.d*precision)/precision,m.e=Math.round(m.e*precision)/precision,m.f=Math.round(m.f*precision)/precision,m}static toCssString(m){return`matrix(${toDomPrecision(m.a)}, ${toDomPrecision(m.b)}, ${toDomPrecision(m.c)}, ${toDomPrecision(m.d)}, ${toDomPrecision(m.e)}, ${toDomPrecision(m.f)})`}static applyToPoint(m,point){return new Vec2d_Vec2d(m.a*point.x+m.c*point.y+m.e,m.b*point.x+m.d*point.y+m.f,point.z)}static applyToXY(m,x,y){return[m.a*x+m.c*y+m.e,m.b*x+m.d*y+m.f]}static applyToPoints(m,points){return points.map((point=>new Vec2d_Vec2d(m.a*point.x+m.c*point.y+m.e,m.b*point.x+m.d*point.y+m.f,point.z)))}static applyToBounds(m,box){return new Box2d_Box2d(m.e+box.minX,m.f+box.minY,box.width,box.height)}static From(m){return new Matrix2d(m.a,m.b,m.c,m.d,m.e,m.f)}static Cast(m){return m instanceof Matrix2d?m:Matrix2d.From(m)}}const GeometryDebuggingView=track((function GeometryDebuggingView2({showStroke=!0,showVertices=!0,showClosestPointOnOutline=!0}){const editor=useEditor();!function useTick(isEnabled=!0){const[_,setTick]=(0,node_modules_react.useState)(0),editor=useEditor();(0,node_modules_react.useEffect)((()=>{if(!isEnabled)return;const update=()=>setTick((tick=>tick+1));return editor.on("tick",update),()=>{editor.off("tick",update)}}),[editor,isEnabled])}(showClosestPointOnOutline);const{zoomLevel,renderingShapes,inputs:{currentPagePoint}}=editor;return(0,jsx_runtime.jsx)("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:renderingShapes.map((result=>{const shape=editor.getShape(result.id);if("group"===shape.type)return null;const geometry=editor.getShapeGeometry(shape),pageTransform=editor.getShapePageTransform(shape),pointInShapeSpace=editor.getPointInShapeSpace(shape,currentPagePoint),nearestPointOnShape=geometry.nearestPoint(pointInShapeSpace),distanceToPoint=geometry.distanceToPoint(pointInShapeSpace,!0),dist=Math.abs(distanceToPoint)*zoomLevel,hitInside=distanceToPoint<0,{vertices}=geometry;return(0,jsx_runtime.jsxs)("g",{transform:pageTransform.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[showStroke&&(0,jsx_runtime.jsx)("path",{stroke:"red",strokeWidth:"2",fill:"none",opacity:"1",d:geometry.toSimpleSvgPath()}),showVertices&&vertices.map(((v,i)=>(0,jsx_runtime.jsx)("circle",{cx:v.x,cy:v.y,r:"2",fill:`hsl(${modulate(i,[0,vertices.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:"1"},`v${i}`))),showClosestPointOnOutline&&dist<150&&(0,jsx_runtime.jsx)("line",{x1:nearestPointOnShape.x,y1:nearestPointOnShape.y,x2:pointInShapeSpace.x,y2:pointInShapeSpace.y,opacity:1-dist/150,stroke:hitInside?"goldenrod":"dodgerblue",strokeWidth:"2"})]},result.id+"_outline")}))})}));var lodash_uniq=__webpack_require__("./node_modules/lodash.uniq/index.js"),lodash_uniq_default=__webpack_require__.n(lodash_uniq);function uniq(array){return lodash_uniq_default()(array)}function usePresence(userId){const editor=useEditor(),$presences=(0,node_modules_react.useMemo)((()=>editor.store.query.records("instance_presence",(()=>({userId:{eq:userId}})))),[editor,userId]);return useValue(`latestPresence:${userId}`,(()=>$presences.value.slice().sort(((a,b)=>b.lastActivityTimestamp-a.lastActivityTimestamp))[0]),[])??null}const LiveCollaborators=track((function Collaborators(){const peerIds=function usePeerIds(){const editor=useEditor(),$presences=(0,node_modules_react.useMemo)((()=>editor.store.query.records("instance_presence",(()=>({userId:{neq:editor.user.id}})))),[editor]);return useValue(useComputed("userIds",(()=>uniq($presences.value.map((p=>p.userId))).sort()),{isEqual:(a,b)=>a.join(",")===b.join?.(",")},[$presences]))}();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:peerIds.map((id=>(0,jsx_runtime.jsx)(CollaboratorGuard,{collaboratorId:id},id)))})})),CollaboratorGuard=track((function CollaboratorGuard2({collaboratorId}){const editor=useEditor(),presence=usePresence(collaboratorId),collaboratorState=function useCollaboratorState(latestPresence){const rLastActivityTimestamp=(0,node_modules_react.useRef)(latestPresence?.lastActivityTimestamp??-1),[state,setState]=(0,node_modules_react.useState)((()=>getStateFromElapsedTime(Date.now()-rLastActivityTimestamp.current)));(0,node_modules_react.useEffect)((()=>{const interval=setInterval((()=>{setState(getStateFromElapsedTime(Date.now()-rLastActivityTimestamp.current))}),1200);return()=>clearInterval(interval)}),[]),latestPresence&&(rLastActivityTimestamp.current=latestPresence.lastActivityTimestamp);return state}(presence);if(!presence||presence.currentPageId!==editor.currentPageId)return null;switch(collaboratorState){case"inactive":{const{followingUserId,highlightedUserIds}=editor.instanceState;if(followingUserId!==presence.userId&&!highlightedUserIds.includes(presence.userId))return null;break}case"idle":{const{highlightedUserIds}=editor.instanceState;if(presence.followingUserId===editor.user.id&&!presence.chatMessage&&!highlightedUserIds.includes(presence.userId))return null;break}}return(0,jsx_runtime.jsx)(Collaborator,{latestPresence:presence})})),Collaborator=track((function Collaborator2({latestPresence}){const editor=useEditor(),{CollaboratorBrush,CollaboratorScribble,CollaboratorCursor,CollaboratorHint,CollaboratorShapeIndicator}=useEditorComponents(),{viewportPageBounds,zoomLevel}=editor,{userId,chatMessage,brush,scribble,selectedShapeIds,userName,cursor,color}=latestPresence,isCursorInViewport=!(cursor.x<viewportPageBounds.minX-12/zoomLevel||cursor.y<viewportPageBounds.minY-16/zoomLevel||cursor.x>viewportPageBounds.maxX-12/zoomLevel||cursor.y>viewportPageBounds.maxY-16/zoomLevel);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[brush&&CollaboratorBrush?(0,jsx_runtime.jsx)(CollaboratorBrush,{className:"tl-collaborator__brush",brush,color,opacity:.1},userId+"_brush"):null,isCursorInViewport&&CollaboratorCursor?(0,jsx_runtime.jsx)(CollaboratorCursor,{className:"tl-collaborator__cursor",point:cursor,color,zoom:zoomLevel,name:"New User"!==userName?userName:null,chatMessage},userId+"_cursor"):CollaboratorHint?(0,jsx_runtime.jsx)(CollaboratorHint,{className:"tl-collaborator__cursor-hint",point:cursor,color,zoom:zoomLevel,viewport:viewportPageBounds},userId+"_cursor_hint"):null,scribble&&CollaboratorScribble?(0,jsx_runtime.jsx)(CollaboratorScribble,{className:"tl-collaborator__scribble",scribble,color,zoom:zoomLevel,opacity:"laser"===scribble.color?.5:.1},userId+"_scribble"):null,CollaboratorShapeIndicator&&selectedShapeIds.map((shapeId=>(0,jsx_runtime.jsx)(CollaboratorShapeIndicator,{className:"tl-collaborator__shape-indicator",id:shapeId,color,opacity:.5},userId+"_"+shapeId)))]})}));function getStateFromElapsedTime(elapsed){return elapsed>COLLABORATOR_INACTIVE_TIMEOUT?"inactive":elapsed>COLLABORATOR_IDLE_TIMEOUT?"idle":"active"}function gcd(a,b){return 0===b?a:gcd(b,a%b)}function nearestMultiple(float){const decimal=float.toString().split(".")[1];if(!decimal)return 1;const denominator=Math.pow(10,decimal.length);return denominator/gcd(parseInt(decimal,10),denominator)}const Shape=track((function Shape2({id,shape,util,index,backgroundIndex,opacity,isCulled}){const editor=useEditor(),{ShapeErrorFallback}=useEditorComponents(),containerRef=node_modules_react.useRef(null),backgroundContainerRef=node_modules_react.useRef(null),setProperty=node_modules_react.useCallback(((property,value)=>{containerRef.current?.style.setProperty(property,value),backgroundContainerRef.current?.style.setProperty(property,value)}),[]);useQuickReactor("set shape container transform position",(()=>{if(!editor.getShape(id))return;const pageTransform=editor.getShapePageTransform(id),transform=Matrix2d.toCssString(pageTransform);setProperty("transform",transform)}),[editor,setProperty]),useQuickReactor("set shape container clip path",(()=>{if(!editor.getShape(id))return null;const clipPath=editor.getShapeClipPath(id);setProperty("clip-path",clipPath??"none")}),[editor,setProperty]),useQuickReactor("set shape height and width",(()=>{const shape2=editor.getShape(id);if(!shape2)return null;const bounds=editor.getShapeGeometry(shape2).bounds,dprMultiple=nearestMultiple(Math.floor(100*editor.instanceState.devicePixelRatio)/100),widthRemainder=bounds.w%dprMultiple,width=0===widthRemainder?bounds.w:bounds.w+(dprMultiple-widthRemainder),heightRemainder=bounds.h%dprMultiple,height=0===heightRemainder?bounds.h:bounds.h+(dprMultiple-heightRemainder);setProperty("width",Math.max(width,dprMultiple)+"px"),setProperty("height",Math.max(height,dprMultiple)+"px")}),[editor]),node_modules_react.useLayoutEffect((()=>{setProperty("opacity",opacity+""),containerRef.current?.style.setProperty("z-index",index+""),backgroundContainerRef.current?.style.setProperty("z-index",backgroundIndex+"")}),[opacity,index,backgroundIndex,setProperty]);const annotateError=node_modules_react.useCallback((error=>{editor.annotateError(error,{origin:"react.shape",willCrashApp:!1})}),[editor]);return shape?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[util.backgroundComponent&&(0,jsx_runtime.jsx)("div",{ref:backgroundContainerRef,className:"tl-shape tl-shape-background","data-shape-type":shape.type,draggable:!1,children:!isCulled&&(0,jsx_runtime.jsx)(OptionalErrorBoundary,{fallback:ShapeErrorFallback,onError:annotateError,children:(0,jsx_runtime.jsx)(InnerShapeBackground,{shape,util})})}),(0,jsx_runtime.jsx)("div",{ref:containerRef,className:"tl-shape","data-shape-type":shape.type,draggable:!1,children:isCulled?(0,jsx_runtime.jsx)(CulledShape,{shape}):(0,jsx_runtime.jsx)(OptionalErrorBoundary,{fallback:ShapeErrorFallback,onError:annotateError,children:(0,jsx_runtime.jsx)(InnerShape,{shape,util})})})]}):null})),InnerShape=node_modules_react.memo((function InnerShape2({shape,util}){return useStateTracking("InnerShape:"+shape.type,(()=>util.component(shape)))}),((prev,next)=>prev.shape.props===next.shape.props&&prev.shape.meta===next.shape.meta)),InnerShapeBackground=node_modules_react.memo((function InnerShapeBackground2({shape,util}){return useStateTracking("InnerShape:"+shape.type,(()=>util.backgroundComponent?.(shape)))}),((prev,next)=>prev.shape.props===next.shape.props&&prev.shape.meta===next.shape.meta)),CulledShape=node_modules_react.memo((function CulledShape2({shape}){const bounds=useEditor().getShapeGeometry(shape).bounds;return(0,jsx_runtime.jsx)("div",{className:"tl-shape__culled",style:{transform:`translate(${toDomPrecision(bounds.minX)}px, ${toDomPrecision(bounds.minY)}px)`,width:Math.max(1,toDomPrecision(bounds.width)),height:Math.max(1,toDomPrecision(bounds.height))}})}),(()=>!0));function Canvas({className}){const editor=useEditor(),{Background,SvgDefs}=useEditorComponents(),rCanvas=node_modules_react.useRef(null),rHtmlLayer=node_modules_react.useRef(null),rHtmlLayer2=node_modules_react.useRef(null);!function useScreenBounds(){const editor=useEditor();(0,node_modules_react.useLayoutEffect)((()=>{const updateBounds=lodash_throttle_default()((()=>{editor.updateViewportScreenBounds()}),200,{trailing:!0});editor.updateViewportScreenBounds();const interval=setInterval(updateBounds,1e3);return window.addEventListener("resize",updateBounds),window.addEventListener("scroll",updateBounds),()=>{clearInterval(interval),window.removeEventListener("resize",updateBounds),window.removeEventListener("scroll",updateBounds)}}),[editor])}(),function useDocumentEvents(){const editor=useEditor(),container=useContainer(),isAppFocused=useValue("isFocused",(()=>editor.instanceState.isFocused),[editor]);(0,node_modules_react.useEffect)((()=>{if(void 0===typeof matchMedia)return;let remove=null;const updatePixelRatio=()=>{null!=remove&&remove();const mqString=`(resolution: ${window.devicePixelRatio}dppx)`,media=matchMedia(mqString);media.addEventListener("change",updatePixelRatio),remove=()=>{media.removeEventListener("change",updatePixelRatio)},editor.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return updatePixelRatio(),()=>{remove?.()}}),[editor]),(0,node_modules_react.useEffect)((()=>{if(!isAppFocused)return;const handleKeyDown=e=>{if(!e.altKey||!editor.isIn("zoom")&&editor.root.path.value.endsWith(".idle")||isFocusingInput()||preventDefault(e),e.isKilled)return;switch(e.isKilled=!0,e.key){case"=":case"-":case"0":if(e.metaKey||e.ctrlKey)return void preventDefault(e);break;case"Tab":default:if(isFocusingInput()||editor.isMenuOpen)return;break;case",":if(!isFocusingInput()&&(preventDefault(e),!editor.inputs.keys.has("Comma"))){const{x,y,z}=editor.inputs.currentScreenPoint;editor.inputs.keys.add("Comma");const info2={type:"pointer",name:"pointer_down",point:{x,y,z},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:0,button:0,isPen:editor.instanceState.isPenMode,target:"canvas"};return void editor.dispatch(info2)}break;case"Escape":if((editor.editingShape||editor.selectedShapeIds.length>0)&&e.preventDefault(),editor.openMenus.length>0)return;return void(editor.inputs.keys.has("Escape")||(editor.inputs.keys.add("Escape"),editor.cancel(),container.focus()))}const info={type:"keyboard",name:e.repeat?"key_repeat":"key_down",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};editor.dispatch(info)},handleKeyUp=e=>{if(e.isKilled)return;if(e.isKilled=!0,isFocusingInput()||editor.isMenuOpen)return;if(","===e.key&&(document.activeElement?.ELEMENT_NODE&&preventDefault(e),editor.inputs.keys.has(e.code))){const{x,y,z}=editor.inputs.currentScreenPoint;editor.inputs.keys.delete(e.code);const info2={type:"pointer",name:"pointer_up",point:{x,y,z},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:0,button:0,isPen:editor.instanceState.isPenMode,target:"canvas"};return void editor.dispatch(info2)}const info={type:"keyboard",name:"key_up",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};editor.dispatch(info)};function handleTouchStart(e){if(container.contains(e.target)){const touchXPosition=e.touches[0].pageX,touchXRadius=e.touches[0].radiusX||0;(touchXPosition-touchXRadius<10||touchXPosition+touchXRadius>editor.viewportScreenBounds.width-10)&&("BUTTON"===e.target?.tagName&&e.target?.click(),preventDefault(e))}}const handleWheel=e=>{container.contains(e.target)&&(e.ctrlKey||e.metaKey)&&preventDefault(e)};return container.addEventListener("touchstart",handleTouchStart,{passive:!1}),container.addEventListener("wheel",handleWheel,{passive:!1}),document.addEventListener("gesturestart",preventDefault),document.addEventListener("gesturechange",preventDefault),document.addEventListener("gestureend",preventDefault),container.addEventListener("keydown",handleKeyDown),container.addEventListener("keyup",handleKeyUp),()=>{container.removeEventListener("touchstart",handleTouchStart),container.removeEventListener("wheel",handleWheel),document.removeEventListener("gesturestart",preventDefault),document.removeEventListener("gesturechange",preventDefault),document.removeEventListener("gestureend",preventDefault),container.removeEventListener("keydown",handleKeyDown),container.removeEventListener("keyup",handleKeyUp)}}),[editor,container,isAppFocused])}(),function useCoarsePointer(){const editor=useEditor();(0,node_modules_react.useEffect)((()=>{if(!editor.environment.isFirefox||editor.environment.isAndroid||editor.environment.isIos){if(window.matchMedia){const mql=window.matchMedia("(pointer: coarse)"),handler=()=>{editor.updateInstanceState({isCoarsePointer:!!mql.matches})};if(handler(),mql)return mql.addEventListener("change",handler),()=>mql.removeEventListener("change",handler)}}else editor.updateInstanceState({isCoarsePointer:!1})}),[editor])}(),useGestureEvents(rCanvas),function useFixSafariDoubleTapZoomPencilEvents(ref){const editor=useEditor();(0,node_modules_react.useEffect)((()=>{const elm=ref.current;if(!elm)return;const handleEvent=e=>{if(e instanceof PointerEvent&&"pen"===e.pointerType){e.isKilled=!0;const{target}=e;if(IGNORED_TAGS.includes(target.tagName?.toLocaleLowerCase())||editor.isIn("select.editing_shape"))return;preventDefault(e)}};return elm.addEventListener("touchstart",handleEvent),elm.addEventListener("touchend",handleEvent),()=>{elm.removeEventListener("touchstart",handleEvent),elm.addEventListener("touchend",handleEvent)}}),[editor,ref])}(rCanvas),useQuickReactor("position layers",(()=>{const htmlElm=rHtmlLayer.current;if(!htmlElm)return;const htmlElm2=rHtmlLayer2.current;if(!htmlElm2)return;const{x,y,z}=editor.camera,offset=z>=1?modulate(z,[1,8],[.125,.5],!0):modulate(z,[.1,1],[-2,.125],!0),transform=`scale(${toDomPrecision(z)}) translate(${toDomPrecision(x+offset)}px,${toDomPrecision(y+offset)}px)`;htmlElm.style.setProperty("transform",transform),htmlElm2.style.setProperty("transform",transform)}),[editor]);const events=function useCanvasEvents(){const editor=useEditor();return(0,node_modules_react.useMemo)((function canvasEvents(){let lastX,lastY;return{onPointerDown:function onPointerDown(e){e.isKilled||(2!==e.button?0!==e.button&&1!==e.button&&5!==e.button||(setPointerCapture(e.currentTarget,e),editor.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...getPointerInfo(e)}),editor.openMenus.length>0&&(document.body.click(),editor.getContainer().focus())):editor.dispatch({type:"pointer",target:"canvas",name:"right_click",...getPointerInfo(e)}))},onPointerMove:function onPointerMove(e){e.isKilled||e.clientX===lastX&&e.clientY===lastY||(lastX=e.clientX,lastY=e.clientY,editor.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...getPointerInfo(e)}))},onPointerUp:function onPointerUp(e){e.isKilled||0!==e.button&&1!==e.button&&2!==e.button&&5!==e.button||(lastX=e.clientX,lastY=e.clientY,releasePointerCapture(e.currentTarget,e),editor.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...getPointerInfo(e)}))},onPointerEnter:function onPointerEnter(e){if(e.isKilled)return;if(editor.instanceState.isPenMode&&"pen"!==e.pointerType)return;const canHover="mouse"===e.pointerType||"pen"===e.pointerType;editor.updateInstanceState({isHoveringCanvas:!!canHover||null})},onPointerLeave:function onPointerLeave(e){if(e.isKilled)return;if(editor.instanceState.isPenMode&&"pen"!==e.pointerType)return;const canHover="mouse"===e.pointerType||"pen"===e.pointerType;editor.updateInstanceState({isHoveringCanvas:!canHover&&null})},onDragOver:function onDragOver(e){preventDefault(e)},onDrop:async function onDrop(e){if(preventDefault(e),!e.dataTransfer?.files?.length)return;const files=Array.from(e.dataTransfer.files);await editor.putExternalContent({type:"files",files,point:editor.screenToPage({x:e.clientX,y:e.clientY}),ignoreParent:!1})},onTouchStart:function onTouchStart(e){e.isKilled=!0,document.body.click(),preventDefault(e)},onTouchEnd:function onTouchEnd(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&preventDefault(e)},onClick:function onClick(e){stopEventPropagation(e)}}}),[editor])}(),shapeSvgDefs=useValue("shapeSvgDefs",(()=>{const shapeSvgDefsByKey=new Map;for(const util of objectMapValues(editor.shapeUtils)){if(!util)return;const defs=util.getCanvasSvgDefs();for(const{key,component:Component}of defs)shapeSvgDefsByKey.has(key)||shapeSvgDefsByKey.set(key,(0,jsx_runtime.jsx)(Component,{},key))}return[...shapeSvgDefsByKey.values()]}),[editor]),hideShapes=useValue("debug_shapes",(()=>debugFlags.hideShapes.value),[debugFlags]),debugSvg=useValue("debug_svg",(()=>debugFlags.debugSvg.value),[debugFlags]),debugGeometry=useValue("debug_geometry",(()=>debugFlags.debugGeometry.value),[debugFlags]);return(0,jsx_runtime.jsxs)("div",{ref:rCanvas,draggable:!1,className:classnames_default()("tl-canvas",className),"data-testid":"canvas",...events,children:[Background&&(0,jsx_runtime.jsx)(Background,{}),(0,jsx_runtime.jsx)(GridWrapper,{}),(0,jsx_runtime.jsx)(UiLogger,{}),(0,jsx_runtime.jsx)("svg",{className:"tl-svg-context",children:(0,jsx_runtime.jsxs)("defs",{children:[shapeSvgDefs,Cursor&&(0,jsx_runtime.jsx)(Cursor,{}),(0,jsx_runtime.jsx)(CollaboratorHint,{}),(0,jsx_runtime.jsx)(ArrowheadDot,{}),(0,jsx_runtime.jsx)(ArrowheadCross,{}),SvgDefs&&(0,jsx_runtime.jsx)(SvgDefs,{})]})}),(0,jsx_runtime.jsxs)("div",{ref:rHtmlLayer,className:"tl-html-layer tl-shapes",draggable:!1,children:[(0,jsx_runtime.jsx)(SelectionBackgroundWrapper,{}),hideShapes?null:debugSvg?(0,jsx_runtime.jsx)(ShapesWithSVGs,{}):(0,jsx_runtime.jsx)(ShapesToDisplay,{})]}),(0,jsx_runtime.jsx)("div",{className:"tl-fixed-layer tl-overlays",children:(0,jsx_runtime.jsxs)("div",{ref:rHtmlLayer2,className:"tl-html-layer",children:[debugGeometry?(0,jsx_runtime.jsx)(GeometryDebuggingView,{}):null,(0,jsx_runtime.jsx)(HandlesWrapper,{}),(0,jsx_runtime.jsx)(BrushWrapper,{}),(0,jsx_runtime.jsx)(ScribbleWrapper,{}),(0,jsx_runtime.jsx)(ZoomBrushWrapper,{}),(0,jsx_runtime.jsx)(SelectedIdIndicators,{}),(0,jsx_runtime.jsx)(HoveredShapeIndicator,{}),(0,jsx_runtime.jsx)(HintedShapeIndicator,{}),(0,jsx_runtime.jsx)(SnapLinesWrapper,{}),(0,jsx_runtime.jsx)(SelectionForegroundWrapper,{}),(0,jsx_runtime.jsx)(LiveCollaborators,{})]})})]})}function GridWrapper(){const editor=useEditor(),gridSize=useValue("gridSize",(()=>editor.documentSettings.gridSize),[editor]),{x,y,z}=useValue("camera",(()=>editor.camera),[editor]),isGridMode=useValue("isGridMode",(()=>editor.instanceState.isGridMode),[editor]),{Grid}=useEditorComponents();return Grid&&isGridMode?(0,jsx_runtime.jsx)(Grid,{x,y,z,size:gridSize}):null}function ScribbleWrapper(){const editor=useEditor(),scribble=useValue("scribble",(()=>editor.instanceState.scribble),[editor]),zoomLevel=useValue("zoomLevel",(()=>editor.zoomLevel),[editor]),{Scribble}=useEditorComponents();return Scribble&&scribble?(0,jsx_runtime.jsx)(Scribble,{className:"tl-user-scribble",scribble,zoom:zoomLevel}):null}function BrushWrapper(){const editor=useEditor(),brush=useValue("brush",(()=>editor.instanceState.brush),[editor]),{Brush}=useEditorComponents();return Brush&&brush?(0,jsx_runtime.jsx)(Brush,{className:"tl-user-brush",brush}):null}function ZoomBrushWrapper(){const editor=useEditor(),zoomBrush=useValue("zoomBrush",(()=>editor.instanceState.zoomBrush),[editor]),{ZoomBrush}=useEditorComponents();return ZoomBrush&&zoomBrush?(0,jsx_runtime.jsx)(ZoomBrush,{className:"tl-user-brush",brush:zoomBrush}):null}function SnapLinesWrapper(){const editor=useEditor(),lines=useValue("snapLines",(()=>editor.snaps.lines),[editor]),zoomLevel=useValue("zoomLevel",(()=>editor.zoomLevel),[editor]),{SnapLine}=useEditorComponents();return SnapLine&&lines.length>0?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:lines.map((line=>(0,jsx_runtime.jsx)(SnapLine,{className:"tl-user-snapline",line,zoom:zoomLevel},line.id)))}):null}const MIN_HANDLE_DISTANCE=48;function HandlesWrapper(){const editor=useEditor(),{Handles}=useEditorComponents(),zoomLevel=useValue("zoomLevel",(()=>editor.zoomLevel),[editor]),isCoarse=useValue("coarse pointer",(()=>editor.instanceState.isCoarsePointer),[editor]),onlySelectedShape=useValue("onlySelectedShape",(()=>editor.onlySelectedShape),[editor]),isChangingStyle=useValue("isChangingStyle",(()=>editor.instanceState.isChangingStyle),[editor]),isReadonly=useValue("isChangingStyle",(()=>editor.instanceState.isReadonly),[editor]),handles=useValue("handles",(()=>editor.onlySelectedShape?editor.getShapeHandles(editor.onlySelectedShape):void 0),[editor]),transform=useValue("transform",(()=>editor.onlySelectedShape?editor.getShapePageTransform(editor.onlySelectedShape):void 0),[editor]);if(!Handles||!onlySelectedShape||isChangingStyle||isReadonly)return null;if(!handles)return null;if(!transform)return null;const handlesToDisplay=[];for(let i=0,handle=handles[i];i<handles.length;i++,handle=handles[i]){if("vertex"!==handle.type){const prev=handles[i-1],next=handles[i+1];if(prev&&next&&Math.hypot(prev.y-next.y,prev.x-next.x)<MIN_HANDLE_DISTANCE/zoomLevel)continue}handlesToDisplay.push(handle)}return handlesToDisplay.sort((a=>"vertex"===a.type?1:-1)),(0,jsx_runtime.jsx)(Handles,{children:(0,jsx_runtime.jsx)("g",{transform:Matrix2d.toCssString(transform),children:handlesToDisplay.map((handle=>(0,jsx_runtime.jsx)(HandleWrapper,{shapeId:onlySelectedShape.id,handle,zoom:zoomLevel,isCoarse},handle.id)))})})}function HandleWrapper({shapeId,handle,zoom,isCoarse}){const events=function useHandleEvents(id,handleId){const editor=useEditor();return node_modules_react.useMemo((()=>{let lastX,lastY;return{onPointerDown:e=>{if(e.isKilled)return;setPointerCapture(loopToHtmlElement(e.currentTarget),e);const{shape,handle}=getHandle(editor,id,handleId);handle&&editor.dispatch({type:"pointer",target:"handle",handle,shape,name:"pointer_down",...getPointerInfo(e)})},onPointerMove:e=>{if(e.isKilled)return;if(e.clientX===lastX&&e.clientY===lastY)return;lastX=e.clientX,lastY=e.clientY;const{shape,handle}=getHandle(editor,id,handleId);handle&&editor.dispatch({type:"pointer",target:"handle",handle,shape,name:"pointer_move",...getPointerInfo(e)})},onPointerUp:e=>{if(e.isKilled)return;releasePointerCapture(loopToHtmlElement(e.currentTarget),e);const{shape,handle}=getHandle(editor,id,handleId);handle&&editor.dispatch({type:"pointer",target:"handle",handle,shape,name:"pointer_up",...getPointerInfo(e)})}}}),[editor,id,handleId])}(shapeId,handle.id),{Handle}=useEditorComponents();return Handle?(0,jsx_runtime.jsx)("g",{"aria-label":"handle",transform:`translate(${handle.x}, ${handle.y})`,...events,children:(0,jsx_runtime.jsx)(Handle,{shapeId,handle,zoom,isCoarse})}):null}function ShapesWithSVGs(){const editor=useEditor(),renderingShapes=useValue("rendering shapes",(()=>editor.renderingShapes),[editor]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:renderingShapes.map((result=>(0,jsx_runtime.jsxs)(node_modules_react.Fragment,{children:[(0,jsx_runtime.jsx)(Shape,{...result}),(0,jsx_runtime.jsx)(DebugSvgCopy,{id:result.id})]},result.id+"_fragment")))})}function ShapesToDisplay(){const editor=useEditor(),renderingShapes=useValue("rendering shapes",(()=>editor.renderingShapes),[editor]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:renderingShapes.map((result=>(0,jsx_runtime.jsx)(Shape,{...result},result.id+"_shape")))})}function SelectedIdIndicators(){const editor=useEditor(),selectedShapeIds=useValue("selectedShapeIds",(()=>editor.currentPageState.selectedShapeIds),[editor]);return useValue("should display selected ids",(()=>editor.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!editor.instanceState.isChangingStyle),[editor])?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:selectedShapeIds.map((id=>(0,jsx_runtime.jsx)(ShapeIndicator,{className:"tl-user-indicator__selected",id},id+"_indicator")))}):null}const HoveredShapeIndicator=function HoveredShapeIndicator2(){const editor=useEditor(),{HoveredShapeIndicator:HoveredShapeIndicator3}=useEditorComponents(),isCoarsePointer=useValue("coarse pointer",(()=>editor.instanceState.isCoarsePointer),[editor]),isHoveringCanvas=useValue("hovering canvas",(()=>editor.instanceState.isHoveringCanvas),[editor]),hoveredShapeId=useValue("hovered id",(()=>editor.currentPageState.hoveredShapeId),[editor]);return!isCoarsePointer&&isHoveringCanvas&&hoveredShapeId&&HoveredShapeIndicator3?(0,jsx_runtime.jsx)(HoveredShapeIndicator3,{shapeId:hoveredShapeId}):null},HintedShapeIndicator=track((function HintedShapeIndicator2(){const ids=dedupe(useEditor().hintingShapeIds);return ids.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:ids.map((id=>(0,jsx_runtime.jsx)(ShapeIndicator,{className:"tl-user-indicator__hint",id},id+"_hinting")))}):null}));function Cursor(){return(0,jsx_runtime.jsxs)("g",{id:"cursor",children:[(0,jsx_runtime.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,jsx_runtime.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,jsx_runtime.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,jsx_runtime.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,jsx_runtime.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,jsx_runtime.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,jsx_runtime.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,jsx_runtime.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,jsx_runtime.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function CollaboratorHint(){return(0,jsx_runtime.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function ArrowheadDot(){return(0,jsx_runtime.jsx)("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,jsx_runtime.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function ArrowheadCross(){return(0,jsx_runtime.jsxs)("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,jsx_runtime.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,jsx_runtime.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const DebugSvgCopy=track((function DupSvg({id}){const editor=useEditor(),shape=editor.getShape(id),[html,setHtml]=node_modules_react.useState(""),isInRoot=shape?.parentId===editor.currentPageId;return node_modules_react.useEffect((()=>{if(!isInRoot)return;let latest=null;const unsubscribe=react("shape to svg",(async()=>{const renderId=Math.random();latest=renderId;const bb=editor.getShapePageBounds(id),el=await editor.getSvg([id],{padding:0});el&&bb&&latest===renderId&&(el.style.setProperty("overflow","visible"),el.setAttribute("preserveAspectRatio","xMidYMin slice"),el.style.setProperty("transform",`translate(${bb.x}px, ${bb.y+bb.h+12}px)`),el.style.setProperty("border","1px solid black"),setHtml(el?.outerHTML))}));return()=>{latest=null,unsubscribe()}}),[editor,id,isInRoot]),isInRoot?(0,jsx_runtime.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,jsx_runtime.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:html}})}):null}));function UiLogger(){const uiLog=useValue("debugging ui log",(()=>debugFlags.logMessages.value),[debugFlags]);return uiLog.length?(0,jsx_runtime.jsx)("div",{className:"debug__ui-logger",children:uiLog.map(((message,messageIndex)=>{const text="string"==typeof message?message:JSON.stringify(message);return(0,jsx_runtime.jsx)("div",{className:"debug__ui-logger__line",children:text},messageIndex)}))}):null}function SelectionForegroundWrapper(){const editor=useEditor(),selectionRotation=useValue("selection rotation",(()=>editor.selectionRotation),[editor]),selectionBounds=useValue("selection bounds",(()=>editor.selectionRotatedPageBounds),[editor]),{SelectionForeground}=useEditorComponents();return selectionBounds&&SelectionForeground?(0,jsx_runtime.jsx)(SelectionForeground,{bounds:selectionBounds,rotation:selectionRotation}):null}function SelectionBackgroundWrapper(){const editor=useEditor(),selectionRotation=useValue("selection rotation",(()=>editor.selectionRotation),[editor]),selectionBounds=useValue("selection bounds",(()=>editor.selectionRotatedPageBounds),[editor]),{SelectionBackground}=useEditorComponents();return selectionBounds&&SelectionBackground?(0,jsx_runtime.jsx)(SelectionBackground,{bounds:selectionBounds,rotation:selectionRotation}):null}function uniqueId(){return nanoid()}var TLUserPreferences_process=__webpack_require__("./node_modules/process/browser.js");const USER_DATA_KEY="TLDRAW_USER_DATA_v3",userTypeValidator=object({id:string,name:string.nullable().optional(),locale:string.nullable().optional(),color:string.nullable().optional(),isDarkMode:validation_boolean.nullable().optional(),animationSpeed:number.nullable().optional(),isSnapMode:validation_boolean.nullable().optional()}),TLUserPreferences_Versions_MakeFieldsNullable=3,userMigrations=defineMigrations({currentVersion:TLUserPreferences_Versions_MakeFieldsNullable,migrators:{[1]:{up:user=>({...user,animationSpeed:1}),down:({animationSpeed:_,...user})=>user},[2]:{up:user=>({...user,isSnapMode:!1}),down:({isSnapMode:_,...user})=>user},[TLUserPreferences_Versions_MakeFieldsNullable]:{up:user=>user,down:user=>({id:user.id,name:user.name??defaultUserPreferences.name,locale:user.locale??defaultUserPreferences.locale,color:user.color??defaultUserPreferences.color,isDarkMode:user.isDarkMode??defaultUserPreferences.isDarkMode,animationSpeed:user.animationSpeed??defaultUserPreferences.animationSpeed,isSnapMode:user.isSnapMode??defaultUserPreferences.isSnapMode})}}}),USER_COLORS=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];const defaultUserPreferences=Object.freeze({name:"New User",locale:function getDefaultTranslationLocale(){return function _getDefaultTranslationLocale(locales){for(const locale of locales){const supportedLocale=getSupportedLocale(locale);if(supportedLocale)return supportedLocale}return"en"}("undefined"!=typeof window?window.navigator.languages??["en"]:["en"])}(),color:function getRandomColor(){return USER_COLORS[Math.floor(Math.random()*USER_COLORS.length)]}(),isDarkMode:!1,animationSpeed:function userPrefersReducedMotion(){return"undefined"!=typeof window&&(window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches??!1)}()?0:1,isSnapMode:!1});function getFreshUserPreferences(){return{id:uniqueId()}}function migrateUserPreferences(userData){if(null===userData||"object"!=typeof userData)return getFreshUserPreferences();if(!("version"in userData)||!("user"in userData)||"number"!=typeof userData.version)return getFreshUserPreferences();const migrationResult=migrate({value:userData.user,fromVersion:userData.version,toVersion:userMigrations.currentVersion??0,migrations:userMigrations});if("error"===migrationResult.type)return getFreshUserPreferences();try{userTypeValidator.validate(migrationResult.value)}catch(e){return getFreshUserPreferences()}return migrationResult.value}const globalUserPreferences=Atom_atom("globalUserData",function loadUserPreferences(){return migrateUserPreferences("undefined"==typeof window?null:JSON.parse(window?.localStorage?.getItem(USER_DATA_KEY)||"null")??null)}());function setUserPreferences(user){userTypeValidator.validate(user),globalUserPreferences.set(user),function storeUserPreferences(){"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem(USER_DATA_KEY,JSON.stringify({version:userMigrations.currentVersion,user:globalUserPreferences.value}))}(),function broadcastUserPreferencesChange(){channel?.postMessage({type:broadcastEventKey,origin:broadcastOrigin,data:{user:globalUserPreferences.value,version:userMigrations.currentVersion}})}()}const channel="undefined"==typeof BroadcastChannel||void 0!==TLUserPreferences_process&&!1?null:new BroadcastChannel("tldraw-user-sync");channel?.addEventListener("message",(e=>{const data=e.data;data?.type===broadcastEventKey&&data?.origin!==broadcastOrigin&&globalUserPreferences.set(migrateUserPreferences(data.data))}));const broadcastOrigin=uniqueId(),broadcastEventKey="tldraw-user-preferences-change";function createTLUser(opts={}){return{derivePresenceState:opts.derivePresenceState??(()=>Computed_computed("presence",(()=>null))),userPreferences:opts.userPreferences??Computed_computed("userPreferences",(()=>function getUserPreferences(){return globalUserPreferences.value}())),setUserPreferences:opts.setUserPreferences??setUserPreferences}}var eventemitter3=__webpack_require__("./node_modules/eventemitter3/index.js");function SVGContainer({children,className="",...rest}){return(0,jsx_runtime.jsx)("svg",{...rest,className:`tl-svg-container ${className}`,children})}class Geometry2d{isFilled=!1;isClosed=!0;isLabel=!1;isSnappable=!0;constructor(opts){this.isFilled=opts.isFilled,this.isClosed=opts.isClosed,this.isSnappable=opts.isSnappable??!1,this.isLabel=opts.isLabel??!1}hitTestPoint(point,margin=0,hitInside=!1){return this.distanceToPoint(point,hitInside)<=margin}distanceToPoint(point,hitInside=!1){const dist=point.dist(this.nearestPoint(point));return this.isClosed&&(this.isFilled||hitInside)&&pointInPolygon(point,this.vertices)?-dist:dist}distanceToLineSegment(A,B){const point=this.nearestPointOnLineSegment(A,B),dist=Vec2d_Vec2d.DistanceToLineSegment(A,B,point);return this.isClosed&&this.isFilled&&pointInPolygon(point,this.vertices)?-dist:dist}hitTestLineSegment(A,B,distance=0){return this.distanceToLineSegment(A,B)<=distance}nearestPointOnLineSegment(A,B){let nearest,distance=1/0;for(let i=0;i<this.vertices.length;i++){const point=this.vertices[i],d=Vec2d_Vec2d.DistanceToLineSegment(A,B,point);d<distance&&(distance=d,nearest=point)}if(!nearest)throw Error("nearest point not found");return nearest}isPointInBounds(point,margin=0){const{bounds}=this;return!(point.x<bounds.minX-margin||point.y<bounds.minY-margin||point.x>bounds.maxX+margin||point.y>bounds.maxY+margin)}_vertices;get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}getBounds(){return Box2d_Box2d.FromPoints(this.vertices)}_bounds;get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}_snapPoints;get snapPoints(){return this._snapPoints||(this._snapPoints=this.bounds.snapPoints),this._snapPoints}get center(){return this.bounds.center}_area;get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices}=this;let area=0;for(let i=0,n=vertices.length;i<n;i++){const curr=vertices[i],next=vertices[(i+1)%n];area+=curr.x*next.y-next.x*curr.y}return area/2}toSimpleSvgPath(){let path="";const{vertices}=this,n=vertices.length;if(0===n)return path;path+=`M${vertices[0].x},${vertices[0].y}`;for(let i=1;i<n;i++)path+=`L${vertices[i].x},${vertices[i].y}`;return this.isClosed&&(path+="Z"),path}}class Group2d extends Geometry2d{children;constructor(config){super({...config,isClosed:!0,isFilled:!1});const{children}=config;if(0===children.length)throw Error("Group2d must have at least one child");this.children=children}getVertices(){return this.children.filter((c=>!c.isLabel)).flatMap((c=>c.vertices))}nearestPoint(point){let p,d=1/0;const{children}=this;if(0===children.length)throw Error("no children");for(const child of children){const nearest=child.nearestPoint(point),dist=nearest.dist(point);dist<d&&(d=dist,p=nearest)}if(!p)throw Error("nearest point not found");return p}distanceToPoint(point,hitInside=!1){return Math.min(...this.children.map(((c,i)=>c.distanceToPoint(point,hitInside||i>0))))}hitTestPoint(point,margin,hitInside){return!!this.children.filter((c=>!c.isLabel)).find((c=>c.hitTestPoint(point,margin,hitInside)))}hitTestLineSegment(A,B,zoom){return!!this.children.filter((c=>!c.isLabel)).find((c=>c.hitTestLineSegment(A,B,zoom)))}getArea(){return this.children[0].area}toSimpleSvgPath(){let path="";for(const child of this.children)path+=child.toSimpleSvgPath();const corners=Box2d_Box2d.FromPoints(this.vertices).corners;for(let i=0,n=corners.length;i<n;i++){const corner=corners[i],prevCorner=corners[(i-1+n)%n],prevDist=corner.dist(prevCorner),nextCorner=corners[(i+1)%n],nextDist=corner.dist(nextCorner),A=corner.clone().lrp(prevCorner,4/prevDist),B=corner,C=corner.clone().lrp(nextCorner,4/nextDist);path+=`M${A.x},${A.y} L${B.x},${B.y} L${C.x},${C.y} `}return path}}function intersectLineSegmentLineSegment(a1,a2,b1,b2){const ABx=a1.x-b1.x,ABy=a1.y-b1.y,BVx=b2.x-b1.x,BVy=b2.y-b1.y,AVx=a2.x-a1.x,AVy=a2.y-a1.y,ua_t=BVx*ABy-BVy*ABx,ub_t=AVx*ABy-AVy*ABx,u_b=BVy*AVx-BVx*AVy;if(0===ua_t||0===ub_t)return null;if(0===u_b)return null;if(0!==u_b){const ua=ua_t/u_b,ub=ub_t/u_b;if(0<=ua&&ua<=1&&0<=ub&&ub<=1)return Vec2d_Vec2d.AddXY(a1,ua*AVx,ua*AVy)}return null}function intersectLineSegmentCircle(a1,a2,c,r){const a=(a2.x-a1.x)*(a2.x-a1.x)+(a2.y-a1.y)*(a2.y-a1.y),b=2*((a2.x-a1.x)*(a1.x-c.x)+(a2.y-a1.y)*(a1.y-c.y)),deter=b*b-4*a*(c.x*c.x+c.y*c.y+a1.x*a1.x+a1.y*a1.y-2*(c.x*a1.x+c.y*a1.y)-r*r);if(deter<0)return null;if(0===deter)return null;const e=Math.sqrt(deter),u1=(-b+e)/(2*a),u2=(-b-e)/(2*a);if((u1<0||u1>1)&&(u2<0||u2>1))return null;const result=[];return 0<=u1&&u1<=1&&result.push(Vec2d_Vec2d.Lrp(a1,a2,u1)),0<=u2&&u2<=1&&result.push(Vec2d_Vec2d.Lrp(a1,a2,u2)),0===result.length?null:result}function intersectLineSegmentPolyline(a1,a2,points){const result=[];let segmentIntersection;for(let i=0,n=points.length-1;i<n;i++)segmentIntersection=intersectLineSegmentLineSegment(a1,a2,points[i],points[i+1]),segmentIntersection&&result.push(segmentIntersection);return 0===result.length?null:result}function intersectLineSegmentPolygon(a1,a2,points){const result=[];let segmentIntersection;for(let i=1,n=points.length;i<n+1;i++)segmentIntersection=intersectLineSegmentLineSegment(a1,a2,points[i-1],points[i%points.length]),segmentIntersection&&result.push(segmentIntersection);return 0===result.length?null:result}function intersectCirclePolygon(c,r,points){const result=[];let a,b,int;for(let i=0,n=points.length;i<n;i++)a=points[i],b=points[(i+1)%points.length],int=intersectLineSegmentCircle(a,b,c,r),int&&result.push(...int);return 0===result.length?null:result}function intersectCirclePolyline(c,r,points){const result=[];let a,b,int;for(let i=1,n=points.length;i<n;i++)a=points[i-1],b=points[i],int=intersectLineSegmentCircle(a,b,c,r),int&&result.push(...int);return 0===result.length?null:result}function ccw(A,B,C){return(C.y-A.y)*(B.x-A.x)>(B.y-A.y)*(C.x-A.x)}function linesIntersect(A,B,C,D){return ccw(A,C,D)!==ccw(B,C,D)&&ccw(A,B,C)!==ccw(A,B,D)}function intersectPolygonPolygon(polygonA,polygonB){const result=[];let a,b,c,d;for(let i=0,n=polygonA.length;i<n;i++)a=polygonA[i],pointInPolygon(a,polygonB)&&result.push(a);for(let i=0,n=polygonB.length;i<n;i++)a=polygonB[i],pointInPolygon(a,polygonA)&&result.push(a);for(let i=0,n=polygonA.length;i<n;i++){a=polygonA[i],b=polygonA[(i+1)%polygonA.length];for(let j=0,m=polygonB.length;j<m;j++){c=polygonB[j],d=polygonB[(j+1)%polygonB.length];const intersection=intersectLineSegmentLineSegment(a,b,c,d);null!==intersection&&result.push(intersection)}}return 0===result.length?null:function orderClockwise(points){const C=Vec2d_Vec2d.Average(points);return points.sort(((A,B)=>Vec2d_Vec2d.Angle(C,A)-Vec2d_Vec2d.Angle(C,B)))}(result)}function polygonsIntersect(a,b){let a0,a1,b0,b1;for(let i=0,n=a.length;i<n;i++){a0=a[i],a1=a[(i+1)%n];for(let j=0,m=b.length;j<m;j++)if(b0=b[j],b1=b[(j+1)%m],linesIntersect(a0,a1,b0,b1))return!0}return!1}class Edge2d extends Geometry2d{start;end;d;u;ul;constructor(config){super({...config,isClosed:!1,isFilled:!1});const{start,end}=config;this.start=start,this.end=end,this.d=start.clone().sub(end),this.u=this.d.clone().uni(),this.ul=this.u.len()}_length;get length(){return this._length?this._length:this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(point){const{start,end,u,ul:l}=this;if(0===l)return start;const k=Vec2d_Vec2d.Sub(point,start).dpr(u)/l,cx=start.x+u.x*k;if(cx<Math.min(start.x,end.x))return start.x<end.x?start:end;if(cx>Math.max(start.x,end.x))return start.x>end.x?start:end;const cy=start.y+u.y*k;return cy<Math.min(start.y,end.y)?start.y<end.y?start:end:cy>Math.max(start.y,end.y)?start.y>end.y?start:end:new Vec2d_Vec2d(cx,cy)}hitTestLineSegment(A,B,_zoom){return linesIntersect(A,B,this.start,this.end)}}class Polyline2d extends Geometry2d{points;constructor(config){super({isClosed:!1,isFilled:!1,...config});const{points}=config;this.points=points}_segments;get segments(){if(!this._segments){this._segments=[];const{vertices}=this;for(let i=0,n=vertices.length-1;i<n;i++){const start=vertices[i],end=vertices[i+1];this._segments.push(new Edge2d({start,end}))}this.isClosed&&this._segments.push(new Edge2d({start:vertices[vertices.length-1],end:vertices[0]}))}return this._segments}_length;get length(){return this._length||(this._length=this.segments.reduce(((acc,segment)=>acc+segment.length),0)),this._length}getVertices(){return this.points}nearestPoint(A){const{segments}=this;let p,d,nearest=this.points[0],dist=1/0;for(let i=0;i<segments.length;i++)p=segments[i].nearestPoint(A),d=p.dist(A),d<dist&&(nearest=p,dist=d);return nearest}hitTestLineSegment(A,B,zoom){return this.segments.some((edge=>edge.hitTestLineSegment(A,B,zoom)))}}class Polygon2d extends Polyline2d{constructor(config){super({...config}),this.isClosed=!0}}class Rectangle2d extends Polygon2d{x;y;w;h;constructor(config){const{x=0,y=0,width,height}=config;super({...config,points:[new Vec2d_Vec2d(x,y),new Vec2d_Vec2d(x+width,y),new Vec2d_Vec2d(x+width,y+height),new Vec2d_Vec2d(x,y+height)]}),this.x=x,this.y=y,this.w=width,this.h=height}getBounds(){return new Box2d_Box2d(this.x,this.y,this.w,this.h)}}class ShapeUtil{constructor(editor){this.editor=editor}static props;static migrations;static type;canSnap=()=>!0;canScroll=()=>!1;canUnmount=()=>!0;canBind=(_shape,_otherShape)=>!0;canEdit=()=>!1;canResize=()=>!0;canEditInReadOnly=()=>!1;canCrop=()=>!1;providesBackgroundForChildren(shape){return!1}hideResizeHandles=()=>!1;hideRotateHandle=()=>!1;hideSelectionBoundsBg=()=>!1;hideSelectionBoundsFg=()=>!1;isAspectRatioLocked=()=>!1;getOutlineSegments(shape){return[this.editor.getShapeGeometry(shape).vertices]}canReceiveNewChildrenOfType(shape,type){return!1}canDropShapes(shape,shapes){return!1}expandSelectionOutlinePx(shape){return 0}getCanvasSvgDefs(){return[]}onBeforeCreate;onBeforeUpdate;onDragShapesOver;onDragShapesOut;onDropShapesOver;onResizeStart;onResize;onResizeEnd;onTranslateStart;onTranslate;onTranslateEnd;onRotateStart;onRotate;onRotateEnd;onHandleChange;onBindingChange;onChildrenChange;onDoubleClickHandle;onDoubleClickEdge;onDoubleClick;onClick;onEditEnd}function DashedOutlineBox({bounds,className}){const editor=useEditor(),zoomLevel=useValue("zoom level",(()=>editor.zoomLevel),[editor]);return(0,jsx_runtime.jsx)("g",{className,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:bounds.sides.map(((side,i)=>{const{strokeDasharray,strokeDashoffset}=function getPerfectDashProps(totalLength,strokeWidth,opts={}){const{closed=!1,snap=1,start="outset",end="outset",lengthRatio=2,style="dashed"}=opts;let dashLength=0,dashCount=0,ratio=1,gapLength=0,strokeDashoffset=0;switch(style){case"dashed":ratio=1,dashLength=Math.min(strokeWidth*lengthRatio,totalLength/4);break;case"dotted":ratio=100,dashLength=strokeWidth/ratio;break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return closed||("outset"===start?(totalLength+=dashLength/2,strokeDashoffset+=dashLength/2):"skip"===start&&(totalLength-=dashLength,strokeDashoffset-=dashLength),"outset"===end?totalLength+=dashLength/2:"skip"===end&&(totalLength-=dashLength)),dashCount=Math.floor(totalLength/dashLength/(2*ratio)),dashCount-=dashCount%snap,dashCount<3&&"dashed"===style?totalLength/strokeWidth<5?(dashLength=totalLength,dashCount=1,gapLength=0):(dashLength=.333*totalLength,gapLength=.333*totalLength):(dashCount=Math.max(dashCount,3),dashLength=totalLength/dashCount/(2*ratio),closed?(strokeDashoffset=dashLength/2,gapLength=(totalLength-dashCount*dashLength)/dashCount):gapLength=(totalLength-dashCount*dashLength)/Math.max(1,dashCount-1)),{strokeDasharray:[dashLength,gapLength].join(" "),strokeDashoffset:strokeDashoffset.toString()}}(side[0].dist(side[1]),1/zoomLevel,{style:"dashed",lengthRatio:4});return(0,jsx_runtime.jsx)("line",{x1:side[0].x,y1:side[0].y,x2:side[1].x,y2:side[1].y,strokeDasharray,strokeDashoffset},i)}))})}const coreShapes=[class GroupShapeUtil extends ShapeUtil{static type="group";static props=groupShapeProps;static migrations=groupShapeMigrations;hideSelectionBoundsFg=()=>!0;canBind=()=>!1;getDefaultProps(){return{}}getGeometry(shape){const children=this.editor.getSortedChildIdsForParent(shape.id);return 0===children.length?new Rectangle2d({width:1,height:1,isFilled:!1}):new Group2d({children:children.map((childId=>{const shape2=this.editor.getShape(childId),geometry=this.editor.getShapeGeometry(childId),points=this.editor.getShapeLocalTransform(shape2).applyToPoints(geometry.vertices);return geometry.isClosed?new Polygon2d({points,isFilled:!0}):new Polyline2d({points})}))})}component(shape){const isErasing=this.editor.erasingShapeIds.includes(shape.id),{hintingShapeIds}=this.editor.currentPageState,isHintingOtherGroup=hintingShapeIds.length>0&&hintingShapeIds.some((id=>id!==shape.id&&this.editor.isShapeOfType(this.editor.getShape(id),"group"))),isFocused=this.editor.currentPageState.focusedGroupId!==shape.id;if(!isErasing&&(isFocused||isHintingOtherGroup))return null;const bounds=this.editor.getShapeGeometry(shape).bounds;return(0,jsx_runtime.jsx)(SVGContainer,{id:shape.id,children:(0,jsx_runtime.jsx)(DashedOutlineBox,{className:"tl-group",bounds})})}indicator(shape){const bounds=this.editor.getShapeGeometry(shape).bounds;return(0,jsx_runtime.jsx)(DashedOutlineBox,{className:"",bounds})}onChildrenChange=group=>{const children=this.editor.getSortedChildIdsForParent(group.id);return 0===children.length?(this.editor.currentPageState.focusedGroupId===group.id&&this.editor.popFocusedGroupId(),void this.editor.deleteShapes([group.id])):1===children.length?(this.editor.currentPageState.focusedGroupId===group.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(children,group.parentId),void this.editor.deleteShapes([group.id])):void 0}}],coreShapeTypes=new Set(coreShapes.map((s=>s.type)));function checkShapesAndAddCore(customShapes){const shapes=[...coreShapes],addedCustomShapeTypes=new Set;for(const customShape of customShapes){if(coreShapeTypes.has(customShape.type))throw new Error(`Shape type "${customShape.type}" is a core shapes type and cannot be overridden`);if(addedCustomShapeTypes.has(customShape.type))throw new Error(`Shape type "${customShape.type}" is defined more than once`);shapes.push(customShape),addedCustomShapeTypes.add(customShape.type)}return shapes}function sharedStyleEquals(a,b){if(!b)return!1;switch(a.type){case"mixed":return"mixed"===b.type;case"shared":return"shared"===b.type&&a.value===b.value;default:throw exhaustiveSwitchError(a)}}class ReadonlySharedStyleMap{map;constructor(entries){this.map=new Map(entries)}get(prop){return this.map.get(prop)}getAsKnownValue(prop){const value=this.get(prop);if(value&&"mixed"!==value.type)return value.value}get size(){return this.map.size}equals(other){if(this.size!==other.size)return!1;const checkedKeys=new Set;for(const[styleProp,value]of this){if(!sharedStyleEquals(value,other.get(styleProp)))return!1;checkedKeys.add(styleProp)}for(const[styleProp,value]of other)if(!checkedKeys.has(styleProp)&&!sharedStyleEquals(value,this.get(styleProp)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class SharedStyleMap extends ReadonlySharedStyleMap{set(prop,value){this.map.set(prop,value)}applyValue(prop,value){const existingValue=this.get(prop);if(existingValue)switch(existingValue.type){case"mixed":return;case"shared":return void(existingValue.value!==value&&this.set(prop,{type:"mixed"}));default:exhaustiveSwitchError(existingValue,"type")}else this.set(prop,{type:"shared",value})}}class WeakMapCache{items=new WeakMap;get(item,cb){return this.items.has(item)||this.items.set(item,cb(item)),this.items.get(item)}access(item){return this.items.get(item)}set(item,value){this.items.set(item,value)}has(item){return this.items.has(item)}invalidate(item){this.items.delete(item)}bust(){this.items=new WeakMap}}const DIGITS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",INTEGER_ZERO="a0",SMALLEST_INTEGER="A00000000000000000000000000";function getIntegerLength(head){if(head>="a"&&head<="z")return head.charCodeAt(0)-"a".charCodeAt(0)+2;if(head>="A"&&head<="Z")return"Z".charCodeAt(0)-head.charCodeAt(0)+2;throw new Error("Invalid index key head: "+head)}function validateInteger(int){if(int.length!==getIntegerLength(int.charAt(0)))throw new Error("invalid integer part of index key: "+int)}function isNotUndefined(n){if(void 0===n)throw Error("n is undefined")}function incrementInteger(x){validateInteger(x);const[head,...digs]=x.split("");let carry=!0;for(let i=digs.length-1;carry&&i>=0;i--){const d=DIGITS.indexOf(digs[i])+1;d===DIGITS.length?digs[i]="0":(digs[i]=DIGITS.charAt(d),carry=!1)}if(carry){if("Z"===head)return"a0";if("z"===head)return;const h=String.fromCharCode(head.charCodeAt(0)+1);return h>"a"?digs.push("0"):digs.pop(),h+digs.join("")}return head+digs.join("")}function midpoint(a,b){if(void 0!==b&&a>=b)throw new Error(a+" >= "+b);if("0"===a.slice(-1)||b&&"0"===b.slice(-1))throw new Error("trailing zero");if(b){let n=0;for(;(a.charAt(n)||"0")===b.charAt(n);)n++;if(n>0)return b.slice(0,n)+midpoint(a.slice(n),b.slice(n))}const digitA=a?DIGITS.indexOf(a.charAt(0)):0,digitB=void 0!==b?DIGITS.indexOf(b.charAt(0)):DIGITS.length;if(digitB-digitA>1){const midDigit=Math.round(.5*(digitA+digitB));return DIGITS.charAt(midDigit)}return b&&b.length>1?b.slice(0,1):DIGITS.charAt(digitA)+midpoint(a.slice(1),void 0)}function getIntegerPart(index){const integerPartLength=getIntegerLength(index.charAt(0));if(integerPartLength>index.length)throw new Error("invalid index: "+index);return index.slice(0,integerPartLength)}function validateOrder(index){if(index===SMALLEST_INTEGER)throw new Error("invalid index: "+index);const i=getIntegerPart(index);if("0"===index.slice(i.length).slice(-1))throw new Error("invalid index: "+index)}function generateKeyBetween(a,b){if(void 0!==a&&validateOrder(a),void 0!==b&&validateOrder(b),void 0!==a&&void 0!==b&&a>=b)throw new Error(a+" >= "+b);if(void 0===a&&void 0===b)return INTEGER_ZERO;if(void 0===a){if(void 0===b)throw Error("b is undefined");const ib2=getIntegerPart(b),fb2=b.slice(ib2.length);if(ib2===SMALLEST_INTEGER)return ib2+midpoint("",fb2);if(ib2<b)return ib2;const ibl=function decrementInteger(x){validateInteger(x);const[head,...digs]=x.split("");let borrow=!0;for(let i=digs.length-1;borrow&&i>=0;i--){const d=DIGITS.indexOf(digs[i])-1;-1===d?digs[i]=DIGITS.slice(-1):(digs[i]=DIGITS.charAt(d),borrow=!1)}if(borrow){if("a"===head)return"Z"+DIGITS.slice(-1);if("A"===head)return;const h=String.fromCharCode(head.charCodeAt(0)-1);return h<"Z"?digs.push(DIGITS.slice(-1)):digs.pop(),h+digs.join("")}return head+digs.join("")}(ib2);return isNotUndefined(ibl),ibl}if(void 0===b){const ia2=getIntegerPart(a),fa2=a.slice(ia2.length),i2=incrementInteger(ia2);return void 0===i2?ia2+midpoint(fa2,void 0):i2}const ia=getIntegerPart(a),fa=a.slice(ia.length),ib=getIntegerPart(b),fb=b.slice(ib.length);if(ia===ib)return ia+midpoint(fa,fb);const i=incrementInteger(ia);return isNotUndefined(i),i<b?i:ia+midpoint(fa,void 0)}function dgreensp_generateNKeysBetween(a,b,n){if(0===n)return[];if(1===n)return[generateKeyBetween(a,b)];if(void 0===b){let c2=generateKeyBetween(a,b);const result=[c2];for(let i=0;i<n-1;i++)c2=generateKeyBetween(c2,b),result.push(c2);return result}if(void 0===a){let c2=generateKeyBetween(a,b);const result=[c2];for(let i=0;i<n-1;i++)c2=generateKeyBetween(a,c2),result.push(c2);return result.reverse(),result}const mid=Math.floor(n/2),c=generateKeyBetween(a,b);return[...dgreensp_generateNKeysBetween(a,c,mid),c,...dgreensp_generateNKeysBetween(c,b,n-mid-1)]}function getIndicesBetween(below,above,n){return dgreensp_generateNKeysBetween(below,above,n)}function getIndicesAbove(below,n){return dgreensp_generateNKeysBetween(below,void 0,n)}function getIndexBetween(below,above){return dgreensp_generateNKeysBetween(below,above,1)[0]}function getIndexAbove(below){return dgreensp_generateNKeysBetween(below,void 0,1)[0]}function getIndexBelow(above){return dgreensp_generateNKeysBetween(void 0,above,1)[0]}function getIndices(n,start="a1"){return[start,...dgreensp_generateNKeysBetween(start,void 0,n)]}function reordering_sortByIndex(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function getReorderingShapesChanges(editor,operation,ids){if(0===ids.length)return[];const parents=new Map;for(const shape of compact(ids.map((id=>editor.getShape(id))))){const{parentId}=shape;parents.has(parentId)||parents.set(parentId,{children:compact(editor.getSortedChildIdsForParent(parentId).map((id=>editor.getShape(id)))),moving:new Set}),parents.get(parentId).moving.add(shape)}const changes=[];switch(operation){case"toBack":parents.forEach((({moving,children})=>function reorderToBack(moving,children,changes){const len=children.length;if(moving.size===len)return;let below,above;for(let i=0;i<len;i++){const shape=children[i];if(!moving.has(shape)){above=shape.index;break}below=shape.index,moving.delete(shape)}if(0===moving.size)return;{const indices=getIndicesBetween(below,above,moving.size);changes.push(...Array.from(moving.values()).sort(reordering_sortByIndex).map(((shape,i)=>({...shape,index:indices[i]}))))}}(moving,children,changes)));break;case"toFront":parents.forEach((({moving,children})=>function reorderToFront(moving,children,changes){const len=children.length;if(moving.size===len)return;let below,above;for(let i=len-1;i>-1;i--){const shape=children[i];if(!moving.has(shape)){below=shape.index;break}above=shape.index,moving.delete(shape)}if(0===moving.size)return;{const indices=getIndicesBetween(below,above,moving.size);changes.push(...Array.from(moving.values()).sort(reordering_sortByIndex).map(((shape,i)=>({...shape,index:indices[i]}))))}}(moving,children,changes)));break;case"forward":parents.forEach((({moving,children})=>function reorderForward(moving,children,changes){const len=children.length;if(moving.size===len)return;let state={name:"skipping"};for(let i=0;i<len;i++){const isMoving=moving.has(children[i]);switch(state.name){case"skipping":if(!isMoving)continue;state={name:"selecting",selectIndex:i};break;case"selecting":{if(isMoving)continue;const{selectIndex}=state;getIndicesBetween(children[i].index,children[i+1]?.index,i-selectIndex).forEach(((index,k)=>changes.push({...children[selectIndex+k],index}))),state={name:"skipping"};break}}}}(moving,children,changes)));break;case"backward":parents.forEach((({moving,children})=>function reorderBackward(moving,children,changes){const len=children.length;if(moving.size===len)return;let state={name:"skipping"};for(let i=len-1;i>-1;i--){const isMoving=moving.has(children[i]);switch(state.name){case"skipping":if(!isMoving)continue;state={name:"selecting",selectIndex:i};break;case"selecting":if(isMoving)continue;getIndicesBetween(children[i-1]?.index,children[i].index,state.selectIndex-i).forEach(((index,k)=>{changes.push({...children[i+k+1],index})})),state={name:"skipping"}}}}(moving,children,changes)))}return changes}function getRotationSnapshot({editor}){const{selectionRotation,selectionRotatedPageBounds:selectionBounds,inputs:{originPagePoint},selectedShapes}=editor;if(!selectionBounds)return null;const selectionPageCenter=selectionBounds.center.clone().rotWith(selectionBounds.point,selectionRotation);return{selectionPageCenter,initialCursorAngle:selectionPageCenter.angle(originPagePoint),initialSelectionRotation:selectionRotation,shapeSnapshots:selectedShapes.map((shape=>({shape:structuredClone(shape),initialPagePoint:editor.getShapePageTransform(shape.id).point()})))}}function applyRotationToSnapshotShapes({delta,editor,snapshot,stage}){const{selectionPageCenter,shapeSnapshots}=snapshot;editor.updateShapes(shapeSnapshots.map((({shape,initialPagePoint})=>{const parentTransform=isShapeId(shape.parentId)?editor.getShapePageTransform(shape.parentId):Matrix2d.Identity(),newPagePoint=Vec2d_Vec2d.RotWith(initialPagePoint,selectionPageCenter,delta),newLocalPoint=Matrix2d.applyToPoint(Matrix2d.Inverse(parentTransform),newPagePoint),newRotation=canonicalizeRotation(shape.rotation+delta);return{id:shape.id,type:shape.type,x:newLocalPoint.x,y:newLocalPoint.y,rotation:newRotation}})));const changes=[];shapeSnapshots.forEach((({shape})=>{const current=editor.getShape(shape.id);if(!current)return;const util=editor.getShapeUtil(shape);if("start"===stage||"one-off"===stage){const changeStart=util.onRotateStart?.(shape);changeStart&&changes.push(changeStart)}const changeUpdate=util.onRotate?.(shape,current);if(changeUpdate&&changes.push(changeUpdate),"end"===stage||"one-off"===stage){const changeEnd=util.onRotateEnd?.(shape,current);changeEnd&&changes.push(changeEnd)}})),changes.length>0&&editor.updateShapes(changes)}const isShapeInPage=(store,pageId,shape)=>{for(;!isPageId(shape.parentId);){const parent=store.get(shape.parentId);if(!parent)return!1;shape=parent}return shape.parentId===pageId};class ClickManager{constructor(editor){this.editor=editor}_clickId="";_clickTimeout;_clickScreenPoint;_previousScreenPoint;_getClickTimeout=(state,id=uniqueId())=>{this._clickId=id,clearTimeout(this._clickTimeout),this._clickTimeout=setTimeout((()=>{if(this._clickState===state&&this._clickId===id){switch(this._clickState){case"pendingTriple":this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break;case"pendingQuadruple":this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break;case"pendingOverflow":this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"})}this._clickState="idle"}}),"idle"===state||"pendingDouble"===state?450:200)};_clickState="idle";get clickState(){return this._clickState}lastPointerInfo={};transformPointerDownEvent=info=>{if(!this._clickState)return info;switch(this._clickScreenPoint=Vec2d_Vec2d.From(info.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>40&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=info,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),info;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...info,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...info,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...info,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),info;default:return this._clickTimeout=this._getClickTimeout(this._clickState),info}};transformPointerUpEvent=info=>{if(!this._clickState)return info;switch(this._clickScreenPoint=Vec2d_Vec2d.From(info.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return info}};cancelDoubleClickTimeout=()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"};handleMove=()=>{"idle"!==this._clickState&&this._clickScreenPoint&&this._clickScreenPoint.dist(this.editor.inputs.currentScreenPoint)>(this.editor.instanceState.isCoarsePointer?6:DRAG_DISTANCE)&&this.cancelDoubleClickTimeout()}}class EnvironmentManager{constructor(editor){this.editor=editor,"undefined"!=typeof window&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)):(this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1)}isSafari;isIos;isChromeForIos;isFirefox;isAndroid}function Stack_stack(items){if(items){let result=EMPTY_STACK_ITEM;for(;items.length;)result=result.push(items.pop());return result}return EMPTY_STACK_ITEM}class EmptyStackItem{length=0;head=null;tail=this;push(head){return new StackItem(head,this)}toArray(){return EMPTY_ARRAY}[Symbol.iterator](){return{next:()=>({value:void 0,done:!0})}}}const EMPTY_STACK_ITEM=new EmptyStackItem;class StackItem{constructor(head,tail){this.head=head,this.tail=tail,this.length=tail.length+1}length;push(head){return new StackItem(head,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let stack2=this;return{next(){if(stack2.length){const value=stack2.head;return stack2=stack2.tail,{value,done:!1}}return{value:void 0,done:!0}}}}}class HistoryManager{constructor(ctx,annotateError){this.ctx=ctx,this.annotateError=annotateError}_undos=Atom_atom("HistoryManager.undos",Stack_stack());_redos=Atom_atom("HistoryManager.redos",Stack_stack());_batchDepth=0;onBatchComplete=()=>{};_commands={};get numUndos(){return this._undos.value.length}get numRedos(){return this._redos.value.length}createCommand=(name,constructor,handle)=>{if(this._commands[name])throw new Error(`Duplicate command: ${name}`);this._commands[name]=handle;const exec=(...args)=>{if(!this._batchDepth)return this.batch((()=>exec(...args))),this.ctx;const result=constructor(...args);if(!result)return this.ctx;const{data,ephemeral,squashing,preservesRedoStack}=result;if(this.ignoringUpdates(((undos,redos)=>(handle.do(data),{undos,redos}))),!ephemeral){const prev=this._undos.value.head;squashing&&prev&&"command"===prev.type&&prev.name===name&&prev.preservesRedoStack===preservesRedoStack?this._undos.update((undos=>undos.tail.push({...prev,id:uniqueId(),data:handle.squash(prev.data,data)}))):this._undos.update((undos=>undos.push({type:"command",name,data,id:uniqueId(),preservesRedoStack}))),result.preservesRedoStack||this._redos.set(Stack_stack()),this.ctx.emit("change-history",{reason:"push"})}return this.ctx};return exec};batch=fn=>{try{this._batchDepth++,1===this._batchDepth?transact((()=>{const mostRecentActionId=this._undos.value.head?.id;fn(),mostRecentActionId!==this._undos.value.head?.id&&this.onBatchComplete()})):fn()}catch(error){throw this.annotateError(error),error}finally{this._batchDepth--}return this};ignoringUpdates=fn=>{let undos=this._undos.value,redos=this._redos.value;this._undos.set(Stack_stack()),this._redos.set(Stack_stack());try{({undos,redos}=transact((()=>fn(undos,redos))))}finally{this._undos.set(undos),this._redos.set(redos)}};_undo=({pushToRedoStack,toMark})=>(this.ignoringUpdates(((undos,redos)=>{if(0===undos.length)return{undos,redos};for(;"STOP"===undos.head?.type;){const mark=undos.head;if(undos=undos.tail,pushToRedoStack&&(redos=redos.push(mark)),mark.id===toMark)return this.ctx.emit("change-history",pushToRedoStack?{reason:"undo"}:{reason:"bail",markId:toMark}),{undos,redos}}if(0===undos.length)return this.ctx.emit("change-history",pushToRedoStack?{reason:"undo"}:{reason:"bail",markId:toMark}),{undos,redos};for(;undos.head;){const command=undos.head;if(undos=undos.tail,pushToRedoStack&&(redos=redos.push(command)),"STOP"===command.type){if(command.onUndo&&(!toMark||command.id===toMark))return this.ctx.emit("change-history",pushToRedoStack?{reason:"undo"}:{reason:"bail",markId:toMark}),{undos,redos}}else{this._commands[command.name].undo(command.data)}}return this.ctx.emit("change-history",pushToRedoStack?{reason:"undo"}:{reason:"bail",markId:toMark}),{undos,redos}})),this);undo=()=>(this._undo({pushToRedoStack:!0}),this);redo=()=>(this.ignoringUpdates(((undos,redos)=>{if(0===redos.length)return{undos,redos};for(;"STOP"===redos.head?.type;)undos=undos.push(redos.head),redos=redos.tail;if(0===redos.length)return this.ctx.emit("change-history",{reason:"redo"}),{undos,redos};for(;redos.head;){const command=redos.head;if(undos=undos.push(redos.head),redos=redos.tail,"STOP"===command.type){if(command.onRedo)break}else{const handler=this._commands[command.name];handler.redo?handler.redo(command.data):handler.do(command.data)}}return this.ctx.emit("change-history",{reason:"redo"}),{undos,redos}})),this);bail=()=>(this._undo({pushToRedoStack:!1}),this);bailToMark=id=>(this._undo({pushToRedoStack:!1,toMark:id}),this);mark=(id=uniqueId(),onUndo=!0,onRedo=!0)=>{const mostRecent=this._undos.value.head;return mostRecent&&"STOP"===mostRecent.type&&mostRecent.id===id&&mostRecent.onUndo===onUndo&&mostRecent.onRedo===onRedo?mostRecent.id:(this._undos.update((undos=>undos.push({type:"STOP",id,onUndo,onRedo}))),this.ctx.emit("mark-history",{id}),id)};clear(){this._undos.set(Stack_stack()),this._redos.set(Stack_stack())}}class SideEffectManager{constructor(editor){this.editor=editor,editor.store.onBeforeCreate=(record,source)=>{const handlers=this._beforeCreateHandlers[record.typeName];if(handlers){let r=record;for(const handler of handlers)r=handler(r,source);return r}return record},editor.store.onAfterCreate=(record,source)=>{const handlers=this._afterCreateHandlers[record.typeName];if(handlers)for(const handler of handlers)handler(record,source)},editor.store.onBeforeChange=(prev,next,source)=>{const handlers=this._beforeChangeHandlers[next.typeName];if(handlers){let r=next;for(const handler of handlers)r=handler(prev,r,source);return r}return next};let updateDepth=0;editor.store.onAfterChange=(prev,next,source)=>{if(updateDepth++,updateDepth>1e3)console.error("[CleanupManager.onAfterChange] Maximum update depth exceeded, bailing out.");else{const handlers=this._afterChangeHandlers[next.typeName];if(handlers)for(const handler of handlers)handler(prev,next,source)}updateDepth--},editor.store.onBeforeDelete=(record,source)=>{const handlers=this._beforeDeleteHandlers[record.typeName];if(handlers)for(const handler of handlers)if(!1===handler(record,source))return!1},editor.store.onAfterDelete=(record,source)=>{const handlers=this._afterDeleteHandlers[record.typeName];if(handlers)for(const handler of handlers)handler(record,source)},editor.history.onBatchComplete=()=>{this._batchCompleteHandlers.forEach((fn=>fn()))}}_beforeCreateHandlers={};_afterCreateHandlers={};_beforeChangeHandlers={};_afterChangeHandlers={};_beforeDeleteHandlers={};_afterDeleteHandlers={};_batchCompleteHandlers=[];registerBeforeCreateHandler(typeName,handler){return this._beforeCreateHandlers[typeName]||(this._beforeCreateHandlers[typeName]=[]),this._beforeCreateHandlers[typeName].push(handler),()=>remove(this._beforeCreateHandlers[typeName],handler)}registerAfterCreateHandler(typeName,handler){return this._afterCreateHandlers[typeName]||(this._afterCreateHandlers[typeName]=[]),this._afterCreateHandlers[typeName].push(handler),()=>remove(this._afterCreateHandlers[typeName],handler)}registerBeforeChangeHandler(typeName,handler){return this._beforeChangeHandlers[typeName]||(this._beforeChangeHandlers[typeName]=[]),this._beforeChangeHandlers[typeName].push(handler),()=>remove(this._beforeChangeHandlers[typeName],handler)}registerAfterChangeHandler(typeName,handler){return this._afterChangeHandlers[typeName]||(this._afterChangeHandlers[typeName]=[]),this._afterChangeHandlers[typeName].push(handler),()=>remove(this._afterChangeHandlers[typeName],handler)}registerBeforeDeleteHandler(typeName,handler){return this._beforeDeleteHandlers[typeName]||(this._beforeDeleteHandlers[typeName]=[]),this._beforeDeleteHandlers[typeName].push(handler),()=>remove(this._beforeDeleteHandlers[typeName],handler)}registerAfterDeleteHandler(typeName,handler){return this._afterDeleteHandlers[typeName]||(this._afterDeleteHandlers[typeName]=[]),this._afterDeleteHandlers[typeName].push(handler),()=>remove(this._afterDeleteHandlers[typeName],handler)}registerBatchCompleteHandler(handler){return this._batchCompleteHandlers.push(handler),()=>remove(this._batchCompleteHandlers,handler)}}function remove(array,item){const index=array.indexOf(item);index>=0&&array.splice(index,1)}var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp(target,key,result),result};const round=x=>Math.round(x*10**8)/10**8;function findAdjacentGaps(gaps,shapeId,gapLength,direction,intersection){const matches=gaps.filter((gap=>("forward"===direction?gap.startNode.id===shapeId:gap.endNode.id===shapeId)&&round(gap.length)===round(gapLength)&&rangeIntersection(gap.breadthIntersection[0],gap.breadthIntersection[1],intersection[0],intersection[1])));if(0===matches.length)return[];const nextNodes=new Set;return matches.forEach((match=>{const node="forward"===direction?match.endNode.id:match.startNode.id;if(!nextNodes.has(node)){nextNodes.add(node);const foundGaps=findAdjacentGaps(gaps,node,gapLength,direction,rangeIntersection(match.breadthIntersection[0],match.breadthIntersection[1],intersection[0],intersection[1]));matches.push(...foundGaps)}})),matches}class SnapManager{constructor(editor){this.editor=editor}_snapLines=Atom_atom("snapLines",void 0);get lines(){return this._snapLines.value??EMPTY_ARRAY}clear(){this.lines.length&&this._snapLines.set(void 0)}setLines(lines){this._snapLines.set(lines)}get snapPointsCache(){const{editor}=this;return editor.store.createComputedCache("snapPoints",(shape=>{const pageTransfrorm=editor.getShapePageTransform(shape.id);if(!pageTransfrorm)return;return this.editor.getShapeGeometry(shape).snapPoints.map(((point,i)=>{const{x,y}=Matrix2d.applyToPoint(pageTransfrorm,point);return{x,y,id:`${shape.id}:${i}`}}))}))}get snapThreshold(){return 8/this.editor.zoomLevel}get snappableShapes(){const{editor}=this,{selectedShapeIds,renderingBounds}=editor,snappableShapes=[],collectSnappableShapesFromParent=parentId=>{const sortedChildIds=editor.getSortedChildIdsForParent(parentId);for(const childId of sortedChildIds){if(selectedShapeIds.includes(childId))continue;const childShape=editor.getShape(childId);if(!childShape)continue;if(!editor.getShapeUtil(childShape).canSnap(childShape))continue;const pageBounds=editor.getShapePageBounds(childId);pageBounds&&renderingBounds.includes(pageBounds)&&(editor.isShapeOfType(childShape,"group")?collectSnappableShapesFromParent(childId):snappableShapes.push({id:childId,pageBounds,isClosed:editor.getShapeGeometry(childShape).isClosed}))}};return collectSnappableShapesFromParent(this.currentCommonAncestor??editor.currentPageId),snappableShapes}get currentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.selectedShapes)}get snappablePoints(){const{snappableShapes,snapPointsCache}=this,result=[];return snappableShapes.forEach((shape=>{const snapPoints=snapPointsCache.get(shape.id);snapPoints&&result.push(...snapPoints)})),result}get visibleGaps(){const horizontal=[],vertical=[];let startNode,endNode;const sortedShapesOnCurrentPageHorizontal=this.snappableShapes.sort(((a,b)=>a.pageBounds.minX-b.pageBounds.minX));for(let i=0;i<sortedShapesOnCurrentPageHorizontal.length;i++){startNode=sortedShapesOnCurrentPageHorizontal[i];for(let j=i+1;j<sortedShapesOnCurrentPageHorizontal.length;j++)endNode=sortedShapesOnCurrentPageHorizontal[j],startNode.pageBounds.maxX<endNode.pageBounds.minX&&rangesOverlap(startNode.pageBounds.minY,startNode.pageBounds.maxY,endNode.pageBounds.minY,endNode.pageBounds.maxY)&&horizontal.push({startNode,endNode,startEdge:[new Vec2d_Vec2d(startNode.pageBounds.maxX,startNode.pageBounds.minY),new Vec2d_Vec2d(startNode.pageBounds.maxX,startNode.pageBounds.maxY)],endEdge:[new Vec2d_Vec2d(endNode.pageBounds.minX,endNode.pageBounds.minY),new Vec2d_Vec2d(endNode.pageBounds.minX,endNode.pageBounds.maxY)],length:endNode.pageBounds.minX-startNode.pageBounds.maxX,breadthIntersection:rangeIntersection(startNode.pageBounds.minY,startNode.pageBounds.maxY,endNode.pageBounds.minY,endNode.pageBounds.maxY)})}const sortedShapesOnCurrentPageVertical=sortedShapesOnCurrentPageHorizontal.sort(((a,b)=>a.pageBounds.minY-b.pageBounds.minY));for(let i=0;i<sortedShapesOnCurrentPageVertical.length;i++){startNode=sortedShapesOnCurrentPageVertical[i];for(let j=i+1;j<sortedShapesOnCurrentPageVertical.length;j++)endNode=sortedShapesOnCurrentPageVertical[j],startNode.pageBounds.maxY<endNode.pageBounds.minY&&rangesOverlap(startNode.pageBounds.minX,startNode.pageBounds.maxX,endNode.pageBounds.minX,endNode.pageBounds.maxX)&&vertical.push({startNode,endNode,startEdge:[new Vec2d_Vec2d(startNode.pageBounds.minX,startNode.pageBounds.maxY),new Vec2d_Vec2d(startNode.pageBounds.maxX,startNode.pageBounds.maxY)],endEdge:[new Vec2d_Vec2d(endNode.pageBounds.minX,endNode.pageBounds.minY),new Vec2d_Vec2d(endNode.pageBounds.maxX,endNode.pageBounds.minY)],length:endNode.pageBounds.minY-startNode.pageBounds.maxY,breadthIntersection:rangeIntersection(startNode.pageBounds.minX,startNode.pageBounds.maxX,endNode.pageBounds.minX,endNode.pageBounds.maxX)})}return{horizontal,vertical}}snapTranslate({lockedAxis,initialSelectionPageBounds,initialSelectionSnapPoints,dragDelta}){const{snappablePoints:visibleSnapPointsNotInSelection,snapThreshold}=this,selectionPageBounds=initialSelectionPageBounds.clone().translate(dragDelta),selectionSnapPoints=initialSelectionSnapPoints.map((({x,y},i)=>({id:"selection:"+i,x:x+dragDelta.x,y:y+dragDelta.y}))),otherNodeSnapPoints=visibleSnapPointsNotInSelection,nearestSnapsX=[],nearestSnapsY=[],minOffset=new Vec2d_Vec2d(snapThreshold,snapThreshold);this.collectPointSnaps({minOffset,nearestSnapsX,nearestSnapsY,otherNodeSnapPoints,selectionSnapPoints}),this.collectGapSnaps({selectionPageBounds,nearestSnapsX,nearestSnapsY,minOffset});const nudge=new Vec2d_Vec2d("x"===lockedAxis?0:nearestSnapsX[0]?.nudge??0,"y"===lockedAxis?0:nearestSnapsY[0]?.nudge??0);minOffset.x=0,minOffset.y=0,nearestSnapsX.length=0,nearestSnapsY.length=0,selectionSnapPoints.forEach((s=>{s.x+=nudge.x,s.y+=nudge.y})),selectionPageBounds.translate(nudge),this.collectPointSnaps({minOffset,nearestSnapsX,nearestSnapsY,otherNodeSnapPoints,selectionSnapPoints}),this.collectGapSnaps({selectionPageBounds,nearestSnapsX,nearestSnapsY,minOffset});const pointSnapsLines=this.getPointSnapLines({nearestSnapsX,nearestSnapsY}),gapSnapLines=this.getGapSnapLines({selectionPageBounds,nearestSnapsX,nearestSnapsY});return this._snapLines.set([...gapSnapLines,...pointSnapsLines]),{nudge}}get outlinesInPageSpace(){return this.snappableShapes.map((({id,isClosed})=>{const outline=deepCopy(this.editor.getShapeGeometry(id).vertices);isClosed&&outline.push(outline[0]);const pageTransform=this.editor.getShapePageTransform(id);if(!pageTransform)throw Error("No page transform");return Matrix2d.applyToPoints(pageTransform,outline)}))}getSnappingHandleDelta({handlePoint,additionalSegments}){const{outlinesInPageSpace,snapThreshold}=this;let C,D,nearest,distance,minDistance=snapThreshold,nearestPoint=null;const allSegments=[...outlinesInPageSpace,...additionalSegments];for(const outline of allSegments)for(let i=0;i<outline.length-1;i++)C=outline[i],D=outline[i+1],nearest=Vec2d_Vec2d.NearestPointOnLineSegment(C,D,handlePoint),distance=Vec2d_Vec2d.Dist(handlePoint,nearest),isNaN(distance)||distance<minDistance&&(minDistance=distance,nearestPoint=nearest);return nearestPoint?(this._snapLines.set([{id:uniqueId(),type:"points",points:[nearestPoint]}]),Vec2d_Vec2d.Sub(nearestPoint,handlePoint)):null}snapResize({initialSelectionPageBounds,dragDelta,handle:originalHandle,isAspectRatioLocked,isResizingFromCenter}){const{snapThreshold}=this,{box:unsnappedResizedPageBounds,scaleX,scaleY}=Box2d_Box2d.Resize(initialSelectionPageBounds,originalHandle,isResizingFromCenter?2*dragDelta.x:dragDelta.x,isResizingFromCenter?2*dragDelta.y:dragDelta.y,isAspectRatioLocked);let handle=originalHandle;scaleX<0&&(handle=function flipSelectionHandleX(handle){switch(handle){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return handle}}(handle)),scaleY<0&&(handle=function flipSelectionHandleY(handle){switch(handle){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return handle}}(handle)),isResizingFromCenter&&(unsnappedResizedPageBounds.center=initialSelectionPageBounds.center);const isXLocked="top"===handle||"bottom"===handle,isYLocked="left"===handle||"right"===handle,selectionSnapPoints=getResizeSnapPointsForHandle(handle,unsnappedResizedPageBounds),otherNodeSnapPoints=this.snappablePoints,nearestSnapsX=[],nearestSnapsY=[],minOffset=new Vec2d_Vec2d(snapThreshold,snapThreshold);this.collectPointSnaps({minOffset,nearestSnapsX,nearestSnapsY,otherNodeSnapPoints,selectionSnapPoints});const nudge=new Vec2d_Vec2d(isXLocked?0:nearestSnapsX[0]?.nudge??0,isYLocked?0:nearestSnapsY[0]?.nudge??0);if(isAspectRatioLocked&&function isSelectionCorner(selection){return"top_left"===selection||"top_right"===selection||"bottom_right"===selection||"bottom_left"===selection}(handle)&&0!==nudge.len()){const primaryNudgeAxis=nearestSnapsX.length&&nearestSnapsY.length?Math.abs(nudge.x)<Math.abs(nudge.y)?"x":"y":nearestSnapsX.length?"x":"y",ratio=initialSelectionPageBounds.aspectRatio;"x"===primaryNudgeAxis?(nearestSnapsY.length=0,nudge.y=nudge.x/ratio,"bottom_left"!==handle&&"top_right"!==handle||(nudge.y=-nudge.y)):(nearestSnapsX.length=0,nudge.x=nudge.y*ratio,"bottom_left"!==handle&&"top_right"!==handle||(nudge.x=-nudge.x))}const snappedDelta=Vec2d_Vec2d.Add(dragDelta,nudge),{box:snappedResizedPageBounds}=Box2d_Box2d.Resize(initialSelectionPageBounds,originalHandle,isResizingFromCenter?2*snappedDelta.x:snappedDelta.x,isResizingFromCenter?2*snappedDelta.y:snappedDelta.y,isAspectRatioLocked);isResizingFromCenter&&(snappedResizedPageBounds.center=initialSelectionPageBounds.center);const snappedSelectionPoints=getResizeSnapPointsForHandle("any",snappedResizedPageBounds);nearestSnapsX.length=0,nearestSnapsY.length=0,minOffset.x=0,minOffset.y=0,this.collectPointSnaps({minOffset,nearestSnapsX,nearestSnapsY,otherNodeSnapPoints,selectionSnapPoints:snappedSelectionPoints});const pointSnaps=this.getPointSnapLines({nearestSnapsX,nearestSnapsY});return this._snapLines.set([...pointSnaps]),{nudge}}collectPointSnaps({selectionSnapPoints,otherNodeSnapPoints,minOffset,nearestSnapsX,nearestSnapsY}){for(const thisSnapPoint of selectionSnapPoints)for(const otherSnapPoint of otherNodeSnapPoints){const offset=Vec2d_Vec2d.Sub(thisSnapPoint,otherSnapPoint),offsetX=Math.abs(offset.x),offsetY=Math.abs(offset.y);round(offsetX)<=round(minOffset.x)&&(round(offsetX)<round(minOffset.x)&&(nearestSnapsX.length=0),nearestSnapsX.push({type:"points",points:{thisPoint:thisSnapPoint,otherPoint:otherSnapPoint},nudge:otherSnapPoint.x-thisSnapPoint.x}),minOffset.x=offsetX),round(offsetY)<=round(minOffset.y)&&(round(offsetY)<round(minOffset.y)&&(nearestSnapsY.length=0),nearestSnapsY.push({type:"points",points:{thisPoint:thisSnapPoint,otherPoint:otherSnapPoint},nudge:otherSnapPoint.y-thisSnapPoint.y}),minOffset.y=offsetY)}}collectGapSnaps({selectionPageBounds,minOffset,nearestSnapsX,nearestSnapsY}){const{horizontal,vertical}=this.visibleGaps;for(const gap of horizontal){if(!rangesOverlap(gap.breadthIntersection[0],gap.breadthIntersection[1],selectionPageBounds.minY,selectionPageBounds.maxY))continue;const centerNudge=gap.startEdge[0].x+gap.length/2-selectionPageBounds.center.x;if(gap.length>selectionPageBounds.width&&round(Math.abs(centerNudge))<=round(minOffset.x)){round(Math.abs(centerNudge))<round(minOffset.x)&&(nearestSnapsX.length=0),minOffset.x=Math.abs(centerNudge);const snap={type:"gap_center",gap,nudge:centerNudge},otherCenterSnap=nearestSnapsX.find((({type})=>"gap_center"===type)),gapBreadthsOverlap=otherCenterSnap&&rangeIntersection(gap.breadthIntersection[0],gap.breadthIntersection[1],otherCenterSnap.gap.breadthIntersection[0],otherCenterSnap.gap.breadthIntersection[1]);otherCenterSnap&&otherCenterSnap.gap.length>gap.length&&gapBreadthsOverlap?nearestSnapsX[nearestSnapsX.indexOf(otherCenterSnap)]=snap:otherCenterSnap&&gapBreadthsOverlap||nearestSnapsX.push(snap)}const duplicationLeftNudge=gap.startNode.pageBounds.minX-gap.length-selectionPageBounds.maxX;round(Math.abs(duplicationLeftNudge))<=round(minOffset.x)&&(round(Math.abs(duplicationLeftNudge))<round(minOffset.x)&&(nearestSnapsX.length=0),minOffset.x=Math.abs(duplicationLeftNudge),nearestSnapsX.push({type:"gap_duplicate",gap,protrusionDirection:"left",nudge:duplicationLeftNudge}));const duplicationRightNudge=gap.endNode.pageBounds.maxX+gap.length-selectionPageBounds.minX;round(Math.abs(duplicationRightNudge))<=round(minOffset.x)&&(round(Math.abs(duplicationRightNudge))<round(minOffset.x)&&(nearestSnapsX.length=0),minOffset.x=Math.abs(duplicationRightNudge),nearestSnapsX.push({type:"gap_duplicate",gap,protrusionDirection:"right",nudge:duplicationRightNudge}))}for(const gap of vertical){if(!rangesOverlap(gap.breadthIntersection[0],gap.breadthIntersection[1],selectionPageBounds.minX,selectionPageBounds.maxX))continue;const centerNudge=gap.startEdge[0].y+gap.length/2-selectionPageBounds.center.y;if(gap.length>selectionPageBounds.height&&round(Math.abs(centerNudge))<=round(minOffset.y)){round(Math.abs(centerNudge))<round(minOffset.y)&&(nearestSnapsY.length=0),minOffset.y=Math.abs(centerNudge);const snap={type:"gap_center",gap,nudge:centerNudge},otherCenterSnap=nearestSnapsY.find((({type})=>"gap_center"===type)),gapBreadthsOverlap=otherCenterSnap&&rangesOverlap(otherCenterSnap.gap.breadthIntersection[0],otherCenterSnap.gap.breadthIntersection[1],gap.breadthIntersection[0],gap.breadthIntersection[1]);otherCenterSnap&&otherCenterSnap.gap.length>gap.length&&gapBreadthsOverlap?nearestSnapsY[nearestSnapsY.indexOf(otherCenterSnap)]=snap:otherCenterSnap&&gapBreadthsOverlap||nearestSnapsY.push(snap);continue}const duplicationTopNudge=gap.startNode.pageBounds.minY-gap.length-selectionPageBounds.maxY;round(Math.abs(duplicationTopNudge))<=round(minOffset.y)&&(round(Math.abs(duplicationTopNudge))<round(minOffset.y)&&(nearestSnapsY.length=0),minOffset.y=Math.abs(duplicationTopNudge),nearestSnapsY.push({type:"gap_duplicate",gap,protrusionDirection:"top",nudge:duplicationTopNudge}));const duplicationBottomNudge=gap.endNode.pageBounds.maxY+gap.length-selectionPageBounds.minY;round(Math.abs(duplicationBottomNudge))<=round(minOffset.y)&&(round(Math.abs(duplicationBottomNudge))<round(minOffset.y)&&(nearestSnapsY.length=0),minOffset.y=Math.abs(duplicationBottomNudge),nearestSnapsY.push({type:"gap_duplicate",gap,protrusionDirection:"bottom",nudge:duplicationBottomNudge}))}}getPointSnapLines({nearestSnapsX,nearestSnapsY}){const snapGroupsX={},snapGroupsY={};if(nearestSnapsX.length>0)for(const snap of nearestSnapsX)if("points"===snap.type){const key=round(snap.points.otherPoint.x);snapGroupsX[key]||(snapGroupsX[key]=[]),snapGroupsX[key].push(snap.points)}if(nearestSnapsY.length>0)for(const snap of nearestSnapsY)if("points"===snap.type){const key=round(snap.points.otherPoint.y);snapGroupsY[key]||(snapGroupsY[key]=[]),snapGroupsY[key].push(snap.points)}return Object.values(snapGroupsX).concat(Object.values(snapGroupsY)).map((snapGroup=>({id:uniqueId(),type:"points",points:dedupe(snapGroup.map((snap=>Vec2d_Vec2d.From(snap.otherPoint))).concat(snapGroup.map((snap=>Vec2d_Vec2d.From(snap.thisPoint)))),((a,b)=>a.equals(b)))})))}getGapSnapLines({selectionPageBounds,nearestSnapsX,nearestSnapsY}){const{vertical,horizontal}=this.visibleGaps,selectionSides={top:selectionPageBounds.sides[0],right:selectionPageBounds.sides[1],bottom:[selectionPageBounds.corners[3],selectionPageBounds.corners[2]],left:[selectionPageBounds.corners[0],selectionPageBounds.corners[3]]},result=[];if(nearestSnapsX.length>0)for(const snap of nearestSnapsX){if("points"===snap.type)continue;const{gap:{breadthIntersection,startEdge,startNode,endNode,length,endEdge}}=snap;switch(snap.type){case"gap_center":{const newGapsLength=(length-selectionPageBounds.width)/2,gapBreadthIntersection=rangeIntersection(breadthIntersection[0],breadthIntersection[1],selectionPageBounds.minY,selectionPageBounds.maxY);result.push({type:"gaps",direction:"horizontal",id:uniqueId(),gaps:[...findAdjacentGaps(horizontal,startNode.id,newGapsLength,"backward",gapBreadthIntersection),{startEdge,endEdge:selectionSides.left},{startEdge:selectionSides.right,endEdge},...findAdjacentGaps(horizontal,endNode.id,newGapsLength,"forward",gapBreadthIntersection)]});break}case"gap_duplicate":{const gapBreadthIntersection=rangeIntersection(breadthIntersection[0],breadthIntersection[1],selectionPageBounds.minY,selectionPageBounds.maxY);result.push({type:"gaps",direction:"horizontal",id:uniqueId(),gaps:"left"===snap.protrusionDirection?[{startEdge:selectionSides.right,endEdge:startEdge.map((v=>v.clone().addXY(-startNode.pageBounds.width,0)))},{startEdge,endEdge},...findAdjacentGaps(horizontal,endNode.id,length,"forward",gapBreadthIntersection)]:[...findAdjacentGaps(horizontal,startNode.id,length,"backward",gapBreadthIntersection),{startEdge,endEdge},{startEdge:endEdge.map((v=>v.clone().addXY(snap.gap.endNode.pageBounds.width,0))),endEdge:selectionSides.left}]});break}}}if(nearestSnapsY.length>0)for(const snap of nearestSnapsY){if("points"===snap.type)continue;const{gap:{breadthIntersection,startEdge,startNode,endNode,length,endEdge}}=snap;switch(snap.type){case"gap_center":{const newGapsLength=(length-selectionPageBounds.height)/2,gapBreadthIntersection=rangeIntersection(breadthIntersection[0],breadthIntersection[1],selectionPageBounds.minX,selectionPageBounds.maxX);result.push({type:"gaps",direction:"vertical",id:uniqueId(),gaps:[...findAdjacentGaps(vertical,startNode.id,newGapsLength,"backward",gapBreadthIntersection),{startEdge,endEdge:selectionSides.top},{startEdge:selectionSides.bottom,endEdge},...findAdjacentGaps(vertical,snap.gap.endNode.id,newGapsLength,"forward",gapBreadthIntersection)]});break}case"gap_duplicate":{const gapBreadthIntersection=rangeIntersection(breadthIntersection[0],breadthIntersection[1],selectionPageBounds.minX,selectionPageBounds.maxX);result.push({type:"gaps",direction:"vertical",id:uniqueId(),gaps:"top"===snap.protrusionDirection?[{startEdge:selectionSides.bottom,endEdge:startEdge.map((v=>v.clone().addXY(0,-startNode.pageBounds.height)))},{startEdge,endEdge},...findAdjacentGaps(vertical,endNode.id,length,"forward",gapBreadthIntersection)]:[...findAdjacentGaps(vertical,startNode.id,length,"backward",gapBreadthIntersection),{startEdge,endEdge},{startEdge:endEdge.map((v=>v.clone().addXY(0,endNode.pageBounds.height))),endEdge:selectionSides.top}]})}}}return function dedupeGapSnaps(snaps){snaps.sort(((a,b)=>b.gaps.length-a.gaps.length));for(let i=snaps.length-1;i>0;i--){const snap=snaps[i];for(let j=i-1;j>=0;j--){const otherSnap=snaps[j];if(otherSnap.direction===snap.direction&&snap.gaps.every((gap=>otherSnap.gaps.some((otherGap=>round(gap.startEdge[0].x)===round(otherGap.startEdge[0].x)&&round(gap.startEdge[0].y)===round(otherGap.startEdge[0].y)&&round(gap.startEdge[1].x)===round(otherGap.startEdge[1].x)&&round(gap.startEdge[1].y)===round(otherGap.startEdge[1].y)))&&otherSnap.gaps.some((otherGap=>round(gap.endEdge[0].x)===round(otherGap.endEdge[0].x)&&round(gap.endEdge[0].y)===round(otherGap.endEdge[0].y)&&round(gap.endEdge[1].x)===round(otherGap.endEdge[1].x)&&round(gap.endEdge[1].y)===round(otherGap.endEdge[1].y)))))){snaps.splice(i,1);break}}}}(result),result}}function getResizeSnapPointsForHandle(handle,selectionPageBounds){const{minX,maxX,minY,maxY}=selectionPageBounds,result=[];switch(handle){case"top":case"left":case"top_left":case"any":result.push({id:"top_left",handle:"top_left",x:minX,y:minY})}switch(handle){case"top":case"right":case"top_right":case"any":result.push({id:"top_right",handle:"top_right",x:maxX,y:minY})}switch(handle){case"bottom":case"right":case"bottom_right":case"any":result.push({id:"bottom_right",handle:"bottom_right",x:maxX,y:maxY})}switch(handle){case"bottom":case"left":case"bottom_left":case"any":result.push({id:"bottom_left",handle:"bottom_left",x:minX,y:maxY})}return result}__decorateClass([Computed_computed],SnapManager.prototype,"snapPointsCache",1),__decorateClass([Computed_computed],SnapManager.prototype,"snapThreshold",1),__decorateClass([Computed_computed],SnapManager.prototype,"snappableShapes",1),__decorateClass([Computed_computed],SnapManager.prototype,"currentCommonAncestor",1),__decorateClass([Computed_computed],SnapManager.prototype,"snappablePoints",1),__decorateClass([Computed_computed],SnapManager.prototype,"visibleGaps",1),__decorateClass([Computed_computed],SnapManager.prototype,"outlinesInPageSpace",1);const fixNewLines=/\r?\n|\r/g;function normalizeTextForDom(text){return text.replace(fixNewLines,"\n").split("\n").map((x=>x||" ")).join("\n")}const textAlignmentsForLtr={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},spaceCharacterRegex=/\s/;class TextManager{constructor(editor){this.editor=editor}getTextElement(){const oldElm=document.querySelector(".tl-text-measure");oldElm?.remove();const elm=document.createElement("div");return this.editor.getContainer().appendChild(elm),elm.id=`__textMeasure_${uniqueId()}`,elm.classList.add("tl-text"),elm.classList.add("tl-text-measure"),elm.tabIndex=-1,elm}measureText=(textToMeasure,opts)=>{const elm=this.getTextElement();elm.setAttribute("dir","ltr"),elm.style.setProperty("font-family",opts.fontFamily),elm.style.setProperty("font-style",opts.fontStyle),elm.style.setProperty("font-weight",opts.fontWeight),elm.style.setProperty("font-size",opts.fontSize+"px"),elm.style.setProperty("line-height",opts.lineHeight*opts.fontSize+"px"),elm.style.setProperty("max-width",null===opts.maxWidth?null:opts.maxWidth+"px"),elm.style.setProperty("min-width",opts.minWidth??null),elm.style.setProperty("padding",opts.padding),elm.textContent=normalizeTextForDom(textToMeasure);const rect=elm.getBoundingClientRect();return{x:0,y:0,w:rect.width,h:rect.height}};measureElementTextNodeSpans(element,{shouldTruncateToFirstLine=!1}={}){const spans=[],elmBounds=element.getBoundingClientRect(),offsetX=-elmBounds.left,offsetY=-elmBounds.top,range=new Range,textNode=element.childNodes[0];let idx=0,currentSpan=null,prevCharWasSpaceCharacter=null,prevCharTop=0,didTruncate=!1;for(const childNode of element.childNodes)if(childNode.nodeType===Node.TEXT_NODE)for(const char of childNode.textContent??""){range.setStart(textNode,idx),range.setEnd(textNode,idx+char.length);const rects=range.getClientRects(),rect=rects[rects.length-1],top=rect.top+offsetY,left=rect.left+offsetX,right=rect.right+offsetX,isSpaceCharacter=spaceCharacterRegex.test(char);if(isSpaceCharacter===prevCharWasSpaceCharacter&&top===prevCharTop&&currentSpan)currentSpan.box.w=right-currentSpan.box.x,currentSpan.text+=char;else{if(currentSpan){if(shouldTruncateToFirstLine&&top!==prevCharTop){didTruncate=!0;break}spans.push(currentSpan)}currentSpan={box:{x:left,y:top,w:rect.width,h:rect.height},text:char}}prevCharWasSpaceCharacter=isSpaceCharacter,prevCharTop=top,idx+=char.length}return currentSpan&&spans.push(currentSpan),{spans,didTruncate}}measureTextSpans(textToMeasure,opts){if(""===textToMeasure)return[];const shouldTruncateToFirstLine="truncate-ellipsis"===opts.overflow||"truncate-clip"===opts.overflow,element=this.getTextElement(),elementWidth=Math.ceil(opts.width-2*opts.padding);element.style.setProperty("width",`${elementWidth}px`),element.style.setProperty("height","min-content"),element.style.setProperty("dir","ltr"),element.style.setProperty("font-size",`${opts.fontSize}px`),element.style.setProperty("font-family",opts.fontFamily),element.style.setProperty("font-weight",opts.fontWeight),element.style.setProperty("line-height",opts.lineHeight*opts.fontSize+"px"),element.style.setProperty("text-align",textAlignmentsForLtr[opts.textAlign]),shouldTruncateToFirstLine&&(element.style.setProperty("overflow-wrap","anywhere"),element.style.setProperty("word-break","break-all")),textToMeasure=normalizeTextForDom(textToMeasure),element.textContent=textToMeasure;const{spans,didTruncate}=this.measureElementTextNodeSpans(element,{shouldTruncateToFirstLine});if("truncate-ellipsis"===opts.overflow&&didTruncate){element.textContent="";const ellipsisWidth=Math.ceil(this.measureElementTextNodeSpans(element).spans[0].box.w);element.style.setProperty("width",elementWidth-ellipsisWidth+"px"),element.textContent=textToMeasure;const truncatedSpans=this.measureElementTextNodeSpans(element,{shouldTruncateToFirstLine:!0}).spans,lastSpan=truncatedSpans[truncatedSpans.length-1];return truncatedSpans.push({text:"",box:{x:Math.min(lastSpan.box.x+lastSpan.box.w,opts.width-opts.padding-ellipsisWidth),y:lastSpan.box.y,w:ellipsisWidth,h:lastSpan.box.h}}),truncatedSpans}return element.remove(),spans}}class TickManager{constructor(editor){this.editor=editor,this.editor.disposables.add(this.dispose),this.start()}raf;isPaused=!0;last=0;t=0;start=()=>{this.isPaused=!1,cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.tick),this.last=Date.now()};tick=()=>{if(this.isPaused)return;const now=Date.now(),elapsed=now-this.last;this.last=now,this.t+=elapsed,this.editor.emit("frame",elapsed),this.t<16||(this.t-=16,this.updatePointerVelocity(elapsed),this.editor.emit("tick",elapsed)),this.raf=requestAnimationFrame(this.tick)};dispose=()=>{this.isPaused=!0,cancelAnimationFrame(this.raf)};prevPoint=new Vec2d_Vec2d;updatePointerVelocity=elapsed=>{const{prevPoint,editor:{inputs:{currentScreenPoint,pointerVelocity}}}=this;if(0===elapsed)return;const delta=Vec2d_Vec2d.Sub(currentScreenPoint,prevPoint);this.prevPoint=currentScreenPoint.clone();const length=delta.len(),direction=length?delta.div(length):new Vec2d_Vec2d(0,0),next=pointerVelocity.clone().lrp(direction.mul(length/elapsed),.5);Math.abs(next.x)<.01&&(next.x=0),Math.abs(next.y)<.01&&(next.y=0),pointerVelocity.equals(next)||(this.editor.inputs.pointerVelocity=next)}}var UserPreferencesManager_defProp=Object.defineProperty,UserPreferencesManager_getOwnPropDesc=Object.getOwnPropertyDescriptor,UserPreferencesManager_decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?UserPreferencesManager_getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&UserPreferencesManager_defProp(target,key,result),result};class UserPreferencesManager{constructor(user,inferDarkMode){this.user=user,this.inferDarkMode=inferDarkMode}updateUserPreferences=userPreferences=>{this.user.setUserPreferences({...this.user.userPreferences.value,...userPreferences})};get userPreferences(){return{id:this.id,name:this.name,locale:this.locale,color:this.color,isDarkMode:this.isDarkMode,animationSpeed:this.animationSpeed,isSnapMode:this.isSnapMode}}get isDarkMode(){return this.user.userPreferences.value.isDarkMode??(!!this.inferDarkMode&&function userPrefersDarkUI(){return"undefined"!=typeof window&&(window.matchMedia?.("(prefers-color-scheme: dark)")?.matches??!1)}())}get animationSpeed(){return this.user.userPreferences.value.animationSpeed??defaultUserPreferences.animationSpeed}get id(){return this.user.userPreferences.value.id}get name(){return this.user.userPreferences.value.name??defaultUserPreferences.name}get locale(){return this.user.userPreferences.value.locale??defaultUserPreferences.locale}get color(){return this.user.userPreferences.value.color??defaultUserPreferences.color}get isSnapMode(){return this.user.userPreferences.value.isSnapMode??defaultUserPreferences.isSnapMode}}function getIsArrowStraight(shape){return Math.abs(shape.props.bend)<8}function getBoundShapeInfoForTerminal(editor,terminal){if("point"===terminal.type)return;const shape=editor.getShape(terminal.boundShapeId),transform=editor.getShapePageTransform(shape),geometry=editor.getShapeGeometry(shape),outline=geometry instanceof Group2d?geometry.children[0].vertices:geometry.vertices;return{shape,transform,isClosed:geometry.isClosed,isExact:terminal.isExact,didIntersect:!1,outline}}function getArrowTerminalInArrowSpace(editor,arrowPageTransform,terminal){if("point"===terminal.type)return Vec2d_Vec2d.From(terminal);const boundShape=editor.getShape(terminal.boundShapeId);if(boundShape){const{point,size}=editor.getShapeGeometry(boundShape).bounds,shapePoint=Vec2d_Vec2d.Add(point,Vec2d_Vec2d.MulV(terminal.normalizedAnchor,size)),pagePoint=Matrix2d.applyToPoint(editor.getShapePageTransform(boundShape),shapePoint);return Matrix2d.applyToPoint(Matrix2d.Inverse(arrowPageTransform),pagePoint)}return new Vec2d_Vec2d(0,0)}function getArrowTerminalsInArrowSpace(editor,shape){const arrowPageTransform=editor.getShapePageTransform(shape);return{start:getArrowTerminalInArrowSpace(editor,arrowPageTransform,shape.props.start),end:getArrowTerminalInArrowSpace(editor,arrowPageTransform,shape.props.end)}}UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"userPreferences",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"isDarkMode",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"animationSpeed",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"id",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"name",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"locale",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"color",1),UserPreferencesManager_decorateClass([Computed_computed],UserPreferencesManager.prototype,"isSnapMode",1);const MIN_ARROW_LENGTH=32,BOUND_ARROW_OFFSET=10,STROKE_SIZES={s:2,m:3.5,l:5,xl:10};function getStraightArrowInfo(editor,shape){const{start,end,arrowheadStart,arrowheadEnd}=shape.props,terminalsInArrowSpace=getArrowTerminalsInArrowSpace(editor,shape),a=terminalsInArrowSpace.start.clone(),b=terminalsInArrowSpace.end.clone(),c=Vec2d_Vec2d.Med(a,b),uAB=Vec2d_Vec2d.Sub(b,a).uni(),startShapeInfo=getBoundShapeInfoForTerminal(editor,start),endShapeInfo=getBoundShapeInfoForTerminal(editor,end),arrowPageTransform=editor.getShapePageTransform(shape);updateArrowheadPointWithBoundShape(b,terminalsInArrowSpace.start,arrowPageTransform,endShapeInfo),updateArrowheadPointWithBoundShape(a,terminalsInArrowSpace.end,arrowPageTransform,startShapeInfo);let offsetA=0,offsetB=0;const isSelfIntersection=startShapeInfo&&endShapeInfo&&startShapeInfo.shape===endShapeInfo.shape;!startShapeInfo||!endShapeInfo||isSelfIntersection||startShapeInfo.isExact||endShapeInfo.isExact||(endShapeInfo.didIntersect&&!startShapeInfo.didIntersect?startShapeInfo.isClosed&&a.setTo(b.clone().add(uAB.clone().mul(MIN_ARROW_LENGTH))):endShapeInfo.didIntersect||endShapeInfo.isClosed&&b.setTo(a.clone().sub(uAB.clone().mul(MIN_ARROW_LENGTH))));const u=Vec2d_Vec2d.Sub(b,a).uni(),didFlip=!Vec2d_Vec2d.Equals(u,uAB);isSelfIntersection||(startShapeInfo&&"none"!==arrowheadStart&&!startShapeInfo.isExact&&(offsetA=BOUND_ARROW_OFFSET+STROKE_SIZES[shape.props.size]/2+("size"in startShapeInfo.shape.props?STROKE_SIZES[startShapeInfo.shape.props.size]/2:0)),endShapeInfo&&"none"!==arrowheadEnd&&!endShapeInfo.isExact&&(offsetB=BOUND_ARROW_OFFSET+STROKE_SIZES[shape.props.size]/2+("size"in endShapeInfo.shape.props?STROKE_SIZES[endShapeInfo.shape.props.size]/2:0)));const tA=a.clone().add(u.clone().mul(offsetA*(didFlip?-1:1))),tB=b.clone().sub(u.clone().mul(offsetB*(didFlip?-1:1))),distAB=Vec2d_Vec2d.Dist(tA,tB);distAB<MIN_ARROW_LENGTH&&(0!==offsetA&&0!==offsetB?(offsetA*=-1.5,offsetB*=-1.5):0!==offsetA?offsetA*=-2:0!==offsetB?offsetB*=-2:distAB<10&&(startShapeInfo?offsetA=-(10-distAB):endShapeInfo&&(offsetB=-(10-distAB)))),a.add(u.clone().mul(offsetA*(didFlip?-1:1))),b.sub(u.clone().mul(offsetB*(didFlip?-1:1))),didFlip?(startShapeInfo&&endShapeInfo&&b.setTo(Vec2d_Vec2d.Add(a,u.clone().mul(-MIN_ARROW_LENGTH))),c.setTo(Vec2d_Vec2d.Med(terminalsInArrowSpace.start,terminalsInArrowSpace.end))):c.setTo(Vec2d_Vec2d.Med(a,b));const length=Vec2d_Vec2d.Dist(a,b);return{isStraight:!0,start:{handle:terminalsInArrowSpace.start,point:a,arrowhead:shape.props.arrowheadStart},end:{handle:terminalsInArrowSpace.end,point:b,arrowhead:shape.props.arrowheadEnd},middle:c,isValid:length>0,length}}function updateArrowheadPointWithBoundShape(point,opposite,arrowPageTransform,targetShapeInfo){if(void 0===targetShapeInfo)return;if(targetShapeInfo.isExact)return;const pageFrom=Matrix2d.applyToPoint(arrowPageTransform,opposite),pageTo=Matrix2d.applyToPoint(arrowPageTransform,point),targetFrom=Matrix2d.applyToPoint(Matrix2d.Inverse(targetShapeInfo.transform),pageFrom),targetTo=Matrix2d.applyToPoint(Matrix2d.Inverse(targetShapeInfo.transform),pageTo),isClosed=targetShapeInfo.isClosed,intersection=(isClosed?intersectLineSegmentPolygon:intersectLineSegmentPolyline)(targetFrom,targetTo,targetShapeInfo.outline);let targetInt;if(null!==intersection&&(targetInt=intersection.sort(((p1,p2)=>Vec2d_Vec2d.Dist(p1,targetFrom)-Vec2d_Vec2d.Dist(p2,targetFrom)))[0]??(isClosed?void 0:targetTo)),void 0===targetInt)return;const pageInt=Matrix2d.applyToPoint(targetShapeInfo.transform,targetInt),arrowInt=Matrix2d.applyToPoint(Matrix2d.Inverse(arrowPageTransform),pageInt);point.setTo(arrowInt),targetShapeInfo.didIntersect=!0}function getStraightArrowHandlePath(info){return getArrowPath(info.start.handle,info.end.handle)}function getSolidStraightArrowPath(info){return getArrowPath(info.start.point,info.end.point)}function getArrowPath(start,end){return`M${start.x},${start.y}L${end.x},${end.y}`}function getCurvedArrowInfo(editor,shape,extraBend=0){const{arrowheadEnd,arrowheadStart}=shape.props,bend=shape.props.bend+extraBend;if(Math.abs(bend)>Math.abs(10*shape.props.bend))return getStraightArrowInfo(editor,shape);const terminalsInArrowSpace=getArrowTerminalsInArrowSpace(editor,shape),med=Vec2d_Vec2d.Med(terminalsInArrowSpace.start,terminalsInArrowSpace.end),u=Vec2d_Vec2d.Sub(terminalsInArrowSpace.end,terminalsInArrowSpace.start).uni(),middle=Vec2d_Vec2d.Add(med,u.per().mul(-bend)),startShapeInfo=getBoundShapeInfoForTerminal(editor,shape.props.start),endShapeInfo=getBoundShapeInfoForTerminal(editor,shape.props.end),a=terminalsInArrowSpace.start.clone(),b=terminalsInArrowSpace.end.clone(),c=middle.clone(),isClockwise=shape.props.bend<0,distFn=isClockwise?clockwiseAngleDist:counterClockwiseAngleDist,handleArc=getArcInfo(a,b,c),handle_aCA=Vec2d_Vec2d.Angle(handleArc.center,a),handle_aCB=Vec2d_Vec2d.Angle(handleArc.center,b),handle_dAB=distFn(handle_aCA,handle_aCB);if(0===handleArc.length||0===handleArc.size||!isSafeFloat(handleArc.length)||!isSafeFloat(handleArc.size))return getStraightArrowInfo(editor,shape);const tempA=a.clone(),tempB=b.clone(),tempC=c.clone(),arrowPageTransform=editor.getShapePageTransform(shape);let offsetA=0,offsetB=0;if(startShapeInfo&&!startShapeInfo.isExact){const startInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,tempA),centerInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,handleArc.center),endInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,tempB),inverseTransform=Matrix2d.Inverse(startShapeInfo.transform),startInStartShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,startInPageSpace),centerInStartShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,centerInPageSpace),endInStartShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,endInPageSpace),{isClosed}=startShapeInfo;let point,intersections=(isClosed?intersectCirclePolygon:intersectCirclePolyline)(centerInStartShapeLocalSpace,handleArc.radius,startShapeInfo.outline);if(intersections){const angleToStart=centerInStartShapeLocalSpace.angle(startInStartShapeLocalSpace),angleToEnd=centerInStartShapeLocalSpace.angle(endInStartShapeLocalSpace),dAB2=distFn(angleToStart,angleToEnd);intersections=intersections.filter((pt=>distFn(angleToStart,centerInStartShapeLocalSpace.angle(pt))<=dAB2));const targetDist=.25*dAB2;intersections.sort(isClosed?(p0,p1)=>Math.abs(distFn(angleToStart,centerInStartShapeLocalSpace.angle(p0))-targetDist)<Math.abs(distFn(angleToStart,centerInStartShapeLocalSpace.angle(p1))-targetDist)?-1:1:(p0,p1)=>distFn(angleToStart,centerInStartShapeLocalSpace.angle(p0))<distFn(angleToStart,centerInStartShapeLocalSpace.angle(p1))?-1:1),point=intersections[0]??(isClosed?void 0:startInStartShapeLocalSpace)}else point=isClosed?void 0:startInStartShapeLocalSpace;point&&(tempA.setTo(editor.getPointInShapeSpace(shape,Matrix2d.applyToPoint(startShapeInfo.transform,point))),startShapeInfo.didIntersect=!0,"none"!==arrowheadStart&&(offsetA=BOUND_ARROW_OFFSET+STROKE_SIZES[shape.props.size]/2+("size"in startShapeInfo.shape.props?STROKE_SIZES[startShapeInfo.shape.props.size]/2:0)))}if(endShapeInfo&&!endShapeInfo.isExact){const startInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,tempA),endInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,tempB),centerInPageSpace=Matrix2d.applyToPoint(arrowPageTransform,handleArc.center),inverseTransform=Matrix2d.Inverse(endShapeInfo.transform),startInEndShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,startInPageSpace),centerInEndShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,centerInPageSpace),endInEndShapeLocalSpace=Matrix2d.applyToPoint(inverseTransform,endInPageSpace),isClosed=endShapeInfo.isClosed;let point,intersections=(isClosed?intersectCirclePolygon:intersectCirclePolyline)(centerInEndShapeLocalSpace,handleArc.radius,endShapeInfo.outline);if(intersections){const angleToStart=centerInEndShapeLocalSpace.angle(startInEndShapeLocalSpace),angleToEnd=centerInEndShapeLocalSpace.angle(endInEndShapeLocalSpace),dAB2=distFn(angleToStart,angleToEnd),targetDist=.75*dAB2;intersections=intersections.filter((pt=>distFn(angleToStart,centerInEndShapeLocalSpace.angle(pt))<=dAB2)),intersections.sort(isClosed?(p0,p1)=>Math.abs(distFn(angleToStart,centerInEndShapeLocalSpace.angle(p0))-targetDist)<Math.abs(distFn(angleToStart,centerInEndShapeLocalSpace.angle(p1))-targetDist)?-1:1:(p0,p1)=>distFn(angleToStart,centerInEndShapeLocalSpace.angle(p0))<distFn(angleToStart,centerInEndShapeLocalSpace.angle(p1))?-1:1),point=intersections[0]?intersections[0]:isClosed?void 0:endInEndShapeLocalSpace}else point=isClosed?void 0:endInEndShapeLocalSpace;point&&(tempB.setTo(editor.getPointInShapeSpace(shape,Matrix2d.applyToPoint(endShapeInfo.transform,point))),endShapeInfo.didIntersect=!0,"none"!==arrowheadEnd&&(offsetB=BOUND_ARROW_OFFSET+STROKE_SIZES[shape.props.size]/2+("size"in endShapeInfo.shape.props?STROKE_SIZES[endShapeInfo.shape.props.size]/2:0)))}let aCA=Vec2d_Vec2d.Angle(handleArc.center,tempA),aCB=Vec2d_Vec2d.Angle(handleArc.center,tempB),dAB=distFn(aCA,aCB),lAB=dAB*handleArc.radius;const tA=tempA.clone(),tB=tempB.clone();if(0!==offsetA){const n=offsetA/lAB*(isClockwise?1:-1),u2=Vec2d_Vec2d.FromAngle(aCA+dAB*n);tA.setTo(handleArc.center).add(u2.mul(handleArc.radius))}if(0!==offsetB){const n=offsetB/lAB*(isClockwise?-1:1),u2=Vec2d_Vec2d.FromAngle(aCB+dAB*n);tB.setTo(handleArc.center).add(u2.mul(handleArc.radius))}const distAB=Vec2d_Vec2d.Dist(tA,tB);if(distAB<MIN_ARROW_LENGTH&&(0!==offsetA&&0!==offsetB?(offsetA*=-1.5,offsetB*=-1.5):0!==offsetA?offsetA*=-2:0!==offsetB?offsetB*=-2:distAB<10&&(startShapeInfo?offsetA=-(10-distAB):endShapeInfo&&(offsetB=-(10-distAB)))),0!==offsetA){const n=offsetA/lAB*(isClockwise?1:-1),u2=Vec2d_Vec2d.FromAngle(aCA+dAB*n);tempA.setTo(handleArc.center).add(u2.mul(handleArc.radius))}if(0!==offsetB){const n=offsetB/lAB*(isClockwise?-1:1),u2=Vec2d_Vec2d.FromAngle(aCB+dAB*n);tempB.setTo(handleArc.center).add(u2.mul(handleArc.radius))}if(startShapeInfo&&endShapeInfo&&!startShapeInfo.isExact&&!endShapeInfo.isExact)if(aCA=Vec2d_Vec2d.Angle(handleArc.center,tempA),aCB=Vec2d_Vec2d.Angle(handleArc.center,tempB),dAB=distFn(aCA,aCB),lAB=dAB*handleArc.radius,startShapeInfo.shape===endShapeInfo.shape)lAB<100&&(tempA.setTo(a),tempB.setTo(b),tempC.setTo(c));else if(startShapeInfo&&!startShapeInfo.didIntersect&&tempA.setTo(a),endShapeInfo&&!endShapeInfo.didIntersect||distFn(handle_aCA,aCA)>distFn(handle_aCA,aCB)){const n=Math.min(.9,MIN_ARROW_LENGTH/lAB)*(isClockwise?1:-1),u2=Vec2d_Vec2d.FromAngle(aCA+dAB*n);tempB.setTo(handleArc.center).add(u2.mul(handleArc.radius))}!function placeCenterHandle(center,radius,tempA,tempB,tempC,originalArcLength,isClockwise){const aCA=Vec2d_Vec2d.Angle(center,tempA),aCB=Vec2d_Vec2d.Angle(center,tempB);let dAB=clockwiseAngleDist(aCA,aCB);isClockwise||(dAB=utils_PI2-dAB);const n=.5*(isClockwise?1:-1),u=Vec2d_Vec2d.FromAngle(aCA+dAB*n);if(tempC.setTo(center).add(u.mul(radius)),dAB>originalArcLength){tempC.rotWith(center,utils_PI);const t=tempB.clone();tempB.setTo(tempA),tempA.setTo(t)}}(handleArc.center,handleArc.radius,tempA,tempB,tempC,handle_dAB,isClockwise),tempA.equals(tempB)&&(tempA.setTo(tempC.clone().addXY(1,1)),tempB.setTo(tempC.clone().subXY(1,1))),a.setTo(tempA),b.setTo(tempB),c.setTo(tempC);const bodyArc=getArcInfo(a,b,c);return{isStraight:!1,start:{point:a,handle:terminalsInArrowSpace.start,arrowhead:shape.props.arrowheadStart},end:{point:b,handle:terminalsInArrowSpace.end,arrowhead:shape.props.arrowheadEnd},middle:c,handleArc,bodyArc,isValid:0!==bodyArc.length&&isFinite(bodyArc.center.x)&&isFinite(bodyArc.center.y)}}function getCurvedArrowHandlePath(info){const{start,end,handleArc:{radius,largeArcFlag,sweepFlag}}=info;return`M${start.handle.x},${start.handle.y} A${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.handle.x},${end.handle.y}`}function getSolidCurvedArrowPath(info){const{start,end,bodyArc:{radius,largeArcFlag,sweepFlag}}=info;return`M${start.point.x},${start.point.y} A${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.point.x},${end.point.y}`}function getArcInfo(a,b,c){const u=-2*(a.x*(b.y-c.y)-a.y*(b.x-c.x)+b.x*c.y-c.x*b.y),center={x:((a.x*a.x+a.y*a.y)*(c.y-b.y)+(b.x*b.x+b.y*b.y)*(a.y-c.y)+(c.x*c.x+c.y*c.y)*(b.y-a.y))/u,y:((a.x*a.x+a.y*a.y)*(b.x-c.x)+(b.x*b.x+b.y*b.y)*(c.x-a.x)+(c.x*c.x+c.y*c.y)*(a.x-b.x))/u},radius=Vec2d_Vec2d.Dist(center,a),sweepFlag=+Vec2d_Vec2d.Clockwise(a,c,b),ab=Math.hypot(a.y-b.y,a.x-b.x),bc=Math.hypot(b.y-c.y,b.x-c.x),ca=Math.hypot(c.y-a.y,c.x-a.x),theta=2*Math.acos((bc*bc+ca*ca-ab*ab)/(2*bc*ca)),size=(utils_PI2-theta)*(sweepFlag?1:-1);return{center,radius,size,length:size*radius,largeArcFlag:+(utils_PI>theta),sweepFlag}}const EVENT_NAME_MAP={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"};var StateNode_defProp=Object.defineProperty,StateNode_getOwnPropDesc=Object.getOwnPropertyDescriptor;class StateNode{constructor(editor,parent){this.editor=editor;const{id,children,initial}=this.constructor;this.id=id,this.current=Atom_atom("toolState"+this.id,void 0),this.path=Computed_computed("toolPath"+this.id,(()=>{const current=this.current.value;return this.id+(current?`.${current.path.value}`:"")})),this.parent=parent??{},this.parent?children&&initial?(this.type="branch",this.initial=initial,this.children=Object.fromEntries(children().map((Ctor=>[Ctor.id,new Ctor(this.editor,this)]))),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",children&&initial&&(this.initial=initial,this.children=Object.fromEntries(children().map((Ctor=>[Ctor.id,new Ctor(this.editor,this)]))),this.current.set(this.children[this.initial])))}path;static id;static initial;static children;id;current;type;shapeType;initial;children;parent;isActive=!1;transition=(id,info)=>{const path=id.split(".");let currState=this;for(let i=0;i<path.length;i++){const id2=path[i],prevChildState=currState.current.value,nextChildState=currState.children?.[id2];if(!nextChildState)throw Error(`${currState.id} - no child state exists with the id ${id2}.`);if(prevChildState?.id!==nextChildState.id&&(prevChildState?.exit(info,id2),currState.current.set(nextChildState),nextChildState.enter(info,prevChildState?.id||"initial"),!nextChildState.isActive))break;currState=nextChildState}return this};handleEvent=info=>{const cbName=EVENT_NAME_MAP[info.name],x=this.current.value;this[cbName]?.(info),this.current.value===x&&this.isActive&&x?.handleEvent(info)};enter=(info,from)=>{if(this.isActive=!0,this.onEnter?.(info,from),this.children&&this.initial&&this.isActive){const initial=this.children[this.initial];this.current.set(initial),initial.enter(info,from)}};exit=(info,from)=>{this.isActive=!1,this.onExit?.(info,from),this.isActive||this.current.value?.exit(info,from)};_currentToolIdMask=Atom_atom("curent tool id mask",void 0);get currentToolIdMask(){return this._currentToolIdMask.value}set currentToolIdMask(id){this._currentToolIdMask.set(id)}onWheel;onPointerDown;onPointerMove;onPointerUp;onDoubleClick;onTripleClick;onQuadrupleClick;onRightClick;onMiddleClick;onKeyDown;onKeyUp;onKeyRepeat;onCancel;onComplete;onInterrupt;onEnter;onExit}((decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?StateNode_getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);kind&&result&&StateNode_defProp(target,key,result)})([Computed_computed],StateNode.prototype,"currentToolIdMask",1);class RootState extends StateNode{static id="root";static initial="";static children=()=>[];onKeyDown=info=>{if("KeyZ"===info.code)if(!info.shiftKey&&!info.ctrlKey){const currentTool=this.current.value;currentTool&&"idle"===currentTool.current.value?.id&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...info,onInteractionEnd:currentTool.id})}}}var Editor_defProp=Object.defineProperty,Editor_getOwnPropDesc=Object.getOwnPropertyDescriptor,Editor_decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?Editor_getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&Editor_defProp(target,key,result),result};class Editor extends eventemitter3.EventEmitter{constructor({store,user,shapeUtils,tools,getContainer,initialState,inferDarkMode}){super(),this.store=store,this.snaps=new SnapManager(this),this.user=new UserPreferencesManager(user??createTLUser(),inferDarkMode??!1),this.getContainer=getContainer??(()=>document.body),this.textMeasure=new TextManager(this);this.root=new class NewRoot extends RootState{static initial=initialState??""}(this),this.root.children={};const allShapeUtils=checkShapesAndAddCore(shapeUtils),shapeTypesInSchema=new Set(Object.keys(store.schema.types.shape.migrations.subTypeMigrations));for(const shapeUtil of allShapeUtils){if(!shapeTypesInSchema.has(shapeUtil.type))throw Error(`Editor and store have different shapes: "${shapeUtil.type}" was passed into the editor but not the schema`);shapeTypesInSchema.delete(shapeUtil.type)}if(shapeTypesInSchema.size>0)throw Error(`Editor and store have different shapes: "${[...shapeTypesInSchema][0]}" is present in the store schema but not provided to the editor`);const _shapeUtils={},_styleProps={},allStylesById=new Map;for(const Util of allShapeUtils){const util=new Util(this);_shapeUtils[Util.type]=util;const propKeysByStyle=getShapePropKeysByStyle(Util.props??{});_styleProps[Util.type]=propKeysByStyle;for(const style of propKeysByStyle.keys())if(allStylesById.has(style.id)){if(allStylesById.get(style.id)!==style)throw Error(`Multiple style props with id "${style.id}" in use. Style prop IDs must be unique.`)}else allStylesById.set(style.id,style)}this.shapeUtils=_shapeUtils,this.styleProps=_styleProps;for(const Tool of[...tools]){if(object_hasOwnProperty(this.root.children,Tool.id))throw Error(`Can't override tool with id "${Tool.id}"`);this.root.children[Tool.id]=new Tool(this,this.root)}this.environment=new EnvironmentManager(this);const invalidParents=new Set,reparentArrow=arrowId=>{const arrow=this.getShape(arrowId);if(!arrow)return;const{start,end}=arrow.props,startShape="binding"===start.type?this.getShape(start.boundShapeId):void 0,endShape="binding"===end.type?this.getShape(end.boundShapeId):void 0,parentPageId=this.getAncestorPageId(arrow);if(!parentPageId)return;let nextParentId;if(startShape&&endShape)nextParentId=this.findCommonAncestor([startShape,endShape])??parentPageId;else{if(!startShape&&!endShape)return;nextParentId=parentPageId}nextParentId&&nextParentId!==arrow.parentId&&this.reparentShapes([arrowId],nextParentId);const reparentedArrow=this.getShape(arrowId);if(!reparentedArrow)throw Error("no reparented arrow");const startSibling=this.getShapeNearestSibling(reparentedArrow,startShape),endSibling=this.getShapeNearestSibling(reparentedArrow,endShape);let highestSibling,finalIndex;if(startSibling&&endSibling)highestSibling=startSibling.index>endSibling.index?startSibling:endSibling;else if(startSibling&&!endSibling)highestSibling=startSibling;else{if(!endSibling||startSibling)return;highestSibling=endSibling}const higherSiblings=this.getSortedChildIdsForParent(highestSibling.parentId).map((id=>this.getShape(id))).filter((sibling=>sibling.index>highestSibling.index));if(higherSiblings.length){const nextHighestNonArrowSibling=higherSiblings.find((sibling=>"arrow"!==sibling.type));if(reparentedArrow.index>highestSibling.index&&(!nextHighestNonArrowSibling||reparentedArrow.index<nextHighestNonArrowSibling.index))return;finalIndex=getIndexBetween(highestSibling.index,higherSiblings[0].index)}else finalIndex=getIndexAbove(highestSibling.index);finalIndex!==reparentedArrow.index&&this.updateShapes([{id:arrowId,type:"arrow",index:finalIndex}])},unbindArrowTerminal=(arrow,handleId)=>{const{x,y}=getArrowTerminalsInArrowSpace(this,arrow)[handleId];this.store.put([{...arrow,props:{...arrow.props,[handleId]:{type:"point",x,y}}}])},arrowDidUpdate=arrow=>{for(const handle of["start","end"]){const terminal=arrow.props[handle];if("binding"!==terminal.type)continue;const boundShape=this.getShape(terminal.boundShapeId),isShapeInSamePageAsArrow=this.getAncestorPageId(arrow)===this.getAncestorPageId(boundShape);boundShape&&isShapeInSamePageAsArrow||unbindArrowTerminal(arrow,handle)}reparentArrow(arrow.id)},cleanupInstancePageState=(prevPageState,shapesNoLongerInPage)=>{let nextPageState=null;const selectedShapeIds=prevPageState.selectedShapeIds.filter((id=>!shapesNoLongerInPage.has(id)));selectedShapeIds.length!==prevPageState.selectedShapeIds.length&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.selectedShapeIds=selectedShapeIds);const erasingShapeIds=prevPageState.erasingShapeIds.filter((id=>!shapesNoLongerInPage.has(id)));erasingShapeIds.length!==prevPageState.erasingShapeIds.length&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.erasingShapeIds=erasingShapeIds),prevPageState.hoveredShapeId&&shapesNoLongerInPage.has(prevPageState.hoveredShapeId)&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.hoveredShapeId=null),prevPageState.editingShapeId&&shapesNoLongerInPage.has(prevPageState.editingShapeId)&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.editingShapeId=null);const hintingShapeIds=prevPageState.hintingShapeIds.filter((id=>!shapesNoLongerInPage.has(id)));return hintingShapeIds.length!==prevPageState.hintingShapeIds.length&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.hintingShapeIds=hintingShapeIds),prevPageState.focusedGroupId&&shapesNoLongerInPage.has(prevPageState.focusedGroupId)&&(nextPageState||(nextPageState={...prevPageState}),nextPageState.focusedGroupId=null),nextPageState};if(this.sideEffects=new SideEffectManager(this),this.sideEffects.registerBatchCompleteHandler((()=>{for(const parentId of invalidParents){invalidParents.delete(parentId);const parent=this.getShape(parentId);if(!parent)continue;const util=this.getShapeUtil(parent),changes=util.onChildrenChange?.(parent);changes?.length&&this.updateShapes(changes,{squashing:!0})}this.emit("update")})),this.sideEffects.registerBeforeDeleteHandler("shape",(record=>{record.parentId&&isShapeId(record.parentId)&&invalidParents.add(record.parentId);const bindings=this._arrowBindingsIndex.value[record.id];if(bindings?.length)for(const{arrowId,handleId}of bindings){const arrow=this.getShape(arrowId);arrow&&unbindArrowTerminal(arrow,handleId)}const deletedIds=new Set([record.id]),updates=compact(this.pageStates.map((pageState=>cleanupInstancePageState(pageState,deletedIds))));updates.length&&this.store.put(updates)})),this.sideEffects.registerBeforeDeleteHandler("page",(record=>{if(this.instanceState.currentPageId!==record.id)return;const backupPageId=this.pages.find((p=>p.id!==record.id))?.id;if(!backupPageId)return;this.store.put([{...this.instanceState,currentPageId:backupPageId}]);const cameraId=TLCamera_CameraRecordType.createId(record.id),instance_PageStateId=TLPageState_InstancePageStateRecordType.createId(record.id);this.store.remove([cameraId,instance_PageStateId])})),this.sideEffects.registerAfterChangeHandler("shape",((prev,next)=>{if(this.isShapeOfType(next,"arrow")&&arrowDidUpdate(next),prev.parentId!==next.parentId){const reparentBoundArrows=id=>{const boundArrows=this._arrowBindingsIndex.value[id];if(boundArrows?.length)for(const arrow of boundArrows)reparentArrow(arrow.arrowId)};reparentBoundArrows(next.id),this.visitDescendants(next.id,reparentBoundArrows)}if(prev.parentId!==next.parentId&&isPageId(next.parentId)){const allMovingIds=new Set([prev.id]);this.visitDescendants(prev.id,(id=>{allMovingIds.add(id)}));for(const instancePageState of this.pageStates){if(instancePageState.pageId===next.parentId)continue;const nextPageState=cleanupInstancePageState(instancePageState,allMovingIds);nextPageState&&this.store.put([nextPageState])}}prev.parentId&&isShapeId(prev.parentId)&&invalidParents.add(prev.parentId),next.parentId!==prev.parentId&&isShapeId(next.parentId)&&invalidParents.add(next.parentId)})),this.sideEffects.registerAfterChangeHandler("instance_page_state",((prev,next)=>{if(prev?.selectedShapeIds!==next?.selectedShapeIds){const filtered=next.selectedShapeIds.filter((id=>{let parentId=this.getShape(id)?.parentId;for(;isShapeId(parentId);){if(next.selectedShapeIds.includes(parentId))return!1;parentId=this.getShape(parentId)?.parentId}return!0}));let nextFocusedGroupId=null;if(filtered.length>0){const commonGroupAncestor=this.findCommonAncestor(compact(filtered.map((id=>this.getShape(id)))),(shape=>this.isShapeOfType(shape,"group")));commonGroupAncestor&&(nextFocusedGroupId=commonGroupAncestor)}else next?.focusedGroupId&&(nextFocusedGroupId=next.focusedGroupId);filtered.length===next.selectedShapeIds.length&&nextFocusedGroupId===next.focusedGroupId||this.store.put([{...next,selectedShapeIds:filtered,focusedGroupId:nextFocusedGroupId??null}])}})),this.sideEffects.registerAfterCreateHandler("shape",(record=>{this.isShapeOfType(record,"arrow")&&arrowDidUpdate(record)})),this.sideEffects.registerAfterCreateHandler("page",(record=>{const cameraId=TLCamera_CameraRecordType.createId(record.id),_pageStateId=TLPageState_InstancePageStateRecordType.createId(record.id);this.store.has(cameraId)||this.store.put([TLCamera_CameraRecordType.create({id:cameraId})]),this.store.has(_pageStateId)||this.store.put([TLPageState_InstancePageStateRecordType.create({id:_pageStateId,pageId:record.id})])})),this._currentPageShapeIds=((store,getCurrentPageId)=>{const shapesIndex=store.query.ids("shape");let lastPageId=null;function fromScratch(){const currentPageId=getCurrentPageId();return lastPageId=currentPageId,new Set([...shapesIndex.value].filter((id=>isShapeInPage(store,currentPageId,store.get(id)))))}return Computed_computed("_shapeIdsInCurrentPage",((prevValue,lastComputedEpoch)=>{if(isUninitialized(prevValue))return fromScratch();const currentPageId=getCurrentPageId();if(currentPageId!==lastPageId)return fromScratch();const diff=store.history.getDiffSince(lastComputedEpoch);if(diff===RESET_VALUE)return fromScratch();const builder=new IncrementalSetConstructor(prevValue);for(const changes of diff){for(const record of Object.values(changes.added))isShape(record)&&isShapeInPage(store,currentPageId,record)&&builder.add(record.id);for(const[_from,to]of Object.values(changes.updated))isShape(to)&&(isShapeInPage(store,currentPageId,to)?builder.add(to.id):builder.remove(to.id));for(const id of Object.keys(changes.removed))isShapeId(id)&&builder.remove(id)}const result=builder.get();return result?withDiff(result.value,result.diff):prevValue}))})(this.store,(()=>this.currentPageId)),this._parentIdsToChildIds=(store=>{const shapeIdsQuery=store.query.ids("shape");function fromScratch(){const result={},shapeIds=shapeIdsQuery.value,shapes=Array(shapeIds.size);return shapeIds.forEach((id=>shapes.push(store.get(id)))),shapes.sort(reordering_sortByIndex),shapes.forEach((shape=>{result[shape.parentId]||(result[shape.parentId]=[]),result[shape.parentId].push(shape.id)})),result}return Computed_computed("parentsToChildrenWithIndexes",((lastValue,lastComputedEpoch)=>{if(isUninitialized(lastValue))return fromScratch();const diff=store.history.getDiffSince(lastComputedEpoch);if(diff===RESET_VALUE)return fromScratch();if(0===diff.length)return lastValue;let newValue=null;const ensureNewArray=parentId=>{newValue||(newValue={...lastValue}),newValue[parentId]?newValue[parentId]===lastValue[parentId]&&(newValue[parentId]=[...newValue[parentId]]):newValue[parentId]=[]},toSort=new Set;let changes;for(let i=0,n=diff.length;i<n;i++){changes=diff[i];for(const record of Object.values(changes.added))isShape(record)&&(ensureNewArray(record.parentId),newValue[record.parentId].push(record.id),toSort.add(newValue[record.parentId]));for(const[from,to]of Object.values(changes.updated))if(isShape(to)&&isShape(from))if(from.parentId!==to.parentId)ensureNewArray(from.parentId),ensureNewArray(to.parentId),newValue[from.parentId].splice(newValue[from.parentId].indexOf(to.id),1),newValue[to.parentId].push(to.id),toSort.add(newValue[to.parentId]);else if(from.index!==to.index){ensureNewArray(to.parentId);const idx=newValue[to.parentId].indexOf(to.id);newValue[to.parentId][idx]=to.id,toSort.add(newValue[to.parentId])}for(const record of Object.values(changes.removed))isShape(record)&&(ensureNewArray(record.parentId),newValue[record.parentId].splice(newValue[record.parentId].indexOf(record.id),1))}for(const arr of toSort){const shapesInArr=compact(arr.map((id=>store.get(id))));shapesInArr.sort(reordering_sortByIndex),arr.splice(0,arr.length,...shapesInArr.map((shape=>shape.id)))}return newValue??lastValue}))})(this.store),this.disposables.add(this.store.listen((changes=>{this.emit("change",changes)}))),this.store.ensureStoreIsUsable(),this._setInstancePageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]},{ephemeral:!0}),initialState&&void 0===this.root.children[initialState])throw Error(`No state found for initialState "${initialState}".`);this.root.enter(void 0,"initial"),this.instanceState.followingUserId&&this.stopFollowingUser(),this.updateRenderingBounds(),requestAnimationFrame((()=>{this._tickManager.start()}))}store;root;disposables=new Set;_tickManager=new TickManager(this);snaps;user;textMeasure;environment;getContainer;sideEffects;dispose(){this.disposables.forEach((dispose=>dispose())),this.disposables.clear()}shapeUtils;styleProps;getShapeUtil(arg){const type="string"==typeof arg?arg:arg.type,shapeUtil=getOwnProperty(this.shapeUtils,type);return assert(shapeUtil,`No shape util found for type "${type}"`),shapeUtil}history=new HistoryManager(this,(error=>{this.annotateError(error,{origin:"history.batch",willCrashApp:!0}),this.crash(error)}));undo(){return this.history.undo(),this}get canUndo(){return this.history.numUndos>0}redo(){return this.history.redo(),this}get canRedo(){return this.history.numRedos>0}mark(markId,onUndo,onRedo){return this.history.mark(markId,onUndo,onRedo),this}bail(){return this.history.bail(),this}bailToMark(id){return this.history.bailToMark(id),this}batch(fn){return this.history.batch(fn),this}get _arrowBindingsIndex(){return(editor=>{const{store}=editor,shapeHistory=store.query.filterHistory("shape"),arrowQuery=store.query.records("shape",(()=>({type:{eq:"arrow"}})));function fromScratch(){const allArrows=arrowQuery.value,bindings2Arrows={};for(const arrow of allArrows){const{start,end}=arrow.props;if("binding"===start.type){const arrows=bindings2Arrows[start.boundShapeId];arrows?arrows.push({arrowId:arrow.id,handleId:"start"}):bindings2Arrows[start.boundShapeId]=[{arrowId:arrow.id,handleId:"start"}]}if("binding"===end.type){const arrows=bindings2Arrows[end.boundShapeId];arrows?arrows.push({arrowId:arrow.id,handleId:"end"}):bindings2Arrows[end.boundShapeId]=[{arrowId:arrow.id,handleId:"end"}]}}return bindings2Arrows}return Computed_computed("arrowBindingsIndex",((_lastValue,lastComputedEpoch)=>{if(isUninitialized(_lastValue))return fromScratch();const lastValue=_lastValue,diff=shapeHistory.getDiffSince(lastComputedEpoch);if(diff===RESET_VALUE)return fromScratch();let nextValue;function ensureNewArray(boundShapeId){nextValue||(nextValue={...lastValue}),nextValue[boundShapeId]?nextValue[boundShapeId]===lastValue[boundShapeId]&&(nextValue[boundShapeId]=[...nextValue[boundShapeId]]):nextValue[boundShapeId]=[]}function removingBinding(boundShapeId,arrowId,handleId){ensureNewArray(boundShapeId),nextValue[boundShapeId]=nextValue[boundShapeId].filter((binding=>binding.arrowId!==arrowId||binding.handleId!==handleId)),0===nextValue[boundShapeId].length&&delete nextValue[boundShapeId]}function addBinding(boundShapeId,arrowId,handleId){ensureNewArray(boundShapeId),nextValue[boundShapeId].push({arrowId,handleId})}for(const changes of diff){for(const newShape of Object.values(changes.added))if(editor.isShapeOfType(newShape,"arrow")){const{start,end}=newShape.props;"binding"===start.type&&addBinding(start.boundShapeId,newShape.id,"start"),"binding"===end.type&&addBinding(end.boundShapeId,newShape.id,"end")}for(const[prev,next]of Object.values(changes.updated))if(editor.isShapeOfType(prev,"arrow")&&editor.isShapeOfType(next,"arrow"))for(const handle of["start","end"]){const prevTerminal=prev.props[handle],nextTerminal=next.props[handle];"binding"===prevTerminal.type&&"point"===nextTerminal.type?removingBinding(prevTerminal.boundShapeId,prev.id,handle):"point"===prevTerminal.type&&"binding"===nextTerminal.type?addBinding(nextTerminal.boundShapeId,next.id,handle):"binding"===prevTerminal.type&&"binding"===nextTerminal.type&&prevTerminal.boundShapeId!==nextTerminal.boundShapeId&&(removingBinding(prevTerminal.boundShapeId,prev.id,handle),addBinding(nextTerminal.boundShapeId,next.id,handle))}for(const prev of Object.values(changes.removed))if(editor.isShapeOfType(prev,"arrow")){const{start,end}=prev.props;"binding"===start.type&&removingBinding(start.boundShapeId,prev.id,"start"),"binding"===end.type&&removingBinding(end.boundShapeId,prev.id,"end")}}return nextValue??lastValue}))})(this)}getArrowsBoundTo(shapeId){return this._arrowBindingsIndex.value[shapeId]||EMPTY_ARRAY}get arrowInfoCache(){return this.store.createComputedCache("arrow infoCache",(shape=>getIsArrowStraight(shape)?getStraightArrowInfo(this,shape):getCurvedArrowInfo(this,shape)))}getArrowInfo(shape){const id="string"==typeof shape?shape:shape.id;return this.arrowInfoCache.get(id)}annotateError(error,{origin,willCrashApp,tags,extras}){const defaultAnnotations=this.createErrorAnnotations(origin,willCrashApp);return annotateError(error,{tags:{...defaultAnnotations.tags,...tags},extras:{...defaultAnnotations.extras,...extras}}),willCrashApp&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(origin,willCrashApp){try{return{tags:{origin,willCrashApp},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingShapeId?this.getShape(this.editingShapeId):void 0,inputs:this.inputs}}}catch{return{tags:{origin,willCrashApp},extras:{}}}}_crashingError=null;get crashingError(){return this._crashingError}crash(error){return this._crashingError=error,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error}),this}isIn(path){const ids=path.split(".").reverse();let state=this.root;for(;ids.length>0;){const id=ids.pop();if(!id)return!0;const current=state.current.value;if(current?.id!==id)return!1;if(0===ids.length)return!0;state=current}return!1}isInAny(...paths){return paths.some((path=>this.isIn(path)))}setCurrentTool(id,info={}){return this.root.transition(id,info),this}get currentTool(){return this.root.current.value}get currentToolId(){const{currentTool}=this;return currentTool?currentTool.currentToolIdMask??currentTool.id:""}getStateDescendant(path){const ids=path.split(".").reverse();let state=this.root;for(;ids.length>0;){const id=ids.pop();if(!id)return state;const childState=state.children?.[id];if(!childState)return;state=childState}return state}get documentSettings(){return this.store.get(TLDOCUMENT_ID)}updateDocumentSettings(settings){return this.store.put([{...this.documentSettings,...settings}]),this}get instanceState(){return this.store.get(TLInstance_TLINSTANCE_ID)}updateInstanceState(partial,historyOptions){return this._updateInstanceState(partial,{ephemeral:!0,squashing:!0,...historyOptions}),void 0!==partial.isChangingStyle&&(clearTimeout(this._isChangingStyleTimeout),!0===partial.isChangingStyle&&(this._isChangingStyleTimeout=setTimeout((()=>{this.updateInstanceState({isChangingStyle:!1})}),2e3))),this}_updateInstanceState=this.history.createCommand("updateInstanceState",((partial,historyOptions)=>{const prev=this.store.get(this.instanceState.id);return{data:{prev,next:{...prev,...partial}},ephemeral:!1,squashing:!1,...historyOptions}}),{do:({next})=>{this.store.put([next])},undo:({prev})=>{this.store.put([prev])},squash:({prev},{next})=>({prev,next})});_isChangingStyleTimeout=-1;get openMenus(){return this.instanceState.openMenus}addOpenMenu(id){const menus=new Set(this.openMenus);return menus.has(id)||(menus.add(id),this.updateInstanceState({openMenus:[...menus]})),this}deleteOpenMenu(id){const menus=new Set(this.openMenus);return menus.has(id)&&(menus.delete(id),this.updateInstanceState({openMenus:[...menus]})),this}get isMenuOpen(){return this.openMenus.length>0}setCursor=cursor=>(this.updateInstanceState({cursor:{...this.instanceState.cursor,...cursor}},{ephemeral:!0}),this);get pageStates(){return this._pageStates.value}get _pageStates(){return this.store.query.records("instance_page_state")}get currentPageState(){return this.store.get(this._currentPageStateId)}get _currentPageStateId(){return TLPageState_InstancePageStateRecordType.createId(this.currentPageId)}updateCurrentPageState(partial,historyOptions){return this._setInstancePageState(partial,historyOptions),this}_setInstancePageState=this.history.createCommand("setInstancePageState",((partial,historyOptions)=>({data:{prev:this.store.get(partial.id??this.currentPageState.id),partial},...historyOptions})),{do:({prev,partial})=>{this.store.update(prev.id,(state=>({...state,...partial})))},undo:({prev})=>{this.store.update(prev.id,(()=>prev))}});get selectedShapeIds(){return this.currentPageState.selectedShapeIds}get selectedShapes(){const{selectedShapeIds}=this.currentPageState;return compact(selectedShapeIds.map((id=>this.store.get(id))))}setSelectedShapes(shapes,historyOptions){const ids=shapes.map((shape=>"string"==typeof shape?shape:shape.id));return this._setSelectedShapes(ids,historyOptions),this}_setSelectedShapes=this.history.createCommand("setSelectedShapes",((ids,historyOptions)=>{const{selectedShapeIds:prevSelectedShapeIds}=this.currentPageState,prevSet=new Set(prevSelectedShapeIds);return ids.length===prevSet.size&&ids.every((id=>prevSet.has(id)))?null:{data:{selectedShapeIds:ids,prevSelectedShapeIds},preservesRedoStack:!0,...historyOptions}}),{do:({selectedShapeIds})=>{this.store.put([{...this.currentPageState,selectedShapeIds}])},undo:({prevSelectedShapeIds})=>{this.store.put([{...this.currentPageState,selectedShapeIds:prevSelectedShapeIds}])},squash:({prevSelectedShapeIds},{selectedShapeIds})=>({selectedShapeIds,prevSelectedShapeIds})});isAncestorSelected(shape){const id="string"==typeof shape?shape:shape?.id??null,_shape=this.getShape(id);if(!_shape)return!1;const{selectedShapeIds}=this;return!!this.findShapeAncestor(_shape,(parent=>selectedShapeIds.includes(parent.id)))}select(...shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((shape=>shape.id));return this.setSelectedShapes(ids),this}deselect(...shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((shape=>shape.id)),{selectedShapeIds}=this;return selectedShapeIds.length>0&&ids.length>0&&this.setSelectedShapes(selectedShapeIds.filter((id=>!ids.includes(id)))),this}selectAll(){const ids=this.getSortedChildIdsForParent(this.currentPageId);return ids.length<=0||this.setSelectedShapes(this._getUnlockedShapeIds(ids)),this}selectNone(){return this.selectedShapeIds.length>0&&this.setSelectedShapes([]),this}get onlySelectedShape(){const{selectedShapes}=this;return 1===selectedShapes.length?selectedShapes[0]:null}get selectionPageBounds(){const{currentPageState:{selectedShapeIds}}=this;return 0===selectedShapeIds.length?null:Box2d_Box2d.Common(compact(selectedShapeIds.map((id=>this.getShapePageBounds(id)))))}get selectionRotation(){const{selectedShapeIds}=this;if(0===selectedShapeIds.length)return 0;if(1===selectedShapeIds.length)return this.getShapePageTransform(this.selectedShapeIds[0]).rotation();const allRotations=selectedShapeIds.map((id=>this.getShapePageTransform(id).rotation()));return allRotations.every((rotation=>Math.abs(rotation-allRotations[0])<Math.PI/180))?this.getShapePageTransform(selectedShapeIds[0]).rotation():0}get selectionRotatedPageBounds(){const{selectedShapeIds}=this;if(0===selectedShapeIds.length)return;const{selectionRotation}=this;if(0===selectionRotation)return this.selectionPageBounds;if(1===selectedShapeIds.length){const bounds=this.getShapeGeometry(selectedShapeIds[0]).bounds.clone(),pageTransform=this.getShapePageTransform(selectedShapeIds[0]);return bounds.point=pageTransform.applyToPoint(bounds.point),bounds}const boxFromRotatedVertices=Box2d_Box2d.FromPoints(this.selectedShapeIds.flatMap((id=>{const pageTransform=this.getShapePageTransform(id);return pageTransform?pageTransform.applyToPoints(this.getShapeGeometry(id).vertices):[]})).map((p=>Vec2d_Vec2d.Rot(p,-selectionRotation))));return boxFromRotatedVertices.point=boxFromRotatedVertices.point.rot(selectionRotation),boxFromRotatedVertices}get focusedGroupId(){return this.currentPageState.focusedGroupId??this.currentPageId}get focusedGroup(){const{focusedGroupId}=this;return focusedGroupId?this.getShape(focusedGroupId):void 0}setFocusedGroup(shape){const id="string"==typeof shape?shape:shape?.id??null;if(null!==id){const shape2=this.getShape(id);if(!shape2)throw Error(`Editor.setFocusedGroup: Shape with id ${id} does not exist`);if(!this.isShapeOfType(shape2,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${shape2.type}`)}return id===this.focusedGroupId||this._setFocusedGroupId(id),this}_setFocusedGroupId=this.history.createCommand("setFocusedGroupId",(next=>{const prev=this.currentPageState.focusedGroupId;if(prev!==next)return{data:{prev,next},preservesRedoStack:!0,squashing:!0}}),{do:({next})=>{this.store.update(this.currentPageState.id,(s=>({...s,focusedGroupId:next})))},undo:({prev})=>{this.store.update(this.currentPageState.id,(s=>({...s,focusedGroupId:prev})))},squash:({prev},{next})=>({prev,next})});popFocusedGroupId(){const{focusedGroup}=this;if(focusedGroup){const match=this.findShapeAncestor(focusedGroup,(shape=>this.isShapeOfType(shape,"group")));this.setFocusedGroup(match?.id??null),this.select(focusedGroup.id)}else this.setFocusedGroup(null),this.selectNone();return this}get editingShapeId(){return this.currentPageState.editingShapeId}get editingShape(){const{editingShapeId}=this;return editingShapeId?this.getShape(editingShapeId):void 0}setEditingShape(shape){const id="string"==typeof shape?shape:shape?.id??null;if(id!==this.editingShapeId){if(id){const shape2=this.getShape(id);if(shape2&&this.getShapeUtil(shape2).canEdit(shape2))return this._setInstancePageState({editingShapeId:id}),this}this._setInstancePageState({editingShapeId:null})}return this}get hoveredShapeId(){return this.currentPageState.hoveredShapeId}get hoveredShape(){const{hoveredShapeId}=this;return hoveredShapeId?this.getShape(hoveredShapeId):void 0}setHoveredShape(shape){const id="string"==typeof shape?shape:shape?.id??null;return id===this.hoveredShapeId||this.updateCurrentPageState({hoveredShapeId:id},{ephemeral:!0}),this}get hintingShapeIds(){return this.currentPageState.hintingShapeIds}get hintingShapes(){const{hintingShapeIds}=this;return compact(hintingShapeIds.map((id=>this.getShape(id))))}setHintingShapes(shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((shape=>shape.id));return this.updateCurrentPageState({hintingShapeIds:dedupe(ids)},{ephemeral:!0}),this}get erasingShapeIds(){return this.currentPageState.erasingShapeIds}get erasingShapes(){const{erasingShapeIds}=this;return compact(erasingShapeIds.map((id=>this.getShape(id))))}setErasingShapes(shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((shape=>shape.id));ids.sort();const{erasingShapeIds}=this;if(ids.length===erasingShapeIds.length){for(let i=0;i<ids.length;i++)if(ids[i]!==erasingShapeIds[i]){this._setInstancePageState({erasingShapeIds:ids},{ephemeral:!0});break}}else this._setInstancePageState({erasingShapeIds:ids},{ephemeral:!0});return this}get croppingShapeId(){return this.currentPageState.croppingShapeId}setCroppingShape(shape){const id="string"==typeof shape?shape:shape?.id??null;if(id!==this.croppingShapeId)if(id){const shape2=this.getShape(id),util=this.getShapeUtil(shape2);shape2&&util.canCrop(shape2)&&this.updateCurrentPageState({croppingShapeId:id})}else this.updateCurrentPageState({croppingShapeId:null});return this}get cameraId(){return TLCamera_CameraRecordType.createId(this.currentPageId)}get camera(){return this.store.get(this.cameraId)}get zoomLevel(){return this.camera.z}_setCamera(point){const currentCamera=this.camera;return currentCamera.x===point.x&&currentCamera.y===point.y&&currentCamera.z===point.z||this.batch((()=>{this.store.put([{...currentCamera,...point}]);const{currentScreenPoint}=this.inputs;this.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:currentScreenPoint,pointerId:INTERNAL_POINTER_IDS_CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:this.instanceState.isPenMode??!1}),this._tickCameraState()})),this}setCamera(point,animation){const x=Number.isFinite(point.x)?point.x:0,y=Number.isFinite(point.y)?point.y:0,z=Number.isFinite(point.z)?point.z:this.zoomLevel;if(this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),animation){const{width,height}=this.viewportScreenBounds;return this._animateToViewport(new Box2d_Box2d(-x,-y,width/z,height/z),animation)}return this._setCamera({x,y,z}),this}centerOnPoint(point,animation){if(!this.instanceState.canMoveCamera)return this;const{viewportPageBounds:{width:pw,height:ph},camera}=this;return this.setCamera({x:-(point.x-pw/2),y:-(point.y-ph/2),z:camera.z},animation),this}zoomToContent(){const bounds=this.selectionPageBounds??this.currentPageBounds;return bounds&&this.zoomToBounds(bounds,Math.min(1,this.zoomLevel),{duration:220}),this}zoomToFit(animation){if(!this.instanceState.canMoveCamera)return this;const ids=[...this.currentPageShapeIds];if(ids.length<=0)return this;const pageBounds=Box2d_Box2d.Common(compact(ids.map((id=>this.getShapePageBounds(id)))));return this.zoomToBounds(pageBounds,void 0,animation),this}resetZoom(point=this.viewportScreenCenter,animation){if(!this.instanceState.canMoveCamera)return this;const{x:cx,y:cy,z:cz}=this.camera,{x,y}=point;return this.setCamera({x:cx+(x/1-x)-(x/cz-x),y:cy+(y/1-y)-(y/cz-y),z:1},animation),this}zoomIn(point=this.viewportScreenCenter,animation){if(!this.instanceState.canMoveCamera)return this;const{x:cx,y:cy,z:cz}=this.camera;let zoom=MAX_ZOOM;for(let i=1;i<ZOOMS.length;i++){const z2=ZOOMS[i];if(!(z2-cz<=(z2-ZOOMS[i-1])/2)){zoom=z2;break}}const{x,y}=point;return this.setCamera({x:cx+(x/zoom-x)-(x/cz-x),y:cy+(y/zoom-y)-(y/cz-y),z:zoom},animation),this}zoomOut(point=this.viewportScreenCenter,animation){if(!this.instanceState.canMoveCamera)return this;const{x:cx,y:cy,z:cz}=this.camera;let zoom=.1;for(let i=ZOOMS.length-1;i>0;i--){const z1=ZOOMS[i-1],z2=ZOOMS[i];if(!(z2-cz>=(z2-z1)/2)){zoom=z1;break}}const{x,y}=point;return this.setCamera({x:cx+(x/zoom-x)-(x/cz-x),y:cy+(y/zoom-y)-(y/cz-y),z:zoom},animation),this}zoomToSelection(animation){if(!this.instanceState.canMoveCamera)return this;const{selectionPageBounds}=this;return selectionPageBounds?(this.zoomToBounds(selectionPageBounds,Math.max(1,this.zoomLevel),animation),this):this}panZoomIntoView(ids,animation){if(!this.instanceState.canMoveCamera)return this;if(ids.length<=0)return this;const selectionBounds=Box2d_Box2d.Common(compact(ids.map((id=>this.getShapePageBounds(id))))),{viewportPageBounds}=this;if(viewportPageBounds.h<selectionBounds.h||viewportPageBounds.w<selectionBounds.w)return this.zoomToBounds(selectionBounds,this.camera.z,animation),this;{const insetViewport=this.viewportPageBounds.clone().expandBy(-32/this.zoomLevel);let offsetX=0,offsetY=0;insetViewport.maxY<selectionBounds.maxY?offsetY=insetViewport.maxY-selectionBounds.maxY:insetViewport.minY>selectionBounds.minY&&(offsetY=insetViewport.minY-selectionBounds.minY),insetViewport.maxX<selectionBounds.maxX?offsetX=insetViewport.maxX-selectionBounds.maxX:insetViewport.minX>selectionBounds.minX&&(offsetX=insetViewport.minX-selectionBounds.minX);const{camera}=this;this.setCamera({x:camera.x+offsetX,y:camera.y+offsetY,z:camera.z},animation)}return this}zoomToBounds(bounds,targetZoom,animation){if(!this.instanceState.canMoveCamera)return this;const{viewportScreenBounds}=this,inset=Math.min(256,.28*viewportScreenBounds.width);let zoom=clamp(Math.min((viewportScreenBounds.width-inset)/bounds.width,(viewportScreenBounds.height-inset)/bounds.height),.1,MAX_ZOOM);return void 0!==targetZoom&&(zoom=Math.min(targetZoom,zoom)),this.setCamera({x:-bounds.minX+(viewportScreenBounds.width-bounds.width*zoom)/2/zoom,y:-bounds.minY+(viewportScreenBounds.height-bounds.height*zoom)/2/zoom,z:zoom},animation),this}pan(offset,animation){if(!this.instanceState.canMoveCamera)return this;const{x:cx,y:cy,z:cz}=this.camera;return this.setCamera({x:cx+offset.x/cz,y:cy+offset.y/cz,z:cz},animation),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_viewportAnimation=null;_animateViewport(ms){if(!this._viewportAnimation)return;const cancel=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",cancel),this._viewportAnimation=null};this.once("stop-camera-animation",cancel),this._viewportAnimation.elapsed+=ms;const{elapsed,easing,duration,start,end}=this._viewportAnimation;if(elapsed>duration)return this._setCamera({x:-end.x,y:-end.y,z:this.viewportScreenBounds.width/end.width}),void cancel();const t=easing(1-(duration-elapsed)/duration),left=start.minX+(end.minX-start.minX)*t,top=start.minY+(end.minY-start.minY)*t,right=start.maxX+(end.maxX-start.maxX)*t;this._setCamera({x:-left,y:-top,z:this.viewportScreenBounds.width/(right-left)})}_animateToViewport(targetViewportPage,opts={}){const{duration=0,easing=EASINGS.easeInOutCubic}=opts,{user:{animationSpeed},viewportPageBounds}=this;return this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),0===duration||0===animationSpeed?this._setCamera({x:-targetViewportPage.x,y:-targetViewportPage.y,z:this.viewportScreenBounds.width/targetViewportPage.width}):(this._viewportAnimation={elapsed:0,duration:duration/animationSpeed,easing,start:viewportPageBounds.clone(),end:targetViewportPage.clone()},this.addListener("tick",this._animateViewport),this)}slideCamera(opts={}){if(!this.instanceState.canMoveCamera)return this;this.stopCameraAnimation();const{animationSpeed}=this.user;if(0===animationSpeed)return this;const{speed,friction,direction,speedThreshold=.01}=opts;let currentSpeed=Math.min(speed,1);const cancel=()=>{this.removeListener("tick",moveCamera),this.removeListener("stop-camera-animation",cancel)};this.once("stop-camera-animation",cancel);const moveCamera=elapsed=>{const{x:cx,y:cy,z:cz}=this.camera,movementVec=Vec2d_Vec2d.Mul(direction,currentSpeed*elapsed/cz);currentSpeed*=1-friction,currentSpeed<speedThreshold?cancel():this._setCamera({x:cx+movementVec.x,y:cy+movementVec.y,z:cz})};return this.addListener("tick",moveCamera),this}animateToUser(userId){const presence=[...this.store.query.records("instance_presence",(()=>({userId:{eq:userId}}))).value].sort(((a,b)=>a.lastActivityTimestamp-b.lastActivityTimestamp)).pop();return presence?(this.batch((()=>{null!==this.instanceState.followingUserId&&this.stopFollowingUser();const isOnSamePage=presence.currentPageId===this.currentPageId;isOnSamePage||this.setCurrentPage(presence.currentPageId);const options=isOnSamePage?{duration:500}:void 0;this.centerOnPoint(presence.cursor,options);const{highlightedUserIds}=this.instanceState;this.updateInstanceState({highlightedUserIds:[...highlightedUserIds,userId]}),setTimeout((()=>{const highlightedUserIds2=[...this.instanceState.highlightedUserIds],index=highlightedUserIds2.indexOf(userId);index<0||(highlightedUserIds2.splice(index,1),this.updateInstanceState({highlightedUserIds:highlightedUserIds2}))}),COLLABORATOR_IDLE_TIMEOUT)})),this):this}animateToShape(shapeId,opts=DEFAULT_ANIMATION_OPTIONS){if(!this.instanceState.canMoveCamera)return this;const activeArea=this.viewportScreenBounds.clone().expandBy(-32),viewportAspectRatio=activeArea.width/activeArea.height,shapePageBounds=this.getShapePageBounds(shapeId);if(!shapePageBounds)return this;const shapeAspectRatio=shapePageBounds.width/shapePageBounds.height,targetViewportPage=shapePageBounds.clone(),z=shapePageBounds.width/activeArea.width;return targetViewportPage.width+=(activeArea.minX+activeArea.maxX)*z,targetViewportPage.height+=(activeArea.minY+activeArea.maxY)*z,targetViewportPage.x-=activeArea.minX*z,targetViewportPage.y-=activeArea.minY*z,shapeAspectRatio>viewportAspectRatio?(targetViewportPage.height=shapePageBounds.width/viewportAspectRatio,targetViewportPage.y-=(targetViewportPage.height-shapePageBounds.height)/2):(targetViewportPage.width=shapePageBounds.height*viewportAspectRatio,targetViewportPage.x-=(targetViewportPage.width-shapePageBounds.width)/2),this._animateToViewport(targetViewportPage,opts)}_willSetInitialBounds=!0;updateViewportScreenBounds(center=!1){const container=this.getContainer();if(!container)return this;const rect=container.getBoundingClientRect(),screenBounds=new Box2d_Box2d(rect.left||rect.x,rect.top||rect.y,Math.max(rect.width,1),Math.max(rect.height,1)),boundsAreEqual=screenBounds.equals(this.viewportScreenBounds),{_willSetInitialBounds}=this;if(boundsAreEqual)this._willSetInitialBounds=!1;else if(_willSetInitialBounds)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:screenBounds.toJson()},{squashing:!0,ephemeral:!0});else if(center&&!this.instanceState.followingUserId){const before=this.viewportPageCenter;this.updateInstanceState({screenBounds:screenBounds.toJson()},{squashing:!0,ephemeral:!0}),this.centerOnPoint(before)}else this.updateInstanceState({screenBounds:screenBounds.toJson()},{squashing:!0,ephemeral:!0});return this._tickCameraState(),this.updateRenderingBounds(),this}get viewportScreenBounds(){const{x,y,w,h}=this.instanceState.screenBounds;return new Box2d_Box2d(x,y,w,h)}get viewportScreenCenter(){return this.viewportScreenBounds.center}get viewportPageBounds(){const{w,h}=this.viewportScreenBounds,{x:cx,y:cy,z:cz}=this.camera;return new Box2d_Box2d(-cx,-cy,w/cz,h/cz)}get viewportPageCenter(){return this.viewportPageBounds.center}screenToPage(point){const{screenBounds}=this.store.unsafeGetWithoutCapture(TLInstance_TLINSTANCE_ID),{x:cx,y:cy,z:cz=1}=this.camera;return{x:(point.x-screenBounds.x)/cz-cx,y:(point.y-screenBounds.y)/cz-cy,z:point.z??.5}}pageToScreen(point){const{screenBounds}=this.store.unsafeGetWithoutCapture(TLInstance_TLINSTANCE_ID),{x:cx,y:cy,z:cz=1}=this.camera;return{x:(point.x+cx)*cz+screenBounds.x,y:(point.y+cy)*cz+screenBounds.y,z:point.z??.5}}startFollowingUser(userId){const leaderPresences=this.store.query.records("instance_presence",(()=>({userId:{eq:userId}}))),thisUserId=this.user.id;if(thisUserId||console.warn("You should set the userId for the current instance before following a user"),leaderPresences.value.some((p=>p.followingUserId===thisUserId)))return this;transact((()=>{this.stopFollowingUser(),this.updateInstanceState({followingUserId:userId},{ephemeral:!0})}));const cancel=()=>{this.removeListener("frame",moveTowardsUser),this.removeListener("stop-following",cancel)};let isCaughtUp=!1;const moveTowardsUser=()=>{const leaderPresence=[...leaderPresences.value].sort(((a,b)=>a.lastActivityTimestamp-b.lastActivityTimestamp)).pop();if(!leaderPresence)return void this.stopFollowingUser();const isOnSamePage=leaderPresence.currentPageId===this.currentPageId,chaseProportion=isOnSamePage?.5:1;if(!isOnSamePage)return this.stopFollowingUser(),this.setCurrentPage(leaderPresence.currentPageId),void this.startFollowingUser(userId);const{center,width,height}=this.viewportPageBounds,leaderScreen=Box2d_Box2d.From(leaderPresence.screenBounds),leaderWidth=leaderScreen.width/leaderPresence.camera.z,leaderHeight=leaderScreen.height/leaderPresence.camera.z,leaderCenter=new Vec2d_Vec2d(leaderWidth/2-leaderPresence.camera.x,leaderHeight/2-leaderPresence.camera.y),desiredWidth=width+(leaderWidth-width)*chaseProportion,desiredHeight=height+(leaderHeight-height)*chaseProportion,ratio=leaderPresence.followingUserId===thisUserId?height/desiredHeight:Math.min(width/desiredWidth,height/desiredHeight),targetZoom=clamp(this.camera.z*ratio,.1,MAX_ZOOM),targetWidth=this.viewportScreenBounds.w/targetZoom,targetHeight=this.viewportScreenBounds.h/targetZoom,displacement=leaderCenter.sub(center),targetCenter=Vec2d_Vec2d.Add(center,Vec2d_Vec2d.Mul(displacement,chaseProportion)),distance=Vec2d_Vec2d.Sub(targetCenter,center).len(),zoomChange=Math.abs(targetZoom-this.camera.z);distance<.1&&zoomChange<.005?isCaughtUp=!0:isCaughtUp&&distance<.2&&zoomChange<.05||(isCaughtUp=!1,this.stopCameraAnimation(),this._setCamera({x:-(targetCenter.x-targetWidth/2),y:-(targetCenter.y-targetHeight/2),z:targetZoom}))};return this.once("stop-following",cancel),this.addListener("frame",moveTowardsUser),this}stopFollowingUser(){return this.updateInstanceState({followingUserId:null},{ephemeral:!0}),this.emit("stop-following"),this}_cameraState=Atom_atom("camera state","idle");get cameraState(){return this._cameraState.value}_cameraStateTimeoutRemaining=0;_lastUpdateRenderingBoundsTimestamp=Date.now();_decayCameraStateTimeout=elapsed=>{this._cameraStateTimeoutRemaining-=elapsed,this._cameraStateTimeoutRemaining<=0&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"),this.updateRenderingBounds())};_tickCameraState=()=>{this._cameraStateTimeoutRemaining=64;const now=Date.now();"idle"===this._cameraState.__unsafe__getWithoutCapture()?(this._lastUpdateRenderingBoundsTimestamp=now,this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout)):now-this._lastUpdateRenderingBoundsTimestamp>620&&this.updateRenderingBounds()};getUnorderedRenderingShapes(useEditorState){const renderingShapes=[];let nextIndex=4e3,nextBackgroundIndex=2e3;const editingShapeId=this.editingShapeId,selectedShapeIds=this.selectedShapeIds,erasingShapeIds=this.erasingShapeIds,renderingBoundsExpanded=this.renderingBoundsExpanded,isCullingOffScreenShapes=Number.isFinite(this.renderingBoundsMargin),addShapeById=(id,opacity,isAncestorErasing)=>{const shape=this.getShape(id);if(!shape)return;opacity*=shape.opacity;let isCulled=!1,isShapeErasing=!1;const util=this.getShapeUtil(shape),maskedPageBounds=this.getShapeMaskedPageBounds(id);useEditorState&&(isShapeErasing=!isAncestorErasing&&erasingShapeIds.includes(id),isShapeErasing&&(opacity*=.32),isCulled=isCullingOffScreenShapes&&util.canUnmount(shape)&&editingShapeId!==id&&(void 0===maskedPageBounds||!renderingBoundsExpanded.includes(maskedPageBounds)&&!selectedShapeIds.includes(id))),renderingShapes.push({id,shape,util,index:nextIndex,backgroundIndex:nextBackgroundIndex,opacity,isCulled,maskedPageBounds}),nextIndex+=1,nextBackgroundIndex+=1;const childIds=this.getSortedChildIdsForParent(id);if(!childIds.length)return;let backgroundIndexToRestore=null;util.providesBackgroundForChildren(shape)&&(backgroundIndexToRestore=nextBackgroundIndex,nextBackgroundIndex=nextIndex,nextIndex+=2e3);for(const childId of childIds)addShapeById(childId,opacity,isAncestorErasing||isShapeErasing);null!==backgroundIndexToRestore&&(nextBackgroundIndex=backgroundIndexToRestore)};for(const childId of this.getSortedChildIdsForParent(this.currentPageId))addShapeById(childId,1,!1);return renderingShapes}get renderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(sortById)}get renderingBounds(){return this._renderingBounds.value}_renderingBounds=Atom_atom("rendering viewport",new Box2d_Box2d);get renderingBoundsExpanded(){return this._renderingBoundsExpanded.value}_renderingBoundsExpanded=Atom_atom("rendering viewport expanded",new Box2d_Box2d);updateRenderingBounds(){const{viewportPageBounds}=this;return viewportPageBounds.equals(this._renderingBounds.__unsafe__getWithoutCapture())||(this._renderingBounds.set(viewportPageBounds.clone()),Number.isFinite(this.renderingBoundsMargin)?this._renderingBoundsExpanded.set(viewportPageBounds.clone().expandBy(this.renderingBoundsMargin/this.zoomLevel)):this._renderingBoundsExpanded.set(viewportPageBounds)),this}renderingBoundsMargin=100;get _pages(){return this.store.query.records("page")}get pages(){return this._pages.value.sort(reordering_sortByIndex)}get currentPage(){return this.getPage(this.currentPageId)}get currentPageId(){return this.instanceState.currentPageId}getPage(page){return this.store.get("string"==typeof page?page:page.id)}_currentPageShapeIds;get currentPageShapeIds(){return this._currentPageShapeIds.value}getPageShapeIds(page){const pageId="string"==typeof page?page:page.id,result=this.store.query.exec("shape",{parentId:{eq:pageId}});return this.getShapeAndDescendantIds(result.map((s=>s.id)))}setCurrentPage(page,historyOptions){const pageId="string"==typeof page?page:page.id;return this._setCurrentPageId(pageId,historyOptions),this}_setCurrentPageId=this.history.createCommand("setCurrentPage",((pageId,historyOptions)=>{if(this.store.has(pageId))return this.stopFollowingUser(),{data:{toId:pageId,fromId:this.currentPageId},squashing:!0,preservesRedoStack:!0,...historyOptions};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:({toId})=>{if(this.store.has(toId)){if(!this.pageStates.find((p=>p.pageId===toId))){const camera=TLCamera_CameraRecordType.create({id:TLCamera_CameraRecordType.createId(toId)});this.store.put([camera,TLPageState_InstancePageStateRecordType.create({id:TLPageState_InstancePageStateRecordType.createId(toId),pageId:toId})])}this.store.put([{...this.instanceState,currentPageId:toId}]),this.updateRenderingBounds()}},undo:({fromId})=>{this.store.has(fromId)&&(this.store.put([{...this.instanceState,currentPageId:fromId}]),this.updateRenderingBounds())},squash:({fromId},{toId})=>({toId,fromId})});updatePage(partial,historyOptions){return this._updatePage(partial,historyOptions),this}_updatePage=this.history.createCommand("updatePage",((partial,historyOptions)=>{if(this.instanceState.isReadonly)return null;const prev=this.getPage(partial.id);return prev?{data:{prev,partial},...historyOptions}:null}),{do:({partial})=>{this.store.update(partial.id,(page=>({...page,...partial})))},undo:({prev,partial})=>{this.store.update(partial.id,(()=>prev))},squash:(prevData,nextData)=>({prev:{...prevData.prev,...nextData.prev},partial:nextData.partial})});createPage(page){return this._createPage(page),this}_createPage=this.history.createCommand("createPage",(page=>{if(this.instanceState.isReadonly)return null;if(this.pages.length>=MAX_PAGES)return null;const{pages}=this,name=function getIncrementedName(name,others){let result=name;const set=new Set(others);for(;set.has(result);)result=/^.*(\d+)$/.exec(result)?.[1]?result.replace(/(\d+)(?=\D?)$/,(m=>(+m+1).toString())):`${result} 1`;return result}(page.name??"Page",pages.map((p=>p.name)));let index=page.index;index&&!pages.some((p=>p.index===index))||(index=getIndexAbove(pages[pages.length-1].index));const newPage=PageRecordType.create({meta:{},...page,name,index}),newCamera=TLCamera_CameraRecordType.create({id:TLCamera_CameraRecordType.createId(newPage.id)});return{data:{newPage,newTabPageState:TLPageState_InstancePageStateRecordType.create({id:TLPageState_InstancePageStateRecordType.createId(newPage.id),pageId:newPage.id}),newCamera}}}),{do:({newPage,newTabPageState,newCamera})=>{this.store.put([newPage,newCamera,newTabPageState])},undo:({newPage,newTabPageState,newCamera})=>{1!==this.pages.length&&this.store.remove([newTabPageState.id,newPage.id,newCamera.id])}});deletePage(page){const id="string"==typeof page?page:page.id;return this._deletePage(id),this}_deletePage=this.history.createCommand("delete_page",(id=>{if(this.instanceState.isReadonly)return null;const{pages}=this;if(1===pages.length)return null;const deletedPage=this.getPage(id),deletedPageStates=this.pageStates.filter((s=>s.pageId===id));if(!deletedPage)return null;if(id===this.currentPageId){const index=pages.findIndex((page=>page.id===id)),next=pages[index-1]??pages[index+1];this.setCurrentPage(next.id)}return{data:{id,deletedPage,deletedPageStates}}}),{do:({deletedPage,deletedPageStates})=>{const{pages}=this;if(1!==pages.length){if(deletedPage.id===this.currentPageId){const index=pages.findIndex((page=>page.id===deletedPage.id)),next=pages[index-1]??pages[index+1];this.setCurrentPage(next.id)}this.store.remove(deletedPageStates.map((s=>s.id))),this.store.remove([deletedPage.id]),this.updateRenderingBounds()}},undo:({deletedPage,deletedPageStates})=>{this.store.put([deletedPage]),this.store.put(deletedPageStates),this.updateRenderingBounds()}});duplicatePage(page,createId=PageRecordType.createId()){if(this.pages.length>=MAX_PAGES)return this;const id="string"==typeof page?page:page.id,freshPage=this.getPage(id);if(!freshPage)return this;const prevCamera={...this.camera},content=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(freshPage.id));return this.batch((()=>{const{pages}=this,index=getIndexBetween(freshPage.index,pages[pages.indexOf(freshPage)+1]?.index);if(this.createPage({name:freshPage.name+" Copy",id:createId,index}),this.setCurrentPage(createId),this.setCamera(prevCamera),content)return this.putContentOntoCurrentPage(content)})),this}renamePage(page,name,historyOptions){const id="string"==typeof page?page:page.id;return this.instanceState.isReadonly||this.updatePage({id,name},historyOptions),this}get _assets(){return this.store.query.records("asset")}get assets(){return this._assets.value}createAssets(assets){return this._createAssets(assets),this}_createAssets=this.history.createCommand("createAssets",(assets=>this.instanceState.isReadonly||assets.length<=0?null:{data:{assets}}),{do:({assets})=>{this.store.put(assets)},undo:({assets})=>{this.store.remove(assets.map((a=>a.id)))}});updateAssets(assets){return this._updateAssets(assets),this}_updateAssets=this.history.createCommand("updateAssets",(assets=>{if(this.instanceState.isReadonly)return;if(assets.length<=0)return;return{data:{snapshots:{},assets}}}),{do:({assets,snapshots})=>{this.store.put(assets.map((a=>{const asset=this.store.get(a.id);return snapshots[a.id]=asset,{...asset,...a}})))},undo:({snapshots})=>{this.store.put(Object.values(snapshots))}});deleteAssets(assets){const ids="string"==typeof assets[0]?assets:assets.map((a=>a.id));return this._deleteAssets(ids),this}_deleteAssets=this.history.createCommand("deleteAssets",(ids=>{if(this.instanceState.isReadonly)return;if(ids.length<=0)return;const prev=compact(ids.map((id=>this.store.get(id))));return{data:{ids,prev}}}),{do:({ids})=>{this.store.remove(ids)},undo:({prev})=>{this.store.put(prev)}});getAsset(asset){return this.store.get("string"==typeof asset?asset:asset.id)}get _shapeGeometryCache(){return this.store.createComputedCache("bounds",(shape=>this.getShapeUtil(shape).getGeometry(shape)),((a,b)=>a.props===b.props))}getShapeGeometry(shape){return this._shapeGeometryCache.get("string"==typeof shape?shape:shape.id)}get _shapeOutlineSegmentsCache(){return this.store.createComputedCache("outline-segments",(shape=>this.getShapeUtil(shape).getOutlineSegments(shape)))}getShapeOutlineSegments(shape){return this._shapeOutlineSegmentsCache.get("string"==typeof shape?shape:shape.id)??EMPTY_ARRAY}get _shapeHandlesCache(){return this.store.createComputedCache("handles",(shape=>this.getShapeUtil(shape).getHandles?.(shape)))}getShapeHandles(shape){return this._shapeHandlesCache.get("string"==typeof shape?shape:shape.id)}getShapeLocalTransform(shape){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);if(!freshShape)throw Error("Editor.getTransform: shape not found");return Matrix2d.Identity().translate(freshShape.x,freshShape.y).rotate(freshShape.rotation)}get _shapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",(shape=>{if(isPageId(shape.parentId))return this.getShapeLocalTransform(shape);const parentTransform=this._shapePageTransformCache.get(shape.parentId)??Matrix2d.Identity();return Matrix2d.Compose(parentTransform,this.getShapeLocalTransform(shape))}))}getShapeParentTransform(shape){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);return!freshShape||isPageId(freshShape.parentId)?Matrix2d.Identity():this._shapePageTransformCache.get(freshShape.parentId)??Matrix2d.Identity()}getShapePageTransform(shape){const id="string"==typeof shape?shape:this.getShape(shape).id;return this._shapePageTransformCache.get(id)??Matrix2d.Identity()}get _shapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",(shape=>{const pageTransform=this._shapePageTransformCache.get(shape.id);if(!pageTransform)return new Box2d_Box2d;return Box2d_Box2d.FromPoints(Matrix2d.applyToPoints(pageTransform,this.getShapeGeometry(shape).vertices))}))}getShapePageBounds(shape){return this._shapePageBoundsCache.get("string"==typeof shape?shape:shape.id)}get _shapeClipPathCache(){return this.store.createComputedCache("clipPathCache",(shape=>{const pageMask=this._shapeMaskCache.get(shape.id);if(!pageMask)return;const pageTransform=this._shapePageTransformCache.get(shape.id);if(!pageTransform)return;if(0===pageMask.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";return`polygon(${Matrix2d.applyToPoints(Matrix2d.Inverse(pageTransform),pageMask).map((p=>`${p.x}px ${p.y}px`)).join(",")})`}))}getShapeClipPath(shape){return this._shapeClipPathCache.get("string"==typeof shape?shape:shape.id)}get _shapeMaskCache(){return this.store.createComputedCache("pageMaskCache",(shape=>{if(isPageId(shape.parentId))return;const frameAncestors=this.getShapeAncestors(shape.id).filter((shape2=>this.isShapeOfType(shape2,"frame")));if(0===frameAncestors.length)return;return frameAncestors.map((s=>this._shapePageTransformCache.get(s.id).applyToPoints(this.getShapeGeometry(s).vertices))).reduce(((acc,b)=>{if(!b||!acc)return;const intersection=intersectPolygonPolygon(acc,b);return intersection?intersection.map(Vec2d_Vec2d.Cast):[]}))}))}getShapeMask(shape){return this._shapeMaskCache.get("string"==typeof shape?shape:shape.id)}getShapeMaskedPageBounds(shape){"string"!=typeof shape&&(shape=shape.id);const pageBounds=this._shapePageBoundsCache.get(shape);if(!pageBounds)return;const pageMask=this._shapeMaskCache.get(shape);if(pageMask){const intersection=intersectPolygonPolygon(pageMask,pageBounds.corners);if(!intersection)return;return Box2d_Box2d.FromPoints(intersection)}return pageBounds}getShapeAncestors(shape,acc=[]){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);if(!freshShape)return acc;const parentId=freshShape.parentId;if(isPageId(parentId))return acc.reverse(),acc;const parent=this.store.get(parentId);return parent?(acc.push(parent),this.getShapeAncestors(parent,acc)):acc}findShapeAncestor(shape,predicate){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);if(!freshShape)return;const parentId=freshShape.parentId;if(isPageId(parentId))return;const parent=this.getShape(parentId);return parent?predicate(parent)?parent:this.findShapeAncestor(parent,predicate):void 0}hasAncestor(shape,ancestorId){const id="string"==typeof shape?shape:shape?.id,freshShape=id&&this.getShape(id);return!!freshShape&&(freshShape.parentId===ancestorId||this.hasAncestor(this.getShapeParent(freshShape),ancestorId))}findCommonAncestor(shapes,predicate){if(0===shapes.length)return;const freshShapes=compact(("string"==typeof shapes[0]?shapes:shapes.map((s=>s.id))).map((id=>this.getShape(id))));if(1===freshShapes.length){const parentId=freshShapes[0].parentId;if(isPageId(parentId))return;return predicate?this.findShapeAncestor(freshShapes[0],predicate)?.id:parentId}const[nodeA,...others]=freshShapes;let ancestor=this.getShapeParent(nodeA);for(;ancestor;)if(!predicate||predicate(ancestor)){if(others.every((shape=>this.hasAncestor(shape,ancestor.id))))return ancestor.id;ancestor=this.getShapeParent(ancestor)}else ancestor=this.getShapeParent(ancestor)}isShapeOrAncestorLocked(arg){const shape="string"==typeof arg?this.getShape(arg):arg;return void 0!==shape&&(!!shape.isLocked||this.isShapeOrAncestorLocked(this.getShapeParent(shape)))}get currentPageBounds(){let commonBounds;return this.currentPageShapeIds.forEach((shapeId=>{const bounds=this.getShapeMaskedPageBounds(shapeId);bounds&&(commonBounds=commonBounds?commonBounds.expand(bounds):bounds.clone())})),commonBounds}getSelectedShapeAtPoint(point){const{selectedShapeIds}=this;return this.currentPageShapesSorted.filter((shape=>"group"!==shape.type&&selectedShapeIds.includes(shape.id))).reverse().find((shape=>this.isPointInShape(shape,point,{hitInside:!0,margin:0})))}getShapeAtPoint(point,opts={}){const{viewportPageBounds,zoomLevel}=this,{filter,margin=0,hitLabels=!1,hitInside=!1,hitFrameInside=!1}=opts;let inHollowSmallestArea=1/0,inHollowSmallestAreaHit=null,inMarginClosestToEdgeDistance=1/0,inMarginClosestToEdgeHit=null;const shapesToCheck=(opts.renderingOnly?this.currentPageRenderingShapesSorted:this.currentPageShapesSorted).filter((shape=>{if(this.isShapeOfType(shape,"group"))return!1;const pageMask=this.getShapeMask(shape);return!(pageMask&&!pointInPolygon(point,pageMask))&&(!filter||filter(shape))}));for(let i=shapesToCheck.length-1;i>=0;i--){const shape=shapesToCheck[i],geometry=this.getShapeGeometry(shape),isGroup=geometry instanceof Group2d,pointInShapeSpace=this.getPointInShapeSpace(shape,point);if((this.isShapeOfType(shape,"arrow")||this.isShapeOfType(shape,"geo")&&"none"===shape.props.fill)&&shape.props.text.trim())for(const childGeometry of geometry.children)if(childGeometry.isLabel&&childGeometry.isPointInBounds(pointInShapeSpace))return shape;if(this.isShapeOfType(shape,"frame")){const distance2=geometry.distanceToPoint(pointInShapeSpace,hitInside);if(Math.abs(distance2)<=margin)return inMarginClosestToEdgeHit||shape;if(geometry.hitTestPoint(pointInShapeSpace,0,!0))return inMarginClosestToEdgeHit||inHollowSmallestAreaHit||(hitFrameInside?shape:void 0);continue}let distance;if(isGroup){let minDistance=1/0;for(const childGeometry of geometry.children){if(childGeometry.isLabel&&!hitLabels)continue;const tDistance=childGeometry.distanceToPoint(pointInShapeSpace,hitInside);tDistance<minDistance&&(minDistance=tDistance)}distance=minDistance}else distance=0===margin&&(geometry.bounds.w<1||geometry.bounds.h<1)||geometry.bounds.containsPoint(pointInShapeSpace,margin)?geometry.distanceToPoint(pointInShapeSpace,hitInside):1/0;if(geometry.isClosed){if(distance<=margin){if(geometry.isFilled||isGroup&&geometry.children[0].isFilled)return inMarginClosestToEdgeHit||shape;if(this.getShapePageBounds(shape).contains(viewportPageBounds))continue;if(Math.abs(distance)<margin)Math.abs(distance)<inMarginClosestToEdgeDistance&&(inMarginClosestToEdgeDistance=Math.abs(distance),inMarginClosestToEdgeHit=shape);else if(!inMarginClosestToEdgeHit){const{area}=geometry;area<inHollowSmallestArea&&(inHollowSmallestArea=area,inHollowSmallestAreaHit=shape)}}}else if(distance<HIT_TEST_MARGIN/zoomLevel)return shape}return inMarginClosestToEdgeHit||inHollowSmallestAreaHit||void 0}getShapesAtPoint(point,opts={}){return this.currentPageShapes.filter((shape=>this.isPointInShape(shape,point,opts)))}isPointInShape(shape,point,opts={}){const{hitInside=!1,margin=0}=opts,id="string"==typeof shape?shape:shape.id,pageMask=this.getShapeMask(id);return!(pageMask&&!pointInPolygon(point,pageMask))&&this.getShapeGeometry(id).hitTestPoint(this.getPointInShapeSpace(shape,point),margin,hitInside)}getPointInShapeSpace(shape,point){const id="string"==typeof shape?shape:shape.id;return this._shapePageTransformCache.get(id).clone().invert().applyToPoint(point)}getPointInParentSpace(shape,point){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);if(!freshShape)return new Vec2d_Vec2d(0,0);if(isPageId(freshShape.parentId))return Vec2d_Vec2d.From(point);const parentTransform=this.getShapePageTransform(freshShape.parentId);return parentTransform?parentTransform.clone().invert().applyToPoint(point):Vec2d_Vec2d.From(point)}get currentPageShapes(){return Array.from(this.currentPageShapeIds,(id=>this.store.get(id)))}get currentPageShapesSorted(){const shapes=new Set(this.currentPageShapes.sort(reordering_sortByIndex)),results=[];function pushShapeWithDescendants(shape){results.push(shape),shapes.delete(shape),shapes.forEach((otherShape=>{otherShape.parentId===shape.id&&pushShapeWithDescendants(otherShape)}))}return shapes.forEach((shape=>{isShape(this.getShape(shape.parentId))||pushShapeWithDescendants(shape)})),results}get currentPageRenderingShapesSorted(){return this.renderingShapes.filter((({isCulled})=>!isCulled)).sort(((a,b)=>a.index-b.index)).map((({shape})=>shape))}isShapeOfType(arg,type){return("string"==typeof arg?this.getShape(arg):arg).type===type}getShape(shape){const id="string"==typeof shape?shape:shape.id;if(isShapeId(id))return this.store.get(id)}getShapeParent(shape){const id="string"==typeof shape?shape:shape?.id;if(!id)return;const freshShape=this.getShape(id);return void 0!==freshShape&&isShapeId(freshShape.parentId)?this.store.get(freshShape.parentId):void 0}getShapeNearestSibling(siblingShape,targetShape){if(!targetShape)return;if(targetShape.parentId===siblingShape.parentId)return targetShape;return this.findShapeAncestor(targetShape,(ancestor2=>ancestor2.parentId===siblingShape.parentId))}isShapeInPage(shape,pageId=this.currentPageId){const id="string"==typeof shape?shape:shape.id,shapeToCheck=this.getShape(id);if(!shapeToCheck)return!1;let shapeIsInPage=!1;if(shapeToCheck.parentId===pageId)shapeIsInPage=!0;else{let parent=this.getShape(shapeToCheck.parentId);isInPageSearch:for(;parent;){if(parent.parentId===pageId){shapeIsInPage=!0;break isInPageSearch}parent=this.getShape(parent.parentId)}}return shapeIsInPage}getAncestorPageId(shape){const id="string"==typeof shape?shape:shape?.id,_shape=id&&this.getShape(id);if(_shape)return isPageId(_shape.parentId)?_shape.parentId:this.getAncestorPageId(this.getShape(_shape.parentId))}_parentIdsToChildIds;reparentShapes(shapes,parentId,insertIndex){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id)),changes=[],parentTransform=isPageId(parentId)?Matrix2d.Identity():this.getShapePageTransform(parentId),parentPageRotation=parentTransform.rotation();let indices=[];const sibs=compact(this.getSortedChildIdsForParent(parentId).map((id=>this.getShape(id))));if(insertIndex){const sibWithInsertIndex=sibs.find((s=>s.index===insertIndex));if(sibWithInsertIndex){const sibAbove=sibs[sibs.indexOf(sibWithInsertIndex)+1];indices=sibAbove?getIndicesBetween(insertIndex,sibAbove.index,ids.length):getIndicesAbove(insertIndex,ids.length)}else{const sibAbove=sibs.sort(reordering_sortByIndex).find((s=>s.index>insertIndex));indices=sibAbove?getIndicesBetween(insertIndex,sibAbove.index,ids.length):getIndicesAbove(insertIndex,ids.length)}}else{const sib=sibs.length&&sibs[sibs.length-1];indices=sib?getIndicesAbove(sib.index,ids.length):getIndices(ids.length)}const invertedParentTransform=parentTransform.clone().invert(),shapesToReparent=compact(ids.map((id=>this.getShape(id)))),lockedShapes=shapesToReparent.filter((shape=>shape.isLocked));lockedShapes.length&&this.updateShapes(lockedShapes.map((({id,type})=>({id,type,isLocked:!1}))));for(let i=0;i<shapesToReparent.length;i++){const shape=shapesToReparent[i],pageTransform=this.getShapePageTransform(shape);if(!pageTransform)continue;const pagePoint=pageTransform.point();if(!pagePoint)continue;const newPoint=invertedParentTransform.applyToPoint(pagePoint),newRotation=pageTransform.rotation()-parentPageRotation;changes.push({id:shape.id,type:shape.type,parentId,x:newPoint.x,y:newPoint.y,rotation:newRotation,index:indices[i],isLocked:shape.isLocked})}return this.updateShapes(changes),this}getHighestIndexForParent(parent){const parentId="string"==typeof parent?parent:parent.id,children=this._parentIdsToChildIds.value[parentId];if(!children||0===children.length)return"a1";return getIndexAbove(this.getShape(children[children.length-1]).index)}_childIdsCache=new WeakMapCache;getSortedChildIdsForParent(parent){const parentId="string"==typeof parent?parent:parent.id,ids=this._parentIdsToChildIds.value[parentId];return ids?this._childIdsCache.get(ids,(()=>ids)):EMPTY_ARRAY}visitDescendants(parent,visitor){const parentId="string"==typeof parent?parent:parent.id,children=this.getSortedChildIdsForParent(parentId);for(const id of children)!1!==visitor(id)&&this.visitDescendants(id,visitor);return this}getShapeAndDescendantIds(ids){const idsToInclude=new Set,idsToCheck=[...ids];for(;idsToCheck.length>0;){const id=idsToCheck.pop();if(!id)break;if(!idsToInclude.has(id)){idsToInclude.add(id);for(const childId of this.getSortedChildIdsForParent(id))idsToCheck.push(childId)}}return idsToInclude}getDroppingOverShape(point,droppingShapes=[]){const{currentPageShapesSorted}=this;for(let i=currentPageShapesSorted.length-1;i>=0;i--){const shape=currentPageShapesSorted[i];if(!this.getShapeUtil(shape).canDropShapes(shape,droppingShapes)||droppingShapes.find((s=>s.id===shape.id||this.hasAncestor(shape,s.id))))continue;const maskedPageBounds=this.getShapeMaskedPageBounds(shape.id);if(maskedPageBounds&&maskedPageBounds.containsPoint(point)&&this.getShapeGeometry(shape).hitTestPoint(this.getPointInShapeSpace(shape,point),0,!0))return shape}}getOutermostSelectableShape(shape,filter){const id="string"==typeof shape?shape:shape.id,freshShape=this.getShape(id);let match=freshShape,node=freshShape;const{focusedGroup}=this;for(;node;){if(this.isShapeOfType(node,"group")&&focusedGroup?.id!==node.id&&!this.hasAncestor(focusedGroup,node.id)&&(filter?.(node)??1))match=node;else if(focusedGroup?.id===node.id)break;node=this.getShapeParent(node)}return match}rotateShapesBy(shapes,delta){if(("string"==typeof shapes[0]?shapes:shapes.map((s=>s.id))).length<=0)return this;const snapshot=getRotationSnapshot({editor:this});return snapshot?(applyRotationToSnapshotShapes({delta,snapshot,editor:this,stage:"one-off"}),this):this}nudgeShapes(shapes,offset,historyOptions){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(ids.length<=0)return this;const changes=[];for(const id of ids){const shape=this.getShape(id);if(!shape)throw Error(`Could not find a shape with the id ${id}.`);const localDelta=Vec2d_Vec2d.Cast(offset),parentTransform=this.getShapeParentTransform(shape);parentTransform&&localDelta.rot(-parentTransform.rotation());const translateStartChanges=this.getShapeUtil(shape).onTranslateStart?.(shape);changes.push(translateStartChanges?{...translateStartChanges,x:shape.x+localDelta.x,y:shape.y+localDelta.y}:{id,x:shape.x+localDelta.x,y:shape.y+localDelta.y,type:shape.type})}return this.updateShapes(changes,{squashing:!0,...historyOptions}),this}duplicateShapes(shapes,offset){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(ids.length<=0)return this;const initialIds=new Set(ids),idsToCreate=[],idsToCheck=[...ids];for(;idsToCheck.length>0;){const id=idsToCheck.pop();if(!id)break;idsToCreate.push(id),this.getSortedChildIdsForParent(id).forEach((childId=>idsToCheck.push(childId)))}idsToCreate.reverse();const idsMap=new Map(idsToCreate.map((id=>[id,createShapeId()]))),shapesToCreate=compact(idsToCreate.map((id=>{const shape=this.getShape(id);if(!shape)return null;const createId=idsMap.get(id);let ox=0,oy=0;if(offset&&initialIds.has(id)){const parentTransform=this.getShapeParentTransform(shape),vec=new Vec2d_Vec2d(offset.x,offset.y).rot(-parentTransform.rotation());ox=vec.x,oy=vec.y}const parentId=shape.parentId??this.currentPageId,siblings=this.getSortedChildIdsForParent(parentId),currentIndex=siblings.indexOf(shape.id),siblingAboveId=siblings[currentIndex+1],siblingAbove=siblingAboveId?this.getShape(siblingAboveId):null,index=siblingAbove?getIndexBetween(shape.index,siblingAbove.index):getIndexAbove(shape.index);let newShape=deepCopy(shape);if(this.isShapeOfType(shape,"arrow")&&this.isShapeOfType(newShape,"arrow")){const info=this.getArrowInfo(shape);let newStartShapeId,newEndShapeId;if("binding"===shape.props.start.type&&(newStartShapeId=idsMap.get(shape.props.start.boundShapeId),!newStartShapeId))if(info?.isValid){const{x,y}=info.start.point;newShape.props.start={type:"point",x,y}}else{const{start}=getArrowTerminalsInArrowSpace(this,shape);newShape.props.start={type:"point",x:start.x,y:start.y}}if("binding"===shape.props.end.type&&(newEndShapeId=idsMap.get(shape.props.end.boundShapeId),!newEndShapeId))if(info?.isValid){const{x,y}=info.end.point;newShape.props.end={type:"point",x,y}}else{const{end}=getArrowTerminalsInArrowSpace(this,shape);newShape.props.start={type:"point",x:end.x,y:end.y}}const infoAfter=getIsArrowStraight(newShape)?getStraightArrowInfo(this,newShape):getCurvedArrowInfo(this,newShape);if(info?.isValid&&infoAfter?.isValid&&!getIsArrowStraight(shape)){const mpA=Vec2d_Vec2d.Med(info.start.handle,info.end.handle),distA=Vec2d_Vec2d.Dist(info.middle,mpA),distB=Vec2d_Vec2d.Dist(infoAfter.middle,mpA);newShape.props.bend<0?newShape.props.bend+=distB-distA:newShape.props.bend-=distB-distA}"binding"===newShape.props.start.type&&newStartShapeId&&(newShape.props.start.boundShapeId=newStartShapeId),"binding"===newShape.props.end.type&&newEndShapeId&&(newShape.props.end.boundShapeId=newEndShapeId)}return newShape={...newShape,id:createId,x:shape.x+ox,y:shape.y+oy,index},newShape})));return shapesToCreate.forEach((shape=>{isShapeId(shape.parentId)&&idsMap.has(shape.parentId)&&(shape.parentId=idsMap.get(shape.parentId))})),this.history.batch((()=>{const maxShapesReached=shapesToCreate.length+this.currentPageShapeIds.size>2e3;maxShapesReached&&alertMaxShapes(this);const newShapes=maxShapesReached?shapesToCreate.slice(0,2e3-this.currentPageShapeIds.size):shapesToCreate,ids2=newShapes.map((s=>s.id));if(this.createShapes(newShapes),this.setSelectedShapes(ids2),void 0!==offset){const{viewportPageBounds,selectionPageBounds}=this;selectionPageBounds&&!viewportPageBounds.contains(selectionPageBounds)&&this.centerOnPoint(selectionPageBounds.center,{duration:ANIMATION_MEDIUM_MS})}})),this}moveShapesToPage(shapes,pageId){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(0===ids.length)return this;if(this.instanceState.isReadonly)return this;const{currentPageId}=this;if(pageId===currentPageId)return this;if(!this.store.has(pageId))return this;const content=this.getContentFromCurrentPage(ids);if(!content)return this;if(this.getPageShapeIds(pageId).size+content.shapes.length>2e3)return alertMaxShapes(this,pageId),this;const fromPageZ=this.camera.z;return this.history.batch((()=>{this.deleteShapes(ids),this.setCurrentPage(pageId),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(content,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.camera,z:fromPageZ}),this.centerOnPoint(this.selectionRotatedPageBounds.center)})),this}toggleLock(shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly||0===ids.length)return this;let allLocked=!0,allUnlocked=!0;const shapesToToggle=[];for(const id of ids){const shape=this.getShape(id);shape&&(shapesToToggle.push(shape),shape.isLocked?allUnlocked=!1:allLocked=!1)}return this.batch((()=>{allUnlocked?(this.updateShapes(shapesToToggle.map((shape=>({id:shape.id,type:shape.type,isLocked:!0})))),this.setSelectedShapes([])):allLocked?this.updateShapes(shapesToToggle.map((shape=>({id:shape.id,type:shape.type,isLocked:!1})))):this.updateShapes(shapesToToggle.map((shape=>({id:shape.id,type:shape.type,isLocked:!0}))))})),this}sendToBack(shapes){const changes=getReorderingShapesChanges(this,"toBack","string"==typeof shapes[0]?shapes:shapes.map((s=>s.id)));return changes&&this.updateShapes(changes),this}sendBackward(shapes){const changes=getReorderingShapesChanges(this,"backward","string"==typeof shapes[0]?shapes:shapes.map((s=>s.id)));return changes&&this.updateShapes(changes),this}bringForward(shapes){const changes=getReorderingShapesChanges(this,"forward","string"==typeof shapes[0]?shapes:shapes.map((s=>s.id)));return changes&&this.updateShapes(changes),this}bringToFront(shapes){const changes=getReorderingShapesChanges(this,"toFront","string"==typeof shapes[0]?shapes:shapes.map((s=>s.id)));return changes&&this.updateShapes(changes),this}flipShapes(shapes,operation){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;let shapesToFlip=compact(ids.map((id=>this.getShape(id))));if(!shapesToFlip.length)return this;shapesToFlip=compact(shapesToFlip.map((shape=>this.isShapeOfType(shape,"group")?this.getSortedChildIdsForParent(shape.id).map((id=>this.getShape(id))):shape)).flat());const scaleOriginPage=Box2d_Box2d.Common(compact(shapesToFlip.map((id=>this.getShapePageBounds(id))))).center;return this.batch((()=>{for(const shape of shapesToFlip){const bounds=this.getShapeGeometry(shape).bounds,initialPageTransform=this.getShapePageTransform(shape.id);initialPageTransform&&this.resizeShape(shape.id,{x:"horizontal"===operation?-1:1,y:"vertical"===operation?-1:1},{initialBounds:bounds,initialPageTransform,initialShape:shape,mode:"scale_shape",scaleOrigin:scaleOriginPage,scaleAxisRotation:0})}})),this}stackShapes(shapes,operation,gap){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;const shapesToStack=compact(ids.map((id=>this.getShape(id))).filter((shape=>!!shape&&(!this.isShapeOfType(shape,"arrow")||"binding"!==shape.props.start.type&&"binding"!==shape.props.end.type)))),len=shapesToStack.length;if(0===gap&&len<3||len<2)return this;const pageBounds=Object.fromEntries(shapesToStack.map((shape=>[shape.id,this.getShapePageBounds(shape)])));let val,min,max,dim,shapeGap;if("horizontal"===operation?(val="x",min="minX",max="maxX",dim="width"):(val="y",min="minY",max="maxY",dim="height"),0===gap){const gaps=[];shapesToStack.sort(((a,b)=>pageBounds[a.id][min]-pageBounds[b.id][min]));for(let i=0;i<len-1;i++){const shape=shapesToStack[i],nextShape=shapesToStack[i+1],bounds=pageBounds[shape.id],gap2=pageBounds[nextShape.id][min]-bounds[max],current=gaps.find((g=>g.gap===gap2));current?current.count++:gaps.push({gap:gap2,count:1})}let maxCount=0;gaps.forEach((g=>{g.count>maxCount&&(maxCount=g.count,shapeGap=g.gap)})),1===maxCount&&(shapeGap=Math.max(0,gaps.reduce(((a,c)=>a+c.gap*c.count),0)/(len-1)))}else shapeGap=gap;const changes=[];let v=pageBounds[shapesToStack[0].id][max];return shapesToStack.forEach(((shape,i)=>{if(0===i)return;const delta={x:0,y:0};delta[val]=v+shapeGap-pageBounds[shape.id][val];const parent=this.getShapeParent(shape),localDelta=parent?Vec2d_Vec2d.Rot(delta,-this.getShapePageTransform(parent).decompose().rotation):delta,translateStartChanges=this.getShapeUtil(shape).onTranslateStart?.(shape);changes.push(translateStartChanges?{...translateStartChanges,[val]:shape[val]+localDelta[val]}:{id:shape.id,type:shape.type,[val]:shape[val]+localDelta[val]}),v+=pageBounds[shape.id][dim]+shapeGap})),this.updateShapes(changes),this}packShapes(shapes,gap){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;if(ids.length<2)return this;const shapesToPack=compact(ids.map((id=>this.getShape(id))).filter((shape2=>!!shape2&&(!this.isShapeOfType(shape2,"arrow")||"binding"!==shape2.props.start.type&&"binding"!==shape2.props.end.type)))),shapePageBounds={},nextShapePageBounds={};let shape,bounds,area=0;for(let i=0;i<shapesToPack.length;i++)shape=shapesToPack[i],bounds=this.getShapePageBounds(shape),shapePageBounds[shape.id]=bounds,nextShapePageBounds[shape.id]=bounds.clone(),area+=bounds.width*bounds.height;const commonBounds=Box2d_Box2d.Common(compact(Object.values(shapePageBounds))),maxWidth=commonBounds.width;shapesToPack.sort(((a,b)=>shapePageBounds[b.id].height-shapePageBounds[a.id].height));const startWidth=Math.max(Math.ceil(Math.sqrt(area/.95)),maxWidth),spaces=[new Box2d_Box2d(commonBounds.x,commonBounds.y,startWidth,1/0)];let space,last,width=0,height=0;for(let i=0;i<shapesToPack.length;i++){shape=shapesToPack[i],bounds=nextShapePageBounds[shape.id];for(let i2=spaces.length-1;i2>=0;i2--)if(space=spaces[i2],!(bounds.width>space.width||bounds.height>space.height)){bounds.x=space.x,bounds.y=space.y,height=Math.max(height,bounds.maxY),width=Math.max(width,bounds.maxX),bounds.width===space.width&&bounds.height===space.height?(last=spaces.pop(),i2<spaces.length&&(spaces[i2]=last)):bounds.height===space.height?(space.x+=bounds.width+gap,space.width-=bounds.width+gap):bounds.width===space.width?(space.y+=bounds.height+gap,space.height-=bounds.height+gap):(spaces.push(new Box2d_Box2d(space.x+(bounds.width+gap),space.y,space.width-(bounds.width+gap),bounds.height)),space.y+=bounds.height+gap,space.height-=bounds.height+gap);break}}const commonAfter=Box2d_Box2d.Common(Object.values(nextShapePageBounds)),centerDelta=Vec2d_Vec2d.Sub(commonBounds.center,commonAfter.center);let nextBounds;const changes=[];for(let i=0;i<shapesToPack.length;i++){shape=shapesToPack[i],bounds=shapePageBounds[shape.id],nextBounds=nextShapePageBounds[shape.id];const delta=Vec2d_Vec2d.Sub(nextBounds.point,bounds.point).add(centerDelta),parentTransform=this.getShapeParentTransform(shape);parentTransform&&delta.rot(-parentTransform.rotation());const change={id:shape.id,type:shape.type,x:shape.x+delta.x,y:shape.y+delta.y},translateStartChange=this.getShapeUtil(shape).onTranslateStart?.({...shape,...change});translateStartChange?changes.push({...change,...translateStartChange}):changes.push(change)}return changes.length&&this.updateShapes(changes),this}alignShapes(shapes,operation){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;if(ids.length<2)return this;const shapesToAlign=compact(ids.map((id=>this.getShape(id)))),shapePageBounds=Object.fromEntries(shapesToAlign.map((shape=>[shape.id,this.getShapePageBounds(shape)]))),commonBounds=Box2d_Box2d.Common(compact(Object.values(shapePageBounds))),changes=[];return shapesToAlign.forEach((shape=>{const pageBounds=shapePageBounds[shape.id];if(!pageBounds)return;const delta={x:0,y:0};switch(operation){case"top":delta.y=commonBounds.minY-pageBounds.minY;break;case"center-vertical":delta.y=commonBounds.midY-pageBounds.minY-pageBounds.height/2;break;case"bottom":delta.y=commonBounds.maxY-pageBounds.minY-pageBounds.height;break;case"left":delta.x=commonBounds.minX-pageBounds.minX;break;case"center-horizontal":delta.x=commonBounds.midX-pageBounds.minX-pageBounds.width/2;break;case"right":delta.x=commonBounds.maxX-pageBounds.minX-pageBounds.width}const parent=this.getShapeParent(shape),localDelta=parent?Vec2d_Vec2d.Rot(delta,-this.getShapePageTransform(parent).decompose().rotation):delta,translateChanges=this.getShapeUtil(shape).onTranslateStart?.(shape);changes.push(translateChanges?{...translateChanges,x:shape.x+localDelta.x,y:shape.y+localDelta.y}:{id:shape.id,type:shape.type,x:shape.x+localDelta.x,y:shape.y+localDelta.y})})),this.updateShapes(changes),this}distributeShapes(shapes,operation){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;if(ids.length<3)return this;const len=ids.length,shapesToDistribute=compact(ids.map((id=>this.getShape(id)))),pageBounds=Object.fromEntries(shapesToDistribute.map((shape=>[shape.id,this.getShapePageBounds(shape)])));let val,min,max,mid,dim;"horizontal"===operation?(val="x",min="minX",max="maxX",mid="midX",dim="width"):(val="y",min="minY",max="maxY",mid="midY",dim="height");const changes=[],first=shapesToDistribute.sort(((a,b)=>pageBounds[a.id][min]-pageBounds[b.id][min]))[0],last=shapesToDistribute.sort(((a,b)=>pageBounds[b.id][max]-pageBounds[a.id][max]))[0],midFirst=pageBounds[first.id][mid],step=(pageBounds[last.id][mid]-midFirst)/(len-1),v=midFirst+step;return shapesToDistribute.filter((shape=>shape!==first&&shape!==last)).sort(((a,b)=>pageBounds[a.id][mid]-pageBounds[b.id][mid])).forEach(((shape,i)=>{const delta={x:0,y:0};delta[val]=v+step*i-pageBounds[shape.id][dim]/2-pageBounds[shape.id][val];const parent=this.getShapeParent(shape),localDelta=parent?Vec2d_Vec2d.Rot(delta,-this.getShapePageTransform(parent).rotation()):delta,translateStartChanges=this.getShapeUtil(shape).onTranslateStart?.(shape);changes.push(translateStartChanges?{...translateStartChanges,[val]:shape[val]+localDelta[val]}:{id:shape.id,type:shape.type,[val]:shape[val]+localDelta[val]})})),this.updateShapes(changes),this}stretchShapes(shapes,operation){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(this.instanceState.isReadonly)return this;if(ids.length<2)return this;const shapesToStretch=compact(ids.map((id=>this.getShape(id)))),shapeBounds=Object.fromEntries(ids.map((id=>[id,this.getShapeGeometry(id).bounds]))),shapePageBounds=Object.fromEntries(ids.map((id=>[id,this.getShapePageBounds(id)]))),commonBounds=Box2d_Box2d.Common(compact(Object.values(shapePageBounds)));switch(operation){case"vertical":this.batch((()=>{for(const shape of shapesToStretch){if(this.getShapePageTransform(shape).rotation()%utils_PI2)continue;const bounds=shapeBounds[shape.id],pageBounds=shapePageBounds[shape.id],localOffset=new Vec2d_Vec2d(0,commonBounds.minY-pageBounds.minY),parentTransform=this.getShapeParentTransform(shape);parentTransform&&localOffset.rot(-parentTransform.rotation());const{x,y}=Vec2d_Vec2d.Add(localOffset,shape);this.updateShapes([{id:shape.id,type:shape.type,x,y}],{squashing:!0});const scale=new Vec2d_Vec2d(1,commonBounds.height/pageBounds.height);this.resizeShape(shape.id,scale,{initialBounds:bounds,scaleOrigin:new Vec2d_Vec2d(pageBounds.center.x,commonBounds.minY),scaleAxisRotation:0})}}));break;case"horizontal":this.batch((()=>{for(const shape of shapesToStretch){const bounds=shapeBounds[shape.id],pageBounds=shapePageBounds[shape.id];if(this.getShapePageTransform(shape).rotation()%utils_PI2)continue;const localOffset=new Vec2d_Vec2d(commonBounds.minX-pageBounds.minX,0),parentTransform=this.getShapeParentTransform(shape);parentTransform&&localOffset.rot(-parentTransform.rotation());const{x,y}=Vec2d_Vec2d.Add(localOffset,shape);this.updateShapes([{id:shape.id,type:shape.type,x,y}],{squashing:!0});const scale=new Vec2d_Vec2d(commonBounds.width/pageBounds.width,1);this.resizeShape(shape.id,scale,{initialBounds:bounds,scaleOrigin:new Vec2d_Vec2d(commonBounds.minX,pageBounds.center.y),scaleAxisRotation:0})}}))}return this}resizeShape(shape,scale,options={}){const id="string"==typeof shape?shape:shape.id;if(this.instanceState.isReadonly)return this;Number.isFinite(scale.x)||(scale=new Vec2d_Vec2d(1,scale.y)),Number.isFinite(scale.y)||(scale=new Vec2d_Vec2d(scale.x,1));const initialShape=options.initialShape??this.getShape(id);if(!initialShape)return this;const scaleOrigin=options.scaleOrigin??this.getShapePageBounds(id)?.center;if(!scaleOrigin)return this;const pageTransform=options.initialPageTransform?Matrix2d.Cast(options.initialPageTransform):this.getShapePageTransform(id);if(!pageTransform)return this;const pageRotation=pageTransform.rotation();if(null==pageRotation)return this;const scaleAxisRotation=options.scaleAxisRotation??pageRotation,initialBounds=options.initialBounds??this.getShapeGeometry(id).bounds;if(!initialBounds)return this;if(!areAnglesCompatible(pageRotation,scaleAxisRotation))return this._resizeUnalignedShape(id,scale,{...options,initialBounds,scaleOrigin,scaleAxisRotation,initialPageTransform:pageTransform,initialShape});const util=this.getShapeUtil(initialShape);if(util.isAspectRatioLocked(initialShape)&&(scale=Math.abs(scale.x)>Math.abs(scale.y)?new Vec2d_Vec2d(scale.x,Math.sign(scale.y)*Math.abs(scale.x)):new Vec2d_Vec2d(Math.sign(scale.x)*Math.abs(scale.y),scale.y)),util.onResize&&util.canResize(initialShape)){const newPagePoint=this._scalePagePoint(Matrix2d.applyToPoint(pageTransform,new Vec2d_Vec2d(0,0)),scaleOrigin,scale,scaleAxisRotation),newLocalPoint=this.getPointInParentSpace(initialShape.id,newPagePoint),myScale=new Vec2d_Vec2d(scale.x,scale.y),areWidthAndHeightAlignedWithCorrectAxis=approximately((pageRotation-scaleAxisRotation)%Math.PI,0);myScale.x=areWidthAndHeightAlignedWithCorrectAxis?scale.x:scale.y,myScale.y=areWidthAndHeightAlignedWithCorrectAxis?scale.y:scale.x;const initialPagePoint=Matrix2d.applyToPoint(pageTransform,new Vec2d_Vec2d),{x,y}=this.getPointInParentSpace(initialShape.id,initialPagePoint);this.updateShapes([{id,type:initialShape.type,x:newLocalPoint.x,y:newLocalPoint.y,...util.onResize({...initialShape,x,y},{newPoint:newLocalPoint,handle:options.dragHandle??"bottom_right",mode:options.mode??"scale_shape",scaleX:myScale.x,scaleY:myScale.y,initialBounds,initialShape})}],{squashing:!0})}else{const initialPageCenter=Matrix2d.applyToPoint(pageTransform,initialBounds.center),newPageCenter=this._scalePagePoint(initialPageCenter,scaleOrigin,scale,scaleAxisRotation),initialPageCenterInParentSpace=this.getPointInParentSpace(initialShape.id,initialPageCenter),newPageCenterInParentSpace=this.getPointInParentSpace(initialShape.id,newPageCenter),delta=Vec2d_Vec2d.Sub(newPageCenterInParentSpace,initialPageCenterInParentSpace);this.updateShapes([{id,type:initialShape.type,x:initialShape.x+delta.x,y:initialShape.y+delta.y}],{squashing:!0})}return this}_scalePagePoint(point,scaleOrigin,scale,scaleAxisRotation){const relativePoint=Vec2d_Vec2d.RotWith(point,scaleOrigin,-scaleAxisRotation).sub(scaleOrigin),newRelativePagePoint=Vec2d_Vec2d.MulV(relativePoint,scale);return Vec2d_Vec2d.Add(newRelativePagePoint,scaleOrigin).rotWith(scaleOrigin,scaleAxisRotation)}_resizeUnalignedShape(id,scale,options){const{type}=options.initialShape,shapeScale=new Vec2d_Vec2d(scale.x,scale.y);if(Math.abs(scale.x)>Math.abs(scale.y)?shapeScale.x=Math.sign(scale.x)*Math.abs(scale.y):shapeScale.y=Math.sign(scale.y)*Math.abs(scale.x),this.resizeShape(id,shapeScale,{initialShape:options.initialShape,initialBounds:options.initialBounds}),Math.sign(scale.x)*Math.sign(scale.y)<0){let{rotation}=Matrix2d.Decompose(options.initialPageTransform);rotation-=2*rotation,this.updateShapes([{id,type,rotation}],{squashing:!0})}const preScaleShapePageCenter=Matrix2d.applyToPoint(options.initialPageTransform,options.initialBounds.center),postScaleShapePageCenter=this._scalePagePoint(preScaleShapePageCenter,options.scaleOrigin,scale,options.scaleAxisRotation),pageBounds=this.getShapePageBounds(id),pageTransform=this.getShapePageTransform(id),currentPageCenter=pageBounds.center,shapePageTransformOrigin=pageTransform.point();if(!currentPageCenter||!shapePageTransformOrigin)return this;const pageDelta=Vec2d_Vec2d.Sub(postScaleShapePageCenter,currentPageCenter),postScaleShapePagePoint=Vec2d_Vec2d.Add(shapePageTransformOrigin,pageDelta),{x,y}=this.getPointInParentSpace(id,postScaleShapePagePoint);return this.updateShapes([{id,type,x,y}],{squashing:!0}),this}getInitialMetaForShape(_shape){return{}}createShape(shape){return this._createShapes([shape]),this}createShapes(shapes){if(!Array.isArray(shapes))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");return this._createShapes(shapes),this}_createShapes=this.history.createCommand("createShapes",(partials=>{if(this.instanceState.isReadonly)return null;if(partials.length<=0)return null;const{currentPageShapeIds}=this;if(!(partials.length+currentPageShapeIds.size>2e3))return 0===partials.length?null:{data:{currentPageId:this.currentPageId,partials:partials.map((p=>p.id?p:{...p,id:createShapeId()}))}};alertMaxShapes(this)}),{do:({partials})=>{const{focusedGroupId}=this,{currentPageShapesSorted}=this;partials=partials.map((partial=>{if(!partial.parentId||!this.store.has(partial.parentId)&&!partials.some((p=>p.id===partial.parentId))){let parentId=this.focusedGroupId;for(let i=currentPageShapesSorted.length-1;i>=0;i--){const parent=currentPageShapesSorted[i];if(this.getShapeUtil(parent).canReceiveNewChildrenOfType(parent,partial.type)&&this.isPointInShape(parent,{x:partial.x??0,y:partial.y??0},{margin:0,hitInside:!0})){parentId=parent.id;break}}const prevParentId=partial.parentId;if(parentId===partial.id&&(parentId=focusedGroupId),parentId!==prevParentId&&((partial={...partial}).parentId=parentId,isShapeId(parentId))){const point=this.getPointInShapeSpace(this.getShape(parentId),{x:partial.x??0,y:partial.y??0});partial.x=point.x,partial.y=point.y,partial.rotation=-this.getShapePageTransform(parentId).rotation()+(partial.rotation??0)}}return partial}));const parentIndices=new Map,shapeRecordsToCreate=[];for(const partial of partials){const util=this.getShapeUtil(partial);let index=partial.index;if(!index){const parentId=partial.parentId??focusedGroupId;parentIndices.has(parentId)||parentIndices.set(parentId,this.getHighestIndexForParent(parentId)),index=parentIndices.get(parentId),parentIndices.set(parentId,getIndexAbove(index))}const initialProps=util.getDefaultProps();for(const[style,propKey]of this.styleProps[partial.type])initialProps[propKey]=this.getStyleForNextShape(style);let shapeRecordToCreate=this.store.schema.types.shape.create({...partial,index,opacity:partial.opacity??this.instanceState.opacityForNextShape,parentId:partial.parentId??focusedGroupId,props:"props"in partial?{...initialProps,...partial.props}:initialProps});if(void 0===shapeRecordToCreate.index)throw Error("no index!");const next=this.getShapeUtil(shapeRecordToCreate).onBeforeCreate?.(shapeRecordToCreate);next&&(shapeRecordToCreate=next),shapeRecordsToCreate.push(shapeRecordToCreate)}shapeRecordsToCreate.forEach((shape=>{shape.meta={...this.getInitialMetaForShape(shape),...shape.meta}})),this.store.put(shapeRecordsToCreate)},undo:({partials})=>{this.store.remove(partials.map((p=>p.id)))}});animatingShapes=new Map;animateShape(partial,animationOptions){return this.animateShapes([partial],animationOptions)}animateShapes(partials,animationOptions={}){const{duration=500,easing=EASINGS.linear}=animationOptions,animationId=uniqueId();let t,remaining=duration;const animations=[];let value;partials.forEach((partial=>{if(!partial)return;const result={partial,values:[]},shape=this.getShape(partial.id);if(shape){for(const key of["x","y","rotation"])void 0!==partial[key]&&shape[key]!==partial[key]&&result.values.push({prop:key,from:shape[key],to:partial[key]});animations.push(result),this.animatingShapes.set(shape.id,animationId)}}));const handleTick=elapsed=>{if(remaining-=elapsed,remaining<0){const{animatingShapes:animatingShapes2}=this,partialsToUpdate=partials.filter((p=>p&&animatingShapes2.get(p.id)===animationId));return partialsToUpdate.length&&this.updateShapes(partialsToUpdate,{squashing:!1}),void this.removeListener("tick",handleTick)}t=easing(1-remaining/duration);const{animatingShapes}=this;try{const tPartials=[];for(let i=0;i<animations.length;i++)value=animations[i],animatingShapes.get(value.partial.id)===animationId&&tPartials.push({id:value.partial.id,type:value.partial.type,...value.values.reduce(((acc,{prop,from,to})=>(acc[prop]=from+(to-from)*t,acc)),{})});this._updateShapes(tPartials,{squashing:!0})}catch(e){}};return this.addListener("tick",handleTick),this}groupShapes(shapes,groupId=createShapeId()){if(!Array.isArray(shapes))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.instanceState.isReadonly)return this;const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(ids.length<=1)return this;const shapesToGroup=compact(this._getUnlockedShapeIds(ids).map((id=>this.getShape(id)))),sortedShapeIds=shapesToGroup.sort(reordering_sortByIndex).map((s=>s.id)),pageBounds=Box2d_Box2d.Common(compact(shapesToGroup.map((id=>this.getShapePageBounds(id))))),{x,y}=pageBounds.point,parentId=this.findCommonAncestor(shapesToGroup)??this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();const shapesWithRootParent=shapesToGroup.filter((shape=>shape.parentId===parentId)).sort(reordering_sortByIndex),highestIndex=shapesWithRootParent[shapesWithRootParent.length-1]?.index;return this.batch((()=>{this.createShapes([{id:groupId,type:"group",parentId,index:highestIndex,x,y,opacity:1,props:{}}]),this.reparentShapes(sortedShapeIds,groupId),this.select(groupId)})),this}ungroupShapes(_ids){const ids="string"==typeof _ids[0]?_ids:_ids.map((s=>s.id));if(this.instanceState.isReadonly)return this;if(0===ids.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();const idsToSelect=new Set,shapes=compact(ids.map((id=>this.getShape(id)))),groups=[];return shapes.forEach((shape=>{this.isShapeOfType(shape,"group")?groups.push(shape):idsToSelect.add(shape.id)})),0===groups.length||this.batch((()=>{let group;for(let i=0,n=groups.length;i<n;i++){group=groups[i];const childIds=this.getSortedChildIdsForParent(group.id);for(let j=0,n2=childIds.length;j<n2;j++)idsToSelect.add(childIds[j]);this.reparentShapes(childIds,group.parentId,group.index)}this.deleteShapes(groups.map((group2=>group2.id))),this.select(...idsToSelect)})),this}updateShape(partial,historyOptions){return this.updateShapes([partial],historyOptions),this}updateShapes(partials,historyOptions){let compactedPartials=compact(partials);return this.animatingShapes.size>0&&compactedPartials.forEach((p=>this.animatingShapes.delete(p.id))),compactedPartials=compactedPartials.filter((p=>{const shape=this.getShape(p.id);return!!shape&&!(this.isShapeOrAncestorLocked(shape)&&!Object.hasOwn(p,"isLocked"))})),this._updateShapes(compactedPartials,historyOptions),this}_updateShapes=this.history.createCommand("updateShapes",((_partials,historyOptions)=>{if(this.instanceState.isReadonly)return null;const partials=compact(_partials),snapshots=Object.fromEntries(compact(partials.map((({id})=>this.getShape(id)))).map((shape=>[shape.id,shape])));if(partials.length<=0)return null;const updated=compact(partials.map((partial=>{const prev=snapshots[partial.id];if(!prev)return null;let newRecord=null;for(const[k,v]of Object.entries(partial))if(void 0!==v)switch(k){case"id":case"type":continue;default:if(v!==prev[k])if(newRecord||(newRecord={...prev}),"props"===k){const nextProps={...prev.props};for(const[propKey,propValue]of Object.entries(v))void 0!==propValue&&(nextProps[propKey]=propValue);newRecord.props=nextProps}else if("meta"===k){const nextMeta={...prev.meta};for(const[metaKey,metaValue]of Object.entries(v))void 0!==metaValue&&(nextMeta[metaKey]=metaValue);newRecord.meta=nextMeta}else newRecord[k]=v}return newRecord??prev}))),updates=Object.fromEntries(updated.map((shape=>[shape.id,shape])));return{data:{snapshots,updates},...historyOptions}}),{do:({updates})=>{const result=Object.values(updates);for(let i=0;i<result.length;i++){const shape=result[i],current=this.store.get(shape.id);if(!current)continue;const next=this.getShapeUtil(shape).onBeforeUpdate?.(current,shape);next&&(result[i]=next)}this.store.put(result)},undo:({snapshots})=>{this.store.put(Object.values(snapshots))},squash:(prevData,nextData)=>({snapshots:{...nextData.snapshots,...prevData.snapshots},updates:{...prevData.updates,...nextData.updates}})});_getUnlockedShapeIds(ids){return ids.filter((id=>!this.getShape(id)?.isLocked))}deleteShapes(_ids){if(!Array.isArray(_ids))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");return this._deleteShapes(this._getUnlockedShapeIds("string"==typeof _ids[0]?_ids:_ids.map((s=>s.id)))),this}deleteShape(_id){return this.deleteShapes(["string"==typeof _id?_id:_id.id]),this}_deleteShapes=this.history.createCommand("delete_shapes",(ids=>{if(this.instanceState.isReadonly)return null;if(0===ids.length)return null;const prevSelectedShapeIds=[...this.currentPageState.selectedShapeIds],allIds=new Set(ids);for(const id of ids)this.visitDescendants(id,(childId=>{allIds.add(childId)}));const deletedIds=[...allIds],arrowBindings=this._arrowBindingsIndex.value,snapshots=compact(deletedIds.flatMap((id=>{const shape=this.getShape(id),bindings=arrowBindings[id];return bindings&&bindings.length>0?bindings.map((({arrowId})=>this.getShape(arrowId))).concat(shape):shape}))),postSelectedShapeIds=prevSelectedShapeIds.filter((id=>!allIds.has(id)));return{data:{deletedIds,snapshots,prevSelectedShapeIds,postSelectedShapeIds}}}),{do:({deletedIds,postSelectedShapeIds})=>{this.store.remove(deletedIds),this.store.update(this.currentPageState.id,(state=>({...state,selectedShapeIds:postSelectedShapeIds})))},undo:({snapshots,prevSelectedShapeIds})=>{this.store.put(snapshots),this.store.update(this.currentPageState.id,(state=>({...state,selectedShapeIds:prevSelectedShapeIds})))}});_extractSharedStyles(shape,sharedStyleMap){if(this.isShapeOfType(shape,"group")){const childIds=this._parentIdsToChildIds.value[shape.id];if(!childIds)return;for(let i=0,n=childIds.length;i<n;i++)this._extractSharedStyles(this.getShape(childIds[i]),sharedStyleMap)}else for(const[style,propKey]of this.styleProps[shape.type])sharedStyleMap.applyValue(style,getOwnProperty(shape.props,propKey))}_selectionSharedStyles=Computed_computed("_selectionSharedStyles",(()=>{const{selectedShapes}=this,sharedStyles=new SharedStyleMap;for(const selectedShape of selectedShapes)this._extractSharedStyles(selectedShape,sharedStyles);return sharedStyles}));getStyleForNextShape(style){const value=this.instanceState.stylesForNextShape[style.id];return void 0===value?style.defaultValue:value}getShapeStyleIfExists(shape,style){const styleKey=this.styleProps[shape.type].get(style);if(void 0!==styleKey)return getOwnProperty(shape.props,styleKey)}get sharedStyles(){if(this.isIn("select")&&this.selectedShapeIds.length>0)return this._selectionSharedStyles.value;const currentTool=this.root.current.value,styles=new SharedStyleMap;if(currentTool.shapeType)for(const style of this.styleProps[currentTool.shapeType].keys())styles.applyValue(style,this.getStyleForNextShape(style));return styles}get sharedOpacity(){if(this.isIn("select")&&this.selectedShapeIds.length>0){const shapesToCheck=[],addShape=shapeId=>{const shape=this.getShape(shapeId);if(shape)if(this.isShapeOfType(shape,"group"))for(const childId of this.getSortedChildIdsForParent(shape.id))addShape(childId);else shapesToCheck.push(shape)};for(const shapeId of this.selectedShapeIds)addShape(shapeId);let opacity=null;for(const shape of shapesToCheck)if(null===opacity)opacity=shape.opacity;else if(opacity!==shape.opacity)return{type:"mixed"};if(null!==opacity)return{type:"shared",value:opacity}}return{type:"shared",value:this.instanceState.opacityForNextShape}}setOpacityForNextShapes(opacity,historyOptions){return this.updateInstanceState({opacityForNextShape:opacity},historyOptions),this}setOpacityForSelectedShapes(opacity,historyOptions){const{selectedShapes}=this;if(selectedShapes.length>0){const shapesToUpdate=[],addShapeById=shape=>{if(this.isShapeOfType(shape,"group")){const childIds=this.getSortedChildIdsForParent(shape);for(const childId of childIds)addShapeById(this.getShape(childId))}else shapesToUpdate.push(shape)};for(const id of selectedShapes)addShapeById(id);this.updateShapes(shapesToUpdate.map((shape=>({id:shape.id,type:shape.type,opacity}))),historyOptions)}return this}setStyleForNextShapes(style,value,historyOptions){const{instanceState:{stylesForNextShape}}=this;return this.updateInstanceState({stylesForNextShape:{...stylesForNextShape,[style.id]:value}},historyOptions),this}setStyleForSelectedShapes(style,value,historyOptions){const{selectedShapes}=this;if(selectedShapes.length>0){const updates=[],addShapeById=shape=>{if(this.isShapeOfType(shape,"group")){const childIds=this.getSortedChildIdsForParent(shape.id);for(const childId of childIds)addShapeById(this.getShape(childId))}else{const util=this.getShapeUtil(shape),stylePropKey=this.styleProps[shape.type].get(style);if(stylePropKey){const shapePartial={id:shape.id,type:shape.type,props:{[stylePropKey]:value}};updates.push({util,originalShape:shape,updatePartial:shapePartial})}}};for(const shape of selectedShapes)addShapeById(shape);this.updateShapes(updates.map((({updatePartial})=>updatePartial)),historyOptions)}return this}externalAssetContentHandlers={file:null,url:null};registerExternalAssetHandler(type,handler){return this.externalAssetContentHandlers[type]=handler,this}async getAssetForExternalContent(info){return await(this.externalAssetContentHandlers[info.type]?.(info))}externalContentHandlers={text:null,files:null,embed:null,"svg-text":null,url:null};registerExternalContentHandler(type,handler){return this.externalContentHandlers[type]=handler,this}async putExternalContent(info){return this.externalContentHandlers[info.type]?.(info)}getContentFromCurrentPage(shapes){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(!ids)return;if(0===ids.length)return;const pageTransforms={};let shapesForContent=dedupe(ids.map((id=>this.getShape(id))).sort(reordering_sortByIndex).flatMap((shape=>{const allShapes=[shape];return this.visitDescendants(shape.id,(descendant=>{allShapes.push(this.getShape(descendant))})),allShapes})));shapesForContent=shapesForContent.map((shape=>{if(pageTransforms[shape.id]=this.getShapePageTransform(shape.id),shape=structuredClone(shape),this.isShapeOfType(shape,"arrow")){const startBindingId="binding"===shape.props.start.type?shape.props.start.boundShapeId:void 0,endBindingId="binding"===shape.props.end.type?shape.props.end.boundShapeId:void 0,info=this.getArrowInfo(shape);if("binding"===shape.props.start.type&&!shapesForContent.some((s=>s.id===startBindingId)))if(info?.isValid){const{x,y}=info.start.point;shape.props.start={type:"point",x,y}}else{const{start}=getArrowTerminalsInArrowSpace(this,shape);shape.props.start={type:"point",x:start.x,y:start.y}}if("binding"===shape.props.end.type&&!shapesForContent.some((s=>s.id===endBindingId)))if(info?.isValid){const{x,y}=info.end.point;shape.props.end={type:"point",x,y}}else{const{end}=getArrowTerminalsInArrowSpace(this,shape);shape.props.end={type:"point",x:end.x,y:end.y}}const infoAfter=getIsArrowStraight(shape)?getStraightArrowInfo(this,shape):getCurvedArrowInfo(this,shape);if(info?.isValid&&infoAfter?.isValid&&!getIsArrowStraight(shape)){const mpA=Vec2d_Vec2d.Med(info.start.handle,info.end.handle),distA=Vec2d_Vec2d.Dist(info.middle,mpA),distB=Vec2d_Vec2d.Dist(infoAfter.middle,mpA);shape.props.bend<0?shape.props.bend+=distB-distA:shape.props.bend-=distB-distA}return shape}return shape}));const rootShapeIds=[];shapesForContent.forEach((shape=>{if(void 0===shapesForContent.find((s=>s.id===shape.parentId))){const pageTransform=this.getShapePageTransform(shape.id),pagePoint=pageTransform.point(),pageRotation=pageTransform.rotation();shape.x=pagePoint.x,shape.y=pagePoint.y,shape.rotation=pageRotation,shape.parentId=this.currentPageId,rootShapeIds.push(shape.id)}}));const assetsSet=new Set;return shapesForContent.forEach((shape=>{"assetId"in shape.props&&null!==shape.props.assetId&&assetsSet.add(shape.props.assetId)})),{shapes:shapesForContent,rootShapeIds,schema:this.store.schema.serialize(),assets:compact(Array.from(assetsSet).map((id=>this.getAsset(id))))}}putContentOntoCurrentPage(content,options={}){if(this.instanceState.isReadonly)return this;if(!content.schema)throw Error("Could not put content:\ncontent is missing a schema.");const{select=!1,preserveIds=!1,preservePosition=!1}=options;let{point}=options;const{currentPageId}=this,{assets,shapes,rootShapeIds}=content,idMap=new Map(shapes.map((shape=>[shape.id,createShapeId()])));let pasteParentId=this.currentPageId,lowestDepth=1/0,lowestAncestors=[];for(const shape of this.selectedShapes){if(0===lowestDepth)break;const isFrame=this.isShapeOfType(shape,"frame"),ancestors=this.getShapeAncestors(shape);isFrame&&ancestors.push(shape);const depth=isFrame?ancestors.length+1:ancestors.length;if(depth<lowestDepth)lowestDepth=depth,lowestAncestors=ancestors,pasteParentId=isFrame?shape.id:shape.parentId;else if(depth===lowestDepth){if(lowestAncestors.length!==ancestors.length)throw Error(`Ancestors: ${lowestAncestors.length} !== ${ancestors.length}`);if(0===lowestAncestors.length){pasteParentId=currentPageId;break}pasteParentId=currentPageId;for(let i=0;i<lowestAncestors.length&&ancestors[i]===lowestAncestors[i];i++)pasteParentId=ancestors[i].id}}let isDuplicating=!1;if(!isPageId(pasteParentId)){const parent=this.getShape(pasteParentId);if(parent)if(this.viewportPageBounds.includes(this.getShapePageBounds(parent))){if(1===rootShapeIds.length){const rootShape=shapes.find((s=>s.id===rootShapeIds[0]));this.isShapeOfType(parent,"frame")&&this.isShapeOfType(rootShape,"frame")&&rootShape.props.w===parent?.props.w&&rootShape.props.h===parent?.props.h&&(isDuplicating=!0)}}else pasteParentId=currentPageId;else pasteParentId=currentPageId}isDuplicating||(isDuplicating=idMap.has(pasteParentId)),isDuplicating&&(pasteParentId=this.getShape(pasteParentId).parentId);let index=this.getHighestIndexForParent(pasteParentId);const rootShapes=[],newShapes=shapes.map((shape=>{let newShape;if(preserveIds)newShape=deepCopy(shape),idMap.set(shape.id,shape.id);else{const id=idMap.get(shape.id);newShape=deepCopy({...shape,id})}if(rootShapeIds.includes(shape.id)&&(newShape.parentId=currentPageId,rootShapes.push(newShape)),idMap.has(newShape.parentId)?newShape.parentId=idMap.get(shape.parentId):(rootShapeIds.push(newShape.id),newShape.index=index,index=getIndexAbove(index)),this.isShapeOfType(newShape,"arrow")){if("binding"===newShape.props.start.type){const mappedId=idMap.get(newShape.props.start.boundShapeId);newShape.props.start=mappedId?{...newShape.props.start,boundShapeId:mappedId}:{type:"point",x:0,y:0}}if("binding"===newShape.props.end.type){const mappedId=idMap.get(newShape.props.end.boundShapeId);newShape.props.end=mappedId?{...newShape.props.end,boundShapeId:mappedId}:{type:"point",x:0,y:0}}}return newShape}));if(newShapes.length+this.currentPageShapeIds.size>2e3)return alertMaxShapes(this),this;let assetsToCreate=[];if(assets){for(let i=0;i<assets.length;i++){const asset=assets[i],result=this.store.schema.migratePersistedRecord(asset,content.schema);if("success"!==result.type)throw Error(`Could not put content:\ncould not migrate content for asset:\n${asset.id}\n${asset.type}\nreason:${result.reason}`);assets[i]=result.value}const assetsToUpdate=[];assetsToCreate=assets.filter((asset=>!this.store.has(asset.id))).map((asset=>("image"!==asset.type&&"video"!==asset.type||(asset.props.src&&asset.props.src?.startsWith("data:image")?(assetsToUpdate.push(structuredClone(asset)),asset.props.src=null):assetsToUpdate.push(structuredClone(asset))),asset))),Promise.allSettled(assetsToUpdate.map((async asset=>{const file=await function dataUrlToFile(url,filename,mimeType){return fetch(url).then((function(res){return res.arrayBuffer()})).then((function(buf){return new File([buf],filename,{type:mimeType})}))}(asset.props.src,asset.props.name,asset.props.mimeType??"image/png"),newAsset=await this.getAssetForExternalContent({type:"file",file});return newAsset?[asset,newAsset]:null}))).then((assets2=>{this.updateAssets(compact(assets2.map((result=>"fulfilled"===result.status&&result.value?{...result.value[1],id:result.value[0].id}:void 0))))}))}for(let i=0;i<newShapes.length;i++){const shape=newShapes[i],result=this.store.schema.migratePersistedRecord(shape,content.schema);if("success"!==result.type)throw Error(`Could not put content:\ncould not migrate content for shape:\n${shape.id}, ${shape.type}\nreason:${result.reason}`);newShapes[i]=result.value}return this.batch((()=>{assetsToCreate.length>0&&this.createAssets(assetsToCreate),this.createShapes(newShapes),select&&this.select(...rootShapes.map((s=>s.id))),pasteParentId!==currentPageId&&this.reparentShapes(rootShapes.map((s=>s.id)),pasteParentId);const newCreatedShapes=newShapes.map((s=>this.getShape(s.id))),bounds=Box2d_Box2d.Common(newCreatedShapes.map((s=>this.getShapePageBounds(s))));if(void 0===point)if(isPageId(pasteParentId)){const{viewportPageBounds}=this;point=preservePosition||viewportPageBounds.includes(Box2d_Box2d.From(bounds))?bounds.center:viewportPageBounds.center}else{const shape=this.getShape(pasteParentId);point=Matrix2d.applyToPoint(this.getShapePageTransform(shape),this.getShapeGeometry(shape).bounds.center)}if(1===rootShapes.length){const onlyRoot=rootShapes[0];if(this.isShapeOfType(onlyRoot,"frame"))for(;this.getShapesAtPoint(point).some((shape=>this.isShapeOfType(shape,"frame")&&shape.props.w===onlyRoot.props.w&&shape.props.h===onlyRoot.props.h));)point.x+=bounds.w+16}const pageCenter=Box2d_Box2d.Common(compact(rootShapes.map((({id})=>this.getShapePageBounds(id))))).center,offset=Vec2d_Vec2d.Sub(point,pageCenter);this.updateShapes(rootShapes.map((({id})=>{const s=this.getShape(id),localRotation=this.getShapeParentTransform(id).decompose().rotation,localDelta=Vec2d_Vec2d.Rot(offset,-localRotation);return{id:s.id,type:s.type,x:s.x+localDelta.x,y:s.y+localDelta.y}})))})),this}async getSvg(shapes,opts={}){const ids="string"==typeof shapes[0]?shapes:shapes.map((s=>s.id));if(0===ids.length)return;if(!window.document)throw Error("No document");const{scale=1,background=!1,padding=SVG_PADDING,preserveAspectRatio=!1}=opts,theme=getDefaultColorTheme({isDarkMode:this.user.isDarkMode}),shapeIdsToInclude=this.getShapeAndDescendantIds(ids),renderingShapes=this.getUnorderedRenderingShapes(!1).filter((({id})=>shapeIdsToInclude.has(id)));let bbox=null;for(const{maskedPageBounds}of renderingShapes)maskedPageBounds&&(bbox?bbox.union(maskedPageBounds):bbox=maskedPageBounds.clone());if(!bbox)return;const singleFrameShapeId=1===ids.length&&this.isShapeOfType(this.getShape(ids[0]),"frame")?ids[0]:null;singleFrameShapeId||bbox.expandBy(padding);const w=bbox.width*scale,h=bbox.height*scale,svg=window.document.createElementNS("http://www.w3.org/2000/svg","svg");preserveAspectRatio&&svg.setAttribute("preserveAspectRatio",preserveAspectRatio),svg.setAttribute("direction","ltr"),svg.setAttribute("width",w+""),svg.setAttribute("height",h+""),svg.setAttribute("viewBox",`${bbox.minX} ${bbox.minY} ${bbox.width} ${bbox.height}`),svg.setAttribute("stroke-linecap","round"),svg.setAttribute("stroke-linejoin","round"),background?singleFrameShapeId?svg.style.setProperty("background",theme.solid):svg.style.setProperty("background-color",theme.background):svg.style.setProperty("background-color","transparent");try{document.body.focus?.()}catch(e){}const defs=window.document.createElementNS("http://www.w3.org/2000/svg","defs");svg.append(defs);const exportDefPromisesById=new Map,exportContext={addExportDef:def=>{if(exportDefPromisesById.has(def.key))return;const promise=(async()=>{const elements=await def.getElement();if(!elements)return;const comment=document.createComment(`def: ${def.key}`);defs.appendChild(comment);for(const element of Array.isArray(elements)?elements:[elements])defs.appendChild(element)})();exportDefPromisesById.set(def.key,promise)}},unorderedShapeElements=(await Promise.all(renderingShapes.map((async({id,opacity,index,backgroundIndex})=>{if(id===singleFrameShapeId)return[];const shape=this.getShape(id);if(this.isShapeOfType(shape,"group"))return[];const util=this.getShapeUtil(shape);let shapeSvgElement=await(util.toSvg?.(shape,exportContext)),backgroundSvgElement=await(util.toBackgroundSvg?.(shape,exportContext));if(shapeSvgElement){const outerElement=document.createElementNS("http://www.w3.org/2000/svg","g");outerElement.appendChild(shapeSvgElement),shapeSvgElement=outerElement}if(backgroundSvgElement){const outerElement=document.createElementNS("http://www.w3.org/2000/svg","g");outerElement.appendChild(backgroundSvgElement),backgroundSvgElement=outerElement}if(!shapeSvgElement&&!backgroundSvgElement){const bounds=this.getShapePageBounds(shape),elm=window.document.createElementNS("http://www.w3.org/2000/svg","rect");elm.setAttribute("width",bounds.width+""),elm.setAttribute("height",bounds.height+""),elm.setAttribute("fill",theme.solid),elm.setAttribute("stroke",theme.grey.pattern),elm.setAttribute("stroke-width","1"),shapeSvgElement=elm}let pageTransform=this.getShapePageTransform(shape).toCssString();"scale"in shape.props&&1!==shape.props.scale&&(pageTransform=`${pageTransform} scale(${shape.props.scale}, ${shape.props.scale})`),shapeSvgElement?.setAttribute("transform",pageTransform),backgroundSvgElement?.setAttribute("transform",pageTransform),shapeSvgElement?.setAttribute("opacity",opacity+""),backgroundSvgElement?.setAttribute("opacity",opacity+"");const pageMask=this.getShapeMask(shape.id);if(pageMask){const clipPathEl=document.createElementNS("http://www.w3.org/2000/svg","clipPath");defs.appendChild(clipPathEl);const id2=uniqueId();clipPathEl.id=id2;const mask=document.createElementNS("http://www.w3.org/2000/svg","path");if(mask.setAttribute("d",`M${pageMask.map((({x,y})=>`${x},${y}`)).join("L")}Z`),clipPathEl.appendChild(mask),shapeSvgElement){const outerElement=document.createElementNS("http://www.w3.org/2000/svg","g");outerElement.setAttribute("clip-path",`url(#${id2})`),outerElement.appendChild(shapeSvgElement),shapeSvgElement=outerElement}if(backgroundSvgElement){const outerElement=document.createElementNS("http://www.w3.org/2000/svg","g");outerElement.setAttribute("clip-path",`url(#${id2})`),outerElement.appendChild(backgroundSvgElement),backgroundSvgElement=outerElement}}const elements=[];return shapeSvgElement&&elements.push({zIndex:index,element:shapeSvgElement}),backgroundSvgElement&&elements.push({zIndex:backgroundIndex,element:backgroundSvgElement}),elements})))).flat();await Promise.all(exportDefPromisesById.values());for(const{element}of unorderedShapeElements.sort(((a,b)=>a.zIndex-b.zIndex)))svg.appendChild(element);return svg}inputs={originPagePoint:new Vec2d_Vec2d,originScreenPoint:new Vec2d_Vec2d,previousPagePoint:new Vec2d_Vec2d,previousScreenPoint:new Vec2d_Vec2d,currentPagePoint:new Vec2d_Vec2d,currentScreenPoint:new Vec2d_Vec2d,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new Vec2d_Vec2d};_updateInputsFromEvent(info){const{previousScreenPoint,previousPagePoint,currentScreenPoint,currentPagePoint}=this.inputs,{screenBounds}=this.store.unsafeGetWithoutCapture(TLInstance_TLINSTANCE_ID),{x:sx,y:sy,z:sz}=info.point,{x:cx,y:cy,z:cz}=this.camera;previousScreenPoint.setTo(currentScreenPoint),previousPagePoint.setTo(currentPagePoint),currentScreenPoint.set(sx,sy),currentPagePoint.set((sx-screenBounds.x)/cz-cx,(sy-screenBounds.y)/cz-cy,sz??.5),this.inputs.isPen="pointer"===info.type&&info.isPen,"pointer_down"===info.name&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:TLPointer_TLPOINTER_ID,typeName:"pointer",x:currentPagePoint.x,y:currentPagePoint.y,lastActivityTimestamp:"pointer"===info.type&&info.pointerId===INTERNAL_POINTER_IDS_CAMERA_MOVE?this.store.get(TLPointer_TLPOINTER_ID)?.lastActivityTimestamp??Date.now():Date.now(),meta:{}}])}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}_clickManager=new ClickManager(this);cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_prevCursor="default";_shiftKeyTimeout=-1;_setShiftKeyTimeout=()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})};_altKeyTimeout=-1;_setAltKeyTimeout=()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})};_ctrlKeyTimeout=-1;_setCtrlKeyTimeout=()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})};_restoreToolId="select";_pinchStart=1;_didPinch=!1;_selectedShapeIdsAtPointerDown=[];capturedPointerId=null;dispatch=info=>{if(this.crashingError)return this;const{inputs}=this,{type}=info;return this.batch((()=>{if("misc"===info.type)return"cancel"!==info.name&&"complete"!==info.name||(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))),void this.root.handleEvent(info);info.shiftKey?(clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,inputs.shiftKey=!0):!info.shiftKey&&inputs.shiftKey&&-1===this._shiftKeyTimeout&&(this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150)),info.altKey?(clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,inputs.altKey=!0):!info.altKey&&inputs.altKey&&-1===this._altKeyTimeout&&(this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150)),info.ctrlKey?(clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,inputs.ctrlKey=!0):!info.ctrlKey&&inputs.ctrlKey&&-1===this._ctrlKeyTimeout&&(this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint,originScreenPoint,currentPagePoint,currentScreenPoint}=inputs;switch(inputs.isPointing||(inputs.isDragging=!1),type){case"pinch":if(!this.instanceState.canMoveCamera)return;switch(this._updateInputsFromEvent(info),info.name){case"pinch_start":if(inputs.isPinching)return;return void(inputs.isEditing||(this._pinchStart=this.camera.z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=this.selectedShapeIds),this._didPinch=!0,inputs.isPinching=!0,this.interrupt()));case"pinch":{if(!inputs.isPinching)return;const{point:{x,y,z=1},delta:{x:dx,y:dy}}=info,{camera:{x:cx,y:cy,z:cz}}=this,zoom=Math.min(MAX_ZOOM,Math.max(.1,z));return void this.setCamera({x:cx+dx/cz-x/cz+x/zoom,y:cy+dy/cz-y/cz+y/zoom,z:zoom})}case"pinch_end":{if(!inputs.isPinching)return this;inputs.isPinching=!1;const{_selectedShapeIdsAtPointerDown}=this;return this.setSelectedShapes(this._selectedShapeIdsAtPointerDown,{squashing:!0}),this._selectedShapeIdsAtPointerDown=[],void(this._didPinch&&(this._didPinch=!1,requestAnimationFrame((()=>{this._didPinch||this.setSelectedShapes(_selectedShapeIdsAtPointerDown,{squashing:!0})}))))}}case"wheel":if(!this.instanceState.canMoveCamera)return;if(this.isMenuOpen);else{if(inputs.ctrlKey){const{x,y}=this.inputs.currentScreenPoint,{x:cx,y:cy,z:cz}=this.camera,zoom=Math.min(MAX_ZOOM,Math.max(.1,cz+(info.delta.z??0)*cz));return void this.setCamera({x:cx+(x/zoom-x)-(x/cz-x),y:cy+(y/zoom-y)-(y/cz-y),z:zoom})}this.pan(info.delta),!inputs.isDragging&&inputs.isPointing&&originPagePoint.dist(currentPagePoint)>(this.instanceState.isCoarsePointer?6:DRAG_DISTANCE)/this.zoomLevel&&(inputs.isDragging=!0)}break;case"pointer":{if(inputs.isPinching)return;this._updateInputsFromEvent(info);const{isPen}=info;switch(info.name){case"pointer_down":if(this._selectedShapeIdsAtPointerDown=this.selectedShapeIds,0===info.button&&(this.capturedPointerId=info.pointerId),inputs.buttons.add(info.button),inputs.isPointing=!0,inputs.isDragging=!1,this.instanceState.isPenMode){if(!isPen)return}else isPen&&this.updateInstanceState({isPenMode:!0});if(5===info.button?(this._restoreToolId=this.currentToolId,this.complete(),this.setCurrentTool("eraser")):1===info.button&&(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0),this.inputs.isPanning)return this.stopCameraAnimation(),this.updateInstanceState({cursor:{type:"grabbing",rotation:0}}),this;originScreenPoint.setTo(currentScreenPoint),originPagePoint.setTo(currentPagePoint);break;case"pointer_move":if(!isPen&&this.instanceState.isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:currentScreenPoint2,previousScreenPoint}=this.inputs;return void this.pan(Vec2d_Vec2d.Sub(currentScreenPoint2,previousScreenPoint))}!inputs.isDragging&&inputs.isPointing&&originPagePoint.dist(currentPagePoint)>(this.instanceState.isCoarsePointer?6:DRAG_DISTANCE)/this.zoomLevel&&(inputs.isDragging=!0);break;case"pointer_up":if(inputs.buttons.delete(info.button),inputs.isPointing=!1,inputs.isDragging=!1,this.isMenuOpen)return;if(!isPen&&this.instanceState.isPenMode)return;this.capturedPointerId===info.pointerId&&(this.capturedPointerId=null,info.button=0),inputs.isPanning?1===info.button?this.inputs.keys.has(" ")?(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:CAMERA_SLIDE_FRICTION}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):(inputs.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:CAMERA_SLIDE_FRICTION}),this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}})):0===info.button&&(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:CAMERA_SLIDE_FRICTION}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):5===info.button&&(this.complete(),this.setCurrentTool(this._restoreToolId))}break}case"keyboard":switch("ShiftRight"===info.key&&(info.key="ShiftLeft"),"AltRight"===info.key&&(info.key="AltLeft"),"ControlRight"===info.code&&(info.code="ControlLeft"),info.name){case"key_down":inputs.keys.add(info.code),info.ctrlKey||"Space"!==info.code||(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0,this.updateInstanceState({cursor:{type:this.inputs.isPointing?"grabbing":"grab",rotation:0}}));break;case"key_up":inputs.keys.delete(info.code),"Space"!==info.code||this.inputs.buttons.has(1)||(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))}}if("pointer"===info.type&&(1===info.button?info.name="middle_click":2===info.button&&(info.name="right_click"),info.isPen===this.instanceState.isPenMode))switch(info.name){case"pointer_down":{const otherEvent=this._clickManager.transformPointerDownEvent(info);if(info.name!==otherEvent.name)return this.root.handleEvent(info),this.emit("event",info),this.root.handleEvent(otherEvent),void this.emit("event",otherEvent);break}case"pointer_up":{const otherEvent=this._clickManager.transformPointerUpEvent(info);if(info.name!==otherEvent.name)return this.root.handleEvent(info),this.emit("event",info),this.root.handleEvent(otherEvent),void this.emit("event",otherEvent);break}case"pointer_move":this._clickManager.handleMove()}this.root.handleEvent(info),this.emit("event",info)})),this}}function alertMaxShapes(editor,pageId=editor.currentPageId){const name=editor.getPage(pageId).name;editor.emit("max-shapes",{name,pageId,count:2e3})}function useIsDarkMode(){const editor=useEditor();return useValue("isDarkMode",(()=>editor.user.isDarkMode),[editor])}Editor_decorateClass([Computed_computed],Editor.prototype,"canUndo",1),Editor_decorateClass([Computed_computed],Editor.prototype,"canRedo",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_arrowBindingsIndex",1),Editor_decorateClass([Computed_computed],Editor.prototype,"arrowInfoCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentTool",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentToolId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"documentSettings",1),Editor_decorateClass([Computed_computed],Editor.prototype,"instanceState",1),Editor_decorateClass([Computed_computed],Editor.prototype,"openMenus",1),Editor_decorateClass([Computed_computed],Editor.prototype,"isMenuOpen",1),Editor_decorateClass([Computed_computed],Editor.prototype,"pageStates",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_pageStates",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentPageState",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_currentPageStateId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"selectedShapeIds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"selectedShapes",1),Editor_decorateClass([Computed_computed],Editor.prototype,"onlySelectedShape",1),Editor_decorateClass([Computed_computed],Editor.prototype,"selectionPageBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"selectionRotation",1),Editor_decorateClass([Computed_computed],Editor.prototype,"selectionRotatedPageBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"focusedGroupId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"focusedGroup",1),Editor_decorateClass([Computed_computed],Editor.prototype,"editingShapeId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"editingShape",1),Editor_decorateClass([Computed_computed],Editor.prototype,"hoveredShapeId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"hoveredShape",1),Editor_decorateClass([Computed_computed],Editor.prototype,"hintingShapeIds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"hintingShapes",1),Editor_decorateClass([Computed_computed],Editor.prototype,"erasingShapeIds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"erasingShapes",1),Editor_decorateClass([Computed_computed],Editor.prototype,"cameraId",1),Editor_decorateClass([Computed_computed],Editor.prototype,"camera",1),Editor_decorateClass([Computed_computed],Editor.prototype,"zoomLevel",1),Editor_decorateClass([Computed_computed],Editor.prototype,"viewportScreenBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"viewportScreenCenter",1),Editor_decorateClass([Computed_computed],Editor.prototype,"viewportPageBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"viewportPageCenter",1),Editor_decorateClass([Computed_computed],Editor.prototype,"cameraState",1),Editor_decorateClass([Computed_computed],Editor.prototype,"renderingShapes",1),Editor_decorateClass([Computed_computed],Editor.prototype,"renderingBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"renderingBoundsExpanded",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_pages",1),Editor_decorateClass([Computed_computed],Editor.prototype,"pages",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_assets",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapeGeometryCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapeOutlineSegmentsCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapeHandlesCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapePageTransformCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapePageBoundsCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapeClipPathCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"_shapeMaskCache",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentPageBounds",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentPageShapes",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentPageShapesSorted",1),Editor_decorateClass([Computed_computed],Editor.prototype,"currentPageRenderingShapesSorted",1),Editor_decorateClass([Computed_computed({isEqual:(a,b)=>a.equals(b)})],Editor.prototype,"sharedStyles",1),Editor_decorateClass([Computed_computed],Editor.prototype,"sharedOpacity",1);const CORNER_SVG="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",EDGE_SVG="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",ROTATE_CORNER_SVG='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function getCursorCss(svg,r,tr,f,color,hotspotX=16,hotspotY=16){const a=utils_PI/180*(-tr-r),s=Math.sin(a),c=Math.cos(a);return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${color};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${1*c-1*s}' dy='${1*s+1*c}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${r+tr} 16 16)${f?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+svg.replaceAll('"',"'")+`</g></svg>") ${hotspotX} ${hotspotY}, pointer`}const CURSORS={none:()=>"none",default:(r,f,c)=>getCursorCss('<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',r,0,f,c,12,8),pointer:(r,f,c)=>getCursorCss('<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',r,0,f,c,14,10),cross:(r,f,c)=>getCursorCss('<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',r,0,f,c),move:(r,f,c)=>getCursorCss('<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',r,0,f,c),grab:(r,f,c)=>getCursorCss('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',r,0,f,c),grabbing:(r,f,c)=>getCursorCss("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",r,0,f,c),text:(r,f,c)=>getCursorCss('<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',r,0,f,c,4,10),"ew-resize":(r,f,c)=>getCursorCss(EDGE_SVG,r,0,f,c),"ns-resize":(r,f,c)=>getCursorCss(EDGE_SVG,r,90,f,c),"nesw-resize":(r,f,c)=>getCursorCss(CORNER_SVG,r,0,f,c),"nwse-resize":(r,f,c)=>getCursorCss(CORNER_SVG,r,90,f,c),"nwse-rotate":(r,f,c)=>getCursorCss(ROTATE_CORNER_SVG,r,0,f,c),"nesw-rotate":(r,f,c)=>getCursorCss(ROTATE_CORNER_SVG,r,90,f,c),"senw-rotate":(r,f,c)=>getCursorCss(ROTATE_CORNER_SVG,r,180,f,c),"swne-rotate":(r,f,c)=>getCursorCss(ROTATE_CORNER_SVG,r,270,f,c),"zoom-in":(r,f,c)=>getCursorCss('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',r,0,f,c),"zoom-out":(r,f,c)=>getCursorCss('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',r,0,f,c)};function getCursor(cursor,rotation=0,color="black"){return CURSORS[cursor](function radiansToDegrees(r){return 180*r/utils_PI}(rotation),!1,color)}const STATIC_CURSORS=["default","pointer","cross","move","grab","grabbing","text"];const tabIdKey="TLDRAW_TAB_ID_v2",TLSessionStateSnapshot_window=globalThis.window;const TAB_ID=TLSessionStateSnapshot_window?.[tabIdKey]??TLSessionStateSnapshot_window?.sessionStorage[tabIdKey]??"TLDRAW_INSTANCE_STATE_V1_"+uniqueId();TLSessionStateSnapshot_window&&(TLSessionStateSnapshot_window[tabIdKey]=TAB_ID,!function iOS(){return!!TLSessionStateSnapshot_window&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(TLSessionStateSnapshot_window.navigator.platform)||TLSessionStateSnapshot_window.navigator.userAgent.includes("Mac")&&"ontouchend"in document)}()?delete TLSessionStateSnapshot_window.sessionStorage[tabIdKey]:TLSessionStateSnapshot_window.sessionStorage[tabIdKey]=TAB_ID),TLSessionStateSnapshot_window?.addEventListener("beforeunload",(()=>{TLSessionStateSnapshot_window.sessionStorage[tabIdKey]=TAB_ID}));const CURRENT_SESSION_STATE_SNAPSHOT_VERSION=0,sessionStateSnapshotValidator=object({version:number,currentPageId:pageIdValidator,isFocusMode:validation_boolean,exportBackground:validation_boolean,isDebugMode:validation_boolean,isToolLocked:validation_boolean,isGridMode:validation_boolean,pageStates:arrayOf(object({pageId:pageIdValidator,camera:object({x:number,y:number,z:number}),selectedShapeIds:arrayOf(shapeIdValidator),focusedGroupId:shapeIdValidator.nullable()}))}),sessionStateSnapshotMigrations=defineMigrations({currentVersion:CURRENT_SESSION_STATE_SNAPSHOT_VERSION});function loadSessionStateSnapshotIntoStore(store,snapshot){const res=function migrateAndValidateSessionStateSnapshot(state){if(!state||"object"!=typeof state)return console.warn("Invalid instance state"),null;if(!("version"in state)||"number"!=typeof state.version)return console.warn("No version in instance state"),null;const result=migrate({value:state,fromVersion:state.version,toVersion:CURRENT_SESSION_STATE_SNAPSHOT_VERSION,migrations:sessionStateSnapshotMigrations});if("error"===result.type)return console.warn(result.reason),null;const value={...result.value,version:CURRENT_SESSION_STATE_SNAPSHOT_VERSION};try{sessionStateSnapshotValidator.validate(value)}catch(e){return console.warn(e),null}return value}(snapshot);if(!res)return;const removeDiff={added:{},updated:{},removed:{...objectMapFromEntries(store.allRecords().filter((r=>"instance_page_state"===r.typeName||"camera"===r.typeName)).map((r=>[r.id,r])))}};store.has(TLInstance_TLINSTANCE_ID)&&(removeDiff.removed[TLInstance_TLINSTANCE_ID]=store.get(TLInstance_TLINSTANCE_ID));const addDiff={removed:{},updated:{},added:{[TLInstance_TLINSTANCE_ID]:store.schema.types.instance.create({id:TLInstance_TLINSTANCE_ID,currentPageId:res.currentPageId,isDebugMode:res.isDebugMode,isFocusMode:res.isFocusMode,isToolLocked:res.isToolLocked,isGridMode:res.isGridMode,exportBackground:res.exportBackground})}};for(const ps of res.pageStates){const cameraId=TLCamera_CameraRecordType.createId(ps.pageId),pageStateId=TLPageState_InstancePageStateRecordType.createId(ps.pageId);addDiff.added[cameraId]=TLCamera_CameraRecordType.create({id:TLCamera_CameraRecordType.createId(ps.pageId),x:ps.camera.x,y:ps.camera.y,z:ps.camera.z}),addDiff.added[pageStateId]=TLPageState_InstancePageStateRecordType.create({id:TLPageState_InstancePageStateRecordType.createId(ps.pageId),pageId:ps.pageId,selectedShapeIds:ps.selectedShapeIds,focusedGroupId:ps.focusedGroupId})}transact((()=>{store.applyDiff(squashRecordDiffs([removeDiff,addDiff])),store.ensureStoreIsUsable()}))}const instanceOfAny=(object,constructors)=>constructors.some((c=>object instanceof c));let idbProxyableTypes,cursorAdvanceMethods;const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;let idbProxyTraps={get(target,prop,receiver){if(target instanceof IDBTransaction){if("done"===prop)return transactionDoneMap.get(target);if("objectStoreNames"===prop)return target.objectStoreNames||transactionStoreNamesMap.get(target);if("store"===prop)return receiver.objectStoreNames[1]?void 0:receiver.objectStore(receiver.objectStoreNames[0])}return wrap(target[prop])},set:(target,prop,value)=>(target[prop]=value,!0),has:(target,prop)=>target instanceof IDBTransaction&&("done"===prop||"store"===prop)||prop in target};function wrapFunction(func){return func!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(func)?function(...args){return func.apply(unwrap(this),args),wrap(cursorRequestMap.get(this))}:function(...args){return wrap(func.apply(unwrap(this),args))}:function(storeNames,...args){const tx=func.call(unwrap(this),storeNames,...args);return transactionStoreNamesMap.set(tx,storeNames.sort?storeNames.sort():[storeNames]),wrap(tx)}}function transformCachableValue(value){return"function"==typeof value?wrapFunction(value):(value instanceof IDBTransaction&&function cacheDonePromiseForTransaction(tx){if(transactionDoneMap.has(tx))return;const done=new Promise(((resolve,reject)=>{const unlisten=()=>{tx.removeEventListener("complete",complete),tx.removeEventListener("error",error),tx.removeEventListener("abort",error)},complete=()=>{resolve(),unlisten()},error=()=>{reject(tx.error||new DOMException("AbortError","AbortError")),unlisten()};tx.addEventListener("complete",complete),tx.addEventListener("error",error),tx.addEventListener("abort",error)}));transactionDoneMap.set(tx,done)}(value),instanceOfAny(value,function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(value,idbProxyTraps):value)}function wrap(value){if(value instanceof IDBRequest)return function promisifyRequest(request){const promise=new Promise(((resolve,reject)=>{const unlisten=()=>{request.removeEventListener("success",success),request.removeEventListener("error",error)},success=()=>{resolve(wrap(request.result)),unlisten()},error=()=>{reject(request.error),unlisten()};request.addEventListener("success",success),request.addEventListener("error",error)}));return promise.then((value=>{value instanceof IDBCursor&&cursorRequestMap.set(value,request)})).catch((()=>{})),reverseTransformCache.set(promise,request),promise}(value);if(transformCache.has(value))return transformCache.get(value);const newValue=transformCachableValue(value);return newValue!==value&&(transformCache.set(value,newValue),reverseTransformCache.set(newValue,value)),newValue}const unwrap=value=>reverseTransformCache.get(value);const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(target,prop){if(!(target instanceof IDBDatabase)||prop in target||"string"!=typeof prop)return;if(cachedMethods.get(prop))return cachedMethods.get(prop);const targetFuncName=prop.replace(/FromIndex$/,""),useIndex=prop!==targetFuncName,isWrite=writeMethods.includes(targetFuncName);if(!(targetFuncName in(useIndex?IDBIndex:IDBObjectStore).prototype)||!isWrite&&!readMethods.includes(targetFuncName))return;const method=async function(storeName,...args){const tx=this.transaction(storeName,isWrite?"readwrite":"readonly");let target=tx.store;return useIndex&&(target=target.index(args.shift())),(await Promise.all([target[targetFuncName](...args),isWrite&&tx.done]))[0]};return cachedMethods.set(prop,method),method}!function replaceTraps(callback){idbProxyTraps=callback(idbProxyTraps)}((oldTraps=>({...oldTraps,get:(target,prop,receiver)=>getMethod(target,prop)||oldTraps.get(target,prop,receiver),has:(target,prop)=>!!getMethod(target,prop)||oldTraps.has(target,prop)})));const STORE_PREFIX="TLDRAW_DOCUMENT_v2",dbNameIndexKey="TLDRAW_DB_NAME_INDEX_v2",Table={Records:"records",Schema:"schema",SessionState:"session_state"};async function withDb(storeId,cb){!function addDbName(name){const all=new Set(getAllIndexDbNames());all.add(name),window?.localStorage.setItem(dbNameIndexKey,JSON.stringify([...all]))}(storeId);const db=await function openDB(name,version,{blocked,upgrade,blocking,terminated}={}){const request=indexedDB.open(name,version),openPromise=wrap(request);return upgrade&&request.addEventListener("upgradeneeded",(event=>{upgrade(wrap(request.result),event.oldVersion,event.newVersion,wrap(request.transaction),event)})),blocked&&request.addEventListener("blocked",(event=>blocked(event.oldVersion,event.newVersion,event))),openPromise.then((db=>{terminated&&db.addEventListener("close",(()=>terminated())),blocking&&db.addEventListener("versionchange",(event=>blocking(event.oldVersion,event.newVersion,event)))})).catch((()=>{})),openPromise}(storeId,3,{upgrade(database){database.objectStoreNames.contains(Table.Records)||database.createObjectStore(Table.Records),database.objectStoreNames.contains(Table.Schema)||database.createObjectStore(Table.Schema),database.objectStoreNames.contains(Table.SessionState)||database.createObjectStore(Table.SessionState)}});try{return await cb(db)}finally{db.close()}}async function loadDataFromStore({persistenceKey,sessionId,didCancel}){const storeId=STORE_PREFIX+persistenceKey;if(getAllIndexDbNames().includes(storeId))return await async function pruneSessionState({persistenceKey,didCancel}){await withDb(STORE_PREFIX+persistenceKey,(async db=>{const tx=db.transaction([Table.SessionState],"readwrite"),sessionStateStore=tx.objectStore(Table.SessionState),all=(await sessionStateStore.getAll()).sort(((a,b)=>a.updatedAt-b.updatedAt));if(all.length<10)return void await tx.done;const toDelete=all.slice(0,all.length-10);for(const{id}of toDelete)await sessionStateStore.delete(id);if(didCancel?.())return tx.abort();await tx.done}))}({persistenceKey,didCancel}),await withDb(storeId,(async db=>{if(didCancel?.())return;const tx=db.transaction([Table.Records,Table.Schema,Table.SessionState],"readonly"),recordsStore=tx.objectStore(Table.Records),schemaStore=tx.objectStore(Table.Schema),sessionStateStore=tx.objectStore(Table.SessionState);let sessionStateSnapshot=sessionId?(await sessionStateStore.get(sessionId))?.snapshot:null;if(!sessionStateSnapshot){const all=await sessionStateStore.getAll();sessionStateSnapshot=all.sort(((a,b)=>a.updatedAt-b.updatedAt)).pop()?.snapshot}const result={records:await recordsStore.getAll(),schema:await schemaStore.get(Table.Schema),sessionStateSnapshot};if(!didCancel?.())return await tx.done,result;tx.abort()}))}function getAllIndexDbNames(){const result=JSON.parse(window?.localStorage.getItem(dbNameIndexKey)||"[]")??[];return Array.isArray(result)?result:[]}const UPDATE_INSTANCE_STATE=Symbol("UPDATE_INSTANCE_STATE");const BC="undefined"==typeof BroadcastChannel?class BroadcastChannelMock{onmessage;constructor(_name){}postMessage(_msg){}close(){}}:BroadcastChannel;class TLLocalSyncClient{constructor(store,{persistenceKey,sessionId=TAB_ID,onLoad,onLoadError},channel=new BC(`tldraw-tab-sync-${persistenceKey}`)){this.store=store,this.channel=channel,"undefined"!=typeof window&&(window.tlsync=this),this.persistenceKey=persistenceKey,this.sessionId=sessionId,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=function createSessionStateSnapshotSignal(store){const $allPageIds=store.query.ids("page");return Computed_computed("sessionStateSnapshot",(()=>{const instanceState=store.get(TLInstance_TLINSTANCE_ID);if(!instanceState)return null;const allPageIds=[...$allPageIds.value];return{version:CURRENT_SESSION_STATE_SNAPSHOT_VERSION,currentPageId:instanceState.currentPageId,exportBackground:instanceState.exportBackground,isFocusMode:instanceState.isFocusMode,isDebugMode:instanceState.isDebugMode,isToolLocked:instanceState.isToolLocked,isGridMode:instanceState.isGridMode,pageStates:allPageIds.map((id=>{const ps=store.get(TLPageState_InstancePageStateRecordType.createId(id)),camera=store.get(TLCamera_CameraRecordType.createId(id));return{pageId:id,camera:{x:camera?.x??0,y:camera?.y??0,z:camera?.z??1},selectedShapeIds:ps?.selectedShapeIds??[],focusedGroupId:ps?.focusedGroupId??null}}))}}))}(this.store),this.disposables.add(store.listen((({changes})=>{this.diffQueue.push(changes),this.channel.postMessage({type:"diff",storeId:this.store.id,changes,schema:this.serializedSchema}),this.schedulePersist()}),{source:"user",scope:"document"})),this.disposables.add(store.listen((()=>{this.diffQueue.push(UPDATE_INSTANCE_STATE),this.schedulePersist()}),{scope:"session"})),this.connect(onLoad,onLoadError),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((t=>"document"===t.scope)).map((t=>t.typeName)))}disposables=new Set;diffQueue=[];didDispose=!1;shouldDoFullDBWrite=!0;isReloading=!1;persistenceKey;sessionId;serializedSchema;isDebugging=!1;documentTypes;$sessionStateSnapshot;initTime=Date.now();debug(...args){this.isDebugging&&console.debug(...args)}async connect(onLoad,onLoadError){let data;this.debug("connecting");try{data=await loadDataFromStore({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(error){return onLoadError(error),function showCantReadFromIndexDbAlert(){window.alert("Oops! We could not access your browser's storageand the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.")}(),void("undefined"!=typeof window&&window.location.reload())}if(this.debug("loaded data from store",data,"didDispose",this.didDispose),!this.didDispose)try{if(data){const documentSnapshot=Object.fromEntries(data.records.map((r=>[r.id,r]))),sessionStateSnapshot=data.sessionStateSnapshot??function extractSessionStateFromLegacySnapshot(store){const instanceRecords=[];for(const record of Object.values(store))record.typeName?.match(/^(instance.*|pointer|camera)$/)&&instanceRecords.push(record);const oldInstance=instanceRecords.filter((r=>"instance"===r.typeName&&r.id!==TLInstance_TLINSTANCE_ID))[0];if(!oldInstance)return null;const result={version:CURRENT_SESSION_STATE_SNAPSHOT_VERSION,currentPageId:oldInstance.currentPageId,exportBackground:!!oldInstance.exportBackground,isFocusMode:!!oldInstance.isFocusMode,isDebugMode:!!oldInstance.isDebugMode,isToolLocked:!!oldInstance.isToolLocked,isGridMode:!1,pageStates:instanceRecords.filter((r=>"instance_page_state"===r.typeName&&r.instanceId===oldInstance.id)).map((ps=>{const camera=store[ps.cameraId]??{x:0,y:0,z:1};return{pageId:ps.pageId,camera:{x:camera.x,y:camera.y,z:camera.z},selectedShapeIds:ps.selectedShapeIds,focusedGroupId:ps.focusedGroupId}}))};try{return sessionStateSnapshotValidator.validate(result),result}catch(e){return null}}(documentSnapshot),migrationResult=this.store.schema.migrateStoreSnapshot({store:documentSnapshot,schema:data.schema??this.store.schema.serializeEarliestVersion()});if("error"===migrationResult.type)return console.error("failed to migrate store",migrationResult),void onLoadError(new Error(`Failed to migrate store: ${migrationResult.reason}`));this.store.mergeRemoteChanges((()=>{this.store.put(Object.values(migrationResult.value).filter((r=>this.documentTypes.has(r.typeName))),"initialize")})),sessionStateSnapshot&&loadSessionStateSnapshotIntoStore(this.store,sessionStateSnapshot)}this.channel.onmessage=({data:data2})=>{this.debug("got message",data2);const msg2=data2,comparison=((a,b)=>{if(a.schemaVersion>b.schemaVersion)return 1;if(a.schemaVersion<b.schemaVersion)return-1;if(a.storeVersion>b.storeVersion)return 1;if(a.storeVersion<b.storeVersion)return-1;for(const key of Object.keys(a.recordVersions)){const aRecordVersion=a.recordVersions[key],bRecordVersion=b.recordVersions[key];if(aRecordVersion.version>bRecordVersion.version)return 1;if(aRecordVersion.version<bRecordVersion.version)return-1;if("subTypeVersions"in aRecordVersion&&!("subTypeVersions"in bRecordVersion))return 1;if(!("subTypeVersions"in aRecordVersion)&&"subTypeVersions"in bRecordVersion)return-1;if("subTypeVersions"in aRecordVersion&&"subTypeVersions"in bRecordVersion)for(const subType of Object.keys(aRecordVersion.subTypeVersions)){const aSubTypeVersion=aRecordVersion.subTypeVersions[subType],bSubTypeVersion=bRecordVersion.subTypeVersions[subType];if(aSubTypeVersion>bSubTypeVersion)return 1;if(aSubTypeVersion<bSubTypeVersion)return-1}}return 0})(this.serializedSchema,msg2.schema??this.store.schema.serializeEarliestVersion());if(-1===comparison){return Date.now()-this.initTime<5e3?void onLoadError(new Error("Schema mismatch, please close other tabs and reload the page")):(this.debug("reloading"),this.isReloading=!0,void window?.location?.reload?.())}if(1===comparison)return this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,void this.persistIfNeeded();"diff"===msg2.type&&(this.debug("applying diff"),transact((()=>{this.store.mergeRemoteChanges((()=>{this.store.applyDiff(msg2.changes),this.store.ensureStoreIsUsable()}))})))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((()=>{this.channel.close()})),onLoad(this)}catch(e){if(this.debug("error loading data from store",e),this.didDispose)return;return void onLoadError(e)}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((d=>d()))}isPersisting=!1;didLastWriteError=!1;scheduledPersistTimeout=null;schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()}),this.didLastWriteError?1e4:350))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}async doPersist(){assert(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const diffQueue=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await async function storeSnapshotInIndexedDb({persistenceKey,schema,snapshot,sessionId,sessionStateSnapshot,didCancel}){const storeId=STORE_PREFIX+persistenceKey;await withDb(storeId,(async db=>{const tx=db.transaction([Table.Records,Table.Schema,Table.SessionState],"readwrite"),recordsStore=tx.objectStore(Table.Records),schemaStore=tx.objectStore(Table.Schema),sessionStateStore=tx.objectStore(Table.SessionState);await recordsStore.clear();for(const[id,record]of Object.entries(snapshot))await recordsStore.put(record,id);if(schemaStore.put(schema.serialize(),Table.Schema),sessionStateSnapshot&&sessionId?sessionStateStore.put({snapshot:sessionStateSnapshot,updatedAt:Date.now(),id:sessionId},sessionId):(sessionStateSnapshot||sessionId)&&console.error("sessionStateSnapshot and instanceId must be provided together"),didCancel?.())return tx.abort();await tx.done}))}({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});else{const diffs=squashRecordDiffs(diffQueue.filter((d=>d!==UPDATE_INSTANCE_STATE)));await async function storeChangesInIndexedDb({persistenceKey,schema,changes,sessionId,sessionStateSnapshot,didCancel}){const storeId=STORE_PREFIX+persistenceKey;await withDb(storeId,(async db=>{const tx=db.transaction([Table.Records,Table.Schema,Table.SessionState],"readwrite"),recordsStore=tx.objectStore(Table.Records),schemaStore=tx.objectStore(Table.Schema),sessionStateStore=tx.objectStore(Table.SessionState);for(const[id,record]of Object.entries(changes.added))await recordsStore.put(record,id);for(const[_prev,updated]of Object.values(changes.updated))await recordsStore.put(updated,updated.id);for(const id of Object.keys(changes.removed))await recordsStore.delete(id);if(schemaStore.put(schema.serialize(),Table.Schema),sessionStateSnapshot&&sessionId?sessionStateStore.put({snapshot:sessionStateSnapshot,updatedAt:Date.now(),id:sessionId},sessionId):(sessionStateSnapshot||sessionId)&&console.error("sessionStateSnapshot and instanceId must be provided together"),didCancel?.())return tx.abort();await tx.done}))}({persistenceKey:this.persistenceKey,changes:diffs,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value})}this.didLastWriteError=!1}catch(e){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e),function showCantWriteToIndexDbAlert(){window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n If your hard disk is full, try clearing up some space and then reload the page.")}(),"undefined"!=typeof window&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function createTLStore({initialData,defaultName="",...rest}){const schema="schema"in rest&&rest.schema?rest.schema:createTLSchema({shapes:(shapeUtils=checkShapesAndAddCore("shapeUtils"in rest&&rest.shapeUtils?rest.shapeUtils:[]),Object.fromEntries(shapeUtils.map((s=>[s.type,{props:s.props,migrations:s.migrations}]))))});var shapeUtils;return new Store({schema,initialData,props:{defaultName}})}function useLocalStore({persistenceKey,sessionId,...rest}){const[state,setState]=(0,node_modules_react.useState)(null),store=function useTLStore(opts){const[store,setStore]=(0,node_modules_react.useState)((()=>{const store2=createTLStore(opts);return opts.snapshot&&store2.loadSnapshot(opts.snapshot),store2})),ref=(0,node_modules_react.useRef)(opts);if((0,node_modules_react.useEffect)((()=>{ref.current=opts})),Object.keys(ref.current).some((key=>ref.current[key]!==opts[key]))){const newStore=createTLStore(opts);return opts.snapshot&&newStore.loadSnapshot(opts.snapshot),setStore(newStore),newStore}return store}(rest);return(0,node_modules_react.useEffect)((()=>{const id=uniqueId();if(!persistenceKey)return void setState({id,storeWithStatus:{status:"not-synced",store}});setState({id,storeWithStatus:{status:"loading"}});const setStoreWithStatus=storeWithStatus=>{setState((prev=>prev?.id===id?{id,storeWithStatus}:prev))},client=new TLLocalSyncClient(store,{sessionId,persistenceKey,onLoad(){setStoreWithStatus({store,status:"synced-local"})},onLoadError(err){setStoreWithStatus({status:"error",error:err})}});return()=>{setState((prevState=>prevState?.id===id?null:prevState)),client.close()}}),[persistenceKey,store,sessionId]),state?.storeWithStatus??{status:"loading"}}let isMobileSafari=!1;if("undefined"!=typeof window){const ua=window.navigator.userAgent,iOS=!!ua.match(/iPad/i)||!!ua.match(/iPhone/i),webkit=!!ua.match(/WebKit/i);isMobileSafari=iOS&&webkit&&!ua.match(/CriOS/i)}const EMPTY_SHAPE_UTILS_ARRAY=[],EMPTY_TOOLS_ARRAY=[],TldrawEditor=(0,node_modules_react.memo)((function TldrawEditor2({store,components,className,user:_user,...rest}){const[container,rContainer]=node_modules_react.useState(null),user=(0,node_modules_react.useMemo)((()=>_user??createTLUser()),[_user]),ErrorFallback=void 0===components?.ErrorFallback?DefaultErrorFallback:components?.ErrorFallback,withDefaults={...rest,shapeUtils:rest.shapeUtils??EMPTY_SHAPE_UTILS_ARRAY,tools:rest.tools??EMPTY_TOOLS_ARRAY};return(0,jsx_runtime.jsx)("div",{ref:rContainer,draggable:!1,className:classnames_default()("tl-container tl-theme__light",className),onPointerDown:stopEventPropagation,tabIndex:-1,children:(0,jsx_runtime.jsx)(OptionalErrorBoundary,{fallback:ErrorFallback,onError:error=>annotateError(error,{tags:{origin:"react.tldraw-before-app"}}),children:container&&(0,jsx_runtime.jsx)(ContainerProvider,{container,children:(0,jsx_runtime.jsx)(EditorComponentsProvider,{overrides:components,children:store?store instanceof Store?(0,jsx_runtime.jsx)(TldrawEditorWithReadyStore,{...withDefaults,store,user}):(0,jsx_runtime.jsx)(TldrawEditorWithLoadingStore,{...withDefaults,store,user}):(0,jsx_runtime.jsx)(TldrawEditorWithOwnStore,{...withDefaults,store,user})})})})})}));function TldrawEditorWithOwnStore(props){const{defaultName,snapshot,initialData,shapeUtils,persistenceKey,sessionId,user}=props,syncedStore=useLocalStore({shapeUtils,initialData,persistenceKey,sessionId,defaultName,snapshot});return(0,jsx_runtime.jsx)(TldrawEditorWithLoadingStore,{...props,store:syncedStore,user})}const TldrawEditorWithLoadingStore=(0,node_modules_react.memo)((function TldrawEditorBeforeLoading({store,user,...rest}){const container=useContainer();switch((0,node_modules_react.useLayoutEffect)((()=>{user.userPreferences.value.isDarkMode&&(container.classList.remove("tl-theme__light"),container.classList.add("tl-theme__dark"))}),[container,user.userPreferences.value.isDarkMode]),store.status){case"error":throw store.error;case"loading":return(0,jsx_runtime.jsx)(LoadingScreen,{children:"Connecting..."})}return(0,jsx_runtime.jsx)(TldrawEditorWithReadyStore,{...rest,store:store.store,user})}));function TldrawEditorWithReadyStore({onMount,children,store,tools,shapeUtils,user,initialState,autoFocus=!0,inferDarkMode}){const{ErrorFallback}=useEditorComponents(),container=useContainer(),[editor,setEditor]=(0,node_modules_react.useState)(null);(0,node_modules_react.useLayoutEffect)((()=>{const editor2=new Editor({store,shapeUtils,tools,getContainer:()=>container,user,initialState,inferDarkMode});return window.app=editor2,window.editor=editor2,setEditor(editor2),()=>{editor2.dispose()}}),[container,shapeUtils,tools,store,user,initialState,inferDarkMode]);const crashingError=(0,node_modules_react.useSyncExternalStore)((0,node_modules_react.useCallback)((onStoreChange=>editor?(editor.on("crash",onStoreChange),()=>editor.off("crash",onStoreChange)):()=>{}),[editor]),(()=>editor?.crashingError??null));return editor?(0,jsx_runtime.jsx)(OptionalErrorBoundary,{fallback:ErrorFallback,onError:error=>editor.annotateError(error,{origin:"react.tldraw",willCrashApp:!0}),children:crashingError?(0,jsx_runtime.jsx)(Crash,{crashingError}):(0,jsx_runtime.jsx)(EditorContext.Provider,{value:editor,children:(0,jsx_runtime.jsx)(Layout,{autoFocus,onMount,children})})}):null}function Layout({children,onMount,autoFocus}){!function useZoomCss(){const editor=useEditor(),container=useContainer();node_modules_react.useEffect((()=>{const setScale=s=>container.style.setProperty("--tl-zoom",s.toString()),setScaleDebounced=debounce(setScale,100),scheduler=new EffectScheduler_EffectScheduler("useZoomCss",(()=>{editor.currentPageShapeIds.size<300?setScale(editor.zoomLevel):setScaleDebounced(editor.zoomLevel)}));return scheduler.attach(),scheduler.execute(),()=>{scheduler.detach()}}),[editor,container])}(),function useCursor(){const editor=useEditor(),container=useContainer(),isDarkMode=useIsDarkMode();useQuickReactor("useCursor",(()=>{const{type,rotation}=editor.instanceState.cursor;STATIC_CURSORS.includes(type)?container.style.setProperty("--tl-cursor",`var(--tl-cursor-${type})`):container.style.setProperty("--tl-cursor",getCursor(type,rotation,isDarkMode?"white":"black"))}),[editor,container,isDarkMode])}(),function useDarkMode(){const editor=useEditor(),container=useContainer(),isDarkMode=useIsDarkMode(),forceSrgb=useValue(debugFlags.forceSrgb);node_modules_react.useEffect((()=>{isDarkMode?(container.setAttribute("data-color-mode","dark"),container.classList.remove("tl-theme__light"),container.classList.add("tl-theme__dark")):(container.setAttribute("data-color-mode","light"),container.classList.remove("tl-theme__dark"),container.classList.add("tl-theme__light")),forceSrgb?container.classList.add("tl-theme__force-sRGB"):container.classList.remove("tl-theme__force-sRGB")}),[editor,container,forceSrgb,isDarkMode])}(),function useSafariFocusOutFix(){const editor=useEditor();node_modules_react.useEffect((()=>{if(isMobileSafari)return document.addEventListener("focusout",handleFocusOut),()=>document.removeEventListener("focusout",handleFocusOut);function handleFocusOut(e){(e.target instanceof HTMLInputElement&&"text"===e.target.type||e.target instanceof HTMLTextAreaElement)&&editor.complete()}}),[editor])}(),function useForceUpdate(){const[_,ss]=(0,node_modules_react.useState)(0);(0,node_modules_react.useEffect)((()=>ss((s=>s+1))),[])}(),function useFocusEvents(autoFocus){const editor=useEditor(),container=useContainer();(0,node_modules_react.useLayoutEffect)((()=>{autoFocus?(editor.instanceState.isFocused||editor.updateInstanceState({isFocused:!0}),editor.getContainer().focus()):editor.instanceState.isFocused&&editor.updateInstanceState({isFocused:!1})}),[editor,container,autoFocus])}(autoFocus),function useOnMount(onMount){const editor=useEditor(),onMountEvent=function useEvent(handler){const handlerRef=(0,node_modules_react.useRef)();return(0,node_modules_react.useLayoutEffect)((()=>{handlerRef.current=handler})),(0,node_modules_react.useDebugValue)(handler),(0,node_modules_react.useCallback)(((...args)=>{const fn=handlerRef.current;return assert(fn,"fn does not exist"),fn(...args)}),[])}((editor2=>{const teardown=onMount?.(editor2);return editor2.emit("mount"),window.tldrawReady=!0,teardown}));node_modules_react.useLayoutEffect((()=>{if(editor)return onMountEvent?.(editor)}),[editor,onMountEvent])}(onMount),function useDPRMultiple(){const editor=useEditor(),container=useContainer();node_modules_react.useEffect((()=>react("useDPRMultiple",(()=>{const dpr=editor.instanceState.devicePixelRatio;container.style.setProperty("--tl-dpr-multiple",nearestMultiple(dpr).toString())}))),[editor,container])}();return useEditor().updateViewportScreenBounds(),children??(0,jsx_runtime.jsx)(Canvas,{})}function Crash({crashingError}){throw crashingError}function LoadingScreen({children}){const{Spinner}=useEditorComponents();return(0,jsx_runtime.jsxs)("div",{className:"tl-loading",children:[Spinner?(0,jsx_runtime.jsx)(Spinner,{}):null,children]})}function ErrorScreen({children}){return(0,jsx_runtime.jsx)("div",{className:"tl-loading",children})}function HTMLContainer({children,className="",...rest}){return(0,jsx_runtime.jsx)("div",{...rest,className:`tl-html-container ${className}`,children})}track((function PositionedOnCanvas2({x:offsetX=0,y:offsetY=0,rotation=0,...rest}){const editor=useEditor(),rContainer=(0,node_modules_react.useRef)(null);return(0,node_modules_react.useLayoutEffect)((()=>{const{x,y,z}=editor.camera,elm=rContainer.current;elm&&void 0!==x&&(elm.style.transform=`translate(${x}px, ${y}px) scale(${z}) rotate(${rotation}rad) translate(${offsetX}px, ${offsetY}px)`)}),[editor.camera,offsetX,offsetY,rotation]),(0,jsx_runtime.jsx)("div",{ref:rContainer,...rest,className:classnames_default()("tl-positioned",rest.className)})}));class BaseBoxShapeUtil extends ShapeUtil{getGeometry(shape){return new Rectangle2d({width:shape.props.w,height:shape.props.h,isFilled:!0})}onResize=(shape,info)=>function resizeBox(shape,info,opts={}){const{newPoint,handle,scaleX,scaleY}=info,{minWidth=1,maxWidth=1/0,minHeight=1,maxHeight=1/0}=opts;let w=shape.props.w*scaleX,h=shape.props.h*scaleY;const offset=new Vec2d_Vec2d(0,0);if(w>0){if(w<minWidth){switch(handle){case"top_left":case"left":case"bottom_left":offset.x=w-minWidth;break;case"top":case"bottom":offset.x=(w-minWidth)/2;break;default:offset.x=0}w=minWidth}}else if(offset.x=w,w=-w,w<minWidth){switch(handle){case"top_left":case"left":case"bottom_left":offset.x=-w;break;default:offset.x=-minWidth}w=minWidth}if(h>0){if(h<minHeight){switch(handle){case"top_left":case"top":case"top_right":offset.y=h-minHeight;break;case"right":case"left":offset.y=(h-minHeight)/2;break;default:offset.y=0}h=minHeight}}else if(offset.y=h,h=-h,h<minHeight){switch(handle){case"top_left":case"top":case"top_right":offset.y=-h;break;default:offset.y=-minHeight}h=minHeight}const{x,y}=offset.rot(shape.rotation).add(newPoint);return{x,y,props:{w:Math.min(maxWidth,w),h:Math.min(maxHeight,h)}}}(shape,info)}function getArrowPoints(info,side,strokeWidth){const PT="end"===side?info.end.point:info.start.point,PB="end"===side?info.start.point:info.end.point,compareLength=info.isStraight?Vec2d_Vec2d.Dist(PB,PT):Math.abs(info.bodyArc.length),length=Math.max(Math.min(compareLength/5,3*strokeWidth),strokeWidth);let P0;if(info.isStraight)P0=Vec2d_Vec2d.Nudge(PT,PB,length);else{const ints=function intersectCircleCircle(c1,r1,c2,r2){let dx=c2.x-c1.x,dy=c2.y-c1.y;const d=Math.sqrt(dx*dx+dy*dy),x=(d*d-r2*r2+r1*r1)/(2*d),y=Math.sqrt(r1*r1-x*x);return dx/=d,dy/=d,[new Vec2d_Vec2d(c1.x+dx*x-dy*y,c1.y+dy*x+dx*y),new Vec2d_Vec2d(c1.x+dx*x+dy*y,c1.y+dy*x-dx*y)]}(PT,length,info.handleArc.center,info.handleArc.radius);P0="end"===side?info.handleArc.sweepFlag?ints[0]:ints[1]:info.handleArc.sweepFlag?ints[1]:ints[0]}return{point:PT,int:P0}}function getArrowheadPathForType(info,side,strokeWidth){const type="end"===side?info.end.arrowhead:info.start.arrowhead;if("none"===type)return;const points=getArrowPoints(info,side,strokeWidth);if(points){switch(type){case"bar":return function getBarHead({int,point}){const d=Vec2d_Vec2d.Sub(int,point).div(2),PL=Vec2d_Vec2d.Add(point,Vec2d_Vec2d.Rot(d,TAU)),PR=Vec2d_Vec2d.Sub(point,Vec2d_Vec2d.Rot(d,TAU));return`M ${PL.x} ${PL.y} L ${PR.x} ${PR.y}`}(points);case"square":return function getSquareHead({int,point}){const PB=Vec2d_Vec2d.Lrp(point,int,.85),d=Vec2d_Vec2d.Sub(PB,point).div(2),PL1=Vec2d_Vec2d.Add(point,Vec2d_Vec2d.Rot(d,TAU)),PR1=Vec2d_Vec2d.Sub(point,Vec2d_Vec2d.Rot(d,TAU)),PL2=Vec2d_Vec2d.Add(PB,Vec2d_Vec2d.Rot(d,TAU)),PR2=Vec2d_Vec2d.Sub(PB,Vec2d_Vec2d.Rot(d,TAU));return`M ${PL1.x} ${PL1.y} L ${PL2.x} ${PL2.y} L ${PR2.x} ${PR2.y} L ${PR1.x} ${PR1.y} Z`}(points);case"diamond":return function getDiamondHead({point,int}){const PB=Vec2d_Vec2d.Lrp(point,int,.75),PL=Vec2d_Vec2d.RotWith(PB,point,utils_PI/4),PR=Vec2d_Vec2d.RotWith(PB,point,-utils_PI/4),PQ=Vec2d_Vec2d.Lrp(PL,PR,.5);return PQ.add(Vec2d_Vec2d.Sub(PQ,point)),`M ${PQ.x} ${PQ.y} L ${PL.x} ${PL.y} ${point.x} ${point.y} L ${PR.x} ${PR.y} Z`}(points);case"dot":return function getDotHead({point,int}){const A=Vec2d_Vec2d.Lrp(point,int,.45),r=Vec2d_Vec2d.Dist(A,point);return`M ${A.x-r},${A.y}\n  a ${r},${r} 0 1,0 ${2*r},0\n  a ${r},${r} 0 1,0 -${2*r},0 `}(points);case"inverted":return function getInvertedTriangleHead({point,int}){const d=Vec2d_Vec2d.Sub(int,point).div(2),PL=Vec2d_Vec2d.Add(point,Vec2d_Vec2d.Rot(d,TAU)),PR=Vec2d_Vec2d.Sub(point,Vec2d_Vec2d.Rot(d,TAU));return`M ${PL.x} ${PL.y} L ${int.x} ${int.y} L ${PR.x} ${PR.y} Z`}(points);case"arrow":return function getArrowhead({point,int}){const PL=Vec2d_Vec2d.RotWith(int,point,utils_PI/6),PR=Vec2d_Vec2d.RotWith(int,point,-utils_PI/6);return`M ${PL.x} ${PL.y} L ${point.x} ${point.y} L ${PR.x} ${PR.y}`}(points);case"triangle":return function getTriangleHead({point,int}){const PL=Vec2d_Vec2d.RotWith(int,point,utils_PI/6),PR=Vec2d_Vec2d.RotWith(int,point,-utils_PI/6);return`M ${PL.x} ${PL.y} L ${point.x} ${point.y} L ${PR.x} ${PR.y} Z`}(points)}return""}}class Idle extends StateNode{static id="idle";onPointerDown=info=>{this.parent.transition("pointing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}class Pointing extends StateNode{static id="pointing";markId="";wasFocusedOnEnter=!1;onEnter=()=>{const{isMenuOpen}=this.editor;this.wasFocusedOnEnter=!isMenuOpen};onPointerMove=info=>{if(this.editor.inputs.isDragging){const{originPagePoint}=this.editor.inputs,shapeType=this.parent.shapeType,id=createShapeId();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:shapeType,x:originPagePoint.x,y:originPagePoint.y,props:{w:1,h:1}}]).select(id),this.editor.setCurrentTool("select.resizing",{...info,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const shapeType=this.parent.shapeType,id=createShapeId();this.editor.mark(this.markId),this.editor.createShapes([{id,type:shapeType,x:originPagePoint.x,y:originPagePoint.y}]);const shape=this.editor.getShape(id),{w,h}=this.editor.getShapeUtil(shape).getDefaultProps(),delta=new Vec2d_Vec2d(w/2,h/2),parentTransform=this.editor.getShapeParentTransform(shape);parentTransform&&delta.rot(-parentTransform.rotation()),this.editor.updateShapes([{id,type:shapeType,x:shape.x-delta.x,y:shape.y-delta.y}]),this.editor.setSelectedShapes([id]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle",{})}}class BaseBoxShapeTool extends StateNode{static id="box";static initial="idle";static children=()=>[Idle,Pointing]}function useIsCropping(shapeId){const editor=useEditor();return useValue("isCropping",(()=>editor.croppingShapeId===shapeId),[editor,shapeId])}function useIsEditing(shapeId){const editor=useEditor();return useValue("isEditing",(()=>editor.editingShapeId===shapeId),[editor,shapeId])}function useSelectionEvents(handle){const editor=useEditor();return(0,node_modules_react.useMemo)((function selectionEvents(){let lastX,lastY;return{onPointerDown:e=>{if(e.isKilled)return;if(2===e.button)return void editor.dispatch({type:"pointer",target:"selection",handle,name:"right_click",...getPointerInfo(e)});if(0!==e.button)return;const elm=loopToHtmlElement(e.currentTarget);setPointerCapture(elm,e),elm.addEventListener("pointerup",(function releaseCapture(){elm.removeEventListener("pointerup",releaseCapture),releasePointerCapture(elm,e)})),editor.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle,...getPointerInfo(e)}),stopEventPropagation(e)},onPointerMove:function onPointerMove(e){e.isKilled||0===e.button&&(e.clientX===lastX&&e.clientY===lastY||(lastX=e.clientX,lastY=e.clientY,editor.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle,...getPointerInfo(e)})))},onPointerUp:e=>{e.isKilled||0===e.button&&editor.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle,...getPointerInfo(e)})}}}),[editor,handle])}function getVerticesCountForLength(length,spacing=20){return Math.max(8,Math.ceil(length/spacing))}class Arc2d extends Geometry2d{_center;radius;start;end;measure;length;angleStart;angleEnd;constructor(config){super({...config,isFilled:!1,isClosed:!1});const{center,radius,sweepFlag,largeArcFlag,start,end}=config;if(start.equals(end))throw Error("Arc must have different start and end points.");this.angleStart=Vec2d_Vec2d.Angle(center,start),this.angleEnd=Vec2d_Vec2d.Angle(center,end),this.measure=function getArcMeasure(A,B,sweepFlag,largeArcFlag){const m=(B-A)%utils_PI2*2%utils_PI2-(B-A)%utils_PI2;return largeArcFlag?(utils_PI2-Math.abs(m))*(sweepFlag?1:-1):m}(this.angleStart,this.angleEnd,sweepFlag,largeArcFlag),this.length=this.measure*radius,this.start=start,this.end=end,this._center=center,this.radius=radius}nearestPoint(point){const{_center,measure,radius,angleEnd,angleStart,start:A,end:B}=this,t=getPointInArcT(measure,angleStart,angleEnd,_center.angle(point));if(t<=0)return A;if(t>=1)return B;const P=_center.clone().add(point.clone().sub(_center).uni().mul(radius));let nearest,distance=1/0;for(const pt of[A,B,P])point.dist(pt)<distance&&(nearest=pt,distance=point.dist(pt));if(!nearest)throw Error("nearest point not found");return nearest}hitTestLineSegment(A,B,_zoom){const{_center,radius,measure,angleStart,angleEnd}=this,intersection=intersectLineSegmentCircle(A,B,_center,radius);return null!==intersection&&intersection.some((p=>{const result=getPointInArcT(measure,angleStart,angleEnd,_center.angle(p));return result>=0&&result<=1}))}getVertices(){const{_center,measure,length,radius,angleStart}=this,vertices=[];for(let i=0,n=getVerticesCountForLength(Math.abs(length));i<n+1;i++){const angle=angleStart+i/n*measure;vertices.push(_center.clone().add(new Vec2d_Vec2d(Math.cos(angle),Math.sin(angle)).mul(radius)))}return vertices}}function getPointInArcT(mAB,A,B,P){let mAP;if(Math.abs(mAB)>utils_PI){mAP=shortAngleDist(A,P);const mPB=shortAngleDist(P,B);return Math.abs(mAP)<Math.abs(mPB)?mAP/mAB:(mAB-mPB)/mAB}return mAP=shortAngleDist(A,P),mAP/mAB}class Circle2d extends Geometry2d{constructor(config){super({isClosed:!0,...config}),this.config=config;const{x=0,y=0,radius}=config;this.x=x,this.y=y,this._center=new Vec2d_Vec2d(radius+x,radius+y),this.radius=radius}_center;radius;x;y;getBounds(){return new Box2d_Box2d(this.x,this.y,2*this.radius,2*this.radius)}getVertices(){const{_center,radius}=this,vertices=[];for(let i=0,n=getVerticesCountForLength(utils_PI2*radius);i<n;i++){const angle=i/n*utils_PI2;vertices.push(_center.clone().add(Vec2d_Vec2d.FromAngle(angle).mul(radius)))}return vertices}nearestPoint(point){const{_center,radius}=this;return _center.equals(point)?Vec2d_Vec2d.AddXY(_center,radius,0):_center.clone().add(point.clone().sub(_center).uni().mul(radius))}hitTestLineSegment(A,B,_zoom){const{_center,radius}=this;return null!==intersectLineSegmentCircle(A,B,_center,radius)}}class CubicBezier2d extends Polyline2d{a;b;c;d;constructor(config){const{start:a,cp1:b,cp2:c,end:d}=config;super({...config,points:[a,d]}),this.a=a,this.b=b,this.c=c,this.d=d}getVertices(){const vertices=[],{a,b,c,d}=this;for(let i=0,n=10;i<=n;i++){const t=i/n;vertices.push(new Vec2d_Vec2d((1-t)*(1-t)*(1-t)*a.x+(1-t)*(1-t)*3*t*b.x+3*(1-t)*(t*t)*c.x+t*t*t*d.x,(1-t)*(1-t)*(1-t)*a.y+(1-t)*(1-t)*3*t*b.y+3*(1-t)*(t*t)*c.y+t*t*t*d.y))}return vertices}midPoint(){return function getAtT(segment,t){const{a,b,c,d}=segment;return new Vec2d_Vec2d((1-t)*(1-t)*(1-t)*a.x+(1-t)*(1-t)*3*t*b.x+3*(1-t)*(t*t)*c.x+t*t*t*d.x,(1-t)*(1-t)*(1-t)*a.y+(1-t)*(1-t)*3*t*b.y+3*(1-t)*(t*t)*c.y+t*t*t*d.y)}(this,.5)}nearestPoint(A){let nearest,dist=1/0;for(const edge of this.segments){const p=edge.nearestPoint(A),d=p.dist(A);d<dist&&(nearest=p,dist=d)}if(!nearest)throw Error("nearest point not found");return nearest}}class CubicSpline2d extends Geometry2d{points;constructor(config){super({...config,isClosed:!1,isFilled:!1});const{points}=config;this.points=points}_segments;get segments(){if(!this._segments){this._segments=[];const{points}=this,len=points.length,last=len-2,k=1.25;for(let i=0;i<len-1;i++){const p0=0===i?points[0]:points[i-1],p1=points[i],p2=points[i+1],p3=i===last?p2:points[i+2],start=p1,cp1=0===i?p0:new Vec2d_Vec2d(p1.x+(p2.x-p0.x)/6*k,p1.y+(p2.y-p0.y)/6*k),cp2=i===last?p2:new Vec2d_Vec2d(p2.x-(p3.x-p1.x)/6*k,p2.y-(p3.y-p1.y)/6*k),end=p2;this._segments.push(new CubicBezier2d({start,cp1,cp2,end}))}}return this._segments}_length;get length(){return this._length||(this._length=this.segments.reduce(((acc,segment)=>acc+segment.length),0)),this._length}getVertices(){const vertices=this.segments.reduce(((acc,segment)=>acc.concat(segment.vertices)),[]);return vertices.push(this.points[this.points.length-1]),vertices}nearestPoint(A){let nearest,dist=1/0;for(const segment of this.segments){const p=segment.nearestPoint(A),d=p.dist(A);d<dist&&(nearest=p,dist=d)}if(!nearest)throw Error("nearest point not found");return nearest}hitTestLineSegment(A,B,zoom){return this.segments.some((segment=>segment.hitTestLineSegment(A,B,zoom)))}}class Ellipse2d extends Geometry2d{constructor(config){super({...config,isClosed:!0}),this.config=config;const{width,height}=config;this.w=width,this.h=height}w;h;_edges;get edges(){if(!this._edges){const{vertices}=this;this._edges=[];for(let i=0,n=vertices.length;i<n;i++){const start=vertices[i],end=vertices[(i+1)%n];this._edges.push(new Edge2d({start,end}))}}return this._edges}getVertices(){const cx=Math.max(1,this.w)/2,cy=Math.max(1,this.h)/2,q=Math.pow(cx-cy,2)/Math.pow(cx+cy,2),len=getVerticesCountForLength(utils_PI*(cx+cy)*(1+3*q/(10+Math.sqrt(4-3*q)))),step=utils_PI2/len,a=Math.cos(step),b=Math.sin(step);let sin=0,cos=1,ts=0,tc=1;const vertices=Array(len);for(let i=0;i<len;i++)vertices[i]=new Vec2d_Vec2d(cx+cx*cos,cy+cy*sin),ts=b*cos+a*sin,tc=a*cos-b*sin,sin=ts,cos=tc;return vertices}nearestPoint(A){let nearest,dist=1/0;for(const edge of this.edges){const p=edge.nearestPoint(A),d=p.dist(A);d<dist&&(nearest=p,dist=d)}if(!nearest)throw Error("nearest point not found");return nearest}hitTestLineSegment(A,B,zoom){return this.edges.some((edge=>edge.hitTestLineSegment(A,B,zoom)))}getBounds(){return new Box2d_Box2d(0,0,this.w,this.h)}}class Stadium2d extends Ellipse2d{constructor(config){super({...config}),this.config=config}getVertices(){const w=Math.max(1,this.w),h=Math.max(1,this.h),cx=w/2,cy=h/2,points=Array(18);if(h>w)for(let i=0;i<9;i++){const t1=utils_PI*i/8-utils_PI,t2=utils_PI*i/8;points[i]=new Vec2d_Vec2d(cx+cx*Math.cos(t1),cx+cx*Math.sin(t1)),points[i+9]=new Vec2d_Vec2d(cx+cx*Math.cos(t2),h-cx+cx*Math.sin(t2))}else for(let i=0;i<9;i++){const t1=utils_PI*i/8-TAU,t2=TAU+utils_PI*-i/8;points[i]=new Vec2d_Vec2d(w-cy+cy*Math.cos(t1),h-cy+cy*Math.sin(t1)),points[i+9]=new Vec2d_Vec2d(cy-cy*Math.cos(t2),h-cy+cy*Math.sin(t2))}return points}}function openWindow(url,target="_blank"){runtime.openWindow(url,target)}"undefined"!=typeof window&&(window.__tldraw__hardReset=async function hardReset({shouldReload=!0}={}){sessionStorage.clear(),await Promise.all(getAllIndexDbNames().map((db=>function deleteDB(name,{blocked}={}){const request=indexedDB.deleteDatabase(name);return blocked&&request.addEventListener("blocked",(event=>blocked(event.oldVersion,event))),wrap(request).then((()=>{}))}(db)))),localStorage.clear(),shouldReload&&window.location.reload()});__webpack_require__("./node_modules/core-js/stable/array/at.js"),__webpack_require__("./node_modules/core-js/stable/array/flat.js"),__webpack_require__("./node_modules/core-js/stable/array/flat-map.js"),__webpack_require__("./node_modules/core-js/stable/string/at.js"),__webpack_require__("./node_modules/core-js/stable/string/replace-all.js")},"./node_modules/@tldraw/tldraw/dist-esm/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R_W:()=>dist_esm.R_W,ciG:()=>dist_esm.ciG,pp9:()=>dist_esm.pp9,Y8S:()=>dist_esm.Y8S,XoM:()=>dist_esm.XoM,ST$:()=>dist_esm.ST$,G7H:()=>dist_esm.G7H,zc7:()=>dist_esm.zc7,EeJ:()=>dist_esm.EeJ,T:()=>dist_esm.T,DrV:()=>Tldraw,F17:()=>dist_esm.F17,y6M:()=>dist_esm.y6M,YzH:()=>dist_esm.YzH});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),dist=__webpack_require__("./node_modules/@radix-ui/primitive/dist/index.mjs"),react_compose_refs_dist=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),react_context_dist=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),react_id_dist=__webpack_require__("./node_modules/@radix-ui/react-id/dist/index.mjs"),react_use_controllable_state_dist=__webpack_require__("./node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),react_dismissable_layer_dist=__webpack_require__("./node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"),react_focus_scope_dist=__webpack_require__("./node_modules/@radix-ui/react-focus-scope/dist/index.mjs"),react_portal_dist=__webpack_require__("./node_modules/@radix-ui/react-portal/dist/index.mjs"),react_presence_dist=__webpack_require__("./node_modules/@radix-ui/react-presence/dist/index.mjs"),react_primitive_dist=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),react_focus_guards_dist=__webpack_require__("./node_modules/@radix-ui/react-focus-guards/dist/index.mjs"),Combination=__webpack_require__("./node_modules/react-remove-scroll/dist/es2015/Combination.js"),es2015=__webpack_require__("./node_modules/aria-hidden/dist/es2015/index.js"),react_slot_dist=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs");const[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=(0,react_context_dist.b)("Dialog"),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext("Dialog"),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=props=>{const{__scopeDialog,children,open:openProp,defaultOpen,onOpenChange,modal=!0}=props,triggerRef=(0,react.useRef)(null),contentRef=(0,react.useRef)(null),[open=!1,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogProvider,{scope:__scopeDialog,triggerRef,contentRef,contentId:(0,react_id_dist.M)(),titleId:(0,react_id_dist.M)(),descriptionId:(0,react_id_dist.M)(),open,onOpenChange:setOpen,onOpenToggle:(0,react.useCallback)((()=>setOpen((prevOpen=>!prevOpen))),[setOpen]),modal},children)},[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext("DialogPortal",{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=props=>{const{__scopeDialog,forceMount,children,container}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogPortal",__scopeDialog);return(0,react.createElement)($5d3850c4d0b4e6c7$var$PortalProvider,{scope:__scopeDialog,forceMount},react.Children.map(children,(child=>(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},(0,react.createElement)(react_portal_dist.h,{asChild:!0,container},child)))))},$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=(0,react.forwardRef)(((props,forwardedRef)=>{const portalContext=$5d3850c4d0b4e6c7$var$usePortalContext("DialogOverlay",props.__scopeDialog),{forceMount=portalContext.forceMount,...overlayProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogOverlay",props.__scopeDialog);return context.modal?(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogOverlayImpl,(0,esm_extends.Z)({},overlayProps,{ref:forwardedRef}))):null})),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDialog,...overlayProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogOverlay",__scopeDialog);return(0,react.createElement)(Combination.Z,{as:react_slot_dist.g7,allowPinchZoom:!0,shards:[context.contentRef]},(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"data-state":$5d3850c4d0b4e6c7$var$getState(context.open)},overlayProps,{ref:forwardedRef,style:{pointerEvents:"auto",...overlayProps.style}})))})),$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=(0,react.forwardRef)(((props,forwardedRef)=>{const portalContext=$5d3850c4d0b4e6c7$var$usePortalContext("DialogContent",props.__scopeDialog),{forceMount=portalContext.forceMount,...contentProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogContent",props.__scopeDialog);return(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},context.modal?(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogContentModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})):(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogContentNonModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})))})),$5d3850c4d0b4e6c7$var$DialogContentModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogContent",props.__scopeDialog),contentRef=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,context.contentRef,contentRef);return(0,react.useEffect)((()=>{const content=contentRef.current;if(content)return(0,es2015.Ry)(content)}),[]),(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogContentImpl,(0,esm_extends.Z)({},props,{ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,dist.M)(props.onCloseAutoFocus,(event=>{var _context$triggerRef$c;event.preventDefault(),null===(_context$triggerRef$c=context.triggerRef.current)||void 0===_context$triggerRef$c||_context$triggerRef$c.focus()})),onPointerDownOutside:(0,dist.M)(props.onPointerDownOutside,(event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey;(2===originalEvent.button||ctrlLeftClick)&&event.preventDefault()})),onFocusOutside:(0,dist.M)(props.onFocusOutside,(event=>event.preventDefault()))}))})),$5d3850c4d0b4e6c7$var$DialogContentNonModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogContent",props.__scopeDialog),hasInteractedOutsideRef=(0,react.useRef)(!1),hasPointerDownOutsideRef=(0,react.useRef)(!1);return(0,react.createElement)($5d3850c4d0b4e6c7$var$DialogContentImpl,(0,esm_extends.Z)({},props,{ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:event=>{var _props$onCloseAutoFoc,_context$triggerRef$c2;(null===(_props$onCloseAutoFoc=props.onCloseAutoFocus)||void 0===_props$onCloseAutoFoc||_props$onCloseAutoFoc.call(props,event),event.defaultPrevented)||(hasInteractedOutsideRef.current||null===(_context$triggerRef$c2=context.triggerRef.current)||void 0===_context$triggerRef$c2||_context$triggerRef$c2.focus(),event.preventDefault());hasInteractedOutsideRef.current=!1,hasPointerDownOutsideRef.current=!1},onInteractOutside:event=>{var _props$onInteractOuts,_context$triggerRef$c3;null===(_props$onInteractOuts=props.onInteractOutside)||void 0===_props$onInteractOuts||_props$onInteractOuts.call(props,event),event.defaultPrevented||(hasInteractedOutsideRef.current=!0,"pointerdown"===event.detail.originalEvent.type&&(hasPointerDownOutsideRef.current=!0));const target=event.target;(null===(_context$triggerRef$c3=context.triggerRef.current)||void 0===_context$triggerRef$c3?void 0:_context$triggerRef$c3.contains(target))&&event.preventDefault(),"focusin"===event.detail.originalEvent.type&&hasPointerDownOutsideRef.current&&event.preventDefault()}}))})),$5d3850c4d0b4e6c7$var$DialogContentImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDialog,trapFocus,onOpenAutoFocus,onCloseAutoFocus,...contentProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogContent",__scopeDialog),contentRef=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,contentRef);return(0,react_focus_guards_dist.EW)(),(0,react.createElement)(react.Fragment,null,(0,react.createElement)(react_focus_scope_dist.M,{asChild:!0,loop:!0,trapped:trapFocus,onMountAutoFocus:onOpenAutoFocus,onUnmountAutoFocus:onCloseAutoFocus},(0,react.createElement)(react_dismissable_layer_dist.XB,(0,esm_extends.Z)({role:"dialog",id:context.contentId,"aria-describedby":context.descriptionId,"aria-labelledby":context.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState(context.open)},contentProps,{ref:composedRefs,onDismiss:()=>context.onOpenChange(!1)}))),!1)})),$5d3850c4d0b4e6c7$export$16f7638e4a34b909=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDialog,...titleProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogTitle",__scopeDialog);return(0,react.createElement)(react_primitive_dist.WV.h2,(0,esm_extends.Z)({id:context.titleId},titleProps,{ref:forwardedRef}))})),$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDialog,...closeProps}=props,context=$5d3850c4d0b4e6c7$var$useDialogContext("DialogClose",__scopeDialog);return(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button"},closeProps,{ref:forwardedRef,onClick:(0,dist.M)(props.onClick,(()=>context.onOpenChange(!1)))}))}));function $5d3850c4d0b4e6c7$var$getState(open){return open?"open":"closed"}const[$5d3850c4d0b4e6c7$export$69b62a49393917d6,$5d3850c4d0b4e6c7$var$useWarningContext]=(0,react_context_dist.k)("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"}),$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf;var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dist_esm=__webpack_require__("./node_modules/@tldraw/editor/dist-esm/index.mjs");const AssetUrlsContext=(0,react.createContext)(null);function AssetUrlsProvider({assetUrls,children}){return(0,jsx_runtime.jsx)(AssetUrlsContext.Provider,{value:assetUrls,children})}function useAssetUrls(){const assetUrls=(0,react.useContext)(AssetUrlsContext);if(!assetUrls)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return assetUrls}const DEFAULT_TRANSLATION={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},EN_TRANSLATION={locale:"en",label:"English",messages:DEFAULT_TRANSLATION};const TranslationsContext=react.createContext({}),useCurrentTranslation=()=>react.useContext(TranslationsContext),TranslationProvider=(0,dist_esm.jas)((function TranslationProvider2({overrides,children}){const locale=(0,dist_esm.jE2)().user.locale,getAssetUrl=useAssetUrls(),[currentTranslation,setCurrentTranslation]=react.useState((()=>overrides&&overrides.en?{locale:"en",label:"English",messages:{...DEFAULT_TRANSLATION,...overrides.en}}:{locale:"en",label:"English",messages:DEFAULT_TRANSLATION}));return react.useEffect((()=>{let isCancelled=!1;return async function loadTranslation(){const translation=await async function fetchTranslation(locale,assetUrls){if(!(await fetch(assetUrls.translations.en)).ok)return console.warn("No main translations found."),EN_TRANSLATION;if("en"===locale)return EN_TRANSLATION;const language=dist_esm.a2c.find((t=>t.locale===locale));if(!language)return console.warn(`No translation found for locale ${locale}`),EN_TRANSLATION;const res=await fetch(assetUrls.translations[language.locale]),messages=await res.json();if(!messages)return console.warn(`No messages found for locale ${locale}`),EN_TRANSLATION;const missing=[];for(const key in EN_TRANSLATION.messages)messages[key]||missing.push(key);return missing.length,{locale,label:language.label,messages:{...EN_TRANSLATION.messages,...messages}}}(locale,getAssetUrl);translation&&!isCancelled&&(overrides&&overrides[locale]?setCurrentTranslation({...translation,messages:{...translation.messages,...overrides[locale]}}):setCurrentTranslation(translation))}(),()=>{isCancelled=!0}}),[getAssetUrl,locale,overrides]),(0,jsx_runtime.jsx)(TranslationsContext.Provider,{value:currentTranslation,children})}));function useTranslation_useTranslation(){const translation=useCurrentTranslation();return react.useCallback((function msg(id){return translation.messages[id]??id}),[translation])}function Spinner(props){return(0,jsx_runtime.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",...props,children:(0,jsx_runtime.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,jsx_runtime.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,jsx_runtime.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Icon_Icon=(0,react.memo)((function Icon2({small,invertIcon,icon,color,className,...props}){const asset=useAssetUrls().icons[icon],ref=(0,react.useRef)(null);return(0,react.useLayoutEffect)((()=>{ref?.current&&(ref.current.style.webkitMask=`url(${asset}) center 100% / 100% no-repeat`)}),[ref,asset]),(0,jsx_runtime.jsx)("div",{...props,ref,className:classnames_default()("tlui-icon",{"tlui-icon__small":small},className),style:{color,mask:`url(${asset}) center 100% / 100% no-repeat`,transform:invertIcon?"scale(-1, 1)":void 0}})}));const isDarwin="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,cmdKey=isDarwin?"":"Ctrl",altKey=isDarwin?"":"Alt";function kbdStr(str){return" "+str.split(",")[0].split("").map((sub=>{const subStr=sub.replace(/\$/g,cmdKey).replace(/\?/g,altKey).replace(/!/g,"");return subStr[0].toUpperCase()+subStr.slice(1)})).join("")}function Kbd({children}){return(0,jsx_runtime.jsx)("kbd",{className:"tlui-kbd",children:(str=children,str.split(",")[0].split("").map((sub=>{const subStr=sub.replace(/\$/g,cmdKey).replace(/\?/g,altKey).replace(/!/g,"");return subStr[0].toUpperCase()+subStr.slice(1)}))).map(((k,i)=>(0,jsx_runtime.jsx)("span",{children:k},i)))});var str}const Button=react.forwardRef((function Button2({label,icon,invertIcon,iconLeft,smallIcon,kbd,isChecked=!1,type="normal",children,spinner,...props},ref){const msg=useTranslation_useTranslation(),labelStr=label?msg(label):"";return(0,jsx_runtime.jsxs)("button",{ref,draggable:!1,type:"button",...props,title:props.title??labelStr,className:classnames_default()("tlui-button",`tlui-button__${type}`,props.className),children:[iconLeft&&(0,jsx_runtime.jsx)(Icon_Icon,{icon:iconLeft,className:"tlui-icon-left",small:!0}),children,label&&(0,jsx_runtime.jsxs)("span",{draggable:!1,children:[labelStr,isChecked&&(0,jsx_runtime.jsx)(Icon_Icon,{icon:"check"})]}),kbd&&(0,jsx_runtime.jsx)(Kbd,{children:kbd}),icon&&!spinner&&(0,jsx_runtime.jsx)(Icon_Icon,{icon,small:!!label||smallIcon,invertIcon}),spinner&&(0,jsx_runtime.jsx)(Spinner,{})]})}));function Header({className,children}){return(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-dialog__header",className),children})}function Title({className,children}){return(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$16f7638e4a34b909,{dir:"ltr",className:classnames_default()("tlui-dialog__header__title",className),children})}function CloseButton(){return(0,jsx_runtime.jsx)("div",{className:"tlui-dialog__header__close",children:(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,jsx_runtime.jsx)(Button,{"aria-label":"Close",onTouchEnd:e=>e.target.click(),children:(0,jsx_runtime.jsx)(Icon_Icon,{small:!0,icon:"cross-2"})})})})}function Body({className,children,style}){return(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-dialog__body",className),style,children})}function Footer({className,children}){return(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-dialog__footer",className),children})}var react_collection_dist=__webpack_require__("./node_modules/@radix-ui/react-collection/dist/index.mjs"),react_direction_dist=__webpack_require__("./node_modules/@radix-ui/react-direction/dist/index.mjs"),react_popper_dist=__webpack_require__("./node_modules/@radix-ui/react-popper/dist/index.mjs"),react_roving_focus_dist=__webpack_require__("./node_modules/@radix-ui/react-roving-focus/dist/index.mjs"),react_use_callback_ref_dist=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs");const $6cc32821e9371a1c$var$SELECTION_KEYS=["Enter"," "],$6cc32821e9371a1c$var$LAST_KEYS=["ArrowUp","PageDown","End"],$6cc32821e9371a1c$var$FIRST_LAST_KEYS=["ArrowDown","PageUp","Home",...$6cc32821e9371a1c$var$LAST_KEYS],$6cc32821e9371a1c$var$SUB_OPEN_KEYS={ltr:[...$6cc32821e9371a1c$var$SELECTION_KEYS,"ArrowRight"],rtl:[...$6cc32821e9371a1c$var$SELECTION_KEYS,"ArrowLeft"]},$6cc32821e9371a1c$var$SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},[$6cc32821e9371a1c$var$Collection,$6cc32821e9371a1c$var$useCollection,$6cc32821e9371a1c$var$createCollectionScope]=(0,react_collection_dist.B)("Menu"),[$6cc32821e9371a1c$var$createMenuContext,$6cc32821e9371a1c$export$4027731b685e72eb]=(0,react_context_dist.b)("Menu",[$6cc32821e9371a1c$var$createCollectionScope,react_popper_dist.D7,react_roving_focus_dist.Pc]),$6cc32821e9371a1c$var$usePopperScope=(0,react_popper_dist.D7)(),$6cc32821e9371a1c$var$useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),[$6cc32821e9371a1c$var$MenuProvider,$6cc32821e9371a1c$var$useMenuContext]=$6cc32821e9371a1c$var$createMenuContext("Menu"),[$6cc32821e9371a1c$var$MenuRootProvider,$6cc32821e9371a1c$var$useMenuRootContext]=$6cc32821e9371a1c$var$createMenuContext("Menu"),$6cc32821e9371a1c$export$d9b273488cd8ce6f=props=>{const{__scopeMenu,open=!1,children,dir,onOpenChange,modal=!0}=props,popperScope=$6cc32821e9371a1c$var$usePopperScope(__scopeMenu),[content,setContent]=(0,react.useState)(null),isUsingKeyboardRef=(0,react.useRef)(!1),handleOpenChange=(0,react_use_callback_ref_dist.W)(onOpenChange),direction=(0,react_direction_dist.gm)(dir);return(0,react.useEffect)((()=>{const handleKeyDown=()=>{isUsingKeyboardRef.current=!0,document.addEventListener("pointerdown",handlePointer,{capture:!0,once:!0}),document.addEventListener("pointermove",handlePointer,{capture:!0,once:!0})},handlePointer=()=>isUsingKeyboardRef.current=!1;return document.addEventListener("keydown",handleKeyDown,{capture:!0}),()=>{document.removeEventListener("keydown",handleKeyDown,{capture:!0}),document.removeEventListener("pointerdown",handlePointer,{capture:!0}),document.removeEventListener("pointermove",handlePointer,{capture:!0})}}),[]),(0,react.createElement)(react_popper_dist.fC,popperScope,(0,react.createElement)($6cc32821e9371a1c$var$MenuProvider,{scope:__scopeMenu,open,onOpenChange:handleOpenChange,content,onContentChange:setContent},(0,react.createElement)($6cc32821e9371a1c$var$MenuRootProvider,{scope:__scopeMenu,onClose:(0,react.useCallback)((()=>handleOpenChange(!1)),[handleOpenChange]),isUsingKeyboardRef,dir:direction,modal},children)))},$6cc32821e9371a1c$export$9fa5ebd18bee4d43=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeMenu,...anchorProps}=props,popperScope=$6cc32821e9371a1c$var$usePopperScope(__scopeMenu);return(0,react.createElement)(react_popper_dist.ee,(0,esm_extends.Z)({},popperScope,anchorProps,{ref:forwardedRef}))})),[$6cc32821e9371a1c$var$PortalProvider,$6cc32821e9371a1c$var$usePortalContext]=$6cc32821e9371a1c$var$createMenuContext("MenuPortal",{forceMount:void 0}),$6cc32821e9371a1c$export$793392f970497feb=props=>{const{__scopeMenu,forceMount,children,container}=props,context=$6cc32821e9371a1c$var$useMenuContext("MenuPortal",__scopeMenu);return(0,react.createElement)($6cc32821e9371a1c$var$PortalProvider,{scope:__scopeMenu,forceMount},(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},(0,react.createElement)(react_portal_dist.h,{asChild:!0,container},children)))},[$6cc32821e9371a1c$var$MenuContentProvider,$6cc32821e9371a1c$var$useMenuContentContext]=$6cc32821e9371a1c$var$createMenuContext("MenuContent"),$6cc32821e9371a1c$export$479f0f2f71193efe=(0,react.forwardRef)(((props,forwardedRef)=>{const portalContext=$6cc32821e9371a1c$var$usePortalContext("MenuContent",props.__scopeMenu),{forceMount=portalContext.forceMount,...contentProps}=props,context=$6cc32821e9371a1c$var$useMenuContext("MenuContent",props.__scopeMenu),rootContext=$6cc32821e9371a1c$var$useMenuRootContext("MenuContent",props.__scopeMenu);return(0,react.createElement)($6cc32821e9371a1c$var$Collection.Provider,{scope:props.__scopeMenu},(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},(0,react.createElement)($6cc32821e9371a1c$var$Collection.Slot,{scope:props.__scopeMenu},rootContext.modal?(0,react.createElement)($6cc32821e9371a1c$var$MenuRootContentModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})):(0,react.createElement)($6cc32821e9371a1c$var$MenuRootContentNonModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})))))})),$6cc32821e9371a1c$var$MenuRootContentModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$6cc32821e9371a1c$var$useMenuContext("MenuContent",props.__scopeMenu),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref);return(0,react.useEffect)((()=>{const content=ref.current;if(content)return(0,es2015.Ry)(content)}),[]),(0,react.createElement)($6cc32821e9371a1c$var$MenuContentImpl,(0,esm_extends.Z)({},props,{ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:context.open,disableOutsideScroll:!0,onFocusOutside:(0,dist.M)(props.onFocusOutside,(event=>event.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>context.onOpenChange(!1)}))})),$6cc32821e9371a1c$var$MenuRootContentNonModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$6cc32821e9371a1c$var$useMenuContext("MenuContent",props.__scopeMenu);return(0,react.createElement)($6cc32821e9371a1c$var$MenuContentImpl,(0,esm_extends.Z)({},props,{ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>context.onOpenChange(!1)}))})),$6cc32821e9371a1c$var$MenuContentImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeMenu,loop=!1,trapFocus,onOpenAutoFocus,onCloseAutoFocus,disableOutsidePointerEvents,onEntryFocus,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,onDismiss,disableOutsideScroll,...contentProps}=props,context=$6cc32821e9371a1c$var$useMenuContext("MenuContent",__scopeMenu),rootContext=$6cc32821e9371a1c$var$useMenuRootContext("MenuContent",__scopeMenu),popperScope=$6cc32821e9371a1c$var$usePopperScope(__scopeMenu),rovingFocusGroupScope=$6cc32821e9371a1c$var$useRovingFocusGroupScope(__scopeMenu),getItems=$6cc32821e9371a1c$var$useCollection(__scopeMenu),[currentItemId,setCurrentItemId]=(0,react.useState)(null),contentRef=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,contentRef,context.onContentChange),timerRef=(0,react.useRef)(0),searchRef=(0,react.useRef)(""),pointerGraceTimerRef=(0,react.useRef)(0),pointerGraceIntentRef=(0,react.useRef)(null),pointerDirRef=(0,react.useRef)("right"),lastPointerXRef=(0,react.useRef)(0),ScrollLockWrapper=disableOutsideScroll?Combination.Z:react.Fragment,scrollLockWrapperProps=disableOutsideScroll?{as:react_slot_dist.g7,allowPinchZoom:!0}:void 0,handleTypeaheadSearch=key=>{var _items$find,_items$find2;const search=searchRef.current+key,items=getItems().filter((item=>!item.disabled)),currentItem=document.activeElement,currentMatch=null===(_items$find=items.find((item=>item.ref.current===currentItem)))||void 0===_items$find?void 0:_items$find.textValue,nextMatch=function $6cc32821e9371a1c$var$getNextMatch(values,search,currentMatch){const isRepeated=search.length>1&&Array.from(search).every((char=>char===search[0])),normalizedSearch=isRepeated?search[0]:search,currentMatchIndex=currentMatch?values.indexOf(currentMatch):-1;let wrappedValues=function $6cc32821e9371a1c$var$wrapArray(array,startIndex){return array.map(((_,index)=>array[(startIndex+index)%array.length]))}(values,Math.max(currentMatchIndex,0));1===normalizedSearch.length&&(wrappedValues=wrappedValues.filter((v=>v!==currentMatch)));const nextMatch=wrappedValues.find((value=>value.toLowerCase().startsWith(normalizedSearch.toLowerCase())));return nextMatch!==currentMatch?nextMatch:void 0}(items.map((item=>item.textValue)),search,currentMatch),newItem=null===(_items$find2=items.find((item=>item.textValue===nextMatch)))||void 0===_items$find2?void 0:_items$find2.ref.current;!function updateSearch(value){searchRef.current=value,window.clearTimeout(timerRef.current),""!==value&&(timerRef.current=window.setTimeout((()=>updateSearch("")),1e3))}(search),newItem&&setTimeout((()=>newItem.focus()))};(0,react.useEffect)((()=>()=>window.clearTimeout(timerRef.current)),[]),(0,react_focus_guards_dist.EW)();const isPointerMovingToSubmenu=(0,react.useCallback)((event=>{var _pointerGraceIntentRe,_pointerGraceIntentRe2;return pointerDirRef.current===(null===(_pointerGraceIntentRe=pointerGraceIntentRef.current)||void 0===_pointerGraceIntentRe?void 0:_pointerGraceIntentRe.side)&&function $6cc32821e9371a1c$var$isPointerInGraceArea(event,area){if(!area)return!1;const cursorPos={x:event.clientX,y:event.clientY};return function $6cc32821e9371a1c$var$isPointInPolygon(point,polygon){const{x,y}=point;let inside=!1;for(let i=0,j=polygon.length-1;i<polygon.length;j=i++){const xi=polygon[i].x,yi=polygon[i].y,xj=polygon[j].x,yj=polygon[j].y;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(inside=!inside)}return inside}(cursorPos,area)}(event,null===(_pointerGraceIntentRe2=pointerGraceIntentRef.current)||void 0===_pointerGraceIntentRe2?void 0:_pointerGraceIntentRe2.area)}),[]);return(0,react.createElement)($6cc32821e9371a1c$var$MenuContentProvider,{scope:__scopeMenu,searchRef,onItemEnter:(0,react.useCallback)((event=>{isPointerMovingToSubmenu(event)&&event.preventDefault()}),[isPointerMovingToSubmenu]),onItemLeave:(0,react.useCallback)((event=>{var _contentRef$current;isPointerMovingToSubmenu(event)||(null===(_contentRef$current=contentRef.current)||void 0===_contentRef$current||_contentRef$current.focus(),setCurrentItemId(null))}),[isPointerMovingToSubmenu]),onTriggerLeave:(0,react.useCallback)((event=>{isPointerMovingToSubmenu(event)&&event.preventDefault()}),[isPointerMovingToSubmenu]),pointerGraceTimerRef,onPointerGraceIntentChange:(0,react.useCallback)((intent=>{pointerGraceIntentRef.current=intent}),[])},(0,react.createElement)(ScrollLockWrapper,scrollLockWrapperProps,(0,react.createElement)(react_focus_scope_dist.M,{asChild:!0,trapped:trapFocus,onMountAutoFocus:(0,dist.M)(onOpenAutoFocus,(event=>{var _contentRef$current2;event.preventDefault(),null===(_contentRef$current2=contentRef.current)||void 0===_contentRef$current2||_contentRef$current2.focus()})),onUnmountAutoFocus:onCloseAutoFocus},(0,react.createElement)(react_dismissable_layer_dist.XB,{asChild:!0,disableOutsidePointerEvents,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,onDismiss},(0,react.createElement)(react_roving_focus_dist.fC,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{dir:rootContext.dir,orientation:"vertical",loop,currentTabStopId:currentItemId,onCurrentTabStopIdChange:setCurrentItemId,onEntryFocus:(0,dist.M)(onEntryFocus,(event=>{rootContext.isUsingKeyboardRef.current||event.preventDefault()}))}),(0,react.createElement)(react_popper_dist.VY,(0,esm_extends.Z)({role:"menu","aria-orientation":"vertical","data-state":$6cc32821e9371a1c$var$getOpenState(context.open),"data-radix-menu-content":"",dir:rootContext.dir},popperScope,contentProps,{ref:composedRefs,style:{outline:"none",...contentProps.style},onKeyDown:(0,dist.M)(contentProps.onKeyDown,(event=>{const isKeyDownInside=event.target.closest("[data-radix-menu-content]")===event.currentTarget,isModifierKey=event.ctrlKey||event.altKey||event.metaKey,isCharacterKey=1===event.key.length;isKeyDownInside&&("Tab"===event.key&&event.preventDefault(),!isModifierKey&&isCharacterKey&&handleTypeaheadSearch(event.key));const content=contentRef.current;if(event.target!==content)return;if(!$6cc32821e9371a1c$var$FIRST_LAST_KEYS.includes(event.key))return;event.preventDefault();const candidateNodes=getItems().filter((item=>!item.disabled)).map((item=>item.ref.current));$6cc32821e9371a1c$var$LAST_KEYS.includes(event.key)&&candidateNodes.reverse(),function $6cc32821e9371a1c$var$focusFirst(candidates){const PREVIOUSLY_FOCUSED_ELEMENT=document.activeElement;for(const candidate of candidates){if(candidate===PREVIOUSLY_FOCUSED_ELEMENT)return;if(candidate.focus(),document.activeElement!==PREVIOUSLY_FOCUSED_ELEMENT)return}}(candidateNodes)})),onBlur:(0,dist.M)(props.onBlur,(event=>{event.currentTarget.contains(event.target)||(window.clearTimeout(timerRef.current),searchRef.current="")})),onPointerMove:(0,dist.M)(props.onPointerMove,$6cc32821e9371a1c$var$whenMouse((event=>{const target=event.target,pointerXHasChanged=lastPointerXRef.current!==event.clientX;if(event.currentTarget.contains(target)&&pointerXHasChanged){const newDir=event.clientX>lastPointerXRef.current?"right":"left";pointerDirRef.current=newDir,lastPointerXRef.current=event.clientX}})))})))))))})),$6cc32821e9371a1c$export$22a631d1f72787bb=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeMenu,...groupProps}=props;return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({role:"group"},groupProps,{ref:forwardedRef}))})),$6cc32821e9371a1c$export$2ce376c2cc3355c8=(0,react.forwardRef)(((props,forwardedRef)=>{const{disabled=!1,onSelect,...itemProps}=props,ref=(0,react.useRef)(null),rootContext=$6cc32821e9371a1c$var$useMenuRootContext("MenuItem",props.__scopeMenu),contentContext=$6cc32821e9371a1c$var$useMenuContentContext("MenuItem",props.__scopeMenu),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref),isPointerDownRef=(0,react.useRef)(!1);return(0,react.createElement)($6cc32821e9371a1c$var$MenuItemImpl,(0,esm_extends.Z)({},itemProps,{ref:composedRefs,disabled,onClick:(0,dist.M)(props.onClick,(()=>{const menuItem=ref.current;if(!disabled&&menuItem){const itemSelectEvent=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});menuItem.addEventListener("menu.itemSelect",(event=>null==onSelect?void 0:onSelect(event)),{once:!0}),(0,react_primitive_dist.jH)(menuItem,itemSelectEvent),itemSelectEvent.defaultPrevented?isPointerDownRef.current=!1:rootContext.onClose()}})),onPointerDown:event=>{var _props$onPointerDown;null===(_props$onPointerDown=props.onPointerDown)||void 0===_props$onPointerDown||_props$onPointerDown.call(props,event),isPointerDownRef.current=!0},onPointerUp:(0,dist.M)(props.onPointerUp,(event=>{var _event$currentTarget;isPointerDownRef.current||null===(_event$currentTarget=event.currentTarget)||void 0===_event$currentTarget||_event$currentTarget.click()})),onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{const isTypingAhead=""!==contentContext.searchRef.current;disabled||isTypingAhead&&" "===event.key||$6cc32821e9371a1c$var$SELECTION_KEYS.includes(event.key)&&(event.currentTarget.click(),event.preventDefault())}))}))})),$6cc32821e9371a1c$var$MenuItemImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeMenu,disabled=!1,textValue,...itemProps}=props,contentContext=$6cc32821e9371a1c$var$useMenuContentContext("MenuItem",__scopeMenu),rovingFocusGroupScope=$6cc32821e9371a1c$var$useRovingFocusGroupScope(__scopeMenu),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref),[isFocused,setIsFocused]=(0,react.useState)(!1),[textContent,setTextContent]=(0,react.useState)("");return(0,react.useEffect)((()=>{const menuItem=ref.current;var _menuItem$textContent;menuItem&&setTextContent((null!==(_menuItem$textContent=menuItem.textContent)&&void 0!==_menuItem$textContent?_menuItem$textContent:"").trim())}),[itemProps.children]),(0,react.createElement)($6cc32821e9371a1c$var$Collection.ItemSlot,{scope:__scopeMenu,disabled,textValue:null!=textValue?textValue:textContent},(0,react.createElement)(react_roving_focus_dist.ck,(0,esm_extends.Z)({asChild:!0},rovingFocusGroupScope,{focusable:!disabled}),(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({role:"menuitem","data-highlighted":isFocused?"":void 0,"aria-disabled":disabled||void 0,"data-disabled":disabled?"":void 0},itemProps,{ref:composedRefs,onPointerMove:(0,dist.M)(props.onPointerMove,$6cc32821e9371a1c$var$whenMouse((event=>{if(disabled)contentContext.onItemLeave(event);else if(contentContext.onItemEnter(event),!event.defaultPrevented){event.currentTarget.focus()}}))),onPointerLeave:(0,dist.M)(props.onPointerLeave,$6cc32821e9371a1c$var$whenMouse((event=>contentContext.onItemLeave(event)))),onFocus:(0,dist.M)(props.onFocus,(()=>setIsFocused(!0))),onBlur:(0,dist.M)(props.onBlur,(()=>setIsFocused(!1)))}))))})),$6cc32821e9371a1c$export$f6f243521332502d=(0,react.forwardRef)(((props,forwardedRef)=>{const{checked=!1,onCheckedChange,...checkboxItemProps}=props;return(0,react.createElement)($6cc32821e9371a1c$var$ItemIndicatorProvider,{scope:props.__scopeMenu,checked},(0,react.createElement)($6cc32821e9371a1c$export$2ce376c2cc3355c8,(0,esm_extends.Z)({role:"menuitemcheckbox","aria-checked":$6cc32821e9371a1c$var$isIndeterminate(checked)?"mixed":checked},checkboxItemProps,{ref:forwardedRef,"data-state":$6cc32821e9371a1c$var$getCheckedState(checked),onSelect:(0,dist.M)(checkboxItemProps.onSelect,(()=>null==onCheckedChange?void 0:onCheckedChange(!!$6cc32821e9371a1c$var$isIndeterminate(checked)||!checked)),{checkForDefaultPrevented:!1})})))})),[$6cc32821e9371a1c$var$RadioGroupProvider,$6cc32821e9371a1c$var$useRadioGroupContext]=$6cc32821e9371a1c$var$createMenuContext("MenuRadioGroup",{value:void 0,onValueChange:()=>{}}),[$6cc32821e9371a1c$var$ItemIndicatorProvider,$6cc32821e9371a1c$var$useItemIndicatorContext]=$6cc32821e9371a1c$var$createMenuContext("MenuItemIndicator",{checked:!1}),$6cc32821e9371a1c$export$a2593e23056970a3=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeMenu,forceMount,...itemIndicatorProps}=props,indicatorContext=$6cc32821e9371a1c$var$useItemIndicatorContext("MenuItemIndicator",__scopeMenu);return(0,react.createElement)(react_presence_dist.z,{present:forceMount||$6cc32821e9371a1c$var$isIndeterminate(indicatorContext.checked)||!0===indicatorContext.checked},(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({},itemIndicatorProps,{ref:forwardedRef,"data-state":$6cc32821e9371a1c$var$getCheckedState(indicatorContext.checked)})))})),[$6cc32821e9371a1c$var$MenuSubProvider,$6cc32821e9371a1c$var$useMenuSubContext]=$6cc32821e9371a1c$var$createMenuContext("MenuSub"),$6cc32821e9371a1c$export$71bdb9d1e2909932=props=>{const{__scopeMenu,children,open=!1,onOpenChange}=props,parentMenuContext=$6cc32821e9371a1c$var$useMenuContext("MenuSub",__scopeMenu),popperScope=$6cc32821e9371a1c$var$usePopperScope(__scopeMenu),[trigger,setTrigger]=(0,react.useState)(null),[content,setContent]=(0,react.useState)(null),handleOpenChange=(0,react_use_callback_ref_dist.W)(onOpenChange);return(0,react.useEffect)((()=>(!1===parentMenuContext.open&&handleOpenChange(!1),()=>handleOpenChange(!1))),[parentMenuContext.open,handleOpenChange]),(0,react.createElement)(react_popper_dist.fC,popperScope,(0,react.createElement)($6cc32821e9371a1c$var$MenuProvider,{scope:__scopeMenu,open,onOpenChange:handleOpenChange,content,onContentChange:setContent},(0,react.createElement)($6cc32821e9371a1c$var$MenuSubProvider,{scope:__scopeMenu,contentId:(0,react_id_dist.M)(),triggerId:(0,react_id_dist.M)(),trigger,onTriggerChange:setTrigger},children)))},$6cc32821e9371a1c$export$5fbbb3ba7297405f=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$6cc32821e9371a1c$var$useMenuContext("MenuSubTrigger",props.__scopeMenu),rootContext=$6cc32821e9371a1c$var$useMenuRootContext("MenuSubTrigger",props.__scopeMenu),subContext=$6cc32821e9371a1c$var$useMenuSubContext("MenuSubTrigger",props.__scopeMenu),contentContext=$6cc32821e9371a1c$var$useMenuContentContext("MenuSubTrigger",props.__scopeMenu),openTimerRef=(0,react.useRef)(null),{pointerGraceTimerRef,onPointerGraceIntentChange}=contentContext,scope={__scopeMenu:props.__scopeMenu},clearOpenTimer=(0,react.useCallback)((()=>{openTimerRef.current&&window.clearTimeout(openTimerRef.current),openTimerRef.current=null}),[]);return(0,react.useEffect)((()=>clearOpenTimer),[clearOpenTimer]),(0,react.useEffect)((()=>{const pointerGraceTimer=pointerGraceTimerRef.current;return()=>{window.clearTimeout(pointerGraceTimer),onPointerGraceIntentChange(null)}}),[pointerGraceTimerRef,onPointerGraceIntentChange]),(0,react.createElement)($6cc32821e9371a1c$export$9fa5ebd18bee4d43,(0,esm_extends.Z)({asChild:!0},scope),(0,react.createElement)($6cc32821e9371a1c$var$MenuItemImpl,(0,esm_extends.Z)({id:subContext.triggerId,"aria-haspopup":"menu","aria-expanded":context.open,"aria-controls":subContext.contentId,"data-state":$6cc32821e9371a1c$var$getOpenState(context.open)},props,{ref:(0,react_compose_refs_dist.F)(forwardedRef,subContext.onTriggerChange),onClick:event=>{var _props$onClick;null===(_props$onClick=props.onClick)||void 0===_props$onClick||_props$onClick.call(props,event),props.disabled||event.defaultPrevented||(event.currentTarget.focus(),context.open||context.onOpenChange(!0))},onPointerMove:(0,dist.M)(props.onPointerMove,$6cc32821e9371a1c$var$whenMouse((event=>{contentContext.onItemEnter(event),event.defaultPrevented||props.disabled||context.open||openTimerRef.current||(contentContext.onPointerGraceIntentChange(null),openTimerRef.current=window.setTimeout((()=>{context.onOpenChange(!0),clearOpenTimer()}),100))}))),onPointerLeave:(0,dist.M)(props.onPointerLeave,$6cc32821e9371a1c$var$whenMouse((event=>{var _context$content;clearOpenTimer();const contentRect=null===(_context$content=context.content)||void 0===_context$content?void 0:_context$content.getBoundingClientRect();if(contentRect){var _context$content2;const side=null===(_context$content2=context.content)||void 0===_context$content2?void 0:_context$content2.dataset.side,rightSide="right"===side,bleed=rightSide?-5:5,contentNearEdge=contentRect[rightSide?"left":"right"],contentFarEdge=contentRect[rightSide?"right":"left"];contentContext.onPointerGraceIntentChange({area:[{x:event.clientX+bleed,y:event.clientY},{x:contentNearEdge,y:contentRect.top},{x:contentFarEdge,y:contentRect.top},{x:contentFarEdge,y:contentRect.bottom},{x:contentNearEdge,y:contentRect.bottom}],side}),window.clearTimeout(pointerGraceTimerRef.current),pointerGraceTimerRef.current=window.setTimeout((()=>contentContext.onPointerGraceIntentChange(null)),300)}else{if(contentContext.onTriggerLeave(event),event.defaultPrevented)return;contentContext.onPointerGraceIntentChange(null)}}))),onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{const isTypingAhead=""!==contentContext.searchRef.current;var _context$content3;props.disabled||isTypingAhead&&" "===event.key||$6cc32821e9371a1c$var$SUB_OPEN_KEYS[rootContext.dir].includes(event.key)&&(context.onOpenChange(!0),null===(_context$content3=context.content)||void 0===_context$content3||_context$content3.focus(),event.preventDefault())}))})))})),$6cc32821e9371a1c$export$e7142ab31822bde6=(0,react.forwardRef)(((props,forwardedRef)=>{const portalContext=$6cc32821e9371a1c$var$usePortalContext("MenuContent",props.__scopeMenu),{forceMount=portalContext.forceMount,...subContentProps}=props,context=$6cc32821e9371a1c$var$useMenuContext("MenuContent",props.__scopeMenu),rootContext=$6cc32821e9371a1c$var$useMenuRootContext("MenuContent",props.__scopeMenu),subContext=$6cc32821e9371a1c$var$useMenuSubContext("MenuSubContent",props.__scopeMenu),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref);return(0,react.createElement)($6cc32821e9371a1c$var$Collection.Provider,{scope:props.__scopeMenu},(0,react.createElement)(react_presence_dist.z,{present:forceMount||context.open},(0,react.createElement)($6cc32821e9371a1c$var$Collection.Slot,{scope:props.__scopeMenu},(0,react.createElement)($6cc32821e9371a1c$var$MenuContentImpl,(0,esm_extends.Z)({id:subContext.contentId,"aria-labelledby":subContext.triggerId},subContentProps,{ref:composedRefs,align:"start",side:"rtl"===rootContext.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:event=>{var _ref$current;rootContext.isUsingKeyboardRef.current&&(null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.focus()),event.preventDefault()},onCloseAutoFocus:event=>event.preventDefault(),onFocusOutside:(0,dist.M)(props.onFocusOutside,(event=>{event.target!==subContext.trigger&&context.onOpenChange(!1)})),onEscapeKeyDown:(0,dist.M)(props.onEscapeKeyDown,(event=>{rootContext.onClose(),event.preventDefault()})),onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{const isKeyDownInside=event.currentTarget.contains(event.target),isCloseKey=$6cc32821e9371a1c$var$SUB_CLOSE_KEYS[rootContext.dir].includes(event.key);var _subContext$trigger;isKeyDownInside&&isCloseKey&&(context.onOpenChange(!1),null===(_subContext$trigger=subContext.trigger)||void 0===_subContext$trigger||_subContext$trigger.focus(),event.preventDefault())}))})))))}));function $6cc32821e9371a1c$var$getOpenState(open){return open?"open":"closed"}function $6cc32821e9371a1c$var$isIndeterminate(checked){return"indeterminate"===checked}function $6cc32821e9371a1c$var$getCheckedState(checked){return $6cc32821e9371a1c$var$isIndeterminate(checked)?"indeterminate":checked?"checked":"unchecked"}function $6cc32821e9371a1c$var$whenMouse(handler){return event=>"mouse"===event.pointerType?handler(event):void 0}const $6cc32821e9371a1c$export$be92b6f5f03c0fe9=$6cc32821e9371a1c$export$d9b273488cd8ce6f,$6cc32821e9371a1c$export$b688253958b8dfe7=$6cc32821e9371a1c$export$9fa5ebd18bee4d43,$6cc32821e9371a1c$export$602eac185826482c=$6cc32821e9371a1c$export$793392f970497feb,$6cc32821e9371a1c$export$7c6e2c02157bb7d2=$6cc32821e9371a1c$export$479f0f2f71193efe,$6cc32821e9371a1c$export$eb2fcfdbd7ba97d4=$6cc32821e9371a1c$export$22a631d1f72787bb,$6cc32821e9371a1c$export$6d08773d2e66f8f2=$6cc32821e9371a1c$export$2ce376c2cc3355c8,$6cc32821e9371a1c$export$16ce288f89fa631c=$6cc32821e9371a1c$export$f6f243521332502d,$6cc32821e9371a1c$export$c3468e2714d175fa=$6cc32821e9371a1c$export$a2593e23056970a3,$6cc32821e9371a1c$export$d7a01e11500dfb6f=$6cc32821e9371a1c$export$71bdb9d1e2909932,$6cc32821e9371a1c$export$2ea8a7a591ac5eac=$6cc32821e9371a1c$export$5fbbb3ba7297405f,$6cc32821e9371a1c$export$6d4de93b380beddf=$6cc32821e9371a1c$export$e7142ab31822bde6,[$d08ef79370b62062$var$createDropdownMenuContext,$d08ef79370b62062$export$c0623cd925aeb687]=(0,react_context_dist.b)("DropdownMenu",[$6cc32821e9371a1c$export$4027731b685e72eb]),$d08ef79370b62062$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$d08ef79370b62062$var$DropdownMenuProvider,$d08ef79370b62062$var$useDropdownMenuContext]=$d08ef79370b62062$var$createDropdownMenuContext("DropdownMenu"),$d08ef79370b62062$export$e44a253a59704894=props=>{const{__scopeDropdownMenu,children,dir,open:openProp,defaultOpen,onOpenChange,modal=!0}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu),triggerRef=(0,react.useRef)(null),[open=!1,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)($d08ef79370b62062$var$DropdownMenuProvider,{scope:__scopeDropdownMenu,triggerId:(0,react_id_dist.M)(),triggerRef,contentId:(0,react_id_dist.M)(),open,onOpenChange:setOpen,onOpenToggle:(0,react.useCallback)((()=>setOpen((prevOpen=>!prevOpen))),[setOpen]),modal},(0,react.createElement)($6cc32821e9371a1c$export$be92b6f5f03c0fe9,(0,esm_extends.Z)({},menuScope,{open,onOpenChange:setOpen,dir,modal}),children))},$d08ef79370b62062$export$d2469213b3befba9=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,disabled=!1,...triggerProps}=props,context=$d08ef79370b62062$var$useDropdownMenuContext("DropdownMenuTrigger",__scopeDropdownMenu),menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$b688253958b8dfe7,(0,esm_extends.Z)({asChild:!0},menuScope),(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button",id:context.triggerId,"aria-haspopup":"menu","aria-expanded":context.open,"aria-controls":context.open?context.contentId:void 0,"data-state":context.open?"open":"closed","data-disabled":disabled?"":void 0,disabled},triggerProps,{ref:(0,react_compose_refs_dist.F)(forwardedRef,context.triggerRef),onPointerDown:(0,dist.M)(props.onPointerDown,(event=>{disabled||0!==event.button||!1!==event.ctrlKey||(context.onOpenToggle(),context.open||event.preventDefault())})),onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{disabled||(["Enter"," "].includes(event.key)&&context.onOpenToggle(),"ArrowDown"===event.key&&context.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(event.key)&&event.preventDefault())}))})))})),$d08ef79370b62062$export$cd369b4d4d54efc9=props=>{const{__scopeDropdownMenu,...portalProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$602eac185826482c,(0,esm_extends.Z)({},menuScope,portalProps))},$d08ef79370b62062$export$6e76d93a37c01248=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...contentProps}=props,context=$d08ef79370b62062$var$useDropdownMenuContext("DropdownMenuContent",__scopeDropdownMenu),menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu),hasInteractedOutsideRef=(0,react.useRef)(!1);return(0,react.createElement)($6cc32821e9371a1c$export$7c6e2c02157bb7d2,(0,esm_extends.Z)({id:context.contentId,"aria-labelledby":context.triggerId},menuScope,contentProps,{ref:forwardedRef,onCloseAutoFocus:(0,dist.M)(props.onCloseAutoFocus,(event=>{var _context$triggerRef$c;hasInteractedOutsideRef.current||null===(_context$triggerRef$c=context.triggerRef.current)||void 0===_context$triggerRef$c||_context$triggerRef$c.focus(),hasInteractedOutsideRef.current=!1,event.preventDefault()})),onInteractOutside:(0,dist.M)(props.onInteractOutside,(event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey,isRightClick=2===originalEvent.button||ctrlLeftClick;context.modal&&!isRightClick||(hasInteractedOutsideRef.current=!0)})),style:{...props.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),$d08ef79370b62062$export$246bebaba3a2f70e=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...groupProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$eb2fcfdbd7ba97d4,(0,esm_extends.Z)({},menuScope,groupProps,{ref:forwardedRef}))})),$d08ef79370b62062$export$ed97964d1871885d=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...itemProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$6d08773d2e66f8f2,(0,esm_extends.Z)({},menuScope,itemProps,{ref:forwardedRef}))})),$d08ef79370b62062$export$53a69729da201fa9=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...checkboxItemProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$16ce288f89fa631c,(0,esm_extends.Z)({},menuScope,checkboxItemProps,{ref:forwardedRef}))})),$d08ef79370b62062$export$42355ae145153fb6=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...itemIndicatorProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$c3468e2714d175fa,(0,esm_extends.Z)({},menuScope,itemIndicatorProps,{ref:forwardedRef}))})),$d08ef79370b62062$export$21dcb7ec56f874cf=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...subTriggerProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$2ea8a7a591ac5eac,(0,esm_extends.Z)({},menuScope,subTriggerProps,{ref:forwardedRef}))})),$d08ef79370b62062$export$f34ec8bc2482cc5f=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeDropdownMenu,...subContentProps}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu);return(0,react.createElement)($6cc32821e9371a1c$export$6d4de93b380beddf,(0,esm_extends.Z)({},menuScope,subContentProps,{ref:forwardedRef,style:{...props.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),$d08ef79370b62062$export$be92b6f5f03c0fe9=$d08ef79370b62062$export$e44a253a59704894,$d08ef79370b62062$export$41fb9f06171c75f4=$d08ef79370b62062$export$d2469213b3befba9,$d08ef79370b62062$export$602eac185826482c=$d08ef79370b62062$export$cd369b4d4d54efc9,$d08ef79370b62062$export$7c6e2c02157bb7d2=$d08ef79370b62062$export$6e76d93a37c01248,$d08ef79370b62062$export$eb2fcfdbd7ba97d4=$d08ef79370b62062$export$246bebaba3a2f70e,$d08ef79370b62062$export$6d08773d2e66f8f2=$d08ef79370b62062$export$ed97964d1871885d,$d08ef79370b62062$export$16ce288f89fa631c=$d08ef79370b62062$export$53a69729da201fa9,$d08ef79370b62062$export$c3468e2714d175fa=$d08ef79370b62062$export$42355ae145153fb6,$d08ef79370b62062$export$d7a01e11500dfb6f=props=>{const{__scopeDropdownMenu,children,open:openProp,onOpenChange,defaultOpen}=props,menuScope=$d08ef79370b62062$var$useMenuScope(__scopeDropdownMenu),[open=!1,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)($6cc32821e9371a1c$export$d7a01e11500dfb6f,(0,esm_extends.Z)({},menuScope,{open,onOpenChange:setOpen}),children)},$d08ef79370b62062$export$2ea8a7a591ac5eac=$d08ef79370b62062$export$21dcb7ec56f874cf,$d08ef79370b62062$export$6d4de93b380beddf=$d08ef79370b62062$export$f34ec8bc2482cc5f,defaultEventHandler=()=>{},EventsContext=react.createContext({});function UiEventsProvider({onEvent,children}){return(0,jsx_runtime.jsx)(EventsContext.Provider,{value:onEvent??defaultEventHandler,children})}function useUiEvents(){return react.useContext(EventsContext)??defaultEventHandler}function useMenuIsOpen(id,cb){const editor=(0,dist_esm.jE2)(),rIsOpen=(0,react.useRef)(!1),trackEvent=useUiEvents(),onOpenChange=(0,react.useCallback)((isOpen2=>{rIsOpen.current=isOpen2,editor.batch((()=>{isOpen2?(editor.complete(),editor.addOpenMenu(id)):editor.updateInstanceState({openMenus:editor.openMenus.filter((m=>!m.startsWith(id)))}),cb?.(isOpen2)}))}),[editor,id,cb]);(0,react.useEffect)((()=>(rIsOpen.current&&(trackEvent("open-menu",{source:"unknown",id}),editor.addOpenMenu(id)),()=>{rIsOpen.current&&(editor.deleteOpenMenu(id),editor.openMenus.forEach((menuId=>{menuId.startsWith(id)&&(trackEvent("close-menu",{source:"unknown",id}),editor.deleteOpenMenu(menuId))})),rIsOpen.current=!1)})),[editor,id,trackEvent]);return[(0,dist_esm.HgN)("is menu open",(()=>editor.openMenus.includes(id)),[editor,id]),onOpenChange]}function Root({id,children,modal=!1}){const[open,onOpenChange]=useMenuIsOpen(id);return(0,jsx_runtime.jsx)($d08ef79370b62062$export$be92b6f5f03c0fe9,{open,dir:"ltr",modal,onOpenChange,children})}function Trigger({children,"data-testid":testId}){return(0,jsx_runtime.jsx)($d08ef79370b62062$export$41fb9f06171c75f4,{dir:"ltr","data-testid":testId,asChild:!0,onTouchEnd:e=>(0,dist_esm.PFJ)(e),children})}function Content({side="bottom",align="start",sideOffset=8,alignOffset=8,children}){const container=(0,dist_esm.uK4)();return(0,jsx_runtime.jsx)($d08ef79370b62062$export$602eac185826482c,{dir:"ltr",container,children:(0,jsx_runtime.jsx)($d08ef79370b62062$export$7c6e2c02157bb7d2,{className:"tlui-menu",align,sideOffset,side,alignOffset,collisionPadding:4,children})})}function Sub({id,children}){const[open,onOpenChange]=useMenuIsOpen(id);return(0,jsx_runtime.jsx)($d08ef79370b62062$export$d7a01e11500dfb6f,{open,onOpenChange,children})}function SubTrigger({label,"data-testid":testId,"data-direction":dataDirection}){return(0,jsx_runtime.jsx)($d08ef79370b62062$export$2ea8a7a591ac5eac,{dir:"ltr","data-direction":dataDirection,"data-testid":testId,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button tlui-menu__submenu__trigger",label,icon:"chevron-right"})})}function SubContent({alignOffset=0,sideOffset=5,children}){const container=(0,dist_esm.uK4)();return(0,jsx_runtime.jsx)($d08ef79370b62062$export$602eac185826482c,{container,dir:"ltr",children:(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d4de93b380beddf,{className:"tlui-menu tlui-menu__submenu__content",alignOffset,sideOffset,collisionPadding:4,children})})}function Group({children,size="medium"}){return(0,jsx_runtime.jsx)($d08ef79370b62062$export$eb2fcfdbd7ba97d4,{dir:"ltr",className:"tlui-menu__group","data-size":size,children})}function Item({noClose,...props}){return(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",asChild:!0,onClick:noClose||void 0!==props.isChecked?dist_esm.PFJ:void 0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",...props})})}function CheckboxItem({children,onSelect,...rest}){return(0,jsx_runtime.jsxs)($d08ef79370b62062$export$16ce288f89fa631c,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:e=>{onSelect?.(e),(0,dist_esm.PFJ)(e)},...rest,children:[(0,jsx_runtime.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${rest.checked?1:.5})`,opacity:rest.checked?1:.5},children:(0,jsx_runtime.jsx)(Icon_Icon,{small:!0,icon:rest.checked?"check":"checkbox-empty"})}),children]})}function RadioItem({children,onSelect,...rest}){return(0,jsx_runtime.jsxs)($d08ef79370b62062$export$16ce288f89fa631c,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:e=>{onSelect?.(e),(0,dist_esm.PFJ)(e)},...rest,children:[(0,jsx_runtime.jsx)($d08ef79370b62062$export$c3468e2714d175fa,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,jsx_runtime.jsx)(Icon_Icon,{icon:"check"})}),children]})}const TldrawHandles=({children})=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("shouldDisplayHandles",(()=>editor.isInAny("select.idle","select.pointing_handle")),[editor])?(0,jsx_runtime.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children}):null},TldrawHoveredShapeIndicator=({shapeId})=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("show hovered",(()=>editor.isIn("select.editing_shape")?editor.hoveredShapeId!==editor.editingShapeId:editor.isInAny("select.idle")),[editor])?(0,jsx_runtime.jsx)(dist_esm.PIN,{className:"tl-user-indicator__hovered",id:shapeId}):null},{PI}=Math,FIXED_PI=PI+1e-4;function getStrokeOutlinePoints_getStrokeOutlinePoints(strokePoints,options={}){const{size=16,smoothing=.5,start={},end={},last:isComplete=!1}=options,{cap:capStart=!0}=start,{cap:capEnd=!0}=end;if(0===strokePoints.length||size<=0)return[];const firstStrokePoint=strokePoints[0],lastStrokePoint=strokePoints[strokePoints.length-1],totalLength=lastStrokePoint.runningLength,taperStart=!1===start.taper?0:!0===start.taper?Math.max(size,totalLength):start.taper,taperEnd=!1===end.taper?0:!0===end.taper?Math.max(size,totalLength):end.taper,minDistance=Math.pow(size*smoothing,2),leftPts=[],rightPts=[];let strokePoint,prevVector=strokePoints[0].vector,pl=strokePoints[0].point,pr=pl,tl=pl,tr=pr,isPrevPointSharpCorner=!1;for(let i=0;i<strokePoints.length;i++){strokePoint=strokePoints[i];const{point,vector}=strokePoints[i],prevDpr=strokePoint.vector.dpr(prevVector),nextVector=(i<strokePoints.length-1?strokePoints[i+1]:strokePoints[i]).vector,nextDpr=i<strokePoints.length-1?nextVector.dpr(strokePoint.vector):1,isNextPointSharpCorner=null!==nextDpr&&nextDpr<.2;if(prevDpr<0&&!isPrevPointSharpCorner||isNextPointSharpCorner){if(nextDpr>-.62&&totalLength-strokePoint.runningLength>strokePoint.radius){const offset2=prevVector.clone().mul(strokePoint.radius);prevVector.clone().cpr(nextVector)<0?(tl=dist_esm.GF3.Add(point,offset2),tr=dist_esm.GF3.Sub(point,offset2)):(tl=dist_esm.GF3.Sub(point,offset2),tr=dist_esm.GF3.Add(point,offset2)),leftPts.push(tl),rightPts.push(tr)}else{const offset2=prevVector.clone().mul(strokePoint.radius).per(),start2=dist_esm.GF3.Sub(strokePoint.input,offset2);for(let step=1/13,t=0;t<1;t+=step)tl=dist_esm.GF3.RotWith(start2,strokePoint.input,FIXED_PI*t),leftPts.push(tl),tr=dist_esm.GF3.RotWith(start2,strokePoint.input,FIXED_PI+FIXED_PI*-t),rightPts.push(tr)}pl=tl,pr=tr,isNextPointSharpCorner&&(isPrevPointSharpCorner=!0);continue}if(isPrevPointSharpCorner=!1,strokePoint===firstStrokePoint||strokePoint===lastStrokePoint){const offset2=dist_esm.GF3.Per(vector).mul(strokePoint.radius);leftPts.push(dist_esm.GF3.Sub(point,offset2)),rightPts.push(dist_esm.GF3.Add(point,offset2));continue}const offset=dist_esm.GF3.Lrp(nextVector,vector,nextDpr).per().mul(strokePoint.radius);tl=dist_esm.GF3.Sub(point,offset),(i<=1||dist_esm.GF3.Dist2(pl,tl)>minDistance)&&(leftPts.push(tl),pl=tl),tr=dist_esm.GF3.Add(point,offset),(i<=1||dist_esm.GF3.Dist2(pr,tr)>minDistance)&&(rightPts.push(tr),pr=tr),prevVector=vector}const firstPoint=firstStrokePoint.point,lastPoint=strokePoints.length>1?strokePoints[strokePoints.length-1].point:dist_esm.GF3.AddXY(firstStrokePoint.point,1,1);if(1===strokePoints.length&&(!taperStart&&!taperEnd||isComplete)){const start2=dist_esm.GF3.Add(firstPoint,dist_esm.GF3.Sub(firstPoint,lastPoint).uni().per().mul(-firstStrokePoint.radius)),dotPts=[];for(let step=1/13,t=step;t<=1;t+=step)dotPts.push(dist_esm.GF3.RotWith(start2,firstPoint,2*FIXED_PI*t));return dotPts}const startCap=[];if(taperStart||taperEnd&&1===strokePoints.length);else if(capStart)for(let step=1/8,t=step;t<=1;t+=step){const pt=dist_esm.GF3.RotWith(rightPts[0],firstPoint,FIXED_PI*t);startCap.push(pt)}else{const cornersVector=dist_esm.GF3.Sub(leftPts[0],rightPts[0]),offsetA=dist_esm.GF3.Mul(cornersVector,.5),offsetB=dist_esm.GF3.Mul(cornersVector,.51);startCap.push(dist_esm.GF3.Sub(firstPoint,offsetA),dist_esm.GF3.Sub(firstPoint,offsetB),dist_esm.GF3.Add(firstPoint,offsetB),dist_esm.GF3.Add(firstPoint,offsetA))}const endCap=[],direction=lastStrokePoint.vector.clone().per().neg();if(taperEnd||taperStart&&1===strokePoints.length)endCap.push(lastPoint);else if(capEnd){const start2=dist_esm.GF3.Add(lastPoint,dist_esm.GF3.Mul(direction,lastStrokePoint.radius));for(let step=1/29,t=step;t<1;t+=step)endCap.push(dist_esm.GF3.RotWith(start2,lastPoint,3*FIXED_PI*t))}else endCap.push(dist_esm.GF3.Add(lastPoint,dist_esm.GF3.Mul(direction,lastStrokePoint.radius)),dist_esm.GF3.Add(lastPoint,dist_esm.GF3.Mul(direction,.99*lastStrokePoint.radius)),dist_esm.GF3.Sub(lastPoint,dist_esm.GF3.Mul(direction,.99*lastStrokePoint.radius)),dist_esm.GF3.Sub(lastPoint,dist_esm.GF3.Mul(direction,lastStrokePoint.radius)));return leftPts.concat(endCap,rightPts.reverse(),startCap)}const MIN_START_PRESSURE=.025,MIN_END_PRESSURE=.01;function getStrokePoints(rawInputPoints,options={}){const{streamline=.5,size=16,simulatePressure=!1}=options;if(0===rawInputPoints.length)return[];const t=.15+.85*(1-streamline);let pts=rawInputPoints.map(dist_esm.GF3.From),pointsRemovedFromNearEnd=0;if(!simulatePressure){let pt2=pts[0];for(;pt2&&!(pt2.z>=MIN_START_PRESSURE);)pts.shift(),pt2=pts[0]}if(!simulatePressure){let pt2=pts[pts.length-1];for(;pt2&&!(pt2.z>=MIN_END_PRESSURE);)pts.pop(),pt2=pts[pts.length-1]}if(0===pts.length)return[{point:dist_esm.GF3.From(rawInputPoints[0]),input:dist_esm.GF3.From(rawInputPoints[0]),pressure:simulatePressure?.5:.15,vector:new dist_esm.GF3(1,1),distance:0,runningLength:0,radius:1}];let pt=pts[1];for(;pt&&!(dist_esm.GF3.Dist(pt,pts[0])>size/3);)pts[0].z=Math.max(pts[0].z,pt.z),pts.splice(1,1),pt=pts[1];const last=pts.pop();for(pt=pts[pts.length-1];pt&&!(dist_esm.GF3.Dist(pt,last)>size/3);)pts.pop(),pt=pts[pts.length-1],pointsRemovedFromNearEnd++;pts.push(last);const isComplete=options.last||!options.simulatePressure||pts.length>1&&dist_esm.GF3.Dist(pts[pts.length-1],pts[pts.length-2])<size||pointsRemovedFromNearEnd>0;if(2===pts.length&&options.simulatePressure){const last2=pts[1];pts=pts.slice(0,-1);for(let i=1;i<5;i++){const next=dist_esm.GF3.Lrp(pts[0],last2,i/4);next.z=(pts[0].z+(last2.z-pts[0].z))*i/4,pts.push(next)}}const strokePoints=[{point:pts[0],input:pts[0],pressure:simulatePressure?.5:pts[0].z,vector:new dist_esm.GF3(1,1),distance:0,runningLength:0,radius:1}];let point,distance,totalLength=0,prev=strokePoints[0];isComplete&&streamline>0&&pts.push(pts[pts.length-1].clone());for(let i=1,n=pts.length;i<n;i++)point=!t||options.last&&i===n-1?pts[i].clone():pts[i].clone().lrp(prev.point,1-t),prev.point.equals(point)||(distance=dist_esm.GF3.Dist(point,prev.point),totalLength+=distance,i<4&&totalLength<size||(prev={input:pts[i],point,pressure:simulatePressure?.5:pts[i].z,vector:dist_esm.GF3.Sub(prev.point,point).uni(),distance,runningLength:totalLength,radius:1},strokePoints.push(prev)));if(strokePoints[1]?.vector&&(strokePoints[0].vector=strokePoints[1].vector.clone()),totalLength<1){const maxPressureAmongPoints=Math.max(.5,...strokePoints.map((s=>s.pressure)));strokePoints.forEach((s=>s.pressure=maxPressureAmongPoints))}return strokePoints}const{min}=Math,RATE_OF_PRESSURE_CHANGE=.275;function setStrokePointRadii(strokePoints,options){const{size=16,thinning=.5,simulatePressure=!0,easing=t=>t,start={},end={}}=options,{easing:taperStartEase=dist_esm.Ljl.easeOutQuad}=start,{easing:taperEndEase=dist_esm.Ljl.easeOutCubic}=end,totalLength=strokePoints[strokePoints.length-1].runningLength;let firstRadius,strokePoint,prevPressure=strokePoints[0].pressure;if(!simulatePressure&&totalLength<size){const max=strokePoints.reduce(((max2,curr)=>Math.max(max2,curr.pressure)),.5);return strokePoints.forEach((sp=>{sp.pressure=max,sp.radius=size*easing(.5-thinning*(.5-sp.pressure))})),strokePoints}{let p;for(let i=0,n=strokePoints.length;i<n&&(strokePoint=strokePoints[i],!(strokePoint.runningLength>5*size));i++){const sp=min(1,strokePoint.distance/size);if(simulatePressure){const rp=min(1,1-sp);p=min(1,prevPressure+sp*RATE_OF_PRESSURE_CHANGE*(rp-prevPressure))}else p=min(1,prevPressure+.5*(strokePoint.pressure-prevPressure));prevPressure+=.5*(p-prevPressure)}for(let i=0;i<strokePoints.length;i++){if(strokePoint=strokePoints[i],thinning){let{pressure}=strokePoint;const sp=min(1,strokePoint.distance/size);if(simulatePressure){const rp=min(1,1-sp);pressure=min(1,prevPressure+sp*RATE_OF_PRESSURE_CHANGE*(rp-prevPressure))}else pressure=min(1,prevPressure+sp*RATE_OF_PRESSURE_CHANGE*(pressure-prevPressure));strokePoint.radius=size*easing(.5-thinning*(.5-pressure)),prevPressure=pressure}else strokePoint.radius=size/2;void 0===firstRadius&&(firstRadius=strokePoint.radius)}}const taperStart=!1===start.taper?0:!0===start.taper?Math.max(size,totalLength):start.taper,taperEnd=!1===end.taper?0:!0===end.taper?Math.max(size,totalLength):end.taper;if(taperStart||taperEnd)for(let i=0;i<strokePoints.length;i++){strokePoint=strokePoints[i];const{runningLength}=strokePoint,ts=runningLength<taperStart?taperStartEase(runningLength/taperStart):1,te=totalLength-runningLength<taperEnd?taperEndEase((totalLength-runningLength)/taperEnd):1;strokePoint.radius=Math.max(.01,strokePoint.radius*Math.min(ts,te))}return strokePoints}const TldrawScribble=({scribble,zoom,color,opacity,className})=>{if(!scribble.points.length)return null;const stroke=function getStroke(points,options={}){return getStrokeOutlinePoints_getStrokeOutlinePoints(setStrokePointRadii(getStrokePoints(points,options),options),options)}(scribble.points,{size:scribble.size/zoom,start:{taper:!0,easing:dist_esm.Ljl.linear},last:"stopping"===scribble.state,simulatePressure:!1,streamline:.32});let d;if(stroke.length<4){const r=scribble.size/zoom/2,{x,y}=scribble.points[scribble.points.length-1];d=`M ${x-r},${y} a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 ${2*-r},0`}else d=(0,dist_esm.RKM)(stroke);return(0,jsx_runtime.jsx)("svg",{className:className?classnames_default()("tl-overlays__item",className):className,children:(0,jsx_runtime.jsx)("path",{className:"tl-scribble",d,fill:color??`var(--color-${scribble.color})`,opacity:opacity??scribble.opacity})})},TldrawSelectionBackground=({bounds,rotation})=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("should display",(()=>editor.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing")),[editor])?(0,jsx_runtime.jsx)(dist_esm.yx9,{bounds,rotation}):null};function useReadonly(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("isReadonlyMode",(()=>editor.instanceState.isReadonly),[editor])}function CropHandles({size,width,height,hideAlternateHandles}){const cropStrokeWidth=(0,dist_esm.$ZD)(size/3),offset=cropStrokeWidth/2;return(0,jsx_runtime.jsxs)("svg",{className:"tl-overlays__item",children:[(0,jsx_runtime.jsx)("polyline",{className:"tl-corner-crop-handle",points:`\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(0-offset)},${(0,dist_esm.$ZD)(size)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(0-offset)},${(0,dist_esm.$ZD)(0-offset)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(size)},${(0,dist_esm.$ZD)(0-offset)}`,strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,jsx_runtime.jsx)("line",{className:classnames_default()("tl-corner-crop-edge-handle",{"tl-hidden":hideAlternateHandles}),x1:(0,dist_esm.$ZD)(width/2-size),y1:(0,dist_esm.$ZD)(0-offset),x2:(0,dist_esm.$ZD)(width/2+size),y2:(0,dist_esm.$ZD)(0-offset),strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,jsx_runtime.jsx)("polyline",{className:classnames_default()("tl-corner-crop-handle",{"tl-hidden":hideAlternateHandles}),points:`\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width-size)},${(0,dist_esm.$ZD)(0-offset)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width+offset)},${(0,dist_esm.$ZD)(0-offset)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width+offset)},${(0,dist_esm.$ZD)(size)}`,strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,jsx_runtime.jsx)("line",{className:classnames_default()("tl-corner-crop-edge-handle",{"tl-hidden":hideAlternateHandles}),x1:(0,dist_esm.$ZD)(width+offset),y1:(0,dist_esm.$ZD)(height/2-size),x2:(0,dist_esm.$ZD)(width+offset),y2:(0,dist_esm.$ZD)(height/2+size),strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,jsx_runtime.jsx)("polyline",{className:"tl-corner-crop-handle",points:`\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width+offset)},${(0,dist_esm.$ZD)(height-size)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width+offset)},${(0,dist_esm.$ZD)(height+offset)}\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(width-size)},${(0,dist_esm.$ZD)(height+offset)}`,strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,jsx_runtime.jsx)("line",{className:classnames_default()("tl-corner-crop-edge-handle",{"tl-hidden":hideAlternateHandles}),x1:(0,dist_esm.$ZD)(width/2-size),y1:(0,dist_esm.$ZD)(height+offset),x2:(0,dist_esm.$ZD)(width/2+size),y2:(0,dist_esm.$ZD)(height+offset),strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,jsx_runtime.jsx)("polyline",{className:classnames_default()("tl-corner-crop-handle",{"tl-hidden":hideAlternateHandles}),points:`\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(0+size)},${(0,dist_esm.$ZD)(height+offset)} \n\t\t\t\t\t\t${(0,dist_esm.$ZD)(0-offset)},${(0,dist_esm.$ZD)(height+offset)}\n\t\t\t\t\t\t${(0,dist_esm.$ZD)(0-offset)},${(0,dist_esm.$ZD)(height-size)}`,strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,jsx_runtime.jsx)("line",{className:classnames_default()("tl-corner-crop-edge-handle",{"tl-hidden":hideAlternateHandles}),x1:(0,dist_esm.$ZD)(0-offset),y1:(0,dist_esm.$ZD)(height/2-size),x2:(0,dist_esm.$ZD)(0-offset),y2:(0,dist_esm.$ZD)(height/2+size),strokeWidth:cropStrokeWidth,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const IS_FIREFOX="undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,TldrawSelectionForeground=(0,dist_esm.jas)((function TldrawSelectionForeground2({bounds,rotation}){const editor=(0,dist_esm.jE2)(),rSvg=(0,react.useRef)(null),isReadonlyMode=useReadonly(),topEvents=(0,dist_esm.Ie$)("top"),rightEvents=(0,dist_esm.Ie$)("right"),bottomEvents=(0,dist_esm.Ie$)("bottom"),leftEvents=(0,dist_esm.Ie$)("left"),topLeftEvents=(0,dist_esm.Ie$)("top_left"),topRightEvents=(0,dist_esm.Ie$)("top_right"),bottomRightEvents=(0,dist_esm.Ie$)("bottom_right"),bottomLeftEvents=(0,dist_esm.Ie$)("bottom_left"),isDefaultCursor=!editor.isMenuOpen&&"default"===editor.instanceState.cursor.type,isCoarsePointer=editor.instanceState.isCoarsePointer,shapes=editor.selectedShapes,onlyShape=editor.onlySelectedShape,isLockedShape=onlyShape&&editor.isShapeOrAncestorLocked(onlyShape),expandOutlineBy=onlyShape?editor.getShapeUtil(onlyShape).expandSelectionOutlinePx(onlyShape):0;if((0,dist_esm.Hm2)(rSvg,bounds?.x,bounds?.y,1,editor.selectionRotation,{x:-expandOutlineBy,y:-expandOutlineBy}),!bounds)return null;bounds=bounds.clone().expandBy(expandOutlineBy).zeroFix();const zoom=editor.zoomLevel,isChangingStyle=editor.instanceState.isChangingStyle,width=bounds.width,height=bounds.height,size=8/zoom,isTinyX=width<2*size,isTinyY=height<2*size,isSmallX=width<4*size,isSmallY=height<4*size,isSmallCropX=width<5*size,isSmallCropY=height<5*size,mobileHandleMultiplier=isCoarsePointer?1.75:1,targetSize=6/zoom*mobileHandleMultiplier,targetSizeX=(isSmallX?targetSize/2:targetSize)*(.75*mobileHandleMultiplier),targetSizeY=(isSmallY?targetSize/2:targetSize)*(.75*mobileHandleMultiplier),showSelectionBounds=!(onlyShape&&editor.getShapeUtil(onlyShape).hideSelectionBoundsFg(onlyShape)||isChangingStyle);let shouldDisplayBox=showSelectionBounds&&editor.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle")||showSelectionBounds&&editor.isIn("select.resizing")&&onlyShape&&editor.isShapeOfType(onlyShape,"text");onlyShape&&shouldDisplayBox&&IS_FIREFOX&&editor.isShapeOfType(onlyShape,"embed")&&(shouldDisplayBox=!1);const showCropHandles=editor.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!isChangingStyle&&!isReadonlyMode,shouldDisplayControls=editor.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!isChangingStyle&&!isReadonlyMode,showCornerRotateHandles=!isCoarsePointer&&!(isTinyX||isTinyY)&&(shouldDisplayControls||showCropHandles)&&(!onlyShape||!editor.getShapeUtil(onlyShape).hideRotateHandle(onlyShape))&&!isLockedShape,showMobileRotateHandle=isCoarsePointer&&(!isSmallX||!isSmallY)&&(shouldDisplayControls||showCropHandles)&&(!onlyShape||!editor.getShapeUtil(onlyShape).hideRotateHandle(onlyShape))&&!isLockedShape,showResizeHandles=shouldDisplayControls&&(!onlyShape||editor.getShapeUtil(onlyShape).canResize(onlyShape)&&!editor.getShapeUtil(onlyShape).hideResizeHandles(onlyShape))&&!showCropHandles&&!isLockedShape,hideAlternateCornerHandles=isTinyX||isTinyY,showOnlyOneHandle=isTinyX&&isTinyY,hideAlternateCropHandles=isSmallCropX||isSmallCropY,showHandles=showResizeHandles||showCropHandles,hideRotateCornerHandles=!showCornerRotateHandles,hideMobileRotateHandle=!shouldDisplayControls||!showMobileRotateHandle,hideTopLeftCorner=!shouldDisplayControls||!showHandles,hideTopRightCorner=!shouldDisplayControls||!showHandles||hideAlternateCornerHandles,hideBottomLeftCorner=!shouldDisplayControls||!showHandles||hideAlternateCornerHandles,hideBottomRightCorner=!shouldDisplayControls||!showHandles||showOnlyOneHandle&&!showCropHandles;let hideEdgeTargetsDueToCoarsePointer=isCoarsePointer;hideEdgeTargetsDueToCoarsePointer&&shapes.every((shape=>editor.getShapeUtil(shape).isAspectRatioLocked(shape)))&&(hideEdgeTargetsDueToCoarsePointer=!1);let hideEdgeTargets=!0;showCropHandles?hideEdgeTargets=hideAlternateCropHandles:showResizeHandles&&(hideEdgeTargets=hideAlternateCornerHandles||showOnlyOneHandle||hideEdgeTargetsDueToCoarsePointer);const textHandleHeight=Math.min(24/zoom,height-3*targetSizeY),showTextResizeHandles=shouldDisplayControls&&isCoarsePointer&&onlyShape&&editor.isShapeOfType(onlyShape,"text")&&textHandleHeight*zoom>=4;return(0,jsx_runtime.jsxs)("svg",{ref:rSvg,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:[shouldDisplayBox&&(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-selection__fg__outline"),width:(0,dist_esm.$ZD)(width),height:(0,dist_esm.$ZD)(height)}),(0,jsx_runtime.jsx)(RotateCornerHandle,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize,corner:"top_left_rotate",cursor:isDefaultCursor?(0,dist_esm.LpX)("nwse-rotate",rotation):void 0,isHidden:hideRotateCornerHandles}),(0,jsx_runtime.jsx)(RotateCornerHandle,{"data-testid":"selection.rotate.top-right",cx:width+3*targetSize,cy:0,targetSize,corner:"top_right_rotate",cursor:isDefaultCursor?(0,dist_esm.LpX)("nesw-rotate",rotation):void 0,isHidden:hideRotateCornerHandles}),(0,jsx_runtime.jsx)(RotateCornerHandle,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:height+3*targetSize,targetSize,corner:"bottom_left_rotate",cursor:isDefaultCursor?(0,dist_esm.LpX)("swne-rotate",rotation):void 0,isHidden:hideRotateCornerHandles}),(0,jsx_runtime.jsx)(RotateCornerHandle,{"data-testid":"selection.rotate.bottom-right",cx:width+3*targetSize,cy:height+3*targetSize,targetSize,corner:"bottom_right_rotate",cursor:isDefaultCursor?(0,dist_esm.LpX)("senw-rotate",rotation):void 0,isHidden:hideRotateCornerHandles}),(0,jsx_runtime.jsx)(MobileRotateHandle,{"data-testid":"selection.rotate.mobile",cx:isSmallX?1.5*-targetSize:width/2,cy:isSmallX?height/2:1.5*-targetSize,size,isHidden:hideMobileRotateHandle}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideEdgeTargets}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:(0,dist_esm.$ZD)(0-(isSmallY?2*targetSizeY:targetSizeY)),width:(0,dist_esm.$ZD)(width),height:(0,dist_esm.$ZD)(Math.max(1,2*targetSizeY)),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("ns-resize",rotation)}:void 0,...topEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideEdgeTargets}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:(0,dist_esm.$ZD)(width-(isSmallX?0:targetSizeX)),y:0,height:(0,dist_esm.$ZD)(height),width:(0,dist_esm.$ZD)(Math.max(1,2*targetSizeX)),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("ew-resize",rotation)}:void 0,...rightEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideEdgeTargets}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:(0,dist_esm.$ZD)(height-(isSmallY?0:targetSizeY)),width:(0,dist_esm.$ZD)(width),height:(0,dist_esm.$ZD)(Math.max(1,2*targetSizeY)),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("ns-resize",rotation)}:void 0,...bottomEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideEdgeTargets}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:(0,dist_esm.$ZD)(0-(isSmallX?2*targetSizeX:targetSizeX)),y:0,height:(0,dist_esm.$ZD)(height),width:(0,dist_esm.$ZD)(Math.max(1,2*targetSizeX)),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("ew-resize",rotation)}:void 0,...leftEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideTopLeftCorner}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:(0,dist_esm.$ZD)(0-(isSmallX?2*targetSizeX:1.5*targetSizeX)),y:(0,dist_esm.$ZD)(0-(isSmallY?2*targetSizeY:1.5*targetSizeY)),width:(0,dist_esm.$ZD)(3*targetSizeX),height:(0,dist_esm.$ZD)(3*targetSizeY),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("nwse-resize",rotation)}:void 0,...topLeftEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideTopRightCorner}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:(0,dist_esm.$ZD)(width-(isSmallX?0:1.5*targetSizeX)),y:(0,dist_esm.$ZD)(0-(isSmallY?2*targetSizeY:1.5*targetSizeY)),width:(0,dist_esm.$ZD)(3*targetSizeX),height:(0,dist_esm.$ZD)(3*targetSizeY),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("nesw-resize",rotation)}:void 0,...topRightEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideBottomRightCorner}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:(0,dist_esm.$ZD)(width-(isSmallX?targetSizeX:1.5*targetSizeX)),y:(0,dist_esm.$ZD)(height-(isSmallY?targetSizeY:1.5*targetSizeY)),width:(0,dist_esm.$ZD)(3*targetSizeX),height:(0,dist_esm.$ZD)(3*targetSizeY),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("nwse-resize",rotation)}:void 0,...bottomRightEvents}),(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent",{"tl-hidden":hideBottomLeftCorner}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:(0,dist_esm.$ZD)(0-(isSmallX?3*targetSizeX:1.5*targetSizeX)),y:(0,dist_esm.$ZD)(height-(isSmallY?0:1.5*targetSizeY)),width:(0,dist_esm.$ZD)(3*targetSizeX),height:(0,dist_esm.$ZD)(3*targetSizeY),style:isDefaultCursor?{cursor:(0,dist_esm.LpX)("nesw-resize",rotation)}:void 0,...bottomLeftEvents}),showResizeHandles&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.resize.top-left",className:classnames_default()("tl-corner-handle",{"tl-hidden":hideTopLeftCorner}),"aria-label":"top_left handle",x:(0,dist_esm.$ZD)(0-size/2),y:(0,dist_esm.$ZD)(0-size/2),width:(0,dist_esm.$ZD)(size),height:(0,dist_esm.$ZD)(size)}),(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.resize.top-right",className:classnames_default()("tl-corner-handle",{"tl-hidden":hideTopRightCorner}),"aria-label":"top_right handle",x:(0,dist_esm.$ZD)(width-size/2),y:(0,dist_esm.$ZD)(0-size/2),width:(0,dist_esm.$ZD)(size),height:(0,dist_esm.$ZD)(size)}),(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:classnames_default()("tl-corner-handle",{"tl-hidden":hideBottomRightCorner}),"aria-label":"bottom_right handle",x:(0,dist_esm.$ZD)(width-size/2),y:(0,dist_esm.$ZD)(height-size/2),width:(0,dist_esm.$ZD)(size),height:(0,dist_esm.$ZD)(size)}),(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:classnames_default()("tl-corner-handle",{"tl-hidden":hideBottomLeftCorner}),"aria-label":"bottom_left handle",x:(0,dist_esm.$ZD)(0-size/2),y:(0,dist_esm.$ZD)(height-size/2),width:(0,dist_esm.$ZD)(size),height:(0,dist_esm.$ZD)(size)})]}),showTextResizeHandles&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:(0,dist_esm.$ZD)(0-size/4),y:(0,dist_esm.$ZD)(height/2-textHandleHeight/2),rx:size/4,width:(0,dist_esm.$ZD)(size/2),height:(0,dist_esm.$ZD)(textHandleHeight)}),(0,jsx_runtime.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:size/4,x:(0,dist_esm.$ZD)(width-size/4),y:(0,dist_esm.$ZD)(height/2-textHandleHeight/2),width:(0,dist_esm.$ZD)(size/2),height:(0,dist_esm.$ZD)(textHandleHeight)})]}),showCropHandles&&(0,jsx_runtime.jsx)(CropHandles,{size,width,height,hideAlternateHandles:hideAlternateCropHandles})]})})),RotateCornerHandle=function RotateCornerHandle2({cx,cy,targetSize,corner,cursor,isHidden,"data-testid":testId}){const events=(0,dist_esm.Ie$)(corner);return(0,jsx_runtime.jsx)("rect",{className:classnames_default()("tl-transparent","tl-rotate-corner",{"tl-hidden":isHidden}),"data-testid":testId,"aria-label":`${corner} target`,pointerEvents:"all",x:(0,dist_esm.$ZD)(cx-3*targetSize),y:(0,dist_esm.$ZD)(cy-3*targetSize),width:(0,dist_esm.$ZD)(Math.max(1,3*targetSize)),height:(0,dist_esm.$ZD)(Math.max(1,3*targetSize)),cursor,...events})},SQUARE_ROOT_PI=Math.sqrt(Math.PI),MobileRotateHandle=function RotateHandle({cx,cy,size,isHidden,"data-testid":testId}){const events=(0,dist_esm.Ie$)("mobile_rotate"),editor=(0,dist_esm.jE2)(),zoom=(0,dist_esm.HgN)("zoom level",(()=>editor.zoomLevel),[editor]),bgRadius=Math.max(1/zoom*14,20/Math.max(1,zoom));return(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("circle",{"data-testid":testId,pointerEvents:"all",className:classnames_default()("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":isHidden}),cx,cy,r:bgRadius,...events}),(0,jsx_runtime.jsx)("circle",{className:classnames_default()("tl-mobile-rotate__fg",{"tl-hidden":isHidden}),cx,cy,r:size/SQUARE_ROOT_PI})]})},TEXT_PROPS={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},STROKE_SIZES={s:2,m:3.5,l:5,xl:10},FONT_SIZES={s:18,m:24,l:36,xl:44},LABEL_FONT_SIZES={s:18,m:22,l:26,xl:32},ARROW_LABEL_FONT_SIZES={s:18,m:20,l:24,xl:28},FONT_FAMILIES={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function canvasTest(settings){var cropCvs,testCvs,size=settings.sizes.shift(),width=Math.max(Math.ceil(size[0]),1),height=Math.max(Math.ceil(size[1]),1),fill=[width-1,height-1,1,1],job=Date.now(),isWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;isWorker?(cropCvs=new OffscreenCanvas(1,1),testCvs=new OffscreenCanvas(width,height)):((cropCvs=document.createElement("canvas")).width=1,cropCvs.height=1,(testCvs=document.createElement("canvas")).width=width,testCvs.height=height);var cropCtx=cropCvs.getContext("2d"),testCtx=testCvs.getContext("2d");testCtx&&(testCtx.fillRect.apply(testCtx,fill),cropCtx.drawImage(testCvs,width-1,height-1,1,1,0,0,1,1));var isTestPass=cropCtx&&0!==cropCtx.getImageData(0,0,1,1).data[3],benchmark=Date.now()-job;return[cropCvs,testCvs].forEach((function(cvs){cvs.height=0,cvs.width=0})),isWorker?(postMessage({width,height,benchmark,isTestPass}),!isTestPass&&settings.sizes.length&&canvasTest(settings)):isTestPass?settings.onSuccess(width,height,benchmark):(settings.onError(width,height,benchmark),settings.sizes.length&&canvasTest(settings)),isTestPass}var testSizes_area=[16384,14188,11402,11180,10836,8192,4096,1],testSizes_height=[8388607,65535,32767,16384,8192,4096,1],testSizes_width=[4194303,65535,32767,16384,8192,4096,1],_excluded=["onError","onSuccess"],defaults={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},workerJobs={};function createSizesArray(settings){var isArea=settings.width===settings.height,isWidth=1===settings.height,isHeight=1===settings.width,sizes=[];if(settings.width&&settings.height)for(var testMin=settings.min||defaults.min,testStep=settings.step||defaults.step,testSize=Math.max(settings.width,settings.height);testSize>=testMin;){var width=isArea||isWidth?testSize:1,height=isArea||isHeight?testSize:1;sizes.push([width,height]),testSize-=testStep}else settings.sizes.forEach((function(testSize){var width=isArea||isWidth?testSize:1,height=isArea||isHeight?testSize:1;sizes.push([width,height])}));return sizes}function handleMethod(settings){var hasCanvasSupport=window&&"HTMLCanvasElement"in window,hasOffscreenCanvasSupport=window&&"OffscreenCanvas"in window,jobID=Date.now(),_onError=settings.onError,_onSuccess=settings.onSuccess,settingsWithoutCallbacks=_objectWithoutProperties(settings,_excluded),worker=null;if(!hasCanvasSupport)return!1;if(settings.useWorker&&hasOffscreenCanvasSupport){var js="\n            var canvasTest = ".concat(canvasTest.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),blob=new Blob([js],{type:"application/javascript"}),blobURL=URL.createObjectURL(blob);worker=new Worker(blobURL),URL.revokeObjectURL(blobURL),worker.onmessage=function(e){var _e$data=e.data,width=_e$data.width,height=_e$data.height,benchmark=_e$data.benchmark;_e$data.isTestPass?(workerJobs[jobID].onSuccess(width,height,benchmark),delete workerJobs[jobID]):workerJobs[jobID].onError(width,height,benchmark)}}return settings.usePromise?new Promise((function(resolve,reject){var promiseSettings=_objectSpread2(_objectSpread2({},settings),{},{onError:function onError(width,height,benchmark){var isLastTest;if(0===settings.sizes.length)isLastTest=!0;else{var _settings$sizes$slice2=_slicedToArray(settings.sizes.slice(-1),1),_settings$sizes$slice3=_slicedToArray(_settings$sizes$slice2[0],2),lastWidth=_settings$sizes$slice3[0],lastHeight=_settings$sizes$slice3[1];isLastTest=width===lastWidth&&height===lastHeight}_onError(width,height,benchmark),isLastTest&&reject({width,height,benchmark})},onSuccess:function onSuccess(width,height,benchmark){_onSuccess(width,height,benchmark),resolve({width,height,benchmark})}});if(worker){var onError=promiseSettings.onError,onSuccess=promiseSettings.onSuccess;workerJobs[jobID]={onError,onSuccess},worker.postMessage(settingsWithoutCallbacks)}else canvasTest(promiseSettings)})):worker?(workerJobs[jobID]={onError:_onError,onSuccess:_onSuccess},void worker.postMessage(settingsWithoutCallbacks)):canvasTest(settings)}var canvasSize={maxArea:function maxArea(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sizes=createSizesArray({width:options.max,height:options.max,min:options.min,step:options.step,sizes:_toConsumableArray(testSizes_area)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},defaults),options),{},{sizes}))},maxHeight:function maxHeight(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sizes=createSizesArray({width:1,height:options.max,min:options.min,step:options.step,sizes:_toConsumableArray(testSizes_height)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},defaults),options),{},{sizes}))},maxWidth:function maxWidth(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sizes=createSizesArray({width:options.max,height:1,min:options.min,step:options.step,sizes:_toConsumableArray(testSizes_width)});return handleMethod(_objectSpread2(_objectSpread2(_objectSpread2({},defaults),options),{},{sizes}))},test:function test(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},settings=_objectSpread2(_objectSpread2({},defaults),options);return settings.sizes=_toConsumableArray(settings.sizes),settings.width&&settings.height&&(settings.sizes=[[settings.width,settings.height]]),handleMethod(settings)}};let maxSizePromise=null;function getBrowserCanvasMaxSize(){return maxSizePromise||(maxSizePromise=async function calculateBrowserCanvasMaxSize(){const maxWidth=await canvasSize.maxWidth({usePromise:!0}),maxHeight=await canvasSize.maxHeight({usePromise:!0}),maxArea=await canvasSize.maxArea({usePromise:!0});return{maxWidth:maxWidth.width,maxHeight:maxHeight.height,maxArea:maxArea.width*maxArea.height}}()),maxSizePromise}function getDataBlocksLength(buffer,offset){let length=0;for(;buffer[offset+length];)length+=buffer[offset+length]+1;return length+1}function isAnimated(buffer){const view=new Uint8Array(buffer);let hasColorTable,colorTableSize,offset=0,imagesCount=0;if(!function isGIF(buffer){return"GIF"===new TextDecoder("ascii").decode(buffer.slice(0,3))}(buffer))return!1;for(hasColorTable=128&view[10],colorTableSize=7&view[10],offset+=6,offset+=7,offset+=hasColorTable?3*Math.pow(2,colorTableSize+1):0;imagesCount<2&&offset<view.length;)switch(view[offset]){case 44:imagesCount+=1,hasColorTable=128&view[offset+9],colorTableSize=7&view[offset+9],offset+=10,offset+=hasColorTable?3*Math.pow(2,colorTableSize+1):0,offset+=getDataBlocksLength(view,offset+1)+1;break;case 33:offset+=2,offset+=getDataBlocksLength(view,offset);break;default:offset=view.length}return imagesCount>1}async function isGifAnimated(file){return await new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onerror=()=>reject(reader.error),reader.onload=()=>{resolve(!!reader.result&&isAnimated(reader.result))},reader.readAsArrayBuffer(file)}))}const globlikeRegExp=input=>input.split("*").map((str=>function escapeStringRegexp(string){if("string"!=typeof string)throw new TypeError("Expected a string");return string.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(str))).join(".+"),checkHostnames=(hostnames,targetHostname)=>!!hostnames.find((hostname=>{const re=new RegExp(globlikeRegExp(hostname));return targetHostname.match(re)}));function getEmbedInfoUnsafely(inputUrl){return function matchUrl(url){const host=new URL(url).host.replace("www.","");for(const localEmbedDef of dist_esm.Lu5)if(checkHostnames(localEmbedDef.hostnames,host)){const embedUrl=localEmbedDef.toEmbedUrl(url);if(embedUrl)return{definition:localEmbedDef,embedUrl,url}}}(inputUrl)??function matchEmbedUrl(url){const host=new URL(url).host.replace("www.","");for(const localEmbedDef of dist_esm.Lu5)if(checkHostnames(localEmbedDef.hostnames,host)){const originalUrl=localEmbedDef.fromEmbedUrl(url);if(originalUrl)return{definition:localEmbedDef,url:originalUrl,embedUrl:url}}}(inputUrl)}function getEmbedInfo(inputUrl){try{return getEmbedInfoUnsafely(inputUrl)}catch(e){console.error(e)}}const INDENT="  ";class TextHelpers{static insertTextFirefox(field,text){field.setRangeText(text,field.selectionStart||0,field.selectionEnd||0,"end"),field.dispatchEvent(new InputEvent("input",{data:text,inputType:"insertText",isComposing:!1}))}static insert(field,text){const document=field.ownerDocument,initialFocus=document.activeElement;initialFocus!==field&&field.focus(),document.execCommand("insertText",!1,text)||TextHelpers.insertTextFirefox(field,text),initialFocus===document.body?field.blur():initialFocus instanceof HTMLElement&&initialFocus!==field&&initialFocus.focus()}static set(field,text){field.select(),TextHelpers.insert(field,text)}static getSelection(field){const{selectionStart,selectionEnd}=field;return field.value.slice(selectionStart||void 0,selectionEnd||void 0)}static wrapSelection(field,wrap,wrapEnd){const{selectionStart,selectionEnd}=field,selection=TextHelpers.getSelection(field);TextHelpers.insert(field,wrap+selection+(wrapEnd??wrap)),field.selectionStart=(selectionStart||0)+wrap.length,field.selectionEnd=(selectionEnd||0)+wrap.length}static replace(field,searchValue,replacer){let drift=0;field.value.replace(searchValue,((...args)=>{const matchStart=drift+args[args.length-2],matchLength=args[0].length;field.selectionStart=matchStart,field.selectionEnd=matchStart+matchLength;const replacement="string"==typeof replacer?replacer:replacer(...args);return TextHelpers.insert(field,replacement),field.selectionStart=matchStart,drift+=replacement.length-matchLength,replacement}))}static findLineEnd(value,currentEnd){const lastLineStart=value.lastIndexOf("\n",currentEnd-1)+1;return"\t"!==value.charAt(lastLineStart)?currentEnd:lastLineStart+1}static indent(element){const{selectionStart,selectionEnd,value}=element,selectedContrast=value.slice(selectionStart,selectionEnd),lineBreakCount=/\n/g.exec(selectedContrast)?.length;if(lineBreakCount&&lineBreakCount>0){const firstLineStart=value.lastIndexOf("\n",selectionStart-1)+1,newSelection=element.value.slice(firstLineStart,selectionEnd-1),indentedText=newSelection.replace(/^|\n/g,`$&${INDENT}`),replacementsCount=indentedText.length-newSelection.length;element.setSelectionRange(firstLineStart,selectionEnd-1),TextHelpers.insert(element,indentedText),element.setSelectionRange(selectionStart+1,selectionEnd+replacementsCount)}else TextHelpers.insert(element,INDENT)}static unindent(element){const{selectionStart,selectionEnd,value}=element,firstLineStart=value.lastIndexOf("\n",selectionStart-1)+1,minimumSelectionEnd=TextHelpers.findLineEnd(value,selectionEnd),newSelection=element.value.slice(firstLineStart,minimumSelectionEnd),indentedText=newSelection.replace(/(^|\n)(\t| {1,2})/g,"$1"),replacementsCount=newSelection.length-indentedText.length;element.setSelectionRange(firstLineStart,minimumSelectionEnd),TextHelpers.insert(element,indentedText);const firstLineIndentation=/\t| {1,2}/.exec(value.slice(firstLineStart,selectionStart)),difference=firstLineIndentation?firstLineIndentation[0].length:0,newSelectionStart=selectionStart-difference;element.setSelectionRange(selectionStart-difference,Math.max(newSelectionStart,selectionEnd-replacementsCount))}static indentCE(element){const selection=window.getSelection(),value=element.innerText,selectionStart=getCaretIndex(element)??0,selectionEnd=getCaretIndex(element)??0,selectedContrast=value.slice(selectionStart,selectionEnd),lineBreakCount=/\n/g.exec(selectedContrast)?.length;if(lineBreakCount&&lineBreakCount>0){const firstLineStart=value.lastIndexOf("\n",selectionStart-1)+1,newSelection=value.slice(firstLineStart,selectionEnd-1),replacementsCount=newSelection.replace(/^|\n/g,`$&${INDENT}`).length-newSelection.length;selection&&selection.setBaseAndExtent(element,selectionStart+1,element,selectionEnd+replacementsCount)}else{const selection2=window.getSelection();element.innerText=value.slice(0,selectionStart)+INDENT+value.slice(selectionStart),selection2?.setBaseAndExtent(element,selectionStart+1,element,selectionStart+2)}}static unindentCE(element){const selection=window.getSelection(),value=element.innerText,selectionStart=getCaretIndex(element)??0,selectionEnd=getCaretIndex(element)??0,firstLineStart=value.lastIndexOf("\n",selectionStart-1)+1,minimumSelectionEnd=TextHelpers.findLineEnd(value,selectionEnd),newSelection=value.slice(firstLineStart,minimumSelectionEnd),indentedText=newSelection.replace(/(^|\n)(\t| {1,2})/g,"$1"),replacementsCount=newSelection.length-indentedText.length;if(selection){selection.setBaseAndExtent(element,firstLineStart,element,minimumSelectionEnd);const firstLineIndentation=/\t| {1,2}/.exec(value.slice(firstLineStart,selectionStart)),difference=firstLineIndentation?firstLineIndentation[0].length:0,newSelectionStart=selectionStart-difference;selection.setBaseAndExtent(element,selectionStart-difference,element,Math.max(newSelectionStart,selectionEnd-replacementsCount))}}static fixNewLines=/\r?\n|\r/g;static normalizeText(text){return text.replace(TextHelpers.fixNewLines,"\n")}static normalizeTextForDom(text){return text.replace(TextHelpers.fixNewLines,"\n").split("\n").map((x=>x||" ")).join("\n")}}function getCaretIndex(element){if(void 0===window.getSelection)return;const selection=window.getSelection();if(!selection)return;let position=0;if(0!==selection.rangeCount){const range=selection.getRangeAt(0),preCaretRange=range.cloneRange();preCaretRange.selectNodeContents(element),preCaretRange.setEnd(range.endContainer,range.endOffset),position=preCaretRange.toString().length}return position}const rtlRegex=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function cleanupText(text){return function stripTrailingWhitespace(text){return text.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}(function stripCommonMinimumIndentation(text){const lines=text.split("\n");for(;0===lines[0].trim().length;)lines.shift();let minIndentation=1/0;for(const line of lines)if(line.trim().length>0){const indentation=line.length-line.trimStart().length;minIndentation=Math.min(minIndentation,indentation)}return lines.map((line=>line.slice(minIndentation))).join("\n")}(function replaceTabsWithSpaces(text){return text.replace(/\t/g,INDENT)}(text)))}const truncateStringWithEllipsis=(str,maxLength)=>str.length<=maxLength?str:str.substring(0,maxLength-3)+"...";function registerDefaultExternalContentHandlers(editor,{maxImageDimension,maxAssetSize,acceptedImageMimeTypes,acceptedVideoMimeTypes}){editor.registerExternalAssetHandler("file",(async({file})=>await new Promise(((resolve,reject)=>{acceptedImageMimeTypes.includes(file.type)||acceptedVideoMimeTypes.includes(file.type)||(console.warn(`File type not allowed: ${file.type}`),reject()),file.size>maxAssetSize&&(console.warn(`File size too big: ${(file.size/1024).toFixed()}kb > ${(maxAssetSize/1024).toFixed()}kb`),reject());const reader=new FileReader;reader.onerror=()=>reject(reader.error),reader.onload=async()=>{let dataUrl=reader.result;"video/quicktime"===file.type&&dataUrl.includes("video/quicktime")&&(dataUrl=dataUrl.replace("video/quicktime","video/mp4"));const isImageType=acceptedImageMimeTypes.includes(file.type);let size,isAnimated;if(isImageType?(size=await dist_esm.xeI.getImageSizeFromSrc(dataUrl),isAnimated="image/gif"===file.type&&await isGifAnimated(file)):(isAnimated=!0,size=await dist_esm.xeI.getVideoSizeFromSrc(dataUrl)),isFinite(maxImageDimension)){const resizedSize=function containBoxSize(originalSize,containBoxSize2){const overByXScale=originalSize.w/containBoxSize2.w,overByYScale=originalSize.h/containBoxSize2.h;return overByXScale<=1&&overByYScale<=1?originalSize:overByXScale>overByYScale?{w:originalSize.w/overByXScale,h:originalSize.h/overByXScale}:{w:originalSize.w/overByYScale,h:originalSize.h/overByYScale}}(size,{w:maxImageDimension,h:maxImageDimension});size===resizedSize||"image/jpeg"!==file.type&&"image/png"!==file.type||(dataUrl=await async function getResizedImageDataUrl(dataURLForImage,width,height){return await new Promise((resolve=>{const img=new Image;img.onload=async()=>{const canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(!ctx)return;const canvasSizes=await getBrowserCanvasMaxSize();let desiredWidth=2*width,desiredHeight=2*height;const aspectRatio=img.width/img.height;if(desiredWidth>canvasSizes.maxWidth&&(desiredWidth=canvasSizes.maxWidth,desiredHeight=desiredWidth/aspectRatio),desiredHeight>canvasSizes.maxHeight&&(desiredHeight=canvasSizes.maxHeight,desiredWidth=desiredHeight*aspectRatio),desiredWidth*desiredHeight>canvasSizes.maxArea){const ratio=Math.sqrt(canvasSizes.maxArea/(desiredWidth*desiredHeight));desiredWidth*=ratio,desiredHeight*=ratio}canvas.width=desiredWidth,canvas.height=desiredHeight,ctx.drawImage(img,0,0,canvas.width,canvas.height);const newDataURL=canvas.toDataURL();resolve(newDataURL)},img.crossOrigin="anonymous",img.src=dataURLForImage}))}(dataUrl,size.w,size.h)),size=resizedSize}const assetId=dist_esm.Ykc.createId((0,dist_esm.jKo)(dataUrl)),asset=dist_esm.Ykc.create({id:assetId,type:isImageType?"image":"video",typeName:"asset",props:{name:file.name,src:dataUrl,w:size.w,h:size.h,mimeType:file.type,isAnimated}});resolve(asset)},reader.readAsDataURL(file)})))),editor.registerExternalAssetHandler("url",(async({url})=>{let meta;try{const resp=await fetch(url,{method:"GET",mode:"no-cors"}),html=await resp.text(),doc=(new DOMParser).parseFromString(html,"text/html");meta={image:doc.head.querySelector('meta[property="og:image"]')?.getAttribute("content")??"",title:doc.head.querySelector('meta[property="og:title"]')?.getAttribute("content")??truncateStringWithEllipsis(url,32),description:doc.head.querySelector('meta[property="og:description"]')?.getAttribute("content")??""}}catch(error){console.error(error),meta={image:"",title:truncateStringWithEllipsis(url,32),description:""}}return{id:dist_esm.Ykc.createId((0,dist_esm.jKo)(url)),typeName:"asset",type:"bookmark",props:{src:url,description:meta.description,image:meta.image,title:meta.title},meta:{}}})),editor.registerExternalContentHandler("svg-text",(async({point,text})=>{const position=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:editor.viewportPageCenter),svg=(new DOMParser).parseFromString(text,"image/svg+xml").querySelector("svg");if(!svg)throw new Error("No <svg/> element present");let width=parseFloat(svg.getAttribute("width")||"0"),height=parseFloat(svg.getAttribute("height")||"0");if(!width||!height){document.body.appendChild(svg);const box=svg.getBoundingClientRect();document.body.removeChild(svg),width=box.width,height=box.height}const asset=await editor.getAssetForExternalContent({type:"file",file:new File([text],"asset.svg",{type:"image/svg+xml"})});if(!asset)throw Error("Could not create an asset");createShapesForAssets(editor,[asset],position)})),editor.registerExternalContentHandler("embed",(({point,url,embed})=>{const position=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:editor.viewportPageCenter),{width,height}=embed,id=(0,dist_esm.F17)(),shapePartial={id,type:"embed",x:position.x-(width||450)/2,y:position.y-(height||450)/2,props:{w:width,h:height,url}};editor.createShapes([shapePartial]).select(id)})),editor.registerExternalContentHandler("files",(async({point,files})=>{const position=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:editor.viewportPageCenter),pagePoint=new dist_esm.GF3(position.x,position.y),assets=[];await Promise.all(files.map((async(file,i)=>{if(file.size>maxAssetSize)return console.warn(`File size too big: ${(file.size/1024).toFixed()}kb > ${(maxAssetSize/1024).toFixed()}kb`),null;if(!file.type)throw new Error("No mime type");if(!acceptedImageMimeTypes.concat(acceptedVideoMimeTypes).includes(file.type))return console.warn(`${file.name} not loaded - Extension not allowed.`),null;try{const asset=await editor.getAssetForExternalContent({type:"file",file});if(!asset)throw Error("Could not create an asset");assets[i]=asset}catch(error){return console.error(error),null}}))),createShapesForAssets(editor,(0,dist_esm.oA$)(assets),pagePoint)})),editor.registerExternalContentHandler("text",(async({point,text})=>{const p=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:editor.viewportPageCenter),defaultProps=editor.getShapeUtil("text").getDefaultProps(),textToPaste=cleanupText(text);let w,h,autoSize,align="middle";const isMultiLine=textToPaste.split("\n").length>1,isRtl=function isRightToLeftLanguage(text){return rtlRegex.test(text)}(textToPaste);isMultiLine&&(align=isMultiLine?isRtl?"end":"start":"middle");const rawSize=editor.textMeasure.measureText(textToPaste,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[defaultProps.font],fontSize:FONT_SIZES[defaultProps.size],maxWidth:null}),minWidth=Math.min(isMultiLine?.9*editor.viewportPageBounds.width:920,Math.max(200,.9*editor.viewportPageBounds.width));if(rawSize.w>minWidth){const shrunkSize=editor.textMeasure.measureText(textToPaste,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[defaultProps.font],fontSize:FONT_SIZES[defaultProps.size],maxWidth:minWidth});w=shrunkSize.w,h=shrunkSize.h,autoSize=!1,align=isRtl?"end":"start"}else w=rawSize.w,h=rawSize.h,autoSize=!0;p.y-h/2<editor.viewportPageBounds.minY+40&&(p.y=editor.viewportPageBounds.minY+40+h/2),editor.createShapes([{id:(0,dist_esm.F17)(),type:"text",x:p.x-w/2,y:p.y-h/2,props:{text:textToPaste,align,autoSize,w}}])})),editor.registerExternalContentHandler("url",(async({point,url})=>{const embedInfo=getEmbedInfo(url);if(embedInfo)return editor.putExternalContent({type:"embed",url:embedInfo.url,point,embed:embedInfo.definition});const position=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:editor.viewportPageCenter),assetId=dist_esm.Ykc.createId((0,dist_esm.jKo)(url));let asset=editor.getAsset(assetId),shouldAlsoCreateAsset=!1;if(!asset){shouldAlsoCreateAsset=!0;const bookmarkAsset=await editor.getAssetForExternalContent({type:"url",url});if(!bookmarkAsset)throw Error("Could not create an asset");asset=bookmarkAsset}editor.batch((()=>{shouldAlsoCreateAsset&&editor.createAssets([asset]),createShapesForAssets(editor,[asset],position)}))}))}async function createShapesForAssets(editor,assets,position){if(!assets.length)return;const currentPoint=dist_esm.GF3.From(position),partials=[];for(const asset of assets)switch(asset.type){case"bookmark":partials.push({id:(0,dist_esm.F17)(),type:"bookmark",x:currentPoint.x-150,y:currentPoint.y-160,opacity:1,props:{assetId:asset.id,url:asset.props.src}}),currentPoint.x+=300;break;case"image":partials.push({id:(0,dist_esm.F17)(),type:"image",x:currentPoint.x-asset.props.w/2,y:currentPoint.y-asset.props.h/2,opacity:1,props:{assetId:asset.id,w:asset.props.w,h:asset.props.h}}),currentPoint.x+=asset.props.w;break;case"video":partials.push({id:(0,dist_esm.F17)(),type:"video",x:currentPoint.x-asset.props.w/2,y:currentPoint.y-asset.props.h/2,opacity:1,props:{assetId:asset.id,w:asset.props.w,h:asset.props.h}}),currentPoint.x+=asset.props.w}editor.batch((()=>{const assetsToCreate=assets.filter((asset=>!editor.getAsset(asset.id)));assetsToCreate.length&&editor.createAssets(assetsToCreate),editor.createShapes(partials).select(...partials.map((p=>p.id)));const{viewportPageBounds}=editor;let{selectionPageBounds}=editor;if(selectionPageBounds){const offset=selectionPageBounds.center.sub(position);editor.updateShapes(editor.selectedShapes.map((shape=>{const localRotation=editor.getShapeParentTransform(shape).decompose().rotation,localDelta=dist_esm.GF3.Rot(offset,-localRotation);return{id:shape.id,type:shape.type,x:shape.x-localDelta.x,y:shape.y-localDelta.y}})))}selectionPageBounds=editor.selectionPageBounds,selectionPageBounds&&!viewportPageBounds.contains(selectionPageBounds)&&editor.zoomToSelection()}))}class Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("pointing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")};onKeyUp=info=>{if("Enter"===info.key){if(this.editor.instanceState.isReadonly)return null;const{onlySelectedShape}=this.editor;onlySelectedShape&&this.editor.getShapeUtil(onlySelectedShape).canEdit(onlySelectedShape)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(onlySelectedShape.id),this.editor.root.current.value.transition("editing_shape",{...info,target:"shape",shape:onlySelectedShape}))}}}class Pointing extends dist_esm.nui{static id="pointing";shape;markId="";onEnter=()=>{this.didTimeout=!1;const target=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:targetShape=>!targetShape.isLocked&&this.editor.getShapeUtil(targetShape).canBind(targetShape),margin:0,hitInside:!0,renderingOnly:!0});target?this.editor.setHintingShapes([target.id]):this.createArrowShape(),this.startPreciseTimeout()};onExit=()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()};onPointerMove=()=>{if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:this.editor.getShapeHandles(this.shape).find((h=>"end"===h.id)),isCreating:!0,onInteractionEnd:"arrow"})}};onPointerUp=()=>{this.cancel()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle",{})}createArrowShape(){const{originPagePoint}=this.editor.inputs,id=(0,dist_esm.F17)();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"arrow",x:originPagePoint.x,y:originPagePoint.y}]);const shape=this.editor.getShape(id);if(!shape)throw Error("expected shape");const handles=this.editor.getShapeHandles(shape);if(!handles)throw Error("expected handles for arrow");const util=this.editor.getShapeUtil("arrow"),startHandle=handles.find((h=>"start"===h.id)),change=util.onHandleChange?.(shape,{handle:{...startHandle,x:0,y:0},isPrecise:!0});if(change){const startTerminal=change.props?.start;"binding"===startTerminal?.type&&this.editor.setHintingShapes([startTerminal.boundShapeId]),this.editor.updateShapes([change],{squashing:!0})}this.shape=this.editor.getShape(id),this.editor.select(id)}updateArrowShapeEndHandle(){const shape=this.shape;if(!shape)throw Error("expected shape");const handles=this.editor.getShapeHandles(shape);if(!handles)throw Error("expected handles for arrow");const shapeWithOutEndOffset={...shape,props:{...shape.props,end:{...shape.props.end,x:0,y:0}}};{const util=this.editor.getShapeUtil("arrow"),point=this.editor.getPointInShapeSpace(shape,this.editor.inputs.currentPagePoint),endHandle=handles.find((h=>"end"===h.id)),change=util.onHandleChange?.(shapeWithOutEndOffset,{handle:{...endHandle,x:point.x,y:point.y},isPrecise:!1});if(change){const endTerminal=change.props?.end;"binding"===endTerminal?.type&&this.editor.setHintingShapes([endTerminal.boundShapeId]),this.editor.updateShapes([change],{squashing:!0})}}{const util=this.editor.getShapeUtil("arrow"),startHandle=handles.find((h=>"start"===h.id)),change=util.onHandleChange?.(shapeWithOutEndOffset,{handle:{...startHandle,x:0,y:0},isPrecise:this.didTimeout});change&&this.editor.updateShapes([change],{squashing:!0})}this.shape=this.editor.getShape(shape.id)}preciseTimeout=-1;didTimeout=!1;startPreciseTimeout(){this.preciseTimeout=window.setTimeout((()=>{this.isActive&&(this.didTimeout=!0)}),320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}}class ArrowShapeTool extends dist_esm.nui{static id="arrow";static initial="idle";static children=()=>[Idle,Pointing];shapeType="arrow"}class Drawing extends dist_esm.nui{static id="drawing";info={};initialShape;shapeType="highlight"===this.parent.id?"highlight":"draw";util=this.editor.getShapeUtil(this.shapeType);isPen=!1;segmentMode="free";didJustShiftClickToExtendPreviousShapeLine=!1;pagePointWhereCurrentSegmentChanged={};pagePointWhereNextSegmentChanged=null;lastRecordedPoint={};mergeNextPoint=!1;currentLineLength=0;canDraw=!1;markId=null;onEnter=info=>{this.markId=null,this.info=info,this.canDraw=!this.editor.isMenuOpen,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()};onPointerMove=()=>{const{editor:{inputs}}=this;if(this.isPen!==inputs.isPen){if(this.markId)return this.editor.bailToMark(this.markId),void this.startShape()}else!this.canDraw&&inputs.isDragging&&(this.startShape(),this.canDraw=!0);this.canDraw&&(inputs.isPen?dist_esm.GF3.Dist(inputs.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.zoomLevel?(this.lastRecordedPoint=inputs.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateShapes())};onKeyDown=info=>{if("Shift"===info.key)switch(this.segmentMode){case"free":this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_free":this.segmentMode="starting_straight"}this.updateShapes()};onKeyUp=info=>{if("Shift"===info.key)switch(this.editor.snaps.clear(),this.segmentMode){case"straight":this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_straight":this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free"}this.updateShapes()};onExit=()=>{this.editor.snaps.clear(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()};canClose(){return"highlight"!==this.shapeType}getIsClosed(segments,size){if(!this.canClose())return!1;const strokeWidth=STROKE_SIZES[size],firstPoint=segments[0].points[0],lastSegment=segments[segments.length-1],lastPoint=lastSegment.points[lastSegment.points.length-1];return firstPoint!==lastPoint&&this.currentLineLength>4*strokeWidth&&dist_esm.GF3.Dist(firstPoint,lastPoint)<2*strokeWidth}startShape(){const{inputs:{originPagePoint,isPen}}=this.editor;this.markId="draw start "+(0,dist_esm.ELf)(),this.editor.mark(this.markId),this.isPen=isPen;const pressure=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=originPagePoint.clone(),this.initialShape){const shape=this.editor.getShape(this.initialShape.id);if(shape&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;const prevSegment=(0,dist_esm.Z$Q)(shape.props.segments);if(!prevSegment)throw Error("Expected a previous segment!");const prevPoint=(0,dist_esm.Z$Q)(prevSegment.points);if(!prevPoint)throw Error("Expected a previous point!");const{x,y}=this.editor.getPointInShapeSpace(shape,originPagePoint).toFixed(),pressure2=this.isPen?1.25*this.info.point.z:.5,newSegment={type:this.segmentMode,points:[{x:prevPoint.x,y:prevPoint.y,z:+pressure2.toFixed(2)},{x,y,z:+pressure2.toFixed(2)}]},prevPointPageSpace=dist_esm.yX5.applyToPoint(this.editor.getShapePageTransform(shape.id),prevPoint);this.pagePointWhereCurrentSegmentChanged=prevPointPageSpace,this.pagePointWhereNextSegmentChanged=null;const segments=[...shape.props.segments,newSegment];this.currentLineLength=this.getLineLength(segments);const shapePartial={id:shape.id,type:this.shapeType,props:{segments}};return this.canClose()&&(shapePartial.props.isClosed=this.getIsClosed(segments,shape.props.size)),void this.editor.updateShapes([shapePartial])}}this.pagePointWhereCurrentSegmentChanged=originPagePoint.clone();const id=(0,dist_esm.F17)();this.editor.createShapes([{id,type:this.shapeType,x:originPagePoint.x,y:originPagePoint.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+pressure.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(id)}updateShapes(){const{inputs}=this.editor,{initialShape}=this;if(!initialShape)return;const{id,props:{size}}=initialShape,shape=this.editor.getShape(id);if(!shape)return;const{segments}=shape.props,{x,y,z}=this.editor.getPointInShapeSpace(shape,inputs.currentPagePoint).toFixed(),newPoint={x,y,z:this.isPen?+(1.25*z).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged}=this;if(null===pagePointWhereNextSegmentChanged)throw Error("We should have a point where the segment changed");if(dist_esm.GF3.Dist(pagePointWhereNextSegmentChanged,inputs.currentPagePoint)>dist_esm.Skg){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const prevSegment=(0,dist_esm.Z$Q)(segments);if(!prevSegment)throw Error("Expected a previous segment!");const prevLastPoint=(0,dist_esm.Z$Q)(prevSegment.points);if(!prevLastPoint)throw Error("Expected a previous last point!");let newSegment;const newLastPoint=this.editor.getPointInShapeSpace(shape,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===prevSegment.type){this.currentLineLength+=dist_esm.GF3.Dist(prevLastPoint,newLastPoint),newSegment={type:"straight",points:[{...prevLastPoint},newLastPoint]};const transform=this.editor.getShapePageTransform(shape);this.pagePointWhereCurrentSegmentChanged=dist_esm.yX5.applyToPoint(transform,prevLastPoint)}else newSegment={type:"straight",points:[newLastPoint,newPoint]};const shapePartial={id,type:this.shapeType,props:{segments:[...segments,newSegment]}};this.canClose()&&(shapePartial.props.isClosed=this.getIsClosed(segments,size)),this.editor.updateShapes([shapePartial],{squashing:!0})}break}case"starting_free":{const{pagePointWhereNextSegmentChanged}=this;if(null===pagePointWhereNextSegmentChanged)throw Error("We should have a point where the segment changed");if(dist_esm.GF3.Dist(pagePointWhereNextSegmentChanged,inputs.currentPagePoint)>dist_esm.Skg){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const newSegments=segments.slice(),prevStraightSegment=newSegments[newSegments.length-1],prevPoint=(0,dist_esm.Z$Q)(prevStraightSegment.points);if(!prevPoint)throw Error("No previous point!");const newFreeSegment={type:"free",points:[...dist_esm.GF3.PointsBetween(prevPoint,newPoint,6).map((p=>p.toFixed().toJson()))]},finalSegments=[...newSegments,newFreeSegment];this.currentLineLength=this.getLineLength(finalSegments);const shapePartial={id,type:this.shapeType,props:{segments:finalSegments}};this.canClose()&&(shapePartial.props.isClosed=this.getIsClosed(finalSegments,size)),this.editor.updateShapes([shapePartial],{squashing:!0})}break}case"straight":{const newSegments=segments.slice(),newSegment=newSegments[newSegments.length-1],{pagePointWhereCurrentSegmentChanged}=this,{currentPagePoint,ctrlKey}=this.editor.inputs;if(!pagePointWhereCurrentSegmentChanged)throw Error("We should have a point where the segment changed");let pagePoint,shouldSnapToAngle=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(shouldSnapToAngle=!ctrlKey,this.didJustShiftClickToExtendPreviousShapeLine=!1):shouldSnapToAngle=!ctrlKey;let snapSegment,newPoint2=this.editor.getPointInShapeSpace(shape,currentPagePoint).toFixed().toJson(),didSnap=!1;if((this.editor.user.isSnapMode?!ctrlKey:ctrlKey)&&newSegments.length>2){let nearestPoint,minDistance=8/this.editor.zoomLevel;for(let i=0,n=segments.length-2;i<n;i++){const segment=segments[i];if(!segment)break;if("free"===segment.type)continue;const first=segment.points[0],lastPoint=(0,dist_esm.Z$Q)(segment.points);if(!first||!lastPoint)continue;const nearestPointOnSegment=dist_esm.GF3.NearestPointOnLineSegment(first,lastPoint,newPoint2),distance=dist_esm.GF3.Dist(nearestPointOnSegment,newPoint2);if(distance<minDistance){nearestPoint=nearestPointOnSegment.toFixed().toJson(),minDistance=distance,snapSegment=segment;break}}nearestPoint&&(didSnap=!0,newPoint2=nearestPoint)}if(didSnap&&snapSegment){const transform=this.editor.getShapePageTransform(shape),first=snapSegment.points[0],lastPoint=(0,dist_esm.Z$Q)(snapSegment.points);if(!lastPoint)throw Error("Expected a last point!");const A=dist_esm.yX5.applyToPoint(transform,first),B=dist_esm.yX5.applyToPoint(transform,lastPoint),snappedPoint=dist_esm.yX5.applyToPoint(transform,newPoint2);this.editor.snaps.setLines([{id:(0,dist_esm.ELf)(),type:"points",points:[A,snappedPoint,B]}])}else{if(this.editor.snaps.clear(),shouldSnapToAngle){const currentAngle=dist_esm.GF3.Angle(pagePointWhereCurrentSegmentChanged,currentPagePoint),angleDiff=(0,dist_esm.nDY)(currentAngle,24)-currentAngle;pagePoint=dist_esm.GF3.RotWith(currentPagePoint,pagePointWhereCurrentSegmentChanged,angleDiff)}else pagePoint=currentPagePoint;newPoint2=this.editor.getPointInShapeSpace(shape,pagePoint).toFixed().toJson()}this.currentLineLength+=dist_esm.GF3.Dist(newSegment.points[0],newPoint2),newSegments[newSegments.length-1]={...newSegment,type:"straight",points:[newSegment.points[0],newPoint2]};const shapePartial={id,type:this.shapeType,props:{segments:newSegments}};this.canClose()&&(shapePartial.props.isClosed=this.getIsClosed(segments,size)),this.editor.updateShapes([shapePartial],{squashing:!0});break}case"free":{const newSegments=segments.slice(),newSegment=newSegments[newSegments.length-1],newPoints=[...newSegment.points];if(newPoints.length&&this.mergeNextPoint){const{z:z2}=newPoints[newPoints.length-1];newPoints[newPoints.length-1]={x:newPoint.x,y:newPoint.y,z:z2?Math.max(z2,newPoint.z):newPoint.z}}else this.currentLineLength+=dist_esm.GF3.Dist(newPoints[newPoints.length-1],newPoint),newPoints.push(newPoint);newSegments[newSegments.length-1]={...newSegment,points:newPoints},this.currentLineLength=this.getLineLength(newSegments);const shapePartial={id,type:this.shapeType,props:{segments:newSegments}};if(this.canClose()&&(shapePartial.props.isClosed=this.getIsClosed(newSegments,size)),this.editor.updateShapes([shapePartial],{squashing:!0}),newPoints.length>500){this.editor.updateShapes([{id,type:this.shapeType,props:{isComplete:!0}}]);const{currentPagePoint}=this.editor.inputs,newShapeId=(0,dist_esm.F17)();this.editor.createShapes([{id:newShapeId,type:this.shapeType,x:(0,dist_esm.FHy)(currentPagePoint.x),y:(0,dist_esm.FHy)(currentPagePoint.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*z).toFixed():.5}]}]}}]),this.initialShape=structuredClone(this.editor.getShape(newShapeId)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(segments){let length=0;for(const segment of segments)for(let i=0;i<segment.points.length-1;i++){const A=segment.points[i],B=segment.points[i+1];length+=dist_esm.GF3.Sub(B,A).len2()}return Math.sqrt(length)}onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())};complete(){if(!this.canDraw)return void this.cancel();const{initialShape}=this;initialShape&&(this.editor.updateShapes([{id:initialShape.id,type:initialShape.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}cancel(){this.parent.transition("idle",this.info)}}class Idle_Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("drawing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}class DrawShapeTool extends dist_esm.nui{static id="draw";static initial="idle";static children=()=>[Idle_Idle,Drawing];shapeType="draw";onExit=()=>{this.children.drawing.initialShape=void 0}}class FrameShapeTool extends dist_esm.osW{static id="frame";static initial="idle";shapeType="frame"}class toolStates_Idle_Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("pointing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onKeyUp=info=>{if("Enter"===info.key){if(this.editor.instanceState.isReadonly)return null;const{onlySelectedShape}=this.editor;onlySelectedShape&&this.editor.getShapeUtil(onlySelectedShape).canEdit(onlySelectedShape)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(onlySelectedShape.id),this.editor.root.current.value.transition("editing_shape",{...info,target:"shape",shape:onlySelectedShape}))}};onCancel=()=>{this.editor.setCurrentTool("select")}}class Pointing_Pointing extends dist_esm.nui{static id="pointing";markId="";onPointerUp=()=>{this.complete()};onPointerMove=info=>{if(this.editor.inputs.isDragging){const{originPagePoint}=this.editor.inputs,id=(0,dist_esm.F17)();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"geo",x:originPagePoint.x,y:originPagePoint.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(dist_esm.Zuj)}}]).select(id).setCurrentTool("select.resizing",{...info,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint}=this.editor.inputs,id=(0,dist_esm.F17)();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"geo",x:originPagePoint.x,y:originPagePoint.y,props:{geo:this.editor.getStyleForNextShape(dist_esm.Zuj),w:1,h:1}}]);const shape=this.editor.getShape(id);if(!shape)return;const bounds="star"===shape.props.geo?(0,dist_esm.LPY)(5,200,200):"cloud"===shape.props.geo?new dist_esm.NoK(0,0,300,180):new dist_esm.NoK(0,0,200,200),delta=bounds.center,parentTransform=this.editor.getShapeParentTransform(shape);parentTransform&&delta.rot(-parentTransform.rotation()),this.editor.select(id),this.editor.updateShapes([{id:shape.id,type:"geo",x:shape.x-delta.x,y:shape.y-delta.y,props:{geo:this.editor.getStyleForNextShape(dist_esm.Zuj),w:bounds.width,h:bounds.height}}]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle",{})}}class GeoShapeTool extends dist_esm.nui{static id="geo";static initial="idle";static children=()=>[toolStates_Idle_Idle,Pointing_Pointing];shapeType="geo"}class HighlightShapeTool extends dist_esm.nui{static id="highlight";static initial="idle";static children=()=>[Idle_Idle,Drawing];shapeType="highlight";onExit=()=>{this.children.drawing.initialShape=void 0}}class line_toolStates_Idle_Idle extends dist_esm.nui{static id="idle";shapeId="";onEnter=info=>{this.shapeId=info.shapeId,this.editor.setCursor({type:"cross",rotation:0})};onPointerDown=()=>{this.parent.transition("pointing",{shapeId:this.shapeId})};onCancel=()=>{this.editor.setCurrentTool("select")}}class toolStates_Pointing_Pointing extends dist_esm.nui{static id="pointing";shape={};markId;onEnter=info=>{const{inputs}=this.editor,{currentPagePoint}=inputs;this.markId=void 0;const shape=info.shapeId&&this.editor.getShape(info.shapeId);if(shape&&inputs.shiftKey){this.markId=`creating:${shape.id}`,this.editor.mark(this.markId),this.shape=shape;const handles=this.editor.getShapeHandles(this.shape);if(!handles)return;const vertexHandles=handles.filter((h=>"vertex"===h.type)).sort(dist_esm.hl1),endHandle=vertexHandles[vertexHandles.length-1],prevEndHandle=vertexHandles[vertexHandles.length-2],shapePagePoint=dist_esm.yX5.applyToPoint(this.editor.getShapeParentTransform(this.shape),new dist_esm.GF3(this.shape.x,this.shape.y));let nextEndHandleIndex,nextEndHandleId,nextEndHandle;const nextPoint=dist_esm.GF3.Sub(currentPagePoint,shapePagePoint);dist_esm.GF3.Dist(endHandle,prevEndHandle)<2||dist_esm.GF3.Dist(nextPoint,endHandle)<2?(nextEndHandleIndex=endHandle.index,nextEndHandleId=endHandle.id,nextEndHandle={...endHandle,x:nextPoint.x+.1,y:nextPoint.y+.1}):(nextEndHandleIndex=(0,dist_esm._LC)(endHandle.index),nextEndHandleId="handle:"+nextEndHandleIndex,nextEndHandle={id:nextEndHandleId,type:"vertex",index:nextEndHandleIndex,x:nextPoint.x+.1,y:nextPoint.y+.1,canBind:!1});const nextHandles=(0,dist_esm.v4J)(this.shape.props.handles);nextHandles[nextEndHandle.id]=nextEndHandle,this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{handles:nextHandles}}])}else{const id=(0,dist_esm.F17)();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"line",x:currentPagePoint.x,y:currentPagePoint.y}]),this.editor.select(id),this.shape=this.editor.getShape(id)}};onPointerMove=()=>{if(this.shape&&this.editor.inputs.isDragging){const handles=this.editor.getShapeHandles(this.shape);if(console,!handles)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const lastHandle=(0,dist_esm.Z$Q)(handles);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:{...lastHandle,x:lastHandle.x-.1,y:lastHandle.y-.1},onInteractionEnd:"line"})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.parent.transition("idle",{}),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clear()};complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}}class LineShapeTool extends dist_esm.nui{static id="line";static initial="idle";static children=()=>[line_toolStates_Idle_Idle,toolStates_Pointing_Pointing];shapeType="line"}class note_toolStates_Idle_Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("pointing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onCancel=()=>{this.editor.setCurrentTool("select")}}class note_toolStates_Pointing_Pointing extends dist_esm.nui{static id="pointing";dragged=!1;info={};wasFocusedOnEnter=!1;markId="";shape={};onEnter=()=>{this.wasFocusedOnEnter=!this.editor.isMenuOpen,this.wasFocusedOnEnter&&(this.shape=this.createShape())};onPointerMove=info=>{this.editor.inputs.isDragging&&(this.wasFocusedOnEnter||(this.shape=this.createShape()),this.editor.setCurrentTool("select.translating",{...info,target:"shape",shape:this.shape,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))};onPointerUp=()=>{this.complete()};onInterrupt=()=>{this.cancel()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};complete(){this.wasFocusedOnEnter&&(this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}createShape(){const{inputs:{originPagePoint}}=this.editor,id=(0,dist_esm.F17)();this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"note",x:originPagePoint.x,y:originPagePoint.y}]).select(id);const shape=this.editor.getShape(id),bounds=this.editor.getShapeGeometry(shape).bounds;return this.editor.updateShapes([{id,type:"note",x:shape.x-bounds.width/2,y:shape.y-bounds.height/2}]),this.editor.getShape(id)}}class NoteShapeTool extends dist_esm.nui{static id="note";static initial="idle";static children=()=>[note_toolStates_Idle_Idle,note_toolStates_Pointing_Pointing];shapeType="note"}function updateHoveredId(editor){const hitShape=editor.getShapeAtPoint(editor.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:dist_esm.wMU/editor.zoomLevel,renderingOnly:!0});if(!hitShape)return editor.setHoveredShape(null);let shapeToHover;const outermostShape=editor.getOutermostSelectableShape(hitShape);return shapeToHover=outermostShape===hitShape||outermostShape.id===editor.focusedGroupId||editor.selectedShapeIds.includes(outermostShape.id)?hitShape:outermostShape,editor.setHoveredShape(shapeToHover.id)}class text_toolStates_Idle_Idle extends dist_esm.nui{static id="idle";onPointerMove=info=>{switch(info.target){case"shape":case"canvas":updateHoveredId(this.editor)}};onPointerDown=info=>{this.parent.transition("pointing",info)};onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})};onKeyDown=info=>{if("Enter"===info.key){if(this.editor.instanceState.isReadonly)return null;const{onlySelectedShape}=this.editor;onlySelectedShape&&this.editor.getShapeUtil(onlySelectedShape).canEdit(onlySelectedShape)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(onlySelectedShape.id),this.editor.root.current.value.transition("editing_shape",{...info,target:"shape",shape:onlySelectedShape}))}};onCancel=()=>{this.editor.setCurrentTool("select")}}class text_toolStates_Pointing_Pointing extends dist_esm.nui{static id="pointing";shape;markId="";onExit=()=>{this.editor.setHintingShapes([])};onPointerMove=info=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint}}=this.editor,id=(0,dist_esm.F17)();if(this.markId=`creating:${id}`,this.editor.mark(this.markId),this.editor.createShapes([{id,type:"text",x:originPagePoint.x,y:originPagePoint.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(id),this.shape=this.editor.getShape(id),!this.shape)return;this.editor.setCurrentTool("select.resizing",{...info,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"})}};onPointerUp=()=>{this.complete()};onComplete=()=>{this.cancel()};onCancel=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){this.editor.mark("creating text shape");const id=(0,dist_esm.F17)(),{x,y}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id,type:"text",x,y,props:{text:"",autoSize:!0}}]).select(id),this.editor.setEditingShape(id),this.editor.setCurrentTool("select"),this.editor.root.current.value?.transition("editing_shape",{})}cancel(){this.parent.transition("idle",{}),this.editor.bailToMark(this.markId)}}class TextShapeTool extends dist_esm.nui{static id="text";static initial="idle";static children=()=>[text_toolStates_Idle_Idle,text_toolStates_Pointing_Pointing];shapeType="text"}const defaultShapeTools=[TextShapeTool,DrawShapeTool,GeoShapeTool,NoteShapeTool,LineShapeTool,FrameShapeTool,ArrowShapeTool,HighlightShapeTool];function useDefaultColorTheme(){return(0,dist_esm.y6M)({isDarkMode:(0,dist_esm.Gv6)()})}const ShapeFill=react.memo((function ShapeFill2({theme,d,color,fill}){switch(fill){case"none":return null;case"solid":return(0,jsx_runtime.jsx)("path",{fill:theme[color].semi,d});case"semi":return(0,jsx_runtime.jsx)("path",{fill:theme.solid,d});case"pattern":return(0,jsx_runtime.jsx)(PatternFill,{theme,color,fill,d})}})),PatternFill=function PatternFill2({d,color,theme}){const editor=(0,dist_esm.jE2)(),zoomLevel=(0,dist_esm.HgN)("zoomLevel",(()=>editor.zoomLevel),[editor]),intZoom=Math.ceil(zoomLevel),teenyTiny=editor.zoomLevel<=.18;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{fill:theme[color].pattern,d}),(0,jsx_runtime.jsx)("path",{fill:teenyTiny?theme[color].semi:`url(#${dist_esm.iFn[`${intZoom}_${theme.id}`]})`,d})]})};function getShapeFillSvg({d,color,fill,theme}){if("none"===fill)return;if("pattern"===fill){const gEl=document.createElementNS("http://www.w3.org/2000/svg","g"),path1El=document.createElementNS("http://www.w3.org/2000/svg","path");path1El.setAttribute("d",d),path1El.setAttribute("fill",theme[color].pattern);const path2El=document.createElementNS("http://www.w3.org/2000/svg","path");return path2El.setAttribute("d",d),path2El.setAttribute("fill","url(#hash_pattern)"),gEl.appendChild(path1El),gEl.appendChild(path2El),gEl}const path=document.createElementNS("http://www.w3.org/2000/svg","path");switch(path.setAttribute("d",d),fill){case"semi":path.setAttribute("fill",theme.solid);break;case"solid":path.setAttribute("fill",theme[color].semi)}return path}function getSvgWithShapeFill(foregroundPath,backgroundPath){if(backgroundPath){const g=document.createElementNS("http://www.w3.org/2000/svg","g");return g.appendChild(backgroundPath),g.appendChild(foregroundPath),g}return foregroundPath}function createTextSvgElementFromSpans(editor,spans,opts){const{padding=0}=opts,textElm=document.createElementNS("http://www.w3.org/2000/svg","text");if(textElm.setAttribute("font-size",opts.fontSize+"px"),textElm.setAttribute("font-family",opts.fontFamily),textElm.setAttribute("font-style",opts.fontStyle),textElm.setAttribute("font-weight",opts.fontWeight),textElm.setAttribute("line-height",opts.lineHeight*opts.fontSize+"px"),textElm.setAttribute("dominant-baseline","mathematical"),textElm.setAttribute("alignment-baseline","mathematical"),0===spans.length)return textElm;const bounds=dist_esm.NoK.From(spans[0].box);for(const{box}of spans)bounds.union(box);const offsetX=padding+(opts.offsetX??0),offsetY=(opts.offsetY??0)+opts.fontSize/2+("start"===opts.verticalTextAlign?padding:"end"===opts.verticalTextAlign?opts.height-padding-bounds.height:(Math.ceil(opts.height)-bounds.height)/2);let currentLineTop=null;for(const{text,box}of spans){if(null!==currentLineTop&&box.y>currentLineTop){const lineBreakTspan=document.createElementNS("http://www.w3.org/2000/svg","tspan");lineBreakTspan.setAttribute("alignment-baseline","mathematical"),lineBreakTspan.setAttribute("x",offsetX+"px"),lineBreakTspan.setAttribute("y",box.y+offsetY+"px"),lineBreakTspan.textContent="\n",textElm.appendChild(lineBreakTspan)}const tspan=document.createElementNS("http://www.w3.org/2000/svg","tspan");tspan.setAttribute("alignment-baseline","mathematical"),tspan.setAttribute("x",box.x+offsetX+"px"),tspan.setAttribute("y",box.y+offsetY+"px");const cleanText=text.replace(/\s/g,"");tspan.textContent=cleanText,textElm.appendChild(tspan),currentLineTop=box.y}return opts.stroke&&opts.strokeWidth&&(textElm.setAttribute("stroke",opts.stroke),textElm.setAttribute("stroke-width",opts.strokeWidth+"px")),opts.fill&&textElm.setAttribute("fill",opts.fill),textElm}function getFontDefForExport(fontStyle){return{key:`${dist_esm.Y8S.id}:${fontStyle}`,getElement:async()=>{const font=function findFont(name){const fontFamily=dist_esm.p64[name];for(const font of document.fonts)if(fontFamily.includes(font.family))return font;return null}(fontStyle);if(!font)return null;const url=font.$$_url,fontFaceRule=font.$$_fontface;if(!url||!fontFaceRule)return null;const fontFile=await(await fetch(url)).blob(),base64FontFile=await new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onload=()=>resolve(reader.result),reader.onerror=reject,reader.readAsDataURL(fontFile)})),newFontFaceRule=fontFaceRule.replace(url,base64FontFile),style=document.createElementNS("http://www.w3.org/2000/svg","style");return style.textContent=newFontFaceRule,style}}}function getFillDefForExport(fill,theme){return{key:`${dist_esm.Y8S.id}:${fill}`,getElement:async()=>{if("pattern"!==fill)return null;const t=8/12,divEl=document.createElement("div");return divEl.innerHTML=`\n\t\t\t\t<svg>\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<mask id="hash_pattern_mask">\n\t\t\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="white" />\n\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\t\t\tstroke="black"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<line x1="${1*t}" y1="2" x2="2" y2="${1*t}" />\n\t\t\t\t\t\t\t\t<line x1="${5*t}" y1="${7*t}" x2="${7*t}" y2="${5*t}" />\n\t\t\t\t\t\t\t\t<line x1="6" y1="${11*t}" x2="${11*t}" y2="6" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t<pattern\n\t\t\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\t\t\twidth="8"\n\t\t\t\t\t\t\theight="8"\n\t\t\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="${theme.solid}" mask="url(#hash_pattern_mask)" />\n\t\t\t\t\t\t</pattern>\n\t\t\t\t\t</defs>\n\t\t\t\t</svg>\n\t\t\t`,Array.from(divEl.querySelectorAll("defs > *"))}}}function getFillDefForCanvas(){return{key:`${dist_esm.Y8S.id}:pattern`,component:PatternFillDefForCanvas}}const TILE_PATTERN_SIZE=8,generateImage=(dpr,currentZoom,darkMode)=>new Promise(((resolve,reject)=>{const size=TILE_PATTERN_SIZE*currentZoom*dpr,canvasEl=document.createElement("canvas");canvasEl.width=size,canvasEl.height=size;const ctx=canvasEl.getContext("2d");if(!ctx)return;ctx.fillStyle=darkMode?"#212529":"#f8f9fa",ctx.fillRect(0,0,size,size),ctx.globalCompositeOperation="destination-out",ctx.lineCap="round",ctx.lineWidth=1.25*currentZoom*dpr;const t=8/12,s=v=>v*currentZoom*dpr;ctx.beginPath(),ctx.moveTo(s(1*t),s(2)),ctx.lineTo(s(2),s(1*t)),ctx.moveTo(s(5*t),s(7*t)),ctx.lineTo(s(7*t),s(5*t)),ctx.moveTo(s(6),s(11*t)),ctx.lineTo(s(11*t),s(6)),ctx.stroke(),canvasEl.toBlob((blob=>{!blob||dist_esm.hR1.throwToBlob.value?reject():resolve(blob)}))})),canvasBlob=(size,fn)=>{const canvas=document.createElement("canvas");canvas.width=size[0],canvas.height=size[1];const ctx=canvas.getContext("2d");return ctx?(fn(ctx),canvas.toDataURL()):""},getDefaultPatterns=()=>{const defaultPatterns=[];for(let i=1;i<=Math.ceil(dist_esm.sZM);i++){const whitePixelBlob=canvasBlob([1,1],(ctx=>{ctx.fillStyle=dist_esm.qit.lightMode.black.semi,ctx.fillRect(0,0,1,1)})),blackPixelBlob=canvasBlob([1,1],(ctx=>{ctx.fillStyle=dist_esm.qit.darkMode.black.semi,ctx.fillRect(0,0,1,1)}));defaultPatterns.push({zoom:i,url:whitePixelBlob,darkMode:!1}),defaultPatterns.push({zoom:i,url:blackPixelBlob,darkMode:!0})}return defaultPatterns};function PatternFillDefForCanvas(){const editor=(0,dist_esm.jE2)(),containerRef=(0,react.useRef)(null),{defs,isReady}=function usePattern(){const dpr=(0,dist_esm.jE2)().instanceState.devicePixelRatio,[isReady,setIsReady]=(0,react.useState)(!1),defaultPatterns=(0,react.useMemo)((()=>getDefaultPatterns()),[]),[backgroundUrls,setBackgroundUrls]=(0,react.useState)(defaultPatterns);return(0,react.useEffect)((()=>{const promises=[];for(let i=1;i<=Math.ceil(dist_esm.sZM);i++)promises.push(generateImage(dpr,i,!1).then((blob=>({zoom:i,url:URL.createObjectURL(blob),darkMode:!1})))),promises.push(generateImage(dpr,i,!0).then((blob=>({zoom:i,url:URL.createObjectURL(blob),darkMode:!0}))));let isCancelled=!1;return Promise.all(promises).then((urls=>{isCancelled||(setBackgroundUrls(urls),setIsReady(!0))})),()=>{isCancelled=!0,setIsReady(!1)}}),[dpr]),{defs:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:backgroundUrls.map((item=>{const key=item.zoom+(item.darkMode?"_dark":"_light");return(0,jsx_runtime.jsx)("pattern",{id:dist_esm.iFn[key],width:TILE_PATTERN_SIZE,height:TILE_PATTERN_SIZE,patternUnits:"userSpaceOnUse",children:(0,jsx_runtime.jsx)("image",{href:item.url,width:TILE_PATTERN_SIZE,height:TILE_PATTERN_SIZE})},key)}))}),isReady}}();return(0,react.useEffect)((()=>{if(isReady&&editor.environment.isSafari){const htmlLayer=findHtmlLayerParent(containerRef.current);htmlLayer&&requestAnimationFrame((()=>{htmlLayer.style.display="none",requestAnimationFrame((()=>{htmlLayer.style.display=""}))}))}}),[editor,isReady]),(0,jsx_runtime.jsx)("g",{ref:containerRef,children:defs})}function findHtmlLayerParent(element){return element.classList.contains("tl-html-layer")?element:element.parentElement?findHtmlLayerParent(element.parentElement):null}function getPerfectDashProps(totalLength,strokeWidth,opts={}){const{closed=!1,snap=1,start="outset",end="outset",lengthRatio=2,style="dashed"}=opts;let dashLength=0,dashCount=0,ratio=1,gapLength=0,strokeDashoffset=0;switch(style){case"dashed":ratio=1,dashLength=Math.min(strokeWidth*lengthRatio,totalLength/4);break;case"dotted":ratio=100,dashLength=strokeWidth/ratio;break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return closed||("outset"===start?(totalLength+=dashLength/2,strokeDashoffset+=dashLength/2):"skip"===start&&(totalLength-=dashLength,strokeDashoffset-=dashLength),"outset"===end?totalLength+=dashLength/2:"skip"===end&&(totalLength-=dashLength)),dashCount=Math.floor(totalLength/dashLength/(2*ratio)),dashCount-=dashCount%snap,dashCount<3&&"dashed"===style?totalLength/strokeWidth<5?(dashLength=totalLength,dashCount=1,gapLength=0):(dashLength=.333*totalLength,gapLength=.333*totalLength):(dashCount=Math.max(dashCount,3),dashLength=totalLength/dashCount/(2*ratio),closed?(strokeDashoffset=dashLength/2,gapLength=(totalLength-dashCount*dashLength)/dashCount):gapLength=(totalLength-dashCount*dashLength)/Math.max(1,dashCount-1)),{strokeDasharray:[dashLength,gapLength].join(" "),strokeDashoffset:strokeDashoffset.toString()}}function useEditableText(id,type,text){const editor=(0,dist_esm.jE2)(),rInput=(0,react.useRef)(null),rSkipSelectOnFocus=(0,react.useRef)(!1),rSelectionRanges=(0,react.useRef)(),isEditing=(0,dist_esm.HgN)("isEditing",(()=>editor.editingShapeId===id),[editor,id]);(0,react.useEffect)((()=>{const elm=rInput.current;elm&&isEditing&&document.activeElement!==elm&&elm.focus()}),[isEditing]);const handleFocus=(0,react.useCallback)((()=>{const skipSelect=rSkipSelectOnFocus.current;rSkipSelectOnFocus.current=!1,requestAnimationFrame((()=>{const elm=rInput.current;if(!elm)return;const shape=editor.getShape(id);shape&&(elm.value=shape.props.text,elm.value.length&&!skipSelect&&elm.select())}))}),[editor,id]),handleBlur=(0,react.useCallback)((()=>{const ranges=rSelectionRanges.current;requestAnimationFrame((()=>{const elm=rInput.current,{editingShapeId}=editor;if(elm&&editingShapeId){if(editingShapeId===id)if(ranges)if(ranges.length){rSkipSelectOnFocus.current=!0,elm.focus();const selection=window.getSelection();selection&&ranges.forEach((range=>selection.addRange(range)))}else elm.focus();else elm.focus()}else window.getSelection()?.removeAllRanges(),editor.complete()}))}),[editor,id]),handleKeyDown=(0,react.useCallback)((e=>{if(isEditing)switch((e.ctrlKey||e.metaKey)&&(0,dist_esm.beA)(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&editor.complete();break;case"Tab":(0,dist_esm.PFJ)(e),e.shiftKey?TextHelpers.unindent(e.currentTarget):TextHelpers.indent(e.currentTarget)}}),[editor,isEditing]),handleChange=(0,react.useCallback)((e=>{if(!isEditing)return;let text2=TextHelpers.normalizeText(e.currentTarget.value);const untabbedText=text2.replace(/\t/g,INDENT);if(untabbedText!==text2){const selectionStart=e.currentTarget.selectionStart;e.currentTarget.value=untabbedText,e.currentTarget.selectionStart=selectionStart+(untabbedText.length-text2.length),e.currentTarget.selectionEnd=selectionStart+(untabbedText.length-text2.length),text2=untabbedText}editor.updateShapes([{id,type,props:{text:text2}}])}),[editor,id,type,isEditing]),isEmpty=0===text.trim().length;(0,react.useEffect)((()=>{if(!isEditing)return;if(rInput.current){let updateSelection2=function(){const selection=window.getSelection?.();if(selection&&"None"!==selection.type){const ranges=[];if(selection)for(let i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt?.(i));rSelectionRanges.current=ranges}};return document.addEventListener("selectionchange",updateSelection2),()=>{document.removeEventListener("selectionchange",updateSelection2)}}}),[isEditing]);const handleInputPointerDown=(0,react.useCallback)((e=>{editor.dispatch({...(0,dist_esm.YyG)(e),type:"pointer",name:"pointer_down",target:"shape",shape:editor.getShape(id)}),(0,dist_esm.beA)(e)}),[editor,id]),handleDoubleClick=dist_esm.beA;return{rInput,isEditing,handleFocus,handleBlur,handleKeyDown,handleChange,handleInputPointerDown,handleDoubleClick,isEmpty}}const ArrowTextLabel=react.memo((function ArrowTextLabel2({id,text,size,font,position,width,labelColor}){const{rInput,isEditing,handleFocus,handleBlur,handleKeyDown,handleChange,isEmpty,handleInputPointerDown,handleDoubleClick}=useEditableText(id,"arrow",text),hasText=TextHelpers.normalizeTextForDom(text).trim().length>0;return isEditing||hasText?(0,jsx_runtime.jsx)("div",{className:"tl-arrow-label","data-font":font,"data-align":"center","data-hastext":!isEmpty,"data-isediting":isEditing,style:{textAlign:"center",fontSize:ARROW_LABEL_FONT_SIZES[size],lineHeight:ARROW_LABEL_FONT_SIZES[size]*TEXT_PROPS.lineHeight+"px",transform:`translate(${position.x}px, ${position.y}px)`,color:labelColor},children:(0,jsx_runtime.jsxs)("div",{className:"tl-arrow-label__inner",children:[(0,jsx_runtime.jsx)("p",{style:{width:width||"9px"},children:text?TextHelpers.normalizeTextForDom(text):" "}),isEditing&&(0,jsx_runtime.jsx)("textarea",{ref:rInput,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:text,onFocus:handleFocus,onChange:handleChange,onKeyDown:handleKeyDown,onBlur:handleBlur,onContextMenu:dist_esm.beA,onPointerDown:handleInputPointerDown,onDoubleClick:handleDoubleClick})]})}):null}));let globalRenderIndex=0;class ArrowShapeUtil extends dist_esm.EeJ{static type="arrow";static props=dist_esm.si8;static migrations=dist_esm.VmQ;canEdit=()=>!0;canBind=()=>!1;canSnap=()=>!1;hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsBg=()=>!0;hideSelectionBoundsFg=()=>!0;getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}getGeometry(shape){const info=this.editor.getArrowInfo(shape),bodyGeom=info.isStraight?new dist_esm.WN4({start:dist_esm.GF3.From(info.start.point),end:dist_esm.GF3.From(info.end.point)}):new dist_esm.uNM({center:dist_esm.GF3.Cast(info.handleArc.center),radius:info.handleArc.radius,start:dist_esm.GF3.Cast(info.start.point),end:dist_esm.GF3.Cast(info.end.point),sweepFlag:info.bodyArc.sweepFlag,largeArcFlag:info.bodyArc.largeArcFlag});let labelGeom;if(shape.props.text.trim()){const bodyBounds=bodyGeom.bounds,{w,h}=this.editor.textMeasure.measureText(shape.props.text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:ARROW_LABEL_FONT_SIZES[shape.props.size],maxWidth:null});let width=w,height=h;if(bodyBounds.width>bodyBounds.height){width=Math.max(Math.min(w,64),Math.min(bodyBounds.width-64,w));const{w:squishedWidth,h:squishedHeight}=this.editor.textMeasure.measureText(shape.props.text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:ARROW_LABEL_FONT_SIZES[shape.props.size],maxWidth:width});width=squishedWidth,height=squishedHeight}if(width>16*ARROW_LABEL_FONT_SIZES[shape.props.size]){width=16*ARROW_LABEL_FONT_SIZES[shape.props.size];const{w:squishedWidth,h:squishedHeight}=this.editor.textMeasure.measureText(shape.props.text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:ARROW_LABEL_FONT_SIZES[shape.props.size],maxWidth:width});width=squishedWidth,height=squishedHeight}labelGeom=new dist_esm.zc7({x:info.middle.x-width/2-4.25,y:info.middle.y-height/2-4.25,width:width+8.5,height:height+8.5,isFilled:!0,isLabel:!0})}return new dist_esm.mqq({children:labelGeom?[bodyGeom,labelGeom]:[bodyGeom],isSnappable:!1})}getHandles(shape){const info=this.editor.getArrowInfo(shape);return[{id:"start",type:"vertex",index:"a0",x:info.start.handle.x,y:info.start.handle.y,canBind:!0},{id:"middle",type:"virtual",index:"a2",x:info.middle.x,y:info.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:info.end.handle.x,y:info.end.handle.y,canBind:!0}]}onHandleChange=(shape,{handle,isPrecise:isPrecise2})=>{const handleId=handle.id;if("middle"===handleId){const{start,end}=(0,dist_esm.QsC)(this.editor,shape),delta=dist_esm.GF3.Sub(end,start),v=dist_esm.GF3.Per(delta),med=dist_esm.GF3.Med(end,start),A=dist_esm.GF3.Sub(med,v),B=dist_esm.GF3.Add(med,v),point2=dist_esm.GF3.NearestPointOnLineSegment(A,B,handle,!1);let bend=dist_esm.GF3.Dist(point2,med);return dist_esm.GF3.Clockwise(point2,end,med)&&(bend*=-1),{id:shape.id,type:shape.type,props:{bend}}}const next=(0,dist_esm.p$x)(shape),pointInPageSpace=this.editor.getShapePageTransform(next.id).applyToPoint(handle);if(this.editor.inputs.ctrlKey)return next.props[handleId]={type:"point",x:handle.x,y:handle.y},next;const point=this.editor.getShapePageTransform(shape.id).applyToPoint(handle),target=this.editor.getShapeAtPoint(point,{hitInside:!0,hitFrameInside:!0,margin:0,filter:targetShape=>!targetShape.isLocked&&this.editor.getShapeUtil(targetShape).canBind(targetShape)});if(!target)return next.props[handleId]={type:"point",x:handle.x,y:handle.y},next;const targetGeometry=this.editor.getShapeGeometry(target),targetBounds=dist_esm.NoK.ZeroFix(targetGeometry.bounds),pointInTargetSpace=this.editor.getPointInShapeSpace(target,pointInPageSpace);let precise=isPrecise2;if(!precise){const prevHandle=next.props[handleId];("point"===prevHandle.type||"binding"===prevHandle.type&&target.id!==prevHandle.boundShapeId)&&(precise=this.editor.inputs.pointerVelocity.len()<.5)}if(precise&&(precise=dist_esm.GF3.Dist(pointInTargetSpace,targetBounds.center)>Math.max(4,Math.min(.15*Math.min(targetBounds.width,targetBounds.height),16))/this.editor.zoomLevel),!isPrecise2){targetGeometry.isClosed||(precise=!0);const otherHandle=next.props["start"===handleId?"end":"start"];"binding"===otherHandle.type&&target.id===otherHandle.boundShapeId&&dist_esm.GF3.Equals(otherHandle.normalizedAnchor,{x:.5,y:.5})&&(precise=!0)}return next.props[handleId]={type:"binding",boundShapeId:target.id,normalizedAnchor:precise?{x:(pointInTargetSpace.x-targetBounds.minX)/targetBounds.width,y:(pointInTargetSpace.y-targetBounds.minY)/targetBounds.height}:{x:.5,y:.5},isExact:this.editor.inputs.altKey},"binding"===next.props.start.type&&"binding"===next.props.end.type&&next.props.start.boundShapeId===next.props.end.boundShapeId&&dist_esm.GF3.Equals(next.props.start.normalizedAnchor,next.props.end.normalizedAnchor)&&(next.props.end.normalizedAnchor.x+=.05),next};onTranslateStart=shape=>{const startBindingId="binding"===shape.props.start.type?shape.props.start.boundShapeId:null,endBindingId="binding"===shape.props.end.type?shape.props.end.boundShapeId:null,{selectedShapeIds}=this.editor;if(startBindingId&&(selectedShapeIds.includes(startBindingId)||this.editor.isAncestorSelected(startBindingId))||endBindingId&&(selectedShapeIds.includes(endBindingId)||this.editor.isAncestorSelected(endBindingId)))return;const{start,end}=(0,dist_esm.QsC)(this.editor,shape);return{id:shape.id,type:shape.type,props:{...shape.props,start:{type:"point",x:start.x,y:start.y},end:{type:"point",x:end.x,y:end.y}}}};onResize=(shape,info)=>{const{scaleX,scaleY}=info,terminals=(0,dist_esm.QsC)(this.editor,shape),{start,end}=(0,dist_esm.p$x)(shape.props);let{bend}=shape.props;"point"===start.type&&(start.x=terminals.start.x*scaleX,start.y=terminals.start.y*scaleY),"point"===end.type&&(end.x=terminals.end.x*scaleX,end.y=terminals.end.y*scaleY);const mx=Math.abs(scaleX),my=Math.abs(scaleY);scaleX<0&&scaleY>=0?(0!==bend&&(bend*=-1,bend*=Math.max(mx,my)),"binding"===start.type&&(start.normalizedAnchor.x=1-start.normalizedAnchor.x),"binding"===end.type&&(end.normalizedAnchor.x=1-end.normalizedAnchor.x)):scaleX>=0&&scaleY<0?(0!==bend&&(bend*=-1,bend*=Math.max(mx,my)),"binding"===start.type&&(start.normalizedAnchor.y=1-start.normalizedAnchor.y),"binding"===end.type&&(end.normalizedAnchor.y=1-end.normalizedAnchor.y)):scaleX>=0&&scaleY>=0?0!==bend&&(bend*=Math.max(mx,my)):scaleX<0&&scaleY<0&&(0!==bend&&(bend*=Math.max(mx,my)),"binding"===start.type&&(start.normalizedAnchor.x=1-start.normalizedAnchor.x,start.normalizedAnchor.y=1-start.normalizedAnchor.y),"binding"===end.type&&(end.normalizedAnchor.x=1-end.normalizedAnchor.x,end.normalizedAnchor.y=1-end.normalizedAnchor.y));return{props:{start,end,bend}}};onDoubleClickHandle=(shape,handle)=>{switch(handle.id){case"start":return{id:shape.id,type:shape.type,props:{...shape.props,arrowheadStart:"none"===shape.props.arrowheadStart?"arrow":"none"}};case"end":return{id:shape.id,type:shape.type,props:{...shape.props,arrowheadEnd:"none"===shape.props.arrowheadEnd?"arrow":"none"}}}};component(shape){const theme=useDefaultColorTheme(),onlySelectedShape=this.editor.onlySelectedShape,shouldDisplayHandles=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.instanceState.isReadonly,info=this.editor.getArrowInfo(shape),bounds=dist_esm.NoK.ZeroFix(this.editor.getShapeGeometry(shape).bounds),changeIndex=react.useMemo((()=>this.editor.environment.isSafari?globalRenderIndex+=1:0),[shape]);if(!info?.isValid)return null;const strokeWidth=STROKE_SIZES[shape.props.size],as=info.start.arrowhead&&(0,dist_esm.YoS)(info,"start",strokeWidth),ae=info.end.arrowhead&&(0,dist_esm.YoS)(info,"end",strokeWidth),path=info.isStraight?(0,dist_esm.N7h)(info):(0,dist_esm.t9i)(info);let handlePath=null;if(onlySelectedShape===shape&&shouldDisplayHandles){const sw=2,{strokeDasharray:strokeDasharray2,strokeDashoffset:strokeDashoffset2}=getPerfectDashProps(info.isStraight?dist_esm.GF3.Dist(info.start.handle,info.end.handle):Math.abs(info.handleArc.length),sw,{end:"skip",start:"skip",lengthRatio:2.5});handlePath="binding"===shape.props.start.type||"binding"===shape.props.end.type?(0,jsx_runtime.jsx)("path",{className:"tl-arrow-hint",d:info.isStraight?(0,dist_esm.$wX)(info):(0,dist_esm.dzh)(info),strokeDasharray:strokeDasharray2,strokeDashoffset:strokeDashoffset2,strokeWidth:sw,markerStart:"binding"===shape.props.start.type?shape.props.start.isExact?"":isPrecise(shape.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===shape.props.end.type?shape.props.end.isExact?"":isPrecise(shape.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray,strokeDashoffset}=getPerfectDashProps(info.isStraight?info.length:Math.abs(info.bodyArc.length),strokeWidth,{style:shape.props.dash}),labelGeometry=shape.props.text.trim()?this.editor.getShapeGeometry(shape).children[1]:null,maskStartArrowhead=!("none"===info.start.arrowhead||"arrow"===info.start.arrowhead),maskEndArrowhead=!("none"===info.end.arrowhead||"arrow"===info.end.arrowhead),maskId=(shape.id+"_clip_"+changeIndex).replace(":","_");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,style:{minWidth:50,minHeight:50},children:[(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsxs)("mask",{id:maskId,children:[(0,jsx_runtime.jsx)("rect",{x:(0,dist_esm.$ZD)(-100+bounds.minX),y:(0,dist_esm.$ZD)(-100+bounds.minY),width:(0,dist_esm.$ZD)(bounds.width+200),height:(0,dist_esm.$ZD)(bounds.height+200),fill:"white"}),labelGeometry&&(0,jsx_runtime.jsx)("rect",{x:labelGeometry.x,y:labelGeometry.y,width:labelGeometry.w,height:labelGeometry.h,fill:"black",rx:4,ry:4}),as&&maskStartArrowhead&&(0,jsx_runtime.jsx)("path",{d:as,fill:"arrow"===info.start.arrowhead?"none":"black",stroke:"none"}),ae&&maskEndArrowhead&&(0,jsx_runtime.jsx)("path",{d:ae,fill:"arrow"===info.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,jsx_runtime.jsxs)("g",{fill:"none",stroke:theme[shape.props.color].solid,strokeWidth,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[handlePath,(0,jsx_runtime.jsxs)("g",{mask:`url(#${maskId})`,children:[(0,jsx_runtime.jsx)("rect",{x:(0,dist_esm.$ZD)(bounds.minX-100),y:(0,dist_esm.$ZD)(bounds.minY-100),width:(0,dist_esm.$ZD)(bounds.width+200),height:(0,dist_esm.$ZD)(bounds.height+200),opacity:0}),(0,jsx_runtime.jsx)("path",{d:path,strokeDasharray,strokeDashoffset})]}),as&&maskStartArrowhead&&"none"!==shape.props.fill&&(0,jsx_runtime.jsx)(ShapeFill,{theme,d:as,color:shape.props.color,fill:shape.props.fill}),ae&&maskEndArrowhead&&"none"!==shape.props.fill&&(0,jsx_runtime.jsx)(ShapeFill,{theme,d:ae,color:shape.props.color,fill:shape.props.fill}),as&&(0,jsx_runtime.jsx)("path",{d:as}),ae&&(0,jsx_runtime.jsx)("path",{d:ae})]})]}),(0,jsx_runtime.jsx)(ArrowTextLabel,{id:shape.id,text:shape.props.text,font:shape.props.font,size:shape.props.size,position:info.middle,width:labelGeometry?.w??0,labelColor:theme[shape.props.labelColor].solid})]})}indicator(shape){const{start,end}=(0,dist_esm.QsC)(this.editor,shape),info=this.editor.getArrowInfo(shape),geometry=this.editor.getShapeGeometry(shape),bounds=geometry.bounds,labelGeometry=shape.props.text.trim()?geometry.children[1]:null,isEditing=(0,dist_esm.YzH)(shape.id);if(!info)return null;if(dist_esm.GF3.Equals(start,end))return null;const strokeWidth=STROKE_SIZES[shape.props.size],as=info.start.arrowhead&&(0,dist_esm.YoS)(info,"start",strokeWidth),ae=info.end.arrowhead&&(0,dist_esm.YoS)(info,"end",strokeWidth),path=info.isStraight?(0,dist_esm.N7h)(info):(0,dist_esm.t9i)(info),includeMask=as&&"arrow"!==info.start.arrowhead||ae&&"arrow"!==info.end.arrowhead||!!labelGeometry,maskId=(shape.id+"_clip").replace(":","_");return isEditing&&labelGeometry?(0,jsx_runtime.jsx)("rect",{x:(0,dist_esm.$ZD)(labelGeometry.x),y:(0,dist_esm.$ZD)(labelGeometry.y),width:labelGeometry.w,height:labelGeometry.h,rx:3.5,ry:3.5}):(0,jsx_runtime.jsxs)("g",{children:[includeMask&&(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsxs)("mask",{id:maskId,children:[(0,jsx_runtime.jsx)("rect",{x:bounds.minX-100,y:bounds.minY-100,width:bounds.w+200,height:bounds.h+200,fill:"white"}),labelGeometry&&(0,jsx_runtime.jsx)("rect",{x:(0,dist_esm.$ZD)(labelGeometry.x),y:(0,dist_esm.$ZD)(labelGeometry.y),width:labelGeometry.w,height:labelGeometry.h,fill:"black",rx:3.5,ry:3.5}),as&&(0,jsx_runtime.jsx)("path",{d:as,fill:"arrow"===info.start.arrowhead?"none":"black",stroke:"none"}),ae&&(0,jsx_runtime.jsx)("path",{d:ae,fill:"arrow"===info.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,jsx_runtime.jsxs)("g",{...includeMask?{mask:`url(#${maskId})`}:void 0,children:[includeMask&&(0,jsx_runtime.jsx)("rect",{x:bounds.minX-100,y:bounds.minY-100,width:bounds.width+200,height:bounds.height+200,opacity:0}),(0,jsx_runtime.jsx)("path",{d:path})]}),as&&(0,jsx_runtime.jsx)("path",{d:as}),ae&&(0,jsx_runtime.jsx)("path",{d:ae}),labelGeometry&&(0,jsx_runtime.jsx)("rect",{x:(0,dist_esm.$ZD)(labelGeometry.x),y:(0,dist_esm.$ZD)(labelGeometry.y),width:labelGeometry.w,height:labelGeometry.h,rx:3.5,ry:3.5})]})}onEditEnd=shape=>{const{id,type,props:{text}}=shape;text.trimEnd()!==shape.props.text&&this.editor.updateShapes([{id,type,props:{text:text.trimEnd()}}])};toSvg(shape,ctx){const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode});ctx.addExportDef(getFillDefForExport(shape.props.fill,theme));const color=theme[shape.props.color].solid,info=this.editor.getArrowInfo(shape),strokeWidth=STROKE_SIZES[shape.props.size],g=document.createElementNS("http://www.w3.org/2000/svg","g");if(!info)return g;const as=info.start.arrowhead&&(0,dist_esm.YoS)(info,"start",strokeWidth),ae=info.end.arrowhead&&(0,dist_esm.YoS)(info,"end",strokeWidth),geometry=this.editor.getShapeGeometry(shape),bounds=geometry.bounds,labelGeometry=shape.props.text.trim()?geometry.children[1]:null,maskId=(shape.id+"_clip").replace(":","_");if(as||ae||labelGeometry){const defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),mask=document.createElementNS("http://www.w3.org/2000/svg","mask");mask.id=maskId;const rect=document.createElementNS("http://www.w3.org/2000/svg","rect");if(rect.setAttribute("x",bounds.minX-100+""),rect.setAttribute("y",bounds.minY-100+""),rect.setAttribute("width",bounds.width+200+""),rect.setAttribute("height",bounds.height+200+""),rect.setAttribute("fill","white"),mask.appendChild(rect),as&&mask.appendChild(getArrowheadSvgMask(as,info.start.arrowhead)),ae&&mask.appendChild(getArrowheadSvgMask(ae,info.end.arrowhead)),labelGeometry){const labelMask=document.createElementNS("http://www.w3.org/2000/svg","rect");labelMask.setAttribute("x",labelGeometry.x+""),labelMask.setAttribute("y",labelGeometry.y+""),labelMask.setAttribute("width",labelGeometry.w+""),labelMask.setAttribute("height",labelGeometry.h+""),labelMask.setAttribute("fill","black"),mask.appendChild(labelMask)}defs.appendChild(mask),g.appendChild(defs)}const g2=document.createElementNS("http://www.w3.org/2000/svg","g");g2.setAttribute("mask",`url(#${maskId})`),g.appendChild(g2);const rect2=document.createElementNS("http://www.w3.org/2000/svg","rect");rect2.setAttribute("x","-100"),rect2.setAttribute("y","-100"),rect2.setAttribute("width",bounds.width+200+""),rect2.setAttribute("height",bounds.height+200+""),rect2.setAttribute("fill","transparent"),rect2.setAttribute("stroke","none"),g2.appendChild(rect2);const path=function getArrowSvgPath(d,color,strokeWidth){const path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d",d),path.setAttribute("fill","none"),path.setAttribute("stroke",color),path.setAttribute("stroke-width",strokeWidth+""),path}(info.isStraight?(0,dist_esm.N7h)(info):(0,dist_esm.t9i)(info),color,strokeWidth),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(info.isStraight?info.length:Math.abs(info.bodyArc.length),strokeWidth,{style:shape.props.dash});if(path.setAttribute("stroke-dasharray",strokeDasharray),path.setAttribute("stroke-dashoffset",strokeDashoffset),g2.appendChild(path),as&&g.appendChild(getArrowheadSvgPath(as,shape.props.color,strokeWidth,"arrow"===shape.props.arrowheadStart?"none":shape.props.fill,theme)),ae&&g.appendChild(getArrowheadSvgPath(ae,shape.props.color,strokeWidth,"arrow"===shape.props.arrowheadEnd?"none":shape.props.fill,theme)),labelGeometry){ctx.addExportDef(getFontDefForExport(shape.props.font));const opts={fontSize:ARROW_LABEL_FONT_SIZES[shape.props.size],lineHeight:TEXT_PROPS.lineHeight,fontFamily:dist_esm.p64[shape.props.font],padding:0,textAlign:"middle",width:labelGeometry.w-8,verticalTextAlign:"middle",height:labelGeometry.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},textElm=createTextSvgElementFromSpans(this.editor,this.editor.textMeasure.measureTextSpans(shape.props.text,opts),opts);textElm.setAttribute("fill",theme[shape.props.labelColor].solid);Array.from(textElm.children).forEach((child=>{const x=parseFloat(child.getAttribute("x")||"0"),y=parseFloat(child.getAttribute("y")||"0");child.setAttribute("x",x+4+labelGeometry.x+"px"),child.setAttribute("y",y+labelGeometry.y+"px")}));const textBgEl=textElm.cloneNode(!0);textBgEl.setAttribute("stroke-width","2"),textBgEl.setAttribute("fill",theme.background),textBgEl.setAttribute("stroke",theme.background),g.appendChild(textBgEl),g.appendChild(textElm)}return g}getCanvasSvgDefs(){return[getFillDefForCanvas()]}}function getArrowheadSvgMask(d,arrowhead){const path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d",d),path.setAttribute("fill","arrow"===arrowhead?"none":"black"),path.setAttribute("stroke","none"),path}function getArrowheadSvgPath(d,color,strokeWidth,fill,theme){const path=document.createElementNS("http://www.w3.org/2000/svg","path");path.setAttribute("d",d),path.setAttribute("fill","none"),path.setAttribute("stroke",theme[color].solid),path.setAttribute("stroke-width",strokeWidth+"");const shapeFill=getShapeFillSvg({d,fill,color,theme});if(shapeFill){const g=document.createElementNS("http://www.w3.org/2000/svg","g");return g.appendChild(shapeFill),g.appendChild(path),g}return path}function isPrecise(normalizedAnchor){return.5!==normalizedAnchor.x||.5!==normalizedAnchor.y}const ROTATING_BOX_SHADOWS=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function getRotatedBoxShadow(rotation){const cssStrings=ROTATING_BOX_SHADOWS.map((shadow=>{const{offsetX,offsetY,blur,spread,color}=shadow,vec=new dist_esm.GF3(offsetX,offsetY),{x,y}=vec.rot(-rotation);return`${x}px ${y}px ${blur}px ${spread}px ${color}`}));return cssStrings.join(", ")}const LINK_ICON="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function HyperlinkButton({url,zoomLevel}){return(0,jsx_runtime.jsx)("a",{className:classnames_default()("tl-hyperlink-button",{"tl-hyperlink-button__hidden":zoomLevel<.32}),href:url,target:"_blank",rel:"noopener noreferrer",onPointerDown:dist_esm.beA,onPointerUp:dist_esm.beA,title:url,draggable:!1,children:(0,jsx_runtime.jsx)("div",{className:"tl-hyperlink-button__icon",style:{mask:`url("${LINK_ICON}") center 100% / 100% no-repeat`,WebkitMask:`url("${LINK_ICON}") center 100% / 100% no-repeat`}})})}class BookmarkShapeUtil extends dist_esm.StR{static type="bookmark";static props=dist_esm.qU;static migrations=dist_esm.h9n;canResize=()=>!1;hideSelectionBoundsFg=()=>!0;getDefaultProps(){return{url:"",w:300,h:320,assetId:null}}component(shape){const asset=shape.props.assetId?this.editor.getAsset(shape.props.assetId):null,pageRotation=this.editor.getShapePageTransform(shape).rotation(),address=getHumanReadableAddress(shape);return(0,jsx_runtime.jsx)(dist_esm.G7H,{children:(0,jsx_runtime.jsxs)("div",{className:"tl-bookmark__container",style:{boxShadow:getRotatedBoxShadow(pageRotation)},children:[(0,jsx_runtime.jsxs)("div",{className:"tl-bookmark__image_container",children:[asset?.props.image?(0,jsx_runtime.jsx)("img",{className:"tl-bookmark__image",draggable:!1,src:asset?.props.image,alt:asset?.props.title||""}):(0,jsx_runtime.jsx)("div",{className:"tl-bookmark__placeholder"}),(0,jsx_runtime.jsx)(HyperlinkButton,{url:shape.props.url,zoomLevel:this.editor.zoomLevel})]}),(0,jsx_runtime.jsxs)("div",{className:"tl-bookmark__copy_container",children:[asset?.props.title&&(0,jsx_runtime.jsx)("h2",{className:"tl-bookmark__heading",children:truncateStringWithEllipsis(asset?.props.title||"",54)}),asset?.props.description&&(0,jsx_runtime.jsx)("p",{className:"tl-bookmark__description",children:truncateStringWithEllipsis(asset?.props.description||"",128)}),(0,jsx_runtime.jsx)("a",{className:"tl-bookmark__link",href:shape.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:dist_esm.beA,onPointerUp:dist_esm.beA,onClick:dist_esm.beA,children:truncateStringWithEllipsis(address,45)})]})]})})}indicator(shape){return(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(shape.props.w),height:(0,dist_esm.$ZD)(shape.props.h),rx:"8",ry:"8"})}onBeforeCreate=shape=>{updateBookmarkAssetOnUrlChange(this.editor,shape)};onBeforeUpdate=(prev,shape)=>{if(prev.props.url!==shape.props.url){if(!(0,dist_esm.jvJ)(shape.props.url))return{...shape,props:{...shape.props,url:prev.props.url}};updateBookmarkAssetOnUrlChange(this.editor,shape)}}}const getHumanReadableAddress=shape=>{try{const url=new URL(shape.props.url),path=url.pathname.replace(/\/*$/,"");return`${url.hostname}${path}`}catch(e){return shape.props.url}};function updateBookmarkAssetOnUrlChange(editor,shape){const{url}=shape.props,assetId=dist_esm.Ykc.createId((0,dist_esm.jKo)(url));editor.getAsset(assetId)?shape.props.assetId!==assetId&&editor.updateShapes([{id:shape.id,type:shape.type,props:{assetId}}]):(editor.updateShapes([{id:shape.id,type:shape.type,props:{assetId:null}}]),createBookmarkAssetOnUrlChange(editor,shape))}const createBookmarkAssetOnUrlChange=(0,dist_esm.DsO)((async(editor,shape)=>{const{url}=shape.props,asset=await editor.getAssetForExternalContent({type:"url",url});asset&&editor.batch((()=>{editor.createAssets([asset]),editor.updateShapes([{id:shape.id,type:shape.type,props:{assetId:asset.id}}])}))}),500);function getSvgPathFromStrokePoints(points,closed=!1){const len=points.length;if(len<2)return"";let a=points[0].point,b=points[1].point;if(2===len)return`M${(0,dist_esm.Yku)(a)}L${(0,dist_esm.Yku)(b)}`;let result="";for(let i=2,max=len-1;i<max;i++)a=points[i].point,b=points[i+1].point,result+=(0,dist_esm.Y8W)(a,b);return closed?`M${(0,dist_esm.Y8W)(points[0].point,points[1].point)}Q${(0,dist_esm.Yku)(points[1].point)}${(0,dist_esm.Y8W)(points[1].point,points[2].point)}T${result}${(0,dist_esm.Y8W)(points[len-1].point,points[0].point)}${(0,dist_esm.Y8W)(points[0].point,points[1].point)}Z`:`M${(0,dist_esm.Yku)(points[0].point)}Q${(0,dist_esm.Yku)(points[1].point)}${(0,dist_esm.Y8W)(points[1].point,points[2].point)}${points.length>3?"T":""}${result}L${(0,dist_esm.Yku)(points[len-1].point)}`}function useForceSolid(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("zoom",(()=>editor.zoomLevel<.35),[editor])}const PEN_EASING=t=>.65*t+.35*(0,dist_esm.dvh)(t*dist_esm.PI/2),simulatePressureSettings=strokeWidth=>({size:1+strokeWidth,thinning:.5,streamline:.62+(1+strokeWidth)/8*.06,smoothing:.62,easing:dist_esm.Ljl.easeOutSine,simulatePressure:!0}),realPressureSettings=strokeWidth=>({size:1+1.2*strokeWidth,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:PEN_EASING}),solidSettings=strokeWidth=>({size:1+strokeWidth,thinning:0,streamline:.62+(1+strokeWidth)/8*.06,smoothing:.62,simulatePressure:!1,easing:dist_esm.Ljl.linear});function getHighlightFreehandSettings({strokeWidth,showAsComplete}){return{size:1+strokeWidth,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:dist_esm.Ljl.easeOutSine,last:showAsComplete}}function getFreehandOptions(shapeProps,strokeWidth,forceComplete,forceSolid){return{...forceSolid?solidSettings(strokeWidth):"draw"===shapeProps.dash?shapeProps.isPen?realPressureSettings(strokeWidth):simulatePressureSettings(strokeWidth):solidSettings(strokeWidth),last:shapeProps.isComplete||forceComplete}}function getPointsFromSegments(segments){const points=[];for(const segment of segments)if("free"===segment.type||segment.points.length<2)points.push(...segment.points.map(dist_esm.GF3.Cast));else{const pointsToInterpolate=Math.max(4,Math.floor(dist_esm.GF3.Dist(segment.points[0],segment.points[1])/16));points.push(...dist_esm.GF3.PointsBetween(segment.points[0],segment.points[1],pointsToInterpolate))}return points}function getDrawShapeStrokeDashArray(shape,strokeWidth){return{draw:"none",solid:"none",dotted:"0.1 "+2*strokeWidth,dashed:`${2*strokeWidth} ${2*strokeWidth}`}[shape.props.dash]}class DrawShapeUtil extends dist_esm.EeJ{static type="draw";static props=dist_esm.wu8;static migrations=dist_esm._l9;hideResizeHandles=shape=>getIsDot(shape);hideRotateHandle=shape=>getIsDot(shape);hideSelectionBoundsFg=shape=>getIsDot(shape);getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(shape){const points=getPointsFromSegments(shape.props.segments),strokeWidth=STROKE_SIZES[shape.props.size];if(1===shape.props.segments.length){const box=dist_esm.NoK.FromPoints(points);if(box.width<2*strokeWidth&&box.height<2*strokeWidth)return new dist_esm.EEY({x:-strokeWidth,y:-strokeWidth,radius:strokeWidth,isFilled:!0})}const strokePoints=getStrokePoints(points,getFreehandOptions(shape.props,strokeWidth,!0,!0)).map((p=>p.point));return shape.props.isClosed?new dist_esm.wWH({points:strokePoints,isFilled:"none"!==shape.props.fill}):new dist_esm.qvd({points:strokePoints})}component(shape){const theme=useDefaultColorTheme(),forceSolid=useForceSolid(),strokeWidth=STROKE_SIZES[shape.props.size],allPointsFromSegments=getPointsFromSegments(shape.props.segments),showAsComplete=shape.props.isComplete||"straight"===(0,dist_esm.Z$Q)(shape.props.segments)?.type;let sw=strokeWidth;forceSolid||shape.props.isPen||"draw"!==shape.props.dash||1!==allPointsFromSegments.length||(sw+=(0,dist_esm.Vkp)(shape.id)()*(strokeWidth/6));const options=getFreehandOptions(shape.props,sw,showAsComplete,forceSolid),strokePoints=getStrokePoints(allPointsFromSegments,options),solidStrokePath=strokePoints.length>1?getSvgPathFromStrokePoints(strokePoints,shape.props.isClosed):getDot(allPointsFromSegments[0],sw);if(!forceSolid&&"draw"===shape.props.dash||strokePoints.length<2){setStrokePointRadii(strokePoints,options);const strokeOutlinePoints=getStrokeOutlinePoints_getStrokeOutlinePoints(strokePoints,options);return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,fill:shape.props.isClosed?shape.props.fill:"none",color:shape.props.color,d:solidStrokePath}),(0,jsx_runtime.jsx)("path",{d:(0,dist_esm.RKM)(strokeOutlinePoints,!0),strokeLinecap:"round",fill:theme[shape.props.color].solid})]})}return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,color:shape.props.color,fill:shape.props.isClosed?shape.props.fill:"none",d:solidStrokePath}),(0,jsx_runtime.jsx)("path",{d:solidStrokePath,strokeLinecap:"round",fill:"none",stroke:theme[shape.props.color].solid,strokeWidth,strokeDasharray:getDrawShapeStrokeDashArray(shape,strokeWidth),strokeDashoffset:"0"})]})}indicator(shape){const forceSolid=useForceSolid(),strokeWidth=STROKE_SIZES[shape.props.size],allPointsFromSegments=getPointsFromSegments(shape.props.segments);let sw=strokeWidth;forceSolid||shape.props.isPen||"draw"!==shape.props.dash||1!==allPointsFromSegments.length||(sw+=(0,dist_esm.Vkp)(shape.id)()*(strokeWidth/6));const showAsComplete=shape.props.isComplete||"straight"===(0,dist_esm.Z$Q)(shape.props.segments)?.type,strokePoints=getStrokePoints(allPointsFromSegments,getFreehandOptions(shape.props,sw,showAsComplete,!0)),solidStrokePath=strokePoints.length>1?getSvgPathFromStrokePoints(strokePoints,shape.props.isClosed):getDot(allPointsFromSegments[0],sw);return(0,jsx_runtime.jsx)("path",{d:solidStrokePath})}toSvg(shape,ctx){const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode});ctx.addExportDef(getFillDefForExport(shape.props.fill,theme));const{color}=shape.props,strokeWidth=STROKE_SIZES[shape.props.size],allPointsFromSegments=getPointsFromSegments(shape.props.segments),showAsComplete=shape.props.isComplete||"straight"===(0,dist_esm.Z$Q)(shape.props.segments)?.type;let sw=strokeWidth;shape.props.isPen||"draw"!==shape.props.dash||1!==allPointsFromSegments.length||(sw+=(0,dist_esm.Vkp)(shape.id)()*(strokeWidth/6));const options=getFreehandOptions(shape.props,sw,showAsComplete,!1),strokePoints=getStrokePoints(allPointsFromSegments,options),solidStrokePath=strokePoints.length>1?getSvgPathFromStrokePoints(strokePoints,shape.props.isClosed):getDot(allPointsFromSegments[0],sw);let foregroundPath;if("draw"===shape.props.dash||strokePoints.length<2){setStrokePointRadii(strokePoints,options);const strokeOutlinePoints=getStrokeOutlinePoints_getStrokeOutlinePoints(strokePoints,options),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",(0,dist_esm.RKM)(strokeOutlinePoints,!0)),p.setAttribute("fill",theme[color].solid),p.setAttribute("stroke-linecap","round"),foregroundPath=p}else{const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",solidStrokePath),p.setAttribute("stroke",theme[color].solid),p.setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-width",strokeWidth.toString()),p.setAttribute("stroke-dasharray",getDrawShapeStrokeDashArray(shape,strokeWidth)),p.setAttribute("stroke-dashoffset","0"),foregroundPath=p}const fillPath=getShapeFillSvg({fill:shape.props.isClosed?shape.props.fill:"none",d:solidStrokePath,color:shape.props.color,theme});if(fillPath){const g=document.createElementNS("http://www.w3.org/2000/svg","g");return g.appendChild(fillPath),g.appendChild(foregroundPath),g}return foregroundPath}getCanvasSvgDefs(){return[getFillDefForCanvas()]}onResize=(shape,info)=>{const{scaleX,scaleY}=info,newSegments=[];for(const segment of shape.props.segments)newSegments.push({...segment,points:segment.points.map((({x,y,z})=>({x:(0,dist_esm.FHy)(scaleX*x),y:(0,dist_esm.FHy)(scaleY*y),z})))});return{props:{segments:newSegments}}};expandSelectionOutlinePx(shape){const multiplier="draw"===shape.props.dash?1.6:1;return STROKE_SIZES[shape.props.size]*multiplier/2}}function getDot(point,sw){const r=.5*(sw+1);return`M ${point.x} ${point.y} m -${r}, 0 a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 -${2*r},0`}function getIsDot(shape){return 1===shape.props.segments.length&&shape.props.segments[0].points.length<2}class EmbedShapeUtil extends dist_esm.StR{static type="embed";static props=dist_esm.DWN;static migrations=dist_esm.BF8;hideSelectionBoundsFg=shape=>!this.canResize(shape);canEdit=()=>!0;canUnmount=shape=>!!getEmbedInfo(shape.props.url)?.definition?.canUnmount;canResize=shape=>!!getEmbedInfo(shape.props.url)?.definition?.doesResize;canEditInReadOnly=()=>!0;getDefaultProps(){return{w:300,h:300,url:""}}isAspectRatioLocked=shape=>{const embedInfo=getEmbedInfo(shape.props.url);return embedInfo?.definition.isAspectRatioLocked??!1};onResize=(shape,info)=>{const isAspectRatioLocked=this.isAspectRatioLocked(shape),embedInfo=getEmbedInfo(shape.props.url);let minWidth=embedInfo?.definition.minWidth??200,minHeight=embedInfo?.definition.minHeight??200;if(isAspectRatioLocked){const aspectRatio=shape.props.w/shape.props.h;aspectRatio>1?minWidth*=aspectRatio:minHeight/=aspectRatio}return function resizeBox(shape,info,opts={}){const{newPoint,handle,scaleX,scaleY}=info,{minWidth=1,maxWidth=1/0,minHeight=1,maxHeight=1/0}=opts;let w=shape.props.w*scaleX,h=shape.props.h*scaleY;const offset=new dist_esm.GF3(0,0);if(w>0){if(w<minWidth){switch(handle){case"top_left":case"left":case"bottom_left":offset.x=w-minWidth;break;case"top":case"bottom":offset.x=(w-minWidth)/2;break;default:offset.x=0}w=minWidth}}else if(offset.x=w,w=-w,w<minWidth){switch(handle){case"top_left":case"left":case"bottom_left":offset.x=-w;break;default:offset.x=-minWidth}w=minWidth}if(h>0){if(h<minHeight){switch(handle){case"top_left":case"top":case"top_right":offset.y=h-minHeight;break;case"right":case"left":offset.y=(h-minHeight)/2;break;default:offset.y=0}h=minHeight}}else if(offset.y=h,h=-h,h<minHeight){switch(handle){case"top_left":case"top":case"top_right":offset.y=-h;break;default:offset.y=-minHeight}h=minHeight}const{x,y}=offset.rot(shape.rotation).add(newPoint);return{x,y,props:{w:Math.min(maxWidth,w),h:Math.min(maxHeight,h)}}}(shape,info,{minWidth,minHeight})};component(shape){const{w,h,url}=shape.props,isEditing=(0,dist_esm.YzH)(shape.id),embedInfo=(0,react.useMemo)((()=>getEmbedInfoUnsafely(url)),[url]),isHoveringWhileEditingSameShape=(0,dist_esm.HgN)("is hovering",(()=>{const{editingShapeId,hoveredShapeId}=this.editor.currentPageState;if(editingShapeId&&hoveredShapeId!==editingShapeId){const editingShape=this.editor.getShape(editingShapeId);if(editingShape&&this.editor.isShapeOfType(editingShape,"embed"))return!0}return!1}),[]),pageRotation=this.editor.getShapePageTransform(shape).rotation(),isInteractive=isEditing||isHoveringWhileEditingSameShape;if("github_gist"===embedInfo?.definition.type){const idFromGistUrl=embedInfo.url.split("/").pop();if(!idFromGistUrl)throw Error("No gist id!");return(0,jsx_runtime.jsx)(dist_esm.G7H,{className:"tl-embed-container",id:shape.id,children:(0,jsx_runtime.jsx)(Gist,{id:idFromGistUrl,width:(0,dist_esm.$ZD)(w),height:(0,dist_esm.$ZD)(h),isInteractive,pageRotation})})}const sandbox=(permissions={...dist_esm.gBS,...embedInfo?.definition.overridePermissions??{}},Object.entries(permissions).filter((([_perm,isEnabled])=>isEnabled)).map((([perm])=>perm)).join(" "));var permissions;return(0,jsx_runtime.jsx)(dist_esm.G7H,{className:"tl-embed-container",id:shape.id,children:embedInfo?.definition?(0,jsx_runtime.jsx)("iframe",{className:"tl-embed",sandbox,src:embedInfo.embedUrl,width:(0,dist_esm.$ZD)(w),height:(0,dist_esm.$ZD)(h),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:isInteractive?"auto":"none",zIndex:isInteractive?"":"-1",boxShadow:getRotatedBoxShadow(pageRotation),borderRadius:embedInfo?.definition.overrideOutlineRadius??8,background:embedInfo?.definition.backgroundColor}}):null})}indicator(shape){const embedInfo=(0,react.useMemo)((()=>getEmbedInfo(shape.props.url)),[shape.props.url]);return(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(shape.props.w),height:(0,dist_esm.$ZD)(shape.props.h),rx:embedInfo?.definition.overrideOutlineRadius??8,ry:embedInfo?.definition.overrideOutlineRadius??8})}}function Gist({id,file,isInteractive,width,height,style,pageRotation}){return(0,jsx_runtime.jsx)("iframe",{className:"tl-embed",draggable:!1,width:(0,dist_esm.$ZD)(width),height:(0,dist_esm.$ZD)(height),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...style,pointerEvents:isInteractive?"all":"none",zIndex:isInteractive?"":"-1",boxShadow:getRotatedBoxShadow(pageRotation)},srcDoc:`\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src=https://gist.github.com/${id}.js${file?`?file=${file}`:""}><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>`})}const FrameLabelInput=(0,react.forwardRef)((({id,name,isEditing},ref)=>{const editor=(0,dist_esm.jE2)(),handleKeyDown=(0,react.useCallback)((e=>{"Enter"!==e.key||e.nativeEvent.isComposing||((0,dist_esm.beA)(e),e.currentTarget.blur(),editor.setEditingShape(null))}),[editor]),handleBlur=(0,react.useCallback)((e=>{const shape=editor.getShape(id);if(!shape)return;const name2=shape.props.name,value=e.currentTarget.value.trim();name2!==value&&editor.updateShapes([{id,type:"frame",props:{name:value}}],{squashing:!0})}),[id,editor]),handleChange=(0,react.useCallback)((e=>{const shape=editor.getShape(id);if(!shape)return;const name2=shape.props.name,value=e.currentTarget.value;name2!==value&&editor.updateShapes([{id,type:"frame",props:{name:value}}],{squashing:!0})}),[id,editor]);return(0,jsx_runtime.jsxs)("div",{className:"tl-frame-label "+(isEditing?"tl-frame-label__editing":""),children:[(0,jsx_runtime.jsx)("input",{className:"tl-frame-name-input",ref,style:{display:isEditing?void 0:"none"},value:name,autoFocus:!0,onKeyDown:handleKeyDown,onBlur:handleBlur,onChange:handleChange}),defaultEmptyAs(name,"Frame")+String.fromCharCode(8203)]})})),FrameHeading=function FrameHeading2({id,name,width,height}){const editor=(0,dist_esm.jE2)(),pageRotation=(0,dist_esm.f5g)(editor.getShapePageTransform(id).rotation()),isEditing=(0,dist_esm.YzH)(id),rInput=(0,react.useRef)(null),handlePointerDown=(0,react.useCallback)((e=>{const event=(0,dist_esm.YyG)(e);editor.editingShapeId!==id&&(editor.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:editor.getShape(id),...event}),e.preventDefault())}),[editor,id]);(0,react.useEffect)((()=>{const el=rInput.current;el&&isEditing&&(el.focus(),el.select(),requestAnimationFrame((()=>{document.activeElement!==el&&(el.focus(),el.select())})))}),[rInput,isEditing]);const scaledRotation=((pageRotation+Math.PI/4)*(2/Math.PI)+4)%4,labelSide=["top","left","bottom","right"][Math.floor(scaledRotation)];let labelTranslate;switch(labelSide){case"top":labelTranslate="";break;case"right":labelTranslate=`translate(${(0,dist_esm.$ZD)(width)}px, 0px) rotate(90deg)`;break;case"bottom":labelTranslate=`translate(${(0,dist_esm.$ZD)(width)}px, ${(0,dist_esm.$ZD)(height)}px) rotate(180deg)`;break;case"left":labelTranslate=`translate(0px, ${(0,dist_esm.$ZD)(height)}px) rotate(270deg)`}return(0,jsx_runtime.jsx)("div",{className:"tl-frame-heading",style:{overflow:isEditing?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${"top"===labelSide||"bottom"===labelSide?Math.ceil(width):Math.ceil(height)}px + var(--space-5))`,bottom:"100%",transform:`${labelTranslate} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},onPointerDown:handlePointerDown,children:(0,jsx_runtime.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,jsx_runtime.jsx)(FrameLabelInput,{ref:rInput,id,name,isEditing})})})};function defaultEmptyAs(str,dflt){return str.match(/^\s*$/)?dflt:str}class FrameShapeUtil extends dist_esm.StR{static type="frame";static props=dist_esm.k7F;static migrations=dist_esm.gRP;canBind=()=>!0;canEdit=()=>!0;getDefaultProps(){return{w:320,h:180,name:""}}getGeometry(shape){return new dist_esm.zc7({width:shape.props.w,height:shape.props.h,isFilled:!1})}component(shape){const bounds=this.editor.getShapeGeometry(shape).bounds,theme=useDefaultColorTheme();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist_esm.gkc,{children:(0,jsx_runtime.jsx)("rect",{className:"tl-frame__body",width:bounds.width,height:bounds.height,fill:theme.solid,stroke:theme.text})}),(0,jsx_runtime.jsx)(FrameHeading,{id:shape.id,name:shape.props.name,width:bounds.width,height:bounds.height})]})}toSvg(shape){const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode}),g=document.createElementNS("http://www.w3.org/2000/svg","g"),rect=document.createElementNS("http://www.w3.org/2000/svg","rect");rect.setAttribute("width",shape.props.w.toString()),rect.setAttribute("height",shape.props.h.toString()),rect.setAttribute("fill",theme.solid),rect.setAttribute("stroke",theme.black.solid),rect.setAttribute("stroke-width","1"),rect.setAttribute("rx","1"),rect.setAttribute("ry","1"),g.appendChild(rect);const scaledRotation=(((0,dist_esm.f5g)(this.editor.getShapePageTransform(shape.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;let labelTranslate;switch(["top","left","bottom","right"][Math.floor(scaledRotation)]){case"top":default:labelTranslate="";break;case"right":labelTranslate=`translate(${(0,dist_esm.$ZD)(shape.props.w)}px, 0px) rotate(90deg)`;break;case"bottom":labelTranslate=`translate(${(0,dist_esm.$ZD)(shape.props.w)}px, ${(0,dist_esm.$ZD)(shape.props.h)}px) rotate(180deg)`;break;case"left":labelTranslate=`translate(0px, ${(0,dist_esm.$ZD)(shape.props.h)}px) rotate(270deg)`}const opts={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:shape.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},spans=this.editor.textMeasure.measureTextSpans(defaultEmptyAs(shape.props.name,"Frame")+String.fromCharCode(8203),opts),firstSpan=spans[0],lastSpan=(0,dist_esm.Z$Q)(spans),labelTextWidth=lastSpan.box.w+lastSpan.box.x-firstSpan.box.x,text=createTextSvgElementFromSpans(this.editor,spans,{offsetY:-opts.height-2,...opts});text.style.setProperty("transform",labelTranslate);const textBg=document.createElementNS("http://www.w3.org/2000/svg","rect");return textBg.setAttribute("x","-8px"),textBg.setAttribute("y",-opts.height-4+"px"),textBg.setAttribute("width",labelTextWidth+16+"px"),textBg.setAttribute("height",`${opts.height}px`),textBg.setAttribute("rx","4px"),textBg.setAttribute("ry","4px"),textBg.setAttribute("fill",theme.background),g.appendChild(textBg),g.appendChild(text),g}indicator(shape){const bounds=this.editor.getShapeGeometry(shape).bounds;return(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(bounds.width),height:(0,dist_esm.$ZD)(bounds.height),className:"tl-frame-indicator"})}canReceiveNewChildrenOfType=(shape,_type)=>!shape.isLocked;providesBackgroundForChildren(){return!0}canDropShapes=(shape,_shapes)=>!shape.isLocked;onDragShapesOver=(frame,shapes)=>shapes.every((child=>child.parentId===frame.id))?{shouldHint:!1}:(this.editor.reparentShapes(shapes.map((shape=>shape.id)),frame.id),{shouldHint:!0});onDragShapesOut=(_shape,shapes)=>{const parent=this.editor.getShape(_shape.parentId);parent&&this.editor.isShapeOfType(parent,"group")?this.editor.reparentShapes(shapes,parent.id):this.editor.reparentShapes(shapes,this.editor.currentPageId)};onResizeEnd=shape=>{const bounds=this.editor.getShapePageBounds(shape),children=this.editor.getSortedChildIdsForParent(shape.id),shapesToReparent=[];for(const childId of children){const childBounds=this.editor.getShapePageBounds(childId);bounds.includes(childBounds)||shapesToReparent.push(childId)}shapesToReparent.length>0&&this.editor.reparentShapes(shapesToReparent,this.editor.currentPageId)}}const TextLabel=react.memo((function TextLabel2({id,type,text,size,labelColor,font,align,verticalAlign,wrap,bounds}){const{rInput,isEmpty,isEditing,handleFocus,handleChange,handleKeyDown,handleBlur,handleInputPointerDown,handleDoubleClick}=useEditableText(id,type,text),finalText=TextHelpers.normalizeTextForDom(text),hasText=finalText.length>0,legacyAlign=function isLegacyAlign(align){return"start-legacy"===align||"middle-legacy"===align||"end-legacy"===align}(align),theme=useDefaultColorTheme();return isEditing||hasText?(0,jsx_runtime.jsx)("div",{className:"tl-text-label","data-font":font,"data-align":align,"data-hastext":!isEmpty,"data-isediting":isEditing,"data-textwrap":!!wrap,style:{justifyContent:"middle"===align||legacyAlign?"center":align,alignItems:"middle"===verticalAlign?"center":verticalAlign,...bounds?{top:bounds.minY,left:bounds.minX,width:bounds.width,height:bounds.height,position:"absolute"}:{}},children:(0,jsx_runtime.jsxs)("div",{className:"tl-text-label__inner",style:{fontSize:LABEL_FONT_SIZES[size],lineHeight:LABEL_FONT_SIZES[size]*TEXT_PROPS.lineHeight+"px",minHeight:TEXT_PROPS.lineHeight+32,minWidth:0,color:theme[labelColor].solid},children:[(0,jsx_runtime.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:finalText}),isEditing&&(0,jsx_runtime.jsx)("textarea",{ref:rInput,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:text,onFocus:handleFocus,onChange:handleChange,onKeyDown:handleKeyDown,onBlur:handleBlur,onContextMenu:dist_esm.beA,onPointerDown:handleInputPointerDown,onDoubleClick:handleDoubleClick})]})}):null}));function getTextLabelSvgElement({bounds,editor,font,shape}){const opts={fontSize:LABEL_FONT_SIZES[shape.props.size],fontFamily:font,textAlign:shape.props.align,verticalTextAlign:shape.props.verticalAlign,width:Math.ceil(bounds.width),height:Math.ceil(bounds.height),padding:16,lineHeight:TEXT_PROPS.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},spans=editor.textMeasure.measureTextSpans(shape.props.text,opts),offsetX=function getLegacyOffsetX(align,padding,spans,totalWidth){if(("start-legacy"===align||"end-legacy"===align)&&0!==spans.length){const spansBounds=dist_esm.NoK.From(spans[0].box);for(const{box}of spans)spansBounds.union(box);if("start-legacy"===align)return(totalWidth-2*padding-spansBounds.width)/2;if("end-legacy"===align)return-(totalWidth-2*padding-spansBounds.width)/2}}(shape.props.align,16,spans,bounds.width);offsetX&&(opts.offsetX=offsetX);return createTextSvgElementFromSpans(0,spans,opts)}function precise(A){return`${(0,dist_esm.$ZD)(A.x)},${(0,dist_esm.$ZD)(A.y)} `}function rng(seed=""){let x=0,y=0,z=0,w=0;function next(){const t=x^x<<11;return x=y,y=z,z=w,w^=(w>>>19^t^t>>>8)>>>0,w/4294967296*2}for(let k=0;k<seed.length+64;k++)x^=0|seed.charCodeAt(k),next();return next}function getRoundedInkyPolygonPath(points){let polylineA="M";let p0,p1,p2;for(let i=0,n=points.length;i<n;i+=3)p0=points[i],p1=points[i+1],p2=points[i+2],polylineA+=`${precise(p0)}L${precise(p1)}Q${precise(p2)}`;return polylineA+=`${precise(points[0])}`,polylineA}function getRoundedPolygonPoints(id,outline,offset,roundness,passes){const results=[],random=rng(id);let p1,p0=outline[0];const len=outline.length;for(let i=0,n=len*passes;i<n;i++){p1=dist_esm.GF3.AddXY(outline[(i+1)%len],random()*offset,random()*offset);const delta=dist_esm.GF3.Sub(p1,p0),distance=dist_esm.GF3.Len(delta),vector=dist_esm.GF3.Div(delta,distance).mul(Math.min(distance/4,roundness));results.push(dist_esm.GF3.Add(p0,vector),dist_esm.GF3.Add(p1,vector.neg()),p1),p0=p1}return results}function getDrawLinePathData(id,outline,strokeWidth){let innerPathData=`M ${precise(outline[0])}L`,outerPathData2=`M ${precise(outline[0])}L`;const offset=strokeWidth/3,roundness=2*strokeWidth,random=rng(id);let p1,s1,p0=outline[0],s0=outline[0];for(let i=0,n=outline.length-1;i<n;i++){p1=outline[i+1],s1=dist_esm.GF3.AddXY(outline[i+1],random()*offset,random()*offset);const delta=dist_esm.GF3.Sub(p1,p0),distance=dist_esm.GF3.Len(delta),vector=dist_esm.GF3.Div(delta,distance).mul(Math.min(distance/4,roundness)),q0=dist_esm.GF3.Add(p0,vector),q1=dist_esm.GF3.Add(p1,vector.neg()),sDelta=dist_esm.GF3.Sub(s1,s0),sDistance=dist_esm.GF3.Len(sDelta),sVector=dist_esm.GF3.Div(sDelta,sDistance).mul(Math.min(sDistance/4,roundness)),sq0=dist_esm.GF3.Add(s0,sVector),sq1=dist_esm.GF3.Add(s1,sVector.neg());i===n-1?(innerPathData+=`${precise(q0)}L ${precise(p1)}`,outerPathData2+=`${precise(sq0)}L ${precise(s1)}`):(innerPathData+=`${precise(q0)}L ${precise(q1)}Q ${precise(p1)}`,outerPathData2+=`${precise(sq0)}L ${precise(sq1)}Q ${precise(s1)}`,p0=p1,s0=s1)}return[innerPathData,innerPathData+outerPathData2]}function getPillCircumference(width,height){const radius=Math.min(width,height)/2,longSide=Math.max(width,height)-2*radius;return Math.PI*(2*radius)+2*longSide}const switchSize=(size,s,m,l,xl)=>{switch(size){case"s":return s;case"m":return m;case"l":return l;case"xl":return xl}};function getCloudArcs(width,height,seed,size){const getRandom=(0,dist_esm.Vkp)(seed),pillCircumference=getPillCircumference(width,height),numBumps=Math.max(Math.ceil(pillCircumference/switchSize(size,50,70,100,130)),6,Math.ceil(pillCircumference/Math.min(width,height))),targetBumpProtrusion=pillCircumference/numBumps*.2,innerWidth=Math.max(width-2*targetBumpProtrusion,1),innerHeight=Math.max(height-2*targetBumpProtrusion,1),paddingX=(width-innerWidth)/2,paddingY=(height-innerHeight)/2,distanceBetweenPointsOnPerimeter=getPillCircumference(innerWidth,innerHeight)/numBumps,bumpPoints=function getPillPoints(width,height,numPoints){const radius=Math.min(width,height)/2,longSide=Math.max(width,height)-2*radius,spacing=(Math.PI*(2*radius)+2*longSide)/numPoints,sections=width>height?[{type:"straight",start:new dist_esm.GF3(radius,0),delta:new dist_esm.GF3(1,0)},{type:"arc",center:new dist_esm.GF3(width-radius,radius),startAngle:-dist_esm.PI/2},{type:"straight",start:new dist_esm.GF3(width-radius,height),delta:new dist_esm.GF3(-1,0)},{type:"arc",center:new dist_esm.GF3(radius,radius),startAngle:dist_esm.PI/2}]:[{type:"straight",start:new dist_esm.GF3(width,radius),delta:new dist_esm.GF3(0,1)},{type:"arc",center:new dist_esm.GF3(radius,height-radius),startAngle:0},{type:"straight",start:new dist_esm.GF3(0,height-radius),delta:new dist_esm.GF3(0,-1)},{type:"arc",center:new dist_esm.GF3(radius,radius),startAngle:dist_esm.PI}];let sectionOffset=0;const points=[];for(let i=0;i<numPoints;i++){const section=sections[0];"straight"===section.type?points.push(dist_esm.GF3.Add(section.start,dist_esm.GF3.Mul(section.delta,sectionOffset))):points.push((0,dist_esm.XDj)(section.center.x,section.center.y,radius,section.startAngle+sectionOffset/radius)),sectionOffset+=spacing;let sectionLength="straight"===section.type?longSide:dist_esm.PI*radius;for(;sectionOffset>sectionLength;)sectionOffset-=sectionLength,sections.push(sections.shift()),sectionLength="straight"===sections[0].type?longSide:dist_esm.PI*radius}return points}(innerWidth,innerHeight,numBumps).map((p=>p.addXY(paddingX,paddingY))),maxWiggleX=width<20?0:.3*targetBumpProtrusion,maxWiggleY=height<20?0:.3*targetBumpProtrusion,wiggledPoints=bumpPoints.slice(0);for(let i=0;i<Math.floor(numBumps/2);i++)wiggledPoints[i]=dist_esm.GF3.AddXY(wiggledPoints[i],getRandom()*maxWiggleX,getRandom()*maxWiggleY),wiggledPoints[numBumps-i-1]=dist_esm.GF3.AddXY(wiggledPoints[numBumps-i-1],getRandom()*maxWiggleX,getRandom()*maxWiggleY);const arcs=[];for(let i=0;i<wiggledPoints.length;i++){const j=i===wiggledPoints.length-1?0:i+1,leftWigglePoint=wiggledPoints[i],rightWigglePoint=wiggledPoints[j],leftPoint=bumpPoints[i],rightPoint=bumpPoints[j],midPoint=dist_esm.GF3.Average([leftPoint,rightPoint]),offsetAngle=dist_esm.GF3.Angle(leftPoint,rightPoint)-Math.PI/2,distanceBetweenOriginalPoints=dist_esm.GF3.Dist(leftPoint,rightPoint),curvatureOffset=distanceBetweenPointsOnPerimeter-distanceBetweenOriginalPoints,relativeSize=dist_esm.GF3.Dist(leftWigglePoint,rightWigglePoint)/distanceBetweenOriginalPoints,finalDistance=(Math.max(paddingX,paddingY)+curvatureOffset)*relativeSize,arcPoint=dist_esm.GF3.Add(midPoint,dist_esm.GF3.FromAngle(offsetAngle,finalDistance));arcPoint.x<0?arcPoint.x=0:arcPoint.x>width&&(arcPoint.x=width),arcPoint.y<0?arcPoint.y=0:arcPoint.y>height&&(arcPoint.y=height);const center=getCenterOfCircleGivenThreePoints(leftWigglePoint,rightWigglePoint,arcPoint),radius=dist_esm.GF3.Dist(center||dist_esm.GF3.Average([leftWigglePoint,rightWigglePoint]),leftWigglePoint);arcs.push({leftPoint:leftWigglePoint,rightPoint:rightWigglePoint,arcPoint,center,radius})}return arcs}function getCenterOfCircleGivenThreePoints(a,b,c){const A=a.x*(b.y-c.y)-a.y*(b.x-c.x)+b.x*c.y-c.x*b.y,x=-((a.x*a.x+a.y*a.y)*(c.y-b.y)+(b.x*b.x+b.y*b.y)*(a.y-c.y)+(c.x*c.x+c.y*c.y)*(b.y-a.y))/(2*A),y=-((a.x*a.x+a.y*a.y)*(b.x-c.x)+(b.x*b.x+b.y*b.y)*(c.x-a.x)+(c.x*c.x+c.y*c.y)*(a.x-b.x))/(2*A);return Number.isFinite(x)&&Number.isFinite(y)?new dist_esm.GF3(x,y):null}function cloudOutline(width,height,seed,size){const path=[],arcs=getCloudArcs(width,height,seed,size);for(const{center,radius,leftPoint,rightPoint}of arcs)path.push(...pointsOnArc(leftPoint,rightPoint,center,radius,10));return path}function cloudSvgPath(width,height,seed,size){const arcs=getCloudArcs(width,height,seed,size);let path=`M${(0,dist_esm.$ZD)(arcs[0].leftPoint.x)},${(0,dist_esm.$ZD)(arcs[0].leftPoint.y)}`;for(const{leftPoint,rightPoint,radius,center}of arcs){if(null===center){path+=` L${(0,dist_esm.$ZD)(rightPoint.x)},${(0,dist_esm.$ZD)(rightPoint.y)}`;continue}const arc=isLeft(leftPoint,rightPoint,center)?"0":"1";path+=` A${(0,dist_esm.$ZD)(radius)},${(0,dist_esm.$ZD)(radius)} 0 ${arc},1 ${(0,dist_esm.$ZD)(rightPoint.x)},${(0,dist_esm.$ZD)(rightPoint.y)}`}return path+=" Z",path}function inkyCloudSvgPath(width,height,seed,size){const getRandom=(0,dist_esm.Vkp)(seed),mutMultiplier="s"===size?.5:"m"===size?.7:"l"===size?.9:1.6,mut=n=>n+getRandom()*mutMultiplier*2,arcs=getCloudArcs(width,height,seed,size),mutPoint=arcs.reduce(((sum,arc)=>sum+dist_esm.GF3.Dist(arc.leftPoint,arc.rightPoint)),0)/arcs.length>15*mutMultiplier?p=>new dist_esm.GF3(mut(p.x),mut(p.y)):p=>p;let pathA=`M${(0,dist_esm.$ZD)(arcs[0].leftPoint.x)},${(0,dist_esm.$ZD)(arcs[0].leftPoint.y)}`,leftMutPoint=mutPoint(arcs[0].leftPoint),pathB=`M${(0,dist_esm.$ZD)(leftMutPoint.x)},${(0,dist_esm.$ZD)(leftMutPoint.y)}`;for(const{leftPoint,center,rightPoint,radius,arcPoint}of arcs){if(null===center){pathA+=` L${(0,dist_esm.$ZD)(rightPoint.x)},${(0,dist_esm.$ZD)(rightPoint.y)}`;const rightMutPoint2=mutPoint(rightPoint);pathB+=` L${(0,dist_esm.$ZD)(rightMutPoint2.x)},${(0,dist_esm.$ZD)(rightMutPoint2.y)}`,leftMutPoint=rightMutPoint2;continue}const arc=isLeft(leftPoint,rightPoint,center)?"0":"1";pathA+=` A${(0,dist_esm.$ZD)(radius)},${(0,dist_esm.$ZD)(radius)} 0 ${arc},1 ${(0,dist_esm.$ZD)(rightPoint.x)},${(0,dist_esm.$ZD)(rightPoint.y)}`;const rightMutPoint=mutPoint(rightPoint),mutCenter=getCenterOfCircleGivenThreePoints(leftMutPoint,rightMutPoint,mutPoint(arcPoint));if(!mutCenter){pathB+=` L${(0,dist_esm.$ZD)(rightMutPoint.x)},${(0,dist_esm.$ZD)(rightMutPoint.y)}`,leftMutPoint=rightMutPoint;continue}const mutRadius=Math.abs(dist_esm.GF3.Dist(mutCenter,leftMutPoint));pathB+=` A${(0,dist_esm.$ZD)(mutRadius)},${(0,dist_esm.$ZD)(mutRadius)} 0 ${arc},1 ${(0,dist_esm.$ZD)(rightMutPoint.x)},${(0,dist_esm.$ZD)(rightMutPoint.y)}`,leftMutPoint=rightMutPoint}return pathA+pathB+" Z"}function pointsOnArc(startPoint,endPoint,center,radius,numPoints){if(null===center)return[dist_esm.GF3.From(startPoint),dist_esm.GF3.From(endPoint)];const results=[],startAngle=dist_esm.GF3.Angle(center,startPoint),endAngle=dist_esm.GF3.Angle(center,endPoint),l=(0,dist_esm.VK_)(startAngle,endAngle);for(let i=0;i<numPoints;i++){const angle=startAngle+l*(i/(numPoints-1)),point=(0,dist_esm.XDj)(center.x,center.y,radius,angle);results.push(point)}return results}function isLeft(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)>0}const DashStyleCloud=react.memo((function DashStylePolygon({dash,fill,color,strokeWidth,w,h,id,size}){const theme=useDefaultColorTheme(),innerPath=cloudSvgPath(w,h,id,size),arcs=getCloudArcs(w,h,id,size);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d:innerPath,fill,color}),(0,jsx_runtime.jsx)("g",{strokeWidth,stroke:theme[color].solid,fill:"none",pointerEvents:"all",children:arcs.map((({leftPoint,rightPoint,center,radius},i)=>{const arcLength=center?radius*(0,dist_esm.f5g)((0,dist_esm.f5g)(dist_esm.GF3.Angle(center,rightPoint))-(0,dist_esm.f5g)(dist_esm.GF3.Angle(center,leftPoint))):dist_esm.GF3.Dist(leftPoint,rightPoint),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(arcLength,strokeWidth,{style:dash,start:"outset",end:"outset"});return(0,jsx_runtime.jsx)("path",{d:center?`M${leftPoint.x},${leftPoint.y}A${radius},${radius},0,0,1,${rightPoint.x},${rightPoint.y}`:`M${leftPoint.x},${leftPoint.y}L${rightPoint.x},${rightPoint.y}`,strokeDasharray,strokeDashoffset},i)}))})]})}));const DashStyleEllipse=react.memo((function DashStyleEllipse2({w,h,strokeWidth:sw,dash,color,fill}){const theme=useDefaultColorTheme(),cx=w/2,cy=h/2,rx=Math.max(0,cx),ry=Math.max(0,cy),perimeter=(0,dist_esm.RpK)(rx,ry),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(perimeter<64?2*perimeter:perimeter,sw,{style:dash,snap:4,closed:!0}),d=`M${cx-rx},${cy}a${rx},${ry},0,1,1,${2*rx},0a${rx},${ry},0,1,1,-${2*rx},0`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d,color,fill}),(0,jsx_runtime.jsx)("path",{d,strokeWidth:sw,width:(0,dist_esm.$ZD)(w),height:(0,dist_esm.$ZD)(h),fill:"none",stroke:theme[color].solid,strokeDasharray,strokeDashoffset,pointerEvents:"all"})]})}));function getOvalSolidPath(w,h){if(h>w){const offset2=w/2;return`\n    M0,${offset2}\n    a${offset2},${offset2},0,1,1,${2*offset2},0\n    L${w},${h-offset2}\n    a${offset2},${offset2},0,1,1,-${2*offset2},0\n    Z`}const offset=h/2;return`\n    M${offset},0\n    L${w-offset},0\n    a${offset},${offset},0,1,1,0,${2*offset}\n    L${offset},${h}\n    a${offset},${offset},0,1,1,0,${2*-offset}\n    Z`}function getOvalPerimeter(h,w){if(h>w){const offset2=w/2;return(0,dist_esm.RpK)(offset2,offset2)+2*(h-2*offset2)}const offset=h/2;return(0,dist_esm.RpK)(offset,offset)+2*(w-2*offset)}const DashStyleOval=react.memo((function DashStyleOval2({w,h,strokeWidth:sw,dash,color,fill}){const theme=useDefaultColorTheme(),d=getOvalSolidPath(w,h),perimeter=getOvalPerimeter(w,h),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(perimeter<64?2*perimeter:perimeter,sw,{style:dash,snap:4,start:"outset",end:"outset",closed:!0});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d,color,fill}),(0,jsx_runtime.jsx)("path",{d,strokeWidth:sw,width:(0,dist_esm.$ZD)(w),height:(0,dist_esm.$ZD)(h),fill:"none",stroke:theme[color].solid,strokeDasharray,strokeDashoffset,pointerEvents:"all"})]})}));function DashStyleOvalSvg({w,h,strokeWidth:sw,dash,color,theme,fill}){const d=getOvalSolidPath(w,h),perimeter=getOvalPerimeter(w,h),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(perimeter<64?2*perimeter:perimeter,sw,{style:dash,snap:4,closed:!0}),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");strokeElement.setAttribute("d",d),strokeElement.setAttribute("stroke-width",sw.toString()),strokeElement.setAttribute("width",w.toString()),strokeElement.setAttribute("height",h.toString()),strokeElement.setAttribute("fill","none"),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("stroke-dasharray",strokeDasharray),strokeElement.setAttribute("stroke-dashoffset",strokeDashoffset);return getSvgWithShapeFill(strokeElement,getShapeFillSvg({d,fill,color,theme}))}const DashStylePolygon=react.memo((function DashStylePolygon2({dash,fill,color,strokeWidth,outline,lines}){const theme=useDefaultColorTheme(),innerPath="M"+outline[0]+"L"+outline.slice(1)+"Z";return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d:innerPath,fill,color}),(0,jsx_runtime.jsxs)("g",{strokeWidth,stroke:theme[color].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(outline.length)).map(((_,i)=>{const A=outline[i],B=outline[(i+1)%outline.length],dist=dist_esm.GF3.Dist(A,B),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(dist,strokeWidth,{style:dash,start:"outset",end:"outset"});return(0,jsx_runtime.jsx)("line",{x1:A.x,y1:A.y,x2:B.x,y2:B.y,strokeDasharray,strokeDashoffset},i)})),lines&&lines.map((([A,B],i)=>{const dist=dist_esm.GF3.Dist(A,B),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(dist,strokeWidth,{style:dash,start:"skip",end:"outset",snap:"dotted"===dash?4:void 0});return(0,jsx_runtime.jsx)("path",{d:`M${A.x},${A.y}L${B.x},${B.y}`,stroke:theme[color].solid,strokeWidth,fill:"none",strokeDasharray,strokeDashoffset},`line_fg_${i}`)}))]})]})}));const DrawStyleCloud=react.memo((function StyleCloud({fill,color,strokeWidth,w,h,id,size}){const theme=useDefaultColorTheme(),path=inkyCloudSvgPath(w,h,id,size);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d:path,fill,color}),(0,jsx_runtime.jsx)("path",{d:path,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}));react.memo((function DrawStyleEllipse2({id,w,h,strokeWidth:sw,fill,color}){const theme=useDefaultColorTheme(),innerPath=getEllipseIndicatorPath(id,w,h,sw),outerPath=getEllipsePath(id,w,h,sw);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d:innerPath,color,fill}),(0,jsx_runtime.jsx)("path",{d:outerPath,fill:theme[color].solid,strokeWidth:0,pointerEvents:"all"})]})}));function getEllipseStrokeOptions(strokeWidth){return{size:1+strokeWidth,thinning:.25,end:{taper:strokeWidth},start:{taper:strokeWidth},streamline:0,smoothing:1,simulatePressure:!1}}function getEllipseStrokePoints(id,width,height,strokeWidth){const getRandom=(0,dist_esm.Vkp)(id),rx=width/2,ry=height/2,perimeter=(0,dist_esm.RpK)(rx,ry),points=[],start=dist_esm.yoY*getRandom(),length=dist_esm.yoY+dist_esm.gc0/2+Math.abs(getRandom())*dist_esm.gc0,count=Math.max(16,perimeter/10);for(let i=0;i<count;i++){const t=i/(count-1),r=start+t*length,c=Math.cos(r),s=Math.sin(r);points.push(new dist_esm.GF3(rx*c+.5*width+.05*getRandom(),ry*s+height/2+.05*getRandom(),Math.min(1,.5+Math.abs(.5-(getRandom()>0?dist_esm.Ljl.easeInOutSine(t):dist_esm.Ljl.easeInExpo(t)))/2)))}return getStrokePoints(points,getEllipseStrokeOptions(strokeWidth))}function getEllipsePath(id,width,height,strokeWidth){const options=getEllipseStrokeOptions(strokeWidth);return(0,dist_esm.RKM)(getStrokeOutlinePoints_getStrokeOutlinePoints(setStrokePointRadii(getEllipseStrokePoints(id,width,height,strokeWidth),options),options))}function getEllipseIndicatorPath(id,width,height,strokeWidth){return getSvgPathFromStrokePoints(getEllipseStrokePoints(id,width,height,strokeWidth))}const DrawStylePolygon=react.memo((function DrawStylePolygon2({id,outline,lines,fill,color,strokeWidth}){const theme=useDefaultColorTheme();let strokePathData=getRoundedInkyPolygonPath(getRoundedPolygonPoints(id,outline,strokeWidth/3,2*strokeWidth,2));if(lines)for(const[A,B]of lines)strokePathData+=`M${A.x},${A.y}L${B.x},${B.y}`;const innerPathData=getRoundedInkyPolygonPath(getRoundedPolygonPoints(id,outline,0,2*strokeWidth,1));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{d:innerPathData,fill,color,theme}),(0,jsx_runtime.jsx)("path",{d:strokePathData,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}));const SolidStyleCloud=react.memo((function SolidStyleCloud2({fill,color,strokeWidth,w,h,id,size}){const theme=useDefaultColorTheme(),path=cloudSvgPath(w,h,id,size);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{theme,d:path,fill,color}),(0,jsx_runtime.jsx)("path",{d:path,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}));const SolidStyleEllipse=react.memo((function SolidStyleEllipse2({w,h,strokeWidth:sw,fill,color}){const theme=useDefaultColorTheme(),cx=w/2,cy=h/2,rx=Math.max(0,cx),ry=Math.max(0,cy),d=`M${cx-rx},${cy}a${rx},${ry},0,1,1,${2*rx},0a${rx},${ry},0,1,1,-${2*rx},0`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{d,color,fill,theme}),(0,jsx_runtime.jsx)("path",{d,stroke:theme[color].solid,strokeWidth:sw,fill:"none"})]})}));const SolidStyleOval=react.memo((function SolidStyleOval2({w,h,strokeWidth:sw,fill,color}){const theme=useDefaultColorTheme(),d=getOvalIndicatorPath(w,h);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{d,color,fill,theme}),(0,jsx_runtime.jsx)("path",{d,stroke:theme[color].solid,strokeWidth:sw,fill:"none"})]})}));function getOvalIndicatorPath(w,h){let d;if(h>w){const offset=w/2;d=`\n    M0,${offset}\n    a${offset},${offset},0,1,1,${2*offset},0\n    L${w},${h-offset}\n    a${offset},${offset},0,1,1,-${2*offset},0\n    Z`}else{const offset=h/2;d=`\n    M${offset},0\n    L${w-offset},0\n    a${offset},${offset},0,1,1,0,${2*offset}\n    L${offset},${h}\n    a${offset},${offset},0,1,1,0,${2*-offset}\n    Z`}return d}const SolidStylePolygon=react.memo((function SolidStylePolygon2({outline,lines,fill,color,strokeWidth}){const theme=useDefaultColorTheme();let path="M"+outline[0]+"L"+outline.slice(1)+"Z";if(lines)for(const[A,B]of lines)path+=`M${A.x},${A.y}L${B.x},${B.y}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ShapeFill,{d:path,fill,color,theme}),(0,jsx_runtime.jsx)("path",{d:path,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}));class GeoShapeUtil extends dist_esm.StR{static type="geo";static props=dist_esm.eGT;static migrations=dist_esm.P3D;canEdit=()=>!0;getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(shape){const w=Math.max(1,shape.props.w),h=Math.max(1,shape.props.h+shape.props.growY),cx=w/2,cy=h/2,strokeWidth=STROKE_SIZES[shape.props.size],isFilled="none"!==shape.props.fill;let body;switch(shape.props.geo){case"cloud":body=new dist_esm.wWH({points:cloudOutline(w,h,shape.id,shape.props.size),isFilled});break;case"triangle":body=new dist_esm.wWH({points:[new dist_esm.GF3(cx,0),new dist_esm.GF3(w,h),new dist_esm.GF3(0,h)],isFilled});break;case"diamond":body=new dist_esm.wWH({points:[new dist_esm.GF3(cx,0),new dist_esm.GF3(w,cy),new dist_esm.GF3(cx,h),new dist_esm.GF3(0,cy)],isFilled});break;case"pentagon":body=new dist_esm.wWH({points:(0,dist_esm.OeO)(w,h,5),isFilled});break;case"hexagon":body=new dist_esm.wWH({points:(0,dist_esm.OeO)(w,h,6),isFilled});break;case"octagon":body=new dist_esm.wWH({points:(0,dist_esm.OeO)(w,h,8),isFilled});break;case"ellipse":body=new dist_esm.rpf({width:w,height:h,isFilled});break;case"oval":body=new dist_esm.ihl({width:w,height:h,isFilled});break;case"star":{const sides=5,step=dist_esm.yoY/sides/2,rightMostIndex=2*Math.floor(sides/4),leftMostIndex=2*sides-rightMostIndex,topMostIndex=0,bottomMostIndex=2*Math.floor(sides/2),maxX=Math.cos(-dist_esm.gc0+rightMostIndex*step)*w/2,minX=Math.cos(-dist_esm.gc0+leftMostIndex*step)*w/2,minY=Math.sin(-dist_esm.gc0+topMostIndex*step)*h/2,maxY=Math.sin(-dist_esm.gc0+bottomMostIndex*step)*h/2,diffX=w-Math.abs(maxX-minX),diffY=h-Math.abs(maxY-minY),ratio=1,cx2=(w-(w/2+minX-(w/2-maxX)))/2,cy2=(h-(h/2+minY-(h/2-maxY)))/2,ox=(w+diffX)/2,oy=(h+diffY)/2,ix=ox*ratio/2,iy=oy*ratio/2;body=new dist_esm.wWH({points:Array.from(Array(2*sides)).map(((_,i)=>{const theta=-dist_esm.gc0+i*step;return new dist_esm.GF3(cx2+(i%2?ix:ox)*Math.cos(theta),cy2+(i%2?iy:oy)*Math.sin(theta))})),isFilled});break}case"rhombus":{const offset=Math.min(.38*w,.38*h);body=new dist_esm.wWH({points:[new dist_esm.GF3(offset,0),new dist_esm.GF3(w,0),new dist_esm.GF3(w-offset,h),new dist_esm.GF3(0,h)],isFilled});break}case"rhombus-2":{const offset=Math.min(.38*w,.38*h);body=new dist_esm.wWH({points:[new dist_esm.GF3(0,0),new dist_esm.GF3(w-offset,0),new dist_esm.GF3(w,h),new dist_esm.GF3(offset,h)],isFilled});break}case"trapezoid":{const offset=Math.min(.38*w,.38*h);body=new dist_esm.wWH({points:[new dist_esm.GF3(offset,0),new dist_esm.GF3(w-offset,0),new dist_esm.GF3(w,h),new dist_esm.GF3(0,h)],isFilled});break}case"arrow-right":{const ox=.38*Math.min(w,h),oy=.16*h;body=new dist_esm.wWH({points:[new dist_esm.GF3(0,oy),new dist_esm.GF3(w-ox,oy),new dist_esm.GF3(w-ox,0),new dist_esm.GF3(w,h/2),new dist_esm.GF3(w-ox,h),new dist_esm.GF3(w-ox,h-oy),new dist_esm.GF3(0,h-oy)],isFilled});break}case"arrow-left":{const ox=.38*Math.min(w,h),oy=.16*h;body=new dist_esm.wWH({points:[new dist_esm.GF3(ox,0),new dist_esm.GF3(ox,oy),new dist_esm.GF3(w,oy),new dist_esm.GF3(w,h-oy),new dist_esm.GF3(ox,h-oy),new dist_esm.GF3(ox,h),new dist_esm.GF3(0,h/2)],isFilled});break}case"arrow-up":{const ox=.16*w,oy=.38*Math.min(w,h);body=new dist_esm.wWH({points:[new dist_esm.GF3(w/2,0),new dist_esm.GF3(w,oy),new dist_esm.GF3(w-ox,oy),new dist_esm.GF3(w-ox,h),new dist_esm.GF3(ox,h),new dist_esm.GF3(ox,oy),new dist_esm.GF3(0,oy)],isFilled});break}case"arrow-down":{const ox=.16*w,oy=.38*Math.min(w,h);body=new dist_esm.wWH({points:[new dist_esm.GF3(ox,0),new dist_esm.GF3(w-ox,0),new dist_esm.GF3(w-ox,h-oy),new dist_esm.GF3(w,h-oy),new dist_esm.GF3(w/2,h),new dist_esm.GF3(0,h-oy),new dist_esm.GF3(ox,h-oy)],isFilled});break}case"check-box":case"x-box":case"rectangle":body=new dist_esm.zc7({width:w,height:h,isFilled,isSnappable:!0})}const labelSize=getLabelSize(this.editor,shape),labelWidth=Math.min(w,Math.max(labelSize.w,Math.min(32,Math.max(1,w-8)))),labelHeight=Math.min(h,Math.max(labelSize.h,Math.min(32,Math.max(1,w-8)))),lines=getLines(shape.props,strokeWidth),edges=lines?lines.map((line=>new dist_esm.qvd({points:line}))):[];return new dist_esm.mqq({children:[body,new dist_esm.zc7({x:"start"===shape.props.align?0:"end"===shape.props.align?w-labelWidth:(w-labelWidth)/2,y:"start"===shape.props.verticalAlign?0:"end"===shape.props.verticalAlign?h-labelHeight:(h-labelHeight)/2,width:labelWidth,height:labelHeight,isFilled:!0,isSnappable:!1,isLabel:!0}),...edges],isSnappable:!1})}onEditEnd=shape=>{const{id,type,props:{text}}=shape;text.trimEnd()!==shape.props.text&&this.editor.updateShapes([{id,type,props:{text:text.trimEnd()}}])};component(shape){const{id,type,props}=shape,strokeWidth=STROKE_SIZES[props.size],{w,color,labelColor,fill,dash,growY,font,align,verticalAlign,size,text}=props;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist_esm.gkc,{id,children:(()=>{const h=props.h+growY;switch(props.geo){case"cloud":if("solid"===dash)return(0,jsx_runtime.jsx)(SolidStyleCloud,{color,fill,strokeWidth,w,h,id,size});if("dashed"===dash||"dotted"===dash)return(0,jsx_runtime.jsx)(DashStyleCloud,{color,fill,strokeWidth,w,h,id,size,dash});if("draw"===dash)return(0,jsx_runtime.jsx)(DrawStyleCloud,{color,fill,strokeWidth,w,h,id,size});break;case"ellipse":if("solid"===dash)return(0,jsx_runtime.jsx)(SolidStyleEllipse,{strokeWidth,w,h,color,fill});if("dashed"===dash||"dotted"===dash)return(0,jsx_runtime.jsx)(DashStyleEllipse,{id,strokeWidth,w,h,dash,color,fill});if("draw"===dash)return(0,jsx_runtime.jsx)(SolidStyleEllipse,{strokeWidth,w,h,color,fill});break;case"oval":if("solid"===dash)return(0,jsx_runtime.jsx)(SolidStyleOval,{strokeWidth,w,h,color,fill});if("dashed"===dash||"dotted"===dash)return(0,jsx_runtime.jsx)(DashStyleOval,{id,strokeWidth,w,h,dash,color,fill});if("draw"===dash)return(0,jsx_runtime.jsx)(SolidStyleOval,{strokeWidth,w,h,color,fill});break;default:{const geometry=this.editor.getShapeGeometry(shape),outline=geometry instanceof dist_esm.mqq?geometry.children[0].vertices:geometry.vertices,lines=getLines(shape.props,strokeWidth);if("solid"===dash)return(0,jsx_runtime.jsx)(SolidStylePolygon,{fill,color,strokeWidth,outline,lines});if("dashed"===dash||"dotted"===dash)return(0,jsx_runtime.jsx)(DashStylePolygon,{dash,fill,color,strokeWidth,outline,lines});if("draw"===dash)return(0,jsx_runtime.jsx)(DrawStylePolygon,{id,fill,color,strokeWidth,outline,lines})}}})()}),(0,jsx_runtime.jsx)(TextLabel,{id,type,font,fill,size,align,verticalAlign,text,labelColor,wrap:!0,bounds:"cloud"===props.geo?this.getGeometry(shape).bounds:void 0}),shape.props.url&&(0,jsx_runtime.jsx)(HyperlinkButton,{url:shape.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(shape){const{id,props}=shape,{w,size}=props,h=props.h+props.growY,strokeWidth=STROKE_SIZES[size];switch(props.geo){case"ellipse":return"draw"===props.dash?(0,jsx_runtime.jsx)("path",{d:getEllipseIndicatorPath(id,w,h,strokeWidth)}):(0,jsx_runtime.jsx)("ellipse",{cx:w/2,cy:h/2,rx:w/2,ry:h/2});case"oval":return(0,jsx_runtime.jsx)("path",{d:getOvalIndicatorPath(w,h)});case"cloud":return(0,jsx_runtime.jsx)("path",{d:cloudSvgPath(w,h,id,size)});default:{const geometry=this.editor.getShapeGeometry(shape),outline=geometry instanceof dist_esm.mqq?geometry.children[0].vertices:geometry.vertices;let path;if("draw"===props.dash){path=getRoundedInkyPolygonPath(getRoundedPolygonPoints(id,outline,0,2*strokeWidth,1))}else path="M"+outline[0]+"L"+outline.slice(1)+"Z";const lines=getLines(shape.props,strokeWidth);if(lines)for(const[A,B]of lines)path+=`M${A.x},${A.y}L${B.x},${B.y}`;return(0,jsx_runtime.jsx)("path",{d:path})}}}toSvg(shape,ctx){const{id,props}=shape,strokeWidth=STROKE_SIZES[props.size],theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode});let svgElm;switch(ctx.addExportDef(getFillDefForExport(shape.props.fill,theme)),props.geo){case"ellipse":switch(props.dash){case"draw":svgElm=function DrawStyleEllipseSvg({id,w,h,strokeWidth:sw,fill,color,theme}){const strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",getEllipsePath(id,w,h,sw)),strokeElement.setAttribute("fill",theme[color].solid),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:getEllipseIndicatorPath(id,w,h,sw),fill,color,theme}))}({id,w:props.w,h:props.h,color:props.color,fill:props.fill,strokeWidth,theme});break;case"solid":svgElm=function SolidStyleEllipseSvg({w,h,strokeWidth:sw,fill,color,theme}){const cx=w/2,cy=h/2,rx=Math.max(0,cx),ry=Math.max(0,cy),d=`M${cx-rx},${cy}a${rx},${ry},0,1,1,${2*rx},0a${rx},${ry},0,1,1,-${2*rx},0`,strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",d),strokeElement.setAttribute("stroke-width",sw.toString()),strokeElement.setAttribute("width",w.toString()),strokeElement.setAttribute("height",h.toString()),strokeElement.setAttribute("fill","none"),strokeElement.setAttribute("stroke",theme[color].solid),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d,fill,color,theme}))}({strokeWidth,w:props.w,h:props.h,color:props.color,fill:props.fill,theme});break;default:svgElm=function DashStyleEllipseSvg({w,h,strokeWidth:sw,dash,color,theme,fill}){const cx=w/2,cy=h/2,rx=Math.max(0,cx-sw/2),ry=Math.max(0,cy-sw/2),perimeter=(0,dist_esm.RpK)(rx,ry),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(perimeter<64?2*perimeter:perimeter,sw,{style:dash,snap:4,closed:!0}),d=`M${cx-rx},${cy}a${rx},${ry},0,1,1,${2*rx},0a${rx},${ry},0,1,1,-${2*rx},0`,strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",d),strokeElement.setAttribute("stroke-width",sw.toString()),strokeElement.setAttribute("width",w.toString()),strokeElement.setAttribute("height",h.toString()),strokeElement.setAttribute("fill","none"),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("stroke-dasharray",strokeDasharray),strokeElement.setAttribute("stroke-dashoffset",strokeDashoffset),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d,fill,color,theme}))}({id,strokeWidth,w:props.w,h:props.h,dash:props.dash,color:props.color,fill:props.fill,theme})}break;case"oval":switch(props.dash){case"draw":default:svgElm=DashStyleOvalSvg({id,strokeWidth,w:props.w,h:props.h,dash:props.dash,color:props.color,fill:props.fill,theme});break;case"solid":svgElm=function SolidStyleOvalSvg({w,h,strokeWidth:sw,fill,color,theme}){const d=getOvalIndicatorPath(w,h),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",d),strokeElement.setAttribute("stroke-width",sw.toString()),strokeElement.setAttribute("width",w.toString()),strokeElement.setAttribute("height",h.toString()),strokeElement.setAttribute("fill","none"),strokeElement.setAttribute("stroke",theme[color].solid),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d,fill,color,theme}))}({strokeWidth,w:props.w,h:props.h,color:props.color,fill:props.fill,theme})}break;case"cloud":switch(props.dash){case"draw":svgElm=function DrawStyleCloudSvg({fill,color,strokeWidth,theme,w,h,id,size}){const pathData=inkyCloudSvgPath(w,h,id,size),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",pathData),strokeElement.setAttribute("stroke-width",strokeWidth.toString()),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("fill","none"),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:pathData,fill,color,theme}))}({id,strokeWidth,w:props.w,h:props.h,color:props.color,fill:props.fill,size:props.size,theme});break;case"solid":svgElm=function SolidStyleCloudSvg({fill,color,strokeWidth,theme,w,h,id,size}){const pathData=cloudSvgPath(w,h,id,size),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",pathData),strokeElement.setAttribute("stroke-width",strokeWidth.toString()),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("fill","none"),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:pathData,fill,color,theme}))}({strokeWidth,w:props.w,h:props.h,color:props.color,fill:props.fill,size:props.size,id,theme});break;default:svgElm=function DashStyleCloudSvg({dash,fill,color,theme,strokeWidth,w,h,id,size}){const innerPath=cloudSvgPath(w,h,id,size),arcs=getCloudArcs(w,h,id,size),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","g");strokeElement.setAttribute("stroke-width",strokeWidth.toString()),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("fill","none");for(const{leftPoint,rightPoint,center,radius}of arcs){const arcLength=center?radius*(0,dist_esm.f5g)((0,dist_esm.f5g)(dist_esm.GF3.Angle(center,rightPoint))-(0,dist_esm.f5g)(dist_esm.GF3.Angle(center,leftPoint))):dist_esm.GF3.Dist(leftPoint,rightPoint),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(arcLength,strokeWidth,{style:dash,start:"outset",end:"outset"}),path=document.createElementNS("http://www.w3.org/2000/svg","path");path.setAttribute("d",center?`M${leftPoint.x},${leftPoint.y}A${radius},${radius},0,0,1,${rightPoint.x},${rightPoint.y}`:`M${leftPoint.x},${leftPoint.y}L${rightPoint.x},${rightPoint.y}`),path.setAttribute("stroke-dasharray",strokeDasharray.toString()),path.setAttribute("stroke-dashoffset",strokeDashoffset.toString()),strokeElement.appendChild(path)}return getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:innerPath,fill,color,theme}))}({id,strokeWidth,w:props.w,h:props.h,dash:props.dash,color:props.color,fill:props.fill,theme,size:props.size})}break;default:{const geometry=this.editor.getShapeGeometry(shape),outline=geometry instanceof dist_esm.mqq?geometry.children[0].vertices:geometry.vertices,lines=getLines(shape.props,strokeWidth);switch(props.dash){case"draw":svgElm=function DrawStylePolygonSvg({id,outline,lines,fill,color,theme,strokeWidth}){let strokePathData=getRoundedInkyPolygonPath(getRoundedPolygonPoints(id,outline,strokeWidth/3,2*strokeWidth,2));if(lines)for(const[A,B]of lines)strokePathData+=`M${A.x},${A.y}L${B.x},${B.y}`;const innerPathData=getRoundedInkyPolygonPath(getRoundedPolygonPoints(id,outline,0,2*strokeWidth,1)),strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",strokePathData),strokeElement.setAttribute("fill","none"),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("stroke-width",strokeWidth.toString()),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:innerPathData,fill,color,theme}))}({id,fill:props.fill,color:props.color,strokeWidth,outline,lines,theme});break;case"solid":svgElm=function SolidStylePolygonSvg({outline,lines,fill,color,strokeWidth,theme}){const pathData="M"+outline[0]+"L"+outline.slice(1)+"Z",fillPathData=pathData;let strokePathData=pathData;if(lines)for(const[A,B]of lines)strokePathData+=`M${A.x},${A.y}L${B.x},${B.y}`;const strokeElement=document.createElementNS("http://www.w3.org/2000/svg","path");return strokeElement.setAttribute("d",strokePathData),strokeElement.setAttribute("stroke-width",strokeWidth.toString()),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("fill","none"),getSvgWithShapeFill(strokeElement,getShapeFillSvg({d:fillPathData,fill,color,theme}))}({fill:props.fill,color:props.color,strokeWidth,outline,lines,theme});break;default:svgElm=function DashStylePolygonSvg({dash,fill,color,theme,strokeWidth,outline,lines}){const strokeElement=document.createElementNS("http://www.w3.org/2000/svg","g");if(strokeElement.setAttribute("stroke-width",strokeWidth.toString()),strokeElement.setAttribute("stroke",theme[color].solid),strokeElement.setAttribute("fill","none"),Array.from(Array(outline.length)).forEach(((_,i)=>{const A=outline[i],B=outline[(i+1)%outline.length],dist=dist_esm.GF3.Dist(A,B),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(dist,strokeWidth,{style:dash}),line=document.createElementNS("http://www.w3.org/2000/svg","line");line.setAttribute("x1",A.x.toString()),line.setAttribute("y1",A.y.toString()),line.setAttribute("x2",B.x.toString()),line.setAttribute("y2",B.y.toString()),line.setAttribute("stroke-dasharray",strokeDasharray.toString()),line.setAttribute("stroke-dashoffset",strokeDashoffset.toString()),strokeElement.appendChild(line)})),lines)for(const[A,B]of lines){const dist=dist_esm.GF3.Dist(A,B),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(dist,strokeWidth,{style:dash,start:"skip",end:"skip",snap:"dotted"===dash?4:2}),line=document.createElementNS("http://www.w3.org/2000/svg","line");line.setAttribute("x1",A.x.toString()),line.setAttribute("y1",A.y.toString()),line.setAttribute("x2",B.x.toString()),line.setAttribute("y2",B.y.toString()),line.setAttribute("stroke-dasharray",strokeDasharray.toString()),line.setAttribute("stroke-dashoffset",strokeDashoffset.toString()),strokeElement.appendChild(line)}const fillElement=getShapeFillSvg({d:"M"+outline[0]+"L"+outline.slice(1)+"Z",fill,color,theme});return getSvgWithShapeFill(strokeElement,fillElement)}({dash:props.dash,fill:props.fill,color:props.color,strokeWidth,outline,lines,theme})}break}}if(props.text){const bounds=this.editor.getShapeGeometry(shape).bounds;ctx.addExportDef(getFontDefForExport(shape.props.font));const rootTextElm=getTextLabelSvgElement({editor:this.editor,shape,font:dist_esm.p64[shape.props.font],bounds}),textElm=rootTextElm.cloneNode(!0);textElm.setAttribute("fill",theme[shape.props.labelColor].solid),textElm.setAttribute("stroke","none");const textBgEl=rootTextElm.cloneNode(!0);textBgEl.setAttribute("stroke-width","2"),textBgEl.setAttribute("fill",theme.background),textBgEl.setAttribute("stroke",theme.background);const groupEl=document.createElementNS("http://www.w3.org/2000/svg","g");if(groupEl.append(textBgEl),groupEl.append(textElm),"g"===svgElm.nodeName)return svgElm.appendChild(groupEl),svgElm;{const g=document.createElementNS("http://www.w3.org/2000/svg","g");return g.appendChild(svgElm),g.appendChild(groupEl),g}}return svgElm}getCanvasSvgDefs(){return[getFillDefForCanvas()]}onResize=(shape,{handle,newPoint,scaleX,scaleY,initialShape})=>{let w=initialShape.props.w*scaleX,h=(initialShape.props.h+initialShape.props.growY)*scaleY,overShrinkX=0,overShrinkY=0;if(shape.props.text.trim()){let newW=Math.max(Math.abs(w),51),newH=Math.max(Math.abs(h),51);newW<51&&51===newH&&(newW=51),51===newW&&newH<51&&(newH=51);const labelSize=getLabelSize(this.editor,{...shape,props:{...shape.props,w:newW,h:newH}}),nextW=Math.max(Math.abs(w),labelSize.w)*Math.sign(w),nextH=Math.max(Math.abs(h),labelSize.h)*Math.sign(h);overShrinkX=Math.abs(nextW)-Math.abs(w),overShrinkY=Math.abs(nextH)-Math.abs(h),w=nextW,h=nextH}const offset=new dist_esm.GF3(0,0);scaleX<0&&(offset.x+=w),"left"!==handle&&"top_left"!==handle&&"bottom_left"!==handle||(offset.x+=scaleX<0?overShrinkX:-overShrinkX),scaleY<0&&(offset.y+=h),"top"!==handle&&"top_left"!==handle&&"top_right"!==handle||(offset.y+=scaleY<0?overShrinkY:-overShrinkY);const{x,y}=offset.rot(shape.rotation).add(newPoint);return{x,y,props:{w:Math.max(Math.abs(w),1),h:Math.max(Math.abs(h),1),growY:0}}};onBeforeCreate=shape=>{if(!shape.props.text)return shape.props.growY?{...shape,props:{...shape.props,growY:0}}:void 0;const prevHeight=shape.props.h,nextHeight=getLabelSize(this.editor,shape).h;let growY=null;return nextHeight>prevHeight?growY=nextHeight-prevHeight:shape.props.growY&&(growY=0),null!==growY?{...shape,props:{...shape.props,growY}}:void 0};onBeforeUpdate=(prev,next)=>{const prevText=prev.props.text,nextText=next.props.text;if(prevText===nextText&&prev.props.font===next.props.font&&prev.props.size===next.props.size)return;if(prevText&&!nextText)return{...next,props:{...next.props,growY:0}};const prevWidth=prev.props.w,prevHeight=prev.props.h,nextSize=getLabelSize(this.editor,next),nextWidth=nextSize.w,nextHeight=nextSize.h;if(!prevText&&nextText&&1===nextText.length){let w=Math.max(prevWidth,nextWidth),h=Math.max(prevHeight,nextHeight);return prev.props.w<51&&prev.props.h<51&&(w=Math.max(w,51),h=Math.max(h,51),w=Math.max(w,h),h=Math.max(w,h)),{...next,props:{...next.props,w,h,growY:0}}}let growY=null;return nextHeight>prevHeight?growY=nextHeight-prevHeight:prev.props.growY&&(growY=0),null!==growY?{...next,props:{...next.props,growY,w:Math.max(next.props.w,nextWidth)}}:nextWidth>prev.props.w?{...next,props:{...next.props,w:nextWidth}}:void 0};onDoubleClick=shape=>{if(this.editor.inputs.altKey)switch(shape.props.geo){case"rectangle":return{...shape,props:{geo:"check-box"}};case"check-box":return{...shape,props:{geo:"rectangle"}}}}}function getLabelSize(editor,shape){const text=shape.props.text;if(!text)return{w:0,h:0};const minSize=editor.textMeasure.measureText("w",{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:LABEL_FONT_SIZES[shape.props.size],maxWidth:100}),size=editor.textMeasure.measureText(text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:LABEL_FONT_SIZES[shape.props.size],minWidth:minSize.w+"px",maxWidth:Math.max(0,Math.ceil(minSize.w+{s:2,m:3.5,l:5,xl:10}[shape.props.size]),Math.ceil(shape.props.w-32))});return{w:size.w+32,h:size.h+32}}function getLines(props,sw){switch(props.geo){case"x-box":return function getXBoxLines(w,h,sw,dash){const inset="draw"===dash?.62:0;if("dashed"===dash)return[[new dist_esm.GF3(0,0),new dist_esm.GF3(w/2,h/2)],[new dist_esm.GF3(w,h),new dist_esm.GF3(w/2,h/2)],[new dist_esm.GF3(0,h),new dist_esm.GF3(w/2,h/2)],[new dist_esm.GF3(w,0),new dist_esm.GF3(w/2,h/2)]];const clampX=x=>Math.max(0,Math.min(w,x)),clampY=y=>Math.max(0,Math.min(h,y));return[[new dist_esm.GF3(clampX(sw*inset),clampY(sw*inset)),new dist_esm.GF3(clampX(w-sw*inset),clampY(h-sw*inset))],[new dist_esm.GF3(clampX(sw*inset),clampY(h-sw*inset)),new dist_esm.GF3(clampX(w-sw*inset),clampY(sw*inset))]]}(props.w,props.h,sw,props.dash);case"check-box":return function getCheckBoxLines(w,h){const size=.82*Math.min(w,h),ox=(w-size)/2,oy=(h-size)/2,clampX=x=>Math.max(0,Math.min(w,x)),clampY=y=>Math.max(0,Math.min(h,y));return[[new dist_esm.GF3(clampX(ox+.25*size),clampY(oy+.52*size)),new dist_esm.GF3(clampX(ox+.45*size),clampY(oy+.82*size))],[new dist_esm.GF3(clampX(ox+.45*size),clampY(oy+.82*size)),new dist_esm.GF3(clampX(ox+.82*size),clampY(oy+.22*size))]]}(props.w,props.h);default:return}}class HighlightShapeUtil extends dist_esm.EeJ{static type="highlight";static props=dist_esm.VWE;static migrations=dist_esm.J14;hideResizeHandles=shape=>HighlightShapeUtil_getIsDot(shape);hideRotateHandle=shape=>HighlightShapeUtil_getIsDot(shape);hideSelectionBoundsFg=shape=>HighlightShapeUtil_getIsDot(shape);getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(shape){const strokeWidth=getStrokeWidth(shape);if(HighlightShapeUtil_getIsDot(shape))return new dist_esm.EEY({x:-strokeWidth/2,y:-strokeWidth/2,radius:strokeWidth/2,isFilled:!0});const{strokePoints,sw}=getHighlightStrokePoints(shape,strokeWidth,!0),opts=getHighlightFreehandSettings({strokeWidth:sw,showAsComplete:!0});return setStrokePointRadii(strokePoints,opts),new dist_esm.wWH({points:getStrokeOutlinePoints_getStrokeOutlinePoints(strokePoints,opts),isFilled:!0})}component(shape){return(0,jsx_runtime.jsx)(HighlightRenderer,{strokeWidth:getStrokeWidth(shape),shape,opacity:.35})}backgroundComponent(shape){return(0,jsx_runtime.jsx)(HighlightRenderer,{strokeWidth:getStrokeWidth(shape),shape,opacity:.82})}indicator(shape){const forceSolid=useForceSolid(),strokeWidth=getStrokeWidth(shape),allPointsFromSegments=getPointsFromSegments(shape.props.segments);let sw=strokeWidth;forceSolid||shape.props.isPen||1!==allPointsFromSegments.length||(sw+=(0,dist_esm.Vkp)(shape.id)()*(strokeWidth/6));const strokePoints=getStrokePoints(allPointsFromSegments,getHighlightFreehandSettings({strokeWidth,showAsComplete:shape.props.isComplete||"straight"===(0,dist_esm.Z$Q)(shape.props.segments)?.type}));let strokePath;return strokePath=strokePoints.length<2?function getIndicatorDot(point,sw){const r=sw/2;return`M ${point.x} ${point.y} m -${r}, 0 a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 -${2*r},0`}(allPointsFromSegments[0],sw):getSvgPathFromStrokePoints(strokePoints,!1),(0,jsx_runtime.jsx)("path",{d:strokePath})}toSvg(shape){const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode});return highlighterToSvg(getStrokeWidth(shape),shape,.35,theme)}toBackgroundSvg(shape){const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode});return highlighterToSvg(getStrokeWidth(shape),shape,.82,theme)}onResize=(shape,info)=>{const{scaleX,scaleY}=info,newSegments=[];for(const segment of shape.props.segments)newSegments.push({...segment,points:segment.points.map((({x,y,z})=>({x:scaleX*x,y:scaleY*y,z})))});return{props:{segments:newSegments}}}}function getHighlightStrokePoints(shape,strokeWidth,forceSolid){const allPointsFromSegments=getPointsFromSegments(shape.props.segments),showAsComplete=shape.props.isComplete||"straight"===(0,dist_esm.Z$Q)(shape.props.segments)?.type;let sw=strokeWidth;forceSolid||shape.props.isPen||1!==allPointsFromSegments.length||(sw+=(0,dist_esm.Vkp)(shape.id)()*(strokeWidth/6));return{strokePoints:getStrokePoints(allPointsFromSegments,getHighlightFreehandSettings({strokeWidth:sw,showAsComplete})),sw}}function getHighlightSvgPath(shape,strokeWidth,forceSolid){const{strokePoints,sw}=getHighlightStrokePoints(shape,strokeWidth,forceSolid);return{solidStrokePath:strokePoints.length>1?getSvgPathFromStrokePoints(strokePoints,!1):function getShapeDot(point){return`M ${point.x} ${point.y} m -0.1, 0 a 0.1,0.1 0 1,0 0.2,0 a 0.1,0.1 0 1,0 -0.2,0`}(shape.props.segments[0].points[0]),sw}}function HighlightRenderer({strokeWidth,shape,opacity}){const theme=useDefaultColorTheme(),forceSolid=useForceSolid(),{solidStrokePath,sw}=getHighlightSvgPath(shape,strokeWidth,forceSolid),colorSpace=function useColorSpace(){const[supportsP3,setSupportsP3]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const supportsSyntax=CSS.supports("color","color(display-p3 1 1 1)"),query=matchMedia("(color-gamut: p3)");setSupportsP3(supportsSyntax&&query.matches);const onChange=()=>setSupportsP3(supportsSyntax&&query.matches);return query.addEventListener("change",onChange),()=>query.removeEventListener("change",onChange)}),[]),(0,dist_esm.HgN)(dist_esm.hR1.forceSrgb)||!supportsP3?"srgb":"p3"}(),color=theme[shape.props.color].highlight[colorSpace];return(0,jsx_runtime.jsx)(dist_esm.gkc,{id:shape.id,style:{opacity},children:(0,jsx_runtime.jsx)("path",{d:solidStrokePath,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:color,strokeWidth:sw})})}function highlighterToSvg(strokeWidth,shape,opacity,theme){const{solidStrokePath,sw}=getHighlightSvgPath(shape,strokeWidth,!1),path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d",solidStrokePath),path.setAttribute("fill","none"),path.setAttribute("stroke",theme[shape.props.color].highlight.srgb),path.setAttribute("stroke-width",`${sw}`),path.setAttribute("opacity",`${opacity}`),path}function getStrokeWidth(shape){return 1.12*FONT_SIZES[shape.props.size]}function HighlightShapeUtil_getIsDot(shape){return 1===shape.props.segments.length&&shape.props.segments[0].points.length<2}function usePrefersReducedMotion(){const[prefersReducedMotion,setPrefersReducedMotion]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const mql=window.matchMedia("(prefers-reduced-motion: reduce)"),handler=()=>{setPrefersReducedMotion(mql.matches)};return handler(),mql.addEventListener("change",handler),()=>mql.removeEventListener("change",handler)}),[]),prefersReducedMotion}const getStateFrame=async url=>{const image=await(async url=>new Promise(((resolve,reject)=>{const image=new Image;image.onload=()=>resolve(image),image.onerror=()=>reject(new Error("Failed to load image")),image.crossOrigin="anonymous",image.src=url})))(url),canvas=document.createElement("canvas");canvas.width=image.width,canvas.height=image.height;const ctx=canvas.getContext("2d");if(ctx)return ctx.drawImage(image,0,0),canvas.toDataURL()};class ImageShapeUtil extends dist_esm.StR{static type="image";static props=dist_esm.FcS;static migrations=dist_esm.y59;isAspectRatioLocked=()=>!0;canCrop=()=>!0;getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}component(shape){const containerStyle=getContainerStyle(shape),isCropping=(0,dist_esm.Q1i)(shape.id),prefersReducedMotion=usePrefersReducedMotion(),[staticFrameSrc,setStaticFrameSrc]=(0,react.useState)(""),asset=shape.props.assetId?this.editor.getAsset(shape.props.assetId):void 0;if("bookmark"===asset?.type)throw Error("Bookmark assets can't be rendered as images");const showCropPreview=(0,dist_esm.HgN)("onlySelectedShape",(()=>shape.id===this.editor.onlySelectedShape?.id),[this.editor])&&isCropping&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),reduceMotion=prefersReducedMotion&&(asset?.props.mimeType?.includes("video")||asset?.props.mimeType?.includes("gif"));return(0,react.useEffect)((()=>{if(asset?.props.src&&"mimeType"in asset.props&&"image/gif"===asset?.props.mimeType){let cancelled=!1;return(async()=>{const newStaticFrame=await getStateFrame(asset.props.src);cancelled||newStaticFrame&&setStaticFrameSrc(newStaticFrame)})(),()=>{cancelled=!0}}}),[prefersReducedMotion,asset?.props]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[asset?.props.src&&showCropPreview&&(0,jsx_runtime.jsx)("div",{style:containerStyle,children:(0,jsx_runtime.jsx)("div",{className:"tl-image",style:{opacity:.1,backgroundImage:`url(${!shape.props.playing||reduceMotion?staticFrameSrc:asset.props.src})`},draggable:!1})}),(0,jsx_runtime.jsx)(dist_esm.G7H,{id:shape.id,style:{overflow:"hidden",width:shape.props.w,height:shape.props.h},children:(0,jsx_runtime.jsxs)("div",{className:"tl-image-container",style:containerStyle,children:[asset?.props.src?(0,jsx_runtime.jsx)("div",{className:"tl-image",style:{backgroundImage:`url(${!shape.props.playing||reduceMotion?staticFrameSrc:asset.props.src})`},draggable:!1}):null,asset?.props.isAnimated&&!shape.props.playing&&(0,jsx_runtime.jsx)("div",{className:"tl-image__tg",children:"GIF"})]})}),"url"in shape.props&&shape.props.url&&(0,jsx_runtime.jsx)(HyperlinkButton,{url:shape.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(shape){return(0,dist_esm.Q1i)(shape.id)?null:(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(shape.props.w),height:(0,dist_esm.$ZD)(shape.props.h)})}async toSvg(shape){const g=document.createElementNS("http://www.w3.org/2000/svg","g"),asset=shape.props.assetId?this.editor.getAsset(shape.props.assetId):null;let src=asset?.props.src||"";src&&src.startsWith("http")&&(src=await async function getDataURIFromURL(url){const response=await fetch(url),blob=await response.blob();return new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onloadend=()=>resolve(reader.result),reader.onerror=reject,reader.readAsDataURL(blob)}))}(src)||"");const image=document.createElementNS("http://www.w3.org/2000/svg","image");image.setAttributeNS("http://www.w3.org/1999/xlink","href",src);const containerStyle=getContainerStyle(shape),crop=shape.props.crop;if(containerStyle.transform&&crop){const{transform,width,height}=containerStyle,points=[new dist_esm.GF3(crop.topLeft.x*width,crop.topLeft.y*height),new dist_esm.GF3(crop.bottomRight.x*width,crop.topLeft.y*height),new dist_esm.GF3(crop.bottomRight.x*width,crop.bottomRight.y*height),new dist_esm.GF3(crop.topLeft.x*width,crop.bottomRight.y*height)],innerElement=document.createElementNS("http://www.w3.org/2000/svg","g");innerElement.style.clipPath=`polygon(${points.map((p=>`${p.x}px ${p.y}px`)).join(",")})`,image.setAttribute("width",width.toString()),image.setAttribute("height",height.toString()),image.style.transform=transform,innerElement.appendChild(image),g.appendChild(innerElement)}else image.setAttribute("width",shape.props.w.toString()),image.setAttribute("height",shape.props.h.toString()),g.appendChild(image);return g}onDoubleClick=shape=>{const asset=shape.props.assetId?this.editor.getAsset(shape.props.assetId):void 0;if(!asset)return;asset.props.src&&"mimeType"in asset.props&&"image/gif"===asset.props.mimeType&&this.editor.updateShapes([{type:"image",id:shape.id,props:{playing:!shape.props.playing}}])};onDoubleClickEdge=shape=>{const props=shape.props;if(!props)return;if(this.editor.croppingShapeId!==shape.id)return;const crop=(0,dist_esm.p$x)(props.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w=1/(crop.bottomRight.x-crop.topLeft.x)*shape.props.w,h=1/(crop.bottomRight.y-crop.topLeft.y)*shape.props.h,pointDelta=new dist_esm.GF3(crop.topLeft.x*w,crop.topLeft.y*h).rot(shape.rotation),partial={id:shape.id,type:shape.type,x:shape.x-pointDelta.x,y:shape.y-pointDelta.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w,h}};this.editor.updateShapes([partial])}}function getContainerStyle(shape){const crop=shape.props.crop,topLeft=crop?.topLeft;if(!topLeft)return{width:shape.props.w,height:shape.props.h};const w=1/(crop.bottomRight.x-crop.topLeft.x)*shape.props.w,h=1/(crop.bottomRight.y-crop.topLeft.y)*shape.props.h;return{transform:`translate(${-topLeft.x*w}px, ${-topLeft.y*h}px)`,width:w,height:h}}function getSvgPathForEdge(edge,first){const{start,end}=edge;return first?`M${(0,dist_esm.$ZD)(start.x)},${(0,dist_esm.$ZD)(start.y)} L${(0,dist_esm.$ZD)(end.x)},${(0,dist_esm.$ZD)(end.y)} `:`${(0,dist_esm.$ZD)(end.x)},${(0,dist_esm.$ZD)(end.y)} `}function getSvgPathForBezierCurve(curve,first){const{a,b,c,d}=curve;return dist_esm.GF3.Equals(a,d)?"":`${first?`M${(0,dist_esm.$ZD)(a.x)},${(0,dist_esm.$ZD)(a.y)}`:""}C${(0,dist_esm.$ZD)(b.x)},${(0,dist_esm.$ZD)(b.y)} ${(0,dist_esm.$ZD)(c.x)},${(0,dist_esm.$ZD)(c.y)} ${(0,dist_esm.$ZD)(d.x)},${(0,dist_esm.$ZD)(d.y)}`}function getSvgPathForCubicSpline(spline,isClosed){let d=spline.segments.reduce(((d2,segment,i)=>d2+getSvgPathForBezierCurve(segment,0===i)),"");return isClosed&&(d+="Z"),d}function getSvgPathForLineGeometry(spline,isClosed=!1){return spline instanceof dist_esm.qvd?function getSvgPathForPolylineSpline(spline,isClosed){let d=spline.segments.reduce(((d2,segment,i)=>d2+getSvgPathForEdge(segment,0===i)),"");return isClosed&&(d+="Z"),d}(spline,isClosed):getSvgPathForCubicSpline(spline,isClosed)}function getLineDrawFreehandOptions(strokeWidth){return{size:strokeWidth,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function getLineStrokePoints(shape,spline,strokeWidth){return getStrokePoints(spline.vertices,getLineDrawFreehandOptions(strokeWidth))}function getLineDrawPath(shape,spline,strokeWidth){const stroke=function getLineDrawStrokeOutlinePoints(shape,spline,strokeWidth){const options=getLineDrawFreehandOptions(strokeWidth);return getStrokeOutlinePoints_getStrokeOutlinePoints(setStrokePointRadii(getLineStrokePoints(0,spline,strokeWidth),options),options)}(0,spline,strokeWidth);return(0,dist_esm.RKM)(stroke)}const handlesCache=new dist_esm._cv;class LineShapeUtil extends dist_esm.EeJ{static type="line";static props=dist_esm.BGI;static migrations=dist_esm.FHS;hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsFg=()=>!0;hideSelectionBoundsBg=()=>!0;getDefaultProps(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,canSnap:!0,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,canSnap:!0,index:"a2",x:.1,y:.1}}}}getGeometry(shape){return getGeometryForLineShape(shape)}getHandles(shape){return handlesCache.get(shape.props,(()=>{const handles=shape.props.handles,spline=getGeometryForLineShape(shape),sortedHandles=Object.values(handles).sort(dist_esm.hl1),results=sortedHandles.slice();for(let i=0;i<spline.segments.length;i++){const point=spline.segments[i].midPoint(),index=(0,dist_esm.eIg)(sortedHandles[i].index,sortedHandles[i+1].index);results.push({id:`mid-${i}`,type:"create",index,x:point.x,y:point.y})}return results.sort(dist_esm.hl1)}))}getOutlineSegments(shape){return this.editor.getShapeGeometry(shape).segments.map((s=>s.vertices))}onResize=(shape,info)=>{const{scaleX,scaleY}=info,handles=(0,dist_esm.p$x)(shape.props.handles);return Object.values(shape.props.handles).forEach((({id,x,y})=>{handles[id].x=x*scaleX,handles[id].y=y*scaleY})),{props:{handles}}};onHandleChange=(shape,{handle})=>{const next=(0,dist_esm.p$x)(shape);switch(handle.id){case"start":case"end":next.props.handles[handle.id]={...next.props.handles[handle.id],x:handle.x,y:handle.y};break;default:{const id="handle:"+handle.index,existing=shape.props.handles[id];next.props.handles[id]=existing?{...existing,x:handle.x,y:handle.y}:{id,type:"vertex",canBind:!1,index:handle.index,x:handle.x,y:handle.y};break}}return next};component(shape){const theme=useDefaultColorTheme(),spline=getGeometryForLineShape(shape),strokeWidth=STROKE_SIZES[shape.props.size],{dash,color}=shape.props;if("line"===shape.props.spline){if("solid"===dash){const outline=spline.points,pathData="M"+outline[0]+"L"+outline.slice(1);return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:pathData,fill:"none",color,theme}),(0,jsx_runtime.jsx)("path",{d:pathData,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}if("dashed"===dash||"dotted"===dash){const outline=spline.points,pathData="M"+outline[0]+"L"+outline.slice(1);return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:pathData,fill:"none",color,theme}),(0,jsx_runtime.jsx)("g",{stroke:theme[color].solid,strokeWidth,children:spline.segments.map(((segment,i)=>{const{strokeDasharray,strokeDashoffset}=getPerfectDashProps(segment.length,strokeWidth,{style:dash,start:i>0?"outset":"none",end:i<spline.segments.length-1?"outset":"none"});return(0,jsx_runtime.jsx)("path",{strokeDasharray,strokeDashoffset,d:getSvgPathForEdge(segment,!0),fill:"none"},i)}))})]})}if("draw"===dash){const outline=spline.points,[innerPathData,outerPathData]=getDrawLinePathData(shape.id,outline,strokeWidth);return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:innerPathData,fill:"none",color,theme}),(0,jsx_runtime.jsx)("path",{d:outerPathData,stroke:theme[color].solid,strokeWidth,fill:"none"})]})}}if("cubic"===shape.props.spline){const splinePath=getSvgPathForLineGeometry(spline);if("solid"===dash)return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:splinePath,fill:"none",color,theme}),(0,jsx_runtime.jsx)("path",{strokeWidth,stroke:theme[color].solid,fill:"none",d:splinePath})]});if("dashed"===dash||"dotted"===dash)return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:splinePath,fill:"none",color,theme}),(0,jsx_runtime.jsx)("g",{stroke:theme[color].solid,strokeWidth,children:spline.segments.map(((segment,i)=>{const{strokeDasharray,strokeDashoffset}=getPerfectDashProps(segment.length,strokeWidth,{style:dash,start:i>0?"outset":"none",end:i<spline.segments.length-1?"outset":"none"});return(0,jsx_runtime.jsx)("path",{strokeDasharray,strokeDashoffset,d:getSvgPathForBezierCurve(segment,!0),fill:"none"},i)}))})]});if("draw"===dash)return(0,jsx_runtime.jsxs)(dist_esm.gkc,{id:shape.id,children:[(0,jsx_runtime.jsx)(ShapeFill,{d:splinePath,fill:"none",color,theme}),(0,jsx_runtime.jsx)("path",{d:getLineDrawPath(0,spline,strokeWidth),strokeWidth:1,stroke:theme[color].solid,fill:theme[color].solid})]})}}indicator(shape){const strokeWidth=STROKE_SIZES[shape.props.size],spline=getGeometryForLineShape(shape),{dash}=shape.props;let path;if("line"===shape.props.spline){const outline=spline.points;if("solid"===dash||"dotted"===dash||"dashed"===dash)path="M"+outline[0]+"L"+outline.slice(1);else{const[innerPathData]=getDrawLinePathData(shape.id,outline,strokeWidth);path=innerPathData}}else path=function getLineIndicatorPath(shape,spline,strokeWidth){if("draw"===shape.props.dash)return getSvgPathFromStrokePoints(getLineStrokePoints(0,spline,strokeWidth));return getSvgPathForLineGeometry(spline)}(shape,spline,strokeWidth);return(0,jsx_runtime.jsx)("path",{d:path})}toSvg(shape){const color=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode})[shape.props.color].solid,spline=getGeometryForLineShape(shape),strokeWidth=STROKE_SIZES[shape.props.size];switch(shape.props.dash){case"draw":{let pathData;if(spline instanceof dist_esm._e1)pathData=getLineDrawPath(0,spline,strokeWidth);else{const[_,outerPathData]=getDrawLinePathData(shape.id,spline.points,strokeWidth);pathData=outerPathData}const p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("stroke-width",strokeWidth+"px"),p.setAttribute("stroke",color),p.setAttribute("fill","none"),p.setAttribute("d",pathData),p}case"solid":{let pathData;if(spline instanceof dist_esm._e1)pathData=getSvgPathForCubicSpline(spline,!1);else{const outline=spline.points;pathData="M"+outline[0]+"L"+outline.slice(1)}const p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("stroke-width",strokeWidth+"px"),p.setAttribute("stroke",color),p.setAttribute("fill","none"),p.setAttribute("d",pathData),p}default:{const{segments}=spline,g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("stroke",color),g.setAttribute("stroke-width",strokeWidth.toString());const fn=spline instanceof dist_esm._e1?getSvgPathForBezierCurve:getSvgPathForEdge;return segments.forEach(((segment,i)=>{const path=document.createElementNS("http://www.w3.org/2000/svg","path"),{strokeDasharray,strokeDashoffset}=getPerfectDashProps(segment.length,strokeWidth,{style:shape.props.dash,start:i>0?"outset":"none",end:i<segments.length-1?"outset":"none"});path.setAttribute("stroke-dasharray",strokeDasharray.toString()),path.setAttribute("stroke-dashoffset",strokeDashoffset.toString()),path.setAttribute("d",fn(segment,!0)),path.setAttribute("fill","none"),g.appendChild(path)})),g}}}}function getGeometryForLineShape(shape){const{spline,handles}=shape.props,handlePoints=Object.values(handles).sort(dist_esm.hl1).map(dist_esm.GF3.From);switch(spline){case"cubic":return new dist_esm._e1({points:handlePoints});case"line":return new dist_esm.qvd({points:handlePoints})}}class NoteShapeUtil extends dist_esm.EeJ{static type="note";static props=dist_esm.m0n;static migrations=dist_esm.C_M;canEdit=()=>!0;hideResizeHandles=()=>!0;hideSelectionBoundsFg=()=>!0;getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}getHeight(shape){return 200+shape.props.growY}getGeometry(shape){const height=this.getHeight(shape);return new dist_esm.zc7({width:200,height,isFilled:!0})}component(shape){const{id,type,props:{color,font,size,align,text,verticalAlign}}=shape,theme=useDefaultColorTheme(),adjustedColor="black"===color?"yellow":color;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"absolute",width:200,height:this.getHeight(shape)},children:(0,jsx_runtime.jsxs)("div",{className:"tl-note__container",style:{color:theme[adjustedColor].solid,backgroundColor:theme[adjustedColor].solid},children:[(0,jsx_runtime.jsx)("div",{className:"tl-note__scrim"}),(0,jsx_runtime.jsx)(TextLabel,{id,type,font,size,align,verticalAlign,text,labelColor:"black",wrap:!0})]})}),"url"in shape.props&&shape.props.url&&(0,jsx_runtime.jsx)(HyperlinkButton,{url:shape.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(shape){return(0,jsx_runtime.jsx)("rect",{rx:"7",width:(0,dist_esm.$ZD)(200),height:(0,dist_esm.$ZD)(this.getHeight(shape))})}toSvg(shape,ctx){ctx.addExportDef(getFontDefForExport(shape.props.font));const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode}),bounds=this.editor.getShapeGeometry(shape).bounds,g=document.createElementNS("http://www.w3.org/2000/svg","g"),adjustedColor="black"===shape.props.color?"yellow":shape.props.color,rect1=document.createElementNS("http://www.w3.org/2000/svg","rect");rect1.setAttribute("rx","10"),rect1.setAttribute("width",200..toString()),rect1.setAttribute("height",bounds.height.toString()),rect1.setAttribute("fill",theme[adjustedColor].solid),rect1.setAttribute("stroke",theme[adjustedColor].solid),rect1.setAttribute("stroke-width","1"),g.appendChild(rect1);const rect2=document.createElementNS("http://www.w3.org/2000/svg","rect");rect2.setAttribute("rx","10"),rect2.setAttribute("width",200..toString()),rect2.setAttribute("height",bounds.height.toString()),rect2.setAttribute("fill",theme.background),rect2.setAttribute("opacity",".28"),g.appendChild(rect2);const textElm=getTextLabelSvgElement({editor:this.editor,shape,font:dist_esm.p64[shape.props.font],bounds});return textElm.setAttribute("fill",theme.text),textElm.setAttribute("stroke","none"),g.appendChild(textElm),g}onBeforeCreate=next=>getGrowY(this.editor,next,next.props.growY);onBeforeUpdate=(prev,next)=>{if(prev.props.text!==next.props.text||prev.props.font!==next.props.font||prev.props.size!==next.props.size)return getGrowY(this.editor,next,prev.props.growY)};onEditEnd=shape=>{const{id,type,props:{text}}=shape;text.trimEnd()!==shape.props.text&&this.editor.updateShapes([{id,type,props:{text:text.trimEnd()}}])}}function getGrowY(editor,shape,prevGrowY=0){const nextHeight=editor.textMeasure.measureText(shape.props.text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[shape.props.font],fontSize:LABEL_FONT_SIZES[shape.props.size],maxWidth:166}).h+34;let growY=null;if(nextHeight>200?growY=nextHeight-200:prevGrowY&&(growY=0),null!==growY)return{...shape,props:{...shape.props,growY}}}function resizeScaled(shape,{initialBounds,scaleX,scaleY,newPoint}){const scaleDelta=Math.max(.01,Math.min(Math.abs(scaleX),Math.abs(scaleY))),offset=new dist_esm.GF3(0,0);scaleX<0&&(offset.x=-initialBounds.width*scaleDelta),scaleY<0&&(offset.y=-initialBounds.height*scaleDelta);const{x,y}=dist_esm.GF3.Add(newPoint,offset.rot(shape.rotation));return{x,y,props:{scale:scaleDelta*shape.props.scale}}}const sizeCache=new dist_esm._cv;class TextShapeUtil extends dist_esm.EeJ{static type="text";static props=dist_esm.XBb;static migrations=dist_esm.pLA;getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(shape){return sizeCache.get(shape.props,(props=>getTextSize(this.editor,props)))}getGeometry(shape){const{scale}=shape.props,{width,height}=this.getMinDimensions(shape);return new dist_esm.zc7({width:width*scale,height:height*scale,isFilled:!0})}canEdit=()=>!0;isAspectRatioLocked=()=>!0;component(shape){const{id,type,props:{text,color}}=shape,theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode}),{width,height}=this.getMinDimensions(shape),{rInput,isEmpty,isEditing,handleFocus,handleChange,handleKeyDown,handleBlur,handleInputPointerDown,handleDoubleClick}=useEditableText(id,type,text);return(0,jsx_runtime.jsx)(dist_esm.G7H,{id:shape.id,children:(0,jsx_runtime.jsxs)("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":shape.props.font,"data-align":shape.props.align,"data-hastext":!isEmpty,"data-isediting":isEditing,"data-textwrap":!0,style:{fontSize:FONT_SIZES[shape.props.size],lineHeight:FONT_SIZES[shape.props.size]*TEXT_PROPS.lineHeight+"px",transform:`scale(${shape.props.scale})`,transformOrigin:"top left",width:Math.max(1,width),height:Math.max(FONT_SIZES[shape.props.size]*TEXT_PROPS.lineHeight,height),color:theme[color].solid},children:[(0,jsx_runtime.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:text}),isEditing?(0,jsx_runtime.jsx)("textarea",{ref:rInput,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:isEditing,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:text,onFocus:handleFocus,onChange:handleChange,onKeyDown:handleKeyDown,onBlur:handleBlur,onTouchEnd:dist_esm.beA,onContextMenu:dist_esm.beA,onPointerDown:handleInputPointerDown,onDoubleClick:handleDoubleClick}):null]})})}indicator(shape){const bounds=this.editor.getShapeGeometry(shape).bounds;return(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(bounds.width),height:(0,dist_esm.$ZD)(bounds.height)})}toSvg(shape,ctx){ctx.addExportDef(getFontDefForExport(shape.props.font));const theme=(0,dist_esm.y6M)({isDarkMode:this.editor.user.isDarkMode}),bounds=this.editor.getShapeGeometry(shape).bounds,text=shape.props.text,width=bounds.width/(shape.props.scale??1),height=bounds.height/(shape.props.scale??1),opts={fontSize:FONT_SIZES[shape.props.size],fontFamily:dist_esm.p64[shape.props.font],textAlign:shape.props.align,verticalTextAlign:"middle",width,height,padding:0,lineHeight:TEXT_PROPS.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},color=theme[shape.props.color].solid,groupEl=document.createElementNS("http://www.w3.org/2000/svg","g"),textBgEl=createTextSvgElementFromSpans(this.editor,this.editor.textMeasure.measureTextSpans(text,opts),{...opts,stroke:theme.background,strokeWidth:2,fill:theme.background,padding:0}),textElm=textBgEl.cloneNode(!0);return textElm.setAttribute("fill",color),textElm.setAttribute("stroke","none"),groupEl.append(textBgEl),groupEl.append(textElm),groupEl}onResize=(shape,info)=>{const{initialBounds,initialShape,scaleX,handle}=info;if("scale_shape"===info.mode||"right"!==handle&&"left"!==handle)return{id:shape.id,type:shape.type,...resizeScaled(shape,info)};{const prevWidth=initialBounds.width;let nextWidth=prevWidth*scaleX;const offset=new dist_esm.GF3(0,0);nextWidth=Math.max(1,Math.abs(nextWidth)),"left"===handle?(offset.x=prevWidth-nextWidth,scaleX<0&&(offset.x+=nextWidth)):scaleX<0&&(offset.x-=nextWidth);const{x,y}=offset.rot(shape.rotation).add(initialShape);return{id:shape.id,type:shape.type,x,y,props:{w:nextWidth/initialShape.props.scale,autoSize:!1}}}};onBeforeCreate=shape=>{if(!shape.props.autoSize)return;if(shape.props.text.trim())return;const bounds=this.getMinDimensions(shape);return{...shape,x:shape.x-bounds.width/2,y:shape.y-bounds.height/2}};onEditEnd=shape=>{const{id,type,props:{text}}=shape,trimmedText=shape.props.text.trimEnd();0===trimmedText.length?this.editor.deleteShapes([shape.id]):trimmedText!==shape.props.text&&this.editor.updateShapes([{id,type,props:{text:text.trimEnd()}}])};onBeforeUpdate=(prev,next)=>{if(!next.props.autoSize)return;const styleDidChange=prev.props.size!==next.props.size||prev.props.align!==next.props.align||prev.props.font!==next.props.font||1!==prev.props.scale&&1===next.props.scale,textDidChange=prev.props.text!==next.props.text;if(!styleDidChange&&!textDidChange)return;const boundsA=this.getMinDimensions(prev),boundsB=getTextSize(this.editor,next.props),wA=boundsA.width*prev.props.scale,hA=boundsA.height*prev.props.scale,wB=boundsB.width*next.props.scale,hB=boundsB.height*next.props.scale;let delta;switch(next.props.align){case"middle":delta=new dist_esm.GF3((wB-wA)/2,textDidChange?0:(hB-hA)/2);break;case"end":delta=new dist_esm.GF3(wB-wA,textDidChange?0:(hB-hA)/2);break;default:if(textDidChange)break;delta=new dist_esm.GF3(0,(hB-hA)/2)}if(delta){delta.rot(next.rotation);const{x,y}=next;return{...next,x:x-delta.x,y:y-delta.y,props:{...next.props,w:wB}}}return{...next,props:{...next.props,w:wB}}};onDoubleClickEdge=shape=>shape.props.autoSize?1!==shape.props.scale?{id:shape.id,type:shape.type,props:{scale:1}}:void 0:{id:shape.id,type:shape.type,props:{autoSize:!0}}}function getTextSize(editor,props){const{font,text,autoSize,size,w}=props,minWidth=autoSize?16:Math.max(16,w),fontSize=FONT_SIZES[size],cw=autoSize?null:Math.floor(Math.max(minWidth,w)),result=editor.textMeasure.measureText(text,{...TEXT_PROPS,fontFamily:FONT_FAMILIES[font],fontSize,maxWidth:cw});return autoSize&&(result.w+=1),{width:Math.max(minWidth,result.w),height:Math.max(fontSize,result.h)}}class VideoShapeUtil extends dist_esm.StR{static type="video";static props=dist_esm.p$I;static migrations=dist_esm.lY$;canEdit=()=>!0;isAspectRatioLocked=()=>!0;getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(shape){return(0,jsx_runtime.jsx)(TLVideoUtilComponent,{shape,videoUtil:this})}indicator(shape){return(0,jsx_runtime.jsx)("rect",{width:(0,dist_esm.$ZD)(shape.props.w),height:(0,dist_esm.$ZD)(shape.props.h)})}toSvg(shape){const g=document.createElementNS("http://www.w3.org/2000/svg","g"),image=document.createElementNS("http://www.w3.org/2000/svg","image");return image.setAttributeNS("http://www.w3.org/1999/xlink","href",function serializeVideo(id){const splitId=id.split(":")[1],video=document.querySelector(`.tl-video-shape-${splitId}`);if(video){const canvas=document.createElement("canvas");return canvas.width=video.videoWidth,canvas.height=video.videoHeight,canvas.getContext("2d").drawImage(video,0,0),canvas.toDataURL("image/png")}throw new Error("Video with id "+splitId+" not found")}(shape.id)),image.setAttribute("width",shape.props.w.toString()),image.setAttribute("height",shape.props.h.toString()),g.appendChild(image),g}}const TLVideoUtilComponent=(0,dist_esm.jas)((function TLVideoUtilComponent2(props){const{shape,videoUtil}=props,showControls=videoUtil.editor.getShapeGeometry(shape).bounds.w*videoUtil.editor.zoomLevel>=110,asset=shape.props.assetId?videoUtil.editor.getAsset(shape.props.assetId):null,{time,playing}=shape.props,isEditing=(0,dist_esm.YzH)(shape.id),prefersReducedMotion=usePrefersReducedMotion(),rVideo=react.useRef(null),handlePlay=react.useCallback((e=>{const video=e.currentTarget;videoUtil.editor.updateShapes([{type:"video",id:shape.id,props:{playing:!0,time:video.currentTime}}])}),[shape.id,videoUtil.editor]),handlePause=react.useCallback((e=>{const video=e.currentTarget;videoUtil.editor.updateShapes([{type:"video",id:shape.id,props:{playing:!1,time:video.currentTime}}])}),[shape.id,videoUtil.editor]),handleSetCurrentTime=react.useCallback((e=>{const video=e.currentTarget;isEditing&&videoUtil.editor.updateShapes([{type:"video",id:shape.id,props:{time:video.currentTime}}])}),[isEditing,shape.id,videoUtil.editor]),[isLoaded,setIsLoaded]=react.useState(!1),handleLoadedData=react.useCallback((e=>{const video=e.currentTarget;time!==video.currentTime&&(video.currentTime=time),playing||video.pause(),setIsLoaded(!0)}),[playing,time]);return react.useEffect((()=>{const video=rVideo.current;video&&(isLoaded&&!isEditing&&time!==video.currentTime&&(video.currentTime=time),isEditing&&document.activeElement!==video&&video.focus())}),[isEditing,isLoaded,time]),react.useEffect((()=>{if(prefersReducedMotion){const video=rVideo.current;video.pause(),video.currentTime=0}}),[rVideo,prefersReducedMotion]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist_esm.G7H,{id:shape.id,children:(0,jsx_runtime.jsx)("div",{className:"tl-counter-scaled",children:asset?.props.src?(0,jsx_runtime.jsx)("video",{ref:rVideo,style:isEditing?{pointerEvents:"all"}:void 0,className:`tl-video tl-video-shape-${shape.id.split(":")[1]}`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:isEditing&&showControls,onPlay:handlePlay,onPause:handlePause,onTimeUpdate:handleSetCurrentTime,onLoadedData:handleLoadedData,hidden:!isLoaded,children:(0,jsx_runtime.jsx)("source",{src:asset.props.src})}):null})}),"url"in shape.props&&shape.props.url&&(0,jsx_runtime.jsx)(HyperlinkButton,{url:shape.props.url,zoomLevel:videoUtil.editor.zoomLevel})]})})),defaultShapeUtils=[TextShapeUtil,BookmarkShapeUtil,DrawShapeUtil,GeoShapeUtil,NoteShapeUtil,LineShapeUtil,FrameShapeUtil,ArrowShapeUtil,HighlightShapeUtil,EmbedShapeUtil,ImageShapeUtil,VideoShapeUtil];class ScribbleManager{state;points;size;color;opacity;delay;timeoutMs=0;delayRemaining=0;onUpdate;onComplete;prev=null;next=null;constructor(opts){const{size=20,color="accent",opacity=.8,delay=0,onComplete,onUpdate}=opts;this.onUpdate=onUpdate,this.onComplete=onComplete,this.size=size,this.color=color,this.delay=delay,this.opacity=opacity,this.points=[],this.state="starting",this.prev=null,this.next=null,this.delayRemaining=this.delay,this.resume()}resume=()=>{this.state="active"};pause=()=>{this.state="starting"};stop=()=>{this.delayRemaining=Math.min(this.delayRemaining,200),this.state="stopping"};addPoint=(x,y)=>{const{prev}=this,point={x,y,z:.5};prev&&dist_esm.GF3.Dist(prev,point)<1||(this.next=point)};getScribble(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,delay:this.delay,points:[...this.points]}}updateScribble(){this.onUpdate(this.getScribble())}tick=elapsed=>{this.timeoutMs+=elapsed,this.delayRemaining>0&&(this.delayRemaining=Math.max(0,this.delayRemaining-elapsed)),this.timeoutMs>=16&&(this.timeoutMs=0);const{timeoutMs,state,prev,next,points}=this;switch(state){case"active":next&&next!==prev?(this.prev=next,points.push(next),0===this.delayRemaining&&points.length>8&&points.shift(),this.updateScribble()):0===timeoutMs&&(points.length>1?(points.shift(),this.updateScribble()):this.delayRemaining=this.delay);break;case"stopping":if(0===this.delayRemaining&&0===timeoutMs){if(1===points.length)return this.state="paused",void this.onComplete();this.size*=.9,points.shift(),this.updateScribble()}}}}class Erasing extends dist_esm.nui{static id="erasing";info={};scribble={};markId="";excludedShapeIds=new Set;onEnter=info=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=info;const{originPagePoint}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.currentPageShapes.filter((shape=>{if(this.editor.isShapeOrAncestorLocked(shape))return!0;if(this.editor.isShapeOfType(shape,"group")||this.editor.isShapeOfType(shape,"frame")){const pointInShapeShape=this.editor.getPointInShapeSpace(shape,originPagePoint);return this.editor.getShapeGeometry(shape).bounds.containsPoint(pointInShapeShape)}return!1})).map((shape=>shape.id))),this.startScribble(),this.update()};startScribble=()=>{this.scribble.tick&&this.editor.off("tick",this.scribble?.tick),this.scribble=new ScribbleManager({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"muted-1",size:12}),this.editor.on("tick",this.scribble.tick)};pushPointToScribble=()=>{const{x,y}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(x,y)};onScribbleUpdate=scribble=>{this.editor.updateInstanceState({scribble})};onScribbleComplete=()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})};onExit=()=>{this.scribble.stop()};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};update(){const{zoomLevel,currentPageShapes,erasingShapeIds,inputs:{currentPagePoint,previousPagePoint}}=this.editor,{excludedShapeIds}=this;this.pushPointToScribble();const erasing=new Set(erasingShapeIds);for(const shape of currentPageShapes){if(this.editor.isShapeOfType(shape,"group"))continue;const pageMask=this.editor.getShapeMask(shape.id);if(pageMask&&!(0,dist_esm.Ofd)(currentPagePoint,pageMask))continue;const geometry=this.editor.getShapeGeometry(shape),A=this.editor.getPointInShapeSpace(shape,previousPagePoint),B=this.editor.getPointInShapeSpace(shape,currentPagePoint);geometry.hitTestLineSegment(A,B,dist_esm.wMU/zoomLevel)&&erasing.add(this.editor.getOutermostSelectableShape(shape).id)}this.editor.setErasingShapes([...erasing].filter((id=>!excludedShapeIds.has(id))))}complete(){this.editor.deleteShapes(this.editor.currentPageState.erasingShapeIds),this.editor.setErasingShapes([]),this.parent.transition("idle",{})}cancel(){this.editor.setErasingShapes([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}class children_Idle_Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("pointing",info)};onCancel=()=>{this.editor.setCurrentTool("select")}}class children_Pointing_Pointing extends dist_esm.nui{static id="pointing";onEnter=()=>{const{inputs:{currentPagePoint},currentPageShapesSorted:sortedShapesOnCurrentPage,zoomLevel}=this.editor,erasing=new Set,initialSize=erasing.size;for(let i=sortedShapesOnCurrentPage.length-1;i>=0;i--){const shape=sortedShapesOnCurrentPage[i];if(!this.editor.isShapeOrAncestorLocked(shape)&&!this.editor.isShapeOfType(shape,"group")&&this.editor.isPointInShape(shape,currentPagePoint,{hitInside:!1,margin:dist_esm.wMU/zoomLevel})){const hitShape=this.editor.getOutermostSelectableShape(shape);if(this.editor.isShapeOfType(hitShape,"frame")&&erasing.size>initialSize)break;erasing.add(hitShape.id)}}this.editor.setErasingShapes([...erasing])};onPointerMove=info=>{this.editor.inputs.isDragging&&this.parent.transition("erasing",info)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{erasingShapeIds}=this.editor;erasingShapeIds.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(erasingShapeIds)),this.editor.setErasingShapes([]),this.parent.transition("idle",{})}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle",{})}}class EraserTool extends dist_esm.nui{static id="eraser";static initial="idle";static children=()=>[children_Idle_Idle,children_Pointing_Pointing,Erasing];onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})}}class Dragging extends dist_esm.nui{static id="dragging";onEnter=()=>{this.update()};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.complete()};onComplete=()=>{this.complete()};update(){const{currentScreenPoint,previousScreenPoint}=this.editor.inputs,delta=dist_esm.GF3.Sub(currentScreenPoint,previousScreenPoint);(Math.abs(delta.x)>0||Math.abs(delta.y)>0)&&this.editor.pan(delta)}complete(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:dist_esm.$Gp}),this.parent.transition("idle",{})}}class HandTool_children_Idle_Idle extends dist_esm.nui{static id="idle";onEnter=()=>{this.editor.setCursor({type:"grab",rotation:0})};onPointerDown=info=>{this.parent.transition("pointing",info)};onCancel=()=>{this.editor.setCurrentTool("select")}}class HandTool_children_Pointing_Pointing extends dist_esm.nui{static id="pointing";onEnter=()=>{this.editor.stopCameraAnimation(),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})};onPointerMove=info=>{this.editor.inputs.isDragging&&this.parent.transition("dragging",info)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.complete()};complete(){this.parent.transition("idle",{})}}class HandTool extends dist_esm.nui{static id="hand";static initial="idle";static children=()=>[HandTool_children_Idle_Idle,HandTool_children_Pointing_Pointing,Dragging];onDoubleClick=info=>{if("settle"===info.phase){const{currentScreenPoint}=this.editor.inputs;this.editor.zoomIn(currentScreenPoint,{duration:220,easing:dist_esm.Ljl.easeOutQuint})}};onTripleClick=info=>{if("settle"===info.phase){const{currentScreenPoint}=this.editor.inputs;this.editor.zoomOut(currentScreenPoint,{duration:320,easing:dist_esm.Ljl.easeOutQuint})}};onQuadrupleClick=info=>{if("settle"===info.phase){const{zoomLevel,inputs:{currentScreenPoint}}=this.editor;1===zoomLevel?this.editor.zoomToFit({duration:400,easing:dist_esm.Ljl.easeOutQuint}):this.editor.resetZoom(currentScreenPoint,{duration:320,easing:dist_esm.Ljl.easeOutQuint})}}}class LaserTool_children_Idle_Idle extends dist_esm.nui{static id="idle";onPointerDown=info=>{this.parent.transition("lasering",info)}}class Lasering extends dist_esm.nui{static id="lasering";scribble={};onEnter=()=>{this.startScribble(),this.pushPointToScribble()};onExit=()=>{this.scribble.stop()};onPointerMove=()=>{this.pushPointToScribble()};onPointerUp=()=>{this.complete()};startScribble=()=>{this.scribble.tick&&this.editor.off("tick",this.scribble?.tick),this.scribble=new ScribbleManager({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"laser",opacity:.7,size:4,delay:1200}),this.editor.on("tick",this.scribble.tick)};pushPointToScribble=()=>{const{x,y}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(x,y)};onScribbleUpdate=scribble=>{this.editor.updateInstanceState({scribble})};onScribbleComplete=()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};complete(){this.parent.transition("idle",{})}cancel(){this.parent.transition("idle",{})}}class LaserTool extends dist_esm.nui{static id="laser";static initial="idle";static children=()=>[LaserTool_children_Idle_Idle,Lasering];onEnter=()=>{this.editor.setCursor({type:"cross",rotation:0})}}class Brushing extends dist_esm.nui{static id="brushing";info={};brush=new dist_esm.NoK;initialSelectedShapeIds=[];excludedShapeIds=new Set;initialStartShape=null;onEnter=info=>{const{altKey,currentPagePoint}=this.editor.inputs;altKey?this.parent.transition("scribble_brushing",info):(this.excludedShapeIds=new Set(this.editor.currentPageShapes.filter((shape=>this.editor.isShapeOfType(shape,"group")||this.editor.isShapeOrAncestorLocked(shape))).map((shape=>shape.id))),this.info=info,this.initialSelectedShapeIds=this.editor.selectedShapeIds.slice(),this.initialStartShape=this.editor.getShapesAtPoint(currentPagePoint)[0],this.onPointerMove())};onExit=()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})};onPointerMove=()=>{this.hitTestShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=info=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds,{squashing:!0}),this.parent.transition("idle",info)};onKeyDown=info=>{this.editor.inputs.altKey?this.parent.transition("scribble_brushing",info):this.hitTestShapes()};onKeyUp=()=>{this.hitTestShapes()};complete(){this.parent.transition("idle",{})}hitTestShapes(){const{zoomLevel,currentPageId,currentPageShapes,inputs:{originPagePoint,currentPagePoint,shiftKey,ctrlKey}}=this.editor;this.brush.setTo(dist_esm.NoK.FromPoints([originPagePoint,currentPagePoint]));const results=new Set(shiftKey?this.initialSelectedShapeIds:[]);let A,B,shape,pageBounds,pageTransform,localCorners;const{corners}=this.brush,{excludedShapeIds}=this;testAllShapes:for(let i=0,n=currentPageShapes.length;i<n;i++)if(shape=currentPageShapes[i],!excludedShapeIds.has(shape.id)&&!results.has(shape.id)&&(pageBounds=this.editor.getShapePageBounds(shape),pageBounds))if(this.brush.contains(pageBounds))this.handleHit(shape,currentPagePoint,currentPageId,results,corners);else if(!ctrlKey&&!this.editor.isShapeOfType(shape,"frame")&&this.brush.collides(pageBounds)){const geometry=this.editor.getShapeGeometry(shape);if(pageTransform=this.editor.getShapePageTransform(shape),!pageTransform)continue testAllShapes;localCorners=pageTransform.clone().invert().applyToPoints(corners);hitTestBrushEdges:for(let i2=0;i2<localCorners.length;i2++)if(A=localCorners[i2],B=localCorners[(i2+1)%localCorners.length],geometry.hitTestLineSegment(A,B,dist_esm.wMU/zoomLevel)){this.handleHit(shape,currentPagePoint,currentPageId,results,corners);break hitTestBrushEdges}}this.editor.updateInstanceState({brush:{...this.brush.toJson()}}),this.editor.setSelectedShapes(Array.from(results),{squashing:!0})}onInterrupt=()=>{this.editor.updateInstanceState({brush:null})};handleHit(shape,currentPagePoint,currentPageId,results,corners){if(shape.parentId===currentPageId)return void results.add(shape.id);const selectedShape=this.editor.getOutermostSelectableShape(shape),pageMask=this.editor.getShapeMask(selectedShape.id);(!pageMask||(0,dist_esm.UQR)(pageMask,corners)||(0,dist_esm.Ofd)(currentPagePoint,pageMask))&&results.add(selectedShape.id)}}function getHitShapeOnCanvasPointerDown(editor){const{zoomLevel,inputs:{currentPagePoint}}=editor;return editor.getShapeAtPoint(currentPagePoint,{hitInside:!1,hitLabels:!1,margin:dist_esm.wMU/zoomLevel,renderingOnly:!0})??editor.getSelectedShapeAtPoint(currentPagePoint)}function getTranslateCroppedImageChange(editor,shape,delta){if(!shape)throw Error("Needs to translate a cropped shape!");const{crop:oldCrop}=shape.props;if(!oldCrop)return;const flatten=editor.inputs.shiftKey?Math.abs(delta.x)<Math.abs(delta.y)?"x":"y":null;"x"===flatten?delta.x=0:"y"===flatten&&(delta.y=0),delta.rot(-shape.rotation);const w=1/(oldCrop.bottomRight.x-oldCrop.topLeft.x)*shape.props.w,h=1/(oldCrop.bottomRight.y-oldCrop.topLeft.y)*shape.props.h,yCrop=oldCrop.bottomRight.y-oldCrop.topLeft.y,xCrop=oldCrop.bottomRight.x-oldCrop.topLeft.x,newCrop=(0,dist_esm.p$x)(oldCrop);newCrop.topLeft.x=Math.min(1-xCrop,Math.max(0,newCrop.topLeft.x-delta.x/w)),newCrop.topLeft.y=Math.min(1-yCrop,Math.max(0,newCrop.topLeft.y-delta.y/h)),newCrop.bottomRight.x=newCrop.topLeft.x+xCrop,newCrop.bottomRight.y=newCrop.topLeft.y+yCrop;return{id:shape.id,type:shape.type,props:{crop:newCrop}}}class Crop_children_Idle_Idle extends dist_esm.nui{static id="idle";onEnter=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0});const{onlySelectedShape}=this.editor;this.editor.on("change-history",this.cleanupCroppingState),onlySelectedShape&&(this.editor.mark("crop"),this.editor.setCroppingShape(onlySelectedShape.id))};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.off("change-history",this.cleanupCroppingState)};onCancel=()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})};onPointerDown=info=>{if(!this.editor.isMenuOpen){if(info.ctrlKey)return this.cancel(),void this.editor.root.handleEvent(info);switch(info.target){case"canvas":{const hitShape=getHitShapeOnCanvasPointerDown(this.editor);if(hitShape&&!this.editor.isShapeOfType(hitShape,"group"))return void this.onPointerDown({...info,shape:hitShape,target:"shape"});this.cancel(),this.editor.root.handleEvent(info);break}case"shape":if(info.shape.id===this.editor.croppingShapeId)return void this.editor.setCurrentTool("select.crop.pointing_crop",info);this.editor.getShapeUtil(info.shape)?.canCrop(info.shape)?(this.editor.setCroppingShape(info.shape.id),this.editor.setSelectedShapes([info.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",info)):(this.cancel(),this.editor.root.handleEvent(info));break;case"selection":switch(info.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.editor.setCurrentTool("select.pointing_rotate_handle",{...info,onInteractionEnd:"select.crop"});break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":this.editor.setCurrentTool("select.pointing_crop_handle",{...info,onInteractionEnd:"select.crop"});break;default:this.cancel()}}}};onDoubleClick=info=>{if(this.editor.inputs.shiftKey||"up"!==info.phase)return;if(!this.editor.croppingShapeId)return;const shape=this.editor.getShape(this.editor.croppingShapeId);if(!shape)return;const util=this.editor.getShapeUtil(shape);util&&"selection"===info.target&&util.onDoubleClickEdge?.(shape)};onKeyDown=()=>{this.nudgeCroppingImage(!1)};onKeyRepeat=()=>{this.nudgeCroppingImage(!0)};onKeyUp=info=>{if("Enter"===info.code)this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})};cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}cleanupCroppingState=()=>{this.editor.croppingShapeId||this.editor.setCurrentTool("select.idle",{})};nudgeCroppingImage(ephemeral=!1){const{editor:{inputs:{keys}}}=this,shiftKey=keys.has("ShiftLeft"),delta=new dist_esm.GF3(0,0);if(keys.has("ArrowLeft")&&(delta.x+=1),keys.has("ArrowRight")&&(delta.x-=1),keys.has("ArrowUp")&&(delta.y+=1),keys.has("ArrowDown")&&(delta.y-=1),delta.equals(new dist_esm.GF3(0,0)))return;shiftKey&&delta.mul(10);const shape=this.editor.getShape(this.editor.croppingShapeId);if(!shape)return;const partial=getTranslateCroppedImageChange(this.editor,shape,delta);partial&&(ephemeral||this.editor.mark("translate crop"),this.editor.updateShapes([partial]))}}class PointingCrop extends dist_esm.nui{static id="pointing_crop";onCancel=()=>{this.editor.setCurrentTool("select.crop.idle",{})};onPointerMove=info=>{this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",info)};onPointerUp=info=>{this.editor.setCurrentTool("select.crop.idle",info)}}class TranslatingCrop extends dist_esm.nui{static id="translating_crop";info={};markId="translating crop";snapshot={};onEnter=info=>{this.info=info,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};onKeyDown=info=>{switch(info.key){case"Alt":case"Shift":return void this.updateShapes()}};onKeyUp=info=>{switch(info.key){case"Enter":return void this.complete();case"Alt":case"Shift":this.updateShapes()}};complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.onlySelectedShape}}updateShapes(){const shape=this.snapshot.shape;if(!shape)return;const{originPagePoint,currentPagePoint}=this.editor.inputs,delta=currentPagePoint.clone().sub(originPagePoint),partial=getTranslateCroppedImageChange(this.editor,shape,delta);partial&&this.editor.updateShapes([partial],{squashing:!0})}}class Crop extends dist_esm.nui{static id="crop";static initial="idle";static children=()=>[Crop_children_Idle_Idle,TranslatingCrop,PointingCrop]}const CursorTypeMap={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class PointingResizeHandle extends dist_esm.nui{static id="pointing_resize_handle";info={};updateCursor(){const selected=this.editor.selectedShapes,cursorType=CursorTypeMap[this.info.handle];this.editor.updateInstanceState({cursor:{type:cursorType,rotation:1===selected.length?selected[0].rotation:0}})}onEnter=info=>{this.info=info,this.updateCursor()};onPointerMove=()=>{this.editor.inputs.isDragging&&this.parent.transition("resizing",this.info)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}class Cropping extends dist_esm.nui{static id="cropping";info={};markId="";snapshot={};onEnter=info=>{this.info=info,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()};onPointerMove=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};updateCursor(){const selectedShape=this.editor.selectedShapes[0];if(!selectedShape)return;const cursorType=CursorTypeMap[this.info.handle];this.editor.updateInstanceState({cursor:{type:cursorType,rotation:selectedShape.rotation}})}getDefaultCrop=()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}});updateShapes(){const{shape,cursorHandleOffset}=this.snapshot;if(!shape)return;if(!this.editor.getShapeUtil("image"))return;const props=shape.props,currentPagePoint=this.editor.inputs.currentPagePoint.clone().sub(cursorHandleOffset),originPagePoint=this.editor.inputs.originPagePoint.clone().sub(cursorHandleOffset),change=currentPagePoint.clone().sub(originPagePoint).rot(-shape.rotation),crop=props.crop??this.getDefaultCrop(),newCrop=(0,dist_esm.p$x)(crop),newPoint=new dist_esm.GF3(shape.x,shape.y),pointDelta=new dist_esm.GF3(0,0),w=1/(crop.bottomRight.x-crop.topLeft.x)*props.w,h=1/(crop.bottomRight.y-crop.topLeft.y)*props.h;let hasCropChanged=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(h<8)break;hasCropChanged=!0,newCrop.topLeft.y=newCrop.topLeft.y+change.y/h;h*(newCrop.bottomRight.y-newCrop.topLeft.y)<8?(newCrop.topLeft.y=newCrop.bottomRight.y-8/h,pointDelta.y=(newCrop.topLeft.y-crop.topLeft.y)*h):newCrop.topLeft.y<=0?(newCrop.topLeft.y=0,pointDelta.y=(newCrop.topLeft.y-crop.topLeft.y)*h):pointDelta.y=change.y;break;case"bottom":case"bottom_left":case"bottom_right":if(h<8)break;hasCropChanged=!0,newCrop.bottomRight.y=Math.min(1,newCrop.bottomRight.y+change.y/h);h*(newCrop.bottomRight.y-newCrop.topLeft.y)<8&&(newCrop.bottomRight.y=newCrop.topLeft.y+8/h);break}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(w<8)break;hasCropChanged=!0,newCrop.topLeft.x=newCrop.topLeft.x+change.x/w;w*(newCrop.bottomRight.x-newCrop.topLeft.x)<8?(newCrop.topLeft.x=newCrop.bottomRight.x-8/w,pointDelta.x=(newCrop.topLeft.x-crop.topLeft.x)*w):newCrop.topLeft.x<=0?(newCrop.topLeft.x=0,pointDelta.x=(newCrop.topLeft.x-crop.topLeft.x)*w):pointDelta.x=change.x;break;case"right":case"top_right":case"bottom_right":if(w<8)break;hasCropChanged=!0,newCrop.bottomRight.x=Math.min(1,newCrop.bottomRight.x+change.x/w);w*(newCrop.bottomRight.x-newCrop.topLeft.x)<8&&(newCrop.bottomRight.x=newCrop.topLeft.x+8/w);break}if(!hasCropChanged)return;newPoint.add(pointDelta.rot(shape.rotation));const partial={id:shape.id,type:shape.type,x:newPoint.x,y:newPoint.y,props:{crop:newCrop,w:(newCrop.bottomRight.x-newCrop.topLeft.x)*w,h:(newCrop.bottomRight.y-newCrop.topLeft.y)*h}};this.editor.updateShapes([partial],{squashing:!0}),this.updateCursor()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}createSnapshot(){const{selectionRotation,inputs:{originPagePoint}}=this.editor,shape=this.editor.onlySelectedShape,selectionBounds=this.editor.selectionRotatedPageBounds,dragHandlePoint=dist_esm.GF3.RotWith(selectionBounds.getHandlePoint(this.info.handle),selectionBounds.point,selectionRotation);return{shape,cursorHandleOffset:dist_esm.GF3.Sub(originPagePoint,dragHandlePoint)}}}class DraggingHandle extends dist_esm.nui{static id="dragging_handle";shapeId="";initialHandle={};initialAdjacentHandle=null;initialPagePoint={};markId="";initialPageTransform;initialPageRotation;info={};isPrecise=!1;isPreciseId=null;pointingId=null;onEnter=info=>{const{shape,isCreating,handle}=info;this.info=info,this.parent.currentToolIdMask=info.onInteractionEnd,this.shapeId=shape.id,this.markId=isCreating?`creating:${shape.id}`:"dragging handle",isCreating||this.editor.mark(this.markId),this.initialHandle=(0,dist_esm.p$x)(handle),this.initialPageTransform=this.editor.getShapePageTransform(shape),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.updateInstanceState({cursor:{type:isCreating?"cross":"grabbing",rotation:0}},{ephemeral:!0});const handles=this.editor.getShapeHandles(shape).sort(dist_esm.hl1),index=handles.findIndex((h=>h.id===info.handle.id));this.initialAdjacentHandle=null;for(let i=index+1;i<handles.length;i++){const handle2=handles[i];if("vertex"===handle2.type&&"middle"!==handle2.id&&handle2.id!==info.handle.id){this.initialAdjacentHandle=handle2;break}}if(!this.initialAdjacentHandle)for(let i=handles.length-1;i>=0;i--){const handle2=handles[i];if("vertex"===handle2.type&&"middle"!==handle2.id&&handle2.id!==info.handle.id){this.initialAdjacentHandle=handle2;break}}const initialTerminal=shape.props[info.handle.id];this.isPrecise=!1,"binding"===initialTerminal?.type?(this.editor.setHintingShapes([initialTerminal.boundShapeId]),this.isPrecise=!dist_esm.GF3.Equals(initialTerminal.normalizedAnchor,{x:.5,y:.5}),this.isPrecise?this.isPreciseId=initialTerminal.boundShapeId:this.resetExactTimeout()):this.editor.setHintingShapes([]),this.update(),this.editor.select(this.shapeId)};exactTimeout=-1;resetExactTimeout(){-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((()=>{this.isActive&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1}),750)}clearExactTimeout(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};onExit=()=>{this.parent.currentToolIdMask=void 0,this.editor.setHintingShapes([]),this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};complete(){this.editor.snaps.clear();const{onInteractionEnd}=this.info;this.editor.instanceState.isToolLocked&&onInteractionEnd?this.editor.setCurrentTool(onInteractionEnd,{shapeId:this.shapeId}):this.parent.transition("idle",{})}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();const{onInteractionEnd}=this.info;onInteractionEnd?this.editor.setCurrentTool(onInteractionEnd,{shapeId:this.shapeId}):this.parent.transition("idle",{})}update(){const{editor,shapeId,initialPagePoint}=this,{initialHandle,initialPageRotation,initialAdjacentHandle}=this,{user:{isSnapMode},hintingShapeIds,snaps,inputs:{currentPagePoint,shiftKey,ctrlKey,altKey,pointerVelocity}}=editor,shape=editor.getShape(shapeId);if(!shape)return;const util=editor.getShapeUtil(shape);let point=currentPagePoint.clone().sub(initialPagePoint).rot(-initialPageRotation).add(initialHandle);if(shiftKey&&initialAdjacentHandle&&"middle"!==initialHandle.id){const angle=dist_esm.GF3.Angle(initialAdjacentHandle,point),angleDifference=(0,dist_esm.nDY)(angle,24)-angle;point=dist_esm.GF3.RotWith(point,initialAdjacentHandle,angleDifference)}if(editor.snaps.clear(),initialHandle.canSnap&&(isSnapMode?!ctrlKey:ctrlKey)){const pageTransform=editor.getShapePageTransform(shape.id);if(!pageTransform)throw Error("Expected a page transform");const handleIndex=editor.getShapeHandles(shape).filter((({type})=>"vertex"===type)).sort(dist_esm.hl1).findIndex((({index})=>initialHandle.index===index)),additionalSegments=util.getOutlineSegments(shape).map((segment=>dist_esm.yX5.applyToPoints(pageTransform,segment))).filter(((_segment,i)=>i!==handleIndex-1&&i!==handleIndex)),snapDelta=snaps.getSnappingHandleDelta({additionalSegments,handlePoint:dist_esm.yX5.applyToPoint(pageTransform,point)});snapDelta&&(snapDelta.rot(-editor.getShapeParentTransform(shape).rotation()),point.add(snapDelta))}const changes=util.onHandleChange?.(shape,{handle:{...initialHandle,x:point.x,y:point.y},isPrecise:this.isPrecise||altKey}),next={...shape,...changes};if(initialHandle.canBind){const bindingAfter=next.props[initialHandle.id];"binding"===bindingAfter?.type?hintingShapeIds[0]!==bindingAfter.boundShapeId&&(editor.setHintingShapes([bindingAfter.boundShapeId]),this.pointingId=bindingAfter.boundShapeId,this.isPrecise=pointerVelocity.len()<.5||altKey,this.isPreciseId=this.isPrecise?bindingAfter.boundShapeId:null,this.resetExactTimeout()):hintingShapeIds.length>0&&(editor.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}changes&&editor.updateShapes([next],{squashing:!0})}}class EditingShape extends dist_esm.nui{static id="editing_shape";onEnter=()=>{const{editingShape}=this.editor;if(!editingShape)throw Error("Entered editing state without an editing shape");updateHoveredId(this.editor),this.editor.select(editingShape)};onExit=()=>{const{editingShapeId}=this.editor.currentPageState;if(!editingShapeId)return;this.editor.setEditingShape(null);const shape=this.editor.getShape(editingShapeId),util=this.editor.getShapeUtil(shape);util.onEditEnd?.(shape),setTimeout((()=>{this.editor.updateViewportScreenBounds()}),500)};onPointerMove=info=>{switch(info.target){case"shape":case"canvas":return void updateHoveredId(this.editor)}};onPointerDown=info=>{switch(info.target){case"canvas":{const hitShape=getHitShapeOnCanvasPointerDown(this.editor);if(hitShape)return void this.onPointerDown({...info,shape:hitShape,target:"shape"});break}case"shape":{const{shape}=info,{editingShape}=this.editor;if(!editingShape)throw Error("Expected an editing shape!");if(shape.type===editingShape.type){if(!this.editor.isShapeOfType(shape,"geo")&&!this.editor.isShapeOfType(shape,"arrow"))return shape.id!==editingShape.id?void this.parent.transition("pointing_shape",info):void(this.editor.isShapeOfType(shape,"frame")&&this.editor.setEditingShape(null));{const labelGeometry=this.editor.getShapeUtil(shape).getGeometry(shape).children[1];if(labelGeometry){const pointInShapeSpace=this.editor.getPointInShapeSpace(shape,this.editor.inputs.currentPagePoint);if(labelGeometry.bounds.containsPoint(pointInShapeSpace))return shape.id===editingShape.id?void 0:void this.parent.transition("pointing_shape",info)}}}break}}this.parent.transition("idle",info),this.editor.root.handleEvent(info)};onComplete=info=>{this.parent.transition("idle",info)};onCancel=info=>{this.parent.transition("idle",info)}}function getShouldEnterCropMode(editor){const{onlySelectedShape}=editor;return!(!onlySelectedShape||editor.isShapeOrAncestorLocked(onlySelectedShape)||!editor.getShapeUtil(onlySelectedShape).canCrop(onlySelectedShape))}function selectOnCanvasPointerUp(editor){const{selectedShapeIds}=editor,{shiftKey,altKey,currentPagePoint}=editor.inputs,hitShape=editor.getShapeAtPoint(currentPagePoint,{hitInside:!1,margin:dist_esm.wMU/editor.zoomLevel,hitLabels:!0,renderingOnly:!0,filter:shape=>!shape.isLocked});if(hitShape){const outermostSelectableShape=editor.getOutermostSelectableShape(hitShape);if(shiftKey&&!altKey)editor.cancelDoubleClick(),selectedShapeIds.includes(outermostSelectableShape.id)?(editor.mark("deselecting shape"),editor.deselect(outermostSelectableShape)):(editor.mark("shift selecting shape"),editor.setSelectedShapes([...selectedShapeIds,outermostSelectableShape.id]));else{let shapeToSelect;shapeToSelect=outermostSelectableShape===hitShape||outermostSelectableShape.id===editor.focusedGroupId||selectedShapeIds.includes(outermostSelectableShape.id)?hitShape:outermostSelectableShape,shapeToSelect&&!selectedShapeIds.includes(shapeToSelect.id)&&(editor.mark("selecting shape"),editor.select(shapeToSelect.id))}}else{if(shiftKey)return;{selectedShapeIds.length>0&&(editor.mark("selecting none"),editor.selectNone());const{focusedGroupId}=editor;if((0,dist_esm.YTh)(focusedGroupId)){const groupShape=editor.getShape(focusedGroupId);editor.isPointInShape(groupShape,currentPagePoint,{margin:0,hitInside:!0})||editor.setFocusedGroup(null)}}}}class SelectTool_children_Idle_Idle extends dist_esm.nui{static id="idle";onEnter=()=>{this.parent.currentToolIdMask=void 0,updateHoveredId(this.editor),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{updateHoveredId(this.editor)};onPointerDown=info=>{if(this.editor.isMenuOpen)return;const shouldEnterCropMode=info.ctrlKey&&getShouldEnterCropMode(this.editor);if(info.ctrlKey&&!shouldEnterCropMode)return"shape"===info.target&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")&&!this.editor.isShapeOrAncestorLocked(info.shape)?void this.parent.transition("pointing_shape",info):void this.parent.transition("brushing",info);switch(info.target){case"canvas":{const hitShape=getHitShapeOnCanvasPointerDown(this.editor);if(hitShape)return void this.onPointerDown({...info,shape:hitShape,target:"shape"});const{onlySelectedShape,selectedShapeIds,inputs:{currentPagePoint}}=this.editor;if((selectedShapeIds.length>1||onlySelectedShape&&!this.editor.getShapeUtil(onlySelectedShape).hideSelectionBoundsBg(onlySelectedShape))&&isPointInRotatedSelectionBounds(this.editor,currentPagePoint))return void this.onPointerDown({...info,target:"selection"});this.parent.transition("pointing_canvas",info);break}case"shape":if(this.editor.isShapeOrAncestorLocked(info.shape))break;this.parent.transition("pointing_shape",info);break;case"handle":if(this.editor.instanceState.isReadonly)break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",info):this.parent.transition("pointing_handle",info);break;case"selection":switch(info.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.parent.transition("pointing_rotate_handle",info);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":shouldEnterCropMode?this.parent.transition("pointing_crop_handle",info):this.parent.transition("pointing_resize_handle",info);break;default:{const{hoveredShape}=this.editor;if(hoveredShape&&!this.editor.selectedShapeIds.includes(hoveredShape.id))return void this.onPointerDown({...info,shape:hoveredShape,target:"shape"});this.parent.transition("pointing_selection",info)}}}};onDoubleClick=info=>{if(!this.editor.inputs.shiftKey&&"up"===info.phase)switch(info.target){case"canvas":{const{hoveredShape}=this.editor,hitShape=hoveredShape&&!this.editor.isShapeOfType(hoveredShape,"group")?hoveredShape:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:dist_esm.wMU/this.editor.zoomLevel,hitInside:!1}),{focusedGroupId}=this.editor;if(hitShape){if(this.editor.isShapeOfType(hitShape,"group"))return void selectOnCanvasPointerUp(this.editor);{const parent=this.editor.getShape(hitShape.parentId);if(parent&&this.editor.isShapeOfType(parent,"group")&&(!focusedGroupId||parent.id!==focusedGroupId))return void selectOnCanvasPointerUp(this.editor)}return void this.onDoubleClick({...info,shape:hitShape,target:"shape"})}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(info);break}case"selection":{if(this.editor.instanceState.isReadonly)break;const{onlySelectedShape}=this.editor;if(onlySelectedShape){const util=this.editor.getShapeUtil(onlySelectedShape);if(!this.canInteractWithShapeInReadOnly(onlySelectedShape))return;if("right"===info.handle||"left"===info.handle||"top"===info.handle||"bottom"===info.handle){const change=util.onDoubleClickEdge?.(onlySelectedShape);if(change)return this.editor.mark("double click edge"),void this.editor.updateShapes([change])}if(util.canCrop(onlySelectedShape)&&!this.editor.isShapeOrAncestorLocked(onlySelectedShape))return void this.parent.transition("crop",info);this.shouldStartEditingShape(onlySelectedShape)&&this.startEditingShape(onlySelectedShape,info)}break}case"shape":{const{shape}=info,util=this.editor.getShapeUtil(shape);if("video"!==shape.type&&"embed"!==shape.type&&this.editor.instanceState.isReadonly)break;if(util.onDoubleClick){const change=util.onDoubleClick?.(shape);if(change)return void this.editor.updateShapes([change]);if(util.canCrop(shape)&&!this.editor.isShapeOrAncestorLocked(shape))return this.editor.mark("select and crop"),this.editor.select(info.shape?.id),void this.parent.transition("crop",info)}this.shouldStartEditingShape(shape)?this.startEditingShape(shape,info):this.handleDoubleClickOnCanvas(info);break}case"handle":{if(this.editor.instanceState.isReadonly)break;const{shape,handle}=info,util=this.editor.getShapeUtil(shape),changes=util.onDoubleClickHandle?.(shape,handle);changes?this.editor.updateShapes([changes]):this.shouldStartEditingShape(shape)&&this.startEditingShape(shape,info)}}};onRightClick=info=>{switch(info.target){case"canvas":{const{hoveredShape}=this.editor,hitShape=hoveredShape&&!this.editor.isShapeOfType(hoveredShape,"group")?hoveredShape:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:dist_esm.wMU/this.editor.zoomLevel,hitInside:!1,hitLabels:!0,hitFrameInside:!1,renderingOnly:!0});if(hitShape)return void this.onRightClick({...info,shape:hitShape,target:"shape"});const{onlySelectedShape,selectedShapeIds,inputs:{currentPagePoint}}=this.editor;if((selectedShapeIds.length>1||onlySelectedShape&&!this.editor.getShapeUtil(onlySelectedShape).hideSelectionBoundsBg(onlySelectedShape))&&isPointInRotatedSelectionBounds(this.editor,currentPagePoint))return void this.onRightClick({...info,target:"selection"});this.editor.selectNone();break}case"shape":{const{selectedShapeIds}=this.editor.currentPageState,{shape}=info,targetShape=this.editor.getOutermostSelectableShape(shape,(parent=>!selectedShapeIds.includes(parent.id)));selectedShapeIds.includes(targetShape.id)||(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([targetShape.id]));break}}};onCancel=()=>{this.editor.focusedGroupId!==this.editor.currentPageId&&this.editor.selectedShapeIds.length>0?this.editor.popFocusedGroupId():(this.editor.mark("clearing selection"),this.editor.selectNone())};onKeyDown=info=>{switch(info.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.nudgeSelectedShapes(!1)}};onKeyRepeat=info=>{switch(info.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.nudgeSelectedShapes(!0)}};onKeyUp=info=>{switch(info.code){case"Enter":{const{selectedShapes}=this.editor;if(selectedShapes.every((shape=>this.editor.isShapeOfType(shape,"group"))))return void this.editor.setSelectedShapes(selectedShapes.flatMap((shape=>this.editor.getSortedChildIdsForParent(shape.id))));const{onlySelectedShape}=this.editor;if(onlySelectedShape&&this.shouldStartEditingShape(onlySelectedShape))return void this.startEditingShape(onlySelectedShape,{...info,target:"shape",shape:onlySelectedShape});getShouldEnterCropMode(this.editor)&&this.parent.transition("crop",info);break}}};shouldStartEditingShape(shape=this.editor.onlySelectedShape){return!!shape&&((!this.editor.isShapeOrAncestorLocked(shape)||"embed"===shape.type)&&(!!this.canInteractWithShapeInReadOnly(shape)&&this.editor.getShapeUtil(shape).canEdit(shape)))}startEditingShape(shape,info){this.editor.isShapeOrAncestorLocked(shape)&&"embed"!==shape.type||(this.editor.mark("editing shape"),this.editor.setEditingShape(shape.id),this.parent.transition("editing_shape",info))}isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1;handleDoubleClickOnCanvas(info){if(this.editor.instanceState.isReadonly)return;this.editor.mark("creating text shape");const id=(0,dist_esm.F17)(),{x,y}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id,type:"text",x,y,props:{text:"",autoSize:!0}}]);const shape=this.editor.getShape(id);if(!shape)return;const util=this.editor.getShapeUtil(shape);this.editor.instanceState.isReadonly&&!util.canEditInReadOnly(shape)||(this.editor.setEditingShape(id),this.editor.select(id),this.parent.transition("editing_shape",info))}nudgeSelectedShapes(ephemeral=!1){const{editor:{inputs:{keys}}}=this,shiftKey=keys.has("ShiftLeft"),delta=new dist_esm.GF3(0,0);if(keys.has("ArrowLeft")&&(delta.x-=1),keys.has("ArrowRight")&&(delta.x+=1),keys.has("ArrowUp")&&(delta.y-=1),keys.has("ArrowDown")&&(delta.y+=1),delta.equals(new dist_esm.GF3(0,0)))return;ephemeral||this.editor.mark("nudge shapes");const{gridSize}=this.editor.documentSettings,step=this.editor.instanceState.isGridMode?shiftKey?gridSize*GRID_INCREMENT:gridSize:shiftKey?MAJOR_NUDGE_FACTOR:MINOR_NUDGE_FACTOR;this.editor.nudgeShapes(this.editor.selectedShapeIds,delta.mul(step))}canInteractWithShapeInReadOnly(shape){if(!this.editor.instanceState.isReadonly)return!0;return!!this.editor.getShapeUtil(shape).canEditInReadOnly(shape)}}const MAJOR_NUDGE_FACTOR=10,MINOR_NUDGE_FACTOR=1,GRID_INCREMENT=5;function isPointInRotatedSelectionBounds(editor,point){const{selectionRotatedPageBounds:selectionBounds}=editor;if(!selectionBounds)return!1;const{selectionRotation}=editor;return selectionRotation?(0,dist_esm.Ofd)(point,selectionBounds.corners.map((c=>dist_esm.GF3.RotWith(c,selectionBounds.point,selectionRotation)))):selectionBounds.containsPoint(point)}class PointingCanvas extends dist_esm.nui{static id="pointing_canvas";onEnter=()=>{const{inputs}=this.editor;inputs.shiftKey||this.editor.selectedShapeIds.length>0&&(this.editor.mark("selecting none"),this.editor.selectNone())};onPointerMove=info=>{this.editor.inputs.isDragging&&this.parent.transition("brushing",info)};onPointerUp=()=>{selectOnCanvasPointerUp(this.editor),this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.parent.transition("idle",{})};complete(){this.parent.transition("idle",{})}}class PointingCropHandle extends dist_esm.nui{static id="pointing_crop_handle";info={};updateCursor(shape){const cursorType=CursorTypeMap[this.info.handle];this.editor.updateInstanceState({cursor:{type:cursorType,rotation:shape.rotation}})}onEnter=info=>{this.info=info,this.parent.currentToolIdMask=info.onInteractionEnd;const selectedShape=this.editor.selectedShapes[0];selectedShape&&(this.updateCursor(selectedShape),this.editor.setCroppingShape(selectedShape.id))};onExit=()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.currentToolIdMask=void 0};onPointerMove=()=>{this.editor.inputs.isDragging&&this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})};onPointerUp=()=>{this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}}class PointingHandle extends dist_esm.nui{static id="pointing_handle";info={};onEnter=info=>{this.info=info;const initialTerminal=info.shape.props[info.handle.id];"binding"===initialTerminal?.type&&this.editor.setHintingShapes([initialTerminal.boundShapeId]),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})};onExit=()=>{this.editor.setHintingShapes([]),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerUp=()=>{this.parent.transition("idle",this.info)};onPointerMove=()=>{this.editor.inputs.isDragging&&this.parent.transition("dragging_handle",this.info)};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class PointingRotateHandle extends dist_esm.nui{static id="pointing_rotate_handle";info={};updateCursor(){const{selectionRotation}=this.editor;this.editor.updateInstanceState({cursor:{type:CursorTypeMap[this.info.handle],rotation:selectionRotation}})}onEnter=info=>{this.parent.currentToolIdMask=info.onInteractionEnd,this.info=info,this.updateCursor()};onExit=()=>{this.parent.currentToolIdMask=void 0,this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})};onPointerMove=()=>{const{isDragging}=this.editor.inputs;isDragging&&this.parent.transition("rotating",this.info)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}class PointingSelection extends dist_esm.nui{static id="pointing_selection";info={};onEnter=info=>{this.info=info};onPointerUp=info=>{selectOnCanvasPointerUp(this.editor),this.parent.transition("idle",info)};onPointerMove=info=>{if(this.editor.inputs.isDragging){if(this.editor.instanceState.isReadonly)return;this.parent.transition("translating",info)}};onDoubleClick=info=>{const{hoveredShape}=this.editor,hitShape=hoveredShape&&!this.editor.isShapeOfType(hoveredShape,"group")?hoveredShape:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(hitShape)return this.parent.transition("idle",{}),void this.parent.onDoubleClick?.({...info,target:"shape",shape:this.editor.getShape(hitShape)})};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class PointingShape extends dist_esm.nui{static id="pointing_shape";hitShape={};hitShapeForPointerUp={};didSelectOnEnter=!1;onEnter=info=>{const{selectedShapeIds,focusedGroupId,selectionRotatedPageBounds:selectionBounds,inputs:{currentPagePoint,shiftKey,altKey}}=this.editor;this.hitShape=info.shape;const outermostSelectingShape=this.editor.getOutermostSelectableShape(info.shape);if(this.editor.getShapeUtil(info.shape).onClick||outermostSelectingShape.id===focusedGroupId||selectedShapeIds.includes(outermostSelectingShape.id)||this.editor.isAncestorSelected(outermostSelectingShape.id)||selectedShapeIds.length>1&&selectionBounds?.containsPoint(currentPagePoint))return this.didSelectOnEnter=!1,void(this.hitShapeForPointerUp=outermostSelectingShape);this.didSelectOnEnter=!0,shiftKey&&!altKey?(this.editor.cancelDoubleClick(),selectedShapeIds.includes(outermostSelectingShape.id)||(this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...selectedShapeIds,outermostSelectingShape.id]))):(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([outermostSelectingShape.id]))};onPointerUp=info=>{const{zoomLevel,focusedGroupId,selectedShapeIds,inputs:{currentPagePoint,shiftKey}}=this.editor,hitShape=this.editor.getShapeAtPoint(currentPagePoint,{margin:dist_esm.wMU/zoomLevel,hitInside:!0,renderingOnly:!0})??this.hitShape,selectingShape=hitShape?this.editor.getOutermostSelectableShape(hitShape):this.hitShapeForPointerUp;if(selectingShape){const util=this.editor.getShapeUtil(selectingShape);if(util.onClick){const change=util.onClick?.(selectingShape);if(change)return this.editor.mark("shape on click"),this.editor.updateShapes([change]),void this.parent.transition("idle",info)}if(selectingShape.id===focusedGroupId)return selectedShapeIds.length>0?(this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),void this.parent.transition("idle",info)}if(!this.didSelectOnEnter){const outermostSelectableShape=this.editor.getOutermostSelectableShape(hitShape,(parent=>!selectedShapeIds.includes(parent.id)));if(selectedShapeIds.includes(outermostSelectableShape.id))if(shiftKey)this.editor.mark("deselecting on pointer up"),this.editor.deselect(selectingShape);else if(selectedShapeIds.includes(selectingShape.id)){if(1===selectedShapeIds.length&&(this.editor.isShapeOfType(selectingShape,"geo")||this.editor.isShapeOfType(selectingShape,"arrow"))){const labelGeometry=this.editor.getShapeGeometry(selectingShape).children[1];if(labelGeometry){const pointInShapeSpace=this.editor.getPointInShapeSpace(selectingShape,currentPagePoint);if(labelGeometry.bounds.containsPoint(pointInShapeSpace,0)&&labelGeometry.hitTestPoint(pointInShapeSpace))return void this.editor.batch((()=>{this.editor.mark("editing on pointer up"),this.editor.select(selectingShape.id);const util=this.editor.getShapeUtil(selectingShape);this.editor.instanceState.isReadonly&&!util.canEditInReadOnly(selectingShape)||(this.editor.setEditingShape(selectingShape.id),this.editor.setCurrentTool("select.editing_shape"))}))}}this.editor.mark("selecting on pointer up"),this.editor.select(selectingShape.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(selectingShape);else if(shiftKey){const ancestors=this.editor.getShapeAncestors(outermostSelectableShape);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.selectedShapeIds.filter((id=>!ancestors.find((a=>a.id===id)))),outermostSelectableShape.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([outermostSelectableShape.id])}this.parent.transition("idle",info)};onPointerMove=info=>{if(this.editor.inputs.isDragging){if(this.editor.instanceState.isReadonly)return;this.parent.transition("translating",info)}};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class Resizing extends dist_esm.nui{static id="resizing";info={};markId="";creationCursorOffset={x:0,y:0};editAfterComplete=!1;snapshot={};onEnter=info=>{const{isCreating=!1,editAfterComplete=!1,creationCursorOffset={x:0,y:0}}=info;this.info=info,this.parent.currentToolIdMask=info.onInteractionEnd,this.editAfterComplete=editAfterComplete,this.creationCursorOffset=creationCursorOffset,info.isCreating&&this.editor.updateInstanceState({cursor:{type:"cross",rotation:0}},{ephemeral:!0}),this.snapshot=this._createSnapshot(),this.markId=isCreating?`creating:${this.editor.onlySelectedShape.id}`:"starting resizing",isCreating||this.editor.mark(this.markId),this.handleResizeStart(),this.updateShapes()};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{this.updateShapes()};onKeyUp=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}complete(){if(this.handleResizeEnd(),this.editAfterComplete&&this.editor.onlySelectedShape)return this.editor.setEditingShape(this.editor.onlySelectedShape.id),void this.editor.setCurrentTool("select.editing_shape");this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}handleResizeStart(){const{shapeSnapshots}=this.snapshot,changes=[];shapeSnapshots.forEach((({shape})=>{const util=this.editor.getShapeUtil(shape),change=util.onResizeStart?.(shape);change&&changes.push(change)})),changes.length>0&&this.editor.updateShapes(changes)}handleResizeEnd(){const{shapeSnapshots}=this.snapshot,changes=[];shapeSnapshots.forEach((({shape})=>{const current=this.editor.getShape(shape.id),util=this.editor.getShapeUtil(shape),change=util.onResizeEnd?.(shape,current);change&&changes.push(change)})),changes.length>0&&this.editor.updateShapes(changes)}updateShapes(){const{altKey,shiftKey}=this.editor.inputs,{shapeSnapshots,selectionBounds,cursorHandleOffset,selectedShapeIds,selectionRotation,canShapesDeform}=this.snapshot,isAspectRatioLocked=shiftKey||!canShapesDeform,{ctrlKey}=this.editor.inputs,currentPagePoint=this.editor.inputs.currentPagePoint.clone().sub(cursorHandleOffset).sub(this.creationCursorOffset),originPagePoint=this.editor.inputs.originPagePoint.clone().sub(cursorHandleOffset);if(this.editor.instanceState.isGridMode&&!ctrlKey){const{gridSize}=this.editor.documentSettings;currentPagePoint.snapToGrid(gridSize)}const dragHandle=this.info.handle,scaleOriginHandle=rotateSelectionHandle(dragHandle,Math.PI);this.editor.snaps.clear();if((this.editor.user.isSnapMode?!ctrlKey:ctrlKey)&&selectionRotation%dist_esm.gc0==0){const{nudge}=this.editor.snaps.snapResize({dragDelta:dist_esm.GF3.Sub(currentPagePoint,originPagePoint),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:rotateSelectionHandle(dragHandle,selectionRotation),isAspectRatioLocked,isResizingFromCenter:altKey});currentPagePoint.add(nudge)}const scaleOriginPage=dist_esm.GF3.RotWith(altKey?selectionBounds.center:selectionBounds.getHandlePoint(scaleOriginHandle),selectionBounds.point,selectionRotation),distanceFromScaleOriginNow=dist_esm.GF3.Sub(currentPagePoint,scaleOriginPage).rot(-selectionRotation),distanceFromScaleOriginAtStart=dist_esm.GF3.Sub(originPagePoint,scaleOriginPage).rot(-selectionRotation),scale=dist_esm.GF3.DivV(distanceFromScaleOriginNow,distanceFromScaleOriginAtStart);Number.isFinite(scale.x)||(scale.x=1),Number.isFinite(scale.y)||(scale.y=1);const isXLocked="top"===dragHandle||"bottom"===dragHandle,isYLocked="left"===dragHandle||"right"===dragHandle;isAspectRatioLocked?isYLocked?scale.y=Math.abs(scale.x):isXLocked?scale.x=Math.abs(scale.y):Math.abs(scale.x)>Math.abs(scale.y)?scale.y=Math.abs(scale.x)*(scale.y<0?-1:1):scale.x=Math.abs(scale.y)*(scale.x<0?-1:1):(isXLocked&&(scale.x=1),isYLocked&&(scale.y=1)),this.info.isCreating||this.updateCursor({dragHandle,isFlippedX:scale.x<0,isFlippedY:scale.y<0,rotation:selectionRotation});for(const id of shapeSnapshots.keys()){const snapshot=shapeSnapshots.get(id);this.editor.resizeShape(id,scale,{initialShape:snapshot.shape,initialBounds:snapshot.bounds,initialPageTransform:snapshot.pageTransform,dragHandle,mode:1===selectedShapeIds.length&&id===selectedShapeIds[0]?"resize_bounds":"scale_shape",scaleOrigin:scaleOriginPage,scaleAxisRotation:selectionRotation})}}updateCursor({dragHandle,isFlippedX,isFlippedY,rotation}){const nextCursor={...this.editor.instanceState.cursor};switch(dragHandle){case"top_left":case"bottom_right":nextCursor.type="nwse-resize",isFlippedX!==isFlippedY&&(nextCursor.type="nesw-resize");break;case"top_right":case"bottom_left":nextCursor.type="nesw-resize",isFlippedX!==isFlippedY&&(nextCursor.type="nwse-resize")}nextCursor.rotation=rotation,this.editor.setCursor(nextCursor)}onExit=()=>{this.parent.currentToolIdMask=void 0,this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.snaps.clear()};_createSnapshot=()=>{const{selectedShapeIds,selectionRotation,inputs:{originPagePoint}}=this.editor,selectionBounds=this.editor.selectionRotatedPageBounds,dragHandlePoint=dist_esm.GF3.RotWith(selectionBounds.getHandlePoint(this.info.handle),selectionBounds.point,selectionRotation),cursorHandleOffset=dist_esm.GF3.Sub(originPagePoint,dragHandlePoint),shapeSnapshots=new Map;selectedShapeIds.forEach((id=>{const shape=this.editor.getShape(id);if(shape){if(shapeSnapshots.set(shape.id,this._createShapeSnapshot(shape)),this.editor.isShapeOfType(shape,"frame")&&1===selectedShapeIds.length)return;this.editor.visitDescendants(shape.id,(descendantId=>{const descendent=this.editor.getShape(descendantId);if(descendent&&(shapeSnapshots.set(descendent.id,this._createShapeSnapshot(descendent)),this.editor.isShapeOfType(descendent,"frame")))return!1}))}}));const canShapesDeform=![...shapeSnapshots.values()].some((shape=>!(0,dist_esm._G0)(shape.pageRotation,selectionRotation)||shape.isAspectRatioLocked));return{shapeSnapshots,selectionBounds,cursorHandleOffset,selectionRotation,selectedShapeIds,canShapesDeform,initialSelectionPageBounds:this.editor.selectionPageBounds}};_createShapeSnapshot=shape=>{const pageTransform=this.editor.getShapePageTransform(shape),util=this.editor.getShapeUtil(shape);return{shape,bounds:this.editor.getShapeGeometry(shape).bounds,pageTransform,pageRotation:dist_esm.yX5.Decompose(pageTransform).rotation,isAspectRatioLocked:util.isAspectRatioLocked(shape)}}}const ORDERED_SELECTION_HANDLES=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function rotateSelectionHandle(handle,rotation){rotation%=dist_esm.yoY;const numSteps=Math.round(rotation/(dist_esm.PI/4)),currentIndex=ORDERED_SELECTION_HANDLES.indexOf(handle);return ORDERED_SELECTION_HANDLES[(currentIndex+numSteps)%ORDERED_SELECTION_HANDLES.length]}class Rotating extends dist_esm.nui{static id="rotating";snapshot={};info={};markId="";onEnter=info=>{this.info=info,this.parent.currentToolIdMask=info.onInteractionEnd,this.markId="rotate start",this.editor.mark(this.markId);const snapshot=(0,dist_esm.oxh)({editor:this.editor});if(!snapshot)return this.parent.transition("idle",this.info);this.snapshot=snapshot,this.handleStart()};onExit=()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.currentToolIdMask=void 0,this.snapshot={}};onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};update=()=>{const newSelectionRotation=this._getRotationFromPointerPosition({snapToNearestDegree:!1});(0,dist_esm.ZmI)({editor:this.editor,delta:newSelectionRotation,snapshot:this.snapshot,stage:"update"}),this.editor.updateInstanceState({cursor:{type:CursorTypeMap[this.info.handle],rotation:newSelectionRotation+this.snapshot.initialSelectionRotation}})};cancel=()=>{this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)};complete=()=>{(0,dist_esm.ZmI)({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)};handleStart(){const newSelectionRotation=this._getRotationFromPointerPosition({snapToNearestDegree:!1});(0,dist_esm.ZmI)({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.updateInstanceState({cursor:{type:CursorTypeMap[this.info.handle],rotation:newSelectionRotation+this.snapshot.initialSelectionRotation}})}_getRotationFromPointerPosition({snapToNearestDegree}){const{selectionRotatedPageBounds:selectionBounds,selectionRotation,inputs:{shiftKey,currentPagePoint}}=this.editor,{initialCursorAngle,initialSelectionRotation}=this.snapshot;if(!selectionBounds)return initialSelectionRotation;let newSelectionRotation=initialSelectionRotation+(selectionBounds.center.clone().rotWith(selectionBounds.point,selectionRotation).angle(currentPagePoint)-initialCursorAngle);if(shiftKey)newSelectionRotation=(0,dist_esm.nDY)(newSelectionRotation,24);else if(snapToNearestDegree&&(newSelectionRotation=Math.round(newSelectionRotation/dist_esm.Ibj)*dist_esm.Ibj,this.editor.instanceState.isCoarsePointer)){const snappedToRightAngle=(0,dist_esm.nDY)(newSelectionRotation,4),angleToRightAngle=(0,dist_esm.CcU)(newSelectionRotation,snappedToRightAngle);Math.abs(angleToRightAngle)<(0,dist_esm.Htt)(5)&&(newSelectionRotation=snappedToRightAngle)}return newSelectionRotation-initialSelectionRotation}}class ScribbleBrushing extends dist_esm.nui{static id="scribble_brushing";hits=new Set;size=0;scribble={};initialSelectedShapeIds=new Set;newlySelectedShapeIds=new Set;onEnter=()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.selectedShapeIds:[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear(),this.startScribble(),this.updateScribbleSelection(!0),requestAnimationFrame((()=>{this.editor.updateInstanceState({brush:null})}))};onExit=()=>{this.scribble.stop()};onPointerMove=()=>{this.updateScribbleSelection(!0)};onPointerUp=()=>{this.complete()};onKeyDown=()=>{this.updateScribbleSelection(!1)};onKeyUp=()=>{this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing",{})};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};startScribble=()=>{this.scribble.tick&&this.editor.off("tick",this.scribble?.tick),this.scribble=new ScribbleManager({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),this.editor.on("tick",this.scribble.tick)};pushPointToScribble=()=>{const{x,y}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(x,y)};onScribbleUpdate=scribble=>{this.editor.updateInstanceState({scribble})};onScribbleComplete=()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})};updateScribbleSelection(addPoint){const{zoomLevel,currentPageShapes,inputs:{shiftKey,originPagePoint,previousPagePoint,currentPagePoint}}=this.editor,{newlySelectedShapeIds,initialSelectedShapeIds}=this;addPoint&&this.pushPointToScribble();const shapes=currentPageShapes;let shape,geometry,A,B;for(let i=0,n=shapes.length;i<n;i++)if(shape=shapes[i],geometry=this.editor.getShapeGeometry(shape),!(this.editor.isShapeOfType(shape,"group")||newlySelectedShapeIds.has(shape.id)||this.editor.isShapeOrAncestorLocked(shape))){if(this.editor.isShapeOfType(shape,"frame")){const point=this.editor.getPointInShapeSpace(shape,originPagePoint);if(geometry.bounds.containsPoint(point))continue}if(A=this.editor.getPointInShapeSpace(shape,previousPagePoint),B=this.editor.getPointInShapeSpace(shape,currentPagePoint),geometry.hitTestLineSegment(A,B,dist_esm.wMU/zoomLevel)){const outermostShape=this.editor.getOutermostSelectableShape(shape),pageMask=this.editor.getShapeMask(outermostShape.id);if(pageMask){if(null!==(0,dist_esm.GcE)(previousPagePoint,currentPagePoint,pageMask)){if(!(0,dist_esm.Ofd)(currentPagePoint,pageMask))continue}}newlySelectedShapeIds.add(outermostShape.id)}}this.editor.setSelectedShapes([...new Set(shiftKey?[...newlySelectedShapeIds,...initialSelectedShapeIds]:[...newlySelectedShapeIds])],{squashing:!0})}complete(){this.parent.transition("idle",{})}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds],{squashing:!0}),this.parent.transition("idle",{})}}class DragAndDropManager{constructor(editor){this.editor=editor,editor.disposables.add(this.dispose)}prevDroppingShapeId=null;droppingNodeTimer=null;first=!0;updateDroppingNode(movingShapes,cb){this.first&&(this.prevDroppingShapeId=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,movingShapes)?.id??null,this.first=!1),null===this.droppingNodeTimer?this.setDragTimer(movingShapes,1e3,cb):this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(movingShapes,100,cb))}setDragTimer(movingShapes,duration,cb){this.droppingNodeTimer=setTimeout((()=>{this.editor.batch((()=>{this.handleDrag(this.editor.inputs.currentPagePoint,movingShapes,cb)})),this.droppingNodeTimer=null}),duration)}handleDrag(point,movingShapes,cb){movingShapes=(0,dist_esm.oA$)(movingShapes.map((shape=>this.editor.getShape(shape.id))));const nextDroppingShapeId=this.editor.getDroppingOverShape(point,movingShapes)?.id??null;if(nextDroppingShapeId===this.prevDroppingShapeId)return;const{prevDroppingShapeId}=this,prevDroppingShape=prevDroppingShapeId&&this.editor.getShape(prevDroppingShapeId),nextDroppingShape=nextDroppingShapeId&&this.editor.getShape(nextDroppingShapeId);if(prevDroppingShape&&this.editor.getShapeUtil(prevDroppingShape).onDragShapesOut?.(prevDroppingShape,movingShapes),nextDroppingShape){const res=this.editor.getShapeUtil(nextDroppingShape).onDragShapesOver?.(nextDroppingShape,movingShapes);res&&res.shouldHint&&this.editor.setHintingShapes([nextDroppingShape.id])}else this.editor.setHintingShapes([]);cb?.(),this.prevDroppingShapeId=nextDroppingShapeId}dropShapes(shapes){const{prevDroppingShapeId}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,shapes),prevDroppingShapeId){const shape=this.editor.getShape(prevDroppingShapeId);if(!shape)return;this.editor.getShapeUtil(shape).onDropShapesOver?.(shape,shapes)}}clear(){this.prevDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}dispose=()=>{this.clear()}}class Translating extends dist_esm.nui{static id="translating";info={};selectionSnapshot={};snapshot={};markId="";isCloning=!1;isCreating=!1;editAfterComplete=!1;dragAndDropManager=new DragAndDropManager(this.editor);onEnter=info=>{const{isCreating=!1,editAfterComplete=!1}=info;this.info=info,this.parent.currentToolIdMask=info.onInteractionEnd,this.isCreating=isCreating,this.editAfterComplete=editAfterComplete,this.markId=isCreating?`creating:${this.editor.onlySelectedShape.id}`:"translating",this.editor.mark(this.markId),this.isCloning=!1,this.info=info,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=getTranslatingSnapshot(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes(),this.editor.on("tick",this.updateParent)):this.startCloning()};onExit=()=>{this.parent.currentToolIdMask=void 0,this.editor.off("tick",this.updateParent),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.dragAndDropManager.clear()};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{!this.editor.inputs.altKey||this.isCloning?this.updateShapes():this.startCloning()};onKeyUp=()=>{this.editor.inputs.altKey||!this.isCloning?this.updateShapes():this.stopCloning()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.selectedShapeIds)),this.snapshot=getTranslatingSnapshot(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}updateParent=()=>{const{snapshot}=this;this.dragAndDropManager.updateDroppingNode(snapshot.movingShapes,this.updateParentTransforms)};reset(){this.editor.bailToMark(this.markId)}complete(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd);else if(this.editAfterComplete){const onlySelected=this.editor.onlySelectedShape;onlySelected&&(this.editor.setEditingShape(onlySelected.id),this.editor.setCurrentTool("select.editing_shape"))}else this.parent.transition("idle",{})}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes}=this.snapshot,changes=[];movingShapes.forEach((shape=>{const util=this.editor.getShapeUtil(shape),change=util.onTranslateStart?.(shape);change&&changes.push(change)})),changes.length>0&&this.editor.updateShapes(changes),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes}=this.snapshot,changes=[];movingShapes.forEach((shape=>{const current=this.editor.getShape(shape.id),util=this.editor.getShapeUtil(shape),change=util.onTranslateEnd?.(shape,current);change&&changes.push(change)})),changes.length>0&&this.editor.updateShapes(changes)}handleChange(){const{movingShapes}=this.snapshot,changes=[];movingShapes.forEach((shape=>{const current=this.editor.getShape(shape.id),util=this.editor.getShapeUtil(shape),change=util.onTranslate?.(shape,current);change&&changes.push(change)})),changes.length>0&&this.editor.updateShapes(changes)}updateShapes(){const{snapshot}=this;this.dragAndDropManager.updateDroppingNode(snapshot.movingShapes,this.updateParentTransforms),function moveShapesToPoint({editor,shapeSnapshots:snapshots,averagePagePoint,initialSelectionPageBounds,initialSelectionSnapPoints}){const{inputs,instanceState:{isGridMode},documentSettings:{gridSize}}=editor,delta=dist_esm.GF3.Sub(inputs.currentPagePoint,inputs.originPagePoint),flatten=editor.inputs.shiftKey?Math.abs(delta.x)<Math.abs(delta.y)?"x":"y":null;"x"===flatten?delta.x=0:"y"===flatten&&(delta.y=0);editor.snaps.clear();if((editor.user.isSnapMode?!inputs.ctrlKey:inputs.ctrlKey)&&editor.inputs.pointerVelocity.len()<.5){const{nudge}=editor.snaps.snapTranslate({dragDelta:delta,initialSelectionPageBounds,lockedAxis:flatten,initialSelectionSnapPoints});delta.add(nudge)}const averageSnappedPoint=dist_esm.GF3.Add(averagePagePoint,delta);isGridMode&&!inputs.ctrlKey&&averageSnappedPoint.snapToGrid(gridSize);const averageSnap=dist_esm.GF3.Sub(averageSnappedPoint,averagePagePoint);editor.updateShapes((0,dist_esm.oA$)(snapshots.map((({shape,pagePoint,parentTransform})=>{const newPagePoint=dist_esm.GF3.Add(pagePoint,averageSnap),newLocalPoint=parentTransform?dist_esm.yX5.applyToPoint(parentTransform,newPagePoint):newPagePoint;return{id:shape.id,type:shape.type,x:newLocalPoint.x,y:newLocalPoint.y}}))),{squashing:!0})}({editor:this.editor,shapeSnapshots:snapshot.shapeSnapshots,averagePagePoint:snapshot.averagePagePoint,initialSelectionPageBounds:snapshot.initialPageBounds,initialSelectionSnapPoints:snapshot.initialSnapPoints}),this.handleChange()}updateParentTransforms=()=>{const{editor,snapshot:{shapeSnapshots}}=this,movingShapes=[];shapeSnapshots.forEach((shapeSnapshot=>{const shape=editor.getShape(shapeSnapshot.shape.id);if(!shape)return null;movingShapes.push(shape);const parentTransform=(0,dist_esm.r5k)(shape.parentId)?null:dist_esm.yX5.Inverse(editor.getShapePageTransform(shape.parentId));shapeSnapshot.parentTransform=parentTransform}))}}function getTranslatingSnapshot(editor){const movingShapes=[],pagePoints=[],shapeSnapshots=(0,dist_esm.oA$)(editor.selectedShapeIds.map((id=>{const shape=editor.getShape(id);if(!shape)return null;movingShapes.push(shape);const pagePoint=editor.getShapePageTransform(id).point();if(!pagePoint)return null;pagePoints.push(pagePoint);return{shape,pagePoint,parentTransform:dist_esm.ezX.isId(shape.parentId)?null:dist_esm.yX5.Inverse(editor.getShapePageTransform(shape.parentId))}})));return{averagePagePoint:dist_esm.GF3.Average(pagePoints),movingShapes,shapeSnapshots,initialPageBounds:editor.selectionPageBounds,initialSnapPoints:1===editor.selectedShapeIds.length?editor.snaps.snapPointsCache.get(editor.selectedShapeIds[0]):editor.selectionPageBounds?editor.selectionPageBounds.snapPoints.map(((p,i)=>({id:"selection:"+i,x:p.x,y:p.y}))):[]}}class SelectTool extends dist_esm.nui{static id="select";static initial="idle";static children=()=>[Crop,Cropping,SelectTool_children_Idle_Idle,PointingCanvas,PointingShape,Translating,Brushing,ScribbleBrushing,PointingCropHandle,PointingSelection,PointingResizeHandle,EditingShape,Resizing,Rotating,PointingRotateHandle,PointingHandle,DraggingHandle];onExit=()=>{this.editor.currentPageState.editingShapeId&&this.editor.setEditingShape(null)}}class ZoomTool_children_Idle_Idle extends dist_esm.nui{static id="idle";info={};onEnter=info=>{this.info=info};onPointerDown=()=>{this.parent.transition("pointing",this.info)}}class ZoomTool_children_Pointing_Pointing extends dist_esm.nui{static id="pointing";info={};onEnter=info=>{this.info=info};onPointerUp=()=>{this.complete()};onPointerMove=()=>{this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)};onCancel=()=>{this.cancel()};complete(){const{currentScreenPoint}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(currentScreenPoint,{duration:220}):this.editor.zoomIn(currentScreenPoint,{duration:220}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}class ZoomBrushing extends dist_esm.nui{static id="zoom_brushing";info={};zoomBrush=new dist_esm.NoK;onEnter=info=>{this.info=info,this.update()};onExit=()=>{this.editor.updateInstanceState({zoomBrush:null})};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};update(){const{inputs:{originPagePoint,currentPagePoint}}=this.editor;this.zoomBrush.setTo(dist_esm.NoK.FromPoints([originPagePoint,currentPagePoint])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush}=this,threshold=8/this.editor.zoomLevel;if(zoomBrush.width<threshold&&zoomBrush.height<threshold){const point=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(point,{duration:220}):this.editor.zoomIn(point,{duration:220})}else{const zoomLevel=this.editor.inputs.altKey?this.editor.zoomLevel/2:void 0;this.editor.zoomToBounds(zoomBrush,zoomLevel,{duration:220})}this.parent.transition("idle",this.info)}}class ZoomTool extends dist_esm.nui{static id="zoom";static initial="idle";static children=()=>[ZoomTool_children_Idle_Idle,ZoomBrushing,ZoomTool_children_Pointing_Pointing];info={};onEnter=info=>{this.info=info,this.currentToolIdMask=info.onInteractionEnd,this.updateCursor()};onExit=()=>{this.currentToolIdMask=void 0,this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.currentToolIdMask=void 0};onKeyDown=()=>{this.updateCursor()};onKeyUp=info=>{this.updateCursor(),"KeyZ"===info.code&&this.complete()};onInterrupt=()=>{this.complete()};complete(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select",{})}updateCursor(){this.editor.inputs.altKey?this.editor.updateInstanceState({cursor:{type:"zoom-out",rotation:0}},{ephemeral:!0}):this.editor.updateInstanceState({cursor:{type:"zoom-in",rotation:0}},{ephemeral:!0})}}const defaultTools=[EraserTool,HandTool,LaserTool,ZoomTool,SelectTool];var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),react_use_layout_effect_dist=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs"),react_visually_hidden_dist=__webpack_require__("./node_modules/@radix-ui/react-visually-hidden/dist/index.mjs");const[$054eb8030ebde76e$var$Collection,$054eb8030ebde76e$var$useCollection,$054eb8030ebde76e$var$createCollectionScope]=(0,react_collection_dist.B)("Toast"),[$054eb8030ebde76e$var$createToastContext,$054eb8030ebde76e$export$8a359da18fbc9073]=(0,react_context_dist.b)("Toast",[$054eb8030ebde76e$var$createCollectionScope]),[$054eb8030ebde76e$var$ToastProviderProvider,$054eb8030ebde76e$var$useToastProviderContext]=$054eb8030ebde76e$var$createToastContext("ToastProvider"),$054eb8030ebde76e$export$f5d03d415824e0e=props=>{const{__scopeToast,label="Notification",duration=5e3,swipeDirection="right",swipeThreshold=50,children}=props,[viewport,setViewport]=(0,react.useState)(null),[toastCount,setToastCount]=(0,react.useState)(0),isFocusedToastEscapeKeyDownRef=(0,react.useRef)(!1),isClosePausedRef=(0,react.useRef)(!1);return(0,react.createElement)($054eb8030ebde76e$var$Collection.Provider,{scope:__scopeToast},(0,react.createElement)($054eb8030ebde76e$var$ToastProviderProvider,{scope:__scopeToast,label,duration,swipeDirection,swipeThreshold,toastCount,viewport,onViewportChange:setViewport,onToastAdd:(0,react.useCallback)((()=>setToastCount((prevCount=>prevCount+1))),[]),onToastRemove:(0,react.useCallback)((()=>setToastCount((prevCount=>prevCount-1))),[]),isFocusedToastEscapeKeyDownRef,isClosePausedRef},children))};$054eb8030ebde76e$export$f5d03d415824e0e.propTypes={label(props){if(props.label&&"string"==typeof props.label&&!props.label.trim()){return new Error("Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.")}return null}};const $054eb8030ebde76e$var$VIEWPORT_DEFAULT_HOTKEY=["F8"],$054eb8030ebde76e$export$6192c2425ecfd989=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,hotkey=$054eb8030ebde76e$var$VIEWPORT_DEFAULT_HOTKEY,label="Notifications ({hotkey})",...viewportProps}=props,context=$054eb8030ebde76e$var$useToastProviderContext("ToastViewport",__scopeToast),getItems=$054eb8030ebde76e$var$useCollection(__scopeToast),wrapperRef=(0,react.useRef)(null),headFocusProxyRef=(0,react.useRef)(null),tailFocusProxyRef=(0,react.useRef)(null),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref,context.onViewportChange),hotkeyLabel=hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),hasToasts=context.toastCount>0;(0,react.useEffect)((()=>{const handleKeyDown=event=>{var _ref$current;hotkey.every((key=>event[key]||event.code===key))&&(null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.focus())};return document.addEventListener("keydown",handleKeyDown),()=>document.removeEventListener("keydown",handleKeyDown)}),[hotkey]),(0,react.useEffect)((()=>{const wrapper=wrapperRef.current,viewport=ref.current;if(hasToasts&&wrapper&&viewport){const handlePause=()=>{if(!context.isClosePausedRef.current){const pauseEvent=new CustomEvent("toast.viewportPause");viewport.dispatchEvent(pauseEvent),context.isClosePausedRef.current=!0}},handleResume=()=>{if(context.isClosePausedRef.current){const resumeEvent=new CustomEvent("toast.viewportResume");viewport.dispatchEvent(resumeEvent),context.isClosePausedRef.current=!1}},handleFocusOutResume=event=>{!wrapper.contains(event.relatedTarget)&&handleResume()},handlePointerLeaveResume=()=>{wrapper.contains(document.activeElement)||handleResume()};return wrapper.addEventListener("focusin",handlePause),wrapper.addEventListener("focusout",handleFocusOutResume),wrapper.addEventListener("pointermove",handlePause),wrapper.addEventListener("pointerleave",handlePointerLeaveResume),window.addEventListener("blur",handlePause),window.addEventListener("focus",handleResume),()=>{wrapper.removeEventListener("focusin",handlePause),wrapper.removeEventListener("focusout",handleFocusOutResume),wrapper.removeEventListener("pointermove",handlePause),wrapper.removeEventListener("pointerleave",handlePointerLeaveResume),window.removeEventListener("blur",handlePause),window.removeEventListener("focus",handleResume)}}}),[hasToasts,context.isClosePausedRef]);const getSortedTabbableCandidates=(0,react.useCallback)((({tabbingDirection})=>{const tabbableCandidates=getItems().map((toastItem=>{const toastNode=toastItem.ref.current,toastTabbableCandidates=[toastNode,...$054eb8030ebde76e$var$getTabbableCandidates(toastNode)];return"forwards"===tabbingDirection?toastTabbableCandidates:toastTabbableCandidates.reverse()}));return("forwards"===tabbingDirection?tabbableCandidates.reverse():tabbableCandidates).flat()}),[getItems]);return(0,react.useEffect)((()=>{const viewport=ref.current;if(viewport){const handleKeyDown=event=>{const isMetaKey=event.altKey||event.ctrlKey||event.metaKey;if("Tab"===event.key&&!isMetaKey){const focusedElement=document.activeElement,isTabbingBackwards=event.shiftKey;var _headFocusProxyRef$cu;if(event.target===viewport&&isTabbingBackwards)return void(null===(_headFocusProxyRef$cu=headFocusProxyRef.current)||void 0===_headFocusProxyRef$cu||_headFocusProxyRef$cu.focus());const sortedCandidates=getSortedTabbableCandidates({tabbingDirection:isTabbingBackwards?"backwards":"forwards"}),index=sortedCandidates.findIndex((candidate=>candidate===focusedElement));var _headFocusProxyRef$cu2,_tailFocusProxyRef$cu;if($054eb8030ebde76e$var$focusFirst(sortedCandidates.slice(index+1)))event.preventDefault();else isTabbingBackwards?null===(_headFocusProxyRef$cu2=headFocusProxyRef.current)||void 0===_headFocusProxyRef$cu2||_headFocusProxyRef$cu2.focus():null===(_tailFocusProxyRef$cu=tailFocusProxyRef.current)||void 0===_tailFocusProxyRef$cu||_tailFocusProxyRef$cu.focus()}};return viewport.addEventListener("keydown",handleKeyDown),()=>viewport.removeEventListener("keydown",handleKeyDown)}}),[getItems,getSortedTabbableCandidates]),(0,react.createElement)(react_dismissable_layer_dist.I0,{ref:wrapperRef,role:"region","aria-label":label.replace("{hotkey}",hotkeyLabel),tabIndex:-1,style:{pointerEvents:hasToasts?void 0:"none"}},hasToasts&&(0,react.createElement)($054eb8030ebde76e$var$FocusProxy,{ref:headFocusProxyRef,onFocusFromOutsideViewport:()=>{$054eb8030ebde76e$var$focusFirst(getSortedTabbableCandidates({tabbingDirection:"forwards"}))}}),(0,react.createElement)($054eb8030ebde76e$var$Collection.Slot,{scope:__scopeToast},(0,react.createElement)(react_primitive_dist.WV.ol,(0,esm_extends.Z)({tabIndex:-1},viewportProps,{ref:composedRefs}))),hasToasts&&(0,react.createElement)($054eb8030ebde76e$var$FocusProxy,{ref:tailFocusProxyRef,onFocusFromOutsideViewport:()=>{$054eb8030ebde76e$var$focusFirst(getSortedTabbableCandidates({tabbingDirection:"backwards"}))}}))})),$054eb8030ebde76e$var$FocusProxy=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,onFocusFromOutsideViewport,...proxyProps}=props,context=$054eb8030ebde76e$var$useToastProviderContext("ToastFocusProxy",__scopeToast);return(0,react.createElement)(react_visually_hidden_dist.T,(0,esm_extends.Z)({"aria-hidden":!0,tabIndex:0},proxyProps,{ref:forwardedRef,style:{position:"fixed"},onFocus:event=>{var _context$viewport;const prevFocusedElement=event.relatedTarget;!(null!==(_context$viewport=context.viewport)&&void 0!==_context$viewport&&_context$viewport.contains(prevFocusedElement))&&onFocusFromOutsideViewport()}}))})),$054eb8030ebde76e$export$8d8dc7d5f743331b=(0,react.forwardRef)(((props,forwardedRef)=>{const{forceMount,open:openProp,defaultOpen,onOpenChange,...toastProps}=props,[open=!0,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)(react_presence_dist.z,{present:forceMount||open},(0,react.createElement)($054eb8030ebde76e$var$ToastImpl,(0,esm_extends.Z)({open},toastProps,{ref:forwardedRef,onClose:()=>setOpen(!1),onPause:(0,react_use_callback_ref_dist.W)(props.onPause),onResume:(0,react_use_callback_ref_dist.W)(props.onResume),onSwipeStart:(0,dist.M)(props.onSwipeStart,(event=>{event.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:(0,dist.M)(props.onSwipeMove,(event=>{const{x,y}=event.detail.delta;event.currentTarget.setAttribute("data-swipe","move"),event.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),event.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)})),onSwipeCancel:(0,dist.M)(props.onSwipeCancel,(event=>{event.currentTarget.setAttribute("data-swipe","cancel"),event.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),event.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),event.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),event.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:(0,dist.M)(props.onSwipeEnd,(event=>{const{x,y}=event.detail.delta;event.currentTarget.setAttribute("data-swipe","end"),event.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),event.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),event.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),event.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),setOpen(!1)}))})))})),[$054eb8030ebde76e$var$ToastInteractiveProvider,$054eb8030ebde76e$var$useToastInteractiveContext]=$054eb8030ebde76e$var$createToastContext("Toast",{onClose(){}}),$054eb8030ebde76e$var$ToastImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,type="foreground",duration:durationProp,open,onClose,onEscapeKeyDown,onPause,onResume,onSwipeStart,onSwipeMove,onSwipeCancel,onSwipeEnd,...toastProps}=props,context=$054eb8030ebde76e$var$useToastProviderContext("Toast",__scopeToast),[node1,setNode]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setNode(node))),pointerStartRef=(0,react.useRef)(null),swipeDeltaRef=(0,react.useRef)(null),duration1=durationProp||context.duration,closeTimerStartTimeRef=(0,react.useRef)(0),closeTimerRemainingTimeRef=(0,react.useRef)(duration1),closeTimerRef=(0,react.useRef)(0),{onToastAdd,onToastRemove}=context,handleClose=(0,react_use_callback_ref_dist.W)((()=>{var _context$viewport2;(null==node1?void 0:node1.contains(document.activeElement))&&(null===(_context$viewport2=context.viewport)||void 0===_context$viewport2||_context$viewport2.focus()),onClose()})),startTimer=(0,react.useCallback)((duration=>{duration&&duration!==1/0&&(window.clearTimeout(closeTimerRef.current),closeTimerStartTimeRef.current=(new Date).getTime(),closeTimerRef.current=window.setTimeout(handleClose,duration))}),[handleClose]);(0,react.useEffect)((()=>{const viewport=context.viewport;if(viewport){const handleResume=()=>{startTimer(closeTimerRemainingTimeRef.current),null==onResume||onResume()},handlePause=()=>{const elapsedTime=(new Date).getTime()-closeTimerStartTimeRef.current;closeTimerRemainingTimeRef.current=closeTimerRemainingTimeRef.current-elapsedTime,window.clearTimeout(closeTimerRef.current),null==onPause||onPause()};return viewport.addEventListener("toast.viewportPause",handlePause),viewport.addEventListener("toast.viewportResume",handleResume),()=>{viewport.removeEventListener("toast.viewportPause",handlePause),viewport.removeEventListener("toast.viewportResume",handleResume)}}}),[context.viewport,duration1,onPause,onResume,startTimer]),(0,react.useEffect)((()=>{open&&!context.isClosePausedRef.current&&startTimer(duration1)}),[open,duration1,context.isClosePausedRef,startTimer]),(0,react.useEffect)((()=>(onToastAdd(),()=>onToastRemove())),[onToastAdd,onToastRemove]);const announceTextContent=(0,react.useMemo)((()=>node1?$054eb8030ebde76e$var$getAnnounceTextContent(node1):null),[node1]);return context.viewport?(0,react.createElement)(react.Fragment,null,announceTextContent&&(0,react.createElement)($054eb8030ebde76e$var$ToastAnnounce,{__scopeToast,role:"status","aria-live":"foreground"===type?"assertive":"polite","aria-atomic":!0},announceTextContent),(0,react.createElement)($054eb8030ebde76e$var$ToastInteractiveProvider,{scope:__scopeToast,onClose:handleClose},(0,react_dom.createPortal)((0,react.createElement)($054eb8030ebde76e$var$Collection.ItemSlot,{scope:__scopeToast},(0,react.createElement)(react_dismissable_layer_dist.fC,{asChild:!0,onEscapeKeyDown:(0,dist.M)(onEscapeKeyDown,(()=>{context.isFocusedToastEscapeKeyDownRef.current||handleClose(),context.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,react.createElement)(react_primitive_dist.WV.li,(0,esm_extends.Z)({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":open?"open":"closed","data-swipe-direction":context.swipeDirection},toastProps,{ref:composedRefs,style:{userSelect:"none",touchAction:"none",...props.style},onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{"Escape"===event.key&&(null==onEscapeKeyDown||onEscapeKeyDown(event.nativeEvent),event.nativeEvent.defaultPrevented||(context.isFocusedToastEscapeKeyDownRef.current=!0,handleClose()))})),onPointerDown:(0,dist.M)(props.onPointerDown,(event=>{0===event.button&&(pointerStartRef.current={x:event.clientX,y:event.clientY})})),onPointerMove:(0,dist.M)(props.onPointerMove,(event=>{if(!pointerStartRef.current)return;const x=event.clientX-pointerStartRef.current.x,y=event.clientY-pointerStartRef.current.y,hasSwipeMoveStarted=Boolean(swipeDeltaRef.current),isHorizontalSwipe=["left","right"].includes(context.swipeDirection),clamp=["left","up"].includes(context.swipeDirection)?Math.min:Math.max,clampedX=isHorizontalSwipe?clamp(0,x):0,clampedY=isHorizontalSwipe?0:clamp(0,y),moveStartBuffer="touch"===event.pointerType?10:2,delta={x:clampedX,y:clampedY},eventDetail={originalEvent:event,delta};hasSwipeMoveStarted?(swipeDeltaRef.current=delta,$054eb8030ebde76e$var$handleAndDispatchCustomEvent("toast.swipeMove",onSwipeMove,eventDetail,{discrete:!1})):$054eb8030ebde76e$var$isDeltaInDirection(delta,context.swipeDirection,moveStartBuffer)?(swipeDeltaRef.current=delta,$054eb8030ebde76e$var$handleAndDispatchCustomEvent("toast.swipeStart",onSwipeStart,eventDetail,{discrete:!1}),event.target.setPointerCapture(event.pointerId)):(Math.abs(x)>moveStartBuffer||Math.abs(y)>moveStartBuffer)&&(pointerStartRef.current=null)})),onPointerUp:(0,dist.M)(props.onPointerUp,(event1=>{const delta=swipeDeltaRef.current,target=event1.target;if(target.hasPointerCapture(event1.pointerId)&&target.releasePointerCapture(event1.pointerId),swipeDeltaRef.current=null,pointerStartRef.current=null,delta){const toast=event1.currentTarget,eventDetail={originalEvent:event1,delta};$054eb8030ebde76e$var$isDeltaInDirection(delta,context.swipeDirection,context.swipeThreshold)?$054eb8030ebde76e$var$handleAndDispatchCustomEvent("toast.swipeEnd",onSwipeEnd,eventDetail,{discrete:!0}):$054eb8030ebde76e$var$handleAndDispatchCustomEvent("toast.swipeCancel",onSwipeCancel,eventDetail,{discrete:!0}),toast.addEventListener("click",(event=>event.preventDefault()),{once:!0})}}))})))),context.viewport))):null}));$054eb8030ebde76e$var$ToastImpl.propTypes={type(props){if(props.type&&!["foreground","background"].includes(props.type)){return new Error("Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.")}return null}};const $054eb8030ebde76e$var$ToastAnnounce=props=>{const{__scopeToast,children,...announceProps}=props,context=$054eb8030ebde76e$var$useToastProviderContext("Toast",__scopeToast),[renderAnnounceText,setRenderAnnounceText]=(0,react.useState)(!1),[isAnnounced,setIsAnnounced]=(0,react.useState)(!1);return function $054eb8030ebde76e$var$useNextFrame(callback=(()=>{})){const fn=(0,react_use_callback_ref_dist.W)(callback);(0,react_use_layout_effect_dist.b)((()=>{let raf1=0,raf2=0;return raf1=window.requestAnimationFrame((()=>raf2=window.requestAnimationFrame(fn))),()=>{window.cancelAnimationFrame(raf1),window.cancelAnimationFrame(raf2)}}),[fn])}((()=>setRenderAnnounceText(!0))),(0,react.useEffect)((()=>{const timer=window.setTimeout((()=>setIsAnnounced(!0)),1e3);return()=>window.clearTimeout(timer)}),[]),isAnnounced?null:(0,react.createElement)(react_portal_dist.h,{asChild:!0},(0,react.createElement)(react_visually_hidden_dist.T,announceProps,renderAnnounceText&&(0,react.createElement)(react.Fragment,null,context.label," ",children)))},$054eb8030ebde76e$export$16d42d7c29b95a4=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,...titleProps}=props;return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},titleProps,{ref:forwardedRef}))})),$054eb8030ebde76e$export$ecddd96c53621d9a=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,...descriptionProps}=props;return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({},descriptionProps,{ref:forwardedRef}))})),$054eb8030ebde76e$export$3019feecfda683d2=(0,react.forwardRef)(((props,forwardedRef)=>{const{altText,...actionProps}=props;return altText?(0,react.createElement)($054eb8030ebde76e$var$ToastAnnounceExclude,{altText,asChild:!0},(0,react.createElement)($054eb8030ebde76e$export$811e70f61c205839,(0,esm_extends.Z)({},actionProps,{ref:forwardedRef}))):null}));$054eb8030ebde76e$export$3019feecfda683d2.propTypes={altText:props=>props.altText?null:new Error("Missing prop `altText` expected on `ToastAction`")};const $054eb8030ebde76e$export$811e70f61c205839=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,...closeProps}=props,interactiveContext=$054eb8030ebde76e$var$useToastInteractiveContext("ToastClose",__scopeToast);return(0,react.createElement)($054eb8030ebde76e$var$ToastAnnounceExclude,{asChild:!0},(0,react.createElement)(react_primitive_dist.WV.button,(0,esm_extends.Z)({type:"button"},closeProps,{ref:forwardedRef,onClick:(0,dist.M)(props.onClick,interactiveContext.onClose)})))})),$054eb8030ebde76e$var$ToastAnnounceExclude=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeToast,altText,...announceExcludeProps}=props;return(0,react.createElement)(react_primitive_dist.WV.div,(0,esm_extends.Z)({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":altText||void 0},announceExcludeProps,{ref:forwardedRef}))}));function $054eb8030ebde76e$var$getAnnounceTextContent(container){const textContent=[];return Array.from(container.childNodes).forEach((node=>{if(node.nodeType===node.TEXT_NODE&&node.textContent&&textContent.push(node.textContent),function $054eb8030ebde76e$var$isHTMLElement(node){return node.nodeType===node.ELEMENT_NODE}(node)){const isHidden=node.ariaHidden||node.hidden||"none"===node.style.display,isExcluded=""===node.dataset.radixToastAnnounceExclude;if(!isHidden)if(isExcluded){const altText=node.dataset.radixToastAnnounceAlt;altText&&textContent.push(altText)}else textContent.push(...$054eb8030ebde76e$var$getAnnounceTextContent(node))}})),textContent}function $054eb8030ebde76e$var$handleAndDispatchCustomEvent(name,handler,detail,{discrete}){const currentTarget=detail.originalEvent.currentTarget,event=new CustomEvent(name,{bubbles:!0,cancelable:!0,detail});handler&&currentTarget.addEventListener(name,handler,{once:!0}),discrete?(0,react_primitive_dist.jH)(currentTarget,event):currentTarget.dispatchEvent(event)}const $054eb8030ebde76e$var$isDeltaInDirection=(delta,direction,threshold=0)=>{const deltaX=Math.abs(delta.x),deltaY=Math.abs(delta.y),isDeltaX=deltaX>deltaY;return"left"===direction||"right"===direction?isDeltaX&&deltaX>threshold:!isDeltaX&&deltaY>threshold};function $054eb8030ebde76e$var$getTabbableCandidates(container){const nodes=[],walker=document.createTreeWalker(container,NodeFilter.SHOW_ELEMENT,{acceptNode:node=>{const isHiddenInput="INPUT"===node.tagName&&"hidden"===node.type;return node.disabled||node.hidden||isHiddenInput?NodeFilter.FILTER_SKIP:node.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;walker.nextNode();)nodes.push(walker.currentNode);return nodes}function $054eb8030ebde76e$var$focusFirst(candidates){const previouslyFocusedElement=document.activeElement;return candidates.some((candidate=>candidate===previouslyFocusedElement||(candidate.focus(),document.activeElement!==previouslyFocusedElement)))}const $054eb8030ebde76e$export$be92b6f5f03c0fe9=$054eb8030ebde76e$export$8d8dc7d5f743331b,$054eb8030ebde76e$export$f99233281efd08a0=$054eb8030ebde76e$export$16d42d7c29b95a4,$054eb8030ebde76e$export$393edc798c47379d=$054eb8030ebde76e$export$ecddd96c53621d9a,$054eb8030ebde76e$export$e19cd5f9376f8cee=$054eb8030ebde76e$export$3019feecfda683d2,$054eb8030ebde76e$export$f39c2d165cd861fe=$054eb8030ebde76e$export$811e70f61c205839,version="2.0.0-alpha.17";let defaultEditorAssetUrls={fonts:{draw:`https://unpkg.com/@tldraw/assets@${version}/fonts/Shantell_Sans-Normal-SemiBold.woff2`,serif:`https://unpkg.com/@tldraw/assets@${version}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`https://unpkg.com/@tldraw/assets@${version}/fonts/IBMPlexSans-Medium.woff2`,monospace:`https://unpkg.com/@tldraw/assets@${version}/fonts/IBMPlexMono-Medium.woff2`}};let defaultUiAssetUrls={...defaultEditorAssetUrls,icons:Object.fromEntries(["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","status-online","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"].map((name=>[name,`https://unpkg.com/@tldraw/assets@${version}/icons/icon/${name}.svg`]))),translations:Object.fromEntries(dist_esm.a2c.map((lang=>[lang.locale,`https://unpkg.com/@tldraw/assets@${version}/translations/${lang.locale}.json`]))),embedIcons:Object.fromEntries(dist_esm.Lu5.map((def=>[def.type,`https://unpkg.com/@tldraw/assets@${version}/embed-icons/${def.type}.png`])))};function useDefaultUiAssetUrlsWithOverrides(overrides){return overrides?{fonts:Object.assign({...defaultUiAssetUrls.fonts},{...overrides?.fonts}),icons:Object.assign({...defaultUiAssetUrls.icons},{...overrides?.icons}),embedIcons:Object.assign({...defaultUiAssetUrls.embedIcons},{...overrides?.embedIcons}),translations:Object.assign({...defaultUiAssetUrls.translations},{...overrides?.translations})}:defaultUiAssetUrls}const Input=react.forwardRef((function Input2({className,label,icon,iconLeft,autoselect=!1,autofocus=!1,defaultValue,placeholder,onComplete,onValueChange,onCancel,onBlur,shouldManuallyMaintainScrollPositionWhenFocused=!1,children,value},ref){const editor=(0,dist_esm.jE2)(),rInputRef=react.useRef(null);react.useImperativeHandle(ref,(()=>rInputRef.current));const msg=useTranslation_useTranslation(),rInitialValue=react.useRef(defaultValue??""),rCurrentValue=react.useRef(defaultValue??""),[isFocused,setIsFocused]=react.useState(!1),handleFocus=react.useCallback((e=>{setIsFocused(!0);const elm=e.currentTarget;rCurrentValue.current=elm.value,requestAnimationFrame((()=>{autoselect&&elm.select()}))}),[autoselect]),handleChange=react.useCallback((e=>{const value2=e.currentTarget.value;rCurrentValue.current=value2,onValueChange?.(value2)}),[onValueChange]),handleKeyUp=react.useCallback((e=>{switch(e.key){case"Enter":e.currentTarget.blur(),(0,dist_esm.beA)(e),onComplete?.(e.currentTarget.value);break;case"Escape":e.currentTarget.value=rInitialValue.current,e.currentTarget.blur(),(0,dist_esm.beA)(e),onCancel?.(e.currentTarget.value)}}),[onComplete,onCancel]),handleBlur=react.useCallback((e=>{setIsFocused(!1);const value2=e.currentTarget.value;onBlur?.(value2)}),[onBlur]);return react.useEffect((()=>{if(!editor.environment.isIos)return;const visualViewport=window.visualViewport;if(isFocused&&shouldManuallyMaintainScrollPositionWhenFocused&&visualViewport){const onViewportChange=()=>{rInputRef.current?.scrollIntoView({block:"center"})};return visualViewport.addEventListener("resize",onViewportChange),visualViewport.addEventListener("scroll",onViewportChange),requestAnimationFrame((()=>{rInputRef.current?.scrollIntoView({block:"center"})})),()=>{visualViewport.removeEventListener("resize",onViewportChange),visualViewport.removeEventListener("scroll",onViewportChange)}}}),[editor,isFocused,shouldManuallyMaintainScrollPositionWhenFocused]),(0,jsx_runtime.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[children,label&&(0,jsx_runtime.jsx)("label",{children:msg(label)}),iconLeft&&(0,jsx_runtime.jsx)(Icon_Icon,{icon:iconLeft,className:"tlui-icon-left",small:!0}),(0,jsx_runtime.jsx)("input",{ref:rInputRef,className:classnames_default()("tlui-input",className),type:"text",defaultValue,onKeyUp:handleKeyUp,onChange:handleChange,onFocus:handleFocus,onBlur:handleBlur,autoFocus:autofocus,placeholder,value}),icon&&(0,jsx_runtime.jsx)(Icon_Icon,{icon,small:!!label})]})}));function validateUrl(url){return(0,dist_esm.jvJ)(url)?{isValid:!0,hasProtocol:!0}:(0,dist_esm.jvJ)("https://"+url)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const EditLinkDialog=(0,dist_esm.jas)((function EditLinkDialog2({onClose}){const selectedShape=(0,dist_esm.jE2)().onlySelectedShape;return selectedShape&&"url"in selectedShape.props&&"string"==typeof selectedShape.props.url?(0,jsx_runtime.jsx)(EditLinkDialogInner,{onClose,selectedShape}):null})),EditLinkDialogInner=(0,dist_esm.jas)((function EditLinkDialogInner2({onClose,selectedShape}){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),rInput=(0,react.useRef)(null);(0,react.useEffect)((()=>{requestAnimationFrame((()=>rInput.current?.focus()))}),[]);const rInitialValue=(0,react.useRef)(selectedShape.props.url),[urlInputState,setUrlInputState]=(0,react.useState)((()=>{const urlValidResult=validateUrl(selectedShape.props.url),initialValue=!0===urlValidResult.isValid?urlValidResult.hasProtocol?selectedShape.props.url:"https://"+selectedShape.props.url:"https://";return{actual:initialValue,safe:initialValue,valid:!0}})),handleChange=(0,react.useCallback)((rawValue=>{const fixedRawValue=rawValue.replace(/https?:\/\/(https?:\/\/)/,((_match,arg1)=>arg1)),urlValidResult=validateUrl(fixedRawValue),safeValue=!0===urlValidResult.isValid?urlValidResult.hasProtocol?fixedRawValue:"https://"+fixedRawValue:"https://";setUrlInputState({actual:fixedRawValue,safe:safeValue,valid:urlValidResult.isValid})}),[]),handleClear=(0,react.useCallback)((()=>{const{onlySelectedShape}=editor;onlySelectedShape&&(editor.updateShapes([{id:onlySelectedShape.id,type:onlySelectedShape.type,props:{url:""}}]),onClose())}),[editor,onClose]),handleComplete=(0,react.useCallback)((()=>{const{onlySelectedShape}=editor;onlySelectedShape&&(onlySelectedShape&&"url"in onlySelectedShape.props&&onlySelectedShape.props.url!==urlInputState.safe&&editor.updateShapes([{id:onlySelectedShape.id,type:onlySelectedShape.type,props:{url:urlInputState.safe}}]),onClose())}),[editor,onClose,urlInputState]),handleCancel=(0,react.useCallback)((()=>{onClose()}),[onClose]);if(!selectedShape)return onClose(),null;const isRemoving=rInitialValue.current&&!urlInputState.valid;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Header,{children:[(0,jsx_runtime.jsx)(Title,{children:msg("edit-link-dialog.title")}),(0,jsx_runtime.jsx)(CloseButton,{})]}),(0,jsx_runtime.jsx)(Body,{children:(0,jsx_runtime.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,jsx_runtime.jsx)(Input,{ref:rInput,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:urlInputState.actual,onValueChange:handleChange,onComplete:handleComplete,onCancel:handleCancel}),(0,jsx_runtime.jsx)("div",{children:urlInputState.valid?msg("edit-link-dialog.detail"):msg("edit-link-dialog.invalid-url")})]})}),(0,jsx_runtime.jsxs)(Footer,{className:"tlui-dialog__footer__actions",children:[(0,jsx_runtime.jsx)(Button,{onClick:handleCancel,onTouchEnd:handleCancel,children:msg("edit-link-dialog.cancel")}),isRemoving?(0,jsx_runtime.jsx)(Button,{type:"danger",onTouchEnd:handleClear,onClick:handleClear,children:msg("edit-link-dialog.clear")}):(0,jsx_runtime.jsx)(Button,{type:"primary",disabled:!urlInputState.valid,onTouchEnd:handleComplete,onClick:handleComplete,children:msg("edit-link-dialog.save")})]})]})})),EmbedDialog=(0,dist_esm.jas)((function EmbedDialog2({onClose}){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),assetUrls=useAssetUrls(),[embedDefinition,setEmbedDefinition]=(0,react.useState)(null),[url,setUrl]=(0,react.useState)(""),[embedInfoForUrl,setEmbedInfoForUrl]=(0,react.useState)(null),[showError,setShowError]=(0,react.useState)(!1),rShowErrorTimeout=(0,react.useRef)(-1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Header,{children:[(0,jsx_runtime.jsx)(Title,{children:embedDefinition?`${msg("embed-dialog.title")}  ${embedDefinition.title}`:msg("embed-dialog.title")}),(0,jsx_runtime.jsx)(CloseButton,{})]}),embedDefinition?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Body,{className:"tlui-embed-dialog__enter",children:[(0,jsx_runtime.jsx)(Input,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:value=>{setUrl(value);const embedInfo=getEmbedInfo(value);setEmbedInfoForUrl(embedInfo&&embedInfo.definition.type===embedDefinition.type?embedInfo:null),setShowError(!1),clearTimeout(rShowErrorTimeout.current),rShowErrorTimeout.current=setTimeout((()=>setShowError(!embedInfo)),320)}}),""===url?(0,jsx_runtime.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,jsx_runtime.jsx)("span",{children:msg("embed-dialog.instruction")})," ",embedDefinition.instructionLink&&(0,jsx_runtime.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:embedDefinition.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,jsx_runtime.jsx)(Icon_Icon,{icon:"external-link",small:!0})]})]}):(0,jsx_runtime.jsx)("div",{className:"tlui-embed-dialog__warning",children:showError?msg("embed-dialog.invalid-url"):""})]}),(0,jsx_runtime.jsxs)(Footer,{className:"tlui-dialog__footer__actions",children:[(0,jsx_runtime.jsx)(Button,{onClick:()=>{setEmbedDefinition(null),setEmbedInfoForUrl(null),setUrl("")},label:"embed-dialog.back"}),(0,jsx_runtime.jsx)("div",{className:"tlui-embed__spacer"}),(0,jsx_runtime.jsx)(Button,{label:"embed-dialog.cancel",onClick:onClose}),(0,jsx_runtime.jsx)(Button,{type:"primary",disabled:!embedInfoForUrl,label:"embed-dialog.create",onClick:()=>{embedInfoForUrl&&(editor.putExternalContent({type:"embed",url,point:editor.viewportPageCenter,embed:embedInfoForUrl.definition}),onClose())}})]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Body,{className:"tlui-embed-dialog__list",children:dist_esm.Lu5.map((def=>(0,jsx_runtime.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:()=>setEmbedDefinition(def),children:[(0,jsx_runtime.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,jsx_runtime.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:`url(${assetUrls.embedIcons[def.type]})`}})}),(0,jsx_runtime.jsx)("div",{className:"tlui-embed-dialog__item__title",children:def.title})]},def.type)))}),(0,jsx_runtime.jsx)("div",{className:"tlui-dialog__scrim"})]})]})}));var lz_string=__webpack_require__("./node_modules/lz-string/libs/lz-string.js");async function pasteExcalidrawContent(editor,clipboard,point){const{elements,files}=clipboard,tldrawContent={shapes:[],rootShapeIds:[],assets:[],schema:editor.store.schema.serialize()},groupShapeIdToChildren=new Map,rotatedElements=new Map,{currentPageId}=editor,excElementIdsToTldrawShapeIds=new Map,rootShapeIds=[],skipIds=new Set;elements.forEach((element=>{if(excElementIdsToTldrawShapeIds.set(element.id,(0,dist_esm.F17)()),null!==element.boundElements)for(const boundElement of element.boundElements)"text"===boundElement.type&&skipIds.add(boundElement.id)}));let index="a1";for(const element of elements){if(skipIds.has(element.id))continue;const id=excElementIdsToTldrawShapeIds.get(element.id),base={id,typeName:"shape",parentId:currentPageId,index,x:element.x,y:element.y,rotation:0,isLocked:element.locked,opacity:getOpacity(element.opacity),meta:{}};switch(0!==element.angle&&rotatedElements.set(id,element.angle),element.groupIds&&element.groupIds.length>0?groupShapeIdToChildren.has(element.groupIds[0])?groupShapeIdToChildren.get(element.groupIds[0])?.push(id):groupShapeIdToChildren.set(element.groupIds[0],[id]):rootShapeIds.push(id),element.type){case"rectangle":case"ellipse":case"diamond":{let text="",align="middle";if(null!==element.boundElements)for(const boundElement of element.boundElements)if("text"===boundElement.type){const labelElement=elements.find((elm=>elm.id===boundElement.id));labelElement&&(text=labelElement.text,align=textAlignToAlignTypes[labelElement.textAlign])}const colorToUse="transparent"===element.backgroundColor?element.strokeColor:element.backgroundColor;tldrawContent.shapes.push({...base,type:"geo",props:{geo:element.type,url:element.link??"",w:element.width,h:element.height,size:strokeWidthsToSizes[element.strokeWidth]??"draw",color:colorsToColors[colorToUse]??"black",text,align,dash:getDash(element),fill:getFill(element)}});break}case"freedraw":tldrawContent.shapes.push({...base,type:"draw",props:{dash:getDash(element),size:strokeWidthsToSizes[element.strokeWidth],color:colorsToColors[element.strokeColor]??"black",segments:[{type:"free",points:element.points.map((([x,y,z=.5])=>({x,y,z})))}]}});break;case"line":{const start=element.points[0],end=element.points[element.points.length-1],indices=(0,dist_esm.H$$)(element.points.length);tldrawContent.shapes.push({...base,type:"line",props:{dash:getDash(element),size:strokeWidthsToSizes[element.strokeWidth],color:colorsToColors[element.strokeColor]??"black",spline:element.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:indices[0],x:start[0],y:start[1]},end:{id:"end",type:"vertex",index:indices[indices.length-1],x:end[0],y:end[1]},...Object.fromEntries(element.points.slice(1,-1).map((([x,y],i)=>{const id2=(0,dist_esm.ELf)();return[id2,{id:id2,type:"vertex",index:indices[i+1],x,y}]})))}}});break}case"arrow":{let text="";if(null!==element.boundElements)for(const boundElement of element.boundElements)if("text"===boundElement.type){const labelElement=elements.find((elm=>elm.id===boundElement.id));labelElement&&(text=labelElement.text)}const start=element.points[0],end=element.points[element.points.length-1],startTargetId=excElementIdsToTldrawShapeIds.get(element.startBinding?.elementId),endTargetId=excElementIdsToTldrawShapeIds.get(element.endBinding?.elementId);tldrawContent.shapes.push({...base,type:"arrow",props:{text,bend:getBend(element,start,end),dash:getDash(element),size:strokeWidthsToSizes[element.strokeWidth]??"m",color:colorsToColors[element.strokeColor]??"black",start:startTargetId?{type:"binding",boundShapeId:startTargetId,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:start[0],y:start[1]},end:endTargetId?{type:"binding",boundShapeId:endTargetId,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:end[0],y:end[1]},arrowheadEnd:arrowheadsToArrowheadTypes[element.endArrowhead]??"none",arrowheadStart:arrowheadsToArrowheadTypes[element.startArrowhead]??"none"}});break}case"text":{const{size,scale}=getFontSizeAndScale(element.fontSize);tldrawContent.shapes.push({...base,type:"text",props:{size,scale,font:fontFamilyToFontType[element.fontFamily]??"draw",color:colorsToColors[element.strokeColor]??"black",text:element.text,align:textAlignToAlignTypes[element.textAlign]}});break}case"image":{const file=files[element.fileId];if(!file)break;const assetId=dist_esm.Ykc.createId();tldrawContent.assets.push({id:assetId,typeName:"asset",type:"image",props:{w:element.width,h:element.height,name:element.id??"Untitled",isAnimated:!1,mimeType:file.mimeType,src:file.dataURL},meta:{}}),tldrawContent.shapes.push({...base,type:"image",props:{w:element.width,h:element.height,assetId}})}}index=(0,dist_esm._LC)(index)}const p=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:void 0);editor.mark("paste"),editor.putContentOntoCurrentPage(tldrawContent,{point:p,select:!1,preserveIds:!0});for(const groupedShapeIds of groupShapeIdToChildren.values())if(groupedShapeIds.length>1){editor.groupShapes(groupedShapeIds);const groupShape=editor.getShape(groupedShapeIds[0]);groupShape?.parentId&&(0,dist_esm.YTh)(groupShape.parentId)&&rootShapeIds.push(groupShape.parentId)}for(const[id,angle]of rotatedElements)editor.select(id),editor.rotateShapesBy([id],angle);const rootShapes=(0,dist_esm.oA$)(rootShapeIds.map((id=>editor.getShape(id)))),bounds=dist_esm.NoK.Common(rootShapes.map((s=>editor.getShapePageBounds(s)))),viewPortCenter=editor.viewportPageBounds.center;editor.updateShapes(rootShapes.map((s=>{const delta_x=(s.x??0)-(bounds.x+bounds.w/2),delta_y=(s.y??0)-(bounds.y+bounds.h/2);return{id:s.id,type:s.type,x:viewPortCenter.x+delta_x,y:viewPortCenter.y+delta_y}}))),editor.setSelectedShapes(rootShapeIds)}const getOpacity=opacity=>{const t=opacity/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},strokeWidthsToSizes={1:"s",2:"m",3:"l",4:"xl"},fontSizesToSizes={16:"s",20:"m",28:"l",36:"xl"};function getFontSizeAndScale(fontSize){const size=fontSizesToSizes[fontSize];return size?{size,scale:1}:fontSize<16?{size:"s",scale:fontSize/16}:fontSize>36?{size:"xl",scale:fontSize/36}:{size:"m",scale:1}}const fontFamilyToFontType={1:"draw",2:"sans",3:"mono"},colorsToColors={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},strokeStylesToStrokeTypes={solid:"draw",dashed:"dashed",dotted:"dotted"},fillStylesToFillType={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},textAlignToAlignTypes={left:"start",center:"middle",right:"end"},arrowheadsToArrowheadTypes={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function getBend(element,startPoint,endPoint){let bend=0;if(element.points.length>2){const start=new dist_esm.GF3(startPoint[0],startPoint[1]),end=new dist_esm.GF3(endPoint[0],endPoint[1]),handle=new dist_esm.GF3(element.points[1][0],element.points[1][1]),delta=dist_esm.GF3.Sub(end,start),v=dist_esm.GF3.Per(delta),med=dist_esm.GF3.Med(end,start),A=dist_esm.GF3.Sub(med,v),B=dist_esm.GF3.Add(med,v),point=dist_esm.GF3.NearestPointOnLineSegment(A,B,handle,!1);bend=dist_esm.GF3.Dist(point,med),dist_esm.GF3.Clockwise(point,end,med)&&(bend*=-1)}return bend}const getDash=element=>{let dash=strokeStylesToStrokeTypes[element.strokeStyle]??"draw";return"draw"===dash&&0===element.roughness&&(dash="solid"),dash},getFill=element=>"transparent"===element.backgroundColor?"none":fillStylesToFillType[element.fillStyle]??"solid";async function pasteFiles(editor,urls,point,sources){const files=(await Promise.all(urls.map((async url=>await(await fetch(url)).blob())))).map((blob=>new File([blob],"tldrawFile",{type:blob.type})));editor.mark("paste"),await editor.putExternalContent({type:"files",files,point,ignoreParent:!1,sources}),urls.forEach((url=>URL.revokeObjectURL(url)))}function pasteTldrawContent(editor,clipboard,point){const p=point??(editor.inputs.shiftKey?editor.inputs.currentPagePoint:void 0);editor.mark("paste"),editor.putContentOntoCurrentPage(clipboard,{point:p,select:!0})}async function pasteUrl(editor,url,point,sources){try{const resp=await fetch(url);if(resp.headers.get("content-type")?.match(/^image\//))return editor.mark("paste"),void pasteFiles(editor,[url])}catch(err){"Failed to fetch"!==err.message&&console.error(err)}return editor.mark("paste"),await editor.putExternalContent({type:"url",point,url,sources})}function stripHtml(html){const doc=document.implementation.createHTMLDocument("");return doc.documentElement.innerHTML=html.trim(),doc.body.textContent||doc.body.innerText||""}const INPUTS=["input","select","textarea"];function disallowClipboardEvents(editor){const{activeElement}=document;return editor.isMenuOpen||activeElement&&(activeElement.getAttribute("contenteditable")||INPUTS.indexOf(activeElement.tagName.toLowerCase())>-1)}async function blobAsString(blob){return new Promise(((resolve,reject)=>{const reader=new FileReader;reader.addEventListener("loadend",(()=>{const text=reader.result;resolve(text)})),reader.addEventListener("error",(()=>{reject(reader.error)})),reader.readAsText(blob)}))}const isFile=item=>item.types.find((i=>i.match(/^image\//))),handleText=(editor,data,point,sources)=>{const validUrlList=(url=>{const urls=url.split(/[\n\s]/);for(const url2 of urls)try{const u=new URL(url2);if("http:"!==u.protocol&&"https:"!==u.protocol)return}catch(e){return}return(0,dist_esm.jj$)(urls)})(data);if(validUrlList)for(const url of validUrlList)pasteUrl(editor,url,point);else(url=>{try{const u=new URL(url);return"http:"===u.protocol||"https:"===u.protocol}catch(e){return!1}})(data)?pasteUrl(editor,data,point):/^<svg/.test(data)?(editor.mark("paste"),editor.putExternalContent({type:"svg-text",text:data,point,sources})):(editor.mark("paste"),editor.putExternalContent({type:"text",text:data,point,sources}))},handlePasteFromClipboardApi=async(editor,clipboardItems,point)=>{const things=[];for(const item of clipboardItems){if(isFile(item))for(const type of item.types)type.match(/^image\//)&&things.push({type:"blob",source:item.getType(type)});item.types.includes("text/html")&&things.push({type:"html",source:new Promise((r=>item.getType("text/html").then((blob=>blobAsString(blob).then(r)))))}),item.types.includes("text/uri-list")&&things.push({type:"url",source:new Promise((r=>item.getType("text/uri-list").then((blob=>blobAsString(blob).then(r)))))}),item.types.includes("text/plain")&&things.push({type:"text",source:new Promise((r=>item.getType("text/plain").then((blob=>blobAsString(blob).then(r)))))})}return await handleClipboardThings(editor,things,point)};async function handleClipboardThings(editor,things,point){const files=things.filter((t=>("file"===t.type||"blob"===t.type)&&null!==t.source));if(files.length){const fileBlobs=await Promise.all(files.map((t=>t.source))),urls=fileBlobs.filter(Boolean).map((blob=>URL.createObjectURL(blob)));return await pasteFiles(editor,urls,point)}const results=await Promise.all(things.filter((t=>"file"!==t.type)).map((t=>new Promise((r=>{const thing=t;"file"!==thing.type?thing.source.then((text=>{const tldrawHtmlComment=text.match(/<tldraw[^>]*>(.*)<\/tldraw>/)?.[1];if(tldrawHtmlComment)try{const jsonComment=(0,lz_string.decompressFromBase64)(tldrawHtmlComment);if(null===jsonComment)return void r({type:"error",data:jsonComment,reason:"found tldraw data comment but could not parse base64"});{const json=JSON.parse(jsonComment);return"application/tldraw"!==json.type&&r({type:"error",data:json,reason:`found tldraw data comment but JSON was of a different type: ${json.type}`}),"string"==typeof json.data?void r({type:"error",data:json,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void r({type:"tldraw",data:json.data})}}catch(e){return void r({type:"error",data:tldrawHtmlComment,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===thing.type)return void r({type:"text",data:text,subtype:"html"});if("url"===thing.type)return void r({type:"text",data:text,subtype:"url"});try{const json=JSON.parse(text);return"excalidraw/clipboard"===json.type?void r({type:"excalidraw",data:json}):void r({type:"text",data:text,subtype:"json"})}catch(e){return void r({type:"text",data:text,subtype:"text"})}}r({type:"error",data:text,reason:"unhandled case"})})):r({type:"error",data:null,reason:"unexpected file"})})))));for(const result of results)if("tldraw"===result.type)return void pasteTldrawContent(editor,result.data,point);for(const result of results)if("excalidraw"===result.type)return void pasteExcalidrawContent(editor,result.data,point);for(const result of results)if("text"===result.type&&"html"===result.subtype){const bodyNode=(new DOMParser).parseFromString(result.data,"text/html").querySelector("body");if(bodyNode&&1===Array.from(bodyNode.children).filter((el=>1===el.nodeType)).length&&bodyNode.firstElementChild&&"A"===bodyNode.firstElementChild.tagName&&bodyNode.firstElementChild.hasAttribute("href")&&""!==bodyNode.firstElementChild.getAttribute("href")){const href=bodyNode.firstElementChild.getAttribute("href");return void handleText(editor,href,point,results)}if(!results.some((r=>"text"===r.type&&"html"!==r.subtype))&&result.data.trim())return void handleText(editor,stripHtml(result.data),point,results)}for(const result of results)if("text"===result.type&&"url"===result.subtype)return void pasteUrl(editor,result.data,point,results);for(const result of results)if("text"===result.type&&"text"===result.subtype&&result.data.trim())return void handleText(editor,result.data,point,results)}const handleNativeOrMenuCopy=editor=>{const content=editor.getContentFromCurrentPage(editor.selectedShapeIds);if(!content)return void(navigator&&navigator.clipboard&&navigator.clipboard.writeText(""));const stringifiedClipboard=(0,lz_string.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:"content",data:content}));if("undefined"!=typeof navigator){const textItems=content.shapes.map((shape=>editor.isShapeOfType(shape,"text")||editor.isShapeOfType(shape,"geo")||editor.isShapeOfType(shape,"arrow")?shape.props.text:editor.isShapeOfType(shape,"bookmark")||editor.isShapeOfType(shape,"embed")?shape.props.url:null)).filter(dist_esm.GT8);if(navigator.clipboard?.write){const htmlBlob=new Blob([`<tldraw>${stringifiedClipboard}</tldraw>`],{type:"text/html"});let textContent=textItems.join(" ");""===textContent&&(textContent=" "),navigator.clipboard.write([new ClipboardItem({"text/html":htmlBlob,"text/plain":new Blob([textContent],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<tldraw>${stringifiedClipboard}</tldraw>`)}};function useNativeClipboardEvents(){const editor=(0,dist_esm.jE2)(),trackEvent=useUiEvents(),appIsFocused=(0,dist_esm.HgN)("editor.isFocused",(()=>editor.instanceState.isFocused),[editor]);(0,react.useEffect)((()=>{if(!appIsFocused)return;const copy=()=>{0===editor.selectedShapeIds.length||null!==editor.editingShapeId||disallowClipboardEvents(editor)||(handleNativeOrMenuCopy(editor),trackEvent("copy",{source:"kbd"}))};function cut(){0===editor.selectedShapeIds.length||null!==editor.editingShapeId||disallowClipboardEvents(editor)||(handleNativeOrMenuCopy(editor),editor.deleteShapes(editor.selectedShapeIds),trackEvent("cut",{source:"kbd"}))}let disablingMiddleClickPaste=!1;const pointerUpHandler=e=>{1===e.button&&(disablingMiddleClickPaste=!0,requestAnimationFrame((()=>{disablingMiddleClickPaste=!1})))},paste=event=>{disablingMiddleClickPaste?event.stopPropagation():null!==editor.editingShapeId||disallowClipboardEvents(editor)||(event.clipboardData&&!editor.inputs.shiftKey?(async(editor,clipboardData,point)=>{if(null!==editor.editingShapeId)return;if(!clipboardData)throw Error("No clipboard data");const things=[];for(const item of Object.values(clipboardData.items))switch(item.kind){case"file":things.push({type:"file",source:new Promise((r=>r(item.getAsFile())))});break;case"string":"text/html"===item.type?things.push({type:"html",source:new Promise((r=>item.getAsString(r)))}):"text/plain"===item.type?things.push({type:"text",source:new Promise((r=>item.getAsString(r)))}):things.push({type:item.type,source:new Promise((r=>item.getAsString(r)))})}handleClipboardThings(editor,things,point)})(editor,event.clipboardData):navigator.clipboard.read().then((clipboardItems=>{Array.isArray(clipboardItems)&&clipboardItems[0]instanceof ClipboardItem&&handlePasteFromClipboardApi(editor,clipboardItems,editor.inputs.currentPagePoint)})),trackEvent("paste",{source:"kbd"}))};return document.addEventListener("copy",copy),document.addEventListener("cut",cut),document.addEventListener("paste",paste),document.addEventListener("pointerup",pointerUpHandler),()=>{document.removeEventListener("copy",copy),document.removeEventListener("cut",cut),document.removeEventListener("paste",paste),document.removeEventListener("pointerup",pointerUpHandler)}}),[editor,trackEvent,appIsFocused])}function getSvgAsString(svg){const clone=svg.cloneNode(!0);svg.setAttribute("width",+svg.getAttribute("width")+""),svg.setAttribute("height",+svg.getAttribute("height")+"");return(new XMLSerializer).serializeToString(clone).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}async function getSvgAsImage(svg,options){const{type,quality,scale}=options,width=+svg.getAttribute("width"),height=+svg.getAttribute("height");let scaledWidth=width*scale,scaledHeight=height*scale;const dataUrl=await getSvgAsDataUrl(svg),canvasSizes=await getBrowserCanvasMaxSize();if(width>canvasSizes.maxWidth&&(scaledWidth=canvasSizes.maxWidth,scaledHeight=scaledWidth/width*height),height>canvasSizes.maxHeight&&(scaledHeight=canvasSizes.maxHeight,scaledWidth=scaledHeight/height*width),scaledWidth*scaledHeight>canvasSizes.maxArea){const ratio=Math.sqrt(canvasSizes.maxArea/(scaledWidth*scaledHeight));scaledWidth*=ratio,scaledHeight*=ratio}scaledWidth=Math.floor(scaledWidth),scaledHeight=Math.floor(scaledHeight);const effectiveScale=scaledWidth/width,canvas=await new Promise((resolve=>{const image=new Image;image.crossOrigin="anonymous",image.onload=async()=>{await new Promise((resolve2=>setTimeout(resolve2,250)));const canvas2=document.createElement("canvas"),ctx=canvas2.getContext("2d");canvas2.width=scaledWidth,canvas2.height=scaledHeight,ctx.imageSmoothingEnabled=!0,ctx.imageSmoothingQuality="high",ctx.drawImage(image,0,0,scaledWidth,scaledHeight),URL.revokeObjectURL(dataUrl),resolve(canvas2)},image.onerror=()=>{resolve(null)},image.src=dataUrl}));if(!canvas)return null;const blob=await new Promise((resolve=>canvas.toBlob((blob2=>{blob2&&!dist_esm.hR1.throwToBlob.value||resolve(null),resolve(blob2)}),"image/"+type,quality)));if(!blob)return null;const view=new DataView(await blob.arrayBuffer());return dist_esm.bMZ.setPhysChunk(view,effectiveScale,{type:"image/"+type})}async function getSvgAsDataUrl(svg){const clone=svg.cloneNode(!0);clone.setAttribute("encoding",'UTF-8"');const fileReader=new FileReader,imgs=Array.from(clone.querySelectorAll("image"));for(const img of imgs){const src=img.getAttribute("xlink:href");if(src&&!src.startsWith("data:")){const blob=await(await fetch(src)).blob(),base64=await new Promise(((resolve,reject)=>{fileReader.onload=()=>resolve(fileReader.result),fileReader.onerror=()=>reject(fileReader.error),fileReader.readAsDataURL(blob)}));img.setAttribute("xlink:href",base64)}}return function getSvgAsDataUrlSync(node){const svgStr=(new XMLSerializer).serializeToString(node);return`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(svgStr)))}`}(clone)}function downloadDataURLAsFile(dataUrl,filename){const link=document.createElement("a");link.href=dataUrl,link.download=filename,link.click()}const ToastsContext=(0,react.createContext)({});function ToastsProvider({children}){const[toasts,setToasts]=(0,react.useState)([]),addToast=(0,react.useCallback)((toast=>{const id=toast.id??(0,dist_esm.ELf)();return setToasts((d=>[...d.filter((m=>m.id!==toast.id)),{...toast,id}])),id}),[]),removeToast=(0,react.useCallback)((id=>(setToasts((d=>d.filter((m=>m.id!==id)))),id)),[]),clearToasts=(0,react.useCallback)((()=>{setToasts((()=>[]))}),[]);return(0,jsx_runtime.jsx)(ToastsContext.Provider,{value:{toasts,addToast,removeToast,clearToasts},children})}function useToasts(){const ctx=(0,react.useContext)(ToastsContext);if(!ctx)throw new Error("useToasts must be used within a ToastsProvider");return ctx}function useCopyAs(){const editor=(0,dist_esm.jE2)(),{addToast}=useToasts(),msg=useTranslation_useTranslation();return(0,react.useCallback)((function copyAs(ids=editor.selectedShapeIds,format="svg"){if(0===ids.length&&(ids=[...editor.currentPageShapeIds]),0!==ids.length)switch(format){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":getExportedSvgBlob(editor,ids)})]):fallbackWriteTextAsync((async()=>getSvgAsString(await getExportSvgElement(editor,ids)))));break;case"jpeg":case"png":{const mimeType="jpeg"===format?"image/jpeg":"image/png",blobPromise=async function getExportedImageBlob(editor,ids,format){return await getSvgAsImage(await getExportSvgElement(editor,ids),{type:format,quality:1,scale:2})}(editor,ids,format).then((blob=>{if(blob){if(window.navigator.clipboard)return blob;throw new Error("Copy not supported")}throw addToast({id:"copy-fail",icon:"warning-triangle",title:msg("toast.error.copy-fail.title"),description:msg("toast.error.copy-fail.desc")}),new Error("Copy not possible")}));window.navigator.clipboard.write([new ClipboardItem({[mimeType]:blobPromise})]).catch((err=>{err.toString().match(/^TypeError: DOMString not supported/)||console.error(err),blobPromise.then((blob=>{window.navigator.clipboard.write([new ClipboardItem({[mimeType]:blob})])}))}));break}case"json":{const data=editor.getContentFromCurrentPage(ids);if(window.navigator.clipboard){const jsonStr=JSON.stringify(data);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([jsonStr],{type:"text/plain"})})]):fallbackWriteTextAsync((async()=>jsonStr))}break}default:throw new Error(`Copy type ${format} not supported.`)}}),[editor,addToast,msg])}async function getExportSvgElement(editor,ids){const svg=await editor.getSvg(ids,{scale:1,background:editor.instanceState.exportBackground});if(!svg)throw new Error("Could not construct SVG.");return svg}async function getExportedSvgBlob(editor,ids){return new Blob([getSvgAsString(await getExportSvgElement(editor,ids))],{type:"text/plain"})}async function fallbackWriteTextAsync(getText){navigator&&navigator.clipboard&&navigator.clipboard.writeText(await getText())}const DialogsContext=(0,react.createContext)({});function DialogsProvider({children}){const editor=(0,dist_esm.jE2)(),trackEvent=useUiEvents(),[dialogs,setDialogs]=(0,react.useState)([]),addDialog=(0,react.useCallback)((dialog=>{const id=dialog.id??(0,dist_esm.ELf)();return setDialogs((d=>[...d.filter((m=>m.id!==dialog.id)),{...dialog,id}])),trackEvent("open-menu",{source:"dialog",id}),editor.addOpenMenu(id),id}),[editor,trackEvent]),updateDialog=(0,react.useCallback)(((id,newDialogData)=>(setDialogs((d=>d.map((m=>m.id===id?{...m,...newDialogData}:m)))),trackEvent("open-menu",{source:"dialog",id}),editor.addOpenMenu(id),id)),[editor,trackEvent]),removeDialog=(0,react.useCallback)((id=>(setDialogs((d=>d.filter((m=>m.id!==id||(m.onClose?.(),!1))))),trackEvent("close-menu",{source:"dialog",id}),editor.deleteOpenMenu(id),id)),[editor,trackEvent]),clearDialogs=(0,react.useCallback)((()=>{setDialogs((d=>(d.forEach((m=>{m.onClose?.(),trackEvent("close-menu",{source:"dialog",id:m.id}),editor.deleteOpenMenu(m.id)})),[])))}),[editor,trackEvent]);return(0,jsx_runtime.jsx)(DialogsContext.Provider,{value:{dialogs,addDialog,removeDialog,clearDialogs,updateDialog},children})}function useDialogs(){const ctx=(0,react.useContext)(DialogsContext);if(!ctx)throw new Error("useDialogs must be used within a DialogsProvider");return ctx}function useExportAs(){const editor=(0,dist_esm.jE2)(),{addToast}=useToasts(),msg=useTranslation_useTranslation();return(0,react.useCallback)((async function exportAs(ids=editor.selectedShapeIds,format="png"){if(0===ids.length&&(ids=[...editor.currentPageShapeIds]),0===ids.length)return;const svg=await editor.getSvg(ids,{scale:1,background:editor.instanceState.exportBackground});if(!svg)throw new Error("Could not construct SVG.");let name="shapes"+function getTimestamp(){const now=new Date,year=String(now.getFullYear()).slice(2),month=String(now.getMonth()+1).padStart(2,"0"),day=String(now.getDate()).padStart(2,"0"),hours=String(now.getHours()).padStart(2,"0"),minutes=String(now.getMinutes()).padStart(2,"0"),seconds=String(now.getSeconds()).padStart(2,"0");return` at ${year}-${month}-${day} ${hours}.${minutes}.${seconds}`}();if(1===ids.length){const first=editor.getShape(ids[0]);name=editor.isShapeOfType(first,"frame")?first.props.name??"frame":first.id.replace(/:/,"_")}switch(format){case"svg":return void downloadDataURLAsFile(await getSvgAsDataUrl(svg),`${name}.svg`);case"webp":case"png":{const image=await getSvgAsImage(svg,{type:format,quality:1,scale:2});if(!image)return void addToast({id:"export-fail",title:msg("toast.error.export-fail.title"),description:msg("toast.error.export-fail.desc")});const dataURL=URL.createObjectURL(image);return downloadDataURLAsFile(dataURL,`${name}.${format}`),void URL.revokeObjectURL(dataURL)}case"json":{const data=editor.getContentFromCurrentPage(ids),dataURL=URL.createObjectURL(new Blob([JSON.stringify(data,null,4)],{type:"application/json"}));return downloadDataURLAsFile(dataURL,`${name||"shapes"}.json`),void URL.revokeObjectURL(dataURL)}default:throw new Error(`Export type ${format} not supported.`)}}),[editor,addToast,msg])}function useInsertMedia(){const editor=(0,dist_esm.jE2)(),inputRef=(0,react.useRef)();return(0,react.useEffect)((()=>{const input=window.document.createElement("input");async function onchange(e){const fileList=e.target.files;fileList&&0!==fileList.length&&(await editor.putExternalContent({type:"files",files:Array.from(fileList),point:editor.viewportPageBounds.center,ignoreParent:!1}),input.value="")}return input.type="file",input.accept="image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime",input.multiple=!0,inputRef.current=input,input.addEventListener("change",onchange),()=>{inputRef.current=void 0,input.removeEventListener("change",onchange)}}),[editor]),(0,react.useCallback)((()=>{inputRef.current?.click()}),[inputRef])}const ActionsContext=react.createContext({});function ActionsProvider({overrides,children}){const editor=(0,dist_esm.jE2)(),{addDialog,clearDialogs}=useDialogs(),{clearToasts}=useToasts(),insertMedia=useInsertMedia(),printSelectionOrPages=function usePrint(){const editor=(0,dist_esm.jE2)(),prevPrintEl=(0,react.useRef)(null),prevStyleEl=(0,react.useRef)(null);return(0,react.useCallback)((async function printSelectionOrPages(){const el=document.createElement("div"),style=document.createElement("style"),clearElements=(printEl,styleEl)=>{printEl&&(printEl.innerHTML=""),styleEl&&document.head.contains(styleEl)&&document.head.removeChild(styleEl),printEl&&document.body.contains(printEl)&&document.body.removeChild(printEl)};clearElements(prevPrintEl.current,prevStyleEl.current),prevPrintEl.current=el,prevStyleEl.current=style;const className=`tl-print-surface-${(0,dist_esm.ELf)()}`;el.className=className,style.innerHTML=`\n\t\t\t.${className} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.${className} svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.${className} {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${className}__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${className}__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${className}__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.${className}__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.${className}__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\n\t\t`;const beforePrintHandler=()=>{document.head.appendChild(style),document.body.appendChild(el)},afterPrintHandler=()=>{editor.once("change-history",(()=>{clearElements(el,style)}))};function addPageToPrint(title,footer,svg){try{el.innerHTML+=`<div class="${className}__item">\n        <div class="${className}__item__header">\n          ${title.replace(/</g,"&lt;").replace(/>/g,"&gt;")}\n        </div>\n        <div class="${className}__item__main">\n          ${svg.outerHTML}\n        </div>\n        <div class="${className}__item__footer ${className}__item__footer__${footer?"":"hide"}">\n          ${footer??""}\n        </div>\n      </div>`}catch(e){console.error(e)}}function triggerPrint(){editor.environment.isChromeForIos?(beforePrintHandler(),window.print()):editor.environment.isSafari?(beforePrintHandler(),document.execCommand("print",!1)):window.print()}window.addEventListener("beforeprint",beforePrintHandler),window.addEventListener("afterprint",afterPrintHandler);const{pages,currentPageId,selectedShapeIds}=editor,svgOpts={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(editor.selectedShapeIds.length>0){const svg=await editor.getSvg(selectedShapeIds,svgOpts);if(svg){const page=pages.find((p=>p.id===currentPageId));addPageToPrint(`tldraw  ${page?.name}`,null,svg),triggerPrint()}}else{const page=editor.currentPage,svg=await editor.getSvg(editor.getSortedChildIdsForParent(page.id),svgOpts);svg&&(addPageToPrint(`tldraw  ${page.name}`,null,svg),triggerPrint())}window.removeEventListener("beforeprint",beforePrintHandler),window.removeEventListener("afterprint",afterPrintHandler)}),[editor])}(),{cut,copy,paste}=function useMenuClipboardEvents(){const editor=(0,dist_esm.jE2)(),trackEvent=useUiEvents(),copy=(0,react.useCallback)((function onCopy(source){0!==editor.selectedShapeIds.length&&(handleNativeOrMenuCopy(editor),trackEvent("copy",{source}))}),[editor,trackEvent]),cut=(0,react.useCallback)((function onCut(source){0!==editor.selectedShapeIds.length&&(handleNativeOrMenuCopy(editor),editor.deleteShapes(editor.selectedShapeIds),trackEvent("cut",{source}))}),[editor,trackEvent]),paste=(0,react.useCallback)((async function onPaste(data,source,point){null!==editor.editingShapeId||disallowClipboardEvents(editor)||(Array.isArray(data)&&data[0]instanceof ClipboardItem?(handlePasteFromClipboardApi(editor,data,point),trackEvent("paste",{source:"menu"})):navigator.clipboard.read().then((clipboardItems=>{paste(clipboardItems,source,point)})))}),[editor,trackEvent]);return{copy,cut,paste}}(),copyAs=useCopyAs(),exportAs=useExportAs(),trackEvent=useUiEvents(),actions=react.useMemo((()=>{function mustGoBackToSelectToolFirst(){return editor.isIn("select")||(editor.complete(),editor.setCurrentTool("select")),!1}function hasSelectedShapes(){return editor.selectedShapeIds.length>0}const actions2=function makeActions(actions){return Object.fromEntries(actions.map((action=>[action.id,action])))}([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("edit-link",{source}),editor.mark("edit-link"),addDialog({component:EditLinkDialog})))}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect(source){trackEvent("insert-embed",{source}),addDialog({component:EmbedDialog})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect(source){trackEvent("insert-media",{source}),insertMedia()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect(source){trackEvent("undo",{source}),editor.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect(source){trackEvent("redo",{source}),editor.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect(source){trackEvent("export-as",{format:"svg",source}),exportAs(editor.selectedShapeIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect(source){trackEvent("export-as",{format:"png",source}),exportAs(editor.selectedShapeIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect(source){trackEvent("export-as",{format:"json",source}),exportAs(editor.selectedShapeIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect(source){trackEvent("copy-as",{format:"svg",source}),copyAs(editor.selectedShapeIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect(source){trackEvent("copy-as",{format:"png",source}),copyAs(editor.selectedShapeIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect(source){trackEvent("copy-as",{format:"json",source}),copyAs(editor.selectedShapeIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("toggle-auto-size",{source}),editor.mark("toggling auto size"),editor.updateShapes(editor.selectedShapes.filter((shape=>editor.isShapeOfType(shape,"text")&&!1===shape.props.autoSize)).map((shape=>({id:shape.id,type:shape.type,props:{...shape.props,w:8,autoSize:!0}}))))))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(source){trackEvent("open-embed-link",{source});const ids=editor.selectedShapeIds,warnMsg="No embed shapes selected";if(1!==ids.length)return void console.error(warnMsg);const shape=editor.getShape(ids[0]);shape&&editor.isShapeOfType(shape,"embed")?(0,dist_esm.xwP)(shape.props.url,"_blank"):console.error(warnMsg)}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(source){if("zoom"!==editor.root.current.value?.id&&(trackEvent("zoom-tool",{source}),!editor.inputs.shiftKey&&!editor.inputs.ctrlKey)){const currentTool=editor.root.current.value;currentTool&&"idle"===currentTool.current.value?.id&&editor.setCurrentTool("zoom",{onInteractionEnd:currentTool.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||editor.batch((()=>{trackEvent("convert-to-bookmark",{source});const shapes=editor.selectedShapes,createList=[],deleteList=[];for(const shape of shapes){if(!shape||!editor.isShapeOfType(shape,"embed")||!shape.props.url)continue;const newPos=new dist_esm.GF3(shape.x,shape.y);newPos.rot(-shape.rotation),newPos.add(new dist_esm.GF3(shape.props.w/2-150,shape.props.h/2-160)),newPos.rot(shape.rotation);const partial={id:(0,dist_esm.F17)(),type:"bookmark",rotation:shape.rotation,x:newPos.x,y:newPos.y,opacity:1,props:{url:shape.props.url}};createList.push(partial),deleteList.push(shape.id)}editor.mark("convert shapes to bookmark"),editor.deleteShapes(deleteList),editor.createShapes(createList)})))}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("convert-to-embed",{source}),editor.batch((()=>{const ids=editor.selectedShapeIds,shapes=(0,dist_esm.oA$)(ids.map((id=>editor.getShape(id)))),createList=[],deleteList=[];for(const shape of shapes){if(!editor.isShapeOfType(shape,"bookmark"))continue;const{url}=shape.props,embedInfo=getEmbedInfo(shape.props.url);if(!embedInfo)continue;if(!embedInfo.definition)continue;const{width,height}=embedInfo.definition,newPos=new dist_esm.GF3(shape.x,shape.y);newPos.rot(-shape.rotation),newPos.add(new dist_esm.GF3(shape.props.w/2-width/2,shape.props.h/2-height/2)),newPos.rot(shape.rotation);const shapeToCreate={id:(0,dist_esm.F17)(),type:"embed",x:newPos.x,y:newPos.y,rotation:shape.rotation,props:{url,w:width,h:height}};createList.push(shapeToCreate),deleteList.push(shape.id)}editor.mark("convert shapes to embed"),editor.deleteShapes(deleteList),editor.createShapes(createList)}))))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect(source){if(!hasSelectedShapes())return;if(mustGoBackToSelectToolFirst())return;trackEvent("duplicate-shapes",{source});const ids=editor.selectedShapeIds,commonBounds=dist_esm.NoK.Common((0,dist_esm.oA$)(ids.map((id=>editor.getShapePageBounds(id))))),offset=editor.instanceState.canMoveCamera?{x:commonBounds.width+10,y:0}:{x:16/editor.zoomLevel,y:16/editor.zoomLevel};editor.mark("duplicate shapes"),editor.duplicateShapes(ids,offset)}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("ungroup-shapes",{source}),editor.mark("ungroup"),editor.ungroupShapes(editor.selectedShapeIds)))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect(source){if(!hasSelectedShapes())return;if(mustGoBackToSelectToolFirst())return;trackEvent("group-shapes",{source});const{onlySelectedShape}=editor;onlySelectedShape&&editor.isShapeOfType(onlySelectedShape,"group")?(editor.mark("ungroup"),editor.ungroupShapes(editor.selectedShapeIds)):(editor.mark("group"),editor.groupShapes(editor.selectedShapeIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"left",source}),editor.mark("align left"),editor.alignShapes(editor.selectedShapeIds,"left")))}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"center-horizontal",source}),editor.mark("align center horizontal"),editor.alignShapes(editor.selectedShapeIds,"center-horizontal")))}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"right",source}),editor.mark("align right"),editor.alignShapes(editor.selectedShapeIds,"right")))}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"center-vertical",source}),editor.mark("align center vertical"),editor.alignShapes(editor.selectedShapeIds,"center-vertical")))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"top",source}),editor.mark("align top"),editor.alignShapes(editor.selectedShapeIds,"top")))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("align-shapes",{operation:"bottom",source}),editor.mark("align bottom"),editor.alignShapes(editor.selectedShapeIds,"bottom")))}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("distribute-shapes",{operation:"horizontal",source}),editor.mark("distribute horizontal"),editor.distributeShapes(editor.selectedShapeIds,"horizontal")))}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("distribute-shapes",{operation:"vertical",source}),editor.mark("distribute vertical"),editor.distributeShapes(editor.selectedShapeIds,"vertical")))}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("stretch-shapes",{operation:"horizontal",source}),editor.mark("stretch horizontal"),editor.stretchShapes(editor.selectedShapeIds,"horizontal")))}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("stretch-shapes",{operation:"vertical",source}),editor.mark("stretch vertical"),editor.stretchShapes(editor.selectedShapeIds,"vertical")))}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("flip-shapes",{operation:"horizontal",source}),editor.mark("flip horizontal"),editor.flipShapes(editor.selectedShapeIds,"horizontal")))}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("flip-shapes",{operation:"vertical",source}),editor.mark("flip vertical"),editor.flipShapes(editor.selectedShapeIds,"vertical")))}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("pack-shapes",{source}),editor.mark("pack"),editor.packShapes(editor.selectedShapeIds,16)))}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("stack-shapes",{operation:"vertical",source}),editor.mark("stack-vertical"),editor.stackShapes(editor.selectedShapeIds,"vertical",16)))}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("stack-shapes",{operation:"horizontal",source}),editor.mark("stack-horizontal"),editor.stackShapes(editor.selectedShapeIds,"horizontal",16)))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("reorder-shapes",{operation:"toFront",source}),editor.mark("bring to front"),editor.bringToFront(editor.selectedShapeIds)))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("reorder-shapes",{operation:"forward",source}),editor.mark("bring forward"),editor.bringForward(editor.selectedShapeIds)))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("reorder-shapes",{operation:"backward",source}),editor.mark("send backward"),editor.sendBackward(editor.selectedShapeIds)))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("reorder-shapes",{operation:"toBack",source}),editor.mark("send to back"),editor.sendToBack(editor.selectedShapeIds)))}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(editor.mark("cut"),cut(source)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||copy(source))}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect(source){navigator.clipboard?.read().then((clipboardItems=>{paste(clipboardItems,source,"context-menu"===source?editor.inputs.currentPagePoint:void 0)}))}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(source){editor.batch((()=>{mustGoBackToSelectToolFirst()||(trackEvent("select-all-shapes",{source}),editor.mark("select all kbd"),editor.selectAll())}))}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("select-none-shapes",{source}),editor.mark("select none"),editor.selectNone()))}},{id:"delete",label:"action.delete",kbd:",del,backspace",icon:"trash",readonlyOk:!1,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("delete-shapes",{source}),editor.mark("delete"),editor.deleteShapes(editor.selectedShapeIds)))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect(source){if(!hasSelectedShapes())return;if(mustGoBackToSelectToolFirst())return;trackEvent("rotate-cw",{source}),editor.mark("rotate-cw");const offset=editor.selectionRotation%(dist_esm.gc0/2),dontUseOffset=(0,dist_esm.C2u)(offset,0)||(0,dist_esm.C2u)(offset,dist_esm.gc0/2);editor.rotateShapesBy(editor.selectedShapeIds,dist_esm.gc0/2-(dontUseOffset?0:offset))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect(source){if(!hasSelectedShapes())return;if(mustGoBackToSelectToolFirst())return;trackEvent("rotate-ccw",{source}),editor.mark("rotate-ccw");const offset=editor.selectionRotation%(dist_esm.gc0/2),offsetCloseToZero=(0,dist_esm.C2u)(offset,0);editor.rotateShapesBy(editor.selectedShapeIds,offsetCloseToZero?-dist_esm.gc0/2:-offset)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(source){trackEvent("zoom-in",{source}),editor.zoomIn(editor.viewportScreenCenter,{duration:dist_esm.KDN})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(source){trackEvent("zoom-out",{source}),editor.zoomOut(editor.viewportScreenCenter,{duration:dist_esm.KDN})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(source){trackEvent("reset-zoom",{source}),editor.resetZoom(editor.viewportScreenCenter,{duration:dist_esm.KDN})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(source){trackEvent("zoom-to-fit",{source}),editor.zoomToFit({duration:dist_esm.KDN})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(source){hasSelectedShapes()&&(mustGoBackToSelectToolFirst()||(trackEvent("zoom-to-selection",{source}),editor.zoomToSelection({duration:dist_esm.KDN})))}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect(source){trackEvent("toggle-snap-mode",{source}),editor.user.updateUserPreferences({isSnapMode:!editor.user.isSnapMode})},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect(source){trackEvent("toggle-dark-mode",{source}),editor.user.updateUserPreferences({isDarkMode:!editor.user.isDarkMode})},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect(source){trackEvent("toggle-reduce-motion",{source}),editor.user.updateUserPreferences({animationSpeed:0===editor.user.animationSpeed?1:0})},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect(source){trackEvent("toggle-transparent",{source}),editor.updateInstanceState({exportBackground:!editor.instanceState.exportBackground},{ephemeral:!0})},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect(source){trackEvent("toggle-tool-lock",{source}),editor.updateInstanceState({isToolLocked:!editor.instanceState.isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",readonlyOk:!1,onSelect(source){trackEvent("unlock-all",{source});const updates=[];for(const shape of editor.currentPageShapes)shape.isLocked&&updates.push({id:shape.id,type:shape.type,isLocked:!1});updates.length>0&&editor.updateShapes(updates)}},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(source){requestAnimationFrame((()=>{editor.batch((()=>{trackEvent("toggle-focus-mode",{source}),clearDialogs(),clearToasts(),editor.updateInstanceState({isFocusMode:!editor.instanceState.isFocusMode})}))}))}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect(source){trackEvent("toggle-grid-mode",{source}),editor.updateInstanceState({isGridMode:!editor.instanceState.isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect(source){trackEvent("toggle-debug-mode",{source}),editor.updateInstanceState({isDebugMode:!editor.instanceState.isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(source){trackEvent("print",{source}),printSelectionOrPages()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(source){trackEvent("exit-pen-mode",{source}),editor.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(source){trackEvent("stop-following",{source}),editor.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(source){trackEvent("zoom-to-content",{source}),editor.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!l",onSelect(source){editor.mark("locking"),trackEvent("toggle-lock",{source}),editor.toggleLock(editor.selectedShapeIds)}}]);return overrides?overrides(editor,actions2,void 0):actions2}),[trackEvent,overrides,editor,addDialog,insertMedia,exportAs,copyAs,cut,copy,paste,clearDialogs,clearToasts,printSelectionOrPages]);return(0,jsx_runtime.jsx)(ActionsContext.Provider,{value:actions,children})}function useActions(){const ctx=react.useContext(ActionsContext);if(!ctx)throw new Error("useTools must be used within a ToolProvider");return ctx}function compactMenuItems(arr){return arr.filter((i=>null!=i&&!1!==i))}function menuGroup(id,...children){const childItems=compactMenuItems(children);return 0===childItems.length?null:{id,type:"group",checkbox:childItems.every((child=>"item"===child.type&&child.actionItem.checkbox)),disabled:childItems.every((child=>child.disabled)),readonlyOk:childItems.some((child=>child.readonlyOk)),children:childItems}}function menuSubmenu(id,label,...children){const childItems=compactMenuItems(children);return 0===childItems.length?null:{id,type:"submenu",label,children:childItems,disabled:childItems.every((child=>child.disabled)),readonlyOk:childItems.some((child=>child.readonlyOk))}}function menuCustom(id,opts={}){const{readonlyOk=!0,disabled=!1}=opts;return{id,type:"custom",disabled,readonlyOk}}function menuItem(actionItem,opts={}){if(!actionItem)throw Error("No action item provided to menuItem");if(!actionItem.label)throw Error("Trying to create menu item for action item that doesn't have a label");const{checked=!1,disabled=!1}=opts;return{id:actionItem.id,type:"item",actionItem,disabled,checked,readonlyOk:actionItem.readonlyOk}}function shapesWithUnboundArrows(editor){const{selectedShapeIds}=editor;return selectedShapeIds.map((id=>editor.getShape(id))).filter((shape=>!!shape&&((!editor.isShapeOfType(shape,"arrow")||"binding"!==shape.props.start.type)&&(!editor.isShapeOfType(shape,"arrow")||"binding"!==shape.props.end.type))))}const useThreeStackableItems=()=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("threeStackableItems",(()=>shapesWithUnboundArrows(editor).length>2),[editor])},useAllowGroup=()=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("allowGroup",(()=>shapesWithUnboundArrows(editor).length>1),[editor])},useAllowUngroup=()=>{const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("allowUngroup",(()=>editor.selectedShapeIds.some((id=>"group"===editor.getShape(id)?.type))),[])};const showMenuPaste="undefined"!=typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),PORTRAIT_BREAKPOINTS=[0,380,420,460,580,640,840,1023],BreakpointContext=react.createContext(0);function BreakPointProvider({children}){const editor=(0,dist_esm.jE2)(),breakpoint=(0,dist_esm.HgN)("breakpoint",(()=>{const{width}=editor.viewportScreenBounds,breakpoints=PORTRAIT_BREAKPOINTS;for(let i=0;i<breakpoints.length-1;i++)if(width>breakpoints[i]&&width<=breakpoints[i+1])return i;return breakpoints.length}),[editor]);return(0,jsx_runtime.jsx)(BreakpointContext.Provider,{value:breakpoint,children})}function useBreakpoint(){let breakpoint=(0,react.useContext)(BreakpointContext);const layoutQuery=new URL(window.location.href).searchParams.get("layout");return"desktop"===layoutQuery?breakpoint=7:"mobile"===layoutQuery&&(breakpoint=1),breakpoint}function useHasLinkShapeSelected(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("hasLinkShapeSelected",(()=>{const{selectedShapes}=editor;return 1===selectedShapes.length&&"url"in selectedShapes[0].props&&"embed"!==selectedShapes[0].type}),[editor])}const ActionsMenuSchemaContext=react.createContext({}),ActionsMenuSchemaProvider=(0,dist_esm.jas)((function ActionsMenuSchemaProvider2({overrides,children}){const editor=(0,dist_esm.jE2)(),actions=useActions(),selectedCount=editor.selectedShapeIds.length,oneSelected=selectedCount>0,twoSelected=selectedCount>1,threeSelected=selectedCount>2,threeStackableItems=useThreeStackableItems(),allowGroup=useAllowGroup(),allowUngroup=useAllowUngroup(),showEditLink=useHasLinkShapeSelected(),breakpoint=useBreakpoint(),isZoomedTo100=1===editor.zoomLevel,actionTLUiMenuSchema=(0,react.useMemo)((()=>{const results=[menuItem(actions["align-left"],{disabled:!twoSelected}),menuItem(actions["align-center-horizontal"],{disabled:!twoSelected}),menuItem(actions["align-right"],{disabled:!twoSelected}),menuItem(actions["stretch-horizontal"],{disabled:!twoSelected}),menuItem(actions["align-top"],{disabled:!twoSelected}),menuItem(actions["align-center-vertical"],{disabled:!twoSelected}),menuItem(actions["align-bottom"],{disabled:!twoSelected}),menuItem(actions["stretch-vertical"],{disabled:!twoSelected}),menuItem(actions["distribute-horizontal"],{disabled:!threeSelected}),menuItem(actions["distribute-vertical"],{disabled:!threeSelected}),menuItem(actions["stack-horizontal"],{disabled:!threeStackableItems}),menuItem(actions["stack-vertical"],{disabled:!threeStackableItems}),menuItem(actions["send-to-back"],{disabled:!oneSelected}),menuItem(actions["send-backward"],{disabled:!oneSelected}),menuItem(actions["bring-forward"],{disabled:!oneSelected}),menuItem(actions["bring-to-front"],{disabled:!oneSelected}),breakpoint<5?menuItem(actions["zoom-to-100"],{disabled:!!isZoomedTo100}):menuItem(actions["rotate-ccw"],{disabled:!oneSelected}),menuItem(actions["rotate-cw"],{disabled:!oneSelected}),menuItem(actions["edit-link"],{disabled:!showEditLink}),allowGroup?menuItem(actions.group,{disabled:!twoSelected}):allowUngroup?menuItem(actions.ungroup):menuItem(actions.group,{disabled:!twoSelected})];return overrides?overrides(editor,results,{actions,oneSelected,twoSelected,threeSelected}):results}),[editor,isZoomedTo100,allowGroup,overrides,actions,oneSelected,twoSelected,threeSelected,threeStackableItems,allowUngroup,showEditLink,breakpoint]);return(0,jsx_runtime.jsx)(ActionsMenuSchemaContext.Provider,{value:actionTLUiMenuSchema,children})}));function useShowAutoSizeToggle(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("showAutoSizeToggle",(()=>{const{selectedShapes}=editor;return 1===selectedShapes.length&&editor.isShapeOfType(selectedShapes[0],"text")&&!1===selectedShapes[0].props.autoSize}),[editor])}const TLUiContextMenuSchemaContext=react.createContext({}),TLUiContextMenuSchemaProvider=(0,dist_esm.jas)((function TLUiContextMenuSchemaProvider2({overrides,children}){const editor=(0,dist_esm.jE2)(),actions=useActions(),showAutoSizeToggle=useShowAutoSizeToggle(),onlyFlippableShapeSelected=function useOnlyFlippableShape(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("onlyFlippableShape",(()=>{const{selectedShapes}=editor;return 1===selectedShapes.length&&selectedShapes.every((shape=>editor.isShapeOfType(shape,"group")||editor.isShapeOfType(shape,"arrow")||editor.isShapeOfType(shape,"line")||editor.isShapeOfType(shape,"draw")))}),[editor])}(),selectedCount=editor.selectedShapeIds.length,oneSelected=selectedCount>0,twoSelected=selectedCount>1,threeSelected=selectedCount>2,threeStackableItems=useThreeStackableItems(),atLeastOneShapeOnPage=(0,dist_esm.HgN)("atLeastOneShapeOnPage",(()=>editor.currentPageShapeIds.size>0),[]),isTransparentBg=(0,dist_esm.HgN)("isTransparentBg",(()=>editor.instanceState.exportBackground),[]),allowGroup=useAllowGroup(),allowUngroup=useAllowUngroup(),hasClipboardWrite=Boolean(window.navigator.clipboard?.write),showEditLink=useHasLinkShapeSelected(),{onlySelectedShape}=editor,isShapeLocked=onlySelectedShape&&editor.isShapeOrAncestorLocked(onlySelectedShape),contextTLUiMenuSchema=(0,react.useMemo)((()=>{let contextTLUiMenuSchema2=compactMenuItems([menuGroup("selection",showAutoSizeToggle&&menuItem(actions["toggle-auto-size"]),showEditLink&&!isShapeLocked&&menuItem(actions["edit-link"]),oneSelected&&!isShapeLocked&&menuItem(actions.duplicate),allowGroup&&!isShapeLocked&&menuItem(actions.group),allowUngroup&&!isShapeLocked&&menuItem(actions.ungroup),oneSelected&&menuItem(actions["toggle-lock"])),menuGroup("modify",(twoSelected||onlyFlippableShapeSelected)&&menuSubmenu("arrange","context-menu.arrange",twoSelected&&menuGroup("align",menuItem(actions["align-left"]),menuItem(actions["align-center-horizontal"]),menuItem(actions["align-right"]),menuItem(actions["align-top"]),menuItem(actions["align-center-vertical"]),menuItem(actions["align-bottom"])),threeSelected&&menuGroup("distribute",menuItem(actions["distribute-horizontal"]),menuItem(actions["distribute-vertical"])),twoSelected&&menuGroup("stretch",menuItem(actions["stretch-horizontal"]),menuItem(actions["stretch-vertical"])),onlyFlippableShapeSelected&&!isShapeLocked&&menuGroup("flip",menuItem(actions["flip-horizontal"]),menuItem(actions["flip-vertical"])),twoSelected&&menuGroup("order",menuItem(actions.pack,{disabled:!twoSelected}),threeStackableItems&&menuItem(actions["stack-vertical"]),threeStackableItems&&menuItem(actions["stack-horizontal"]))),oneSelected&&!isShapeLocked&&menuSubmenu("reorder","context-menu.reorder",menuGroup("reorder",menuItem(actions["bring-to-front"]),menuItem(actions["bring-forward"]),menuItem(actions["send-backward"]),menuItem(actions["send-to-back"]))),oneSelected&&!isShapeLocked&&menuCustom("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),menuGroup("clipboard-group",oneSelected&&!isShapeLocked&&menuItem(actions.cut),oneSelected&&menuItem(actions.copy),showMenuPaste&&menuItem(actions.paste)),atLeastOneShapeOnPage&&menuGroup("conversions",menuSubmenu("copy-as","context-menu.copy-as",menuGroup("copy-as-group",menuItem(actions["copy-as-svg"]),hasClipboardWrite&&menuItem(actions["copy-as-png"]),menuItem(actions["copy-as-json"])),menuGroup("export-bg",menuItem(actions["toggle-transparent"],{checked:!isTransparentBg}))),menuSubmenu("export-as","context-menu.export-as",menuGroup("export-as-group",menuItem(actions["export-as-svg"]),menuItem(actions["export-as-png"]),menuItem(actions["export-as-json"])),menuGroup("export-bg,",menuItem(actions["toggle-transparent"],{checked:!isTransparentBg})))),atLeastOneShapeOnPage&&menuGroup("set-selection-group",menuItem(actions["select-all"]),oneSelected&&menuItem(actions["select-none"])),oneSelected&&!isShapeLocked&&menuGroup("delete-group",menuItem(actions.delete))]);return overrides&&(contextTLUiMenuSchema2=overrides(editor,contextTLUiMenuSchema2,{actions,oneSelected,twoSelected,threeSelected,showAutoSizeToggle,showUngroup:allowUngroup,onlyFlippableShapeSelected})),contextTLUiMenuSchema2}),[editor,overrides,actions,oneSelected,twoSelected,threeSelected,showAutoSizeToggle,onlyFlippableShapeSelected,atLeastOneShapeOnPage,threeStackableItems,allowGroup,allowUngroup,hasClipboardWrite,showEditLink,isTransparentBg,isShapeLocked]);return(0,jsx_runtime.jsx)(TLUiContextMenuSchemaContext.Provider,{value:contextTLUiMenuSchema,children})}));function useContextMenuSchema(){const ctx=react.useContext(TLUiContextMenuSchemaContext);if(!ctx)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return ctx}const ToolsContext=react.createContext({});function ToolsProvider({overrides,children}){const editor=(0,dist_esm.jE2)(),trackEvent=useUiEvents(),{addDialog}=useDialogs(),insertMedia=useInsertMedia(),tools=react.useMemo((()=>{const toolsArray=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(source){editor.setCurrentTool("select"),trackEvent("select-tool",{source,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(source){editor.setCurrentTool("hand"),trackEvent("select-tool",{source,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect(source){editor.setCurrentTool("eraser"),trackEvent("select-tool",{source,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect(source){editor.setCurrentTool("draw"),trackEvent("select-tool",{source,id:"draw"})}},...[...dist_esm.Zuj.values].map((id=>({id,label:`tool.${id}`,readonlyOk:!1,meta:{geo:id},kbd:"rectangle"===id?"r":"ellipse"===id?"o":void 0,icon:"geo-"+id,onSelect(source){editor.batch((()=>{editor.updateInstanceState({stylesForNextShape:{...editor.instanceState.stylesForNextShape,[dist_esm.Zuj.id]:id}},{ephemeral:!0}),editor.setCurrentTool("geo"),trackEvent("select-tool",{source,id:`geo-${id}`})}))}}))),{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect(source){editor.setCurrentTool("arrow"),trackEvent("select-tool",{source,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect(source){editor.setCurrentTool("line"),trackEvent("select-tool",{source,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect(source){editor.setCurrentTool("frame"),trackEvent("select-tool",{source,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect(source){editor.setCurrentTool("text"),trackEvent("select-tool",{source,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect(source){insertMedia(),trackEvent("select-tool",{source,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect(source){editor.setCurrentTool("note"),trackEvent("select-tool",{source,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(source){editor.setCurrentTool("laser"),trackEvent("select-tool",{source,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect(source){addDialog({component:EmbedDialog}),trackEvent("select-tool",{source,id:"embed"})}}];toolsArray.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect(source){editor.setCurrentTool("highlight"),trackEvent("select-tool",{source,id:"highlight"})}});const tools2=Object.fromEntries(toolsArray.map((t=>[t.id,t])));return overrides?overrides(editor,tools2,{insertMedia}):tools2}),[overrides,editor,trackEvent,insertMedia,addDialog]);return(0,jsx_runtime.jsx)(ToolsContext.Provider,{value:tools,children})}function useTools(){const ctx=react.useContext(ToolsContext);if(!ctx)throw new Error("useTools must be used within a ToolProvider");return ctx}const KeyboardShortcutsSchemaContext=react.createContext({}),KeyboardShortcutsSchemaProvider=(0,dist_esm.jas)((function KeyboardShortcutsSchemaProvider2({overrides,children}){const editor=(0,dist_esm.jE2)(),tools=useTools(),actions=useActions(),keyboardShortcutsSchema=(0,react.useMemo)((()=>{const keyboardShortcutsSchema2=(0,dist_esm.oA$)([menuGroup("shortcuts-dialog.tools",menuItem(actions["toggle-tool-lock"]),menuItem(tools.select),menuItem(tools.draw),menuItem(tools.eraser),menuItem(tools.hand),menuItem(tools.rectangle),menuItem(tools.ellipse),menuItem(tools.arrow),menuItem(tools.line),menuItem(tools.text),menuItem(tools.frame),menuItem(tools.note),menuItem(tools.laser)),menuGroup("shortcuts-dialog.file",menuItem(actions["insert-media"]),menuItem(actions.print)),menuGroup("shortcuts-dialog.preferences",menuItem(actions["toggle-dark-mode"]),menuItem(actions["toggle-focus-mode"]),menuItem(actions["toggle-grid"])),menuGroup("shortcuts-dialog.edit",menuItem(actions.undo),menuItem(actions.redo),menuItem(actions.cut),menuItem(actions.copy),menuItem(actions.paste),menuItem(actions["select-all"]),menuItem(actions.delete),menuItem(actions.duplicate),menuItem(actions["export-as-svg"]),menuItem(actions["export-as-png"])),menuGroup("shortcuts-dialog.view",menuItem(actions["zoom-in"]),menuItem(actions["zoom-out"]),menuItem(actions["zoom-to-100"]),menuItem(actions["zoom-to-fit"]),menuItem(actions["zoom-to-selection"])),menuGroup("shortcuts-dialog.transform",menuItem(actions["bring-to-front"]),menuItem(actions["bring-forward"]),menuItem(actions["send-backward"]),menuItem(actions["send-to-back"]),menuItem(actions.group),menuItem(actions.ungroup),menuItem(actions["flip-horizontal"]),menuItem(actions["flip-vertical"]),menuItem(actions["align-top"]),menuItem(actions["align-center-vertical"]),menuItem(actions["align-bottom"]),menuItem(actions["align-left"]),menuItem(actions["align-center-horizontal"]),menuItem(actions["align-right"]))]);return overrides?overrides(editor,keyboardShortcutsSchema2,{tools,actions}):keyboardShortcutsSchema2}),[editor,overrides,actions,tools]);return(0,jsx_runtime.jsx)(KeyboardShortcutsSchemaContext.Provider,{value:keyboardShortcutsSchema,children})}));const KeyboardShortcutsDialog=()=>{const msg=useTranslation_useTranslation(),isReadonly=useReadonly(),shortcutsItems=function useKeyboardShortcutsSchema(){const ctx=react.useContext(KeyboardShortcutsSchemaContext);if(!ctx)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return ctx}();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Header,{className:"tlui-shortcuts-dialog__header",children:[(0,jsx_runtime.jsx)(Title,{children:msg("shortcuts-dialog.title")}),(0,jsx_runtime.jsx)(CloseButton,{})]}),(0,jsx_runtime.jsx)(Body,{className:"tlui-shortcuts-dialog__body",children:shortcutsItems.map((function getKeyboardShortcutItem(item){if(isReadonly&&!item.readonlyOk)return null;switch(item.type){case"group":return(0,jsx_runtime.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,jsx_runtime.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:msg(item.id)}),(0,jsx_runtime.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:item.children.filter((item2=>"item"===item2.type&&item2.actionItem.kbd)).map(getKeyboardShortcutItem)})]},item.id);case"item":{const{id,label,shortcutsLabel,kbd}=item.actionItem;return(0,jsx_runtime.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,jsx_runtime.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:msg(shortcutsLabel??label)}),(0,jsx_runtime.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,jsx_runtime.jsx)(Kbd,{children:kbd})})]},id)}}}))}),(0,jsx_runtime.jsx)("div",{className:"tlui-dialog__scrim"})]})};function useLanguages(){const editor=(0,dist_esm.jE2)();return{languages:dist_esm.a2c,currentLanguage:editor.user.locale}}const HelpMenuSchemaContext=react.createContext({}),HelpMenuSchemaProvider=(0,dist_esm.jas)((function HelpMenuSchemaProvider2({overrides,children}){const editor=(0,dist_esm.jE2)(),actions=useActions(),selectedCount=editor.selectedShapeIds.length,oneSelected=selectedCount>0,twoSelected=selectedCount>1,threeSelected=selectedCount>2,{languages,currentLanguage}=useLanguages(),{addDialog}=useDialogs(),helpTLUiMenuSchema=(0,react.useMemo)((()=>{const helpTLUiMenuSchema2=(0,dist_esm.oA$)([menuGroup("top",menuCustom("LANGUAGE_MENU",{readonlyOk:!0}),menuItem({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect(){addDialog({component:KeyboardShortcutsDialog})}}))]);return overrides?overrides(editor,helpTLUiMenuSchema2,{actions,currentLanguage,languages,oneSelected,twoSelected,threeSelected}):helpTLUiMenuSchema2}),[editor,overrides,languages,actions,oneSelected,twoSelected,threeSelected,currentLanguage,addDialog]);return(0,jsx_runtime.jsx)(HelpMenuSchemaContext.Provider,{value:helpTLUiMenuSchema,children})}));function useCanRedo(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("useCanRedo",(()=>editor.canRedo),[editor])}function useCanUndo(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("useCanUndo",(()=>editor.canUndo),[editor])}const TLUiMenuSchemaContext=react.createContext({});function TLUiMenuSchemaProvider({overrides,children}){const editor=(0,dist_esm.jE2)(),actions=useActions(),isMobile=useBreakpoint()<5,isDarkMode=(0,dist_esm.HgN)("isDarkMode",(()=>editor.user.isDarkMode),[editor]),animationSpeed=(0,dist_esm.HgN)("animationSpeed",(()=>editor.user.animationSpeed),[editor]),isGridMode=(0,dist_esm.HgN)("isGridMode",(()=>editor.instanceState.isGridMode),[editor]),isSnapMode=(0,dist_esm.HgN)("isSnapMode",(()=>editor.user.isSnapMode),[editor]),isToolLock=(0,dist_esm.HgN)("isToolLock",(()=>editor.instanceState.isToolLocked),[editor]),isFocusMode=(0,dist_esm.HgN)("isFocusMode",(()=>editor.instanceState.isFocusMode),[editor]),isDebugMode=(0,dist_esm.HgN)("isDebugMode",(()=>editor.instanceState.isDebugMode),[editor]),exportBackground=(0,dist_esm.HgN)("exportBackground",(()=>editor.instanceState.exportBackground),[editor]),emptyPage=(0,dist_esm.HgN)("emptyPage",(()=>0===editor.currentPageShapeIds.size),[editor]),selectedCount=(0,dist_esm.HgN)("selectedCount",(()=>editor.selectedShapeIds.length),[editor]),noneSelected=0===selectedCount,oneSelected=selectedCount>0,twoSelected=selectedCount>1,threeSelected=selectedCount>2,hasClipboardWrite=Boolean(window.navigator.clipboard?.write),showEditLink=useHasLinkShapeSelected(),showAutoSizeToggle=useShowAutoSizeToggle(),allowGroup=useAllowGroup(),allowUngroup=useAllowUngroup(),canUndo=useCanUndo(),canRedo=useCanRedo(),isZoomedTo100=(0,dist_esm.HgN)("isZoomedTo100",(()=>1===editor.zoomLevel),[editor]),oneEmbedSelected=(0,dist_esm.HgN)("oneEmbedSelected",(()=>{const{onlySelectedShape}=editor;return!!onlySelectedShape&&!(!editor.isShapeOfType(onlySelectedShape,"embed")||!onlySelectedShape.props.url||editor.isShapeOrAncestorLocked(onlySelectedShape))}),[]),oneEmbeddableBookmarkSelected=(0,dist_esm.HgN)("oneEmbeddableBookmarkSelected",(()=>{const{onlySelectedShape}=editor;return!!onlySelectedShape&&!(!(editor.isShapeOfType(onlySelectedShape,"bookmark")&&onlySelectedShape.props.url&&getEmbedInfo(onlySelectedShape.props.url))||editor.isShapeOrAncestorLocked(onlySelectedShape))}),[]),menuSchema=(0,react.useMemo)((()=>{const menuSchema2=compactMenuItems([menuGroup("menu",menuSubmenu("file","menu.file",menuGroup("print",menuItem(actions.print,{disabled:emptyPage}))),menuSubmenu("edit","menu.edit",menuGroup("undo-actions",menuItem(actions.undo,{disabled:!canUndo}),menuItem(actions.redo,{disabled:!canRedo})),menuGroup("clipboard-actions",menuItem(actions.cut,{disabled:noneSelected}),menuItem(actions.copy,{disabled:noneSelected}),menuItem(actions.paste,{disabled:!showMenuPaste})),menuGroup("conversions",menuSubmenu("copy-as","menu.copy-as",menuGroup("copy-as-group",menuItem(actions["copy-as-svg"],{disabled:emptyPage}),menuItem(actions["copy-as-png"],{disabled:emptyPage||!hasClipboardWrite}),menuItem(actions["copy-as-json"],{disabled:emptyPage})),menuGroup("export-bg",menuItem(actions["toggle-transparent"],{checked:!exportBackground}))),menuSubmenu("export-as","menu.export-as",menuGroup("export-as-group",menuItem(actions["export-as-svg"],{disabled:emptyPage}),menuItem(actions["export-as-png"],{disabled:emptyPage}),menuItem(actions["export-as-json"],{disabled:emptyPage})),menuGroup("export-bg",menuItem(actions["toggle-transparent"],{checked:!exportBackground})))),menuGroup("set-selection-group",menuItem(actions["select-all"],{disabled:emptyPage}),menuItem(actions["select-none"],{disabled:!oneSelected})),menuGroup("selection",showAutoSizeToggle&&menuItem(actions["toggle-auto-size"]),showEditLink&&menuItem(actions["edit-link"]),menuItem(actions.duplicate,{disabled:!oneSelected}),allowGroup&&menuItem(actions.group),allowUngroup&&menuItem(actions.ungroup),menuItem(actions["unlock-all"],{disabled:emptyPage})),menuGroup("delete-group",menuItem(actions.delete,{disabled:!oneSelected})),menuGroup("embeds",oneEmbedSelected&&menuItem(actions["open-embed-link"]),oneEmbedSelected&&menuItem(actions["convert-to-bookmark"]),oneEmbeddableBookmarkSelected&&menuItem(actions["convert-to-embed"]))),menuSubmenu("view","menu.view",menuGroup("view-actions",menuItem(actions["zoom-in"]),menuItem(actions["zoom-out"]),menuItem(actions["zoom-to-100"],{disabled:isZoomedTo100}),menuItem(actions["zoom-to-fit"],{disabled:emptyPage}),menuItem(actions["zoom-to-selection"],{disabled:emptyPage||!oneSelected})))),menuGroup("extras",menuItem(actions["insert-embed"]),menuItem(actions["insert-media"])),menuGroup("preferences",menuSubmenu("preferences","menu.preferences",menuGroup("preferences-actions",menuItem(actions["toggle-snap-mode"],{checked:isSnapMode}),menuItem(actions["toggle-tool-lock"],{checked:isToolLock}),menuItem(actions["toggle-grid"],{checked:isGridMode}),menuItem(actions["toggle-dark-mode"],{checked:isDarkMode}),menuItem(actions["toggle-focus-mode"],{checked:isFocusMode}),menuItem(actions["toggle-reduce-motion"],{checked:0===animationSpeed}),menuItem(actions["toggle-debug-mode"],{checked:isDebugMode}))),isMobile&&menuCustom("LANGUAGE_MENU",{readonlyOk:!0}))]);return overrides?overrides(editor,menuSchema2,{actions,noneSelected,oneSelected,twoSelected,threeSelected}):menuSchema2}),[editor,overrides,actions,oneSelected,twoSelected,threeSelected,emptyPage,isMobile,allowGroup,allowUngroup,showEditLink,hasClipboardWrite,showAutoSizeToggle,noneSelected,canUndo,canRedo,animationSpeed,isDarkMode,isGridMode,isSnapMode,isToolLock,isFocusMode,exportBackground,isDebugMode,isZoomedTo100,oneEmbeddableBookmarkSelected,oneEmbedSelected]);return(0,jsx_runtime.jsx)(TLUiMenuSchemaContext.Provider,{value:menuSchema,children})}function toolbarItem(toolItem){return{id:toolItem.id,type:"item",readonlyOk:toolItem.readonlyOk,toolItem}}const ToolbarSchemaContext=react.createContext([]);function ToolbarSchemaProvider({overrides,children}){const editor=(0,dist_esm.jE2)(),tools=useTools(),toolbarSchema=react.useMemo((()=>{const schema=(0,dist_esm.oA$)([toolbarItem(tools.select),toolbarItem(tools.hand),toolbarItem(tools.draw),toolbarItem(tools.eraser),toolbarItem(tools.arrow),toolbarItem(tools.text),toolbarItem(tools.note),toolbarItem(tools.asset),toolbarItem(tools.rectangle),toolbarItem(tools.ellipse),toolbarItem(tools.diamond),toolbarItem(tools.triangle),toolbarItem(tools.trapezoid),toolbarItem(tools.rhombus),toolbarItem(tools.hexagon),toolbarItem(tools.cloud),toolbarItem(tools.star),toolbarItem(tools.oval),toolbarItem(tools["x-box"]),toolbarItem(tools["check-box"]),toolbarItem(tools["arrow-left"]),toolbarItem(tools["arrow-up"]),toolbarItem(tools["arrow-down"]),toolbarItem(tools["arrow-right"]),toolbarItem(tools.frame),toolbarItem(tools.line),toolbarItem(tools.highlight),toolbarItem(tools.laser)]);return overrides?overrides(editor,schema,{tools}):schema}),[editor,overrides,tools]);return(0,jsx_runtime.jsx)(ToolbarSchemaContext.Provider,{value:toolbarSchema,children})}function useShallowArrayEquality(array){return(0,react.useMemo)((()=>array),array)}function useMergedTranslationOverrides(overrides){const overridesArray=useShallowArrayEquality(null==overrides?[]:Array.isArray(overrides)?overrides:[overrides]);return(0,react.useMemo)((()=>{const mergedTranslations={};for(const override of overridesArray)if(override.translations)for(const[key,value]of(0,dist_esm.EPv)(override.translations)){let strings=mergedTranslations[key];strings||(strings=mergedTranslations[key]={}),Object.assign(strings,value)}return mergedTranslations}),[overridesArray])}function useMergedOverrides(overrides){const defaultHelpers=function useDefaultHelpers(){const{addToast,removeToast,clearToasts}=useToasts(),{addDialog,clearDialogs,removeDialog,updateDialog}=useDialogs(),isMobile=useBreakpoint()<5,msg=useTranslation_useTranslation();return(0,react.useMemo)((()=>({addToast,removeToast,clearToasts,addDialog,clearDialogs,removeDialog,updateDialog,msg,isMobile})),[addDialog,addToast,clearDialogs,clearToasts,msg,removeDialog,removeToast,updateDialog,isMobile])}(),overridesArray=useShallowArrayEquality(null==overrides?[]:Array.isArray(overrides)?overrides:[overrides]);return(0,react.useMemo)((()=>function mergeOverrides(overrides,defaultHelpers){const mergedTranslations={};for(const override of overrides)if(override.translations)for(const[key,value]of(0,dist_esm.EPv)(override.translations)){let strings=mergedTranslations[key];strings||(strings=mergedTranslations[key]={}),Object.assign(strings,value)}return{actionsMenu:(editor,schema,helpers)=>{for(const override of overrides)override.actionsMenu&&(schema=override.actionsMenu(editor,schema,{...defaultHelpers,...helpers}));return schema},actions:(editor,schema)=>{for(const override of overrides)override.actions&&(schema=override.actions(editor,schema,defaultHelpers));return schema},contextMenu:(editor,schema,helpers)=>{for(const override of overrides)override.contextMenu&&(schema=override.contextMenu(editor,schema,{...defaultHelpers,...helpers}));return schema},helpMenu:(editor,schema,helpers)=>{for(const override of overrides)override.helpMenu&&(schema=override.helpMenu(editor,schema,{...defaultHelpers,...helpers}));return schema},menu:(editor,schema,helpers)=>{for(const override of overrides)override.menu&&(schema=override.menu(editor,schema,{...defaultHelpers,...helpers}));return schema},toolbar:(editor,schema,helpers)=>{for(const override of overrides)override.toolbar&&(schema=override.toolbar(editor,schema,{...defaultHelpers,...helpers}));return schema},keyboardShortcutsMenu:(editor,schema,helpers)=>{for(const override of overrides)override.keyboardShortcutsMenu&&(schema=override.keyboardShortcutsMenu(editor,schema,{...defaultHelpers,...helpers}));return schema},tools:(editor,schema,helpers)=>{for(const override of overrides)override.tools&&(schema=override.tools(editor,schema,{...defaultHelpers,...helpers}));return schema},translations:mergedTranslations}}(overridesArray,defaultHelpers)),[overridesArray,defaultHelpers])}function TldrawUiContextProvider({overrides,assetUrls,onUiEvent,children}){return(0,jsx_runtime.jsx)(AssetUrlsProvider,{assetUrls:useDefaultUiAssetUrlsWithOverrides(assetUrls),children:(0,jsx_runtime.jsx)(TranslationProvider,{overrides:useMergedTranslationOverrides(overrides),children:(0,jsx_runtime.jsx)(UiEventsProvider,{onEvent:onUiEvent,children:(0,jsx_runtime.jsx)(ToastsProvider,{children:(0,jsx_runtime.jsx)(DialogsProvider,{children:(0,jsx_runtime.jsx)(BreakPointProvider,{children:(0,jsx_runtime.jsx)(InternalProviders,{overrides,children})})})})})})})}function InternalProviders({overrides,children}){const mergedOverrides=useMergedOverrides(overrides);return(0,jsx_runtime.jsx)(ActionsProvider,{overrides:mergedOverrides.actions,children:(0,jsx_runtime.jsx)(ToolsProvider,{overrides:mergedOverrides.tools,children:(0,jsx_runtime.jsx)(ToolbarSchemaProvider,{overrides:mergedOverrides.toolbar,children:(0,jsx_runtime.jsx)(ActionsMenuSchemaProvider,{overrides:mergedOverrides.actionsMenu,children:(0,jsx_runtime.jsx)(KeyboardShortcutsSchemaProvider,{overrides:mergedOverrides.keyboardShortcutsMenu,children:(0,jsx_runtime.jsx)(TLUiContextMenuSchemaProvider,{overrides:mergedOverrides.contextMenu,children:(0,jsx_runtime.jsx)(HelpMenuSchemaProvider,{overrides:mergedOverrides.helpMenu,children:(0,jsx_runtime.jsx)(TLUiMenuSchemaProvider,{overrides:mergedOverrides.menu,children})})})})})})})})}function BackToContent(){const editor=(0,dist_esm.jE2)(),action=useActions()["back-to-content"],[showBackToContent,setShowBackToContent]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{let showBackToContentPrev=!1;const interval=setInterval((()=>{const{renderingShapes,renderingBounds}=editor,visibleShapes=renderingShapes.filter((s=>s.maskedPageBounds&&renderingBounds.includes(s.maskedPageBounds))),showBackToContentNow=0===visibleShapes.length&&editor.currentPageShapes.length>0;showBackToContentPrev!==showBackToContentNow&&(setShowBackToContent(showBackToContentNow),showBackToContentPrev=showBackToContentNow)}),1e3);return()=>{clearInterval(interval)}}),[editor]),showBackToContent?(0,jsx_runtime.jsx)(Button,{iconLeft:action.icon,label:action.label,onClick:()=>{action.onSelect("helper-buttons"),setShowBackToContent(!1)}}):null}let t=0;const DebugPanel=react.memo((function DebugPanel2({renderDebugMenuItems}){const msg=useTranslation_useTranslation();return(0,jsx_runtime.jsxs)("div",{className:"tlui-debug-panel",children:[(0,jsx_runtime.jsx)(CurrentState,{}),(0,jsx_runtime.jsx)(ShapeCount,{}),(0,jsx_runtime.jsxs)(Root,{id:"debug",children:[(0,jsx_runtime.jsx)(Trigger,{children:(0,jsx_runtime.jsx)(Button,{icon:"dots-horizontal",title:msg("debug-panel.more")})}),(0,jsx_runtime.jsx)(Content,{side:"top",align:"end",alignOffset:0,children:(0,jsx_runtime.jsx)(DebugMenuContent,{renderDebugMenuItems})})]})]})})),CurrentState=(0,dist_esm.jas)((function CurrentState2(){const editor=(0,dist_esm.jE2)();return(0,jsx_runtime.jsx)("div",{className:"tlui-debug-panel__current-state",children:editor.root.path.value})})),ShapeCount=function ShapeCount2(){const editor=(0,dist_esm.jE2)(),count=(0,dist_esm.HgN)("rendering shapes count",(()=>editor.renderingShapes.length),[editor]);return(0,jsx_runtime.jsxs)("div",{children:[count," Shapes"]})},DebugMenuContent=(0,dist_esm.jas)((function DebugMenuContent2({renderDebugMenuItems}){const editor=(0,dist_esm.jE2)(),{addToast}=useToasts(),{addDialog}=useDialogs(),[error,setError]=react.useState(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Group,{children:[(0,jsx_runtime.jsx)(Item,{onClick:()=>{addToast({id:(0,dist_esm.ELf)(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,jsx_runtime.jsx)("span",{children:"Show toast"})}),(0,jsx_runtime.jsx)(Item,{onClick:()=>{addDialog({component:({onClose})=>(0,jsx_runtime.jsx)(ExampleDialog,{displayDontShowAgain:!0,onCancel:()=>{onClose()},onContinue:()=>{onClose()}}),onClose:()=>{}})},children:(0,jsx_runtime.jsx)("span",{children:"Show dialog"})}),(0,jsx_runtime.jsx)(Item,{onClick:()=>function createNShapes(editor,n){const shapesToCreate=Array(n),cols=Math.floor(Math.sqrt(n));for(let i=0;i<n;i++)t++,shapesToCreate[i]={id:(0,dist_esm.F17)("box"+t),type:"geo",x:i%cols*132,y:132*Math.floor(i/cols)};editor.batch((()=>{editor.createShapes(shapesToCreate).setSelectedShapes(shapesToCreate.map((s=>s.id)))}))}(editor,100),children:(0,jsx_runtime.jsx)("span",{children:"Create 100 shapes"})}),(0,jsx_runtime.jsx)(Item,{onClick:()=>{function countDescendants({children}){let count=0;if(!children.length)return 0;for(const el of[...children])count++,count+=countDescendants(el);return count}const{selectedShapes}=editor,shapes=0===selectedShapes.length?editor.renderingShapes:selectedShapes,elms=shapes.map((shape=>document.getElementById(shape.id).parentElement));let descendants=elms.length;for(const elm of elms)descendants+=countDescendants(elm);window.alert(`Shapes ${shapes.length}, DOM nodes:${descendants}`)},children:(0,jsx_runtime.jsx)("span",{children:"Count shapes and nodes"})}),(()=>{if(error)throw Error("oh no!")})(),(0,jsx_runtime.jsx)(Item,{onClick:()=>{setError(!0)},children:(0,jsx_runtime.jsx)("span",{children:"Throw error"})}),(0,jsx_runtime.jsx)(Item,{onClick:()=>{(0,dist_esm.WlM)()},children:(0,jsx_runtime.jsx)("span",{children:"Hard reset"})})]}),(0,jsx_runtime.jsxs)(Group,{children:[(0,jsx_runtime.jsx)(DebugFlagToggle,{flag:dist_esm.hR1.debugSvg}),(0,jsx_runtime.jsx)(DebugFlagToggle,{flag:dist_esm.hR1.forceSrgb}),(0,jsx_runtime.jsx)(DebugFlagToggle,{flag:dist_esm.hR1.debugGeometry}),(0,jsx_runtime.jsx)(DebugFlagToggle,{flag:dist_esm.hR1.hideShapes})]}),(0,jsx_runtime.jsx)(Group,{children:Object.values(dist_esm.VHO).map((flag=>(0,jsx_runtime.jsx)(DebugFlagToggle,{flag},flag.name)))}),renderDebugMenuItems?.()]})}));function Toggle({label,value,onChange}){return(0,jsx_runtime.jsx)(CheckboxItem,{title:label,checked:value,onSelect:()=>onChange(!value),children:label})}const DebugFlagToggle=(0,dist_esm.jas)((function DebugFlagToggle2({flag,onChange}){return(0,jsx_runtime.jsx)(Toggle,{label:flag.name.replace(/([a-z0-9])([A-Z])/g,(m=>`${m[0]} ${m[1].toLowerCase()}`)).replace(/^[a-z]/,(m=>m.toUpperCase())),value:flag.value,onChange:newValue=>{flag.set(newValue),onChange?.(newValue)}})}));function ExampleDialog({title="title",body="hello hello hello",cancel="Cancel",confirm="Continue",displayDontShowAgain=!1,onCancel,onContinue}){const[dontShowAgain,setDontShowAgain]=react.useState(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Header,{children:[(0,jsx_runtime.jsx)(Title,{children:title}),(0,jsx_runtime.jsx)(CloseButton,{})]}),(0,jsx_runtime.jsx)(Body,{style:{maxWidth:350},children:body}),(0,jsx_runtime.jsxs)(Footer,{className:"tlui-dialog__footer__actions",children:[displayDontShowAgain&&(0,jsx_runtime.jsx)(Button,{onClick:()=>setDontShowAgain(!dontShowAgain),iconLeft:dontShowAgain?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,jsx_runtime.jsx)(Button,{onClick:onCancel,children:cancel}),(0,jsx_runtime.jsx)(Button,{type:"primary",onClick:async()=>onContinue(),children:confirm})]})]})}const Dialog=({id,component:ModalContent,onClose})=>{const{removeDialog}=useDialogs(),container=(0,dist_esm.uK4)(),handleOpenChange=(0,react.useCallback)((isOpen=>{if(!isOpen){if(onClose)try{onClose()}catch(err){console.warn(err)}removeDialog(id)}}),[id,onClose,removeDialog]);return(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{onOpenChange:handleOpenChange,defaultOpen:!0,children:(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$602eac185826482c,{container,children:(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,jsx_runtime.jsx)($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{dir:"ltr",className:"tlui-dialog__content",children:(0,jsx_runtime.jsx)(ModalContent,{onClose:()=>handleOpenChange(!1)})})})})})};const Dialogs=react.memo((function _Dialogs(){const{dialogs}=useDialogs();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dialogs.map((dialog=>(0,jsx_runtime.jsx)(Dialog,{...dialog},dialog.id)))})}));function FollowingIndicator(){const editor=(0,dist_esm.jE2)(),followingUserId=(0,dist_esm.HgN)("follow",(()=>editor.instanceState.followingUserId),[editor]);return followingUserId?(0,jsx_runtime.jsx)(FollowingIndicatorInner,{userId:followingUserId}):null}function FollowingIndicatorInner({userId}){const presence=(0,dist_esm.oOK)(userId);return presence?(0,jsx_runtime.jsx)("div",{className:"tlui-following",style:{borderColor:presence.color}}):null}function LanguageMenu(){const editor=(0,dist_esm.jE2)(),{languages,currentLanguage}=useLanguages(),handleLanguageSelect=(0,react.useCallback)((locale=>editor.user.updateUserPreferences({locale})),[editor]);return(0,jsx_runtime.jsxs)(Sub,{id:"help menu language",children:[(0,jsx_runtime.jsx)(SubTrigger,{label:"menu.language","data-direction":"left"}),(0,jsx_runtime.jsx)(SubContent,{sideOffset:-4,children:(0,jsx_runtime.jsx)(Group,{children:languages.map((({locale,label})=>(0,jsx_runtime.jsx)(RadioItem,{title:locale,checked:locale===currentLanguage,onSelect:()=>handleLanguageSelect(locale),children:(0,jsx_runtime.jsx)("span",{children:label})},locale)))})})]})}const HelpMenu=react.memo((function HelpMenu2(){const container=(0,dist_esm.uK4)(),msg=useTranslation_useTranslation(),[isOpen,onOpenChange]=useMenuIsOpen("help menu");return(0,jsx_runtime.jsx)("div",{className:"tlui-help-menu",children:(0,jsx_runtime.jsxs)($d08ef79370b62062$export$be92b6f5f03c0fe9,{dir:"ltr",open:isOpen,onOpenChange,modal:!1,children:[(0,jsx_runtime.jsx)($d08ef79370b62062$export$41fb9f06171c75f4,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:msg("help-menu.title"),children:(0,jsx_runtime.jsx)(Icon_Icon,{icon:"question-mark"})}),(0,jsx_runtime.jsx)($d08ef79370b62062$export$602eac185826482c,{container,dir:"ltr",children:(0,jsx_runtime.jsx)($d08ef79370b62062$export$7c6e2c02157bb7d2,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,jsx_runtime.jsx)(HelpMenuContent,{})})})]})})}));function HelpMenuContent(){const menuSchema=function useHelpMenuSchema(){const ctx=react.useContext(HelpMenuSchemaContext);if(!ctx)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return ctx}(),isReadonly=useReadonly();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:menuSchema.map((function getHelpMenuItem(item){if(isReadonly&&!item.readonlyOk)return null;switch(item.type){case"custom":if("LANGUAGE_MENU"===item.id)return(0,jsx_runtime.jsx)(LanguageMenu,{},"item");break;case"group":return(0,jsx_runtime.jsx)(Group,{size:"small",children:item.children.map(getHelpMenuItem)},item.id);case"submenu":return(0,jsx_runtime.jsxs)(Sub,{id:`help menu ${item.id}`,children:[(0,jsx_runtime.jsx)(SubTrigger,{label:item.label}),(0,jsx_runtime.jsx)(SubContent,{children:item.children.map(getHelpMenuItem)})]},item.id);case"item":{const{id,kbd,label,onSelect,icon}=item.actionItem;return(0,jsx_runtime.jsx)(Item,{kbd,label,onClick:()=>onSelect("help-menu"),iconLeft:icon},id)}}}))})}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(originalEventHandler,ourEventHandler,{checkForDefaultPrevented=!0}={}){return function handleEvent(event){if(null==originalEventHandler||originalEventHandler(event),!1===checkForDefaultPrevented||!event.defaultPrevented)return null==ourEventHandler?void 0:ourEventHandler(event)}}function $6ed0406888f73fc4$export$43e446d32b3d21af(...refs){return node=>refs.forEach((ref=>function $6ed0406888f73fc4$var$setRef(ref,value){"function"==typeof ref?ref(value):null!=ref&&(ref.current=value)}(ref,node)))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...refs){return(0,react.useCallback)($6ed0406888f73fc4$export$43e446d32b3d21af(...refs),refs)}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(scopeName,createContextScopeDeps=[]){let defaultContexts=[];const createScope=()=>{const scopeContexts=defaultContexts.map((defaultContext=>(0,react.createContext)(defaultContext)));return function useScope(scope){const contexts=(null==scope?void 0:scope[scopeName])||scopeContexts;return(0,react.useMemo)((()=>({[`__scope${scopeName}`]:{...scope,[scopeName]:contexts}})),[scope,contexts])}};return createScope.scopeName=scopeName,[function $c512c27ab02ef895$export$fd42f52fd3ae1109(rootComponentName,defaultContext){const BaseContext=(0,react.createContext)(defaultContext),index=defaultContexts.length;function Provider(props){const{scope,children,...context}=props,Context=(null==scope?void 0:scope[scopeName][index])||BaseContext,value=(0,react.useMemo)((()=>context),Object.values(context));return(0,react.createElement)(Context.Provider,{value},children)}return defaultContexts=[...defaultContexts,defaultContext],Provider.displayName=rootComponentName+"Provider",[Provider,function useContext(consumerName,scope){const Context=(null==scope?void 0:scope[scopeName][index])||BaseContext,context=(0,react.useContext)(Context);if(context)return context;if(void 0!==defaultContext)return defaultContext;throw new Error(`\`${consumerName}\` must be used within \`${rootComponentName}\``)}]},$c512c27ab02ef895$var$composeContextScopes(createScope,...createContextScopeDeps)]}function $c512c27ab02ef895$var$composeContextScopes(...scopes){const baseScope=scopes[0];if(1===scopes.length)return baseScope;const createScope1=()=>{const scopeHooks=scopes.map((createScope=>({useScope:createScope(),scopeName:createScope.scopeName})));return function useComposedScopes(overrideScopes){const nextScopes1=scopeHooks.reduce(((nextScopes,{useScope,scopeName})=>({...nextScopes,...useScope(overrideScopes)[`__scope${scopeName}`]})),{});return(0,react.useMemo)((()=>({[`__scope${baseScope.scopeName}`]:nextScopes1})),[nextScopes1])}};return createScope1.scopeName=baseScope.scopeName,createScope1}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=(0,react.forwardRef)(((props,forwardedRef)=>{const{children,...slotProps}=props,childrenArray=react.Children.toArray(children),slottable=childrenArray.find($5e63c961fc1ce211$var$isSlottable);if(slottable){const newElement=slottable.props.children,newChildren=childrenArray.map((child=>child===slottable?react.Children.count(newElement)>1?react.Children.only(null):(0,react.isValidElement)(newElement)?newElement.props.children:null:child));return(0,react.createElement)($5e63c961fc1ce211$var$SlotClone,(0,esm_extends.Z)({},slotProps,{ref:forwardedRef}),(0,react.isValidElement)(newElement)?(0,react.cloneElement)(newElement,void 0,newChildren):null)}return(0,react.createElement)($5e63c961fc1ce211$var$SlotClone,(0,esm_extends.Z)({},slotProps,{ref:forwardedRef}),children)}));$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=(0,react.forwardRef)(((props,forwardedRef)=>{const{children,...slotProps}=props;return(0,react.isValidElement)(children)?(0,react.cloneElement)(children,{...$5e63c961fc1ce211$var$mergeProps(slotProps,children.props),ref:$6ed0406888f73fc4$export$43e446d32b3d21af(forwardedRef,children.ref)}):react.Children.count(children)>1?react.Children.only(null):null}));$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children})=>(0,react.createElement)(react.Fragment,null,children);function $5e63c961fc1ce211$var$isSlottable(child){return(0,react.isValidElement)(child)&&child.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(slotProps,childProps){const overrideProps={...childProps};for(const propName in childProps){const slotPropValue=slotProps[propName],childPropValue=childProps[propName];/^on[A-Z]/.test(propName)?slotPropValue&&childPropValue?overrideProps[propName]=(...args)=>{childPropValue(...args),slotPropValue(...args)}:slotPropValue&&(overrideProps[propName]=slotPropValue):"style"===propName?overrideProps[propName]={...slotPropValue,...childPropValue}:"className"===propName&&(overrideProps[propName]=[slotPropValue,childPropValue].filter(Boolean).join(" "))}return{...slotProps,...overrideProps}}const $8927f6f2acc4f386$export$250ffa63cdc0d034=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((primitive,node)=>{const Node=(0,react.forwardRef)(((props,forwardedRef)=>{const{asChild,...primitiveProps}=props,Comp=asChild?$5e63c961fc1ce211$export$8c6ed5c666ac1360:node;return(0,react.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,react.createElement)(Comp,(0,esm_extends.Z)({},primitiveProps,{ref:forwardedRef}))}));return Node.displayName=`Primitive.${node}`,{...primitive,[node]:Node}}),{});function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(callback){const callbackRef=(0,react.useRef)(callback);return(0,react.useEffect)((()=>{callbackRef.current=callback})),(0,react.useMemo)((()=>(...args)=>{var _callbackRef$current;return null===(_callbackRef$current=callbackRef.current)||void 0===_callbackRef$current?void 0:_callbackRef$current.call(callbackRef,...args)}),[])}let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=(0,react.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=(0,react.forwardRef)(((props,forwardedRef)=>{var _node$ownerDocument;const{disableOutsidePointerEvents=!1,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,onDismiss,...layerProps}=props,context=(0,react.useContext)($5cb92bef7577960e$var$DismissableLayerContext),[node1,setNode]=(0,react.useState)(null),ownerDocument=null!==(_node$ownerDocument=null==node1?void 0:node1.ownerDocument)&&void 0!==_node$ownerDocument?_node$ownerDocument:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,force]=(0,react.useState)({}),composedRefs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,(node=>setNode(node))),layers=Array.from(context.layers),[highestLayerWithOutsidePointerEventsDisabled]=[...context.layersWithOutsidePointerEventsDisabled].slice(-1),highestLayerWithOutsidePointerEventsDisabledIndex=layers.indexOf(highestLayerWithOutsidePointerEventsDisabled),index=node1?layers.indexOf(node1):-1,isBodyPointerEventsDisabled=context.layersWithOutsidePointerEventsDisabled.size>0,isPointerEventsEnabled=index>=highestLayerWithOutsidePointerEventsDisabledIndex,pointerDownOutside=function $5cb92bef7577960e$var$usePointerDownOutside(onPointerDownOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handlePointerDownOutside=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onPointerDownOutside),isPointerInsideReactTreeRef=(0,react.useRef)(!1),handleClickRef=(0,react.useRef)((()=>{}));return(0,react.useEffect)((()=>{const handlePointerDown=event=>{if(event.target&&!isPointerInsideReactTreeRef.current){const eventDetail={originalEvent:event};function handleAndDispatchPointerDownOutsideEvent(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.pointerDownOutside",handlePointerDownOutside,eventDetail,{discrete:!0})}"touch"===event.pointerType?(ownerDocument.removeEventListener("click",handleClickRef.current),handleClickRef.current=handleAndDispatchPointerDownOutsideEvent,ownerDocument.addEventListener("click",handleClickRef.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent()}isPointerInsideReactTreeRef.current=!1},timerId=window.setTimeout((()=>{ownerDocument.addEventListener("pointerdown",handlePointerDown)}),0);return()=>{window.clearTimeout(timerId),ownerDocument.removeEventListener("pointerdown",handlePointerDown),ownerDocument.removeEventListener("click",handleClickRef.current)}}),[ownerDocument,handlePointerDownOutside]),{onPointerDownCapture:()=>isPointerInsideReactTreeRef.current=!0}}((event=>{const target=event.target,isPointerDownOnBranch=[...context.branches].some((branch=>branch.contains(target)));isPointerEventsEnabled&&!isPointerDownOnBranch&&(null==onPointerDownOutside||onPointerDownOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument),focusOutside=function $5cb92bef7577960e$var$useFocusOutside(onFocusOutside,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const handleFocusOutside=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onFocusOutside),isFocusInsideReactTreeRef=(0,react.useRef)(!1);return(0,react.useEffect)((()=>{const handleFocus=event=>{if(event.target&&!isFocusInsideReactTreeRef.current){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.focusOutside",handleFocusOutside,{originalEvent:event},{discrete:!1})}};return ownerDocument.addEventListener("focusin",handleFocus),()=>ownerDocument.removeEventListener("focusin",handleFocus)}),[ownerDocument,handleFocusOutside]),{onFocusCapture:()=>isFocusInsideReactTreeRef.current=!0,onBlurCapture:()=>isFocusInsideReactTreeRef.current=!1}}((event=>{const target=event.target;[...context.branches].some((branch=>branch.contains(target)))||(null==onFocusOutside||onFocusOutside(event),null==onInteractOutside||onInteractOutside(event),event.defaultPrevented||null==onDismiss||onDismiss())}),ownerDocument);return function $addc16e1bbe58fd0$export$3a72a57244d6e765(onEscapeKeyDownProp,ownerDocument=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const onEscapeKeyDown=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onEscapeKeyDownProp);(0,react.useEffect)((()=>{const handleKeyDown=event=>{"Escape"===event.key&&onEscapeKeyDown(event)};return ownerDocument.addEventListener("keydown",handleKeyDown),()=>ownerDocument.removeEventListener("keydown",handleKeyDown)}),[onEscapeKeyDown,ownerDocument])}((event=>{index===context.layers.size-1&&(null==onEscapeKeyDown||onEscapeKeyDown(event),!event.defaultPrevented&&onDismiss&&(event.preventDefault(),onDismiss()))}),ownerDocument),(0,react.useEffect)((()=>{if(node1)return disableOutsidePointerEvents&&(0===context.layersWithOutsidePointerEventsDisabled.size&&($5cb92bef7577960e$var$originalBodyPointerEvents=ownerDocument.body.style.pointerEvents,ownerDocument.body.style.pointerEvents="none"),context.layersWithOutsidePointerEventsDisabled.add(node1)),context.layers.add(node1),$5cb92bef7577960e$var$dispatchUpdate(),()=>{disableOutsidePointerEvents&&1===context.layersWithOutsidePointerEventsDisabled.size&&(ownerDocument.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}}),[node1,ownerDocument,disableOutsidePointerEvents,context]),(0,react.useEffect)((()=>()=>{node1&&(context.layers.delete(node1),context.layersWithOutsidePointerEventsDisabled.delete(node1),$5cb92bef7577960e$var$dispatchUpdate())}),[node1,context]),(0,react.useEffect)((()=>{const handleUpdate=()=>force({});return document.addEventListener("dismissableLayer.update",handleUpdate),()=>document.removeEventListener("dismissableLayer.update",handleUpdate)}),[]),(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,(0,esm_extends.Z)({},layerProps,{ref:composedRefs,style:{pointerEvents:isBodyPointerEventsDisabled?isPointerEventsEnabled?"auto":"none":void 0,...props.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onFocusCapture,focusOutside.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onBlurCapture,focusOutside.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onPointerDownCapture,pointerDownOutside.onPointerDownCapture)}))}));function $5cb92bef7577960e$var$dispatchUpdate(){const event=new CustomEvent("dismissableLayer.update");document.dispatchEvent(event)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(name,handler,detail,{discrete}){const target=detail.originalEvent.target,event=new CustomEvent(name,{bubbles:!1,cancelable:!0,detail});handler&&target.addEventListener(name,handler,{once:!0}),discrete?function $8927f6f2acc4f386$export$6d1a0317bde7de7f(target,event){target&&(0,react_dom.flushSync)((()=>target.dispatchEvent(event)))}(target,event):target.dispatchEvent(event)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){(0,react.useEffect)((()=>{var _edgeGuards$,_edgeGuards$2;const edgeGuards=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(_edgeGuards$=edgeGuards[0])&&void 0!==_edgeGuards$?_edgeGuards$:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",null!==(_edgeGuards$2=edgeGuards[1])&&void 0!==_edgeGuards$2?_edgeGuards$2:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{1===$3db38b7d1fb3fe6a$var$count&&document.querySelectorAll("[data-radix-focus-guard]").forEach((node=>node.remove())),$3db38b7d1fb3fe6a$var$count--}}),[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const element=document.createElement("span");return element.setAttribute("data-radix-focus-guard",""),element.tabIndex=0,element.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",element}const $d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=(0,react.forwardRef)(((props,forwardedRef)=>{const{loop=!1,trapped=!1,onMountAutoFocus:onMountAutoFocusProp,onUnmountAutoFocus:onUnmountAutoFocusProp,...scopeProps}=props,[container1,setContainer]=(0,react.useState)(null),onMountAutoFocus=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onMountAutoFocusProp),onUnmountAutoFocus=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onUnmountAutoFocusProp),lastFocusedElementRef=(0,react.useRef)(null),composedRefs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,(node=>setContainer(node))),focusScope=(0,react.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,react.useEffect)((()=>{if(trapped){function handleFocusIn(event){if(focusScope.paused||!container1)return;const target=event.target;container1.contains(target)?lastFocusedElementRef.current=target:$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0})}function handleFocusOut(event){!focusScope.paused&&container1&&(container1.contains(event.relatedTarget)||$d3863c46a17e8a28$var$focus(lastFocusedElementRef.current,{select:!0}))}return document.addEventListener("focusin",handleFocusIn),document.addEventListener("focusout",handleFocusOut),()=>{document.removeEventListener("focusin",handleFocusIn),document.removeEventListener("focusout",handleFocusOut)}}}),[trapped,container1,focusScope.paused]),(0,react.useEffect)((()=>{if(container1){$d3863c46a17e8a28$var$focusScopesStack.add(focusScope);const previouslyFocusedElement=document.activeElement;if(!container1.contains(previouslyFocusedElement)){const mountEvent=new CustomEvent("focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),container1.dispatchEvent(mountEvent),mountEvent.defaultPrevented||(!function $d3863c46a17e8a28$var$focusFirst(candidates,{select=!1}={}){const previouslyFocusedElement=document.activeElement;for(const candidate of candidates)if($d3863c46a17e8a28$var$focus(candidate,{select}),document.activeElement!==previouslyFocusedElement)return}(function $d3863c46a17e8a28$var$removeLinks(items){return items.filter((item=>"A"!==item.tagName))}($d3863c46a17e8a28$var$getTabbableCandidates(container1)),{select:!0}),document.activeElement===previouslyFocusedElement&&$d3863c46a17e8a28$var$focus(container1))}return()=>{container1.removeEventListener("focusScope.autoFocusOnMount",onMountAutoFocus),setTimeout((()=>{const unmountEvent=new CustomEvent("focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS);container1.addEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),container1.dispatchEvent(unmountEvent),unmountEvent.defaultPrevented||$d3863c46a17e8a28$var$focus(null!=previouslyFocusedElement?previouslyFocusedElement:document.body,{select:!0}),container1.removeEventListener("focusScope.autoFocusOnUnmount",onUnmountAutoFocus),$d3863c46a17e8a28$var$focusScopesStack.remove(focusScope)}),0)}}}),[container1,onMountAutoFocus,onUnmountAutoFocus,focusScope]);const handleKeyDown=(0,react.useCallback)((event=>{if(!loop&&!trapped)return;if(focusScope.paused)return;const isTabKey="Tab"===event.key&&!event.altKey&&!event.ctrlKey&&!event.metaKey,focusedElement=document.activeElement;if(isTabKey&&focusedElement){const container=event.currentTarget,[first,last]=function $d3863c46a17e8a28$var$getTabbableEdges(container){const candidates=$d3863c46a17e8a28$var$getTabbableCandidates(container),first=$d3863c46a17e8a28$var$findVisible(candidates,container),last=$d3863c46a17e8a28$var$findVisible(candidates.reverse(),container);return[first,last]}(container);first&&last?event.shiftKey||focusedElement!==last?event.shiftKey&&focusedElement===first&&(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(last,{select:!0})):(event.preventDefault(),loop&&$d3863c46a17e8a28$var$focus(first,{select:!0})):focusedElement===container&&event.preventDefault()}}),[loop,trapped,focusScope.paused]);return(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,(0,esm_extends.Z)({tabIndex:-1},scopeProps,{ref:composedRefs,onKeyDown:handleKeyDown}))}));function $d3863c46a17e8a28$var$getTabbableCandidates(container){const nodes=[],walker=document.createTreeWalker(container,NodeFilter.SHOW_ELEMENT,{acceptNode:node=>{const isHiddenInput="INPUT"===node.tagName&&"hidden"===node.type;return node.disabled||node.hidden||isHiddenInput?NodeFilter.FILTER_SKIP:node.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;walker.nextNode();)nodes.push(walker.currentNode);return nodes}function $d3863c46a17e8a28$var$findVisible(elements,container){for(const element of elements)if(!$d3863c46a17e8a28$var$isHidden(element,{upTo:container}))return element}function $d3863c46a17e8a28$var$isHidden(node,{upTo}){if("hidden"===getComputedStyle(node).visibility)return!0;for(;node;){if(void 0!==upTo&&node===upTo)return!1;if("none"===getComputedStyle(node).display)return!0;node=node.parentElement}return!1}function $d3863c46a17e8a28$var$focus(element,{select=!1}={}){if(element&&element.focus){const previouslyFocusedElement=document.activeElement;element.focus({preventScroll:!0}),element!==previouslyFocusedElement&&function $d3863c46a17e8a28$var$isSelectableInput(element){return element instanceof HTMLInputElement&&"select"in element}(element)&&select&&element.select()}}const $d3863c46a17e8a28$var$focusScopesStack=function $d3863c46a17e8a28$var$createFocusScopesStack(){let stack=[];return{add(focusScope){const activeFocusScope=stack[0];focusScope!==activeFocusScope&&(null==activeFocusScope||activeFocusScope.pause()),stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),stack.unshift(focusScope)},remove(focusScope){var _stack$;stack=$d3863c46a17e8a28$var$arrayRemove(stack,focusScope),null===(_stack$=stack[0])||void 0===_stack$||_stack$.resume()}}}();function $d3863c46a17e8a28$var$arrayRemove(array,item){const updatedArray=[...array],index=updatedArray.indexOf(item);return-1!==index&&updatedArray.splice(index,1),updatedArray}const $9f79659886946c16$export$e5c5a5f917a5871c=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?react.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=react_namespaceObject["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(deterministicId){const[id,setId]=react.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c((()=>{deterministicId||setId((reactId=>null!=reactId?reactId:String($1746a345f3d73bb7$var$count++)))}),[deterministicId]),deterministicId||(id?`radix-${id}`:"")}function floating_ui_core_browser_min_t(t){return t.split("-")[0]}function e(t){return t.split("-")[1]}function n(e){return["top","bottom"].includes(floating_ui_core_browser_min_t(e))?"x":"y"}function r(t){return"y"===t?"height":"width"}function i(i,o,a){let{reference:l,floating:s}=i;const c=l.x+l.width/2-s.width/2,f=l.y+l.height/2-s.height/2,u=n(o),m=r(u),g=l[m]/2-s[m]/2,d="x"===u;let p;switch(floating_ui_core_browser_min_t(o)){case"top":p={x:c,y:l.y-s.height};break;case"bottom":p={x:c,y:l.y+l.height};break;case"right":p={x:l.x+l.width,y:f};break;case"left":p={x:l.x-s.width,y:f};break;default:p={x:l.x,y:l.y}}switch(e(o)){case"start":p[u]-=g*(a&&d?-1:1);break;case"end":p[u]+=g*(a&&d?-1:1)}return p}function a(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:f}=t,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:d=!1,padding:p=0}=e,h=a(p),y=c[d?"floating"===g?"reference":"floating":g],x=l(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(y)))||n?y:y.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:f})),w=l(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===g?{...s.floating,x:r,y:i}:s.reference,offsetParent:await(null==o.getOffsetParent?void 0:o.getOffsetParent(c.floating)),strategy:f}):s[g]);return{top:x.top-w.top+h.top,bottom:w.bottom-x.bottom+h.bottom,left:x.left-w.left+h.left,right:w.right-x.right+h.right}}const c=Math.min,f=Math.max;function u(t,e,n){return f(t,c(e,n))}const m=t=>({name:"arrow",options:t,async fn(i){const{element:o,padding:l=0}=null!=t?t:{},{x:s,y:c,placement:f,rects:m,platform:g}=i;if(null==o)return{};const d=a(l),p={x:s,y:c},h=n(f),y=e(f),x=r(h),w=await g.getDimensions(o),v="y"===h?"top":"left",b="y"===h?"bottom":"right",R=m.reference[x]+m.reference[h]-p[h]-m.floating[x],A=p[h]-m.reference[h],P=await(null==g.getOffsetParent?void 0:g.getOffsetParent(o));let T=P?"y"===h?P.clientHeight||0:P.clientWidth||0:0;0===T&&(T=m.floating[x]);const O=R/2-A/2,D=d[v],L=T-w[x]-d[b],k=T/2-w[x]/2+O,E=u(D,k,L),C=("start"===y?d[v]:d[b])>0&&k!==E&&m.reference[x]<=m.floating[x];return{[h]:p[h]-(C?k<D?D-k:L-k:0),data:{[h]:E,centerOffset:k-E}}}}),g={left:"right",right:"left",bottom:"top",top:"bottom"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>g[t]))}function p(t,i,o){void 0===o&&(o=!1);const a=e(t),l=n(t),s=r(l);let c="x"===l?a===(o?"end":"start")?"right":"left":"start"===a?"bottom":"top";return i.reference[s]>i.floating[s]&&(c=d(c)),{main:c,cross:d(c)}}const h={start:"end",end:"start"};function y(t){return t.replace(/start|end/g,(t=>h[t]))}const x=["top","right","bottom","left"],b=(x.reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(n){var r;const{placement:i,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:f}=n,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:h="bestFit",flipAlignment:x=!0,...w}=e,v=floating_ui_core_browser_min_t(i),b=g||(v!==l&&x?function(t){const e=d(t);return[y(t),e,y(e)]}(l):[d(l)]),R=[l,...b],A=await s(n,w),P=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&P.push(A[v]),m){const{main:t,cross:e}=p(i,a,await(null==c.isRTL?void 0:c.isRTL(f.floating)));P.push(A[t],A[e])}if(T=[...T,{placement:i,overflows:P}],!P.every((t=>t<=0))){var O,D;const t=(null!=(O=null==(D=o.flip)?void 0:D.index)?O:0)+1,e=R[t];if(e)return{data:{index:t,overflows:T},reset:{placement:e}};let n="bottom";switch(h){case"bestFit":{var L;const t=null==(L=T.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:L[0].placement;t&&(n=t);break}case"initialPlacement":n=l}if(i!==n)return{reset:{placement:n}}}return{}}}});function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function A(t){return x.some((e=>t[e]>=0))}const P=function(t){let{strategy:e="referenceHidden",...n}=void 0===t?{}:t;return{name:"hide",async fn(t){const{rects:r}=t;switch(e){case"referenceHidden":{const e=R(await s(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:A(e)}}}case"escaped":{const e=R(await s(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:A(e)}}}default:return{}}}}},T=function(r){return void 0===r&&(r=0),{name:"offset",options:r,async fn(i){const{x:o,y:a}=i,l=await async function(r,i){const{placement:o,platform:a,elements:l}=r,s=await(null==a.isRTL?void 0:a.isRTL(l.floating)),c=floating_ui_core_browser_min_t(o),f=e(o),u="x"===n(o),m=["left","top"].includes(c)?-1:1,g=s&&u?-1:1,d="function"==typeof i?i(r):i;let{mainAxis:p,crossAxis:h,alignmentAxis:y}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return f&&"number"==typeof y&&(h="end"===f?-1*y:y),u?{x:h*g,y:p*m}:{x:p*m,y:h*g}}(i,r);return{x:o+l.x,y:a+l.y,data:l}}}};function O(t){return"x"===t?"y":"x"}const D=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(r){const{x:i,y:o,placement:a}=r,{mainAxis:l=!0,crossAxis:c=!1,limiter:f={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...m}=e,g={x:i,y:o},d=await s(r,m),p=n(floating_ui_core_browser_min_t(a)),h=O(p);let y=g[p],x=g[h];if(l){const t="y"===p?"bottom":"right";y=u(y+d["y"===p?"top":"left"],y,y-d[t])}if(c){const t="y"===h?"bottom":"right";x=u(x+d["y"===h?"top":"left"],x,x-d[t])}const w=f.fn({...r,[p]:y,[h]:x});return{...w,data:{x:w.x-i,y:w.y-o}}}}},L=function(e){return void 0===e&&(e={}),{options:e,fn(r){const{x:i,y:o,placement:a,rects:l,middlewareData:s}=r,{offset:c=0,mainAxis:f=!0,crossAxis:u=!0}=e,m={x:i,y:o},g=n(a),d=O(g);let p=m[g],h=m[d];const y="function"==typeof c?c({...l,placement:a}):c,x="number"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const t="y"===g?"height":"width",e=l.reference[g]-l.floating[t]+x.mainAxis,n=l.reference[g]+l.reference[t]-x.mainAxis;p<e?p=e:p>n&&(p=n)}if(u){var w,v,b,R;const e="y"===g?"width":"height",n=["top","left"].includes(floating_ui_core_browser_min_t(a)),r=l.reference[d]-l.floating[e]+(n&&null!=(w=null==(v=s.offset)?void 0:v[d])?w:0)+(n?0:x.crossAxis),i=l.reference[d]+l.reference[e]+(n?0:null!=(b=null==(R=s.offset)?void 0:R[d])?b:0)-(n?x.crossAxis:0);h<r?h=r:h>i&&(h=i)}return{[g]:p,[d]:h}}}},k=function(n){return void 0===n&&(n={}),{name:"size",options:n,async fn(r){const{placement:i,rects:o,platform:a,elements:l}=r,{apply:c,...u}=n,m=await s(r,u),g=floating_ui_core_browser_min_t(i),d=e(i);let p,h;"top"===g||"bottom"===g?(p=g,h=d===(await(null==a.isRTL?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(h=g,p="end"===d?"top":"bottom");const y=f(m.left,0),x=f(m.right,0),w=f(m.top,0),v=f(m.bottom,0),b={availableHeight:o.floating.height-(["left","right"].includes(i)?2*(0!==w||0!==v?w+v:f(m.top,m.bottom)):m[p]),availableWidth:o.floating.width-(["top","bottom"].includes(i)?2*(0!==y||0!==x?y+x:f(m.left,m.right)):m[h])},R=await a.getDimensions(l.floating);null==c||c({...r,...b});const A=await a.getDimensions(l.floating);return R.width!==A.width||R.height!==A.height?{reset:{rects:!0}}:{}}}};function floating_ui_dom_browser_min_n(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function o(t){if(null==t)return window;if(!floating_ui_dom_browser_min_n(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function floating_ui_dom_browser_min_i(t){return o(t).getComputedStyle(t)}function floating_ui_dom_browser_min_r(t){return floating_ui_dom_browser_min_n(t)?"":t?(t.nodeName||"").toLowerCase():""}function floating_ui_dom_browser_min_l(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+"/"+t.version)).join(" "):navigator.userAgent}function floating_ui_dom_browser_min_c(t){return t instanceof o(t).HTMLElement}function floating_ui_dom_browser_min_f(t){return t instanceof o(t).Element}function floating_ui_dom_browser_min_s(t){return"undefined"!=typeof ShadowRoot&&(t instanceof o(t).ShadowRoot||t instanceof ShadowRoot)}function floating_ui_dom_browser_min_u(t){const{overflow:e,overflowX:n,overflowY:o}=floating_ui_dom_browser_min_i(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function floating_ui_dom_browser_min_d(t){return["table","td","th"].includes(floating_ui_dom_browser_min_r(t))}function floating_ui_dom_browser_min_h(t){const e=/firefox/i.test(floating_ui_dom_browser_min_l()),n=floating_ui_dom_browser_min_i(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function floating_ui_dom_browser_min_a(){return!/^((?!chrome|android).)*safari/i.test(floating_ui_dom_browser_min_l())}const floating_ui_dom_browser_min_g=Math.min,floating_ui_dom_browser_min_p=Math.max,floating_ui_dom_browser_min_m=Math.round;function floating_ui_dom_browser_min_w(t,e,n){var i,r,l,s;void 0===e&&(e=!1),void 0===n&&(n=!1);const u=t.getBoundingClientRect();let d=1,h=1;e&&floating_ui_dom_browser_min_c(t)&&(d=t.offsetWidth>0&&floating_ui_dom_browser_min_m(u.width)/t.offsetWidth||1,h=t.offsetHeight>0&&floating_ui_dom_browser_min_m(u.height)/t.offsetHeight||1);const g=floating_ui_dom_browser_min_f(t)?o(t):window,p=!floating_ui_dom_browser_min_a()&&n,w=(u.left+(p&&null!=(i=null==(r=g.visualViewport)?void 0:r.offsetLeft)?i:0))/d,v=(u.top+(p&&null!=(l=null==(s=g.visualViewport)?void 0:s.offsetTop)?l:0))/h,y=u.width/d,x=u.height/h;return{width:y,height:x,top:v,right:w+y,bottom:v+x,left:w,x:w,y:v}}function floating_ui_dom_browser_min_v(t){return(e=t,(e instanceof o(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function floating_ui_dom_browser_min_y(t){return floating_ui_dom_browser_min_f(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function floating_ui_dom_browser_min_x(t){return floating_ui_dom_browser_min_w(floating_ui_dom_browser_min_v(t)).left+floating_ui_dom_browser_min_y(t).scrollLeft}function floating_ui_dom_browser_min_b(t,e,n){const o=floating_ui_dom_browser_min_c(e),i=floating_ui_dom_browser_min_v(e),l=floating_ui_dom_browser_min_w(t,o&&function(t){const e=floating_ui_dom_browser_min_w(t);return floating_ui_dom_browser_min_m(e.width)!==t.offsetWidth||floating_ui_dom_browser_min_m(e.height)!==t.offsetHeight}(e),"fixed"===n);let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==floating_ui_dom_browser_min_r(e)||floating_ui_dom_browser_min_u(i))&&(f=floating_ui_dom_browser_min_y(e)),floating_ui_dom_browser_min_c(e)){const t=floating_ui_dom_browser_min_w(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=floating_ui_dom_browser_min_x(i));return{x:l.left+f.scrollLeft-s.x,y:l.top+f.scrollTop-s.y,width:l.width,height:l.height}}function floating_ui_dom_browser_min_L(t){return"html"===floating_ui_dom_browser_min_r(t)?t:t.assignedSlot||t.parentNode||(floating_ui_dom_browser_min_s(t)?t.host:null)||floating_ui_dom_browser_min_v(t)}function floating_ui_dom_browser_min_R(t){return floating_ui_dom_browser_min_c(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function floating_ui_dom_browser_min_T(t){const e=o(t);let n=floating_ui_dom_browser_min_R(t);for(;n&&floating_ui_dom_browser_min_d(n)&&"static"===getComputedStyle(n).position;)n=floating_ui_dom_browser_min_R(n);return n&&("html"===floating_ui_dom_browser_min_r(n)||"body"===floating_ui_dom_browser_min_r(n)&&"static"===getComputedStyle(n).position&&!floating_ui_dom_browser_min_h(n))?e:n||function(t){let e=floating_ui_dom_browser_min_L(t);for(floating_ui_dom_browser_min_s(e)&&(e=e.host);floating_ui_dom_browser_min_c(e)&&!["html","body"].includes(floating_ui_dom_browser_min_r(e));){if(floating_ui_dom_browser_min_h(e))return e;e=e.parentNode}return null}(t)||e}function W(t){if(floating_ui_dom_browser_min_c(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=floating_ui_dom_browser_min_w(t);return{width:e.width,height:e.height}}function floating_ui_dom_browser_min_E(t){const e=floating_ui_dom_browser_min_L(t);return["html","body","#document"].includes(floating_ui_dom_browser_min_r(e))?t.ownerDocument.body:floating_ui_dom_browser_min_c(e)&&floating_ui_dom_browser_min_u(e)?e:floating_ui_dom_browser_min_E(e)}function H(t,e){var n;void 0===e&&(e=[]);const i=floating_ui_dom_browser_min_E(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),l=o(i),c=r?[l].concat(l.visualViewport||[],floating_ui_dom_browser_min_u(i)?i:[]):i,f=e.concat(c);return r?f:f.concat(H(c))}function C(e,n,r){return"viewport"===n?l(function(t,e){const n=o(t),i=floating_ui_dom_browser_min_v(t),r=n.visualViewport;let l=i.clientWidth,c=i.clientHeight,f=0,s=0;if(r){l=r.width,c=r.height;const t=floating_ui_dom_browser_min_a();(t||!t&&"fixed"===e)&&(f=r.offsetLeft,s=r.offsetTop)}return{width:l,height:c,x:f,y:s}}(e,r)):floating_ui_dom_browser_min_f(n)?function(t,e){const n=floating_ui_dom_browser_min_w(t,!1,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(n,r):l(function(t){var e;const n=floating_ui_dom_browser_min_v(t),o=floating_ui_dom_browser_min_y(t),r=null==(e=t.ownerDocument)?void 0:e.body,l=floating_ui_dom_browser_min_p(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=floating_ui_dom_browser_min_p(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let f=-o.scrollLeft+floating_ui_dom_browser_min_x(t);const s=-o.scrollTop;return"rtl"===floating_ui_dom_browser_min_i(r||n).direction&&(f+=floating_ui_dom_browser_min_p(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:c,x:f,y:s}}(floating_ui_dom_browser_min_v(e)))}function S(t){const e=H(t),n=["absolute","fixed"].includes(floating_ui_dom_browser_min_i(t).position)&&floating_ui_dom_browser_min_c(t)?floating_ui_dom_browser_min_T(t):t;return floating_ui_dom_browser_min_f(n)?e.filter((t=>floating_ui_dom_browser_min_f(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&floating_ui_dom_browser_min_s(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&"body"!==floating_ui_dom_browser_min_r(t))):[]}const floating_ui_dom_browser_min_D={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[..."clippingAncestors"===n?S(e):[].concat(n),o],l=r[0],c=r.reduce(((t,n)=>{const o=C(e,n,i);return t.top=floating_ui_dom_browser_min_p(o.top,t.top),t.right=floating_ui_dom_browser_min_g(o.right,t.right),t.bottom=floating_ui_dom_browser_min_g(o.bottom,t.bottom),t.left=floating_ui_dom_browser_min_p(o.left,t.left),t}),C(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=floating_ui_dom_browser_min_c(n),l=floating_ui_dom_browser_min_v(n);if(n===l)return e;let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&"fixed"!==o)&&(("body"!==floating_ui_dom_browser_min_r(n)||floating_ui_dom_browser_min_u(l))&&(f=floating_ui_dom_browser_min_y(n)),floating_ui_dom_browser_min_c(n))){const t=floating_ui_dom_browser_min_w(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-f.scrollLeft+s.x,y:e.y-f.scrollTop+s.y}},isElement:floating_ui_dom_browser_min_f,getDimensions:W,getOffsetParent:floating_ui_dom_browser_min_T,getDocumentElement:floating_ui_dom_browser_min_v,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:floating_ui_dom_browser_min_b(e,floating_ui_dom_browser_min_T(n),o),floating:{...W(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===floating_ui_dom_browser_min_i(t).direction};function N(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:c=!1}=o,s=i&&!c,u=r&&!c,d=s||u?[...floating_ui_dom_browser_min_f(t)?H(t):[],...H(e)]:[];d.forEach((t=>{s&&t.addEventListener("scroll",n,{passive:!0}),u&&t.addEventListener("resize",n)}));let h,a=null;if(l){let o=!0;a=new ResizeObserver((()=>{o||n(),o=!1})),floating_ui_dom_browser_min_f(t)&&!c&&a.observe(t),a.observe(e)}let g=c?floating_ui_dom_browser_min_w(t):null;return c&&function e(){const o=floating_ui_dom_browser_min_w(t);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n(),g=o,h=requestAnimationFrame(e)}(),n(),()=>{var t;d.forEach((t=>{s&&t.removeEventListener("scroll",n),u&&t.removeEventListener("resize",n)})),null==(t=a)||t.disconnect(),a=null,c&&cancelAnimationFrame(h)}}const z=(t,n,o)=>(async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=n,s=await(null==l.isRTL?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:f,y:u}=i(c,r,s),m=r,g={},d=0;for(let n=0;n<a.length;n++){const{name:p,fn:h}=a[n],{x:y,y:x,data:w,reset:v}=await h({x:f,y:u,initialPlacement:r,placement:m,strategy:o,middlewareData:g,rects:c,platform:l,elements:{reference:t,floating:e}});f=null!=y?y:f,u=null!=x?x:u,g={...g,[p]:{...g[p],...w}},v&&d<=50&&(d++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(c=!0===v.rects?await l.getElementRects({reference:t,floating:e,strategy:o}):v.rects),({x:f,y:u}=i(c,m,s))),n=-1)}return{x:f,y:u,placement:m,strategy:o,middlewareData:g}})(t,n,{platform:floating_ui_dom_browser_min_D,...o});var index="undefined"!=typeof document?react.useLayoutEffect:react.useEffect;function deepEqual(a,b){if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;let length,i,keys;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if(length=a.length,length!=b.length)return!1;for(i=length;0!=i--;)if(!deepEqual(a[i],b[i]))return!1;return!0}if(keys=Object.keys(a),length=keys.length,length!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){const key=keys[i];if(("_owner"!==key||!a.$$typeof)&&!deepEqual(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}function useFloating(_temp){let{middleware,placement="bottom",strategy="absolute",whileElementsMounted}=void 0===_temp?{}:_temp;const reference=react.useRef(null),floating=react.useRef(null),whileElementsMountedRef=function useLatestRef(value){const ref=react.useRef(value);return index((()=>{ref.current=value})),ref}(whileElementsMounted),cleanupRef=react.useRef(null),[data,setData]=react.useState({x:null,y:null,strategy,placement,middlewareData:{}}),[latestMiddleware,setLatestMiddleware]=react.useState(middleware);deepEqual(null==latestMiddleware?void 0:latestMiddleware.map((_ref=>{let{options}=_ref;return options})),null==middleware?void 0:middleware.map((_ref2=>{let{options}=_ref2;return options})))||setLatestMiddleware(middleware);const update=react.useCallback((()=>{reference.current&&floating.current&&z(reference.current,floating.current,{middleware:latestMiddleware,placement,strategy}).then((data=>{isMountedRef.current&&react_dom.flushSync((()=>{setData(data)}))}))}),[latestMiddleware,placement,strategy]);index((()=>{isMountedRef.current&&update()}),[update]);const isMountedRef=react.useRef(!1);index((()=>(isMountedRef.current=!0,()=>{isMountedRef.current=!1})),[]);const runElementMountCallback=react.useCallback((()=>{if("function"==typeof cleanupRef.current&&(cleanupRef.current(),cleanupRef.current=null),reference.current&&floating.current)if(whileElementsMountedRef.current){const cleanupFn=whileElementsMountedRef.current(reference.current,floating.current,update);cleanupRef.current=cleanupFn}else update()}),[update,whileElementsMountedRef]),setReference=react.useCallback((node=>{reference.current=node,runElementMountCallback()}),[runElementMountCallback]),setFloating=react.useCallback((node=>{floating.current=node,runElementMountCallback()}),[runElementMountCallback]),refs=react.useMemo((()=>({reference,floating})),[]);return react.useMemo((()=>({...data,update,refs,reference:setReference,floating:setFloating})),[data,update,refs,setReference,setFloating])}const floating_ui_react_dom_esm_arrow=options=>{const{element,padding}=options;return{name:"arrow",options,fn:args=>function isRef(value){return Object.prototype.hasOwnProperty.call(value,"current")}(element)?null!=element.current?m({element:element.current,padding}).fn(args):{}:element?m({element,padding}).fn(args):{}}};const[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Popper"),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext("Popper"),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=props=>{const{__scopePopper,children}=props,[anchor,setAnchor]=(0,react.useState)(null);return(0,react.createElement)($cf1ac5d9fe0e8206$var$PopperProvider,{scope:__scopePopper,anchor,onAnchorChange:setAnchor},children)},$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopePopper,virtualRef,...anchorProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperAnchor",__scopePopper),ref=(0,react.useRef)(null),composedRefs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,ref);return(0,react.useEffect)((()=>{context.onAnchorChange((null==virtualRef?void 0:virtualRef.current)||ref.current)})),virtualRef?null:(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,(0,esm_extends.Z)({},anchorProps,{ref:composedRefs}))})),[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext("PopperContent"),[$cf1ac5d9fe0e8206$var$PositionContextProvider,$cf1ac5d9fe0e8206$var$usePositionContext]=$cf1ac5d9fe0e8206$var$createPopperContext("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=(0,react.forwardRef)(((props,forwardedRef)=>{var _arrowSize$width,_arrowSize$height,_middlewareData$arrow,_middlewareData$arrow2,_middlewareData$arrow3,_middlewareData$hide,_middlewareData$trans,_middlewareData$trans2;const{__scopePopper,side="bottom",sideOffset=0,align="center",alignOffset=0,arrowPadding=0,collisionBoundary=[],collisionPadding:collisionPaddingProp=0,sticky="partial",hideWhenDetached=!1,avoidCollisions=!0,onPlaced,...contentProps}=props,context=$cf1ac5d9fe0e8206$var$usePopperContext("PopperContent",__scopePopper),[content,setContent]=(0,react.useState)(null),composedRefs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,(node=>setContent(node))),[arrow,setArrow]=(0,react.useState)(null),arrowSize=function $db6c3485150b8e66$export$1ab7ae714698c4b8(element){const[size,setSize]=(0,react.useState)(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c((()=>{if(element){setSize({width:element.offsetWidth,height:element.offsetHeight});const resizeObserver=new ResizeObserver((entries=>{if(!Array.isArray(entries))return;if(!entries.length)return;const entry=entries[0];let width,height;if("borderBoxSize"in entry){const borderSizeEntry=entry.borderBoxSize,borderSize=Array.isArray(borderSizeEntry)?borderSizeEntry[0]:borderSizeEntry;width=borderSize.inlineSize,height=borderSize.blockSize}else width=element.offsetWidth,height=element.offsetHeight;setSize({width,height})}));return resizeObserver.observe(element,{box:"border-box"}),()=>resizeObserver.unobserve(element)}setSize(void 0)}),[element]),size}(arrow),arrowWidth=null!==(_arrowSize$width=null==arrowSize?void 0:arrowSize.width)&&void 0!==_arrowSize$width?_arrowSize$width:0,arrowHeight=null!==(_arrowSize$height=null==arrowSize?void 0:arrowSize.height)&&void 0!==_arrowSize$height?_arrowSize$height:0,desiredPlacement=side+("center"!==align?"-"+align:""),collisionPadding="number"==typeof collisionPaddingProp?collisionPaddingProp:{top:0,right:0,bottom:0,left:0,...collisionPaddingProp},boundary=Array.isArray(collisionBoundary)?collisionBoundary:[collisionBoundary],hasExplicitBoundaries=boundary.length>0,detectOverflowOptions={padding:collisionPadding,boundary:boundary.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:hasExplicitBoundaries},{reference,floating,strategy,x,y,placement,middlewareData,update}=useFloating({strategy:"fixed",placement:desiredPlacement,whileElementsMounted:N,middleware:[T({mainAxis:sideOffset+arrowHeight,alignmentAxis:alignOffset}),avoidCollisions?D({mainAxis:!0,crossAxis:!1,limiter:"partial"===sticky?L():void 0,...detectOverflowOptions}):void 0,avoidCollisions?b({...detectOverflowOptions}):void 0,k({...detectOverflowOptions,apply:({elements,rects,availableWidth,availableHeight})=>{const{width:anchorWidth,height:anchorHeight}=rects.reference,contentStyle=elements.floating.style;contentStyle.setProperty("--radix-popper-available-width",`${availableWidth}px`),contentStyle.setProperty("--radix-popper-available-height",`${availableHeight}px`),contentStyle.setProperty("--radix-popper-anchor-width",`${anchorWidth}px`),contentStyle.setProperty("--radix-popper-anchor-height",`${anchorHeight}px`)}}),arrow?floating_ui_react_dom_esm_arrow({element:arrow,padding:arrowPadding}):void 0,$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth,arrowHeight}),hideWhenDetached?P({strategy:"referenceHidden"}):void 0].filter($cf1ac5d9fe0e8206$var$isDefined)});$9f79659886946c16$export$e5c5a5f917a5871c((()=>{reference(context.anchor)}),[reference,context.anchor]);const isPlaced=null!==x&&null!==y,[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),handlePlaced=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onPlaced);$9f79659886946c16$export$e5c5a5f917a5871c((()=>{isPlaced&&(null==handlePlaced||handlePlaced())}),[isPlaced,handlePlaced]);const arrowX=null===(_middlewareData$arrow=middlewareData.arrow)||void 0===_middlewareData$arrow?void 0:_middlewareData$arrow.x,arrowY=null===(_middlewareData$arrow2=middlewareData.arrow)||void 0===_middlewareData$arrow2?void 0:_middlewareData$arrow2.y,cannotCenterArrow=0!==(null===(_middlewareData$arrow3=middlewareData.arrow)||void 0===_middlewareData$arrow3?void 0:_middlewareData$arrow3.centerOffset),[contentZIndex,setContentZIndex]=(0,react.useState)();$9f79659886946c16$export$e5c5a5f917a5871c((()=>{content&&setContentZIndex(window.getComputedStyle(content).zIndex)}),[content]);const{hasParent,positionUpdateFns}=$cf1ac5d9fe0e8206$var$usePositionContext("PopperContent",__scopePopper),isRoot=!hasParent;(0,react.useLayoutEffect)((()=>{if(!isRoot)return positionUpdateFns.add(update),()=>{positionUpdateFns.delete(update)}}),[isRoot,positionUpdateFns,update]),$9f79659886946c16$export$e5c5a5f917a5871c((()=>{isRoot&&isPlaced&&Array.from(positionUpdateFns).reverse().forEach((fn=>requestAnimationFrame(fn)))}),[isRoot,isPlaced,positionUpdateFns]);const commonProps={"data-side":placedSide,"data-align":placedAlign,...contentProps,ref:composedRefs,style:{...contentProps.style,animation:isPlaced?void 0:"none",opacity:null!==(_middlewareData$hide=middlewareData.hide)&&void 0!==_middlewareData$hide&&_middlewareData$hide.referenceHidden?0:void 0}};return(0,react.createElement)("div",{ref:floating,"data-radix-popper-content-wrapper":"",style:{position:strategy,left:0,top:0,transform:isPlaced?`translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:contentZIndex,"--radix-popper-transform-origin":[null===(_middlewareData$trans=middlewareData.transformOrigin)||void 0===_middlewareData$trans?void 0:_middlewareData$trans.x,null===(_middlewareData$trans2=middlewareData.transformOrigin)||void 0===_middlewareData$trans2?void 0:_middlewareData$trans2.y].join(" ")},dir:props.dir},(0,react.createElement)($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:__scopePopper,placedSide,onArrowChange:setArrow,arrowX,arrowY,shouldHideArrow:cannotCenterArrow},isRoot?(0,react.createElement)($cf1ac5d9fe0e8206$var$PositionContextProvider,{scope:__scopePopper,hasParent:!0,positionUpdateFns},(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,commonProps)):(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,commonProps)))}));function $cf1ac5d9fe0e8206$var$isDefined(value){return void 0!==value}function $cf1ac5d9fe0e8206$var$isNotNull(value){return null!==value}const $cf1ac5d9fe0e8206$var$transformOrigin=options=>({name:"transformOrigin",options,fn(data){var _middlewareData$arrow4,_middlewareData$arrow5,_middlewareData$arrow6,_middlewareData$arrow7,_middlewareData$arrow8;const{placement,rects,middlewareData}=data,isArrowHidden=0!==(null===(_middlewareData$arrow4=middlewareData.arrow)||void 0===_middlewareData$arrow4?void 0:_middlewareData$arrow4.centerOffset),arrowWidth=isArrowHidden?0:options.arrowWidth,arrowHeight=isArrowHidden?0:options.arrowHeight,[placedSide,placedAlign]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement),noArrowAlign={start:"0%",center:"50%",end:"100%"}[placedAlign],arrowXCenter=(null!==(_middlewareData$arrow5=null===(_middlewareData$arrow6=middlewareData.arrow)||void 0===_middlewareData$arrow6?void 0:_middlewareData$arrow6.x)&&void 0!==_middlewareData$arrow5?_middlewareData$arrow5:0)+arrowWidth/2,arrowYCenter=(null!==(_middlewareData$arrow7=null===(_middlewareData$arrow8=middlewareData.arrow)||void 0===_middlewareData$arrow8?void 0:_middlewareData$arrow8.y)&&void 0!==_middlewareData$arrow7?_middlewareData$arrow7:0)+arrowHeight/2;let x="",y="";return"bottom"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=-arrowHeight+"px"):"top"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=`${rects.floating.height+arrowHeight}px`):"right"===placedSide?(x=-arrowHeight+"px",y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`):"left"===placedSide&&(x=`${rects.floating.width+arrowHeight}px`,y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`),{data:{x,y}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(placement){const[side,align="center"]=placement.split("-");return[side,align]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$f1701beae083dbae$export$602eac185826482c=(0,react.forwardRef)(((props,forwardedRef)=>{var _globalThis$document;const{container=null===globalThis||void 0===globalThis||null===(_globalThis$document=globalThis.document)||void 0===_globalThis$document?void 0:_globalThis$document.body,...portalProps}=props;return container?react_dom.createPortal((0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.div,(0,esm_extends.Z)({},portalProps,{ref:forwardedRef})),container):null}));const $921a889cee6df7e8$export$99c2b779aa4e8b8b=props=>{const{present,children}=props,presence=function $921a889cee6df7e8$var$usePresence(present){const[node1,setNode]=(0,react.useState)(),stylesRef=(0,react.useRef)({}),prevPresentRef=(0,react.useRef)(present),prevAnimationNameRef=(0,react.useRef)("none"),initialState=present?"mounted":"unmounted",[state,send]=function $fe963b355347cc68$export$3e6543de14f8614f(initialState,machine){return(0,react.useReducer)(((state,event)=>{const nextState=machine[state][event];return null!=nextState?nextState:state}),initialState)}(initialState,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,react.useEffect)((()=>{const currentAnimationName=$921a889cee6df7e8$var$getAnimationName(stylesRef.current);prevAnimationNameRef.current="mounted"===state?currentAnimationName:"none"}),[state]),$9f79659886946c16$export$e5c5a5f917a5871c((()=>{const styles=stylesRef.current,wasPresent=prevPresentRef.current;if(wasPresent!==present){const prevAnimationName=prevAnimationNameRef.current,currentAnimationName=$921a889cee6df7e8$var$getAnimationName(styles);if(present)send("MOUNT");else if("none"===currentAnimationName||"none"===(null==styles?void 0:styles.display))send("UNMOUNT");else{send(wasPresent&&prevAnimationName!==currentAnimationName?"ANIMATION_OUT":"UNMOUNT")}prevPresentRef.current=present}}),[present,send]),$9f79659886946c16$export$e5c5a5f917a5871c((()=>{if(node1){const handleAnimationEnd=event=>{const isCurrentAnimation=$921a889cee6df7e8$var$getAnimationName(stylesRef.current).includes(event.animationName);event.target===node1&&isCurrentAnimation&&(0,react_dom.flushSync)((()=>send("ANIMATION_END")))},handleAnimationStart=event=>{event.target===node1&&(prevAnimationNameRef.current=$921a889cee6df7e8$var$getAnimationName(stylesRef.current))};return node1.addEventListener("animationstart",handleAnimationStart),node1.addEventListener("animationcancel",handleAnimationEnd),node1.addEventListener("animationend",handleAnimationEnd),()=>{node1.removeEventListener("animationstart",handleAnimationStart),node1.removeEventListener("animationcancel",handleAnimationEnd),node1.removeEventListener("animationend",handleAnimationEnd)}}send("ANIMATION_END")}),[node1,send]),{isPresent:["mounted","unmountSuspended"].includes(state),ref:(0,react.useCallback)((node=>{node&&(stylesRef.current=getComputedStyle(node)),setNode(node)}),[])}}(present),child="function"==typeof children?children({present:presence.isPresent}):react.Children.only(children),ref=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(presence.ref,child.ref);return"function"==typeof children||presence.isPresent?(0,react.cloneElement)(child,{ref}):null};function $921a889cee6df7e8$var$getAnimationName(styles){return(null==styles?void 0:styles.animationName)||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop,defaultProp,onChange=()=>{}}){const[uncontrolledProp,setUncontrolledProp]=function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp,onChange}){const uncontrolledState=(0,react.useState)(defaultProp),[value]=uncontrolledState,prevValueRef=(0,react.useRef)(value),handleChange=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onChange);return(0,react.useEffect)((()=>{prevValueRef.current!==value&&(handleChange(value),prevValueRef.current=value)}),[value,prevValueRef,handleChange]),uncontrolledState}({defaultProp,onChange}),isControlled=void 0!==prop,value1=isControlled?prop:uncontrolledProp,handleChange=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(onChange);return[value1,(0,react.useCallback)((nextValue=>{if(isControlled){const value="function"==typeof nextValue?nextValue(prop):nextValue;value!==prop&&handleChange(value)}else setUncontrolledProp(nextValue)}),[isControlled,prop,setUncontrolledProp,handleChange])]}$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";const[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Popover",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext("Popover"),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=props=>{const{__scopePopover,children,open:openProp,defaultOpen,onOpenChange,modal=!1}=props,popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover),triggerRef=(0,react.useRef)(null),[hasCustomAnchor,setHasCustomAnchor]=(0,react.useState)(!1),[open=!1,setOpen]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,popperScope,(0,react.createElement)($cb5cc270b50c6fcd$var$PopoverProvider,{scope:__scopePopover,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef,open,onOpenChange:setOpen,onOpenToggle:(0,react.useCallback)((()=>setOpen((prevOpen=>!prevOpen))),[setOpen]),hasCustomAnchor,onCustomAnchorAdd:(0,react.useCallback)((()=>setHasCustomAnchor(!0)),[]),onCustomAnchorRemove:(0,react.useCallback)((()=>setHasCustomAnchor(!1)),[]),modal},children))},$cb5cc270b50c6fcd$export$7dacb05d26466c3=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopePopover,...triggerProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverTrigger",__scopePopover),popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover),composedTriggerRef=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,context.triggerRef),trigger=(0,react.createElement)($8927f6f2acc4f386$export$250ffa63cdc0d034.button,(0,esm_extends.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":context.open,"aria-controls":context.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(context.open)},triggerProps,{ref:composedTriggerRef,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onClick,context.onOpenToggle)}));return context.hasCustomAnchor?trigger:(0,react.createElement)($cf1ac5d9fe0e8206$export$b688253958b8dfe7,(0,esm_extends.Z)({asChild:!0},popperScope),trigger)})),[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext("PopoverPortal",{forceMount:void 0}),$cb5cc270b50c6fcd$export$dd679ffb4362d2d4=props=>{const{__scopePopover,forceMount,children,container}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverPortal",__scopePopover);return(0,react.createElement)($cb5cc270b50c6fcd$var$PortalProvider,{scope:__scopePopover,forceMount},(0,react.createElement)($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:forceMount||context.open},(0,react.createElement)($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container},children)))},$cb5cc270b50c6fcd$export$d7e1f420b25549ff=(0,react.forwardRef)(((props,forwardedRef)=>{const portalContext=$cb5cc270b50c6fcd$var$usePortalContext("PopoverContent",props.__scopePopover),{forceMount=portalContext.forceMount,...contentProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover);return(0,react.createElement)($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:forceMount||context.open},context.modal?(0,react.createElement)($cb5cc270b50c6fcd$var$PopoverContentModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})):(0,react.createElement)($cb5cc270b50c6fcd$var$PopoverContentNonModal,(0,esm_extends.Z)({},contentProps,{ref:forwardedRef})))})),$cb5cc270b50c6fcd$var$PopoverContentModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover),contentRef=(0,react.useRef)(null),composedRefs=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(forwardedRef,contentRef),isRightClickOutsideRef=(0,react.useRef)(!1);return(0,react.useEffect)((()=>{const content=contentRef.current;if(content)return(0,es2015.Ry)(content)}),[]),(0,react.createElement)(Combination.Z,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},(0,react.createElement)($cb5cc270b50c6fcd$var$PopoverContentImpl,(0,esm_extends.Z)({},props,{ref:composedRefs,trapFocus:context.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onCloseAutoFocus,(event=>{var _context$triggerRef$c;event.preventDefault(),isRightClickOutsideRef.current||null===(_context$triggerRef$c=context.triggerRef.current)||void 0===_context$triggerRef$c||_context$triggerRef$c.focus()})),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onPointerDownOutside,(event=>{const originalEvent=event.detail.originalEvent,ctrlLeftClick=0===originalEvent.button&&!0===originalEvent.ctrlKey,isRightClick=2===originalEvent.button||ctrlLeftClick;isRightClickOutsideRef.current=isRightClick}),{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(props.onFocusOutside,(event=>event.preventDefault()),{checkForDefaultPrevented:!1})})))})),$cb5cc270b50c6fcd$var$PopoverContentNonModal=(0,react.forwardRef)(((props,forwardedRef)=>{const context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",props.__scopePopover),hasInteractedOutsideRef=(0,react.useRef)(!1),hasPointerDownOutsideRef=(0,react.useRef)(!1);return(0,react.createElement)($cb5cc270b50c6fcd$var$PopoverContentImpl,(0,esm_extends.Z)({},props,{ref:forwardedRef,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:event=>{var _props$onCloseAutoFoc,_context$triggerRef$c2;(null===(_props$onCloseAutoFoc=props.onCloseAutoFocus)||void 0===_props$onCloseAutoFoc||_props$onCloseAutoFoc.call(props,event),event.defaultPrevented)||(hasInteractedOutsideRef.current||null===(_context$triggerRef$c2=context.triggerRef.current)||void 0===_context$triggerRef$c2||_context$triggerRef$c2.focus(),event.preventDefault());hasInteractedOutsideRef.current=!1,hasPointerDownOutsideRef.current=!1},onInteractOutside:event=>{var _props$onInteractOuts,_context$triggerRef$c3;null===(_props$onInteractOuts=props.onInteractOutside)||void 0===_props$onInteractOuts||_props$onInteractOuts.call(props,event),event.defaultPrevented||(hasInteractedOutsideRef.current=!0,"pointerdown"===event.detail.originalEvent.type&&(hasPointerDownOutsideRef.current=!0));const target=event.target;(null===(_context$triggerRef$c3=context.triggerRef.current)||void 0===_context$triggerRef$c3?void 0:_context$triggerRef$c3.contains(target))&&event.preventDefault(),"focusin"===event.detail.originalEvent.type&&hasPointerDownOutsideRef.current&&event.preventDefault()}}))})),$cb5cc270b50c6fcd$var$PopoverContentImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopePopover,trapFocus,onOpenAutoFocus,onCloseAutoFocus,disableOutsidePointerEvents,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onInteractOutside,...contentProps}=props,context=$cb5cc270b50c6fcd$var$usePopoverContext("PopoverContent",__scopePopover),popperScope=$cb5cc270b50c6fcd$var$usePopperScope(__scopePopover);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),(0,react.createElement)($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:trapFocus,onMountAutoFocus:onOpenAutoFocus,onUnmountAutoFocus:onCloseAutoFocus},(0,react.createElement)($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents,onInteractOutside,onEscapeKeyDown,onPointerDownOutside,onFocusOutside,onDismiss:()=>context.onOpenChange(!1)},(0,react.createElement)($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,(0,esm_extends.Z)({"data-state":$cb5cc270b50c6fcd$var$getState(context.open),role:"dialog",id:context.contentId},popperScope,contentProps,{ref:forwardedRef,style:{...contentProps.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}));function $cb5cc270b50c6fcd$var$getState(open){return open?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$602eac185826482c=$cb5cc270b50c6fcd$export$dd679ffb4362d2d4,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,Popover=({id,children,onOpenChange})=>{const[isOpen,handleOpenChange]=useMenuIsOpen(id,onOpenChange);return(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,{onOpenChange:handleOpenChange,open:isOpen,children:(0,jsx_runtime.jsx)("div",{className:"tlui-popover",children})})},PopoverTrigger=({children,disabled,"data-testid":testId})=>(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$41fb9f06171c75f4,{"data-testid":testId,disabled,asChild:!0,dir:"ltr",children}),PopoverContent=({side,children,align="center",sideOffset=8,alignOffset=0})=>{const container=(0,dist_esm.uK4)();return(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$602eac185826482c,{dir:"ltr",container,children:(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{className:"tlui-popover__content",side,sideOffset,align,alignOffset,dir:"ltr",children})})},ActionsMenu=(0,react.memo)((function ActionsMenu2(){const msg=useTranslation_useTranslation(),container=(0,dist_esm.uK4)(),menuSchema=function useActionsMenuSchema(){const ctx=react.useContext(ActionsMenuSchemaContext);if(!ctx)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return ctx}(),isReadonly=useReadonly();return(0,jsx_runtime.jsxs)(Popover,{id:"actions menu",children:[(0,jsx_runtime.jsx)(PopoverTrigger,{children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:msg("actions-menu.title"),smallIcon:!0})}),(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$602eac185826482c,{dir:"ltr",container,children:(0,jsx_runtime.jsx)($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,jsx_runtime.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:menuSchema.map((function getActionMenuItem(item){if(isReadonly&&!item.readonlyOk)return null;if("item"===item.type){const{id,icon,label,kbd,onSelect}=item.actionItem;return(0,jsx_runtime.jsx)(Button,{className:"tlui-button-grid__button","data-testid":`menu-item.${item.id}`,icon,title:label?kbd?`${msg(label)} ${kbdStr(kbd)}`:`${msg(label)}`:kbd?`${kbdStr(kbd)}`:"",onClick:()=>onSelect("actions-menu"),disabled:item.disabled},id)}}))})})})]})})),DuplicateButton=(0,dist_esm.jas)((function DuplicateButton2(){const editor=(0,dist_esm.jE2)(),actions=useActions(),msg=useTranslation_useTranslation(),action=actions.duplicate;return(0,jsx_runtime.jsx)(Button,{icon:action.icon,onClick:()=>action.onSelect("quick-actions"),disabled:!(editor.isIn("select")&&editor.selectedShapeIds.length>0),title:`${msg(action.label)} ${kbdStr(action.kbd)}`,smallIcon:!0})})),Menu=react.memo((function Menu2(){const msg=useTranslation_useTranslation();return(0,jsx_runtime.jsxs)(Root,{id:"main menu",children:[(0,jsx_runtime.jsx)(Trigger,{children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__trigger","data-testid":"main.menu",title:msg("menu.title"),icon:"menu"})}),(0,jsx_runtime.jsx)(Content,{alignOffset:0,sideOffset:6,children:(0,jsx_runtime.jsx)(MenuContent,{})})]})}));function MenuContent(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),menuSchema=function useMenuSchema(){const ctx=react.useContext(TLUiMenuSchemaContext);if(!ctx)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return ctx}(),breakpoint=useBreakpoint(),isReadonly=useReadonly();function getMenuItem(editor2,item,parent,depth){switch(item.type){case"custom":return isReadonly&&!item.readonlyOk?null:"LANGUAGE_MENU"===item.id?(0,jsx_runtime.jsx)(LanguageMenu,{},"item"):null;case"group":return isReadonly&&!item.readonlyOk?null:(0,jsx_runtime.jsx)(Group,{size:depth<=1?"medium":breakpoint<3||"submenu"===parent?.type&&depth>2?"tiny":"medium",children:item.children.map((child=>getMenuItem(editor2,child,item,depth+1)))},item.id);case"submenu":return isReadonly&&!item.readonlyOk?null:(0,jsx_runtime.jsxs)(Sub,{id:`main menu ${parent?parent.id+" ":""}${item.id}`,children:[(0,jsx_runtime.jsx)(SubTrigger,{label:item.label,"data-testid":`menu-item.${item.id}`}),(0,jsx_runtime.jsx)(SubContent,{sideOffset:-4,alignOffset:-1,children:item.children.map((child=>getMenuItem(editor2,child,item,depth+1)))})]},item.id);case"item":{if(isReadonly&&!item.readonlyOk)return null;const{id,checkbox,menuLabel,label,onSelect,kbd}=item.actionItem,labelToUse=menuLabel??label,labelStr=labelToUse?msg(labelToUse):void 0;return checkbox?(0,jsx_runtime.jsxs)(CheckboxItem,{onSelect:()=>onSelect("menu"),title:labelStr||"",checked:item.checked,disabled:item.disabled,children:[labelStr&&(0,jsx_runtime.jsx)("span",{children:labelStr}),kbd&&(0,jsx_runtime.jsx)(Kbd,{children:kbd})]},id):(0,jsx_runtime.jsx)(Item,{"data-testid":`menu-item.${item.id}`,kbd,label:labelToUse,onClick:()=>onSelect("menu"),disabled:item.disabled},id)}}}return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:menuSchema.map((item=>getMenuItem(editor,item,null,0)))})}const PageItemInput=function PageItemInput2({name,id,isCurrentPage}){const editor=(0,dist_esm.jE2)(),rInput=(0,react.useRef)(null),handleChange=(0,react.useCallback)((value=>{editor.renamePage(id,value||"New Page",{ephemeral:!0})}),[editor,id]),handleComplete=(0,react.useCallback)((value=>{editor.mark("rename page"),editor.renamePage(id,value||"New Page",{ephemeral:!1})}),[editor,id]);return(0,jsx_runtime.jsx)(Input,{className:"tlui-page-menu__item__input",ref:el=>rInput.current=el,defaultValue:name,onValueChange:handleChange,onComplete:handleComplete,onCancel:handleComplete,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:isCurrentPage,autoselect:!0})},onMovePage=(editor,id,from,to)=>{let index;const pages=editor.pages,below=from>to?pages[to-1]:pages[to],above=from>to?pages[to]:pages[to+1];index=below&&!above?(0,dist_esm._LC)(below.index):!below&&above?(0,dist_esm.Xgj)(pages[0].index):(0,dist_esm.eIg)(below.index,above.index),index!==pages[from].index&&(editor.mark("moving page"),editor.updatePage({id,index}))},PageItemSubmenu=(0,dist_esm.jas)((function PageItemSubmenu2({index,listSize,item,onRename}){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),pages=editor.pages,onDuplicate=(0,react.useCallback)((()=>{editor.mark("creating page");const newId=dist_esm.ezX.createId();editor.duplicatePage(item.id,newId)}),[editor,item]),onMoveUp=(0,react.useCallback)((()=>{onMovePage(editor,item.id,index,index-1)}),[editor,item,index]),onMoveDown=(0,react.useCallback)((()=>{onMovePage(editor,item.id,index,index+1)}),[editor,item,index]),onDelete=(0,react.useCallback)((()=>{editor.mark("deleting page"),editor.deletePage(item.id)}),[editor,item]);return(0,jsx_runtime.jsxs)(Root,{id:`page item submenu ${index}`,children:[(0,jsx_runtime.jsx)(Trigger,{children:(0,jsx_runtime.jsx)(Button,{title:msg("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,jsx_runtime.jsxs)(Content,{alignOffset:0,children:[(0,jsx_runtime.jsxs)(Group,{children:[onRename&&(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",onSelect:onRename,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",onSelect:onDuplicate,disabled:pages.length>=dist_esm.Etb,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),index>0&&(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",onSelect:onMoveUp,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),index<listSize-1&&(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",onSelect:onMoveDown,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),listSize>1&&(0,jsx_runtime.jsx)(Group,{children:(0,jsx_runtime.jsx)($d08ef79370b62062$export$6d08773d2e66f8f2,{dir:"ltr",onSelect:onDelete,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})})),PageMenu=function PageMenu2(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),breakpoint=useBreakpoint(),handleOpenChange=(0,react.useCallback)((()=>setIsEditing(!1)),[]),[isOpen,onOpenChange]=useMenuIsOpen("page-menu",handleOpenChange),ITEM_HEIGHT=breakpoint<5?36:40,rSortableContainer=(0,react.useRef)(null),pages=(0,dist_esm.HgN)("pages",(()=>editor.pages),[editor]),currentPage=(0,dist_esm.HgN)("currentPage",(()=>editor.currentPage),[editor]),currentPageId=(0,dist_esm.HgN)("currentPageId",(()=>editor.currentPageId),[editor]),isReadonlyMode=useReadonly(),maxPageCountReached=(0,dist_esm.HgN)("maxPageCountReached",(()=>editor.pages.length>=dist_esm.Etb),[editor]),isCoarsePointer=(0,dist_esm.HgN)("isCoarsePointer",(()=>editor.instanceState.isCoarsePointer),[editor]),[isEditing,setIsEditing]=(0,react.useState)(!1),toggleEditing=(0,react.useCallback)((()=>{isReadonlyMode||setIsEditing((s=>!s))}),[isReadonlyMode]),rMutables=(0,react.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[sortablePositionItems,setSortablePositionItems]=(0,react.useState)(Object.fromEntries(pages.map(((page,i)=>[page.id,{y:i*ITEM_HEIGHT,offsetY:0,isSelected:!1}]))));(0,react.useLayoutEffect)((()=>{setSortablePositionItems(Object.fromEntries(pages.map(((page,i)=>[page.id,{y:i*ITEM_HEIGHT,offsetY:0,isSelected:!1}]))))}),[ITEM_HEIGHT,pages]),(0,react.useEffect)((()=>{isOpen&&requestAnimationFrame((()=>{const elm=document.querySelector(`[data-testid="page-menu-item-${currentPageId}"]`);if(elm){const container=rSortableContainer.current;if(!container)return;const elmTopPosition=elm.offsetTop;elmTopPosition<container.scrollTop&&container.scrollTo({top:elmTopPosition});const elmBottomPosition=elmTopPosition+ITEM_HEIGHT;elmBottomPosition>container.scrollTop+container.offsetHeight&&container.scrollTo({top:elmBottomPosition-container.offsetHeight})}}))}),[ITEM_HEIGHT,currentPageId,isOpen]);const handlePointerDown=(0,react.useCallback)((e=>{const{clientY,currentTarget}=e,{dataset:{id,index}}=currentTarget;if(!id||!index)return;const mut=rMutables.current;(0,dist_esm.I5b)(e.currentTarget,e),mut.status="pointing",mut.pointing={id,index:+index};const dragY=sortablePositionItems[id].y;mut.startY=clientY,mut.startIndex=Math.max(0,Math.min(Math.round(dragY/ITEM_HEIGHT),pages.length-1))}),[ITEM_HEIGHT,pages.length,sortablePositionItems]),handlePointerMove=(0,react.useCallback)((e=>{const mut=rMutables.current;if("pointing"===mut.status){const{clientY}=e,offset=clientY-mut.startY;Math.abs(offset)>5&&(mut.status="dragging")}if("dragging"===mut.status){const{clientY}=e,offsetY=clientY-mut.startY,current=sortablePositionItems[mut.pointing.id],{startIndex,pointing}=mut,dragY=current.y+offsetY,dragIndex=Math.max(0,Math.min(Math.round(dragY/ITEM_HEIGHT),pages.length-1)),next={...sortablePositionItems};if(next[pointing.id]={y:current.y,offsetY,isSelected:!0},dragIndex!==mut.dragIndex){mut.dragIndex=dragIndex;for(let i=0;i<pages.length;i++){const item=pages[i];if(item.id===mut.pointing.id)continue;let{y}=next[item.id];dragIndex===startIndex?y=i*ITEM_HEIGHT:dragIndex<startIndex?y=dragIndex<=i&&i<startIndex?(i+1)*ITEM_HEIGHT:i*ITEM_HEIGHT:dragIndex>startIndex&&(y=dragIndex>=i&&i>startIndex?(i-1)*ITEM_HEIGHT:i*ITEM_HEIGHT),y!==next[item.id].y&&(next[item.id]={y,offsetY:0,isSelected:!0})}}setSortablePositionItems(next)}}),[ITEM_HEIGHT,pages,sortablePositionItems]),handlePointerUp=(0,react.useCallback)((e=>{const mut=rMutables.current;if("dragging"===mut.status){const{id,index}=mut.pointing;onMovePage(editor,id,index,mut.dragIndex)}(0,dist_esm.XEs)(e.currentTarget,e),mut.status="idle"}),[editor]),handleKeyDown=(0,react.useCallback)((e=>{const mut=rMutables.current;"Escape"===e.key&&("dragging"===mut.status&&setSortablePositionItems(Object.fromEntries(pages.map(((page,i)=>[page.id,{y:i*ITEM_HEIGHT,offsetY:0,isSelected:!1}])))),mut.status="idle")}),[ITEM_HEIGHT,pages]),handleCreatePageClick=(0,react.useCallback)((()=>{isReadonlyMode||editor.batch((()=>{editor.mark("creating page");const newPageId=dist_esm.ezX.createId();editor.createPage({name:msg("page-menu.new-page-initial-name"),id:newPageId}),editor.setCurrentPage(newPageId),setIsEditing(!0)}))}),[editor,msg,isReadonlyMode]);return(0,jsx_runtime.jsxs)(Popover,{id:"page menu",onOpenChange,open:isOpen,children:[(0,jsx_runtime.jsx)(PopoverTrigger,{children:(0,jsx_runtime.jsx)(Button,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",title:currentPage.name,children:(0,jsx_runtime.jsx)("div",{className:"tlui-page-menu__name",children:currentPage.name})})}),(0,jsx_runtime.jsx)(PopoverContent,{side:"bottom",align:"start",sideOffset:6,children:(0,jsx_runtime.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,jsx_runtime.jsx)("div",{className:"tlui-page-menu__header__title",children:msg("page-menu.title")}),!isReadonlyMode&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button,{"data-testid":"page-menu.edit",title:msg(isEditing?"page-menu.edit-done":"page-menu.edit-start"),icon:isEditing?"check":"edit",onClick:toggleEditing}),(0,jsx_runtime.jsx)(Button,{"data-testid":"page-menu.create",icon:"plus",title:msg(maxPageCountReached?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:maxPageCountReached,onClick:handleCreatePageClick})]})]}),(0,jsx_runtime.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:ITEM_HEIGHT*pages.length+4},ref:rSortableContainer,children:pages.map(((page,index)=>{const position=sortablePositionItems[page.id]??{position:40*index,offsetY:0};return isEditing?(0,jsx_runtime.jsxs)("div",{"data-testid":`page-menu-item-${page.id}`,className:"tlui-page_menu__item__sortable",style:{zIndex:page.id===currentPage.id?888:index,transform:`translate(0px, ${position.y+position.offsetY}px)`},children:[(0,jsx_runtime.jsx)(Button,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:handlePointerDown,onPointerUp:handlePointerUp,onPointerMove:handlePointerMove,onKeyDown:handleKeyDown,"data-id":page.id,"data-index":index}),breakpoint<5&&isCoarsePointer?(0,jsx_runtime.jsx)(Button,{className:"tlui-page-menu__item__button",onClick:()=>{const name=window.prompt("Rename page",page.name);name&&name!==page.name&&editor.renamePage(page.id,name)},onDoubleClick:toggleEditing,isChecked:page.id===currentPage.id,children:(0,jsx_runtime.jsx)("span",{children:page.name})}):(0,jsx_runtime.jsx)("div",{className:"tlui-page_menu__item__sortable__title",style:{height:ITEM_HEIGHT},children:(0,jsx_runtime.jsx)(PageItemInput,{id:page.id,name:page.name,isCurrentPage:page.id===currentPage.id})}),!isReadonlyMode&&(0,jsx_runtime.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":isEditing,children:(0,jsx_runtime.jsx)(PageItemSubmenu,{index,item:page,listSize:pages.length})})]},page.id+"_editing"):(0,jsx_runtime.jsxs)("div",{"data-testid":`page-menu-item-${page.id}`,className:"tlui-page-menu__item",children:[(0,jsx_runtime.jsxs)(Button,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:()=>editor.setCurrentPage(page.id),onDoubleClick:toggleEditing,isChecked:page.id===currentPage.id,title:msg("page-menu.go-to-page"),children:[(0,jsx_runtime.jsx)("div",{className:"tlui-page-menu__item__button__check",children:page.id===currentPage.id&&(0,jsx_runtime.jsx)(Icon_Icon,{icon:"check"})}),(0,jsx_runtime.jsx)("span",{children:page.name})]}),!isReadonlyMode&&(0,jsx_runtime.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,jsx_runtime.jsx)(PageItemSubmenu,{index,item:page,listSize:pages.length,onRename:()=>{if(editor.environment.isIos){const name=window.prompt("Rename page",page.name);name&&name!==page.name&&editor.renamePage(page.id,name)}else editor.batch((()=>{setIsEditing(!0),editor.setCurrentPage(page.id)}))}})})]},page.id)}))})]})})]})},RedoButton=(0,react.memo)((function RedoButton2(){const msg=useTranslation_useTranslation(),canRedo=useCanRedo(),redo=useActions().redo;return(0,jsx_runtime.jsx)(Button,{"data-testid":"main.redo",icon:redo.icon,title:`${msg(redo.label)} ${kbdStr(redo.kbd)}`,disabled:!canRedo,onClick:()=>redo.onSelect("quick-actions"),smallIcon:!0})})),TrashButton=(0,dist_esm.jas)((function TrashButton2(){const editor=(0,dist_esm.jE2)(),actions=useActions(),msg=useTranslation_useTranslation(),action=actions.delete;return useReadonly()?null:(0,jsx_runtime.jsx)(Button,{icon:action.icon,onClick:()=>action.onSelect("quick-actions"),disabled:!(editor.isIn("select")&&editor.selectedShapeIds.length>0),title:`${msg(action.label)} ${kbdStr(action.kbd)}`,smallIcon:!0})})),UndoButton=(0,react.memo)((function UndoButton2(){const msg=useTranslation_useTranslation(),canUndo=useCanUndo(),undo=useActions().undo;return(0,jsx_runtime.jsx)(Button,{"data-testid":"main.undo",icon:undo.icon,title:`${msg(undo.label)} ${kbdStr(undo.kbd)}`,disabled:!canUndo,onClick:()=>undo.onSelect("quick-actions"),smallIcon:!0})})),MenuZone=(0,dist_esm.jas)((function MenuZone2(){const editor=(0,dist_esm.jE2)(),breakpoint=useBreakpoint(),isReadonly=useReadonly();return(0,jsx_runtime.jsx)("div",{className:"tlui-menu-zone",children:(0,jsx_runtime.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,jsx_runtime.jsx)(Menu,{}),(0,jsx_runtime.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,jsx_runtime.jsx)(PageMenu,{}),breakpoint>=6&&!isReadonly&&!editor.isInAny("hand","zoom")&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,jsx_runtime.jsx)(UndoButton,{}),(0,jsx_runtime.jsx)(RedoButton,{}),(0,jsx_runtime.jsx)(TrashButton,{}),(0,jsx_runtime.jsx)(DuplicateButton,{}),(0,jsx_runtime.jsx)(ActionsMenu,{})]})]})})}));class MinimapManager{constructor(editor){this.editor=editor}dpr=1;colors={shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"};id=(0,dist_esm.ELf)();cvs=null;pageBounds=[];collaborators=[];canvasScreenBounds=new dist_esm.NoK;canvasPageBounds=new dist_esm.NoK;contentPageBounds=new dist_esm.NoK;contentScreenBounds=new dist_esm.NoK;originPagePoint=new dist_esm.GF3;originPageCenter=new dist_esm.GF3;isInViewport=!1;debug=!1;setDpr(dpr){this.dpr=+dpr.toFixed(2)}updateContentScreenBounds=()=>{const{contentScreenBounds,contentPageBounds:content,canvasScreenBounds:canvas}=this;let{x,y,w,h}=contentScreenBounds;if(content.w>content.h){const sh=canvas.w/(content.w/content.h);sh>canvas.h?(x=(canvas.w-canvas.w*(canvas.h/sh))/2,y=0,w=canvas.w*(canvas.h/sh),h=canvas.h):(x=0,y=(canvas.h-sh)/2,w=canvas.w,h=sh)}else if(content.w<content.h){const sw=canvas.h/(content.h/content.w);x=(canvas.w-sw)/2,y=0,w=sw,h=canvas.h}else x=canvas.h/2,y=0,w=canvas.h,h=canvas.h;contentScreenBounds.set(x,y,w,h)};updateCanvasPageBounds=()=>{const{canvasPageBounds,canvasScreenBounds,contentPageBounds,contentScreenBounds}=this;canvasPageBounds.set(0,0,contentPageBounds.width/(contentScreenBounds.width/canvasScreenBounds.width),contentPageBounds.height/(contentScreenBounds.height/canvasScreenBounds.height)),canvasPageBounds.center=contentPageBounds.center};getScreenPoint=(x,y)=>{const{canvasScreenBounds}=this;return{x:(x-canvasScreenBounds.minX)*this.dpr,y:(y-canvasScreenBounds.minY)*this.dpr}};getPagePoint=(x,y)=>{const{contentPageBounds,contentScreenBounds,canvasPageBounds}=this,{x:screenX,y:screenY}=this.getScreenPoint(x,y);return new dist_esm.GF3(canvasPageBounds.minX+screenX*contentPageBounds.width/contentScreenBounds.width,canvasPageBounds.minY+screenY*contentPageBounds.height/contentScreenBounds.height,1)};minimapScreenPointToPagePoint=(x,y,shiftKey=!1,clampToBounds=!1)=>{const{editor}=this,{viewportPageBounds}=editor;let{x:px,y:py}=this.getPagePoint(x,y);if(clampToBounds){const shapesPageBounds=this.editor.currentPageBounds,vpPageBounds=viewportPageBounds,minX=(shapesPageBounds?.minX??0)-vpPageBounds.width/2,maxX=(shapesPageBounds?.maxX??0)+vpPageBounds.width/2,minY=(shapesPageBounds?.minY??0)-vpPageBounds.height/2,maxY=(shapesPageBounds?.maxY??0)+vpPageBounds.height/2,lx=Math.max(0,minX+vpPageBounds.width-px),rx=Math.max(0,-(maxX-vpPageBounds.width-px)),ly=Math.max(0,minY+vpPageBounds.height-py),ry=Math.max(0,-(maxY-vpPageBounds.height-py)),ql=Math.max(0,lx-rx),qr=Math.max(0,rx-lx),qt=Math.max(0,ly-ry),qb=Math.max(0,ry-ly);ql&&ql>qr?px+=ql/2:qr&&(px-=qr/2),qt&&qt>qb?py+=qt/2:qb&&(py-=qb/2),px=(0,dist_esm.uZ5)(px,minX,maxX),py=(0,dist_esm.uZ5)(py,minY,maxY)}if(shiftKey){const{originPagePoint}=this;Math.abs(px-originPagePoint.x)>Math.abs(py-originPagePoint.y)?py=originPagePoint.y:px=originPagePoint.x}return new dist_esm.GF3(px,py)};render=()=>{const{cvs,pageBounds}=this;this.updateCanvasPageBounds();const{editor,canvasScreenBounds,canvasPageBounds,contentPageBounds,contentScreenBounds}=this,{width:cw,height:ch}=canvasScreenBounds,{viewportPageBounds,selectedShapeIds}=editor;if(!cvs||!pageBounds)return;const ctx=cvs.getContext("2d");if(!ctx)throw new Error("Minimap (shapes): Could not get context");ctx.resetTransform(),ctx.globalAlpha=1,ctx.clearRect(0,0,cw,ch);const sx=contentScreenBounds.width/contentPageBounds.width,sy=contentScreenBounds.height/contentPageBounds.height;ctx.translate((cw-contentScreenBounds.width)/2,(ch-contentScreenBounds.height)/2),ctx.scale(sx,sy),ctx.translate(-contentPageBounds.minX,-contentPageBounds.minY);const rx=8/sx,ry=8/sx,ax=1/sx,ay=1/sx,bx=rx/4,by=ry/4,shapesPath=new Path2D,selectedPath=new Path2D,{shapeFill,selectFill,viewportFill}=this.colors;let pb;for(let i=0,n=pageBounds.length;i<n;i++)pb=pageBounds[i],MinimapManager.roundedRect(selectedShapeIds.includes(pb.id)?selectedPath:shapesPath,pb.minX,pb.minY,pb.width,pb.height,(0,dist_esm.uZ5)(rx,ax,pb.width/bx),(0,dist_esm.uZ5)(ry,ay,pb.height/by));if(ctx.fillStyle=shapeFill,ctx.fill(shapesPath),ctx.fillStyle=selectFill,ctx.fill(selectedPath),this.debug){const commonBounds=dist_esm.NoK.Common(pageBounds),{minX,minY,width,height}=commonBounds;ctx.strokeStyle="green",ctx.lineWidth=2/sx,ctx.strokeRect(minX+1/sx,minY+1/sy,width-2/sx,height-2/sy)}{const{brush}=editor.instanceState;if(brush){const{x,y,w,h}=brush;ctx.beginPath(),MinimapManager.sharpRect(ctx,x,y,w,h),ctx.closePath(),ctx.fillStyle=viewportFill,ctx.fill()}}{const{minX,minY,width,height}=viewportPageBounds;ctx.beginPath();const rx2=12/sx,ry2=12/sx;MinimapManager.roundedRect(ctx,minX,minY,width,height,Math.min(width/4,rx2),Math.min(height/4,ry2)),ctx.closePath(),ctx.fillStyle=viewportFill,ctx.fill(),this.debug&&(ctx.strokeStyle="orange",ctx.strokeRect(minX+1/sx,minY+1/sy,width-2/sx,height-2/sy))}const px=2.5/sx,py=2.5/sy,{currentPageId}=editor;let collaborator;for(let i=0;i<this.collaborators.length;i++)collaborator=this.collaborators[i],collaborator.currentPageId===currentPageId&&(ctx.beginPath(),ctx.ellipse((0,dist_esm.uZ5)(collaborator.cursor.x,canvasPageBounds.minX+px,canvasPageBounds.maxX-px),(0,dist_esm.uZ5)(collaborator.cursor.y,canvasPageBounds.minY+py,canvasPageBounds.maxY-py),5/sx,5/sy,0,0,dist_esm.yoY),ctx.fillStyle=collaborator.color,ctx.fill());if(this.debug){ctx.lineWidth=2/sx;{const{minX,minY,width,height}=contentPageBounds;ctx.strokeStyle="red",ctx.strokeRect(minX+1/sx,minY+1/sy,width-2/sx,height-2/sy)}{const{minX,minY,width,height}=canvasPageBounds;ctx.strokeStyle="blue",ctx.strokeRect(minX+1/sx,minY+1/sy,width-2/sx,height-2/sy)}}};static roundedRect(ctx,x,y,width,height,rx,ry){rx<1&&ry<1?ctx.rect(x,y,width,height):(ctx.moveTo(x+rx,y),ctx.lineTo(x+width-rx,y),ctx.quadraticCurveTo(x+width,y,x+width,y+ry),ctx.lineTo(x+width,y+height-ry),ctx.quadraticCurveTo(x+width,y+height,x+width-rx,y+height),ctx.lineTo(x+rx,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-ry),ctx.lineTo(x,y+ry),ctx.quadraticCurveTo(x,y,x+rx,y))}static sharpRect(ctx,x,y,width,height,_rx,_ry){ctx.rect(x,y,width,height)}}function Minimap({shapeFill,selectFill,viewportFill}){const editor=(0,dist_esm.jE2)(),rCanvas=react.useRef(null),rPointing=react.useRef(!1),isDarkMode=(0,dist_esm.Gv6)(),devicePixelRatio=(0,dist_esm.vcd)("dpr",(()=>editor.instanceState.devicePixelRatio),[editor]),presences=react.useMemo((()=>editor.store.query.records("instance_presence")),[editor]),minimap=react.useMemo((()=>new MinimapManager(editor)),[editor]);react.useEffect((()=>{const raf=requestAnimationFrame((()=>{const style=getComputedStyle(editor.getContainer());minimap.colors={shapeFill:style.getPropertyValue(shapeFill).trim(),selectFill:style.getPropertyValue(selectFill).trim(),viewportFill:style.getPropertyValue(viewportFill).trim()},minimap.render()}));return()=>{cancelAnimationFrame(raf)}}),[editor,selectFill,shapeFill,viewportFill,minimap,isDarkMode]);const onDoubleClick=react.useCallback((e=>{if(!editor.currentPageShapeIds.size)return;const point=minimap.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),clampedPoint=minimap.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);minimap.originPagePoint.setTo(clampedPoint),minimap.originPageCenter.setTo(editor.viewportPageBounds.center),editor.centerOnPoint(point,{duration:dist_esm.KDN})}),[editor,minimap]),onPointerDown=react.useCallback((e=>{const elm=e.currentTarget;if((0,dist_esm.I5b)(elm,e),!editor.currentPageShapeIds.size)return;rPointing.current=!0,minimap.isInViewport=!1;const point=minimap.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),clampedPoint=minimap.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),_vpPageBounds=editor.viewportPageBounds;if(minimap.isInViewport=_vpPageBounds.containsPoint(clampedPoint),minimap.isInViewport)minimap.originPagePoint.setTo(clampedPoint),minimap.originPageCenter.setTo(_vpPageBounds.center);else{const delta=dist_esm.GF3.Sub(_vpPageBounds.center,_vpPageBounds.point),pagePoint=dist_esm.GF3.Add(point,delta);minimap.originPagePoint.setTo(pagePoint),minimap.originPageCenter.setTo(point),editor.centerOnPoint(point,{duration:dist_esm.KDN})}document.body.addEventListener("pointerup",(function release(e2){elm&&(0,dist_esm.XEs)(elm,e2),rPointing.current=!1,document.body.removeEventListener("pointerup",release)}))}),[editor,minimap]),onPointerMove=react.useCallback((e=>{const point=minimap.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0);if(rPointing.current){if(minimap.isInViewport){const delta=minimap.originPagePoint.clone().sub(minimap.originPageCenter);return void editor.centerOnPoint(dist_esm.GF3.Sub(point,delta))}editor.centerOnPoint(point)}const pagePoint=minimap.getPagePoint(e.clientX,e.clientY),screenPoint=editor.pageToScreen(pagePoint),info={type:"pointer",target:"canvas",name:"pointer_move",...(0,dist_esm.YyG)(e),point:screenPoint,isPen:editor.instanceState.isPenMode};editor.dispatch(info)}),[editor,minimap]),onWheel=react.useCallback((e=>{const offset=(0,dist_esm.fNR)(e);editor.dispatch({type:"wheel",name:"wheel",delta:offset,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[editor]);return(0,dist_esm.BKU)("update when dpr changes",(()=>{const dpr=devicePixelRatio.value;minimap.setDpr(dpr);const canvas=rCanvas.current,rect=canvas.getBoundingClientRect(),width=rect.width*dpr,height=rect.height*dpr;canvas.width=width,canvas.height=height,minimap.canvasScreenBounds.set(rect.x,rect.y,width,height),minimap.cvs=rCanvas.current}),[devicePixelRatio,minimap]),(0,dist_esm.BKU)("minimap render when pagebounds or collaborators changes",(()=>{const{currentPageShapeIds:shapeIdsOnCurrentPage,viewportPageBounds,currentPageBounds:commonBoundsOfAllShapesOnCurrentPage}=editor;devicePixelRatio.value;minimap.contentPageBounds=commonBoundsOfAllShapesOnCurrentPage?dist_esm.NoK.Expand(commonBoundsOfAllShapesOnCurrentPage,viewportPageBounds):viewportPageBounds,minimap.updateContentScreenBounds();const allShapeBounds=[];shapeIdsOnCurrentPage.forEach((id=>{let pageBounds=editor.getShapePageBounds(id);if(!pageBounds)return;const pageMask=editor.getShapeMask(id);if(pageMask){const intersection=(0,dist_esm.tYe)(pageMask,pageBounds.corners);if(!intersection)return;pageBounds=dist_esm.NoK.FromPoints(intersection)}pageBounds&&(pageBounds.id=id,allShapeBounds.push(pageBounds))})),minimap.pageBounds=allShapeBounds,minimap.collaborators=presences.value,minimap.render()}),[editor,minimap]),(0,jsx_runtime.jsx)("div",{className:"tlui-minimap",children:(0,jsx_runtime.jsx)("canvas",{ref:rCanvas,className:"tlui-minimap__canvas",onDoubleClick,onPointerMove,onPointerDown,onWheel})})}const ZoomMenu=(0,dist_esm.jas)((function ZoomMenu2(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),breakpoint=useBreakpoint(),zoom=editor.zoomLevel,hasShapes=editor.currentPageShapeIds.size>0,hasSelected=editor.selectedShapeIds.length>0,isZoomedTo100=1===editor.zoomLevel,handleDoubleClick=react.useCallback((()=>{editor.resetZoom(editor.viewportScreenCenter,{duration:dist_esm.KDN})}),[editor]);return(0,jsx_runtime.jsxs)(Root,{id:"zoom",children:[(0,jsx_runtime.jsx)(Trigger,{children:(0,jsx_runtime.jsx)(Button,{title:`${msg("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu",className:breakpoint<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:handleDoubleClick,icon:breakpoint<4?"zoom-in":void 0,children:breakpoint<4?null:(0,jsx_runtime.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*zoom),"%"]})})}),(0,jsx_runtime.jsx)(Content,{side:"top",align:"start",alignOffset:0,children:(0,jsx_runtime.jsxs)(Group,{children:[(0,jsx_runtime.jsx)(ZoomMenuItem,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,jsx_runtime.jsx)(ZoomMenuItem,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,jsx_runtime.jsx)(ZoomMenuItem,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:isZoomedTo100}),(0,jsx_runtime.jsx)(ZoomMenuItem,{action:"zoom-to-fit",disabled:!hasShapes,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,jsx_runtime.jsx)(ZoomMenuItem,{action:"zoom-to-selection",disabled:!hasSelected,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})}));function ZoomMenuItem(props){const{action,disabled=!1,noClose=!1}=props,actions=useActions();return(0,jsx_runtime.jsx)(Item,{label:actions[action].label,kbd:actions[action].kbd,"data-testid":props["data-testid"],onClick:()=>actions[action].onSelect("zoom-menu"),noClose,disabled})}const NavigationZone=(0,react.memo)((function NavigationZone2(){const actions=useActions(),msg=useTranslation_useTranslation(),breakpoint=useBreakpoint(),[collapsed,setCollapsed]=function useLocalStorageState(key,defaultValue){const[state,setState]=react.useState(defaultValue);react.useLayoutEffect((()=>{const value=localStorage.getItem(key);if(value)try{setState(JSON.parse(value))}catch(e){console.error(`Could not restore value ${key} from local storage.`)}}),[key]);const updateValue=react.useCallback((setter=>{setState((s=>{const value="function"==typeof setter?setter(s):setter;return localStorage.setItem(key,JSON.stringify(value)),value}))}),[key]);return[state,updateValue]}("minimap",!0),toggleMinimap=(0,react.useCallback)((()=>{setCollapsed((s=>!s))}),[setCollapsed]);return breakpoint<4?null:(0,jsx_runtime.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,jsx_runtime.jsx)("div",{className:"tlui-navigation-zone__controls",children:breakpoint<6?(0,jsx_runtime.jsx)(ZoomMenu,{}):collapsed?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ZoomMenu,{}),(0,jsx_runtime.jsx)(Button,{title:msg("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-testid":"minimap.toggle",onClick:toggleMinimap,icon:collapsed?"chevrons-ne":"chevrons-sw"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button,{icon:"minus","data-testid":"minimap.zoom-out",title:`${msg(actions["zoom-out"].label)} ${kbdStr(actions["zoom-out"].kbd)}`,onClick:()=>actions["zoom-out"].onSelect("navigation-zone")}),(0,jsx_runtime.jsx)(ZoomMenu,{}),(0,jsx_runtime.jsx)(Button,{icon:"plus","data-testid":"minimap.zoom-in",title:`${msg(actions["zoom-in"].label)} ${kbdStr(actions["zoom-in"].kbd)}`,onClick:()=>actions["zoom-in"].onSelect("navigation-zone")}),(0,jsx_runtime.jsx)(Button,{title:msg("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:toggleMinimap,icon:collapsed?"chevrons-ne":"chevrons-sw"})]})}),breakpoint>=6&&!collapsed&&(0,jsx_runtime.jsx)(Minimap,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})})),ExitPenMode=(0,dist_esm.jas)((function ExitPenMode2(){const isPenMode=(0,dist_esm.jE2)().instanceState.isPenMode,actions=useActions();if(!isPenMode)return null;const action=actions["exit-pen-mode"];return(0,jsx_runtime.jsx)(Button,{label:action.label,iconLeft:action.icon,onClick:()=>action.onSelect("helper-buttons")})})),StopFollowing=(0,dist_esm.jas)((function ExitPenMode(){const editor=(0,dist_esm.jE2)(),actions=useActions();if(!editor.instanceState.followingUserId)return null;const action=actions["stop-following"];return(0,jsx_runtime.jsx)(Button,{label:action.label,iconLeft:action.icon,onClick:()=>action.onSelect("people-menu")})})),selectToolStyles=[dist_esm.R_W,dist_esm.ciG,dist_esm.pp9,dist_esm.ST$];function useRelevantStyles(){const editor=(0,dist_esm.jE2)();return(0,dist_esm.HgN)("getRelevantStyles",(()=>{const styles=new dist_esm.otj(editor.sharedStyles),hasShape=editor.selectedShapeIds.length>0||!!editor.root.current.value?.shapeType;if(0===styles.size&&editor.isIn("select")&&0===editor.selectedShapeIds.length)for(const style of selectToolStyles)styles.applyValue(style,editor.getStyleForNextShape(style));return 0!==styles.size||hasShape?{styles,opacity:editor.sharedOpacity}:null}),[editor])}const ButtonPicker=react.memo((function _ButtonPicker(props){const{uiType,items,title,style,value,columns=(0,dist_esm.uZ5)(items.length,2,4),onValueChange}=props,editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),rPointing=(0,react.useRef)(!1),{handleButtonClick,handleButtonPointerDown,handleButtonPointerEnter,handleButtonPointerUp}=react.useMemo((()=>{const handlePointerUp=()=>{rPointing.current=!1,window.removeEventListener("pointerup",handlePointerUp)};return{handleButtonClick:e=>{const{id}=e.currentTarget.dataset;"shared"===value.type&&value.value===id||(editor.mark("point picker item"),onValueChange(style,id,!1))},handleButtonPointerDown:e=>{const{id}=e.currentTarget.dataset;editor.mark("point picker item"),onValueChange(style,id,!0),rPointing.current=!0,window.addEventListener("pointerup",handlePointerUp)},handleButtonPointerEnter:e=>{if(!rPointing.current)return;const{id}=e.currentTarget.dataset;onValueChange(style,id,!0)},handleButtonPointerUp:e=>{const{id}=e.currentTarget.dataset;onValueChange(style,id,!1)}}}),[value,editor,onValueChange,style]),theme=(0,dist_esm.HgN)("theme",(()=>(0,dist_esm.y6M)({isDarkMode:editor.user.isDarkMode})),[editor]);return(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-button-grid",{"tlui-button-grid__two":2===columns,"tlui-button-grid__three":3===columns,"tlui-button-grid__four":4===columns}),children:items.map((item=>(0,jsx_runtime.jsx)(Button,{"data-id":item.value,"data-testid":`style.${uiType}.${item.value}`,"aria-label":item.value,"data-state":"shared"===value.type&&value.value===item.value?"hinted":void 0,title:title+"  "+msg(`${uiType}-style.${item.value}`),className:classnames_default()("tlui-button-grid__button"),style:style===dist_esm.R_W?{color:theme[item.value].solid}:void 0,onPointerEnter:handleButtonPointerEnter,onPointerDown:handleButtonPointerDown,onPointerUp:handleButtonPointerUp,onClick:handleButtonClick,icon:item.icon},item.value)))})}));var number_dist=__webpack_require__("./node_modules/@radix-ui/number/dist/index.mjs"),react_use_previous_dist=__webpack_require__("./node_modules/@radix-ui/react-use-previous/dist/index.mjs"),react_use_size_dist=__webpack_require__("./node_modules/@radix-ui/react-use-size/dist/index.mjs");const $faa2e61a3361514f$var$PAGE_KEYS=["PageUp","PageDown"],$faa2e61a3361514f$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$faa2e61a3361514f$var$BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[$faa2e61a3361514f$var$Collection,$faa2e61a3361514f$var$useCollection,$faa2e61a3361514f$var$createCollectionScope]=(0,react_collection_dist.B)("Slider"),[$faa2e61a3361514f$var$createSliderContext,$faa2e61a3361514f$export$ef72632d7b901f97]=(0,react_context_dist.b)("Slider",[$faa2e61a3361514f$var$createCollectionScope]),[$faa2e61a3361514f$var$SliderProvider,$faa2e61a3361514f$var$useSliderContext]=$faa2e61a3361514f$var$createSliderContext("Slider"),$faa2e61a3361514f$export$472062a354075cee=(0,react.forwardRef)(((props,forwardedRef)=>{const{name,min=0,max=100,step=1,orientation="horizontal",disabled=!1,minStepsBetweenThumbs=0,defaultValue=[min],value:value1,onValueChange=()=>{},onValueCommit=()=>{},inverted=!1,...sliderProps}=props,[slider,setSlider]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setSlider(node))),thumbRefs=(0,react.useRef)(new Set),valueIndexToChangeRef=(0,react.useRef)(0),isHorizontal="horizontal"===orientation,isFormControl=!slider||Boolean(slider.closest("form")),SliderOrientation=isHorizontal?$faa2e61a3361514f$var$SliderHorizontal:$faa2e61a3361514f$var$SliderVertical,[values=[],setValues]=(0,react_use_controllable_state_dist.T)({prop:value1,defaultProp:defaultValue,onChange:value=>{var _thumbs$valueIndexToC;null===(_thumbs$valueIndexToC=[...thumbRefs.current][valueIndexToChangeRef.current])||void 0===_thumbs$valueIndexToC||_thumbs$valueIndexToC.focus(),onValueChange(value)}}),valuesBeforeSlideStartRef=(0,react.useRef)(values);function updateValues(value,atIndex,{commit}={commit:!1}){const decimalCount=function $faa2e61a3361514f$var$getDecimalCount(value){return(String(value).split(".")[1]||"").length}(step),snapToStep=function $faa2e61a3361514f$var$roundValue(value,decimalCount){const rounder=Math.pow(10,decimalCount);return Math.round(value*rounder)/rounder}(Math.round((value-min)/step)*step+min,decimalCount),nextValue=(0,number_dist.u)(snapToStep,[min,max]);setValues(((prevValues=[])=>{const nextValues=function $faa2e61a3361514f$var$getNextSortedValues(prevValues=[],nextValue,atIndex){const nextValues=[...prevValues];return nextValues[atIndex]=nextValue,nextValues.sort(((a,b)=>a-b))}(prevValues,nextValue,atIndex);if(function $faa2e61a3361514f$var$hasMinStepsBetweenValues(values,minStepsBetweenValues){if(minStepsBetweenValues>0){const stepsBetweenValues=function $faa2e61a3361514f$var$getStepsBetweenValues(values){return values.slice(0,-1).map(((value,index)=>values[index+1]-value))}(values);return Math.min(...stepsBetweenValues)>=minStepsBetweenValues}return!0}(nextValues,minStepsBetweenThumbs*step)){valueIndexToChangeRef.current=nextValues.indexOf(nextValue);const hasChanged=String(nextValues)!==String(prevValues);return hasChanged&&commit&&onValueCommit(nextValues),hasChanged?nextValues:prevValues}return prevValues}))}return(0,react.createElement)($faa2e61a3361514f$var$SliderProvider,{scope:props.__scopeSlider,disabled,min,max,valueIndexToChangeRef,thumbs:thumbRefs.current,values,orientation},(0,react.createElement)($faa2e61a3361514f$var$Collection.Provider,{scope:props.__scopeSlider},(0,react.createElement)($faa2e61a3361514f$var$Collection.Slot,{scope:props.__scopeSlider},(0,react.createElement)(SliderOrientation,(0,esm_extends.Z)({"aria-disabled":disabled,"data-disabled":disabled?"":void 0},sliderProps,{ref:composedRefs,onPointerDown:(0,dist.M)(sliderProps.onPointerDown,(()=>{disabled||(valuesBeforeSlideStartRef.current=values)})),min,max,inverted,onSlideStart:disabled?void 0:function handleSlideStart(value){const closestIndex=function $faa2e61a3361514f$var$getClosestValueIndex(values,nextValue){if(1===values.length)return 0;const distances=values.map((value=>Math.abs(value-nextValue))),closestDistance=Math.min(...distances);return distances.indexOf(closestDistance)}(values,value);updateValues(value,closestIndex)},onSlideMove:disabled?void 0:function handleSlideMove(value){updateValues(value,valueIndexToChangeRef.current)},onSlideEnd:disabled?void 0:function handleSlideEnd(){const prevValue=valuesBeforeSlideStartRef.current[valueIndexToChangeRef.current];values[valueIndexToChangeRef.current]!==prevValue&&onValueCommit(values)},onHomeKeyDown:()=>!disabled&&updateValues(min,0,{commit:!0}),onEndKeyDown:()=>!disabled&&updateValues(max,values.length-1,{commit:!0}),onStepKeyDown:({event,direction:stepDirection})=>{if(!disabled){const multiplier=$faa2e61a3361514f$var$PAGE_KEYS.includes(event.key)||event.shiftKey&&$faa2e61a3361514f$var$ARROW_KEYS.includes(event.key)?10:1,atIndex=valueIndexToChangeRef.current;updateValues(values[atIndex]+step*multiplier*stepDirection,atIndex,{commit:!0})}}})))),isFormControl&&values.map(((value,index)=>(0,react.createElement)($faa2e61a3361514f$var$BubbleInput,{key:index,name:name?name+(values.length>1?"[]":""):void 0,value}))))})),[$faa2e61a3361514f$var$SliderOrientationProvider,$faa2e61a3361514f$var$useSliderOrientationContext]=$faa2e61a3361514f$var$createSliderContext("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),$faa2e61a3361514f$var$SliderHorizontal=(0,react.forwardRef)(((props,forwardedRef)=>{const{min,max,dir,inverted,onSlideStart,onSlideMove,onSlideEnd,onStepKeyDown,...sliderProps}=props,[slider,setSlider]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setSlider(node))),rectRef=(0,react.useRef)(),direction=(0,react_direction_dist.gm)(dir),isDirectionLTR="ltr"===direction,isSlidingFromLeft=isDirectionLTR&&!inverted||!isDirectionLTR&&inverted;function getValueFromPointer(pointerPosition){const rect=rectRef.current||slider.getBoundingClientRect(),value=$faa2e61a3361514f$var$linearScale([0,rect.width],isSlidingFromLeft?[min,max]:[max,min]);return rectRef.current=rect,value(pointerPosition-rect.left)}return(0,react.createElement)($faa2e61a3361514f$var$SliderOrientationProvider,{scope:props.__scopeSlider,startEdge:isSlidingFromLeft?"left":"right",endEdge:isSlidingFromLeft?"right":"left",direction:isSlidingFromLeft?1:-1,size:"width"},(0,react.createElement)($faa2e61a3361514f$var$SliderImpl,(0,esm_extends.Z)({dir:direction,"data-orientation":"horizontal"},sliderProps,{ref:composedRefs,style:{...sliderProps.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:event=>{const value=getValueFromPointer(event.clientX);null==onSlideStart||onSlideStart(value)},onSlideMove:event=>{const value=getValueFromPointer(event.clientX);null==onSlideMove||onSlideMove(value)},onSlideEnd:()=>{rectRef.current=void 0,null==onSlideEnd||onSlideEnd()},onStepKeyDown:event=>{const isBackKey=$faa2e61a3361514f$var$BACK_KEYS[isSlidingFromLeft?"from-left":"from-right"].includes(event.key);null==onStepKeyDown||onStepKeyDown({event,direction:isBackKey?-1:1})}})))})),$faa2e61a3361514f$var$SliderVertical=(0,react.forwardRef)(((props,forwardedRef)=>{const{min,max,inverted,onSlideStart,onSlideMove,onSlideEnd,onStepKeyDown,...sliderProps}=props,sliderRef=(0,react.useRef)(null),ref=(0,react_compose_refs_dist.e)(forwardedRef,sliderRef),rectRef=(0,react.useRef)(),isSlidingFromBottom=!inverted;function getValueFromPointer(pointerPosition){const rect=rectRef.current||sliderRef.current.getBoundingClientRect(),value=$faa2e61a3361514f$var$linearScale([0,rect.height],isSlidingFromBottom?[max,min]:[min,max]);return rectRef.current=rect,value(pointerPosition-rect.top)}return(0,react.createElement)($faa2e61a3361514f$var$SliderOrientationProvider,{scope:props.__scopeSlider,startEdge:isSlidingFromBottom?"bottom":"top",endEdge:isSlidingFromBottom?"top":"bottom",size:"height",direction:isSlidingFromBottom?1:-1},(0,react.createElement)($faa2e61a3361514f$var$SliderImpl,(0,esm_extends.Z)({"data-orientation":"vertical"},sliderProps,{ref,style:{...sliderProps.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:event=>{const value=getValueFromPointer(event.clientY);null==onSlideStart||onSlideStart(value)},onSlideMove:event=>{const value=getValueFromPointer(event.clientY);null==onSlideMove||onSlideMove(value)},onSlideEnd:()=>{rectRef.current=void 0,null==onSlideEnd||onSlideEnd()},onStepKeyDown:event=>{const isBackKey=$faa2e61a3361514f$var$BACK_KEYS[isSlidingFromBottom?"from-bottom":"from-top"].includes(event.key);null==onStepKeyDown||onStepKeyDown({event,direction:isBackKey?-1:1})}})))})),$faa2e61a3361514f$var$SliderImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSlider,onSlideStart,onSlideMove,onSlideEnd,onHomeKeyDown,onEndKeyDown,onStepKeyDown,...sliderProps}=props,context=$faa2e61a3361514f$var$useSliderContext("Slider",__scopeSlider);return(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({},sliderProps,{ref:forwardedRef,onKeyDown:(0,dist.M)(props.onKeyDown,(event=>{"Home"===event.key?(onHomeKeyDown(event),event.preventDefault()):"End"===event.key?(onEndKeyDown(event),event.preventDefault()):$faa2e61a3361514f$var$PAGE_KEYS.concat($faa2e61a3361514f$var$ARROW_KEYS).includes(event.key)&&(onStepKeyDown(event),event.preventDefault())})),onPointerDown:(0,dist.M)(props.onPointerDown,(event=>{const target=event.target;target.setPointerCapture(event.pointerId),event.preventDefault(),context.thumbs.has(target)?target.focus():onSlideStart(event)})),onPointerMove:(0,dist.M)(props.onPointerMove,(event=>{event.target.hasPointerCapture(event.pointerId)&&onSlideMove(event)})),onPointerUp:(0,dist.M)(props.onPointerUp,(event=>{const target=event.target;target.hasPointerCapture(event.pointerId)&&(target.releasePointerCapture(event.pointerId),onSlideEnd(event))}))}))})),$faa2e61a3361514f$export$105594979f116971=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSlider,...trackProps}=props,context=$faa2e61a3361514f$var$useSliderContext("SliderTrack",__scopeSlider);return(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({"data-disabled":context.disabled?"":void 0,"data-orientation":context.orientation},trackProps,{ref:forwardedRef}))})),$faa2e61a3361514f$export$a5cf38a7a000fe77=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSlider,...rangeProps}=props,context=$faa2e61a3361514f$var$useSliderContext("SliderRange",__scopeSlider),orientation=$faa2e61a3361514f$var$useSliderOrientationContext("SliderRange",__scopeSlider),ref=(0,react.useRef)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref),valuesCount=context.values.length,percentages=context.values.map((value=>$faa2e61a3361514f$var$convertValueToPercentage(value,context.min,context.max))),offsetStart=valuesCount>1?Math.min(...percentages):0,offsetEnd=100-Math.max(...percentages);return(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({"data-orientation":context.orientation,"data-disabled":context.disabled?"":void 0},rangeProps,{ref:composedRefs,style:{...props.style,[orientation.startEdge]:offsetStart+"%",[orientation.endEdge]:offsetEnd+"%"}}))})),$faa2e61a3361514f$export$2c1b491743890dec=(0,react.forwardRef)(((props,forwardedRef)=>{const getItems=$faa2e61a3361514f$var$useCollection(props.__scopeSlider),[thumb,setThumb]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setThumb(node))),index=(0,react.useMemo)((()=>thumb?getItems().findIndex((item=>item.ref.current===thumb)):-1),[getItems,thumb]);return(0,react.createElement)($faa2e61a3361514f$var$SliderThumbImpl,(0,esm_extends.Z)({},props,{ref:composedRefs,index}))})),$faa2e61a3361514f$var$SliderThumbImpl=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeSlider,index,...thumbProps}=props,context=$faa2e61a3361514f$var$useSliderContext("SliderThumb",__scopeSlider),orientation=$faa2e61a3361514f$var$useSliderOrientationContext("SliderThumb",__scopeSlider),[thumb,setThumb]=(0,react.useState)(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,(node=>setThumb(node))),size=(0,react_use_size_dist.t)(thumb),value=context.values[index],percent=void 0===value?0:$faa2e61a3361514f$var$convertValueToPercentage(value,context.min,context.max),label=function $faa2e61a3361514f$var$getLabel(index,totalValues){return totalValues>2?`Value ${index+1} of ${totalValues}`:2===totalValues?["Minimum","Maximum"][index]:void 0}(index,context.values.length),orientationSize=null==size?void 0:size[orientation.size],thumbInBoundsOffset=orientationSize?function $faa2e61a3361514f$var$getThumbInBoundsOffset(width,left,direction){const halfWidth=width/2,offset=$faa2e61a3361514f$var$linearScale([0,50],[0,halfWidth]);return(halfWidth-offset(left)*direction)*direction}(orientationSize,percent,orientation.direction):0;return(0,react.useEffect)((()=>{if(thumb)return context.thumbs.add(thumb),()=>{context.thumbs.delete(thumb)}}),[thumb,context.thumbs]),(0,react.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[orientation.startEdge]:`calc(${percent}% + ${thumbInBoundsOffset}px)`}},(0,react.createElement)($faa2e61a3361514f$var$Collection.ItemSlot,{scope:props.__scopeSlider},(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({role:"slider","aria-label":props["aria-label"]||label,"aria-valuemin":context.min,"aria-valuenow":value,"aria-valuemax":context.max,"aria-orientation":context.orientation,"data-orientation":context.orientation,"data-disabled":context.disabled?"":void 0,tabIndex:context.disabled?void 0:0},thumbProps,{ref:composedRefs,style:void 0===value?{display:"none"}:props.style,onFocus:(0,dist.M)(props.onFocus,(()=>{context.valueIndexToChangeRef.current=index}))}))))})),$faa2e61a3361514f$var$BubbleInput=props=>{const{value,...inputProps}=props,ref=(0,react.useRef)(null),prevValue=(0,react_use_previous_dist.D)(value);return(0,react.useEffect)((()=>{const input=ref.current,inputProto=window.HTMLInputElement.prototype,setValue=Object.getOwnPropertyDescriptor(inputProto,"value").set;if(prevValue!==value&&setValue){const event=new Event("input",{bubbles:!0});setValue.call(input,value),input.dispatchEvent(event)}}),[prevValue,value]),(0,react.createElement)("input",(0,esm_extends.Z)({style:{display:"none"}},inputProps,{ref,defaultValue:value}))};function $faa2e61a3361514f$var$convertValueToPercentage(value,min,max){const percentage=100/(max-min)*(value-min);return(0,number_dist.u)(percentage,[0,100])}function $faa2e61a3361514f$var$linearScale(input,output){return value=>{if(input[0]===input[1]||output[0]===output[1])return output[0];const ratio=(output[1]-output[0])/(input[1]-input[0]);return output[0]+ratio*(value-input[0])}}const $faa2e61a3361514f$export$be92b6f5f03c0fe9=$faa2e61a3361514f$export$472062a354075cee,$faa2e61a3361514f$export$13921ac0cc260818=$faa2e61a3361514f$export$105594979f116971,$faa2e61a3361514f$export$9a58ef0d7ad3278c=$faa2e61a3361514f$export$a5cf38a7a000fe77,$faa2e61a3361514f$export$6521433ed15a34db=$faa2e61a3361514f$export$2c1b491743890dec,Slider=(0,react.memo)((function Slider2(props){const{title,steps,value,label,onValueChange}=props,editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),handleValueChange=(0,react.useCallback)((value2=>{onValueChange(value2[0],!0)}),[onValueChange]),handlePointerDown=(0,react.useCallback)((()=>{editor.mark("click slider")}),[editor]),handlePointerUp=(0,react.useCallback)((()=>{value&&onValueChange(value,!1)}),[value,onValueChange]);return(0,jsx_runtime.jsx)("div",{className:"tlui-slider__container",children:(0,jsx_runtime.jsxs)($faa2e61a3361514f$export$be92b6f5f03c0fe9,{"data-testid":props["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:steps,step:1,value:value?[value]:void 0,onPointerDown:handlePointerDown,onValueChange:handleValueChange,onPointerUp:handlePointerUp,title:title+"  "+msg(label),children:[(0,jsx_runtime.jsx)($faa2e61a3361514f$export$13921ac0cc260818,{className:"tlui-slider__track",dir:"ltr",children:null!==value&&(0,jsx_runtime.jsx)($faa2e61a3361514f$export$9a58ef0d7ad3278c,{className:"tlui-slider__range",dir:"ltr"})}),null!==value&&(0,jsx_runtime.jsx)($faa2e61a3361514f$export$6521433ed15a34db,{className:"tlui-slider__thumb",dir:"ltr"})]})})})),DoubleDropdownPicker=react.memo((function DoubleDropdownPicker2({label,uiTypeA,uiTypeB,labelA,labelB,itemsA,itemsB,styleA,styleB,valueA,valueB,onValueChange}){const msg=useTranslation_useTranslation(),iconA=react.useMemo((()=>itemsA.find((item=>"shared"===valueA.type&&valueA.value===item.value))?.icon??"mixed"),[itemsA,valueA]),iconB=react.useMemo((()=>itemsB.find((item=>"shared"===valueB.type&&valueB.value===item.value))?.icon??"mixed"),[itemsB,valueB]);return void 0===valueA&&void 0===valueB?null:(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,jsx_runtime.jsx)("div",{title:msg(label),className:"tlui-style-panel__double-select-picker-label",children:msg(label)}),(0,jsx_runtime.jsxs)(Root,{id:`style panel ${uiTypeA} A`,children:[(0,jsx_runtime.jsx)($d08ef79370b62062$export$41fb9f06171c75f4,{asChild:!0,onTouchEnd:e=>(0,dist_esm.PFJ)(e),children:(0,jsx_runtime.jsx)(Button,{"data-testid":`style.${uiTypeA}`,title:msg(labelA)+"  "+msg(null===valueA?"style-panel.mixed":`${uiTypeA}-style.${valueA}`),icon:iconA,invertIcon:!0,smallIcon:!0})}),(0,jsx_runtime.jsx)(Content,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-button-grid",{"tlui-button-grid__two":itemsA.length<4,"tlui-button-grid__four":itemsA.length>=4}),children:itemsA.map((item=>(0,jsx_runtime.jsx)(Item,{className:"tlui-button-grid__button",title:msg(labelA)+"  "+msg(`${uiTypeA}-style.${item.value}`),"data-testid":`style.${uiTypeA}.${item.value}`,icon:item.icon,onClick:()=>onValueChange(styleA,item.value,!1),invertIcon:!0},item.value)))})})]}),(0,jsx_runtime.jsxs)(Root,{id:`style panel ${uiTypeB}`,children:[(0,jsx_runtime.jsx)($d08ef79370b62062$export$41fb9f06171c75f4,{asChild:!0,onTouchEnd:e=>(0,dist_esm.PFJ)(e),children:(0,jsx_runtime.jsx)(Button,{"data-testid":`style.${uiTypeB}`,title:msg(labelB)+"  "+msg(null===valueB?"style-panel.mixed":`${uiTypeB}-style.${valueB}`),icon:iconB,smallIcon:!0})}),(0,jsx_runtime.jsx)(Content,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-button-grid",{"tlui-button-grid__two":itemsA.length<4,"tlui-button-grid__four":itemsA.length>=4}),children:itemsB.map((item=>(0,jsx_runtime.jsx)(Item,{className:"tlui-button-grid__button",title:msg(labelB)+"  "+msg(`${uiTypeB}-style.${item.value}`),"data-testid":`style.${uiTypeB}.${item.value}`,icon:item.icon,onClick:()=>onValueChange(styleB,item.value,!1)},item.value)))})})]})]})})),DropdownPicker=react.memo((function DropdownPicker2({id,label,uiType,style,items,value,onValueChange}){const msg=useTranslation_useTranslation(),icon=react.useMemo((()=>items.find((item=>"shared"===value.type&&item.value===value.value))?.icon),[items,value]);return(0,jsx_runtime.jsxs)(Root,{id:`style panel ${id}`,children:[(0,jsx_runtime.jsx)($d08ef79370b62062$export$41fb9f06171c75f4,{asChild:!0,onTouchEnd:e=>(0,dist_esm.PFJ)(e),children:(0,jsx_runtime.jsx)(Button,{"data-testid":`style.${uiType}`,title:"mixed"===value.type?msg("style-panel.mixed"):msg(`${uiType}-style.${value.value}`),label,icon:icon??"mixed"})}),(0,jsx_runtime.jsx)(Content,{side:"left",align:"center",alignOffset:0,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("tlui-button-grid",{"tlui-button-grid__two":items.length<3,"tlui-button-grid__three":3==items.length,"tlui-button-grid__four":items.length>=4}),children:items.map((item=>(0,jsx_runtime.jsx)(Item,{className:"tlui-button-grid__button","data-testid":`style.${uiType}.${item.value}`,title:msg(`${uiType}-style.${item.value}`),icon:item.icon,onClick:()=>onValueChange(style,item.value,!1)},item.value)))})})]})})),STYLES={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"cloud",icon:"geo-cloud"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},StylePanel=function StylePanel2({isMobile}){const editor=(0,dist_esm.jE2)(),relevantStyles=useRelevantStyles(),handlePointerOut=(0,react.useCallback)((()=>{isMobile||editor.updateInstanceState({isChangingStyle:!1})}),[editor,isMobile]);if(!relevantStyles)return null;const{styles,opacity}=relevantStyles,geo=styles.get(dist_esm.Zuj),arrowheadEnd=styles.get(dist_esm.ZJj),arrowheadStart=styles.get(dist_esm.TAC),hideGeo=void 0===geo,hideArrowHeads=void 0===arrowheadEnd&&void 0===arrowheadStart,hideSpline=void 0===styles.get(dist_esm.t88),hideText=void 0===styles.get(dist_esm.Y8S);return(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel","data-ismobile":isMobile,onPointerLeave:handlePointerOut,children:[(0,jsx_runtime.jsx)(CommonStylePickerSet,{styles,opacity}),!hideText&&(0,jsx_runtime.jsx)(TextStylePickerSet,{styles}),!(hideGeo&&hideArrowHeads&&hideSpline)&&(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,jsx_runtime.jsx)(GeoStylePickerSet,{styles}),(0,jsx_runtime.jsx)(ArrowheadStylePickerSet,{styles}),(0,jsx_runtime.jsx)(SplineStylePickerSet,{styles})]})]})};function useStyleChangeCallback(){const editor=(0,dist_esm.jE2)();return react.useMemo((()=>function handleStyleChange(style,value,squashing){editor.batch((()=>{editor.isIn("select")&&editor.setStyleForSelectedShapes(style,value,{squashing}),editor.setStyleForNextShapes(style,value,{squashing}),editor.updateInstanceState({isChangingStyle:!0})}))}),[editor])}const tldrawSupportedOpacities=[.1,.25,.5,.75,1];function CommonStylePickerSet({styles,opacity}){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),handleValueChange=useStyleChangeCallback(),handleOpacityValueChange=react.useCallback(((value,ephemeral)=>{const item=tldrawSupportedOpacities[value];editor.batch((()=>{editor.isIn("select")&&editor.setOpacityForSelectedShapes(item,{ephemeral}),editor.setOpacityForNextShapes(item,{ephemeral}),editor.updateInstanceState({isChangingStyle:!0})}))}),[editor]),color=styles.get(dist_esm.R_W),fill=styles.get(dist_esm.pp9),dash=styles.get(dist_esm.ciG),size=styles.get(dist_esm.ST$),showPickers=void 0!==fill||void 0!==dash||void 0!==size,opacityIndex="mixed"===opacity.type?-1:tldrawSupportedOpacities.indexOf((0,dist_esm.Fa1)(tldrawSupportedOpacities,(supportedOpacity=>Math.abs(supportedOpacity-opacity.value))));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===color?null:(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.color"),uiType:"color",style:dist_esm.R_W,items:STYLES.color,value:color,onValueChange:handleValueChange}),void 0===opacity?null:(0,jsx_runtime.jsx)(Slider,{"data-testid":"style.opacity",value:opacityIndex>=0?opacityIndex:tldrawSupportedOpacities.length-1,label:"mixed"===opacity.type?"style-panel.mixed":`opacity-style.${opacity.value}`,onValueChange:handleOpacityValueChange,steps:tldrawSupportedOpacities.length-1,title:msg("style-panel.opacity")})]}),showPickers&&(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===fill?null:(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.fill"),uiType:"fill",style:dist_esm.pp9,items:STYLES.fill,value:fill,onValueChange:handleValueChange}),void 0===dash?null:(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.dash"),uiType:"dash",style:dist_esm.ciG,items:STYLES.dash,value:dash,onValueChange:handleValueChange}),void 0===size?null:(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.size"),uiType:"size",style:dist_esm.ST$,items:STYLES.size,value:size,onValueChange:handleValueChange})]})]})}function TextStylePickerSet({styles}){const msg=useTranslation_useTranslation(),handleValueChange=useStyleChangeCallback(),font=styles.get(dist_esm.Y8S),align=styles.get(dist_esm.XoM),verticalAlign=styles.get(dist_esm.HO5);return void 0===font&&void 0===align?null:(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===font?null:(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.font"),uiType:"font",style:dist_esm.Y8S,items:STYLES.font,value:font,onValueChange:handleValueChange}),void 0===align?null:(0,jsx_runtime.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,jsx_runtime.jsx)(ButtonPicker,{title:msg("style-panel.align"),uiType:"align",style:dist_esm.XoM,items:STYLES.horizontalAlign,value:align,onValueChange:handleValueChange}),void 0===verticalAlign?(0,jsx_runtime.jsx)(Button,{title:msg("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):(0,jsx_runtime.jsx)(DropdownPicker,{id:"geo-vertical-alignment",uiType:"verticalAlign",style:dist_esm.HO5,items:STYLES.verticalAlign,value:verticalAlign,onValueChange:handleValueChange})]})]})}function GeoStylePickerSet({styles}){const handleValueChange=useStyleChangeCallback(),geo=styles.get(dist_esm.Zuj);return void 0===geo?null:(0,jsx_runtime.jsx)(DropdownPicker,{id:"geo",label:"style-panel.geo",uiType:"geo",style:dist_esm.Zuj,items:STYLES.geo,value:geo,onValueChange:handleValueChange})}function SplineStylePickerSet({styles}){const handleValueChange=useStyleChangeCallback(),spline=styles.get(dist_esm.t88);return void 0===spline?null:(0,jsx_runtime.jsx)(DropdownPicker,{id:"spline",label:"style-panel.spline",uiType:"spline",style:dist_esm.t88,items:STYLES.spline,value:spline,onValueChange:handleValueChange})}function ArrowheadStylePickerSet({styles}){const handleValueChange=useStyleChangeCallback(),arrowheadEnd=styles.get(dist_esm.ZJj),arrowheadStart=styles.get(dist_esm.TAC);return arrowheadEnd&&arrowheadStart?(0,jsx_runtime.jsx)(DoubleDropdownPicker,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:dist_esm.TAC,itemsA:STYLES.arrowheadStart,valueA:arrowheadStart,uiTypeB:"arrowheadEnd",styleB:dist_esm.ZJj,itemsB:STYLES.arrowheadEnd,valueB:arrowheadEnd,onValueChange:handleValueChange,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}function Toast({toast}){const{removeToast}=useToasts(),msg=useTranslation_useTranslation(),hasActions=toast.actions&&toast.actions.length>0;return(0,jsx_runtime.jsxs)($054eb8030ebde76e$export$be92b6f5f03c0fe9,{onOpenChange:isOpen=>{isOpen||removeToast(toast.id)},className:"tlui-toast__container",duration:toast.keepOpen?1/0:5e3,children:[toast.icon&&(0,jsx_runtime.jsx)("div",{className:"tlui-toast__icon",children:(0,jsx_runtime.jsx)(Icon_Icon,{icon:toast.icon})}),(0,jsx_runtime.jsxs)("div",{className:"tlui-toast__main",children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-toast__content",children:[toast.title&&(0,jsx_runtime.jsx)($054eb8030ebde76e$export$f99233281efd08a0,{className:"tlui-toast__title",children:toast.title}),toast.description&&(0,jsx_runtime.jsx)($054eb8030ebde76e$export$393edc798c47379d,{className:"tlui-toast__description",children:toast.description})]}),toast.actions&&(0,jsx_runtime.jsxs)("div",{className:"tlui-toast__actions",children:[toast.actions.map(((action,i)=>(0,jsx_runtime.jsx)($054eb8030ebde76e$export$e19cd5f9376f8cee,{altText:action.label,asChild:!0,onClick:action.onClick,children:(0,jsx_runtime.jsx)(Button,{className:"warn"===action.type?"tlui-button__warning":"tlui-button__primary",children:action.label})},i))),hasActions&&(0,jsx_runtime.jsx)($054eb8030ebde76e$export$f39c2d165cd861fe,{asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:toast.closeLabel??msg("toast.close")})})]})]}),!hasActions&&(0,jsx_runtime.jsx)($054eb8030ebde76e$export$f39c2d165cd861fe,{asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-toast__close",children:toast.closeLabel??msg("toast.close")})})]})}const Toasts=react.memo((function _Toasts(){const{toasts}=useToasts();return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:toasts.map((toast=>(0,jsx_runtime.jsx)(Toast,{toast},toast.id)))})}));function ToastViewport(){const{toasts}=useToasts(),[hasToasts,setHasToasts]=react.useState(!1);return react.useEffect((()=>{let cancelled=!1;return toasts.length?setHasToasts(!0):setTimeout((()=>{cancelled||setHasToasts(!1)}),1e3),()=>{cancelled=!0}}),[toasts.length,setHasToasts]),hasToasts?(0,jsx_runtime.jsx)($054eb8030ebde76e$export$6192c2425ecfd989,{className:"tlui-toast__viewport"}):null}function MobileStylePanel(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),relevantStyles=useRelevantStyles(),color=relevantStyles?.styles.get(dist_esm.R_W),theme=(0,dist_esm.y6M)({isDarkMode:editor.user.isDarkMode}),currentColor=("shared"===color?.type?theme[color.value]:theme.black).solid,disableStylePanel=(0,dist_esm.HgN)("isHandOrEraserToolActive",(()=>editor.isInAny("hand","zoom","eraser","laser")),[editor]),handleStylesOpenChange=(0,react.useCallback)((isOpen=>{isOpen||editor.updateInstanceState({isChangingStyle:!1})}),[editor]),extraEventsToToggleMenu=function useOpenMenuCloser(){const editor=(0,dist_esm.jE2)(),rIsPointingToClose=(0,react.useRef)(!1),handlePointerDown=(0,react.useCallback)((()=>{editor.openMenus.length>0&&(editor.updateInstanceState({openMenus:[]}),rIsPointingToClose.current=!0)}),[editor]),handleClick=(0,react.useCallback)((e=>{rIsPointingToClose.current&&(0,dist_esm.PFJ)(e),rIsPointingToClose.current=!1}),[]);return{handlePointerDown,handleClick}}();return(0,jsx_runtime.jsxs)(Popover,{id:"style menu",onOpenChange:handleStylesOpenChange,children:[(0,jsx_runtime.jsx)(PopoverTrigger,{disabled:disableStylePanel,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button","data-testid":"mobile.styles",style:{color:disableStylePanel?"var(--color-muted-1)":currentColor},title:msg("style-panel.title"),...extraEventsToToggleMenu,children:(0,jsx_runtime.jsx)(Icon_Icon,{icon:disableStylePanel?"blob":"mixed"===color?.type?"mixed":"blob"})})}),(0,jsx_runtime.jsx)(PopoverContent,{side:"top",align:"end",children:(0,jsx_runtime.jsx)(StylePanel,{isMobile:!0})})]})}const NOT_LOCKABLE_TOOLS=["select","hand","draw","eraser","text","zoom","laser","highlight"];function ToggleToolLockedButton({activeToolId}){const editor=(0,dist_esm.jE2)(),breakpoint=useBreakpoint(),msg=useTranslation_useTranslation(),isToolLocked=(0,dist_esm.HgN)("is tool locked",(()=>editor.instanceState.isToolLocked),[editor]);return!activeToolId||NOT_LOCKABLE_TOOLS.includes(activeToolId)?null:(0,jsx_runtime.jsx)(Button,{title:msg("action.toggle-tool-lock"),className:classnames_default()("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":breakpoint<5}),icon:isToolLocked?"lock":"unlock",onClick:()=>editor.updateInstanceState({isToolLocked:!isToolLocked}),smallIcon:!0})}const Toolbar=(0,react.memo)((function Toolbar2(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),breakpoint=useBreakpoint(),rMostRecentlyActiveDropdownItem=react.useRef(void 0),isReadonly=useReadonly(),toolbarItems=function useToolbarSchema(){const ctx=react.useContext(ToolbarSchemaContext);if(!ctx)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return ctx}(),laserTool=toolbarItems.find((item=>"laser"===item.toolItem.id)),activeToolId=(0,dist_esm.HgN)("current tool id",(()=>editor.currentToolId),[editor]),geoState=(0,dist_esm.HgN)("geo",(()=>editor.sharedStyles.getAsKnownValue(dist_esm.Zuj)),[editor]),showEditingTools=!isReadonly,getTitle=item=>item.label?`${msg(item.label)} ${item.kbd?kbdStr(item.kbd):""}`:"",activeTLUiToolbarItem=toolbarItems.find((item=>isActiveTLUiToolItem(item.toolItem,activeToolId,geoState))),{itemsInPanel,itemsInDropdown,dropdownFirstItem}=react.useMemo((()=>{const itemsInPanel2=[],itemsInDropdown2=[];let dropdownFirstItem2;const overflowIndex=Math.min(8,5+breakpoint);for(let i=4;i<toolbarItems.length;i++){const item=toolbarItems[i];i<overflowIndex?itemsInPanel2.push(item):(item===activeTLUiToolbarItem&&(dropdownFirstItem2=item),itemsInDropdown2.push(item))}return dropdownFirstItem2||(rMostRecentlyActiveDropdownItem.current||(rMostRecentlyActiveDropdownItem.current=itemsInDropdown2[0]),dropdownFirstItem2=rMostRecentlyActiveDropdownItem.current,itemsInDropdown2.includes(dropdownFirstItem2)||(dropdownFirstItem2=itemsInDropdown2[0])),rMostRecentlyActiveDropdownItem.current=dropdownFirstItem2,itemsInDropdown2.length<=2&&(itemsInPanel2.push(...itemsInDropdown2),itemsInDropdown2.length=0),{itemsInPanel:itemsInPanel2,itemsInDropdown:itemsInDropdown2,dropdownFirstItem:dropdownFirstItem2}}),[toolbarItems,activeTLUiToolbarItem,breakpoint]);return(0,jsx_runtime.jsx)("div",{className:"tlui-toolbar",children:(0,jsx_runtime.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-toolbar__left",children:[!isReadonly&&(0,jsx_runtime.jsxs)("div",{className:"tlui-toolbar__extras",children:[breakpoint<6&&!("hand"===activeToolId||"zoom"===activeToolId)&&(0,jsx_runtime.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,jsx_runtime.jsx)(UndoButton,{}),(0,jsx_runtime.jsx)(RedoButton,{}),(0,jsx_runtime.jsx)(TrashButton,{}),(0,jsx_runtime.jsx)(DuplicateButton,{}),(0,jsx_runtime.jsx)(ActionsMenu,{})]}),(0,jsx_runtime.jsx)(ToggleToolLockedButton,{activeToolId})]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":breakpoint<5}),children:[toolbarItems.slice(0,2).map((({toolItem})=>(0,jsx_runtime.jsx)(ToolbarButton,{item:toolItem,title:getTitle(toolItem),isSelected:isActiveTLUiToolItem(toolItem,activeToolId,geoState)},toolItem.id))),isReadonly&&laserTool&&(0,jsx_runtime.jsx)(ToolbarButton,{item:laserTool.toolItem,title:getTitle(laserTool.toolItem),isSelected:isActiveTLUiToolItem(laserTool.toolItem,activeToolId,geoState)},laserTool.toolItem.id),showEditingTools&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"tlui-toolbar__divider"}),toolbarItems.slice(2,4).map((({toolItem})=>(0,jsx_runtime.jsx)(ToolbarButton,{item:toolItem,title:getTitle(toolItem),isSelected:isActiveTLUiToolItem(toolItem,activeToolId,geoState)},toolItem.id))),(0,jsx_runtime.jsx)("div",{className:"tlui-toolbar__divider"}),itemsInPanel.map((({toolItem})=>(0,jsx_runtime.jsx)(ToolbarButton,{item:toolItem,title:getTitle(toolItem),isSelected:isActiveTLUiToolItem(toolItem,activeToolId,geoState)},toolItem.id))),itemsInDropdown.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ToolbarButton,{item:dropdownFirstItem.toolItem,title:getTitle(dropdownFirstItem.toolItem),isSelected:isActiveTLUiToolItem(dropdownFirstItem.toolItem,activeToolId,geoState)},dropdownFirstItem.toolItem.id),(0,jsx_runtime.jsxs)(Root,{id:"toolbar overflow",modal:!1,children:[(0,jsx_runtime.jsx)(Trigger,{children:(0,jsx_runtime.jsx)(Button,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-testid":"tools.more",title:msg("tool-panel.more")})}),(0,jsx_runtime.jsx)(Content,{side:"top",align:"center",children:(0,jsx_runtime.jsx)(OverflowToolsContent,{toolbarItems:itemsInDropdown})})]})]}):null]})]})]}),breakpoint<5&&!isReadonly&&(0,jsx_runtime.jsx)("div",{className:"tlui-toolbar__tools",children:(0,jsx_runtime.jsx)(MobileStylePanel,{})})]})})})),OverflowToolsContent=(0,dist_esm.jas)((function OverflowToolsContent2({toolbarItems}){const msg=useTranslation_useTranslation();return(0,jsx_runtime.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:toolbarItems.map((({toolItem:{id,meta,kbd,label,onSelect,icon}})=>(0,jsx_runtime.jsx)(Item,{className:"tlui-button-grid__button","data-testid":`tools.${id}`,"data-tool":id,"data-geo":meta?.geo??"","aria-label":label,onClick:()=>onSelect("toolbar"),title:label?`${msg(label)} ${kbd?kbdStr(kbd):""}`:"",icon},id)))})}));function ToolbarButton({item,title,isSelected}){return(0,jsx_runtime.jsx)(Button,{className:"tlui-toolbar__tools__button","data-testid":`tools.${item.id}`,"data-tool":item.id,"data-geo":item.meta?.geo??"","aria-label":item.label,title,icon:item.icon,"data-state":isSelected?"selected":void 0,onClick:()=>item.onSelect("toolbar"),onTouchStart:e=>{(0,dist_esm.PFJ)(e),item.onSelect("toolbar")}})}const isActiveTLUiToolItem=(item,activeToolId,geoState)=>item.meta?.geo?"geo"===activeToolId&&geoState===item.meta?.geo:activeToolId===item.id;var isff="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function addEvent(object,event,method,useCapture){object.addEventListener?object.addEventListener(event,method,useCapture):object.attachEvent&&object.attachEvent("on".concat(event),(function(){method(window.event)}))}function getMods(modifier,key){for(var mods=key.slice(0,key.length-1),i=0;i<mods.length;i++)mods[i]=modifier[mods[i].toLowerCase()];return mods}function getKeys(key){"string"!=typeof key&&(key="");for(var keys=(key=key.replace(/\s/g,"")).split(","),index=keys.lastIndexOf("");index>=0;)keys[index-1]+=",",keys.splice(index,1),index=keys.lastIndexOf("");return keys}for(var _keyMap={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":isff?173:189,"=":isff?61:187,";":isff?59:186,"'":222,"[":219,"]":221,"\\":220},_modifier={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={},hotkeys_esm_k=1;hotkeys_esm_k<20;hotkeys_esm_k++)_keyMap["f".concat(hotkeys_esm_k)]=111+hotkeys_esm_k;var _downKeys=[],winListendFocus=!1,_scope="all",elementHasBindEvent=[],code=function code(x){return _keyMap[x.toLowerCase()]||_modifier[x.toLowerCase()]||x.toUpperCase().charCodeAt(0)};function setScope(scope){_scope=scope||"all"}function getScope(){return _scope||"all"}var eachUnbind=function eachUnbind(_ref2){var key=_ref2.key,scope=_ref2.scope,method=_ref2.method,_ref2$splitKey=_ref2.splitKey,splitKey=void 0===_ref2$splitKey?"+":_ref2$splitKey;getKeys(key).forEach((function(originKey){var unbindKeys=originKey.split(splitKey),len=unbindKeys.length,lastKey=unbindKeys[len-1],keyCode="*"===lastKey?"*":code(lastKey);if(_handlers[keyCode]){scope||(scope=getScope());var mods=len>1?getMods(_modifier,unbindKeys):[];_handlers[keyCode]=_handlers[keyCode].filter((function(record){return!((!method||record.method===method)&&record.scope===scope&&function compareArray(a1,a2){for(var arr1=a1.length>=a2.length?a1:a2,arr2=a1.length>=a2.length?a2:a1,isIndex=!0,i=0;i<arr1.length;i++)-1===arr2.indexOf(arr1[i])&&(isIndex=!1);return isIndex}(record.mods,mods))}))}}))};function eventHandler(event,handler,scope,element){var modifiersMatch;if(handler.element===element&&(handler.scope===scope||"all"===handler.scope)){for(var y in modifiersMatch=handler.mods.length>0,_mods)Object.prototype.hasOwnProperty.call(_mods,y)&&(!_mods[y]&&handler.mods.indexOf(+y)>-1||_mods[y]&&-1===handler.mods.indexOf(+y))&&(modifiersMatch=!1);(0!==handler.mods.length||_mods[16]||_mods[18]||_mods[17]||_mods[91])&&!modifiersMatch&&"*"!==handler.shortcut||(handler.keys=[],handler.keys=handler.keys.concat(_downKeys),!1===handler.method(event,handler)&&(event.preventDefault?event.preventDefault():event.returnValue=!1,event.stopPropagation&&event.stopPropagation(),event.cancelBubble&&(event.cancelBubble=!0)))}}function dispatch(event,element){var asterisk=_handlers["*"],key=event.keyCode||event.which||event.charCode;if(hotkeys.filter.call(this,event)){if(93!==key&&224!==key||(key=91),-1===_downKeys.indexOf(key)&&229!==key&&_downKeys.push(key),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(keyName){var keyNum=modifierMap[keyName];event[keyName]&&-1===_downKeys.indexOf(keyNum)?_downKeys.push(keyNum):!event[keyName]&&_downKeys.indexOf(keyNum)>-1?_downKeys.splice(_downKeys.indexOf(keyNum),1):"metaKey"===keyName&&event[keyName]&&3===_downKeys.length&&(event.ctrlKey||event.shiftKey||event.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf(keyNum))))})),key in _mods){for(var k in _mods[key]=!0,_modifier)_modifier[k]===key&&(hotkeys[k]=!0);if(!asterisk)return}for(var e in _mods)Object.prototype.hasOwnProperty.call(_mods,e)&&(_mods[e]=event[modifierMap[e]]);event.getModifierState&&(!event.altKey||event.ctrlKey)&&event.getModifierState("AltGraph")&&(-1===_downKeys.indexOf(17)&&_downKeys.push(17),-1===_downKeys.indexOf(18)&&_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);var scope=getScope();if(asterisk)for(var i=0;i<asterisk.length;i++)asterisk[i].scope===scope&&("keydown"===event.type&&asterisk[i].keydown||"keyup"===event.type&&asterisk[i].keyup)&&eventHandler(event,asterisk[i],scope,element);if(key in _handlers)for(var _i=0;_i<_handlers[key].length;_i++)if(("keydown"===event.type&&_handlers[key][_i].keydown||"keyup"===event.type&&_handlers[key][_i].keyup)&&_handlers[key][_i].key){for(var record=_handlers[key][_i],splitKey=record.splitKey,keyShortcut=record.key.split(splitKey),_downKeysCurrent=[],a=0;a<keyShortcut.length;a++)_downKeysCurrent.push(code(keyShortcut[a]));_downKeysCurrent.sort().join("")===_downKeys.sort().join("")&&eventHandler(event,record,scope,element)}}}function hotkeys(key,option,method){_downKeys=[];var keys=getKeys(key),mods=[],scope="all",element=document,i=0,keyup=!1,keydown=!0,splitKey="+",capture=!1;for(void 0===method&&"function"==typeof option&&(method=option),"[object Object]"===Object.prototype.toString.call(option)&&(option.scope&&(scope=option.scope),option.element&&(element=option.element),option.keyup&&(keyup=option.keyup),void 0!==option.keydown&&(keydown=option.keydown),void 0!==option.capture&&(capture=option.capture),"string"==typeof option.splitKey&&(splitKey=option.splitKey)),"string"==typeof option&&(scope=option);i<keys.length;i++)mods=[],(key=keys[i].split(splitKey)).length>1&&(mods=getMods(_modifier,key)),(key="*"===(key=key[key.length-1])?"*":code(key))in _handlers||(_handlers[key]=[]),_handlers[key].push({keyup,keydown,scope,mods,shortcut:keys[i],method,key:keys[i],splitKey,element});void 0!==element&&!function isElementBind(element){return elementHasBindEvent.indexOf(element)>-1}(element)&&window&&(elementHasBindEvent.push(element),addEvent(element,"keydown",(function(e){dispatch(e,element)}),capture),winListendFocus||(winListendFocus=!0,addEvent(window,"focus",(function(){_downKeys=[]}),capture)),addEvent(element,"keyup",(function(e){dispatch(e,element),function clearModifier(event){var key=event.keyCode||event.which||event.charCode,i=_downKeys.indexOf(key);if(i>=0&&_downKeys.splice(i,1),event.key&&"meta"===event.key.toLowerCase()&&_downKeys.splice(0,_downKeys.length),93!==key&&224!==key||(key=91),key in _mods)for(var k in _mods[key]=!1,_modifier)_modifier[k]===key&&(hotkeys[k]=!1)}(e)}),capture))}var _api={getPressedKeyString:function getPressedKeyString(){return _downKeys.map((function(c){return function getKey(x){return Object.keys(_keyMap).find((function(k){return _keyMap[k]===x}))}(c)||function getModifier(x){return Object.keys(_modifier).find((function(k){return _modifier[k]===x}))}(c)||String.fromCharCode(c)}))},setScope,getScope,deleteScope:function deleteScope(scope,newScope){var handlers,i;for(var key in scope||(scope=getScope()),_handlers)if(Object.prototype.hasOwnProperty.call(_handlers,key))for(handlers=_handlers[key],i=0;i<handlers.length;)handlers[i].scope===scope?handlers.splice(i,1):i++;getScope()===scope&&setScope(newScope||"all")},getPressedKeyCodes:function getPressedKeyCodes(){return _downKeys.slice(0)},getAllKeyCodes:function getAllKeyCodes(){var result=[];return Object.keys(_handlers).forEach((function(k){_handlers[k].forEach((function(_ref){var key=_ref.key,scope=_ref.scope,mods=_ref.mods,shortcut=_ref.shortcut;result.push({scope,shortcut,mods,keys:key.split("+").map((function(v){return code(v)}))})}))})),result},isPressed:function isPressed(keyCode){return"string"==typeof keyCode&&(keyCode=code(keyCode)),-1!==_downKeys.indexOf(keyCode)},filter:function filter(event){var target=event.target||event.srcElement,tagName=target.tagName,flag=!0;return!target.isContentEditable&&("INPUT"!==tagName&&"TEXTAREA"!==tagName&&"SELECT"!==tagName||target.readOnly)||(flag=!1),flag},trigger:function trigger(shortcut){var scope=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(_handlers).forEach((function(key){_handlers[key].filter((function(item){return item.scope===scope&&item.shortcut===shortcut})).forEach((function(data){data&&data.method&&data.method()}))}))},unbind:function unbind(keysInfo){if(void 0===keysInfo)Object.keys(_handlers).forEach((function(key){return delete _handlers[key]}));else if(Array.isArray(keysInfo))keysInfo.forEach((function(info){info.key&&eachUnbind(info)}));else if("object"==typeof keysInfo)keysInfo.key&&eachUnbind(keysInfo);else if("string"==typeof keysInfo){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var scope=args[0],method=args[1];"function"==typeof scope&&(method=scope,scope=""),eachUnbind({key:keysInfo,scope,method,splitKey:"+"})}},keyMap:_keyMap,modifier:_modifier,modifierMap};for(var hotkeys_esm_a in _api)Object.prototype.hasOwnProperty.call(_api,hotkeys_esm_a)&&(hotkeys[hotkeys_esm_a]=_api[hotkeys_esm_a]);if("undefined"!=typeof window){var _hotkeys=window.hotkeys;hotkeys.noConflict=function(deep){return deep&&window.hotkeys===hotkeys&&(window.hotkeys=_hotkeys),hotkeys},window.hotkeys=hotkeys}const SKIP_KBDS=["copy","cut","paste","asset"];function getHotkeysStringFromKbd(kbd){return function useKeyboardShortcuts_getKeys(key){"string"!=typeof key&&(key="");const keys=(key=key.replace(/\s/g,"")).split(",");let index=keys.lastIndexOf("");for(;index>=0;)keys[index-1]+=",",keys.splice(index,1),index=keys.lastIndexOf("");return keys}(kbd).map((kbd2=>{let str="";const chars=kbd2.split("");return str=1===chars.length?chars[0]:"!"===chars[0]?`shift+${chars[1]}`:"?"===chars[0]?3===chars.length&&"!"===chars[1]?`alt+shift+${chars[2]}`:`alt+${chars[1]}`:"$"===chars[0]?"!"===chars[1]?`cmd+shift+${chars[2]},ctrl+shift+${chars[2]}`:"?"===chars[1]?`cmd++${chars[2]},ctrl+alt+${chars[2]}`:`cmd+${chars[1]},ctrl+${chars[1]}`:kbd2,str})).join(",")}const TldrawUi=react.memo((function TldrawUi2({shareZone,topZone,renderDebugMenuItems,children,hideUi,...rest}){return(0,jsx_runtime.jsx)(TldrawUiContextProvider,{...rest,children:(0,jsx_runtime.jsx)(TldrawUiInner,{hideUi,shareZone,topZone,renderDebugMenuItems,children})})})),TldrawUiInner=react.memo((function TldrawUiInner2({children,hideUi,...rest}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children,hideUi?null:(0,jsx_runtime.jsx)(TldrawUiContent,{...rest})]})})),TldrawUiContent=react.memo((function TldrawUI({shareZone,topZone,renderDebugMenuItems}){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),breakpoint=useBreakpoint(),isReadonlyMode=(0,dist_esm.HgN)("isReadonlyMode",(()=>editor.instanceState.isReadonly),[editor]),isFocusMode=(0,dist_esm.HgN)("focus",(()=>editor.instanceState.isFocusMode),[editor]),isDebugMode=(0,dist_esm.HgN)("debug",(()=>editor.instanceState.isDebugMode),[editor]);!function useKeyboardShortcuts(){const editor=(0,dist_esm.jE2)(),isReadonly=useReadonly(),actions=useActions(),tools=useTools(),isFocused=(0,dist_esm.HgN)("is focused",(()=>editor.instanceState.isFocused),[editor]);(0,react.useEffect)((()=>{if(!isFocused)return;const container=editor.getContainer();hotkeys.setScope(editor.store.id);const hot=(keys,callback)=>{hotkeys(keys,{element:container,scope:editor.store.id},callback)},areShortcutsDisabled=()=>editor.isMenuOpen||null!==editor.editingShapeId||editor.crashingError;for(const action of Object.values(actions))action.kbd&&(isReadonly&&!action.readonlyOk||SKIP_KBDS.includes(action.id)||hot(getHotkeysStringFromKbd(action.kbd),(event=>{areShortcutsDisabled()||((0,dist_esm.PFJ)(event),action.onSelect("kbd"))})));for(const tool of Object.values(tools))!tool.kbd||!tool.readonlyOk&&editor.instanceState.isReadonly||SKIP_KBDS.includes(tool.id)||hot(getHotkeysStringFromKbd(tool.kbd),(event=>{areShortcutsDisabled()||((0,dist_esm.PFJ)(event),tool.onSelect("kbd"))}));return()=>{hotkeys.deleteScope(editor.store.id)}}),[actions,tools,isReadonly,editor,isFocused])}(),useNativeClipboardEvents(),function useEditorEvents(){const editor=(0,dist_esm.jE2)(),{addToast}=useToasts();(0,react.useEffect)((()=>{function handleMaxShapes({name,count}){addToast({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${name} (${count}). Please delete some shapes or move to a different page to continue.`})}return editor.addListener("max-shapes",handleMaxShapes),()=>{editor.removeListener("max-shapes",handleMaxShapes)}}),[editor,addToast])}();const{"toggle-focus-mode":toggleFocus}=useActions();return(0,jsx_runtime.jsx)($054eb8030ebde76e$export$f5d03d415824e0e,{children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("tlui-layout",{"tlui-layout__mobile":breakpoint<5}),"data-breakpoint":breakpoint,children:[isFocusMode?(0,jsx_runtime.jsx)("div",{className:"tlui-layout__top",children:(0,jsx_runtime.jsx)(Button,{className:"tlui-focus-button",title:`${msg("focus-mode.toggle-focus-mode")}`,icon:"dot",onClick:()=>toggleFocus.onSelect("menu")})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-layout__top",children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-layout__top__left",children:[(0,jsx_runtime.jsx)(MenuZone,{}),(0,jsx_runtime.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,jsx_runtime.jsx)(ExitPenMode,{}),(0,jsx_runtime.jsx)(BackToContent,{}),(0,jsx_runtime.jsx)(StopFollowing,{})]})]}),(0,jsx_runtime.jsx)("div",{className:"tlui-layout__top__center",children:topZone}),(0,jsx_runtime.jsxs)("div",{className:"tlui-layout__top__right",children:[shareZone,breakpoint>=5&&!isReadonlyMode&&(0,jsx_runtime.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,jsx_runtime.jsx)(StylePanel,{})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,jsx_runtime.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,jsx_runtime.jsx)(NavigationZone,{}),(0,jsx_runtime.jsx)(Toolbar,{}),breakpoint>=4&&(0,jsx_runtime.jsx)(HelpMenu,{})]}),isDebugMode&&(0,jsx_runtime.jsx)(DebugPanel,{renderDebugMenuItems:renderDebugMenuItems??null})]})]}),(0,jsx_runtime.jsx)(Toasts,{}),(0,jsx_runtime.jsx)(Dialogs,{}),(0,jsx_runtime.jsx)(ToastViewport,{}),(0,jsx_runtime.jsx)(FollowingIndicator,{})]})})})),[$1b0217ee4a91d156$var$createContextMenuContext,$1b0217ee4a91d156$export$1059331f43ddcc82]=(0,react_context_dist.b)("ContextMenu",[$6cc32821e9371a1c$export$4027731b685e72eb]),$1b0217ee4a91d156$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$1b0217ee4a91d156$var$ContextMenuProvider,$1b0217ee4a91d156$var$useContextMenuContext]=$1b0217ee4a91d156$var$createContextMenuContext("ContextMenu"),$1b0217ee4a91d156$export$8dc6765e8be191c7=props=>{const{__scopeContextMenu,children,onOpenChange,dir,modal=!0}=props,[open1,setOpen]=(0,react.useState)(!1),menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu),handleOpenChangeProp=(0,react_use_callback_ref_dist.W)(onOpenChange),handleOpenChange=(0,react.useCallback)((open=>{setOpen(open),handleOpenChangeProp(open)}),[handleOpenChangeProp]);return(0,react.createElement)($1b0217ee4a91d156$var$ContextMenuProvider,{scope:__scopeContextMenu,open:open1,onOpenChange:handleOpenChange,modal},(0,react.createElement)($6cc32821e9371a1c$export$be92b6f5f03c0fe9,(0,esm_extends.Z)({},menuScope,{dir,open:open1,onOpenChange:handleOpenChange,modal}),children))},$1b0217ee4a91d156$export$be6fc7b1d5b0beb9=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,disabled=!1,...triggerProps}=props,context=$1b0217ee4a91d156$var$useContextMenuContext("ContextMenuTrigger",__scopeContextMenu),menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu),pointRef=(0,react.useRef)({x:0,y:0}),virtualRef=(0,react.useRef)({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...pointRef.current})}),longPressTimerRef=(0,react.useRef)(0),clearLongPress=(0,react.useCallback)((()=>window.clearTimeout(longPressTimerRef.current)),[]),handleOpen=event=>{pointRef.current={x:event.clientX,y:event.clientY},context.onOpenChange(!0)};return(0,react.useEffect)((()=>clearLongPress),[clearLongPress]),(0,react.useEffect)((()=>{disabled&&clearLongPress()}),[disabled,clearLongPress]),(0,react.createElement)(react.Fragment,null,(0,react.createElement)($6cc32821e9371a1c$export$b688253958b8dfe7,(0,esm_extends.Z)({},menuScope,{virtualRef})),(0,react.createElement)(react_primitive_dist.WV.span,(0,esm_extends.Z)({"data-state":context.open?"open":"closed","data-disabled":disabled?"":void 0},triggerProps,{ref:forwardedRef,style:{WebkitTouchCallout:"none",...props.style},onContextMenu:disabled?props.onContextMenu:(0,dist.M)(props.onContextMenu,(event=>{clearLongPress(),handleOpen(event),event.preventDefault()})),onPointerDown:disabled?props.onPointerDown:(0,dist.M)(props.onPointerDown,$1b0217ee4a91d156$var$whenTouchOrPen((event=>{clearLongPress(),longPressTimerRef.current=window.setTimeout((()=>handleOpen(event)),700)}))),onPointerMove:disabled?props.onPointerMove:(0,dist.M)(props.onPointerMove,$1b0217ee4a91d156$var$whenTouchOrPen(clearLongPress)),onPointerCancel:disabled?props.onPointerCancel:(0,dist.M)(props.onPointerCancel,$1b0217ee4a91d156$var$whenTouchOrPen(clearLongPress)),onPointerUp:disabled?props.onPointerUp:(0,dist.M)(props.onPointerUp,$1b0217ee4a91d156$var$whenTouchOrPen(clearLongPress))})))})),$1b0217ee4a91d156$export$14afd0be83e45060=props=>{const{__scopeContextMenu,...portalProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$602eac185826482c,(0,esm_extends.Z)({},menuScope,portalProps))},$1b0217ee4a91d156$export$572205900c9369e=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...contentProps}=props,context=$1b0217ee4a91d156$var$useContextMenuContext("ContextMenuContent",__scopeContextMenu),menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu),hasInteractedOutsideRef=(0,react.useRef)(!1);return(0,react.createElement)($6cc32821e9371a1c$export$7c6e2c02157bb7d2,(0,esm_extends.Z)({},menuScope,contentProps,{ref:forwardedRef,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:event=>{var _props$onCloseAutoFoc;null===(_props$onCloseAutoFoc=props.onCloseAutoFocus)||void 0===_props$onCloseAutoFoc||_props$onCloseAutoFoc.call(props,event),!event.defaultPrevented&&hasInteractedOutsideRef.current&&event.preventDefault(),hasInteractedOutsideRef.current=!1},onInteractOutside:event=>{var _props$onInteractOuts;null===(_props$onInteractOuts=props.onInteractOutside)||void 0===_props$onInteractOuts||_props$onInteractOuts.call(props,event),event.defaultPrevented||context.modal||(hasInteractedOutsideRef.current=!0)},style:{...props.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),$1b0217ee4a91d156$export$9860523b0fcdd664=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...groupProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$eb2fcfdbd7ba97d4,(0,esm_extends.Z)({},menuScope,groupProps,{ref:forwardedRef}))})),$1b0217ee4a91d156$export$16a26dc176a49100=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...itemProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$6d08773d2e66f8f2,(0,esm_extends.Z)({},menuScope,itemProps,{ref:forwardedRef}))})),$1b0217ee4a91d156$export$b6adbe51d5d8b7ec=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...checkboxItemProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$16ce288f89fa631c,(0,esm_extends.Z)({},menuScope,checkboxItemProps,{ref:forwardedRef}))})),$1b0217ee4a91d156$export$5bc21d1c00c4b201=props=>{const{__scopeContextMenu,children,onOpenChange,open:openProp,defaultOpen}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu),[open,setOpen]=(0,react_use_controllable_state_dist.T)({prop:openProp,defaultProp:defaultOpen,onChange:onOpenChange});return(0,react.createElement)($6cc32821e9371a1c$export$d7a01e11500dfb6f,(0,esm_extends.Z)({},menuScope,{open,onOpenChange:setOpen}),children)},$1b0217ee4a91d156$export$30b2b5c64556d316=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...triggerItemProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$2ea8a7a591ac5eac,(0,esm_extends.Z)({},menuScope,triggerItemProps,{ref:forwardedRef}))})),$1b0217ee4a91d156$export$2c967063bd2dc512=(0,react.forwardRef)(((props,forwardedRef)=>{const{__scopeContextMenu,...subContentProps}=props,menuScope=$1b0217ee4a91d156$var$useMenuScope(__scopeContextMenu);return(0,react.createElement)($6cc32821e9371a1c$export$6d4de93b380beddf,(0,esm_extends.Z)({},menuScope,subContentProps,{ref:forwardedRef,style:{...props.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}));function $1b0217ee4a91d156$var$whenTouchOrPen(handler){return event=>"mouse"!==event.pointerType?handler(event):void 0}const $1b0217ee4a91d156$export$be92b6f5f03c0fe9=$1b0217ee4a91d156$export$8dc6765e8be191c7,$1b0217ee4a91d156$export$41fb9f06171c75f4=$1b0217ee4a91d156$export$be6fc7b1d5b0beb9,$1b0217ee4a91d156$export$602eac185826482c=$1b0217ee4a91d156$export$14afd0be83e45060,$1b0217ee4a91d156$export$7c6e2c02157bb7d2=$1b0217ee4a91d156$export$572205900c9369e,$1b0217ee4a91d156$export$eb2fcfdbd7ba97d4=$1b0217ee4a91d156$export$9860523b0fcdd664,$1b0217ee4a91d156$export$6d08773d2e66f8f2=$1b0217ee4a91d156$export$16a26dc176a49100,$1b0217ee4a91d156$export$16ce288f89fa631c=$1b0217ee4a91d156$export$b6adbe51d5d8b7ec,$1b0217ee4a91d156$export$d7a01e11500dfb6f=$1b0217ee4a91d156$export$5bc21d1c00c4b201,$1b0217ee4a91d156$export$2ea8a7a591ac5eac=$1b0217ee4a91d156$export$30b2b5c64556d316,$1b0217ee4a91d156$export$6d4de93b380beddf=$1b0217ee4a91d156$export$2c967063bd2dc512,MoveToPageMenu=(0,dist_esm.jas)((function MoveToPageMenu2(){const editor=(0,dist_esm.jE2)(),container=(0,dist_esm.uK4)(),pages=editor.pages,currentPageId=editor.currentPageId,msg=useTranslation_useTranslation(),{addToast}=useToasts();return(0,jsx_runtime.jsxs)($1b0217ee4a91d156$export$d7a01e11500dfb6f,{children:[(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$2ea8a7a591ac5eac,{dir:"ltr",asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$602eac185826482c,{container,dir:"ltr",children:(0,jsx_runtime.jsxs)($1b0217ee4a91d156$export$6d4de93b380beddf,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$eb2fcfdbd7ba97d4,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:pages.map((page=>(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$6d08773d2e66f8f2,{disabled:currentPageId===page.id,onSelect:()=>{editor.mark("move_shapes_to_page"),editor.moveShapesToPage(editor.selectedShapeIds,page.id);const toPage=editor.getPage(page.id);toPage&&addToast({title:"Changed Page",description:`Moved to ${toPage.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{editor.mark("change-page"),editor.setCurrentPage(currentPageId)}}]})},asChild:!0,children:(0,jsx_runtime.jsx)(Button,{title:page.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,jsx_runtime.jsx)("span",{children:page.name})})},page.id)))},"pages"),(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$eb2fcfdbd7ba97d4,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$6d08773d2e66f8f2,{onSelect:()=>{const newPageId=dist_esm.ezX.createId(),ids=editor.selectedShapeIds;editor.batch((()=>{editor.mark("move_shapes_to_page"),editor.createPage({name:"Page",id:newPageId}),editor.moveShapesToPage(ids,newPageId)}))},asChild:!0,children:(0,jsx_runtime.jsx)(Button,{title:msg("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:msg("context.pages.new-page")})},"new-page")},"new-page")]})})]})})),ContextMenu=function ContextMenu2({children}){const editor=(0,dist_esm.jE2)(),contextTLUiMenuSchema=useContextMenuSchema(),cb=(0,react.useCallback)((isOpen=>{if(isOpen){if(editor.instanceState.isCoarsePointer){const{selectedShapes,inputs:{currentPagePoint}}=editor,shapesAtPoint=editor.getShapesAtPoint(currentPagePoint);if(!editor.selectedShapes.length||!shapesAtPoint.some((s=>selectedShapes.includes(s)))){const lockedShapes=shapesAtPoint.filter((s=>editor.isShapeOrAncestorLocked(s)));lockedShapes.length&&editor.select(...lockedShapes.map((s=>s.id)))}}}else{const{onlySelectedShape}=editor;onlySelectedShape&&editor.isShapeOrAncestorLocked(onlySelectedShape)&&editor.setSelectedShapes([])}}),[editor]),container=(0,dist_esm.uK4)(),[_,handleOpenChange]=useMenuIsOpen("context menu",cb),isReadonly=useReadonly(),noItemsToShow=0===contextTLUiMenuSchema.length||isReadonly&&contextTLUiMenuSchema.every((item=>!item.readonlyOk)),disabled=!(0,dist_esm.HgN)("isSelectToolActive",(()=>"select"===editor.currentToolId),[editor])||noItemsToShow;return(0,jsx_runtime.jsxs)($1b0217ee4a91d156$export$be92b6f5f03c0fe9,{dir:"ltr",onOpenChange:handleOpenChange,children:[(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$41fb9f06171c75f4,{onContextMenu:disabled?dist_esm.PFJ:void 0,dir:"ltr",disabled,children}),(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$602eac185826482c,{container,children:(0,jsx_runtime.jsx)(ContextMenuContent,{})})]})};function ContextMenuContent(){const editor=(0,dist_esm.jE2)(),msg=useTranslation_useTranslation(),menuSchema=useContextMenuSchema(),[_,handleSubOpenChange]=useMenuIsOpen("context menu sub"),isReadonly=useReadonly(),breakpoint=useBreakpoint(),container=(0,dist_esm.uK4)(),[disableClicks,setDisableClicks]=(0,react.useState)(!1);function getContextMenuItem(editor2,item,parent,depth){if(isReadonly&&!item.readonlyOk)return null;switch(item.type){case"custom":if("MOVE_TO_PAGE_MENU"===item.id)return(0,jsx_runtime.jsx)(MoveToPageMenu,{},item.id);break;case"group":return(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$eb2fcfdbd7ba97d4,{dir:"ltr",className:classnames_default()("tlui-menu__group",{"tlui-menu__group__small":"submenu"===parent?.type}),"data-testid":`menu-item.${item.id}`,children:item.children.map((child=>getContextMenuItem(editor2,child,item,depth+1)))},item.id);case"submenu":return(0,jsx_runtime.jsxs)($1b0217ee4a91d156$export$d7a01e11500dfb6f,{onOpenChange:handleSubOpenChange,children:[(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$2ea8a7a591ac5eac,{dir:"ltr",disabled:item.disabled,asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button",label:item.label,"data-testid":`menu-item.${item.id}`,icon:"chevron-right"})}),(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$602eac185826482c,{container,dir:"ltr",children:(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$6d4de93b380beddf,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:item.children.map((child=>getContextMenuItem(editor2,child,item,depth+1)))})})]},item.id);case"item":{if(isReadonly&&!item.readonlyOk)return null;const{id,checkbox,contextMenuLabel,label,onSelect,kbd,icon}=item.actionItem,labelToUse=contextMenuLabel??label,labelStr=labelToUse?msg(labelToUse):void 0;return checkbox?(0,jsx_runtime.jsxs)($1b0217ee4a91d156$export$16ce288f89fa631c,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:item.disabled,onSelect:e=>{onSelect("context-menu"),(0,dist_esm.PFJ)(e)},title:labelStr||void 0,checked:item.checked,children:[(0,jsx_runtime.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${item.checked?1:.5})`,opacity:item.checked?1:.5},children:(0,jsx_runtime.jsx)(Icon_Icon,{small:!0,icon:item.checked?"check":"checkbox-empty"})}),labelStr&&(0,jsx_runtime.jsx)("span",{children:labelStr}),kbd&&(0,jsx_runtime.jsx)(Kbd,{children:kbd})]},id):(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$6d08773d2e66f8f2,{dir:"ltr",asChild:!0,children:(0,jsx_runtime.jsx)(Button,{className:"tlui-menu__button","data-testid":`menu-item.${id}`,kbd,label:labelToUse,disabled:item.disabled,iconLeft:breakpoint<3&&depth>2?icon:void 0,onClick:()=>{disableClicks?setDisableClicks(!1):onSelect("context-menu")}})},id)}}}return(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$602eac185826482c,{dir:"ltr",container,children:(0,jsx_runtime.jsx)($1b0217ee4a91d156$export$7c6e2c02157bb7d2,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:dist_esm.PFJ,children:menuSchema.map((item=>getContextMenuItem(editor,item,null,0)))})})}const usePreloadFont=(id,font)=>{const[state,setState]=(0,react.useState)(2);return(0,react.useEffect)((()=>{const{url,style="normal",weight="500",display,featureSettings,stretch,unicodeRange,variant}=font;let cancelled=!1;setState(2);const fontInstance=new FontFace(id,`url(${url})`,{style,weight,display,featureSettings,stretch,unicodeRange,variant});return fontInstance.load().then((()=>{cancelled||(document.fonts.add(fontInstance),setState(0))})).catch((err=>{cancelled||(console.error(err),setState(1))})),fontInstance.$$_url=url,fontInstance.$$_fontface=`\n@font-face {\n\tfont-family: ${fontInstance.family};\n\tfont-stretch: ${fontInstance.stretch};\n\tfont-weight: ${fontInstance.weight};\n\tfont-style: ${fontInstance.style};\n\tsrc: url("${url}") format("woff2")\n}`,()=>{document.fonts.delete(fontInstance),cancelled=!0}}),[id,font]),state};function Tldraw(props){const{children,maxImageDimension,maxAssetSize,acceptedImageMimeTypes,acceptedVideoMimeTypes,onMount,...rest}=props,withDefaults={initialState:"select",...rest,components:(0,react.useMemo)((()=>({Scribble:TldrawScribble,CollaboratorScribble:TldrawScribble,SelectionForeground:TldrawSelectionForeground,SelectionBackground:TldrawSelectionBackground,Handles:TldrawHandles,HoveredShapeIndicator:TldrawHoveredShapeIndicator,...rest.components})),[rest.components]),shapeUtils:(0,react.useMemo)((()=>[...defaultShapeUtils,...rest.shapeUtils??[]]),[rest.shapeUtils]),tools:(0,react.useMemo)((()=>[...defaultTools,...defaultShapeTools,...rest.tools??[]]),[rest.tools])},assets=function useDefaultEditorAssetsWithOverrides(overrides){return(0,react.useMemo)((()=>overrides?{fonts:{...defaultEditorAssetUrls.fonts,...overrides?.fonts}}:defaultEditorAssetUrls),[overrides])}(rest.assetUrls),{done:preloadingComplete,error:preloadingError}=function usePreloadAssets(assetUrls){const typefaces=(0,react.useMemo)((()=>function getTypefaces(assetUrls){return{draw:{url:assetUrls.fonts.draw},serif:{url:assetUrls.fonts.serif},sansSerif:{url:assetUrls.fonts.sansSerif},monospace:{url:assetUrls.fonts.monospace}}}(assetUrls)),[assetUrls]),results=[usePreloadFont("tldraw_draw",typefaces.draw),usePreloadFont("tldraw_serif",typefaces.serif),usePreloadFont("tldraw_sans",typefaces.sansSerif),usePreloadFont("tldraw_mono",typefaces.monospace)];return{error:results.some((result=>1===result)),done:!results.some((result=>2===result))}}(assets);return preloadingError?(0,jsx_runtime.jsx)(dist_esm.CsX,{children:"Could not load assets. Please refresh the page."}):preloadingComplete?(0,jsx_runtime.jsx)(dist_esm.gRN,{...withDefaults,children:(0,jsx_runtime.jsxs)(TldrawUi,{...withDefaults,children:[(0,jsx_runtime.jsx)(ContextMenu,{children:(0,jsx_runtime.jsx)(dist_esm.Xz7,{})}),(0,jsx_runtime.jsx)(InsideOfEditorContext,{maxImageDimension,maxAssetSize,acceptedImageMimeTypes,acceptedVideoMimeTypes,onMount}),children]})}):(0,jsx_runtime.jsx)(dist_esm.a_T,{children:"Loading assets..."})}function InsideOfEditorContext({maxImageDimension=1e3,maxAssetSize=10485760,acceptedImageMimeTypes=["image/jpeg","image/png","image/gif","image/svg+xml"],acceptedVideoMimeTypes=["video/mp4","video/quicktime"],onMount}){const editor=(0,dist_esm.jE2)(),onMountEvent=function useEvent(handler){const handlerRef=(0,react.useRef)();return(0,react.useLayoutEffect)((()=>{handlerRef.current=handler})),(0,react.useDebugValue)(handler),(0,react.useCallback)(((...args)=>{const fn=handlerRef.current;return(0,dist_esm.hu8)(fn,"fn does not exist"),fn(...args)}),[])}((editor2=>{const unsubs=[];return unsubs.push(...function registerDefaultSideEffects(editor){return[editor.sideEffects.registerAfterChangeHandler("instance",((prev,next)=>{prev.isFocused!==next.isFocused&&(next.isFocused?(editor.getContainer().focus(),editor.updateViewportScreenBounds()):(editor.complete(),editor.getContainer().blur(),editor.updateViewportScreenBounds()))})),editor.sideEffects.registerAfterChangeHandler("instance_page_state",((prev,next)=>{if(prev.croppingShapeId!==next.croppingShapeId){const isInCroppingState=editor.isInAny("select.crop","select.pointing_crop_handle","select.cropping");!prev.croppingShapeId&&next.croppingShapeId?isInCroppingState||editor.setCurrentTool("select.crop.idle"):prev.croppingShapeId&&!next.croppingShapeId&&isInCroppingState&&editor.setCurrentTool("select.idle")}prev.editingShapeId!==next.editingShapeId&&(!prev.editingShapeId&&next.editingShapeId?editor.isIn("select.editing_shape")||editor.setCurrentTool("select.editing_shape"):prev.editingShapeId&&!next.editingShapeId&&editor.isIn("select.editing_shape")&&editor.setCurrentTool("select.idle"))}))]}(editor2)),registerDefaultExternalContentHandlers(editor2,{maxImageDimension,maxAssetSize,acceptedImageMimeTypes,acceptedVideoMimeTypes}),unsubs.push(onMount?.(editor2)),()=>{unsubs.forEach((fn=>fn?.()))}}));return(0,react.useLayoutEffect)((()=>{if(editor)return onMountEvent?.(editor)}),[editor,onMountEvent]),null}dist_esm.T.object({tldrawFileFormatVersion:dist_esm.T.nonZeroInteger,schema:dist_esm.T.object({schemaVersion:dist_esm.T.positiveInteger,storeVersion:dist_esm.T.positiveInteger,recordVersions:dist_esm.T.dict(dist_esm.T.string,dist_esm.T.object({version:dist_esm.T.positiveInteger,subTypeVersions:dist_esm.T.dict(dist_esm.T.string,dist_esm.T.positiveInteger).optional(),subTypeKey:dist_esm.T.string.optional()}))}),records:dist_esm.T.arrayOf(dist_esm.T.object({id:dist_esm.T.string,typeName:dist_esm.T.string}).allowUnknownProperties())})},"./node_modules/anser/lib/index.js":module=>{"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var ANSI_COLORS=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],Anser=function(){function Anser(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Anser),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return _createClass(Anser,null,[{key:"escapeForHtml",value:function escapeForHtml(txt){return(new Anser).escapeForHtml(txt)}},{key:"linkify",value:function linkify(txt){return(new Anser).linkify(txt)}},{key:"ansiToHtml",value:function ansiToHtml(txt,options){return(new Anser).ansiToHtml(txt,options)}},{key:"ansiToJson",value:function ansiToJson(txt,options){return(new Anser).ansiToJson(txt,options)}},{key:"ansiToText",value:function ansiToText(txt){return(new Anser).ansiToText(txt)}}]),_createClass(Anser,[{key:"setupPalette",value:function setupPalette(){this.PALETTE_COLORS=[];for(var i=0;i<2;++i)for(var j=0;j<8;++j)this.PALETTE_COLORS.push(ANSI_COLORS[i][j].color);for(var levels=[0,95,135,175,215,255],format=function format(r,g,b){return levels[r]+", "+levels[g]+", "+levels[b]},_r=0;_r<6;++_r)for(var _g=0;_g<6;++_g)for(var _b=0;_b<6;++_b)this.PALETTE_COLORS.push(format(_r,_g,_b));for(var level=8,_i=0;_i<24;++_i,level+=10)this.PALETTE_COLORS.push(format(level,level,level))}},{key:"escapeForHtml",value:function escapeForHtml(txt){return txt.replace(/[&<>\"]/gm,(function(str){return"&"==str?"&amp;":'"'==str?"&quot;":"<"==str?"&lt;":">"==str?"&gt;":""}))}},{key:"linkify",value:function linkify(txt){return txt.replace(/(https?:\/\/[^\s]+)/gm,(function(str){return'<a href="'+str+'">'+str+"</a>"}))}},{key:"ansiToHtml",value:function ansiToHtml(txt,options){return this.process(txt,options,!0)}},{key:"ansiToJson",value:function ansiToJson(txt,options){return(options=options||{}).json=!0,options.clearLine=!1,this.process(txt,options,!0)}},{key:"ansiToText",value:function ansiToText(txt){return this.process(txt,{},!1)}},{key:"process",value:function process(txt,options,markup){var _this=this,raw_text_chunks=txt.split(/\033\[/),first_chunk=raw_text_chunks.shift();null==options&&(options={}),options.clearLine=/\r/.test(txt);var color_chunks=raw_text_chunks.map((function(chunk){return _this.processChunk(chunk,options,markup)}));if(options&&options.json){var first=this.processChunkJson("");return first.content=first_chunk,first.clearLine=options.clearLine,color_chunks.unshift(first),options.remove_empty&&(color_chunks=color_chunks.filter((function(c){return!c.isEmpty()}))),color_chunks}return color_chunks.unshift(first_chunk),color_chunks.join("")}},{key:"processChunkJson",value:function processChunkJson(text,options,markup){var use_classes=(options=void 0===options?{}:options).use_classes=void 0!==options.use_classes&&options.use_classes,key=options.key=use_classes?"class":"color",result={content:text,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:options.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function isEmpty(){return!result.content}},matches=text.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!matches)return result;result.content=matches[4];var nums=matches[2].split(";");if(""!==matches[1]||"m"!==matches[3])return result;if(!markup)return result;for(;nums.length>0;){var num_str=nums.shift(),num=parseInt(num_str);if(isNaN(num)||0===num)this.fg=this.bg=null,this.decorations=[];else if(1===num)this.decorations.push("bold");else if(2===num)this.decorations.push("dim");else if(3===num)this.decorations.push("italic");else if(4===num)this.decorations.push("underline");else if(5===num)this.decorations.push("blink");else if(7===num)this.decorations.push("reverse");else if(8===num)this.decorations.push("hidden");else if(9===num)this.decorations.push("strikethrough");else if(21===num)this.removeDecoration("bold");else if(22===num)this.removeDecoration("bold"),this.removeDecoration("dim");else if(23===num)this.removeDecoration("italic");else if(24===num)this.removeDecoration("underline");else if(25===num)this.removeDecoration("blink");else if(27===num)this.removeDecoration("reverse");else if(28===num)this.removeDecoration("hidden");else if(29===num)this.removeDecoration("strikethrough");else if(39===num)this.fg=null;else if(49===num)this.bg=null;else if(num>=30&&num<38)this.fg=ANSI_COLORS[0][num%10][key];else if(num>=90&&num<98)this.fg=ANSI_COLORS[1][num%10][key];else if(num>=40&&num<48)this.bg=ANSI_COLORS[0][num%10][key];else if(num>=100&&num<108)this.bg=ANSI_COLORS[1][num%10][key];else if(38===num||48===num){var is_foreground=38===num;if(nums.length>=1){var mode=nums.shift();if("5"===mode&&nums.length>=1){var palette_index=parseInt(nums.shift());if(palette_index>=0&&palette_index<=255)if(use_classes){var klass=palette_index>=16?"ansi-palette-"+palette_index:ANSI_COLORS[palette_index>7?1:0][palette_index%8].class;is_foreground?this.fg=klass:this.bg=klass}else this.PALETTE_COLORS||this.setupPalette(),is_foreground?this.fg=this.PALETTE_COLORS[palette_index]:this.bg=this.PALETTE_COLORS[palette_index]}else if("2"===mode&&nums.length>=3){var r=parseInt(nums.shift()),g=parseInt(nums.shift()),b=parseInt(nums.shift());if(r>=0&&r<=255&&g>=0&&g<=255&&b>=0&&b<=255){var color=r+", "+g+", "+b;use_classes?is_foreground?(this.fg="ansi-truecolor",this.fg_truecolor=color):(this.bg="ansi-truecolor",this.bg_truecolor=color):is_foreground?this.fg=color:this.bg=color}}}}}if(null===this.fg&&null===this.bg&&0===this.decorations.length)return result;return result.fg=this.fg,result.bg=this.bg,result.fg_truecolor=this.fg_truecolor,result.bg_truecolor=this.bg_truecolor,result.decorations=this.decorations,result.decoration=this.decorations.slice(-1).pop()||null,result.was_processed=!0,result}},{key:"processChunk",value:function processChunk(text,options,markup){var _this2=this;options=options||{};var jsonChunk=this.processChunkJson(text,options,markup),use_classes=options.use_classes;if(jsonChunk.decorations=jsonChunk.decorations.filter((function(decoration){if("reverse"===decoration){jsonChunk.fg||(jsonChunk.fg=ANSI_COLORS[0][7][use_classes?"class":"color"]),jsonChunk.bg||(jsonChunk.bg=ANSI_COLORS[0][0][use_classes?"class":"color"]);var tmpFg=jsonChunk.fg;jsonChunk.fg=jsonChunk.bg,jsonChunk.bg=tmpFg;var tmpFgTrue=jsonChunk.fg_truecolor;return jsonChunk.fg_truecolor=jsonChunk.bg_truecolor,jsonChunk.bg_truecolor=tmpFgTrue,jsonChunk.isInverted=!0,!1}return!0})),options.json)return jsonChunk;if(jsonChunk.isEmpty())return"";if(!jsonChunk.was_processed)return jsonChunk.content;var colors=[],decorations=[],textDecorations=[],data={},render_data=function render_data(data){var fragments=[],key=void 0;for(key in data)data.hasOwnProperty(key)&&fragments.push("data-"+key+'="'+_this2.escapeForHtml(data[key])+'"');return fragments.length>0?" "+fragments.join(" "):""};return jsonChunk.isInverted&&(data["ansi-is-inverted"]="true"),jsonChunk.fg&&(use_classes?(colors.push(jsonChunk.fg+"-fg"),null!==jsonChunk.fg_truecolor&&(data["ansi-truecolor-fg"]=jsonChunk.fg_truecolor,jsonChunk.fg_truecolor=null)):colors.push("color:rgb("+jsonChunk.fg+")")),jsonChunk.bg&&(use_classes?(colors.push(jsonChunk.bg+"-bg"),null!==jsonChunk.bg_truecolor&&(data["ansi-truecolor-bg"]=jsonChunk.bg_truecolor,jsonChunk.bg_truecolor=null)):colors.push("background-color:rgb("+jsonChunk.bg+")")),jsonChunk.decorations.forEach((function(decoration){use_classes?decorations.push("ansi-"+decoration):"bold"===decoration?decorations.push("font-weight:bold"):"dim"===decoration?decorations.push("opacity:0.5"):"italic"===decoration?decorations.push("font-style:italic"):"hidden"===decoration?decorations.push("visibility:hidden"):"strikethrough"===decoration?textDecorations.push("line-through"):textDecorations.push(decoration)})),textDecorations.length&&decorations.push("text-decoration:"+textDecorations.join(" ")),use_classes?'<span class="'+colors.concat(decorations).join(" ")+'"'+render_data(data)+">"+jsonChunk.content+"</span>":'<span style="'+colors.concat(decorations).join(";")+'"'+render_data(data)+">"+jsonChunk.content+"</span>"}},{key:"removeDecoration",value:function removeDecoration(decoration){var index=this.decorations.indexOf(decoration);index>=0&&this.decorations.splice(index,1)}}]),Anser}();module.exports=Anser},"./node_modules/aria-hidden/dist/es2015/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ry:()=>hideOthers});var getDefaultParent=function(originalTarget){return"undefined"==typeof document?null:(Array.isArray(originalTarget)?originalTarget[0]:originalTarget).ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(node){return node&&(node.host||unwrapHost(node.parentNode))},applyAttributeToOthers=function(originalTarget,parentNode,markerName,controlAttribute){var targets=function(parent,targets){return targets.map((function(target){if(parent.contains(target))return target;var correctedTarget=unwrapHost(target);return correctedTarget&&parent.contains(correctedTarget)?correctedTarget:(console.error("aria-hidden",target,"in not contained inside",parent,". Doing nothing"),null)})).filter((function(x){return Boolean(x)}))}(parentNode,Array.isArray(originalTarget)?originalTarget:[originalTarget]);markerMap[markerName]||(markerMap[markerName]=new WeakMap);var markerCounter=markerMap[markerName],hiddenNodes=[],elementsToKeep=new Set,elementsToStop=new Set(targets),keep=function(el){el&&!elementsToKeep.has(el)&&(elementsToKeep.add(el),keep(el.parentNode))};targets.forEach(keep);var deep=function(parent){parent&&!elementsToStop.has(parent)&&Array.prototype.forEach.call(parent.children,(function(node){if(elementsToKeep.has(node))deep(node);else{var attr=node.getAttribute(controlAttribute),alreadyHidden=null!==attr&&"false"!==attr,counterValue=(counterMap.get(node)||0)+1,markerValue=(markerCounter.get(node)||0)+1;counterMap.set(node,counterValue),markerCounter.set(node,markerValue),hiddenNodes.push(node),1===counterValue&&alreadyHidden&&uncontrolledNodes.set(node,!0),1===markerValue&&node.setAttribute(markerName,"true"),alreadyHidden||node.setAttribute(controlAttribute,"true")}}))};return deep(parentNode),elementsToKeep.clear(),lockCount++,function(){hiddenNodes.forEach((function(node){var counterValue=counterMap.get(node)-1,markerValue=markerCounter.get(node)-1;counterMap.set(node,counterValue),markerCounter.set(node,markerValue),counterValue||(uncontrolledNodes.has(node)||node.removeAttribute(controlAttribute),uncontrolledNodes.delete(node)),markerValue||node.removeAttribute(markerName)})),--lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(originalTarget,parentNode,markerName){void 0===markerName&&(markerName="data-aria-hidden");var targets=Array.from(Array.isArray(originalTarget)?originalTarget:[originalTarget]),activeParentNode=parentNode||getDefaultParent(originalTarget);return activeParentNode?(targets.push.apply(targets,Array.from(activeParentNode.querySelectorAll("[aria-live]"))),applyAttributeToOthers(targets,activeParentNode,markerName,"aria-hidden")):function(){return null}}},"./node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]")){classes.push(arg.toString());continue}for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./node_modules/core-js/es/array/at.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.at.js");var entryUnbind=__webpack_require__("./node_modules/core-js/internals/entry-unbind.js");module.exports=entryUnbind("Array","at")},"./node_modules/core-js/es/array/flat-map.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.flat-map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.unscopables.flat-map.js");var entryUnbind=__webpack_require__("./node_modules/core-js/internals/entry-unbind.js");module.exports=entryUnbind("Array","flatMap")},"./node_modules/core-js/es/array/flat.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.flat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.unscopables.flat.js");var entryUnbind=__webpack_require__("./node_modules/core-js/internals/entry-unbind.js");module.exports=entryUnbind("Array","flat")},"./node_modules/core-js/es/string/at.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.string.at-alternative.js");var entryUnbind=__webpack_require__("./node_modules/core-js/internals/entry-unbind.js");module.exports=entryUnbind("String","at")},"./node_modules/core-js/es/string/replace-all.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace-all.js");var entryUnbind=__webpack_require__("./node_modules/core-js/internals/entry-unbind.js");module.exports=entryUnbind("String","replaceAll")},"./node_modules/core-js/internals/a-callable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),tryToString=__webpack_require__("./node_modules/core-js/internals/try-to-string.js"),$TypeError=TypeError;module.exports=function(argument){if(isCallable(argument))return argument;throw new $TypeError(tryToString(argument)+" is not a function")}},"./node_modules/core-js/internals/add-to-unscopables.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),create=__webpack_require__("./node_modules/core-js/internals/object-create.js"),defineProperty=__webpack_require__("./node_modules/core-js/internals/object-define-property.js").f,UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;void 0===ArrayPrototype[UNSCOPABLES]&&defineProperty(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},"./node_modules/core-js/internals/advance-string-index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var charAt=__webpack_require__("./node_modules/core-js/internals/string-multibyte.js").charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}},"./node_modules/core-js/internals/an-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),$String=String,$TypeError=TypeError;module.exports=function(argument){if(isObject(argument))return argument;throw new $TypeError($String(argument)+" is not an object")}},"./node_modules/core-js/internals/array-includes.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toIndexedObject=__webpack_require__("./node_modules/core-js/internals/to-indexed-object.js"),toAbsoluteIndex=__webpack_require__("./node_modules/core-js/internals/to-absolute-index.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=lengthOfArrayLike(O),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},"./node_modules/core-js/internals/array-species-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isArray=__webpack_require__("./node_modules/core-js/internals/is-array.js"),isConstructor=__webpack_require__("./node_modules/core-js/internals/is-constructor.js"),isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),SPECIES=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js")("species"),$Array=Array;module.exports=function(originalArray){var C;return isArray(originalArray)&&(C=originalArray.constructor,(isConstructor(C)&&(C===$Array||isArray(C.prototype))||isObject(C)&&null===(C=C[SPECIES]))&&(C=void 0)),void 0===C?$Array:C}},"./node_modules/core-js/internals/array-species-create.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var arraySpeciesConstructor=__webpack_require__("./node_modules/core-js/internals/array-species-constructor.js");module.exports=function(originalArray,length){return new(arraySpeciesConstructor(originalArray))(0===length?0:length)}},"./node_modules/core-js/internals/classof-raw.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),toString=uncurryThis({}.toString),stringSlice=uncurryThis("".slice);module.exports=function(it){return stringSlice(toString(it),8,-1)}},"./node_modules/core-js/internals/classof.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var TO_STRING_TAG_SUPPORT=__webpack_require__("./node_modules/core-js/internals/to-string-tag-support.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),classofRaw=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),TO_STRING_TAG=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),$Object=Object,CORRECT_ARGUMENTS="Arguments"===classofRaw(function(){return arguments}());module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=$Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"===(result=classofRaw(O))&&isCallable(O.callee)?"Arguments":result}},"./node_modules/core-js/internals/copy-constructor-properties.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),ownKeys=__webpack_require__("./node_modules/core-js/internals/own-keys.js"),getOwnPropertyDescriptorModule=__webpack_require__("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),definePropertyModule=__webpack_require__("./node_modules/core-js/internals/object-define-property.js");module.exports=function(target,source,exceptions){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];hasOwn(target,key)||exceptions&&hasOwn(exceptions,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},"./node_modules/core-js/internals/create-non-enumerable-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),definePropertyModule=__webpack_require__("./node_modules/core-js/internals/object-define-property.js"),createPropertyDescriptor=__webpack_require__("./node_modules/core-js/internals/create-property-descriptor.js");module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},"./node_modules/core-js/internals/create-property-descriptor.js":module=>{"use strict";module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value}}},"./node_modules/core-js/internals/define-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),definePropertyModule=__webpack_require__("./node_modules/core-js/internals/object-define-property.js"),makeBuiltIn=__webpack_require__("./node_modules/core-js/internals/make-built-in.js"),defineGlobalProperty=__webpack_require__("./node_modules/core-js/internals/define-global-property.js");module.exports=function(O,key,value,options){options||(options={});var simple=options.enumerable,name=void 0!==options.name?options.name:key;if(isCallable(value)&&makeBuiltIn(value,name,options),options.global)simple?O[key]=value:defineGlobalProperty(key,value);else{try{options.unsafe?O[key]&&(simple=!0):delete O[key]}catch(error){}simple?O[key]=value:definePropertyModule.f(O,key,{value,enumerable:!1,configurable:!options.nonConfigurable,writable:!options.nonWritable})}return O}},"./node_modules/core-js/internals/define-global-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),defineProperty=Object.defineProperty;module.exports=function(key,value){try{defineProperty(global,key,{value,configurable:!0,writable:!0})}catch(error){global[key]=value}return value}},"./node_modules/core-js/internals/descriptors.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js");module.exports=!fails((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"./node_modules/core-js/internals/document-all.js":module=>{"use strict";var documentAll="object"==typeof document&&document.all,IS_HTMLDDA=void 0===documentAll&&void 0!==documentAll;module.exports={all:documentAll,IS_HTMLDDA}},"./node_modules/core-js/internals/document-create-element.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":module=>{"use strict";var $TypeError=TypeError;module.exports=function(it){if(it>9007199254740991)throw $TypeError("Maximum allowed index exceeded");return it}},"./node_modules/core-js/internals/engine-user-agent.js":module=>{"use strict";module.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},"./node_modules/core-js/internals/engine-v8-version.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var match,version,global=__webpack_require__("./node_modules/core-js/internals/global.js"),userAgent=__webpack_require__("./node_modules/core-js/internals/engine-user-agent.js"),process=global.process,Deno=global.Deno,versions=process&&process.versions||Deno&&Deno.version,v8=versions&&versions.v8;v8&&(version=(match=v8.split("."))[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent&&(!(match=userAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=+match[1]),module.exports=version},"./node_modules/core-js/internals/entry-unbind.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js");module.exports=function(CONSTRUCTOR,METHOD){return uncurryThis(global[CONSTRUCTOR].prototype[METHOD])}},"./node_modules/core-js/internals/enum-bug-keys.js":module=>{"use strict";module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),getOwnPropertyDescriptor=__webpack_require__("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,createNonEnumerableProperty=__webpack_require__("./node_modules/core-js/internals/create-non-enumerable-property.js"),defineBuiltIn=__webpack_require__("./node_modules/core-js/internals/define-built-in.js"),defineGlobalProperty=__webpack_require__("./node_modules/core-js/internals/define-global-property.js"),copyConstructorProperties=__webpack_require__("./node_modules/core-js/internals/copy-constructor-properties.js"),isForced=__webpack_require__("./node_modules/core-js/internals/is-forced.js");module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||defineGlobalProperty(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.dontCallGetSet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),defineBuiltIn(target,key,sourceProperty,options)}}},"./node_modules/core-js/internals/fails.js":module=>{"use strict";module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},"./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js");var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this-clause.js"),defineBuiltIn=__webpack_require__("./node_modules/core-js/internals/define-built-in.js"),regexpExec=__webpack_require__("./node_modules/core-js/internals/regexp-exec.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),createNonEnumerableProperty=__webpack_require__("./node_modules/core-js/internals/create-non-enumerable-property.js"),SPECIES=wellKnownSymbol("species"),RegExpPrototype=RegExp.prototype;module.exports=function(KEY,exec,FORCED,SHAM){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails((function(){var O={};return O[SYMBOL]=function(){return 7},7!==""[KEY](O)})),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails((function(){var execCalled=!1,re=/a/;return"split"===KEY&&((re={}).constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled}));if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||FORCED){var uncurriedNativeRegExpMethod=uncurryThis(/./[SYMBOL]),methods=exec(SYMBOL,""[KEY],(function(nativeMethod,regexp,str,arg2,forceStringMethod){var uncurriedNativeMethod=uncurryThis(nativeMethod),$exec=regexp.exec;return $exec===regexpExec||$exec===RegExpPrototype.exec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:uncurriedNativeRegExpMethod(regexp,str,arg2)}:{done:!0,value:uncurriedNativeMethod(str,regexp,arg2)}:{done:!1}}));defineBuiltIn(String.prototype,KEY,methods[0]),defineBuiltIn(RegExpPrototype,SYMBOL,methods[1])}SHAM&&createNonEnumerableProperty(RegExpPrototype[SYMBOL],"sham",!0)}},"./node_modules/core-js/internals/flatten-into-array.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isArray=__webpack_require__("./node_modules/core-js/internals/is-array.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),doesNotExceedSafeInteger=__webpack_require__("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),bind=__webpack_require__("./node_modules/core-js/internals/function-bind-context.js"),flattenIntoArray=function(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,elementLen,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&bind(mapper,thisArg);sourceIndex<sourceLen;)sourceIndex in source&&(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],depth>0&&isArray(element)?(elementLen=lengthOfArrayLike(element),targetIndex=flattenIntoArray(target,original,element,elementLen,targetIndex,depth-1)-1):(doesNotExceedSafeInteger(targetIndex+1),target[targetIndex]=element),targetIndex++),sourceIndex++;return targetIndex};module.exports=flattenIntoArray},"./node_modules/core-js/internals/function-apply.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var NATIVE_BIND=__webpack_require__("./node_modules/core-js/internals/function-bind-native.js"),FunctionPrototype=Function.prototype,apply=FunctionPrototype.apply,call=FunctionPrototype.call;module.exports="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND?call.bind(apply):function(){return call.apply(apply,arguments)})},"./node_modules/core-js/internals/function-bind-context.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this-clause.js"),aCallable=__webpack_require__("./node_modules/core-js/internals/a-callable.js"),NATIVE_BIND=__webpack_require__("./node_modules/core-js/internals/function-bind-native.js"),bind=uncurryThis(uncurryThis.bind);module.exports=function(fn,that){return aCallable(fn),void 0===that?fn:NATIVE_BIND?bind(fn,that):function(){return fn.apply(that,arguments)}}},"./node_modules/core-js/internals/function-bind-native.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js");module.exports=!fails((function(){var test=function(){}.bind();return"function"!=typeof test||test.hasOwnProperty("prototype")}))},"./node_modules/core-js/internals/function-call.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var NATIVE_BIND=__webpack_require__("./node_modules/core-js/internals/function-bind-native.js"),call=Function.prototype.call;module.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments)}},"./node_modules/core-js/internals/function-name.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn(FunctionPrototype,"name"),PROPER=EXISTS&&"something"===function something(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS||DESCRIPTORS&&getDescriptor(FunctionPrototype,"name").configurable);module.exports={EXISTS,PROPER,CONFIGURABLE}},"./node_modules/core-js/internals/function-uncurry-this-clause.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var classofRaw=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js");module.exports=function(fn){if("Function"===classofRaw(fn))return uncurryThis(fn)}},"./node_modules/core-js/internals/function-uncurry-this.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var NATIVE_BIND=__webpack_require__("./node_modules/core-js/internals/function-bind-native.js"),FunctionPrototype=Function.prototype,call=FunctionPrototype.call,uncurryThisWithBind=NATIVE_BIND&&FunctionPrototype.bind.bind(call,call);module.exports=NATIVE_BIND?uncurryThisWithBind:function(fn){return function(){return call.apply(fn,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js");module.exports=function(namespace,method){return arguments.length<2?(argument=global[namespace],isCallable(argument)?argument:void 0):global[namespace]&&global[namespace][method];var argument}},"./node_modules/core-js/internals/get-method.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var aCallable=__webpack_require__("./node_modules/core-js/internals/a-callable.js"),isNullOrUndefined=__webpack_require__("./node_modules/core-js/internals/is-null-or-undefined.js");module.exports=function(V,P){var func=V[P];return isNullOrUndefined(func)?void 0:aCallable(func)}},"./node_modules/core-js/internals/get-substitution.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),floor=Math.floor,charAt=uncurryThis("".charAt),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g;module.exports=function(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),replace(replacement,symbols,(function(match,ch){var capture;switch(charAt(ch,0)){case"$":return"$";case"&":return matched;case"`":return stringSlice(str,0,position);case"'":return stringSlice(str,tailPos);case"<":capture=namedCaptures[stringSlice(ch,1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?charAt(ch,1):captures[f-1]+charAt(ch,1):match}capture=captures[n-1]}return void 0===capture?"":capture}))}},"./node_modules/core-js/internals/global.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";var check=function(it){return it&&it.Math===Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof __webpack_require__.g&&__webpack_require__.g)||function(){return this}()||this||Function("return this")()},"./node_modules/core-js/internals/has-own-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),hasOwnProperty=uncurryThis({}.hasOwnProperty);module.exports=Object.hasOwn||function hasOwn(it,key){return hasOwnProperty(toObject(it),key)}},"./node_modules/core-js/internals/hidden-keys.js":module=>{"use strict";module.exports={}},"./node_modules/core-js/internals/html.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getBuiltIn=__webpack_require__("./node_modules/core-js/internals/get-built-in.js");module.exports=getBuiltIn("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),createElement=__webpack_require__("./node_modules/core-js/internals/document-create-element.js");module.exports=!DESCRIPTORS&&!fails((function(){return 7!==Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/internals/indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),classof=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),$Object=Object,split=uncurryThis("".split);module.exports=fails((function(){return!$Object("z").propertyIsEnumerable(0)}))?function(it){return"String"===classof(it)?split(it,""):$Object(it)}:$Object},"./node_modules/core-js/internals/inspect-source.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),store=__webpack_require__("./node_modules/core-js/internals/shared-store.js"),functionToString=uncurryThis(Function.toString);isCallable(store.inspectSource)||(store.inspectSource=function(it){return functionToString(it)}),module.exports=store.inspectSource},"./node_modules/core-js/internals/internal-state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var set,get,has,NATIVE_WEAK_MAP=__webpack_require__("./node_modules/core-js/internals/weak-map-basic-detection.js"),global=__webpack_require__("./node_modules/core-js/internals/global.js"),isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),createNonEnumerableProperty=__webpack_require__("./node_modules/core-js/internals/create-non-enumerable-property.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),shared=__webpack_require__("./node_modules/core-js/internals/shared-store.js"),sharedKey=__webpack_require__("./node_modules/core-js/internals/shared-key.js"),hiddenKeys=__webpack_require__("./node_modules/core-js/internals/hidden-keys.js"),TypeError=global.TypeError,WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP||shared.state){var store=shared.state||(shared.state=new WeakMap);store.get=store.get,store.has=store.has,store.set=store.set,set=function(it,metadata){if(store.has(it))throw new TypeError("Object already initialized");return metadata.facade=it,store.set(it,metadata),metadata},get=function(it){return store.get(it)||{}},has=function(it){return store.has(it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){if(hasOwn(it,STATE))throw new TypeError("Object already initialized");return metadata.facade=it,createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return hasOwn(it,STATE)?it[STATE]:{}},has=function(it){return hasOwn(it,STATE)}}module.exports={set,get,has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw new TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},"./node_modules/core-js/internals/is-array.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var classof=__webpack_require__("./node_modules/core-js/internals/classof-raw.js");module.exports=Array.isArray||function isArray(argument){return"Array"===classof(argument)}},"./node_modules/core-js/internals/is-callable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $documentAll=__webpack_require__("./node_modules/core-js/internals/document-all.js"),documentAll=$documentAll.all;module.exports=$documentAll.IS_HTMLDDA?function(argument){return"function"==typeof argument||argument===documentAll}:function(argument){return"function"==typeof argument}},"./node_modules/core-js/internals/is-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),classof=__webpack_require__("./node_modules/core-js/internals/classof.js"),getBuiltIn=__webpack_require__("./node_modules/core-js/internals/get-built-in.js"),inspectSource=__webpack_require__("./node_modules/core-js/internals/inspect-source.js"),noop=function(){},empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.test(noop),isConstructorModern=function isConstructor(argument){if(!isCallable(argument))return!1;try{return construct(noop,empty,argument),!0}catch(error){return!1}},isConstructorLegacy=function isConstructor(argument){if(!isCallable(argument))return!1;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument))}catch(error){return!0}};isConstructorLegacy.sham=!0,module.exports=!construct||fails((function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){called=!0}))||called}))?isConstructorLegacy:isConstructorModern},"./node_modules/core-js/internals/is-forced.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value===POLYFILL||value!==NATIVE&&(isCallable(detection)?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},"./node_modules/core-js/internals/is-null-or-undefined.js":module=>{"use strict";module.exports=function(it){return null==it}},"./node_modules/core-js/internals/is-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),$documentAll=__webpack_require__("./node_modules/core-js/internals/document-all.js"),documentAll=$documentAll.all;module.exports=$documentAll.IS_HTMLDDA?function(it){return"object"==typeof it?null!==it:isCallable(it)||it===documentAll}:function(it){return"object"==typeof it?null!==it:isCallable(it)}},"./node_modules/core-js/internals/is-pure.js":module=>{"use strict";module.exports=!1},"./node_modules/core-js/internals/is-regexp.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),classof=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),MATCH=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js")("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"===classof(it))}},"./node_modules/core-js/internals/is-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getBuiltIn=__webpack_require__("./node_modules/core-js/internals/get-built-in.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),isPrototypeOf=__webpack_require__("./node_modules/core-js/internals/object-is-prototype-of.js"),USE_SYMBOL_AS_UID=__webpack_require__("./node_modules/core-js/internals/use-symbol-as-uid.js"),$Object=Object;module.exports=USE_SYMBOL_AS_UID?function(it){return"symbol"==typeof it}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,$Object(it))}},"./node_modules/core-js/internals/length-of-array-like.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toLength=__webpack_require__("./node_modules/core-js/internals/to-length.js");module.exports=function(obj){return toLength(obj.length)}},"./node_modules/core-js/internals/make-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),CONFIGURABLE_FUNCTION_NAME=__webpack_require__("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,inspectSource=__webpack_require__("./node_modules/core-js/internals/inspect-source.js"),InternalStateModule=__webpack_require__("./node_modules/core-js/internals/internal-state.js"),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,$String=String,defineProperty=Object.defineProperty,stringSlice=uncurryThis("".slice),replace=uncurryThis("".replace),join=uncurryThis([].join),CONFIGURABLE_LENGTH=DESCRIPTORS&&!fails((function(){return 8!==defineProperty((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn=module.exports=function(value,name,options){"Symbol("===stringSlice($String(name),0,7)&&(name="["+replace($String(name),/^Symbol\(([^)]*)\)/,"$1")+"]"),options&&options.getter&&(name="get "+name),options&&options.setter&&(name="set "+name),(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name)&&(DESCRIPTORS?defineProperty(value,"name",{value:name,configurable:!0}):value.name=name),CONFIGURABLE_LENGTH&&options&&hasOwn(options,"arity")&&value.length!==options.arity&&defineProperty(value,"length",{value:options.arity});try{options&&hasOwn(options,"constructor")&&options.constructor?DESCRIPTORS&&defineProperty(value,"prototype",{writable:!1}):value.prototype&&(value.prototype=void 0)}catch(error){}var state=enforceInternalState(value);return hasOwn(state,"source")||(state.source=join(TEMPLATE,"string"==typeof name?name:"")),value};Function.prototype.toString=makeBuiltIn((function toString(){return isCallable(this)&&getInternalState(this).source||inspectSource(this)}),"toString")},"./node_modules/core-js/internals/math-trunc.js":module=>{"use strict";var ceil=Math.ceil,floor=Math.floor;module.exports=Math.trunc||function trunc(x){var n=+x;return(n>0?floor:ceil)(n)}},"./node_modules/core-js/internals/object-create.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var activeXDocument,anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),definePropertiesModule=__webpack_require__("./node_modules/core-js/internals/object-define-properties.js"),enumBugKeys=__webpack_require__("./node_modules/core-js/internals/enum-bug-keys.js"),hiddenKeys=__webpack_require__("./node_modules/core-js/internals/hidden-keys.js"),html=__webpack_require__("./node_modules/core-js/internals/html.js"),documentCreateElement=__webpack_require__("./node_modules/core-js/internals/document-create-element.js"),sharedKey=__webpack_require__("./node_modules/core-js/internals/shared-key.js"),IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(content){return"<script>"+content+"<\/script>"},NullProtoObjectViaActiveX=function(activeXDocument){activeXDocument.write(scriptTag("")),activeXDocument.close();var temp=activeXDocument.parentWindow.Object;return activeXDocument=null,temp},NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(error){}var iframeDocument,iframe;NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):((iframe=documentCreateElement("iframe")).style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F):NullProtoObjectViaActiveX(activeXDocument);for(var length=enumBugKeys.length;length--;)delete NullProtoObject.prototype[enumBugKeys[length]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0,module.exports=Object.create||function create(O,Properties){var result;return null!==O?(EmptyConstructor.prototype=anObject(O),result=new EmptyConstructor,EmptyConstructor.prototype=null,result[IE_PROTO]=O):result=NullProtoObject(),void 0===Properties?result:definePropertiesModule.f(result,Properties)}},"./node_modules/core-js/internals/object-define-properties.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),V8_PROTOTYPE_DEFINE_BUG=__webpack_require__("./node_modules/core-js/internals/v8-prototype-define-bug.js"),definePropertyModule=__webpack_require__("./node_modules/core-js/internals/object-define-property.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),toIndexedObject=__webpack_require__("./node_modules/core-js/internals/to-indexed-object.js"),objectKeys=__webpack_require__("./node_modules/core-js/internals/object-keys.js");exports.f=DESCRIPTORS&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var key,props=toIndexedObject(Properties),keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],props[key]);return O}},"./node_modules/core-js/internals/object-define-property.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),IE8_DOM_DEFINE=__webpack_require__("./node_modules/core-js/internals/ie8-dom-define.js"),V8_PROTOTYPE_DEFINE_BUG=__webpack_require__("./node_modules/core-js/internals/v8-prototype-define-bug.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),toPropertyKey=__webpack_require__("./node_modules/core-js/internals/to-property-key.js"),$TypeError=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?V8_PROTOTYPE_DEFINE_BUG?function defineProperty(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),"function"==typeof O&&"prototype"===P&&"value"in Attributes&&"writable"in Attributes&&!Attributes.writable){var current=$getOwnPropertyDescriptor(O,P);current&&current.writable&&(O[P]=Attributes.value,Attributes={configurable:"configurable"in Attributes?Attributes.configurable:current.configurable,enumerable:"enumerable"in Attributes?Attributes.enumerable:current.enumerable,writable:!1})}return $defineProperty(O,P,Attributes)}:$defineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw new $TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),propertyIsEnumerableModule=__webpack_require__("./node_modules/core-js/internals/object-property-is-enumerable.js"),createPropertyDescriptor=__webpack_require__("./node_modules/core-js/internals/create-property-descriptor.js"),toIndexedObject=__webpack_require__("./node_modules/core-js/internals/to-indexed-object.js"),toPropertyKey=__webpack_require__("./node_modules/core-js/internals/to-property-key.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),IE8_DOM_DEFINE=__webpack_require__("./node_modules/core-js/internals/ie8-dom-define.js"),$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?$getOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){if(O=toIndexedObject(O),P=toPropertyKey(P),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P)}catch(error){}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P])}},"./node_modules/core-js/internals/object-get-own-property-names.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var internalObjectKeys=__webpack_require__("./node_modules/core-js/internals/object-keys-internal.js"),hiddenKeys=__webpack_require__("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":(__unused_webpack_module,exports)=>{"use strict";exports.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-is-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js");module.exports=uncurryThis({}.isPrototypeOf)},"./node_modules/core-js/internals/object-keys-internal.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),toIndexedObject=__webpack_require__("./node_modules/core-js/internals/to-indexed-object.js"),indexOf=__webpack_require__("./node_modules/core-js/internals/array-includes.js").indexOf,hiddenKeys=__webpack_require__("./node_modules/core-js/internals/hidden-keys.js"),push=uncurryThis([].push);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);for(;names.length>i;)hasOwn(O,key=names[i++])&&(~indexOf(result,key)||push(result,key));return result}},"./node_modules/core-js/internals/object-keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var internalObjectKeys=__webpack_require__("./node_modules/core-js/internals/object-keys-internal.js"),enumBugKeys=__webpack_require__("./node_modules/core-js/internals/enum-bug-keys.js");module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":(__unused_webpack_module,exports)=>{"use strict";var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:$propertyIsEnumerable},"./node_modules/core-js/internals/ordinary-to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),$TypeError=TypeError;module.exports=function(input,pref){var fn,val;if("string"===pref&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;if(isCallable(fn=input.valueOf)&&!isObject(val=call(fn,input)))return val;if("string"!==pref&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;throw new $TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getBuiltIn=__webpack_require__("./node_modules/core-js/internals/get-built-in.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),getOwnPropertyNamesModule=__webpack_require__("./node_modules/core-js/internals/object-get-own-property-names.js"),getOwnPropertySymbolsModule=__webpack_require__("./node_modules/core-js/internals/object-get-own-property-symbols.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),concat=uncurryThis([].concat);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys,getOwnPropertySymbols(it)):keys}},"./node_modules/core-js/internals/regexp-exec-abstract.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),classof=__webpack_require__("./node_modules/core-js/internals/classof-raw.js"),regexpExec=__webpack_require__("./node_modules/core-js/internals/regexp-exec.js"),$TypeError=TypeError;module.exports=function(R,S){var exec=R.exec;if(isCallable(exec)){var result=call(exec,R,S);return null!==result&&anObject(result),result}if("RegExp"===classof(R))return call(regexpExec,R,S);throw new $TypeError("RegExp#exec called on incompatible receiver")}},"./node_modules/core-js/internals/regexp-exec.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var re1,re2,call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),regexpFlags=__webpack_require__("./node_modules/core-js/internals/regexp-flags.js"),stickyHelpers=__webpack_require__("./node_modules/core-js/internals/regexp-sticky-helpers.js"),shared=__webpack_require__("./node_modules/core-js/internals/shared.js"),create=__webpack_require__("./node_modules/core-js/internals/object-create.js"),getInternalState=__webpack_require__("./node_modules/core-js/internals/internal-state.js").get,UNSUPPORTED_DOT_ALL=__webpack_require__("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),UNSUPPORTED_NCG=__webpack_require__("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt=uncurryThis("".charAt),indexOf=uncurryThis("".indexOf),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),UPDATES_LAST_INDEX_WRONG=(re2=/b*/g,call(nativeExec,re1=/a/,"a"),call(nativeExec,re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG)&&(patchedExec=function exec(string){var result,reCopy,lastIndex,match,i,object,group,re=this,state=getInternalState(re),str=toString(string),raw=state.raw;if(raw)return raw.lastIndex=re.lastIndex,result=call(patchedExec,raw,str),re.lastIndex=raw.lastIndex,result;var groups=state.groups,sticky=UNSUPPORTED_Y&&re.sticky,flags=call(regexpFlags,re),source=re.source,charsAdded=0,strCopy=str;if(sticky&&(flags=replace(flags,"y",""),-1===indexOf(flags,"g")&&(flags+="g"),strCopy=stringSlice(str,re.lastIndex),re.lastIndex>0&&(!re.multiline||re.multiline&&"\n"!==charAt(str,re.lastIndex-1))&&(source="(?: "+source+")",strCopy=" "+strCopy,charsAdded++),reCopy=new RegExp("^(?:"+source+")",flags)),NPCG_INCLUDED&&(reCopy=new RegExp("^"+source+"$(?!\\s)",flags)),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=call(nativeExec,sticky?reCopy:re,strCopy),sticky?match?(match.input=stringSlice(match.input,charsAdded),match[0]=stringSlice(match[0],charsAdded),match.index=re.lastIndex,re.lastIndex+=match[0].length):re.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&call(nativeReplace,match[0],reCopy,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match&&groups)for(match.groups=object=create(null),i=0;i<groups.length;i++)object[(group=groups[i])[0]]=match[group[1]];return match}),module.exports=patchedExec},"./node_modules/core-js/internals/regexp-flags.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js");module.exports=function(){var that=anObject(this),result="";return that.hasIndices&&(result+="d"),that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.unicodeSets&&(result+="v"),that.sticky&&(result+="y"),result}},"./node_modules/core-js/internals/regexp-get-flags.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),isPrototypeOf=__webpack_require__("./node_modules/core-js/internals/object-is-prototype-of.js"),regExpFlags=__webpack_require__("./node_modules/core-js/internals/regexp-flags.js"),RegExpPrototype=RegExp.prototype;module.exports=function(R){var flags=R.flags;return void 0!==flags||"flags"in RegExpPrototype||hasOwn(R,"flags")||!isPrototypeOf(RegExpPrototype,R)?flags:call(regExpFlags,R)}},"./node_modules/core-js/internals/regexp-sticky-helpers.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("./node_modules/core-js/internals/global.js").RegExp,UNSUPPORTED_Y=fails((function(){var re=$RegExp("a","y");return re.lastIndex=2,null!==re.exec("abcd")})),MISSED_STICKY=UNSUPPORTED_Y||fails((function(){return!$RegExp("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y||fails((function(){var re=$RegExp("^r","gy");return re.lastIndex=2,null!==re.exec("str")}));module.exports={BROKEN_CARET,MISSED_STICKY,UNSUPPORTED_Y}},"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("./node_modules/core-js/internals/global.js").RegExp;module.exports=fails((function(){var re=$RegExp(".","s");return!(re.dotAll&&re.test("\n")&&"s"===re.flags)}))},"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("./node_modules/core-js/internals/global.js").RegExp;module.exports=fails((function(){var re=$RegExp("(?<a>b)","g");return"b"!==re.exec("b").groups.a||"bc"!=="b".replace(re,"$<a>c")}))},"./node_modules/core-js/internals/require-object-coercible.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isNullOrUndefined=__webpack_require__("./node_modules/core-js/internals/is-null-or-undefined.js"),$TypeError=TypeError;module.exports=function(it){if(isNullOrUndefined(it))throw new $TypeError("Can't call method on "+it);return it}},"./node_modules/core-js/internals/shared-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var shared=__webpack_require__("./node_modules/core-js/internals/shared.js"),uid=__webpack_require__("./node_modules/core-js/internals/uid.js"),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},"./node_modules/core-js/internals/shared-store.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),defineGlobalProperty=__webpack_require__("./node_modules/core-js/internals/define-global-property.js"),store=global["__core-js_shared__"]||defineGlobalProperty("__core-js_shared__",{});module.exports=store},"./node_modules/core-js/internals/shared.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IS_PURE=__webpack_require__("./node_modules/core-js/internals/is-pure.js"),store=__webpack_require__("./node_modules/core-js/internals/shared-store.js");(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.33.1",mode:IS_PURE?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"./node_modules/core-js/internals/string-multibyte.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),charAt=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),stringSlice=uncurryThis("".slice),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=toString(requireObjectCoercible($this)),position=toIntegerOrInfinity(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=charCodeAt(S,position))<55296||first>56319||position+1===size||(second=charCodeAt(S,position+1))<56320||second>57343?CONVERT_TO_STRING?charAt(S,position):first:CONVERT_TO_STRING?stringSlice(S,position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},"./node_modules/core-js/internals/symbol-constructor-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var V8_VERSION=__webpack_require__("./node_modules/core-js/internals/engine-v8-version.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),$String=__webpack_require__("./node_modules/core-js/internals/global.js").String;module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){var symbol=Symbol("symbol detection");return!$String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41}))},"./node_modules/core-js/internals/to-absolute-index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length)}},"./node_modules/core-js/internals/to-indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IndexedObject=__webpack_require__("./node_modules/core-js/internals/indexed-object.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js");module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},"./node_modules/core-js/internals/to-integer-or-infinity.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var trunc=__webpack_require__("./node_modules/core-js/internals/math-trunc.js");module.exports=function(argument){var number=+argument;return number!=number||0===number?0:trunc(number)}},"./node_modules/core-js/internals/to-length.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),min=Math.min;module.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),$Object=Object;module.exports=function(argument){return $Object(requireObjectCoercible(argument))}},"./node_modules/core-js/internals/to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),isObject=__webpack_require__("./node_modules/core-js/internals/is-object.js"),isSymbol=__webpack_require__("./node_modules/core-js/internals/is-symbol.js"),getMethod=__webpack_require__("./node_modules/core-js/internals/get-method.js"),ordinaryToPrimitive=__webpack_require__("./node_modules/core-js/internals/ordinary-to-primitive.js"),wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),$TypeError=TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module.exports=function(input,pref){if(!isObject(input)||isSymbol(input))return input;var result,exoticToPrim=getMethod(input,TO_PRIMITIVE);if(exoticToPrim){if(void 0===pref&&(pref="default"),result=call(exoticToPrim,input,pref),!isObject(result)||isSymbol(result))return result;throw new $TypeError("Can't convert object to primitive value")}return void 0===pref&&(pref="number"),ordinaryToPrimitive(input,pref)}},"./node_modules/core-js/internals/to-property-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toPrimitive=__webpack_require__("./node_modules/core-js/internals/to-primitive.js"),isSymbol=__webpack_require__("./node_modules/core-js/internals/is-symbol.js");module.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol(key)?key:key+""}},"./node_modules/core-js/internals/to-string-tag-support.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var test={};test[__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",module.exports="[object z]"===String(test)},"./node_modules/core-js/internals/to-string.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var classof=__webpack_require__("./node_modules/core-js/internals/classof.js"),$String=String;module.exports=function(argument){if("Symbol"===classof(argument))throw new TypeError("Cannot convert a Symbol value to a string");return $String(argument)}},"./node_modules/core-js/internals/try-to-string.js":module=>{"use strict";var $String=String;module.exports=function(argument){try{return $String(argument)}catch(error){return"Object"}}},"./node_modules/core-js/internals/uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),id=0,postfix=Math.random(),toString=uncurryThis(1..toString);module.exports=function(key){return"Symbol("+(void 0===key?"":key)+")_"+toString(++id+postfix,36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var NATIVE_SYMBOL=__webpack_require__("./node_modules/core-js/internals/symbol-constructor-detection.js");module.exports=NATIVE_SYMBOL&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/v8-prototype-define-bug.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("./node_modules/core-js/internals/descriptors.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js");module.exports=DESCRIPTORS&&fails((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},"./node_modules/core-js/internals/weak-map-basic-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),WeakMap=global.WeakMap;module.exports=isCallable(WeakMap)&&/native code/.test(String(WeakMap))},"./node_modules/core-js/internals/well-known-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var global=__webpack_require__("./node_modules/core-js/internals/global.js"),shared=__webpack_require__("./node_modules/core-js/internals/shared.js"),hasOwn=__webpack_require__("./node_modules/core-js/internals/has-own-property.js"),uid=__webpack_require__("./node_modules/core-js/internals/uid.js"),NATIVE_SYMBOL=__webpack_require__("./node_modules/core-js/internals/symbol-constructor-detection.js"),USE_SYMBOL_AS_UID=__webpack_require__("./node_modules/core-js/internals/use-symbol-as-uid.js"),Symbol=global.Symbol,WellKnownSymbolsStore=shared("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol.for||Symbol:Symbol&&Symbol.withoutSetter||uid;module.exports=function(name){return hasOwn(WellKnownSymbolsStore,name)||(WellKnownSymbolsStore[name]=NATIVE_SYMBOL&&hasOwn(Symbol,name)?Symbol[name]:createWellKnownSymbol("Symbol."+name)),WellKnownSymbolsStore[name]}},"./node_modules/core-js/modules/es.array.at.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),addToUnscopables=__webpack_require__("./node_modules/core-js/internals/add-to-unscopables.js");$({target:"Array",proto:!0},{at:function at(index){var O=toObject(this),len=lengthOfArrayLike(O),relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:O[k]}}),addToUnscopables("at")},"./node_modules/core-js/modules/es.array.flat-map.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),flattenIntoArray=__webpack_require__("./node_modules/core-js/internals/flatten-into-array.js"),aCallable=__webpack_require__("./node_modules/core-js/internals/a-callable.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),arraySpeciesCreate=__webpack_require__("./node_modules/core-js/internals/array-species-create.js");$({target:"Array",proto:!0},{flatMap:function flatMap(callbackfn){var A,O=toObject(this),sourceLen=lengthOfArrayLike(O);return aCallable(callbackfn),(A=arraySpeciesCreate(O,0)).length=flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments.length>1?arguments[1]:void 0),A}})},"./node_modules/core-js/modules/es.array.flat.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),flattenIntoArray=__webpack_require__("./node_modules/core-js/internals/flatten-into-array.js"),toObject=__webpack_require__("./node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("./node_modules/core-js/internals/length-of-array-like.js"),toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),arraySpeciesCreate=__webpack_require__("./node_modules/core-js/internals/array-species-create.js");$({target:"Array",proto:!0},{flat:function flat(){var depthArg=arguments.length?arguments[0]:void 0,O=toObject(this),sourceLen=lengthOfArrayLike(O),A=arraySpeciesCreate(O,0);return A.length=flattenIntoArray(A,O,O,sourceLen,0,void 0===depthArg?1:toIntegerOrInfinity(depthArg)),A}})},"./node_modules/core-js/modules/es.array.unscopables.flat-map.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/internals/add-to-unscopables.js")("flatMap")},"./node_modules/core-js/modules/es.array.unscopables.flat.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/internals/add-to-unscopables.js")("flat")},"./node_modules/core-js/modules/es.regexp.exec.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),exec=__webpack_require__("./node_modules/core-js/internals/regexp-exec.js");$({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec})},"./node_modules/core-js/modules/es.string.at-alternative.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),charAt=uncurryThis("".charAt);$({target:"String",proto:!0,forced:fails((function(){return"\ud842"!=="".at(-2)}))},{at:function at(index){var S=toString(requireObjectCoercible(this)),len=S.length,relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:charAt(S,k)}})},"./node_modules/core-js/modules/es.string.replace-all.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("./node_modules/core-js/internals/export.js"),call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),isNullOrUndefined=__webpack_require__("./node_modules/core-js/internals/is-null-or-undefined.js"),isRegExp=__webpack_require__("./node_modules/core-js/internals/is-regexp.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),getMethod=__webpack_require__("./node_modules/core-js/internals/get-method.js"),getRegExpFlags=__webpack_require__("./node_modules/core-js/internals/regexp-get-flags.js"),getSubstitution=__webpack_require__("./node_modules/core-js/internals/get-substitution.js"),wellKnownSymbol=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js"),IS_PURE=__webpack_require__("./node_modules/core-js/internals/is-pure.js"),REPLACE=wellKnownSymbol("replace"),$TypeError=TypeError,indexOf=uncurryThis("".indexOf),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),max=Math.max,stringIndexOf=function(string,searchValue,fromIndex){return fromIndex>string.length?-1:""===searchValue?fromIndex:indexOf(string,searchValue,fromIndex)};$({target:"String",proto:!0},{replaceAll:function replaceAll(searchValue,replaceValue){var IS_REG_EXP,flags,replacer,string,searchString,functionalReplace,searchLength,advanceBy,replacement,O=requireObjectCoercible(this),position=0,endOfLastMatch=0,result="";if(!isNullOrUndefined(searchValue)){if((IS_REG_EXP=isRegExp(searchValue))&&(flags=toString(requireObjectCoercible(getRegExpFlags(searchValue))),!~indexOf(flags,"g")))throw new $TypeError("`.replaceAll` does not allow non-global regexes");if(replacer=getMethod(searchValue,REPLACE))return call(replacer,searchValue,O,replaceValue);if(IS_PURE&&IS_REG_EXP)return replace(toString(O),searchValue,replaceValue)}for(string=toString(O),searchString=toString(searchValue),(functionalReplace=isCallable(replaceValue))||(replaceValue=toString(replaceValue)),searchLength=searchString.length,advanceBy=max(1,searchLength),position=stringIndexOf(string,searchString,0);-1!==position;)replacement=functionalReplace?toString(replaceValue(searchString,position,string)):getSubstitution(searchString,string,position,[],void 0,replaceValue),result+=stringSlice(string,endOfLastMatch,position)+replacement,endOfLastMatch=position+searchLength,position=stringIndexOf(string,searchString,position+advanceBy);return endOfLastMatch<string.length&&(result+=stringSlice(string,endOfLastMatch)),result}})},"./node_modules/core-js/modules/es.string.replace.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var apply=__webpack_require__("./node_modules/core-js/internals/function-apply.js"),call=__webpack_require__("./node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("./node_modules/core-js/internals/function-uncurry-this.js"),fixRegExpWellKnownSymbolLogic=__webpack_require__("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),fails=__webpack_require__("./node_modules/core-js/internals/fails.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),isCallable=__webpack_require__("./node_modules/core-js/internals/is-callable.js"),isNullOrUndefined=__webpack_require__("./node_modules/core-js/internals/is-null-or-undefined.js"),toIntegerOrInfinity=__webpack_require__("./node_modules/core-js/internals/to-integer-or-infinity.js"),toLength=__webpack_require__("./node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("./node_modules/core-js/internals/to-string.js"),requireObjectCoercible=__webpack_require__("./node_modules/core-js/internals/require-object-coercible.js"),advanceStringIndex=__webpack_require__("./node_modules/core-js/internals/advance-string-index.js"),getMethod=__webpack_require__("./node_modules/core-js/internals/get-method.js"),getSubstitution=__webpack_require__("./node_modules/core-js/internals/get-substitution.js"),regExpExec=__webpack_require__("./node_modules/core-js/internals/regexp-exec-abstract.js"),REPLACE=__webpack_require__("./node_modules/core-js/internals/well-known-symbol.js")("replace"),max=Math.max,min=Math.min,concat=uncurryThis([].concat),push=uncurryThis([].push),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0");fixRegExpWellKnownSymbolLogic("replace",(function(_,nativeReplace,maybeCallNative){var UNSAFE_SUBSTITUTE=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=isNullOrUndefined(searchValue)?void 0:getMethod(searchValue,REPLACE);return replacer?call(replacer,searchValue,O,replaceValue):call(nativeReplace,toString(O),searchValue,replaceValue)},function(string,replaceValue){var rx=anObject(this),S=toString(string);if("string"==typeof replaceValue&&-1===stringIndexOf(replaceValue,UNSAFE_SUBSTITUTE)&&-1===stringIndexOf(replaceValue,"$<")){var res=maybeCallNative(nativeReplace,rx,S,replaceValue);if(res.done)return res.value}var functionalReplace=isCallable(replaceValue);functionalReplace||(replaceValue=toString(replaceValue));var fullUnicode,global=rx.global;global&&(fullUnicode=rx.unicode,rx.lastIndex=0);for(var result,results=[];null!==(result=regExpExec(rx,S))&&(push(results,result),global);){""===toString(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){for(var replacement,matched=toString((result=results[i])[0]),position=max(min(toIntegerOrInfinity(result.index),S.length),0),captures=[],j=1;j<result.length;j++)push(captures,void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=concat([matched],captures,position,S);void 0!==namedCaptures&&push(replacerArgs,namedCaptures),replacement=toString(apply(replaceValue,void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=stringSlice(S,nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+stringSlice(S,nextSourcePosition)}]}),!!fails((function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")}))||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)},"./node_modules/core-js/stable/array/at.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var parent=__webpack_require__("./node_modules/core-js/es/array/at.js");module.exports=parent},"./node_modules/core-js/stable/array/flat-map.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var parent=__webpack_require__("./node_modules/core-js/es/array/flat-map.js");module.exports=parent},"./node_modules/core-js/stable/array/flat.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var parent=__webpack_require__("./node_modules/core-js/es/array/flat.js");module.exports=parent},"./node_modules/core-js/stable/string/at.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var parent=__webpack_require__("./node_modules/core-js/es/string/at.js");module.exports=parent},"./node_modules/core-js/stable/string/replace-all.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var parent=__webpack_require__("./node_modules/core-js/es/string/replace-all.js");module.exports=parent},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./node_modules/@mdxeditor/editor/dist/style.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,":root, .light-theme {\n  --blue1: hsl(206, 100%, 99.2%);\n  --blue2: hsl(210, 100%, 98.0%);\n  --blue3: hsl(209, 100%, 96.5%);\n  --blue4: hsl(210, 98.8%, 94.0%);\n  --blue5: hsl(209, 95.0%, 90.1%);\n  --blue6: hsl(209, 81.2%, 84.5%);\n  --blue7: hsl(208, 77.5%, 76.9%);\n  --blue8: hsl(206, 81.9%, 65.3%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(208, 100%, 47.3%);\n  --blue11: hsl(211, 100%, 43.2%);\n  --blue12: hsl(211, 100%, 15.0%);\n}\n.dark-theme {\n  --blue1: hsl(212, 35.0%, 9.2%);\n  --blue2: hsl(216, 50.0%, 11.8%);\n  --blue3: hsl(214, 59.4%, 15.3%);\n  --blue4: hsl(214, 65.8%, 17.9%);\n  --blue5: hsl(213, 71.2%, 20.2%);\n  --blue6: hsl(212, 77.4%, 23.1%);\n  --blue7: hsl(211, 85.1%, 27.4%);\n  --blue8: hsl(211, 89.7%, 34.1%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(209, 100%, 60.6%);\n  --blue11: hsl(210, 100%, 66.1%);\n  --blue12: hsl(206, 98.0%, 95.8%);\n}\n:root, .light-theme {\n  --slate1: hsl(206, 30.0%, 98.8%);\n  --slate2: hsl(210, 16.7%, 97.6%);\n  --slate3: hsl(209, 13.3%, 95.3%);\n  --slate4: hsl(209, 12.2%, 93.2%);\n  --slate5: hsl(208, 11.7%, 91.1%);\n  --slate6: hsl(208, 11.3%, 88.9%);\n  --slate7: hsl(207, 11.1%, 85.9%);\n  --slate8: hsl(205, 10.7%, 78.0%);\n  --slate9: hsl(206, 6.0%, 56.1%);\n  --slate10: hsl(206, 5.8%, 52.3%);\n  --slate11: hsl(206, 6.0%, 43.5%);\n  --slate12: hsl(206, 24.0%, 9.0%);\n}\n.dark-theme {\n  --slate1: hsl(200, 7.0%, 8.8%);\n  --slate2: hsl(195, 7.1%, 11.0%);\n  --slate3: hsl(197, 6.8%, 13.6%);\n  --slate4: hsl(198, 6.6%, 15.8%);\n  --slate5: hsl(199, 6.4%, 17.9%);\n  --slate6: hsl(201, 6.2%, 20.5%);\n  --slate7: hsl(203, 6.0%, 24.3%);\n  --slate8: hsl(207, 5.6%, 31.6%);\n  --slate9: hsl(206, 6.0%, 43.9%);\n  --slate10: hsl(206, 5.2%, 49.5%);\n  --slate11: hsl(206, 6.0%, 63.0%);\n  --slate12: hsl(210, 6.0%, 93.0%);\n}\n:root, .light-theme {\n  --grass1: hsl(116, 50.0%, 98.9%);\n  --grass2: hsl(120, 60.0%, 97.1%);\n  --grass3: hsl(120, 53.6%, 94.8%);\n  --grass4: hsl(121, 47.5%, 91.4%);\n  --grass5: hsl(122, 42.6%, 86.5%);\n  --grass6: hsl(124, 39.0%, 79.7%);\n  --grass7: hsl(126, 37.1%, 70.2%);\n  --grass8: hsl(131, 38.1%, 56.3%);\n  --grass9: hsl(131, 41.0%, 46.5%);\n  --grass10: hsl(132, 43.1%, 42.2%);\n  --grass11: hsl(133, 50.0%, 32.5%);\n  --grass12: hsl(130, 30.0%, 14.9%);\n  --cyan1: hsl(185, 60.0%, 98.7%);\n  --cyan2: hsl(185, 73.3%, 97.1%);\n  --cyan3: hsl(186, 70.2%, 94.4%);\n  --cyan4: hsl(186, 63.8%, 90.6%);\n  --cyan5: hsl(187, 58.3%, 85.4%);\n  --cyan6: hsl(188, 54.6%, 78.4%);\n  --cyan7: hsl(189, 53.7%, 68.7%);\n  --cyan8: hsl(189, 60.3%, 52.5%);\n  --cyan9: hsl(190, 95.0%, 39.0%);\n  --cyan10: hsl(191, 91.2%, 36.8%);\n  --cyan11: hsl(192, 85.0%, 31.0%);\n  --cyan12: hsl(192, 88.0%, 12.5%);\n  --amber1: hsl(39, 70.0%, 99.0%);\n  --amber2: hsl(40, 100%, 96.5%);\n  --amber3: hsl(44, 100%, 91.7%);\n  --amber4: hsl(43, 100%, 86.8%);\n  --amber5: hsl(42, 100%, 81.8%);\n  --amber6: hsl(38, 99.7%, 76.3%);\n  --amber7: hsl(36, 86.1%, 67.1%);\n  --amber8: hsl(35, 85.2%, 55.1%);\n  --amber9: hsl(39, 100%, 57.0%);\n  --amber10: hsl(35, 100%, 55.5%);\n  --amber11: hsl(30, 100%, 34.0%);\n  --amber12: hsl(20, 80.0%, 17.0%);\n  --red1: hsl(359, 100%, 99.4%);\n  --red2: hsl(359, 100%, 98.6%);\n  --red3: hsl(360, 100%, 96.8%);\n  --red4: hsl(360, 97.9%, 94.8%);\n  --red5: hsl(360, 90.2%, 91.9%);\n  --red6: hsl(360, 81.7%, 87.8%);\n  --red7: hsl(359, 74.2%, 81.7%);\n  --red8: hsl(359, 69.5%, 74.3%);\n  --red9: hsl(358, 75.0%, 59.0%);\n  --red10: hsl(358, 69.4%, 55.2%);\n  --red11: hsl(358, 65.0%, 48.7%);\n  --red12: hsl(354, 50.0%, 14.6%);\n}\n/** Code mirror */\n.mdxeditor .cm-editor {\n    --sp-font-mono: var(--font-mono);\n    --sp-font-body: var(--font-body);\n    padding: var(--sp-space-4) 0;\n  }\n.mdxeditor .cm-scroller {\n    padding: 0 !important;\n  }\n.mdxeditor .sp-wrapper {\n    border: 1px solid var(--baseLine);\n    border-radius: var(--radius-medium);\n    overflow: hidden;\n  }\n.mdxeditor .sp-layout {\n    border: none;\n  }\n.mdxeditor .sp-cm pre {\n      white-space: break-spaces;\n      word-break: break-word;\n      overflow-wrap: anywhere;\n      flex-shrink: 1;\n    }\n/** Diff viewer */\n.mdxeditor .cm-mergeView .cm-scroller {\n    font-family: var(--font-mono);\n    line-height: 1.3rem;\n    font-size: var(--text-xs);\n  }\n/** Diff viewer */\n.mdxeditor .cm-sourceView .cm-scroller {\n    font-family: var(--font-mono);\n    line-height: 1.3rem;\n    font-size: var(--text-xs);\n  }\n.mdxeditor .cm-gutters {\n    background: transparent;\n    font-size: var(--text-xxs);\n  }\n._editorRoot_16b3d_36 {\n  --accentBase: var(--blue1);\n  --accentBgSubtle: var(--blue2);\n  --accentBg: var(--blue3);\n  --accentBgHover: var(--blue4);\n  --accentBgActive: var(--blue5);\n  --accentLine: var(--blue6);\n  --accentBorder: var(--blue7);\n  --accentBorderHover: var(--blue8);\n  --accentSolid: var(--blue9);\n  --accentSolidHover: var(--blue10);\n  --accentText: var(--blue11);\n  --accentTextContrast: var(--blue12);\n\n  --baseBase: var(--slate1);\n  --baseBgSubtle: var(--slate2);\n  --baseBg: var(--slate3);\n  --baseBgHover: var(--slate4);\n  --baseBgActive: var(--slate5);\n  --baseLine: var(--slate6);\n  --baseBorder: var(--slate7);\n  --baseBorderHover: var(--slate8);\n  --baseSolid: var(--slate9);\n  --baseSolidHover: var(--slate10);\n  --baseText: var(--slate11);\n  --baseTextContrast: var(--slate12);\n\n  --admonitionTipBg: var(--cyan4);\n  --admonitionTipBorder: var(--cyan8);\n  \n  --admonitionInfoBg: var(--grass4);\n  --admonitionInfoBorder: var(--grass8);\n\n  --admonitionCautionBg: var(--amber4);\n  --admonitionCautionBorder: var(--amber8);\n\n  --admonitionDangerBg: var(--red4);\n  --admonitionDangerBorder: var(--red8);\n\n  --admonitionNoteBg: var(--slate4);\n  --admonitionNoteBorder: var(--slate8);\n\n  --spacing-0:0px;\n  --spacing-px:1px;\n  --spacing-0_5:0.125rem;\n  --spacing-1:0.25rem;\n  --spacing-1_5:0.375rem;\n  --spacing-2:0.5rem;\n  --spacing-2_5:0.625rem;\n  --spacing-3:0.75rem;\n  --spacing-3_5:0.875rem;\n  --spacing-4:1rem;\n  --spacing-5:1.25rem;\n  --spacing-6:1.5rem;\n  --spacing-7:1.75rem;\n  --spacing-8:2rem;\n  --spacing-9:2.25rem;\n  --spacing-10:2.5rem;\n  --spacing-11:2.75rem;\n  --spacing-12:3rem;\n  --spacing-14:3.5rem;\n  --spacing-16:4rem;\n  --spacing-20:5rem;\n  --spacing-24:6rem;\n  --spacing-28:7rem;\n  --spacing-32:8rem;\n  --spacing-36:9rem;\n  --spacing-40:10rem;\n  --spacing-44:11rem;\n  --spacing-48:12rem;\n  --spacing-52:13rem;\n  --spacing-56:14rem;\n  --spacing-60:15rem;\n  --spacing-64:16rem;\n  --spacing-72:18rem;\n  --spacing-80:20rem;\n  --spacing-96:24rem;\n\n  --radius-none:0px;\n  --radius-small: var(--spacing-0_5);\n  --radius-base: var(--spacing-1);\n  --radius-medium: var(--spacing-1_5);\n  --radius-large: var(--spacing-2);\n  --radius-extra-large: var(--spacing-3);\n  --radius-full: 9999px;\n\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n  --font-body: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\n  --text-base: 1rem;\n  --text-sm: 0.875rem;\n  --text-xs: 0.75rem;\n  --text-xxs: 0.6rem;\n\n  font-family: var(--font-body);\n  color: var(--baseText);\n}\n._editorWrapper_16b3d_134 {\n}\n._nestedListItem_16b3d_137 {\n  list-style: none;\n}\n._toolbarRoot_16b3d_141 {\n  /* border: var(--spacing-px) solid var(--baseBorder); */\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacing-1);\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-2) var(--spacing-2);\n  align-items: center;\n  overflow-x: auto;\n  position: sticky;\n  top: 0;\n  background-color: var(--baseBgSubtle);\n  width: inherit;\n}\n._toolbarRoot_16b3d_141 div[role=separator] {\n    margin: var(--spacing-2) var(--spacing-2);\n    border-left: 1px solid var(--baseBorder);\n    border-right: 1px solid var(--baseBase);\n    height: var(--spacing-4);\n  }\n._readOnlyToolbarRoot_16b3d_164 {\n  pointer-events: none;\n  background: var(--baseBase);\n}\n._readOnlyToolbarRoot_16b3d_164 > div {\n    opacity: 0.5;\n  }\n._toolbarModeSwitch_16b3d_172 {\n  opacity: 1 !important;\n  margin-left: auto;\n  align-self: stretch;\n  align-items: stretch;\n  display: flex;\n  border: 1px solid var(--baseBg);\n  border-radius: var(--radius-medium);\n  font-size: var(--text-xs);\n}\n._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182 {\n    padding-inline-end: var(--spacing-4);\n    padding-inline-start: var(--spacing-4);\n  }\n._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:active, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182[data-state=on] {\n      background-color:var(--baseBorder);\n    }\n._toolbarGroupOfGroups_16b3d_192 {\n  display: flex;\n  margin: 0 var(--spacing-1);\n}\n._toolbarToggleSingleGroup_16b3d_197:first-of-type ._toolbarToggleItem_16b3d_182:only-child, ._toolbarToggleSingleGroup_16b3d_197:only-child ._toolbarToggleItem_16b3d_182:first-child, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:first-child {\n  border-top-left-radius: var(--radius-base);\n  border-bottom-left-radius: var(--radius-base);\n}\n._toolbarToggleSingleGroup_16b3d_197:last-of-type ._toolbarToggleItem_16b3d_182:only-child, ._toolbarToggleSingleGroup_16b3d_197:only-child ._toolbarToggleItem_16b3d_182:last-child, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:last-child {\n  border-top-right-radius: var(--radius-base);\n  border-bottom-right-radius: var(--radius-base);\n}\n._toolbarToggleItem_16b3d_182, ._toolbarButton_16b3d_211 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-1);\n}\n._toolbarToggleItem_16b3d_182 svg, ._toolbarButton_16b3d_211 svg {\n    display: block;\n  }\n._toolbarToggleItem_16b3d_182:hover, ._toolbarButton_16b3d_211:hover {\n    background-color: var(--baseBgHover);\n  }\n._toolbarToggleItem_16b3d_182:active svg, ._toolbarButton_16b3d_211:active svg {\n    transform: translate(1px, 1px);\n  }\n._toolbarToggleItem_16b3d_182[data-state=on], ._toolbarButton_16b3d_211[data-state=on], ._toolbarToggleItem_16b3d_182:active, ._toolbarButton_16b3d_211:active {\n    background-color: var(--accentBgActive);\n  }\n._toolbarToggleItem_16b3d_182[data-disabled], ._toolbarButton_16b3d_211[data-disabled] {\n    pointer-events: none;\n    color: var(--baseBorderHover);\n  }\n._toolbarButton_16b3d_211 {\n  border-radius: var(--radius-base);\n}\n._activeToolbarButton_16b3d_241 {\n  color: var(--accentText);\n}\n._toolbarToggleSingleGroup_16b3d_197 {\n  white-space: nowrap;\n}\n._toolbarNodeKindSelectContainer_16b3d_249, ._toolbarButtonDropdownContainer_16b3d_250, ._toolbarCodeBlockLanguageSelectContent_16b3d_251, ._selectContainer_16b3d_252\n{\n  z-index: 3;\n  width: var(--spacing-36);\n  border-bottom-left-radius: var(--radius-base);\n  border-bottom-right-radius: var(--radius-base);\n  background-color: var(--baseBgHover);\n  font-size: var(--text-sm);\n}\n._toolbarButtonDropdownContainer_16b3d_250 {\n  border-top-right-radius: var(--radius-base);\n}\n._toolbarNodeKindSelectTrigger_16b3d_266, ._toolbarButtonSelectTrigger_16b3d_267, ._selectTrigger_16b3d_268 {\n  border: 0;\n  background-color: transparent;\n  display: flex;\n  color: inherit;\n  align-items: center;\n  width: var(--spacing-36);\n  padding: var(--spacing-1);\n  padding-inline-start: var(--spacing-4) ;\n  padding-inline-end: var(--spacing-2);\n  border-radius: var(--radius-medium);\n  white-space: nowrap;\n  flex-wrap: nowrap;\n  font-size: var(--text-sm);\n}\n._toolbarNodeKindSelectTrigger_16b3d_266:hover, ._toolbarButtonSelectTrigger_16b3d_267:hover, ._selectTrigger_16b3d_268:hover {\n    background-color: var(--baseBgHover);\n  }\n._toolbarNodeKindSelectTrigger_16b3d_266[data-state=open], ._toolbarButtonSelectTrigger_16b3d_267[data-state=open], ._selectTrigger_16b3d_268[data-state=open] {\n    border-bottom-right-radius: var(--radius-none);\n    border-bottom-left-radius: var(--radius-none);\n    background-color: var(--baseBgHover);\n  }\n._selectTrigger_16b3d_268[data-placeholder] > span:first-child {\n  color: var(--baseBorderHover);\n}\n/** used in the sandpack */\n._toolbarButtonSelectTrigger_16b3d_267 {\n  width: auto;\n  padding-inline-start: var(--spacing-2) ;\n  padding-inline-end: var(--spacing-1);\n}\n._toolbarCodeBlockLanguageSelectTrigger_16b3d_304, ._toolbarCodeBlockLanguageSelectContent_16b3d_251 \n{\n  width: var(--spacing-48);\n}\n._toolbarNodeKindSelectItem_16b3d_310, ._selectItem_16b3d_311\n{\n  cursor: default;\n  display: flex;\n  padding: var(--spacing-2) var(--spacing-4);\n}\n._toolbarNodeKindSelectItem_16b3d_310[data-highlighted], ._selectItem_16b3d_311[data-highlighted] {\n    background-color: var(--baseBgSubtle);\n  }\n._toolbarNodeKindSelectItem_16b3d_310[data-state=checked], ._selectItem_16b3d_311[data-state=checked] {\n    background-color: var(--accentBgActive);\n  }\n._toolbarNodeKindSelectItem_16b3d_310[data-highlighted], ._selectItem_16b3d_311[data-highlighted] {\n    outline: none;\n  }\n._toolbarNodeKindSelectItem_16b3d_310:last-child, ._selectItem_16b3d_311:last-child {\n    border-bottom-left-radius: var(--radius-base);\n    border-bottom-right-radius: var(--radius-base);\n  }\n._toolbarNodeKindSelectDropdownArrow_16b3d_335, ._selectDropdownArrow_16b3d_336 {\n  margin-left: auto;\n}\n._contentEditable_16b3d_340 {\n  box-sizing: border-box;\n  width: 100%;\n  color: var(--baseTextContrast);\n  padding: var(--spacing-3);\n}\n._contentEditable_16b3d_340:focus {\n    outline: none;\n  }\n._sandpackWrapper_16b3d_350 {\n  margin-bottom:var(--spacing-5);\n}\n._frontmatterWrapper_16b3d_354 {\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-3);\n  background-color: var(--baseBgSubtle);\n}\n._frontmatterWrapper_16b3d_354[data-expanded=true] {\n    margin-bottom: var(--spacing-10);\n  }\n._frontmatterToggleButton_16b3d_364 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  display: flex;\n  align-items: center;\n  gap:var(--spacing-1);\n  font-size: var(--text-sm);\n}\n._propertyPanelTitle_16b3d_372 {\n  font-size: var(--text-xs);\n  font-weight: 400;\n  margin: 0;\n  padding-top: var(--spacing-2);\n  padding-left: var(--spacing-2);\n}\n._propertyEditorTable_16b3d_380 {\n  table-layout: fixed;\n  border-spacing: var(--spacing-2);\n}\n._propertyEditorTable_16b3d_380 th {\n    text-align: left;\n    font-size: var(--text-sm);\n    padding: var(--spacing-2) var(--spacing-3);\n  }\n._propertyEditorTable_16b3d_380 col:nth-child(1) {\n    width: 30%;\n  }\n._propertyEditorTable_16b3d_380 col:nth-child(2) {\n    width: 70%;\n  }\n._propertyEditorTable_16b3d_380 td:last-child ._iconButton_16b3d_397 {\n    margin-left: var(--spacing-4);\n    margin-right: var(--spacing-4);\n  }\n._propertyEditorTable_16b3d_380 ._readOnlyColumnCell_16b3d_402 {\n    padding-left: 0;\n  }\n._propertyEditorLabelCell_16b3d_407 {\n  font-weight: 400;\n}\n._readOnlyColumnCell_16b3d_402 {\n  padding-left: 0;\n}\n._buttonsFooter_16b3d_415 {\n  display: flex;\n  justify-content: flex-end;\n  gap: var(--spacing-2);\n}\n._propertyEditorInput_16b3d_421 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 100%;\n  padding: var(--spacing-2) var(--spacing-3);\n  border-radius: var(--radius-base);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBase);\n  font-size: var(--text-sm);\n}\n._iconButton_16b3d_397 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  color:var(--baseText);\n}\n._iconButton_16b3d_397:hover {\n    color: var(--accentText);\n  }\n._iconButton_16b3d_397:disabled, ._iconButton_16b3d_397:disabled:hover {\n    color:var(--baseLine);\n  }\n._primaryButton_16b3d_442, ._secondaryButton_16b3d_442 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2) var(--spacing-3);\n  border: 1px solid var(--accentBorder);\n  background-color: var(--accentSolidHover);\n  color:var(--baseBase);\n  font-size: var(--text-sm);\n  border-radius: var(--radius-medium);\n}\n._primaryButton_16b3d_442:disabled, ._secondaryButton_16b3d_442:disabled {\n    background: var(--accentLine);\n    border-color: var(--accentBg);\n  }\n._smallButton_16b3d_456 {\n  font-size: var(--text-xs);\n  padding: var(--spacing-1) var(--spacing-2);\n  border-radius: var(--radius-base);\n}\n._secondaryButton_16b3d_442 {\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseSolidHover);\n  color:var(--baseBase);\n}\n._dialogForm_16b3d_468 {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacing-2);\n}\n._linkDialogEditForm_16b3d_474 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  gap: var(--spacing-2);\n  padding: 0;\n}\n._linkDialogInputContainer_16b3d_482 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n._linkDialogInputWrapper_16b3d_488 {\n  display: flex;\n  align-items: center;\n  background-color: var(--baseBase);\n\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n}\n._linkDialogInputWrapper_16b3d_488[data-visible-dropdown=true] {\n    border-bottom-left-radius: var(--radius-none) ;\n    border-bottom-right-radius: var(--radius-none) ;\n    border-bottom-width: 0;\n  }\n._linkDialogInputWrapper_16b3d_488 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding-right: var(--spacing-2);\n  }\n._linkDialogInput_16b3d_482, ._dialogInput_16b3d_508 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 20rem;\n  padding: var(--spacing-2) var(--spacing-3);\n  font-size: var(--text-sm);\n}\n._linkDialogInput_16b3d_482::-moz-placeholder, ._dialogInput_16b3d_508::-moz-placeholder {\n    color: var(--baseBorder);\n  }\n._linkDialogInput_16b3d_482::placeholder, ._dialogInput_16b3d_508::placeholder {\n    color: var(--baseBorder);\n  }\n._linkDialogAnchor_16b3d_518 {\n  position: fixed;\n  background-color: highlight;\n  z-index: -1;\n}\n._linkDialogAnchor_16b3d_518[data-visible=true] {\n    visibility: visible;\n  }\n._linkDialogAnchor_16b3d_518[data-visible=false] {\n    visibility: hidden;\n  }\n._linkDialogPopoverContent_16b3d_532, ._tableColumnEditorPopoverContent_16b3d_532, ._dialogContent_16b3d_532 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-2) var(--spacing-2);\n  font-size: var(--text-sm);\n}\n._largeDialogContent_16b3d_544 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-4);\n  font-size: var(--text-sm);\n}\n._dialogTitle_16b3d_554 {\n  font-size: var(--text-base);\n  font-weight: 600;\n  padding-left: var(--spacing-2);\n}\n._dialogCloseButton_16b3d_560 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n}\n._popoverContent_16b3d_567 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-2) var(--spacing-2);\n  font-size: var(--text-sm);\n  z-index: 1;\n}\n._popoverArrow_16b3d_579 {\n  fill: var(--baseBgSubtle);\n}\n._linkDialogPreviewAnchor_16b3d_585 {\n  margin-right: var(--spacing-3);\n  display: flex;\n  align-items: flex-start;\n  color: var(--accentText);\n  text-decoration: none;\n  border: 1px solid transparent;\n}\n._linkDialogPreviewAnchor_16b3d_585 svg {\n    width: var(--spacing-5);\n    height: var(--spacing-5);\n    margin-left: var(--spacing-2);\n  }\n._linkDialogPreviewAnchor_16b3d_585 span {\n    max-width: 14rem;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n._tooltipContent_16b3d_607 {\n  z-index: 2;\n  position: relative;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-1) var(--spacing-2);\n  font-size: var(--text-xs);\n  background-color: var(--baseText);\n  color: var(--baseBase);\n}\n._tooltipContent_16b3d_607 svg {\n    fill: var(--baseText);\n  }\n._actionButton_16b3d_621 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  padding: var(--spacing-1) var(--spacing-1);\n  border-radius: var(--radius-medium);\n}\n._actionButton_16b3d_621 svg {\n    display: block;\n  }\n._actionButton_16b3d_621:hover {\n    background-color: var(--baseBgHover);\n  }\n._actionButton_16b3d_621:active svg {\n    transform: translate(1px, 1px);\n  }\n._actionButton_16b3d_621[data-state=on], ._actionButton_16b3d_621:active {\n    background-color: var(--accentBgActive);\n  }\n._primaryActionButton_16b3d_627 {\n  background-color: var(--accentSolid);\n  color:var(--baseBase);\n}\n._primaryActionButton_16b3d_627:hover {\n    background-color: var(--accentSolidHover);\n    color:var(--baseBase);\n  }\n._tableEditor_16b3d_636 {\n  table-layout: fixed;\n  width: 100%;\n  height: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n._tableEditor_16b3d_636 thead > tr > th {\n    text-align: right;\n  }\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) {\n    border: 1px solid var(--baseBorder);\n    padding: var(--spacing-1) var(--spacing-2);\n    white-space: normal;\n  }\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) > div {\n      outline: none;\n    }\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) > div > p {\n        margin: 0;\n      }\n._tableEditor_16b3d_636 > tbody > tr > td[data-active=true]:not(._toolCell_16b3d_647) {\n      outline: solid 2px var(--accentSolid)\n    }\n._tableEditor_16b3d_636 ._tableColumnEditorTrigger_16b3d_664, ._tableEditor_16b3d_636 ._tableRowEditorTrigger_16b3d_664, ._tableEditor_16b3d_636 ._addRowButton_16b3d_664, ._tableEditor_16b3d_636 ._addColumnButton_16b3d_664, ._tableEditor_16b3d_636 ._iconButton_16b3d_397 {\n    opacity: .2;\n  }\n._tableEditor_16b3d_636:hover ._tableColumnEditorTrigger_16b3d_664, ._tableEditor_16b3d_636:hover ._tableRowEditorTrigger_16b3d_664, ._tableEditor_16b3d_636:hover ._addRowButton_16b3d_664, ._tableEditor_16b3d_636:hover ._addColumnButton_16b3d_664, ._tableEditor_16b3d_636:hover ._iconButton_16b3d_397 {\n      opacity: .5;\n    }\n._tableEditor_16b3d_636:hover ._tableColumnEditorTrigger_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._tableRowEditorTrigger_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._addRowButton_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._addColumnButton_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._iconButton_16b3d_397:hover {\n        opacity: 1;\n      }\n._toolCell_16b3d_647 {\n  text-align: right;\n}\n._toolCell_16b3d_647 button {\n    margin: auto;\n    display: block;\n  }\n._tableColumnEditorTrigger_16b3d_664 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  padding: var(--spacing-1);\n  border-radius: var(--radius-full);\n  opacity: 0.2;\n}\n._tableColumnEditorTrigger_16b3d_664 svg {\n    display: block;\n  }\n._tableColumnEditorTrigger_16b3d_664:hover {\n    background-color: var(--baseBgHover);\n  }\n._tableColumnEditorTrigger_16b3d_664:active svg {\n    transform: translate(1px, 1px);\n  }\n._tableColumnEditorTrigger_16b3d_664[data-state=on], ._tableColumnEditorTrigger_16b3d_664:active {\n    background-color: var(--accentBgActive);\n  }\n._tableColumnEditorTrigger_16b3d_664[data-active=true] {\n    opacity: 1;\n  }\n._tableColumnEditorToolbar_16b3d_698 {\n  display: flex;\n}\n._tableColumnEditorToolbar_16b3d_698 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding: var(--spacing-2);\n  }\n._tableColumnEditorToolbar_16b3d_698 > button svg {\n    display: block;\n  }\n._tableColumnEditorToolbar_16b3d_698 > button:hover {\n    background-color: var(--baseBgHover);\n  }\n._tableColumnEditorToolbar_16b3d_698 > button:active svg {\n    transform: translate(1px, 1px);\n  }\n._tableColumnEditorToolbar_16b3d_698 > button[data-state=on], ._tableColumnEditorToolbar_16b3d_698 > button:active {\n    background-color: var(--accentBgActive);\n  }\n._tableColumnEditorToolbar_16b3d_698 [role=separator] {\n    margin-left: var(--spacing-1);\n    margin-right: var(--spacing-1);\n  }\n._toggleGroupRoot_16b3d_710 {\n  display: inline-flex;\n}\n._toggleGroupRoot_16b3d_710 button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding: var(--spacing-2);\n  }\n._toggleGroupRoot_16b3d_710 button svg {\n    display: block;\n  }\n._toggleGroupRoot_16b3d_710 button:hover {\n    background-color: var(--baseBgHover);\n  }\n._toggleGroupRoot_16b3d_710 button:active svg {\n    transform: translate(1px, 1px);\n  }\n._toggleGroupRoot_16b3d_710 button[data-state=on], ._toggleGroupRoot_16b3d_710 button:active {\n    background-color: var(--accentBgActive);\n  }\n._toggleGroupRoot_16b3d_710 button:first-child {\n      border-top-left-radius: var(--radius-base);\n      border-bottom-left-radius: var(--radius-base);\n    }\n._toggleGroupRoot_16b3d_710 button:last-child {\n      border-top-right-radius: var(--radius-base);\n      border-bottom-right-radius: var(--radius-base);\n    }\n._tableToolsColumn_16b3d_727 {\n  width: 3rem;\n}\n._tableToolsColumn_16b3d_727 button {\n    margin: auto;\n    display: block;\n  }\n._leftAlignedCell_16b3d_735 {\n  text-align: left;\n}\n._rightAlignedCell_16b3d_739 {\n  text-align: right;\n}\n._centeredCell_16b3d_743 {\n  text-align: center;\n}\n._addColumnButton_16b3d_664, ._addRowButton_16b3d_664 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  background-color: var(--baseBase);\n\n  display: flex;\n  align-items: center;\n  border-radius: var(--radius-medium);\n}\n._addColumnButton_16b3d_664 svg, ._addRowButton_16b3d_664 svg {\n    display: block;\n  }\n._addColumnButton_16b3d_664:hover, ._addRowButton_16b3d_664:hover {\n    background-color: var(--baseBgHover);\n  }\n._addColumnButton_16b3d_664:active svg, ._addRowButton_16b3d_664:active svg {\n    transform: translate(1px, 1px);\n  }\n._addColumnButton_16b3d_664[data-state=on], ._addRowButton_16b3d_664[data-state=on], ._addColumnButton_16b3d_664:active, ._addRowButton_16b3d_664:active {\n    background-color: var(--accentBgActive);\n  }\n._addColumnButton_16b3d_664 svg, ._addRowButton_16b3d_664 svg {\n    margin: auto;\n  }\n._addRowButton_16b3d_664 {\n  width: 100%;\n  margin-top: var(--spacing-2);\n  box-sizing: border-box;\n}\n._addColumnButton_16b3d_664 {\n  margin-left: var(--spacing-2);\n  height: 100%;\n}\n/** Dialog */\n._dialogOverlay_16b3d_771 {\n  position: fixed;\n  inset: 0;\n  animation: _overlayShow_16b3d_1 150ms cubic-bezier(0.16, 1, 0.3, 1);\n  background-color: var(--baseBase);\n  z-index: 51;\n  opacity: 0.5;\n}\n._dialogContent_16b3d_532, ._largeDialogContent_16b3d_544 {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  animation: _contentShow_16b3d_1 150ms cubic-bezier(0.16, 1, 0.3, 1);\n  z-index: 52;\n}\n._dialogContent_16b3d_532:focus, ._largeDialogContent_16b3d_544:focus {\n  outline: none;\n}\n@keyframes _overlayShow_16b3d_1 {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: .5;\n  }\n}\n@keyframes _contentShow_16b3d_1 {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -48%) scale(0.96);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n._focusedImage_16b3d_814 {\n  outline: highlight solid 2px;\n}\n._imageWrapper_16b3d_818 {\n  display: inline-block;\n  position: relative;\n}\n._imageWrapper_16b3d_818[draggable=true] {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n._editImageButton_16b3d_830 {\n  position: absolute;\n  right: var(--spacing-2);\n  top: var(--spacing-2);\n  background: var(--baseBase);\n  border-radius: var(--radius-full);\n}\n._editImageButton_16b3d_830 svg {\n    display: block;\n  }\n._inlineEditor_16b3d_842 {\n  display: inline-flex;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-1);\n  gap: var(--spacing-2);\n  align-items: center;\n  background: var(--baseBg);\n}\n._blockEditor_16b3d_851 {\n  display: flex;\n  justify-content: stretch;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-2);\n  gap: var(--spacing-2);\n  align-items: center;\n  background: var(--baseBg);\n}\n._blockEditor_16b3d_851 ._nestedEditor_16b3d_860 {\n    flex-grow: 1;\n  }\n._nestedEditor_16b3d_860 {\n  background: white;\n  padding: var(--spacing-1) var(--spacing-2);\n  border-radius: var(--radius-medium);\n}\n._nestedEditor_16b3d_860 > p {\n    margin: 0;\n  }\n._nestedEditor_16b3d_860:focus {\n    outline: none;\n  }\n._genericComponentName_16b3d_877 {\n  font-size: var(--text-sm);\n  color: var(--baseText);\n  padding-right: var(--spacing-2);\n}\n._diffSourceToggle_16b3d_883 {\n  border: 1px solid var(--baseBorder);\n  border-radius: var(--radius-medium);\n  display: flex;\n}\n._diffSourceToggle_16b3d_883 ._toolbarToggleItem_16b3d_182 {\n    padding: 0;\n  }\n._diffSourceToggle_16b3d_883 ._toolbarToggleItem_16b3d_182 > span {\n      display: block;\n      padding: var(--spacing-2) var(--spacing-3);\n    }\n._selectWithLabel_16b3d_897 {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  margin-left: var(--spacing-2);\n}\n._selectWithLabel_16b3d_897 > label {\n    font-size: var(--text-sm);\n  }\n._selectWithLabel_16b3d_897 ._selectTrigger_16b3d_268 {\n    border: 1px solid var(--baseBorder);\n  }\n._toolbarTitleMode_16b3d_911 {\n  font-size: var(--text-sm);\n  margin-left: var(--spacing-2);\n}\n._imageControlWrapperResizing_16b3d_917 {\n  touch-action: none;\n}\n._imageResizer_16b3d_921 {\n  display: block;\n  width: 7px;\n  height: 7px;\n  position: absolute;\n  background-color: var(--accentText);\n  border: 1px solid var(--baseBg);\n}\n._imageResizer_16b3d_921._imageResizerN_16b3d_930 {\n  top: -6px;\n  left: 48%;\n  cursor: n-resize;\n}\n._imageResizer_16b3d_921._imageResizerNe_16b3d_936 {\n  top: -6px;\n  right: -6px;\n  cursor: ne-resize;\n}\n._imageResizer_16b3d_921._imageResizerE_16b3d_942 {\n  bottom: 48%;\n  right: -6px;\n  cursor: e-resize;\n}\n._imageResizer_16b3d_921._imageResizerSe_16b3d_948 {\n  bottom: -2px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n._imageResizer_16b3d_921._imageResizerS_16b3d_948 {\n  bottom: -2px;\n  left: 48%;\n  cursor: s-resize;\n}\n._imageResizer_16b3d_921._imageResizerSw_16b3d_960 {\n  bottom: -2px;\n  left: -6px;\n  cursor: sw-resize;\n}\n._imageResizer_16b3d_921._imageResizerW_16b3d_966 {\n  bottom: 48%;\n  left: -6px;\n  cursor: w-resize;\n}\n._imageResizer_16b3d_921._imageResizerNw_16b3d_972 {\n  top: -6px;\n  left: -6px;\n  cursor: nw-resize;\n}\n._placeholder_16b3d_978 {\n    color: var(--baseSolid);\n    overflow: hidden;\n    position: absolute;\n    top: 0;\n    padding: var(--spacing-3);\n    text-overflow: ellipsis;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    white-space: nowrap;\n    display: inline-block;\n    pointer-events: none;\n}\n._rootContentEditableWrapper_16b3d_991 {\n  position: relative;\n}\n._downshiftContainer_16b3d_997 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n._downshiftInputWrapper_16b3d_1003 {\n  display: flex;\n  align-items: center;\n  background-color: var(--baseBase);\n\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n}\n._downshiftInputWrapper_16b3d_1003[data-visible-dropdown=true] {\n    border-bottom-left-radius: var(--radius-none) ;\n    border-bottom-right-radius: var(--radius-none) ;\n    border-bottom-width: 0;\n  }\n._downshiftInputWrapper_16b3d_1003 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding-right: var(--spacing-2);\n  }\n._downshiftInput_16b3d_1003 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 20rem;\n  padding: var(--spacing-2) var(--spacing-3);\n  font-size: var(--text-sm);\n}\n._downshiftInput_16b3d_1003::-moz-placeholder {\n    color: var(--baseBorder);\n  }\n._downshiftInput_16b3d_1003::placeholder {\n    color: var(--baseBorder);\n  }\n._downshiftAutocompleteContainer_16b3d_1033 {\n  position: relative;\n}\n._downshiftAutocompleteContainer_16b3d_1033 ul {\n    all: unset;\n    box-sizing: border-box;\n    position: absolute;\n    font-size: var(--text-sm);\n    width: 100%;\n    display: none;\n    border-bottom-left-radius: var(--radius-medium) ;\n    border-bottom-right-radius: var(--radius-medium) ;\n    max-height: var(--spacing-48);\n    overflow-x: hidden;\n    overflow-y: auto;\n    border: 1px solid var(--baseBorder);\n    border-top-width: 0;\n    background-color: var(--baseBase);\n  }\n._downshiftAutocompleteContainer_16b3d_1033 ul[data-visible=true] {\n      display: block;\n    }\n._downshiftAutocompleteContainer_16b3d_1033 ul li {\n      padding: var(--spacing-2) var(--spacing-3);\n      white-space: nowrap;\n      margin-bottom: var(--spacing-1);\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n    }\n._downshiftAutocompleteContainer_16b3d_1033 ul li[data-selected=true] {\n        background-color: var(--baseBgSubtle);\n      }\n._downshiftAutocompleteContainer_16b3d_1033 ul li[data-highlighted=true] {\n        background-color: var(--baseBgHover);\n      }\n._downshiftAutocompleteContainer_16b3d_1033 ul li:last-of-type {\n        border-bottom-left-radius: var(--radius-medium) ;\n        border-bottom-right-radius: var(--radius-medium) ;\n      }\n._textInput_16b3d_1078 {\n  all: unset;\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n  background-color: var(--baseBase);\n  padding: var(--spacing-2) var(--spacing-3);\n}\nform._multiFieldForm_16b3d_1086 {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacing-4);\n  gap: var(--spacing-4);\n}\nform._multiFieldForm_16b3d_1086 ._formField_16b3d_1092 {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-2);\n  }\n:root, ._light-theme_13nbk_1 {\n  --blue1: hsl(206, 100%, 99.2%);\n  --blue2: hsl(210, 100%, 98.0%);\n  --blue3: hsl(209, 100%, 96.5%);\n  --blue4: hsl(210, 98.8%, 94.0%);\n  --blue5: hsl(209, 95.0%, 90.1%);\n  --blue6: hsl(209, 81.2%, 84.5%);\n  --blue7: hsl(208, 77.5%, 76.9%);\n  --blue8: hsl(206, 81.9%, 65.3%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(208, 100%, 47.3%);\n  --blue11: hsl(211, 100%, 43.2%);\n  --blue12: hsl(211, 100%, 15.0%);\n}\n._dark-theme_13nbk_1 {\n  --blue1: hsl(212, 35.0%, 9.2%);\n  --blue2: hsl(216, 50.0%, 11.8%);\n  --blue3: hsl(214, 59.4%, 15.3%);\n  --blue4: hsl(214, 65.8%, 17.9%);\n  --blue5: hsl(213, 71.2%, 20.2%);\n  --blue6: hsl(212, 77.4%, 23.1%);\n  --blue7: hsl(211, 85.1%, 27.4%);\n  --blue8: hsl(211, 89.7%, 34.1%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(209, 100%, 60.6%);\n  --blue11: hsl(210, 100%, 66.1%);\n  --blue12: hsl(206, 98.0%, 95.8%);\n}\n:root, ._light-theme_13nbk_1 {\n  --slate1: hsl(206, 30.0%, 98.8%);\n  --slate2: hsl(210, 16.7%, 97.6%);\n  --slate3: hsl(209, 13.3%, 95.3%);\n  --slate4: hsl(209, 12.2%, 93.2%);\n  --slate5: hsl(208, 11.7%, 91.1%);\n  --slate6: hsl(208, 11.3%, 88.9%);\n  --slate7: hsl(207, 11.1%, 85.9%);\n  --slate8: hsl(205, 10.7%, 78.0%);\n  --slate9: hsl(206, 6.0%, 56.1%);\n  --slate10: hsl(206, 5.8%, 52.3%);\n  --slate11: hsl(206, 6.0%, 43.5%);\n  --slate12: hsl(206, 24.0%, 9.0%);\n}\n._dark-theme_13nbk_1 {\n  --slate1: hsl(200, 7.0%, 8.8%);\n  --slate2: hsl(195, 7.1%, 11.0%);\n  --slate3: hsl(197, 6.8%, 13.6%);\n  --slate4: hsl(198, 6.6%, 15.8%);\n  --slate5: hsl(199, 6.4%, 17.9%);\n  --slate6: hsl(201, 6.2%, 20.5%);\n  --slate7: hsl(203, 6.0%, 24.3%);\n  --slate8: hsl(207, 5.6%, 31.6%);\n  --slate9: hsl(206, 6.0%, 43.9%);\n  --slate10: hsl(206, 5.2%, 49.5%);\n  --slate11: hsl(206, 6.0%, 63.0%);\n  --slate12: hsl(210, 6.0%, 93.0%);\n}\n:root, ._light-theme_13nbk_1 {\n  --grass1: hsl(116, 50.0%, 98.9%);\n  --grass2: hsl(120, 60.0%, 97.1%);\n  --grass3: hsl(120, 53.6%, 94.8%);\n  --grass4: hsl(121, 47.5%, 91.4%);\n  --grass5: hsl(122, 42.6%, 86.5%);\n  --grass6: hsl(124, 39.0%, 79.7%);\n  --grass7: hsl(126, 37.1%, 70.2%);\n  --grass8: hsl(131, 38.1%, 56.3%);\n  --grass9: hsl(131, 41.0%, 46.5%);\n  --grass10: hsl(132, 43.1%, 42.2%);\n  --grass11: hsl(133, 50.0%, 32.5%);\n  --grass12: hsl(130, 30.0%, 14.9%);\n  --cyan1: hsl(185, 60.0%, 98.7%);\n  --cyan2: hsl(185, 73.3%, 97.1%);\n  --cyan3: hsl(186, 70.2%, 94.4%);\n  --cyan4: hsl(186, 63.8%, 90.6%);\n  --cyan5: hsl(187, 58.3%, 85.4%);\n  --cyan6: hsl(188, 54.6%, 78.4%);\n  --cyan7: hsl(189, 53.7%, 68.7%);\n  --cyan8: hsl(189, 60.3%, 52.5%);\n  --cyan9: hsl(190, 95.0%, 39.0%);\n  --cyan10: hsl(191, 91.2%, 36.8%);\n  --cyan11: hsl(192, 85.0%, 31.0%);\n  --cyan12: hsl(192, 88.0%, 12.5%);\n  --amber1: hsl(39, 70.0%, 99.0%);\n  --amber2: hsl(40, 100%, 96.5%);\n  --amber3: hsl(44, 100%, 91.7%);\n  --amber4: hsl(43, 100%, 86.8%);\n  --amber5: hsl(42, 100%, 81.8%);\n  --amber6: hsl(38, 99.7%, 76.3%);\n  --amber7: hsl(36, 86.1%, 67.1%);\n  --amber8: hsl(35, 85.2%, 55.1%);\n  --amber9: hsl(39, 100%, 57.0%);\n  --amber10: hsl(35, 100%, 55.5%);\n  --amber11: hsl(30, 100%, 34.0%);\n  --amber12: hsl(20, 80.0%, 17.0%);\n  --red1: hsl(359, 100%, 99.4%);\n  --red2: hsl(359, 100%, 98.6%);\n  --red3: hsl(360, 100%, 96.8%);\n  --red4: hsl(360, 97.9%, 94.8%);\n  --red5: hsl(360, 90.2%, 91.9%);\n  --red6: hsl(360, 81.7%, 87.8%);\n  --red7: hsl(359, 74.2%, 81.7%);\n  --red8: hsl(359, 69.5%, 74.3%);\n  --red9: hsl(358, 75.0%, 59.0%);\n  --red10: hsl(358, 69.4%, 55.2%);\n  --red11: hsl(358, 65.0%, 48.7%);\n  --red12: hsl(354, 50.0%, 14.6%);\n}\n._bold_13nbk_10 {\n  font-weight: bold;\n}\n._italic_13nbk_14 {\n  font-style: italic;\n}\n._underline_13nbk_18 {\n  text-decoration: underline;\n}\n._bold_13nbk_10 {\n    font-weight: 700\n}\n._italic_13nbk_14 {\n    font-style: italic\n}\n._underline_13nbk_18 {\n    text-decoration: underline\n}\n._strikethrough_13nbk_34 {\n    text-decoration: line-through\n}\n._underlineStrikethrough_13nbk_38 {\n    text-decoration: underline line-through\n}\n._subscript_13nbk_42 {\n    font-size: .8em;\n    vertical-align: sub!important\n}\n._superscript_13nbk_47 {\n    font-size: .8em;\n    vertical-align: super\n}\n._code_13nbk_52 {\n    background-color: var(--baseBg);\n    padding: 1px .25rem;\n    font-family: var(--font-mono);\n    font-size: 94%\n}\n._nestedListItem_13nbk_59 {\n  list-style:none;\n}\n._admonitionDanger_13nbk_63, ._admonitionInfo_13nbk_63, ._admonitionNote_13nbk_63, ._admonitionTip_13nbk_63, ._admonitionCaution_13nbk_63 {\n  padding: var(--spacing-2);\n  margin-top: var(--spacing-2);\n  margin-bottom: var(--spacing-2);\n  border-left: 3px solid var(--admonitionBorder);\n  background-color: var(--admonitionBg);\n}\n._admonitionInfo_13nbk_63 {\n  --admonitionBorder: var(--admonitionInfoBorder);\n  --admonitionBg: var(--admonitionInfoBg);\n}\n._admonitionTip_13nbk_63 {\n  --admonitionBorder: var(--admonitionTipBorder);\n  --admonitionBg: var(--admonitionTipBg);\n}\n._admonitionCaution_13nbk_63 {\n  --admonitionBorder: var(--admonitionCautionBorder);\n  --admonitionBg: var(--admonitionCautionBg);\n}\n._admonitionDanger_13nbk_63 {\n  --admonitionBorder: var(--admonitionDangerBorder);\n  --admonitionBg: var(--admonitionDangerBg);\n}\n._admonitionNote_13nbk_63 {\n  --admonitionBorder: var(--admonitionNoteBorder);\n  --admonitionBg: var(--admonitionNoteBg);\n}\n","",{version:3,sources:["webpack://./node_modules/@mdxeditor/editor/dist/style.css"],names:[],mappings:"AAAA;EACE,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;AACjC;AACA;EACE,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;AAClC;AACA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;AAClC;AACA;EACE,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;AAClC;AACA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,iCAAiC;EACjC,iCAAiC;EACjC,iCAAiC;EAGjC,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAGhC,+BAA+B;EAC/B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAGhC,6BAA6B;EAC7B,6BAA6B;EAC7B,6BAA6B;EAC7B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;AAzCjC;AA2CA,iBAAiB;AACjB;IACI,gCAAgC;IAChC,gCAAgC;IAChC,4BAA4B;EAC9B;AACF;IACI,qBAAqB;EACvB;AACF;IACI,iCAAiC;IACjC,mCAAmC;IACnC,gBAAgB;EAClB;AACF;IACI,YAAY;EACd;AACF;MACM,yBAAyB;MACzB,sBAAsB;MACtB,uBAAuB;MACvB,cAAc;IAChB;AACJ,iBAAiB;AACjB;IACI,6BAA6B;IAC7B,mBAAmB;IACnB,yBAAyB;EAC3B;AACF,iBAAiB;AACjB;IACI,6BAA6B;IAC7B,mBAAmB;IACnB,yBAAyB;EAC3B;AACF;IACI,uBAAuB;IACvB,0BAA0B;EAC5B;AACF;EACE,0BAA0B;EAC1B,8BAA8B;EAC9B,wBAAwB;EACxB,6BAA6B;EAC7B,8BAA8B;EAC9B,0BAA0B;EAC1B,4BAA4B;EAC5B,iCAAiC;EACjC,2BAA2B;EAC3B,iCAAiC;EACjC,2BAA2B;EAC3B,mCAAmC;;EAEnC,yBAAyB;EACzB,6BAA6B;EAC7B,uBAAuB;EACvB,4BAA4B;EAC5B,6BAA6B;EAC7B,yBAAyB;EACzB,2BAA2B;EAC3B,gCAAgC;EAChC,0BAA0B;EAC1B,gCAAgC;EAChC,0BAA0B;EAC1B,kCAAkC;;EAElC,+BAA+B;EAC/B,mCAAmC;;EAEnC,iCAAiC;EACjC,qCAAqC;;EAErC,oCAAoC;EACpC,wCAAwC;;EAExC,iCAAiC;EACjC,qCAAqC;;EAErC,iCAAiC;EACjC,qCAAqC;;EAErC,eAAe;EACf,gBAAgB;EAChB,sBAAsB;EACtB,mBAAmB;EACnB,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,mBAAmB;EACnB,sBAAsB;EACtB,gBAAgB;EAChB,mBAAmB;EACnB,kBAAkB;EAClB,mBAAmB;EACnB,gBAAgB;EAChB,mBAAmB;EACnB,mBAAmB;EACnB,oBAAoB;EACpB,iBAAiB;EACjB,mBAAmB;EACnB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;;EAElB,iBAAiB;EACjB,kCAAkC;EAClC,+BAA+B;EAC/B,mCAAmC;EACnC,gCAAgC;EAChC,sCAAsC;EACtC,qBAAqB;;EAErB,+GAA+G;EAC/G,mJAAmJ;;EAEnJ,iBAAiB;EACjB,mBAAmB;EACnB,kBAAkB;EAClB,kBAAkB;;EAElB,6BAA6B;EAC7B,sBAAsB;AACxB;AAEA;AACA;AAEA;EACE,gBAAgB;AAClB;AAEA;EACE,uDAAuD;EACvD,UAAU;EACV,aAAa;EACb,mBAAmB;EACnB,qBAAqB;EACrB,mCAAmC;EACnC,0CAA0C;EAC1C,mBAAmB;EACnB,gBAAgB;EAChB,gBAAgB;EAChB,MAAM;EACN,qCAAqC;EACrC,cAAc;AAChB;AAEA;IACI,yCAAyC;IACzC,wCAAwC;IACxC,uCAAuC;IACvC,wBAAwB;EAC1B;AAEF;EACE,oBAAoB;EACpB,2BAA2B;AAC7B;AAEA;IACI,YAAY;EACd;AAEF;EACE,qBAAqB;EACrB,iBAAiB;EACjB,mBAAmB;EACnB,oBAAoB;EACpB,aAAa;EACb,+BAA+B;EAC/B,mCAAmC;EACnC,yBAAyB;AAC3B;AAEA;IACI,oCAAoC;IACpC,sCAAsC;EACxC;AAEF;MACM,kCAAkC;IACpC;AAEJ;EACE,aAAa;EACb,0BAA0B;AAC5B;AAEA;EACE,0CAA0C;EAC1C,6CAA6C;AAC/C;AAEA;EACE,2CAA2C;EAC3C,8CAA8C;AAChD;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,yBAAyB;AAC3B;AAEA;IACI,cAAc;EAChB;AAEF;IACI,oCAAoC;EACtC;AAEF;IACI,8BAA8B;EAChC;AAEF;IACI,uCAAuC;EACzC;AAEF;IACI,oBAAoB;IACpB,6BAA6B;EAC/B;AAEF;EACE,iCAAiC;AACnC;AAEA;EACE,wBAAwB;AAC1B;AAEA;EACE,mBAAmB;AACrB;AAEA;;EAEE,UAAU;EACV,wBAAwB;EACxB,6CAA6C;EAC7C,8CAA8C;EAC9C,oCAAoC;EACpC,yBAAyB;AAC3B;AAEA;EACE,2CAA2C;AAC7C;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,wBAAwB;EACxB,yBAAyB;EACzB,uCAAuC;EACvC,oCAAoC;EACpC,mCAAmC;EACnC,mBAAmB;EACnB,iBAAiB;EACjB,yBAAyB;AAC3B;AAEA;IACI,oCAAoC;EACtC;AAEF;IACI,8CAA8C;IAC9C,6CAA6C;IAC7C,oCAAoC;EACtC;AACF;EACE,6BAA6B;AAC/B;AAEA,0BAA0B;AAC1B;EACE,WAAW;EACX,uCAAuC;EACvC,oCAAoC;AACtC;AAEA;;EAEE,wBAAwB;AAC1B;AAEA;;EAEE,eAAe;EACf,aAAa;EACb,0CAA0C;AAC5C;AAEA;IACI,qCAAqC;EACvC;AAEF;IACI,uCAAuC;EACzC;AAEF;IACI,aAAa;EACf;AAEF;IACI,6CAA6C;IAC7C,8CAA8C;EAChD;AAEF;EACE,iBAAiB;AACnB;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,8BAA8B;EAC9B,yBAAyB;AAC3B;AAEA;IACI,aAAa;EACf;AAEF;EACE,8BAA8B;AAChC;AAEA;EACE,mCAAmC;EACnC,yBAAyB;EACzB,qCAAqC;AACvC;AAEA;IACI,gCAAgC;EAClC;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,aAAa;EACb,mBAAmB;EACnB,oBAAoB;EACpB,yBAAyB;AAC3B;AAEA;EACE,yBAAyB;EACzB,gBAAgB;EAChB,SAAS;EACT,6BAA6B;EAC7B,8BAA8B;AAChC;AAEA;EACE,mBAAmB;EACnB,gCAAgC;AAClC;AAEA;IACI,gBAAgB;IAChB,yBAAyB;IACzB,0CAA0C;EAC5C;AAEF;IACI,UAAU;EACZ;AAEF;IACI,UAAU;EACZ;AAEF;IACI,6BAA6B;IAC7B,8BAA8B;EAChC;AAEF;IACI,eAAe;EACjB;AAEF;EACE,gBAAgB;AAClB;AAEA;EACE,eAAe;AACjB;AAEA;EACE,aAAa;EACb,yBAAyB;EACzB,qBAAqB;AACvB;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,WAAW;EACX,0CAA0C;EAC1C,iCAAiC;EACjC,mCAAmC;EACnC,iCAAiC;EACjC,yBAAyB;AAC3B;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,qBAAqB;AACvB;AAEA;IACI,wBAAwB;EAC1B;AAEF;IACI,qBAAqB;EACvB;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,0CAA0C;EAC1C,qCAAqC;EACrC,yCAAyC;EACzC,qBAAqB;EACrB,yBAAyB;EACzB,mCAAmC;AACrC;AAEA;IACI,6BAA6B;IAC7B,6BAA6B;EAC/B;AAEF;EACE,yBAAyB;EACzB,0CAA0C;EAC1C,iCAAiC;AACnC;AAEA;EACE,mCAAmC;EACnC,uCAAuC;EACvC,qBAAqB;AACvB;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,qBAAqB;AACvB;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,oBAAoB;EACpB,qBAAqB;EACrB,UAAU;AACZ;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,oBAAoB;AACtB;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,iCAAiC;;EAEjC,iCAAiC;EACjC,kCAAkC;AACpC;AAEA;IACI,8CAA8C;IAC9C,+CAA+C;IAC/C,sBAAsB;EACxB;AAEF;IACI,SAAS;IACT,6BAA6B;IAC7B,kBAAkB;IAClB,wBAAwB;OACrB,qBAAqB;YAChB,gBAAgB;IACxB,UAAU;IACV,sBAAsB;IACtB,eAAe;IACf,+BAA+B;EACjC;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,YAAY;EACZ,0CAA0C;EAC1C,yBAAyB;AAC3B;AAEA;IACI,wBAAwB;EAC1B;AAEF;IACI,wBAAwB;EAC1B;AAEF;EACE,eAAe;EACf,2BAA2B;EAC3B,WAAW;AACb;AAEA;IACI,mBAAmB;EACrB;AAEF;IACI,kBAAkB;EACpB;AAEF;EACE,gDAAgD;EAChD,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,kCAAkC;EAClC,mCAAmC;EACnC,qCAAqC;EACrC,yCAAyC;EACzC,yBAAyB;AAC3B;AAEA;EACE,gDAAgD;EAChD,uBAAuB;EACvB,kCAAkC;EAClC,mCAAmC;EACnC,qCAAqC;EACrC,wBAAwB;EACxB,yBAAyB;AAC3B;AAEA;EACE,2BAA2B;EAC3B,gBAAgB;EAChB,8BAA8B;AAChC;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,kBAAkB;EAClB,SAAS;EACT,WAAW;AACb;AAEA;EACE,gDAAgD;EAChD,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,kCAAkC;EAClC,qCAAqC;EACrC,yCAAyC;EACzC,yBAAyB;EACzB,UAAU;AACZ;AAEA;EACE,yBAAyB;AAC3B;AAIA;EACE,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,wBAAwB;EACxB,qBAAqB;EACrB,6BAA6B;AAC/B;AAIA;IACI,uBAAuB;IACvB,wBAAwB;IACxB,6BAA6B;EAC/B;AAIF;IACI,gBAAgB;IAChB,kBAAkB;IAClB,uBAAuB;IACvB,mBAAmB;EACrB;AAEF;EACE,UAAU;EACV,kBAAkB;EAClB,mCAAmC;EACnC,0CAA0C;EAC1C,yBAAyB;EACzB,iCAAiC;EACjC,sBAAsB;AACxB;AAEA;IACI,qBAAqB;EACvB;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,yBAAyB;EACzB,0CAA0C;EAC1C,mCAAmC;AACrC;AAEA;IACI,cAAc;EAChB;AAEF;IACI,oCAAoC;EACtC;AAEF;IACI,8BAA8B;EAChC;AAEF;IACI,uCAAuC;EACzC;AAEF;EACE,oCAAoC;EACpC,qBAAqB;AACvB;AAEA;IACI,yCAAyC;IACzC,qBAAqB;EACvB;AAEF;EACE,mBAAmB;EACnB,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,yBAAyB;AAC3B;AAEA;IACI,iBAAiB;EACnB;AAEF;IACI,mCAAmC;IACnC,0CAA0C;IAC1C,mBAAmB;EACrB;AAEF;MACM,aAAa;IACf;AAEJ;QACQ,SAAS;MACX;AAEN;MACM;IACF;AAEJ;IACI,WAAW;EACb;AAEF;MACM,WAAW;IACb;AAEJ;QACQ,UAAU;MACZ;AAEN;EACE,iBAAiB;AACnB;AAEA;IACI,YAAY;IACZ,cAAc;EAChB;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,yBAAyB;EACzB,yBAAyB;EACzB,iCAAiC;EACjC,YAAY;AACd;AAEA;IACI,cAAc;EAChB;AAEF;IACI,oCAAoC;EACtC;AAEF;IACI,8BAA8B;EAChC;AAEF;IACI,uCAAuC;EACzC;AAEF;IACI,UAAU;EACZ;AAEF;EACE,aAAa;AACf;AAEA;IACI,SAAS;IACT,6BAA6B;IAC7B,kBAAkB;IAClB,wBAAwB;OACrB,qBAAqB;YAChB,gBAAgB;IACxB,UAAU;IACV,sBAAsB;IACtB,eAAe;IACf,yBAAyB;EAC3B;AAEF;IACI,cAAc;EAChB;AAEF;IACI,oCAAoC;EACtC;AAEF;IACI,8BAA8B;EAChC;AAEF;IACI,uCAAuC;EACzC;AAEF;IACI,6BAA6B;IAC7B,8BAA8B;EAChC;AAGF;EACE,oBAAoB;AACtB;AAGA;IACI,SAAS;IACT,6BAA6B;IAC7B,kBAAkB;IAClB,wBAAwB;OACrB,qBAAqB;YAChB,gBAAgB;IACxB,UAAU;IACV,sBAAsB;IACtB,eAAe;IACf,yBAAyB;EAC3B;AAGF;IACI,cAAc;EAChB;AAGF;IACI,oCAAoC;EACtC;AAGF;IACI,8BAA8B;EAChC;AAGF;IACI,uCAAuC;EACzC;AAGF;MACM,0CAA0C;MAC1C,6CAA6C;IAC/C;AAGJ;MACM,2CAA2C;MAC3C,8CAA8C;IAChD;AAEJ;EACE,WAAW;AACb;AAEA;IACI,YAAY;IACZ,cAAc;EAChB;AAEF;EACE,gBAAgB;AAClB;AAEA;EACE,iBAAiB;AACnB;AAEA;EACE,kBAAkB;AACpB;AAEA;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,yBAAyB;EACzB,iCAAiC;;EAEjC,aAAa;EACb,mBAAmB;EACnB,mCAAmC;AACrC;AAEA;IACI,cAAc;EAChB;AAEF;IACI,oCAAoC;EACtC;AAEF;IACI,8BAA8B;EAChC;AAEF;IACI,uCAAuC;EACzC;AAEF;IACI,YAAY;EACd;AAEF;EACE,WAAW;EACX,4BAA4B;EAC5B,sBAAsB;AACxB;AAEA;EACE,6BAA6B;EAC7B,YAAY;AACd;AAEA,YAAY;AACZ;EACE,eAAe;EACf,QAAQ;EACR,mEAAmE;EACnE,iCAAiC;EACjC,WAAW;EACX,YAAY;AACd;AAEA;EACE,eAAe;EACf,QAAQ;EACR,SAAS;EACT,gCAAgC;EAChC,mEAAmE;EACnE,WAAW;AACb;AAEA;EACE,aAAa;AACf;AAGA;EACE;IACE,UAAU;EACZ;EACA;IACE,WAAW;EACb;AACF;AAEA;EACE;IACE,UAAU;IACV,4CAA4C;EAC9C;EACA;IACE,UAAU;IACV,yCAAyC;EAC3C;AACF;AAEA;EACE,4BAA4B;AAC9B;AAEA;EACE,qBAAqB;EACrB,kBAAkB;AACpB;AAEA;EACE,YAAY,EAAE,2CAA2C;EACzD,YAAY;EACZ,oBAAoB;AACtB;AAEA;EACE,kBAAkB;EAClB,uBAAuB;EACvB,qBAAqB;EACrB,2BAA2B;EAC3B,iCAAiC;AACnC;AAEA;IACI,cAAc;EAChB;AAEF;EACE,oBAAoB;EACpB,mCAAmC;EACnC,yBAAyB;EACzB,qBAAqB;EACrB,mBAAmB;EACnB,yBAAyB;AAC3B;AAEA;EACE,aAAa;EACb,wBAAwB;EACxB,mCAAmC;EACnC,yBAAyB;EACzB,qBAAqB;EACrB,mBAAmB;EACnB,yBAAyB;AAC3B;AAEA;IACI,YAAY;EACd;AAEF;EACE,iBAAiB;EACjB,0CAA0C;EAC1C,mCAAmC;AACrC;AAEA;IACI,SAAS;EACX;AAEF;IACI,aAAa;EACf;AAEF;EACE,yBAAyB;EACzB,sBAAsB;EACtB,+BAA+B;AACjC;AAEA;EACE,mCAAmC;EACnC,mCAAmC;EACnC,aAAa;AACf;AAEA;IACI,UAAU;EACZ;AAEF;MACM,cAAc;MACd,0CAA0C;IAC5C;AAEJ;EACE,aAAa;EACb,mBAAmB;EACnB,qBAAqB;EACrB,6BAA6B;AAC/B;AAEA;IACI,yBAAyB;EAC3B;AAEF;IACI,mCAAmC;EACrC;AAEF;EACE,yBAAyB;EACzB,6BAA6B;AAC/B;AAGA;EACE,kBAAkB;AACpB;AAEA;EACE,cAAc;EACd,UAAU;EACV,WAAW;EACX,kBAAkB;EAClB,mCAAmC;EACnC,+BAA+B;AACjC;AAEA;EACE,SAAS;EACT,SAAS;EACT,gBAAgB;AAClB;AAEA;EACE,SAAS;EACT,WAAW;EACX,iBAAiB;AACnB;AAEA;EACE,WAAW;EACX,WAAW;EACX,gBAAgB;AAClB;AAEA;EACE,YAAY;EACZ,WAAW;EACX,mBAAmB;AACrB;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;AAClB;AAEA;EACE,YAAY;EACZ,UAAU;EACV,iBAAiB;AACnB;AAEA;EACE,WAAW;EACX,UAAU;EACV,gBAAgB;AAClB;AAEA;EACE,SAAS;EACT,UAAU;EACV,iBAAiB;AACnB;AAEA;IACI,uBAAuB;IACvB,gBAAgB;IAChB,kBAAkB;IAClB,MAAM;IACN,yBAAyB;IACzB,uBAAuB;IACvB,yBAAyB;OACtB,sBAAsB;YACjB,iBAAiB;IACzB,mBAAmB;IACnB,qBAAqB;IACrB,oBAAoB;AACxB;AAEA;EACE,kBAAkB;AACpB;AAIA;EACE,aAAa;EACb,sBAAsB;EACtB,oBAAoB;AACtB;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,iCAAiC;;EAEjC,iCAAiC;EACjC,kCAAkC;AACpC;AAEA;IACI,8CAA8C;IAC9C,+CAA+C;IAC/C,sBAAsB;EACxB;AAEF;IACI,SAAS;IACT,6BAA6B;IAC7B,kBAAkB;IAClB,wBAAwB;OACrB,qBAAqB;YAChB,gBAAgB;IACxB,UAAU;IACV,sBAAsB;IACtB,eAAe;IACf,+BAA+B;EACjC;AAEF;EACE,SAAS;EACT,6BAA6B;EAC7B,kBAAkB;EAClB,wBAAwB;KACrB,qBAAqB;UAChB,gBAAgB;EACxB,UAAU;EACV,sBAAsB;EACtB,eAAe;EACf,YAAY;EACZ,0CAA0C;EAC1C,yBAAyB;AAC3B;AAEA;IACI,wBAAwB;EAC1B;AAEF;IACI,wBAAwB;EAC1B;AAEF;EACE,kBAAkB;AACpB;AAEA;IACI,UAAU;IACV,sBAAsB;IACtB,kBAAkB;IAClB,yBAAyB;IACzB,WAAW;IACX,aAAa;IACb,gDAAgD;IAChD,iDAAiD;IACjD,6BAA6B;IAC7B,kBAAkB;IAClB,gBAAgB;IAChB,mCAAmC;IACnC,mBAAmB;IACnB,iCAAiC;EACnC;AAEF;MACM,cAAc;IAChB;AAEJ;MACM,0CAA0C;MAC1C,mBAAmB;MACnB,+BAA+B;MAC/B,kBAAkB;MAClB,uBAAuB;IACzB;AAEJ;QACQ,qCAAqC;MACvC;AAEN;QACQ,oCAAoC;MACtC;AAEN;QACQ,gDAAgD;QAChD,iDAAiD;MACnD;AAEN;EACE,UAAU;EACV,iCAAiC;EACjC,kCAAkC;EAClC,iCAAiC;EACjC,0CAA0C;AAC5C;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,yBAAyB;EACzB,qBAAqB;AACvB;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,qBAAqB;EACvB;AAGF;EACE,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;AACjC;AACA;EACE,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;AAClC;AACA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;AAClC;AACA;EACE,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;AAClC;AACA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAChC,iCAAiC;EACjC,iCAAiC;EACjC,iCAAiC;EAGjC,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAChC,gCAAgC;EAChC,gCAAgC;EAGhC,+BAA+B;EAC/B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;EAC/B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,gCAAgC;EAGhC,6BAA6B;EAC7B,6BAA6B;EAC7B,6BAA6B;EAC7B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,8BAA8B;EAC9B,+BAA+B;EAC/B,+BAA+B;EAC/B,+BAA+B;AAzCjC;AA2CA;EACE,iBAAiB;AACnB;AACA;EACE,kBAAkB;AACpB;AACA;EACE,0BAA0B;AAC5B;AACA;IACI;AACJ;AACA;IACI;AACJ;AACA;IACI;AACJ;AACA;IACI;AACJ;AACA;IACI;AACJ;AACA;IACI,eAAe;IACf;AACJ;AACA;IACI,eAAe;IACf;AACJ;AACA;IACI,+BAA+B;IAC/B,mBAAmB;IACnB,6BAA6B;IAC7B;AACJ;AACA;EACE,eAAe;AACjB;AACA;EACE,yBAAyB;EACzB,4BAA4B;EAC5B,+BAA+B;EAC/B,8CAA8C;EAC9C,qCAAqC;AACvC;AACA;EACE,+CAA+C;EAC/C,uCAAuC;AACzC;AACA;EACE,8CAA8C;EAC9C,sCAAsC;AACxC;AACA;EACE,kDAAkD;EAClD,0CAA0C;AAC5C;AACA;EACE,iDAAiD;EACjD,yCAAyC;AAC3C;AACA;EACE,+CAA+C;EAC/C,uCAAuC;AACzC",sourcesContent:[":root, .light-theme {\n  --blue1: hsl(206, 100%, 99.2%);\n  --blue2: hsl(210, 100%, 98.0%);\n  --blue3: hsl(209, 100%, 96.5%);\n  --blue4: hsl(210, 98.8%, 94.0%);\n  --blue5: hsl(209, 95.0%, 90.1%);\n  --blue6: hsl(209, 81.2%, 84.5%);\n  --blue7: hsl(208, 77.5%, 76.9%);\n  --blue8: hsl(206, 81.9%, 65.3%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(208, 100%, 47.3%);\n  --blue11: hsl(211, 100%, 43.2%);\n  --blue12: hsl(211, 100%, 15.0%);\n}\n.dark-theme {\n  --blue1: hsl(212, 35.0%, 9.2%);\n  --blue2: hsl(216, 50.0%, 11.8%);\n  --blue3: hsl(214, 59.4%, 15.3%);\n  --blue4: hsl(214, 65.8%, 17.9%);\n  --blue5: hsl(213, 71.2%, 20.2%);\n  --blue6: hsl(212, 77.4%, 23.1%);\n  --blue7: hsl(211, 85.1%, 27.4%);\n  --blue8: hsl(211, 89.7%, 34.1%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(209, 100%, 60.6%);\n  --blue11: hsl(210, 100%, 66.1%);\n  --blue12: hsl(206, 98.0%, 95.8%);\n}\n:root, .light-theme {\n  --slate1: hsl(206, 30.0%, 98.8%);\n  --slate2: hsl(210, 16.7%, 97.6%);\n  --slate3: hsl(209, 13.3%, 95.3%);\n  --slate4: hsl(209, 12.2%, 93.2%);\n  --slate5: hsl(208, 11.7%, 91.1%);\n  --slate6: hsl(208, 11.3%, 88.9%);\n  --slate7: hsl(207, 11.1%, 85.9%);\n  --slate8: hsl(205, 10.7%, 78.0%);\n  --slate9: hsl(206, 6.0%, 56.1%);\n  --slate10: hsl(206, 5.8%, 52.3%);\n  --slate11: hsl(206, 6.0%, 43.5%);\n  --slate12: hsl(206, 24.0%, 9.0%);\n}\n.dark-theme {\n  --slate1: hsl(200, 7.0%, 8.8%);\n  --slate2: hsl(195, 7.1%, 11.0%);\n  --slate3: hsl(197, 6.8%, 13.6%);\n  --slate4: hsl(198, 6.6%, 15.8%);\n  --slate5: hsl(199, 6.4%, 17.9%);\n  --slate6: hsl(201, 6.2%, 20.5%);\n  --slate7: hsl(203, 6.0%, 24.3%);\n  --slate8: hsl(207, 5.6%, 31.6%);\n  --slate9: hsl(206, 6.0%, 43.9%);\n  --slate10: hsl(206, 5.2%, 49.5%);\n  --slate11: hsl(206, 6.0%, 63.0%);\n  --slate12: hsl(210, 6.0%, 93.0%);\n}\n:root, .light-theme {\n  --grass1: hsl(116, 50.0%, 98.9%);\n  --grass2: hsl(120, 60.0%, 97.1%);\n  --grass3: hsl(120, 53.6%, 94.8%);\n  --grass4: hsl(121, 47.5%, 91.4%);\n  --grass5: hsl(122, 42.6%, 86.5%);\n  --grass6: hsl(124, 39.0%, 79.7%);\n  --grass7: hsl(126, 37.1%, 70.2%);\n  --grass8: hsl(131, 38.1%, 56.3%);\n  --grass9: hsl(131, 41.0%, 46.5%);\n  --grass10: hsl(132, 43.1%, 42.2%);\n  --grass11: hsl(133, 50.0%, 32.5%);\n  --grass12: hsl(130, 30.0%, 14.9%);\n}\n:root, .light-theme {\n  --cyan1: hsl(185, 60.0%, 98.7%);\n  --cyan2: hsl(185, 73.3%, 97.1%);\n  --cyan3: hsl(186, 70.2%, 94.4%);\n  --cyan4: hsl(186, 63.8%, 90.6%);\n  --cyan5: hsl(187, 58.3%, 85.4%);\n  --cyan6: hsl(188, 54.6%, 78.4%);\n  --cyan7: hsl(189, 53.7%, 68.7%);\n  --cyan8: hsl(189, 60.3%, 52.5%);\n  --cyan9: hsl(190, 95.0%, 39.0%);\n  --cyan10: hsl(191, 91.2%, 36.8%);\n  --cyan11: hsl(192, 85.0%, 31.0%);\n  --cyan12: hsl(192, 88.0%, 12.5%);\n}\n:root, .light-theme {\n  --amber1: hsl(39, 70.0%, 99.0%);\n  --amber2: hsl(40, 100%, 96.5%);\n  --amber3: hsl(44, 100%, 91.7%);\n  --amber4: hsl(43, 100%, 86.8%);\n  --amber5: hsl(42, 100%, 81.8%);\n  --amber6: hsl(38, 99.7%, 76.3%);\n  --amber7: hsl(36, 86.1%, 67.1%);\n  --amber8: hsl(35, 85.2%, 55.1%);\n  --amber9: hsl(39, 100%, 57.0%);\n  --amber10: hsl(35, 100%, 55.5%);\n  --amber11: hsl(30, 100%, 34.0%);\n  --amber12: hsl(20, 80.0%, 17.0%);\n}\n:root, .light-theme {\n  --red1: hsl(359, 100%, 99.4%);\n  --red2: hsl(359, 100%, 98.6%);\n  --red3: hsl(360, 100%, 96.8%);\n  --red4: hsl(360, 97.9%, 94.8%);\n  --red5: hsl(360, 90.2%, 91.9%);\n  --red6: hsl(360, 81.7%, 87.8%);\n  --red7: hsl(359, 74.2%, 81.7%);\n  --red8: hsl(359, 69.5%, 74.3%);\n  --red9: hsl(358, 75.0%, 59.0%);\n  --red10: hsl(358, 69.4%, 55.2%);\n  --red11: hsl(358, 65.0%, 48.7%);\n  --red12: hsl(354, 50.0%, 14.6%);\n}\n/** Code mirror */\n.mdxeditor .cm-editor {\n    --sp-font-mono: var(--font-mono);\n    --sp-font-body: var(--font-body);\n    padding: var(--sp-space-4) 0;\n  }\n.mdxeditor .cm-scroller {\n    padding: 0 !important;\n  }\n.mdxeditor .sp-wrapper {\n    border: 1px solid var(--baseLine);\n    border-radius: var(--radius-medium);\n    overflow: hidden;\n  }\n.mdxeditor .sp-layout {\n    border: none;\n  }\n.mdxeditor .sp-cm pre {\n      white-space: break-spaces;\n      word-break: break-word;\n      overflow-wrap: anywhere;\n      flex-shrink: 1;\n    }\n/** Diff viewer */\n.mdxeditor .cm-mergeView .cm-scroller {\n    font-family: var(--font-mono);\n    line-height: 1.3rem;\n    font-size: var(--text-xs);\n  }\n/** Diff viewer */\n.mdxeditor .cm-sourceView .cm-scroller {\n    font-family: var(--font-mono);\n    line-height: 1.3rem;\n    font-size: var(--text-xs);\n  }\n.mdxeditor .cm-gutters {\n    background: transparent;\n    font-size: var(--text-xxs);\n  }\n._editorRoot_16b3d_36 {\n  --accentBase: var(--blue1);\n  --accentBgSubtle: var(--blue2);\n  --accentBg: var(--blue3);\n  --accentBgHover: var(--blue4);\n  --accentBgActive: var(--blue5);\n  --accentLine: var(--blue6);\n  --accentBorder: var(--blue7);\n  --accentBorderHover: var(--blue8);\n  --accentSolid: var(--blue9);\n  --accentSolidHover: var(--blue10);\n  --accentText: var(--blue11);\n  --accentTextContrast: var(--blue12);\n\n  --baseBase: var(--slate1);\n  --baseBgSubtle: var(--slate2);\n  --baseBg: var(--slate3);\n  --baseBgHover: var(--slate4);\n  --baseBgActive: var(--slate5);\n  --baseLine: var(--slate6);\n  --baseBorder: var(--slate7);\n  --baseBorderHover: var(--slate8);\n  --baseSolid: var(--slate9);\n  --baseSolidHover: var(--slate10);\n  --baseText: var(--slate11);\n  --baseTextContrast: var(--slate12);\n\n  --admonitionTipBg: var(--cyan4);\n  --admonitionTipBorder: var(--cyan8);\n  \n  --admonitionInfoBg: var(--grass4);\n  --admonitionInfoBorder: var(--grass8);\n\n  --admonitionCautionBg: var(--amber4);\n  --admonitionCautionBorder: var(--amber8);\n\n  --admonitionDangerBg: var(--red4);\n  --admonitionDangerBorder: var(--red8);\n\n  --admonitionNoteBg: var(--slate4);\n  --admonitionNoteBorder: var(--slate8);\n\n  --spacing-0:0px;\n  --spacing-px:1px;\n  --spacing-0_5:0.125rem;\n  --spacing-1:0.25rem;\n  --spacing-1_5:0.375rem;\n  --spacing-2:0.5rem;\n  --spacing-2_5:0.625rem;\n  --spacing-3:0.75rem;\n  --spacing-3_5:0.875rem;\n  --spacing-4:1rem;\n  --spacing-5:1.25rem;\n  --spacing-6:1.5rem;\n  --spacing-7:1.75rem;\n  --spacing-8:2rem;\n  --spacing-9:2.25rem;\n  --spacing-10:2.5rem;\n  --spacing-11:2.75rem;\n  --spacing-12:3rem;\n  --spacing-14:3.5rem;\n  --spacing-16:4rem;\n  --spacing-20:5rem;\n  --spacing-24:6rem;\n  --spacing-28:7rem;\n  --spacing-32:8rem;\n  --spacing-36:9rem;\n  --spacing-40:10rem;\n  --spacing-44:11rem;\n  --spacing-48:12rem;\n  --spacing-52:13rem;\n  --spacing-56:14rem;\n  --spacing-60:15rem;\n  --spacing-64:16rem;\n  --spacing-72:18rem;\n  --spacing-80:20rem;\n  --spacing-96:24rem;\n\n  --radius-none:0px;\n  --radius-small: var(--spacing-0_5);\n  --radius-base: var(--spacing-1);\n  --radius-medium: var(--spacing-1_5);\n  --radius-large: var(--spacing-2);\n  --radius-extra-large: var(--spacing-3);\n  --radius-full: 9999px;\n\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n  --font-body: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\n  --text-base: 1rem;\n  --text-sm: 0.875rem;\n  --text-xs: 0.75rem;\n  --text-xxs: 0.6rem;\n\n  font-family: var(--font-body);\n  color: var(--baseText);\n}\n\n._editorWrapper_16b3d_134 {\n}\n\n._nestedListItem_16b3d_137 {\n  list-style: none;\n}\n\n._toolbarRoot_16b3d_141 {\n  /* border: var(--spacing-px) solid var(--baseBorder); */\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacing-1);\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-2) var(--spacing-2);\n  align-items: center;\n  overflow-x: auto;\n  position: sticky;\n  top: 0;\n  background-color: var(--baseBgSubtle);\n  width: inherit;\n}\n\n._toolbarRoot_16b3d_141 div[role=separator] {\n    margin: var(--spacing-2) var(--spacing-2);\n    border-left: 1px solid var(--baseBorder);\n    border-right: 1px solid var(--baseBase);\n    height: var(--spacing-4);\n  }\n\n._readOnlyToolbarRoot_16b3d_164 {\n  pointer-events: none;\n  background: var(--baseBase);\n}\n\n._readOnlyToolbarRoot_16b3d_164 > div {\n    opacity: 0.5;\n  }\n\n._toolbarModeSwitch_16b3d_172 {\n  opacity: 1 !important;\n  margin-left: auto;\n  align-self: stretch;\n  align-items: stretch;\n  display: flex;\n  border: 1px solid var(--baseBg);\n  border-radius: var(--radius-medium);\n  font-size: var(--text-xs);\n}\n\n._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182 {\n    padding-inline-end: var(--spacing-4);\n    padding-inline-start: var(--spacing-4);\n  }\n\n._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:active, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182[data-state=on] {\n      background-color:var(--baseBorder);\n    }\n\n._toolbarGroupOfGroups_16b3d_192 {\n  display: flex;\n  margin: 0 var(--spacing-1);\n}\n\n._toolbarToggleSingleGroup_16b3d_197:first-of-type ._toolbarToggleItem_16b3d_182:only-child, ._toolbarToggleSingleGroup_16b3d_197:only-child ._toolbarToggleItem_16b3d_182:first-child, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:first-child {\n  border-top-left-radius: var(--radius-base);\n  border-bottom-left-radius: var(--radius-base);\n}\n\n._toolbarToggleSingleGroup_16b3d_197:last-of-type ._toolbarToggleItem_16b3d_182:only-child, ._toolbarToggleSingleGroup_16b3d_197:only-child ._toolbarToggleItem_16b3d_182:last-child, ._toolbarModeSwitch_16b3d_172 ._toolbarToggleItem_16b3d_182:last-child {\n  border-top-right-radius: var(--radius-base);\n  border-bottom-right-radius: var(--radius-base);\n}\n\n._toolbarToggleItem_16b3d_182, ._toolbarButton_16b3d_211 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-1);\n}\n\n._toolbarToggleItem_16b3d_182 svg, ._toolbarButton_16b3d_211 svg {\n    display: block;\n  }\n\n._toolbarToggleItem_16b3d_182:hover, ._toolbarButton_16b3d_211:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._toolbarToggleItem_16b3d_182:active svg, ._toolbarButton_16b3d_211:active svg {\n    transform: translate(1px, 1px);\n  }\n\n._toolbarToggleItem_16b3d_182[data-state=on], ._toolbarButton_16b3d_211[data-state=on], ._toolbarToggleItem_16b3d_182:active, ._toolbarButton_16b3d_211:active {\n    background-color: var(--accentBgActive);\n  }\n\n._toolbarToggleItem_16b3d_182[data-disabled], ._toolbarButton_16b3d_211[data-disabled] {\n    pointer-events: none;\n    color: var(--baseBorderHover);\n  }\n\n._toolbarButton_16b3d_211 {\n  border-radius: var(--radius-base);\n}\n\n._activeToolbarButton_16b3d_241 {\n  color: var(--accentText);\n}\n\n._toolbarToggleSingleGroup_16b3d_197 {\n  white-space: nowrap;\n}\n\n._toolbarNodeKindSelectContainer_16b3d_249, ._toolbarButtonDropdownContainer_16b3d_250, ._toolbarCodeBlockLanguageSelectContent_16b3d_251, ._selectContainer_16b3d_252\n{\n  z-index: 3;\n  width: var(--spacing-36);\n  border-bottom-left-radius: var(--radius-base);\n  border-bottom-right-radius: var(--radius-base);\n  background-color: var(--baseBgHover);\n  font-size: var(--text-sm);\n}\n\n._toolbarButtonDropdownContainer_16b3d_250 {\n  border-top-right-radius: var(--radius-base);\n}\n\n._toolbarNodeKindSelectTrigger_16b3d_266, ._toolbarButtonSelectTrigger_16b3d_267, ._selectTrigger_16b3d_268 {\n  border: 0;\n  background-color: transparent;\n  display: flex;\n  color: inherit;\n  align-items: center;\n  width: var(--spacing-36);\n  padding: var(--spacing-1);\n  padding-inline-start: var(--spacing-4) ;\n  padding-inline-end: var(--spacing-2);\n  border-radius: var(--radius-medium);\n  white-space: nowrap;\n  flex-wrap: nowrap;\n  font-size: var(--text-sm);\n}\n\n._toolbarNodeKindSelectTrigger_16b3d_266:hover, ._toolbarButtonSelectTrigger_16b3d_267:hover, ._selectTrigger_16b3d_268:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._toolbarNodeKindSelectTrigger_16b3d_266[data-state=open], ._toolbarButtonSelectTrigger_16b3d_267[data-state=open], ._selectTrigger_16b3d_268[data-state=open] {\n    border-bottom-right-radius: var(--radius-none);\n    border-bottom-left-radius: var(--radius-none);\n    background-color: var(--baseBgHover);\n  }\n._selectTrigger_16b3d_268[data-placeholder] > span:first-child {\n  color: var(--baseBorderHover);\n}\n\n/** used in the sandpack */\n._toolbarButtonSelectTrigger_16b3d_267 {\n  width: auto;\n  padding-inline-start: var(--spacing-2) ;\n  padding-inline-end: var(--spacing-1);\n}\n\n._toolbarCodeBlockLanguageSelectTrigger_16b3d_304, ._toolbarCodeBlockLanguageSelectContent_16b3d_251 \n{\n  width: var(--spacing-48);\n}\n\n._toolbarNodeKindSelectItem_16b3d_310, ._selectItem_16b3d_311\n{\n  cursor: default;\n  display: flex;\n  padding: var(--spacing-2) var(--spacing-4);\n}\n\n._toolbarNodeKindSelectItem_16b3d_310[data-highlighted], ._selectItem_16b3d_311[data-highlighted] {\n    background-color: var(--baseBgSubtle);\n  }\n\n._toolbarNodeKindSelectItem_16b3d_310[data-state=checked], ._selectItem_16b3d_311[data-state=checked] {\n    background-color: var(--accentBgActive);\n  }\n\n._toolbarNodeKindSelectItem_16b3d_310[data-highlighted], ._selectItem_16b3d_311[data-highlighted] {\n    outline: none;\n  }\n\n._toolbarNodeKindSelectItem_16b3d_310:last-child, ._selectItem_16b3d_311:last-child {\n    border-bottom-left-radius: var(--radius-base);\n    border-bottom-right-radius: var(--radius-base);\n  }\n\n._toolbarNodeKindSelectDropdownArrow_16b3d_335, ._selectDropdownArrow_16b3d_336 {\n  margin-left: auto;\n}\n\n._contentEditable_16b3d_340 {\n  box-sizing: border-box;\n  width: 100%;\n  color: var(--baseTextContrast);\n  padding: var(--spacing-3);\n}\n\n._contentEditable_16b3d_340:focus {\n    outline: none;\n  }\n\n._sandpackWrapper_16b3d_350 {\n  margin-bottom:var(--spacing-5);\n}\n\n._frontmatterWrapper_16b3d_354 {\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-3);\n  background-color: var(--baseBgSubtle);\n}\n\n._frontmatterWrapper_16b3d_354[data-expanded=true] {\n    margin-bottom: var(--spacing-10);\n  }\n\n._frontmatterToggleButton_16b3d_364 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  display: flex;\n  align-items: center;\n  gap:var(--spacing-1);\n  font-size: var(--text-sm);\n}\n\n._propertyPanelTitle_16b3d_372 {\n  font-size: var(--text-xs);\n  font-weight: 400;\n  margin: 0;\n  padding-top: var(--spacing-2);\n  padding-left: var(--spacing-2);\n}\n\n._propertyEditorTable_16b3d_380 {\n  table-layout: fixed;\n  border-spacing: var(--spacing-2);\n}\n\n._propertyEditorTable_16b3d_380 th {\n    text-align: left;\n    font-size: var(--text-sm);\n    padding: var(--spacing-2) var(--spacing-3);\n  }\n\n._propertyEditorTable_16b3d_380 col:nth-child(1) {\n    width: 30%;\n  }\n\n._propertyEditorTable_16b3d_380 col:nth-child(2) {\n    width: 70%;\n  }\n\n._propertyEditorTable_16b3d_380 td:last-child ._iconButton_16b3d_397 {\n    margin-left: var(--spacing-4);\n    margin-right: var(--spacing-4);\n  }\n\n._propertyEditorTable_16b3d_380 ._readOnlyColumnCell_16b3d_402 {\n    padding-left: 0;\n  }\n\n._propertyEditorLabelCell_16b3d_407 {\n  font-weight: 400;\n}\n\n._readOnlyColumnCell_16b3d_402 {\n  padding-left: 0;\n}\n\n._buttonsFooter_16b3d_415 {\n  display: flex;\n  justify-content: flex-end;\n  gap: var(--spacing-2);\n}\n\n._propertyEditorInput_16b3d_421 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 100%;\n  padding: var(--spacing-2) var(--spacing-3);\n  border-radius: var(--radius-base);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBase);\n  font-size: var(--text-sm);\n}\n\n._iconButton_16b3d_397 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  color:var(--baseText);\n}\n\n._iconButton_16b3d_397:hover {\n    color: var(--accentText);\n  }\n\n._iconButton_16b3d_397:disabled, ._iconButton_16b3d_397:disabled:hover {\n    color:var(--baseLine);\n  }\n\n._primaryButton_16b3d_442, ._secondaryButton_16b3d_442 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2) var(--spacing-3);\n  border: 1px solid var(--accentBorder);\n  background-color: var(--accentSolidHover);\n  color:var(--baseBase);\n  font-size: var(--text-sm);\n  border-radius: var(--radius-medium);\n}\n\n._primaryButton_16b3d_442:disabled, ._secondaryButton_16b3d_442:disabled {\n    background: var(--accentLine);\n    border-color: var(--accentBg);\n  }\n\n._smallButton_16b3d_456 {\n  font-size: var(--text-xs);\n  padding: var(--spacing-1) var(--spacing-2);\n  border-radius: var(--radius-base);\n}\n\n._secondaryButton_16b3d_442 {\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseSolidHover);\n  color:var(--baseBase);\n}\n\n._dialogForm_16b3d_468 {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacing-2);\n}\n\n._linkDialogEditForm_16b3d_474 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  gap: var(--spacing-2);\n  padding: 0;\n}\n\n._linkDialogInputContainer_16b3d_482 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n\n._linkDialogInputWrapper_16b3d_488 {\n  display: flex;\n  align-items: center;\n  background-color: var(--baseBase);\n\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n}\n\n._linkDialogInputWrapper_16b3d_488[data-visible-dropdown=true] {\n    border-bottom-left-radius: var(--radius-none) ;\n    border-bottom-right-radius: var(--radius-none) ;\n    border-bottom-width: 0;\n  }\n\n._linkDialogInputWrapper_16b3d_488 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding-right: var(--spacing-2);\n  }\n\n._linkDialogInput_16b3d_482, ._dialogInput_16b3d_508 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 20rem;\n  padding: var(--spacing-2) var(--spacing-3);\n  font-size: var(--text-sm);\n}\n\n._linkDialogInput_16b3d_482::-moz-placeholder, ._dialogInput_16b3d_508::-moz-placeholder {\n    color: var(--baseBorder);\n  }\n\n._linkDialogInput_16b3d_482::placeholder, ._dialogInput_16b3d_508::placeholder {\n    color: var(--baseBorder);\n  }\n\n._linkDialogAnchor_16b3d_518 {\n  position: fixed;\n  background-color: highlight;\n  z-index: -1;\n}\n\n._linkDialogAnchor_16b3d_518[data-visible=true] {\n    visibility: visible;\n  }\n\n._linkDialogAnchor_16b3d_518[data-visible=false] {\n    visibility: hidden;\n  }\n\n._linkDialogPopoverContent_16b3d_532, ._tableColumnEditorPopoverContent_16b3d_532, ._dialogContent_16b3d_532 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-2) var(--spacing-2);\n  font-size: var(--text-sm);\n}\n\n._largeDialogContent_16b3d_544 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  border: 1px solid var(--baseBorder);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-4);\n  font-size: var(--text-sm);\n}\n\n._dialogTitle_16b3d_554 {\n  font-size: var(--text-base);\n  font-weight: 600;\n  padding-left: var(--spacing-2);\n}\n\n._dialogCloseButton_16b3d_560 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n}\n\n._popoverContent_16b3d_567 {\n  filter: drop-shadow(0 2px 2px rgb(0 0 0 / 0.20));\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-0_5);\n  border-radius:var(--radius-medium);\n  background-color: var(--baseBgSubtle);\n  padding:var(--spacing-2) var(--spacing-2);\n  font-size: var(--text-sm);\n  z-index: 1;\n}\n\n._popoverArrow_16b3d_579 {\n  fill: var(--baseBgSubtle);\n}\n\n\n\n._linkDialogPreviewAnchor_16b3d_585 {\n  margin-right: var(--spacing-3);\n  display: flex;\n  align-items: flex-start;\n  color: var(--accentText);\n  text-decoration: none;\n  border: 1px solid transparent;\n}\n\n\n\n._linkDialogPreviewAnchor_16b3d_585 svg {\n    width: var(--spacing-5);\n    height: var(--spacing-5);\n    margin-left: var(--spacing-2);\n  }\n\n\n\n._linkDialogPreviewAnchor_16b3d_585 span {\n    max-width: 14rem;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n._tooltipContent_16b3d_607 {\n  z-index: 2;\n  position: relative;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-1) var(--spacing-2);\n  font-size: var(--text-xs);\n  background-color: var(--baseText);\n  color: var(--baseBase);\n}\n\n._tooltipContent_16b3d_607 svg {\n    fill: var(--baseText);\n  }\n\n._actionButton_16b3d_621 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  padding: var(--spacing-1) var(--spacing-1);\n  border-radius: var(--radius-medium);\n}\n\n._actionButton_16b3d_621 svg {\n    display: block;\n  }\n\n._actionButton_16b3d_621:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._actionButton_16b3d_621:active svg {\n    transform: translate(1px, 1px);\n  }\n\n._actionButton_16b3d_621[data-state=on], ._actionButton_16b3d_621:active {\n    background-color: var(--accentBgActive);\n  }\n\n._primaryActionButton_16b3d_627 {\n  background-color: var(--accentSolid);\n  color:var(--baseBase);\n}\n\n._primaryActionButton_16b3d_627:hover {\n    background-color: var(--accentSolidHover);\n    color:var(--baseBase);\n  }\n\n._tableEditor_16b3d_636 {\n  table-layout: fixed;\n  width: 100%;\n  height: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n}\n\n._tableEditor_16b3d_636 thead > tr > th {\n    text-align: right;\n  }\n\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) {\n    border: 1px solid var(--baseBorder);\n    padding: var(--spacing-1) var(--spacing-2);\n    white-space: normal;\n  }\n\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) > div {\n      outline: none;\n    }\n\n._tableEditor_16b3d_636 > tbody > tr > td:not(._toolCell_16b3d_647) > div > p {\n        margin: 0;\n      }\n\n._tableEditor_16b3d_636 > tbody > tr > td[data-active=true]:not(._toolCell_16b3d_647) {\n      outline: solid 2px var(--accentSolid)\n    }\n\n._tableEditor_16b3d_636 ._tableColumnEditorTrigger_16b3d_664, ._tableEditor_16b3d_636 ._tableRowEditorTrigger_16b3d_664, ._tableEditor_16b3d_636 ._addRowButton_16b3d_664, ._tableEditor_16b3d_636 ._addColumnButton_16b3d_664, ._tableEditor_16b3d_636 ._iconButton_16b3d_397 {\n    opacity: .2;\n  }\n\n._tableEditor_16b3d_636:hover ._tableColumnEditorTrigger_16b3d_664, ._tableEditor_16b3d_636:hover ._tableRowEditorTrigger_16b3d_664, ._tableEditor_16b3d_636:hover ._addRowButton_16b3d_664, ._tableEditor_16b3d_636:hover ._addColumnButton_16b3d_664, ._tableEditor_16b3d_636:hover ._iconButton_16b3d_397 {\n      opacity: .5;\n    }\n\n._tableEditor_16b3d_636:hover ._tableColumnEditorTrigger_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._tableRowEditorTrigger_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._addRowButton_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._addColumnButton_16b3d_664:hover, ._tableEditor_16b3d_636:hover ._iconButton_16b3d_397:hover {\n        opacity: 1;\n      }\n\n._toolCell_16b3d_647 {\n  text-align: right;\n}\n\n._toolCell_16b3d_647 button {\n    margin: auto;\n    display: block;\n  }\n\n._tableColumnEditorTrigger_16b3d_664 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  padding: var(--spacing-1);\n  border-radius: var(--radius-full);\n  opacity: 0.2;\n}\n\n._tableColumnEditorTrigger_16b3d_664 svg {\n    display: block;\n  }\n\n._tableColumnEditorTrigger_16b3d_664:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._tableColumnEditorTrigger_16b3d_664:active svg {\n    transform: translate(1px, 1px);\n  }\n\n._tableColumnEditorTrigger_16b3d_664[data-state=on], ._tableColumnEditorTrigger_16b3d_664:active {\n    background-color: var(--accentBgActive);\n  }\n\n._tableColumnEditorTrigger_16b3d_664[data-active=true] {\n    opacity: 1;\n  }\n\n._tableColumnEditorToolbar_16b3d_698 {\n  display: flex;\n}\n\n._tableColumnEditorToolbar_16b3d_698 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding: var(--spacing-2);\n  }\n\n._tableColumnEditorToolbar_16b3d_698 > button svg {\n    display: block;\n  }\n\n._tableColumnEditorToolbar_16b3d_698 > button:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._tableColumnEditorToolbar_16b3d_698 > button:active svg {\n    transform: translate(1px, 1px);\n  }\n\n._tableColumnEditorToolbar_16b3d_698 > button[data-state=on], ._tableColumnEditorToolbar_16b3d_698 > button:active {\n    background-color: var(--accentBgActive);\n  }\n\n._tableColumnEditorToolbar_16b3d_698 [role=separator] {\n    margin-left: var(--spacing-1);\n    margin-right: var(--spacing-1);\n  }\n\n\n._toggleGroupRoot_16b3d_710 {\n  display: inline-flex;\n}\n\n\n._toggleGroupRoot_16b3d_710 button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding: var(--spacing-2);\n  }\n\n\n._toggleGroupRoot_16b3d_710 button svg {\n    display: block;\n  }\n\n\n._toggleGroupRoot_16b3d_710 button:hover {\n    background-color: var(--baseBgHover);\n  }\n\n\n._toggleGroupRoot_16b3d_710 button:active svg {\n    transform: translate(1px, 1px);\n  }\n\n\n._toggleGroupRoot_16b3d_710 button[data-state=on], ._toggleGroupRoot_16b3d_710 button:active {\n    background-color: var(--accentBgActive);\n  }\n\n\n._toggleGroupRoot_16b3d_710 button:first-child {\n      border-top-left-radius: var(--radius-base);\n      border-bottom-left-radius: var(--radius-base);\n    }\n\n\n._toggleGroupRoot_16b3d_710 button:last-child {\n      border-top-right-radius: var(--radius-base);\n      border-bottom-right-radius: var(--radius-base);\n    }\n\n._tableToolsColumn_16b3d_727 {\n  width: 3rem;\n}\n\n._tableToolsColumn_16b3d_727 button {\n    margin: auto;\n    display: block;\n  }\n\n._leftAlignedCell_16b3d_735 {\n  text-align: left;\n}\n\n._rightAlignedCell_16b3d_739 {\n  text-align: right;\n}\n\n._centeredCell_16b3d_743 {\n  text-align: center;\n}\n\n._addColumnButton_16b3d_664, ._addRowButton_16b3d_664 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  padding: var(--spacing-2);\n  background-color: var(--baseBase);\n\n  display: flex;\n  align-items: center;\n  border-radius: var(--radius-medium);\n}\n\n._addColumnButton_16b3d_664 svg, ._addRowButton_16b3d_664 svg {\n    display: block;\n  }\n\n._addColumnButton_16b3d_664:hover, ._addRowButton_16b3d_664:hover {\n    background-color: var(--baseBgHover);\n  }\n\n._addColumnButton_16b3d_664:active svg, ._addRowButton_16b3d_664:active svg {\n    transform: translate(1px, 1px);\n  }\n\n._addColumnButton_16b3d_664[data-state=on], ._addRowButton_16b3d_664[data-state=on], ._addColumnButton_16b3d_664:active, ._addRowButton_16b3d_664:active {\n    background-color: var(--accentBgActive);\n  }\n\n._addColumnButton_16b3d_664 svg, ._addRowButton_16b3d_664 svg {\n    margin: auto;\n  }\n\n._addRowButton_16b3d_664 {\n  width: 100%;\n  margin-top: var(--spacing-2);\n  box-sizing: border-box;\n}\n\n._addColumnButton_16b3d_664 {\n  margin-left: var(--spacing-2);\n  height: 100%;\n}\n\n/** Dialog */\n._dialogOverlay_16b3d_771 {\n  position: fixed;\n  inset: 0;\n  animation: _overlayShow_16b3d_1 150ms cubic-bezier(0.16, 1, 0.3, 1);\n  background-color: var(--baseBase);\n  z-index: 51;\n  opacity: 0.5;\n}\n\n._dialogContent_16b3d_532, ._largeDialogContent_16b3d_544 {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  animation: _contentShow_16b3d_1 150ms cubic-bezier(0.16, 1, 0.3, 1);\n  z-index: 52;\n}\n\n._dialogContent_16b3d_532:focus, ._largeDialogContent_16b3d_544:focus {\n  outline: none;\n}\n\n\n@keyframes _overlayShow_16b3d_1 {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: .5;\n  }\n}\n\n@keyframes _contentShow_16b3d_1 {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -48%) scale(0.96);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n._focusedImage_16b3d_814 {\n  outline: highlight solid 2px;\n}\n\n._imageWrapper_16b3d_818 {\n  display: inline-block;\n  position: relative;\n}\n\n._imageWrapper_16b3d_818[draggable=true] {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n._editImageButton_16b3d_830 {\n  position: absolute;\n  right: var(--spacing-2);\n  top: var(--spacing-2);\n  background: var(--baseBase);\n  border-radius: var(--radius-full);\n}\n\n._editImageButton_16b3d_830 svg {\n    display: block;\n  }\n\n._inlineEditor_16b3d_842 {\n  display: inline-flex;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-1);\n  gap: var(--spacing-2);\n  align-items: center;\n  background: var(--baseBg);\n}\n\n._blockEditor_16b3d_851 {\n  display: flex;\n  justify-content: stretch;\n  border-radius: var(--radius-medium);\n  padding: var(--spacing-2);\n  gap: var(--spacing-2);\n  align-items: center;\n  background: var(--baseBg);\n}\n\n._blockEditor_16b3d_851 ._nestedEditor_16b3d_860 {\n    flex-grow: 1;\n  }\n\n._nestedEditor_16b3d_860 {\n  background: white;\n  padding: var(--spacing-1) var(--spacing-2);\n  border-radius: var(--radius-medium);\n}\n\n._nestedEditor_16b3d_860 > p {\n    margin: 0;\n  }\n\n._nestedEditor_16b3d_860:focus {\n    outline: none;\n  }\n\n._genericComponentName_16b3d_877 {\n  font-size: var(--text-sm);\n  color: var(--baseText);\n  padding-right: var(--spacing-2);\n}\n\n._diffSourceToggle_16b3d_883 {\n  border: 1px solid var(--baseBorder);\n  border-radius: var(--radius-medium);\n  display: flex;\n}\n\n._diffSourceToggle_16b3d_883 ._toolbarToggleItem_16b3d_182 {\n    padding: 0;\n  }\n\n._diffSourceToggle_16b3d_883 ._toolbarToggleItem_16b3d_182 > span {\n      display: block;\n      padding: var(--spacing-2) var(--spacing-3);\n    }\n\n._selectWithLabel_16b3d_897 {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  margin-left: var(--spacing-2);\n}\n\n._selectWithLabel_16b3d_897 > label {\n    font-size: var(--text-sm);\n  }\n\n._selectWithLabel_16b3d_897 ._selectTrigger_16b3d_268 {\n    border: 1px solid var(--baseBorder);\n  }\n\n._toolbarTitleMode_16b3d_911 {\n  font-size: var(--text-sm);\n  margin-left: var(--spacing-2);\n}\n\n\n._imageControlWrapperResizing_16b3d_917 {\n  touch-action: none;\n}\n\n._imageResizer_16b3d_921 {\n  display: block;\n  width: 7px;\n  height: 7px;\n  position: absolute;\n  background-color: var(--accentText);\n  border: 1px solid var(--baseBg);\n}\n\n._imageResizer_16b3d_921._imageResizerN_16b3d_930 {\n  top: -6px;\n  left: 48%;\n  cursor: n-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerNe_16b3d_936 {\n  top: -6px;\n  right: -6px;\n  cursor: ne-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerE_16b3d_942 {\n  bottom: 48%;\n  right: -6px;\n  cursor: e-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerSe_16b3d_948 {\n  bottom: -2px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerS_16b3d_948 {\n  bottom: -2px;\n  left: 48%;\n  cursor: s-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerSw_16b3d_960 {\n  bottom: -2px;\n  left: -6px;\n  cursor: sw-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerW_16b3d_966 {\n  bottom: 48%;\n  left: -6px;\n  cursor: w-resize;\n}\n\n._imageResizer_16b3d_921._imageResizerNw_16b3d_972 {\n  top: -6px;\n  left: -6px;\n  cursor: nw-resize;\n}\n\n._placeholder_16b3d_978 {\n    color: var(--baseSolid);\n    overflow: hidden;\n    position: absolute;\n    top: 0;\n    padding: var(--spacing-3);\n    text-overflow: ellipsis;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    white-space: nowrap;\n    display: inline-block;\n    pointer-events: none;\n}\n  \n._rootContentEditableWrapper_16b3d_991 {\n  position: relative;\n}\n\n\n\n._downshiftContainer_16b3d_997 {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n\n._downshiftInputWrapper_16b3d_1003 {\n  display: flex;\n  align-items: center;\n  background-color: var(--baseBase);\n\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n}\n\n._downshiftInputWrapper_16b3d_1003[data-visible-dropdown=true] {\n    border-bottom-left-radius: var(--radius-none) ;\n    border-bottom-right-radius: var(--radius-none) ;\n    border-bottom-width: 0;\n  }\n\n._downshiftInputWrapper_16b3d_1003 > button {\n    border: 0;\n    background-color: transparent;\n    font-size: inherit;\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n    all: unset;\n    box-sizing: border-box;\n    cursor: default;\n    padding-right: var(--spacing-2);\n  }\n\n._downshiftInput_16b3d_1003 {\n  border: 0;\n  background-color: transparent;\n  font-size: inherit;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  all: unset;\n  box-sizing: border-box;\n  cursor: default;\n  width: 20rem;\n  padding: var(--spacing-2) var(--spacing-3);\n  font-size: var(--text-sm);\n}\n\n._downshiftInput_16b3d_1003::-moz-placeholder {\n    color: var(--baseBorder);\n  }\n\n._downshiftInput_16b3d_1003::placeholder {\n    color: var(--baseBorder);\n  }\n\n._downshiftAutocompleteContainer_16b3d_1033 {\n  position: relative;\n}\n\n._downshiftAutocompleteContainer_16b3d_1033 ul {\n    all: unset;\n    box-sizing: border-box;\n    position: absolute;\n    font-size: var(--text-sm);\n    width: 100%;\n    display: none;\n    border-bottom-left-radius: var(--radius-medium) ;\n    border-bottom-right-radius: var(--radius-medium) ;\n    max-height: var(--spacing-48);\n    overflow-x: hidden;\n    overflow-y: auto;\n    border: 1px solid var(--baseBorder);\n    border-top-width: 0;\n    background-color: var(--baseBase);\n  }\n\n._downshiftAutocompleteContainer_16b3d_1033 ul[data-visible=true] {\n      display: block;\n    }\n\n._downshiftAutocompleteContainer_16b3d_1033 ul li {\n      padding: var(--spacing-2) var(--spacing-3);\n      white-space: nowrap;\n      margin-bottom: var(--spacing-1);\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n    }\n\n._downshiftAutocompleteContainer_16b3d_1033 ul li[data-selected=true] {\n        background-color: var(--baseBgSubtle);\n      }\n\n._downshiftAutocompleteContainer_16b3d_1033 ul li[data-highlighted=true] {\n        background-color: var(--baseBgHover);\n      }\n\n._downshiftAutocompleteContainer_16b3d_1033 ul li:last-of-type {\n        border-bottom-left-radius: var(--radius-medium) ;\n        border-bottom-right-radius: var(--radius-medium) ;\n      }\n\n._textInput_16b3d_1078 {\n  all: unset;\n  border-radius: var(--radius-base);\n  border:1px solid var(--baseBorder);\n  background-color: var(--baseBase);\n  padding: var(--spacing-2) var(--spacing-3);\n}\n\nform._multiFieldForm_16b3d_1086 {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacing-4);\n  gap: var(--spacing-4);\n}\n\nform._multiFieldForm_16b3d_1086 ._formField_16b3d_1092 {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-2);\n  }\n\n\n:root, ._light-theme_13nbk_1 {\n  --blue1: hsl(206, 100%, 99.2%);\n  --blue2: hsl(210, 100%, 98.0%);\n  --blue3: hsl(209, 100%, 96.5%);\n  --blue4: hsl(210, 98.8%, 94.0%);\n  --blue5: hsl(209, 95.0%, 90.1%);\n  --blue6: hsl(209, 81.2%, 84.5%);\n  --blue7: hsl(208, 77.5%, 76.9%);\n  --blue8: hsl(206, 81.9%, 65.3%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(208, 100%, 47.3%);\n  --blue11: hsl(211, 100%, 43.2%);\n  --blue12: hsl(211, 100%, 15.0%);\n}\n._dark-theme_13nbk_1 {\n  --blue1: hsl(212, 35.0%, 9.2%);\n  --blue2: hsl(216, 50.0%, 11.8%);\n  --blue3: hsl(214, 59.4%, 15.3%);\n  --blue4: hsl(214, 65.8%, 17.9%);\n  --blue5: hsl(213, 71.2%, 20.2%);\n  --blue6: hsl(212, 77.4%, 23.1%);\n  --blue7: hsl(211, 85.1%, 27.4%);\n  --blue8: hsl(211, 89.7%, 34.1%);\n  --blue9: hsl(206, 100%, 50.0%);\n  --blue10: hsl(209, 100%, 60.6%);\n  --blue11: hsl(210, 100%, 66.1%);\n  --blue12: hsl(206, 98.0%, 95.8%);\n}\n:root, ._light-theme_13nbk_1 {\n  --slate1: hsl(206, 30.0%, 98.8%);\n  --slate2: hsl(210, 16.7%, 97.6%);\n  --slate3: hsl(209, 13.3%, 95.3%);\n  --slate4: hsl(209, 12.2%, 93.2%);\n  --slate5: hsl(208, 11.7%, 91.1%);\n  --slate6: hsl(208, 11.3%, 88.9%);\n  --slate7: hsl(207, 11.1%, 85.9%);\n  --slate8: hsl(205, 10.7%, 78.0%);\n  --slate9: hsl(206, 6.0%, 56.1%);\n  --slate10: hsl(206, 5.8%, 52.3%);\n  --slate11: hsl(206, 6.0%, 43.5%);\n  --slate12: hsl(206, 24.0%, 9.0%);\n}\n._dark-theme_13nbk_1 {\n  --slate1: hsl(200, 7.0%, 8.8%);\n  --slate2: hsl(195, 7.1%, 11.0%);\n  --slate3: hsl(197, 6.8%, 13.6%);\n  --slate4: hsl(198, 6.6%, 15.8%);\n  --slate5: hsl(199, 6.4%, 17.9%);\n  --slate6: hsl(201, 6.2%, 20.5%);\n  --slate7: hsl(203, 6.0%, 24.3%);\n  --slate8: hsl(207, 5.6%, 31.6%);\n  --slate9: hsl(206, 6.0%, 43.9%);\n  --slate10: hsl(206, 5.2%, 49.5%);\n  --slate11: hsl(206, 6.0%, 63.0%);\n  --slate12: hsl(210, 6.0%, 93.0%);\n}\n:root, ._light-theme_13nbk_1 {\n  --grass1: hsl(116, 50.0%, 98.9%);\n  --grass2: hsl(120, 60.0%, 97.1%);\n  --grass3: hsl(120, 53.6%, 94.8%);\n  --grass4: hsl(121, 47.5%, 91.4%);\n  --grass5: hsl(122, 42.6%, 86.5%);\n  --grass6: hsl(124, 39.0%, 79.7%);\n  --grass7: hsl(126, 37.1%, 70.2%);\n  --grass8: hsl(131, 38.1%, 56.3%);\n  --grass9: hsl(131, 41.0%, 46.5%);\n  --grass10: hsl(132, 43.1%, 42.2%);\n  --grass11: hsl(133, 50.0%, 32.5%);\n  --grass12: hsl(130, 30.0%, 14.9%);\n}\n:root, ._light-theme_13nbk_1 {\n  --cyan1: hsl(185, 60.0%, 98.7%);\n  --cyan2: hsl(185, 73.3%, 97.1%);\n  --cyan3: hsl(186, 70.2%, 94.4%);\n  --cyan4: hsl(186, 63.8%, 90.6%);\n  --cyan5: hsl(187, 58.3%, 85.4%);\n  --cyan6: hsl(188, 54.6%, 78.4%);\n  --cyan7: hsl(189, 53.7%, 68.7%);\n  --cyan8: hsl(189, 60.3%, 52.5%);\n  --cyan9: hsl(190, 95.0%, 39.0%);\n  --cyan10: hsl(191, 91.2%, 36.8%);\n  --cyan11: hsl(192, 85.0%, 31.0%);\n  --cyan12: hsl(192, 88.0%, 12.5%);\n}\n:root, ._light-theme_13nbk_1 {\n  --amber1: hsl(39, 70.0%, 99.0%);\n  --amber2: hsl(40, 100%, 96.5%);\n  --amber3: hsl(44, 100%, 91.7%);\n  --amber4: hsl(43, 100%, 86.8%);\n  --amber5: hsl(42, 100%, 81.8%);\n  --amber6: hsl(38, 99.7%, 76.3%);\n  --amber7: hsl(36, 86.1%, 67.1%);\n  --amber8: hsl(35, 85.2%, 55.1%);\n  --amber9: hsl(39, 100%, 57.0%);\n  --amber10: hsl(35, 100%, 55.5%);\n  --amber11: hsl(30, 100%, 34.0%);\n  --amber12: hsl(20, 80.0%, 17.0%);\n}\n:root, ._light-theme_13nbk_1 {\n  --red1: hsl(359, 100%, 99.4%);\n  --red2: hsl(359, 100%, 98.6%);\n  --red3: hsl(360, 100%, 96.8%);\n  --red4: hsl(360, 97.9%, 94.8%);\n  --red5: hsl(360, 90.2%, 91.9%);\n  --red6: hsl(360, 81.7%, 87.8%);\n  --red7: hsl(359, 74.2%, 81.7%);\n  --red8: hsl(359, 69.5%, 74.3%);\n  --red9: hsl(358, 75.0%, 59.0%);\n  --red10: hsl(358, 69.4%, 55.2%);\n  --red11: hsl(358, 65.0%, 48.7%);\n  --red12: hsl(354, 50.0%, 14.6%);\n}\n._bold_13nbk_10 {\n  font-weight: bold;\n}\n._italic_13nbk_14 {\n  font-style: italic;\n}\n._underline_13nbk_18 {\n  text-decoration: underline;\n}\n._bold_13nbk_10 {\n    font-weight: 700\n}\n._italic_13nbk_14 {\n    font-style: italic\n}\n._underline_13nbk_18 {\n    text-decoration: underline\n}\n._strikethrough_13nbk_34 {\n    text-decoration: line-through\n}\n._underlineStrikethrough_13nbk_38 {\n    text-decoration: underline line-through\n}\n._subscript_13nbk_42 {\n    font-size: .8em;\n    vertical-align: sub!important\n}\n._superscript_13nbk_47 {\n    font-size: .8em;\n    vertical-align: super\n}\n._code_13nbk_52 {\n    background-color: var(--baseBg);\n    padding: 1px .25rem;\n    font-family: var(--font-mono);\n    font-size: 94%\n}\n._nestedListItem_13nbk_59 {\n  list-style:none;\n}\n._admonitionDanger_13nbk_63, ._admonitionInfo_13nbk_63, ._admonitionNote_13nbk_63, ._admonitionTip_13nbk_63, ._admonitionCaution_13nbk_63 {\n  padding: var(--spacing-2);\n  margin-top: var(--spacing-2);\n  margin-bottom: var(--spacing-2);\n  border-left: 3px solid var(--admonitionBorder);\n  background-color: var(--admonitionBg);\n}\n._admonitionInfo_13nbk_63 {\n  --admonitionBorder: var(--admonitionInfoBorder);\n  --admonitionBg: var(--admonitionInfoBg);\n}\n._admonitionTip_13nbk_63 {\n  --admonitionBorder: var(--admonitionTipBorder);\n  --admonitionBg: var(--admonitionTipBg);\n}\n._admonitionCaution_13nbk_63 {\n  --admonitionBorder: var(--admonitionCautionBorder);\n  --admonitionBg: var(--admonitionCautionBg);\n}\n._admonitionDanger_13nbk_63 {\n  --admonitionBorder: var(--admonitionDangerBorder);\n  --admonitionBg: var(--admonitionDangerBg);\n}\n._admonitionNote_13nbk_63 {\n  --admonitionBorder: var(--admonitionNoteBorder);\n  --admonitionBg: var(--admonitionNoteBg);\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./node_modules/@tldraw/tldraw/tldraw.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"/* THIS CSS FILE IS GENERATED! DO NOT EDIT. OR EDIT. I'M A COMMENT NOT A COP */ \n/* This file is created by the copy-css-files.mjs script in @tldraw/tldraw. */ \n/* It combines @tldraw/editor's editor.css and @tldraw/tldraw's ui.css */ \n/* @tldraw/editor */ \n.tl-container {\n\tfont-size: 12px;\n\t/* Spacing */\n\t--space-1: 2px;\n\t--space-2: 4px;\n\t--space-3: 8px;\n\t--space-4: 12px;\n\t--space-5: 16px;\n\t--space-6: 20px;\n\t--space-7: 28px;\n\t--space-8: 32px;\n\t--space-9: 64px;\n\t--space-10: 72px;\n\t/* Radius */\n\t--radius-0: 2px;\n\t--radius-1: 4px;\n\t--radius-2: 7px;\n\t--radius-3: 9px;\n\t--radius-4: 12px;\n\t--radius-5: 16px;\n\t--layer-grid: 150;\n\t--layer-canvas: 200;\n\t/* Misc */\n\t--tl-zoom: 1;\n\t--tl-dpr-multiple: 100;\n\t--tl-dpr-multiple-px: calc(var(--tl-dpr-multiple) * 1px);\n\n\t/* Cursor SVGs */\n\t--tl-cursor-none: none;\n\t--tl-cursor-default: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z' fill='white'/><path d='m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z' fill='white'/><path d='m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z' fill='black'/><path d='m13 10.814v11.188l2.969-2.866.428-.139h4.768z' fill='black'/></g></svg>\")\n\t\t\t12 8,\n\t\tdefault;\n\t--tl-cursor-pointer: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z' fill='white'/><g stroke='black' stroke-linecap='round' stroke-width='.75'><path d='m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z' stroke-linejoin='round'/><path d='m21.5664 21.7344v-3.459'/><path d='m19.5508 21.7461-.016-3.473'/><path d='m17.5547 18.3047.021 3.426'/></g></g></svg>\")\n\t\t\t14 10,\n\t\tpointer;\n\t--tl-cursor-cross: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z' fill='white'/><path d='m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z' fill='%23231f1f'/></g></svg>\")\n\t\t\t16 16,\n\t\tcrosshair;\n\t--tl-cursor-move: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z' fill='white'/><g fill='black'><path d='m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z'/><path d='m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tmove;\n\t--tl-cursor-grab: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121' fill='white'/><g stroke='black' stroke-linecap='round' stroke-width='.75'><path d='m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121' stroke-linejoin='round'/><path d='m20.5664 21.7344v-3.459'/><path d='m18.5508 21.7461-.016-3.473'/><path d='m16.5547 18.3047.021 3.426'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tgrab;\n\t--tl-cursor-grabbing: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tgrabbing;\n\t--tl-cursor-text: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path fill='white' d='M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z'/><path fill='black' d='M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z'/></g></svg>\")\n\t\t\t4 10,\n\t\ttext;\n\t--tl-cursor-zoom-in: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5' fill='white'/><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z' stroke='black'/><g fill='black'><path d='m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z'/><path d='m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tzoom-in;\n\t--tl-cursor-zoom-out: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5' fill='white'/><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z' stroke='black'/><g fill='black'><path d='m18 16h-5.98v-1.98h5.98z'/><path d='m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tzoom-out;\n\n\t/* These cursor values get programmatically overridden */\n\t/* They're just here to help your editor autocomplete */\n\t--tl-cursor: var(--tl-cursor-default);\n\t--tl-cursor-resize-edge: ew-resize;\n\t--tl-cursor-resize-corner: nesw-resize;\n\t--tl-cursor-ew-resize: ew-resize;\n\t--tl-cursor-ns-resize: ns-resize;\n\t--tl-cursor-nesw-resize: nesw-resize;\n\t--tl-cursor-nwse-resize: nwse-resize;\n\t--tl-cursor-rotate: pointer;\n\t--tl-cursor-nwse-rotate: pointer;\n\t--tl-cursor-nesw-rotate: pointer;\n\t--tl-cursor-senw-rotate: pointer;\n\t--tl-cursor-swne-rotate: pointer;\n\t--tl-scale: calc(1 / var(--tl-zoom));\n\t--tl-font-draw: 'tldraw_draw', sans-serif;\n\t--tl-font-sans: 'tldraw_sans', sans-serif;\n\t--tl-font-serif: 'tldraw_serif', serif;\n\t--tl-font-mono: 'tldraw_mono', monospace;\n\t--a: calc(min(0.5, 1 / var(--tl-zoom)) * 2px);\n\t--b: calc(min(0.5, 1 / var(--tl-zoom)) * -2px);\n\t--tl-text-outline: 0 var(--b) 0 var(--color-background), 0 var(--a) 0 var(--color-background),\n\t\tvar(--b) var(--b) 0 var(--color-background), var(--a) var(--b) 0 var(--color-background),\n\t\tvar(--a) var(--a) 0 var(--color-background), var(--b) var(--a) 0 var(--color-background);\n\t/* Own properties */\n\tposition: relative;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: clip;\n} \n.tl-theme__light {\n\t--color-accent: #e64a4a;\n\t--color-background: rgb(249, 250, 251);\n\t--color-brush-fill: rgba(144, 144, 144, 0.102);\n\t--color-brush-stroke: rgba(144, 144, 144, 0.251);\n\t--color-grid: rgb(109, 109, 109);\n\t--color-low: rgb(237, 240, 242);\n\t--color-culled: rgb(235, 238, 240);\n\t--color-muted-0: rgba(0, 0, 0, 0.02);\n\t--color-muted-1: rgba(0, 0, 0, 0.1);\n\t--color-muted-2: rgba(0, 0, 0, 0.042);\n\t--color-hint: rgba(0, 0, 0, 0.055);\n\t--color-overlay: rgba(0, 0, 0, 0.2);\n\t--color-divider: #e8e8e8;\n\t--color-panel-contrast: #ffffff;\n\t--color-panel-overlay: rgba(255, 255, 255, 0.82);\n\t--color-panel: #fdfdfd;\n\t--color-focus: #004094;\n\t--color-selected: #2f80ed;\n\t--color-selected-contrast: #ffffff;\n\t--color-selection-fill: #1e90ff06;\n\t--color-selection-stroke: #2f80ed;\n\t--color-text-0: #1d1d1d;\n\t--color-text-1: #2d2d2d;\n\t--color-text-2: #5f6369;\n\t--color-text-3: #b6b7ba;\n\t--color-primary: #2f80ed;\n\t--color-warn: #d10b0b;\n\t--color-text: #000000;\n\t--color-laser: #ff0000;\n\n\t--shadow-1: 0px 1px 2px rgba(0, 0, 0, 0.22), 0px 1px 3px rgba(0, 0, 0, 0.09);\n\t--shadow-2: 0px 0px 2px rgba(0, 0, 0, 0.12), 0px 2px 3px rgba(0, 0, 0, 0.24),\n\t\t0px 2px 6px rgba(0, 0, 0, 0.1), inset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-3: 0px 1px 2px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.14),\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-4: 0px 0px 3px rgba(0, 0, 0, 0.16), 0px 5px 4px rgba(0, 0, 0, 0.16),\n\t\t0px 2px 16px rgba(0, 0, 0, 0.06), inset 0px 0px 0px 1px var(--color-panel-contrast);\n} \n.tl-theme__dark {\n\t--color-accent: #e64a4a;\n\t--color-background: #212529;\n\t--color-brush-fill: rgba(180, 180, 180, 0.05);\n\t--color-brush-stroke: rgba(180, 180, 180, 0.25);\n\t--color-grid: #909090;\n\t--color-low: #2c3136;\n\t--color-culled: rgb(47, 52, 57);\n\t--color-muted-0: rgba(255, 255, 255, 0.02);\n\t--color-muted-1: rgba(255, 255, 255, 0.1);\n\t--color-muted-2: rgba(255, 255, 255, 0.05);\n\t--color-hint: rgba(255, 255, 255, 0.1);\n\t--color-overlay: rgba(0, 0, 0, 0.35);\n\t--color-divider: #49555f;\n\t--color-panel-contrast: #49555f;\n\t--color-panel: #363d44;\n\t--color-panel-overlay: rgba(54, 61, 68, 0.82);\n\t--color-focus: #a5c3f3;\n\t--color-selected: #4285f4;\n\t--color-selected-contrast: #ffffff;\n\t--color-selection-fill: rgba(38, 150, 255, 0.05);\n\t--color-selection-stroke: #2f80ed;\n\t--color-text-0: #f0eded;\n\t--color-text-1: #d9d9d9;\n\t--color-text-2: #8e9094;\n\t--color-text-3: #515a62;\n\t--color-primary: #2f80ed;\n\t--color-warn: #d10b0b;\n\t--color-text: #f8f9fa;\n\t--color-laser: #ff0000;\n\n\t--shadow-1: 0px 1px 2px #00000029, 0px 1px 3px #00000038,\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-2: 0px 1px 3px #00000077, 0px 2px 6px #00000055,\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-3: 0px 1px 3px #00000077, 0px 2px 12px rgba(0, 0, 0, 0.22),\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n} \n.tl-counter-scaled {\n\ttransform: scale(var(--tl-scale));\n\ttransform-origin: top left;\n\twidth: calc(100% * var(--tl-zoom));\n\theight: calc(100% * var(--tl-zoom));\n} \n.tl-container,\n.tl-container * {\n\t-webkit-touch-callout: none;\n\t-webkit-tap-highlight-color: transparent;\n\tscrollbar-highlight-color: transparent;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t     user-select: none;\n\tbox-sizing: border-box;\n\toutline: none;\n} \n.tl-container a {\n\t-webkit-touch-callout: initial;\n} \n.tl-container:focus-within {\n\toutline: 1px solid var(--color-low);\n} \ninput,\n*[contenteditable],\n*[contenteditable] * {\n\t-webkit-user-select: text;\n} \n/* -------------------------------------------------- */ \n/*                       Canvas                       */ \n/* -------------------------------------------------- */ \n.tl-canvas {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tcolor: var(--color-text);\n\tz-index: var(--layer-canvas);\n\tcursor: var(--tl-cursor);\n\toverflow: clip;\n\tcontent-visibility: auto;\n\ttouch-action: none;\n\tcontain: strict;\n} \n.tl-fixed-layer {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tcontain: strict;\n\tpointer-events: none;\n} \n.tl-shapes {\n\tposition: relative;\n\tz-index: 2;\n} \n.tl-overlays {\n\tposition: relative;\n\tz-index: 3;\n} \n.tl-overlays__item {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: var(--tl-dpr-multiple-px);\n\twidth: var(--tl-dpr-multiple-px);\n\toverflow: visible;\n\tpointer-events: none;\n\ttransform-origin: top left;\n} \n.tl-svg-context {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: var(--tl-dpr-multiple-px);\n\twidth: var(--tl-dpr-multiple-px);\n\tpointer-events: none;\n} \n.tl-positioned {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\ttransform-origin: top left;\n} \n/* ------------------- Background ------------------- */ \n.tl-background {\n\tposition: absolute;\n\tbackground-color: var(--color-background);\n\tinset: 0px;\n} \n/* --------------------- Grid Layer --------------------- */ \n.tl-grid {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\ttouch-action: none;\n\tpointer-events: none;\n\tz-index: 2;\n\tcontain: strict;\n} \n.tl-grid-dot {\n\tfill: var(--color-grid);\n} \n/* --------------------- Layers --------------------- */ \n.tl-html-layer {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 1px;\n\theight: 1px;\n\tcontain: layout style size;\n} \n/* ---------------------- Brush --------------------- */ \n.tl-brush {\n\tstroke-width: calc(var(--tl-scale) * 1px);\n\tcontain: size layout;\n} \n.tl-brush__default {\n\tstroke: var(--color-brush-stroke);\n\tfill: var(--color-brush-fill);\n} \n/* -------------------- Scribble -------------------- */ \n.tl-scribble {\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tpointer-events: none;\n\tcontain: size layout;\n} \n/* ---------------------- Shape --------------------- */ \n.tl-shape {\n\tposition: absolute;\n\tpointer-events: none;\n\toverflow: visible;\n\ttransform-origin: top left;\n\tcontain: size layout;\n} \n.tl-shape__culled {\n\tposition: relative;\n\tbackground-color: var(--color-culled);\n} \n/* ---------------- Shape Containers ---------------- */ \n.tl-svg-container {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: none;\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n\ttransform-origin: top left;\n\toverflow: visible;\n} \n.tl-html-container {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: none;\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n\t/* content-visibility: auto; */\n\ttransform-origin: top left;\n\tcolor: inherit;\n} \n/* --------------- Overlay Stack --------------- */ \n/* back of the stack, behind user's stuff */ \n.tl-collaborator__scribble {\n\tz-index: 10;\n} \n.tl-collaborator__brush {\n\tz-index: 20;\n} \n.tl-collaborator__shape-indicator {\n\tz-index: 30;\n} \n.tl-user-scribble {\n\tz-index: 40;\n} \n.tl-user-brush {\n\tz-index: 50;\n} \n.tl-user-indicator__selected {\n\tz-index: 60;\n} \n.tl-user-indicator__hovered {\n\tz-index: 70;\n} \n.tl-user-handles {\n\tz-index: 80;\n} \n.tl-user-snapline {\n\tz-index: 90;\n} \n.tl-selection__fg {\n\tpointer-events: none;\n\tz-index: 100;\n} \n.tl-user-indicator__hint {\n\tz-index: 110;\n\tstroke-width: calc(2.5px * var(--tl-scale));\n} \n/* behind collaborator cursor */ \n.tl-collaborator__cursor-hint {\n\tz-index: 120;\n} \n.tl-collaborator__cursor {\n\tz-index: 130;\n} \n.tl-cursor {\n\toverflow: visible;\n} \n/* -------------------- Indicator ------------------- */ \n.tl-shape-indicator {\n\ttransform-origin: top left;\n\tfill: none;\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tcontain: size;\n} \n/* ------------------ SelectionBox ------------------ */ \n.tl-selection__bg {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\ttransform-origin: top left;\n\tbackground-color: transparent;\n\tpointer-events: all;\n} \n.tl-selection__fg__outline {\n\tfill: none;\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n} \n.tl-corner-handle {\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n} \n.tl-text-handle {\n\tpointer-events: none;\n\tfill: var(--color-selection-stroke);\n} \n.tl-corner-crop-handle {\n\tpointer-events: none;\n\tfill: none;\n\tstroke: var(--color-selection-stroke);\n} \n.tl-corner-crop-edge-handle {\n\tpointer-events: none;\n\tfill: none;\n\tstroke: var(--color-selection-stroke);\n} \n.tl-rotate-handle {\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tpointer-events: all;\n} \n.tl-mobile-rotate__bg {\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-grab);\n} \n.tl-mobile-rotate__fg {\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n} \n.tl-transparent {\n\tfill: transparent;\n\tstroke: transparent;\n} \n/* --------------------- Handles -------------------- */ \n.tl-handle {\n\tpointer-events: all;\n} \n.tl-handle__bg {\n\tfill: transparent;\n\tstroke: transparent;\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-grabbing);\n} \n.tl-handle__fg {\n\tfill: var(--color-background);\n\tstroke: var(--color-selection-stroke);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tpointer-events: none;\n} \n.tl-handle__create {\n\topacity: 0;\n} \n.tl-handle__create:hover {\n\topacity: 1;\n} \n.tl-handle__bg:active {\n\tfill: none;\n} \n.tl-handle__bg:hover {\n\tcursor: var(--tl-cursor-grab);\n\tfill: var(--color-selection-fill);\n} \n@media (pointer: coarse) {\n\t.tl-handle__bg:active {\n\t\tfill: var(--color-selection-fill);\n\t}\n\n\t.tl-handle__create {\n\t\topacity: 1;\n\t}\n} \n/* ------------------ Bounds Detail ----------------- */ \n.tl-image,\n.tl-video {\n\t-o-object-fit: cover;\n\t   object-fit: cover;\n\tbackground-size: cover;\n\twidth: 100%;\n\theight: 100%;\n} \n.tl-image-container,\n.tl-video-container,\n.tl-embed-container {\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: all;\n\t/* background-color: var(--color-background); */\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n} \n.tl-image__tg {\n\t--scale: calc(min(2, var(--tl-scale)));\n\tposition: absolute;\n\ttop: calc(var(--scale) * 8px);\n\tright: calc(var(--scale) * 8px);\n\tfont-size: 10px;\n\ttransform-origin: top right;\n\tbackground-color: var(--color-background);\n\tpadding: 2px 4px;\n\tborder-radius: 4px;\n} \n/* --------------------- Nametag -------------------- */ \n.tl-collaborator-cursor {\n\tposition: absolute;\n} \n.tl-nametag {\n\ttop: 16px;\n\tleft: 13px;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tmax-width: 120px;\n\tpadding: 3px 6px;\n\twhite-space: nowrap;\n\tposition: absolute;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\tborder-radius: var(--radius-2);\n\tcolor: var(--color-selected-contrast);\n} \n.tl-nametag-title {\n\ttop: -2px;\n\tleft: 13px;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tpadding: 0px 6px;\n\tmax-width: 120px;\n\twhite-space: nowrap;\n\tposition: absolute;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\ttext-shadow: var(--tl-text-outline);\n\tcolor: var(--color-selected-contrast);\n} \n.tl-nametag-chat {\n\ttop: 16px;\n\tleft: 13px;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tcolor: var(--color-selected-contrast);\n\twhite-space: nowrap;\n\tposition: absolute;\n\tpadding: 3px 6px;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\topacity: 1;\n\tborder-radius: var(--radius-2);\n} \n.tl-cursor-chat {\n\tposition: absolute;\n\tcolor: var(--color-selected-contrast);\n\twhite-space: nowrap;\n\tpadding: 3px 6px;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\tpointer-events: none;\n\tz-index: var(--layer-cursor);\n\tmargin-top: 16px;\n\tmargin-left: 13px;\n\topacity: 1;\n\tborder: none;\n\t-webkit-user-select: text;\n\t   -moz-user-select: text;\n\t        user-select: text;\n\tborder-radius: var(--radius-2);\n} \n.tl-cursor-chat .tl-cursor-chat__bubble {\n\tpadding-right: 12px;\n} \n.tl-cursor-chat::-moz-selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n} \n.tl-cursor-chat::selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n} \n.tl-cursor-chat-fade {\n\t/* Setting to zero causes it to immediately disappear */\n\t/* Setting to near-zero causes it to fade out gradually */\n\topacity: 0.0001;\n\ttransition: opacity 5s ease-in-out;\n} \n.tl-cursor-chat::-moz-placeholder {\n\tcolor: var(--color-selected-contrast);\n\topacity: 0.7;\n} \n.tl-cursor-chat::placeholder {\n\tcolor: var(--color-selected-contrast);\n\topacity: 0.7;\n} \n/* -------------------------------------------------- */ \n/*                       Spinner                      */ \n/* -------------------------------------------------- */ \n@keyframes spinner {\n\tto {\n\t\ttransform: rotate(360deg);\n\t}\n} \n.tl-spinner::after {\n\tcontent: '';\n\tbox-sizing: border-box;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\twidth: 20px;\n\theight: 20px;\n\tmargin-top: -10px;\n\tmargin-left: -10px;\n\tborder-radius: 50%;\n\tborder: 2px solid #ccc;\n\tborder-top-color: #000;\n\tanimation: spinner 0.6s linear infinite;\n\tpointer-events: none;\n} \n/* -------------------- IconShape ------------------- */ \n.tl-iconshape__icon {\n\tpointer-events: all;\n\twidth: 100%;\n\theight: 100%;\n} \n.tl-icon-preview {\n\twidth: 14px;\n\theight: 14px;\n} \n/* ------------------- Text Shape ------------------- */ \n.tl-text-shape__wrapper {\n\tposition: relative;\n\tfont-weight: normal;\n\tmin-width: 1px;\n\tpadding: 0px;\n\tmargin: 0px;\n\tborder: none;\n\theight: 100%;\n\tfont-variant: normal;\n\tfont-style: normal;\n\tpointer-events: all;\n\twhite-space: pre-wrap;\n\toverflow-wrap: break-word;\n\ttext-shadow: var(--tl-text-outline);\n} \n.tl-text-shape__wrapper[data-align='start'] {\n\ttext-align: left;\n} \n.tl-text-shape__wrapper[data-align='middle'] {\n\ttext-align: center;\n} \n.tl-text-shape__wrapper[data-align='end'] {\n\ttext-align: right;\n} \n.tl-text-shape__wrapper[data-font='draw'] {\n\tfont-family: var(--tl-font-draw);\n} \n.tl-text-shape__wrapper[data-font='sans'] {\n\tfont-family: var(--tl-font-sans);\n} \n.tl-text-shape__wrapper[data-font='serif'] {\n\tfont-family: var(--tl-font-serif);\n} \n.tl-text-shape__wrapper[data-font='mono'] {\n\tfont-family: var(--tl-font-mono);\n} \n.tl-text-shape__wrapper[data-isediting='true'] .tl-text-content {\n\topacity: 0;\n} \n.tl-text {\n\t/* remove overflow from textarea on windows */\n\tmargin: 0px;\n\tpadding: 0px;\n\tborder: 0px;\n\tcolor: inherit;\n\tcaret-color: var(--color-text);\n\tbackground: none;\n\t-o-border-image: none;\n\t   border-image: none;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\tfont-variant: inherit;\n\tfont-style: inherit;\n\ttext-align: inherit;\n\tletter-spacing: inherit;\n\ttext-shadow: inherit;\n\toutline: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tpointer-events: all;\n\ttext-rendering: auto;\n\ttext-transform: none;\n\ttext-indent: 0px;\n\tdisplay: inline-block;\n\t-webkit-appearance: auto;\n\t   -moz-appearance: auto;\n\t        appearance: auto;\n\t-moz-column-count: initial !important;\n\t     column-count: initial !important;\n\twriting-mode: horizontal-tb !important;\n\tword-spacing: 0px;\n} \n.tl-text-measure {\n\tposition: absolute;\n\tz-index: 999999;\n\ttop: -9999px;\n\tright: -9999px;\n\topacity: 0;\n\twidth: -moz-max-content;\n\twidth: max-content;\n\tbox-sizing: border-box;\n\tpointer-events: none;\n\tline-break: normal;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tresize: none;\n\tborder: none;\n\t-moz-user-select: none;\n\t     user-select: none;\n\tcontain: style paint;\n\t-webkit-user-select: none;\n} \n.tl-text-edit-container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n} \n.tl-text-input,\n.tl-text-content {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tmin-width: 1px;\n\tmin-height: 1px;\n\toverflow: visible;\n\toutline: none;\n} \n.tl-text-content {\n\tpointer-events: none;\n} \n.tl-text-input {\n\tresize: none;\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: text;\n\toverflow: hidden;\n\tcursor: var(--tl-cursor-text);\n} \n.tl-text-input::-moz-selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n} \n.tl-text-input::selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n} \n/* ------------------- Snap Lines ------------------- */ \n.tl-snap-line {\n\tstroke: var(--color-accent);\n\tstroke-width: calc(1px * var(--tl-scale));\n\tfill: none;\n} \n.tl-snap-point {\n\tstroke: var(--color-accent);\n\tstroke-width: calc(1px * var(--tl-scale));\n\tfill: none;\n} \n/* -------------------- Groups ------------------ */ \n.tl-group {\n\tstroke: var(--color-text);\n\tstroke-width: calc(1px * var(--tl-scale));\n\topacity: 0.5;\n} \n/* ------------------- Bookmark Shape ------------------- */ \n.tl-bookmark__container {\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\tborder: 1px solid var(--color-panel-contrast);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-2);\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n} \n.tl-bookmark__image_container {\n\tflex: 1;\n\toverflow: hidden;\n\tborder-top-left-radius: var(--radius-1);\n\tborder-top-right-radius: var(--radius-1);\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: flex-start;\n} \n.tl-bookmark__image_container > .tl-hyperlink-button::after {\n\tbackground-color: var(--color-panel);\n} \n.tl-bookmark__placeholder {\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-muted-2);\n\tborder-bottom: 1px solid var(--color-muted-2);\n} \n.tl-bookmark__image {\n\twidth: 100%;\n\theight: 100%;\n\t-o-object-fit: cover;\n\t   object-fit: cover;\n\t-o-object-position: center;\n\t   object-position: center;\n} \n.tl-bookmark__copy_container {\n\tbackground-color: var(--color-muted);\n\tpadding: var(--space-4);\n\tpointer-events: all;\n} \n.tl-bookmark__heading,\n.tl-bookmark__description,\n.tl-bookmark__link {\n\tmargin: 0px;\n\twidth: 100%;\n\tfont-family: inherit;\n} \n.tl-bookmark__heading {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding-bottom: var(--space-2);\n\tmargin: 8px 0px;\n} \n.tl-bookmark__description {\n\tfont-size: 12px;\n\tpadding-bottom: var(--space-4);\n} \n.tl-bookmark__link {\n\tfont-size: 14px;\n\tpointer-events: all;\n\tz-index: 999;\n\toverflow: hidden;\n\tdisplay: block;\n\tcolor: var(--color-text);\n\ttext-overflow: ellipsis;\n\ttext-decoration: none;\n\tcolor: var(--color-text-2);\n\tcursor: var(--tl-cursor-pointer);\n} \n.tl-bookmark__link:hover {\n\tcolor: var(--color-selected);\n} \n/* ---------------- Hyperlink Button ---------------- */ \n.tl-hyperlink-button {\n\tbackground: none;\n\tmargin: 0px;\n\tposition: absolute;\n\ttop: 0px;\n\tright: 0px;\n\theight: 44px;\n\twidth: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 200;\n\tfont-size: 12px;\n\tfont-weight: 400;\n\tcolor: var(--color-text-1);\n\tpadding: 13px;\n\tcursor: var(--tl-cursor-pointer);\n\tborder: none;\n\toutline: none;\n\tpointer-events: all;\n} \n.tl-hyperlink-button::after {\n\tcontent: '';\n\tz-index: -1;\n\tposition: absolute;\n\tright: 6px;\n\tbottom: 6px;\n\tdisplay: block;\n\twidth: calc(100% - 12px);\n\theight: calc(100% - 12px);\n\tborder-radius: var(--radius-1);\n\tbackground-color: var(--color-background);\n\tpointer-events: none;\n} \n.tl-hyperlink-button:hover {\n\tcolor: var(--color-selected);\n} \n.tl-hyperlink-button:focus-visible {\n\tcolor: var(--color-selected);\n} \n.tl-hyperlink-button__icon {\n\twidth: 18px;\n\theight: 18px;\n\tbackground-color: currentColor;\n\tpointer-events: none;\n} \n.tl-hyperlink-button__hidden {\n\tdisplay: none;\n} \n/* ---------------- Geo shape ---------------- */ \n.tl-text-label {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: var(--color-text);\n\ttext-shadow: var(--tl-text-outline);\n\tline-height: inherit;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 10;\n} \n.tl-text-label[data-isediting='true'] .tl-text-content {\n\topacity: 0;\n} \n.tl-text-label[data-hastext='false'][data-isediting='false'] > .tl-text-label__inner {\n\twidth: 40px;\n\theight: 40px;\n} \n.tl-text-label[data-hastext='true'][data-isediting='false'] .tl-text-content {\n\tpointer-events: all;\n} \n.tl-text-label__inner {\n\tposition: relative;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpointer-events: all;\n\tmin-height: auto;\n} \n.tl-text-label__inner > .tl-text {\n\tposition: relative;\n\ttop: 0px;\n\tleft: 0px;\n\tpadding: 16px;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\tborder-radius: var(--radius-1);\n\tmax-width: 100%;\n\tz-index: 3;\n} \n.tl-text-label__inner > .tl-text-input {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 16px;\n\tz-index: 4;\n} \n.tl-text-label[data-textwrap='true'] > .tl-text-label__inner {\n\tmax-width: 100%;\n} \n.tl-text-label[data-isediting='true'] {\n\tbackground-color: transparent;\n\tmin-height: auto;\n} \n.tl-text-label[data-isediting='true'] p {\n\topacity: 0;\n} \n.tl-text-label[data-align='start'],\n.tl-text-label[data-align='start-legacy'] {\n\ttext-align: left;\n} \n.tl-text-label[data-align='middle'],\n.tl-text-label[data-align='middle-legacy'] {\n\ttext-align: center;\n} \n.tl-text-label[data-align='end'],\n.tl-text-label[data-align='end-legacy'] {\n\ttext-align: right;\n} \n.tl-arrow-hint {\n\tstroke: var(--color-text-1);\n\tfill: none;\n\tstroke-linecap: round;\n\toverflow: visible;\n} \n.tl-arrow-label[data-font='draw'],\n.tl-text-label[data-font='draw'] {\n\tfont-family: var(--tl-font-draw);\n} \n.tl-arrow-label[data-font='sans'],\n.tl-text-label[data-font='sans'] {\n\tfont-family: var(--tl-font-sans);\n} \n.tl-arrow-label[data-font='serif'],\n.tl-text-label[data-font='serif'] {\n\tfont-family: var(--tl-font-serif);\n} \n.tl-arrow-label[data-font='mono'],\n.tl-text-label[data-font='mono'] {\n\tfont-family: var(--tl-font-mono);\n} \n/* ------------------- Arrow Shape ------------------ */ \n.tl-arrow-label {\n\tposition: absolute;\n\ttop: -1px;\n\tleft: -1px;\n\twidth: 2px;\n\theight: 2px;\n\tpadding: 0px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: var(--color-text);\n\ttext-shadow: var(--tl-text-outline);\n} \n.tl-arrow-label[data-isediting='true'] p {\n\topacity: 0;\n} \n.tl-arrow-label[data-isediting='true'] > .tl-arrow-label__inner {\n\tbackground-color: var(--color-background);\n} \n.tl-arrow-label__inner {\n\tborder-radius: var(--radius-1);\n\tbox-sizing: content-box;\n\tposition: relative;\n\theight: -moz-max-content;\n\theight: max-content;\n\twidth: -moz-max-content;\n\twidth: max-content;\n\tpointer-events: all;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n} \n.tl-arrow-label p,\n.tl-arrow-label textarea {\n\tmargin: 0px;\n\tpadding: 0px;\n\tborder: 0px;\n\tcolor: inherit;\n\tcaret-color: var(--color-text);\n\tbackground: none;\n\t-o-border-image: none;\n\t   border-image: none;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\tfont-variant: inherit;\n\tfont-style: inherit;\n\ttext-align: inherit;\n\tletter-spacing: inherit;\n\ttext-shadow: inherit;\n\toutline: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tpointer-events: all;\n\ttext-rendering: auto;\n\ttext-transform: none;\n\ttext-indent: 0px;\n\tdisplay: inline-block;\n\t-webkit-appearance: auto;\n\t   -moz-appearance: auto;\n\t        appearance: auto;\n\t-moz-column-count: initial !important;\n\t     column-count: initial !important;\n\twriting-mode: horizontal-tb !important;\n\tword-spacing: 0px;\n} \n.tl-arrow-label p {\n\tposition: relative;\n\theight: -moz-max-content;\n\theight: max-content;\n\tz-index: 2;\n\tpadding: 4px;\n\toverflow: visible;\n} \n.tl-arrow-label textarea {\n\tz-index: 3;\n\tmargin: 0px;\n\tpadding: 4px;\n\theight: 100%;\n\twidth: 100%;\n\tposition: absolute;\n\tresize: none;\n\tborder: 0px;\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: text;\n\tcaret-color: var(--color-text);\n\t-o-border-image: none;\n\t   border-image: none;\n\t/* Don't allow textarea to be zero width */\n\tmin-width: 4px;\n} \n/* -------------------- NoteShape ------------------- */ \n.tl-note__container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--radius-2);\n\tbox-shadow: var(--shadow-1);\n\toverflow: hidden;\n\tborder-color: currentColor;\n\tborder-style: solid;\n\tborder-width: 1px;\n} \n.tl-note__container .tl-text-label {\n\ttext-shadow: none;\n} \n.tl-note__scrim {\n\tposition: absolute;\n\tz-index: 1;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-background);\n\topacity: 0.28;\n} \n.tl-loading {\n\tbackground-color: var(--color-background);\n\tcolor: var(--color-text-1);\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: var(--space-2);\n\tfont-size: 14px;\n\tfont-weight: 500;\n\topacity: 0;\n\tanimation: fade-in 0.2s ease-in-out forwards;\n\tanimation-delay: 0.2s;\n} \n@keyframes fade-in {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n} \n/* -------------------- FrameShape ------------------- */ \n.tl-frame__body {\n\tstroke-width: calc(1px * var(--tl-scale));\n} \n.tl-frame__hitarea {\n\tborder-style: solid;\n\tborder-width: calc(8px * var(--tl-scale));\n\tborder-color: transparent;\n\tbackground: none;\n\tpointer-events: stroke;\n\tbox-sizing: border-box;\n\ttop: calc(-8px * var(--tl-scale));\n\tleft: calc(-8px * var(--tl-scale));\n\twidth: calc(100% + calc(16px * var(--tl-scale)));\n\theight: calc(100% + calc(16px * var(--tl-scale)));\n\tz-index: 1;\n\tposition: absolute;\n} \n.tl-frame-heading {\n\tdisplay: flex;\n\talign-items: center;\n\tposition: absolute;\n\ttransform-origin: 0% 100%;\n\toverflow: hidden;\n\tmax-width: 100%;\n\tmin-width: 32px;\n\theight: auto;\n\tfont-size: 12px;\n\tpadding-bottom: 4px;\n\tpointer-events: all;\n} \n.tl-frame-heading-hit-area {\n\tpointer-events: all;\n\t/* scale from bottom left corner so we can pin it to the top left corner of the frame */\n\ttransform-origin: 0% 100%;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n\talign-items: center;\n\tborder-radius: var(--radius-1);\n\tbackground-color: var(--color-background);\n} \n.tl-frame-label {\n\tpointer-events: all;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding: var(--space-3) var(--space-3);\n\tposition: relative;\n\tfont-size: inherit;\n\twhite-space: pre;\n\tborder: 1px solid transparent;\n} \n.tl-frame-label__editing {\n\tcolor: transparent;\n\twhite-space: pre;\n\twidth: auto;\n\toverflow: visible;\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-1);\n\tborder-color: var(--color-selected);\n} \n.tl-frame-name-input {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tborder: none;\n\tbackground: none;\n\toutline: none;\n\tpadding: var(--space-3) var(--space-3);\n\tinset: 0px;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\twidth: 100%;\n\tcolor: var(--color-text-1);\n\tborder-radius: var(--radius-1);\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: text;\n\twhite-space: pre;\n\tcursor: var(--tl-cursor-text);\n} \n/* If mobile use 16px as font size */ \n/* On iOS, font size under 16px in an input will make the page zoom into the input  */ \n/* https://css-tricks.com/16px-or-larger-text-prevents-ios-form-zoom/ */ \n@media (max-width: 600px) {\n\t.tl-frame-heading {\n\t\tfont-size: 16px;\n\t}\n} \n/* ------------------ iFrames Detail ----------------- */ \n.tl-embed {\n\tborder: none;\n\tborder-radius: var(--radius-2);\n} \n/* ------------------- Code Editor ------------------ */ \n.tl-image__button {\n\tpadding: 4px 8px;\n\tcolor: var(--color-text);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-2);\n\tbox-shadow: var(--shadow-1);\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-pointer);\n\toutline: none;\n\tdisplay: flex;\n} \n.tl-image__button:disabled {\n\topacity: 0.5;\n\tpointer-events: none;\n} \n.tl-image__toolbox {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: flex-end;\n\tpadding: 10px;\n} \n.tl-image__toolbox__hidden {\n\tdisplay: none;\n} \n/* -------------- Shape Error Boundary -------------- */ \n.tl-shape-error-boundary {\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-muted-1);\n\tborder-width: calc(1px * var(--tl-scale));\n\tborder-color: var(--color-muted-1);\n\tborder-style: solid;\n\tborder-radius: calc(var(--radius-1) * var(--tl-scale));\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\ttext-align: left;\n\tposition: relative;\n\tpointer-events: all;\n\toverflow: hidden;\n\tpadding: var(--space-2);\n} \n.tl-shape-error-boundary::before {\n\ttransform: scale(var(--tl-scale));\n\tcontent: 'Error';\n\tfont-size: 12px;\n\tfont-family: inherit;\n\tcolor: var(--color-text-0);\n} \n/* ----------------- Error Boundary ----------------- */ \n.tl-error-boundary {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: var(--space-4);\n\tbackground-color: var(--color-background);\n\tcolor: var(--color-text-1);\n\tposition: absolute;\n\tz-index: 600;\n} \n.tl-error-boundary__overlay {\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 500;\n\tbackground-color: var(--color-overlay);\n} \n.tl-error-boundary__content * {\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: text;\n\tpointer-events: all;\n} \n.tl-error-boundary__canvas {\n\tpointer-events: none;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: -1;\n} \n/* some browsers seem to have some weird interactions between stacking contexts\nand pointer-events. this ::after pseudo element covers the canvas and prevents\nit from receiving any pointer events or affecting the cursor. */ \n.tl-error-boundary__canvas::after {\n\tcontent: ' ';\n\tdisplay: block;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 600;\n\tpointer-events: all;\n} \n.tl-error-boundary__content {\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tmax-width: 100%;\n\twidth: 400px;\n\tmax-height: 100%;\n\tbackground-color: var(--color-panel);\n\tpadding: var(--space-6);\n\tborder-radius: var(--radius-4);\n\tbox-shadow: var(--shadow-2);\n\tfont-size: 14px;\n\tfont-weight: 400;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-5);\n\toverflow: auto;\n\tz-index: 600;\n} \n.tl-error-boundary__content__expanded {\n\twidth: 600px;\n} \n.tl-error-boundary__content h2 {\n\tfont-size: 16px;\n\tmargin: 0px;\n\tfont-weight: 500;\n} \n.tl-error-boundary__content p {\n\tline-height: 1.5;\n\tmargin: 0px;\n} \n.tl-error-boundary__content pre {\n\tbackground-color: var(--color-muted-2);\n\tpadding: var(--space-5);\n\tborder-radius: var(--radius-2);\n\toverflow: auto;\n\tfont-size: 12px;\n\tmax-height: 320px;\n\tmargin: 0px;\n} \n.tl-error-boundary__content button {\n\tbackground: none;\n\tborder: none;\n\tfont-family: inherit;\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tpadding: var(--space-4);\n\tborder-radius: var(--radius-3);\n\tcursor: var(--tl-cursor-pointer);\n\tcolor: inherit;\n\tbackground-color: transparent;\n} \n.tl-error-boundary__content button:hover {\n\tbackground-color: var(--color-low);\n} \n.tl-error-boundary__content a {\n\tcolor: var(--color-text-1);\n\tfont-weight: 500;\n\ttext-decoration: none;\n} \n.tl-error-boundary__content a:hover {\n\tcolor: var(--color-text-2);\n} \n.tl-error-boundary__content__error {\n\tposition: relative;\n} \n.tl-error-boundary__content__error button {\n\tposition: absolute;\n\ttop: var(--space-2);\n\tright: var(--space-2);\n\tfont-size: 12px;\n\tpadding: var(--space-2) var(--space-3);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-1);\n} \n.tl-error-boundary__content__actions {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tgap: var(--space-4);\n\tmargin: calc(var(--space-4) * -1);\n\tmargin-top: 0px;\n} \n.tl-error-boundary__content__actions__group {\n\tdisplay: flex;\n\tgap: var(--space-4);\n} \n.tl-error-boundary__content .tl-error-boundary__reset {\n\tcolor: var(--color-warn);\n} \n.tl-error-boundary__content .tl-error-boundary__refresh {\n\tbackground-color: var(--color-primary);\n\tcolor: var(--color-selected-contrast);\n} \n.tl-error-boundary__content .tl-error-boundary__refresh:hover {\n\tbackground-color: var(--color-primary);\n\topacity: 0.9;\n} \n/* --------------------- Coarse --------------------- */ \n@media screen and (pointer: coarse) {\n\t/* If mobile always show handle-hint as there is no hover state */\n\t.tl-canvas__mobile .tl-handle__hint {\n\t\topacity: 1;\n\t}\n} \n.tl-hidden {\n\topacity: 0;\n\tpointer-events: none;\n} \n.debug__ui-logger {\n\tposition: absolute;\n\ttop: 62px;\n\tleft: 16px;\n\tcolor: #555;\n\tfont-size: 12px;\n\tfont-family: monospace;\n} \n/* @tldraw/ui */ \n.tl-container {\n\t--layer-panels: 300;\n\t--layer-menus: 400;\n\t--layer-overlays: 500;\n\t--layer-toasts: 650;\n\t--layer-cursor: 700;\n} \n/* --------------------- Layout --------------------- */ \n.tlui-layout {\n\tposition: relative;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgrid-template-rows: minmax(0px, 1fr) auto;\n\tgrid-auto-rows: auto;\n\theight: 100%;\n\tmax-height: 100%;\n\toverflow: clip;\n\tpadding: var(--space-2);\n\tpointer-events: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t        user-select: none;\n\tcontain: strict;\n\tz-index: var(--layer-panels);\n\t-webkit-transform: translate3d(0, 0, 0);\n\t--sab: env(safe-area-inset-bottom);\n} \n.tlui-layout__top {\n\tgrid-column: 1;\n\tgrid-row: 1;\n\tdisplay: flex;\n\tmin-width: 0px;\n\tjustify-content: space-between;\n} \n.tlui-layout__top__left {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\twidth: 100%;\n\theight: 100%;\n\tflex: 0 1 0;\n} \n.tlui-layout__top__right {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end;\n\tjustify-content: flex-start;\n\theight: 100%;\n\tflex: 0 0 auto;\n\tmin-width: 0px;\n} \n.scrollable,\n.scrollable * {\n\tpointer-events: all;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n} \n/* ----------------- Helper Buttons ---------------- */ \n.tlui-helper-buttons {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\talign-items: flex-start;\n\twidth: -moz-min-content;\n\twidth: min-content;\n\tgap: var(--space-3);\n\tmargin: var(--space-3) var(--space-2);\n\twhite-space: nowrap;\n\tpointer-events: none;\n\tz-index: var(--layer-panels);\n} \n.tlui-helper-buttons > .tlui-button {\n\tpointer-events: all;\n\tbackground-color: var(--color-low);\n\tborder-radius: var(--radius-3);\n} \n/* ---------------------- Icon ---------------------- */ \n.tlui-icon {\n\tflex-shrink: 0;\n\twidth: 18px;\n\theight: 18px;\n\tbackground-color: currentColor;\n} \n.tlui-icon__small {\n\twidth: 15px;\n\theight: 15px;\n} \n/* --------------------- Slider --------------------- */ \n.tlui-slider {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t        user-select: none;\n\ttouch-action: none;\n} \n.tlui-slider__container {\n\twidth: 164px;\n\tpadding: 0px var(--space-4);\n} \n.tlui-slider__track {\n\tposition: relative;\n\tflex-grow: 1;\n\theight: 44px;\n\tcursor: pointer;\n} \n.tlui-slider__track::after {\n\tdisplay: block;\n\tposition: absolute;\n\ttop: calc(50% - 2px);\n\tcontent: '';\n\theight: 3px;\n\twidth: 100%;\n\tbackground-color: var(--color-muted-1);\n\tborder-radius: var(--radius-4);\n} \n.tlui-slider__range {\n\tposition: absolute;\n\ttop: calc(50% - 2px);\n\tleft: 0px;\n\theight: 3px;\n\tbackground-color: var(--color-selected);\n\tborder-radius: var(--radius-4);\n} \n.tlui-slider__thumb {\n\tall: unset;\n\tcursor: grab;\n\tdisplay: block;\n\twidth: 18px;\n\theight: 18px;\n\tposition: relative;\n\ttop: -1px;\n\tbackground-color: var(--color-panel);\n\tborder-radius: 999px;\n\tbox-shadow: inset 0px 0px 0px 2px var(--color-text-2);\n} \n.tlui-slider__thumb:active {\n\tcursor: grabbing;\n\tbox-shadow: inset 0px 0px 0px 2px var(--color-text-2), var(--shadow-1);\n} \n.tlui-slider__thumb:focus-visible {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n} \n/* ----------------------- Kbd ---------------------- */ \n.tlui-kbd {\n\tfont-family: inherit;\n\tfont-size: 11px;\n\tline-height: 11px;\n\tdisplay: grid;\n\tjustify-items: center;\n\tgrid-auto-flow: column;\n\tgrid-template-columns: auto;\n\tgrid-auto-columns: minmax(1em, auto);\n\tgap: 1px;\n\talign-self: bottom;\n\tcolor: var(--color-text-2);\n\tmargin-left: var(--space-4);\n} \n.tlui-kbd > span {\n\twidth: 100%;\n\ttext-align: center;\n\tdisplay: inline;\n\tmargin: 0px;\n\tpadding: 2px;\n\tborder-radius: 2px;\n} \n.tlui-kbd:not(:last-child) {\n\tmargin-right: var(--space-2);\n} \n/* --------------------- Button --------------------- */ \n.tlui-button {\n\tmargin: 0px;\n\tposition: relative;\n\tz-index: 1;\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: inherit;\n\tfont-size: 12px;\n\tfont-weight: inherit;\n\tcolor: var(--color-text-1);\n\tpadding: 0px 13px;\n\tcursor: pointer;\n\tborder: none;\n\toutline: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t        user-select: none;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tbackground: transparent;\n\ttext-shadow: 1px 1px 0px var(--color-panel);\n} \n.tlui-button::after {\n\tcontent: '';\n\tz-index: 1;\n\tposition: absolute;\n\tright: 4px;\n\tbottom: 4px;\n\tdisplay: block;\n\twidth: calc(100% - 8px);\n\theight: calc(100% - 8px);\n\tborder-radius: var(--radius-3);\n\tbackground-color: transparent;\n\tpointer-events: none;\n} \n.tlui-button > span {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: center;\n} \n.tlui-button > span:not(:only-child) {\n\tflex-grow: 2;\n} \n.tlui-button > span > svg {\n\tmargin-left: var(--space-2);\n} \n.tlui-button:disabled {\n\tcursor: default;\n\tcolor: var(--color-text-3);\n} \n.tlui-button:not([data-state='selected'], :disabled):active::after {\n\tbackground: var(--color-muted-2);\n} \n@media (hover: hover) {\n\t.tlui-button:not([data-state='selected'], :disabled):hover::after {\n\t\tbackground: var(--color-muted-2);\n\t}\n} \n.tlui-icon-left {\n\tmargin-right: var(--space-4);\n} \n.tlui-button > * {\n\tposition: relative;\n\tz-index: 100;\n\tcolor: inherit;\n} \n.tlui-button > svg {\n\twidth: 18px;\n\theight: 18px;\n\tpointer-events: none;\n} \n.tlui-button:not(:disabled, :focus-visible, [data-state='open']):active {\n\tz-index: 2;\n\tcolor: var(--color-text-0);\n} \n.tlui-button:not(:hover, :disabled, [data-state='open']):focus-visible::after {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n} \n.tlui-button[data-state='selected']:not(:hover, :disabled):focus-visible::after {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n} \n@media (hover: hover) {\n\t.tlui-button:not(:disabled, :focus-visible):hover {\n\t\tz-index: 2;\n\t\tcolor: var(--color-text-0);\n\t}\n\n\t/* \n\t.tlui-button:not(:disabled, :focus-visible):hover::after {\n\t\tbox-shadow: inset 0 0 0 1px var(--color-muted-1);\n\t} */\n\n\t.tlui-button__primary:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-primary);\n\t}\n\n\t.tlui-button__warning:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-warn);\n\t}\n} \n.tlui-button:disabled {\n\tcolor: var(--color-text-3);\n} \n/* Selected */ \n.tlui-button[data-state='selected'] {\n\tcolor: var(--color-selected-contrast);\n} \n.tlui-button[data-state='selected']:not(:disabled, :focus-visible):active {\n\tcolor: var(--color-selected-contrast);\n} \n@media (hover: hover) {\n\t.tlui-button[data-state='selected']:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-selected-contrast);\n\t}\n} \n.tlui-button[data-state='selected']:not(:disabled)::after {\n\tbackground: var(--color-selected);\n} \n/* Hinted */ \n.tlui-button[data-state='hinted']::after {\n\tbackground: var(--color-hint);\n\t/* box-shadow: inset 0 0 0 1px var(--color-muted-1); */\n} \n.tlui-button[data-state='hinted']:not(:disabled, :focus-visible):active::after {\n\tbackground: var(--color-hint);\n\t/* box-shadow: inset 0 0 0 1px var(--color-text-3); */\n} \n@media (hover: hover) {\n\t.tlui-button[data-state='hinted']:not(:disabled, :focus-visible):hover::after {\n\t\tbackground: var(--color-hint);\n\t\t/* box-shadow: inset 0 0 0 1px var(--color-text-3); */\n\t}\n} \n/* Focus Mode Button */ \n.tlui-focus-button {\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n} \n/* Squished */ \n.tlui-button.squished {\n\theight: 36px;\n\twidth: 44px;\n} \n.tlui-button__primary {\n\tcolor: var(--color-primary);\n} \n.tlui-button__warning {\n\tcolor: var(--color-warn);\n} \n.tlui-button__danger {\n\tcolor: var(--color-warn);\n} \n/* --------------------- Popover -------------------- */ \n.tlui-popover {\n\tposition: relative;\n\tdisplay: flex;\n\talign-content: stretch;\n} \n.tlui-popover__content {\n\tposition: relative;\n\tmax-height: 75vh;\n\tmargin: 0px;\n\tborder: none;\n\tborder-radius: var(--radius-4);\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tz-index: var(--layer-menus);\n\toverflow: hidden;\n\toverflow-y: auto;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n} \n/* -------------------------------------------------- */ \n/*                        Zones                       */ \n/* -------------------------------------------------- */ \n/* ------------------- Status Bar ------------------- */ \n.tlui-debug-panel {\n\tmargin-top: var(--space-2);\n\tbackground-color: var(--color-low);\n\twidth: 100%;\n\tdisplay: grid;\n\talign-items: center;\n\tgrid-template-columns: 1fr auto auto;\n\tjustify-content: space-between;\n\tpadding-left: var(--space-4);\n\tborder-radius: var(--radius-1);\n\tfont-size: 12px;\n\tcolor: var(--color-text-1);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n} \n.tlui-debug-panel__current-state {\n\twhite-space: nowrap;\n} \n/* -------------------- Menu Zone ------------------- */ \n.tlui-menu-zone {\n\tposition: relative;\n\tz-index: var(--layer-panels);\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n} \n.tlui-menu-zone::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-1) var(--radius-1) var(--radius-5) var(--radius-1);\n\tbackground-color: var(--color-low);\n} \n.tlui-menu-zone *[data-state='open']::after {\n\tbackground: linear-gradient(180deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n} \n.tlui-menu-zone__controls {\n\tposition: relative;\n\talign-items: center;\n\tgrid-row: 1;\n\tgrid-column: 1;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\tborder-radius: var(--radius-1) var(--radius-1) var(--radius-4) var(--radius-1);\n\tdisplay: flex;\n\tflex-direction: row;\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n} \n.tlui-menu-zone__divider {\n\twidth: 1px;\n\theight: 18px;\n\tbackground-color: var(--color-muted-1);\n} \n.tlui-menu-zone__controls > * {\n\tmargin: 0px -2px;\n} \n.tlui-menu-zone__controls > *:first-child {\n\tmargin-left: 0px;\n} \n.tlui-menu-zone__controls > *:last-child {\n\tmargin-right: 0px;\n} \n.tlui-menu-zone__controls > .tlui-menu-zone__divider {\n\tmargin: 0px;\n} \n.tlui-menu-zone__controls .tlui-icon {\n\twidth: 15px;\n\theight: 15px;\n} \n/* ------------------- Style Panel ------------------ */ \n.tlui-style-panel__wrapper {\n\tbox-shadow: var(--shadow-2);\n\tborder-radius: var(--radius-4);\n\tpointer-events: all;\n\tbackground-color: var(--color-panel);\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tmax-height: 100%;\n\tmargin: var(--space-2) var(--space-2);\n\toverflow: hidden;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n\toverflow-y: auto;\n\tcolor: var(--color-text);\n} \n.tlui-style-panel {\n\tposition: relative;\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n} \n.tlui-style-panel::-webkit-scrollbar {\n\tdisplay: none;\n} \n.tlui-style-panel .tlui-button.select {\n\twidth: 100%;\n} \n.tlui-style-panel__section {\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n} \n.tlui-style-panel__section:nth-of-type(n + 2):not(:last-child) {\n\tborder-bottom: 1px solid var(--color-divider);\n} \n.tlui-style-panel__section:empty {\n\tdisplay: none;\n} \n.tlui-style-panel__section__common:not(:only-child) {\n\tmargin-bottom: 7px;\n\tborder-bottom: 1px solid var(--color-divider);\n} \n.tlui-style-panel__row {\n\tdisplay: flex;\n} \n.tlui-style-panel__row > *:nth-child(2) {\n\tmargin-left: -4px;\n} \n.tlui-style-panel__double-select-picker {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto auto;\n\talign-items: center;\n\tpadding-left: var(--space-4);\n\tfont-size: 12px;\n\twidth: 164px;\n} \n.tlui-style-panel__double-select-picker > .tlui-button {\n\tmin-width: 44px;\n\tmargin-left: -4px;\n} \n.tlui-style-panel__double-select-picker-label {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space: nowrap;\n\tcolor: var(--color-text-1);\n} \n.tlui-style-panel__section *[data-state='open']::after {\n\tbackground: var(--color-muted-0);\n} \n/* ---------------------- Input --------------------- */ \n.tlui-input {\n\tbackground: none;\n\tmargin: 0px;\n\tposition: relative;\n\tz-index: 1;\n\theight: 44px;\n\tmax-height: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: inherit;\n\tfont-size: 12px;\n\tfont-weight: inherit;\n\tcolor: var(--color-text-1);\n\tpadding: 13px;\n\tpadding-left: 0px;\n\tborder: none;\n\toutline: none;\n\ttext-overflow: ellipsis;\n\twidth: 100%;\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: auto !important;\n} \n.tlui-input__wrapper {\n\twidth: 100%;\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tgap: var(--space-4);\n\tcolor: var(--color-text);\n} \n.tlui-input__wrapper > .tlui-icon {\n\tflex-shrink: 0;\n} \n/* If mobile use 16px as font size */ \n/* On iOS, font size under 16px in an input will make the page zoom into the input  */ \n/* https://css-tricks.com/16px-or-larger-text-prevents-ios-form-zoom/ */ \n@media (max-width: 600px) {\n\t@supports (-webkit-touch-callout: none) {\n\t\t/* CSS specific to iOS devices */\n\t\t.tlui-input {\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n} \n/* ---------------- Prompt ---------------- */ \n.tlui-prompt__overlay {\n\tbackground: var(--color-overlay);\n\tposition: fixed;\n\ttop: 0px;\n\tleft: 0px;\n\tright: 0px;\n\tbottom: 0px;\n\tdisplay: grid;\n\tplace-items: center;\n\toverflow-y: auto;\n\tz-index: var(--layer-overlays);\n} \n.tlui-prompt__content {\n\tcursor: default;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tborder-radius: var(--radius-4);\n\tpadding: var(--space-5);\n\tfont-size: 12px;\n\toverflow-y: auto;\n\tmin-width: 300px;\n\tmax-width: 80vw;\n\tmax-height: 80vh;\n} \n.tlui-prompt__actions {\n\tborder: none;\n\tpadding: 0px;\n\tmargin: 0px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tmargin-right: calc(-1 * var(--space-3));\n\tmargin-bottom: calc(-1 * var(--space-3));\n} \n.tlui-prompt__title {\n\tmargin: 0px;\n\tfont-size: 12px;\n} \n.tlui-prompt__error {\n\tcolor: #d10b0b;\n\tdisplay: flex;\n\tgap: var(--space-2);\n\talign-items: center;\n} \n/* ---------------- Dialog ---------------- */ \n.tlui-dialog__overlay {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: var(--layer-overlays);\n\tbackground-color: var(--color-overlay);\n\tpointer-events: all;\n\tanimation: fadeIn 0.12s ease-out;\n\tdisplay: grid;\n\tplace-items: center;\n\toverflow-y: auto;\n} \n.tlui-dialog__content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\tcursor: default;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tborder-radius: var(--radius-4);\n\tfont-size: 12px;\n\toverflow: hidden;\n\tmin-width: 300px;\n\tmax-width: 80vw;\n\tmax-height: 80vh;\n} \n.tlui-dialog__header {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0;\n\tz-index: 999;\n\tpadding-left: var(--space-4);\n\tcolor: var(--color-text);\n\theight: 44px;\n} \n.tlui-dialog__header__title {\n\tflex: 1;\n\tfont-weight: inherit;\n\tfont-size: 12px;\n\tmargin: 0px;\n\tcolor: var(--color-text-1);\n\tfont-weight: 500;\n} \n.tlui-dialog__header__close {\n\tjustify-self: flex-end;\n} \n.tlui-dialog__body {\n\tpadding: var(--space-4) var(--space-6);\n\tflex: 0 1;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tcolor: var(--color-text-1);\n\t-moz-user-select: all;\n\t     user-select: all;\n\t-webkit-user-select: text;\n} \n.tlui-dialog__footer {\n\tposition: relative;\n\tz-index: 999;\n} \n.tlui-dialog__footer__actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n} \n.tlui-dialog__footer__actions > .tlui-button:nth-last-child(n + 2) {\n\tmargin-right: -4px;\n} \n.tlui-dialog__scrim {\n\tdisplay: block;\n\tcontent: '';\n\tbottom: 0px;\n\twidth: 100%;\n\theight: 40px;\n\tposition: absolute;\n\tbackground: linear-gradient(transparent, var(--color-panel));\n\tborder-bottom-left-radius: var(--radius-4);\n\tborder-bottom-right-radius: var(--radius-4);\n\tpointer-events: none;\n} \n/* ---------------- Shortcuts ---------------- */ \n.tlui-shortcuts-dialog__header {\n\tborder-bottom: 1px solid var(--color-divider);\n} \n.tlui-shortcuts-dialog__body {\n\tposition: relative;\n\t-moz-columns: 1;\n\t     columns: 1;\n\t-moz-column-gap: var(--space-9);\n\t     column-gap: var(--space-9);\n\tpointer-events: all;\n\ttouch-action: auto;\n} \n@media (min-width: 475px) {\n\t.tlui-shortcuts-dialog__body {\n\t\t-moz-columns: 2;\n\t\t     columns: 2;\n\t\t-moz-column-gap: var(--space-9);\n\t\t     column-gap: var(--space-9);\n\t}\n} \n@media (min-width: 960px) {\n\t.tlui-shortcuts-dialog__body {\n\t\t-moz-columns: 3;\n\t\t     columns: 3;\n\t\t-moz-column-gap: var(--space-9);\n\t\t     column-gap: var(--space-9);\n\t}\n} \n.tlui-shortcuts-dialog__group {\n\t-moz-column-break-inside: avoid;\n\t     break-inside: avoid-column;\n\tpadding-bottom: var(--space-6);\n} \n.tlui-shortcuts-dialog__group__title {\n\tfont-size: inherit;\n\tfont-weight: 500;\n\tmargin: 0px;\n\tcolor: var(--color-text-2);\n\tletter-spacing: 0.5px;\n\ttext-transform: uppercase;\n\tfont-size: 9px;\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n} \n.tlui-shortcuts-dialog__group__content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor: var(--color-text-1);\n} \n.tlui-shortcuts-dialog__key-pair {\n\tdisplay: flex;\n\tgap: var(--space-4);\n\talign-items: center;\n\tjustify-content: space-between;\n\theight: 32px;\n} \n.tlui-shortcuts-dialog__key-pair__key {\n\tflex: 1;\n\tfont-size: 12px;\n} \n/* --------------------- Toolbar -------------------- */ \n/* Wide container */ \n.tlui-toolbar {\n\tgrid-column: 1 / span 3;\n\tgrid-row: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-grow: 2;\n\tpadding-bottom: calc(var(--space-2) + var(--sab));\n} \n/* Centered Content */ \n.tlui-toolbar__inner {\n\tposition: relative;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\tdisplay: flex;\n\tgap: var(--space-3);\n\talign-items: flex-end;\n} \n.tlui-toolbar__left {\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n} \n/* Row of controls + lock button */ \n.tlui-toolbar__extras {\n\tposition: relative;\n\twidth: 100%;\n\theight: 44px;\n\tpointer-events: none;\n} \n.tlui-toolbar__extras__hidden {\n\tdisplay: none;\n} \n.tlui-toolbar__extras__controls {\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: var(--color-low);\n\tborder-top-left-radius: var(--radius-3);\n\tborder-top-right-radius: var(--radius-3);\n\tposition: relative;\n\tbottom: -4px;\n\tmargin-left: 8px;\n\tmargin-right: 0px;\n\tpointer-events: all;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n} \n.tlui-toolbar__extras__controls::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: -1;\n\ttop: 0px;\n\tleft: 0px;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-4);\n\tborder-bottom-left-radius: 0px;\n\tborder-bottom-right-radius: 0px;\n\tbackground-color: var(--color-background);\n} \n.tlui-toolbar__extras__controls > .tlui-button,\n.tlui-toolbar__extras__controls > .tlui-popover > .tlui-button {\n\theight: 40px;\n\twidth: 40px;\n} \n.tlui-toolbar__extras__controls .tlui-button::after {\n\tborder-radius: var(--radius-2);\n} \n.tlui-toolbar__lock-button {\n\tposition: absolute;\n\ttop: 0px;\n\tpointer-events: all;\n\theight: 40px;\n\twidth: 48px;\n\tright: -4px;\n} \n.tlui-toolbar__lock-button::after {\n\tborder-radius: 100%;\n\ttop: 4px;\n\tleft: 8px;\n\theight: 32px;\n\twidth: 32px;\n} \n.tlui-toolbar__lock-button__mobile {\n\tright: -8px;\n} \n.tlui-toolbar__tools {\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: var(--color-low);\n\tborder-radius: var(--radius-4);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n\tposition: relative;\n\talign-items: center;\n\tbackground: var(--color-panel);\n\tbox-shadow: var(--shadow-2);\n} \n.tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 48px;\n} \n.tlui-toolbar__tools__button:nth-of-type(n + 2) {\n\tmargin-left: -2px;\n} \n.tlui-toolbar__tools__button:nth-last-of-type(n + 2) {\n\tmargin-right: -2px;\n} \n.tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 48px;\n} \n.tlui-layout__mobile .tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 44px;\n} \n.tlui-layout__mobile .tlui-toolbar__tools__button > .tlui-icon {\n\theight: 16px;\n\twidth: 16px;\n} \n.tlui-toolbar__overflow {\n\twidth: 40px;\n} \n.tlui-layout__mobile .tlui-toolbar__overflow {\n\twidth: 32px;\n\tpadding: 0px;\n} \n.tlui-toolbar *[data-state='open']::after {\n\tbackground: linear-gradient(0deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n} \n.tlui-toolbar__styles__button {\n\twidth: 44px;\n\theight: 44px;\n} \n.tlui-layout__mobile .tlui-toolbar__styles__button {\n\theight: 48px;\n} \n.tlui-toolbar__divider {\n\tdisplay: block;\n\tbackground: var(--color-divider);\n\theight: 18px;\n\twidth: 1px;\n} \n/* -------------------- Help Zone ------------------- */ \n.tlui-help-menu {\n\tpointer-events: all;\n\tposition: absolute;\n\tbottom: var(--space-2);\n\tright: var(--space-2);\n} \n.tlui-help-menu__button {\n\tposition: relative;\n\tbackground-color: var(--color-low);\n\tborder-radius: 100%;\n\theight: 48px;\n\twidth: 48px;\n\toverflow: visible;\n\tz-index: var(--layer-panels);\n\tborder: 4px solid var(--color-background);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpointer-events: all;\n\tz-index: 1;\n} \n.tlui-help-menu__button::after {\n\tborder-radius: 100%;\n} \n/* ------------------ Context Menu ------------------ */ \n.tlui-context-menu__move-to-page__name {\n\tmax-width: calc(min(300px, 35vw));\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n} \n.tlui-context-menu__move-to-page__name[data-disabled] {\n\tcolor: var(--color-text-3);\n\tpointer-events: none;\n} \n/* ---------------------- Menu ---------------------- */ \n.tlui-menu {\n\tz-index: var(--layer-menus);\n\theight: -moz-fit-content;\n\theight: fit-content;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\tmax-height: 80vh;\n\tborder-radius: var(--radius-4);\n\tpointer-events: all;\n\ttouch-action: auto;\n\toverflow-y: auto;\n\toverscroll-behavior: none;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n} \n.tlui-menu::-webkit-scrollbar {\n\tdisplay: none;\n} \n.tlui-menu__arrow {\n\tposition: relative;\n\ttop: -1px;\n\tfill: var(--color-panel);\n\tstroke: var(--color-panel-contrast);\n\tstroke-width: 1px;\n} \n.tlui-menu__group[data-size='large'] {\n\tmin-width: initial;\n} \n.tlui-menu__group[data-size='medium'] {\n\tmin-width: 144px;\n} \n.tlui-menu__group[data-size='small'] {\n\tmin-width: 96px;\n} \n.tlui-menu__group[data-size='tiny'] {\n\tmin-width: 0px;\n} \n.tlui-menu__group + .tlui-menu__group {\n\tborder-top: 1px solid var(--color-divider);\n} \n.tlui-menu__submenu__trigger[data-state='open']:not(:hover)::after {\n\tborder-radius: var(--radius-1);\n\tbackground: linear-gradient(90deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n} \n.tlui-menu__submenu__trigger[data-direction='left'][data-state='open']:not(:hover)::after {\n\tborder-radius: var(--radius-1);\n\tbackground: linear-gradient(270deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n} \n.tlui-menu__button {\n\twidth: 100%;\n\tjustify-content: space-between;\n} \n.tlui-menu__button__wide {\n\tmax-width: initial;\n} \n.tlui-menu__button:nth-child(n + 2) {\n\tmargin-top: -8px;\n} \n.tlui-menu__button:nth-last-child(n + 2) {\n\tmargin-bottom: -8px;\n} \n.tlui-menu__button > span:only-child {\n\ttext-align: left;\n\tflex-grow: 2;\n} \n.tlui-menu__checkbox-item {\n\tpadding-left: 28px;\n} \n.tlui-menu__checkbox-item__check {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 24px;\n\tpadding-left: 10px;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n} \n/* ------------------- Button Grid ------------------ */ \n.tlui-button-grid__button {\n\twidth: 44px;\n\theight: 44px;\n} \n.tlui-button-grid__four {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 40px 40px 44px;\n} \n.tlui-button-grid__four > .tlui-button-grid__button:nth-child(n + 5) {\n\tmargin-top: -2px;\n} \n.tlui-button-grid__four > .tlui-button-grid__button:nth-last-child(n + 5) {\n\tmargin-bottom: -2px;\n} \n.tlui-button-grid__three {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 40px 44px;\n} \n.tlui-button-grid__three > .tlui-button-grid__button:nth-child(n + 4) {\n\tmargin-top: -2px;\n} \n.tlui-button-grid__three > .tlui-button-grid__button:nth-last-child(n + 4) {\n\tmargin-bottom: -2px;\n} \n.tlui-button-grid__two {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 44px;\n} \n.tlui-button-grid__two > .tlui-button-grid__button:nth-child(n + 3) {\n\tmargin-top: -2px;\n} \n.tlui-button-grid__two > .tlui-button-grid__button:nth-last-child(n + 3) {\n\tmargin-bottom: -2px;\n} \n/* \n.tlui-button-grid__button:not(:nth-child(4n - 3)) {\n\tmargin-left: -2px;\n}\n\n.tlui-button-grid__button:not(:nth-child(4n)) {\n\tmargin-right: -2px;\n}*/ \n/* \n\n.tlui-button-grid__button:nth-last-child(1) {\n\tmargin-right: 0px;\n} */ \n/* ------------------ Actions Menu ------------------ */ \n.tlui-actions-menu {\n\tmax-height: calc(100vh - 150px);\n} \n/* --------------------- Toasts --------------------- */ \n.tlui-toast__viewport {\n\tposition: absolute;\n\tinset: 0px;\n\tmargin: 0px;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tjustify-content: flex-end;\n\tflex-direction: column;\n\tgap: var(--space-3);\n\tpointer-events: none;\n\tpadding: 0px var(--space-3) 64px 0px;\n\tz-index: var(--layer-toasts);\n} \n.tlui-toast__viewport > * {\n\tpointer-events: all;\n} \n.tlui-toast__icon {\n\tpadding-top: var(--space-4);\n\tpadding-left: var(--space-4);\n} \n.tlui-toast__container {\n\tmin-width: 200px;\n\tmax-width: 280px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: var(--space-3);\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-2);\n\tborder-radius: var(--radius-4);\n\tfont-size: 12px;\n} \n.tlui-toast__main {\n\tflex-grow: 2;\n} \n.tlui-toast__main:nth-child(1) > .tlui-toast__content {\n\tpadding-left: var(--space-4);\n} \n.tlui-toast__content {\n\tpadding-left: 0px;\n\tpadding-top: var(--space-4);\n\tpadding-bottom: var(--space-4);\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-3);\n} \n.tlui-toast__content:not(:only-child) {\n\tpadding-bottom: var(--space-2);\n} \n.tlui-toast__title {\n\tfont-weight: 600;\n\tcolor: var(--color-text);\n} \n.tlui-toast__description {\n\tcolor: var(--color-text-1);\n\tpadding: var(--space-3);\n\tmargin: 0px;\n\tpadding: 0px;\n} \n.tlui-toast__actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-start;\n} \n.tlui-toast__close {\n\talign-self: flex-end;\n} \n@media (prefers-reduced-motion: no-preference) {\n\t.tlui-toast__container[data-state='open'] {\n\t\tanimation: slide-in 200ms cubic-bezier(0.785, 0.135, 0.15, 0.86);\n\t}\n\n\t.tlui-toast__container[data-state='closed'] {\n\t\tanimation: hide 100ms ease-in;\n\t}\n\n\t.tlui-toast__container[data-swipe='move'] {\n\t\ttransform: translateX(var(--radix-toast-swipe-move-x));\n\t}\n\n\t.tlui-toast__container[data-swipe='cancel'] {\n\t\ttransform: translateX(0);\n\t\ttransition: transform 200ms ease-out;\n\t}\n\n\t.tlui-toast__container[data-swipe='end'] {\n\t\tanimation: swipe-out 100ms ease-out;\n\t}\n} \n/* --------------------- Mobile --------------------- */ \n@media (max-width: 640px) {\n\t.tlui-menu__group .tlui-button {\n\t\theight: 40px;\n\t}\n\n\t.tlui-menu__group .tlui-button > .tlui-kbd {\n\t\tdisplay: none;\n\t}\n\n\t.tlui-menu__group .tlui-button > .tlui-icon-left {\n\t\tdisplay: none;\n\t}\n} \n/* --------------------- Bottom --------------------- */ \n.tlui-layout__bottom {\n\tgrid-row: 2;\n} \n.tlui-layout__bottom__main {\n\twidth: 100%;\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tjustify-content: center;\n} \n/* ------------------- Navigation ------------------- */ \n.tlui-navigation-zone {\n\tdisplay: flex;\n\twidth: -moz-min-content;\n\twidth: min-content;\n\tflex-direction: column;\n\tbackground-color: var(--color-low);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n\tposition: absolute;\n\tleft: 0px;\n\tbottom: 0px;\n} \n.tlui-navigation-zone::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: -1;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-1);\n\tborder-top-right-radius: var(--radius-5);\n\tbackground-color: var(--color-low);\n} \n.tlui-navigation-zone__controls {\n\tdisplay: flex;\n\tflex-direction: row;\n\twidth: -moz-min-content;\n\twidth: min-content;\n\tbackground-color: none;\n\toverflow: hidden;\n} \n.tlui-navigation-zone__controls > .tlui-button {\n\tmargin-left: -2px;\n\tmargin-right: -2px;\n} \n.tlui-navigation-zone__controls > .tlui-button:nth-of-type(1) {\n\tmargin-left: 0px;\n} \n.tlui-navigation-zone__controls > .tlui-button:nth-last-of-type(1) {\n\tmargin-right: 0px;\n} \n.tlui-navigation-zone__toggle .tlui-icon {\n\topacity: 0.24;\n\ttransition: opacity 0.2s ease-in-out;\n} \n.tlui-navigation-zone__toggle:active .tlui-icon {\n\topacity: 1;\n\ttransition: opacity 0.12s ease-in-out;\n} \n@media (hover: hover) {\n\t.tlui-navigation-zone__toggle:hover .tlui-icon {\n\t\topacity: 1;\n\t\ttransition: opacity 0.12s ease-in-out;\n\t}\n} \n.tlui-minimap {\n\twidth: 100%;\n\theight: 96px;\n\tmin-height: 96px;\n\toverflow: hidden;\n\tpadding: var(--space-3);\n\tpadding-top: 0px;\n} \n.tlui-minimap__canvas {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n} \n.tlui-zoom-menu__button__pct {\n\twidth: 60px;\n\ttext-align: center;\n} \n/* ----------------------- ... ---------------------- */ \n@keyframes hide {\n\t0% {\n\t\topacity: 1;\n\t}\n\t100% {\n\t\topacity: 0;\n\t}\n} \n@keyframes slide-in {\n\tfrom {\n\t\ttransform: translateX(calc(100% + var(--space-3)));\n\t}\n\tto {\n\t\ttransform: translateX(0px);\n\t}\n} \n@keyframes swipe-out {\n\tfrom {\n\t\ttransform: translateX(var(--radix-toast-swipe-end-x));\n\t}\n\tto {\n\t\ttransform: translateX(calc(100% + var(--space-3)));\n\t}\n} \n/* ------------------- Page Select ------------------ */ \n.tlui-page-menu__wrapper {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 220px;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tmax-height: 50vh;\n} \n.tlui-page-menu__trigger {\n\twidth: 128px;\n} \n.tlui-page-menu__trigger > span {\n\tflex-grow: 2;\n\tmargin-right: var(--space-4);\n} \n.tlui-page-menu__header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\twidth: 100%;\n\tpadding-left: var(--space-4);\n\tmin-height: 44px;\n\tborder-bottom: 1px solid var(--color-divider);\n} \n.tlui-page-menu__header > .tlui-button:nth-of-type(1) {\n\tmargin-right: -4px;\n} \n.tlui-page-menu__header__title {\n\tcolor: var(--color-text);\n\tfont-size: 12px;\n\tfont-weight: 500;\n\tflex-grow: 2;\n} \n.tlui-page-menu__name {\n\tflex-grow: 2;\n\ttext-align: left;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n} \n.tlui-page-menu__list {\n\tposition: relative;\n\tflex-direction: column;\n\tmax-height: 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\ttouch-action: auto;\n} \n.tlui-page-menu__item {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: space-between;\n} \n.tlui-page-menu__item:nth-of-type(n + 2) {\n\tmargin-top: -4px;\n} \n.tlui-page-menu__item__button {\n\tflex-grow: 2;\n} \n.tlui-page-menu__item__button > span {\n\tdisplay: block;\n\tflex-grow: 2;\n\ttext-align: left;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n} \n.tlui-page-menu__item__button__checkbox {\n\tpadding-left: 36px;\n} \n.tlui-page-menu__item__button__check {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 24px;\n\tpadding-left: 10px;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcolor: var(--color-text);\n} \n.tlui-page_menu__item__sortable {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: -moz-fit-content;\n\theight: fit-content;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\toverflow: hidden;\n\tz-index: 1;\n} \n.tlui-page_menu__item__sortable__title {\n\tflex: 1;\n} \n.tlui-page_menu__item__sortable__title > .tlui-input__wrapper {\n\theight: 100%;\n} \n.tlui-page_menu__item__sortable__button {\n\tflex: 0;\n} \n.tlui-page_menu__item__sortable:focus-within {\n\tz-index: 10;\n} \n.tlui-page_menu__item__sortable__handle {\n\ttouch-action: none;\n\twidth: 32px;\n\theight: 40px;\n\tcursor: grab;\n\tcolor: var(--color-text-3);\n\tflex-shrink: 0;\n\tmargin-right: -9px;\n} \n.tlui-page_menu__item__sortable__handle:active {\n\tcursor: grabbing;\n} \n.tlui-page-menu__item__input {\n\tmargin-left: 13px;\n\theight: 100%;\n} \n/* The more menu has complex CSS here: */ \n/* If the user can hover, then visible but opacity zero until hover */ \n/* If the user cannot hover, then not displayed unless editing, and then opacity 1 */ \n.tlui-page_menu__item__submenu {\n\tpointer-events: all;\n\tflex: 0;\n\tcursor: pointer;\n\tmargin: 0px;\n\tdisplay: none;\n} \n.tlui-page_menu__item__submenu[data-isediting='true'] {\n\tdisplay: block;\n} \n@media (hover: hover) {\n\t.tlui-page_menu__item__submenu {\n\t\topacity: 0;\n\t\tdisplay: block;\n\t}\n\n\t.tlui-page_menu__item__submenu:hover,\n\t.tlui-page-menu__item:focus-within > .tlui-page_menu__item__submenu,\n\t.tlui-page_menu__item__sortable:focus-within > .tlui-page_menu__item__submenu {\n\t\topacity: 1;\n\t}\n} \n/* --------------------- Dialogs -------------------- */ \n/* Edit Link Dialog */ \n.tlui-edit-link-dialog {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-4);\n\tcolor: var(--color-text);\n} \n.tlui-edit-link-dialog__input {\n\tbackground-color: var(--color-muted-2);\n\tflex-grow: 2;\n\tborder-radius: var(--radius-2);\n\tpadding: 0px var(--space-4);\n} \n/* Embed Dialog */ \n.tlui-embed__spacer {\n\tflex-grow: 2;\n\tmin-height: 0px;\n\tmargin-left: calc(-1 * var(--space-4));\n\tmargin-top: calc(-1 * var(--space-4));\n\tpointer-events: none;\n} \n.tlui-embed-dialog__list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding-bottom: var(--space-5);\n} \n.tlui-embed-dialog__item {\n\tposition: relative;\n\tborder: none;\n\tbackground: none;\n\tfont-family: inherit;\n\tdisplay: flex;\n\ttext-align: left;\n\tgap: var(--space-3);\n\tcursor: pointer;\n\tpadding: 0;\n\talign-items: center;\n\tcolor: var(--color-text);\n\tfont-size: var(--font-size-1);\n\theight: 44px;\n} \n@media (hover: hover) {\n\t.tlui-embed-dialog__item:hover::after {\n\t\tdisplay: block;\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tinset: 0px;\n\t\tbackground-color: var(--color-muted-2);\n\t\tborder-radius: var(--radius-4);\n\t}\n} \n.tlui-embed-dialog__item__image {\n\tpadding: var(--space-3);\n} \n.tlui-embed-dialog__item__image__img {\n\twidth: 24px;\n\theight: 24px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-size: contain;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center center;\n} \n.tlui-embed-dialog__enter {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-4);\n\tcolor: var(--color-text-1);\n} \n.tlui-embed-dialog__input {\n\tbackground-color: var(--color-muted-2);\n\tflex-grow: 2;\n\tborder-radius: var(--radius-2);\n\tpadding: 0px var(--space-4);\n} \n.tlui-embed-dialog__warning {\n\tcolor: var(--color-warn);\n} \n.tlui-embed-dialog__instruction__link {\n\tdisplay: flex;\n\tgap: var(--space-1);\n\tmargin-top: var(--space-4);\n} \n.tlui-embed-dialog__enter a {\n\tcolor: var(--color-text-1);\n} \n.tlui-following {\n\tdisplay: block;\n\tposition: absolute;\n\tinset: 0px;\n\tborder-width: 2px;\n\tborder-style: solid;\n\tz-index: 9999999;\n\tpointer-events: none;\n} \n/* ---------------- Offline Indicator --------------- */ \n.tlui-offline-indicator {\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: var(--space-3);\n\tcolor: var(--color-text);\n\tbackground-color: var(--color-low);\n\tborder: 3px solid var(--color-background);\n\tpadding: 0px var(--space-5);\n\theight: 42px;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 99px;\n\topacity: 0;\n\tanimation: fade-in;\n\tanimation-duration: 0.12s;\n\tanimation-delay: 2s;\n\tanimation-fill-mode: forwards;\n}\n\n","",{version:3,sources:["webpack://./node_modules/@tldraw/tldraw/tldraw.css"],names:[],mappings:"AAAA,8EAA8E;AAC9E,6EAA6E;AAC7E,wEAAwE;AAExE,mBAAmB;AAEnB;CAGC,eAAe;CACf,YAAY;CACZ,cAAc;CACd,cAAc;CACd,cAAc;CACd,eAAe;CACf,eAAe;CACf,eAAe;CACf,eAAe;CACf,eAAe;CACf,eAAe;CACf,gBAAgB;CAChB,WAAW;CACX,eAAe;CACf,eAAe;CACf,eAAe;CACf,eAAe;CACf,gBAAgB;CAChB,gBAAgB;CAChB,iBAAiB;CACjB,mBAAmB;CACnB,SAAS;CACT,YAAY;CACZ,sBAAsB;CACtB,wDAAwD;;CAExD,gBAAgB;CAChB,sBAAsB;CACtB;;SAEQ;CACR;;SAEQ;CACR;;WAEU;CACV;;MAEK;CACL;;MAEK;CACL;;UAES;CACT;;MAEK;CACL;;SAEQ;CACR;;UAES;;CAET,wDAAwD;CACxD,uDAAuD;CACvD,qCAAqC;CACrC,kCAAkC;CAClC,sCAAsC;CACtC,gCAAgC;CAChC,gCAAgC;CAChC,oCAAoC;CACpC,oCAAoC;CACpC,2BAA2B;CAC3B,gCAAgC;CAChC,gCAAgC;CAChC,gCAAgC;CAChC,gCAAgC;CAChC,oCAAoC;CACpC,yCAAyC;CACzC,yCAAyC;CACzC,sCAAsC;CACtC,wCAAwC;CACxC,6CAA6C;CAC7C,8CAA8C;CAC9C;;0FAEyF;CACzF,mBAAmB;CACnB,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,cAAc;AACf;AAEA;CACC,uBAAuB;CACvB,sCAAsC;CACtC,8CAA8C;CAC9C,gDAAgD;CAChD,gCAAgC;CAChC,+BAA+B;CAC/B,kCAAkC;CAClC,oCAAoC;CACpC,mCAAmC;CACnC,qCAAqC;CACrC,kCAAkC;CAClC,mCAAmC;CACnC,wBAAwB;CACxB,+BAA+B;CAC/B,gDAAgD;CAChD,sBAAsB;CACtB,sBAAsB;CACtB,yBAAyB;CACzB,kCAAkC;CAClC,iCAAiC;CACjC,iCAAiC;CACjC,uBAAuB;CACvB,uBAAuB;CACvB,uBAAuB;CACvB,uBAAuB;CACvB,wBAAwB;CACxB,qBAAqB;CACrB,qBAAqB;CACrB,sBAAsB;;CAEtB,4EAA4E;CAC5E;mFACkF;CAClF;mDACkD;CAClD;qFACoF;AACrF;AAEA;CACC,uBAAuB;CACvB,2BAA2B;CAC3B,6CAA6C;CAC7C,+CAA+C;CAC/C,qBAAqB;CACrB,oBAAoB;CACpB,+BAA+B;CAC/B,0CAA0C;CAC1C,yCAAyC;CACzC,0CAA0C;CAC1C,sCAAsC;CACtC,oCAAoC;CACpC,wBAAwB;CACxB,+BAA+B;CAC/B,sBAAsB;CACtB,6CAA6C;CAC7C,sBAAsB;CACtB,yBAAyB;CACzB,kCAAkC;CAClC,gDAAgD;CAChD,iCAAiC;CACjC,uBAAuB;CACvB,uBAAuB;CACvB,uBAAuB;CACvB,uBAAuB;CACvB,wBAAwB;CACxB,qBAAqB;CACrB,qBAAqB;CACrB,sBAAsB;;CAEtB;mDACkD;CAClD;mDACkD;CAClD;mDACkD;AACnD;AAEA;CACC,iCAAiC;CACjC,0BAA0B;CAC1B,kCAAkC;CAClC,mCAAmC;AACpC;AAEA;;CAEC,2BAA2B;CAC3B,wCAAwC;CACxC,sCAAsC;CACtC,yBAAyB;CACzB,sBAAiB;MAAjB,iBAAiB;CACjB,sBAAsB;CACtB,aAAa;AACd;AAEA;CACC,8BAA8B;AAC/B;AAEA;CACC,mCAAmC;AACpC;AAEA;;;CAGC,yBAAyB;AAC1B;AAEA,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,wBAAwB;CACxB,4BAA4B;CAC5B,wBAAwB;CACxB,cAAc;CACd,wBAAwB;CACxB,kBAAkB;CAClB,eAAe;AAChB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,eAAe;CACf,oBAAoB;AACrB;AAEA;CACC,kBAAkB;CAClB,UAAU;AACX;AAEA;CACC,kBAAkB;CAClB,UAAU;AACX;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,iCAAiC;CACjC,gCAAgC;CAChC,iBAAiB;CACjB,oBAAoB;CACpB,0BAA0B;AAC3B;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,iCAAiC;CACjC,gCAAgC;CAChC,oBAAoB;AACrB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,0BAA0B;AAC3B;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,yCAAyC;CACzC,UAAU;AACX;AAEA,2DAA2D;AAE3D;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,kBAAkB;CAClB,oBAAoB;CACpB,UAAU;CACV,eAAe;AAChB;AAEA;CACC,uBAAuB;AACxB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,UAAU;CACV,WAAW;CACX,0BAA0B;AAC3B;AAEA,uDAAuD;AAEvD;CACC,yCAAyC;CACzC,oBAAoB;AACrB;AAEA;CACC,iCAAiC;CACjC,6BAA6B;AAC9B;AAEA,uDAAuD;AAEvD;CACC,sBAAsB;CACtB,qBAAqB;CACrB,oBAAoB;CACpB,oBAAoB;AACrB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,oBAAoB;CACpB,iBAAiB;CACjB,0BAA0B;CAC1B,oBAAoB;AACrB;AAEA;CACC,kBAAkB;CAClB,qCAAqC;AACtC;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,oBAAoB;CACpB,qBAAqB;CACrB,sBAAsB;CACtB,0BAA0B;CAC1B,iBAAiB;AAClB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,oBAAoB;CACpB,qBAAqB;CACrB,sBAAsB;CACtB,8BAA8B;CAC9B,0BAA0B;CAC1B,cAAc;AACf;AAEA,kDAAkD;AAElD,2CAA2C;AAC3C;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,oBAAoB;CACpB,YAAY;AACb;AAEA;CACC,YAAY;CACZ,2CAA2C;AAC5C;AAEA,+BAA+B;AAC/B;CACC,YAAY;AACb;AAEA;CACC,YAAY;AACb;AAEA;CACC,iBAAiB;AAClB;AAEA,uDAAuD;AAEvD;CACC,0BAA0B;CAC1B,UAAU;CACV,2CAA2C;CAC3C,aAAa;AACd;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,0BAA0B;CAC1B,6BAA6B;CAC7B,mBAAmB;AACpB;AAEA;CACC,UAAU;CACV,oBAAoB;CACpB,qCAAqC;CACrC,2CAA2C;AAC5C;AAEA;CACC,oBAAoB;CACpB,qCAAqC;CACrC,6BAA6B;CAC7B,2CAA2C;AAC5C;AAEA;CACC,oBAAoB;CACpB,mCAAmC;AACpC;AAEA;CACC,oBAAoB;CACpB,UAAU;CACV,qCAAqC;AACtC;AAEA;CACC,oBAAoB;CACpB,UAAU;CACV,qCAAqC;AACtC;AAEA;CACC,qCAAqC;CACrC,6BAA6B;CAC7B,2CAA2C;CAC3C,mBAAmB;AACpB;AAEA;CACC,mBAAmB;CACnB,6BAA6B;AAC9B;AAEA;CACC,oBAAoB;CACpB,qCAAqC;CACrC,6BAA6B;CAC7B,2CAA2C;AAC5C;AAEA;CACC,iBAAiB;CACjB,mBAAmB;AACpB;AAEA,uDAAuD;AAEvD;CACC,mBAAmB;AACpB;AAEA;CACC,iBAAiB;CACjB,mBAAmB;CACnB,mBAAmB;CACnB,iCAAiC;AAClC;AAEA;CACC,6BAA6B;CAC7B,qCAAqC;CACrC,2CAA2C;CAC3C,oBAAoB;AACrB;AAEA;CACC,UAAU;AACX;AACA;CACC,UAAU;AACX;AAEA;CACC,UAAU;AACX;AAEA;CACC,6BAA6B;CAC7B,iCAAiC;AAClC;AAEA;CACC;EACC,iCAAiC;CAClC;;CAEA;EACC,UAAU;CACX;AACD;AAEA,uDAAuD;AAEvD;;CAEC,oBAAiB;IAAjB,iBAAiB;CACjB,sBAAsB;CACtB,WAAW;CACX,YAAY;AACb;AAEA;;;CAGC,WAAW;CACX,YAAY;CACZ,mBAAmB;CACnB,+CAA+C;;CAE/C,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;AAEA;CACC,sCAAsC;CACtC,kBAAkB;CAClB,6BAA6B;CAC7B,+BAA+B;CAC/B,eAAe;CACf,2BAA2B;CAC3B,yCAAyC;CACzC,gBAAgB;CAChB,kBAAkB;AACnB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;AACnB;AAEA;CAEC,SAAS;CACT,UAAU;CACV,uBAAkB;CAAlB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,gBAAgB;CAChB,gBAAgB;CAChB,mBAAmB;CACnB,kBAAkB;CAClB,gBAAgB;CAChB,uBAAuB;CACvB,eAAe;CACf,6BAA6B;CAC7B,8BAA8B;CAC9B,qCAAqC;AACtC;AAEA;CAEC,SAAS;CACT,UAAU;CACV,uBAAkB;CAAlB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,gBAAgB;CAChB,gBAAgB;CAChB,mBAAmB;CACnB,kBAAkB;CAClB,gBAAgB;CAChB,uBAAuB;CACvB,eAAe;CACf,6BAA6B;CAC7B,mCAAmC;CACnC,qCAAqC;AACtC;AAEA;CAEC,SAAS;CACT,UAAU;CACV,uBAAkB;CAAlB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,qCAAqC;CACrC,mBAAmB;CACnB,kBAAkB;CAClB,gBAAgB;CAChB,eAAe;CACf,6BAA6B;CAC7B,UAAU;CACV,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;CAClB,qCAAqC;CACrC,mBAAmB;CACnB,gBAAgB;CAChB,eAAe;CACf,6BAA6B;CAC7B,oBAAoB;CACpB,4BAA4B;CAC5B,gBAAgB;CAChB,iBAAiB;CACjB,UAAU;CACV,YAAY;CACZ,yBAAiB;IAAjB,sBAAiB;SAAjB,iBAAiB;CACjB,8BAA8B;AAC/B;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,iCAAiC;CACjC,qCAAqC;CACrC,iBAAiB;AAClB;AAJA;CACC,iCAAiC;CACjC,qCAAqC;CACrC,iBAAiB;AAClB;AAEA;CACC,uDAAuD;CACvD,yDAAyD;CACzD,eAAe;CACf,kCAAkC;AACnC;AAEA;CACC,qCAAqC;CACrC,YAAY;AACb;AAHA;CACC,qCAAqC;CACrC,YAAY;AACb;AAEA,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AAEvD;CACC;EACC,yBAAyB;CAC1B;AACD;AAEA;CACC,WAAW;CACX,sBAAsB;CACtB,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,iBAAiB;CACjB,kBAAkB;CAClB,kBAAkB;CAClB,sBAAsB;CACtB,sBAAsB;CACtB,uCAAuC;CACvC,oBAAoB;AACrB;AAEA,uDAAuD;AAEvD;CACC,mBAAmB;CACnB,WAAW;CACX,YAAY;AACb;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,mBAAmB;CACnB,cAAc;CACd,YAAY;CACZ,WAAW;CACX,YAAY;CACZ,YAAY;CACZ,oBAAoB;CACpB,kBAAkB;CAClB,mBAAmB;CACnB,qBAAqB;CACrB,yBAAyB;CACzB,mCAAmC;AACpC;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,iBAAiB;AAClB;AAEA;CACC,gCAAgC;AACjC;AAEA;CACC,gCAAgC;AACjC;AAEA;CACC,iCAAiC;AAClC;AAEA;CACC,gCAAgC;AACjC;AAEA;CACC,UAAU;AACX;AAEA;CACC,6CAA6C;CAC7C,WAAW;CACX,YAAY;CACZ,WAAW;CACX,cAAc;CACd,8BAA8B;CAC9B,gBAAgB;CAChB,qBAAkB;IAAlB,kBAAkB;CAClB,kBAAkB;CAClB,oBAAoB;CACpB,oBAAoB;CACpB,oBAAoB;CACpB,qBAAqB;CACrB,mBAAmB;CACnB,mBAAmB;CACnB,uBAAuB;CACvB,oBAAoB;CACpB,aAAa;CACb,qBAAqB;CACrB,qBAAqB;CACrB,yBAAyB;CACzB,mBAAmB;CACnB,oBAAoB;CACpB,oBAAoB;CACpB,gBAAgB;CAChB,qBAAqB;CACrB,wBAAgB;IAAhB,qBAAgB;SAAhB,gBAAgB;CAChB,qCAAgC;MAAhC,gCAAgC;CAChC,sCAAsC;CACtC,iBAAiB;AAClB;AAEA;CACC,kBAAkB;CAClB,eAAe;CACf,YAAY;CACZ,cAAc;CACd,UAAU;CACV,uBAAkB;CAAlB,kBAAkB;CAClB,sBAAsB;CACtB,oBAAoB;CACpB,kBAAkB;CAClB,qBAAqB;CACrB,qBAAqB;CACrB,yBAAyB;CACzB,YAAY;CACZ,YAAY;CACZ,sBAAiB;MAAjB,iBAAiB;CACjB,oBAAoB;CACpB,yBAAyB;AAC1B;AAEA;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;AACb;AAEA;;CAEC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,cAAc;CACd,eAAe;CACf,iBAAiB;CACjB,aAAa;AACd;AAEA;CACC,oBAAoB;AACrB;AAEA;CACC,YAAY;CACZ,qBAAgB;MAAhB,gBAAgB;CAChB,yBAAyB;CACzB,gBAAgB;CAChB,6BAA6B;AAC9B;AAEA;CACC,iCAAiC;CACjC,qCAAqC;CACrC,iBAAiB;AAClB;AAJA;CACC,iCAAiC;CACjC,qCAAqC;CACrC,iBAAiB;AAClB;AAEA,uDAAuD;AAEvD;CACC,2BAA2B;CAC3B,yCAAyC;CACzC,UAAU;AACX;AAEA;CACC,2BAA2B;CAC3B,yCAAyC;CACzC,UAAU;AACX;AAEA,mDAAmD;AAEnD;CACC,yBAAyB;CACzB,yCAAyC;CACzC,YAAY;AACb;AAEA,2DAA2D;AAE3D;CACC,WAAW;CACX,YAAY;CACZ,kBAAkB;CAClB,6CAA6C;CAC7C,oCAAoC;CACpC,8BAA8B;CAC9B,aAAa;CACb,sBAAsB;CACtB,gBAAgB;AACjB;AAEA;CACC,OAAO;CACP,gBAAgB;CAChB,uCAAuC;CACvC,wCAAwC;CACxC,WAAW;CACX,YAAY;CACZ,aAAa;CACb,yBAAyB;CACzB,uBAAuB;AACxB;AAEA;CACC,oCAAoC;AACrC;AAEA;CACC,WAAW;CACX,YAAY;CACZ,sCAAsC;CACtC,6CAA6C;AAC9C;AAEA;CACC,WAAW;CACX,YAAY;CACZ,oBAAiB;IAAjB,iBAAiB;CACjB,0BAAuB;IAAvB,uBAAuB;AACxB;AAEA;CACC,oCAAoC;CACpC,uBAAuB;CACvB,mBAAmB;AACpB;AAEA;;;CAGC,WAAW;CACX,WAAW;CACX,oBAAoB;AACrB;AAEA;CACC,eAAe;CACf,iBAAiB;CACjB,8BAA8B;CAC9B,eAAe;AAChB;AAEA;CACC,eAAe;CACf,8BAA8B;AAC/B;AAEA;CACC,eAAe;CACf,mBAAmB;CACnB,YAAY;CACZ,gBAAgB;CAChB,cAAc;CACd,wBAAwB;CACxB,uBAAuB;CACvB,qBAAqB;CACrB,0BAA0B;CAC1B,gCAAgC;AACjC;AAEA;CACC,4BAA4B;AAC7B;AAEA,uDAAuD;AAEvD;CACC,gBAAgB;CAChB,WAAW;CACX,kBAAkB;CAClB,QAAQ;CACR,UAAU;CACV,YAAY;CACZ,WAAW;CACX,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,YAAY;CACZ,eAAe;CACf,gBAAgB;CAChB,0BAA0B;CAC1B,aAAa;CACb,gCAAgC;CAChC,YAAY;CACZ,aAAa;CACb,mBAAmB;AACpB;AAEA;CACC,WAAW;CACX,WAAW;CACX,kBAAkB;CAClB,UAAU;CACV,WAAW;CACX,cAAc;CACd,wBAAwB;CACxB,yBAAyB;CACzB,8BAA8B;CAC9B,yCAAyC;CACzC,oBAAoB;AACrB;AAEA;CACC,4BAA4B;AAC7B;AAEA;CACC,4BAA4B;AAC7B;AAEA;CACC,WAAW;CACX,YAAY;CACZ,8BAA8B;CAC9B,oBAAoB;AACrB;AAEA;CACC,aAAa;AACd;AAEA,gDAAgD;AAEhD;CACC,aAAa;CACb,uBAAuB;CACvB,mBAAmB;CACnB,wBAAwB;CACxB,mCAAmC;CACnC,oBAAoB;CACpB,kBAAkB;CAClB,UAAU;CACV,WAAW;AACZ;AAEA;CACC,UAAU;AACX;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,kBAAkB;CAClB,uBAAkB;CAAlB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,mBAAmB;CACnB,gBAAgB;AACjB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,aAAa;CACb,wBAAmB;CAAnB,mBAAmB;CACnB,uBAAkB;CAAlB,kBAAkB;CAClB,8BAA8B;CAC9B,eAAe;CACf,UAAU;AACX;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,aAAa;CACb,UAAU;AACX;AAEA;CACC,eAAe;AAChB;AAEA;CACC,6BAA6B;CAC7B,gBAAgB;AACjB;AAEA;CACC,UAAU;AACX;AAEA;;CAEC,gBAAgB;AACjB;AAEA;;CAEC,kBAAkB;AACnB;AAEA;;CAEC,iBAAiB;AAClB;AAEA;CACC,2BAA2B;CAC3B,UAAU;CACV,qBAAqB;CACrB,iBAAiB;AAClB;AAEA;;CAEC,gCAAgC;AACjC;AAEA;;CAEC,gCAAgC;AACjC;AAEA;;CAEC,iCAAiC;AAClC;AAEA;;CAEC,gCAAgC;AACjC;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,SAAS;CACT,UAAU;CACV,UAAU;CACV,WAAW;CACX,YAAY;CACZ,aAAa;CACb,uBAAuB;CACvB,mBAAmB;CACnB,wBAAwB;CACxB,mCAAmC;AACpC;AAEA;CACC,UAAU;AACX;AAEA;CACC,yCAAyC;AAC1C;AAEA;CACC,8BAA8B;CAC9B,uBAAuB;CACvB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,uBAAkB;CAAlB,kBAAkB;CAClB,mBAAmB;CACnB,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;AAEA;;CAEC,WAAW;CACX,YAAY;CACZ,WAAW;CACX,cAAc;CACd,8BAA8B;CAC9B,gBAAgB;CAChB,qBAAkB;IAAlB,kBAAkB;CAClB,kBAAkB;CAClB,oBAAoB;CACpB,oBAAoB;CACpB,oBAAoB;CACpB,qBAAqB;CACrB,mBAAmB;CACnB,mBAAmB;CACnB,uBAAuB;CACvB,oBAAoB;CACpB,aAAa;CACb,qBAAqB;CACrB,qBAAqB;CACrB,yBAAyB;CACzB,mBAAmB;CACnB,oBAAoB;CACpB,oBAAoB;CACpB,gBAAgB;CAChB,qBAAqB;CACrB,wBAAgB;IAAhB,qBAAgB;SAAhB,gBAAgB;CAChB,qCAAgC;MAAhC,gCAAgC;CAChC,sCAAsC;CACtC,iBAAiB;AAClB;AAEA;CACC,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,UAAU;CACV,YAAY;CACZ,iBAAiB;AAClB;AAEA;CACC,UAAU;CACV,WAAW;CACX,YAAY;CACZ,YAAY;CACZ,WAAW;CACX,kBAAkB;CAClB,YAAY;CACZ,WAAW;CACX,qBAAgB;MAAhB,gBAAgB;CAChB,yBAAyB;CACzB,8BAA8B;CAC9B,qBAAkB;IAAlB,kBAAkB;CAClB,0CAA0C;CAC1C,cAAc;AACf;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;CACZ,8BAA8B;CAC9B,2BAA2B;CAC3B,gBAAgB;CAChB,0BAA0B;CAC1B,mBAAmB;CACnB,iBAAiB;AAClB;AAEA;CACC,iBAAiB;AAClB;AAEA;CACC,kBAAkB;CAClB,UAAU;CACV,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,yCAAyC;CACzC,aAAa;AACd;AAEA;CACC,yCAAyC;CACzC,0BAA0B;CAC1B,YAAY;CACZ,WAAW;CACX,aAAa;CACb,sBAAsB;CACtB,uBAAuB;CACvB,mBAAmB;CACnB,mBAAmB;CACnB,eAAe;CACf,gBAAgB;CAChB,UAAU;CACV,4CAA4C;CAC5C,qBAAqB;AACtB;AAEA;CACC;EACC,UAAU;CACX;CACA;EACC,UAAU;CACX;AACD;AAEA,wDAAwD;AAExD;CACC,yCAAyC;AAC1C;AAEA;CACC,mBAAmB;CACnB,yCAAyC;CACzC,yBAAyB;CACzB,gBAAgB;CAChB,sBAAsB;CACtB,sBAAsB;CACtB,iCAAiC;CACjC,kCAAkC;CAClC,gDAAgD;CAChD,iDAAiD;CACjD,UAAU;CACV,kBAAkB;AACnB;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,kBAAkB;CAClB,yBAAyB;CACzB,gBAAgB;CAChB,eAAe;CACf,eAAe;CACf,YAAY;CACZ,eAAe;CACf,mBAAmB;CACnB,mBAAmB;AACpB;AAEA;CACC,mBAAmB;CACnB,uFAAuF;CACvF,yBAAyB;CACzB,aAAa;CACb,YAAY;CACZ,WAAW;CACX,mBAAmB;CACnB,8BAA8B;CAC9B,yCAAyC;AAC1C;AAEA;CACC,mBAAmB;CACnB,gBAAgB;CAChB,uBAAuB;CACvB,sCAAsC;CACtC,kBAAkB;CAClB,kBAAkB;CAClB,gBAAgB;CAChB,6BAA6B;AAC9B;AAEA;CACC,kBAAkB;CAClB,gBAAgB;CAChB,WAAW;CACX,iBAAiB;CACjB,oCAAoC;CACpC,8BAA8B;CAC9B,mCAAmC;AACpC;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,YAAY;CACZ,gBAAgB;CAChB,aAAa;CACb,sCAAsC;CACtC,UAAU;CACV,kBAAkB;CAClB,oBAAoB;CACpB,oBAAoB;CACpB,WAAW;CACX,0BAA0B;CAC1B,8BAA8B;CAC9B,qBAAgB;MAAhB,gBAAgB;CAChB,yBAAyB;CACzB,gBAAgB;CAChB,6BAA6B;AAC9B;AAEA,oCAAoC;AACpC,0FAA0F;AAC1F,uEAAuE;AACvE;CACC;EACC,eAAe;CAChB;AACD;AAEA,wDAAwD;AAExD;CACC,YAAY;CACZ,8BAA8B;AAC/B;AAEA,uDAAuD;AAEvD;CACC,gBAAgB;CAChB,wBAAwB;CACxB,oCAAoC;CACpC,8BAA8B;CAC9B,2BAA2B;CAC3B,mBAAmB;CACnB,gCAAgC;CAChC,aAAa;CACb,aAAa;AACd;AAEA;CACC,YAAY;CACZ,oBAAoB;AACrB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,aAAa;CACb,yBAAyB;CACzB,qBAAqB;CACrB,aAAa;AACd;AAEA;CACC,aAAa;AACd;AAEA,uDAAuD;AAEvD;CACC,WAAW;CACX,YAAY;CACZ,sCAAsC;CACtC,yCAAyC;CACzC,kCAAkC;CAClC,mBAAmB;CACnB,sDAAsD;CACtD,aAAa;CACb,sBAAsB;CACtB,mBAAmB;CACnB,uBAAuB;CACvB,gBAAgB;CAChB,kBAAkB;CAClB,mBAAmB;CACnB,gBAAgB;CAChB,uBAAuB;AACxB;AAEA;CACC,iCAAiC;CACjC,gBAAgB;CAChB,eAAe;CACf,oBAAoB;CACpB,0BAA0B;AAC3B;AAEA,uDAAuD;AAEvD;CACC,WAAW;CACX,YAAY;CACZ,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,uBAAuB;CACvB,yCAAyC;CACzC,0BAA0B;CAC1B,kBAAkB;CAClB,YAAY;AACb;AAEA;CACC,kBAAkB;CAClB,UAAU;CACV,YAAY;CACZ,sCAAsC;AACvC;AAEA;CACC,qBAAgB;MAAhB,gBAAgB;CAChB,yBAAyB;CACzB,mBAAmB;AACpB;AAEA;CACC,oBAAoB;CACpB,kBAAkB;CAClB,UAAU;CACV,WAAW;AACZ;AACA;;+DAE+D;AAC/D;CACC,YAAY;CACZ,cAAc;CACd,kBAAkB;CAClB,UAAU;CACV,YAAY;CACZ,mBAAmB;AACpB;AAEA;CACC,uBAAkB;CAAlB,kBAAkB;CAClB,wBAAmB;CAAnB,mBAAmB;CACnB,eAAe;CACf,YAAY;CACZ,gBAAgB;CAChB,oCAAoC;CACpC,uBAAuB;CACvB,8BAA8B;CAC9B,2BAA2B;CAC3B,eAAe;CACf,gBAAgB;CAChB,aAAa;CACb,sBAAsB;CACtB,mBAAmB;CACnB,cAAc;CACd,YAAY;AACb;AACA;CACC,YAAY;AACb;AAEA;CACC,eAAe;CACf,WAAW;CACX,gBAAgB;AACjB;AAEA;CACC,gBAAgB;CAChB,WAAW;AACZ;AAEA;CACC,sCAAsC;CACtC,uBAAuB;CACvB,8BAA8B;CAC9B,cAAc;CACd,eAAe;CACf,iBAAiB;CACjB,WAAW;AACZ;AAEA;CACC,gBAAgB;CAChB,YAAY;CACZ,oBAAoB;CACpB,eAAe;CACf,gBAAgB;CAChB,uBAAuB;CACvB,8BAA8B;CAC9B,gCAAgC;CAChC,cAAc;CACd,6BAA6B;AAC9B;AACA;CACC,kCAAkC;AACnC;AAEA;CACC,0BAA0B;CAC1B,gBAAgB;CAChB,qBAAqB;AACtB;AACA;CACC,0BAA0B;AAC3B;AAEA;CACC,kBAAkB;AACnB;AACA;CACC,kBAAkB;CAClB,mBAAmB;CACnB,qBAAqB;CACrB,eAAe;CACf,sCAAsC;CACtC,oCAAoC;CACpC,8BAA8B;AAC/B;AAEA;CACC,aAAa;CACb,8BAA8B;CAC9B,mBAAmB;CACnB,iCAAiC;CACjC,eAAe;AAChB;AACA;CACC,aAAa;CACb,mBAAmB;AACpB;AACA;CACC,wBAAwB;AACzB;AACA;CACC,sCAAsC;CACtC,qCAAqC;AACtC;AACA;CACC,sCAAsC;CACtC,YAAY;AACb;AAEA,uDAAuD;AAEvD;CACC,iEAAiE;CACjE;EACC,UAAU;CACX;AACD;AAEA;CACC,UAAU;CACV,oBAAoB;AACrB;AAEA;CACC,kBAAkB;CAClB,SAAS;CACT,UAAU;CACV,WAAW;CACX,eAAe;CACf,sBAAsB;AACvB;AAEA,eAAe;AAEf;CACC,mBAAmB;CACnB,kBAAkB;CAClB,qBAAqB;CACrB,mBAAmB;CACnB,mBAAmB;AACpB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,aAAa;CACb,0BAA0B;CAC1B,yCAAyC;CACzC,oBAAoB;CACpB,YAAY;CACZ,gBAAgB;CAChB,cAAc;CACd,uBAAuB;CACvB,oBAAoB;CACpB,yBAAiB;IAAjB,sBAAiB;SAAjB,iBAAiB;CACjB,eAAe;CACf,4BAA4B;CAC5B,uCAAuC;CACvC,kCAAkC;AACnC;AAEA;CACC,cAAc;CACd,WAAW;CACX,aAAa;CACb,cAAc;CACd,8BAA8B;AAC/B;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,uBAAuB;CACvB,2BAA2B;CAC3B,WAAW;CACX,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,qBAAqB;CACrB,2BAA2B;CAC3B,YAAY;CACZ,cAAc;CACd,cAAc;AACf;AAEA;;CAEC,mBAAmB;CACnB,kBAAkB;CAClB,yBAAyB;AAC1B;AAEA,sDAAsD;AAEtD;CACC,kBAAkB;CAClB,aAAa;CACb,sBAAsB;CACtB,2BAA2B;CAC3B,uBAAuB;CACvB,uBAAkB;CAAlB,kBAAkB;CAClB,mBAAmB;CACnB,qCAAqC;CACrC,mBAAmB;CACnB,oBAAoB;CACpB,4BAA4B;AAC7B;AAEA;CACC,mBAAmB;CACnB,kCAAkC;CAClC,8BAA8B;AAC/B;AAEA,uDAAuD;AAEvD;CACC,cAAc;CACd,WAAW;CACX,YAAY;CACZ,8BAA8B;AAC/B;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,aAAa;CACb,mBAAmB;CACnB,yBAAiB;IAAjB,sBAAiB;SAAjB,iBAAiB;CACjB,kBAAkB;AACnB;AAEA;CACC,YAAY;CACZ,2BAA2B;AAC5B;AAEA;CACC,kBAAkB;CAClB,YAAY;CACZ,YAAY;CACZ,eAAe;AAChB;AAEA;CACC,cAAc;CACd,kBAAkB;CAClB,oBAAoB;CACpB,WAAW;CACX,WAAW;CACX,WAAW;CACX,sCAAsC;CACtC,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;CAClB,oBAAoB;CACpB,SAAS;CACT,WAAW;CACX,uCAAuC;CACvC,8BAA8B;AAC/B;AAEA;CACC,UAAU;CACV,YAAY;CACZ,cAAc;CACd,WAAW;CACX,YAAY;CACZ,kBAAkB;CAClB,SAAS;CACT,oCAAoC;CACpC,oBAAoB;CACpB,qDAAqD;AACtD;AAEA;CACC,gBAAgB;CAChB,sEAAsE;AACvE;AAEA;CACC,8CAA8C;AAC/C;AAEA,uDAAuD;AAEvD;CACC,oBAAoB;CACpB,eAAe;CACf,iBAAiB;CACjB,aAAa;CACb,qBAAqB;CACrB,sBAAsB;CACtB,2BAA2B;CAC3B,oCAAoC;CACpC,QAAQ;CACR,kBAAkB;CAClB,0BAA0B;CAC1B,2BAA2B;AAC5B;AAEA;CACC,WAAW;CACX,kBAAkB;CAClB,eAAe;CACf,WAAW;CACX,YAAY;CACZ,kBAAkB;AACnB;AAEA;CACC,4BAA4B;AAC7B;AAEA,uDAAuD;AAEvD;CACC,WAAW;CACX,kBAAkB;CAClB,UAAU;CACV,YAAY;CACZ,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,oBAAoB;CACpB,eAAe;CACf,oBAAoB;CACpB,0BAA0B;CAC1B,iBAAiB;CACjB,eAAe;CACf,YAAY;CACZ,aAAa;CACb,yBAAiB;IAAjB,sBAAiB;SAAjB,iBAAiB;CACjB,mBAAmB;CACnB,gBAAgB;CAChB,uBAAuB;CACvB,2CAA2C;AAC5C;AAEA;CACC,WAAW;CACX,UAAU;CACV,kBAAkB;CAClB,UAAU;CACV,WAAW;CACX,cAAc;CACd,uBAAuB;CACvB,wBAAwB;CACxB,8BAA8B;CAC9B,6BAA6B;CAC7B,oBAAoB;AACrB;AAEA;CACC,uBAAuB;CACvB,gBAAgB;CAChB,aAAa;CACb,mBAAmB;AACpB;AAEA;CACC,YAAY;AACb;AAEA;CACC,2BAA2B;AAC5B;AAEA;CACC,eAAe;CACf,0BAA0B;AAC3B;AAEA;CACC,gCAAgC;AACjC;AAEA;CACC;EACC,gCAAgC;CACjC;AACD;AAEA;CACC,4BAA4B;AAC7B;AAEA;CACC,kBAAkB;CAClB,YAAY;CACZ,cAAc;AACf;AAEA;CACC,WAAW;CACX,YAAY;CACZ,oBAAoB;AACrB;AAEA;CACC,UAAU;CACV,0BAA0B;AAC3B;AAEA;CACC,8CAA8C;AAC/C;AAEA;CACC,8CAA8C;AAC/C;AAEA;CACC;EACC,UAAU;EACV,0BAA0B;CAC3B;;CAEA;;;IAGG;;CAEH;EACC,2BAA2B;CAC5B;;CAEA;EACC,wBAAwB;CACzB;AACD;AAEA;CACC,0BAA0B;AAC3B;AAEA,aAAa;AAEb;CACC,qCAAqC;AACtC;AAEA;CACC,qCAAqC;AACtC;AAEA;CACC;EACC,qCAAqC;CACtC;AACD;AAEA;CACC,iCAAiC;AAClC;AAEA,WAAW;AAEX;CACC,6BAA6B;CAC7B,sDAAsD;AACvD;AAEA;CACC,6BAA6B;CAC7B,qDAAqD;AACtD;AAEA;CACC;EACC,6BAA6B;EAC7B,qDAAqD;CACtD;AACD;AAEA,sBAAsB;AAEtB;CACC,4BAA4B;CAC5B,mBAAmB;AACpB;AAEA,aAAa;AAEb;CAMC,YAAY;CACZ,WAAW;AAJZ;AAOA;CACC,2BAA2B;AAC5B;AAEA;CACC,wBAAwB;AACzB;AAEA;CACC,wBAAwB;AACzB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,aAAa;CACb,sBAAsB;AACvB;AAEA;CACC,kBAAkB;CAClB,gBAAgB;CAChB,WAAW;CACX,YAAY;CACZ,8BAA8B;CAC9B,oCAAoC;CACpC,2BAA2B;CAC3B,2BAA2B;CAC3B,gBAAgB;CAChB,gBAAgB;CAChB,kBAAkB;CAClB,yBAAyB;CACzB,qBAAqB;CACrB,wBAAwB;AACzB;AAEA,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AAEvD,uDAAuD;AAEvD;CACC,0BAA0B;CAC1B,kCAAkC;CAClC,WAAW;CACX,aAAa;CACb,mBAAmB;CACnB,oCAAoC;CACpC,8BAA8B;CAC9B,4BAA4B;CAC5B,8BAA8B;CAC9B,eAAe;CACf,0BAA0B;CAC1B,4BAA4B;CAC5B,mBAAmB;AACpB;AAEA;CACC,mBAAmB;AACpB;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,4BAA4B;CAC5B,uBAAkB;CAAlB,kBAAkB;AACnB;AAEA;CACC,WAAW;CACX,cAAc;CACd,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,yCAAyC;CACzC,8EAA8E;CAC9E,kCAAkC;AACnC;AAEA;CACC,yFAAyF;AAC1F;AAEA;CACC,kBAAkB;CAElB,mBAAmB;CACnB,WAAW;CACX,cAAc;CACd,uBAAkB;CAAlB,kBAAkB;CAClB,8EAA8E;CAC9E,aAAa;CACb,mBAAmB;CACnB,4BAA4B;CAC5B,mBAAmB;AACpB;AAEA;CACC,UAAU;CACV,YAAY;CACZ,sCAAsC;AACvC;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,iBAAiB;AAClB;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA,uDAAuD;AAEvD;CACC,2BAA2B;CAC3B,8BAA8B;CAC9B,mBAAmB;CACnB,oCAAoC;CACpC,wBAAmB;CAAnB,mBAAmB;CACnB,gBAAgB;CAChB,qCAAqC;CACrC,gBAAgB;CAChB,kBAAkB;CAClB,yBAAyB;CACzB,gBAAgB;CAChB,wBAAwB;AACzB;AAEA;CACC,kBAAkB;CAClB,4BAA4B;CAC5B,mBAAmB;AACpB;AAEA;CACC,aAAa;AACd;AAEA;CACC,WAAW;AACZ;AAEA;CACC,aAAa;CACb,kBAAkB;CAClB,sBAAsB;AACvB;AAEA;CACC,6CAA6C;AAC9C;AAEA;CACC,aAAa;AACd;AAEA;CACC,kBAAkB;CAClB,6CAA6C;AAC9C;AAEA;CACC,aAAa;AACd;AACA;CACC,iBAAiB;AAClB;AAEA;CACC,aAAa;CACb,oCAAoC;CACpC,mBAAmB;CACnB,4BAA4B;CAC5B,eAAe;CACf,YAAY;AACb;AAEA;CACC,eAAe;CACf,iBAAiB;AAClB;AAEA;CACC,uBAAuB;CACvB,gBAAgB;CAChB,mBAAmB;CACnB,0BAA0B;AAC3B;AAEA;CACC,gCAAgC;AACjC;AAEA,uDAAuD;AAEvD;CACC,gBAAgB;CAChB,WAAW;CACX,kBAAkB;CAClB,UAAU;CACV,YAAY;CACZ,gBAAgB;CAChB,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,oBAAoB;CACpB,eAAe;CACf,oBAAoB;CACpB,0BAA0B;CAC1B,aAAa;CACb,iBAAiB;CACjB,YAAY;CACZ,aAAa;CACb,uBAAuB;CACvB,WAAW;CACX,qBAAgB;MAAhB,gBAAgB;CAChB,oCAAoC;AACrC;AAEA;CACC,WAAW;CACX,YAAY;CACZ,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,wBAAwB;AACzB;AAEA;CACC,cAAc;AACf;AAEA,oCAAoC;AACpC,0FAA0F;AAC1F,uEAAuE;AACvE;CACC;EACC,gCAAgC;EAChC;GACC,eAAe;EAChB;CACD;AACD;AAEA,6CAA6C;AAE7C;CACC,gCAAgC;CAChC,eAAe;CACf,QAAQ;CACR,SAAS;CACT,UAAU;CACV,WAAW;CACX,aAAa;CACb,mBAAmB;CACnB,gBAAgB;CAChB,8BAA8B;AAC/B;AAEA;CACC,eAAe;CACf,oCAAoC;CACpC,2BAA2B;CAC3B,8BAA8B;CAC9B,uBAAuB;CACvB,eAAe;CACf,gBAAgB;CAChB,gBAAgB;CAChB,eAAe;CACf,gBAAgB;AACjB;AAEA;CACC,YAAY;CACZ,YAAY;CACZ,WAAW;CACX,aAAa;CACb,yBAAyB;CACzB,uCAAuC;CACvC,wCAAwC;AACzC;AAEA;CACC,WAAW;CACX,eAAe;AAChB;AAEA;CACC,cAAc;CACd,aAAa;CACb,mBAAmB;CACnB,mBAAmB;AACpB;AAEA,6CAA6C;AAE7C;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,YAAY;CACZ,8BAA8B;CAC9B,sCAAsC;CACtC,mBAAmB;CACnB,gCAAgC;CAChC,aAAa;CACb,mBAAmB;CACnB,gBAAgB;AACjB;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,kBAAkB;CAClB,eAAe;CACf,oCAAoC;CACpC,2BAA2B;CAC3B,8BAA8B;CAC9B,eAAe;CACf,gBAAgB;CAChB,gBAAgB;CAChB,eAAe;CACf,gBAAgB;AACjB;AAEA;CACC,kBAAkB;CAClB,aAAa;CACb,mBAAmB;CACnB,OAAO;CACP,YAAY;CACZ,4BAA4B;CAC5B,wBAAwB;CACxB,YAAY;AACb;AAEA;CACC,OAAO;CACP,oBAAoB;CACpB,eAAe;CACf,WAAW;CACX,0BAA0B;CAC1B,gBAAgB;AACjB;AAEA;CACC,sBAAsB;AACvB;AAEA;CACC,sCAAsC;CACtC,SAAS;CACT,gBAAgB;CAChB,kBAAkB;CAClB,0BAA0B;CAC1B,qBAAgB;MAAhB,gBAAgB;CAChB,yBAAyB;AAC1B;AAEA;CACC,kBAAkB;CAClB,YAAY;AACb;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,yBAAyB;AAC1B;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,cAAc;CACd,WAAW;CACX,WAAW;CACX,WAAW;CACX,YAAY;CACZ,kBAAkB;CAClB,4DAA4D;CAC5D,0CAA0C;CAC1C,2CAA2C;CAC3C,oBAAoB;AACrB;AAEA,gDAAgD;AAEhD;CACC,6CAA6C;AAC9C;AAEA;CACC,kBAAkB;CAClB,eAAU;MAAV,UAAU;CACV,+BAA0B;MAA1B,0BAA0B;CAC1B,mBAAmB;CACnB,kBAAkB;AACnB;AAEA;CACC;EACC,eAAU;OAAV,UAAU;EACV,+BAA0B;OAA1B,0BAA0B;CAC3B;AACD;AAEA;CACC;EACC,eAAU;OAAV,UAAU;EACV,+BAA0B;OAA1B,0BAA0B;CAC3B;AACD;AAEA;CACC,+BAA0B;MAA1B,0BAA0B;CAC1B,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;CAClB,gBAAgB;CAChB,WAAW;CACX,0BAA0B;CAC1B,qBAAqB;CACrB,yBAAyB;CACzB,cAAc;CACd,YAAY;CACZ,aAAa;CACb,mBAAmB;AACpB;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,0BAA0B;AAC3B;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,8BAA8B;CAC9B,YAAY;AACb;AAEA;CACC,OAAO;CACP,eAAe;AAChB;AAEA,uDAAuD;AAEvD,mBAAmB;AACnB;CACC,uBAAuB;CACvB,WAAW;CACX,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,YAAY;CACZ,iDAAiD;AAClD;AAEA,qBAAqB;AACrB;CACC,kBAAkB;CAClB,uBAAkB;CAAlB,kBAAkB;CAClB,aAAa;CACb,mBAAmB;CACnB,qBAAqB;AACtB;AAEA;CACC,uBAAkB;CAAlB,kBAAkB;AACnB;AAEA,kCAAkC;AAClC;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;CACZ,oBAAoB;AACrB;AAEA;CACC,aAAa;AACd;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,kCAAkC;CAClC,uCAAuC;CACvC,wCAAwC;CACxC,kBAAkB;CAClB,YAAY;CACZ,gBAAgB;CAChB,iBAAiB;CACjB,mBAAmB;CACnB,uBAAkB;CAAlB,kBAAkB;AACnB;AAEA;CACC,WAAW;CACX,cAAc;CACd,kBAAkB;CAClB,WAAW;CACX,QAAQ;CACR,SAAS;CACT,WAAW;CACX,yCAAyC;CACzC,8BAA8B;CAC9B,8BAA8B;CAC9B,+BAA+B;CAC/B,yCAAyC;AAC1C;AAEA;;CAEC,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;CAClB,QAAQ;CAER,mBAAmB;CACnB,YAAY;CACZ,WAAW;CACX,WAAW;AACZ;AAEA;CACC,mBAAmB;CACnB,QAAQ;CACR,SAAS;CACT,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,kCAAkC;CAClC,8BAA8B;CAC9B,4BAA4B;CAC5B,mBAAmB;CACnB,kBAAkB;CAClB,mBAAmB;CACnB,8BAA8B;CAC9B,2BAA2B;AAC5B;AAEA;CACC,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,iBAAiB;AAClB;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,YAAY;CACZ,WAAW;AACZ;AAEA;CACC,WAAW;AACZ;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA;CACC,uFAAuF;AACxF;AAEA;CACC,WAAW;CACX,YAAY;AACb;AAEA;CACC,YAAY;AACb;AAEA;CACC,cAAc;CACd,gCAAgC;CAChC,YAAY;CACZ,UAAU;AACX;AACA,uDAAuD;AAEvD;CACC,mBAAmB;CACnB,kBAAkB;CAClB,sBAAsB;CACtB,qBAAqB;AACtB;AAEA;CACC,kBAAkB;CAClB,kCAAkC;CAClC,mBAAmB;CACnB,YAAY;CACZ,WAAW;CACX,iBAAiB;CACjB,4BAA4B;CAC5B,yCAAyC;CACzC,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,mBAAmB;CACnB,UAAU;AACX;AAEA;CACC,mBAAmB;AACpB;AAEA,uDAAuD;AAEvD;CACC,iCAAiC;CACjC,gBAAgB;CAChB,uBAAuB;AACxB;AAEA;CACC,0BAA0B;CAC1B,oBAAoB;AACrB;AAEA,uDAAuD;AAEvD;CACC,2BAA2B;CAC3B,wBAAmB;CAAnB,mBAAmB;CACnB,uBAAkB;CAAlB,kBAAkB;CAClB,gBAAgB;CAChB,8BAA8B;CAC9B,mBAAmB;CACnB,kBAAkB;CAClB,gBAAgB;CAChB,yBAAyB;CACzB,oCAAoC;CACpC,2BAA2B;AAC5B;AAEA;CACC,aAAa;AACd;AAEA;CACC,kBAAkB;CAClB,SAAS;CACT,wBAAwB;CACxB,mCAAmC;CACnC,iBAAiB;AAClB;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,eAAe;AAChB;AAEA;CACC,cAAc;AACf;AAEA;CACC,0CAA0C;AAC3C;AAEA;CACC,8BAA8B;CAC9B,wFAAwF;AACzF;AAEA;CACC,8BAA8B;CAC9B,yFAAyF;AAC1F;AAEA;CACC,WAAW;CACX,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,gBAAgB;CAChB,YAAY;AACb;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,kBAAkB;CAClB,SAAS;CACT,WAAW;CACX,kBAAkB;CAClB,oBAAoB;CACpB,mBAAmB;CACnB,uBAAuB;AACxB;AAEA,uDAAuD;AAEvD;CACC,WAAW;CACX,YAAY;AACb;AAEA;CACC,aAAa;CACb,0CAA0C;AAC3C;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,aAAa;CACb,qCAAqC;AACtC;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,aAAa;CACb,gCAAgC;AACjC;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,mBAAmB;AACpB;AAEA;;;;;;;EAOE;AACF;;;;GAIG;AAEH,uDAAuD;AAEvD;CACC,+BAA+B;AAChC;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,UAAU;CACV,WAAW;CACX,aAAa;CACb,qBAAqB;CACrB,yBAAyB;CACzB,sBAAsB;CACtB,mBAAmB;CACnB,oBAAoB;CACpB,oCAAoC;CACpC,4BAA4B;AAC7B;AAEA;CACC,mBAAmB;AACpB;AAEA;CACC,2BAA2B;CAC3B,4BAA4B;AAC7B;AAEA;CACC,gBAAgB;CAChB,gBAAgB;CAChB,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,oCAAoC;CACpC,2BAA2B;CAC3B,8BAA8B;CAC9B,eAAe;AAChB;AAEA;CACC,YAAY;AACb;AAEA;CACC,4BAA4B;AAC7B;AAEA;CACC,iBAAiB;CACjB,2BAA2B;CAC3B,8BAA8B;CAC9B,aAAa;CACb,sBAAsB;CACtB,mBAAmB;AACpB;AAEA;CACC,8BAA8B;AAC/B;AAEA;CACC,gBAAgB;CAChB,wBAAwB;AACzB;AAEA;CACC,0BAA0B;CAC1B,uBAAuB;CACvB,WAAW;CACX,YAAY;AACb;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,2BAA2B;AAC5B;AAEA;CACC,oBAAoB;AACrB;AAEA;CACC;EACC,gEAAgE;CACjE;;CAEA;EACC,6BAA6B;CAC9B;;CAEA;EACC,sDAAsD;CACvD;;CAEA;EACC,wBAAwB;EACxB,oCAAoC;CACrC;;CAEA;EACC,mCAAmC;CACpC;AACD;AAEA,uDAAuD;AAEvD;CACC;EACC,YAAY;CACb;;CAEA;EACC,aAAa;CACd;;CAEA;EACC,aAAa;CACd;AACD;AAEA,uDAAuD;AAEvD;CACC,WAAW;AACZ;AAEA;CACC,WAAW;CACX,kBAAkB;CAClB,aAAa;CACb,qBAAqB;CACrB,uBAAuB;AACxB;AAEA,uDAAuD;AAEvD;CACC,aAAa;CACb,uBAAkB;CAAlB,kBAAkB;CAClB,sBAAsB;CACtB,kCAAkC;CAClC,4BAA4B;CAC5B,mBAAmB;CACnB,kBAAkB;CAClB,SAAS;CACT,WAAW;AACZ;AAEA;CACC,WAAW;CACX,cAAc;CACd,kBAAkB;CAClB,WAAW;CACX,WAAW;CACX,yCAAyC;CACzC,8BAA8B;CAC9B,wCAAwC;CACxC,kCAAkC;AACnC;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,uBAAkB;CAAlB,kBAAkB;CAClB,sBAAsB;CACtB,gBAAgB;AACjB;AAEA;CACC,iBAAiB;CACjB,kBAAkB;AACnB;AAEA;CACC,gBAAgB;AACjB;AACA;CACC,iBAAiB;AAClB;AAEA;CACC,aAAa;CACb,oCAAoC;AACrC;AAEA;CACC,UAAU;CACV,qCAAqC;AACtC;AAEA;CACC;EACC,UAAU;EACV,qCAAqC;CACtC;AACD;AAEA;CACC,WAAW;CACX,YAAY;CACZ,gBAAgB;CAChB,gBAAgB;CAChB,uBAAuB;CACvB,gBAAgB;AACjB;AAEA;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;AACb;AAEA;CACC,WAAW;CACX,kBAAkB;AACnB;AAEA,uDAAuD;AAEvD;CACC;EACC,UAAU;CACX;CACA;EACC,UAAU;CACX;AACD;AAEA;CACC;EACC,kDAAkD;CACnD;CACA;EACC,0BAA0B;CAC3B;AACD;AAEA;CACC;EACC,qDAAqD;CACtD;CACA;EACC,kDAAkD;CACnD;AACD;AAEA,uDAAuD;AAEvD;CACC,kBAAkB;CAClB,aAAa;CACb,sBAAsB;CACtB,YAAY;CACZ,wBAAmB;CAAnB,mBAAmB;CACnB,gBAAgB;AACjB;AAEA;CACC,YAAY;AACb;AAEA;CACC,YAAY;CACZ,4BAA4B;AAC7B;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,WAAW;CACX,4BAA4B;CAC5B,gBAAgB;CAChB,6CAA6C;AAC9C;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,wBAAwB;CACxB,eAAe;CACf,gBAAgB;CAChB,YAAY;AACb;AAEA;CACC,YAAY;CACZ,gBAAgB;CAChB,gBAAgB;CAChB,uBAAuB;CACvB,mBAAmB;AACpB;AAEA;CACC,kBAAkB;CAElB,sBAAsB;CACtB,gBAAgB;CAChB,kBAAkB;CAClB,gBAAgB;CAChB,kBAAkB;AACnB;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,8BAA8B;AAC/B;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,YAAY;AACb;AAEA;CACC,cAAc;CACd,YAAY;CACZ,gBAAgB;CAChB,gBAAgB;CAChB,uBAAuB;CACvB,mBAAmB;AACpB;AAEA;CACC,kBAAkB;AACnB;AAEA;CACC,kBAAkB;CAClB,SAAS;CACT,WAAW;CACX,kBAAkB;CAClB,oBAAoB;CACpB,mBAAmB;CACnB,uBAAuB;CACvB,wBAAwB;AACzB;AAEA;CACC,kBAAkB;CAClB,QAAQ;CACR,SAAS;CACT,WAAW;CACX,wBAAmB;CAAnB,mBAAmB;CACnB,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,gBAAgB;CAChB,UAAU;AACX;AAEA;CACC,OAAO;AACR;AAEA;CACC,YAAY;AACb;AAEA;CACC,OAAO;AACR;AAEA;CACC,WAAW;AACZ;AAEA;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;CACZ,YAAY;CACZ,0BAA0B;CAC1B,cAAc;CACd,kBAAkB;AACnB;AAEA;CACC,gBAAgB;AACjB;AAEA;CACC,iBAAiB;CACjB,YAAY;AACb;AAEA,wCAAwC;AACxC,qEAAqE;AACrE,oFAAoF;AAEpF;CACC,mBAAmB;CACnB,OAAO;CACP,eAAe;CACf,WAAW;CACX,aAAa;AACd;AAEA;CACC,cAAc;AACf;AAEA;CACC;EACC,UAAU;EACV,cAAc;CACf;;CAEA;;;EAGC,UAAU;CACX;AACD;AAEA,uDAAuD;AAEvD,qBAAqB;AAErB;CACC,aAAa;CACb,sBAAsB;CACtB,mBAAmB;CACnB,wBAAwB;AACzB;AAEA;CACC,sCAAsC;CACtC,YAAY;CACZ,8BAA8B;CAC9B,2BAA2B;AAC5B;AAEA,iBAAiB;AAEjB;CACC,YAAY;CACZ,eAAe;CACf,sCAAsC;CACtC,qCAAqC;CACrC,oBAAoB;AACrB;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,8BAA8B;AAC/B;AAEA;CACC,kBAAkB;CAClB,YAAY;CACZ,gBAAgB;CAChB,oBAAoB;CACpB,aAAa;CACb,gBAAgB;CAChB,mBAAmB;CACnB,eAAe;CACf,UAAU;CACV,mBAAmB;CACnB,wBAAwB;CACxB,6BAA6B;CAC7B,YAAY;AACb;AAEA;CACC;EACC,cAAc;EACd,WAAW;EACX,kBAAkB;EAClB,UAAU;EACV,sCAAsC;EACtC,8BAA8B;CAC/B;AACD;AAEA;CACC,uBAAuB;AACxB;AAEA;CACC,WAAW;CACX,YAAY;CACZ,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,wBAAwB;CACxB,4BAA4B;CAC5B,kCAAkC;AACnC;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,mBAAmB;CACnB,0BAA0B;AAC3B;AAEA;CACC,sCAAsC;CACtC,YAAY;CACZ,8BAA8B;CAC9B,2BAA2B;AAC5B;AAEA;CACC,wBAAwB;AACzB;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,0BAA0B;AAC3B;AAEA;CACC,0BAA0B;AAC3B;AAEA;CACC,cAAc;CACd,kBAAkB;CAClB,UAAU;CACV,iBAAiB;CACjB,mBAAmB;CACnB,gBAAgB;CAChB,oBAAoB;AACrB;AAEA,uDAAuD;AAEvD;CACC,aAAa;CACb,mBAAmB;CACnB,mBAAmB;CACnB,wBAAwB;CACxB,kCAAkC;CAClC,yCAAyC;CACzC,2BAA2B;CAC3B,YAAY;CACZ,mBAAmB;CACnB,uBAAuB;CACvB,mBAAmB;CACnB,UAAU;CACV,kBAAkB;CAClB,yBAAyB;CACzB,mBAAmB;CACnB,6BAA6B;AAC9B",sourcesContent:["/* THIS CSS FILE IS GENERATED! DO NOT EDIT. OR EDIT. I'M A COMMENT NOT A COP */ \n/* This file is created by the copy-css-files.mjs script in @tldraw/tldraw. */\n/* It combines @tldraw/editor's editor.css and @tldraw/tldraw's ui.css */\n\n/* @tldraw/editor */\n\n.tl-container {\n\twidth: 100%;\n\theight: 100%;\n\tfont-size: 12px;\n\t/* Spacing */\n\t--space-1: 2px;\n\t--space-2: 4px;\n\t--space-3: 8px;\n\t--space-4: 12px;\n\t--space-5: 16px;\n\t--space-6: 20px;\n\t--space-7: 28px;\n\t--space-8: 32px;\n\t--space-9: 64px;\n\t--space-10: 72px;\n\t/* Radius */\n\t--radius-0: 2px;\n\t--radius-1: 4px;\n\t--radius-2: 7px;\n\t--radius-3: 9px;\n\t--radius-4: 12px;\n\t--radius-5: 16px;\n\t--layer-grid: 150;\n\t--layer-canvas: 200;\n\t/* Misc */\n\t--tl-zoom: 1;\n\t--tl-dpr-multiple: 100;\n\t--tl-dpr-multiple-px: calc(var(--tl-dpr-multiple) * 1px);\n\n\t/* Cursor SVGs */\n\t--tl-cursor-none: none;\n\t--tl-cursor-default: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z' fill='white'/><path d='m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z' fill='white'/><path d='m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z' fill='black'/><path d='m13 10.814v11.188l2.969-2.866.428-.139h4.768z' fill='black'/></g></svg>\")\n\t\t\t12 8,\n\t\tdefault;\n\t--tl-cursor-pointer: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z' fill='white'/><g stroke='black' stroke-linecap='round' stroke-width='.75'><path d='m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z' stroke-linejoin='round'/><path d='m21.5664 21.7344v-3.459'/><path d='m19.5508 21.7461-.016-3.473'/><path d='m17.5547 18.3047.021 3.426'/></g></g></svg>\")\n\t\t\t14 10,\n\t\tpointer;\n\t--tl-cursor-cross: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z' fill='white'/><path d='m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z' fill='%23231f1f'/></g></svg>\")\n\t\t\t16 16,\n\t\tcrosshair;\n\t--tl-cursor-move: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z' fill='white'/><g fill='black'><path d='m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z'/><path d='m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tmove;\n\t--tl-cursor-grab: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121' fill='white'/><g stroke='black' stroke-linecap='round' stroke-width='.75'><path d='m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121' stroke-linejoin='round'/><path d='m20.5664 21.7344v-3.459'/><path d='m18.5508 21.7461-.016-3.473'/><path d='m16.5547 18.3047.021 3.426'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tgrab;\n\t--tl-cursor-grabbing: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tgrabbing;\n\t--tl-cursor-text: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path fill='white' d='M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z'/><path fill='black' d='M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z'/></g></svg>\")\n\t\t\t4 10,\n\t\ttext;\n\t--tl-cursor-zoom-in: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5' fill='white'/><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z' stroke='black'/><g fill='black'><path d='m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z'/><path d='m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tzoom-in;\n\t--tl-cursor-zoom-out: url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='1' dy='1' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(0 16 16)' filter='url(%23shadow)'><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5' fill='white'/><path d='m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z' stroke='black'/><g fill='black'><path d='m18 16h-5.98v-1.98h5.98z'/><path d='m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z'/></g></g></svg>\")\n\t\t\t16 16,\n\t\tzoom-out;\n\n\t/* These cursor values get programmatically overridden */\n\t/* They're just here to help your editor autocomplete */\n\t--tl-cursor: var(--tl-cursor-default);\n\t--tl-cursor-resize-edge: ew-resize;\n\t--tl-cursor-resize-corner: nesw-resize;\n\t--tl-cursor-ew-resize: ew-resize;\n\t--tl-cursor-ns-resize: ns-resize;\n\t--tl-cursor-nesw-resize: nesw-resize;\n\t--tl-cursor-nwse-resize: nwse-resize;\n\t--tl-cursor-rotate: pointer;\n\t--tl-cursor-nwse-rotate: pointer;\n\t--tl-cursor-nesw-rotate: pointer;\n\t--tl-cursor-senw-rotate: pointer;\n\t--tl-cursor-swne-rotate: pointer;\n\t--tl-scale: calc(1 / var(--tl-zoom));\n\t--tl-font-draw: 'tldraw_draw', sans-serif;\n\t--tl-font-sans: 'tldraw_sans', sans-serif;\n\t--tl-font-serif: 'tldraw_serif', serif;\n\t--tl-font-mono: 'tldraw_mono', monospace;\n\t--a: calc(min(0.5, 1 / var(--tl-zoom)) * 2px);\n\t--b: calc(min(0.5, 1 / var(--tl-zoom)) * -2px);\n\t--tl-text-outline: 0 var(--b) 0 var(--color-background), 0 var(--a) 0 var(--color-background),\n\t\tvar(--b) var(--b) 0 var(--color-background), var(--a) var(--b) 0 var(--color-background),\n\t\tvar(--a) var(--a) 0 var(--color-background), var(--b) var(--a) 0 var(--color-background);\n\t/* Own properties */\n\tposition: relative;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: clip;\n}\n\n.tl-theme__light {\n\t--color-accent: #e64a4a;\n\t--color-background: rgb(249, 250, 251);\n\t--color-brush-fill: rgba(144, 144, 144, 0.102);\n\t--color-brush-stroke: rgba(144, 144, 144, 0.251);\n\t--color-grid: rgb(109, 109, 109);\n\t--color-low: rgb(237, 240, 242);\n\t--color-culled: rgb(235, 238, 240);\n\t--color-muted-0: rgba(0, 0, 0, 0.02);\n\t--color-muted-1: rgba(0, 0, 0, 0.1);\n\t--color-muted-2: rgba(0, 0, 0, 0.042);\n\t--color-hint: rgba(0, 0, 0, 0.055);\n\t--color-overlay: rgba(0, 0, 0, 0.2);\n\t--color-divider: #e8e8e8;\n\t--color-panel-contrast: #ffffff;\n\t--color-panel-overlay: rgba(255, 255, 255, 0.82);\n\t--color-panel: #fdfdfd;\n\t--color-focus: #004094;\n\t--color-selected: #2f80ed;\n\t--color-selected-contrast: #ffffff;\n\t--color-selection-fill: #1e90ff06;\n\t--color-selection-stroke: #2f80ed;\n\t--color-text-0: #1d1d1d;\n\t--color-text-1: #2d2d2d;\n\t--color-text-2: #5f6369;\n\t--color-text-3: #b6b7ba;\n\t--color-primary: #2f80ed;\n\t--color-warn: #d10b0b;\n\t--color-text: #000000;\n\t--color-laser: #ff0000;\n\n\t--shadow-1: 0px 1px 2px rgba(0, 0, 0, 0.22), 0px 1px 3px rgba(0, 0, 0, 0.09);\n\t--shadow-2: 0px 0px 2px rgba(0, 0, 0, 0.12), 0px 2px 3px rgba(0, 0, 0, 0.24),\n\t\t0px 2px 6px rgba(0, 0, 0, 0.1), inset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-3: 0px 1px 2px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.14),\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-4: 0px 0px 3px rgba(0, 0, 0, 0.16), 0px 5px 4px rgba(0, 0, 0, 0.16),\n\t\t0px 2px 16px rgba(0, 0, 0, 0.06), inset 0px 0px 0px 1px var(--color-panel-contrast);\n}\n\n.tl-theme__dark {\n\t--color-accent: #e64a4a;\n\t--color-background: #212529;\n\t--color-brush-fill: rgba(180, 180, 180, 0.05);\n\t--color-brush-stroke: rgba(180, 180, 180, 0.25);\n\t--color-grid: #909090;\n\t--color-low: #2c3136;\n\t--color-culled: rgb(47, 52, 57);\n\t--color-muted-0: rgba(255, 255, 255, 0.02);\n\t--color-muted-1: rgba(255, 255, 255, 0.1);\n\t--color-muted-2: rgba(255, 255, 255, 0.05);\n\t--color-hint: rgba(255, 255, 255, 0.1);\n\t--color-overlay: rgba(0, 0, 0, 0.35);\n\t--color-divider: #49555f;\n\t--color-panel-contrast: #49555f;\n\t--color-panel: #363d44;\n\t--color-panel-overlay: rgba(54, 61, 68, 0.82);\n\t--color-focus: #a5c3f3;\n\t--color-selected: #4285f4;\n\t--color-selected-contrast: #ffffff;\n\t--color-selection-fill: rgba(38, 150, 255, 0.05);\n\t--color-selection-stroke: #2f80ed;\n\t--color-text-0: #f0eded;\n\t--color-text-1: #d9d9d9;\n\t--color-text-2: #8e9094;\n\t--color-text-3: #515a62;\n\t--color-primary: #2f80ed;\n\t--color-warn: #d10b0b;\n\t--color-text: #f8f9fa;\n\t--color-laser: #ff0000;\n\n\t--shadow-1: 0px 1px 2px #00000029, 0px 1px 3px #00000038,\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-2: 0px 1px 3px #00000077, 0px 2px 6px #00000055,\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n\t--shadow-3: 0px 1px 3px #00000077, 0px 2px 12px rgba(0, 0, 0, 0.22),\n\t\tinset 0px 0px 0px 1px var(--color-panel-contrast);\n}\n\n.tl-counter-scaled {\n\ttransform: scale(var(--tl-scale));\n\ttransform-origin: top left;\n\twidth: calc(100% * var(--tl-zoom));\n\theight: calc(100% * var(--tl-zoom));\n}\n\n.tl-container,\n.tl-container * {\n\t-webkit-touch-callout: none;\n\t-webkit-tap-highlight-color: transparent;\n\tscrollbar-highlight-color: transparent;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\tbox-sizing: border-box;\n\toutline: none;\n}\n\n.tl-container a {\n\t-webkit-touch-callout: initial;\n}\n\n.tl-container:focus-within {\n\toutline: 1px solid var(--color-low);\n}\n\ninput,\n*[contenteditable],\n*[contenteditable] * {\n\t-webkit-user-select: text;\n}\n\n/* -------------------------------------------------- */\n/*                       Canvas                       */\n/* -------------------------------------------------- */\n\n.tl-canvas {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tcolor: var(--color-text);\n\tz-index: var(--layer-canvas);\n\tcursor: var(--tl-cursor);\n\toverflow: clip;\n\tcontent-visibility: auto;\n\ttouch-action: none;\n\tcontain: strict;\n}\n\n.tl-fixed-layer {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tcontain: strict;\n\tpointer-events: none;\n}\n\n.tl-shapes {\n\tposition: relative;\n\tz-index: 2;\n}\n\n.tl-overlays {\n\tposition: relative;\n\tz-index: 3;\n}\n\n.tl-overlays__item {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: var(--tl-dpr-multiple-px);\n\twidth: var(--tl-dpr-multiple-px);\n\toverflow: visible;\n\tpointer-events: none;\n\ttransform-origin: top left;\n}\n\n.tl-svg-context {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: var(--tl-dpr-multiple-px);\n\twidth: var(--tl-dpr-multiple-px);\n\tpointer-events: none;\n}\n\n.tl-positioned {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\ttransform-origin: top left;\n}\n\n/* ------------------- Background ------------------- */\n\n.tl-background {\n\tposition: absolute;\n\tbackground-color: var(--color-background);\n\tinset: 0px;\n}\n\n/* --------------------- Grid Layer --------------------- */\n\n.tl-grid {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\ttouch-action: none;\n\tpointer-events: none;\n\tz-index: 2;\n\tcontain: strict;\n}\n\n.tl-grid-dot {\n\tfill: var(--color-grid);\n}\n\n/* --------------------- Layers --------------------- */\n\n.tl-html-layer {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 1px;\n\theight: 1px;\n\tcontain: layout style size;\n}\n\n/* ---------------------- Brush --------------------- */\n\n.tl-brush {\n\tstroke-width: calc(var(--tl-scale) * 1px);\n\tcontain: size layout;\n}\n\n.tl-brush__default {\n\tstroke: var(--color-brush-stroke);\n\tfill: var(--color-brush-fill);\n}\n\n/* -------------------- Scribble -------------------- */\n\n.tl-scribble {\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tpointer-events: none;\n\tcontain: size layout;\n}\n\n/* ---------------------- Shape --------------------- */\n\n.tl-shape {\n\tposition: absolute;\n\tpointer-events: none;\n\toverflow: visible;\n\ttransform-origin: top left;\n\tcontain: size layout;\n}\n\n.tl-shape__culled {\n\tposition: relative;\n\tbackground-color: var(--color-culled);\n}\n\n/* ---------------- Shape Containers ---------------- */\n\n.tl-svg-container {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: none;\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n\ttransform-origin: top left;\n\toverflow: visible;\n}\n\n.tl-html-container {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: none;\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n\t/* content-visibility: auto; */\n\ttransform-origin: top left;\n\tcolor: inherit;\n}\n\n/* --------------- Overlay Stack --------------- */\n\n/* back of the stack, behind user's stuff */\n.tl-collaborator__scribble {\n\tz-index: 10;\n}\n\n.tl-collaborator__brush {\n\tz-index: 20;\n}\n\n.tl-collaborator__shape-indicator {\n\tz-index: 30;\n}\n\n.tl-user-scribble {\n\tz-index: 40;\n}\n\n.tl-user-brush {\n\tz-index: 50;\n}\n\n.tl-user-indicator__selected {\n\tz-index: 60;\n}\n\n.tl-user-indicator__hovered {\n\tz-index: 70;\n}\n\n.tl-user-handles {\n\tz-index: 80;\n}\n\n.tl-user-snapline {\n\tz-index: 90;\n}\n\n.tl-selection__fg {\n\tpointer-events: none;\n\tz-index: 100;\n}\n\n.tl-user-indicator__hint {\n\tz-index: 110;\n\tstroke-width: calc(2.5px * var(--tl-scale));\n}\n\n/* behind collaborator cursor */\n.tl-collaborator__cursor-hint {\n\tz-index: 120;\n}\n\n.tl-collaborator__cursor {\n\tz-index: 130;\n}\n\n.tl-cursor {\n\toverflow: visible;\n}\n\n/* -------------------- Indicator ------------------- */\n\n.tl-shape-indicator {\n\ttransform-origin: top left;\n\tfill: none;\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tcontain: size;\n}\n\n/* ------------------ SelectionBox ------------------ */\n\n.tl-selection__bg {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\ttransform-origin: top left;\n\tbackground-color: transparent;\n\tpointer-events: all;\n}\n\n.tl-selection__fg__outline {\n\tfill: none;\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n}\n\n.tl-corner-handle {\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n}\n\n.tl-text-handle {\n\tpointer-events: none;\n\tfill: var(--color-selection-stroke);\n}\n\n.tl-corner-crop-handle {\n\tpointer-events: none;\n\tfill: none;\n\tstroke: var(--color-selection-stroke);\n}\n\n.tl-corner-crop-edge-handle {\n\tpointer-events: none;\n\tfill: none;\n\tstroke: var(--color-selection-stroke);\n}\n\n.tl-rotate-handle {\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tpointer-events: all;\n}\n\n.tl-mobile-rotate__bg {\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-grab);\n}\n\n.tl-mobile-rotate__fg {\n\tpointer-events: none;\n\tstroke: var(--color-selection-stroke);\n\tfill: var(--color-background);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n}\n\n.tl-transparent {\n\tfill: transparent;\n\tstroke: transparent;\n}\n\n/* --------------------- Handles -------------------- */\n\n.tl-handle {\n\tpointer-events: all;\n}\n\n.tl-handle__bg {\n\tfill: transparent;\n\tstroke: transparent;\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-grabbing);\n}\n\n.tl-handle__fg {\n\tfill: var(--color-background);\n\tstroke: var(--color-selection-stroke);\n\tstroke-width: calc(1.5px * var(--tl-scale));\n\tpointer-events: none;\n}\n\n.tl-handle__create {\n\topacity: 0;\n}\n.tl-handle__create:hover {\n\topacity: 1;\n}\n\n.tl-handle__bg:active {\n\tfill: none;\n}\n\n.tl-handle__bg:hover {\n\tcursor: var(--tl-cursor-grab);\n\tfill: var(--color-selection-fill);\n}\n\n@media (pointer: coarse) {\n\t.tl-handle__bg:active {\n\t\tfill: var(--color-selection-fill);\n\t}\n\n\t.tl-handle__create {\n\t\topacity: 1;\n\t}\n}\n\n/* ------------------ Bounds Detail ----------------- */\n\n.tl-image,\n.tl-video {\n\tobject-fit: cover;\n\tbackground-size: cover;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.tl-image-container,\n.tl-video-container,\n.tl-embed-container {\n\twidth: 100%;\n\theight: 100%;\n\tpointer-events: all;\n\t/* background-color: var(--color-background); */\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.tl-image__tg {\n\t--scale: calc(min(2, var(--tl-scale)));\n\tposition: absolute;\n\ttop: calc(var(--scale) * 8px);\n\tright: calc(var(--scale) * 8px);\n\tfont-size: 10px;\n\ttransform-origin: top right;\n\tbackground-color: var(--color-background);\n\tpadding: 2px 4px;\n\tborder-radius: 4px;\n}\n\n/* --------------------- Nametag -------------------- */\n\n.tl-collaborator-cursor {\n\tposition: absolute;\n}\n\n.tl-nametag {\n\tposition: absolute;\n\ttop: 16px;\n\tleft: 13px;\n\twidth: fit-content;\n\theight: fit-content;\n\tmax-width: 120px;\n\tpadding: 3px 6px;\n\twhite-space: nowrap;\n\tposition: absolute;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\tborder-radius: var(--radius-2);\n\tcolor: var(--color-selected-contrast);\n}\n\n.tl-nametag-title {\n\tposition: absolute;\n\ttop: -2px;\n\tleft: 13px;\n\twidth: fit-content;\n\theight: fit-content;\n\tpadding: 0px 6px;\n\tmax-width: 120px;\n\twhite-space: nowrap;\n\tposition: absolute;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\ttext-shadow: var(--tl-text-outline);\n\tcolor: var(--color-selected-contrast);\n}\n\n.tl-nametag-chat {\n\tposition: absolute;\n\ttop: 16px;\n\tleft: 13px;\n\twidth: fit-content;\n\theight: fit-content;\n\tcolor: var(--color-selected-contrast);\n\twhite-space: nowrap;\n\tposition: absolute;\n\tpadding: 3px 6px;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\topacity: 1;\n\tborder-radius: var(--radius-2);\n}\n\n.tl-cursor-chat {\n\tposition: absolute;\n\tcolor: var(--color-selected-contrast);\n\twhite-space: nowrap;\n\tpadding: 3px 6px;\n\tfont-size: 12px;\n\tfont-family: var(--font-body);\n\tpointer-events: none;\n\tz-index: var(--layer-cursor);\n\tmargin-top: 16px;\n\tmargin-left: 13px;\n\topacity: 1;\n\tborder: none;\n\tuser-select: text;\n\tborder-radius: var(--radius-2);\n}\n\n.tl-cursor-chat .tl-cursor-chat__bubble {\n\tpadding-right: 12px;\n}\n\n.tl-cursor-chat::selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n}\n\n.tl-cursor-chat-fade {\n\t/* Setting to zero causes it to immediately disappear */\n\t/* Setting to near-zero causes it to fade out gradually */\n\topacity: 0.0001;\n\ttransition: opacity 5s ease-in-out;\n}\n\n.tl-cursor-chat::placeholder {\n\tcolor: var(--color-selected-contrast);\n\topacity: 0.7;\n}\n\n/* -------------------------------------------------- */\n/*                       Spinner                      */\n/* -------------------------------------------------- */\n\n@keyframes spinner {\n\tto {\n\t\ttransform: rotate(360deg);\n\t}\n}\n\n.tl-spinner::after {\n\tcontent: '';\n\tbox-sizing: border-box;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\twidth: 20px;\n\theight: 20px;\n\tmargin-top: -10px;\n\tmargin-left: -10px;\n\tborder-radius: 50%;\n\tborder: 2px solid #ccc;\n\tborder-top-color: #000;\n\tanimation: spinner 0.6s linear infinite;\n\tpointer-events: none;\n}\n\n/* -------------------- IconShape ------------------- */\n\n.tl-iconshape__icon {\n\tpointer-events: all;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.tl-icon-preview {\n\twidth: 14px;\n\theight: 14px;\n}\n\n/* ------------------- Text Shape ------------------- */\n\n.tl-text-shape__wrapper {\n\tposition: relative;\n\tfont-weight: normal;\n\tmin-width: 1px;\n\tpadding: 0px;\n\tmargin: 0px;\n\tborder: none;\n\theight: 100%;\n\tfont-variant: normal;\n\tfont-style: normal;\n\tpointer-events: all;\n\twhite-space: pre-wrap;\n\toverflow-wrap: break-word;\n\ttext-shadow: var(--tl-text-outline);\n}\n\n.tl-text-shape__wrapper[data-align='start'] {\n\ttext-align: left;\n}\n\n.tl-text-shape__wrapper[data-align='middle'] {\n\ttext-align: center;\n}\n\n.tl-text-shape__wrapper[data-align='end'] {\n\ttext-align: right;\n}\n\n.tl-text-shape__wrapper[data-font='draw'] {\n\tfont-family: var(--tl-font-draw);\n}\n\n.tl-text-shape__wrapper[data-font='sans'] {\n\tfont-family: var(--tl-font-sans);\n}\n\n.tl-text-shape__wrapper[data-font='serif'] {\n\tfont-family: var(--tl-font-serif);\n}\n\n.tl-text-shape__wrapper[data-font='mono'] {\n\tfont-family: var(--tl-font-mono);\n}\n\n.tl-text-shape__wrapper[data-isediting='true'] .tl-text-content {\n\topacity: 0;\n}\n\n.tl-text {\n\t/* remove overflow from textarea on windows */\n\tmargin: 0px;\n\tpadding: 0px;\n\tborder: 0px;\n\tcolor: inherit;\n\tcaret-color: var(--color-text);\n\tbackground: none;\n\tborder-image: none;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\tfont-variant: inherit;\n\tfont-style: inherit;\n\ttext-align: inherit;\n\tletter-spacing: inherit;\n\ttext-shadow: inherit;\n\toutline: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tpointer-events: all;\n\ttext-rendering: auto;\n\ttext-transform: none;\n\ttext-indent: 0px;\n\tdisplay: inline-block;\n\tappearance: auto;\n\tcolumn-count: initial !important;\n\twriting-mode: horizontal-tb !important;\n\tword-spacing: 0px;\n}\n\n.tl-text-measure {\n\tposition: absolute;\n\tz-index: 999999;\n\ttop: -9999px;\n\tright: -9999px;\n\topacity: 0;\n\twidth: max-content;\n\tbox-sizing: border-box;\n\tpointer-events: none;\n\tline-break: normal;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tresize: none;\n\tborder: none;\n\tuser-select: none;\n\tcontain: style paint;\n\t-webkit-user-select: none;\n}\n\n.tl-text-edit-container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.tl-text-input,\n.tl-text-content {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tmin-width: 1px;\n\tmin-height: 1px;\n\toverflow: visible;\n\toutline: none;\n}\n\n.tl-text-content {\n\tpointer-events: none;\n}\n\n.tl-text-input {\n\tresize: none;\n\tuser-select: all;\n\t-webkit-user-select: text;\n\toverflow: hidden;\n\tcursor: var(--tl-cursor-text);\n}\n\n.tl-text-input::selection {\n\tbackground: var(--color-selected);\n\tcolor: var(--color-selected-contrast);\n\ttext-shadow: none;\n}\n\n/* ------------------- Snap Lines ------------------- */\n\n.tl-snap-line {\n\tstroke: var(--color-accent);\n\tstroke-width: calc(1px * var(--tl-scale));\n\tfill: none;\n}\n\n.tl-snap-point {\n\tstroke: var(--color-accent);\n\tstroke-width: calc(1px * var(--tl-scale));\n\tfill: none;\n}\n\n/* -------------------- Groups ------------------ */\n\n.tl-group {\n\tstroke: var(--color-text);\n\tstroke-width: calc(1px * var(--tl-scale));\n\topacity: 0.5;\n}\n\n/* ------------------- Bookmark Shape ------------------- */\n\n.tl-bookmark__container {\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\tborder: 1px solid var(--color-panel-contrast);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-2);\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n}\n\n.tl-bookmark__image_container {\n\tflex: 1;\n\toverflow: hidden;\n\tborder-top-left-radius: var(--radius-1);\n\tborder-top-right-radius: var(--radius-1);\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: flex-start;\n}\n\n.tl-bookmark__image_container > .tl-hyperlink-button::after {\n\tbackground-color: var(--color-panel);\n}\n\n.tl-bookmark__placeholder {\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-muted-2);\n\tborder-bottom: 1px solid var(--color-muted-2);\n}\n\n.tl-bookmark__image {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n\tobject-position: center;\n}\n\n.tl-bookmark__copy_container {\n\tbackground-color: var(--color-muted);\n\tpadding: var(--space-4);\n\tpointer-events: all;\n}\n\n.tl-bookmark__heading,\n.tl-bookmark__description,\n.tl-bookmark__link {\n\tmargin: 0px;\n\twidth: 100%;\n\tfont-family: inherit;\n}\n\n.tl-bookmark__heading {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding-bottom: var(--space-2);\n\tmargin: 8px 0px;\n}\n\n.tl-bookmark__description {\n\tfont-size: 12px;\n\tpadding-bottom: var(--space-4);\n}\n\n.tl-bookmark__link {\n\tfont-size: 14px;\n\tpointer-events: all;\n\tz-index: 999;\n\toverflow: hidden;\n\tdisplay: block;\n\tcolor: var(--color-text);\n\ttext-overflow: ellipsis;\n\ttext-decoration: none;\n\tcolor: var(--color-text-2);\n\tcursor: var(--tl-cursor-pointer);\n}\n\n.tl-bookmark__link:hover {\n\tcolor: var(--color-selected);\n}\n\n/* ---------------- Hyperlink Button ---------------- */\n\n.tl-hyperlink-button {\n\tbackground: none;\n\tmargin: 0px;\n\tposition: absolute;\n\ttop: 0px;\n\tright: 0px;\n\theight: 44px;\n\twidth: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 200;\n\tfont-size: 12px;\n\tfont-weight: 400;\n\tcolor: var(--color-text-1);\n\tpadding: 13px;\n\tcursor: var(--tl-cursor-pointer);\n\tborder: none;\n\toutline: none;\n\tpointer-events: all;\n}\n\n.tl-hyperlink-button::after {\n\tcontent: '';\n\tz-index: -1;\n\tposition: absolute;\n\tright: 6px;\n\tbottom: 6px;\n\tdisplay: block;\n\twidth: calc(100% - 12px);\n\theight: calc(100% - 12px);\n\tborder-radius: var(--radius-1);\n\tbackground-color: var(--color-background);\n\tpointer-events: none;\n}\n\n.tl-hyperlink-button:hover {\n\tcolor: var(--color-selected);\n}\n\n.tl-hyperlink-button:focus-visible {\n\tcolor: var(--color-selected);\n}\n\n.tl-hyperlink-button__icon {\n\twidth: 18px;\n\theight: 18px;\n\tbackground-color: currentColor;\n\tpointer-events: none;\n}\n\n.tl-hyperlink-button__hidden {\n\tdisplay: none;\n}\n\n/* ---------------- Geo shape ---------------- */\n\n.tl-text-label {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: var(--color-text);\n\ttext-shadow: var(--tl-text-outline);\n\tline-height: inherit;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 10;\n}\n\n.tl-text-label[data-isediting='true'] .tl-text-content {\n\topacity: 0;\n}\n\n.tl-text-label[data-hastext='false'][data-isediting='false'] > .tl-text-label__inner {\n\twidth: 40px;\n\theight: 40px;\n}\n\n.tl-text-label[data-hastext='true'][data-isediting='false'] .tl-text-content {\n\tpointer-events: all;\n}\n\n.tl-text-label__inner {\n\tposition: relative;\n\twidth: fit-content;\n\theight: fit-content;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpointer-events: all;\n\tmin-height: auto;\n}\n\n.tl-text-label__inner > .tl-text {\n\tposition: relative;\n\ttop: 0px;\n\tleft: 0px;\n\tpadding: 16px;\n\theight: fit-content;\n\twidth: fit-content;\n\tborder-radius: var(--radius-1);\n\tmax-width: 100%;\n\tz-index: 3;\n}\n\n.tl-text-label__inner > .tl-text-input {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 16px;\n\tz-index: 4;\n}\n\n.tl-text-label[data-textwrap='true'] > .tl-text-label__inner {\n\tmax-width: 100%;\n}\n\n.tl-text-label[data-isediting='true'] {\n\tbackground-color: transparent;\n\tmin-height: auto;\n}\n\n.tl-text-label[data-isediting='true'] p {\n\topacity: 0;\n}\n\n.tl-text-label[data-align='start'],\n.tl-text-label[data-align='start-legacy'] {\n\ttext-align: left;\n}\n\n.tl-text-label[data-align='middle'],\n.tl-text-label[data-align='middle-legacy'] {\n\ttext-align: center;\n}\n\n.tl-text-label[data-align='end'],\n.tl-text-label[data-align='end-legacy'] {\n\ttext-align: right;\n}\n\n.tl-arrow-hint {\n\tstroke: var(--color-text-1);\n\tfill: none;\n\tstroke-linecap: round;\n\toverflow: visible;\n}\n\n.tl-arrow-label[data-font='draw'],\n.tl-text-label[data-font='draw'] {\n\tfont-family: var(--tl-font-draw);\n}\n\n.tl-arrow-label[data-font='sans'],\n.tl-text-label[data-font='sans'] {\n\tfont-family: var(--tl-font-sans);\n}\n\n.tl-arrow-label[data-font='serif'],\n.tl-text-label[data-font='serif'] {\n\tfont-family: var(--tl-font-serif);\n}\n\n.tl-arrow-label[data-font='mono'],\n.tl-text-label[data-font='mono'] {\n\tfont-family: var(--tl-font-mono);\n}\n\n/* ------------------- Arrow Shape ------------------ */\n\n.tl-arrow-label {\n\tposition: absolute;\n\ttop: -1px;\n\tleft: -1px;\n\twidth: 2px;\n\theight: 2px;\n\tpadding: 0px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: var(--color-text);\n\ttext-shadow: var(--tl-text-outline);\n}\n\n.tl-arrow-label[data-isediting='true'] p {\n\topacity: 0;\n}\n\n.tl-arrow-label[data-isediting='true'] > .tl-arrow-label__inner {\n\tbackground-color: var(--color-background);\n}\n\n.tl-arrow-label__inner {\n\tborder-radius: var(--radius-1);\n\tbox-sizing: content-box;\n\tposition: relative;\n\theight: max-content;\n\twidth: max-content;\n\tpointer-events: all;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.tl-arrow-label p,\n.tl-arrow-label textarea {\n\tmargin: 0px;\n\tpadding: 0px;\n\tborder: 0px;\n\tcolor: inherit;\n\tcaret-color: var(--color-text);\n\tbackground: none;\n\tborder-image: none;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\tfont-variant: inherit;\n\tfont-style: inherit;\n\ttext-align: inherit;\n\tletter-spacing: inherit;\n\ttext-shadow: inherit;\n\toutline: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\toverflow-wrap: break-word;\n\tpointer-events: all;\n\ttext-rendering: auto;\n\ttext-transform: none;\n\ttext-indent: 0px;\n\tdisplay: inline-block;\n\tappearance: auto;\n\tcolumn-count: initial !important;\n\twriting-mode: horizontal-tb !important;\n\tword-spacing: 0px;\n}\n\n.tl-arrow-label p {\n\tposition: relative;\n\theight: max-content;\n\tz-index: 2;\n\tpadding: 4px;\n\toverflow: visible;\n}\n\n.tl-arrow-label textarea {\n\tz-index: 3;\n\tmargin: 0px;\n\tpadding: 4px;\n\theight: 100%;\n\twidth: 100%;\n\tposition: absolute;\n\tresize: none;\n\tborder: 0px;\n\tuser-select: all;\n\t-webkit-user-select: text;\n\tcaret-color: var(--color-text);\n\tborder-image: none;\n\t/* Don't allow textarea to be zero width */\n\tmin-width: 4px;\n}\n\n/* -------------------- NoteShape ------------------- */\n\n.tl-note__container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: var(--radius-2);\n\tbox-shadow: var(--shadow-1);\n\toverflow: hidden;\n\tborder-color: currentColor;\n\tborder-style: solid;\n\tborder-width: 1px;\n}\n\n.tl-note__container .tl-text-label {\n\ttext-shadow: none;\n}\n\n.tl-note__scrim {\n\tposition: absolute;\n\tz-index: 1;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-background);\n\topacity: 0.28;\n}\n\n.tl-loading {\n\tbackground-color: var(--color-background);\n\tcolor: var(--color-text-1);\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: var(--space-2);\n\tfont-size: 14px;\n\tfont-weight: 500;\n\topacity: 0;\n\tanimation: fade-in 0.2s ease-in-out forwards;\n\tanimation-delay: 0.2s;\n}\n\n@keyframes fade-in {\n\t0% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n/* -------------------- FrameShape ------------------- */\n\n.tl-frame__body {\n\tstroke-width: calc(1px * var(--tl-scale));\n}\n\n.tl-frame__hitarea {\n\tborder-style: solid;\n\tborder-width: calc(8px * var(--tl-scale));\n\tborder-color: transparent;\n\tbackground: none;\n\tpointer-events: stroke;\n\tbox-sizing: border-box;\n\ttop: calc(-8px * var(--tl-scale));\n\tleft: calc(-8px * var(--tl-scale));\n\twidth: calc(100% + calc(16px * var(--tl-scale)));\n\theight: calc(100% + calc(16px * var(--tl-scale)));\n\tz-index: 1;\n\tposition: absolute;\n}\n\n.tl-frame-heading {\n\tdisplay: flex;\n\talign-items: center;\n\tposition: absolute;\n\ttransform-origin: 0% 100%;\n\toverflow: hidden;\n\tmax-width: 100%;\n\tmin-width: 32px;\n\theight: auto;\n\tfont-size: 12px;\n\tpadding-bottom: 4px;\n\tpointer-events: all;\n}\n\n.tl-frame-heading-hit-area {\n\tpointer-events: all;\n\t/* scale from bottom left corner so we can pin it to the top left corner of the frame */\n\ttransform-origin: 0% 100%;\n\tdisplay: flex;\n\theight: 100%;\n\twidth: 100%;\n\talign-items: center;\n\tborder-radius: var(--radius-1);\n\tbackground-color: var(--color-background);\n}\n\n.tl-frame-label {\n\tpointer-events: all;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding: var(--space-3) var(--space-3);\n\tposition: relative;\n\tfont-size: inherit;\n\twhite-space: pre;\n\tborder: 1px solid transparent;\n}\n\n.tl-frame-label__editing {\n\tcolor: transparent;\n\twhite-space: pre;\n\twidth: auto;\n\toverflow: visible;\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-1);\n\tborder-color: var(--color-selected);\n}\n\n.tl-frame-name-input {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tborder: none;\n\tbackground: none;\n\toutline: none;\n\tpadding: var(--space-3) var(--space-3);\n\tinset: 0px;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\twidth: 100%;\n\tcolor: var(--color-text-1);\n\tborder-radius: var(--radius-1);\n\tuser-select: all;\n\t-webkit-user-select: text;\n\twhite-space: pre;\n\tcursor: var(--tl-cursor-text);\n}\n\n/* If mobile use 16px as font size */\n/* On iOS, font size under 16px in an input will make the page zoom into the input  */\n/* https://css-tricks.com/16px-or-larger-text-prevents-ios-form-zoom/ */\n@media (max-width: 600px) {\n\t.tl-frame-heading {\n\t\tfont-size: 16px;\n\t}\n}\n\n/* ------------------ iFrames Detail ----------------- */\n\n.tl-embed {\n\tborder: none;\n\tborder-radius: var(--radius-2);\n}\n\n/* ------------------- Code Editor ------------------ */\n\n.tl-image__button {\n\tpadding: 4px 8px;\n\tcolor: var(--color-text);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-2);\n\tbox-shadow: var(--shadow-1);\n\tpointer-events: all;\n\tcursor: var(--tl-cursor-pointer);\n\toutline: none;\n\tdisplay: flex;\n}\n\n.tl-image__button:disabled {\n\topacity: 0.5;\n\tpointer-events: none;\n}\n\n.tl-image__toolbox {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: flex-end;\n\tpadding: 10px;\n}\n\n.tl-image__toolbox__hidden {\n\tdisplay: none;\n}\n\n/* -------------- Shape Error Boundary -------------- */\n\n.tl-shape-error-boundary {\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: var(--color-muted-1);\n\tborder-width: calc(1px * var(--tl-scale));\n\tborder-color: var(--color-muted-1);\n\tborder-style: solid;\n\tborder-radius: calc(var(--radius-1) * var(--tl-scale));\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\ttext-align: left;\n\tposition: relative;\n\tpointer-events: all;\n\toverflow: hidden;\n\tpadding: var(--space-2);\n}\n\n.tl-shape-error-boundary::before {\n\ttransform: scale(var(--tl-scale));\n\tcontent: 'Error';\n\tfont-size: 12px;\n\tfont-family: inherit;\n\tcolor: var(--color-text-0);\n}\n\n/* ----------------- Error Boundary ----------------- */\n\n.tl-error-boundary {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: var(--space-4);\n\tbackground-color: var(--color-background);\n\tcolor: var(--color-text-1);\n\tposition: absolute;\n\tz-index: 600;\n}\n\n.tl-error-boundary__overlay {\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 500;\n\tbackground-color: var(--color-overlay);\n}\n\n.tl-error-boundary__content * {\n\tuser-select: all;\n\t-webkit-user-select: text;\n\tpointer-events: all;\n}\n\n.tl-error-boundary__canvas {\n\tpointer-events: none;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: -1;\n}\n/* some browsers seem to have some weird interactions between stacking contexts\nand pointer-events. this ::after pseudo element covers the canvas and prevents\nit from receiving any pointer events or affecting the cursor. */\n.tl-error-boundary__canvas::after {\n\tcontent: ' ';\n\tdisplay: block;\n\tposition: absolute;\n\tinset: 0px;\n\tz-index: 600;\n\tpointer-events: all;\n}\n\n.tl-error-boundary__content {\n\twidth: fit-content;\n\theight: fit-content;\n\tmax-width: 100%;\n\twidth: 400px;\n\tmax-height: 100%;\n\tbackground-color: var(--color-panel);\n\tpadding: var(--space-6);\n\tborder-radius: var(--radius-4);\n\tbox-shadow: var(--shadow-2);\n\tfont-size: 14px;\n\tfont-weight: 400;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-5);\n\toverflow: auto;\n\tz-index: 600;\n}\n.tl-error-boundary__content__expanded {\n\twidth: 600px;\n}\n\n.tl-error-boundary__content h2 {\n\tfont-size: 16px;\n\tmargin: 0px;\n\tfont-weight: 500;\n}\n\n.tl-error-boundary__content p {\n\tline-height: 1.5;\n\tmargin: 0px;\n}\n\n.tl-error-boundary__content pre {\n\tbackground-color: var(--color-muted-2);\n\tpadding: var(--space-5);\n\tborder-radius: var(--radius-2);\n\toverflow: auto;\n\tfont-size: 12px;\n\tmax-height: 320px;\n\tmargin: 0px;\n}\n\n.tl-error-boundary__content button {\n\tbackground: none;\n\tborder: none;\n\tfont-family: inherit;\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tpadding: var(--space-4);\n\tborder-radius: var(--radius-3);\n\tcursor: var(--tl-cursor-pointer);\n\tcolor: inherit;\n\tbackground-color: transparent;\n}\n.tl-error-boundary__content button:hover {\n\tbackground-color: var(--color-low);\n}\n\n.tl-error-boundary__content a {\n\tcolor: var(--color-text-1);\n\tfont-weight: 500;\n\ttext-decoration: none;\n}\n.tl-error-boundary__content a:hover {\n\tcolor: var(--color-text-2);\n}\n\n.tl-error-boundary__content__error {\n\tposition: relative;\n}\n.tl-error-boundary__content__error button {\n\tposition: absolute;\n\ttop: var(--space-2);\n\tright: var(--space-2);\n\tfont-size: 12px;\n\tpadding: var(--space-2) var(--space-3);\n\tbackground-color: var(--color-panel);\n\tborder-radius: var(--radius-1);\n}\n\n.tl-error-boundary__content__actions {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tgap: var(--space-4);\n\tmargin: calc(var(--space-4) * -1);\n\tmargin-top: 0px;\n}\n.tl-error-boundary__content__actions__group {\n\tdisplay: flex;\n\tgap: var(--space-4);\n}\n.tl-error-boundary__content .tl-error-boundary__reset {\n\tcolor: var(--color-warn);\n}\n.tl-error-boundary__content .tl-error-boundary__refresh {\n\tbackground-color: var(--color-primary);\n\tcolor: var(--color-selected-contrast);\n}\n.tl-error-boundary__content .tl-error-boundary__refresh:hover {\n\tbackground-color: var(--color-primary);\n\topacity: 0.9;\n}\n\n/* --------------------- Coarse --------------------- */\n\n@media screen and (pointer: coarse) {\n\t/* If mobile always show handle-hint as there is no hover state */\n\t.tl-canvas__mobile .tl-handle__hint {\n\t\topacity: 1;\n\t}\n}\n\n.tl-hidden {\n\topacity: 0;\n\tpointer-events: none;\n}\n\n.debug__ui-logger {\n\tposition: absolute;\n\ttop: 62px;\n\tleft: 16px;\n\tcolor: #555;\n\tfont-size: 12px;\n\tfont-family: monospace;\n}\n\n/* @tldraw/ui */\n\n.tl-container {\n\t--layer-panels: 300;\n\t--layer-menus: 400;\n\t--layer-overlays: 500;\n\t--layer-toasts: 650;\n\t--layer-cursor: 700;\n}\n\n/* --------------------- Layout --------------------- */\n\n.tlui-layout {\n\tposition: relative;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgrid-template-rows: minmax(0px, 1fr) auto;\n\tgrid-auto-rows: auto;\n\theight: 100%;\n\tmax-height: 100%;\n\toverflow: clip;\n\tpadding: var(--space-2);\n\tpointer-events: none;\n\tuser-select: none;\n\tcontain: strict;\n\tz-index: var(--layer-panels);\n\t-webkit-transform: translate3d(0, 0, 0);\n\t--sab: env(safe-area-inset-bottom);\n}\n\n.tlui-layout__top {\n\tgrid-column: 1;\n\tgrid-row: 1;\n\tdisplay: flex;\n\tmin-width: 0px;\n\tjustify-content: space-between;\n}\n\n.tlui-layout__top__left {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\twidth: 100%;\n\theight: 100%;\n\tflex: 0 1 0;\n}\n\n.tlui-layout__top__right {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end;\n\tjustify-content: flex-start;\n\theight: 100%;\n\tflex: 0 0 auto;\n\tmin-width: 0px;\n}\n\n.scrollable,\n.scrollable * {\n\tpointer-events: all;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n}\n\n/* ----------------- Helper Buttons ---------------- */\n\n.tlui-helper-buttons {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-start;\n\talign-items: flex-start;\n\twidth: min-content;\n\tgap: var(--space-3);\n\tmargin: var(--space-3) var(--space-2);\n\twhite-space: nowrap;\n\tpointer-events: none;\n\tz-index: var(--layer-panels);\n}\n\n.tlui-helper-buttons > .tlui-button {\n\tpointer-events: all;\n\tbackground-color: var(--color-low);\n\tborder-radius: var(--radius-3);\n}\n\n/* ---------------------- Icon ---------------------- */\n\n.tlui-icon {\n\tflex-shrink: 0;\n\twidth: 18px;\n\theight: 18px;\n\tbackground-color: currentColor;\n}\n\n.tlui-icon__small {\n\twidth: 15px;\n\theight: 15px;\n}\n\n/* --------------------- Slider --------------------- */\n\n.tlui-slider {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tuser-select: none;\n\ttouch-action: none;\n}\n\n.tlui-slider__container {\n\twidth: 164px;\n\tpadding: 0px var(--space-4);\n}\n\n.tlui-slider__track {\n\tposition: relative;\n\tflex-grow: 1;\n\theight: 44px;\n\tcursor: pointer;\n}\n\n.tlui-slider__track::after {\n\tdisplay: block;\n\tposition: absolute;\n\ttop: calc(50% - 2px);\n\tcontent: '';\n\theight: 3px;\n\twidth: 100%;\n\tbackground-color: var(--color-muted-1);\n\tborder-radius: var(--radius-4);\n}\n\n.tlui-slider__range {\n\tposition: absolute;\n\ttop: calc(50% - 2px);\n\tleft: 0px;\n\theight: 3px;\n\tbackground-color: var(--color-selected);\n\tborder-radius: var(--radius-4);\n}\n\n.tlui-slider__thumb {\n\tall: unset;\n\tcursor: grab;\n\tdisplay: block;\n\twidth: 18px;\n\theight: 18px;\n\tposition: relative;\n\ttop: -1px;\n\tbackground-color: var(--color-panel);\n\tborder-radius: 999px;\n\tbox-shadow: inset 0px 0px 0px 2px var(--color-text-2);\n}\n\n.tlui-slider__thumb:active {\n\tcursor: grabbing;\n\tbox-shadow: inset 0px 0px 0px 2px var(--color-text-2), var(--shadow-1);\n}\n\n.tlui-slider__thumb:focus-visible {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n}\n\n/* ----------------------- Kbd ---------------------- */\n\n.tlui-kbd {\n\tfont-family: inherit;\n\tfont-size: 11px;\n\tline-height: 11px;\n\tdisplay: grid;\n\tjustify-items: center;\n\tgrid-auto-flow: column;\n\tgrid-template-columns: auto;\n\tgrid-auto-columns: minmax(1em, auto);\n\tgap: 1px;\n\talign-self: bottom;\n\tcolor: var(--color-text-2);\n\tmargin-left: var(--space-4);\n}\n\n.tlui-kbd > span {\n\twidth: 100%;\n\ttext-align: center;\n\tdisplay: inline;\n\tmargin: 0px;\n\tpadding: 2px;\n\tborder-radius: 2px;\n}\n\n.tlui-kbd:not(:last-child) {\n\tmargin-right: var(--space-2);\n}\n\n/* --------------------- Button --------------------- */\n\n.tlui-button {\n\tmargin: 0px;\n\tposition: relative;\n\tz-index: 1;\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: inherit;\n\tfont-size: 12px;\n\tfont-weight: inherit;\n\tcolor: var(--color-text-1);\n\tpadding: 0px 13px;\n\tcursor: pointer;\n\tborder: none;\n\toutline: none;\n\tuser-select: none;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tbackground: transparent;\n\ttext-shadow: 1px 1px 0px var(--color-panel);\n}\n\n.tlui-button::after {\n\tcontent: '';\n\tz-index: 1;\n\tposition: absolute;\n\tright: 4px;\n\tbottom: 4px;\n\tdisplay: block;\n\twidth: calc(100% - 8px);\n\theight: calc(100% - 8px);\n\tborder-radius: var(--radius-3);\n\tbackground-color: transparent;\n\tpointer-events: none;\n}\n\n.tlui-button > span {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.tlui-button > span:not(:only-child) {\n\tflex-grow: 2;\n}\n\n.tlui-button > span > svg {\n\tmargin-left: var(--space-2);\n}\n\n.tlui-button:disabled {\n\tcursor: default;\n\tcolor: var(--color-text-3);\n}\n\n.tlui-button:not([data-state='selected'], :disabled):active::after {\n\tbackground: var(--color-muted-2);\n}\n\n@media (hover: hover) {\n\t.tlui-button:not([data-state='selected'], :disabled):hover::after {\n\t\tbackground: var(--color-muted-2);\n\t}\n}\n\n.tlui-icon-left {\n\tmargin-right: var(--space-4);\n}\n\n.tlui-button > * {\n\tposition: relative;\n\tz-index: 100;\n\tcolor: inherit;\n}\n\n.tlui-button > svg {\n\twidth: 18px;\n\theight: 18px;\n\tpointer-events: none;\n}\n\n.tlui-button:not(:disabled, :focus-visible, [data-state='open']):active {\n\tz-index: 2;\n\tcolor: var(--color-text-0);\n}\n\n.tlui-button:not(:hover, :disabled, [data-state='open']):focus-visible::after {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n}\n\n.tlui-button[data-state='selected']:not(:hover, :disabled):focus-visible::after {\n\tbox-shadow: inset 0 0 0 2px var(--color-focus);\n}\n\n@media (hover: hover) {\n\t.tlui-button:not(:disabled, :focus-visible):hover {\n\t\tz-index: 2;\n\t\tcolor: var(--color-text-0);\n\t}\n\n\t/* \n\t.tlui-button:not(:disabled, :focus-visible):hover::after {\n\t\tbox-shadow: inset 0 0 0 1px var(--color-muted-1);\n\t} */\n\n\t.tlui-button__primary:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-primary);\n\t}\n\n\t.tlui-button__warning:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-warn);\n\t}\n}\n\n.tlui-button:disabled {\n\tcolor: var(--color-text-3);\n}\n\n/* Selected */\n\n.tlui-button[data-state='selected'] {\n\tcolor: var(--color-selected-contrast);\n}\n\n.tlui-button[data-state='selected']:not(:disabled, :focus-visible):active {\n\tcolor: var(--color-selected-contrast);\n}\n\n@media (hover: hover) {\n\t.tlui-button[data-state='selected']:not(:disabled, :focus-visible):hover {\n\t\tcolor: var(--color-selected-contrast);\n\t}\n}\n\n.tlui-button[data-state='selected']:not(:disabled)::after {\n\tbackground: var(--color-selected);\n}\n\n/* Hinted */\n\n.tlui-button[data-state='hinted']::after {\n\tbackground: var(--color-hint);\n\t/* box-shadow: inset 0 0 0 1px var(--color-muted-1); */\n}\n\n.tlui-button[data-state='hinted']:not(:disabled, :focus-visible):active::after {\n\tbackground: var(--color-hint);\n\t/* box-shadow: inset 0 0 0 1px var(--color-text-3); */\n}\n\n@media (hover: hover) {\n\t.tlui-button[data-state='hinted']:not(:disabled, :focus-visible):hover::after {\n\t\tbackground: var(--color-hint);\n\t\t/* box-shadow: inset 0 0 0 1px var(--color-text-3); */\n\t}\n}\n\n/* Focus Mode Button */\n\n.tlui-focus-button {\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n}\n\n/* Squished */\n\n.tlui-button.squished {\n\theight: 36px;\n\twidth: 44px;\n}\n\n.tlui-button.squished {\n\theight: 36px;\n\twidth: 44px;\n}\n\n.tlui-button__primary {\n\tcolor: var(--color-primary);\n}\n\n.tlui-button__warning {\n\tcolor: var(--color-warn);\n}\n\n.tlui-button__danger {\n\tcolor: var(--color-warn);\n}\n\n/* --------------------- Popover -------------------- */\n\n.tlui-popover {\n\tposition: relative;\n\tdisplay: flex;\n\talign-content: stretch;\n}\n\n.tlui-popover__content {\n\tposition: relative;\n\tmax-height: 75vh;\n\tmargin: 0px;\n\tborder: none;\n\tborder-radius: var(--radius-4);\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tz-index: var(--layer-menus);\n\toverflow: hidden;\n\toverflow-y: auto;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n}\n\n/* -------------------------------------------------- */\n/*                        Zones                       */\n/* -------------------------------------------------- */\n\n/* ------------------- Status Bar ------------------- */\n\n.tlui-debug-panel {\n\tmargin-top: var(--space-2);\n\tbackground-color: var(--color-low);\n\twidth: 100%;\n\tdisplay: grid;\n\talign-items: center;\n\tgrid-template-columns: 1fr auto auto;\n\tjustify-content: space-between;\n\tpadding-left: var(--space-4);\n\tborder-radius: var(--radius-1);\n\tfont-size: 12px;\n\tcolor: var(--color-text-1);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n}\n\n.tlui-debug-panel__current-state {\n\twhite-space: nowrap;\n}\n\n/* -------------------- Menu Zone ------------------- */\n\n.tlui-menu-zone {\n\tposition: relative;\n\tz-index: var(--layer-panels);\n\twidth: fit-content;\n}\n\n.tlui-menu-zone::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-1) var(--radius-1) var(--radius-5) var(--radius-1);\n\tbackground-color: var(--color-low);\n}\n\n.tlui-menu-zone *[data-state='open']::after {\n\tbackground: linear-gradient(180deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n}\n\n.tlui-menu-zone__controls {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tgrid-row: 1;\n\tgrid-column: 1;\n\twidth: fit-content;\n\tborder-radius: var(--radius-1) var(--radius-1) var(--radius-4) var(--radius-1);\n\tdisplay: flex;\n\tflex-direction: row;\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n}\n\n.tlui-menu-zone__divider {\n\twidth: 1px;\n\theight: 18px;\n\tbackground-color: var(--color-muted-1);\n}\n\n.tlui-menu-zone__controls > * {\n\tmargin: 0px -2px;\n}\n\n.tlui-menu-zone__controls > *:first-child {\n\tmargin-left: 0px;\n}\n\n.tlui-menu-zone__controls > *:last-child {\n\tmargin-right: 0px;\n}\n\n.tlui-menu-zone__controls > .tlui-menu-zone__divider {\n\tmargin: 0px;\n}\n\n.tlui-menu-zone__controls .tlui-icon {\n\twidth: 15px;\n\theight: 15px;\n}\n\n/* ------------------- Style Panel ------------------ */\n\n.tlui-style-panel__wrapper {\n\tbox-shadow: var(--shadow-2);\n\tborder-radius: var(--radius-4);\n\tpointer-events: all;\n\tbackground-color: var(--color-panel);\n\theight: fit-content;\n\tmax-height: 100%;\n\tmargin: var(--space-2) var(--space-2);\n\toverflow: hidden;\n\ttouch-action: auto;\n\toverscroll-behavior: none;\n\toverflow-y: auto;\n\tcolor: var(--color-text);\n}\n\n.tlui-style-panel {\n\tposition: relative;\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n}\n\n.tlui-style-panel::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.tlui-style-panel .tlui-button.select {\n\twidth: 100%;\n}\n\n.tlui-style-panel__section {\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n}\n\n.tlui-style-panel__section:nth-of-type(n + 2):not(:last-child) {\n\tborder-bottom: 1px solid var(--color-divider);\n}\n\n.tlui-style-panel__section:empty {\n\tdisplay: none;\n}\n\n.tlui-style-panel__section__common:not(:only-child) {\n\tmargin-bottom: 7px;\n\tborder-bottom: 1px solid var(--color-divider);\n}\n\n.tlui-style-panel__row {\n\tdisplay: flex;\n}\n.tlui-style-panel__row > *:nth-child(2) {\n\tmargin-left: -4px;\n}\n\n.tlui-style-panel__double-select-picker {\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto auto;\n\talign-items: center;\n\tpadding-left: var(--space-4);\n\tfont-size: 12px;\n\twidth: 164px;\n}\n\n.tlui-style-panel__double-select-picker > .tlui-button {\n\tmin-width: 44px;\n\tmargin-left: -4px;\n}\n\n.tlui-style-panel__double-select-picker-label {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space: nowrap;\n\tcolor: var(--color-text-1);\n}\n\n.tlui-style-panel__section *[data-state='open']::after {\n\tbackground: var(--color-muted-0);\n}\n\n/* ---------------------- Input --------------------- */\n\n.tlui-input {\n\tbackground: none;\n\tmargin: 0px;\n\tposition: relative;\n\tz-index: 1;\n\theight: 44px;\n\tmax-height: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: inherit;\n\tfont-size: 12px;\n\tfont-weight: inherit;\n\tcolor: var(--color-text-1);\n\tpadding: 13px;\n\tpadding-left: 0px;\n\tborder: none;\n\toutline: none;\n\ttext-overflow: ellipsis;\n\twidth: 100%;\n\tuser-select: all;\n\t-webkit-user-select: auto !important;\n}\n\n.tlui-input__wrapper {\n\twidth: 100%;\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tgap: var(--space-4);\n\tcolor: var(--color-text);\n}\n\n.tlui-input__wrapper > .tlui-icon {\n\tflex-shrink: 0;\n}\n\n/* If mobile use 16px as font size */\n/* On iOS, font size under 16px in an input will make the page zoom into the input  */\n/* https://css-tricks.com/16px-or-larger-text-prevents-ios-form-zoom/ */\n@media (max-width: 600px) {\n\t@supports (-webkit-touch-callout: none) {\n\t\t/* CSS specific to iOS devices */\n\t\t.tlui-input {\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n}\n\n/* ---------------- Prompt ---------------- */\n\n.tlui-prompt__overlay {\n\tbackground: var(--color-overlay);\n\tposition: fixed;\n\ttop: 0px;\n\tleft: 0px;\n\tright: 0px;\n\tbottom: 0px;\n\tdisplay: grid;\n\tplace-items: center;\n\toverflow-y: auto;\n\tz-index: var(--layer-overlays);\n}\n\n.tlui-prompt__content {\n\tcursor: default;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tborder-radius: var(--radius-4);\n\tpadding: var(--space-5);\n\tfont-size: 12px;\n\toverflow-y: auto;\n\tmin-width: 300px;\n\tmax-width: 80vw;\n\tmax-height: 80vh;\n}\n\n.tlui-prompt__actions {\n\tborder: none;\n\tpadding: 0px;\n\tmargin: 0px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tmargin-right: calc(-1 * var(--space-3));\n\tmargin-bottom: calc(-1 * var(--space-3));\n}\n\n.tlui-prompt__title {\n\tmargin: 0px;\n\tfont-size: 12px;\n}\n\n.tlui-prompt__error {\n\tcolor: #d10b0b;\n\tdisplay: flex;\n\tgap: var(--space-2);\n\talign-items: center;\n}\n\n/* ---------------- Dialog ---------------- */\n\n.tlui-dialog__overlay {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: var(--layer-overlays);\n\tbackground-color: var(--color-overlay);\n\tpointer-events: all;\n\tanimation: fadeIn 0.12s ease-out;\n\tdisplay: grid;\n\tplace-items: center;\n\toverflow-y: auto;\n}\n\n.tlui-dialog__content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\tcursor: default;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n\tborder-radius: var(--radius-4);\n\tfont-size: 12px;\n\toverflow: hidden;\n\tmin-width: 300px;\n\tmax-width: 80vw;\n\tmax-height: 80vh;\n}\n\n.tlui-dialog__header {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0;\n\tz-index: 999;\n\tpadding-left: var(--space-4);\n\tcolor: var(--color-text);\n\theight: 44px;\n}\n\n.tlui-dialog__header__title {\n\tflex: 1;\n\tfont-weight: inherit;\n\tfont-size: 12px;\n\tmargin: 0px;\n\tcolor: var(--color-text-1);\n\tfont-weight: 500;\n}\n\n.tlui-dialog__header__close {\n\tjustify-self: flex-end;\n}\n\n.tlui-dialog__body {\n\tpadding: var(--space-4) var(--space-6);\n\tflex: 0 1;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tcolor: var(--color-text-1);\n\tuser-select: all;\n\t-webkit-user-select: text;\n}\n\n.tlui-dialog__footer {\n\tposition: relative;\n\tz-index: 999;\n}\n\n.tlui-dialog__footer__actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n}\n\n.tlui-dialog__footer__actions > .tlui-button:nth-last-child(n + 2) {\n\tmargin-right: -4px;\n}\n\n.tlui-dialog__scrim {\n\tdisplay: block;\n\tcontent: '';\n\tbottom: 0px;\n\twidth: 100%;\n\theight: 40px;\n\tposition: absolute;\n\tbackground: linear-gradient(transparent, var(--color-panel));\n\tborder-bottom-left-radius: var(--radius-4);\n\tborder-bottom-right-radius: var(--radius-4);\n\tpointer-events: none;\n}\n\n/* ---------------- Shortcuts ---------------- */\n\n.tlui-shortcuts-dialog__header {\n\tborder-bottom: 1px solid var(--color-divider);\n}\n\n.tlui-shortcuts-dialog__body {\n\tposition: relative;\n\tcolumns: 1;\n\tcolumn-gap: var(--space-9);\n\tpointer-events: all;\n\ttouch-action: auto;\n}\n\n@media (min-width: 475px) {\n\t.tlui-shortcuts-dialog__body {\n\t\tcolumns: 2;\n\t\tcolumn-gap: var(--space-9);\n\t}\n}\n\n@media (min-width: 960px) {\n\t.tlui-shortcuts-dialog__body {\n\t\tcolumns: 3;\n\t\tcolumn-gap: var(--space-9);\n\t}\n}\n\n.tlui-shortcuts-dialog__group {\n\tbreak-inside: avoid-column;\n\tpadding-bottom: var(--space-6);\n}\n\n.tlui-shortcuts-dialog__group__title {\n\tfont-size: inherit;\n\tfont-weight: 500;\n\tmargin: 0px;\n\tcolor: var(--color-text-2);\n\tletter-spacing: 0.5px;\n\ttext-transform: uppercase;\n\tfont-size: 9px;\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.tlui-shortcuts-dialog__group__content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor: var(--color-text-1);\n}\n\n.tlui-shortcuts-dialog__key-pair {\n\tdisplay: flex;\n\tgap: var(--space-4);\n\talign-items: center;\n\tjustify-content: space-between;\n\theight: 32px;\n}\n\n.tlui-shortcuts-dialog__key-pair__key {\n\tflex: 1;\n\tfont-size: 12px;\n}\n\n/* --------------------- Toolbar -------------------- */\n\n/* Wide container */\n.tlui-toolbar {\n\tgrid-column: 1 / span 3;\n\tgrid-row: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-grow: 2;\n\tpadding-bottom: calc(var(--space-2) + var(--sab));\n}\n\n/* Centered Content */\n.tlui-toolbar__inner {\n\tposition: relative;\n\twidth: fit-content;\n\tdisplay: flex;\n\tgap: var(--space-3);\n\talign-items: flex-end;\n}\n\n.tlui-toolbar__left {\n\twidth: fit-content;\n}\n\n/* Row of controls + lock button */\n.tlui-toolbar__extras {\n\tposition: relative;\n\twidth: 100%;\n\theight: 44px;\n\tpointer-events: none;\n}\n\n.tlui-toolbar__extras__hidden {\n\tdisplay: none;\n}\n\n.tlui-toolbar__extras__controls {\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: var(--color-low);\n\tborder-top-left-radius: var(--radius-3);\n\tborder-top-right-radius: var(--radius-3);\n\tposition: relative;\n\tbottom: -4px;\n\tmargin-left: 8px;\n\tmargin-right: 0px;\n\tpointer-events: all;\n\twidth: fit-content;\n}\n\n.tlui-toolbar__extras__controls::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: -1;\n\ttop: 0px;\n\tleft: 0px;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-4);\n\tborder-bottom-left-radius: 0px;\n\tborder-bottom-right-radius: 0px;\n\tbackground-color: var(--color-background);\n}\n\n.tlui-toolbar__extras__controls > .tlui-button,\n.tlui-toolbar__extras__controls > .tlui-popover > .tlui-button {\n\theight: 40px;\n\twidth: 40px;\n}\n\n.tlui-toolbar__extras__controls .tlui-button::after {\n\tborder-radius: var(--radius-2);\n}\n\n.tlui-toolbar__lock-button {\n\tposition: absolute;\n\ttop: 0px;\n\tright: 0px;\n\tpointer-events: all;\n\theight: 40px;\n\twidth: 48px;\n\tright: -4px;\n}\n\n.tlui-toolbar__lock-button::after {\n\tborder-radius: 100%;\n\ttop: 4px;\n\tleft: 8px;\n\theight: 32px;\n\twidth: 32px;\n}\n\n.tlui-toolbar__lock-button__mobile {\n\tright: -8px;\n}\n\n.tlui-toolbar__tools {\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: var(--color-low);\n\tborder-radius: var(--radius-4);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n\tposition: relative;\n\talign-items: center;\n\tbackground: var(--color-panel);\n\tbox-shadow: var(--shadow-2);\n}\n\n.tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 48px;\n}\n\n.tlui-toolbar__tools__button:nth-of-type(n + 2) {\n\tmargin-left: -2px;\n}\n\n.tlui-toolbar__tools__button:nth-last-of-type(n + 2) {\n\tmargin-right: -2px;\n}\n\n.tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 48px;\n}\n\n.tlui-layout__mobile .tlui-toolbar__tools__button {\n\theight: 48px;\n\twidth: 44px;\n}\n\n.tlui-layout__mobile .tlui-toolbar__tools__button > .tlui-icon {\n\theight: 16px;\n\twidth: 16px;\n}\n\n.tlui-toolbar__overflow {\n\twidth: 40px;\n}\n\n.tlui-layout__mobile .tlui-toolbar__overflow {\n\twidth: 32px;\n\tpadding: 0px;\n}\n\n.tlui-toolbar *[data-state='open']::after {\n\tbackground: linear-gradient(0deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n}\n\n.tlui-toolbar__styles__button {\n\twidth: 44px;\n\theight: 44px;\n}\n\n.tlui-layout__mobile .tlui-toolbar__styles__button {\n\theight: 48px;\n}\n\n.tlui-toolbar__divider {\n\tdisplay: block;\n\tbackground: var(--color-divider);\n\theight: 18px;\n\twidth: 1px;\n}\n/* -------------------- Help Zone ------------------- */\n\n.tlui-help-menu {\n\tpointer-events: all;\n\tposition: absolute;\n\tbottom: var(--space-2);\n\tright: var(--space-2);\n}\n\n.tlui-help-menu__button {\n\tposition: relative;\n\tbackground-color: var(--color-low);\n\tborder-radius: 100%;\n\theight: 48px;\n\twidth: 48px;\n\toverflow: visible;\n\tz-index: var(--layer-panels);\n\tborder: 4px solid var(--color-background);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpointer-events: all;\n\tz-index: 1;\n}\n\n.tlui-help-menu__button::after {\n\tborder-radius: 100%;\n}\n\n/* ------------------ Context Menu ------------------ */\n\n.tlui-context-menu__move-to-page__name {\n\tmax-width: calc(min(300px, 35vw));\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.tlui-context-menu__move-to-page__name[data-disabled] {\n\tcolor: var(--color-text-3);\n\tpointer-events: none;\n}\n\n/* ---------------------- Menu ---------------------- */\n\n.tlui-menu {\n\tz-index: var(--layer-menus);\n\theight: fit-content;\n\twidth: fit-content;\n\tmax-height: 80vh;\n\tborder-radius: var(--radius-4);\n\tpointer-events: all;\n\ttouch-action: auto;\n\toverflow-y: auto;\n\toverscroll-behavior: none;\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-3);\n}\n\n.tlui-menu::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n.tlui-menu__arrow {\n\tposition: relative;\n\ttop: -1px;\n\tfill: var(--color-panel);\n\tstroke: var(--color-panel-contrast);\n\tstroke-width: 1px;\n}\n\n.tlui-menu__group[data-size='large'] {\n\tmin-width: initial;\n}\n\n.tlui-menu__group[data-size='medium'] {\n\tmin-width: 144px;\n}\n\n.tlui-menu__group[data-size='small'] {\n\tmin-width: 96px;\n}\n\n.tlui-menu__group[data-size='tiny'] {\n\tmin-width: 0px;\n}\n\n.tlui-menu__group + .tlui-menu__group {\n\tborder-top: 1px solid var(--color-divider);\n}\n\n.tlui-menu__submenu__trigger[data-state='open']:not(:hover)::after {\n\tborder-radius: var(--radius-1);\n\tbackground: linear-gradient(90deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n}\n\n.tlui-menu__submenu__trigger[data-direction='left'][data-state='open']:not(:hover)::after {\n\tborder-radius: var(--radius-1);\n\tbackground: linear-gradient(270deg, rgba(144, 144, 144, 0) 0%, var(--color-muted-2) 100%);\n}\n\n.tlui-menu__button {\n\twidth: 100%;\n\tjustify-content: space-between;\n}\n\n.tlui-menu__button__wide {\n\tmax-width: initial;\n}\n\n.tlui-menu__button:nth-child(n + 2) {\n\tmargin-top: -8px;\n}\n\n.tlui-menu__button:nth-last-child(n + 2) {\n\tmargin-bottom: -8px;\n}\n\n.tlui-menu__button > span:only-child {\n\ttext-align: left;\n\tflex-grow: 2;\n}\n\n.tlui-menu__checkbox-item {\n\tpadding-left: 28px;\n}\n\n.tlui-menu__checkbox-item__check {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 24px;\n\tpadding-left: 10px;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* ------------------- Button Grid ------------------ */\n\n.tlui-button-grid__button {\n\twidth: 44px;\n\theight: 44px;\n}\n\n.tlui-button-grid__four {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 40px 40px 44px;\n}\n\n.tlui-button-grid__four > .tlui-button-grid__button:nth-child(n + 5) {\n\tmargin-top: -2px;\n}\n\n.tlui-button-grid__four > .tlui-button-grid__button:nth-last-child(n + 5) {\n\tmargin-bottom: -2px;\n}\n\n.tlui-button-grid__three {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 40px 44px;\n}\n\n.tlui-button-grid__three > .tlui-button-grid__button:nth-child(n + 4) {\n\tmargin-top: -2px;\n}\n\n.tlui-button-grid__three > .tlui-button-grid__button:nth-last-child(n + 4) {\n\tmargin-bottom: -2px;\n}\n\n.tlui-button-grid__two {\n\tdisplay: grid;\n\tgrid-template-columns: 40px 44px;\n}\n\n.tlui-button-grid__two > .tlui-button-grid__button:nth-child(n + 3) {\n\tmargin-top: -2px;\n}\n\n.tlui-button-grid__two > .tlui-button-grid__button:nth-last-child(n + 3) {\n\tmargin-bottom: -2px;\n}\n\n/* \n.tlui-button-grid__button:not(:nth-child(4n - 3)) {\n\tmargin-left: -2px;\n}\n\n.tlui-button-grid__button:not(:nth-child(4n)) {\n\tmargin-right: -2px;\n}*/\n/* \n\n.tlui-button-grid__button:nth-last-child(1) {\n\tmargin-right: 0px;\n} */\n\n/* ------------------ Actions Menu ------------------ */\n\n.tlui-actions-menu {\n\tmax-height: calc(100vh - 150px);\n}\n\n/* --------------------- Toasts --------------------- */\n\n.tlui-toast__viewport {\n\tposition: absolute;\n\tinset: 0px;\n\tmargin: 0px;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tjustify-content: flex-end;\n\tflex-direction: column;\n\tgap: var(--space-3);\n\tpointer-events: none;\n\tpadding: 0px var(--space-3) 64px 0px;\n\tz-index: var(--layer-toasts);\n}\n\n.tlui-toast__viewport > * {\n\tpointer-events: all;\n}\n\n.tlui-toast__icon {\n\tpadding-top: var(--space-4);\n\tpadding-left: var(--space-4);\n}\n\n.tlui-toast__container {\n\tmin-width: 200px;\n\tmax-width: 280px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: var(--space-3);\n\tbackground-color: var(--color-panel);\n\tbox-shadow: var(--shadow-2);\n\tborder-radius: var(--radius-4);\n\tfont-size: 12px;\n}\n\n.tlui-toast__main {\n\tflex-grow: 2;\n}\n\n.tlui-toast__main:nth-child(1) > .tlui-toast__content {\n\tpadding-left: var(--space-4);\n}\n\n.tlui-toast__content {\n\tpadding-left: 0px;\n\tpadding-top: var(--space-4);\n\tpadding-bottom: var(--space-4);\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-3);\n}\n\n.tlui-toast__content:not(:only-child) {\n\tpadding-bottom: var(--space-2);\n}\n\n.tlui-toast__title {\n\tfont-weight: 600;\n\tcolor: var(--color-text);\n}\n\n.tlui-toast__description {\n\tcolor: var(--color-text-1);\n\tpadding: var(--space-3);\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n.tlui-toast__actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-start;\n}\n\n.tlui-toast__close {\n\talign-self: flex-end;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n\t.tlui-toast__container[data-state='open'] {\n\t\tanimation: slide-in 200ms cubic-bezier(0.785, 0.135, 0.15, 0.86);\n\t}\n\n\t.tlui-toast__container[data-state='closed'] {\n\t\tanimation: hide 100ms ease-in;\n\t}\n\n\t.tlui-toast__container[data-swipe='move'] {\n\t\ttransform: translateX(var(--radix-toast-swipe-move-x));\n\t}\n\n\t.tlui-toast__container[data-swipe='cancel'] {\n\t\ttransform: translateX(0);\n\t\ttransition: transform 200ms ease-out;\n\t}\n\n\t.tlui-toast__container[data-swipe='end'] {\n\t\tanimation: swipe-out 100ms ease-out;\n\t}\n}\n\n/* --------------------- Mobile --------------------- */\n\n@media (max-width: 640px) {\n\t.tlui-menu__group .tlui-button {\n\t\theight: 40px;\n\t}\n\n\t.tlui-menu__group .tlui-button > .tlui-kbd {\n\t\tdisplay: none;\n\t}\n\n\t.tlui-menu__group .tlui-button > .tlui-icon-left {\n\t\tdisplay: none;\n\t}\n}\n\n/* --------------------- Bottom --------------------- */\n\n.tlui-layout__bottom {\n\tgrid-row: 2;\n}\n\n.tlui-layout__bottom__main {\n\twidth: 100%;\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tjustify-content: center;\n}\n\n/* ------------------- Navigation ------------------- */\n\n.tlui-navigation-zone {\n\tdisplay: flex;\n\twidth: min-content;\n\tflex-direction: column;\n\tbackground-color: var(--color-low);\n\tz-index: var(--layer-panels);\n\tpointer-events: all;\n\tposition: absolute;\n\tleft: 0px;\n\tbottom: 0px;\n}\n\n.tlui-navigation-zone::before {\n\tcontent: '';\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: -1;\n\tinset: -4px;\n\tborder: 4px solid var(--color-background);\n\tborder-radius: var(--radius-1);\n\tborder-top-right-radius: var(--radius-5);\n\tbackground-color: var(--color-low);\n}\n\n.tlui-navigation-zone__controls {\n\tdisplay: flex;\n\tflex-direction: row;\n\twidth: min-content;\n\tbackground-color: none;\n\toverflow: hidden;\n}\n\n.tlui-navigation-zone__controls > .tlui-button {\n\tmargin-left: -2px;\n\tmargin-right: -2px;\n}\n\n.tlui-navigation-zone__controls > .tlui-button:nth-of-type(1) {\n\tmargin-left: 0px;\n}\n.tlui-navigation-zone__controls > .tlui-button:nth-last-of-type(1) {\n\tmargin-right: 0px;\n}\n\n.tlui-navigation-zone__toggle .tlui-icon {\n\topacity: 0.24;\n\ttransition: opacity 0.2s ease-in-out;\n}\n\n.tlui-navigation-zone__toggle:active .tlui-icon {\n\topacity: 1;\n\ttransition: opacity 0.12s ease-in-out;\n}\n\n@media (hover: hover) {\n\t.tlui-navigation-zone__toggle:hover .tlui-icon {\n\t\topacity: 1;\n\t\ttransition: opacity 0.12s ease-in-out;\n\t}\n}\n\n.tlui-minimap {\n\twidth: 100%;\n\theight: 96px;\n\tmin-height: 96px;\n\toverflow: hidden;\n\tpadding: var(--space-3);\n\tpadding-top: 0px;\n}\n\n.tlui-minimap__canvas {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.tlui-zoom-menu__button__pct {\n\twidth: 60px;\n\ttext-align: center;\n}\n\n/* ----------------------- ... ---------------------- */\n\n@keyframes hide {\n\t0% {\n\t\topacity: 1;\n\t}\n\t100% {\n\t\topacity: 0;\n\t}\n}\n\n@keyframes slide-in {\n\tfrom {\n\t\ttransform: translateX(calc(100% + var(--space-3)));\n\t}\n\tto {\n\t\ttransform: translateX(0px);\n\t}\n}\n\n@keyframes swipe-out {\n\tfrom {\n\t\ttransform: translateX(var(--radix-toast-swipe-end-x));\n\t}\n\tto {\n\t\ttransform: translateX(calc(100% + var(--space-3)));\n\t}\n}\n\n/* ------------------- Page Select ------------------ */\n\n.tlui-page-menu__wrapper {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 220px;\n\theight: fit-content;\n\tmax-height: 50vh;\n}\n\n.tlui-page-menu__trigger {\n\twidth: 128px;\n}\n\n.tlui-page-menu__trigger > span {\n\tflex-grow: 2;\n\tmargin-right: var(--space-4);\n}\n\n.tlui-page-menu__header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\twidth: 100%;\n\tpadding-left: var(--space-4);\n\tmin-height: 44px;\n\tborder-bottom: 1px solid var(--color-divider);\n}\n\n.tlui-page-menu__header > .tlui-button:nth-of-type(1) {\n\tmargin-right: -4px;\n}\n\n.tlui-page-menu__header__title {\n\tcolor: var(--color-text);\n\tfont-size: 12px;\n\tfont-weight: 500;\n\tflex-grow: 2;\n}\n\n.tlui-page-menu__name {\n\tflex-grow: 2;\n\ttext-align: left;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.tlui-page-menu__list {\n\tposition: relative;\n\ttouch-action: auto;\n\tflex-direction: column;\n\tmax-height: 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\ttouch-action: auto;\n}\n\n.tlui-page-menu__item {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.tlui-page-menu__item:nth-of-type(n + 2) {\n\tmargin-top: -4px;\n}\n\n.tlui-page-menu__item__button {\n\tflex-grow: 2;\n}\n\n.tlui-page-menu__item__button > span {\n\tdisplay: block;\n\tflex-grow: 2;\n\ttext-align: left;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.tlui-page-menu__item__button__checkbox {\n\tpadding-left: 36px;\n}\n\n.tlui-page-menu__item__button__check {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 24px;\n\tpadding-left: 10px;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcolor: var(--color-text);\n}\n\n.tlui-page_menu__item__sortable {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: fit-content;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\toverflow: hidden;\n\tz-index: 1;\n}\n\n.tlui-page_menu__item__sortable__title {\n\tflex: 1;\n}\n\n.tlui-page_menu__item__sortable__title > .tlui-input__wrapper {\n\theight: 100%;\n}\n\n.tlui-page_menu__item__sortable__button {\n\tflex: 0;\n}\n\n.tlui-page_menu__item__sortable:focus-within {\n\tz-index: 10;\n}\n\n.tlui-page_menu__item__sortable__handle {\n\ttouch-action: none;\n\twidth: 32px;\n\theight: 40px;\n\tcursor: grab;\n\tcolor: var(--color-text-3);\n\tflex-shrink: 0;\n\tmargin-right: -9px;\n}\n\n.tlui-page_menu__item__sortable__handle:active {\n\tcursor: grabbing;\n}\n\n.tlui-page-menu__item__input {\n\tmargin-left: 13px;\n\theight: 100%;\n}\n\n/* The more menu has complex CSS here: */\n/* If the user can hover, then visible but opacity zero until hover */\n/* If the user cannot hover, then not displayed unless editing, and then opacity 1 */\n\n.tlui-page_menu__item__submenu {\n\tpointer-events: all;\n\tflex: 0;\n\tcursor: pointer;\n\tmargin: 0px;\n\tdisplay: none;\n}\n\n.tlui-page_menu__item__submenu[data-isediting='true'] {\n\tdisplay: block;\n}\n\n@media (hover: hover) {\n\t.tlui-page_menu__item__submenu {\n\t\topacity: 0;\n\t\tdisplay: block;\n\t}\n\n\t.tlui-page_menu__item__submenu:hover,\n\t.tlui-page-menu__item:focus-within > .tlui-page_menu__item__submenu,\n\t.tlui-page_menu__item__sortable:focus-within > .tlui-page_menu__item__submenu {\n\t\topacity: 1;\n\t}\n}\n\n/* --------------------- Dialogs -------------------- */\n\n/* Edit Link Dialog */\n\n.tlui-edit-link-dialog {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-4);\n\tcolor: var(--color-text);\n}\n\n.tlui-edit-link-dialog__input {\n\tbackground-color: var(--color-muted-2);\n\tflex-grow: 2;\n\tborder-radius: var(--radius-2);\n\tpadding: 0px var(--space-4);\n}\n\n/* Embed Dialog */\n\n.tlui-embed__spacer {\n\tflex-grow: 2;\n\tmin-height: 0px;\n\tmargin-left: calc(-1 * var(--space-4));\n\tmargin-top: calc(-1 * var(--space-4));\n\tpointer-events: none;\n}\n\n.tlui-embed-dialog__list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding-bottom: var(--space-5);\n}\n\n.tlui-embed-dialog__item {\n\tposition: relative;\n\tborder: none;\n\tbackground: none;\n\tfont-family: inherit;\n\tdisplay: flex;\n\ttext-align: left;\n\tgap: var(--space-3);\n\tcursor: pointer;\n\tpadding: 0;\n\talign-items: center;\n\tcolor: var(--color-text);\n\tfont-size: var(--font-size-1);\n\theight: 44px;\n}\n\n@media (hover: hover) {\n\t.tlui-embed-dialog__item:hover::after {\n\t\tdisplay: block;\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tinset: 0px;\n\t\tbackground-color: var(--color-muted-2);\n\t\tborder-radius: var(--radius-4);\n\t}\n}\n\n.tlui-embed-dialog__item__image {\n\tpadding: var(--space-3);\n}\n\n.tlui-embed-dialog__item__image__img {\n\twidth: 24px;\n\theight: 24px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-size: contain;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center center;\n}\n\n.tlui-embed-dialog__enter {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--space-4);\n\tcolor: var(--color-text-1);\n}\n\n.tlui-embed-dialog__input {\n\tbackground-color: var(--color-muted-2);\n\tflex-grow: 2;\n\tborder-radius: var(--radius-2);\n\tpadding: 0px var(--space-4);\n}\n\n.tlui-embed-dialog__warning {\n\tcolor: var(--color-warn);\n}\n\n.tlui-embed-dialog__instruction__link {\n\tdisplay: flex;\n\tgap: var(--space-1);\n\tmargin-top: var(--space-4);\n}\n\n.tlui-embed-dialog__enter a {\n\tcolor: var(--color-text-1);\n}\n\n.tlui-following {\n\tdisplay: block;\n\tposition: absolute;\n\tinset: 0px;\n\tborder-width: 2px;\n\tborder-style: solid;\n\tz-index: 9999999;\n\tpointer-events: none;\n}\n\n/* ---------------- Offline Indicator --------------- */\n\n.tlui-offline-indicator {\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: var(--space-3);\n\tcolor: var(--color-text);\n\tbackground-color: var(--color-low);\n\tborder: 3px solid var(--color-background);\n\tpadding: 0px var(--space-5);\n\theight: 42px;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 99px;\n\topacity: 0;\n\tanimation: fade-in;\n\tanimation-duration: 0.12s;\n\tanimation-delay: 2s;\n\tanimation-fill-mode: forwards;\n}\n\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/decode-named-character-reference/index.dom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>decodeNamedCharacterReference});const element=document.createElement("i");function decodeNamedCharacterReference(value){const characterReference="&"+value+";";element.innerHTML=characterReference;const char=element.textContent;return(59!==char.charCodeAt(char.length-1)||"semi"===value)&&(char!==characterReference&&char)}},"./node_modules/dequal/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>dequal});var has=Object.prototype.hasOwnProperty;function find(iter,tar,key){for(key of iter.keys())if(dequal(key,tar))return key}function dequal(foo,bar){var ctor,len,tmp;if(foo===bar)return!0;if(foo&&bar&&(ctor=foo.constructor)===bar.constructor){if(ctor===Date)return foo.getTime()===bar.getTime();if(ctor===RegExp)return foo.toString()===bar.toString();if(ctor===Array){if((len=foo.length)===bar.length)for(;len--&&dequal(foo[len],bar[len]););return-1===len}if(ctor===Set){if(foo.size!==bar.size)return!1;for(len of foo){if((tmp=len)&&"object"==typeof tmp&&!(tmp=find(bar,tmp)))return!1;if(!bar.has(tmp))return!1}return!0}if(ctor===Map){if(foo.size!==bar.size)return!1;for(len of foo){if((tmp=len[0])&&"object"==typeof tmp&&!(tmp=find(bar,tmp)))return!1;if(!dequal(len[1],bar.get(tmp)))return!1}return!0}if(ctor===ArrayBuffer)foo=new Uint8Array(foo),bar=new Uint8Array(bar);else if(ctor===DataView){if((len=foo.byteLength)===bar.byteLength)for(;len--&&foo.getInt8(len)===bar.getInt8(len););return-1===len}if(ArrayBuffer.isView(foo)){if((len=foo.byteLength)===bar.byteLength)for(;len--&&foo[len]===bar[len];);return-1===len}if(!ctor||"object"==typeof foo){for(ctor in len=0,foo){if(has.call(foo,ctor)&&++len&&!has.call(bar,ctor))return!1;if(!(ctor in bar)||!dequal(foo[ctor],bar[ctor]))return!1}return Object.keys(bar).length===len}}return foo!=foo&&bar!=bar}},"./node_modules/dom-to-image/src/dom-to-image.js":function(module){!function(global){"use strict";var util=function newUtil(){return{escape:function escape(string){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension,mimeType:function mimeType(url){var extension=parseExtension(url).toLowerCase();return function mimes(){var WOFF="application/font-woff",JPEG="image/jpeg";return{woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[extension]||""},dataAsUrl:function dataAsUrl(content,type){return"data:"+type+";base64,"+content},isDataUrl:function isDataUrl(url){return-1!==url.search(/^(data:)/)},canvasToBlob:function canvasToBlob(canvas){return canvas.toBlob?new Promise((function(resolve){canvas.toBlob(resolve)})):function toBlob(canvas){return new Promise((function(resolve){for(var binaryString=window.atob(canvas.toDataURL().split(",")[1]),length=binaryString.length,binaryArray=new Uint8Array(length),i=0;i<length;i++)binaryArray[i]=binaryString.charCodeAt(i);resolve(new Blob([binaryArray],{type:"image/png"}))}))}(canvas)},resolveUrl:function resolveUrl(url,baseUrl){var doc=document.implementation.createHTMLDocument(),base=doc.createElement("base");doc.head.appendChild(base);var a=doc.createElement("a");return doc.body.appendChild(a),base.href=baseUrl,a.href=url,a.href},getAndEncode:function getAndEncode(url){var TIMEOUT=3e4;domtoimage.impl.options.cacheBust&&(url+=(/\?/.test(url)?"&":"?")+(new Date).getTime());return new Promise((function(resolve){var placeholder,request=new XMLHttpRequest;if(request.onreadystatechange=done,request.ontimeout=timeout,request.responseType="blob",request.timeout=TIMEOUT,request.open("GET",url,!0),request.send(),domtoimage.impl.options.imagePlaceholder){var split=domtoimage.impl.options.imagePlaceholder.split(/,/);split&&split[1]&&(placeholder=split[1])}function done(){if(4===request.readyState)if(200===request.status){var encoder=new FileReader;encoder.onloadend=function(){var content=encoder.result.split(/,/)[1];resolve(content)},encoder.readAsDataURL(request.response)}else placeholder?resolve(placeholder):fail("cannot fetch resource: "+url+", status: "+request.status)}function timeout(){placeholder?resolve(placeholder):fail("timeout of "+TIMEOUT+"ms occured while fetching resource: "+url)}function fail(message){console.error(message),resolve("")}}))},uid:function uid(){var index=0;return function(){return"u"+fourRandomChars()+index++;function fourRandomChars(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}(),delay:function delay(ms){return function(arg){return new Promise((function(resolve){setTimeout((function(){resolve(arg)}),ms)}))}},asArray:function asArray(arrayLike){for(var array=[],length=arrayLike.length,i=0;i<length;i++)array.push(arrayLike[i]);return array},escapeXhtml:function escapeXhtml(string){return string.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function makeImage(uri){return new Promise((function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)},image.onerror=reject,image.src=uri}))},width:function width(node){var leftBorder=px(node,"border-left-width"),rightBorder=px(node,"border-right-width");return node.scrollWidth+leftBorder+rightBorder},height:function height(node){var topBorder=px(node,"border-top-width"),bottomBorder=px(node,"border-bottom-width");return node.scrollHeight+topBorder+bottomBorder}};function parseExtension(url){var match=/\.([^\.\/]*?)$/g.exec(url);return match?match[1]:""}function px(node,styleProperty){var value=window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(value.replace("px",""))}}(),inliner=function newInliner(){var URL_REGEX=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function inlineAll(string,baseUrl,get){return nothingToInline()?Promise.resolve(string):Promise.resolve(string).then(readUrls).then((function(urls){var done=Promise.resolve(string);return urls.forEach((function(url){done=done.then((function(string){return inline(string,url,baseUrl,get)}))})),done}));function nothingToInline(){return!shouldProcess(string)}},shouldProcess,impl:{readUrls,inline}};function shouldProcess(string){return-1!==string.search(URL_REGEX)}function readUrls(string){for(var match,result=[];null!==(match=URL_REGEX.exec(string));)result.push(match[1]);return result.filter((function(url){return!util.isDataUrl(url)}))}function inline(string,url,baseUrl,get){return Promise.resolve(url).then((function(url){return baseUrl?util.resolveUrl(url,baseUrl):url})).then(get||util.getAndEncode).then((function(data){return util.dataAsUrl(data,util.mimeType(url))})).then((function(dataUrl){return string.replace(function urlAsRegex(url){return new RegExp("(url\\(['\"]?)("+util.escape(url)+")(['\"]?\\))","g")}(url),"$1"+dataUrl+"$3")}))}}(),fontFaces=function newFontFaces(){return{resolveAll:function resolveAll(){return readAll(document).then((function(webFonts){return Promise.all(webFonts.map((function(webFont){return webFont.resolve()})))})).then((function(cssStrings){return cssStrings.join("\n")}))},impl:{readAll}};function readAll(){return Promise.resolve(util.asArray(document.styleSheets)).then((function getCssRules(styleSheets){var cssRules=[];return styleSheets.forEach((function(sheet){try{util.asArray(sheet.cssRules||[]).forEach(cssRules.push.bind(cssRules))}catch(e){console.log("Error while reading CSS rules from "+sheet.href,e.toString())}})),cssRules})).then((function selectWebFontRules(cssRules){return cssRules.filter((function(rule){return rule.type===CSSRule.FONT_FACE_RULE})).filter((function(rule){return inliner.shouldProcess(rule.style.getPropertyValue("src"))}))})).then((function(rules){return rules.map(newWebFont)}));function newWebFont(webFontRule){return{resolve:function resolve(){var baseUrl=(webFontRule.parentStyleSheet||{}).href;return inliner.inlineAll(webFontRule.cssText,baseUrl)},src:function(){return webFontRule.style.getPropertyValue("src")}}}}}(),images=function newImages(){return{inlineAll:function inlineAll(node){return node instanceof Element?inlineBackground(node).then((function(){return node instanceof HTMLImageElement?newImage(node).inline():Promise.all(util.asArray(node.childNodes).map((function(child){return inlineAll(child)})))})):Promise.resolve(node);function inlineBackground(node){var background=node.style.getPropertyValue("background");return background?inliner.inlineAll(background).then((function(inlined){node.style.setProperty("background",inlined,node.style.getPropertyPriority("background"))})).then((function(){return node})):Promise.resolve(node)}},impl:{newImage}};function newImage(element){return{inline:function inline(get){return util.isDataUrl(element.src)?Promise.resolve():Promise.resolve(element.src).then(get||util.getAndEncode).then((function(data){return util.dataAsUrl(data,util.mimeType(element.src))})).then((function(dataUrl){return new Promise((function(resolve,reject){element.onload=resolve,element.onerror=reject,element.src=dataUrl}))}))}}}}(),defaultOptions={imagePlaceholder:void 0,cacheBust:!1},domtoimage={toSvg,toPng:function toPng(node,options){return draw(node,options||{}).then((function(canvas){return canvas.toDataURL()}))},toJpeg:function toJpeg(node,options){return draw(node,options=options||{}).then((function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)}))},toBlob:function toBlob(node,options){return draw(node,options||{}).then(util.canvasToBlob)},toPixelData:function toPixelData(node,options){return draw(node,options||{}).then((function(canvas){return canvas.getContext("2d").getImageData(0,0,util.width(node),util.height(node)).data}))},impl:{fontFaces,images,util,inliner,options:{}}};function toSvg(node,options){return function copyOptions(options){void 0===options.imagePlaceholder?domtoimage.impl.options.imagePlaceholder=defaultOptions.imagePlaceholder:domtoimage.impl.options.imagePlaceholder=options.imagePlaceholder;void 0===options.cacheBust?domtoimage.impl.options.cacheBust=defaultOptions.cacheBust:domtoimage.impl.options.cacheBust=options.cacheBust}(options=options||{}),Promise.resolve(node).then((function(node){return cloneNode(node,options.filter,!0)})).then(embedFonts).then(inlineImages).then((function applyOptions(clone){options.bgcolor&&(clone.style.backgroundColor=options.bgcolor);options.width&&(clone.style.width=options.width+"px");options.height&&(clone.style.height=options.height+"px");options.style&&Object.keys(options.style).forEach((function(property){clone.style[property]=options.style[property]}));return clone})).then((function(clone){return function makeSvgDataUri(node,width,height){return Promise.resolve(node).then((function(node){return node.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(node)})).then(util.escapeXhtml).then((function(xhtml){return'<foreignObject x="0" y="0" width="100%" height="100%">'+xhtml+"</foreignObject>"})).then((function(foreignObject){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+width+'" height="'+height+'">'+foreignObject+"</svg>"})).then((function(svg){return"data:image/svg+xml;charset=utf-8,"+svg}))}(clone,options.width||util.width(node),options.height||util.height(node))}))}function draw(domNode,options){return toSvg(domNode,options).then(util.makeImage).then(util.delay(100)).then((function(image){var canvas=function newCanvas(domNode){var canvas=document.createElement("canvas");if(canvas.width=options.width||util.width(domNode),canvas.height=options.height||util.height(domNode),options.bgcolor){var ctx=canvas.getContext("2d");ctx.fillStyle=options.bgcolor,ctx.fillRect(0,0,canvas.width,canvas.height)}return canvas}(domNode);return canvas.getContext("2d").drawImage(image,0,0),canvas}))}function cloneNode(node,filter,root){return root||!filter||filter(node)?Promise.resolve(node).then((function makeNodeCopy(node){return node instanceof HTMLCanvasElement?util.makeImage(node.toDataURL()):node.cloneNode(!1)})).then((function(clone){return function cloneChildren(original,clone,filter){var children=original.childNodes;return 0===children.length?Promise.resolve(clone):cloneChildrenInOrder(clone,util.asArray(children),filter).then((function(){return clone}));function cloneChildrenInOrder(parent,children,filter){var done=Promise.resolve();return children.forEach((function(child){done=done.then((function(){return cloneNode(child,filter)})).then((function(childClone){childClone&&parent.appendChild(childClone)}))})),done}}(node,clone,filter)})).then((function(clone){return function processClone(original,clone){return clone instanceof Element?Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then((function(){return clone})):clone;function cloneStyle(){function copyStyle(source,target){function copyProperties(source,target){util.asArray(source).forEach((function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))}))}source.cssText?target.cssText=source.cssText:copyProperties(source,target)}copyStyle(window.getComputedStyle(original),clone.style)}function clonePseudoElements(){function clonePseudoElement(element){var style=window.getComputedStyle(original,element),content=style.getPropertyValue("content");if(""!==content&&"none"!==content){var className=util.uid();clone.className=clone.className+" "+className;var styleElement=document.createElement("style");styleElement.appendChild(formatPseudoElementStyle(className,element,style)),clone.appendChild(styleElement)}function formatPseudoElementStyle(className,element,style){var selector="."+className+":"+element,cssText=style.cssText?formatCssText(style):formatCssProperties(style);return document.createTextNode(selector+"{"+cssText+"}");function formatCssText(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}function formatCssProperties(style){return util.asArray(style).map(formatProperty).join("; ")+";";function formatProperty(name){return name+": "+style.getPropertyValue(name)+(style.getPropertyPriority(name)?" !important":"")}}}}[":before",":after"].forEach((function(element){clonePseudoElement(element)}))}function copyUserInput(){original instanceof HTMLTextAreaElement&&(clone.innerHTML=original.value),original instanceof HTMLInputElement&&clone.setAttribute("value",original.value)}function fixSvg(){clone instanceof SVGElement&&(clone.setAttribute("xmlns","http://www.w3.org/2000/svg"),clone instanceof SVGRectElement&&["width","height"].forEach((function(attribute){var value=clone.getAttribute(attribute);value&&clone.style.setProperty(attribute,value)})))}}(node,clone)})):Promise.resolve()}function embedFonts(node){return fontFaces.resolveAll().then((function(cssText){var styleNode=document.createElement("style");return node.appendChild(styleNode),styleNode.appendChild(document.createTextNode(cssText)),node}))}function inlineImages(node){return images.inlineAll(node).then((function(){return node}))}module.exports=domtoimage}()},"./node_modules/dompurify/dist/purify.js":function(module){module.exports=function(){"use strict";const{entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor}=Object;let{freeze,seal,create}=Object,{apply,construct}="undefined"!=typeof Reflect&&Reflect;freeze||(freeze=function freeze(x){return x}),seal||(seal=function seal(x){return x}),apply||(apply=function apply(fun,thisValue,args){return fun.apply(thisValue,args)}),construct||(construct=function construct(Func,args){return new Func(...args)});const arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(func){return function(thisArg){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return apply(func,thisArg,args)}}function unconstruct(func){return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return construct(func,args)}}function addToSet(set,array){let transformCaseFunc=arguments.length>2&&void 0!==arguments[2]?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(set,null);let l=array.length;for(;l--;){let element=array[l];if("string"==typeof element){const lcElement=transformCaseFunc(element);lcElement!==element&&(isFrozen(array)||(array[l]=lcElement),element=lcElement)}set[element]=!0}return set}function clone(object){const newObject=create(null);for(const[property,value]of entries(object))void 0!==getOwnPropertyDescriptor(object,property)&&(newObject[property]=value);return newObject}function lookupGetter(object,prop){for(;null!==object;){const desc=getOwnPropertyDescriptor(object,prop);if(desc){if(desc.get)return unapply(desc.get);if("function"==typeof desc.value)return unapply(desc.value)}object=getPrototypeOf(object)}function fallbackValue(element){return console.warn("fallback value for",element),null}return fallbackValue}const html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i);var EXPRESSIONS=Object.freeze({__proto__:null,MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR,DATA_ATTR,ARIA_ATTR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,ATTR_WHITESPACE,DOCTYPE_NAME});const getGlobal=function getGlobal(){return"undefined"==typeof window?null:window},_createTrustedTypesPolicy=function _createTrustedTypesPolicy(trustedTypes,purifyHostElement){if("object"!=typeof trustedTypes||"function"!=typeof trustedTypes.createPolicy)return null;let suffix=null;const ATTR_NAME="data-tt-policy-suffix";purifyHostElement&&purifyHostElement.hasAttribute(ATTR_NAME)&&(suffix=purifyHostElement.getAttribute(ATTR_NAME));const policyName="dompurify"+(suffix?"#"+suffix:"");try{return trustedTypes.createPolicy(policyName,{createHTML:html=>html,createScriptURL:scriptUrl=>scriptUrl})}catch(_){return console.warn("TrustedTypes policy "+policyName+" could not be created."),null}};function createDOMPurify(){let window=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getGlobal();const DOMPurify=root=>createDOMPurify(root);if(DOMPurify.version="3.0.6",DOMPurify.removed=[],!window||!window.document||9!==window.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;let{document}=window;const originalDocument=document,currentScript=originalDocument.currentScript,{DocumentFragment,HTMLTemplateElement,Node,Element,NodeFilter,NamedNodeMap=window.NamedNodeMap||window.MozNamedAttrMap,HTMLFormElement,DOMParser,trustedTypes}=window,ElementPrototype=Element.prototype,cloneNode=lookupGetter(ElementPrototype,"cloneNode"),getNextSibling=lookupGetter(ElementPrototype,"nextSibling"),getChildNodes=lookupGetter(ElementPrototype,"childNodes"),getParentNode=lookupGetter(ElementPrototype,"parentNode");if("function"==typeof HTMLTemplateElement){const template=document.createElement("template");template.content&&template.content.ownerDocument&&(document=template.content.ownerDocument)}let trustedTypesPolicy,emptyHTML="";const{implementation,createNodeIterator,createDocumentFragment,getElementsByTagName}=document,{importNode}=originalDocument;let hooks={};DOMPurify.isSupported="function"==typeof entries&&"function"==typeof getParentNode&&implementation&&void 0!==implementation.createHTMLDocument;const{MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR,DATA_ATTR,ARIA_ATTR,IS_SCRIPT_OR_DATA,ATTR_WHITESPACE}=EXPRESSIONS;let{IS_ALLOWED_URI:IS_ALLOWED_URI$1}=EXPRESSIONS,ALLOWED_TAGS=null;const DEFAULT_ALLOWED_TAGS=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text]);let ALLOWED_ATTR=null;const DEFAULT_ALLOWED_ATTR=addToSet({},[...html,...svg,...mathMl,...xml]);let CUSTOM_ELEMENT_HANDLING=Object.seal(create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),FORBID_TAGS=null,FORBID_ATTR=null,ALLOW_ARIA_ATTR=!0,ALLOW_DATA_ATTR=!0,ALLOW_UNKNOWN_PROTOCOLS=!1,ALLOW_SELF_CLOSE_IN_ATTR=!0,SAFE_FOR_TEMPLATES=!1,WHOLE_DOCUMENT=!1,SET_CONFIG=!1,FORCE_BODY=!1,RETURN_DOM=!1,RETURN_DOM_FRAGMENT=!1,RETURN_TRUSTED_TYPE=!1,SANITIZE_DOM=!0,SANITIZE_NAMED_PROPS=!1;const SANITIZE_NAMED_PROPS_PREFIX="user-content-";let KEEP_CONTENT=!0,IN_PLACE=!1,USE_PROFILES={},FORBID_CONTENTS=null;const DEFAULT_FORBID_CONTENTS=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let DATA_URI_TAGS=null;const DEFAULT_DATA_URI_TAGS=addToSet({},["audio","video","img","source","image","track"]);let URI_SAFE_ATTRIBUTES=null;const DEFAULT_URI_SAFE_ATTRIBUTES=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),MATHML_NAMESPACE="http://www.w3.org/1998/Math/MathML",SVG_NAMESPACE="http://www.w3.org/2000/svg",HTML_NAMESPACE="http://www.w3.org/1999/xhtml";let NAMESPACE=HTML_NAMESPACE,IS_EMPTY_INPUT=!1,ALLOWED_NAMESPACES=null;const DEFAULT_ALLOWED_NAMESPACES=addToSet({},[MATHML_NAMESPACE,SVG_NAMESPACE,HTML_NAMESPACE],stringToString);let PARSER_MEDIA_TYPE=null;const SUPPORTED_PARSER_MEDIA_TYPES=["application/xhtml+xml","text/html"],DEFAULT_PARSER_MEDIA_TYPE="text/html";let transformCaseFunc=null,CONFIG=null;const formElement=document.createElement("form"),isRegexOrFunction=function isRegexOrFunction(testValue){return testValue instanceof RegExp||testValue instanceof Function},_parseConfig=function _parseConfig(){let cfg=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!CONFIG||CONFIG!==cfg){if(cfg&&"object"==typeof cfg||(cfg={}),cfg=clone(cfg),PARSER_MEDIA_TYPE=PARSER_MEDIA_TYPE=-1===SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE)?DEFAULT_PARSER_MEDIA_TYPE:cfg.PARSER_MEDIA_TYPE,transformCaseFunc="application/xhtml+xml"===PARSER_MEDIA_TYPE?stringToString:stringToLowerCase,ALLOWED_TAGS="ALLOWED_TAGS"in cfg?addToSet({},cfg.ALLOWED_TAGS,transformCaseFunc):DEFAULT_ALLOWED_TAGS,ALLOWED_ATTR="ALLOWED_ATTR"in cfg?addToSet({},cfg.ALLOWED_ATTR,transformCaseFunc):DEFAULT_ALLOWED_ATTR,ALLOWED_NAMESPACES="ALLOWED_NAMESPACES"in cfg?addToSet({},cfg.ALLOWED_NAMESPACES,stringToString):DEFAULT_ALLOWED_NAMESPACES,URI_SAFE_ATTRIBUTES="ADD_URI_SAFE_ATTR"in cfg?addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),cfg.ADD_URI_SAFE_ATTR,transformCaseFunc):DEFAULT_URI_SAFE_ATTRIBUTES,DATA_URI_TAGS="ADD_DATA_URI_TAGS"in cfg?addToSet(clone(DEFAULT_DATA_URI_TAGS),cfg.ADD_DATA_URI_TAGS,transformCaseFunc):DEFAULT_DATA_URI_TAGS,FORBID_CONTENTS="FORBID_CONTENTS"in cfg?addToSet({},cfg.FORBID_CONTENTS,transformCaseFunc):DEFAULT_FORBID_CONTENTS,FORBID_TAGS="FORBID_TAGS"in cfg?addToSet({},cfg.FORBID_TAGS,transformCaseFunc):{},FORBID_ATTR="FORBID_ATTR"in cfg?addToSet({},cfg.FORBID_ATTR,transformCaseFunc):{},USE_PROFILES="USE_PROFILES"in cfg&&cfg.USE_PROFILES,ALLOW_ARIA_ATTR=!1!==cfg.ALLOW_ARIA_ATTR,ALLOW_DATA_ATTR=!1!==cfg.ALLOW_DATA_ATTR,ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||!1,ALLOW_SELF_CLOSE_IN_ATTR=!1!==cfg.ALLOW_SELF_CLOSE_IN_ATTR,SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||!1,WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||!1,RETURN_DOM=cfg.RETURN_DOM||!1,RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||!1,RETURN_TRUSTED_TYPE=cfg.RETURN_TRUSTED_TYPE||!1,FORCE_BODY=cfg.FORCE_BODY||!1,SANITIZE_DOM=!1!==cfg.SANITIZE_DOM,SANITIZE_NAMED_PROPS=cfg.SANITIZE_NAMED_PROPS||!1,KEEP_CONTENT=!1!==cfg.KEEP_CONTENT,IN_PLACE=cfg.IN_PLACE||!1,IS_ALLOWED_URI$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,NAMESPACE=cfg.NAMESPACE||HTML_NAMESPACE,CUSTOM_ELEMENT_HANDLING=cfg.CUSTOM_ELEMENT_HANDLING||{},cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck),cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(CUSTOM_ELEMENT_HANDLING.attributeNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),cfg.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),SAFE_FOR_TEMPLATES&&(ALLOW_DATA_ATTR=!1),RETURN_DOM_FRAGMENT&&(RETURN_DOM=!0),USE_PROFILES&&(ALLOWED_TAGS=addToSet({},[...text]),ALLOWED_ATTR=[],!0===USE_PROFILES.html&&(addToSet(ALLOWED_TAGS,html$1),addToSet(ALLOWED_ATTR,html)),!0===USE_PROFILES.svg&&(addToSet(ALLOWED_TAGS,svg$1),addToSet(ALLOWED_ATTR,svg),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.svgFilters&&(addToSet(ALLOWED_TAGS,svgFilters),addToSet(ALLOWED_ATTR,svg),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.mathMl&&(addToSet(ALLOWED_TAGS,mathMl$1),addToSet(ALLOWED_ATTR,mathMl),addToSet(ALLOWED_ATTR,xml))),cfg.ADD_TAGS&&(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS&&(ALLOWED_TAGS=clone(ALLOWED_TAGS)),addToSet(ALLOWED_TAGS,cfg.ADD_TAGS,transformCaseFunc)),cfg.ADD_ATTR&&(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR&&(ALLOWED_ATTR=clone(ALLOWED_ATTR)),addToSet(ALLOWED_ATTR,cfg.ADD_ATTR,transformCaseFunc)),cfg.ADD_URI_SAFE_ATTR&&addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR,transformCaseFunc),cfg.FORBID_CONTENTS&&(FORBID_CONTENTS===DEFAULT_FORBID_CONTENTS&&(FORBID_CONTENTS=clone(FORBID_CONTENTS)),addToSet(FORBID_CONTENTS,cfg.FORBID_CONTENTS,transformCaseFunc)),KEEP_CONTENT&&(ALLOWED_TAGS["#text"]=!0),WHOLE_DOCUMENT&&addToSet(ALLOWED_TAGS,["html","head","body"]),ALLOWED_TAGS.table&&(addToSet(ALLOWED_TAGS,["tbody"]),delete FORBID_TAGS.tbody),cfg.TRUSTED_TYPES_POLICY){if("function"!=typeof cfg.TRUSTED_TYPES_POLICY.createHTML)throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL)throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');trustedTypesPolicy=cfg.TRUSTED_TYPES_POLICY,emptyHTML=trustedTypesPolicy.createHTML("")}else void 0===trustedTypesPolicy&&(trustedTypesPolicy=_createTrustedTypesPolicy(trustedTypes,currentScript)),null!==trustedTypesPolicy&&"string"==typeof emptyHTML&&(emptyHTML=trustedTypesPolicy.createHTML(""));freeze&&freeze(cfg),CONFIG=cfg}},MATHML_TEXT_INTEGRATION_POINTS=addToSet({},["mi","mo","mn","ms","mtext"]),HTML_INTEGRATION_POINTS=addToSet({},["foreignobject","desc","title","annotation-xml"]),COMMON_SVG_AND_HTML_ELEMENTS=addToSet({},["title","style","font","a","script"]),ALL_SVG_TAGS=addToSet({},svg$1);addToSet(ALL_SVG_TAGS,svgFilters),addToSet(ALL_SVG_TAGS,svgDisallowed);const ALL_MATHML_TAGS=addToSet({},mathMl$1);addToSet(ALL_MATHML_TAGS,mathMlDisallowed);const _checkValidNamespace=function _checkValidNamespace(element){let parent=getParentNode(element);parent&&parent.tagName||(parent={namespaceURI:NAMESPACE,tagName:"template"});const tagName=stringToLowerCase(element.tagName),parentTagName=stringToLowerCase(parent.tagName);return!!ALLOWED_NAMESPACES[element.namespaceURI]&&(element.namespaceURI===SVG_NAMESPACE?parent.namespaceURI===HTML_NAMESPACE?"svg"===tagName:parent.namespaceURI===MATHML_NAMESPACE?"svg"===tagName&&("annotation-xml"===parentTagName||MATHML_TEXT_INTEGRATION_POINTS[parentTagName]):Boolean(ALL_SVG_TAGS[tagName]):element.namespaceURI===MATHML_NAMESPACE?parent.namespaceURI===HTML_NAMESPACE?"math"===tagName:parent.namespaceURI===SVG_NAMESPACE?"math"===tagName&&HTML_INTEGRATION_POINTS[parentTagName]:Boolean(ALL_MATHML_TAGS[tagName]):element.namespaceURI===HTML_NAMESPACE?!(parent.namespaceURI===SVG_NAMESPACE&&!HTML_INTEGRATION_POINTS[parentTagName])&&!(parent.namespaceURI===MATHML_NAMESPACE&&!MATHML_TEXT_INTEGRATION_POINTS[parentTagName])&&!ALL_MATHML_TAGS[tagName]&&(COMMON_SVG_AND_HTML_ELEMENTS[tagName]||!ALL_SVG_TAGS[tagName]):!("application/xhtml+xml"!==PARSER_MEDIA_TYPE||!ALLOWED_NAMESPACES[element.namespaceURI]))},_forceRemove=function _forceRemove(node){arrayPush(DOMPurify.removed,{element:node});try{node.parentNode.removeChild(node)}catch(_){node.remove()}},_removeAttribute=function _removeAttribute(name,node){try{arrayPush(DOMPurify.removed,{attribute:node.getAttributeNode(name),from:node})}catch(_){arrayPush(DOMPurify.removed,{attribute:null,from:node})}if(node.removeAttribute(name),"is"===name&&!ALLOWED_ATTR[name])if(RETURN_DOM||RETURN_DOM_FRAGMENT)try{_forceRemove(node)}catch(_){}else try{node.setAttribute(name,"")}catch(_){}},_initDocument=function _initDocument(dirty){let doc=null,leadingWhitespace=null;if(FORCE_BODY)dirty="<remove></remove>"+dirty;else{const matches=stringMatch(dirty,/^[\r\n\t ]+/);leadingWhitespace=matches&&matches[0]}"application/xhtml+xml"===PARSER_MEDIA_TYPE&&NAMESPACE===HTML_NAMESPACE&&(dirty='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+dirty+"</body></html>");const dirtyPayload=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(NAMESPACE===HTML_NAMESPACE)try{doc=(new DOMParser).parseFromString(dirtyPayload,PARSER_MEDIA_TYPE)}catch(_){}if(!doc||!doc.documentElement){doc=implementation.createDocument(NAMESPACE,"template",null);try{doc.documentElement.innerHTML=IS_EMPTY_INPUT?emptyHTML:dirtyPayload}catch(_){}}const body=doc.body||doc.documentElement;return dirty&&leadingWhitespace&&body.insertBefore(document.createTextNode(leadingWhitespace),body.childNodes[0]||null),NAMESPACE===HTML_NAMESPACE?getElementsByTagName.call(doc,WHOLE_DOCUMENT?"html":"body")[0]:WHOLE_DOCUMENT?doc.documentElement:body},_createNodeIterator=function _createNodeIterator(root){return createNodeIterator.call(root.ownerDocument||root,root,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,null)},_isClobbered=function _isClobbered(elm){return elm instanceof HTMLFormElement&&("string"!=typeof elm.nodeName||"string"!=typeof elm.textContent||"function"!=typeof elm.removeChild||!(elm.attributes instanceof NamedNodeMap)||"function"!=typeof elm.removeAttribute||"function"!=typeof elm.setAttribute||"string"!=typeof elm.namespaceURI||"function"!=typeof elm.insertBefore||"function"!=typeof elm.hasChildNodes)},_isNode=function _isNode(object){return"function"==typeof Node&&object instanceof Node},_executeHook=function _executeHook(entryPoint,currentNode,data){hooks[entryPoint]&&arrayForEach(hooks[entryPoint],(hook=>{hook.call(DOMPurify,currentNode,data,CONFIG)}))},_sanitizeElements=function _sanitizeElements(currentNode){let content=null;if(_executeHook("beforeSanitizeElements",currentNode,null),_isClobbered(currentNode))return _forceRemove(currentNode),!0;const tagName=transformCaseFunc(currentNode.nodeName);if(_executeHook("uponSanitizeElement",currentNode,{tagName,allowedTags:ALLOWED_TAGS}),currentNode.hasChildNodes()&&!_isNode(currentNode.firstElementChild)&&regExpTest(/<[/\w]/g,currentNode.innerHTML)&&regExpTest(/<[/\w]/g,currentNode.textContent))return _forceRemove(currentNode),!0;if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName]){if(!FORBID_TAGS[tagName]&&_isBasicCustomElement(tagName)){if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,tagName))return!1;if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))return!1}if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]){const parentNode=getParentNode(currentNode)||currentNode.parentNode,childNodes=getChildNodes(currentNode)||currentNode.childNodes;if(childNodes&&parentNode)for(let i=childNodes.length-1;i>=0;--i)parentNode.insertBefore(cloneNode(childNodes[i],!0),getNextSibling(currentNode))}return _forceRemove(currentNode),!0}return currentNode instanceof Element&&!_checkValidNamespace(currentNode)?(_forceRemove(currentNode),!0):"noscript"!==tagName&&"noembed"!==tagName&&"noframes"!==tagName||!regExpTest(/<\/no(script|embed|frames)/i,currentNode.innerHTML)?(SAFE_FOR_TEMPLATES&&3===currentNode.nodeType&&(content=currentNode.textContent,arrayForEach([MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR],(expr=>{content=stringReplace(content,expr," ")})),currentNode.textContent!==content&&(arrayPush(DOMPurify.removed,{element:currentNode.cloneNode()}),currentNode.textContent=content)),_executeHook("afterSanitizeElements",currentNode,null),!1):(_forceRemove(currentNode),!0)},_isValidAttribute=function _isValidAttribute(lcTag,lcName,value){if(SANITIZE_DOM&&("id"===lcName||"name"===lcName)&&(value in document||value in formElement))return!1;if(ALLOW_DATA_ATTR&&!FORBID_ATTR[lcName]&&regExpTest(DATA_ATTR,lcName));else if(ALLOW_ARIA_ATTR&&regExpTest(ARIA_ATTR,lcName));else if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName]){if(!(_isBasicCustomElement(lcTag)&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,lcTag)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))&&(CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck,lcName)||CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName))||"is"===lcName&&CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,value)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))return!1}else if(URI_SAFE_ATTRIBUTES[lcName]);else if(regExpTest(IS_ALLOWED_URI$1,stringReplace(value,ATTR_WHITESPACE,"")));else if("src"!==lcName&&"xlink:href"!==lcName&&"href"!==lcName||"script"===lcTag||0!==stringIndexOf(value,"data:")||!DATA_URI_TAGS[lcTag])if(ALLOW_UNKNOWN_PROTOCOLS&&!regExpTest(IS_SCRIPT_OR_DATA,stringReplace(value,ATTR_WHITESPACE,"")));else if(value)return!1;return!0},_isBasicCustomElement=function _isBasicCustomElement(tagName){return tagName.indexOf("-")>0},_sanitizeAttributes=function _sanitizeAttributes(currentNode){_executeHook("beforeSanitizeAttributes",currentNode,null);const{attributes}=currentNode;if(!attributes)return;const hookEvent={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ALLOWED_ATTR};let l=attributes.length;for(;l--;){const attr=attributes[l],{name,namespaceURI,value:attrValue}=attr,lcName=transformCaseFunc(name);let value="value"===name?attrValue:stringTrim(attrValue);if(hookEvent.attrName=lcName,hookEvent.attrValue=value,hookEvent.keepAttr=!0,hookEvent.forceKeepAttr=void 0,_executeHook("uponSanitizeAttribute",currentNode,hookEvent),value=hookEvent.attrValue,hookEvent.forceKeepAttr)continue;if(_removeAttribute(name,currentNode),!hookEvent.keepAttr)continue;if(!ALLOW_SELF_CLOSE_IN_ATTR&&regExpTest(/\/>/i,value)){_removeAttribute(name,currentNode);continue}SAFE_FOR_TEMPLATES&&arrayForEach([MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR],(expr=>{value=stringReplace(value,expr," ")}));const lcTag=transformCaseFunc(currentNode.nodeName);if(_isValidAttribute(lcTag,lcName,value)){if(!SANITIZE_NAMED_PROPS||"id"!==lcName&&"name"!==lcName||(_removeAttribute(name,currentNode),value=SANITIZE_NAMED_PROPS_PREFIX+value),trustedTypesPolicy&&"object"==typeof trustedTypes&&"function"==typeof trustedTypes.getAttributeType)if(namespaceURI);else switch(trustedTypes.getAttributeType(lcTag,lcName)){case"TrustedHTML":value=trustedTypesPolicy.createHTML(value);break;case"TrustedScriptURL":value=trustedTypesPolicy.createScriptURL(value)}try{namespaceURI?currentNode.setAttributeNS(namespaceURI,name,value):currentNode.setAttribute(name,value),arrayPop(DOMPurify.removed)}catch(_){}}}_executeHook("afterSanitizeAttributes",currentNode,null)},_sanitizeShadowDOM=function _sanitizeShadowDOM(fragment){let shadowNode=null;const shadowIterator=_createNodeIterator(fragment);for(_executeHook("beforeSanitizeShadowDOM",fragment,null);shadowNode=shadowIterator.nextNode();)_executeHook("uponSanitizeShadowNode",shadowNode,null),_sanitizeElements(shadowNode)||(shadowNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(shadowNode.content),_sanitizeAttributes(shadowNode));_executeHook("afterSanitizeShadowDOM",fragment,null)};return DOMPurify.sanitize=function(dirty){let cfg=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},body=null,importedNode=null,currentNode=null,returnNode=null;if(IS_EMPTY_INPUT=!dirty,IS_EMPTY_INPUT&&(dirty="\x3c!--\x3e"),"string"!=typeof dirty&&!_isNode(dirty)){if("function"!=typeof dirty.toString)throw typeErrorCreate("toString is not a function");if("string"!=typeof(dirty=dirty.toString()))throw typeErrorCreate("dirty is not a string, aborting")}if(!DOMPurify.isSupported)return dirty;if(SET_CONFIG||_parseConfig(cfg),DOMPurify.removed=[],"string"==typeof dirty&&(IN_PLACE=!1),IN_PLACE){if(dirty.nodeName){const tagName=transformCaseFunc(dirty.nodeName);if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(dirty instanceof Node)body=_initDocument("\x3c!----\x3e"),importedNode=body.ownerDocument.importNode(dirty,!0),1===importedNode.nodeType&&"BODY"===importedNode.nodeName||"HTML"===importedNode.nodeName?body=importedNode:body.appendChild(importedNode);else{if(!RETURN_DOM&&!SAFE_FOR_TEMPLATES&&!WHOLE_DOCUMENT&&-1===dirty.indexOf("<"))return trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(dirty):dirty;if(body=_initDocument(dirty),!body)return RETURN_DOM?null:RETURN_TRUSTED_TYPE?emptyHTML:""}body&&FORCE_BODY&&_forceRemove(body.firstChild);const nodeIterator=_createNodeIterator(IN_PLACE?dirty:body);for(;currentNode=nodeIterator.nextNode();)_sanitizeElements(currentNode)||(currentNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(currentNode.content),_sanitizeAttributes(currentNode));if(IN_PLACE)return dirty;if(RETURN_DOM){if(RETURN_DOM_FRAGMENT)for(returnNode=createDocumentFragment.call(body.ownerDocument);body.firstChild;)returnNode.appendChild(body.firstChild);else returnNode=body;return(ALLOWED_ATTR.shadowroot||ALLOWED_ATTR.shadowrootmode)&&(returnNode=importNode.call(originalDocument,returnNode,!0)),returnNode}let serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;return WHOLE_DOCUMENT&&ALLOWED_TAGS["!doctype"]&&body.ownerDocument&&body.ownerDocument.doctype&&body.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,body.ownerDocument.doctype.name)&&(serializedHTML="<!DOCTYPE "+body.ownerDocument.doctype.name+">\n"+serializedHTML),SAFE_FOR_TEMPLATES&&arrayForEach([MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR],(expr=>{serializedHTML=stringReplace(serializedHTML,expr," ")})),trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML},DOMPurify.setConfig=function(){_parseConfig(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),SET_CONFIG=!0},DOMPurify.clearConfig=function(){CONFIG=null,SET_CONFIG=!1},DOMPurify.isValidAttribute=function(tag,attr,value){CONFIG||_parseConfig({});const lcTag=transformCaseFunc(tag),lcName=transformCaseFunc(attr);return _isValidAttribute(lcTag,lcName,value)},DOMPurify.addHook=function(entryPoint,hookFunction){"function"==typeof hookFunction&&(hooks[entryPoint]=hooks[entryPoint]||[],arrayPush(hooks[entryPoint],hookFunction))},DOMPurify.removeHook=function(entryPoint){if(hooks[entryPoint])return arrayPop(hooks[entryPoint])},DOMPurify.removeHooks=function(entryPoint){hooks[entryPoint]&&(hooks[entryPoint]=[])},DOMPurify.removeAllHooks=function(){hooks={}},DOMPurify}return createDOMPurify()}()},"./node_modules/escape-carriage/index.js":module=>{function escapeCarriageReturn(txt){if(!txt)return"";if(!/\r/.test(txt))return txt;for(txt=txt.replace(/\r+\n/gm,"\n");/\r./.test(txt);)txt=txt.replace(/^([^\r\n]*)\r+([^\r\n]+)/gm,(function(_,base,insert){return insert+base.slice(insert.length)}));return txt}function findLongestString(arr){for(var longest=0,i=0;i<arr.length;i++)arr[longest].length<=arr[i].length&&(longest=i);return longest}function escapeSingleLineSafe(txt){if(!/\r/.test(txt))return txt;for(var arr=txt.split("\r"),res=[];arr.length>0;){var longest=findLongestString(arr);res.push(arr[longest]),arr=arr.slice(longest+1)}return res.join("\r")}module.exports=escapeCarriageReturn,module.exports.escapeCarriageReturn=escapeCarriageReturn,module.exports.escapeCarriageReturnSafe=function escapeCarriageReturnSafe(txt){if(!txt)return"";if(!/\r/.test(txt))return txt;if(!/\n/.test(txt))return escapeSingleLineSafe(txt);var idx=(txt=txt.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return escapeCarriageReturn(txt.slice(0,idx))+"\n"+escapeSingleLineSafe(txt.slice(idx+1))}},"./node_modules/eventemitter3/index.js":module=>{"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},"./node_modules/intersection-observer/intersection-observer.js":()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var document=window.document,registry=[],crossOriginUpdater=null,crossOriginRect=null;IntersectionObserver.prototype.THROTTLE_TIMEOUT=100,IntersectionObserver.prototype.POLL_INTERVAL=null,IntersectionObserver.prototype.USE_MUTATION_OBSERVER=!0,IntersectionObserver._setupCrossOriginUpdater=function(){return crossOriginUpdater||(crossOriginUpdater=function(boundingClientRect,intersectionRect){crossOriginRect=boundingClientRect&&intersectionRect?convertFromParentRect(boundingClientRect,intersectionRect):{top:0,bottom:0,left:0,right:0,width:0,height:0},registry.forEach((function(observer){observer._checkForIntersections()}))}),crossOriginUpdater},IntersectionObserver._resetCrossOriginUpdater=function(){crossOriginUpdater=null,crossOriginRect=null},IntersectionObserver.prototype.observe=function(target){if(!this._observationTargets.some((function(item){return item.element==target}))){if(!target||1!=target.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:target,entry:null}),this._monitorIntersections(target.ownerDocument),this._checkForIntersections()}},IntersectionObserver.prototype.unobserve=function(target){this._observationTargets=this._observationTargets.filter((function(item){return item.element!=target})),this._unmonitorIntersections(target.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},IntersectionObserver.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},IntersectionObserver.prototype.takeRecords=function(){var records=this._queuedEntries.slice();return this._queuedEntries=[],records},IntersectionObserver.prototype._initThresholds=function(opt_threshold){var threshold=opt_threshold||[0];return Array.isArray(threshold)||(threshold=[threshold]),threshold.sort().filter((function(t,i,a){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==a[i-1]}))},IntersectionObserver.prototype._parseRootMargin=function(opt_rootMargin){var margins=(opt_rootMargin||"0px").split(/\s+/).map((function(margin){var parts=/^(-?\d*\.?\d+)(px|%)$/.exec(margin);if(!parts)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(parts[1]),unit:parts[2]}}));return margins[1]=margins[1]||margins[0],margins[2]=margins[2]||margins[0],margins[3]=margins[3]||margins[1],margins},IntersectionObserver.prototype._monitorIntersections=function(doc){var win=doc.defaultView;if(win&&-1==this._monitoringDocuments.indexOf(doc)){var callback=this._checkForIntersections,monitoringInterval=null,domObserver=null;if(this.POLL_INTERVAL?monitoringInterval=win.setInterval(callback,this.POLL_INTERVAL):(addEvent(win,"resize",callback,!0),addEvent(doc,"scroll",callback,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in win&&(domObserver=new win.MutationObserver(callback)).observe(doc,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(doc),this._monitoringUnsubscribes.push((function(){var win=doc.defaultView;win&&(monitoringInterval&&win.clearInterval(monitoringInterval),removeEvent(win,"resize",callback,!0)),removeEvent(doc,"scroll",callback,!0),domObserver&&domObserver.disconnect()})),doc!=(this.root&&this.root.ownerDocument||document)){var frame=getFrameElement(doc);frame&&this._monitorIntersections(frame.ownerDocument)}}},IntersectionObserver.prototype._unmonitorIntersections=function(doc){var index=this._monitoringDocuments.indexOf(doc);if(-1!=index){var rootDoc=this.root&&this.root.ownerDocument||document,hasDependentTargets=this._observationTargets.some((function(item){var itemDoc=item.element.ownerDocument;if(itemDoc==doc)return!0;for(;itemDoc&&itemDoc!=rootDoc;){var frame=getFrameElement(itemDoc);if((itemDoc=frame&&frame.ownerDocument)==doc)return!0}return!1}));if(!hasDependentTargets){var unsubscribe=this._monitoringUnsubscribes[index];if(this._monitoringDocuments.splice(index,1),this._monitoringUnsubscribes.splice(index,1),unsubscribe(),doc!=rootDoc){var frame=getFrameElement(doc);frame&&this._unmonitorIntersections(frame.ownerDocument)}}}},IntersectionObserver.prototype._unmonitorAllIntersections=function(){var unsubscribes=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var i=0;i<unsubscribes.length;i++)unsubscribes[i]()},IntersectionObserver.prototype._checkForIntersections=function(){if(this.root||!crossOriginUpdater||crossOriginRect){var rootIsInDom=this._rootIsInDom(),rootRect=rootIsInDom?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(item){var target=item.element,targetRect=getBoundingClientRect(target),rootContainsTarget=this._rootContainsTarget(target),oldEntry=item.entry,intersectionRect=rootIsInDom&&rootContainsTarget&&this._computeTargetAndRootIntersection(target,targetRect,rootRect),newEntry=item.entry=new IntersectionObserverEntry({time:window.performance&&performance.now&&performance.now(),target,boundingClientRect:targetRect,rootBounds:crossOriginUpdater&&!this.root?null:rootRect,intersectionRect});oldEntry?rootIsInDom&&rootContainsTarget?this._hasCrossedThreshold(oldEntry,newEntry)&&this._queuedEntries.push(newEntry):oldEntry&&oldEntry.isIntersecting&&this._queuedEntries.push(newEntry):this._queuedEntries.push(newEntry)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},IntersectionObserver.prototype._computeTargetAndRootIntersection=function(target,targetRect,rootRect){if("none"!=window.getComputedStyle(target).display){for(var rect1,rect2,top,bottom,left,right,width,height,intersectionRect=targetRect,parent=getParentNode(target),atRoot=!1;!atRoot&&parent;){var parentRect=null,parentComputedStyle=1==parent.nodeType?window.getComputedStyle(parent):{};if("none"==parentComputedStyle.display)return null;if(parent==this.root||9==parent.nodeType)if(atRoot=!0,parent==this.root||parent==document)crossOriginUpdater&&!this.root?!crossOriginRect||0==crossOriginRect.width&&0==crossOriginRect.height?(parent=null,parentRect=null,intersectionRect=null):parentRect=crossOriginRect:parentRect=rootRect;else{var frame=getParentNode(parent),frameRect=frame&&getBoundingClientRect(frame),frameIntersect=frame&&this._computeTargetAndRootIntersection(frame,frameRect,rootRect);frameRect&&frameIntersect?(parent=frame,parentRect=convertFromParentRect(frameRect,frameIntersect)):(parent=null,intersectionRect=null)}else{var doc=parent.ownerDocument;parent!=doc.body&&parent!=doc.documentElement&&"visible"!=parentComputedStyle.overflow&&(parentRect=getBoundingClientRect(parent))}if(parentRect&&(rect1=parentRect,rect2=intersectionRect,top=void 0,bottom=void 0,left=void 0,right=void 0,width=void 0,height=void 0,top=Math.max(rect1.top,rect2.top),bottom=Math.min(rect1.bottom,rect2.bottom),left=Math.max(rect1.left,rect2.left),right=Math.min(rect1.right,rect2.right),height=bottom-top,intersectionRect=(width=right-left)>=0&&height>=0&&{top,bottom,left,right,width,height}||null),!intersectionRect)break;parent=parent&&getParentNode(parent)}return intersectionRect}},IntersectionObserver.prototype._getRootRect=function(){var rootRect;if(this.root)rootRect=getBoundingClientRect(this.root);else{var html=document.documentElement,body=document.body;rootRect={top:0,left:0,right:html.clientWidth||body.clientWidth,width:html.clientWidth||body.clientWidth,bottom:html.clientHeight||body.clientHeight,height:html.clientHeight||body.clientHeight}}return this._expandRectByRootMargin(rootRect)},IntersectionObserver.prototype._expandRectByRootMargin=function(rect){var margins=this._rootMarginValues.map((function(margin,i){return"px"==margin.unit?margin.value:margin.value*(i%2?rect.width:rect.height)/100})),newRect={top:rect.top-margins[0],right:rect.right+margins[1],bottom:rect.bottom+margins[2],left:rect.left-margins[3]};return newRect.width=newRect.right-newRect.left,newRect.height=newRect.bottom-newRect.top,newRect},IntersectionObserver.prototype._hasCrossedThreshold=function(oldEntry,newEntry){var oldRatio=oldEntry&&oldEntry.isIntersecting?oldEntry.intersectionRatio||0:-1,newRatio=newEntry.isIntersecting?newEntry.intersectionRatio||0:-1;if(oldRatio!==newRatio)for(var i=0;i<this.thresholds.length;i++){var threshold=this.thresholds[i];if(threshold==oldRatio||threshold==newRatio||threshold<oldRatio!=threshold<newRatio)return!0}},IntersectionObserver.prototype._rootIsInDom=function(){return!this.root||containsDeep(document,this.root)},IntersectionObserver.prototype._rootContainsTarget=function(target){return containsDeep(this.root||document,target)&&(!this.root||this.root.ownerDocument==target.ownerDocument)},IntersectionObserver.prototype._registerInstance=function(){registry.indexOf(this)<0&&registry.push(this)},IntersectionObserver.prototype._unregisterInstance=function(){var index=registry.indexOf(this);-1!=index&&registry.splice(index,1)},window.IntersectionObserver=IntersectionObserver,window.IntersectionObserverEntry=IntersectionObserverEntry}function IntersectionObserverEntry(entry){this.time=entry.time,this.target=entry.target,this.rootBounds=ensureDOMRect(entry.rootBounds),this.boundingClientRect=ensureDOMRect(entry.boundingClientRect),this.intersectionRect=ensureDOMRect(entry.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!entry.intersectionRect;var targetRect=this.boundingClientRect,targetArea=targetRect.width*targetRect.height,intersectionRect=this.intersectionRect,intersectionArea=intersectionRect.width*intersectionRect.height;this.intersectionRatio=targetArea?Number((intersectionArea/targetArea).toFixed(4)):this.isIntersecting?1:0}function IntersectionObserver(callback,opt_options){var options=opt_options||{};if("function"!=typeof callback)throw new Error("callback must be a function");if(options.root&&1!=options.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function throttle(fn,timeout){var timer=null;return function(){timer||(timer=setTimeout((function(){fn(),timer=null}),timeout))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=callback,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(options.rootMargin),this.thresholds=this._initThresholds(options.threshold),this.root=options.root||null,this.rootMargin=this._rootMarginValues.map((function(margin){return margin.value+margin.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function addEvent(node,event,fn,opt_useCapture){"function"==typeof node.addEventListener?node.addEventListener(event,fn,opt_useCapture||!1):"function"==typeof node.attachEvent&&node.attachEvent("on"+event,fn)}function removeEvent(node,event,fn,opt_useCapture){"function"==typeof node.removeEventListener?node.removeEventListener(event,fn,opt_useCapture||!1):"function"==typeof node.detatchEvent&&node.detatchEvent("on"+event,fn)}function getBoundingClientRect(el){var rect;try{rect=el.getBoundingClientRect()}catch(err){}return rect?(rect.width&&rect.height||(rect={top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.right-rect.left,height:rect.bottom-rect.top}),rect):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function ensureDOMRect(rect){return!rect||"x"in rect?rect:{top:rect.top,y:rect.top,bottom:rect.bottom,left:rect.left,x:rect.left,right:rect.right,width:rect.width,height:rect.height}}function convertFromParentRect(parentBoundingRect,parentIntersectionRect){var top=parentIntersectionRect.top-parentBoundingRect.top,left=parentIntersectionRect.left-parentBoundingRect.left;return{top,left,height:parentIntersectionRect.height,width:parentIntersectionRect.width,bottom:top+parentIntersectionRect.height,right:left+parentIntersectionRect.width}}function containsDeep(parent,child){for(var node=child;node;){if(node==parent)return!0;node=getParentNode(node)}return!1}function getParentNode(node){var parent=node.parentNode;return 9==node.nodeType&&node!=document?getFrameElement(node):parent&&11==parent.nodeType&&parent.host?parent.host:parent&&parent.assignedSlot?parent.assignedSlot.parentNode:parent}function getFrameElement(doc){try{return doc.defaultView&&doc.defaultView.frameElement||null}catch(e){return null}}}()},"./node_modules/lexical/Lexical.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Lexical=__webpack_require__("./node_modules/lexical/Lexical.prod.js");module.exports=Lexical},"./node_modules/lexical/Lexical.prod.js":(__unused_webpack_module,exports)=>{"use strict";let aa={},ba={},da={},ea={},fa={},ha={},ka={},ma={},na={},pa={},qa={},ra={},sa={},ta={},ua={},va={},xa={},ya={},za={},Aa={},Ba={},Ca={},Fa={},Ga={},Ha={},Ia={},Ja={},Ka={},La={},Ma={},Na={},Oa={},Pa={},Qa={},Ra={},Sa={};function r(a){let b=new URLSearchParams;b.append("code",a);for(let c=1;c<arguments.length;c++)b.append("v",arguments[c]);throw Error(`Minified Lexical error #${a}; visit https://lexical.dev/docs/error?${b} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Ta="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ua=Ta&&"documentMode"in document?document.documentMode:null,t=Ta&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Wa=Ta&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Xa=!(!Ta||!("InputEvent"in window)||Ua)&&"getTargetRanges"in new window.InputEvent("input"),Ya=Ta&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Za=Ta&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,$a=Ta&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ab=Ta&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!$a,bb=Ya||Za||ab?"":"",cb=Wa?"":bb,db=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,eb=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,fb={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},gb={directionless:1,unmergeable:2},hb={center:2,end:6,justify:4,left:1,right:3,start:5},ib={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},jb={normal:0,segmented:2,token:1},kb={0:"normal",2:"segmented",1:"token"},ob=!1,pb=0;function qb(a){pb=a.timeStamp}function rb(a,b,c){return b.__lexicalLineBreak===a||void 0!==a[`__lexicalKey_${c._key}`]}function tb(a,b,c){ob=!0;let d=100<performance.now()-pb;try{w(a,(()=>{let e=v()||function sb(a){return a.getEditorState().read((()=>{let b=v();return null!==b?b.clone():null}))}(a);var f=new Map,g=a.getRootElement(),h=a._editorState,k=a._blockCursorElement;let m=!1,n="";for(var p=0;p<b.length;p++){var l=b[p],q=l.type,u=l.target,x=ub(u,h);if(!(null===x&&u!==g||z(x)))if("characterData"===q){if(l=d&&B(x))a:{q=u;var y=x;if(C(l=e)){var A=l.anchor.getNode();if(A.is(y)&&l.format!==A.getFormat()){l=!1;break a}}l=3===q.nodeType&&y.isAttached()}l&&(q=l=null,null!==(y=vb(a._window))&&y.anchorNode===u&&(l=y.anchorOffset,q=y.focusOffset),null!==(u=u.nodeValue)&&wb(x,u,l,q,!1))}else if("childList"===q){for(m=!0,q=l.addedNodes,y=0;y<q.length;y++){var Z=xb(A=q[y]),ca=A.parentNode;null==ca||A===k||null!==Z||"BR"===A.nodeName&&rb(A,ca,a)||(Wa&&(Z=A.innerText||A.nodeValue)&&(n+=Z),ca.removeChild(A))}if(0<(q=(l=l.removedNodes).length)){for(y=0,A=0;A<q;A++)("BR"===(ca=l[A]).nodeName&&rb(ca,u,a)||k===ca)&&(u.appendChild(ca),y++);q!==y&&(u===g&&(x=h._nodeMap.get("root")),f.set(u,x))}}}if(0<f.size)for(let[Va,la]of f)if(D(la))for(f=la.getChildrenKeys(),g=Va.firstChild,h=0;h<f.length;h++)null!==(k=a.getElementByKey(f[h]))&&(null==g?(Va.appendChild(k),g=k):g!==k&&Va.replaceChild(k,g),g=g.nextSibling);else B(la)&&la.markDirty();if(0<(f=c.takeRecords()).length){for(g=0;g<f.length;g++)for(h=(k=f[g]).addedNodes,k=k.target,p=0;p<h.length;p++)null==(u=(x=h[p]).parentNode)||"BR"!==x.nodeName||rb(x,k,a)||u.removeChild(x);c.takeRecords()}null!==e&&(m&&(e.dirty=!0,yb(e)),Wa&&zb(a)&&e.insertRawText(n))}))}finally{ob=!1}}function Ab(a){let b=a._observer;if(null!==b){tb(a,b.takeRecords(),b)}}function Bb(a){0===pb&&Cb(a).addEventListener("textInput",qb,!0),a._observer=new MutationObserver(((b,c)=>{tb(a,b,c)}))}function Db(a,b){let c=a.__mode,d=a.__format;a=a.__style;let e=b.__mode,f=b.__format;return b=b.__style,!(null!==c&&c!==e||null!==d&&d!==f||null!==a&&a!==b)}function Eb(a,b){let c=a.mergeWithSibling(b),d=F()._normalizedNodes;return d.add(a.__key),d.add(b.__key),c}function Fb(a){if(""===a.__text&&a.isSimpleText()&&!a.isUnmergeable())a.remove();else{for(var b;null!==(b=a.getPreviousSibling())&&B(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""!==b.__text){Db(b,a)&&(a=Eb(b,a));break}b.remove()}for(var c;null!==(c=a.getNextSibling())&&B(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""!==c.__text){Db(a,c)&&Eb(a,c);break}c.remove()}}}function Gb(a){return Hb(a.anchor),Hb(a.focus),a}function Hb(a){for(;"element"===a.type;){var b=a.getNode(),c=a.offset;if(c===b.getChildrenSize()?(b=b.getChildAtIndex(c-1),c=!0):(b=b.getChildAtIndex(c),c=!1),B(b)){a.set(b.__key,c?b.getTextContentSize():0,"text");break}if(!D(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element")}}let Ib=1,Jb="function"==typeof queueMicrotask?queueMicrotask:a=>{Promise.resolve().then(a)};function Kb(a){let b=document.activeElement;if(null===b)return!1;let c=b.nodeName;return z(ub(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==b.__lexicalEditor)}function Lb(a,b,c){let d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!Kb(b)&&Mb(b)===a}catch(e){return!1}}function Mb(a){for(;null!=a;){let b=a.__lexicalEditor;if(null!=b)return b;a=Nb(a)}return null}function Ob(a){return a.isToken()||a.isSegmented()}function Vb(a){for(;null!=a;){if(3===a.nodeType)return a;a=a.firstChild}return null}function Wb(a,b,c){return a&(b=fb[b])&&(null===c||0==(c&b))?a^b:null===c||c&b?a|b:a}function Xb(a){return B(a)||Yb(a)||z(a)}function Zb(a,b){if(null!=b)a.__key=b;else{G(),99<$b&&r(14),b=F();var c=ac(),d=""+Ib++;c._nodeMap.set(d,a),D(a)?b._dirtyElements.set(d,!0):b._dirtyLeaves.add(d),b._cloneNotNeeded.add(d),b._dirtyType=1,a.__key=d}}function bc(a){var b=a.getParent();if(null!==b){let e=a.getWritable();b=b.getWritable();var c=a.getPreviousSibling();if(a=a.getNextSibling(),null===c)if(null!==a){var d=a.getWritable();b.__first=a.__key,d.__prev=null}else b.__first=null;else{if(d=c.getWritable(),null!==a){let f=a.getWritable();f.__prev=d.__key,d.__next=f.__key}else d.__next=null;e.__prev=null}null===a?null!==c?(a=c.getWritable(),b.__last=c.__key,a.__next=null):b.__last=null:(a=a.getWritable(),null!==c?((c=c.getWritable()).__next=a.__key,a.__prev=c.__key):a.__prev=null,e.__next=null),b.__size--,e.__parent=null}}function cc(a){99<$b&&r(14);var b=a.getLatest(),c=b.__parent,d=ac();let e=F(),f=d._nodeMap;if(d=e._dirtyElements,null!==c)a:for(;null!==c&&!d.has(c);){let g=f.get(c);if(void 0===g)break;d.set(c,!1),c=g.__parent}b=b.__key,e._dirtyType=1,D(a)?d.set(b,!0):e._dirtyLeaves.add(b)}function H(a){G();var b=F();let c=b._compositionKey;a!==c&&(b._compositionKey=a,null!==c&&(null!==(b=I(c))&&b.getWritable()),null!==a&&(null!==(a=I(a))&&a.getWritable()))}function dc(){return ec()?null:F()._compositionKey}function I(a,b){return void 0===(a=(b||ac())._nodeMap.get(a))?null:a}function xb(a,b){return void 0!==(a=a[`__lexicalKey_${F()._key}`])?I(a,b):null}function ub(a,b){for(;null!=a;){let c=xb(a,b);if(null!==c)return c;a=Nb(a)}return null}function fc(a){let b=Object.assign({},a._decorators);return a._pendingDecorators=b}function gc(a){return a.read((()=>hc().getTextContent()))}function hc(){return ac()._nodeMap.get("root")}function yb(a){G();let b=ac();null!==a&&(a.dirty=!0,a._cachedNodes=null),b._selection=a}function jc(a){var c,b=F();a:{for(c=a;null!=c;){let d=c[`__lexicalKey_${b._key}`];if(void 0!==d){c=d;break a}c=Nb(c)}c=null}return null===c?a===(b=b.getRootElement())?I("root"):null:I(c)}function kc(a){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a)}function lc(a){let b=[];for(;null!==a;)b.push(a),a=a._parentEditor;return b}function mc(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function nc(a,b,c){if(null!==(b=vb(b._window))){var d=b.anchorNode,{anchorOffset:e,focusOffset:f}=b;if(null!==d&&(b=3===d.nodeType?d.nodeValue:null,d=ub(d),null!==b&&B(d))){if(b===bb&&c){b=c,f=e=c.length}null!==b&&wb(d,b,e,f,a)}}}function wb(a,b,c,d,e){let f=a;if(f.isAttached()&&(e||!f.isDirty())){let m=f.isComposing(),n=b;if((m||e)&&b[b.length-1]===bb&&(n=b.slice(0,-1)),b=f.getTextContent(),e||n!==b)if(""===n)if(H(null),Ya||Za||ab)f.remove();else{let p=F();setTimeout((()=>{p.update((()=>{f.isAttached()&&f.remove()}))}),20)}else{e=f.getParent(),b=oc();var g=f.getTextContentSize(),h=dc(),k=f.getKey();f.isToken()||null!==h&&k===h&&!m||C(b)&&(null!==e&&!e.canInsertTextBefore()&&0===b.anchor.offset||b.anchor.key===a.__key&&0===b.anchor.offset&&!f.canInsertTextBefore()||b.focus.key===a.__key&&b.focus.offset===g&&!f.canInsertTextAfter())?f.markDirty():(C(a=v())&&null!==c&&null!==d&&(a.setTextNodeRange(f,c,f,d),f.isSegmented()&&(c=J(c=f.getTextContent()),f.replace(c),f=c)),f.setTextContent(n))}}}function qc(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});let c=a.__lexicalClassNameCache,d=c[b];return void 0!==d?d:"string"==typeof(a=a[b])?(a=a.split(" "),c[b]=a):a}function rc(a,b,c,d,e){0!==c.size&&(c=d.__type,d=d.__key,void 0===(b=b.get(c))&&r(33,c),c=b.klass,void 0===(b=a.get(c))&&(b=new Map,a.set(c,b)),c="destroyed"===(a=b.get(d))&&"created"===e,(void 0===a||c)&&b.set(d,c?"updated":e))}function sc(a,b,c){let d=a.getParent(),e=c;return null!==d&&(b&&0===c?(e=a.getIndexWithinParent(),a=d):b||c!==a.getChildrenSize()||(e=a.getIndexWithinParent()+1,a=d)),a.getChildAtIndex(b?e-1:e)}function tc(a,b){var c=a.offset;return"element"===a.type?sc(a=a.getNode(),b,c):(a=a.getNode(),b&&0===c||!b&&c===a.getTextContentSize()?null===(c=b?a.getPreviousSibling():a.getNextSibling())?sc(a.getParentOrThrow(),b,a.getIndexWithinParent()+(b?0:1)):c:null)}function zb(a){return"insertFromPaste"===(a=(a=Cb(a).event)&&a.inputType)||"insertFromPasteAsQuotation"===a}function uc(a){return!K(a)&&!a.isLastChild()&&!a.isInline()}function vc(a,b){return void 0===(a=a._keyToDOMMap.get(b))&&r(75,b),a}function Nb(a){return null!==(a=a.assignedSlot||a.parentElement)&&11===a.nodeType?a.host:a}function wc(a,b){for(a=a.getParent();null!==a;){if(a.is(b))return!0;a=a.getParent()}return!1}function Cb(a){return null===(a=a._window)&&r(78),a}function xc(a){for(a=a.getParentOrThrow();null!==a&&!yc(a);)a=a.getParentOrThrow();return a}function yc(a){return K(a)||D(a)&&a.isShadowRoot()}function zc(a){return Zb(a=a.constructor.clone(a),null),a}function Ac(a){var b=F();let c=a.constructor.getType();return void 0===(b=b._nodes.get(c))&&r(97),null!==(b=b.replace)?((b=b(a))instanceof a.constructor||r(98),b):a}function Bc(a,b){!K(a=a.getParent())||D(b)||z(b)||r(99)}function Cc(a){return(z(a)||D(a)&&!a.canBeEmpty())&&!a.isInline()}function Dc(a,b,c){c.style.removeProperty("caret-color"),b._blockCursorElement=null,null!==(b=a.parentElement)&&b.removeChild(a)}function vb(a){return Ta?(a||window).getSelection():null}function Ec(a,b){let c=a.getChildAtIndex(b);null==c&&(c=a),yc(a)&&r(102);let d=g=>{const h=g.getParentOrThrow(),k=yc(h),m=g!==c||k?zc(g):g;if(k)return g.insertAfter(m),[g,m,m];const[n,p,l]=d(h);return g=g.getNextSiblings(),l.append(m,...g),[n,p,m]},[e,f]=d(c);return[e,f]}function Fc(a,b){for(;a!==hc()&&null!=a;){if(b(a))return a;a=a.getParent()}return null}function Gc(a){let b=[],c=[a];for(;0<c.length;){let d=c.pop();void 0===d&&r(112),D(d)&&c.unshift(...d.getChildren()),d!==a&&b.push(d)}return b}function Hc(a){return 1===a.nodeType}function Ic(a,b,c,d,e,f){for(a=a.getFirstChild();null!==a;){let g=a.__key;a.__parent===b&&(D(a)&&Ic(a,g,c,d,e,f),c.has(g)||f.delete(g),e.push(g)),a=a.getNextSibling()}}let Lc,N,Mc,Pc,Rc,Sc,Tc,Uc,Vc,ed,L="",M="",Kc="",Nc=!1,Oc=!1,Qc=null;function fd(a,b){let c=Tc.get(a);if(null!==b){let d=gd(a);d.parentNode===b&&b.removeChild(d)}Uc.has(a)||N._keyToDOMMap.delete(a),D(c)&&id(a=hd(c,Tc),0,a.length-1,null),void 0!==c&&rc(ed,Mc,Pc,c,"destroyed")}function id(a,b,c,d){for(;b<=c;++b){let e=a[b];void 0!==e&&fd(e,d)}}function jd(a,b){a.setProperty("text-align",b)}function kd(a,b){var c=Lc.theme.indent;if("string"==typeof c){let d=a.classList.contains(c);0<b&&!d?a.classList.add(c):1>b&&d&&a.classList.remove(c)}c=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px",a.style.setProperty("padding-inline-start",0===b?"":`calc(${b} * ${c})`)}function ld(a,b){a=a.style,0===b?jd(a,""):1===b?jd(a,"left"):2===b?jd(a,"center"):3===b?jd(a,"right"):4===b?jd(a,"justify"):5===b?jd(a,"start"):6===b&&jd(a,"end")}function md(a,b,c){let d=Uc.get(a);void 0===d&&r(60);let e=d.createDOM(Lc,N);var f=N._keyToDOMMap;if(e["__lexicalKey_"+N._key]=a,f.set(a,e),B(d)?e.setAttribute("data-lexical-text","true"):z(d)&&e.setAttribute("data-lexical-decorator","true"),D(d)){if(a=d.__indent,f=d.__size,0!==a&&kd(e,a),0!==f){--f,a=hd(d,Uc);var g=M;M="",nd(a,d,0,f,e,null),od(d,e),M=g}0!==(a=d.__format)&&ld(e,a),d.isInline()||pd(null,d,e),uc(d)&&(L+="\n\n",Kc+="\n\n")}else f=d.getTextContent(),z(d)?(null!==(g=d.decorate(N,Lc))&&qd(a,g),e.contentEditable="false"):B(d)&&(d.isDirectionless()||(M+=f)),L+=f,Kc+=f;return null!==b&&(null!=c?b.insertBefore(e,c):null!=(c=b.__lexicalLineBreak)?b.insertBefore(e,c):b.appendChild(e)),rc(ed,Mc,Pc,d,"created"),e}function nd(a,b,c,d,e,f){let g=L;for(L="";c<=d;++c)md(a[c],e,f);uc(b)&&(L+="\n\n"),e.__lexicalTextContent=L,L=g+L}function rd(a,b){return Yb(a=b.get(a))||z(a)&&a.isInline()}function pd(a,b,c){a=null!==a&&(0===a.__size||rd(a.__last,Tc)),b=0===b.__size||rd(b.__last,Uc),a?b||(null!=(b=c.__lexicalLineBreak)&&c.removeChild(b),c.__lexicalLineBreak=null):b&&(b=document.createElement("br"),c.__lexicalLineBreak=b,c.appendChild(b))}function od(a,b){var c=b.__lexicalDir;if(b.__lexicalDirTextContent!==M||c!==Qc){let f=""===M;if(f)var d=Qc;else d=M,d=db.test(d)?"rtl":eb.test(d)?"ltr":null;if(d!==c){let g=b.classList,h=Lc.theme;var e=null!==c?h[c]:void 0;let k=null!==d?h[d]:void 0;void 0!==e&&("string"==typeof e&&(e=e.split(" "),e=h[c]=e),g.remove(...e)),null===d||f&&"ltr"===d?b.removeAttribute("dir"):(void 0!==k&&("string"==typeof k&&(c=k.split(" "),k=h[d]=c),void 0!==k&&g.add(...k)),b.dir=d),Oc||(a.getWritable().__dir=d)}Qc=d,b.__lexicalDirTextContent=M,b.__lexicalDir=d}}function hd(a,b){let c=[];for(a=a.__first;null!==a;){let d=b.get(a);void 0===d&&r(101),c.push(a),a=d.__next}return c}function sd(a,b){var c=Tc.get(a),d=Uc.get(a);void 0!==c&&void 0!==d||r(61);var e=Nc||Sc.has(a)||Rc.has(a);let f=vc(N,a);if(c===d&&!e)return D(c)?(void 0!==(d=f.__lexicalTextContent)&&(L+=d,Kc+=d),void 0!==(d=f.__lexicalDirTextContent)&&(M+=d)):(d=c.getTextContent(),B(c)&&!c.isDirectionless()&&(M+=d),Kc+=d,L+=d),f;if(c!==d&&e&&rc(ed,Mc,Pc,d,"updated"),d.updateDOM(c,f,Lc))return d=md(a,null,null),null===b&&r(62),b.replaceChild(d,f),fd(a,null),d;if(D(c)&&D(d)){if((a=d.__indent)!==c.__indent&&kd(f,a),(a=d.__format)!==c.__format&&ld(f,a),e){a=d,e=M,M="",b=L;var g=c.__size,h=a.__size;if(L="",1===g&&1===h){var k=c.__first,m=a.__first;if(k===m)sd(k,f);else{var n=gd(k);m=md(m,null,null),f.replaceChild(m,n),fd(k,null)}}else{m=hd(c,Tc);var p=hd(a,Uc);if(0===g)0!==h&&nd(p,a,0,h-1,f,null);else if(0===h)0!==g&&(id(m,0,g-1,(k=null==f.__lexicalLineBreak)?null:f),k&&(f.textContent=""));else{var l=m;m=p,p=g-1,g=h-1;let u=f.firstChild,x=0;for(h=0;x<=p&&h<=g;){var q=l[x];let y=m[h];if(q===y)u=td(sd(y,f)),x++,h++;else{void 0===k&&(k=new Set(l)),void 0===n&&(n=new Set(m));let A=n.has(q),Z=k.has(y);A?(Z?((q=vc(N,y))===u?u=td(sd(y,f)):(null!=u?f.insertBefore(q,u):f.appendChild(q),sd(y,f)),x++):md(y,f,u),h++):(u=td(gd(q)),fd(q,f),x++)}}n=h>g,(k=x>p)&&!n?nd(m,a,h,g,f,k=void 0===(k=m[g+1])?null:N.getElementByKey(k)):n&&!k&&id(l,x,p,f)}}uc(a)&&(L+="\n\n"),f.__lexicalTextContent=L,L=b+L,od(a,f),M=e,K(d)||d.isInline()||pd(c,d,f)}uc(d)&&(L+="\n\n",Kc+="\n\n")}else c=d.getTextContent(),z(d)?null!==(e=d.decorate(N,Lc))&&qd(a,e):B(d)&&!d.isDirectionless()&&(M+=c),L+=c,Kc+=c;return!Oc&&K(d)&&d.__cachedText!==Kc&&((d=d.getWritable()).__cachedText=Kc),f}function qd(a,b){let c=N._pendingDecorators,d=N._decorators;if(null===c){if(d[a]===b)return;c=fc(N)}c[a]=b}function td(a){return null!==(a=a.nextSibling)&&a===N._blockCursorElement&&(a=a.nextSibling),a}function gd(a){let b=Vc.get(a);return void 0===b&&r(75,a),b}let ud=Object.freeze({}),Bd=[["keydown",function vd(a,b){if(Dd=a.timeStamp,Ed=a.keyCode,!b.isComposing()){var{keyCode:c,shiftKey:d,ctrlKey:e,metaKey:f,altKey:g}=a;if(!O(b,ta,a)){if(39!==c||e||f||g)if(39!==c||g||d||!e&&!f)if(37!==c||e||f||g)if(37!==c||g||d||!e&&!f)if(38!==c||e||f)if(40!==c||e||f)if(13===c&&d)Kd=!0,O(b,Ba,a);else if(32===c)O(b,Ca,a);else if(t&&e&&79===c)a.preventDefault(),Kd=!0,O(b,ea,!0);else if(13!==c||d){var h=t?!g&&!f&&(8===c||72===c&&e):!(e||g||f)&&8===c;h?8===c?O(b,Fa,a):(a.preventDefault(),O(b,da,!0)):27===c?O(b,Ga,a):(h=t?!(d||g||f)&&(46===c||68===c&&e):!(e||g||f)&&46===c)?46===c?O(b,Ha,a):(a.preventDefault(),O(b,da,!1)):8===c&&(t?g:e)?(a.preventDefault(),O(b,na,!0)):46===c&&(t?g:e)?(a.preventDefault(),O(b,na,!1)):t&&f&&8===c?(a.preventDefault(),O(b,pa,!0)):t&&f&&46===c?(a.preventDefault(),O(b,pa,!1)):66===c&&!g&&(t?f:e)?(a.preventDefault(),O(b,qa,"bold")):85===c&&!g&&(t?f:e)?(a.preventDefault(),O(b,qa,"underline")):73===c&&!g&&(t?f:e)?(a.preventDefault(),O(b,qa,"italic")):9!==c||g||e||f?90===c&&!d&&(t?f:e)?(a.preventDefault(),O(b,ra,void 0)):(h=t?90===c&&f&&d:89===c&&e||90===c&&e&&d)?(a.preventDefault(),O(b,sa,void 0)):Ud(b._editorState._selection)?(h=!d&&(67===c&&(t?f:e)))?(a.preventDefault(),O(b,Na,a)):(h=!d&&(88===c&&(t?f:e)))?(a.preventDefault(),O(b,Oa,a)):65===c&&(t?f:e)&&(a.preventDefault(),O(b,Pa,a)):!Wa&&65===c&&(t?f:e)&&(a.preventDefault(),O(b,Pa,a)):O(b,Ia,a)}else Kd=!1,O(b,Ba,a);else O(b,Aa,a);else O(b,za,a);else O(b,ya,a);else O(b,xa,a);else O(b,va,a);else O(b,ua,a);(e||d||g||f)&&O(b,Sa,a)}}}],["pointerdown",function wd(a,b){let c=a.target;a=a.pointerType,c instanceof Node&&"touch"!==a&&w(b,(()=>{z(ub(c))||(Jd=!0)}))}],["compositionstart",function xd(a,b){w(b,(()=>{let c=v();if(C(c)&&!b.isComposing()){let d=c.anchor,e=c.anchor.getNode();H(d.key),(a.timeStamp<Dd+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||e.getStyle()!==c.style)&&O(b,ha,cb)}}))}],["compositionend",function yd(a,b){Wa?Ld=!0:w(b,(()=>{Td(b,a.data)}))}],["input",function zd(a,b){a.stopPropagation(),w(b,(()=>{var c=v(),d=a.data,e=Rd(a);if(null!=d&&C(c)&&Nd(c,e,d,a.timeStamp,!1)){Ld&&(Td(b,d),Ld=!1);var f=c.anchor,g=f.getNode();if(null===(e=vb(b._window)))return;let h=f.offset;(f=Xa&&!c.isCollapsed()&&B(g)&&null!==e.anchorNode)&&(f=(g=g.getTextContent().slice(0,h)+d+g.getTextContent().slice(h+c.focus.offset))===(3===(e=e.anchorNode).nodeType?e.nodeValue:null)),f||O(b,ha,d),d=d.length,Wa&&1<d&&"insertCompositionText"===a.inputType&&!b.isComposing()&&(c.anchor.offset-=d),Ya||Za||ab||!b.isComposing()||(Dd=0,H(null))}else nc(!1,b,null!==d?d:void 0),Ld&&(Td(b,d||void 0),Ld=!1);G(),Ab(c=F())})),Gd=null}],["click",function Ad(a,b){w(b,(()=>{let c=v();var d=vb(b._window);let e=oc();if(d)if(C(c)){let g=c.anchor;var f=g.getNode();"element"===g.type&&0===g.offset&&c.isCollapsed()&&!K(f)&&1===hc().getChildrenSize()&&f.getTopLevelElementOrThrow().isEmpty()&&null!==e&&c.is(e)?(d.removeAllRanges(),c.dirty=!0):3!==a.detail||c.isCollapsed()||f!==(d=c.focus.getNode())&&(D(f)?f.select(0):f.getParentOrThrow().select(0))}else"touch"===a.pointerType&&(null!==(f=d.anchorNode)&&(1===(f=f.nodeType)||3===f))&&yb(d=Qd(e,d,b));O(b,ba,a)}))}],["cut",ud],["copy",ud],["dragstart",ud],["dragover",ud],["dragend",ud],["paste",ud],["focus",ud],["blur",ud],["drop",ud]];Xa&&Bd.push(["beforeinput",(a,b)=>function Cd(a,b){let c=a.inputType,d=Rd(a);"deleteCompositionText"===c||Wa&&zb(b)||"insertCompositionText"!==c&&w(b,(()=>{let e=v();if("deleteContentBackward"===c){if(null===e){var f=oc();if(!C(f))return;yb(f.clone())}if(C(e))return void(229===Ed&&a.timeStamp<Dd+30&&b.isComposing()&&e.anchor.key===e.focus.key?(H(null),Dd=0,setTimeout((()=>{w(b,(()=>{H(null)}))}),30),C(e)&&(f=e.anchor.getNode(),f.markDirty(),e.format=f.getFormat(),e.style=f.getStyle())):(a.preventDefault(),O(b,da,!0)))}if(C(e)){f=a.data,null!==Gd&&nc(!1,b,Gd),e.dirty&&null===Gd||!e.isCollapsed()||K(e.anchor.getNode())||null===d||e.applyDOMRange(d),Gd=null;var g=e.focus,h=e.anchor.getNode();if(g=g.getNode(),"insertText"===c||"insertTranspose"===c)"\n"===f?(a.preventDefault(),O(b,ea,!1)):"\n\n"===f?(a.preventDefault(),O(b,fa,void 0)):null==f&&a.dataTransfer?(f=a.dataTransfer.getData("text/plain"),a.preventDefault(),e.insertRawText(f)):null!=f&&Nd(e,d,f,a.timeStamp,!0)?(a.preventDefault(),O(b,ha,f)):Gd=f,Fd=a.timeStamp;else switch(a.preventDefault(),c){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":O(b,ha,a);break;case"insertFromComposition":H(null),O(b,ha,a);break;case"insertLineBreak":H(null),O(b,ea,!1);break;case"insertParagraph":H(null),Kd&&!Za?(Kd=!1,O(b,ea,!1)):O(b,fa,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":O(b,ka,a);break;case"deleteByComposition":(function Sd(a,b){return a!==b||D(a)||D(b)||!a.isToken()||!b.isToken()})(h,g)&&O(b,ma,a);break;case"deleteByDrag":case"deleteByCut":O(b,ma,a);break;case"deleteContent":O(b,da,!1);break;case"deleteWordBackward":O(b,na,!0);break;case"deleteWordForward":O(b,na,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":O(b,pa,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":O(b,pa,!1);break;case"formatStrikeThrough":O(b,qa,"strikethrough");break;case"formatBold":O(b,qa,"bold");break;case"formatItalic":O(b,qa,"italic");break;case"formatUnderline":O(b,qa,"underline");break;case"historyUndo":O(b,ra,void 0);break;case"historyRedo":O(b,sa,void 0)}}}))}(a,b)]);let Dd=0,Ed=0,Fd=0,Gd=null,Hd=0,Id=!1,Jd=!1,Kd=!1,Ld=!1,Md=[0,"",0,"root",0];function Nd(a,b,c,d,e){let f=a.anchor,g=a.focus,h=f.getNode();var k=F();let m=vb(k._window),n=null!==m?m.anchorNode:null,p=f.key;k=k.getElementByKey(p);let l=c.length;return p!==g.key||!B(h)||(!e&&(!Xa||Fd<d+50)||h.isDirty()&&2>l||kc(c))&&f.offset!==g.offset&&!h.isComposing()||Ob(h)||h.isDirty()&&1<l||(e||!Xa)&&null!==k&&!h.isComposing()&&n!==Vb(k)||null!==m&&null!==b&&(!b.collapsed||b.startContainer!==m.anchorNode||b.startOffset!==m.anchorOffset)||h.getFormat()!==a.format||h.getStyle()!==a.style||function pc(a,b){if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;a=a.anchor.offset;let c=b.getParentOrThrow(),d=b.isToken();return 0===a?((a=!b.canInsertTextBefore()||!c.canInsertTextBefore()||d)||(a=(B(b=b.getPreviousSibling())||D(b)&&b.isInline())&&!b.canInsertTextAfter()),a):a===b.getTextContentSize()&&(!b.canInsertTextAfter()||!c.canInsertTextAfter()||d)}(a,h)}function Od(a,b){return null!==a&&null!==a.nodeValue&&3===a.nodeType&&0!==b&&b!==a.nodeValue.length}function Pd(a,b,c){let{anchorNode:d,anchorOffset:e,focusNode:f,focusOffset:g}=a;Id&&(Id=!1,Od(d,e)&&Od(f,g))||w(b,(()=>{if(c){if(Lb(b,d,f)){var h=v();if(C(h)){var k=h.anchor,m=k.getNode();if(h.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(h.dirty=!0);var n=Cb(b).event;n=n?n.timeStamp:performance.now();let[p,l,q,u,x]=Md;n<x+200&&k.offset===q&&k.key===u?(h.format=p,h.style=l):"text"===k.type?(h.format=m.getFormat(),h.style=m.getStyle()):"element"===k.type&&(h.format=0,h.style="")}else{k=255,m=!1;let p=(n=h.getNodes()).length;for(let l=0;l<p;l++){let q=n[l];if(B(q)&&(m=!0,0===(k&=q.getFormat())))break}h.format=m?k:0}}O(b,aa,void 0)}}else yb(null)}))}function Rd(a){return a.getTargetRanges?0===(a=a.getTargetRanges()).length?null:a[0]:null}function Td(a,b){var c=a._compositionKey;if(H(null),null!==c&&null!=b){if(""===b)return b=I(c),void(null!==(a=Vb(a.getElementByKey(c)))&&null!==a.nodeValue&&B(b)&&wb(b,a.nodeValue,null,null,!0));if("\n"===b[b.length-1]&&C(c=v()))return b=c.focus,c.anchor.set(b.key,b.offset,b.type),void O(a,Ba,null)}nc(!0,a,b)}function Vd(a){let b=a.__lexicalEventHandles;return void 0===b&&(b=[],a.__lexicalEventHandles=b),b}let Wd=new Map;function Xd(a){let b=vb(null==(a=a.target)?null:9===a.nodeType?a.defaultView:a.ownerDocument.defaultView);if(null!==b){var c=Mb(b.anchorNode);if(null!==c){Jd&&(Jd=!1,w(c,(()=>{var g=oc(),h=b.anchorNode;null!==h&&(1===(h=h.nodeType)||3===h)&&yb(g=Qd(g,b,c))})));var d=(a=(a=lc(c))[a.length-1])._key,e=Wd.get(d),f=e||a;f!==c&&Pd(b,f,!1),Pd(b,c,!0),c!==a?Wd.set(d,c):e&&Wd.delete(d)}}}function Zd(a,b,c){G();var d=a.__key;let e=a.getParent();if(null!==e){var f=v();if(C(f)&&D(a)){var{anchor:g,focus:h}=f,k=g.getNode(),m=h.getNode();wc(k,a)&&g.set(a.__key,0,"element"),wc(m,a)&&h.set(a.__key,0,"element")}if(m=!1,C(k=f)&&b){f=k.anchor;let n=k.focus;f.key===d&&($d(f,a,e,a.getPreviousSibling(),a.getNextSibling()),m=!0),n.key===d&&($d(n,a,e,a.getPreviousSibling(),a.getNextSibling()),m=!0)}else Ud(k)&&b&&a.isSelected()&&a.selectPrevious();C(k)&&b&&!m?(d=a.getIndexWithinParent(),bc(a),ae(k,e,d,-1)):bc(a),c||yc(e)||e.canBeEmpty()||!e.isEmpty()||Zd(e,b),b&&K(e)&&e.isEmpty()&&e.selectEnd()}}class be{static getType(){r(64,this.name)}static clone(){r(65,this.name)}constructor(a){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,Zb(this,a)}getType(){return this.__type}isAttached(){for(var a=this.__key;null!==a;){if("root"===a)return!0;if(null===(a=I(a)))break;a=a.__parent}return!1}isSelected(a){if(null==(a=a||v()))return!1;let b=a.getNodes().some((c=>c.__key===this.__key));return(B(this)||!C(a)||"element"!==a.anchor.type||"element"!==a.focus.type||a.anchor.key!==a.focus.key||a.anchor.offset!==a.focus.offset)&&b}getKey(){return this.__key}getIndexWithinParent(){var a=this.getParent();if(null===a)return-1;a=a.getFirstChild();let b=0;for(;null!==a;){if(this.is(a))return b;b++,a=a.getNextSibling()}return-1}getParent(){let a=this.getLatest().__parent;return null===a?null:I(a)}getParentOrThrow(){let a=this.getParent();return null===a&&r(66,this.__key),a}getTopLevelElement(){let a=this;for(;null!==a;){let b=a.getParent();if(yc(b))return a;a=b}return null}getTopLevelElementOrThrow(){let a=this.getTopLevelElement();return null===a&&r(67,this.__key),a}getParents(){let a=[],b=this.getParent();for(;null!==b;)a.push(b),b=b.getParent();return a}getParentKeys(){let a=[],b=this.getParent();for(;null!==b;)a.push(b.__key),b=b.getParent();return a}getPreviousSibling(){let a=this.getLatest().__prev;return null===a?null:I(a)}getPreviousSiblings(){let a=[];var b=this.getParent();if(null===b)return a;for(b=b.getFirstChild();null!==b&&!b.is(this);)a.push(b),b=b.getNextSibling();return a}getNextSibling(){let a=this.getLatest().__next;return null===a?null:I(a)}getNextSiblings(){let a=[],b=this.getNextSibling();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getCommonAncestor(a){let b=this.getParents();var c=a.getParents();D(this)&&b.unshift(this),D(a)&&c.unshift(a),a=b.length;var d=c.length;if(0===a||0===d||b[a-1]!==c[d-1])return null;for(c=new Set(c),d=0;d<a;d++){let e=b[d];if(c.has(e))return e}return null}is(a){return null!=a&&this.__key===a.__key}isBefore(a){if(this===a)return!1;if(a.isParentOf(this))return!0;if(this.isParentOf(a))return!1;var b=this.getCommonAncestor(a);let c=this;for(;;){var d=c.getParentOrThrow();if(d===b){d=c.getIndexWithinParent();break}c=d}for(c=a;;){if((a=c.getParentOrThrow())===b){b=c.getIndexWithinParent();break}c=a}return d<b}isParentOf(a){let b=this.__key;if(b===a.__key)return!1;for(;null!==a;){if(a.__key===b)return!0;a=a.getParent()}return!1}getNodesBetween(a){let b=this.isBefore(a),c=[],d=new Set;for(var e=this;;){var f=e.__key;if(d.has(f)||(d.add(f),c.push(e)),e===a)break;if(null!==(f=D(e)?b?e.getFirstChild():e.getLastChild():null))e=f;else if(null!==(f=b?e.getNextSibling():e.getPreviousSibling()))e=f;else{if(e=e.getParentOrThrow(),d.has(e.__key)||c.push(e),e===a)break;f=e;do{null===f&&r(68),e=b?f.getNextSibling():f.getPreviousSibling(),null!==(f=f.getParent())&&(null!==e||d.has(f.__key)||c.push(f))}while(null===e)}}return b||c.reverse(),c}isDirty(){let a=F()._dirtyLeaves;return null!==a&&a.has(this.__key)}getLatest(){let a=I(this.__key);return null===a&&r(113),a}getWritable(){G();var a=ac(),b=F();a=a._nodeMap;let c=this.__key,d=this.getLatest(),e=d.__parent;b=b._cloneNotNeeded;var f=v();return null!==f&&(f._cachedNodes=null),b.has(c)?(cc(d),d):((f=d.constructor.clone(d)).__parent=e,f.__next=d.__next,f.__prev=d.__prev,D(d)&&D(f)?(f.__first=d.__first,f.__last=d.__last,f.__size=d.__size,f.__indent=d.__indent,f.__format=d.__format,f.__dir=d.__dir):B(d)&&B(f)&&(f.__format=d.__format,f.__style=d.__style,f.__mode=d.__mode,f.__detail=d.__detail),b.add(c),f.__key=c,cc(f),a.set(c,f),f)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){r(70)}updateDOM(){r(71)}exportDOM(a){return{element:this.createDOM(a._config,a)}}exportJSON(){r(72)}static importJSON(){r(18,this.name)}static transform(){return null}remove(a){Zd(this,!0,a)}replace(a,b){G();var c=v();null!==c&&(c=c.clone()),Bc(this,a);let d=this.getLatest(),e=this.__key,f=a.__key,g=a.getWritable(),h=(a=this.getParentOrThrow().getWritable()).__size;bc(g);let k=d.getPreviousSibling(),m=d.getNextSibling(),n=d.__prev,p=d.__next,l=d.__parent;return Zd(d,!1,!0),null===k?a.__first=f:k.getWritable().__next=f,g.__prev=n,null===m?a.__last=f:m.getWritable().__prev=f,g.__next=p,g.__parent=l,a.__size=h,b&&this.getChildren().forEach((q=>{g.append(q)})),C(c)&&(yb(c),b=c.anchor,c=c.focus,b.key===e&&ce(b,g),c.key===e&&ce(c,g)),dc()===e&&H(f),g}insertAfter(a,b=!0){G(),Bc(this,a);var c=this.getWritable();let d=a.getWritable();var e=d.getParent();let f=v();var g=!1,h=!1;if(null!==e){var k=a.getIndexWithinParent();bc(d),C(f)&&(h=e.__key,g=f.anchor,e=f.focus,g="element"===g.type&&g.key===h&&g.offset===k+1,h="element"===e.type&&e.key===h&&e.offset===k+1)}e=this.getNextSibling(),k=this.getParentOrThrow().getWritable();let m=d.__key,n=c.__next;return null===e?k.__last=m:e.getWritable().__prev=m,k.__size++,c.__next=m,d.__next=n,d.__prev=c.__key,d.__parent=c.__parent,b&&C(f)&&(ae(f,k,(b=this.getIndexWithinParent())+1),c=k.__key,g&&f.anchor.set(c,b+2,"element"),h&&f.focus.set(c,b+2,"element")),a}insertBefore(a,b=!0){G(),Bc(this,a);var c=this.getWritable();let d=a.getWritable(),e=d.__key;bc(d);let f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,k=this.getIndexWithinParent();return null===f?g.__first=e:f.getWritable().__next=e,g.__size++,c.__prev=e,d.__prev=h,d.__next=c.__key,d.__parent=c.__parent,c=v(),b&&C(c)&&ae(c,b=this.getParentOrThrow(),k),a}isParentRequired(){return!1}createParentElementNode(){return de()}selectPrevious(a,b){G();let c=this.getPreviousSibling(),d=this.getParentOrThrow();return null===c?d.select(0,0):D(c)?c.select():B(c)?c.select(a,b):(a=c.getIndexWithinParent()+1,d.select(a,a))}selectNext(a,b){G();let c=this.getNextSibling(),d=this.getParentOrThrow();return null===c?d.select():D(c)?c.select(0,0):B(c)?c.select(a,b):(a=c.getIndexWithinParent(),d.select(a,a))}markDirty(){this.getWritable()}}class ee extends be{static getType(){return"linebreak"}static clone(a){return new ee(a.__key)}constructor(a){super(a)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:a=>{let c,d,b=a.parentElement;return null!==b&&((c=b.firstChild)===a||c.nextSibling===a&&3===c.nodeType&&null!==(c.textContent||"").match(/^( |\t|\r?\n)+$/))&&((d=b.lastChild)===a||d.previousSibling===a&&3===d.nodeType&&null!==(d.textContent||"").match(/^( |\t|\r?\n)+$/))?null:{conversion:fe,priority:0}}}}static importJSON(){return ge()}exportJSON(){return{type:"linebreak",version:1}}}function fe(){return{node:ge()}}function ge(){return Ac(new ee)}function Yb(a){return a instanceof ee}function he(a,b){return 16&b?"code":128&b?"mark":32&b?"sub":64&b?"sup":null}function ie(a,b){return 1&b?"strong":2&b?"em":"span"}function je(a,b,c,d,e){a=d.classList,void 0!==(d=qc(e,"base"))&&a.add(...d);let f=!1,g=8&b&&4&b;var h=8&c&&4&c;void 0!==(d=qc(e,"underlineStrikethrough"))&&(h?(f=!0,g||a.add(...d)):g&&a.remove(...d));for(let k in fb)h=fb[k],void 0!==(d=qc(e,k))&&(c&h&&(!f||"underline"!==k&&"strikethrough"!==k)?(0==(b&h)||g&&"underline"===k||"strikethrough"===k)&&a.add(...d):b&h&&a.remove(...d))}function ke(a,b,c){let d=b.firstChild;if(a+=(c=c.isComposing())?bb:"",null==d)b.textContent=a;else if((b=d.nodeValue)!==a)if(c||Wa){c=b.length;let e=a.length,f=0,g=0;for(;f<c&&f<e&&b[f]===a[f];)f++;for(;g+f<c&&g+f<e&&b[c-g-1]===a[e-g-1];)g++;a=[f,c-f-g,a.slice(f,e-g)];let[h,k,m]=a;0!==k&&d.deleteData(h,k),d.insertData(h,m)}else d.nodeValue=a}function le(a,b){return(b=document.createElement(b)).appendChild(a),b}class me extends be{static getType(){return"text"}static clone(a){return new me(a.__text,a.__key)}constructor(a,b){super(b),this.__text=a,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let a=this.getLatest();return kb[a.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===dc()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return 0!=(1&this.getLatest().__detail)}isUnmergeable(){return 0!=(2&this.getLatest().__detail)}hasFormat(a){return a=fb[a],0!=(this.getFormat()&a)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(a,b){return Wb(this.getLatest().__format,a,b)}createDOM(a){var b=this.__format,c=he(0,b);let d=ie(0,b),e=document.createElement(null===c?d:c),f=e;return this.hasFormat("code")&&e.setAttribute("spellcheck","false"),null!==c&&(f=document.createElement(d),e.appendChild(f)),c=f,ke(this.__text,c,this),void 0!==(a=a.theme.text)&&je(d,0,b,c,a),""!==(b=this.__style)&&(e.style.cssText=b),e}updateDOM(a,b,c){let d=this.__text;var e=a.__format,f=this.__format,g=he(0,e);let h=he(0,f);var k=ie(0,e);let m=ie(0,f);return(null===g?k:g)!==(null===h?m:h)||(g===h&&k!==m?(null==(e=b.firstChild)&&r(48),ke(d,a=g=document.createElement(m),this),void 0!==(c=c.theme.text)&&je(m,0,f,a,c),b.replaceChild(g,e),!1):(k=b,null!==h&&null!==g&&(null==(k=b.firstChild)&&r(49)),ke(d,k,this),void 0!==(c=c.theme.text)&&e!==f&&je(m,e,f,k,c),f=this.__style,a.__style!==f&&(b.style.cssText=f),!1))}static importDOM(){return{"#text":()=>({conversion:ne,priority:0}),b:()=>({conversion:oe,priority:0}),code:()=>({conversion:pe,priority:0}),em:()=>({conversion:pe,priority:0}),i:()=>({conversion:pe,priority:0}),s:()=>({conversion:pe,priority:0}),span:()=>({conversion:qe,priority:0}),strong:()=>({conversion:pe,priority:0}),sub:()=>({conversion:pe,priority:0}),sup:()=>({conversion:pe,priority:0}),u:()=>({conversion:pe,priority:0})}}static importJSON(a){let b=J(a.text);return b.setFormat(a.format),b.setDetail(a.detail),b.setMode(a.mode),b.setStyle(a.style),b}exportDOM(a){return({element:a}=super.exportDOM(a)),null!==a&&Hc(a)||r(132),a.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(a=le(a,"b")),this.hasFormat("italic")&&(a=le(a,"i")),this.hasFormat("strikethrough")&&(a=le(a,"s")),this.hasFormat("underline")&&(a=le(a,"u")),{element:a}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(a){let b=this.getWritable();return b.__format="string"==typeof a?fb[a]:a,b}setDetail(a){let b=this.getWritable();return b.__detail="string"==typeof a?gb[a]:a,b}setStyle(a){let b=this.getWritable();return b.__style=a,b}toggleFormat(a){return a=fb[a],this.setFormat(this.getFormat()^a)}toggleDirectionless(){let a=this.getWritable();return a.__detail^=1,a}toggleUnmergeable(){let a=this.getWritable();return a.__detail^=2,a}setMode(a){if(a=jb[a],this.__mode===a)return this;let b=this.getWritable();return b.__mode=a,b}setTextContent(a){if(this.__text===a)return this;let b=this.getWritable();return b.__text=a,b}select(a,b){G();let c=v();var d=this.getTextContent();let e=this.__key;return"string"==typeof d?(d=d.length,void 0===a&&(a=d),void 0===b&&(b=d)):b=a=0,C(c)?((d=dc())!==c.anchor.key&&d!==c.focus.key||H(e),c.setTextNodeRange(this,a,this,b),c):re(e,a,e,b,"text","text")}spliceText(a,b,c,d){let e=this.getWritable(),f=e.__text,g=c.length,h=a;0>h&&(h=g+h,0>h&&(h=0));let k=v();return d&&C(k)&&(a+=g,k.setTextNodeRange(e,a,e,a)),b=f.slice(0,h)+c+f.slice(h+b),e.__text=b,e}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...a){G();var b=this.getLatest(),c=b.getTextContent(),d=b.__key,e=dc(),f=new Set(a);a=[];for(var g=c.length,h="",k=0;k<g;k++)""!==h&&f.has(k)&&(a.push(h),h=""),h+=c[k];if(""!==h&&a.push(h),0===(f=a.length))return[];if(a[0]===c)return[b];var m=a[0];c=b.getParentOrThrow(),k=b.getFormat();let n=b.getStyle(),p=b.__detail;g=!1,b.isSegmented()?((h=J(m)).__format=k,h.__style=n,h.__detail=p,g=!0):(h=b.getWritable()).__text=m,b=v(),h=[h],m=m.length;for(let u=1;u<f;u++){var l=a[u],q=l.length;(l=J(l).getWritable()).__format=k,l.__style=n,l.__detail=p;let x=l.__key;if(q=m+q,C(b)){let y=b.anchor,A=b.focus;y.key===d&&"text"===y.type&&y.offset>m&&y.offset<=q&&(y.key=x,y.offset-=m,b.dirty=!0),A.key===d&&"text"===A.type&&A.offset>m&&A.offset<=q&&(A.key=x,A.offset-=m,b.dirty=!0)}e===d&&H(x),m=q,h.push(l)}return d=this.getPreviousSibling(),e=this.getNextSibling(),null!==d&&cc(d),null!==e&&cc(e),d=c.getWritable(),e=this.getIndexWithinParent(),g?(d.splice(e,0,h),this.remove()):d.splice(e,1,h),C(b)&&ae(b,c,e,f-1),h}mergeWithSibling(a){var b=a===this.getPreviousSibling();b||a===this.getNextSibling()||r(50);var c=this.__key;let d=a.__key,e=this.__text,f=e.length;dc()===d&&H(c);let g=v();if(C(g)){let h=g.anchor,k=g.focus;null!==h&&h.key===d&&(se(h,b,c,a,f),g.dirty=!0),null!==k&&k.key===d&&(se(k,b,c,a,f),g.dirty=!0)}return c=a.__text,this.setTextContent(b?c+e:e+c),b=this.getWritable(),a.remove(),b}isTextEntity(){return!1}}function qe(a){let b="700"===a.style.fontWeight,c="line-through"===a.style.textDecoration,d="italic"===a.style.fontStyle,e="underline"===a.style.textDecoration,f=a.style.verticalAlign;return{forChild:g=>B(g)?(b&&g.toggleFormat("bold"),c&&g.toggleFormat("strikethrough"),d&&g.toggleFormat("italic"),e&&g.toggleFormat("underline"),"sub"===f&&g.toggleFormat("subscript"),"super"===f&&g.toggleFormat("superscript"),g):g,node:null}}function oe(a){let b="normal"===a.style.fontWeight;return{forChild:c=>(B(c)&&!b&&c.toggleFormat("bold"),c),node:null}}let te=new WeakMap;function ne(a){null===a.parentElement&&r(129);for(var c,b=a.textContent||"",d=a.parentNode,e=[a];null!==d&&void 0===(c=te.get(d))&&!("PRE"===d.nodeName||1===d.nodeType&&d.style.whiteSpace.startsWith("pre"));)e.push(d),d=d.parentNode;for(c=void 0===c?d:c,d=0;d<e.length;d++)te.set(e[d],c);if(null!==c){for(a=[],e=(b=b.split(/(\r?\n|\t)/)).length,c=0;c<e;c++)"\n"===(d=b[c])||"\r\n"===d?a.push(ge()):"\t"===d?a.push(ue()):""!==d&&a.push(J(d));return{node:a}}if(""===(b=b.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===b[0]){for(e=a,c=!0;null!==e&&null!==(e=ve(e,!1));)if(0<(d=e.textContent||"").length){/[ \t\n]$/.test(d)&&(b=b.slice(1)),c=!1;break}c&&(b=b.slice(1))}if(" "===b[b.length-1]){for(e=!0;null!==a&&null!==(a=ve(a,!0));)if(0<(a.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){e=!1;break}e&&(b=b.slice(0,b.length-1))}return""===b?{node:null}:{node:J(b)}}let we=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function ve(a,b){for(;;){for(var c=void 0;null===(c=b?a.nextSibling:a.previousSibling);)if(null===(a=a.parentElement))return null;if(1===(a=c).nodeType&&(""===(c=a.style.display)&&null===a.nodeName.match(we)||""!==c&&!c.startsWith("inline")))return null;for(;null!==(c=b?a.firstChild:a.lastChild);)a=c;if(3===a.nodeType)return a;if("BR"===a.nodeName)return null}}let xe={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function pe(a){let b=xe[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:c=>(B(c)&&!c.hasFormat(b)&&c.toggleFormat(b),c),node:null}}function J(a=""){return Ac(new me(a))}function B(a){return a instanceof me}class ye extends me{static getType(){return"tab"}static clone(a){let b=new ye(a.__key);return b.__text=a.__text,b.__format=a.__format,b.__style=a.__style,b}constructor(a){super("\t",a),this.__detail=2}static importDOM(){return null}static importJSON(a){let b=ue();return b.setFormat(a.format),b.setStyle(a.style),b}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){r(126)}setDetail(){r(127)}setMode(){r(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function ue(){return Ac(new ye)}class ze{constructor(a,b,c){this._selection=null,this.key=a,this.offset=b,this.type=c}is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type}isBefore(a){let b=this.getNode(),c=a.getNode(),d=this.offset;if(a=a.offset,D(b)){var e=b.getDescendantByIndex(d);b=null!=e?e:b}return D(c)&&(e=c.getDescendantByIndex(a),c=null!=e?e:c),b===c?d<a:b.isBefore(c)}getNode(){let a=I(this.key);return null===a&&r(20),a}set(a,b,c){let d=this._selection,e=this.key;this.key=a,this.offset=b,this.type=c,ec()||(dc()===e&&H(a),null!==d&&(d._cachedNodes=null,d.dirty=!0))}}function Ae(a,b){let c=b.__key,d=a.offset,e="element";if(B(b))e="text",d>(b=b.getTextContentSize())&&(d=b);else if(!D(b)){var f=b.getNextSibling();B(f)?(c=f.__key,d=0,e="text"):(f=b.getParent())&&(c=f.__key,d=b.getIndexWithinParent()+1)}a.set(c,d,e)}function ce(a,b){if(D(b)){let c=b.getLastDescendant();D(c)||B(c)?Ae(a,c):Ae(a,b)}else Ae(a,b)}function Be(a,b,c,d){let e=a.getNode(),f=e.getChildAtIndex(a.offset),g=J(),h=K(e)?de().append(g):g;g.setFormat(c),g.setStyle(d),null===f?e.append(h):(f.insertBefore(h),"element"===b.type&&b.key===a.key&&b.offset!==a.offset&&b.set(b.key,b.offset+1,"element")),a.is(b)&&b.set(g.__key,0,"text"),a.set(g.__key,0,"text")}function Ce(a,b,c,d){a.key=b,a.offset=c,a.type=d}class De{constructor(a){this.dirty=!1,this._nodes=a,this._cachedNodes=null}is(a){if(!Ud(a))return!1;let b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every((d=>c.has(d)))}add(a){this.dirty=!0,this._nodes.add(a),this._cachedNodes=null}delete(a){this.dirty=!0,this._nodes.delete(a),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(a){return this._nodes.has(a)}clone(){return new De(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(a,b){let c=this.getNodes(),d=c.length;var e=c[d-1];if(B(e))e=e.select();else{let f=e.getIndexWithinParent()+1;e=e.getParentOrThrow().select(f,f)}for(e.insertNodes(a,b),a=0;a<d;a++)c[a].remove();return!0}getNodes(){var a=this._cachedNodes;if(null!==a)return a;var b=this._nodes;a=[];for(let c of b)null!==(b=I(c))&&a.push(b);return ec()||(this._cachedNodes=a),a}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}}function C(a){return a instanceof Ne}function Oe(a){let[b,,c]=Pe(a),d=(a=c.getChildren()).length;var e=a[0].getChildren().length;let f=Array(d);for(var g=0;g<d;g++)f[g]=Array(e);for(e=0;e<d;e++){g=a[e].getChildren();let h=0;for(let k=0;k<g.length;k++){for(;f[e][h];)h++;let m=g[k],n=m.__rowSpan||1,p=m.__colSpan||1;for(let l=0;l<n;l++)for(let q=0;q<p;q++)f[e+l][h+q]=m;if(b===m)return{colSpan:p,columnIndex:h,rowIndex:e,rowSpan:n};h+=p}}return null}class Qe{constructor(a,b,c){this.gridKey=a,this.anchor=b,this.focus=c,this.dirty=!1,this._cachedNodes=null,b._selection=this,c._selection=this}is(a){return!!Re(a)&&(this.gridKey===a.gridKey&&this.anchor.is(a.anchor)&&this.focus.is(a.focus))}set(a,b,c){this.dirty=!0,this.gridKey=a,this.anchor.key=b,this.focus.key=c,this._cachedNodes=null}clone(){return new Qe(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return Se(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(a,b){let c=this.focus.getNode();return Gb(c.select(0,c.getChildrenSize())).insertNodes(a,b)}getShape(){var a=I(this.anchor.key);if(P(a)||r(103),null===(a=Oe(a)))throw Error("getCellRect: expected to find AnchorNode");var b=I(this.focus.key);P(b)||r(104);let c=Oe(b);if(null===c)throw Error("getCellRect: expected to find focusCellNode");b=Math.min(a.columnIndex,c.columnIndex);let d=Math.max(a.columnIndex,c.columnIndex),e=Math.min(a.rowIndex,c.rowIndex);return a=Math.max(a.rowIndex,c.rowIndex),{fromX:Math.min(b,d),fromY:Math.min(e,a),toX:Math.max(b,d),toY:Math.max(e,a)}}getNodes(){function a(x){let{cell:y,startColumn:A,startRow:Z}=x;h=Math.min(h,A),k=Math.min(k,Z),m=Math.max(m,A+y.__colSpan-1),n=Math.max(n,Z+y.__rowSpan-1)}var b=this._cachedNodes;if(null!==b)return b;var c=this.anchor.getNode();b=this.focus.getNode(),c=Fc(c,P);var d=Fc(b,P);P(c)||r(103),P(d)||r(104),Te(b=c.getParent())||r(105),Ue(b=b.getParent())||r(106);let[e,f,g]=Ve(b,c,d),h=Math.min(f.startColumn,g.startColumn),k=Math.min(f.startRow,g.startRow),m=Math.max(f.startColumn+f.cell.__colSpan-1,g.startColumn+g.cell.__colSpan-1),n=Math.max(f.startRow+f.cell.__rowSpan-1,g.startRow+g.cell.__rowSpan-1);c=h,d=k;for(var p=h,l=k;h<c||k<d||m>p||n>l;){if(h<c){var q=l-d;--c;for(var u=0;u<=q;u++)a(e[d+u][c])}if(k<d)for(q=p-c,--d,u=0;u<=q;u++)a(e[d][c+u]);if(m>p)for(q=l-d,p+=1,u=0;u<=q;u++)a(e[d+u][p]);if(n>l)for(q=p-c,l+=1,u=0;u<=q;u++)a(e[l][c+u])}for(b=[b],c=null,d=k;d<=n;d++)for(p=h;p<=m;p++)({cell:l}=e[d][p]),Te(q=l.getParent())||r(107),q!==c&&b.push(q),b.push(l,...Gc(l)),c=q;return ec()||(this._cachedNodes=b),b}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}}function Re(a){return a instanceof Qe}class Ne{constructor(a,b,c,d){this.anchor=a,this.focus=b,this.dirty=!1,this.format=c,this.style=d,this._cachedNodes=null,a._selection=this,b._selection=this}is(a){return!!C(a)&&(this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style)}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var a=this._cachedNodes;if(null!==a)return a;a=this.anchor;var b=this.focus,c=a.isBefore(b),d=c?a:b;c=c?b:a,a=d.getNode(),b=c.getNode();let e=d.offset;return d=c.offset,D(a)&&(c=a.getDescendantByIndex(e),a=null!=c?c:a),D(b)&&(null!==(c=b.getDescendantByIndex(d))&&c!==a&&b.getChildAtIndex(d)===c&&(c=c.getPreviousSibling()),b=null!=c?c:b),a=a.is(b)?D(a)&&0<a.getChildrenSize()?[]:[a]:a.getNodesBetween(b),ec()||(this._cachedNodes=a),a}setTextNodeRange(a,b,c,d){Ce(this.anchor,a.__key,b,"text"),Ce(this.focus,c.__key,d,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let a=this.getNodes();if(0===a.length)return"";let b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),[g,h]=Se(this),k="",m=!0;for(let n=0;n<a.length;n++){let p=a[n];if(D(p)&&!p.isInline())m||(k+="\n"),m=!p.isEmpty();else if(m=!1,B(p)){let l=p.getTextContent();p===b?p===c?"element"===d.type&&"element"===e.type&&e.offset!==d.offset||(l=g<h?l.slice(g,h):l.slice(h,g)):l=f?l.slice(g):l.slice(h):p===c&&(l=f?l.slice(0,h):l.slice(0,g)),k+=l}else!z(p)&&!Yb(p)||p===c&&this.isCollapsed()||(k+=p.getTextContent())}return k}applyDOMRange(a){let b=F(),c=b.getEditorState()._selection;if(null!==(a=We(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c))){var[d,e]=a;Ce(this.anchor,d.key,d.offset,d.type),Ce(this.focus,e.key,e.offset,e.type),this._cachedNodes=null}}clone(){let a=this.anchor,b=this.focus;return new Ne(new ze(a.key,a.offset,a.type),new ze(b.key,b.offset,b.type),this.format,this.style)}toggleFormat(a){this.format=Wb(this.format,a,null),this.dirty=!0}setStyle(a){this.style=a,this.dirty=!0}hasFormat(a){return 0!=(this.format&fb[a])}insertRawText(a){let b=[],c=(a=a.split(/(\r?\n|\t)/)).length;for(let d=0;d<c;d++){let e=a[d];"\n"===e||"\r\n"===e?b.push(ge()):"\t"===e?b.push(ue()):b.push(J(e))}this.insertNodes(b)}insertText(a){var b=this.anchor,c=this.focus,d=this.isCollapsed()||b.isBefore(c),e=this.format,f=this.style;d&&"element"===b.type?Be(b,c,e,f):d||"element"!==c.type||Be(c,b,e,f);var g=this.getNodes(),h=g.length,k=d?c:b;c=(d?b:c).offset;var m=k.offset;B(b=g[0])||r(26),d=b.getTextContent().length;var n=b.getParentOrThrow(),p=g[h-1];if(this.isCollapsed()&&c===d&&(b.isSegmented()||b.isToken()||!b.canInsertTextAfter()||!n.canInsertTextAfter()&&null===b.getNextSibling())){var l=b.getNextSibling();if(B(l)&&l.canInsertTextBefore()&&!Ob(l)||((l=J()).setFormat(e),n.canInsertTextAfter()?b.insertAfter(l):n.insertAfter(l)),l.select(0,0),b=l,""!==a)return void this.insertText(a)}else if(this.isCollapsed()&&0===c&&(b.isSegmented()||b.isToken()||!b.canInsertTextBefore()||!n.canInsertTextBefore()&&null===b.getPreviousSibling())){if(B(l=b.getPreviousSibling())&&!Ob(l)||((l=J()).setFormat(e),n.canInsertTextBefore()?b.insertBefore(l):n.insertBefore(l)),l.select(),b=l,""!==a)return void this.insertText(a)}else if(b.isSegmented()&&c!==d)(n=J(b.getTextContent())).setFormat(e),b.replace(n),b=n;else if(!(this.isCollapsed()||""===a||(l=p.getParent(),n.canInsertTextBefore()&&n.canInsertTextAfter()&&(!D(l)||l.canInsertTextBefore()&&l.canInsertTextAfter()))))return this.insertText(""),Xe(this.anchor,this.focus,null),void this.insertText(a);if(1===h)if(b.isToken())(a=J(a)).select(),b.replace(a);else{if(g=b.getFormat(),h=b.getStyle(),c===m&&(g!==e||h!==f)){if(""!==b.getTextContent())return(g=J(a)).setFormat(e),g.setStyle(f),g.select(),0===c?b.insertBefore(g,!1):([h]=b.splitText(c),h.insertAfter(g,!1)),void(g.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length));b.setFormat(e),b.setStyle(f)}""===(b=b.spliceText(c,m-c,a,!0)).getTextContent()?b.remove():"text"===this.anchor.type&&(b.isComposing()?this.anchor.offset-=a.length:(this.format=g,this.style=h))}else{if(e=new Set([...b.getParentKeys(),...p.getParentKeys()]),l=D(b)?b:b.getParentOrThrow(),f=D(p)?p:p.getParentOrThrow(),n=p,!l.is(f)&&f.isInline())do{n=f,f=f.getParentOrThrow()}while(f.isInline());if("text"===k.type&&(0!==m||""===p.getTextContent())||"element"===k.type&&p.getIndexWithinParent()<m)if(B(p)&&!p.isToken()&&m!==p.getTextContentSize()){if(p.isSegmented()){var q=J(p.getTextContent());p.replace(q),p=q}K(k.getNode())||(p=p.spliceText(0,m,"")),e.add(p.__key)}else(k=p.getParentOrThrow()).canBeEmpty()||1!==k.getChildrenSize()?p.remove():k.remove();else e.add(p.__key);for(k=f.getChildren(),m=new Set(g),p=l.is(f),l=l.isInline()&&null===b.getNextSibling()?l:b,q=k.length-1;0<=q;q--){let u=k[q];if(u.is(b)||D(u)&&u.isParentOf(b))break;u.isAttached()&&(!m.has(u)||u.is(n)?p||l.insertAfter(u,!1):u.remove())}if(!p)for(k=f,m=null;null!==k;)(0===(p=(f=k.getChildren()).length)||f[p-1].is(m))&&(e.delete(k.__key),m=k),k=k.getParent();for(b.isToken()?c===d?b.select():((a=J(a)).select(),b.replace(a)):""===(b=b.spliceText(c,d-c,a,!0)).getTextContent()?b.remove():b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length),a=1;a<h;a++)b=g[a],e.has(b.__key)||b.remove()}}removeText(){this.insertText("")}formatText(a){if(this.isCollapsed())this.toggleFormat(a),H(null);else{var b=this.getNodes(),c=[];for(var d of b)B(d)&&c.push(d);var e=c.length;if(0===e)this.toggleFormat(a),H(null);else{d=this.anchor;var f=this.focus,g=this.isBackward();b=g?f:d,d=g?d:f;var h=0,k=c[0];if(f="element"===b.type?0:b.offset,"text"===b.type&&f===k.getTextContentSize()&&(h=1,k=c[1],f=0),null!=k){g=k.getFormatFlags(a,null);var m=e-1,n=c[m];if(e="text"===d.type?d.offset:n.getTextContentSize(),k.is(n))f!==e&&(0===f&&e===k.getTextContentSize()?k.setFormat(g):(a=k.splitText(f,e),(a=0===f?a[0]:a[1]).setFormat(g),"text"===b.type&&b.set(a.__key,0,"text"),"text"===d.type&&d.set(a.__key,e-f,"text")),this.format=g);else{0!==f&&([,k]=k.splitText(f),f=0),k.setFormat(g);var p=n.getFormatFlags(a,g);for(0<e&&(e!==n.getTextContentSize()&&([n]=n.splitText(e)),n.setFormat(p)),h+=1;h<m;h++){let l=c[h];if(!l.isToken()){let q=l.getFormatFlags(a,p);l.setFormat(q)}}"text"===b.type&&b.set(k.__key,f,"text"),"text"===d.type&&d.set(n.__key,e,"text"),this.format=g|p}}}}}insertNodes(a,b){if(!this.isCollapsed()){var c=this.isBackward()?this.anchor:this.focus,d=c.getNode().getNextSibling();if(d=d?d.getKey():null,c=(c=c.getNode().getPreviousSibling())?c.getKey():null,this.removeText(),this.isCollapsed()&&"element"===this.focus.type){if(this.focus.key===d&&0===this.focus.offset){var e=J();this.focus.getNode().insertBefore(e)}else this.focus.key===c&&this.focus.offset===this.focus.getNode().getChildrenSize()&&(e=J(),this.focus.getNode().insertAfter(e));e&&(this.focus.set(e.__key,0,"text"),this.anchor.set(e.__key,0,"text"))}}c=(e=this.anchor).offset;var f=e.getNode();d=f,"element"===e.type&&(d=null===(d=(e=e.getNode()).getChildAtIndex(c-1))?e:d),e=[];var g=f.getNextSiblings(),h=yc(f)?null:f.getTopLevelElementOrThrow();if(B(f))if(d=f.getTextContent().length,0===c&&0!==d)d=null!==(d=f.getPreviousSibling())?d:f.getParentOrThrow(),e.push(f);else if(c===d)d=f;else{if(f.isToken())return!1;[d,f]=f.splitText(c),e.push(f)}f=d,e.push(...g),g=a[0];var k=!1,m=null;for(let q=0;q<a.length;q++){var n=a[q];if(yc(d)||z(d)||!D(n)||n.isInline())k&&!D(n)&&!z(n)&&yc(d.getParent())&&r(28);else{if(n.is(g)){if(D(d)&&d.isEmpty()&&d.canReplaceWith(n)){d.replace(n),d=n,k=!0;continue}if(Xb(k=n.getFirstDescendant())){for(var p=k.getParentOrThrow();p.isInline();)p=p.getParentOrThrow();if(k=(m=p.getChildren()).length,D(d)){var l=d.getFirstChild();for(let u=0;u<k;u++){let x=m[u];null===l?d.append(x):l.insertAfter(x),l=x}}else{for(l=k-1;0<=l;l--)d.insertAfter(m[l]);d=d.getParentOrThrow()}if(m=m[k-1],p.remove(),k=!0,p.is(n))continue}}B(d)&&(null===h&&r(27),d=h)}k=!1,D(d)&&!d.isInline()?(m=n,z(n)&&!n.isInline()?d=1===a.length&&d.canBeEmpty()&&d.isEmpty()?d.insertBefore(n,!1):d.insertAfter(n,!1):D(n)?!n.canBeEmpty()&&n.isEmpty()||(K(d)?(null!==(p=d.getChildAtIndex(c))?p.insertBefore(n):d.append(n),d=n):n.isInline()?(d.append(n),d=n):d=d.insertAfter(n,!1)):(null!==(p=d.getFirstChild())?p.insertBefore(n):d.append(n),d=n)):!D(n)||D(n)&&n.isInline()||z(d)&&!d.isInline()?(m=n,C(this)&&z(n)&&(D(d)||B(d))&&!n.isInline()?(B(d)?(p=d.getParentOrThrow(),[d]=d.splitText(c),d=d.getIndexWithinParent()+1):(p=d,d=c),[,d]=Ec(p,d),d=d.insertBefore(n)):d=d.insertAfter(n,!1)):(n=d.getParentOrThrow(),Yb(d)&&d.remove(),d=n,q--)}if(b&&(B(f)?f.select():B(a=d.getPreviousSibling())?a.select():(a=d.getIndexWithinParent(),d.getParentOrThrow().select(a,a))),D(d)){if(a=B(m)?m:D(m)&&m.isInline()?m.getLastDescendant():d.getLastDescendant(),b||(null===a?d.select():B(a)?""===a.getTextContent()?a.selectPrevious():a.select():a.selectNext()),0!==e.length)for(b=d,a=e.length-1;0<=a;a--)h=(c=e[a]).getParentOrThrow(),!D(d)||Ye(c)||z(c)&&(!c.isInline()||c.isIsolated())?D(d)||Ye(c)?D(c)&&!c.canInsertAfter(d)?(D(f=h.constructor.clone(h))||r(29),f.append(c),d.insertAfter(f)):d.insertAfter(c):(d.insertBefore(c),d=c):(b===d?d.append(c):d.insertBefore(c),d=c),h.isEmpty()&&!h.canBeEmpty()&&h.remove()}else b||(B(d)?d.select():(b=d.getParentOrThrow(),a=d.getIndexWithinParent()+1,b.select(a,a)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var a=this.anchor,b=a.offset,c=[];if("text"===a.type){var d=a.getNode(),e=d.getNextSiblings().reverse(),f=d.getParentOrThrow(),g=f.isInline(),h=g?f.getTextContentSize():d.getTextContentSize();0===b?e.push(d):(g&&(c=f.getNextSiblings()),b===h||g&&b===d.getTextContentSize()||([,d]=d.splitText(b),e.push(d)))}else{if(yc(f=a.getNode()))return e=de(),c=f.getChildAtIndex(b),e.select(),void(null!==c?c.insertBefore(e,!1):f.append(e));e=f.getChildren().slice(b).reverse()}if(d=e.length,0===b&&0<d&&f.isInline()){if(D(e=(c=f.getParentOrThrow()).insertNewAfter(this,!1)))for(c=c.getChildren(),f=0;f<c.length;f++)e.append(c[f])}else if(null===(g=f.insertNewAfter(this,!1)))this.insertLineBreak();else if(D(g))if(h=f.getFirstChild(),0===b&&(f.is(a.getNode())||h&&h.is(a.getNode()))&&0<d)f.insertBefore(g);else{if(f=null,b=c.length,a=g.getParentOrThrow(),0<b)for(h=0;h<b;h++)a.append(c[h]);if(0!==d)for(c=0;c<d;c++)b=e[c],null===f?g.append(b):f.insertBefore(b),f=b;g.canBeEmpty()||0!==g.getChildrenSize()?g.selectStart():(g.selectPrevious(),g.remove())}}insertLineBreak(a){let b=ge();var c=this.anchor;"element"===c.type&&(K(c=c.getNode())&&this.insertParagraph()),a?this.insertNodes([b],!0):this.insertNodes([b])&&b.selectNext(0,0)}getCharacterOffsets(){return Se(this)}extract(){var a=this.getNodes(),b=a.length,c=b-1,d=this.anchor;let e=this.focus;var f=a[0];let g=a[c],[h,k]=Se(this);return 0===b?[]:1===b?B(f)&&!this.isCollapsed()?(a=h>k?k:h,c=f.splitText(a,h>k?h:k),null!=(a=0===a?c[0]:c[1])?[a]:[]):[f]:(b=d.isBefore(e),B(f)&&((d=b?h:k)===f.getTextContentSize()?a.shift():0!==d&&([,f]=f.splitText(d),a[0]=f)),B(g)&&(f=g.getTextContent().length,0===(b=b?k:h)?a.pop():b!==f&&([g]=g.splitText(b),a[c]=g)),a)}modify(a,b,c){var d=this.focus,e=this.anchor,f="move"===a,g=tc(d,b);if(z(g)&&!g.isIsolated())f&&g.isKeyboardSelectable()?((b=Ze()).add(g.__key),yb(b)):B(a=b?g.getPreviousSibling():g.getNextSibling())?(g=a.__key,b=b?a.getTextContent().length:0,d.set(g,b,"text"),f&&e.set(g,b,"text")):(c=g.getParentOrThrow(),D(a)?(c=a.__key,g=b?a.getChildrenSize():0):(g=g.getIndexWithinParent(),c=c.__key,b||g++),d.set(c,g,"element"),f&&e.set(c,g,"element"));else if(d=vb((e=F())._window)){var h=e._blockCursorElement,k=e._rootElement;if(null===k||null===h||!D(g)||g.isInline()||g.canBeEmpty()||Dc(h,e,k),d.modify(a,b?"backward":"forward",c),0<d.rangeCount&&(g=d.getRangeAt(0),e=K(e=this.anchor.getNode())?e:xc(e),this.applyDOMRange(g),this.dirty=!0,!f)){for(f=this.getNodes(),a=[],c=!1,h=0;h<f.length;h++)wc(k=f[h],e)?a.push(k):c=!0;c&&0<a.length&&(b?D(b=a[0])?b.selectStart():b.getParentOrThrow().selectStart():D(b=a[a.length-1])?b.selectEnd():b.getParentOrThrow().selectEnd()),d.anchorNode===g.startContainer&&d.anchorOffset===g.startOffset||(b=this.focus,d=(f=this.anchor).key,g=f.offset,e=f.type,Ce(f,b.key,b.offset,b.type),Ce(b,d,g,e),this._cachedNodes=null)}}}deleteCharacter(a){let b=this.isCollapsed();if(this.isCollapsed()){var c=this.anchor,d=this.focus,e=c.getNode();if(!a&&("element"===c.type&&D(e)&&c.offset===e.getChildrenSize()||"text"===c.type&&c.offset===e.getTextContentSize())){var f=e.getParent();if(D(f=e.getNextSibling()||(null===f?null:f.getNextSibling()))&&f.isShadowRoot())return}if(z(f=tc(d,a))&&!f.isIsolated())return void(f.isKeyboardSelectable()&&D(e)&&0===e.getChildrenSize()?(e.remove(),a=Ze(),a.add(f.__key),yb(a)):(f.remove(),F().dispatchCommand(aa,void 0)));if(!a&&D(f)&&D(e)&&e.isEmpty())return e.remove(),void f.selectStart();if(this.modify("extend",a,"character"),this.isCollapsed()){if(a&&0===c.offset&&("element"===c.type?c.getNode():c.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(f="text"===d.type?d.getNode():null,e="text"===c.type?c.getNode():null,null!==f&&f.isSegmented()){if(c=d.offset,d=f.getTextContentSize(),f.is(e)||a&&c!==d||!a&&0!==c)return void $e(f,a,c)}else if(null!==e&&e.isSegmented()&&(c=c.offset,d=e.getTextContentSize(),e.is(f)||a&&0!==c||!a&&c!==d))return void $e(e,a,c);if(e=this.anchor,f=this.focus,(c=e.getNode())===(d=f.getNode())&&"text"===e.type&&"text"===f.type){var g=e.offset,h=f.offset;let k=g<h;(d=k?g:h)!==(g=(h=k?h:g)-1)&&(kc(c=c.getTextContent().slice(d,h))||(a?f.offset=g:e.offset=g))}}}this.removeText(),a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&((a=this.anchor.getNode()).isEmpty()&&K(a.getParent())&&0===a.getIndexWithinParent()&&a.collapseAtStart(this))}deleteLine(a){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",a,"lineboundary"),0===(a?this.focus:this.anchor).offset&&this.modify("extend",a,"character")),this.removeText()}deleteWord(a){this.isCollapsed()&&this.modify("extend",a,"word"),this.removeText()}}function Ud(a){return a instanceof De}function af(a){let b=a.offset;return"text"===a.type?b:b===(a=a.getNode()).getChildrenSize()?a.getTextContent().length:0}function Se(a){let b=a.anchor;return a=a.focus,"element"===b.type&&"element"===a.type&&b.key===a.key&&b.offset===a.offset?[0,0]:[af(b),af(a)]}function $e(a,b,c){let d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(let h=0;h<e;h++){let m=h===e-1;if(g=f,f+=d[h].length,b&&f===c||f>c||m){d.splice(h,1),m&&(g=void 0);break}}""===(b=d.join("").trim())?a.remove():(a.setTextContent(b),a.select(g,g))}function bf(a,b,c,d){var e=b;if(1===a.nodeType){let h=!1;var f=a.childNodes,g=f.length;e===g&&(h=!0,e=g-1);let k=f[e];if(g=!1,k===d._blockCursorElement?(k=f[e+1],g=!0):null!==d._blockCursorElement&&e--,B(d=jc(k)))e=h?d.getTextContentSize():0;else{if(null===(f=jc(a)))return null;if(D(f)?((b=D(a=f.getChildAtIndex(e)))&&(b=a.getParent(),b=null===c||null===b||!b.canBeEmpty()||b!==c.getNode()),b&&(null===(c=h?a.getLastDescendant():a.getFirstDescendant())?(f=a,e=0):f=D(a=c)?a:a.getParentOrThrow()),B(a)?(d=a,f=null,e=h?a.getTextContentSize():0):a!==f&&h&&!g&&e++):(e=f.getIndexWithinParent(),e=0===b&&z(f)&&jc(a)===f?e:e+1,f=f.getParentOrThrow()),D(f))return new ze(f.__key,e,"element")}}else d=jc(a);return B(d)?new ze(d.__key,e,"text"):null}function cf(a,b,c){var d=a.offset,e=a.getNode();0===d?(d=e.getPreviousSibling(),e=e.getParent(),b?(c||!b)&&null===d&&D(e)&&e.isInline()&&(B(b=e.getPreviousSibling())&&(a.key=b.__key,a.offset=b.getTextContent().length)):D(d)&&!c&&d.isInline()?(a.key=d.__key,a.offset=d.getChildrenSize(),a.type="element"):B(d)&&(a.key=d.__key,a.offset=d.getTextContent().length)):d===e.getTextContent().length&&(d=e.getNextSibling(),e=e.getParent(),b&&D(d)&&d.isInline()?(a.key=d.__key,a.offset=0,a.type="element"):(c||b)&&null===d&&D(e)&&e.isInline()&&!e.canInsertTextAfter()&&(B(b=e.getNextSibling())&&(a.key=b.__key,a.offset=0)))}function Xe(a,b,c){if("text"===a.type&&"text"===b.type){var d=a.isBefore(b);let e=a.is(b);cf(a,d,e),cf(b,!d,e),e&&(b.key=a.key,b.offset=a.offset,b.type=a.type),(d=F()).isComposing()&&d._compositionKey!==a.key&&C(c)&&(d=c.anchor,c=c.focus,Ce(a,d.key,d.offset,d.type),Ce(b,c.key,c.offset,c.type))}}function We(a,b,c,d,e,f){return null!==a&&null!==c&&Lb(e,a,c)?null===(b=bf(a,b,C(f)?f.anchor:null,e))||null===(d=bf(c,d,C(f)?f.focus:null,e))||"element"===b.type&&"element"===d.type&&(a=jc(a),c=jc(c),z(a)&&z(c))?null:(Xe(b,d,f),[b,d]):null}function Ye(a){return D(a)&&!a.isInline()}function re(a,b,c,d,e,f){let g=ac();return(a=new Ne(new ze(a,b,e),new ze(c,d,f),0,"")).dirty=!0,g._selection=a}function Ze(){return new De(new Set)}function Qd(a,b,c){var d=c._window;if(null===d)return null;var e=d.event,f=e?e.type:void 0;let g;if(d="selectionchange"===f,e=!ob&&(d||"beforeinput"===f||"compositionstart"===f||"compositionend"===f||"click"===f&&e&&3===e.detail||"drop"===f||void 0===f),C(a)&&!e)return a.clone();if(null===b)return null;if(e=b.anchorNode,f=b.focusNode,g=b.anchorOffset,b=b.focusOffset,d&&C(a)&&!Lb(c,e,f))return a.clone();if(null===(c=We(e,g,f,b,c,a)))return null;let[h,k]=c;return new Ne(h,k,C(a)?a.format:0,C(a)?a.style:"")}function v(){return ac()._selection}function oc(){return F()._editorState._selection}function ae(a,b,c,d=1){var e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(b.is(g)||b.is(h)){if(g=b.__key,a.isCollapsed())(c<=(b=e.offset)&&0<d||c<b&&0>d)&&(c=Math.max(0,b+d),e.set(g,c,"element"),f.set(g,c,"element"),ef(a));else{let m=a.isBackward();var k=(h=m?f:e).getNode();f=(e=m?e:f).getNode(),b.is(k)&&((c<=(k=h.offset)&&0<d||c<k&&0>d)&&h.set(g,Math.max(0,k+d),"element")),b.is(f)&&((c<=(b=e.offset)&&0<d||c<b&&0>d)&&e.set(g,Math.max(0,b+d),"element"))}ef(a)}}function ef(a){var b=a.anchor,c=b.offset;let d=a.focus;var e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed())D(f)&&(B(g=(e=c>=(g=f.getChildrenSize()))?f.getChildAtIndex(g-1):f.getChildAtIndex(c))&&(c=0,e&&(c=g.getTextContentSize()),b.set(g.__key,c,"text"),d.set(g.__key,c,"text")));else{if(D(f)){let h=f.getChildrenSize();B(c=(a=c>=h)?f.getChildAtIndex(h-1):f.getChildAtIndex(c))&&(f=0,a&&(f=c.getTextContentSize()),b.set(c.__key,f,"text"))}D(g)&&(B(e=(b=e>=(c=g.getChildrenSize()))?g.getChildAtIndex(c-1):g.getChildAtIndex(e))&&(g=0,b&&(g=e.getTextContentSize()),d.set(e.__key,g,"text")))}}function $d(a,b,c,d,e){let f=null,g=0,h=null;null!==d?(f=d.__key,B(d)?(g=d.getTextContentSize(),h="text"):D(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,B(e)?h="text":D(e)&&(h="element")),null!==f&&null!==h?a.set(f,g,h):(g=b.getIndexWithinParent(),-1===g&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"))}function se(a,b,c,d,e){"text"===a.type?(a.key=c,b||(a.offset+=e)):a.offset>d.getIndexWithinParent()&&--a.offset}function Ve(a,b,c){let d=[],e=null,f=null;a=a.getChildren();for(let n=0;n<a.length;n++){var g=a[n];Te(g)||r(108);var h=g.getChildren();g=0;for(let p of h){for(P(p)||r(109);void 0!==d[n]&&void 0!==d[n][g];)g++;var k=g,m=p;let l={cell:m,startColumn:k,startRow:h=n},q=m.__rowSpan,u=m.__colSpan;for(let x=0;x<q;x++){void 0===d[h+x]&&(d[h+x]=[]);for(let y=0;y<u;y++)d[h+x][k+y]=l}b.is(m)&&(e=l),c.is(m)&&(f=l),g+=p.__colSpan}}return null===e&&r(110),null===f&&r(111),[d,e,f]}function Pe(a){a instanceof gf||(a instanceof be?P(a=Fc(a,P))||r(114):P(a=Fc(a.getNode(),P))||r(114));let b=a.getParent();Te(b)||r(115);let c=b.getParent();return Ue(c)||r(116),[a,b,c]}let S=null,T=null,V=!1,hf=!1,$b=0,jf={characterData:!0,childList:!0,subtree:!0};function ec(){return V||null!==S&&S._readOnly}function G(){V&&r(13)}function ac(){return null===S&&r(15),S}function F(){return null===T&&r(16),T}function kf(a,b,c){var d=b.__type;let e=a._nodes.get(d);for(void 0===e&&r(30,d),void 0===(a=c.get(d))&&(a=Array.from(e.transforms),c.set(d,a)),c=a.length,d=0;d<c&&(a[d](b),b.isAttached());d++);}function nf(a,b){var c=a.type,d=b.get(c);if(void 0===d&&r(17,c),c=d.klass,a.type!==c.getType()&&r(18,c.name),c=c.importJSON(a),a=a.children,D(c)&&Array.isArray(a))for(d=0;d<a.length;d++){let e=nf(a[d],b);c.append(e)}return c}function of(a,b){let c=S,d=V,e=T;S=a,V=!0,T=null;try{return b()}finally{S=c,V=d,T=e}}function pf(a,b){let c=a._pendingEditorState,d=a._rootElement,e=a._headless||null===d;if(null!==c){var f=a._editorState,g=f._selection,h=c._selection,k=0!==a._dirtyType,m=S,n=V,p=T,l=a._updating,q=a._observer,u=null;if(a._pendingEditorState=null,a._editorState=c,!e&&k&&null!==q){T=a,S=c,V=!1,a._updating=!0;try{let E=a._dirtyType,Q=a._dirtyElements,R=a._dirtyLeaves;q.disconnect();var y=Q,A=R;M=Kc=L="",Nc=2===E,Qc=null,N=a,Lc=a._config,Mc=a._nodes,Pc=N._listeners.mutation,Rc=y,Sc=A,Tc=f._nodeMap,Uc=c._nodeMap,Oc=c._readOnly,Vc=new Map(a._keyToDOMMap);let ia=new Map;ed=ia,sd("root",null),ed=Vc=Lc=Uc=Tc=Sc=Rc=Mc=N=void 0,u=ia}catch(E){if(E instanceof Error&&a._onError(E),hf)throw E;return qf(a,null,d,c),Bb(a),a._dirtyType=2,hf=!0,pf(a,f),void(hf=!1)}finally{q.observe(d,jf),a._updating=l,S=m,V=n,T=p}}c._readOnly||(c._readOnly=!0);var Z=a._dirtyLeaves,ca=a._dirtyElements,Va=a._normalizedNodes,la=a._updateTags,Wc=a._deferred;k&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements=new Map,a._normalizedNodes=new Set,a._updateTags=new Set);var Xc,Ee=a._decorators,Pb=a._pendingDecorators||Ee,Ef=c._nodeMap;for(Xc in Pb)Ef.has(Xc)||(Pb===Ee&&(Pb=fc(a)),delete Pb[Xc]);var ja=e?null:vb(a._window);if(a._editable&&null!==ja&&(k||null===h||h.dirty)){T=a,S=c;try{if(null!==q&&q.disconnect(),k||null===h||h.dirty){let E=a._blockCursorElement;null!==E&&Dc(E,a,d);a:{let Q=ja.anchorNode,R=ja.focusNode,ia=ja.anchorOffset,lb=ja.focusOffset,W=document.activeElement;if(!(la.has("collaboration")&&W!==d||null!==W&&Kb(W)))if(C(h)){var mb=h.anchor,Yc=h.focus,Fe=mb.key,Ff=Yc.key,Ge=vc(a,Fe),He=vc(a,Ff),Qb=mb.offset,Ie=Yc.offset,Zc=h.format,$c=h.style,Je=h.isCollapsed(),nb=Ge,Rb=He,ad=!1;if("text"===mb.type){nb=Vb(Ge);let X=mb.getNode();ad=X.getFormat()!==Zc||X.getStyle()!==$c}else C(g)&&"text"===g.anchor.type&&(ad=!0);if("text"===Yc.type&&(Rb=Vb(He)),null!==nb&&null!==Rb){if(Je&&(null===g||ad||C(g)&&(g.format!==Zc||g.style!==$c))){var Gf=performance.now();Md=[Zc,$c,Qb,Fe,Gf]}if(ia===Qb&&lb===Ie&&Q===nb&&R===Rb&&("Range"!==ja.type||!Je)&&(null!==W&&d.contains(W)||d.focus({preventScroll:!0}),"element"!==mb.type))break a;try{ja.setBaseAndExtent(nb,Qb,Rb,Ie)}catch(X){}if(!la.has("skip-scroll-into-view")&&h.isCollapsed()&&null!==d&&d===document.activeElement){let X=h instanceof Ne&&"element"===h.anchor.type?nb.childNodes[Qb]||null:0<ja.rangeCount?ja.getRangeAt(0):null;if(null!==X){let Y;if(X instanceof Text){let U=document.createRange();U.selectNode(X),Y=U.getBoundingClientRect()}else Y=X.getBoundingClientRect();let wa=d.ownerDocument,Da=wa.defaultView;if(null!==Da)for(var Sb,Tb,{top:bd,bottom:cd}=Y,oa=d;null!==oa;){let U=oa===wa.body;if(U)Sb=0,Tb=Cb(a).innerHeight;else{let Ub=oa.getBoundingClientRect();Sb=Ub.top,Tb=Ub.bottom}let Ea=0;if(bd<Sb?Ea=-(Sb-bd):cd>Tb&&(Ea=cd-Tb),0!==Ea)if(U)Da.scrollBy(0,Ea);else{let Ub=oa.scrollTop;oa.scrollTop+=Ea;let Ke=oa.scrollTop-Ub;bd-=Ke,cd-=Ke}if(U)break;oa=Nb(oa)}}}Id=!0}}else null!==g&&Lb(a,Q,R)&&ja.removeAllRanges()}}a:{let E=a._blockCursorElement;if(C(h)&&h.isCollapsed()&&"element"===h.anchor.type&&d.contains(document.activeElement)){let Q=h.anchor,R=Q.getNode(),ia=Q.offset,lb=R.getChildrenSize(),W=!1,X=null;if(ia===lb){Cc(R.getChildAtIndex(ia-1))&&(W=!0)}else{let Y=R.getChildAtIndex(ia);if(Cc(Y)){let wa=Y.getPreviousSibling();(null===wa||Cc(wa))&&(W=!0,X=a.getElementByKey(Y.__key))}}if(W){let Y=a.getElementByKey(R.__key);if(null===E){let wa=a._config.theme,Da=document.createElement("div");Da.contentEditable="false",Da.setAttribute("data-lexical-cursor","true");let U=wa.blockCursor;if(void 0!==U){if("string"==typeof U){let Ea=U.split(" ");U=wa.blockCursor=Ea}void 0!==U&&Da.classList.add(...U)}a._blockCursorElement=E=Da}d.style.caretColor="transparent",null===X?Y.appendChild(E):Y.insertBefore(E,X);break a}}null!==E&&Dc(E,a,d)}null!==q&&q.observe(d,jf)}finally{T=p,S=m}}if(null!==u){var Hf=u;let E=Array.from(a._listeners.mutation),Q=E.length;for(let R=0;R<Q;R++){let[ia,lb]=E[R],W=Hf.get(lb);void 0!==W&&ia(W,{dirtyLeaves:Z,prevEditorState:f,updateTags:la})}}C(h)||null===h||null!==g&&g.is(h)||a.dispatchCommand(aa,void 0);var dd=a._pendingDecorators;null!==dd&&(a._decorators=dd,a._pendingDecorators=null,rf("decorator",a,!0,dd));var If=gc(b||f),Le=gc(c);if(If!==Le&&rf("textcontent",a,!0,Le),rf("update",a,!0,{dirtyElements:ca,dirtyLeaves:Z,editorState:c,normalizedNodes:Va,prevEditorState:b||f,tags:la}),a._deferred=[],0!==Wc.length){let E=a._updating;a._updating=!0;try{for(let Q=0;Q<Wc.length;Q++)Wc[Q]()}finally{a._updating=E}}var Me=a._updates;if(0!==Me.length){let E=Me.shift();if(E){let[Q,R]=E;sf(a,Q,R)}}}}function rf(a,b,c,...d){let e=b._updating;b._updating=c;try{let f=Array.from(b._listeners[a]);for(a=0;a<f.length;a++)f[a].apply(null,d)}finally{b._updating=e}}function O(a,b,c){if(!1===a._updating||T!==a){let f=!1;return a.update((()=>{f=O(a,b,c)})),f}let d=lc(a);for(let f=4;0<=f;f--)for(let g=0;g<d.length;g++){var e=d[g]._commands.get(b);if(void 0!==e&&void 0!==(e=e[f])){let h=(e=Array.from(e)).length;for(let k=0;k<h;k++)if(!0===e[k](c,a))return!0}}return!1}function tf(a,b){let c=a._updates;for(b=b||!1;0!==c.length;){var d=c.shift();if(d){let g,[e,f]=d;void 0!==f&&(d=f.onUpdate,g=f.tag,f.skipTransforms&&(b=!0),d&&a._deferred.push(d),g&&a._updateTags.add(g)),e()}}return b}function sf(a,b,c){let d=a._updateTags;var e,f=e=!1;if(void 0!==c){var g=c.onUpdate;null!=(e=c.tag)&&d.add(e),e=c.skipTransforms||!1,f=c.discrete||!1}g&&a._deferred.push(g),c=a._editorState;let h=!1;(null===(g=a._pendingEditorState)||g._readOnly)&&(g=a._pendingEditorState=new uf(new Map((g||c)._nodeMap)),h=!0),g._flushSync=f,f=S;let k=V,m=T,n=a._updating;S=g,V=!1,a._updating=!0,T=a;try{h&&(a._headless?null!=c._selection&&(g._selection=c._selection.clone()):g._selection=function df(a){let b=a.getEditorState()._selection,c=vb(a._window);return Ud(b)||Re(b)?b.clone():Qd(b,c,a)}(a));let p=a._compositionKey;b(),e=tf(a,e),function ff(a,b){if(b=b.getEditorState()._selection,C(a=a._selection)){var c=a.anchor;let e,d=a.focus;"text"===c.type&&(e=c.getNode(),e.selectionTransform(b,a)),"text"===d.type&&e!==(c=d.getNode())&&c.selectionTransform(b,a)}}(g,a),0!==a._dirtyType&&(e?function lf(a,b){b=b._dirtyLeaves,a=a._nodeMap;for(let c of b)B(b=a.get(c))&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&Fb(b)}(g,a):function mf(a,b){let c=b._dirtyLeaves,d=b._dirtyElements;a=a._nodeMap;let e=dc(),f=new Map;var g=c;let h=g.size;for(var k=d,m=k.size;0<h||0<m;){if(0<h){b._dirtyLeaves=new Set;for(let n of g)B(g=a.get(n))&&g.isAttached()&&g.isSimpleText()&&!g.isUnmergeable()&&Fb(g),void 0!==g&&void 0!==g&&g.__key!==e&&g.isAttached()&&kf(b,g,f),c.add(n);if(h=(g=b._dirtyLeaves).size,0<h){$b++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map;for(let n of k)k=n[0],m=n[1],("root"===k||m)&&(void 0!==(g=a.get(k))&&void 0!==g&&g.__key!==e&&g.isAttached()&&kf(b,g,f),d.set(k,m));h=(g=b._dirtyLeaves).size,m=(k=b._dirtyElements).size,$b++}b._dirtyLeaves=c,b._dirtyElements=d}(g,a),tf(a),function Jc(a,b,c,d){a=a._nodeMap,b=b._nodeMap;let e=[];for(let[f]of d){let g=b.get(f);void 0===g||g.isAttached()||(D(g)&&Ic(g,f,a,b,e,d),a.has(f)||d.delete(f),e.push(f))}for(let f of e)b.delete(f);for(let f of c)void 0===(d=b.get(f))||d.isAttached()||(a.has(f)||c.delete(f),b.delete(f))}(c,g,a._dirtyLeaves,a._dirtyElements)),p!==a._compositionKey&&(g._flushSync=!0);let l=g._selection;if(C(l)){let q=g._nodeMap,u=l.focus.key;void 0!==q.get(l.anchor.key)&&void 0!==q.get(u)||r(19)}else Ud(l)&&0===l._nodes.size&&(g._selection=null)}catch(p){return p instanceof Error&&a._onError(p),a._pendingEditorState=c,a._dirtyType=2,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),void pf(a)}finally{S=f,V=k,T=m,a._updating=n,$b=0}0!==a._dirtyType||function vf(a,b){if(b=b.getEditorState()._selection,a=a._selection,null!==a){if(a.dirty||!a.is(b))return!0}else if(null!==b)return!0;return!1}(g,a)?g._flushSync?(g._flushSync=!1,pf(a)):h&&Jb((()=>{pf(a)})):(g._flushSync=!1,h&&(d.clear(),a._deferred=[],a._pendingEditorState=null))}function w(a,b,c){a._updating?a._updates.push([b,c]):sf(a,b,c)}class wf extends be{constructor(a){super(a)}decorate(){r(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function z(a){return a instanceof wf}class xf extends be{constructor(a){super(a),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let a=this.getFormat();return ib[a]||""}getIndent(){return this.getLatest().__indent}getChildren(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getChildrenKeys(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b.__key),b=b.getNextSibling();return a}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let a=F()._dirtyElements;return null!==a&&a.has(this.__key)}isLastChild(){let a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a)}getAllTextNodes(){let a=[],b=this.getFirstChild();for(;null!==b;){if(B(b)&&a.push(b),D(b)){let c=b.getAllTextNodes();a.push(...c)}b=b.getNextSibling()}return a}getFirstDescendant(){let a=this.getFirstChild();for(;null!==a;){if(D(a)){let b=a.getFirstChild();if(null!==b){a=b;continue}}break}return a}getLastDescendant(){let a=this.getLastChild();for(;null!==a;){if(D(a)){let b=a.getLastChild();if(null!==b){a=b;continue}}break}return a}getDescendantByIndex(a){let b=this.getChildren(),c=b.length;return a>=c?D(a=b[c-1])&&a.getLastDescendant()||a||null:D(a=b[a])&&a.getFirstDescendant()||a||null}getFirstChild(){let a=this.getLatest().__first;return null===a?null:I(a)}getFirstChildOrThrow(){let a=this.getFirstChild();return null===a&&r(45,this.__key),a}getLastChild(){let a=this.getLatest().__last;return null===a?null:I(a)}getLastChildOrThrow(){let a=this.getLastChild();return null===a&&r(96,this.__key),a}getChildAtIndex(a){var b=this.getChildrenSize();let c;if(a<b/2){for(c=this.getFirstChild(),b=0;null!==c&&b<=a;){if(b===a)return c;c=c.getNextSibling(),b++}return null}for(c=this.getLastChild(),--b;null!==c&&b>=a;){if(b===a)return c;c=c.getPreviousSibling(),b--}return null}getTextContent(){let a="",b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContent(),D(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n")}return a}getTextContentSize(){let a=0,b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContentSize(),D(e)&&d!==c-1&&!e.isInline()&&(a+=2)}return a}getDirection(){return this.getLatest().__dir}hasFormat(a){return""!==a&&(a=hb[a],0!=(this.getFormat()&a))}select(a,b){G();let c=v(),d=a,e=b;var f=this.getChildrenSize();if(!this.canBeEmpty())if(0===a&&0===b){if(B(a=this.getFirstChild())||D(a))return a.select(0,0)}else if(!(void 0!==a&&a!==f||void 0!==b&&b!==f)&&(B(a=this.getLastChild())||D(a)))return a.select();return void 0===d&&(d=f),void 0===e&&(e=f),f=this.__key,C(c)?(c.anchor.set(f,d,"element"),c.focus.set(f,e,"element"),c.dirty=!0,c):re(f,d,f,e,"element","element")}selectStart(){let a=this.getFirstDescendant();return D(a)||B(a)?a.select(0,0):null!==a?a.selectPrevious():this.select(0,0)}selectEnd(){let a=this.getLastDescendant();return D(a)||B(a)?a.select():null!==a?a.selectNext():this.select()}clear(){let a=this.getWritable();return this.getChildren().forEach((b=>b.remove())),a}append(...a){return this.splice(this.getChildrenSize(),0,a)}setDirection(a){let b=this.getWritable();return b.__dir=a,b}setFormat(a){return this.getWritable().__format=""!==a?hb[a]:0,this}setIndent(a){return this.getWritable().__indent=a,this}splice(a,b,c){let d=c.length,e=this.getChildrenSize(),f=this.getWritable(),g=f.__key;var h=[],k=[];let m=this.getChildAtIndex(a+b),n=null,p=e-b+d;if(0!==a)if(a===e)n=this.getLastChild();else{var l=this.getChildAtIndex(a);null!==l&&(n=l.getPreviousSibling())}if(0<b){var q=null===n?this.getFirstChild():n.getNextSibling();for(l=0;l<b;l++){null===q&&r(100);var u=q.getNextSibling(),x=q.__key;bc(q=q.getWritable()),k.push(x),q=u}}for(l=n,u=0;u<d;u++){x=c[u],null!==l&&x.is(l)&&(n=l=l.getPreviousSibling()),(q=x.getWritable()).__parent===g&&p--,bc(q);let y=x.__key;null===l?(f.__first=y,q.__prev=null):((l=l.getWritable()).__next=y,q.__prev=l.__key),x.__key===g&&r(76),q.__parent=g,h.push(y),l=x}if(a+b===e?null!==l&&(l.getWritable().__next=null,f.__last=l.__key):null!==m&&(a=m.getWritable(),null!==l?(b=l.getWritable(),a.__prev=l.__key,b.__next=m.__key):a.__prev=null),f.__size=p,k.length&&C(a=v())){k=new Set(k),h=new Set(h);let{anchor:y,focus:A}=a;yf(y,k,h)&&$d(y,y.getNode(),this,n,m),yf(A,k,h)&&$d(A,A.getNode(),this,n,m),0!==p||this.canBeEmpty()||yc(this)||this.remove()}return f}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function D(a){return a instanceof xf}function yf(a,b,c){for(a=a.getNode();a;){let d=a.__key;if(b.has(d)&&!c.has(d))return!0;a=a.getParent()}return!1}class zf extends xf{static getType(){return"root"}static clone(){return new zf}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){r(51)}getTextContent(){let a=this.__cachedText;return!ec()&&0!==F()._dirtyType||null===a?super.getTextContent():a}remove(){r(52)}replace(){r(53)}insertBefore(){r(54)}insertAfter(){r(55)}updateDOM(){return!1}append(...a){for(let b=0;b<a.length;b++){let c=a[b];D(c)||z(c)||r(56)}return super.append(...a)}static importJSON(a){let b=hc();return b.setFormat(a.format),b.setIndent(a.indent),b.setDirection(a.direction),b}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function K(a){return a instanceof zf}function Af(){return new uf(new Map([["root",new zf]]))}function Bf(a){let b=a.exportJSON();var c=a.constructor;b.type!==c.getType()&&r(130,c.name);let d=b.children;if(D(a))for(Array.isArray(d)||r(59,c.name),a=a.getChildren(),c=0;c<a.length;c++){let e=Bf(a[c]);d.push(e)}return b}class uf{constructor(a,b){this._nodeMap=a,this._selection=b||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(a){return of(this,a)}clone(a){return(a=new uf(this._nodeMap,void 0===a?this._selection:a))._readOnly=!0,a}toJSON(){return of(this,(()=>({root:Bf(hc())})))}}class Cf extends xf{static getType(){return"paragraph"}static clone(a){return new Cf(a.__key)}createDOM(a){let b=document.createElement("p");return void 0!==(a=qc(a.theme,"paragraph"))&&b.classList.add(...a),b}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:Df,priority:0})}}exportDOM(a){if(({element:a}=super.exportDOM(a)),a&&Hc(a)){this.isEmpty()&&a.append(document.createElement("br"));var b=this.getFormatType();a.style.textAlign=b,(b=this.getDirection())&&(a.dir=b),0<(b=this.getIndent())&&(a.style.textIndent=20*b+"px")}return{element:a}}static importJSON(a){let b=de();return b.setFormat(a.format),b.setIndent(a.indent),b.setDirection(a.direction),b}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(a,b){a=de();let c=this.getDirection();return a.setDirection(c),this.insertAfter(a,b),a}collapseAtStart(){let a=this.getChildren();if(0===a.length||B(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Df(a){let b=de();return a.style&&(b.setFormat(a.style.textAlign),0<(a=parseInt(a.style.textIndent,10)/20)&&b.setIndent(a)),{node:b}}function de(){return Ac(new Cf)}function qf(a,b,c,d){let e=a._keyToDOMMap;e.clear(),a._editorState=Af(),a._pendingEditorState=d,a._compositionKey=null,a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),a._normalizedNodes=new Set,a._updateTags=new Set,a._updates=[],a._blockCursorElement=null,null!==(d=a._observer)&&(d.disconnect(),a._observer=null),null!==b&&(b.textContent=""),null!==c&&(c.textContent="",e.set("root",c))}class Kf{constructor(a,b,c,d,e,f,g){this._parentEditor=b,this._rootElement=null,this._editorState=a,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=d,this._nodes=c,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=mc(),this._onError=e,this._htmlConversions=f,this._editable=g,this._headless=null!==b&&b._headless,this._blockCursorElement=this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(a){let b=this._listeners.update;return b.add(a),()=>{b.delete(a)}}registerEditableListener(a){let b=this._listeners.editable;return b.add(a),()=>{b.delete(a)}}registerDecoratorListener(a){let b=this._listeners.decorator;return b.add(a),()=>{b.delete(a)}}registerTextContentListener(a){let b=this._listeners.textcontent;return b.add(a),()=>{b.delete(a)}}registerRootListener(a){let b=this._listeners.root;return a(this._rootElement,null),b.add(a),()=>{a(null,this._rootElement),b.delete(a)}}registerCommand(a,b,c){void 0===c&&r(35);let d=this._commands;d.has(a)||d.set(a,[new Set,new Set,new Set,new Set,new Set]);let e=d.get(a);void 0===e&&r(36,String(a));let f=e[c];return f.add(b),()=>{f.delete(b),e.every((g=>0===g.size))&&d.delete(a)}}registerMutationListener(a,b){void 0===this._nodes.get(a.getType())&&r(37,a.name);let c=this._listeners.mutation;return c.set(b,a),()=>{c.delete(b)}}registerNodeTransformToKlass(a,b){var c=a.getType();return void 0===(c=this._nodes.get(c))&&r(37,a.name),c.transforms.add(b),c}registerNodeTransform(a,b){var c=this.registerNodeTransformToKlass(a,b);let d=[c];return null!=(c=c.replaceWithKlass)&&(c=this.registerNodeTransformToKlass(c,b),d.push(c)),function ic(a,b){w(a,(()=>{var c=ac();if(!c.isEmpty())if("root"===b)hc().markDirty();else{c=c._nodeMap;for(let[,d]of c)d.markDirty()}}),null===a._pendingEditorState?{tag:"history-merge"}:void 0)}(this,a.getType()),()=>{d.forEach((e=>e.transforms.delete(b)))}}hasNode(a){return this._nodes.has(a.getType())}hasNodes(a){return a.every(this.hasNode.bind(this))}dispatchCommand(a,b){return O(this,a,b)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(a){let b=this._rootElement;if(a!==b){let f=qc(this._config.theme,"root");var c=this._pendingEditorState||this._editorState;if(this._rootElement=a,qf(this,b,a,c),null!==b){if(!this._config.disableEvents){0!==Hd&&(Hd--,0===Hd&&b.ownerDocument.removeEventListener("selectionchange",Xd));var d=b.__lexicalEditor;if(null!=d){if(null!==d._parentEditor){var e=lc(d);e=e[e.length-1]._key,Wd.get(e)===d&&Wd.delete(e)}else Wd.delete(d._key);b.__lexicalEditor=null}for(d=Vd(b),e=0;e<d.length;e++)d[e]();b.__lexicalEventHandles=[]}null!=f&&b.classList.remove(...f)}null!==a?(c=(c=a.ownerDocument)&&c.defaultView||null,(d=a.style).userSelect="text",d.whiteSpace="pre-wrap",d.wordBreak="break-word",a.setAttribute("data-lexical-editor","true"),this._window=c,this._dirtyType=2,Bb(this),this._updateTags.add("history-merge"),pf(this),this._config.disableEvents||function Yd(a,b){0===Hd&&a.ownerDocument.addEventListener("selectionchange",Xd),Hd++,a.__lexicalEditor=b;let c=Vd(a);for(let d=0;d<Bd.length;d++){let[e,f]=Bd[d],g="function"==typeof f?h=>{!0!==h._lexicalHandled&&(h._lexicalHandled=!0,b.isEditable()&&f(h,b))}:h=>{if(!0!==h._lexicalHandled&&(h._lexicalHandled=!0,b.isEditable()))switch(e){case"cut":return O(b,Oa,h);case"copy":return O(b,Na,h);case"paste":return O(b,ka,h);case"dragstart":return O(b,Ka,h);case"dragover":return O(b,La,h);case"dragend":return O(b,Ma,h);case"focus":return O(b,Qa,h);case"blur":return O(b,Ra,h);case"drop":return O(b,Ja,h)}};a.addEventListener(e,g),c.push((()=>{a.removeEventListener(e,g)}))}}(a,this),null!=f&&a.classList.add(...f)):(this._editorState=c,this._window=this._pendingEditorState=null),rf("root",this,!1,a,b)}}getElementByKey(a){return this._keyToDOMMap.get(a)||null}getEditorState(){return this._editorState}setEditorState(a,b){a.isEmpty()&&r(38),Ab(this);let c=this._pendingEditorState,d=this._updateTags;b=void 0!==b?b.tag:null,null===c||c.isEmpty()||(null!=b&&d.add(b),pf(this)),this._pendingEditorState=a,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=b&&d.add(b),pf(this)}parseEditorState(a,b){a="string"==typeof a?JSON.parse(a):a;let c=Af(),d=S,e=V,f=T,g=this._dirtyElements,h=this._dirtyLeaves,k=this._cloneNotNeeded,m=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,S=c,V=!1,T=this;try{nf(a.root,this._nodes),b&&b(),c._readOnly=!0}catch(n){n instanceof Error&&this._onError(n)}finally{this._dirtyElements=g,this._dirtyLeaves=h,this._cloneNotNeeded=k,this._dirtyType=m,S=d,V=e,T=f}return c}update(a,b){w(this,a,b)}focus(a,b={}){let c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),w(this,(()=>{let d=v(),e=hc();null!==d?d.dirty=!0:0!==e.getChildrenSize()&&("rootStart"===b.defaultSelection?e.selectStart():e.selectEnd())}),{onUpdate:()=>{c.removeAttribute("autocapitalize"),a&&a()},tag:"focus"}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"))}blur(){var a=this._rootElement;null!==a&&a.blur(),null!==(a=vb(this._window))&&a.removeAllRanges()}isEditable(){return this._editable}setEditable(a){this._editable!==a&&(this._editable=a,rf("editable",this,!0,a))}toJSON(){return{editorState:this._editorState.toJSON()}}}class gf extends xf{constructor(a,b){super(b),this.__colSpan=a,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan,rowSpan:this.__rowSpan}}getColSpan(){return this.__colSpan}setColSpan(a){return this.getWritable().__colSpan=a,this}getRowSpan(){return this.__rowSpan}setRowSpan(a){return this.getWritable().__rowSpan=a,this}}function P(a){return a instanceof gf}class Lf extends xf{}function Ue(a){return a instanceof Lf}class Mf extends xf{}function Te(a){return a instanceof Mf}exports.$addUpdateTag=function(a){G(),F()._updateTags.add(a)},exports.$applyNodeReplacement=Ac,exports.$copyNode=zc,exports.$createLineBreakNode=ge,exports.$createNodeSelection=Ze,exports.$createParagraphNode=de,exports.$createRangeSelection=function(){let a=new ze("root",0,"element"),b=new ze("root",0,"element");return new Ne(a,b,0,"")},exports.$createTabNode=ue,exports.$createTextNode=J,exports.$getAdjacentNode=tc,exports.$getNearestNodeFromDOMNode=ub,exports.$getNearestRootOrShadowRoot=xc,exports.$getNodeByKey=I,exports.$getPreviousSelection=oc,exports.$getRoot=hc,exports.$getSelection=v,exports.$getTextContent=function(){let a=v();return null===a?"":a.getTextContent()},exports.$hasAncestor=wc,exports.$hasUpdateTag=function(a){return F()._updateTags.has(a)},exports.$insertNodes=function(a,b){let c=v()||oc();return null===c&&(c=hc().selectEnd()),c.insertNodes(a,b)},exports.$isBlockElementNode=Ye,exports.$isDecoratorNode=z,exports.$isElementNode=D,exports.$isInlineElementOrDecoratorNode=function(a){return D(a)&&a.isInline()||z(a)&&a.isInline()},exports.$isLeafNode=Xb,exports.$isLineBreakNode=Yb,exports.$isNodeSelection=Ud,exports.$isParagraphNode=function(a){return a instanceof Cf},exports.$isRangeSelection=C,exports.$isRootNode=K,exports.$isRootOrShadowRoot=yc,exports.$isTabNode=function(a){return a instanceof ye},exports.$isTextNode=B,exports.$nodesOfType=function(a){var b=ac();let c=b._readOnly,d=a.getType();b=b._nodeMap;let e=[];for(let[,f]of b)f instanceof a&&f.__type===d&&(c||f.isAttached())&&e.push(f);return e},exports.$normalizeSelection__EXPERIMENTAL=Gb,exports.$parseSerializedNode=function(a){return nf(a,F()._nodes)},exports.$selectAll=function(){var a=hc();yb(Gb(a=a.select(0,a.getChildrenSize())))},exports.$setCompositionKey=H,exports.$setSelection=yb,exports.$splitNode=Ec,exports.BLUR_COMMAND=Ra,exports.CAN_REDO_COMMAND={},exports.CAN_UNDO_COMMAND={},exports.CLEAR_EDITOR_COMMAND={},exports.CLEAR_HISTORY_COMMAND={},exports.CLICK_COMMAND=ba,exports.COMMAND_PRIORITY_CRITICAL=4,exports.COMMAND_PRIORITY_EDITOR=0,exports.COMMAND_PRIORITY_HIGH=3,exports.COMMAND_PRIORITY_LOW=1,exports.COMMAND_PRIORITY_NORMAL=2,exports.CONTROLLED_TEXT_INSERTION_COMMAND=ha,exports.COPY_COMMAND=Na,exports.CUT_COMMAND=Oa,exports.DELETE_CHARACTER_COMMAND=da,exports.DELETE_LINE_COMMAND=pa,exports.DELETE_WORD_COMMAND=na,exports.DEPRECATED_$computeGridMap=Ve,exports.DEPRECATED_$createGridSelection=function(){let a=new ze("root",0,"element"),b=new ze("root",0,"element");return new Qe("root",a,b)},exports.DEPRECATED_$getGridCellNodeRect=Oe,exports.DEPRECATED_$getNodeTriplet=Pe,exports.DEPRECATED_$isGridCellNode=P,exports.DEPRECATED_$isGridNode=Ue,exports.DEPRECATED_$isGridRowNode=Te,exports.DEPRECATED_$isGridSelection=Re,exports.DEPRECATED_GridCellNode=gf,exports.DEPRECATED_GridNode=Lf,exports.DEPRECATED_GridRowNode=Mf,exports.DRAGEND_COMMAND=Ma,exports.DRAGOVER_COMMAND=La,exports.DRAGSTART_COMMAND=Ka,exports.DROP_COMMAND=Ja,exports.DecoratorNode=wf,exports.ElementNode=xf,exports.FOCUS_COMMAND=Qa,exports.FORMAT_ELEMENT_COMMAND={},exports.FORMAT_TEXT_COMMAND=qa,exports.INDENT_CONTENT_COMMAND={},exports.INSERT_LINE_BREAK_COMMAND=ea,exports.INSERT_PARAGRAPH_COMMAND=fa,exports.INSERT_TAB_COMMAND={},exports.KEY_ARROW_DOWN_COMMAND=Aa,exports.KEY_ARROW_LEFT_COMMAND=xa,exports.KEY_ARROW_RIGHT_COMMAND=ua,exports.KEY_ARROW_UP_COMMAND=za,exports.KEY_BACKSPACE_COMMAND=Fa,exports.KEY_DELETE_COMMAND=Ha,exports.KEY_DOWN_COMMAND=ta,exports.KEY_ENTER_COMMAND=Ba,exports.KEY_ESCAPE_COMMAND=Ga,exports.KEY_MODIFIER_COMMAND=Sa,exports.KEY_SPACE_COMMAND=Ca,exports.KEY_TAB_COMMAND=Ia,exports.LineBreakNode=ee,exports.MOVE_TO_END=va,exports.MOVE_TO_START=ya,exports.OUTDENT_CONTENT_COMMAND={},exports.PASTE_COMMAND=ka,exports.ParagraphNode=Cf,exports.REDO_COMMAND=sa,exports.REMOVE_TEXT_COMMAND=ma,exports.RootNode=zf,exports.SELECTION_CHANGE_COMMAND=aa,exports.SELECT_ALL_COMMAND=Pa,exports.TabNode=ye,exports.TextNode=me,exports.UNDO_COMMAND=ra,exports.createCommand=function(){return{}},exports.createEditor=function(a){var b=a||{},c=T,d=b.theme||{};let e=void 0===a?c:b.parentEditor||null,f=b.disableEvents||!1,g=Af(),h=b.namespace||(null!==e?e._config.namespace:mc()),k=b.editorState,m=[zf,me,ee,ye,Cf,...b.nodes||[]],n=b.onError;if(b=void 0===b.editable||b.editable,void 0===a&&null!==c)a=c._nodes;else for(a=new Map,c=0;c<m.length;c++){let l=m[c],q=null;var p=null;"function"!=typeof l&&(l=(p=l).replace,q=p.with,p=p.withKlass?p.withKlass:null);let u=l.getType(),x=l.transform(),y=new Set;null!==x&&y.add(x),a.set(u,{klass:l,replace:q,replaceWithKlass:p,transforms:y})}return d=new Kf(g,e,a,{disableEvents:f,namespace:h,theme:d},n||console.error,function Jf(a){let b=new Map,c=new Set;return a.forEach((d=>{if(null!=(d=null!=d.klass.importDOM?d.klass.importDOM.bind(d.klass):null)&&!c.has(d)){c.add(d);var e=d();null!==e&&Object.keys(e).forEach((f=>{let g=b.get(f);void 0===g&&(g=[],b.set(f,g)),g.push(e[f])}))}})),b}(a),b),void 0!==k&&(d._pendingEditorState=k,d._dirtyType=2),d},exports.getNearestEditorFromDOMNode=Mb,exports.isHTMLAnchorElement=function(a){return Hc(a)&&"A"===a.tagName},exports.isHTMLElement=Hc,exports.isSelectionCapturedInDecoratorInput=Kb,exports.isSelectionWithinEditor=Lb},"./node_modules/lodash.isequal/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:function stubArray(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},"./node_modules/lodash.throttle/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectToString=Object.prototype.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var result=wait-(time-lastCallTime);return maxing?nativeMin(result,maxWait-(time-lastInvokeTime)):result}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function toNumber(value){if("number"==typeof value)return value;if(function isSymbol(value){return"symbol"==typeof value||function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading,maxWait:wait,trailing})}},"./node_modules/lodash.uniq/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var LARGE_ARRAY_SIZE=200,funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function arrayIncludes(array,value){return!!(array?array.length:0)&&function baseIndexOf(array,value,fromIndex){if(value!=value)return function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);for(;fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}(array,baseIsNaN,fromIndex);var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array?array.length:0;++index<length;)if(comparator(value,array[index]))return!0;return!1}function baseIsNaN(value){return value!=value}function cacheHas(cache,key){return cache.has(key)}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),splice=arrayProto.splice,Map=getNative(root,"Map"),Set=getNative(root,"Set"),nativeCreate=getNative(Object,"create");function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=values?values.length:0;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function assocIndexOf(array,key){for(var value,other,length=array.length;length--;)if((value=array[length][0])===(other=key)||value!=value&&other!=other)return length;return-1}function baseIsNative(value){if(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))return!1;var pattern=function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}(value)||function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}(value)?reIsNative:reIsHostCtor;return pattern.test(function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}(value))}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)};var createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:function noop(){};function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}module.exports=function uniq(array){return array&&array.length?function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}(array):[]}},"./node_modules/lz-string/libs/lz-string.js":(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__,LZString=function(){var f=String.fromCharCode,keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}var LZString={compressToBase64:function(input){if(null==input)return"";var res=LZString._compress(input,6,(function(a){return keyStrBase64.charAt(a)}));switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){return null==input?"":""==input?null:LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrBase64,input.charAt(index))}))},compressToUTF16:function(input){return null==input?"":LZString._compress(input,15,(function(a){return f(a+32)}))+" "},decompressFromUTF16:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,16384,(function(index){return compressed.charCodeAt(index)-32}))},compressToUint8Array:function(uncompressed){for(var compressed=LZString.compress(uncompressed),buf=new Uint8Array(2*compressed.length),i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[2*i]=current_value>>>8,buf[2*i+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(null==compressed)return LZString.decompress(compressed);for(var buf=new Array(compressed.length/2),i=0,TotalLen=buf.length;i<TotalLen;i++)buf[i]=256*compressed[2*i]+compressed[2*i+1];var result=[];return buf.forEach((function(c){result.push(f(c))})),LZString.decompress(result.join(""))},compressToEncodedURIComponent:function(input){return null==input?"":LZString._compress(input,6,(function(a){return keyStrUriSafe.charAt(a)}))},decompressFromEncodedURIComponent:function(input){return null==input?"":""==input?null:(input=input.replace(/ /g,"+"),LZString._decompress(input.length,32,(function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})))},compress:function(uncompressed){return LZString._compress(uncompressed,16,(function(a){return f(a)}))},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";var i,value,ii,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0;for(ii=0;ii<uncompressed.length;ii+=1)if(context_c=uncompressed.charAt(ii),Object.prototype.hasOwnProperty.call(context_dictionary,context_c)||(context_dictionary[context_c]=context_dictSize++,context_dictionaryToCreate[context_c]=!0),context_wc=context_w+context_c,Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),context_dictionary[context_wc]=context_dictSize++,context_w=String(context_c)}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++)}for(value=2,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;for(;;){if(context_data_val<<=1,context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}context_data_position++}return context_data.join("")},decompress:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,32768,(function(index){return compressed.charCodeAt(index)}))},_decompress:function(length,resetValue,getNextValue){var i,w,bits,resb,maxpower,power,c,dictionary=[],enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1)dictionary[i]=i;for(bits=0,maxpower=Math.pow(2,2),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(bits){case 0:for(bits=0,maxpower=Math.pow(2,8),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 1:for(bits=0,maxpower=Math.pow(2,16),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 2:return""}for(dictionary[3]=c,w=c,result.push(c);;){if(data.index>length)return"";for(bits=0,maxpower=Math.pow(2,numBits),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(c=bits){case 0:for(bits=0,maxpower=Math.pow(2,8),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 1:for(bits=0,maxpower=Math.pow(2,16),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 2:return result.join("")}if(0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++),dictionary[c])entry=dictionary[c];else{if(c!==dictSize)return null;entry=w+w.charAt(0)}result.push(entry),dictionary[dictSize++]=w+entry.charAt(0),w=entry,0==--enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++)}}};return LZString}();void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return LZString}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"./node_modules/marked-admonition-extension/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>src_default});var admonitionTypes=["abstract","attention","bug","caution","danger","error","example","failure","hint","info","note","question","quote","success","tip","warning"],startReg=new RegExp(`^!!!\\s+(${admonitionTypes.join("|")})(?:\\s+)?(.*)$`),endReg=/^!!!\s*$/,config={nodeName:"div",className:"admonition",title:{nodeName:"p"}},src_default={extensions:[{name:"admonition",level:"block",start(src){var _a;const index=null==(_a=src.match(new RegExp(`(^|[\\r\\n])!!!\\s+(${admonitionTypes.join("|")})(?:\\s+)?(.*)`)))?void 0:_a.index;return index},tokenizer(src,_tokens){const lines=src.split(/\n/);if(startReg.test(lines[0])){const section={x:-1,y:-1},sections=[];for(let i=0,k=lines.length;i<k;i++)startReg.test(lines[i])?section.x=i:endReg.test(lines[i])&&(section.y=i,section.x>=0&&(sections.push({...section}),section.x=-1,section.y=-1));if(sections.length){const section2=sections[0],[_,icon,title]=startReg.exec(lines[section2.x])||[],text=lines.slice(section2.x+1,section2.y).join("\n"),token={type:"admonition",raw:lines.slice(section2.x,section2.y+1).join("\n"),icon,title,text,titleTokens:[],tokens:[],childTokens:["title","text"]};return this.lexer.inlineTokens(token.title,token.titleTokens),this.lexer.blockTokens(token.text,token.tokens),token}}},renderer(token){return`<${config.nodeName} class="${config.className} ${config.className}-${token.icon}">\n    <${config.title.nodeName} class="${config.className}-title">${this.parser.parseInline(token.titleTokens,null)}</${config.title.nodeName}>\n    ${this.parser.parse(token.tokens)}\n    </${config.nodeName}>`}}]}},"./node_modules/marked-emoji/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>markedEmoji});const defaultOptions={unicode:!1};function markedEmoji(options){if(!(options={...defaultOptions,...options}).emojis)throw new Error("Must provide emojis to markedEmoji");const emojiNames=Object.keys(options.emojis).map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|"),emojiRegex=new RegExp(`:(${emojiNames}):`),tokenizerRule=new RegExp(`^${emojiRegex.source}`);return{extensions:[{name:"emoji",level:"inline",start:src=>src.match(emojiRegex)?.index,tokenizer(src,tokens){const match=tokenizerRule.exec(src);if(!match)return;const name=match[1];let emoji=options.emojis[name],unicode=options.unicode;if("string"!=typeof emoji)if("string"==typeof emoji.char)emoji=emoji.char,unicode=!0;else{if("string"!=typeof emoji.url)return;emoji=emoji.url,unicode=!1}return{type:"emoji",raw:match[0],name,emoji,unicode}},renderer:token=>token.unicode?token.emoji:`<img alt="${token.name}" src="${token.emoji}">`}]}}},"./node_modules/marked-highlight/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function markedHighlight(options){if("function"==typeof options&&(options={highlight:options}),!options||"function"!=typeof options.highlight)throw new Error("Must provide highlight function");return"string"!=typeof options.langPrefix&&(options.langPrefix="language-"),{async:!!options.async,walkTokens(token){if("code"!==token.type)return;const lang=function getLang(token){return(token.lang||"").match(/\S*/)[0]}(token);if(options.async)return Promise.resolve(options.highlight(token.text,lang)).then(updateToken(token));const code=options.highlight(token.text,lang);if(code instanceof Promise)throw new Error("markedHighlight is not set to async but the highlight function is async. Set the async option to true on markedHighlight to await the async highlight function.");updateToken(token)(code)},renderer:{code(code,infoString,escaped){const lang=(infoString||"").match(/\S*/)[0],classAttr=lang?` class="${options.langPrefix}${escape(lang)}"`:"";return code=code.replace(/\n$/,""),`<pre><code${classAttr}>${escaped?code:escape(code,!0)}\n</code></pre>`}}}}function updateToken(token){return code=>{"string"==typeof code&&code!==token.text&&(token.escaped=!0,token.text=code)}}__webpack_require__.d(__webpack_exports__,{G:()=>markedHighlight});const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=ch=>escapeReplacements[ch];function escape(html,encode){if(encode){if(escapeTest.test(html))return html.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(html))return html.replace(escapeReplaceNoEncode,getEscapeReplacement);return html}},"./node_modules/marked/lib/marked.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _getDefaults(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}__webpack_require__.d(__webpack_exports__,{M2:()=>Marked});let _defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function changeDefaults(newDefaults){_defaults=newDefaults}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=ch=>escapeReplacements[ch];function escape(html,encode){if(encode){if(escapeTest.test(html))return html.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(html))return html.replace(escapeReplaceNoEncode,getEscapeReplacement);return html}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;const caret=/(^|[^\[])\^/g;function edit(regex,opt){regex="string"==typeof regex?regex:regex.source,opt=opt||"";const obj={replace:(name,val)=>(val=(val="object"==typeof val&&"source"in val?val.source:val).replace(caret,"$1"),regex=regex.replace(name,val),obj),getRegex:()=>new RegExp(regex,opt)};return obj}function cleanUrl(href){try{href=encodeURI(href).replace(/%25/g,"%")}catch(e){return null}return href}const noopTest={exec:()=>null};function splitCells(tableRow,count){const cells=tableRow.replace(/\|/g,((match,offset,str)=>{let escaped=!1,curr=offset;for(;--curr>=0&&"\\"===str[curr];)escaped=!escaped;return escaped?"|":" |"})).split(/ \|/);let i=0;if(cells[0].trim()||cells.shift(),cells.length>0&&!cells[cells.length-1].trim()&&cells.pop(),count)if(cells.length>count)cells.splice(count);else for(;cells.length<count;)cells.push("");for(;i<cells.length;i++)cells[i]=cells[i].trim().replace(/\\\|/g,"|");return cells}function rtrim(str,c,invert){const l=str.length;if(0===l)return"";let suffLen=0;for(;suffLen<l;){const currChar=str.charAt(l-suffLen-1);if(currChar!==c||invert){if(currChar===c||!invert)break;suffLen++}else suffLen++}return str.slice(0,l-suffLen)}function outputLink(cap,link,raw,lexer){const href=link.href,title=link.title?escape(link.title):null,text=cap[1].replace(/\\([\[\]])/g,"$1");if("!"!==cap[0].charAt(0)){lexer.state.inLink=!0;const token={type:"link",raw,href,title,text,tokens:lexer.inlineTokens(text)};return lexer.state.inLink=!1,token}return{type:"image",raw,href,title,text:escape(text)}}class _Tokenizer{options;rules;lexer;constructor(options){this.options=options||_defaults}space(src){const cap=this.rules.block.newline.exec(src);if(cap&&cap[0].length>0)return{type:"space",raw:cap[0]}}code(src){const cap=this.rules.block.code.exec(src);if(cap){const text=cap[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:cap[0],codeBlockStyle:"indented",text:this.options.pedantic?text:rtrim(text,"\n")}}}fences(src){const cap=this.rules.block.fences.exec(src);if(cap){const raw=cap[0],text=function indentCodeCompensation(raw,text){const matchIndentToCode=raw.match(/^(\s+)(?:```)/);if(null===matchIndentToCode)return text;const indentToCode=matchIndentToCode[1];return text.split("\n").map((node=>{const matchIndentInNode=node.match(/^\s+/);if(null===matchIndentInNode)return node;const[indentInNode]=matchIndentInNode;return indentInNode.length>=indentToCode.length?node.slice(indentToCode.length):node})).join("\n")}(raw,cap[3]||"");return{type:"code",raw,lang:cap[2]?cap[2].trim().replace(this.rules.inline._escapes,"$1"):cap[2],text}}}heading(src){const cap=this.rules.block.heading.exec(src);if(cap){let text=cap[2].trim();if(/#$/.test(text)){const trimmed=rtrim(text,"#");this.options.pedantic?text=trimmed.trim():trimmed&&!/ $/.test(trimmed)||(text=trimmed.trim())}return{type:"heading",raw:cap[0],depth:cap[1].length,text,tokens:this.lexer.inline(text)}}}hr(src){const cap=this.rules.block.hr.exec(src);if(cap)return{type:"hr",raw:cap[0]}}blockquote(src){const cap=this.rules.block.blockquote.exec(src);if(cap){const text=rtrim(cap[0].replace(/^ *>[ \t]?/gm,""),"\n"),top=this.lexer.state.top;this.lexer.state.top=!0;const tokens=this.lexer.blockTokens(text);return this.lexer.state.top=top,{type:"blockquote",raw:cap[0],tokens,text}}}list(src){let cap=this.rules.block.list.exec(src);if(cap){let bull=cap[1].trim();const isordered=bull.length>1,list={type:"list",raw:"",ordered:isordered,start:isordered?+bull.slice(0,-1):"",loose:!1,items:[]};bull=isordered?`\\d{1,9}\\${bull.slice(-1)}`:`\\${bull}`,this.options.pedantic&&(bull=isordered?bull:"[*+-]");const itemRegex=new RegExp(`^( {0,3}${bull})((?:[\t ][^\\n]*)?(?:\\n|$))`);let raw="",itemContents="",endsWithBlankLine=!1;for(;src;){let endEarly=!1;if(!(cap=itemRegex.exec(src)))break;if(this.rules.block.hr.test(src))break;raw=cap[0],src=src.substring(raw.length);let line=cap[2].split("\n",1)[0].replace(/^\t+/,(t=>" ".repeat(3*t.length))),nextLine=src.split("\n",1)[0],indent=0;this.options.pedantic?(indent=2,itemContents=line.trimStart()):(indent=cap[2].search(/[^ ]/),indent=indent>4?1:indent,itemContents=line.slice(indent),indent+=cap[1].length);let blankLine=!1;if(!line&&/^ *$/.test(nextLine)&&(raw+=nextLine+"\n",src=src.substring(nextLine.length+1),endEarly=!0),!endEarly){const nextBulletRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:\`\`\`|~~~)`),headingBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}#`);for(;src;){const rawLine=src.split("\n",1)[0];if(nextLine=rawLine,this.options.pedantic&&(nextLine=nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),fencesBeginRegex.test(nextLine))break;if(headingBeginRegex.test(nextLine))break;if(nextBulletRegex.test(nextLine))break;if(hrRegex.test(src))break;if(nextLine.search(/[^ ]/)>=indent||!nextLine.trim())itemContents+="\n"+nextLine.slice(indent);else{if(blankLine)break;if(line.search(/[^ ]/)>=4)break;if(fencesBeginRegex.test(line))break;if(headingBeginRegex.test(line))break;if(hrRegex.test(line))break;itemContents+="\n"+nextLine}blankLine||nextLine.trim()||(blankLine=!0),raw+=rawLine+"\n",src=src.substring(rawLine.length+1),line=nextLine.slice(indent)}}list.loose||(endsWithBlankLine?list.loose=!0:/\n *\n *$/.test(raw)&&(endsWithBlankLine=!0));let ischecked,istask=null;this.options.gfm&&(istask=/^\[[ xX]\] /.exec(itemContents),istask&&(ischecked="[ ] "!==istask[0],itemContents=itemContents.replace(/^\[[ xX]\] +/,""))),list.items.push({type:"list_item",raw,task:!!istask,checked:ischecked,loose:!1,text:itemContents,tokens:[]}),list.raw+=raw}list.items[list.items.length-1].raw=raw.trimEnd(),list.items[list.items.length-1].text=itemContents.trimEnd(),list.raw=list.raw.trimEnd();for(let i=0;i<list.items.length;i++)if(this.lexer.state.top=!1,list.items[i].tokens=this.lexer.blockTokens(list.items[i].text,[]),!list.loose){const spacers=list.items[i].tokens.filter((t=>"space"===t.type)),hasMultipleLineBreaks=spacers.length>0&&spacers.some((t=>/\n.*\n/.test(t.raw)));list.loose=hasMultipleLineBreaks}if(list.loose)for(let i=0;i<list.items.length;i++)list.items[i].loose=!0;return list}}html(src){const cap=this.rules.block.html.exec(src);if(cap){return{type:"html",block:!0,raw:cap[0],pre:"pre"===cap[1]||"script"===cap[1]||"style"===cap[1],text:cap[0]}}}def(src){const cap=this.rules.block.def.exec(src);if(cap){const tag=cap[1].toLowerCase().replace(/\s+/g," "),href=cap[2]?cap[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",title=cap[3]?cap[3].substring(1,cap[3].length-1).replace(this.rules.inline._escapes,"$1"):cap[3];return{type:"def",tag,raw:cap[0],href,title}}}table(src){const cap=this.rules.block.table.exec(src);if(cap){if(!/[:|]/.test(cap[2]))return;const item={type:"table",raw:cap[0],header:splitCells(cap[1]).map((c=>({text:c,tokens:[]}))),align:cap[2].replace(/^\||\| *$/g,"").split("|"),rows:cap[3]&&cap[3].trim()?cap[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(item.header.length===item.align.length){let i,j,k,row,l=item.align.length;for(i=0;i<l;i++){const align=item.align[i];align&&(/^ *-+: *$/.test(align)?item.align[i]="right":/^ *:-+: *$/.test(align)?item.align[i]="center":/^ *:-+ *$/.test(align)?item.align[i]="left":item.align[i]=null)}for(l=item.rows.length,i=0;i<l;i++)item.rows[i]=splitCells(item.rows[i],item.header.length).map((c=>({text:c,tokens:[]})));for(l=item.header.length,j=0;j<l;j++)item.header[j].tokens=this.lexer.inline(item.header[j].text);for(l=item.rows.length,j=0;j<l;j++)for(row=item.rows[j],k=0;k<row.length;k++)row[k].tokens=this.lexer.inline(row[k].text);return item}}}lheading(src){const cap=this.rules.block.lheading.exec(src);if(cap)return{type:"heading",raw:cap[0],depth:"="===cap[2].charAt(0)?1:2,text:cap[1],tokens:this.lexer.inline(cap[1])}}paragraph(src){const cap=this.rules.block.paragraph.exec(src);if(cap){const text="\n"===cap[1].charAt(cap[1].length-1)?cap[1].slice(0,-1):cap[1];return{type:"paragraph",raw:cap[0],text,tokens:this.lexer.inline(text)}}}text(src){const cap=this.rules.block.text.exec(src);if(cap)return{type:"text",raw:cap[0],text:cap[0],tokens:this.lexer.inline(cap[0])}}escape(src){const cap=this.rules.inline.escape.exec(src);if(cap)return{type:"escape",raw:cap[0],text:escape(cap[1])}}tag(src){const cap=this.rules.inline.tag.exec(src);if(cap)return!this.lexer.state.inLink&&/^<a /i.test(cap[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(cap[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:cap[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:cap[0]}}link(src){const cap=this.rules.inline.link.exec(src);if(cap){const trimmedUrl=cap[2].trim();if(!this.options.pedantic&&/^</.test(trimmedUrl)){if(!/>$/.test(trimmedUrl))return;const rtrimSlash=rtrim(trimmedUrl.slice(0,-1),"\\");if((trimmedUrl.length-rtrimSlash.length)%2==0)return}else{const lastParenIndex=function findClosingBracket(str,b){if(-1===str.indexOf(b[1]))return-1;let level=0;for(let i=0;i<str.length;i++)if("\\"===str[i])i++;else if(str[i]===b[0])level++;else if(str[i]===b[1]&&(level--,level<0))return i;return-1}(cap[2],"()");if(lastParenIndex>-1){const linkLen=(0===cap[0].indexOf("!")?5:4)+cap[1].length+lastParenIndex;cap[2]=cap[2].substring(0,lastParenIndex),cap[0]=cap[0].substring(0,linkLen).trim(),cap[3]=""}}let href=cap[2],title="";if(this.options.pedantic){const link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);link&&(href=link[1],title=link[3])}else title=cap[3]?cap[3].slice(1,-1):"";return href=href.trim(),/^</.test(href)&&(href=this.options.pedantic&&!/>$/.test(trimmedUrl)?href.slice(1):href.slice(1,-1)),outputLink(cap,{href:href?href.replace(this.rules.inline._escapes,"$1"):href,title:title?title.replace(this.rules.inline._escapes,"$1"):title},cap[0],this.lexer)}}reflink(src,links){let cap;if((cap=this.rules.inline.reflink.exec(src))||(cap=this.rules.inline.nolink.exec(src))){let link=(cap[2]||cap[1]).replace(/\s+/g," ");if(link=links[link.toLowerCase()],!link){const text=cap[0].charAt(0);return{type:"text",raw:text,text}}return outputLink(cap,link,cap[0],this.lexer)}}emStrong(src,maskedSrc,prevChar=""){let match=this.rules.inline.emStrong.lDelim.exec(src);if(!match)return;if(match[3]&&prevChar.match(/[\p{L}\p{N}]/u))return;if(!(match[1]||match[2]||"")||!prevChar||this.rules.inline.punctuation.exec(prevChar)){const lLength=[...match[0]].length-1;let rDelim,rLength,delimTotal=lLength,midDelimTotal=0;const endReg="*"===match[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(endReg.lastIndex=0,maskedSrc=maskedSrc.slice(-1*src.length+match[0].length-1);null!=(match=endReg.exec(maskedSrc));){if(rDelim=match[1]||match[2]||match[3]||match[4]||match[5]||match[6],!rDelim)continue;if(rLength=[...rDelim].length,match[3]||match[4]){delimTotal+=rLength;continue}if((match[5]||match[6])&&lLength%3&&!((lLength+rLength)%3)){midDelimTotal+=rLength;continue}if(delimTotal-=rLength,delimTotal>0)continue;rLength=Math.min(rLength,rLength+delimTotal+midDelimTotal);const raw=[...src].slice(0,lLength+match.index+rLength+1).join("");if(Math.min(lLength,rLength)%2){const text=raw.slice(1,-1);return{type:"em",raw,text,tokens:this.lexer.inlineTokens(text)}}const text=raw.slice(2,-2);return{type:"strong",raw,text,tokens:this.lexer.inlineTokens(text)}}}}codespan(src){const cap=this.rules.inline.code.exec(src);if(cap){let text=cap[2].replace(/\n/g," ");const hasNonSpaceChars=/[^ ]/.test(text),hasSpaceCharsOnBothEnds=/^ /.test(text)&&/ $/.test(text);return hasNonSpaceChars&&hasSpaceCharsOnBothEnds&&(text=text.substring(1,text.length-1)),text=escape(text,!0),{type:"codespan",raw:cap[0],text}}}br(src){const cap=this.rules.inline.br.exec(src);if(cap)return{type:"br",raw:cap[0]}}del(src){const cap=this.rules.inline.del.exec(src);if(cap)return{type:"del",raw:cap[0],text:cap[2],tokens:this.lexer.inlineTokens(cap[2])}}autolink(src){const cap=this.rules.inline.autolink.exec(src);if(cap){let text,href;return"@"===cap[2]?(text=escape(cap[1]),href="mailto:"+text):(text=escape(cap[1]),href=text),{type:"link",raw:cap[0],text,href,tokens:[{type:"text",raw:text,text}]}}}url(src){let cap;if(cap=this.rules.inline.url.exec(src)){let text,href;if("@"===cap[2])text=escape(cap[0]),href="mailto:"+text;else{let prevCapZero;do{prevCapZero=cap[0],cap[0]=this.rules.inline._backpedal.exec(cap[0])[0]}while(prevCapZero!==cap[0]);text=escape(cap[0]),href="www."===cap[1]?"http://"+cap[0]:cap[0]}return{type:"link",raw:cap[0],text,href,tokens:[{type:"text",raw:text,text}]}}}inlineText(src){const cap=this.rules.inline.text.exec(src);if(cap){let text;return text=this.lexer.state.inRawBlock?cap[0]:escape(cap[0]),{type:"text",raw:cap[0],text}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex(),block.bullet=/(?:[*+-]|\d{1,9}[.)])/,block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex(),block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex(),block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),block.lheading=edit(block.lheading).replace(/bull/g,block.bullet).getRegex(),block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex(),block.normal={...block},block.gfm={...block.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.pedantic={...block.normal,html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};inline.punctuation=edit(inline.punctuation,"u").replace(/punctuation/g,inline._punctuation).getRegex(),inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,inline.anyPunctuation=/\\[punct]/g,inline._escapes=/\\([punct])/g,inline._comment=edit(block._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),inline.emStrong.lDelim=edit(inline.emStrong.lDelim,"u").replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"gu").replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"gu").replace(/punct/g,inline._punctuation).getRegex(),inline.anyPunctuation=edit(inline.anyPunctuation,"gu").replace(/punct/g,inline._punctuation).getRegex(),inline._escapes=edit(inline._escapes,"gu").replace(/punct/g,inline._punctuation).getRegex(),inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex(),inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex(),inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex(),inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex(),inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex(),inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex(),inline.normal={...inline},inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()},inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex(),inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class _Lexer{tokens;options;state;tokenizer;inlineQueue;constructor(options){this.tokens=[],this.tokens.links=Object.create(null),this.options=options||_defaults,this.options.tokenizer=this.options.tokenizer||new _Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const rules={block:block.normal,inline:inline.normal};this.options.pedantic?(rules.block=block.pedantic,rules.inline=inline.pedantic):this.options.gfm&&(rules.block=block.gfm,this.options.breaks?rules.inline=inline.breaks:rules.inline=inline.gfm),this.tokenizer.rules=rules}static get rules(){return{block,inline}}static lex(src,options){return new _Lexer(options).lex(src)}static lexInline(src,options){return new _Lexer(options).inlineTokens(src)}lex(src){let next;for(src=src.replace(/\r\n|\r/g,"\n"),this.blockTokens(src,this.tokens);next=this.inlineQueue.shift();)this.inlineTokens(next.src,next.tokens);return this.tokens}blockTokens(src,tokens=[]){let token,lastToken,cutSrc,lastParagraphClipped;for(src=this.options.pedantic?src.replace(/\t/g,"    ").replace(/^ +$/gm,""):src.replace(/^( *)(\t+)/gm,((_,leading,tabs)=>leading+"    ".repeat(tabs.length)));src;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))))if(token=this.tokenizer.space(src))src=src.substring(token.raw.length),1===token.raw.length&&tokens.length>0?tokens[tokens.length-1].raw+="\n":tokens.push(token);else if(token=this.tokenizer.code(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?tokens.push(token):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);else if(token=this.tokenizer.fences(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.heading(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.hr(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.blockquote(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.list(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.html(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.def(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?this.tokens.links[token.tag]||(this.tokens.links[token.tag]={href:token.href,title:token.title}):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.raw,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);else if(token=this.tokenizer.table(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.lheading(src))src=src.substring(token.raw.length),tokens.push(token);else{if(cutSrc=src,this.options.extensions&&this.options.extensions.startBlock){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startBlock.forEach((getStartIndex=>{tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))})),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(this.state.top&&(token=this.tokenizer.paragraph(cutSrc)))lastToken=tokens[tokens.length-1],lastParagraphClipped&&"paragraph"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token),lastParagraphClipped=cutSrc.length!==src.length,src=src.substring(token.raw.length);else if(token=this.tokenizer.text(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token);else if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}return this.state.top=!0,tokens}inline(src,tokens=[]){return this.inlineQueue.push({src,tokens}),tokens}inlineTokens(src,tokens=[]){let token,lastToken,cutSrc,match,keepPrevChar,prevChar,maskedSrc=src;if(this.tokens.links){const links=Object.keys(this.tokens.links);if(links.length>0)for(;null!=(match=this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc));)links.includes(match[0].slice(match[0].lastIndexOf("[")+1,-1))&&(maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(match=this.tokenizer.rules.inline.blockSkip.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(match=this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index)+"++"+maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;src;)if(keepPrevChar||(prevChar=""),keepPrevChar=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))))if(token=this.tokenizer.escape(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.tag(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(token=this.tokenizer.link(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.reflink(src,this.tokens.links))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(token=this.tokenizer.emStrong(src,maskedSrc,prevChar))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.codespan(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.br(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.del(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.autolink(src))src=src.substring(token.raw.length),tokens.push(token);else if(this.state.inLink||!(token=this.tokenizer.url(src))){if(cutSrc=src,this.options.extensions&&this.options.extensions.startInline){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startInline.forEach((getStartIndex=>{tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))})),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(token=this.tokenizer.inlineText(cutSrc))src=src.substring(token.raw.length),"_"!==token.raw.slice(-1)&&(prevChar=token.raw.slice(-1)),keepPrevChar=!0,lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}else src=src.substring(token.raw.length),tokens.push(token);return tokens}}class _Renderer{options;constructor(options){this.options=options||_defaults}code(code,infostring,escaped){const lang=(infostring||"").match(/^\S*/)?.[0];return code=code.replace(/\n$/,"")+"\n",lang?'<pre><code class="language-'+escape(lang)+'">'+(escaped?code:escape(code,!0))+"</code></pre>\n":"<pre><code>"+(escaped?code:escape(code,!0))+"</code></pre>\n"}blockquote(quote){return`<blockquote>\n${quote}</blockquote>\n`}html(html,block){return html}heading(text,level,raw){return`<h${level}>${text}</h${level}>\n`}hr(){return"<hr>\n"}list(body,ordered,start){const type=ordered?"ol":"ul";return"<"+type+(ordered&&1!==start?' start="'+start+'"':"")+">\n"+body+"</"+type+">\n"}listitem(text,task,checked){return`<li>${text}</li>\n`}checkbox(checked){return"<input "+(checked?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(text){return`<p>${text}</p>\n`}table(header,body){return body&&(body=`<tbody>${body}</tbody>`),"<table>\n<thead>\n"+header+"</thead>\n"+body+"</table>\n"}tablerow(content){return`<tr>\n${content}</tr>\n`}tablecell(content,flags){const type=flags.header?"th":"td";return(flags.align?`<${type} align="${flags.align}">`:`<${type}>`)+content+`</${type}>\n`}strong(text){return`<strong>${text}</strong>`}em(text){return`<em>${text}</em>`}codespan(text){return`<code>${text}</code>`}br(){return"<br>"}del(text){return`<del>${text}</del>`}link(href,title,text){const cleanHref=cleanUrl(href);if(null===cleanHref)return text;let out='<a href="'+(href=cleanHref)+'"';return title&&(out+=' title="'+title+'"'),out+=">"+text+"</a>",out}image(href,title,text){const cleanHref=cleanUrl(href);if(null===cleanHref)return text;let out=`<img src="${href=cleanHref}" alt="${text}"`;return title&&(out+=` title="${title}"`),out+=">",out}text(text){return text}}class _TextRenderer{strong(text){return text}em(text){return text}codespan(text){return text}del(text){return text}html(text){return text}text(text){return text}link(href,title,text){return""+text}image(href,title,text){return""+text}br(){return""}}class _Parser{options;renderer;textRenderer;constructor(options){this.options=options||_defaults,this.options.renderer=this.options.renderer||new _Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new _TextRenderer}static parse(tokens,options){return new _Parser(options).parse(tokens)}static parseInline(tokens,options){return new _Parser(options).parseInline(tokens)}parse(tokens,top=!0){let out="";for(let i=0;i<tokens.length;i++){const token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){const genericToken=token,ret=this.options.extensions.renderers[genericToken.type].call({parser:this},genericToken);if(!1!==ret||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(genericToken.type)){out+=ret||"";continue}}switch(token.type){case"space":continue;case"hr":out+=this.renderer.hr();continue;case"heading":{const headingToken=token;out+=this.renderer.heading(this.parseInline(headingToken.tokens),headingToken.depth,this.parseInline(headingToken.tokens,this.textRenderer).replace(unescapeTest,((_,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")));continue}case"code":{const codeToken=token;out+=this.renderer.code(codeToken.text,codeToken.lang,!!codeToken.escaped);continue}case"table":{const tableToken=token;let header="",cell="";for(let j=0;j<tableToken.header.length;j++)cell+=this.renderer.tablecell(this.parseInline(tableToken.header[j].tokens),{header:!0,align:tableToken.align[j]});header+=this.renderer.tablerow(cell);let body="";for(let j=0;j<tableToken.rows.length;j++){const row=tableToken.rows[j];cell="";for(let k=0;k<row.length;k++)cell+=this.renderer.tablecell(this.parseInline(row[k].tokens),{header:!1,align:tableToken.align[k]});body+=this.renderer.tablerow(cell)}out+=this.renderer.table(header,body);continue}case"blockquote":{const blockquoteToken=token,body=this.parse(blockquoteToken.tokens);out+=this.renderer.blockquote(body);continue}case"list":{const listToken=token,ordered=listToken.ordered,start=listToken.start,loose=listToken.loose;let body="";for(let j=0;j<listToken.items.length;j++){const item=listToken.items[j],checked=item.checked,task=item.task;let itemBody="";if(item.task){const checkbox=this.renderer.checkbox(!!checked);loose?item.tokens.length>0&&"paragraph"===item.tokens[0].type?(item.tokens[0].text=checkbox+" "+item.tokens[0].text,item.tokens[0].tokens&&item.tokens[0].tokens.length>0&&"text"===item.tokens[0].tokens[0].type&&(item.tokens[0].tokens[0].text=checkbox+" "+item.tokens[0].tokens[0].text)):item.tokens.unshift({type:"text",text:checkbox+" "}):itemBody+=checkbox+" "}itemBody+=this.parse(item.tokens,loose),body+=this.renderer.listitem(itemBody,task,!!checked)}out+=this.renderer.list(body,ordered,start);continue}case"html":{const htmlToken=token;out+=this.renderer.html(htmlToken.text,htmlToken.block);continue}case"paragraph":{const paragraphToken=token;out+=this.renderer.paragraph(this.parseInline(paragraphToken.tokens));continue}case"text":{let textToken=token,body=textToken.tokens?this.parseInline(textToken.tokens):textToken.text;for(;i+1<tokens.length&&"text"===tokens[i+1].type;)textToken=tokens[++i],body+="\n"+(textToken.tokens?this.parseInline(textToken.tokens):textToken.text);out+=top?this.renderer.paragraph(body):body;continue}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return console.error(errMsg),"";throw new Error(errMsg)}}}return out}parseInline(tokens,renderer){renderer=renderer||this.renderer;let out="";for(let i=0;i<tokens.length;i++){const token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){const ret=this.options.extensions.renderers[token.type].call({parser:this},token);if(!1!==ret||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(token.type)){out+=ret||"";continue}}switch(token.type){case"escape":{const escapeToken=token;out+=renderer.text(escapeToken.text);break}case"html":{const tagToken=token;out+=renderer.html(tagToken.text);break}case"link":{const linkToken=token;out+=renderer.link(linkToken.href,linkToken.title,this.parseInline(linkToken.tokens,renderer));break}case"image":{const imageToken=token;out+=renderer.image(imageToken.href,imageToken.title,imageToken.text);break}case"strong":{const strongToken=token;out+=renderer.strong(this.parseInline(strongToken.tokens,renderer));break}case"em":{const emToken=token;out+=renderer.em(this.parseInline(emToken.tokens,renderer));break}case"codespan":{const codespanToken=token;out+=renderer.codespan(codespanToken.text);break}case"br":out+=renderer.br();break;case"del":{const delToken=token;out+=renderer.del(this.parseInline(delToken.tokens,renderer));break}case"text":{const textToken=token;out+=renderer.text(textToken.text);break}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return console.error(errMsg),"";throw new Error(errMsg)}}}return out}}class _Hooks{options;constructor(options){this.options=options||_defaults}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(markdown){return markdown}postprocess(html){return html}}class Marked{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#parseMarkdown(_Lexer.lex,_Parser.parse);parseInline=this.#parseMarkdown(_Lexer.lexInline,_Parser.parseInline);Parser=_Parser;parser=_Parser.parse;Renderer=_Renderer;TextRenderer=_TextRenderer;Lexer=_Lexer;lexer=_Lexer.lex;Tokenizer=_Tokenizer;Hooks=_Hooks;constructor(...args){this.use(...args)}walkTokens(tokens,callback){let values=[];for(const token of tokens)switch(values=values.concat(callback.call(this,token)),token.type){case"table":{const tableToken=token;for(const cell of tableToken.header)values=values.concat(this.walkTokens(cell.tokens,callback));for(const row of tableToken.rows)for(const cell of row)values=values.concat(this.walkTokens(cell.tokens,callback));break}case"list":{const listToken=token;values=values.concat(this.walkTokens(listToken.items,callback));break}default:{const genericToken=token;this.defaults.extensions?.childTokens?.[genericToken.type]?this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens=>{values=values.concat(this.walkTokens(genericToken[childTokens],callback))})):genericToken.tokens&&(values=values.concat(this.walkTokens(genericToken.tokens,callback)))}}return values}use(...args){const extensions=this.defaults.extensions||{renderers:{},childTokens:{}};return args.forEach((pack=>{const opts={...pack};if(opts.async=this.defaults.async||opts.async||!1,pack.extensions&&(pack.extensions.forEach((ext=>{if(!ext.name)throw new Error("extension name required");if("renderer"in ext){const prevRenderer=extensions.renderers[ext.name];extensions.renderers[ext.name]=prevRenderer?function(...args){let ret=ext.renderer.apply(this,args);return!1===ret&&(ret=prevRenderer.apply(this,args)),ret}:ext.renderer}if("tokenizer"in ext){if(!ext.level||"block"!==ext.level&&"inline"!==ext.level)throw new Error("extension level must be 'block' or 'inline'");const extLevel=extensions[ext.level];extLevel?extLevel.unshift(ext.tokenizer):extensions[ext.level]=[ext.tokenizer],ext.start&&("block"===ext.level?extensions.startBlock?extensions.startBlock.push(ext.start):extensions.startBlock=[ext.start]:"inline"===ext.level&&(extensions.startInline?extensions.startInline.push(ext.start):extensions.startInline=[ext.start]))}"childTokens"in ext&&ext.childTokens&&(extensions.childTokens[ext.name]=ext.childTokens)})),opts.extensions=extensions),pack.renderer){const renderer=this.defaults.renderer||new _Renderer(this.defaults);for(const prop in pack.renderer){const rendererFunc=pack.renderer[prop],rendererKey=prop,prevRenderer=renderer[rendererKey];renderer[rendererKey]=(...args)=>{let ret=rendererFunc.apply(renderer,args);return!1===ret&&(ret=prevRenderer.apply(renderer,args)),ret||""}}opts.renderer=renderer}if(pack.tokenizer){const tokenizer=this.defaults.tokenizer||new _Tokenizer(this.defaults);for(const prop in pack.tokenizer){const tokenizerFunc=pack.tokenizer[prop],tokenizerKey=prop,prevTokenizer=tokenizer[tokenizerKey];tokenizer[tokenizerKey]=(...args)=>{let ret=tokenizerFunc.apply(tokenizer,args);return!1===ret&&(ret=prevTokenizer.apply(tokenizer,args)),ret}}opts.tokenizer=tokenizer}if(pack.hooks){const hooks=this.defaults.hooks||new _Hooks;for(const prop in pack.hooks){const hooksFunc=pack.hooks[prop],hooksKey=prop,prevHook=hooks[hooksKey];_Hooks.passThroughHooks.has(prop)?hooks[hooksKey]=arg=>{if(this.defaults.async)return Promise.resolve(hooksFunc.call(hooks,arg)).then((ret=>prevHook.call(hooks,ret)));const ret=hooksFunc.call(hooks,arg);return prevHook.call(hooks,ret)}:hooks[hooksKey]=(...args)=>{let ret=hooksFunc.apply(hooks,args);return!1===ret&&(ret=prevHook.apply(hooks,args)),ret}}opts.hooks=hooks}if(pack.walkTokens){const walkTokens=this.defaults.walkTokens,packWalktokens=pack.walkTokens;opts.walkTokens=function(token){let values=[];return values.push(packWalktokens.call(this,token)),walkTokens&&(values=values.concat(walkTokens.call(this,token))),values}}this.defaults={...this.defaults,...opts}})),this}setOptions(opt){return this.defaults={...this.defaults,...opt},this}#parseMarkdown(lexer,parser){return(src,options)=>{const origOpt={...options},opt={...this.defaults,...origOpt};!0===this.defaults.async&&!1===origOpt.async&&(opt.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),opt.async=!0);const throwError=this.#onError(!!opt.silent,!!opt.async);if(null==src)return throwError(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof src)return throwError(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(src)+", string expected"));if(opt.hooks&&(opt.hooks.options=opt),opt.async)return Promise.resolve(opt.hooks?opt.hooks.preprocess(src):src).then((src=>lexer(src,opt))).then((tokens=>opt.walkTokens?Promise.all(this.walkTokens(tokens,opt.walkTokens)).then((()=>tokens)):tokens)).then((tokens=>parser(tokens,opt))).then((html=>opt.hooks?opt.hooks.postprocess(html):html)).catch(throwError);try{opt.hooks&&(src=opt.hooks.preprocess(src));const tokens=lexer(src,opt);opt.walkTokens&&this.walkTokens(tokens,opt.walkTokens);let html=parser(tokens,opt);return opt.hooks&&(html=opt.hooks.postprocess(html)),html}catch(e){return throwError(e)}}}#onError(silent,async){return e=>{if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",silent){const msg="<p>An error occurred:</p><pre>"+escape(e.message+"",!0)+"</pre>";return async?Promise.resolve(msg):msg}if(async)return Promise.reject(e);throw e}}}const markedInstance=new Marked;function marked(src,opt){return markedInstance.parse(src,opt)}marked.options=marked.setOptions=function(options){return markedInstance.setOptions(options),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked},marked.getDefaults=_getDefaults,marked.defaults=_defaults,marked.use=function(...args){return markedInstance.use(...args),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked},marked.walkTokens=function(tokens,callback){return markedInstance.walkTokens(tokens,callback)},marked.parseInline=markedInstance.parseInline,marked.Parser=_Parser,marked.parser=_Parser.parse,marked.Renderer=_Renderer,marked.TextRenderer=_TextRenderer,marked.Lexer=_Lexer,marked.lexer=_Lexer.lex,marked.Tokenizer=_Tokenizer,marked.Hooks=_Hooks,marked.parse=marked;marked.options,marked.setOptions,marked.use,marked.walkTokens,marked.parseInline},"./node_modules/mdast-util-to-markdown/lib/handle/inline-code.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>inlineCode});var _util_pattern_compile_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/mdast-util-to-markdown/lib/util/pattern-compile.js");function inlineCode(node,_,state){let value=node.value||"",sequence="`",index=-1;for(;new RegExp("(^|[^`])"+sequence+"([^`]|$)").test(value);)sequence+="`";for(/[^ \r\n]/.test(value)&&(/^[ \r\n]/.test(value)&&/[ \r\n]$/.test(value)||/^`|`$/.test(value))&&(value=" "+value+" ");++index<state.unsafe.length;){const pattern=state.unsafe[index],expression=(0,_util_pattern_compile_js__WEBPACK_IMPORTED_MODULE_0__.T)(pattern);let match;if(pattern.atBreak)for(;match=expression.exec(value);){let position=match.index;10===value.charCodeAt(position)&&13===value.charCodeAt(position-1)&&position--,value=value.slice(0,position)+" "+value.slice(match.index+1)}}return sequence+value+sequence}inlineCode.peek=function inlineCodePeek(){return"`"}},"./node_modules/mdast-util-to-markdown/lib/util/check-quote.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function checkQuote(state){const marker=state.options.quote||'"';if('"'!==marker&&"'"!==marker)throw new Error("Cannot serialize title with `"+marker+"` for `options.quote`, expected `\"`, or `'`");return marker}__webpack_require__.d(__webpack_exports__,{l:()=>checkQuote})},"./node_modules/mdast-util-to-markdown/lib/util/container-flow.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function containerFlow(parent,state,info){const indexStack=state.indexStack,children=parent.children||[],tracker=state.createTracker(info),results=[];let index=-1;for(indexStack.push(-1);++index<children.length;){const child=children[index];indexStack[indexStack.length-1]=index,results.push(tracker.move(state.handle(child,parent,state,{before:"\n",after:"\n",...tracker.current()}))),"list"!==child.type&&(state.bulletLastUsed=void 0),index<children.length-1&&results.push(tracker.move(between(child,children[index+1],parent,state)))}return indexStack.pop(),results.join("")}function between(left,right,parent,state){let index=state.join.length;for(;index--;){const result=state.join[index](left,right,parent,state);if(!0===result||1===result)break;if("number"==typeof result)return"\n".repeat(1+result);if(!1===result)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}__webpack_require__.d(__webpack_exports__,{K:()=>containerFlow})},"./node_modules/mdast-util-to-markdown/lib/util/container-phrasing.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function containerPhrasing(parent,state,info){const indexStack=state.indexStack,children=parent.children||[],results=[];let index=-1,before=info.before;indexStack.push(-1);let tracker=state.createTracker(info);for(;++index<children.length;){const child=children[index];let after;if(indexStack[indexStack.length-1]=index,index+1<children.length){let handle=state.handle.handlers[children[index+1].type];handle&&handle.peek&&(handle=handle.peek),after=handle?handle(children[index+1],parent,state,{before:"",after:"",...tracker.current()}).charAt(0):""}else after=info.after;results.length>0&&("\r"===before||"\n"===before)&&"html"===child.type&&(results[results.length-1]=results[results.length-1].replace(/(\r?\n|\r)$/," "),before=" ",tracker=state.createTracker(info),tracker.move(results.join(""))),results.push(tracker.move(state.handle(child,parent,state,{...tracker.current(),before,after}))),before=results[results.length-1].slice(-1)}return indexStack.pop(),results.join("")}__webpack_require__.d(__webpack_exports__,{p:()=>containerPhrasing})},"./node_modules/mdast-util-to-markdown/lib/util/pattern-compile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function patternCompile(pattern){if(!pattern._compiled){const before=(pattern.atBreak?"[\\r\\n][\\t ]*":"")+(pattern.before?"(?:"+pattern.before+")":"");pattern._compiled=new RegExp((before?"("+before+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(pattern.character)?"\\":"")+pattern.character+(pattern.after?"(?:"+pattern.after+")":""),"g")}return pattern._compiled}__webpack_require__.d(__webpack_exports__,{T:()=>patternCompile})},"./node_modules/mdast-util-to-markdown/lib/util/track.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function track(config){const options=config||{},now=options.now||{};let lineShift=options.lineShift||0,line=now.line||1,column=now.column||1;return{move:function move(input){const value=input||"",chunks=value.split(/\r?\n|\r/g),tail=chunks[chunks.length-1];return line+=chunks.length-1,column=1===chunks.length?column+tail.length:1+tail.length+lineShift,value},current:function current(){return{now:{line,column},lineShift}},shift:function shift(value){lineShift+=value}}}__webpack_require__.d(__webpack_exports__,{j:()=>track})},"./node_modules/mdast-util-to-string/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>toString});const emptyOptions={};function toString(value,options){const settings=options||emptyOptions;return one(value,"boolean"!=typeof settings.includeImageAlt||settings.includeImageAlt,"boolean"!=typeof settings.includeHtml||settings.includeHtml)}function one(value,includeImageAlt,includeHtml){if(function node(value){return Boolean(value&&"object"==typeof value)}(value)){if("value"in value)return"html"!==value.type||includeHtml?value.value:"";if(includeImageAlt&&"alt"in value&&value.alt)return value.alt;if("children"in value)return all(value.children,includeImageAlt,includeHtml)}return Array.isArray(value)?all(value,includeImageAlt,includeHtml):""}function all(values,includeImageAlt,includeHtml){const result=[];let index=-1;for(;++index<values.length;)result[index]=one(values[index],includeImageAlt,includeHtml);return result.join("")}},"./node_modules/micromark-factory-space/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>factorySpace});var micromark_util_character__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/micromark-util-character/index.js");function factorySpace(effects,ok,type,max){const limit=max?max-1:Number.POSITIVE_INFINITY;let size=0;return function start(code){if((0,micromark_util_character__WEBPACK_IMPORTED_MODULE_0__.xz)(code))return effects.enter(type),prefix(code);return ok(code)};function prefix(code){return(0,micromark_util_character__WEBPACK_IMPORTED_MODULE_0__.xz)(code)&&size++<limit?(effects.consume(code),prefix):(effects.exit(type),ok(code))}}},"./node_modules/micromark-factory-whitespace/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>factoryWhitespace});var micromark_factory_space__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/micromark-factory-space/index.js"),micromark_util_character__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/micromark-util-character/index.js");function factoryWhitespace(effects,ok){let seen;return function start(code){if((0,micromark_util_character__WEBPACK_IMPORTED_MODULE_0__.Ch)(code))return effects.enter("lineEnding"),effects.consume(code),effects.exit("lineEnding"),seen=!0,start;if((0,micromark_util_character__WEBPACK_IMPORTED_MODULE_0__.xz)(code))return(0,micromark_factory_space__WEBPACK_IMPORTED_MODULE_1__.f)(effects,start,seen?"linePrefix":"lineSuffix")(code);return ok(code)}}},"./node_modules/micromark-util-character/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{jv:()=>asciiAlpha,H$:()=>asciiAlphanumeric,n9:()=>asciiAtext,Av:()=>asciiControl,pY:()=>asciiDigit,AF:()=>asciiHexDigit,sR:()=>asciiPunctuation,Ch:()=>markdownLineEnding,z3:()=>markdownLineEndingOrSpace,xz:()=>markdownSpace,Xh:()=>unicodePunctuation,B8:()=>unicodeWhitespace});const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(code){return null!==code&&(code<32||127===code)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(code){return null!==code&&code<-2}function markdownLineEndingOrSpace(code){return null!==code&&(code<0||32===code)}function markdownSpace(code){return-2===code||-1===code||32===code}const unicodePunctuation=regexCheck(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),unicodeWhitespace=regexCheck(/\s/);function regexCheck(regex){return function check(code){return null!==code&&regex.test(String.fromCharCode(code))}}},"./node_modules/micromark-util-decode-numeric-character-reference/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function decodeNumericCharacterReference(value,base){const code=Number.parseInt(value,base);return code<9||11===code||code>13&&code<32||code>126&&code<160||code>55295&&code<57344||code>64975&&code<65008||65535==(65535&code)||65534==(65535&code)||code>1114111?"":String.fromCharCode(code)}__webpack_require__.d(__webpack_exports__,{o:()=>decodeNumericCharacterReference})},"./node_modules/micromark-util-decode-string/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>decodeString});var decode_named_character_reference__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/decode-named-character-reference/index.dom.js"),micromark_util_decode_numeric_character_reference__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/micromark-util-decode-numeric-character-reference/index.js");const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(value){return value.replace(characterEscapeOrReference,decode)}function decode($0,$1,$2){if($1)return $1;if(35===$2.charCodeAt(0)){const head=$2.charCodeAt(1),hex=120===head||88===head;return(0,micromark_util_decode_numeric_character_reference__WEBPACK_IMPORTED_MODULE_0__.o)($2.slice(hex?2:1),hex?16:10)}return(0,decode_named_character_reference__WEBPACK_IMPORTED_MODULE_1__.T)($2)||$0}},"./node_modules/outvariant/lib/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{kG:()=>invariant});var POSITIONALS_EXP=/(%?)(%([sdjo]))/g;function format(message,...positionals){if(0===positionals.length)return message;let positionalIndex=0,formattedMessage=message.replace(POSITIONALS_EXP,((match,isEscaped,_,flag)=>{const value=function serializePositional(positional,flag){switch(flag){case"s":return positional;case"d":case"i":return Number(positional);case"j":return JSON.stringify(positional);case"o":{if("string"==typeof positional)return positional;const json=JSON.stringify(positional);return"{}"===json||"[]"===json||/^\[object .+?\]$/.test(json)?positional:json}}}(positionals[positionalIndex],flag);return isEscaped?match:(positionalIndex++,value)}));return positionalIndex<positionals.length&&(formattedMessage+=` ${positionals.slice(positionalIndex).join(" ")}`),formattedMessage=formattedMessage.replace(/%{2,2}/g,"%"),formattedMessage}var InvariantError=class extends Error{constructor(message,...positionals){super(message),this.message=message,this.name="Invariant Violation",this.message=format(message,...positionals),function cleanErrorStack(error){if(!error.stack)return;const nextStack=error.stack.split("\n");nextStack.splice(1,2),error.stack=nextStack.join("\n")}(this)}},invariant=(predicate,message,...positionals)=>{if(!predicate)throw new InvariantError(message,...positionals)};invariant.as=(ErrorConstructor,predicate,message,...positionals)=>{if(!predicate){throw null!=ErrorConstructor.prototype.name?new ErrorConstructor(format(message,positionals)):ErrorConstructor(format(message,positionals))}}},"./node_modules/react-is/cjs/react-is.production.min.js":(__unused_webpack_module,exports)=>{"use strict";var b=60103,c=60106,d=60107,e=60108,f=60114,g=60109,h=60110,k=60112,l=60113,m=60120,n=60115,p=60116,q=60121,r=60122,u=60117,v=60129,w=60131;if("function"==typeof Symbol&&Symbol.for){var x=Symbol.for;b=x("react.element"),c=x("react.portal"),d=x("react.fragment"),e=x("react.strict_mode"),f=x("react.profiler"),g=x("react.provider"),h=x("react.context"),k=x("react.forward_ref"),l=x("react.suspense"),m=x("react.suspense_list"),n=x("react.memo"),p=x("react.lazy"),q=x("react.block"),r=x("react.server.block"),u=x("react.fundamental"),v=x("react.debug_trace_mode"),w=x("react.legacy_hidden")}function y(a){if("object"==typeof a&&null!==a){var t=a.$$typeof;switch(t){case b:switch(a=a.type){case d:case f:case e:case l:case m:return a;default:switch(a=a&&a.$$typeof){case h:case k:case p:case n:case g:return a;default:return t}}case c:return t}}}},"./node_modules/react-is/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/react-is/cjs/react-is.production.min.js")},"./node_modules/react-remove-scroll/dist/es2015/Combination.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Combination});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react=__webpack_require__("./node_modules/react/index.js");function useMergeRefs(refs,defaultValue){return function useCallbackRef(initialValue,callback){var ref=(0,react.useState)((function(){return{value:initialValue,callback,facade:{get current(){return ref.value},set current(value){var last=ref.value;last!==value&&(ref.value=value,ref.callback(value,last))}}}}))[0];return ref.callback=callback,ref.facade}(defaultValue||null,(function(newValue){return refs.forEach((function(ref){return function assignRef(ref,value){return"function"==typeof ref?ref(value):ref&&(ref.current=value),ref}(ref,newValue)}))}))}function ItoI(a){return a}function innerCreateMedium(defaults,middleware){void 0===middleware&&(middleware=ItoI);var buffer=[],assigned=!1;return{read:function(){if(assigned)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return buffer.length?buffer[buffer.length-1]:defaults},useMedium:function(data){var item=middleware(data,assigned);return buffer.push(item),function(){buffer=buffer.filter((function(x){return x!==item}))}},assignSyncMedium:function(cb){for(assigned=!0;buffer.length;){var cbs=buffer;buffer=[],cbs.forEach(cb)}buffer={push:function(x){return cb(x)},filter:function(){return buffer}}},assignMedium:function(cb){assigned=!0;var pendingQueue=[];if(buffer.length){var cbs=buffer;buffer=[],cbs.forEach(cb),pendingQueue=buffer}var executeQueue=function(){var cbs=pendingQueue;pendingQueue=[],cbs.forEach(cb)},cycle=function(){return Promise.resolve().then(executeQueue)};cycle(),buffer={push:function(x){pendingQueue.push(x),cycle()},filter:function(filter){return pendingQueue=pendingQueue.filter(filter),buffer}}}}}var effectCar=function createSidecarMedium(options){void 0===options&&(options={});var medium=innerCreateMedium(null);return medium.options=(0,tslib_es6.pi)({async:!0,ssr:!1},options),medium}(),nothing=function(){},RemoveScroll=react.forwardRef((function(props,parentRef){var ref=react.useRef(null),_a=react.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),callbacks=_a[0],setCallbacks=_a[1],forwardProps=props.forwardProps,children=props.children,className=props.className,removeScrollBar=props.removeScrollBar,enabled=props.enabled,shards=props.shards,sideCar=props.sideCar,noIsolation=props.noIsolation,inert=props.inert,allowPinchZoom=props.allowPinchZoom,_b=props.as,Container=void 0===_b?"div":_b,rest=(0,tslib_es6._T)(props,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),SideCar=sideCar,containerRef=useMergeRefs([ref,parentRef]),containerProps=(0,tslib_es6.pi)((0,tslib_es6.pi)({},rest),callbacks);return react.createElement(react.Fragment,null,enabled&&react.createElement(SideCar,{sideCar:effectCar,removeScrollBar,shards,noIsolation,inert,setCallbacks,allowPinchZoom:!!allowPinchZoom,lockRef:ref}),forwardProps?react.cloneElement(react.Children.only(children),(0,tslib_es6.pi)((0,tslib_es6.pi)({},containerProps),{ref:containerRef})):react.createElement(Container,(0,tslib_es6.pi)({},containerProps,{className,ref:containerRef}),children))}));RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},RemoveScroll.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var currentNonce,SideCar=function(_a){var sideCar=_a.sideCar,rest=(0,tslib_es6._T)(_a,["sideCar"]);if(!sideCar)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var Target=sideCar.read();if(!Target)throw new Error("Sidecar medium not found");return react.createElement(Target,(0,tslib_es6.pi)({},rest))};SideCar.isSideCarExport=!0;function makeStyleTag(){if(!document)return null;var tag=document.createElement("style");tag.type="text/css";var nonce=currentNonce||__webpack_require__.nc;return nonce&&tag.setAttribute("nonce",nonce),tag}var stylesheetSingleton=function(){var counter=0,stylesheet=null;return{add:function(style){0==counter&&(stylesheet=makeStyleTag())&&(!function injectStyles(tag,css){tag.styleSheet?tag.styleSheet.cssText=css:tag.appendChild(document.createTextNode(css))}(stylesheet,style),function insertStyleTag(tag){(document.head||document.getElementsByTagName("head")[0]).appendChild(tag)}(stylesheet)),counter++},remove:function(){! --counter&&stylesheet&&(stylesheet.parentNode&&stylesheet.parentNode.removeChild(stylesheet),stylesheet=null)}}},styleSingleton=function(){var sheet,useStyle=(sheet=stylesheetSingleton(),function(styles,isDynamic){react.useEffect((function(){return sheet.add(styles),function(){sheet.remove()}}),[styles&&isDynamic])});return function(_a){var styles=_a.styles,dynamic=_a.dynamic;return useStyle(styles,dynamic),null}},zeroGap={left:0,top:0,right:0,gap:0},parse=function(x){return parseInt(x||"",10)||0},getGapWidth=function(gapMode){if(void 0===gapMode&&(gapMode="margin"),"undefined"==typeof window)return zeroGap;var offsets=function(gapMode){var cs=window.getComputedStyle(document.body),left=cs["padding"===gapMode?"paddingLeft":"marginLeft"],top=cs["padding"===gapMode?"paddingTop":"marginTop"],right=cs["padding"===gapMode?"paddingRight":"marginRight"];return[parse(left),parse(top),parse(right)]}(gapMode),documentWidth=document.documentElement.clientWidth,windowWidth=window.innerWidth;return{left:offsets[0],top:offsets[1],right:offsets[2],gap:Math.max(0,windowWidth-documentWidth+offsets[2]-offsets[0])}},Style=styleSingleton(),getStyles=function(_a,allowRelative,gapMode,important){var left=_a.left,top=_a.top,right=_a.right,gap=_a.gap;return void 0===gapMode&&(gapMode="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(important,";\n   padding-right: ").concat(gap,"px ").concat(important,";\n  }\n  body {\n    overflow: hidden ").concat(important,";\n    overscroll-behavior: contain;\n    ").concat([allowRelative&&"position: relative ".concat(important,";"),"margin"===gapMode&&"\n    padding-left: ".concat(left,"px;\n    padding-top: ").concat(top,"px;\n    padding-right: ").concat(right,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(gap,"px ").concat(important,";\n    "),"padding"===gapMode&&"padding-right: ".concat(gap,"px ").concat(important,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(gap,"px ").concat(important,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(gap,"px ").concat(important,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(important,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(important,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(gap,"px;\n  }\n")},RemoveScrollBar=function(props){var noRelative=props.noRelative,noImportant=props.noImportant,_a=props.gapMode,gapMode=void 0===_a?"margin":_a,gap=react.useMemo((function(){return getGapWidth(gapMode)}),[gapMode]);return react.createElement(Style,{styles:getStyles(gap,!noRelative,gapMode,noImportant?"":"!important")})},passiveSupported=!1;if("undefined"!=typeof window)try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch(err){passiveSupported=!1}var nonPassive=!!passiveSupported&&{passive:!1},elementCanBeScrolled=function(node,overflow){var styles=window.getComputedStyle(node);return"hidden"!==styles[overflow]&&!(styles.overflowY===styles.overflowX&&!function(node){return"TEXTAREA"===node.tagName}(node)&&"visible"===styles[overflow])},locationCouldBeScrolled=function(axis,node){var current=node;do{if("undefined"!=typeof ShadowRoot&&current instanceof ShadowRoot&&(current=current.host),elementCouldBeScrolled(axis,current)){var _a=getScrollVariables(axis,current);if(_a[1]>_a[2])return!0}current=current.parentNode}while(current&&current!==document.body);return!1},elementCouldBeScrolled=function(axis,node){return"v"===axis?function(node){return elementCanBeScrolled(node,"overflowY")}(node):function(node){return elementCanBeScrolled(node,"overflowX")}(node)},getScrollVariables=function(axis,node){return"v"===axis?[(_a=node).scrollTop,_a.scrollHeight,_a.clientHeight]:function(_a){return[_a.scrollLeft,_a.scrollWidth,_a.clientWidth]}(node);var _a},getTouchXY=function(event){return"changedTouches"in event?[event.changedTouches[0].clientX,event.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(event){return[event.deltaX,event.deltaY]},extractRef=function(ref){return ref&&"current"in ref?ref.current:ref},generateStyle=function(id){return"\n  .block-interactivity-".concat(id," {pointer-events: none;}\n  .allow-interactivity-").concat(id," {pointer-events: all;}\n")},idCounter=0,lockStack=[];const sidecar=function exportSidecar(medium,exported){return medium.useMedium(exported),SideCar}(effectCar,(function RemoveScrollSideCar(props){var shouldPreventQueue=react.useRef([]),touchStartRef=react.useRef([0,0]),activeAxis=react.useRef(),id=react.useState(idCounter++)[0],Style=react.useState((function(){return styleSingleton()}))[0],lastProps=react.useRef(props);react.useEffect((function(){lastProps.current=props}),[props]),react.useEffect((function(){if(props.inert){document.body.classList.add("block-interactivity-".concat(id));var allow_1=(0,tslib_es6.ev)([props.lockRef.current],(props.shards||[]).map(extractRef),!0).filter(Boolean);return allow_1.forEach((function(el){return el.classList.add("allow-interactivity-".concat(id))})),function(){document.body.classList.remove("block-interactivity-".concat(id)),allow_1.forEach((function(el){return el.classList.remove("allow-interactivity-".concat(id))}))}}}),[props.inert,props.lockRef.current,props.shards]);var shouldCancelEvent=react.useCallback((function(event,parent){if("touches"in event&&2===event.touches.length)return!lastProps.current.allowPinchZoom;var currentAxis,touch=getTouchXY(event),touchStart=touchStartRef.current,deltaX="deltaX"in event?event.deltaX:touchStart[0]-touch[0],deltaY="deltaY"in event?event.deltaY:touchStart[1]-touch[1],target=event.target,moveDirection=Math.abs(deltaX)>Math.abs(deltaY)?"h":"v";if("touches"in event&&"h"===moveDirection&&"range"===target.type)return!1;var canBeScrolledInMainDirection=locationCouldBeScrolled(moveDirection,target);if(!canBeScrolledInMainDirection)return!0;if(canBeScrolledInMainDirection?currentAxis=moveDirection:(currentAxis="v"===moveDirection?"h":"v",canBeScrolledInMainDirection=locationCouldBeScrolled(moveDirection,target)),!canBeScrolledInMainDirection)return!1;if(!activeAxis.current&&"changedTouches"in event&&(deltaX||deltaY)&&(activeAxis.current=currentAxis),!currentAxis)return!0;var cancelingAxis=activeAxis.current||currentAxis;return function(axis,endTarget,event,sourceDelta,noOverscroll){var directionFactor=function(axis,direction){return"h"===axis&&"rtl"===direction?-1:1}(axis,window.getComputedStyle(endTarget).direction),delta=directionFactor*sourceDelta,target=event.target,targetInLock=endTarget.contains(target),shouldCancelScroll=!1,isDeltaPositive=delta>0,availableScroll=0,availableScrollTop=0;do{var _a=getScrollVariables(axis,target),position=_a[0],elementScroll=_a[1]-_a[2]-directionFactor*position;(position||elementScroll)&&elementCouldBeScrolled(axis,target)&&(availableScroll+=elementScroll,availableScrollTop+=position),target=target.parentNode}while(!targetInLock&&target!==document.body||targetInLock&&(endTarget.contains(target)||endTarget===target));return(isDeltaPositive&&(noOverscroll&&0===availableScroll||!noOverscroll&&delta>availableScroll)||!isDeltaPositive&&(noOverscroll&&0===availableScrollTop||!noOverscroll&&-delta>availableScrollTop))&&(shouldCancelScroll=!0),shouldCancelScroll}(cancelingAxis,parent,event,"h"===cancelingAxis?deltaX:deltaY,!0)}),[]),shouldPrevent=react.useCallback((function(_event){var event=_event;if(lockStack.length&&lockStack[lockStack.length-1]===Style){var delta="deltaY"in event?getDeltaXY(event):getTouchXY(event),sourceEvent=shouldPreventQueue.current.filter((function(e){return e.name===event.type&&e.target===event.target&&(x=e.delta,y=delta,x[0]===y[0]&&x[1]===y[1]);var x,y}))[0];if(sourceEvent&&sourceEvent.should)event.cancelable&&event.preventDefault();else if(!sourceEvent){var shardNodes=(lastProps.current.shards||[]).map(extractRef).filter(Boolean).filter((function(node){return node.contains(event.target)}));(shardNodes.length>0?shouldCancelEvent(event,shardNodes[0]):!lastProps.current.noIsolation)&&event.cancelable&&event.preventDefault()}}}),[]),shouldCancel=react.useCallback((function(name,delta,target,should){var event={name,delta,target,should};shouldPreventQueue.current.push(event),setTimeout((function(){shouldPreventQueue.current=shouldPreventQueue.current.filter((function(e){return e!==event}))}),1)}),[]),scrollTouchStart=react.useCallback((function(event){touchStartRef.current=getTouchXY(event),activeAxis.current=void 0}),[]),scrollWheel=react.useCallback((function(event){shouldCancel(event.type,getDeltaXY(event),event.target,shouldCancelEvent(event,props.lockRef.current))}),[]),scrollTouchMove=react.useCallback((function(event){shouldCancel(event.type,getTouchXY(event),event.target,shouldCancelEvent(event,props.lockRef.current))}),[]);react.useEffect((function(){return lockStack.push(Style),props.setCallbacks({onScrollCapture:scrollWheel,onWheelCapture:scrollWheel,onTouchMoveCapture:scrollTouchMove}),document.addEventListener("wheel",shouldPrevent,nonPassive),document.addEventListener("touchmove",shouldPrevent,nonPassive),document.addEventListener("touchstart",scrollTouchStart,nonPassive),function(){lockStack=lockStack.filter((function(inst){return inst!==Style})),document.removeEventListener("wheel",shouldPrevent,nonPassive),document.removeEventListener("touchmove",shouldPrevent,nonPassive),document.removeEventListener("touchstart",scrollTouchStart,nonPassive)}}),[]);var removeScrollBar=props.removeScrollBar,inert=props.inert;return react.createElement(react.Fragment,null,inert?react.createElement(Style,{styles:generateStyle(id)}):null,removeScrollBar?react.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}));var ReactRemoveScroll=react.forwardRef((function(props,ref){return react.createElement(RemoveScroll,(0,tslib_es6.pi)({},props,{ref,sideCar:sidecar}))}));ReactRemoveScroll.classNames=RemoveScroll.classNames;const Combination=ReactRemoveScroll},"./node_modules/@mdxeditor/editor/dist/style.css":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__),_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__),_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__),_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__),_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__),_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_style_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./node_modules/@mdxeditor/editor/dist/style.css"),options={};options.styleTagTransform=_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default(),options.setAttributes=_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default(),options.insert=_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null,"head"),options.domAPI=_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default(),options.insertStyleElement=_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default();_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_style_css__WEBPACK_IMPORTED_MODULE_6__.Z,options),_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_style_css__WEBPACK_IMPORTED_MODULE_6__.Z&&_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_style_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals&&_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_style_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals},"./node_modules/@tldraw/tldraw/tldraw.css":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__),_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__),_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__),_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__),_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__),_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_tldraw_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./node_modules/@tldraw/tldraw/tldraw.css"),options={};options.styleTagTransform=_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default(),options.setAttributes=_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default(),options.insert=_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null,"head"),options.domAPI=_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default(),options.insertStyleElement=_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default();_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_tldraw_css__WEBPACK_IMPORTED_MODULE_6__.Z,options),_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_tldraw_css__WEBPACK_IMPORTED_MODULE_6__.Z&&_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_tldraw_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals&&_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_postcss_loader_dist_cjs_js_ruleSet_1_rules_7_use_2_tldraw_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals},"./node_modules/tslib/tslib.es6.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_T:()=>__rest,ev:()=>__spreadArray,pi:()=>__assign});var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}Object.create;function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}Object.create;"function"==typeof SuppressedError&&SuppressedError},"./node_modules/unist-util-is/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>convert});const convert=function(test){if(null==test)return ok;if("string"==typeof test)return function typeFactory(check){return castFactory(type);function type(node){return node&&node.type===check}}(test);if("object"==typeof test)return Array.isArray(test)?function anyFactory(tests){const checks=[];let index=-1;for(;++index<tests.length;)checks[index]=convert(tests[index]);return castFactory(any);function any(...parameters){let index=-1;for(;++index<checks.length;)if(checks[index].call(this,...parameters))return!0;return!1}}(test):function propsFactory(check){return castFactory(all);function all(node){let key;for(key in check)if(node[key]!==check[key])return!1;return!0}}(test);if("function"==typeof test)return castFactory(test);throw new Error("Expected function, string, or object as test")};function castFactory(check){return function assertion(node,...parameters){return Boolean(node&&"object"==typeof node&&"type"in node&&Boolean(check.call(this,node,...parameters)))}}function ok(){return!0}},"./node_modules/unist-util-visit-parents/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{BK:()=>EXIT,S4:()=>visitParents});var lib=__webpack_require__("./node_modules/unist-util-is/lib/index.js");const EXIT=!1,visitParents=function(tree,test,visitor,reverse){"function"==typeof test&&"function"!=typeof visitor&&(reverse=visitor,visitor=test,test=null);const is=(0,lib.O)(test),step=reverse?-1:1;!function factory(node,index,parents){const value=node&&"object"==typeof node?node:{};if("string"==typeof value.type){const name="string"==typeof value.tagName?value.tagName:"string"==typeof value.name?value.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+node.type+(name?"<"+name+">":"")+")"})}return visit;function visit(){let subresult,offset,grandparents,result=[];if((!test||is(node,index,parents[parents.length-1]||null))&&(result=function toResult(value){if(Array.isArray(value))return value;if("number"==typeof value)return[true,value];return[value]}(visitor(node,parents)),result[0]===EXIT))return result;if(node.children&&"skip"!==result[0])for(offset=(reverse?node.children.length:-1)+step,grandparents=parents.concat(node);offset>-1&&offset<node.children.length;){if(subresult=factory(node.children[offset],offset,grandparents)(),subresult[0]===EXIT)return subresult;offset="number"==typeof subresult[1]?subresult[1]:offset+step}return result}}(tree,void 0,[])()}},"./packages/editors/node_modules/highlight.js/es/core.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _lib_core_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/editors/node_modules/highlight.js/lib/core.js");const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__.n(_lib_core_js__WEBPACK_IMPORTED_MODULE_0__)()},"./packages/editors/node_modules/highlight.js/es/languages/bash.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function bash(hljs){const regex=hljs.regex,VAR={},BRACED_VAR={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[VAR]}]};Object.assign(VAR,{className:"variable",variants:[{begin:regex.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},BRACED_VAR]});const SUBST={className:"subst",begin:/\$\(/,end:/\)/,contains:[hljs.BACKSLASH_ESCAPE]},HERE_DOC={begin:/<<-?\s*(?=\w+)/,starts:{contains:[hljs.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},QUOTE_STRING={className:"string",begin:/"/,end:/"/,contains:[hljs.BACKSLASH_ESCAPE,VAR,SUBST]};SUBST.contains.push(QUOTE_STRING);const ARITHMETIC={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},hljs.NUMBER_MODE,VAR]},KNOWN_SHEBANG=hljs.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),FUNCTION={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[hljs.inherit(hljs.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[KNOWN_SHEBANG,hljs.SHEBANG(),FUNCTION,ARITHMETIC,hljs.HASH_COMMENT_MODE,HERE_DOC,{match:/(\/[a-z._-]+)+/},QUOTE_STRING,{match:/\\"/},{className:"string",begin:/'/,end:/'/},{match:/\\'/},VAR]}}__webpack_require__.d(__webpack_exports__,{Z:()=>bash})},"./packages/editors/node_modules/highlight.js/es/languages/css.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>css});const MODES=hljs=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:hljs.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:hljs.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function css(hljs){const regex=hljs.regex,modes=MODES(hljs),STRINGS=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[modes.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},modes.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},modes.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS.join("|")+")"}]},modes.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[modes.BLOCK_COMMENT,modes.HEXCOLOR,modes.IMPORTANT,modes.CSS_NUMBER_MODE,...STRINGS,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...STRINGS,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},modes.FUNCTION_DISPATCH]},{begin:regex.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:MEDIA_FEATURES.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...STRINGS,modes.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS.join("|")+")\\b"}]}}},"./packages/editors/node_modules/highlight.js/es/languages/javascript.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>javascript});const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(hljs){const regex=hljs.regex,IDENT_RE$1=IDENT_RE,FRAGMENT_begin="<>",FRAGMENT_end="</>",XML_TAG={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(match,response)=>{const afterMatchIndex=match[0].length+match.index,nextChar=match.input[afterMatchIndex];if("<"===nextChar||","===nextChar)return void response.ignoreMatch();let m;">"===nextChar&&(((match,{after})=>{const tag="</"+match[0].slice(1);return-1!==match.input.indexOf(tag,after)})(match,{after:afterMatchIndex})||response.ignoreMatch());const afterMatch=match.input.substring(afterMatchIndex);((m=afterMatch.match(/^\s*=/))||(m=afterMatch.match(/^\s+extends\s+/))&&0===m.index)&&response.ignoreMatch()}},KEYWORDS$1={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},frac="\\.([0-9](_?[0-9])*)",NUMBER={className:"number",variants:[{begin:`(\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)((${frac})|\\.)?|(${frac}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{begin:`\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)\\b((${frac})\\b|\\.)?|(${frac})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},SUBST={className:"subst",begin:"\\$\\{",end:"\\}",keywords:KEYWORDS$1,contains:[]},HTML_TEMPLATE={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"xml"}},CSS_TEMPLATE={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"css"}},GRAPHQL_TEMPLATE={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"graphql"}},TEMPLATE_STRING={className:"string",begin:"`",end:"`",contains:[hljs.BACKSLASH_ESCAPE,SUBST]},COMMENT={className:"comment",variants:[hljs.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:IDENT_RE$1+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),hljs.C_BLOCK_COMMENT_MODE,hljs.C_LINE_COMMENT_MODE]},SUBST_INTERNALS=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,{match:/\$\d+/},NUMBER];SUBST.contains=SUBST_INTERNALS.concat({begin:/\{/,end:/\}/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_INTERNALS)});const SUBST_AND_COMMENTS=[].concat(COMMENT,SUBST.contains),PARAMS_CONTAINS=SUBST_AND_COMMENTS.concat([{begin:/\(/,end:/\)/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_AND_COMMENTS)}]),PARAMS={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS},CLASS_OR_EXTENDS={variants:[{match:[/class/,/\s+/,IDENT_RE$1,/\s+/,/extends/,/\s+/,regex.concat(IDENT_RE$1,"(",regex.concat(/\./,IDENT_RE$1),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,IDENT_RE$1],scope:{1:"keyword",3:"title.class"}}]},CLASS_REFERENCE={relevance:0,match:regex.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},FUNCTION_DEFINITION={variants:[{match:[/function/,/\s+/,IDENT_RE$1,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[PARAMS],illegal:/%/};const FUNCTION_CALL={match:regex.concat(/\b/,function noneOf(list){return regex.concat("(?!",list.join("|"),")")}([...BUILT_IN_GLOBALS,"super","import"]),IDENT_RE$1,regex.lookahead(/\(/)),className:"title.function",relevance:0},PROPERTY_ACCESS={begin:regex.concat(/\./,regex.lookahead(regex.concat(IDENT_RE$1,/(?![0-9A-Za-z$_(])/))),end:IDENT_RE$1,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},GETTER_OR_SETTER={match:[/get|set/,/\s+/,IDENT_RE$1,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},PARAMS]},FUNC_LEAD_IN_RE="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+hljs.UNDERSCORE_IDENT_RE+")\\s*=>",FUNCTION_VARIABLE={match:[/const|var|let/,/\s+/,IDENT_RE$1,/\s*/,/=\s*/,/(async\s*)?/,regex.lookahead(FUNC_LEAD_IN_RE)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[PARAMS]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:KEYWORDS$1,exports:{PARAMS_CONTAINS,CLASS_REFERENCE},illegal:/#(?![$_A-z])/,contains:[hljs.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,COMMENT,{match:/\$\d+/},NUMBER,CLASS_REFERENCE,{className:"attr",begin:IDENT_RE$1+regex.lookahead(":"),relevance:0},FUNCTION_VARIABLE,{begin:"("+hljs.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[COMMENT,hljs.REGEXP_MODE,{className:"function",begin:FUNC_LEAD_IN_RE,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:hljs.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:FRAGMENT_begin,end:FRAGMENT_end},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:XML_TAG.begin,"on:begin":XML_TAG.isTrulyOpeningTag,end:XML_TAG.end}],subLanguage:"xml",contains:[{begin:XML_TAG.begin,end:XML_TAG.end,skip:!0,contains:["self"]}]}]},FUNCTION_DEFINITION,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+hljs.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[PARAMS,hljs.inherit(hljs.TITLE_MODE,{begin:IDENT_RE$1,className:"title.function"})]},{match:/\.\.\./,relevance:0},PROPERTY_ACCESS,{match:"\\$"+IDENT_RE$1,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[PARAMS]},FUNCTION_CALL,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},CLASS_OR_EXTENDS,GETTER_OR_SETTER,{match:/\$[(.]/}]}}},"./packages/editors/node_modules/highlight.js/es/languages/json.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function json(hljs){const LITERALS=["true","false","null"],LITERALS_MODE={scope:"literal",beginKeywords:LITERALS.join(" ")};return{name:"JSON",keywords:{literal:LITERALS},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},hljs.QUOTE_STRING_MODE,LITERALS_MODE,hljs.C_NUMBER_MODE,hljs.C_LINE_COMMENT_MODE,hljs.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}__webpack_require__.d(__webpack_exports__,{Z:()=>json})},"./packages/editors/node_modules/highlight.js/es/languages/typescript.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>typescript});const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(hljs){const regex=hljs.regex,IDENT_RE$1=IDENT_RE,FRAGMENT_begin="<>",FRAGMENT_end="</>",XML_TAG={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(match,response)=>{const afterMatchIndex=match[0].length+match.index,nextChar=match.input[afterMatchIndex];if("<"===nextChar||","===nextChar)return void response.ignoreMatch();let m;">"===nextChar&&(((match,{after})=>{const tag="</"+match[0].slice(1);return-1!==match.input.indexOf(tag,after)})(match,{after:afterMatchIndex})||response.ignoreMatch());const afterMatch=match.input.substring(afterMatchIndex);((m=afterMatch.match(/^\s*=/))||(m=afterMatch.match(/^\s+extends\s+/))&&0===m.index)&&response.ignoreMatch()}},KEYWORDS$1={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},frac="\\.([0-9](_?[0-9])*)",NUMBER={className:"number",variants:[{begin:`(\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)((${frac})|\\.)?|(${frac}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{begin:`\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)\\b((${frac})\\b|\\.)?|(${frac})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},SUBST={className:"subst",begin:"\\$\\{",end:"\\}",keywords:KEYWORDS$1,contains:[]},HTML_TEMPLATE={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"xml"}},CSS_TEMPLATE={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"css"}},GRAPHQL_TEMPLATE={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[hljs.BACKSLASH_ESCAPE,SUBST],subLanguage:"graphql"}},TEMPLATE_STRING={className:"string",begin:"`",end:"`",contains:[hljs.BACKSLASH_ESCAPE,SUBST]},COMMENT={className:"comment",variants:[hljs.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:IDENT_RE$1+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),hljs.C_BLOCK_COMMENT_MODE,hljs.C_LINE_COMMENT_MODE]},SUBST_INTERNALS=[hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,{match:/\$\d+/},NUMBER];SUBST.contains=SUBST_INTERNALS.concat({begin:/\{/,end:/\}/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_INTERNALS)});const SUBST_AND_COMMENTS=[].concat(COMMENT,SUBST.contains),PARAMS_CONTAINS=SUBST_AND_COMMENTS.concat([{begin:/\(/,end:/\)/,keywords:KEYWORDS$1,contains:["self"].concat(SUBST_AND_COMMENTS)}]),PARAMS={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS},CLASS_OR_EXTENDS={variants:[{match:[/class/,/\s+/,IDENT_RE$1,/\s+/,/extends/,/\s+/,regex.concat(IDENT_RE$1,"(",regex.concat(/\./,IDENT_RE$1),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,IDENT_RE$1],scope:{1:"keyword",3:"title.class"}}]},CLASS_REFERENCE={relevance:0,match:regex.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},FUNCTION_DEFINITION={variants:[{match:[/function/,/\s+/,IDENT_RE$1,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[PARAMS],illegal:/%/};const FUNCTION_CALL={match:regex.concat(/\b/,function noneOf(list){return regex.concat("(?!",list.join("|"),")")}([...BUILT_IN_GLOBALS,"super","import"]),IDENT_RE$1,regex.lookahead(/\(/)),className:"title.function",relevance:0},PROPERTY_ACCESS={begin:regex.concat(/\./,regex.lookahead(regex.concat(IDENT_RE$1,/(?![0-9A-Za-z$_(])/))),end:IDENT_RE$1,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},GETTER_OR_SETTER={match:[/get|set/,/\s+/,IDENT_RE$1,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},PARAMS]},FUNC_LEAD_IN_RE="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+hljs.UNDERSCORE_IDENT_RE+")\\s*=>",FUNCTION_VARIABLE={match:[/const|var|let/,/\s+/,IDENT_RE$1,/\s*/,/=\s*/,/(async\s*)?/,regex.lookahead(FUNC_LEAD_IN_RE)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[PARAMS]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:KEYWORDS$1,exports:{PARAMS_CONTAINS,CLASS_REFERENCE},illegal:/#(?![$_A-z])/,contains:[hljs.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},hljs.APOS_STRING_MODE,hljs.QUOTE_STRING_MODE,HTML_TEMPLATE,CSS_TEMPLATE,GRAPHQL_TEMPLATE,TEMPLATE_STRING,COMMENT,{match:/\$\d+/},NUMBER,CLASS_REFERENCE,{className:"attr",begin:IDENT_RE$1+regex.lookahead(":"),relevance:0},FUNCTION_VARIABLE,{begin:"("+hljs.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[COMMENT,hljs.REGEXP_MODE,{className:"function",begin:FUNC_LEAD_IN_RE,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:hljs.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:KEYWORDS$1,contains:PARAMS_CONTAINS}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:FRAGMENT_begin,end:FRAGMENT_end},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:XML_TAG.begin,"on:begin":XML_TAG.isTrulyOpeningTag,end:XML_TAG.end}],subLanguage:"xml",contains:[{begin:XML_TAG.begin,end:XML_TAG.end,skip:!0,contains:["self"]}]}]},FUNCTION_DEFINITION,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+hljs.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[PARAMS,hljs.inherit(hljs.TITLE_MODE,{begin:IDENT_RE$1,className:"title.function"})]},{match:/\.\.\./,relevance:0},PROPERTY_ACCESS,{match:"\\$"+IDENT_RE$1,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[PARAMS]},FUNCTION_CALL,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},CLASS_OR_EXTENDS,GETTER_OR_SETTER,{match:/\$[(.]/}]}}function typescript(hljs){const tsLanguage=javascript(hljs),IDENT_RE$1=IDENT_RE,TYPES=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],NAMESPACE={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[tsLanguage.exports.CLASS_REFERENCE]},INTERFACE={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:TYPES},contains:[tsLanguage.exports.CLASS_REFERENCE]},KEYWORDS$1={$pattern:IDENT_RE,keyword:KEYWORDS.concat(["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"]),literal:LITERALS,built_in:BUILT_INS.concat(TYPES),"variable.language":BUILT_IN_VARIABLES},DECORATOR={className:"meta",begin:"@"+IDENT_RE$1},swapMode=(mode,label,replacement)=>{const indx=mode.contains.findIndex((m=>m.label===label));if(-1===indx)throw new Error("can not find mode to replace");mode.contains.splice(indx,1,replacement)};Object.assign(tsLanguage.keywords,KEYWORDS$1),tsLanguage.exports.PARAMS_CONTAINS.push(DECORATOR),tsLanguage.contains=tsLanguage.contains.concat([DECORATOR,NAMESPACE,INTERFACE]),swapMode(tsLanguage,"shebang",hljs.SHEBANG()),swapMode(tsLanguage,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/});return tsLanguage.contains.find((m=>"func.def"===m.label)).relevance=0,Object.assign(tsLanguage,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),tsLanguage}},"./packages/editors/node_modules/highlight.js/es/languages/xml.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function xml(hljs){const regex=hljs.regex,TAG_NAME_RE=regex.concat(/[\p{L}_]/u,regex.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),XML_ENTITIES={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},XML_META_KEYWORDS={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},XML_META_PAR_KEYWORDS=hljs.inherit(XML_META_KEYWORDS,{begin:/\(/,end:/\)/}),APOS_META_STRING_MODE=hljs.inherit(hljs.APOS_STRING_MODE,{className:"string"}),QUOTE_META_STRING_MODE=hljs.inherit(hljs.QUOTE_STRING_MODE,{className:"string"}),TAG_INTERNALS={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[XML_ENTITIES]},{begin:/'/,end:/'/,contains:[XML_ENTITIES]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[XML_META_KEYWORDS,QUOTE_META_STRING_MODE,APOS_META_STRING_MODE,XML_META_PAR_KEYWORDS,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[XML_META_KEYWORDS,XML_META_PAR_KEYWORDS,QUOTE_META_STRING_MODE,APOS_META_STRING_MODE]}]}]},hljs.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},XML_ENTITIES,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[QUOTE_META_STRING_MODE]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[TAG_INTERNALS],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[TAG_INTERNALS],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:regex.concat(/</,regex.lookahead(regex.concat(TAG_NAME_RE,regex.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:TAG_NAME_RE,relevance:0,starts:TAG_INTERNALS}]},{className:"tag",begin:regex.concat(/<\//,regex.lookahead(regex.concat(TAG_NAME_RE,/>/))),contains:[{className:"name",begin:TAG_NAME_RE,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}__webpack_require__.d(__webpack_exports__,{Z:()=>xml})},"./packages/editors/node_modules/highlight.js/es/languages/yaml.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function yaml(hljs){const LITERALS="true false yes no null",URI_CHARACTERS="[\\w#;/?:@&=+$,.~*'()[\\]]+",STRING={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[hljs.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},CONTAINER_STRING=hljs.inherit(STRING,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),TIMESTAMP={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},VALUE_CONTAINER={end:",",endsWithParent:!0,excludeEnd:!0,keywords:LITERALS,relevance:0},OBJECT={begin:/\{/,end:/\}/,contains:[VALUE_CONTAINER],illegal:"\\n",relevance:0},ARRAY={begin:"\\[",end:"\\]",contains:[VALUE_CONTAINER],illegal:"\\n",relevance:0},MODES=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+URI_CHARACTERS},{className:"type",begin:"!<"+URI_CHARACTERS+">"},{className:"type",begin:"!"+URI_CHARACTERS},{className:"type",begin:"!!"+URI_CHARACTERS},{className:"meta",begin:"&"+hljs.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+hljs.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},hljs.HASH_COMMENT_MODE,{beginKeywords:LITERALS,keywords:{literal:LITERALS}},TIMESTAMP,{className:"number",begin:hljs.C_NUMBER_RE+"\\b",relevance:0},OBJECT,ARRAY,STRING],VALUE_MODES=[...MODES];return VALUE_MODES.pop(),VALUE_MODES.push(CONTAINER_STRING),VALUE_CONTAINER.contains=VALUE_MODES,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:MODES}}__webpack_require__.d(__webpack_exports__,{Z:()=>yaml})},"./packages/editors/node_modules/highlight.js/lib/core.js":module=>{function deepFreeze(obj){return obj instanceof Map?obj.clear=obj.delete=obj.set=function(){throw new Error("map is read-only")}:obj instanceof Set&&(obj.add=obj.clear=obj.delete=function(){throw new Error("set is read-only")}),Object.freeze(obj),Object.getOwnPropertyNames(obj).forEach((name=>{const prop=obj[name],type=typeof prop;"object"!==type&&"function"!==type||Object.isFrozen(prop)||deepFreeze(prop)})),obj}class Response{constructor(mode){void 0===mode.data&&(mode.data={}),this.data=mode.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(value){return value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(original,...objects){const result=Object.create(null);for(const key in original)result[key]=original[key];return objects.forEach((function(obj){for(const key in obj)result[key]=obj[key]})),result}const emitsWrappingTags=node=>!!node.scope;class HTMLRenderer{constructor(parseTree,options){this.buffer="",this.classPrefix=options.classPrefix,parseTree.walk(this)}addText(text){this.buffer+=escapeHTML(text)}openNode(node){if(!emitsWrappingTags(node))return;const className=((name,{prefix})=>{if(name.startsWith("language:"))return name.replace("language:","language-");if(name.includes(".")){const pieces=name.split(".");return[`${prefix}${pieces.shift()}`,...pieces.map(((x,i)=>`${x}${"_".repeat(i+1)}`))].join(" ")}return`${prefix}${name}`})(node.scope,{prefix:this.classPrefix});this.span(className)}closeNode(node){emitsWrappingTags(node)&&(this.buffer+="</span>")}value(){return this.buffer}span(className){this.buffer+=`<span class="${className}">`}}const newNode=(opts={})=>{const result={children:[]};return Object.assign(result,opts),result};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(node){this.top.children.push(node)}openNode(scope){const node=newNode({scope});this.add(node),this.stack.push(node)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(builder){return this.constructor._walk(builder,this.rootNode)}static _walk(builder,node){return"string"==typeof node?builder.addText(node):node.children&&(builder.openNode(node),node.children.forEach((child=>this._walk(builder,child))),builder.closeNode(node)),builder}static _collapse(node){"string"!=typeof node&&node.children&&(node.children.every((el=>"string"==typeof el))?node.children=[node.children.join("")]:node.children.forEach((child=>{TokenTree._collapse(child)})))}}class TokenTreeEmitter extends TokenTree{constructor(options){super(),this.options=options}addText(text){""!==text&&this.add(text)}startScope(scope){this.openNode(scope)}endScope(){this.closeNode()}__addSublanguage(emitter,name){const node=emitter.root;name&&(node.scope=`language:${name}`),this.add(node)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function source(re){return re?"string"==typeof re?re:re.source:null}function lookahead(re){return concat("(?=",re,")")}function anyNumberOfTimes(re){return concat("(?:",re,")*")}function optional(re){return concat("(?:",re,")?")}function concat(...args){return args.map((x=>source(x))).join("")}function either(...args){const opts=function stripOptionsFromArgs(args){const opts=args[args.length-1];return"object"==typeof opts&&opts.constructor===Object?(args.splice(args.length-1,1),opts):{}}(args);return"("+(opts.capture?"":"?:")+args.map((x=>source(x))).join("|")+")"}function countMatchGroups(re){return new RegExp(re.toString()+"|").exec("").length-1}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(regexps,{joinWith}){let numCaptures=0;return regexps.map((regex=>{numCaptures+=1;const offset=numCaptures;let re=source(regex),out="";for(;re.length>0;){const match=BACKREF_RE.exec(re);if(!match){out+=re;break}out+=re.substring(0,match.index),re=re.substring(match.index+match[0].length),"\\"===match[0][0]&&match[1]?out+="\\"+String(Number(match[1])+offset):(out+=match[0],"("===match[0]&&numCaptures++)}return out})).map((re=>`(${re})`)).join(joinWith)}const C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},COMMENT=function(begin,end,modeOptions={}){const mode=inherit$1({scope:"comment",begin,end,contains:[]},modeOptions);mode.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ENGLISH_WORD=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return mode.contains.push({begin:concat(/[ ]+/,"(",ENGLISH_WORD,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),mode},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:"\\b\\d+(\\.\\d+)?",relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:"\\b(0b[01]+)",relevance:0},REGEXP_MODE={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]},TITLE_MODE={scope:"title",begin:"[a-zA-Z]\\w*",relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:"[a-zA-Z_]\\w*",relevance:0},METHOD_GUARD={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var MODES=Object.freeze({__proto__:null,APOS_STRING_MODE,BACKSLASH_ESCAPE,BINARY_NUMBER_MODE,BINARY_NUMBER_RE:"\\b(0b[01]+)",COMMENT,C_BLOCK_COMMENT_MODE,C_LINE_COMMENT_MODE,C_NUMBER_MODE,C_NUMBER_RE,END_SAME_AS_BEGIN:function(mode){return Object.assign(mode,{"on:begin":(m,resp)=>{resp.data._beginMatch=m[1]},"on:end":(m,resp)=>{resp.data._beginMatch!==m[1]&&resp.ignoreMatch()}})},HASH_COMMENT_MODE,IDENT_RE:"[a-zA-Z]\\w*",MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD,NUMBER_MODE,NUMBER_RE:"\\b\\d+(\\.\\d+)?",PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},QUOTE_STRING_MODE,REGEXP_MODE,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(opts={})=>{const beginShebang=/^#![ ]*\//;return opts.binary&&(opts.begin=concat(beginShebang,/.*\b/,opts.binary,/\b.*/)),inherit$1({scope:"meta",begin:beginShebang,end:/$/,relevance:0,"on:begin":(m,resp)=>{0!==m.index&&resp.ignoreMatch()}},opts)},TITLE_MODE,UNDERSCORE_IDENT_RE:"[a-zA-Z_]\\w*",UNDERSCORE_TITLE_MODE});function skipIfHasPrecedingDot(match,response){"."===match.input[match.index-1]&&response.ignoreMatch()}function scopeClassName(mode,_parent){void 0!==mode.className&&(mode.scope=mode.className,delete mode.className)}function beginKeywords(mode,parent){parent&&mode.beginKeywords&&(mode.begin="\\b("+mode.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",mode.__beforeBegin=skipIfHasPrecedingDot,mode.keywords=mode.keywords||mode.beginKeywords,delete mode.beginKeywords,void 0===mode.relevance&&(mode.relevance=0))}function compileIllegal(mode,_parent){Array.isArray(mode.illegal)&&(mode.illegal=either(...mode.illegal))}function compileMatch(mode,_parent){if(mode.match){if(mode.begin||mode.end)throw new Error("begin & end are not supported with match");mode.begin=mode.match,delete mode.match}}function compileRelevance(mode,_parent){void 0===mode.relevance&&(mode.relevance=1)}const beforeMatchExt=(mode,parent)=>{if(!mode.beforeMatch)return;if(mode.starts)throw new Error("beforeMatch cannot be used with starts");const originalMode=Object.assign({},mode);Object.keys(mode).forEach((key=>{delete mode[key]})),mode.keywords=originalMode.keywords,mode.begin=concat(originalMode.beforeMatch,lookahead(originalMode.begin)),mode.starts={relevance:0,contains:[Object.assign(originalMode,{endsParent:!0})]},mode.relevance=0,delete originalMode.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(rawKeywords,caseInsensitive,scopeName=DEFAULT_KEYWORD_SCOPE){const compiledKeywords=Object.create(null);return"string"==typeof rawKeywords?compileList(scopeName,rawKeywords.split(" ")):Array.isArray(rawKeywords)?compileList(scopeName,rawKeywords):Object.keys(rawKeywords).forEach((function(scopeName){Object.assign(compiledKeywords,compileKeywords(rawKeywords[scopeName],caseInsensitive,scopeName))})),compiledKeywords;function compileList(scopeName,keywordList){caseInsensitive&&(keywordList=keywordList.map((x=>x.toLowerCase()))),keywordList.forEach((function(keyword){const pair=keyword.split("|");compiledKeywords[pair[0]]=[scopeName,scoreForKeyword(pair[0],pair[1])]}))}}function scoreForKeyword(keyword,providedScore){return providedScore?Number(providedScore):function commonKeyword(keyword){return COMMON_KEYWORDS.includes(keyword.toLowerCase())}(keyword)?0:1}const seenDeprecations={},error=message=>{console.error(message)},warn=(message,...args)=>{console.log(`WARN: ${message}`,...args)},deprecated=(version,message)=>{seenDeprecations[`${version}/${message}`]||(console.log(`Deprecated as of ${version}. ${message}`),seenDeprecations[`${version}/${message}`]=!0)},MultiClassError=new Error;function remapScopeNames(mode,regexes,{key}){let offset=0;const scopeNames=mode[key],emit={},positions={};for(let i=1;i<=regexes.length;i++)positions[i+offset]=scopeNames[i],emit[i+offset]=!0,offset+=countMatchGroups(regexes[i-1]);mode[key]=positions,mode[key]._emit=emit,mode[key]._multi=!0}function MultiClass(mode){!function scopeSugar(mode){mode.scope&&"object"==typeof mode.scope&&null!==mode.scope&&(mode.beginScope=mode.scope,delete mode.scope)}(mode),"string"==typeof mode.beginScope&&(mode.beginScope={_wrap:mode.beginScope}),"string"==typeof mode.endScope&&(mode.endScope={_wrap:mode.endScope}),function beginMultiClass(mode){if(Array.isArray(mode.begin)){if(mode.skip||mode.excludeBegin||mode.returnBegin)throw error("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if("object"!=typeof mode.beginScope||null===mode.beginScope)throw error("beginScope must be object"),MultiClassError;remapScopeNames(mode,mode.begin,{key:"beginScope"}),mode.begin=_rewriteBackreferences(mode.begin,{joinWith:""})}}(mode),function endMultiClass(mode){if(Array.isArray(mode.end)){if(mode.skip||mode.excludeEnd||mode.returnEnd)throw error("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if("object"!=typeof mode.endScope||null===mode.endScope)throw error("endScope must be object"),MultiClassError;remapScopeNames(mode,mode.end,{key:"endScope"}),mode.end=_rewriteBackreferences(mode.end,{joinWith:""})}}(mode)}function compileLanguage(language){function langRe(value,global){return new RegExp(source(value),"m"+(language.case_insensitive?"i":"")+(language.unicodeRegex?"u":"")+(global?"g":""))}class MultiRegex{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(re,opts){opts.position=this.position++,this.matchIndexes[this.matchAt]=opts,this.regexes.push([opts,re]),this.matchAt+=countMatchGroups(re)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const terminators=this.regexes.map((el=>el[1]));this.matcherRe=langRe(_rewriteBackreferences(terminators,{joinWith:"|"}),!0),this.lastIndex=0}exec(s){this.matcherRe.lastIndex=this.lastIndex;const match=this.matcherRe.exec(s);if(!match)return null;const i=match.findIndex(((el,i)=>i>0&&void 0!==el)),matchData=this.matchIndexes[i];return match.splice(0,i),Object.assign(match,matchData)}}class ResumableMultiRegex{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(index){if(this.multiRegexes[index])return this.multiRegexes[index];const matcher=new MultiRegex;return this.rules.slice(index).forEach((([re,opts])=>matcher.addRule(re,opts))),matcher.compile(),this.multiRegexes[index]=matcher,matcher}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(re,opts){this.rules.push([re,opts]),"begin"===opts.type&&this.count++}exec(s){const m=this.getMatcher(this.regexIndex);m.lastIndex=this.lastIndex;let result=m.exec(s);if(this.resumingScanAtSamePosition())if(result&&result.index===this.lastIndex);else{const m2=this.getMatcher(0);m2.lastIndex=this.lastIndex+1,result=m2.exec(s)}return result&&(this.regexIndex+=result.position+1,this.regexIndex===this.count&&this.considerAll()),result}}if(language.compilerExtensions||(language.compilerExtensions=[]),language.contains&&language.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return language.classNameAliases=inherit$1(language.classNameAliases||{}),function compileMode(mode,parent){const cmode=mode;if(mode.isCompiled)return cmode;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach((ext=>ext(mode,parent))),language.compilerExtensions.forEach((ext=>ext(mode,parent))),mode.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach((ext=>ext(mode,parent))),mode.isCompiled=!0;let keywordPattern=null;return"object"==typeof mode.keywords&&mode.keywords.$pattern&&(mode.keywords=Object.assign({},mode.keywords),keywordPattern=mode.keywords.$pattern,delete mode.keywords.$pattern),keywordPattern=keywordPattern||/\w+/,mode.keywords&&(mode.keywords=compileKeywords(mode.keywords,language.case_insensitive)),cmode.keywordPatternRe=langRe(keywordPattern,!0),parent&&(mode.begin||(mode.begin=/\B|\b/),cmode.beginRe=langRe(cmode.begin),mode.end||mode.endsWithParent||(mode.end=/\B|\b/),mode.end&&(cmode.endRe=langRe(cmode.end)),cmode.terminatorEnd=source(cmode.end)||"",mode.endsWithParent&&parent.terminatorEnd&&(cmode.terminatorEnd+=(mode.end?"|":"")+parent.terminatorEnd)),mode.illegal&&(cmode.illegalRe=langRe(mode.illegal)),mode.contains||(mode.contains=[]),mode.contains=[].concat(...mode.contains.map((function(c){return function expandOrCloneMode(mode){mode.variants&&!mode.cachedVariants&&(mode.cachedVariants=mode.variants.map((function(variant){return inherit$1(mode,{variants:null},variant)})));if(mode.cachedVariants)return mode.cachedVariants;if(dependencyOnParent(mode))return inherit$1(mode,{starts:mode.starts?inherit$1(mode.starts):null});if(Object.isFrozen(mode))return inherit$1(mode);return mode}("self"===c?mode:c)}))),mode.contains.forEach((function(c){compileMode(c,cmode)})),mode.starts&&compileMode(mode.starts,parent),cmode.matcher=function buildModeRegex(mode){const mm=new ResumableMultiRegex;return mode.contains.forEach((term=>mm.addRule(term.begin,{rule:term,type:"begin"}))),mode.terminatorEnd&&mm.addRule(mode.terminatorEnd,{type:"end"}),mode.illegal&&mm.addRule(mode.illegal,{type:"illegal"}),mm}(cmode),cmode}(language)}function dependencyOnParent(mode){return!!mode&&(mode.endsWithParent||dependencyOnParent(mode.starts))}class HTMLInjectionError extends Error{constructor(reason,html){super(reason),this.name="HTMLInjectionError",this.html=html}}const escape=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),HLJS=function(hljs){const languages=Object.create(null),aliases=Object.create(null),plugins=[];let SAFE_MODE=!0;const LANGUAGE_NOT_FOUND="Could not find the language '{}', did you forget to load/include a language module?",PLAINTEXT_LANGUAGE={disableAutodetect:!0,name:"Plain text",contains:[]};let options={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function shouldNotHighlight(languageName){return options.noHighlightRe.test(languageName)}function highlight(codeOrLanguageName,optionsOrCode,ignoreIllegals){let code="",languageName="";"object"==typeof optionsOrCode?(code=codeOrLanguageName,ignoreIllegals=optionsOrCode.ignoreIllegals,languageName=optionsOrCode.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),languageName=codeOrLanguageName,code=optionsOrCode),void 0===ignoreIllegals&&(ignoreIllegals=!0);const context={code,language:languageName};fire("before:highlight",context);const result=context.result?context.result:_highlight(context.language,context.code,ignoreIllegals);return result.code=context.code,fire("after:highlight",result),result}function _highlight(languageName,codeToHighlight,ignoreIllegals,continuation){const keywordHits=Object.create(null);function processKeywords(){if(!top.keywords)return void emitter.addText(modeBuffer);let lastIndex=0;top.keywordPatternRe.lastIndex=0;let match=top.keywordPatternRe.exec(modeBuffer),buf="";for(;match;){buf+=modeBuffer.substring(lastIndex,match.index);const word=language.case_insensitive?match[0].toLowerCase():match[0],data=(matchText=word,top.keywords[matchText]);if(data){const[kind,keywordRelevance]=data;if(emitter.addText(buf),buf="",keywordHits[word]=(keywordHits[word]||0)+1,keywordHits[word]<=7&&(relevance+=keywordRelevance),kind.startsWith("_"))buf+=match[0];else{const cssClass=language.classNameAliases[kind]||kind;emitKeyword(match[0],cssClass)}}else buf+=match[0];lastIndex=top.keywordPatternRe.lastIndex,match=top.keywordPatternRe.exec(modeBuffer)}var matchText;buf+=modeBuffer.substring(lastIndex),emitter.addText(buf)}function processBuffer(){null!=top.subLanguage?function processSubLanguage(){if(""===modeBuffer)return;let result=null;if("string"==typeof top.subLanguage){if(!languages[top.subLanguage])return void emitter.addText(modeBuffer);result=_highlight(top.subLanguage,modeBuffer,!0,continuations[top.subLanguage]),continuations[top.subLanguage]=result._top}else result=highlightAuto(modeBuffer,top.subLanguage.length?top.subLanguage:null);top.relevance>0&&(relevance+=result.relevance),emitter.__addSublanguage(result._emitter,result.language)}():processKeywords(),modeBuffer=""}function emitKeyword(keyword,scope){""!==keyword&&(emitter.startScope(scope),emitter.addText(keyword),emitter.endScope())}function emitMultiClass(scope,match){let i=1;const max=match.length-1;for(;i<=max;){if(!scope._emit[i]){i++;continue}const klass=language.classNameAliases[scope[i]]||scope[i],text=match[i];klass?emitKeyword(text,klass):(modeBuffer=text,processKeywords(),modeBuffer=""),i++}}function startNewMode(mode,match){return mode.scope&&"string"==typeof mode.scope&&emitter.openNode(language.classNameAliases[mode.scope]||mode.scope),mode.beginScope&&(mode.beginScope._wrap?(emitKeyword(modeBuffer,language.classNameAliases[mode.beginScope._wrap]||mode.beginScope._wrap),modeBuffer=""):mode.beginScope._multi&&(emitMultiClass(mode.beginScope,match),modeBuffer="")),top=Object.create(mode,{parent:{value:top}}),top}function endOfMode(mode,match,matchPlusRemainder){let matched=function startsWith(re,lexeme){const match=re&&re.exec(lexeme);return match&&0===match.index}(mode.endRe,matchPlusRemainder);if(matched){if(mode["on:end"]){const resp=new Response(mode);mode["on:end"](match,resp),resp.isMatchIgnored&&(matched=!1)}if(matched){for(;mode.endsParent&&mode.parent;)mode=mode.parent;return mode}}if(mode.endsWithParent)return endOfMode(mode.parent,match,matchPlusRemainder)}function doIgnore(lexeme){return 0===top.matcher.regexIndex?(modeBuffer+=lexeme[0],1):(resumeScanAtSamePosition=!0,0)}function doEndMatch(match){const lexeme=match[0],matchPlusRemainder=codeToHighlight.substring(match.index),endMode=endOfMode(top,match,matchPlusRemainder);if(!endMode)return NO_MATCH;const origin=top;top.endScope&&top.endScope._wrap?(processBuffer(),emitKeyword(lexeme,top.endScope._wrap)):top.endScope&&top.endScope._multi?(processBuffer(),emitMultiClass(top.endScope,match)):origin.skip?modeBuffer+=lexeme:(origin.returnEnd||origin.excludeEnd||(modeBuffer+=lexeme),processBuffer(),origin.excludeEnd&&(modeBuffer=lexeme));do{top.scope&&emitter.closeNode(),top.skip||top.subLanguage||(relevance+=top.relevance),top=top.parent}while(top!==endMode.parent);return endMode.starts&&startNewMode(endMode.starts,match),origin.returnEnd?0:lexeme.length}let lastMatch={};function processLexeme(textBeforeMatch,match){const lexeme=match&&match[0];if(modeBuffer+=textBeforeMatch,null==lexeme)return processBuffer(),0;if("begin"===lastMatch.type&&"end"===match.type&&lastMatch.index===match.index&&""===lexeme){if(modeBuffer+=codeToHighlight.slice(match.index,match.index+1),!SAFE_MODE){const err=new Error(`0 width match regex (${languageName})`);throw err.languageName=languageName,err.badRule=lastMatch.rule,err}return 1}if(lastMatch=match,"begin"===match.type)return function doBeginMatch(match){const lexeme=match[0],newMode=match.rule,resp=new Response(newMode),beforeCallbacks=[newMode.__beforeBegin,newMode["on:begin"]];for(const cb of beforeCallbacks)if(cb&&(cb(match,resp),resp.isMatchIgnored))return doIgnore(lexeme);return newMode.skip?modeBuffer+=lexeme:(newMode.excludeBegin&&(modeBuffer+=lexeme),processBuffer(),newMode.returnBegin||newMode.excludeBegin||(modeBuffer=lexeme)),startNewMode(newMode,match),newMode.returnBegin?0:lexeme.length}(match);if("illegal"===match.type&&!ignoreIllegals){const err=new Error('Illegal lexeme "'+lexeme+'" for mode "'+(top.scope||"<unnamed>")+'"');throw err.mode=top,err}if("end"===match.type){const processed=doEndMatch(match);if(processed!==NO_MATCH)return processed}if("illegal"===match.type&&""===lexeme)return 1;if(iterations>1e5&&iterations>3*match.index){throw new Error("potential infinite loop, way more iterations than matches")}return modeBuffer+=lexeme,lexeme.length}const language=getLanguage(languageName);if(!language)throw error(LANGUAGE_NOT_FOUND.replace("{}",languageName)),new Error('Unknown language: "'+languageName+'"');const md=compileLanguage(language);let result="",top=continuation||md;const continuations={},emitter=new options.__emitter(options);!function processContinuations(){const list=[];for(let current=top;current!==language;current=current.parent)current.scope&&list.unshift(current.scope);list.forEach((item=>emitter.openNode(item)))}();let modeBuffer="",relevance=0,index=0,iterations=0,resumeScanAtSamePosition=!1;try{if(language.__emitTokens)language.__emitTokens(codeToHighlight,emitter);else{for(top.matcher.considerAll();;){iterations++,resumeScanAtSamePosition?resumeScanAtSamePosition=!1:top.matcher.considerAll(),top.matcher.lastIndex=index;const match=top.matcher.exec(codeToHighlight);if(!match)break;const processedCount=processLexeme(codeToHighlight.substring(index,match.index),match);index=match.index+processedCount}processLexeme(codeToHighlight.substring(index))}return emitter.finalize(),result=emitter.toHTML(),{language:languageName,value:result,relevance,illegal:!1,_emitter:emitter,_top:top}}catch(err){if(err.message&&err.message.includes("Illegal"))return{language:languageName,value:escape(codeToHighlight),illegal:!0,relevance:0,_illegalBy:{message:err.message,index,context:codeToHighlight.slice(index-100,index+100),mode:err.mode,resultSoFar:result},_emitter:emitter};if(SAFE_MODE)return{language:languageName,value:escape(codeToHighlight),illegal:!1,relevance:0,errorRaised:err,_emitter:emitter,_top:top};throw err}}function highlightAuto(code,languageSubset){languageSubset=languageSubset||options.languages||Object.keys(languages);const plaintext=function justTextHighlightResult(code){const result={value:escape(code),illegal:!1,relevance:0,_top:PLAINTEXT_LANGUAGE,_emitter:new options.__emitter(options)};return result._emitter.addText(code),result}(code),results=languageSubset.filter(getLanguage).filter(autoDetection).map((name=>_highlight(name,code,!1)));results.unshift(plaintext);const sorted=results.sort(((a,b)=>{if(a.relevance!==b.relevance)return b.relevance-a.relevance;if(a.language&&b.language){if(getLanguage(a.language).supersetOf===b.language)return 1;if(getLanguage(b.language).supersetOf===a.language)return-1}return 0})),[best,secondBest]=sorted,result=best;return result.secondBest=secondBest,result}function highlightElement(element){let node=null;const language=function blockLanguage(block){let classes=block.className+" ";classes+=block.parentNode?block.parentNode.className:"";const match=options.languageDetectRe.exec(classes);if(match){const language=getLanguage(match[1]);return language||(warn(LANGUAGE_NOT_FOUND.replace("{}",match[1])),warn("Falling back to no-highlight mode for this block.",block)),language?match[1]:"no-highlight"}return classes.split(/\s+/).find((_class=>shouldNotHighlight(_class)||getLanguage(_class)))}(element);if(shouldNotHighlight(language))return;if(fire("before:highlightElement",{el:element,language}),element.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",element);if(element.children.length>0&&(options.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(element)),options.throwUnescapedHTML)){throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",element.innerHTML)}node=element;const text=node.textContent,result=language?highlight(text,{language,ignoreIllegals:!0}):highlightAuto(text);element.innerHTML=result.value,element.dataset.highlighted="yes",function updateClassName(element,currentLang,resultLang){const language=currentLang&&aliases[currentLang]||resultLang;element.classList.add("hljs"),element.classList.add(`language-${language}`)}(element,language,result.language),element.result={language:result.language,re:result.relevance,relevance:result.relevance},result.secondBest&&(element.secondBest={language:result.secondBest.language,relevance:result.secondBest.relevance}),fire("after:highlightElement",{el:element,result,text})}let wantsHighlight=!1;function highlightAll(){if("loading"===document.readyState)return void(wantsHighlight=!0);document.querySelectorAll(options.cssSelector).forEach(highlightElement)}function getLanguage(name){return name=(name||"").toLowerCase(),languages[name]||languages[aliases[name]]}function registerAliases(aliasList,{languageName}){"string"==typeof aliasList&&(aliasList=[aliasList]),aliasList.forEach((alias=>{aliases[alias.toLowerCase()]=languageName}))}function autoDetection(name){const lang=getLanguage(name);return lang&&!lang.disableAutodetect}function fire(event,args){const cb=event;plugins.forEach((function(plugin){plugin[cb]&&plugin[cb](args)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function boot(){wantsHighlight&&highlightAll()}),!1),Object.assign(hljs,{highlight,highlightAuto,highlightAll,highlightElement,highlightBlock:function deprecateHighlightBlock(el){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),highlightElement(el)},configure:function configure(userOptions){options=inherit(options,userOptions)},initHighlighting:()=>{highlightAll(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function initHighlightingOnLoad(){highlightAll(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function registerLanguage(languageName,languageDefinition){let lang=null;try{lang=languageDefinition(hljs)}catch(error$1){if(error("Language definition for '{}' could not be registered.".replace("{}",languageName)),!SAFE_MODE)throw error$1;error(error$1),lang=PLAINTEXT_LANGUAGE}lang.name||(lang.name=languageName),languages[languageName]=lang,lang.rawDefinition=languageDefinition.bind(null,hljs),lang.aliases&&registerAliases(lang.aliases,{languageName})},unregisterLanguage:function unregisterLanguage(languageName){delete languages[languageName];for(const alias of Object.keys(aliases))aliases[alias]===languageName&&delete aliases[alias]},listLanguages:function listLanguages(){return Object.keys(languages)},getLanguage,registerAliases,autoDetection,inherit,addPlugin:function addPlugin(plugin){!function upgradePluginAPI(plugin){plugin["before:highlightBlock"]&&!plugin["before:highlightElement"]&&(plugin["before:highlightElement"]=data=>{plugin["before:highlightBlock"](Object.assign({block:data.el},data))}),plugin["after:highlightBlock"]&&!plugin["after:highlightElement"]&&(plugin["after:highlightElement"]=data=>{plugin["after:highlightBlock"](Object.assign({block:data.el},data))})}(plugin),plugins.push(plugin)},removePlugin:function removePlugin(plugin){const index=plugins.indexOf(plugin);-1!==index&&plugins.splice(index,1)}}),hljs.debugMode=function(){SAFE_MODE=!1},hljs.safeMode=function(){SAFE_MODE=!0},hljs.versionString="11.9.0",hljs.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const key in MODES)"object"==typeof MODES[key]&&deepFreeze(MODES[key]);return Object.assign(hljs,MODES),hljs},highlight=HLJS({});highlight.newInstance=()=>HLJS({}),module.exports=highlight,highlight.HighlightJS=highlight,highlight.default=highlight},"./node_modules/@tldraw/assets/embed-icons/codepen.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/codepen.ff2e9cf8.png"},"./node_modules/@tldraw/assets/embed-icons/codesandbox.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/codesandbox.769bf0a6.png"},"./node_modules/@tldraw/assets/embed-icons/excalidraw.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/excalidraw.ad4e38f0.png"},"./node_modules/@tldraw/assets/embed-icons/felt.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/felt.1392ec04.png"},"./node_modules/@tldraw/assets/embed-icons/figma.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/figma.1068e41d.png"},"./node_modules/@tldraw/assets/embed-icons/github_gist.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/github_gist.f8d1e201.png"},"./node_modules/@tldraw/assets/embed-icons/google_calendar.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/google_calendar.15cccbc3.png"},"./node_modules/@tldraw/assets/embed-icons/google_maps.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/google_maps.7448ae77.png"},"./node_modules/@tldraw/assets/embed-icons/google_slides.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/google_slides.ea096c0f.png"},"./node_modules/@tldraw/assets/embed-icons/observable.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/observable.19bf86b7.png"},"./node_modules/@tldraw/assets/embed-icons/replit.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/replit.2e0b073f.png"},"./node_modules/@tldraw/assets/embed-icons/scratch.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/scratch.2eb104da.png"},"./node_modules/@tldraw/assets/embed-icons/spotify.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/spotify.e79ddea2.png"},"./node_modules/@tldraw/assets/embed-icons/tldraw.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tldraw.dc21077f.png"},"./node_modules/@tldraw/assets/embed-icons/val_town.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/val_town.b9f9e6f4.png"},"./node_modules/@tldraw/assets/embed-icons/vimeo.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/vimeo.b05fe65e.png"},"./node_modules/@tldraw/assets/embed-icons/youtube.png":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/youtube.f2dbddac.png"},"./node_modules/@tldraw/assets/fonts/IBMPlexMono-Medium.woff2":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/IBMPlexMono-Medium.73ed1ebe.woff2"},"./node_modules/@tldraw/assets/fonts/IBMPlexSans-Medium.woff2":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/IBMPlexSans-Medium.4021a32a.woff2"},"./node_modules/@tldraw/assets/fonts/IBMPlexSerif-Medium.woff2":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/IBMPlexSerif-Medium.8f2cf89c.woff2"},"./node_modules/@tldraw/assets/fonts/Shantell_Sans-Normal-SemiBold.woff2":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/Shantell_Sans-Normal-SemiBold.6b13f111.woff2"},"./node_modules/@tldraw/assets/icons/icon/align-bottom-center.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-bottom-center.4490bdfa.svg"},"./node_modules/@tldraw/assets/icons/icon/align-bottom-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-bottom-left.67c1b821.svg"},"./node_modules/@tldraw/assets/icons/icon/align-bottom-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-bottom-right.22859d35.svg"},"./node_modules/@tldraw/assets/icons/icon/align-bottom.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-bottom.ce06ab36.svg"},"./node_modules/@tldraw/assets/icons/icon/align-center-center.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-center-center.1138d83d.svg"},"./node_modules/@tldraw/assets/icons/icon/align-center-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-center-horizontal.930c5780.svg"},"./node_modules/@tldraw/assets/icons/icon/align-center-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-center-left.7b94b479.svg"},"./node_modules/@tldraw/assets/icons/icon/align-center-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-center-right.998b821e.svg"},"./node_modules/@tldraw/assets/icons/icon/align-center-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-center-vertical.558de0a5.svg"},"./node_modules/@tldraw/assets/icons/icon/align-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-left.e8547f18.svg"},"./node_modules/@tldraw/assets/icons/icon/align-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-right.63ad7e36.svg"},"./node_modules/@tldraw/assets/icons/icon/align-top-center.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-top-center.f29ef462.svg"},"./node_modules/@tldraw/assets/icons/icon/align-top-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-top-left.c9526482.svg"},"./node_modules/@tldraw/assets/icons/icon/align-top-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-top-right.8e840f50.svg"},"./node_modules/@tldraw/assets/icons/icon/align-top.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/align-top.0c605a93.svg"},"./node_modules/@tldraw/assets/icons/icon/arrow-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrow-left.bdbc3187.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-arrow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-arrow.00daeb45.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-bar.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-bar.f27a92aa.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-diamond.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-diamond.b02abe43.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-dot.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-dot.15ffc340.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-none.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-none.5fbdd731.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-square.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-square.1b5a8bd2.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-triangle-inverted.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-triangle-inverted.3e993490.svg"},"./node_modules/@tldraw/assets/icons/icon/arrowhead-triangle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/arrowhead-triangle.ed97990a.svg"},"./node_modules/@tldraw/assets/icons/icon/aspect-ratio.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/aspect-ratio.0c0dfab5.svg"},"./node_modules/@tldraw/assets/icons/icon/avatar.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/avatar.04b7c8aa.svg"},"./node_modules/@tldraw/assets/icons/icon/blob.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/blob.4d602f1c.svg"},"./node_modules/@tldraw/assets/icons/icon/bring-forward.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/bring-forward.4e8454cf.svg"},"./node_modules/@tldraw/assets/icons/icon/bring-to-front.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/bring-to-front.c4ccf4ce.svg"},"./node_modules/@tldraw/assets/icons/icon/check.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/check.465d6ec4.svg"},"./node_modules/@tldraw/assets/icons/icon/checkbox-checked.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/checkbox-checked.8593fee8.svg"},"./node_modules/@tldraw/assets/icons/icon/checkbox-empty.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/checkbox-empty.821f4696.svg"},"./node_modules/@tldraw/assets/icons/icon/chevron-down.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevron-down.d56afc85.svg"},"./node_modules/@tldraw/assets/icons/icon/chevron-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevron-left.da0755b5.svg"},"./node_modules/@tldraw/assets/icons/icon/chevron-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevron-right.55cac838.svg"},"./node_modules/@tldraw/assets/icons/icon/chevron-up.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevron-up.e7221b6a.svg"},"./node_modules/@tldraw/assets/icons/icon/chevrons-ne.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevrons-ne.5d073f54.svg"},"./node_modules/@tldraw/assets/icons/icon/chevrons-sw.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/chevrons-sw.6a66e898.svg"},"./node_modules/@tldraw/assets/icons/icon/clipboard-copied.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/clipboard-copied.48c04d3c.svg"},"./node_modules/@tldraw/assets/icons/icon/clipboard-copy.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/clipboard-copy.f7271f99.svg"},"./node_modules/@tldraw/assets/icons/icon/code.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/code.9156b392.svg"},"./node_modules/@tldraw/assets/icons/icon/collab.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/collab.349481f0.svg"},"./node_modules/@tldraw/assets/icons/icon/color.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/color.cf5431ac.svg"},"./node_modules/@tldraw/assets/icons/icon/comment.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/comment.c7417c3e.svg"},"./node_modules/@tldraw/assets/icons/icon/cross-2.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/cross-2.1214be8d.svg"},"./node_modules/@tldraw/assets/icons/icon/cross.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/cross.85457fc2.svg"},"./node_modules/@tldraw/assets/icons/icon/dash-dashed.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dash-dashed.cd37ef6b.svg"},"./node_modules/@tldraw/assets/icons/icon/dash-dotted.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dash-dotted.134afd86.svg"},"./node_modules/@tldraw/assets/icons/icon/dash-draw.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dash-draw.87e33cd1.svg"},"./node_modules/@tldraw/assets/icons/icon/dash-solid.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dash-solid.05dd460e.svg"},"./node_modules/@tldraw/assets/icons/icon/discord.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/discord.0ca82afb.svg"},"./node_modules/@tldraw/assets/icons/icon/distribute-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/distribute-horizontal.ac7b8bb5.svg"},"./node_modules/@tldraw/assets/icons/icon/distribute-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/distribute-vertical.8136094f.svg"},"./node_modules/@tldraw/assets/icons/icon/dot.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dot.61aa36f4.svg"},"./node_modules/@tldraw/assets/icons/icon/dots-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dots-horizontal.7e964380.svg"},"./node_modules/@tldraw/assets/icons/icon/dots-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/dots-vertical.90bcefb5.svg"},"./node_modules/@tldraw/assets/icons/icon/drag-handle-dots.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/drag-handle-dots.4f5a22f2.svg"},"./node_modules/@tldraw/assets/icons/icon/duplicate.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/duplicate.b809f2a3.svg"},"./node_modules/@tldraw/assets/icons/icon/edit.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/edit.cbccb97b.svg"},"./node_modules/@tldraw/assets/icons/icon/external-link.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/external-link.63c28501.svg"},"./node_modules/@tldraw/assets/icons/icon/file.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/file.e2a05396.svg"},"./node_modules/@tldraw/assets/icons/icon/fill-none.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/fill-none.6e94231e.svg"},"./node_modules/@tldraw/assets/icons/icon/fill-pattern.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/fill-pattern.fbf259e2.svg"},"./node_modules/@tldraw/assets/icons/icon/fill-semi.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/fill-semi.3a22e93a.svg"},"./node_modules/@tldraw/assets/icons/icon/fill-solid.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/fill-solid.015b4e0a.svg"},"./node_modules/@tldraw/assets/icons/icon/follow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/follow.46daaf10.svg"},"./node_modules/@tldraw/assets/icons/icon/following.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/following.1dcce3f0.svg"},"./node_modules/@tldraw/assets/icons/icon/font-draw.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/font-draw.155499e4.svg"},"./node_modules/@tldraw/assets/icons/icon/font-mono.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/font-mono.26f793dd.svg"},"./node_modules/@tldraw/assets/icons/icon/font-sans.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/font-sans.fd022c1c.svg"},"./node_modules/@tldraw/assets/icons/icon/font-serif.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/font-serif.c917136a.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-arrow-down.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-arrow-down.847719d1.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-arrow-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-arrow-left.2dc4d6d2.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-arrow-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-arrow-right.0fb615ea.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-arrow-up.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-arrow-up.f6ba6c44.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-check-box.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-check-box.79b4f770.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-cloud.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-cloud.1d17a147.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-diamond.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-diamond.ab847193.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-ellipse.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-ellipse.bcdea02e.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-hexagon.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-hexagon.f95d912a.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-octagon.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-octagon.dd0a2c8b.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-oval.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-oval.106f5514.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-pentagon.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-pentagon.2d061586.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-rectangle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-rectangle.8876bd5d.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-rhombus-2.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-rhombus-2.c516745f.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-rhombus.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-rhombus.ab93d1ba.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-star.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-star.f350b308.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-trapezoid.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-trapezoid.c66aa9d2.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-triangle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-triangle.cb4264c2.svg"},"./node_modules/@tldraw/assets/icons/icon/geo-x-box.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/geo-x-box.15d78668.svg"},"./node_modules/@tldraw/assets/icons/icon/github.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/github.70fae93c.svg"},"./node_modules/@tldraw/assets/icons/icon/group.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/group.eb0dde1d.svg"},"./node_modules/@tldraw/assets/icons/icon/hidden.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/hidden.2ff42f5a.svg"},"./node_modules/@tldraw/assets/icons/icon/image.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/image.f913f962.svg"},"./node_modules/@tldraw/assets/icons/icon/info-circle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/info-circle.137ad771.svg"},"./node_modules/@tldraw/assets/icons/icon/leading.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/leading.48e12713.svg"},"./node_modules/@tldraw/assets/icons/icon/link.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/link.db00ea40.svg"},"./node_modules/@tldraw/assets/icons/icon/lock-small.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/lock-small.96763d5f.svg"},"./node_modules/@tldraw/assets/icons/icon/lock.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/lock.b4ab1e67.svg"},"./node_modules/@tldraw/assets/icons/icon/menu.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/menu.e3362643.svg"},"./node_modules/@tldraw/assets/icons/icon/minus.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/minus.1e307a50.svg"},"./node_modules/@tldraw/assets/icons/icon/mixed.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/mixed.80a3dfa3.svg"},"./node_modules/@tldraw/assets/icons/icon/pack.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/pack.8dc91d06.svg"},"./node_modules/@tldraw/assets/icons/icon/page.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/page.35f52d40.svg"},"./node_modules/@tldraw/assets/icons/icon/plus.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/plus.5066f35f.svg"},"./node_modules/@tldraw/assets/icons/icon/question-mark-circle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/question-mark-circle.fcb45bd1.svg"},"./node_modules/@tldraw/assets/icons/icon/question-mark.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/question-mark.ed48a25f.svg"},"./node_modules/@tldraw/assets/icons/icon/redo.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/redo.20f9b6fb.svg"},"./node_modules/@tldraw/assets/icons/icon/reset-zoom.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/reset-zoom.c0b6371a.svg"},"./node_modules/@tldraw/assets/icons/icon/rotate-ccw.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/rotate-ccw.6ac265c5.svg"},"./node_modules/@tldraw/assets/icons/icon/rotate-cw.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/rotate-cw.9e7d6369.svg"},"./node_modules/@tldraw/assets/icons/icon/ruler.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/ruler.baccc123.svg"},"./node_modules/@tldraw/assets/icons/icon/search.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/search.023f69fc.svg"},"./node_modules/@tldraw/assets/icons/icon/send-backward.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/send-backward.fc6b72b5.svg"},"./node_modules/@tldraw/assets/icons/icon/send-to-back.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/send-to-back.e496b1ff.svg"},"./node_modules/@tldraw/assets/icons/icon/settings-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/settings-horizontal.9144bb9c.svg"},"./node_modules/@tldraw/assets/icons/icon/settings-vertical-1.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/settings-vertical-1.049e2c8b.svg"},"./node_modules/@tldraw/assets/icons/icon/settings-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/settings-vertical.a27c1208.svg"},"./node_modules/@tldraw/assets/icons/icon/share-1.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/share-1.71139457.svg"},"./node_modules/@tldraw/assets/icons/icon/share-2.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/share-2.cae45bbe.svg"},"./node_modules/@tldraw/assets/icons/icon/size-extra-large.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/size-extra-large.5d50f530.svg"},"./node_modules/@tldraw/assets/icons/icon/size-large.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/size-large.b074448f.svg"},"./node_modules/@tldraw/assets/icons/icon/size-medium.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/size-medium.e78725a8.svg"},"./node_modules/@tldraw/assets/icons/icon/size-small.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/size-small.c99550e3.svg"},"./node_modules/@tldraw/assets/icons/icon/spline-cubic.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/spline-cubic.7c5811f5.svg"},"./node_modules/@tldraw/assets/icons/icon/spline-line.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/spline-line.64ae3fd3.svg"},"./node_modules/@tldraw/assets/icons/icon/stack-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/stack-horizontal.c473f98d.svg"},"./node_modules/@tldraw/assets/icons/icon/stack-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/stack-vertical.385b5929.svg"},"./node_modules/@tldraw/assets/icons/icon/status-offline.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/status-offline.eb461de6.svg"},"./node_modules/@tldraw/assets/icons/icon/status-online.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/status-online.5d982d70.svg"},"./node_modules/@tldraw/assets/icons/icon/stretch-horizontal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/stretch-horizontal.37b3daf5.svg"},"./node_modules/@tldraw/assets/icons/icon/stretch-vertical.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/stretch-vertical.0d6ea37c.svg"},"./node_modules/@tldraw/assets/icons/icon/text-align-center.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/text-align-center.f80c205b.svg"},"./node_modules/@tldraw/assets/icons/icon/text-align-justify.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/text-align-justify.7d82532a.svg"},"./node_modules/@tldraw/assets/icons/icon/text-align-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/text-align-left.f0a68f95.svg"},"./node_modules/@tldraw/assets/icons/icon/text-align-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/text-align-right.8d47a8e4.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-arrow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-arrow.628923b9.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-embed.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-embed.ecb45855.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-eraser.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-eraser.489b3207.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-frame.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-frame.b24ffb4d.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-hand.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-hand.e957f253.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-highlight.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-highlight.180b2a86.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-laser.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-laser.acacd80d.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-line.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-line.8217549c.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-media.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-media.f913f962.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-note.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-note.2636d42c.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-pencil.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-pencil.4873c80e.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-pointer.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-pointer.656592f8.svg"},"./node_modules/@tldraw/assets/icons/icon/tool-text.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/tool-text.59d9ed01.svg"},"./node_modules/@tldraw/assets/icons/icon/trash.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/trash.882f8a5f.svg"},"./node_modules/@tldraw/assets/icons/icon/triangle-down.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/triangle-down.9d392e50.svg"},"./node_modules/@tldraw/assets/icons/icon/triangle-up.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/triangle-up.da21fc29.svg"},"./node_modules/@tldraw/assets/icons/icon/twitter.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/twitter.c8af212b.svg"},"./node_modules/@tldraw/assets/icons/icon/undo.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/undo.e53305a4.svg"},"./node_modules/@tldraw/assets/icons/icon/ungroup.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/ungroup.da07ddac.svg"},"./node_modules/@tldraw/assets/icons/icon/unlock-small.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/unlock-small.f03cbe67.svg"},"./node_modules/@tldraw/assets/icons/icon/unlock.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/unlock.87cd53b8.svg"},"./node_modules/@tldraw/assets/icons/icon/vertical-align-center.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/vertical-align-center.d85ac43a.svg"},"./node_modules/@tldraw/assets/icons/icon/vertical-align-end.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/vertical-align-end.f93b55ba.svg"},"./node_modules/@tldraw/assets/icons/icon/vertical-align-start.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/vertical-align-start.384f7e43.svg"},"./node_modules/@tldraw/assets/icons/icon/visible.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/visible.8e1894de.svg"},"./node_modules/@tldraw/assets/icons/icon/warning-triangle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/warning-triangle.9950dc5e.svg"},"./node_modules/@tldraw/assets/icons/icon/zoom-in.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/zoom-in.e81a4f80.svg"},"./node_modules/@tldraw/assets/icons/icon/zoom-out.svg":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"static/media/zoom-out.eb16b5d6.svg"},"./node_modules/@tldraw/assets/translations/ar.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"b8fa17853ceb8d15adfa.json"},"./node_modules/@tldraw/assets/translations/ca.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"162a32d3e4f8ceb9b4d3.json"},"./node_modules/@tldraw/assets/translations/da.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"a2d7cca2daf8a094621a.json"},"./node_modules/@tldraw/assets/translations/de.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"869b1ff48e514f5c0d3d.json"},"./node_modules/@tldraw/assets/translations/en.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"1601c40ee5aa1fc9cec7.json"},"./node_modules/@tldraw/assets/translations/es.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"6da93f40f9bd69a4bd0f.json"},"./node_modules/@tldraw/assets/translations/fa.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"4112289f2b4e54b4be0c.json"},"./node_modules/@tldraw/assets/translations/fi.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"dd3baabcbfb3a6c16ea8.json"},"./node_modules/@tldraw/assets/translations/fr.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"bfa08641e6b90c840583.json"},"./node_modules/@tldraw/assets/translations/gl.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"f02ce73a0eb4c981f13e.json"},"./node_modules/@tldraw/assets/translations/he.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"3e586a6719cc3a01b1dc.json"},"./node_modules/@tldraw/assets/translations/hi-in.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"9b2c876043d939435876.json"},"./node_modules/@tldraw/assets/translations/hu.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"93e2bc0c5725ff523ef1.json"},"./node_modules/@tldraw/assets/translations/it.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"df059bc5af2e75978233.json"},"./node_modules/@tldraw/assets/translations/ja.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"9a035ae774534af5ad88.json"},"./node_modules/@tldraw/assets/translations/ko-kr.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"f763405abf6d287e1e6c.json"},"./node_modules/@tldraw/assets/translations/ku.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"ac6cf9eb7d5c9b99e2c4.json"},"./node_modules/@tldraw/assets/translations/languages.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"0e2196c8b5c73126c934.json"},"./node_modules/@tldraw/assets/translations/main.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"205bd75923886de60ff0.json"},"./node_modules/@tldraw/assets/translations/my.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"2315c1fa4b26d778fe43.json"},"./node_modules/@tldraw/assets/translations/ne.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"b3d3c7c2d2b06209f892.json"},"./node_modules/@tldraw/assets/translations/no.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"51af0dd6cdc6244a5d4d.json"},"./node_modules/@tldraw/assets/translations/pl.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"b93e4e46a966eaf8e478.json"},"./node_modules/@tldraw/assets/translations/pt-br.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"7386418c7c744de3c9ce.json"},"./node_modules/@tldraw/assets/translations/pt-pt.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"f449f75e300081fb0960.json"},"./node_modules/@tldraw/assets/translations/ro.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"4306381754b668751eea.json"},"./node_modules/@tldraw/assets/translations/ru.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"1b0b4cd30e99f7a8c5cc.json"},"./node_modules/@tldraw/assets/translations/sv.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"bd25903a8b783cb556a7.json"},"./node_modules/@tldraw/assets/translations/te.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"bf5e5ff5a48bd21d0a68.json"},"./node_modules/@tldraw/assets/translations/th.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"e1b8abe90df460e7fbd8.json"},"./node_modules/@tldraw/assets/translations/tr.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"fdcf4284d9a9529348f6.json"},"./node_modules/@tldraw/assets/translations/uk.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"03b870d368934e442a16.json"},"./node_modules/@tldraw/assets/translations/vi.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"be841c5edf1499dc9ac1.json"},"./node_modules/@tldraw/assets/translations/zh-cn.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"d9bf39ef5301a3048476.json"},"./node_modules/@tldraw/assets/translations/zh-tw.json":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__.p+"2dbd819324ceeb50b21b.json"},"./node_modules/emojilib/dist/emoji-en-US.json":module=>{"use strict";module.exports=JSON.parse('{"":["grinning_face","face","smile","happy","joy",":D","grin"],"":["grinning_face_with_big_eyes","face","happy","joy","haha",":D",":)","smile","funny"],"":["grinning_face_with_smiling_eyes","face","happy","joy","funny","haha","laugh","like",":D",":)","smile"],"":["beaming_face_with_smiling_eyes","face","happy","smile","joy","kawaii"],"":["grinning_squinting_face","happy","joy","lol","satisfied","haha","face","glad","XD","laugh"],"":["grinning_face_with_sweat","face","hot","happy","laugh","sweat","smile","relief"],"":["rolling_on_the_floor_laughing","face","rolling","floor","laughing","lol","haha","rofl"],"":["face_with_tears_of_joy","face","cry","tears","weep","happy","happytears","haha"],"":["slightly_smiling_face","face","smile"],"":["upside_down_face","face","flipped","silly","smile"],"":["winking_face","face","happy","mischievous","secret",";)","smile","eye"],"":["smiling_face_with_smiling_eyes","face","smile","happy","flushed","crush","embarrassed","shy","joy"],"":["smiling_face_with_halo","face","angel","heaven","halo","innocent"],"":["smiling_face_with_hearts","face","love","like","affection","valentines","infatuation","crush","hearts","adore"],"":["smiling_face_with_heart_eyes","face","love","like","affection","valentines","infatuation","crush","heart"],"":["star_struck","face","smile","starry","eyes","grinning"],"":["face_blowing_a_kiss","face","love","like","affection","valentines","infatuation","kiss"],"":["kissing_face","love","like","face","3","valentines","infatuation","kiss"],"":["smiling_face","face","blush","massage","happiness"],"":["kissing_face_with_closed_eyes","face","love","like","affection","valentines","infatuation","kiss"],"":["kissing_face_with_smiling_eyes","face","affection","valentines","infatuation","kiss"],"":["face_savoring_food","happy","joy","tongue","smile","face","silly","yummy","nom","delicious","savouring"],"":["face_with_tongue","face","prank","childish","playful","mischievous","smile","tongue"],"":["winking_face_with_tongue","face","prank","childish","playful","mischievous","smile","wink","tongue"],"":["zany_face","face","goofy","crazy"],"":["squinting_face_with_tongue","face","prank","playful","mischievous","smile","tongue"],"":["money_mouth_face","face","rich","dollar","money"],"":["hugging_face","face","smile","hug"],"":["face_with_hand_over_mouth","face","whoops","shock","surprise"],"":["shushing_face","face","quiet","shhh"],"":["thinking_face","face","hmmm","think","consider"],"":["zipper_mouth_face","face","sealed","zipper","secret"],"":["face_with_raised_eyebrow","face","distrust","scepticism","disapproval","disbelief","surprise","suspicious"],"":["neutral_face","indifference","meh",":|","neutral"],"":["expressionless_face","face","indifferent","-_-","meh","deadpan"],"":["face_without_mouth","face"],"":["smirking_face","face","smile","mean","prank","smug","sarcasm"],"":["unamused_face","indifference","bored","straight face","serious","sarcasm","unimpressed","skeptical","dubious","ugh","side_eye"],"":["face_with_rolling_eyes","face","eyeroll","frustrated"],"":["grimacing_face","face","grimace","teeth"],"":["lying_face","face","lie","pinocchio"],"":["relieved_face","face","relaxed","phew","massage","happiness"],"":["pensive_face","face","sad","depressed","upset"],"":["sleepy_face","face","tired","rest","nap"],"":["drooling_face","face"],"":["sleeping_face","face","tired","sleepy","night","zzz"],"":["face_with_medical_mask","face","sick","ill","disease","covid"],"":["face_with_thermometer","sick","temperature","thermometer","cold","fever","covid"],"":["face_with_head_bandage","injured","clumsy","bandage","hurt"],"":["nauseated_face","face","vomit","gross","green","sick","throw up","ill"],"":["face_vomiting","face","sick"],"":["sneezing_face","face","gesundheit","sneeze","sick","allergy"],"":["hot_face","face","feverish","heat","red","sweating"],"":["cold_face","face","blue","freezing","frozen","frostbite","icicles"],"":["woozy_face","face","dizzy","intoxicated","tipsy","wavy"],"":["dizzy_face","spent","unconscious","xox","dizzy"],"":["exploding_head","face","shocked","mind","blown"],"":["cowboy_hat_face","face","cowgirl","hat"],"":["partying_face","face","celebration","woohoo"],"":["smiling_face_with_sunglasses","face","cool","smile","summer","beach","sunglass"],"":["nerd_face","face","nerdy","geek","dork"],"":["face_with_monocle","face","stuffy","wealthy"],"":["confused_face","face","indifference","huh","weird","hmmm",":/"],"":["worried_face","face","concern","nervous",":("],"":["slightly_frowning_face","face","frowning","disappointed","sad","upset"],"":["frowning_face","face","sad","upset","frown"],"":["face_with_open_mouth","face","surprise","impressed","wow","whoa",":O"],"":["hushed_face","face","woo","shh"],"":["astonished_face","face","xox","surprised","poisoned"],"":["flushed_face","face","blush","shy","flattered"],"":["pleading_face","face","begging","mercy","cry","tears","sad","grievance"],"":["frowning_face_with_open_mouth","face","aw","what"],"":["anguished_face","face","stunned","nervous"],"":["fearful_face","face","scared","terrified","nervous"],"":["anxious_face_with_sweat","face","nervous","sweat"],"":["sad_but_relieved_face","face","phew","sweat","nervous"],"":["crying_face","face","tears","sad","depressed","upset",":\'("],"":["loudly_crying_face","sobbing","face","cry","tears","sad","upset","depressed"],"":["face_screaming_in_fear","face","munch","scared","omg"],"":["confounded_face","face","confused","sick","unwell","oops",":S"],"":["persevering_face","face","sick","no","upset","oops"],"":["disappointed_face","face","sad","upset","depressed",":("],"":["downcast_face_with_sweat","face","hot","sad","tired","exercise"],"":["weary_face","face","tired","sleepy","sad","frustrated","upset"],"":["tired_face","sick","whine","upset","frustrated"],"":["yawning_face","tired","sleepy"],"":["face_with_steam_from_nose","face","gas","phew","proud","pride"],"":["pouting_face","angry","mad","hate","despise"],"":["angry_face","mad","face","annoyed","frustrated"],"":["face_with_symbols_on_mouth","face","swearing","cursing","cussing","profanity","expletive"],"":["smiling_face_with_horns","devil","horns"],"":["angry_face_with_horns","devil","angry","horns"],"":["skull","dead","skeleton","creepy","death","dead"],"":["skull_and_crossbones","poison","danger","deadly","scary","death","pirate","evil"],"":["pile_of_poo","hankey","shitface","fail","turd","shit"],"":["clown_face","face"],"":["ogre","monster","red","mask","halloween","scary","creepy","devil","demon","japanese_ogre"],"":["goblin","red","evil","mask","monster","scary","creepy","japanese_goblin"],"":["ghost","halloween","spooky","scary"],"":["alien","UFO","paul","weird","outer_space"],"":["alien_monster","game","arcade","play"],"":["robot","computer","machine","bot"],"":["grinning_cat","animal","cats","happy","smile"],"":["grinning_cat_with_smiling_eyes","animal","cats","smile"],"":["cat_with_tears_of_joy","animal","cats","haha","happy","tears"],"":["smiling_cat_with_heart_eyes","animal","love","like","affection","cats","valentines","heart"],"":["cat_with_wry_smile","animal","cats","smirk"],"":["kissing_cat","animal","cats","kiss"],"":["weary_cat","animal","cats","munch","scared","scream"],"":["crying_cat","animal","tears","weep","sad","cats","upset","cry"],"":["pouting_cat","animal","cats"],"":["see_no_evil_monkey","monkey","animal","nature","haha"],"":["hear_no_evil_monkey","animal","monkey","nature"],"":["speak_no_evil_monkey","monkey","animal","nature","omg"],"":["kiss_mark","face","lips","love","like","affection","valentines"],"":["love_letter","email","like","affection","envelope","valentines"],"":["heart_with_arrow","love","like","heart","affection","valentines"],"":["heart_with_ribbon","love","valentines"],"":["sparkling_heart","love","like","affection","valentines"],"":["growing_heart","like","love","affection","valentines","pink"],"":["beating_heart","love","like","affection","valentines","pink","heart"],"":["revolving_hearts","love","like","affection","valentines"],"":["two_hearts","love","like","affection","valentines","heart"],"":["heart_decoration","purple-square","love","like"],"":["heart_exclamation","decoration","love"],"":["broken_heart","sad","sorry","break","heart","heartbreak"],"":["red_heart","love","like","valentines"],"":["orange_heart","love","like","affection","valentines"],"":["yellow_heart","love","like","affection","valentines"],"":["green_heart","love","like","affection","valentines"],"":["blue_heart","love","like","affection","valentines"],"":["purple_heart","love","like","affection","valentines"],"":["brown_heart","coffee"],"":["black_heart","evil"],"":["white_heart","pure"],"":["hundred_points","score","perfect","numbers","century","exam","quiz","test","pass","hundred","100"],"":["anger_symbol","angry","mad"],"":["collision","bomb","explode","explosion","blown"],"":["dizzy","star","sparkle","shoot","magic"],"":["sweat_droplets","water","drip","oops"],"":["dashing_away","wind","air","fast","shoo","fart","smoke","puff"],"":["hole","embarrassing"],"":["bomb","boom","explode","explosion","terrorism"],"":["speech_balloon","bubble","words","message","talk","chatting"],"":["eye_in_speech_bubble","info"],"":["left_speech_bubble","words","message","talk","chatting"],"":["right_anger_bubble","caption","speech","thinking","mad"],"":["thought_balloon","bubble","cloud","speech","thinking","dream"],"":["zzz","sleepy","tired","dream"],"":["waving_hand","wave","hands","gesture","goodbye","solong","farewell","hello","hi","palm"],"":["raised_back_of_hand","fingers","raised","backhand"],"":["hand_with_fingers_splayed","hand","fingers","palm"],"":["raised_hand","fingers","stop","highfive","palm","ban"],"":["vulcan_salute","hand","fingers","spock","star trek"],"":["ok_hand","fingers","limbs","perfect","ok","okay"],"":["pinching_hand","tiny","small","size"],"":["victory_hand","fingers","ohyeah","hand","peace","victory","two"],"":["crossed_fingers","good","lucky"],"":["love_you_gesture","hand","fingers","gesture"],"":["sign_of_the_horns","hand","fingers","evil_eye","sign_of_horns","rock_on"],"":["call_me_hand","hands","gesture","shaka"],"":["backhand_index_pointing_left","direction","fingers","hand","left"],"":["backhand_index_pointing_right","fingers","hand","direction","right"],"":["backhand_index_pointing_up","fingers","hand","direction","up"],"":["middle_finger","hand","fingers","rude","middle","flipping"],"":["backhand_index_pointing_down","fingers","hand","direction","down"],"":["index_pointing_up","hand","fingers","direction","up"],"":["thumbs_up","thumbsup","yes","awesome","good","agree","accept","cool","hand","like","+1"],"":["thumbs_down","thumbsdown","no","dislike","hand","-1"],"":["raised_fist","fingers","hand","grasp"],"":["oncoming_fist","angry","violence","fist","hit","attack","hand"],"":["left_facing_fist","hand","fistbump"],"":["right_facing_fist","hand","fistbump"],"":["clapping_hands","hands","praise","applause","congrats","yay"],"":["raising_hands","gesture","hooray","yea","celebration","hands"],"":["open_hands","fingers","butterfly","hands","open"],"":["palms_up_together","hands","gesture","cupped","prayer"],"":["handshake","agreement","shake"],"":["folded_hands","please","hope","wish","namaste","highfive","pray","thank you","thanks","appreciate"],"":["writing_hand","lower_left_ballpoint_pen","stationery","write","compose"],"":["nail_polish","nail_care","beauty","manicure","finger","fashion","nail","slay"],"":["selfie","camera","phone"],"":["flexed_biceps","arm","flex","hand","summer","strong","biceps"],"":["mechanical_arm","accessibility"],"":["mechanical_leg","accessibility"],"":["leg","kick","limb"],"":["foot","kick","stomp"],"":["ear","face","hear","sound","listen"],"":["ear_with_hearing_aid","accessibility"],"":["nose","smell","sniff"],"":["brain","smart","intelligent"],"":["tooth","teeth","dentist"],"":["bone","skeleton"],"":["eyes","look","watch","stalk","peek","see"],"":["eye","face","look","see","watch","stare"],"":["tongue","mouth","playful"],"":["mouth","kiss"],"":["baby","child","boy","girl","toddler"],"":["child","gender-neutral","young"],"":["boy","man","male","guy","teenager"],"":["girl","female","woman","teenager"],"":["person","gender-neutral"],"":["person_blond_hair","hairstyle"],"":["man","mustache","father","dad","guy","classy","sir","moustache"],"":["man_beard","person","bewhiskered"],"":["man_red_hair","hairstyle"],"":["man_curly_hair","hairstyle"],"":["man_white_hair","old","elder"],"":["man_bald","hairless"],"":["woman","female","girls","lady"],"":["woman_red_hair","hairstyle"],"":["person_red_hair","hairstyle"],"":["woman_curly_hair","hairstyle"],"":["person_curly_hair","hairstyle"],"":["woman_white_hair","old","elder"],"":["person_white_hair","elder","old"],"":["woman_bald","hairless"],"":["person_bald","hairless"],"":["woman_blond_hair","woman","female","girl","blonde","person"],"":["man_blond_hair","man","male","boy","blonde","guy","person"],"":["older_person","human","elder","senior","gender-neutral"],"":["old_man","human","male","men","old","elder","senior"],"":["old_woman","human","female","women","lady","old","elder","senior"],"":["person_frowning","worried"],"":["man_frowning","male","boy","man","sad","depressed","discouraged","unhappy"],"":["woman_frowning","female","girl","woman","sad","depressed","discouraged","unhappy"],"":["person_pouting","upset"],"":["man_pouting","male","boy","man"],"":["woman_pouting","female","girl","woman"],"":["person_gesturing_no","decline"],"":["man_gesturing_no","male","boy","man","nope"],"":["woman_gesturing_no","female","girl","woman","nope"],"":["person_gesturing_ok","agree"],"":["man_gesturing_ok","men","boy","male","blue","human","man"],"":["woman_gesturing_ok","women","girl","female","pink","human","woman"],"":["person_tipping_hand","information"],"":["man_tipping_hand","male","boy","man","human","information"],"":["woman_tipping_hand","female","girl","woman","human","information"],"":["person_raising_hand","question"],"":["man_raising_hand","male","boy","man"],"":["woman_raising_hand","female","girl","woman"],"":["deaf_person","accessibility"],"":["deaf_man","accessibility"],"":["deaf_woman","accessibility"],"":["person_bowing","respectiful"],"":["man_bowing","man","male","boy"],"":["woman_bowing","woman","female","girl"],"":["person_facepalming","disappointed"],"":["man_facepalming","man","male","boy","disbelief"],"":["woman_facepalming","woman","female","girl","disbelief"],"":["person_shrugging","regardless"],"":["man_shrugging","man","male","boy","confused","indifferent","doubt"],"":["woman_shrugging","woman","female","girl","confused","indifferent","doubt"],"":["health_worker","hospital"],"":["man_health_worker","doctor","nurse","therapist","healthcare","man","human"],"":["woman_health_worker","doctor","nurse","therapist","healthcare","woman","human"],"":["student","learn"],"":["man_student","graduate","man","human"],"":["woman_student","graduate","woman","human"],"":["teacher","professor"],"":["man_teacher","instructor","professor","man","human"],"":["woman_teacher","instructor","professor","woman","human"],"":["judge","law"],"":["man_judge","justice","court","man","human"],"":["woman_judge","justice","court","woman","human"],"":["farmer","crops"],"":["man_farmer","rancher","gardener","man","human"],"":["woman_farmer","rancher","gardener","woman","human"],"":["cook","food","kitchen","culinary"],"":["man_cook","chef","man","human"],"":["woman_cook","chef","woman","human"],"":["mechanic","worker","technician"],"":["man_mechanic","plumber","man","human","wrench"],"":["woman_mechanic","plumber","woman","human","wrench"],"":["factory_worker","labor"],"":["man_factory_worker","assembly","industrial","man","human"],"":["woman_factory_worker","assembly","industrial","woman","human"],"":["office_worker","business"],"":["man_office_worker","business","manager","man","human"],"":["woman_office_worker","business","manager","woman","human"],"":["scientist","chemistry"],"":["man_scientist","biologist","chemist","engineer","physicist","man","human"],"":["woman_scientist","biologist","chemist","engineer","physicist","woman","human"],"":["technologist","computer"],"":["man_technologist","coder","developer","engineer","programmer","software","man","human","laptop","computer"],"":["woman_technologist","coder","developer","engineer","programmer","software","woman","human","laptop","computer"],"":["singer","song","artist","performer"],"":["man_singer","rockstar","entertainer","man","human"],"":["woman_singer","rockstar","entertainer","woman","human"],"":["artist","painting","draw","creativity"],"":["man_artist","painter","man","human"],"":["woman_artist","painter","woman","human"],"":["pilot","fly","plane","airplane"],"":["man_pilot","aviator","plane","man","human"],"":["woman_pilot","aviator","plane","woman","human"],"":["astronaut","outerspace"],"":["man_astronaut","space","rocket","man","human"],"":["woman_astronaut","space","rocket","woman","human"],"":["firefighter","fire"],"":["man_firefighter","fireman","man","human"],"":["woman_firefighter","fireman","woman","human"],"":["police_officer","cop"],"":["man_police_officer","man","police","law","legal","enforcement","arrest","911"],"":["woman_police_officer","woman","police","law","legal","enforcement","arrest","911","female"],"":["detective","human","spy"],"":["man_detective","crime"],"":["woman_detective","human","spy","detective","female","woman"],"":["guard","protect"],"":["man_guard","uk","gb","british","male","guy","royal"],"":["woman_guard","uk","gb","british","female","royal","woman"],"":["construction_worker","labor","build"],"":["man_construction_worker","male","human","wip","guy","build","construction","worker","labor"],"":["woman_construction_worker","female","human","wip","build","construction","worker","labor","woman"],"":["prince","boy","man","male","crown","royal","king"],"":["princess","girl","woman","female","blond","crown","royal","queen"],"":["person_wearing_turban","headdress"],"":["man_wearing_turban","male","indian","hinduism","arabs"],"":["woman_wearing_turban","female","indian","hinduism","arabs","woman"],"":["man_with_skullcap","male","boy","chinese"],"":["woman_with_headscarf","female","hijab","mantilla","tichel"],"":["man_in_tuxedo","couple","marriage","wedding","groom"],"":["bride_with_veil","couple","marriage","wedding","woman","bride"],"":["pregnant_woman","baby"],"":["breast_feeding","nursing","baby"],"":["baby_angel","heaven","wings","halo"],"":["santa_claus","festival","man","male","xmas","father christmas"],"":["mrs_claus","woman","female","xmas","mother christmas"],"":["superhero","marvel"],"":["man_superhero","man","male","good","hero","superpowers"],"":["woman_superhero","woman","female","good","heroine","superpowers"],"":["supervillain","marvel"],"":["man_supervillain","man","male","evil","bad","criminal","hero","superpowers"],"":["woman_supervillain","woman","female","evil","bad","criminal","heroine","superpowers"],"":["mage","magic"],"":["man_mage","man","male","mage","sorcerer"],"":["woman_mage","woman","female","mage","witch"],"":["fairy","wings","magical"],"":["man_fairy","man","male"],"":["woman_fairy","woman","female"],"":["vampire","blood","twilight"],"":["man_vampire","man","male","dracula"],"":["woman_vampire","woman","female"],"":["merperson","sea"],"":["merman","man","male","triton"],"":["mermaid","woman","female","merwoman","ariel"],"":["elf","magical"],"":["man_elf","man","male"],"":["woman_elf","woman","female"],"":["genie","magical","wishes"],"":["man_genie","man","male"],"":["woman_genie","woman","female"],"":["zombie","dead"],"":["man_zombie","man","male","dracula","undead","walking dead"],"":["woman_zombie","woman","female","undead","walking dead"],"":["person_getting_massage","relax"],"":["man_getting_massage","male","boy","man","head"],"":["woman_getting_massage","female","girl","woman","head"],"":["person_getting_haircut","hairstyle"],"":["man_getting_haircut","male","boy","man"],"":["woman_getting_haircut","female","girl","woman"],"":["person_walking","move"],"":["man_walking","human","feet","steps"],"":["woman_walking","human","feet","steps","woman","female"],"":["person_standing","still"],"":["man_standing","still"],"":["woman_standing","still"],"":["person_kneeling","pray","respectful"],"":["man_kneeling","pray","respectful"],"":["woman_kneeling","respectful","pray"],"":["person_with_probing_cane","blind"],"":["man_with_probing_cane","blind"],"":["woman_with_probing_cane","blind"],"":["person_in_motorized_wheelchair","disability","accessibility"],"":["man_in_motorized_wheelchair","disability","accessibility"],"":["woman_in_motorized_wheelchair","disability","accessibility"],"":["person_in_manual_wheelchair","disability","accessibility"],"":["man_in_manual_wheelchair","disability","accessibility"],"":["woman_in_manual_wheelchair","disability","accessibility"],"":["person_running","move"],"":["man_running","man","walking","exercise","race","running"],"":["woman_running","woman","walking","exercise","race","running","female"],"":["woman_dancing","female","girl","woman","fun"],"":["man_dancing","male","boy","fun","dancer"],"":["man_in_suit_levitating","suit","business","levitate","hover","jump"],"":["people_with_bunny_ears","perform","costume"],"":["men_with_bunny_ears","male","bunny","men","boys"],"":["women_with_bunny_ears","female","bunny","women","girls"],"":["person_in_steamy_room","relax","spa"],"":["man_in_steamy_room","male","man","spa","steamroom","sauna"],"":["woman_in_steamy_room","female","woman","spa","steamroom","sauna"],"":["person_climbing","sport"],"":["man_climbing","sports","hobby","man","male","rock"],"":["woman_climbing","sports","hobby","woman","female","rock"],"":["person_fencing","sports","fencing","sword"],"":["horse_racing","animal","betting","competition","gambling","luck"],"":["skier","sports","winter","snow"],"":["snowboarder","sports","winter"],"":["person_golfing","sports","business"],"":["man_golfing","sport"],"":["woman_golfing","sports","business","woman","female"],"":["person_surfing","sport","sea"],"":["man_surfing","sports","ocean","sea","summer","beach"],"":["woman_surfing","sports","ocean","sea","summer","beach","woman","female"],"":["person_rowing_boat","sport","move"],"":["man_rowing_boat","sports","hobby","water","ship"],"":["woman_rowing_boat","sports","hobby","water","ship","woman","female"],"":["person_swimming","sport","pool"],"":["man_swimming","sports","exercise","human","athlete","water","summer"],"":["woman_swimming","sports","exercise","human","athlete","water","summer","woman","female"],"":["person_bouncing_ball","sports","human"],"":["man_bouncing_ball","sport"],"":["woman_bouncing_ball","sports","human","woman","female"],"":["person_lifting_weights","sports","training","exercise"],"":["man_lifting_weights","sport"],"":["woman_lifting_weights","sports","training","exercise","woman","female"],"":["person_biking","bicycle","bike","cyclist","sport","move"],"":["man_biking","bicycle","bike","cyclist","sports","exercise","hipster"],"":["woman_biking","bicycle","bike","cyclist","sports","exercise","hipster","woman","female"],"":["person_mountain_biking","bicycle","bike","cyclist","sport","move"],"":["man_mountain_biking","bicycle","bike","cyclist","transportation","sports","human","race"],"":["woman_mountain_biking","bicycle","bike","cyclist","transportation","sports","human","race","woman","female"],"":["person_cartwheeling","sport","gymnastic"],"":["man_cartwheeling","gymnastics"],"":["woman_cartwheeling","gymnastics"],"":["people_wrestling","sport"],"":["men_wrestling","sports","wrestlers"],"":["women_wrestling","sports","wrestlers"],"":["person_playing_water_polo","sport"],"":["man_playing_water_polo","sports","pool"],"":["woman_playing_water_polo","sports","pool"],"":["person_playing_handball","sport"],"":["man_playing_handball","sports"],"":["woman_playing_handball","sports"],"":["person_juggling","performance","balance"],"":["man_juggling","juggle","balance","skill","multitask"],"":["woman_juggling","juggle","balance","skill","multitask"],"":["person_in_lotus_position","meditate"],"":["man_in_lotus_position","man","male","meditation","yoga","serenity","zen","mindfulness"],"":["woman_in_lotus_position","woman","female","meditation","yoga","serenity","zen","mindfulness"],"":["person_taking_bath","clean","shower","bathroom"],"":["person_in_bed","bed","rest"],"":["people_holding_hands","friendship"],"":["women_holding_hands","pair","friendship","couple","love","like","female","people","human"],"":["woman_and_man_holding_hands","pair","people","human","love","date","dating","like","affection","valentines","marriage"],"":["men_holding_hands","pair","couple","love","like","bromance","friendship","people","human"],"":["kiss","pair","valentines","love","like","dating","marriage"],"":["kiss_woman_man","love"],"":["kiss_man_man","pair","valentines","love","like","dating","marriage"],"":["kiss_woman_woman","pair","valentines","love","like","dating","marriage"],"":["couple_with_heart","pair","love","like","affection","human","dating","valentines","marriage"],"":["couple_with_heart_woman_man","love"],"":["couple_with_heart_man_man","pair","love","like","affection","human","dating","valentines","marriage"],"":["couple_with_heart_woman_woman","pair","love","like","affection","human","dating","valentines","marriage"],"":["family","home","parents","child","mom","dad","father","mother","people","human"],"":["family_man_woman_boy","love"],"":["family_man_woman_girl","home","parents","people","human","child"],"":["family_man_woman_girl_boy","home","parents","people","human","children"],"":["family_man_woman_boy_boy","home","parents","people","human","children"],"":["family_man_woman_girl_girl","home","parents","people","human","children"],"":["family_man_man_boy","home","parents","people","human","children"],"":["family_man_man_girl","home","parents","people","human","children"],"":["family_man_man_girl_boy","home","parents","people","human","children"],"":["family_man_man_boy_boy","home","parents","people","human","children"],"":["family_man_man_girl_girl","home","parents","people","human","children"],"":["family_woman_woman_boy","home","parents","people","human","children"],"":["family_woman_woman_girl","home","parents","people","human","children"],"":["family_woman_woman_girl_boy","home","parents","people","human","children"],"":["family_woman_woman_boy_boy","home","parents","people","human","children"],"":["family_woman_woman_girl_girl","home","parents","people","human","children"],"":["family_man_boy","home","parent","people","human","child"],"":["family_man_boy_boy","home","parent","people","human","children"],"":["family_man_girl","home","parent","people","human","child"],"":["family_man_girl_boy","home","parent","people","human","children"],"":["family_man_girl_girl","home","parent","people","human","children"],"":["family_woman_boy","home","parent","people","human","child"],"":["family_woman_boy_boy","home","parent","people","human","children"],"":["family_woman_girl","home","parent","people","human","child"],"":["family_woman_girl_boy","home","parent","people","human","children"],"":["family_woman_girl_girl","home","parent","people","human","children"],"":["speaking_head","user","person","human","sing","say","talk"],"":["bust_in_silhouette","user","person","human"],"":["busts_in_silhouette","user","person","human","group","team"],"":["footprints","feet","tracking","walking","beach"],"":["monkey_face","animal","nature","circus"],"":["monkey","animal","nature","banana","circus"],"":["gorilla","animal","nature","circus"],"":["orangutan","animal"],"":["dog_face","animal","friend","nature","woof","puppy","pet","faithful"],"":["dog","animal","nature","friend","doge","pet","faithful"],"":["guide_dog","animal","blind"],"":["service_dog","blind","animal"],"":["poodle","dog","animal","101","nature","pet"],"":["wolf","animal","nature","wild"],"":["fox","animal","nature","face"],"":["raccoon","animal","nature"],"":["cat_face","animal","meow","nature","pet","kitten"],"":["cat","animal","meow","pet","cats"],"":["lion","animal","nature"],"":["tiger_face","animal","cat","danger","wild","nature","roar"],"":["tiger","animal","nature","roar"],"":["leopard","animal","nature"],"":["horse_face","animal","brown","nature"],"":["horse","animal","gamble","luck"],"":["unicorn","animal","nature","mystical"],"":["zebra","animal","nature","stripes","safari"],"":["deer","animal","nature","horns","venison"],"":["cow_face","beef","ox","animal","nature","moo","milk"],"":["ox","animal","cow","beef"],"":["water_buffalo","animal","nature","ox","cow"],"":["cow","beef","ox","animal","nature","moo","milk"],"":["pig_face","animal","oink","nature"],"":["pig","animal","nature"],"":["boar","animal","nature"],"":["pig_nose","animal","oink"],"":["ram","animal","sheep","nature"],"":["ewe","animal","nature","wool","shipit"],"":["goat","animal","nature"],"":["camel","animal","hot","desert","hump"],"":["two_hump_camel","animal","nature","hot","desert","hump"],"":["llama","animal","nature","alpaca"],"":["giraffe","animal","nature","spots","safari"],"":["elephant","animal","nature","nose","th","circus"],"":["rhinoceros","animal","nature","horn"],"":["hippopotamus","animal","nature"],"":["mouse_face","animal","nature","cheese_wedge","rodent"],"":["mouse","animal","nature","rodent"],"":["rat","animal","mouse","rodent"],"":["hamster","animal","nature"],"":["rabbit_face","animal","nature","pet","spring","magic","bunny"],"":["rabbit","animal","nature","pet","magic","spring"],"":["chipmunk","animal","nature","rodent","squirrel"],"":["hedgehog","animal","nature","spiny"],"":["bat","animal","nature","blind","vampire"],"":["bear","animal","nature","wild"],"":["koala","animal","nature"],"":["panda","animal","nature"],"":["sloth","animal"],"":["otter","animal"],"":["skunk","animal"],"":["kangaroo","animal","nature","australia","joey","hop","marsupial"],"":["badger","animal","nature","honey"],"":["paw_prints","animal","tracking","footprints","dog","cat","pet","feet"],"":["turkey","animal","bird"],"":["chicken","animal","cluck","nature","bird"],"":["rooster","animal","nature","chicken"],"":["hatching_chick","animal","chicken","egg","born","baby","bird"],"":["baby_chick","animal","chicken","bird"],"":["front_facing_baby_chick","animal","chicken","baby","bird"],"":["bird","animal","nature","fly","tweet","spring"],"":["penguin","animal","nature"],"":["dove","animal","bird"],"":["eagle","animal","nature","bird"],"":["duck","animal","nature","bird","mallard"],"":["swan","animal","nature","bird"],"":["owl","animal","nature","bird","hoot"],"":["flamingo","animal"],"":["peacock","animal","nature","peahen","bird"],"":["parrot","animal","nature","bird","pirate","talk"],"":["frog","animal","nature","croak","toad"],"":["crocodile","animal","nature","reptile","lizard","alligator"],"":["turtle","animal","slow","nature","tortoise"],"":["lizard","animal","nature","reptile"],"":["snake","animal","evil","nature","hiss","python"],"":["dragon_face","animal","myth","nature","chinese","green"],"":["dragon","animal","myth","nature","chinese","green"],"":["sauropod","animal","nature","dinosaur","brachiosaurus","brontosaurus","diplodocus","extinct"],"":["t_rex","animal","nature","dinosaur","tyrannosaurus","extinct"],"":["spouting_whale","animal","nature","sea","ocean"],"":["whale","animal","nature","sea","ocean"],"":["dolphin","animal","nature","fish","sea","ocean","flipper","fins","beach"],"":["fish","animal","food","nature"],"":["tropical_fish","animal","swim","ocean","beach","nemo"],"":["blowfish","animal","nature","food","sea","ocean"],"":["shark","animal","nature","fish","sea","ocean","jaws","fins","beach"],"":["octopus","animal","creature","ocean","sea","nature","beach"],"":["spiral_shell","nature","sea","beach"],"":["snail","slow","animal","shell"],"":["butterfly","animal","insect","nature","caterpillar"],"":["bug","animal","insect","nature","worm"],"":["ant","animal","insect","nature","bug"],"":["honeybee","animal","insect","nature","bug","spring","honey"],"":["lady_beetle","animal","insect","nature","ladybug"],"":["cricket","animal","chirp"],"":["spider","animal","arachnid"],"":["spider_web","animal","insect","arachnid","silk"],"":["scorpion","animal","arachnid"],"":["mosquito","animal","nature","insect","malaria"],"":["microbe","amoeba","bacteria","germs","virus","covid"],"":["bouquet","flowers","nature","spring"],"":["cherry_blossom","nature","plant","spring","flower"],"":["white_flower","japanese","spring"],"":["rosette","flower","decoration","military"],"":["rose","flowers","valentines","love","spring"],"":["wilted_flower","plant","nature","flower","rose"],"":["hibiscus","plant","vegetable","flowers","beach"],"":["sunflower","nature","plant","fall"],"":["blossom","nature","flowers","yellow"],"":["tulip","flowers","plant","nature","summer","spring"],"":["seedling","plant","nature","grass","lawn","spring"],"":["evergreen_tree","plant","nature"],"":["deciduous_tree","plant","nature"],"":["palm_tree","plant","vegetable","nature","summer","beach","mojito","tropical"],"":["cactus","vegetable","plant","nature"],"":["sheaf_of_rice","nature","plant"],"":["herb","vegetable","plant","medicine","weed","grass","lawn"],"":["shamrock","vegetable","plant","nature","irish","clover"],"":["four_leaf_clover","vegetable","plant","nature","lucky","irish"],"":["maple_leaf","nature","plant","vegetable","ca","fall"],"":["fallen_leaf","nature","plant","vegetable","leaves"],"":["leaf_fluttering_in_wind","nature","plant","tree","vegetable","grass","lawn","spring"],"":["grapes","fruit","food","wine"],"":["melon","fruit","nature","food"],"":["watermelon","fruit","food","picnic","summer"],"":["tangerine","food","fruit","nature","orange"],"":["lemon","fruit","nature"],"":["banana","fruit","food","monkey"],"":["pineapple","fruit","nature","food"],"":["mango","fruit","food","tropical"],"":["red_apple","fruit","mac","school"],"":["green_apple","fruit","nature"],"":["pear","fruit","nature","food"],"":["peach","fruit","nature","food"],"":["cherries","food","fruit"],"":["strawberry","fruit","food","nature"],"":["kiwi_fruit","fruit","food"],"":["tomato","fruit","vegetable","nature","food"],"":["coconut","fruit","nature","food","palm"],"":["avocado","fruit","food"],"":["eggplant","vegetable","nature","food","aubergine"],"":["potato","food","tuber","vegatable","starch"],"":["carrot","vegetable","food","orange"],"":["ear_of_corn","food","vegetable","plant"],"":["hot_pepper","food","spicy","chilli","chili"],"":["cucumber","fruit","food","pickle"],"":["leafy_green","food","vegetable","plant","bok choy","cabbage","kale","lettuce"],"":["broccoli","fruit","food","vegetable"],"":["garlic","food","spice","cook"],"":["onion","cook","food","spice"],"":["mushroom","plant","vegetable"],"":["peanuts","food","nut"],"":["chestnut","food","squirrel"],"":["bread","food","wheat","breakfast","toast"],"":["croissant","food","bread","french"],"":["baguette_bread","food","bread","french","france","bakery"],"":["pretzel","food","bread","twisted","germany","bakery"],"":["bagel","food","bread","bakery","schmear","jewish_bakery"],"":["pancakes","food","breakfast","flapjacks","hotcakes","brunch"],"":["waffle","food","breakfast","brunch"],"":["cheese_wedge","food","chadder","swiss"],"":["meat_on_bone","good","food","drumstick"],"":["poultry_leg","food","meat","drumstick","bird","chicken","turkey"],"":["cut_of_meat","food","cow","meat","cut","chop","lambchop","porkchop"],"":["bacon","food","breakfast","pork","pig","meat","brunch"],"":["hamburger","meat","fast food","beef","cheeseburger","mcdonalds","burger king"],"":["french_fries","chips","snack","fast food","potato"],"":["pizza","food","party","italy"],"":["hot_dog","food","frankfurter","america"],"":["sandwich","food","lunch","bread","toast","bakery"],"":["taco","food","mexican"],"":["burrito","food","mexican"],"":["stuffed_flatbread","food","flatbread","stuffed","gyro","mediterranean"],"":["falafel","food","mediterranean"],"":["egg","food","chicken","breakfast"],"":["cooking","food","breakfast","kitchen","egg","skillet"],"":["shallow_pan_of_food","food","cooking","casserole","paella","skillet"],"":["pot_of_food","food","meat","soup","hot pot"],"":["bowl_with_spoon","food","breakfast","cereal","oatmeal","porridge"],"":["green_salad","food","healthy","lettuce","vegetable"],"":["popcorn","food","movie theater","films","snack","drama"],"":["butter","food","cook"],"":["salt","condiment","shaker"],"":["canned_food","food","soup","tomatoes"],"":["bento_box","food","japanese","box","lunch"],"":["rice_cracker","food","japanese","snack","senbei"],"":["rice_ball","food","japanese","onigiri","omusubi"],"":["cooked_rice","food","asian"],"":["curry_rice","food","spicy","hot","indian"],"":["steaming_bowl","food","japanese","noodle","chopsticks","ramen"],"":["spaghetti","food","italian","pasta","noodle"],"":["roasted_sweet_potato","food","nature","plant"],"":["oden","skewer","food","japanese"],"":["sushi","food","fish","japanese","rice"],"":["fried_shrimp","food","animal","appetizer","summer"],"":["fish_cake_with_swirl","food","japan","sea","beach","narutomaki","pink","swirl","kamaboko","surimi","ramen"],"":["moon_cake","food","autumn","dessert"],"":["dango","food","dessert","sweet","japanese","barbecue","meat"],"":["dumpling","food","empanada","pierogi","potsticker","gyoza"],"":["fortune_cookie","food","prophecy","dessert"],"":["takeout_box","food","leftovers"],"":["crab","animal","crustacean"],"":["lobster","animal","nature","bisque","claws","seafood"],"":["shrimp","animal","ocean","nature","seafood"],"":["squid","animal","nature","ocean","sea"],"":["oyster","food"],"":["soft_ice_cream","food","hot","dessert","summer"],"":["shaved_ice","hot","dessert","summer"],"":["ice_cream","food","hot","dessert"],"":["doughnut","food","dessert","snack","sweet","donut"],"":["cookie","food","snack","oreo","chocolate","sweet","dessert"],"":["birthday_cake","food","dessert","cake"],"":["shortcake","food","dessert"],"":["cupcake","food","dessert","bakery","sweet"],"":["pie","food","dessert","pastry"],"":["chocolate_bar","food","snack","dessert","sweet"],"":["candy","snack","dessert","sweet","lolly"],"":["lollipop","food","snack","candy","sweet"],"":["custard","dessert","food","pudding","flan"],"":["honey_pot","bees","sweet","kitchen"],"":["baby_bottle","food","container","milk"],"":["glass_of_milk","beverage","drink","cow"],"":["hot_beverage","beverage","caffeine","latte","espresso","coffee","mug"],"":["teacup_without_handle","drink","bowl","breakfast","green","british"],"":["sake","wine","drink","drunk","beverage","japanese","alcohol","booze"],"":["bottle_with_popping_cork","drink","wine","bottle","celebration"],"":["wine_glass","drink","beverage","drunk","alcohol","booze"],"":["cocktail_glass","drink","drunk","alcohol","beverage","booze","mojito"],"":["tropical_drink","beverage","cocktail","summer","beach","alcohol","booze","mojito"],"":["beer_mug","relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"":["clinking_beer_mugs","relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"":["clinking_glasses","beverage","drink","party","alcohol","celebrate","cheers","wine","champagne","toast"],"":["tumbler_glass","drink","beverage","drunk","alcohol","liquor","booze","bourbon","scotch","whisky","glass","shot"],"":["cup_with_straw","drink","soda"],"":["beverage_box","drink"],"":["mate","drink","tea","beverage"],"":["ice","water","cold"],"":["chopsticks","food"],"":["fork_and_knife_with_plate","food","eat","meal","lunch","dinner","restaurant"],"":["fork_and_knife","cutlery","kitchen"],"":["spoon","cutlery","kitchen","tableware"],"":["kitchen_knife","knife","blade","cutlery","kitchen","weapon"],"":["amphora","vase","jar"],"":["globe_showing_europe_africa","globe","world","earth","international"],"":["globe_showing_americas","globe","world","USA","earth","international"],"":["globe_showing_asia_australia","globe","world","east","earth","international"],"":["globe_with_meridians","earth","international","world","internet","interweb","i18n"],"":["world_map","location","direction"],"":["map_of_japan","nation","country","japanese","asia"],"":["compass","magnetic","navigation","orienteering"],"":["snow_capped_mountain","photo","nature","environment","winter","cold"],"":["mountain","photo","nature","environment"],"":["volcano","photo","nature","disaster"],"":["mount_fuji","photo","mountain","nature","japanese"],"":["camping","photo","outdoors","tent"],"":["beach_with_umbrella","weather","summer","sunny","sand","mojito"],"":["desert","photo","warm","saharah"],"":["desert_island","photo","tropical","mojito"],"":["national_park","photo","environment","nature"],"":["stadium","photo","place","sports","concert","venue"],"":["classical_building","art","culture","history"],"":["building_construction","wip","working","progress"],"":["brick","bricks"],"":["houses","buildings","photo"],"":["derelict_house","abandon","evict","broken","building"],"":["house","building","home"],"":["house_with_garden","home","plant","nature"],"":["office_building","building","bureau","work"],"":["japanese_post_office","building","envelope","communication"],"":["post_office","building","email"],"":["hospital","building","health","surgery","doctor"],"":["bank","building","money","sales","cash","business","enterprise"],"":["hotel","building","accomodation","checkin"],"":["love_hotel","like","affection","dating"],"":["convenience_store","building","shopping","groceries"],"":["school","building","student","education","learn","teach"],"":["department_store","building","shopping","mall"],"":["factory","building","industry","pollution","smoke"],"":["japanese_castle","photo","building"],"":["castle","building","royalty","history"],"":["wedding","love","like","affection","couple","marriage","bride","groom"],"":["tokyo_tower","photo","japanese"],"":["statue_of_liberty","american","newyork"],"":["church","building","religion","christ"],"":["mosque","islam","worship","minaret"],"":["hindu_temple","religion"],"":["synagogue","judaism","worship","temple","jewish"],"":["shinto_shrine","temple","japan","kyoto"],"":["kaaba","mecca","mosque","islam"],"":["fountain","photo","summer","water","fresh"],"":["tent","photo","camping","outdoors"],"":["foggy","photo","mountain"],"":["night_with_stars","evening","city","downtown"],"":["cityscape","photo","night life","urban"],"":["sunrise_over_mountains","view","vacation","photo"],"":["sunrise","morning","view","vacation","photo"],"":["cityscape_at_dusk","photo","evening","sky","buildings"],"":["sunset","photo","good morning","dawn"],"":["bridge_at_night","photo","sanfrancisco"],"":["hot_springs","bath","warm","relax"],"":["carousel_horse","photo","carnival"],"":["ferris_wheel","photo","carnival","londoneye"],"":["roller_coaster","carnival","playground","photo","fun"],"":["barber_pole","hair","salon","style"],"":["circus_tent","festival","carnival","party"],"":["locomotive","transportation","vehicle","train"],"":["railway_car","transportation","vehicle"],"":["high_speed_train","transportation","vehicle"],"":["bullet_train","transportation","vehicle","speed","fast","public","travel"],"":["train","transportation","vehicle"],"":["metro","transportation","blue-square","mrt","underground","tube"],"":["light_rail","transportation","vehicle"],"":["station","transportation","vehicle","public"],"":["tram","transportation","vehicle"],"":["monorail","transportation","vehicle"],"":["mountain_railway","transportation","vehicle"],"":["tram_car","transportation","vehicle","carriage","public","travel"],"":["bus","car","vehicle","transportation"],"":["oncoming_bus","vehicle","transportation"],"":["trolleybus","bart","transportation","vehicle"],"":["minibus","vehicle","car","transportation"],"":["ambulance","health","911","hospital"],"":["fire_engine","transportation","cars","vehicle"],"":["police_car","vehicle","cars","transportation","law","legal","enforcement"],"":["oncoming_police_car","vehicle","law","legal","enforcement","911"],"":["taxi","uber","vehicle","cars","transportation"],"":["oncoming_taxi","vehicle","cars","uber"],"":["automobile","red","transportation","vehicle"],"":["oncoming_automobile","car","vehicle","transportation"],"":["sport_utility_vehicle","transportation","vehicle"],"":["delivery_truck","cars","transportation"],"":["articulated_lorry","vehicle","cars","transportation","express"],"":["tractor","vehicle","car","farming","agriculture"],"":["racing_car","sports","race","fast","formula","f1"],"":["motorcycle","race","sports","fast"],"":["motor_scooter","vehicle","vespa","sasha"],"":["manual_wheelchair","accessibility"],"":["motorized_wheelchair","accessibility"],"":["auto_rickshaw","move","transportation"],"":["bicycle","bike","sports","exercise","hipster"],"":["kick_scooter","vehicle","kick","razor"],"":["skateboard","board"],"":["bus_stop","transportation","wait"],"":["motorway","road","cupertino","interstate","highway"],"":["railway_track","train","transportation"],"":["oil_drum","barrell"],"":["fuel_pump","gas station","petroleum"],"":["police_car_light","police","ambulance","911","emergency","alert","error","pinged","law","legal"],"":["horizontal_traffic_light","transportation","signal"],"":["vertical_traffic_light","transportation","driving"],"":["stop_sign","stop"],"":["construction","wip","progress","caution","warning"],"":["anchor","ship","ferry","sea","boat"],"":["sailboat","ship","summer","transportation","water","sailing"],"":["canoe","boat","paddle","water","ship"],"":["speedboat","ship","transportation","vehicle","summer"],"":["passenger_ship","yacht","cruise","ferry"],"":["ferry","boat","ship","yacht"],"":["motor_boat","ship"],"":["ship","transportation","titanic","deploy"],"":["airplane","vehicle","transportation","flight","fly"],"":["small_airplane","flight","transportation","fly","vehicle"],"":["airplane_departure","airport","flight","landing"],"":["airplane_arrival","airport","flight","boarding"],"":["parachute","fly","glide"],"":["seat","sit","airplane","transport","bus","flight","fly"],"":["helicopter","transportation","vehicle","fly"],"":["suspension_railway","vehicle","transportation"],"":["mountain_cableway","transportation","vehicle","ski"],"":["aerial_tramway","transportation","vehicle","ski"],"":["satellite","communication","gps","orbit","spaceflight","NASA","ISS"],"":["rocket","launch","ship","staffmode","NASA","outer space","outer_space","fly"],"":["flying_saucer","transportation","vehicle","ufo"],"":["bellhop_bell","service"],"":["luggage","packing","travel"],"":["hourglass_done","time","clock","oldschool","limit","exam","quiz","test"],"":["hourglass_not_done","oldschool","time","countdown"],"":["watch","time","accessories"],"":["alarm_clock","time","wake"],"":["stopwatch","time","deadline"],"":["timer_clock","alarm"],"":["mantelpiece_clock","time"],"":["twelve_o_clock","12","00:00","0000","12:00","1200","time","noon","midnight","midday","late","early","schedule"],"":["twelve_thirty","00:30","0030","12:30","1230","time","late","early","schedule"],"":["one_o_clock","1","1:00","100","13:00","1300","time","late","early","schedule"],"":["one_thirty","1:30","130","13:30","1330","time","late","early","schedule"],"":["two_o_clock","2","2:00","200","14:00","1400","time","late","early","schedule"],"":["two_thirty","2:30","230","14:30","1430","time","late","early","schedule"],"":["three_o_clock","3","3:00","300","15:00","1500","time","late","early","schedule"],"":["three_thirty","3:30","330","15:30","1530","time","late","early","schedule"],"":["four_o_clock","4","4:00","400","16:00","1600","time","late","early","schedule"],"":["four_thirty","4:30","430","16:30","1630","time","late","early","schedule"],"":["five_o_clock","5","5:00","500","17:00","1700","time","late","early","schedule"],"":["five_thirty","5:30","530","17:30","1730","time","late","early","schedule"],"":["six_o_clock","6","6:00","600","18:00","1800","time","late","early","schedule","dawn","dusk"],"":["six_thirty","6:30","630","18:30","1830","time","late","early","schedule"],"":["seven_o_clock","7","7:00","700","19:00","1900","time","late","early","schedule"],"":["seven_thirty","7:30","730","19:30","1930","time","late","early","schedule"],"":["eight_o_clock","8","8:00","800","20:00","2000","time","late","early","schedule"],"":["eight_thirty","8:30","830","20:30","2030","time","late","early","schedule"],"":["nine_o_clock","9","9:00","900","21:00","2100","time","late","early","schedule"],"":["nine_thirty","9:30","930","21:30","2130","time","late","early","schedule"],"":["ten_o_clock","10","10:00","1000","22:00","2200","time","late","early","schedule"],"":["ten_thirty","10:30","1030","22:30","2230","time","late","early","schedule"],"":["eleven_o_clock","11","11:00","1100","23:00","2300","time","late","early","schedule"],"":["eleven_thirty","11:30","1130","23:30","2330","time","late","early","schedule"],"":["new_moon","nature","twilight","planet","space","night","evening","sleep"],"":["waxing_crescent_moon","nature","twilight","planet","space","night","evening","sleep"],"":["first_quarter_moon","nature","twilight","planet","space","night","evening","sleep"],"":["waxing_gibbous_moon","nature","night","sky","gray","twilight","planet","space","evening","sleep"],"":["full_moon","nature","yellow","twilight","planet","space","night","evening","sleep"],"":["waning_gibbous_moon","nature","twilight","planet","space","night","evening","sleep","waxing_gibbous_moon"],"":["last_quarter_moon","nature","twilight","planet","space","night","evening","sleep"],"":["waning_crescent_moon","nature","twilight","planet","space","night","evening","sleep"],"":["crescent_moon","night","sleep","sky","evening","magic"],"":["new_moon_face","nature","twilight","planet","space","night","evening","sleep"],"":["first_quarter_moon_face","nature","twilight","planet","space","night","evening","sleep"],"":["last_quarter_moon_face","nature","twilight","planet","space","night","evening","sleep"],"":["thermometer","weather","temperature","hot","cold"],"":["sun","weather","nature","brightness","summer","beach","spring"],"":["full_moon_face","nature","twilight","planet","space","night","evening","sleep"],"":["sun_with_face","nature","morning","sky"],"":["ringed_planet","outerspace"],"":["star","night","yellow"],"":["glowing_star","night","sparkle","awesome","good","magic"],"":["shooting_star","night","photo"],"":["milky_way","photo","space","stars"],"":["cloud","weather","sky"],"":["sun_behind_cloud","weather","nature","cloudy","morning","fall","spring"],"":["cloud_with_lightning_and_rain","weather","lightning"],"":["sun_behind_small_cloud","weather"],"":["sun_behind_large_cloud","weather"],"":["sun_behind_rain_cloud","weather"],"":["cloud_with_rain","weather"],"":["cloud_with_snow","weather"],"":["cloud_with_lightning","weather","thunder"],"":["tornado","weather","cyclone","twister"],"":["fog","weather"],"":["wind_face","gust","air"],"":["cyclone","weather","swirl","blue","cloud","vortex","spiral","whirlpool","spin","tornado","hurricane","typhoon"],"":["rainbow","nature","happy","unicorn_face","photo","sky","spring"],"":["closed_umbrella","weather","rain","drizzle"],"":["umbrella","weather","spring"],"":["umbrella_with_rain_drops","rainy","weather","spring"],"":["umbrella_on_ground","weather","summer"],"":["high_voltage","thunder","weather","lightning bolt","fast","zap"],"":["snowflake","winter","season","cold","weather","christmas","xmas"],"":["snowman","winter","season","cold","weather","christmas","xmas","frozen"],"":["snowman_without_snow","winter","season","cold","weather","christmas","xmas","frozen","without_snow"],"":["comet","space"],"":["fire","hot","cook","flame"],"":["droplet","water","drip","faucet","spring"],"":["water_wave","sea","water","wave","nature","tsunami","disaster"],"":["jack_o_lantern","halloween","light","pumpkin","creepy","fall"],"":["christmas_tree","festival","vacation","december","xmas","celebration"],"":["fireworks","photo","festival","carnival","congratulations"],"":["sparkler","stars","night","shine"],"":["firecracker","dynamite","boom","explode","explosion","explosive"],"":["sparkles","stars","shine","shiny","cool","awesome","good","magic"],"":["balloon","party","celebration","birthday","circus"],"":["party_popper","party","congratulations","birthday","magic","circus","celebration","tada"],"":["confetti_ball","festival","party","birthday","circus"],"":["tanabata_tree","plant","nature","branch","summer","bamboo","wish","star_festival","tanzaku"],"":["pine_decoration","japanese","plant","nature","vegetable","panda","new_years","bamboo"],"":["japanese_dolls","japanese","toy","kimono"],"":["carp_streamer","fish","japanese","koinobori","carp","banner"],"":["wind_chime","nature","ding","spring","bell"],"":["moon_viewing_ceremony","photo","japan","asia","tsukimi"],"":["red_envelope","gift"],"":["ribbon","decoration","pink","girl","bowtie"],"":["wrapped_gift","present","birthday","christmas","xmas"],"":["reminder_ribbon","sports","cause","support","awareness"],"":["admission_tickets","sports","concert","entrance"],"":["ticket","event","concert","pass"],"":["military_medal","award","winning","army"],"":["trophy","win","award","contest","place","ftw","ceremony"],"":["sports_medal","award","winning"],"":["1st_place_medal","award","winning","first"],"":["2nd_place_medal","award","second"],"":["3rd_place_medal","award","third"],"":["soccer_ball","sports","football"],"":["baseball","sports","balls"],"":["softball","sports","balls"],"":["basketball","sports","balls","NBA"],"":["volleyball","sports","balls"],"":["american_football","sports","balls","NFL"],"":["rugby_football","sports","team"],"":["tennis","sports","balls","green"],"":["flying_disc","sports","frisbee","ultimate"],"":["bowling","sports","fun","play"],"":["cricket_game","sports"],"":["field_hockey","sports"],"":["ice_hockey","sports"],"":["lacrosse","sports","ball","stick"],"":["ping_pong","sports","pingpong"],"":["badminton","sports"],"":["boxing_glove","sports","fighting"],"":["martial_arts_uniform","judo","karate","taekwondo"],"":["goal_net","sports"],"":["flag_in_hole","sports","business","flag","hole","summer"],"":["ice_skate","sports"],"":["fishing_pole","food","hobby","summer"],"":["diving_mask","sport","ocean"],"":["running_shirt","play","pageant"],"":["skis","sports","winter","cold","snow"],"":["sled","sleigh","luge","toboggan"],"":["curling_stone","sports"],"":["direct_hit","game","play","bar","target","bullseye"],"":["yo_yo","toy"],"":["kite","wind","fly"],"":["pool_8_ball","pool","hobby","game","luck","magic"],"":["crystal_ball","disco","party","magic","circus","fortune_teller"],"":["nazar_amulet","bead","charm"],"":["video_game","play","console","PS4","controller"],"":["joystick","game","play"],"":["slot_machine","bet","gamble","vegas","fruit machine","luck","casino"],"":["game_die","dice","random","tabletop","play","luck"],"":["puzzle_piece","interlocking","puzzle","piece"],"":["teddy_bear","plush","stuffed"],"":["spade_suit","poker","cards","suits","magic"],"":["heart_suit","poker","cards","magic","suits"],"":["diamond_suit","poker","cards","magic","suits"],"":["club_suit","poker","cards","magic","suits"],"":["chess_pawn","expendable"],"":["joker","poker","cards","game","play","magic"],"":["mahjong_red_dragon","game","play","chinese","kanji"],"":["flower_playing_cards","game","sunset","red"],"":["performing_arts","acting","theater","drama"],"":["framed_picture","photography"],"":["artist_palette","design","paint","draw","colors"],"":["thread","needle","sewing","spool","string"],"":["yarn","ball","crochet","knit"],"":["glasses","fashion","accessories","eyesight","nerdy","dork","geek"],"":["sunglasses","face","cool","accessories"],"":["goggles","eyes","protection","safety"],"":["lab_coat","doctor","experiment","scientist","chemist"],"":["safety_vest","protection"],"":["necktie","shirt","suitup","formal","fashion","cloth","business"],"":["t_shirt","fashion","cloth","casual","shirt","tee"],"":["jeans","fashion","shopping"],"":["scarf","neck","winter","clothes"],"":["gloves","hands","winter","clothes"],"":["coat","jacket"],"":["socks","stockings","clothes"],"":["dress","clothes","fashion","shopping"],"":["kimono","dress","fashion","women","female","japanese"],"":["sari","dress"],"":["one_piece_swimsuit","fashion"],"":["briefs","clothing"],"":["shorts","clothing"],"":["bikini","swimming","female","woman","girl","fashion","beach","summer"],"":["woman_s_clothes","fashion","shopping_bags","female"],"":["purse","fashion","accessories","money","sales","shopping"],"":["handbag","fashion","accessory","accessories","shopping"],"":["clutch_bag","bag","accessories","shopping"],"":["shopping_bags","mall","buy","purchase"],"":["backpack","student","education","bag"],"":["man_s_shoe","fashion","male"],"":["running_shoe","shoes","sports","sneakers"],"":["hiking_boot","backpacking","camping","hiking"],"":["flat_shoe","ballet","slip-on","slipper"],"":["high_heeled_shoe","fashion","shoes","female","pumps","stiletto"],"":["woman_s_sandal","shoes","fashion","flip flops"],"":["ballet_shoes","dance"],"":["woman_s_boot","shoes","fashion"],"":["crown","king","kod","leader","royalty","lord"],"":["woman_s_hat","fashion","accessories","female","lady","spring"],"":["top_hat","magic","gentleman","classy","circus"],"":["graduation_cap","school","college","degree","university","graduation","cap","hat","legal","learn","education"],"":["billed_cap","cap","baseball"],"":["rescue_worker_s_helmet","construction","build"],"":["prayer_beads","dhikr","religious"],"":["lipstick","female","girl","fashion","woman"],"":["ring","wedding","propose","marriage","valentines","diamond","fashion","jewelry","gem","engagement"],"":["gem_stone","blue","ruby","diamond","jewelry"],"":["muted_speaker","sound","volume","silence","quiet"],"":["speaker_low_volume","sound","volume","silence","broadcast"],"":["speaker_medium_volume","volume","speaker","broadcast"],"":["speaker_high_volume","volume","noise","noisy","speaker","broadcast"],"":["loudspeaker","volume","sound"],"":["megaphone","sound","speaker","volume"],"":["postal_horn","instrument","music"],"":["bell","sound","notification","christmas","xmas","chime"],"":["bell_with_slash","sound","volume","mute","quiet","silent"],"":["musical_score","treble","clef","compose"],"":["musical_note","score","tone","sound"],"":["musical_notes","music","score"],"":["studio_microphone","sing","recording","artist","talkshow"],"":["level_slider","scale"],"":["control_knobs","dial"],"":["microphone","sound","music","PA","sing","talkshow"],"":["headphone","music","score","gadgets"],"":["radio","communication","music","podcast","program"],"":["saxophone","music","instrument","jazz","blues"],"":["guitar","music","instrument"],"":["musical_keyboard","piano","instrument","compose"],"":["trumpet","music","brass"],"":["violin","music","instrument","orchestra","symphony"],"":["banjo","music","instructment"],"":["drum","music","instrument","drumsticks","snare"],"":["mobile_phone","technology","apple","gadgets","dial"],"":["mobile_phone_with_arrow","iphone","incoming"],"":["telephone","technology","communication","dial"],"":["telephone_receiver","technology","communication","dial"],"":["pager","bbcall","oldschool","90s"],"":["fax_machine","communication","technology"],"":["battery","power","energy","sustain"],"":["electric_plug","charger","power"],"":["laptop","technology","screen","display","monitor"],"":["desktop_computer","technology","computing","screen"],"":["printer","paper","ink"],"":["keyboard","technology","computer","type","input","text"],"":["computer_mouse","click"],"":["trackball","technology","trackpad"],"":["computer_disk","technology","record","data","disk","90s"],"":["floppy_disk","oldschool","technology","save","90s","80s"],"":["optical_disk","technology","dvd","disk","disc","90s"],"":["dvd","cd","disk","disc"],"":["abacus","calculation"],"":["movie_camera","film","record"],"":["film_frames","movie"],"":["film_projector","video","tape","record","movie"],"":["clapper_board","movie","film","record"],"":["television","technology","program","oldschool","show"],"":["camera","gadgets","photography"],"":["camera_with_flash","photography","gadgets"],"":["video_camera","film","record"],"":["videocassette","record","video","oldschool","90s","80s"],"":["magnifying_glass_tilted_left","search","zoom","find","detective"],"":["magnifying_glass_tilted_right","search","zoom","find","detective"],"":["candle","fire","wax"],"":["light_bulb","light","electricity","idea"],"":["flashlight","dark","camping","sight","night"],"":["red_paper_lantern","light","paper","halloween","spooky"],"":["diya_lamp","lighting"],"":["notebook_with_decorative_cover","classroom","notes","record","paper","study"],"":["closed_book","read","library","knowledge","textbook","learn"],"":["open_book","book","read","library","knowledge","literature","learn","study"],"":["green_book","read","library","knowledge","study"],"":["blue_book","read","library","knowledge","learn","study"],"":["orange_book","read","library","knowledge","textbook","study"],"":["books","literature","library","study"],"":["notebook","stationery","record","notes","paper","study"],"":["ledger","notes","paper"],"":["page_with_curl","documents","office","paper"],"":["scroll","documents","ancient","history","paper"],"":["page_facing_up","documents","office","paper","information"],"":["newspaper","press","headline"],"":["rolled_up_newspaper","press","headline"],"":["bookmark_tabs","favorite","save","order","tidy"],"":["bookmark","favorite","label","save"],"":["label","sale","tag"],"":["money_bag","dollar","payment","coins","sale"],"":["yen_banknote","money","sales","japanese","dollar","currency"],"":["dollar_banknote","money","sales","bill","currency"],"":["euro_banknote","money","sales","dollar","currency"],"":["pound_banknote","british","sterling","money","sales","bills","uk","england","currency"],"":["money_with_wings","dollar","bills","payment","sale"],"":["credit_card","money","sales","dollar","bill","payment","shopping"],"":["receipt","accounting","expenses"],"":["chart_increasing_with_yen","green-square","graph","presentation","stats"],"":["currency_exchange","money","sales","dollar","travel"],"":["heavy_dollar_sign","money","sales","payment","currency","buck"],"":["envelope","letter","postal","inbox","communication"],"":["e_mail","communication","inbox"],"":["incoming_envelope","email","inbox"],"":["envelope_with_arrow","email","communication"],"":["outbox_tray","inbox","email"],"":["inbox_tray","email","documents"],"":["package","mail","gift","cardboard","box","moving"],"":["closed_mailbox_with_raised_flag","email","inbox","communication"],"":["closed_mailbox_with_lowered_flag","email","communication","inbox"],"":["open_mailbox_with_raised_flag","email","inbox","communication"],"":["open_mailbox_with_lowered_flag","email","inbox"],"":["postbox","email","letter","envelope"],"":["ballot_box_with_ballot","election","vote"],"":["pencil","stationery","write","paper","writing","school","study"],"":["black_nib","pen","stationery","writing","write"],"":["fountain_pen","stationery","writing","write"],"":["pen","stationery","writing","write"],"":["paintbrush","drawing","creativity","art"],"":["crayon","drawing","creativity"],"":["memo","write","documents","stationery","pencil","paper","writing","legal","exam","quiz","test","study","compose"],"":["briefcase","business","documents","work","law","legal","job","career"],"":["file_folder","documents","business","office"],"":["open_file_folder","documents","load"],"":["card_index_dividers","organizing","business","stationery"],"":["calendar","schedule"],"":["tear_off_calendar","schedule","date","planning"],"":["spiral_notepad","memo","stationery"],"":["spiral_calendar","date","schedule","planning"],"":["card_index","business","stationery"],"":["chart_increasing","graph","presentation","stats","recovery","business","economics","money","sales","good","success"],"":["chart_decreasing","graph","presentation","stats","recession","business","economics","money","sales","bad","failure"],"":["bar_chart","graph","presentation","stats"],"":["clipboard","stationery","documents"],"":["pushpin","stationery","mark","here"],"":["round_pushpin","stationery","location","map","here"],"":["paperclip","documents","stationery"],"":["linked_paperclips","documents","stationery"],"":["straight_ruler","stationery","calculate","length","math","school","drawing","architect","sketch"],"":["triangular_ruler","stationery","math","architect","sketch"],"":["scissors","stationery","cut"],"":["card_file_box","business","stationery"],"":["file_cabinet","filing","organizing"],"":["wastebasket","bin","trash","rubbish","garbage","toss"],"":["locked","security","password","padlock"],"":["unlocked","privacy","security"],"":["locked_with_pen","security","secret"],"":["locked_with_key","security","privacy"],"":["key","lock","door","password"],"":["old_key","lock","door","password"],"":["hammer","tools","build","create"],"":["axe","tool","chop","cut"],"":["pick","tools","dig"],"":["hammer_and_pick","tools","build","create"],"":["hammer_and_wrench","tools","build","create"],"":["dagger","weapon"],"":["crossed_swords","weapon"],"":["pistol","violence","weapon","revolver"],"":["bow_and_arrow","sports"],"":["shield","protection","security"],"":["wrench","tools","diy","ikea","fix","maintainer"],"":["nut_and_bolt","handy","tools","fix"],"":["gear","cog"],"":["clamp","tool"],"":["balance_scale","law","fairness","weight"],"":["probing_cane","accessibility"],"":["link","rings","url"],"":["chains","lock","arrest"],"":["toolbox","tools","diy","fix","maintainer","mechanic"],"":["magnet","attraction","magnetic"],"":["alembic","distilling","science","experiment","chemistry"],"":["test_tube","chemistry","experiment","lab","science"],"":["petri_dish","bacteria","biology","culture","lab"],"":["dna","biologist","genetics","life"],"":["microscope","laboratory","experiment","zoomin","science","study"],"":["telescope","stars","space","zoom","science","astronomy"],"":["satellite_antenna","communication","future","radio","space"],"":["syringe","health","hospital","drugs","blood","medicine","needle","doctor","nurse"],"":["drop_of_blood","period","hurt","harm","wound"],"":["pill","health","medicine","doctor","pharmacy","drug"],"":["adhesive_bandage","heal"],"":["stethoscope","health"],"":["door","house","entry","exit"],"":["bed","sleep","rest"],"":["couch_and_lamp","read","chill"],"":["chair","sit","furniture"],"":["toilet","restroom","wc","washroom","bathroom","potty"],"":["shower","clean","water","bathroom"],"":["bathtub","clean","shower","bathroom"],"":["razor","cut"],"":["lotion_bottle","moisturizer","sunscreen"],"":["safety_pin","diaper"],"":["broom","cleaning","sweeping","witch"],"":["basket","laundry"],"":["roll_of_paper","roll"],"":["soap","bar","bathing","cleaning","lather"],"":["sponge","absorbing","cleaning","porous"],"":["fire_extinguisher","quench"],"":["shopping_cart","trolley"],"":["cigarette","kills","tobacco","joint","smoke"],"":["coffin","vampire","dead","die","death","rip","graveyard","cemetery","casket","funeral","box"],"":["funeral_urn","dead","die","death","rip","ashes"],"":["moai","rock","easter island"],"":["atm_sign","money","sales","cash","blue-square","payment","bank"],"":["litter_in_bin_sign","blue-square","sign","human","info"],"":["potable_water","blue-square","liquid","restroom","cleaning","faucet"],"":["wheelchair_symbol","blue-square","disabled","accessibility"],"":["men_s_room","toilet","restroom","wc","blue-square","gender","male"],"":["women_s_room","purple-square","woman","female","toilet","loo","restroom","gender"],"":["restroom","blue-square","toilet","refresh","wc","gender"],"":["baby_symbol","orange-square","child"],"":["water_closet","toilet","restroom","blue-square"],"":["passport_control","custom","blue-square"],"":["customs","passport","border","blue-square"],"":["baggage_claim","blue-square","airport","transport"],"":["left_luggage","blue-square","travel"],"":["warning","exclamation","wip","alert","error","problem","issue"],"":["children_crossing","school","warning","danger","sign","driving","yellow-diamond"],"":["no_entry","limit","security","privacy","bad","denied","stop","circle"],"":["prohibited","forbid","stop","limit","denied","disallow","circle"],"":["no_bicycles","no_bikes","bicycle","bike","cyclist","prohibited","circle"],"":["no_smoking","cigarette","blue-square","smell","smoke"],"":["no_littering","trash","bin","garbage","circle"],"":["non_potable_water","drink","faucet","tap","circle"],"":["no_pedestrians","rules","crossing","walking","circle"],"":["no_mobile_phones","iphone","mute","circle"],"":["no_one_under_eighteen","18","drink","pub","night","minor","circle"],"":["radioactive","nuclear","danger"],"":["biohazard","danger"],"":["up_arrow","blue-square","continue","top","direction"],"":["up_right_arrow","blue-square","point","direction","diagonal","northeast"],"":["right_arrow","blue-square","next"],"":["down_right_arrow","blue-square","direction","diagonal","southeast"],"":["down_arrow","blue-square","direction","bottom"],"":["down_left_arrow","blue-square","direction","diagonal","southwest"],"":["left_arrow","blue-square","previous","back"],"":["up_left_arrow","blue-square","point","direction","diagonal","northwest"],"":["up_down_arrow","blue-square","direction","way","vertical"],"":["left_right_arrow","shape","direction","horizontal","sideways"],"":["right_arrow_curving_left","back","return","blue-square","undo","enter"],"":["left_arrow_curving_right","blue-square","return","rotate","direction"],"":["right_arrow_curving_up","blue-square","direction","top"],"":["right_arrow_curving_down","blue-square","direction","bottom"],"":["clockwise_vertical_arrows","sync","cycle","round","repeat"],"":["counterclockwise_arrows_button","blue-square","sync","cycle"],"":["back_arrow","arrow","words","return"],"":["end_arrow","words","arrow"],"":["on_arrow","arrow","words"],"":["soon_arrow","arrow","words"],"":["top_arrow","words","blue-square"],"":["place_of_worship","religion","church","temple","prayer"],"":["atom_symbol","science","physics","chemistry"],"":["om","hinduism","buddhism","sikhism","jainism"],"":["star_of_david","judaism"],"":["wheel_of_dharma","hinduism","buddhism","sikhism","jainism"],"":["yin_yang","balance"],"":["latin_cross","christianity"],"":["orthodox_cross","suppedaneum","religion"],"":["star_and_crescent","islam"],"":["peace_symbol","hippie"],"":["menorah","hanukkah","candles","jewish"],"":["dotted_six_pointed_star","purple-square","religion","jewish","hexagram"],"":["aries","sign","purple-square","zodiac","astrology"],"":["taurus","purple-square","sign","zodiac","astrology"],"":["gemini","sign","zodiac","purple-square","astrology"],"":["cancer","sign","zodiac","purple-square","astrology"],"":["leo","sign","purple-square","zodiac","astrology"],"":["virgo","sign","zodiac","purple-square","astrology"],"":["libra","sign","purple-square","zodiac","astrology"],"":["scorpio","sign","zodiac","purple-square","astrology"],"":["sagittarius","sign","zodiac","purple-square","astrology"],"":["capricorn","sign","zodiac","purple-square","astrology"],"":["aquarius","sign","purple-square","zodiac","astrology"],"":["pisces","purple-square","sign","zodiac","astrology"],"":["ophiuchus","sign","purple-square","constellation","astrology"],"":["shuffle_tracks_button","blue-square","shuffle","music","random"],"":["repeat_button","loop","record"],"":["repeat_single_button","blue-square","loop"],"":["play_button","blue-square","right","direction","play"],"":["fast_forward_button","blue-square","play","speed","continue"],"":["next_track_button","forward","next","blue-square"],"":["play_or_pause_button","blue-square","play","pause"],"":["reverse_button","blue-square","left","direction"],"":["fast_reverse_button","play","blue-square"],"":["last_track_button","backward"],"":["upwards_button","blue-square","triangle","direction","point","forward","top"],"":["fast_up_button","blue-square","direction","top"],"":["downwards_button","blue-square","direction","bottom"],"":["fast_down_button","blue-square","direction","bottom"],"":["pause_button","pause","blue-square"],"":["stop_button","blue-square"],"":["record_button","blue-square"],"":["eject_button","blue-square"],"":["cinema","blue-square","record","film","movie","curtain","stage","theater"],"":["dim_button","sun","afternoon","warm","summer"],"":["bright_button","sun","light"],"":["antenna_bars","blue-square","reception","phone","internet","connection","wifi","bluetooth","bars"],"":["vibration_mode","orange-square","phone"],"":["mobile_phone_off","mute","orange-square","silence","quiet"],"":["female_sign","woman","women","lady","girl"],"":["male_sign","man","boy","men"],"":["medical_symbol","health","hospital"],"":["infinity","forever"],"":["recycling_symbol","arrow","environment","garbage","trash"],"":["fleur_de_lis","decorative","scout"],"":["trident_emblem","weapon","spear"],"":["name_badge","fire","forbid"],"":["japanese_symbol_for_beginner","badge","shield"],"":["hollow_red_circle","circle","round"],"":["check_mark_button","green-square","ok","agree","vote","election","answer","tick"],"":["check_box_with_check","ok","agree","confirm","black-square","vote","election","yes","tick"],"":["check_mark","ok","nike","answer","yes","tick"],"":["multiplication_sign","math","calculation"],"":["cross_mark","no","delete","remove","cancel","red"],"":["cross_mark_button","x","green-square","no","deny"],"":["plus_sign","math","calculation","addition","more","increase"],"":["minus_sign","math","calculation","subtract","less"],"":["division_sign","divide","math","calculation"],"":["curly_loop","scribble","draw","shape","squiggle"],"":["double_curly_loop","tape","cassette"],"":["part_alternation_mark","graph","presentation","stats","business","economics","bad"],"":["eight_spoked_asterisk","star","sparkle","green-square"],"":["eight_pointed_star","orange-square","shape","polygon"],"":["sparkle","stars","green-square","awesome","good","fireworks"],"":["double_exclamation_mark","exclamation","surprise"],"":["exclamation_question_mark","wat","punctuation","surprise"],"":["question_mark","doubt","confused"],"":["white_question_mark","doubts","gray","huh","confused"],"":["white_exclamation_mark","surprise","punctuation","gray","wow","warning"],"":["exclamation_mark","heavy_exclamation_mark","danger","surprise","punctuation","wow","warning"],"":["wavy_dash","draw","line","moustache","mustache","squiggle","scribble"],"":["copyright","ip","license","circle","law","legal"],"":["registered","alphabet","circle"],"":["trade_mark","trademark","brand","law","legal"],"#":["keycap_","symbol","blue-square","twitter"],"*":["keycap_","star","keycap"],"0":["keycap_0","0","numbers","blue-square","null","zero"],"1":["keycap_1","blue-square","numbers","1","one"],"2":["keycap_2","numbers","2","prime","blue-square","two"],"3":["keycap_3","3","numbers","prime","blue-square","three"],"4":["keycap_4","4","numbers","blue-square","four"],"5":["keycap_5","5","numbers","blue-square","prime","five"],"6":["keycap_6","6","numbers","blue-square","six"],"7":["keycap_7","7","numbers","blue-square","prime","seven"],"8":["keycap_8","8","blue-square","numbers","eight"],"9":["keycap_9","blue-square","numbers","9","nine"],"":["keycap_10","numbers","10","blue-square","ten"],"":["input_latin_uppercase","alphabet","words","letters","uppercase","blue-square"],"":["input_latin_lowercase","blue-square","letters","lowercase","alphabet"],"":["input_numbers","numbers","blue-square","1234","1","2","3","4"],"":["input_symbols","blue-square","music","note","ampersand","percent","glyphs","characters"],"":["input_latin_letters","blue-square","alphabet"],"":["a_button","red-square","alphabet","letter"],"":["ab_button","red-square","alphabet"],"":["b_button","red-square","alphabet","letter"],"":["cl_button","alphabet","words","red-square"],"":["cool_button","words","blue-square"],"":["free_button","blue-square","words"],"":["information","blue-square","alphabet","letter"],"":["id_button","purple-square","words"],"":["circled_m","alphabet","blue-circle","letter"],"":["new_button","blue-square","words","start"],"":["ng_button","blue-square","words","shape","icon"],"":["o_button","alphabet","red-square","letter"],"":["ok_button","good","agree","yes","blue-square"],"":["p_button","cars","blue-square","alphabet","letter"],"":["sos_button","help","red-square","words","emergency","911"],"":["up_button","blue-square","above","high"],"":["vs_button","words","orange-square"],"":["japanese_here_button","blue-square","here","katakana","japanese","destination"],"":["japanese_service_charge_button","japanese","blue-square","katakana"],"":["japanese_monthly_amount_button","chinese","month","moon","japanese","orange-square","kanji"],"":["japanese_not_free_of_charge_button","orange-square","chinese","have","kanji"],"":["japanese_reserved_button","chinese","point","green-square","kanji"],"":["japanese_bargain_button","chinese","kanji","obtain","get","circle"],"":["japanese_discount_button","cut","divide","chinese","kanji","pink-square"],"":["japanese_free_of_charge_button","nothing","chinese","kanji","japanese","orange-square"],"":["japanese_prohibited_button","kanji","japanese","chinese","forbidden","limit","restricted","red-square"],"":["japanese_acceptable_button","ok","good","chinese","kanji","agree","yes","orange-circle"],"":["japanese_application_button","chinese","japanese","kanji","orange-square"],"":["japanese_passing_grade_button","japanese","chinese","join","kanji","red-square"],"":["japanese_vacancy_button","kanji","japanese","chinese","empty","sky","blue-square"],"":["japanese_congratulations_button","chinese","kanji","japanese","red-circle"],"":["japanese_secret_button","privacy","chinese","sshh","kanji","red-circle"],"":["japanese_open_for_business_button","japanese","opening hours","orange-square"],"":["japanese_no_vacancy_button","full","chinese","japanese","red-square","kanji"],"":["red_circle","shape","error","danger"],"":["orange_circle","round"],"":["yellow_circle","round"],"":["green_circle","round"],"":["blue_circle","shape","icon","button"],"":["purple_circle","round"],"":["brown_circle","round"],"":["black_circle","shape","button","round"],"":["white_circle","shape","round"],"":["red_square"],"":["orange_square"],"":["yellow_square"],"":["green_square"],"":["blue_square"],"":["purple_square"],"":["brown_square"],"":["black_large_square","shape","icon","button"],"":["white_large_square","shape","icon","stone","button"],"":["black_medium_square","shape","button","icon"],"":["white_medium_square","shape","stone","icon"],"":["black_medium_small_square","icon","shape","button"],"":["white_medium_small_square","shape","stone","icon","button"],"":["black_small_square","shape","icon"],"":["white_small_square","shape","icon"],"":["large_orange_diamond","shape","jewel","gem"],"":["large_blue_diamond","shape","jewel","gem"],"":["small_orange_diamond","shape","jewel","gem"],"":["small_blue_diamond","shape","jewel","gem"],"":["red_triangle_pointed_up","shape","direction","up","top"],"":["red_triangle_pointed_down","shape","direction","bottom"],"":["diamond_with_a_dot","jewel","blue","gem","crystal","fancy"],"":["radio_button","input","old","music","circle"],"":["white_square_button","shape","input"],"":["black_square_button","shape","input","frame"],"":["chequered_flag","contest","finishline","race","gokart"],"":["triangular_flag","mark","milestone","place"],"":["crossed_flags","japanese","nation","country","border"],"":["black_flag","pirate"],"":["white_flag","losing","loser","lost","surrender","give up","fail"],"":["rainbow_flag","flag","rainbow","pride","gay","lgbt","queer","homosexual","lesbian","bisexual"],"":["pirate_flag","skull","crossbones","flag","banner"],"":["flag_ascension_island"],"":["flag_andorra","ad","flag","nation","country","banner","andorra"],"":["flag_united_arab_emirates","united","arab","emirates","flag","nation","country","banner","united_arab_emirates"],"":["flag_afghanistan","af","flag","nation","country","banner","afghanistan"],"":["flag_antigua_barbuda","antigua","barbuda","flag","nation","country","banner","antigua_barbuda"],"":["flag_anguilla","ai","flag","nation","country","banner","anguilla"],"":["flag_albania","al","flag","nation","country","banner","albania"],"":["flag_armenia","am","flag","nation","country","banner","armenia"],"":["flag_angola","ao","flag","nation","country","banner","angola"],"":["flag_antarctica","aq","flag","nation","country","banner","antarctica"],"":["flag_argentina","ar","flag","nation","country","banner","argentina"],"":["flag_american_samoa","american","ws","flag","nation","country","banner","american_samoa"],"":["flag_austria","at","flag","nation","country","banner","austria"],"":["flag_australia","au","flag","nation","country","banner","australia"],"":["flag_aruba","aw","flag","nation","country","banner","aruba"],"":["flag_aland_islands","land","islands","flag","nation","country","banner","aland_islands"],"":["flag_azerbaijan","az","flag","nation","country","banner","azerbaijan"],"":["flag_bosnia_herzegovina","bosnia","herzegovina","flag","nation","country","banner","bosnia_herzegovina"],"":["flag_barbados","bb","flag","nation","country","banner","barbados"],"":["flag_bangladesh","bd","flag","nation","country","banner","bangladesh"],"":["flag_belgium","be","flag","nation","country","banner","belgium"],"":["flag_burkina_faso","burkina","faso","flag","nation","country","banner","burkina_faso"],"":["flag_bulgaria","bg","flag","nation","country","banner","bulgaria"],"":["flag_bahrain","bh","flag","nation","country","banner","bahrain"],"":["flag_burundi","bi","flag","nation","country","banner","burundi"],"":["flag_benin","bj","flag","nation","country","banner","benin"],"":["flag_st_barthelemy","saint","barthlemy","flag","nation","country","banner","st_barthelemy"],"":["flag_bermuda","bm","flag","nation","country","banner","bermuda"],"":["flag_brunei","bn","darussalam","flag","nation","country","banner","brunei"],"":["flag_bolivia","bo","flag","nation","country","banner","bolivia"],"":["flag_caribbean_netherlands","bonaire","flag","nation","country","banner","caribbean_netherlands"],"":["flag_brazil","br","flag","nation","country","banner","brazil"],"":["flag_bahamas","bs","flag","nation","country","banner","bahamas"],"":["flag_bhutan","bt","flag","nation","country","banner","bhutan"],"":["flag_bouvet_island","norway"],"":["flag_botswana","bw","flag","nation","country","banner","botswana"],"":["flag_belarus","by","flag","nation","country","banner","belarus"],"":["flag_belize","bz","flag","nation","country","banner","belize"],"":["flag_canada","ca","flag","nation","country","banner","canada"],"":["flag_cocos_islands","cocos","keeling","islands","flag","nation","country","banner","cocos_islands"],"":["flag_congo_kinshasa","congo","democratic","republic","flag","nation","country","banner","congo_kinshasa"],"":["flag_central_african_republic","central","african","republic","flag","nation","country","banner","central_african_republic"],"":["flag_congo_brazzaville","congo","flag","nation","country","banner","congo_brazzaville"],"":["flag_switzerland","ch","flag","nation","country","banner","switzerland"],"":["flag_cote_d_ivoire","ivory","coast","flag","nation","country","banner","cote_d_ivoire"],"":["flag_cook_islands","cook","islands","flag","nation","country","banner","cook_islands"],"":["flag_chile","flag","nation","country","banner","chile"],"":["flag_cameroon","cm","flag","nation","country","banner","cameroon"],"":["flag_china","china","chinese","prc","flag","country","nation","banner"],"":["flag_colombia","co","flag","nation","country","banner","colombia"],"":["flag_clipperton_island"],"":["flag_costa_rica","costa","rica","flag","nation","country","banner","costa_rica"],"":["flag_cuba","cu","flag","nation","country","banner","cuba"],"":["flag_cape_verde","cabo","verde","flag","nation","country","banner","cape_verde"],"":["flag_curacao","curaao","flag","nation","country","banner","curacao"],"":["flag_christmas_island","christmas","island","flag","nation","country","banner","christmas_island"],"":["flag_cyprus","cy","flag","nation","country","banner","cyprus"],"":["flag_czechia","cz","flag","nation","country","banner","czechia"],"":["flag_germany","german","nation","flag","country","banner","germany"],"":["flag_diego_garcia"],"":["flag_djibouti","dj","flag","nation","country","banner","djibouti"],"":["flag_denmark","dk","flag","nation","country","banner","denmark"],"":["flag_dominica","dm","flag","nation","country","banner","dominica"],"":["flag_dominican_republic","dominican","republic","flag","nation","country","banner","dominican_republic"],"":["flag_algeria","dz","flag","nation","country","banner","algeria"],"":["flag_ceuta_melilla"],"":["flag_ecuador","ec","flag","nation","country","banner","ecuador"],"":["flag_estonia","ee","flag","nation","country","banner","estonia"],"":["flag_egypt","eg","flag","nation","country","banner","egypt"],"":["flag_western_sahara","western","sahara","flag","nation","country","banner","western_sahara"],"":["flag_eritrea","er","flag","nation","country","banner","eritrea"],"":["flag_spain","spain","flag","nation","country","banner"],"":["flag_ethiopia","et","flag","nation","country","banner","ethiopia"],"":["flag_european_union","european","union","flag","banner"],"":["flag_finland","fi","flag","nation","country","banner","finland"],"":["flag_fiji","fj","flag","nation","country","banner","fiji"],"":["flag_falkland_islands","falkland","islands","malvinas","flag","nation","country","banner","falkland_islands"],"":["flag_micronesia","micronesia","federated","states","flag","nation","country","banner"],"":["flag_faroe_islands","faroe","islands","flag","nation","country","banner","faroe_islands"],"":["flag_france","banner","flag","nation","france","french","country"],"":["flag_gabon","ga","flag","nation","country","banner","gabon"],"":["flag_united_kingdom","united","kingdom","great","britain","northern","ireland","flag","nation","country","banner","british","UK","english","england","union jack","united_kingdom"],"":["flag_grenada","gd","flag","nation","country","banner","grenada"],"":["flag_georgia","ge","flag","nation","country","banner","georgia"],"":["flag_french_guiana","french","guiana","flag","nation","country","banner","french_guiana"],"":["flag_guernsey","gg","flag","nation","country","banner","guernsey"],"":["flag_ghana","gh","flag","nation","country","banner","ghana"],"":["flag_gibraltar","gi","flag","nation","country","banner","gibraltar"],"":["flag_greenland","gl","flag","nation","country","banner","greenland"],"":["flag_gambia","gm","flag","nation","country","banner","gambia"],"":["flag_guinea","gn","flag","nation","country","banner","guinea"],"":["flag_guadeloupe","gp","flag","nation","country","banner","guadeloupe"],"":["flag_equatorial_guinea","equatorial","gn","flag","nation","country","banner","equatorial_guinea"],"":["flag_greece","gr","flag","nation","country","banner","greece"],"":["flag_south_georgia_south_sandwich_islands","south","georgia","sandwich","islands","flag","nation","country","banner","south_georgia_south_sandwich_islands"],"":["flag_guatemala","gt","flag","nation","country","banner","guatemala"],"":["flag_guam","gu","flag","nation","country","banner","guam"],"":["flag_guinea_bissau","gw","bissau","flag","nation","country","banner","guinea_bissau"],"":["flag_guyana","gy","flag","nation","country","banner","guyana"],"":["flag_hong_kong_sar_china","hong","kong","flag","nation","country","banner","hong_kong_sar_china"],"":["flag_heard_mcdonald_islands"],"":["flag_honduras","hn","flag","nation","country","banner","honduras"],"":["flag_croatia","hr","flag","nation","country","banner","croatia"],"":["flag_haiti","ht","flag","nation","country","banner","haiti"],"":["flag_hungary","hu","flag","nation","country","banner","hungary"],"":["flag_canary_islands","canary","islands","flag","nation","country","banner","canary_islands"],"":["flag_indonesia","flag","nation","country","banner","indonesia"],"":["flag_ireland","ie","flag","nation","country","banner","ireland"],"":["flag_israel","il","flag","nation","country","banner","israel"],"":["flag_isle_of_man","isle","man","flag","nation","country","banner","isle_of_man"],"":["flag_india","in","flag","nation","country","banner","india"],"":["flag_british_indian_ocean_territory","british","indian","ocean","territory","flag","nation","country","banner","british_indian_ocean_territory"],"":["flag_iraq","iq","flag","nation","country","banner","iraq"],"":["flag_iran","iran","islamic","republic","flag","nation","country","banner"],"":["flag_iceland","is","flag","nation","country","banner","iceland"],"":["flag_italy","italy","flag","nation","country","banner"],"":["flag_jersey","je","flag","nation","country","banner","jersey"],"":["flag_jamaica","jm","flag","nation","country","banner","jamaica"],"":["flag_jordan","jo","flag","nation","country","banner","jordan"],"":["flag_japan","japanese","nation","flag","country","banner","japan","jp","ja"],"":["flag_kenya","ke","flag","nation","country","banner","kenya"],"":["flag_kyrgyzstan","kg","flag","nation","country","banner","kyrgyzstan"],"":["flag_cambodia","kh","flag","nation","country","banner","cambodia"],"":["flag_kiribati","ki","flag","nation","country","banner","kiribati"],"":["flag_comoros","km","flag","nation","country","banner","comoros"],"":["flag_st_kitts_nevis","saint","kitts","nevis","flag","nation","country","banner","st_kitts_nevis"],"":["flag_north_korea","north","korea","nation","flag","country","banner","north_korea"],"":["flag_south_korea","south","korea","nation","flag","country","banner","south_korea"],"":["flag_kuwait","kw","flag","nation","country","banner","kuwait"],"":["flag_cayman_islands","cayman","islands","flag","nation","country","banner","cayman_islands"],"":["flag_kazakhstan","kz","flag","nation","country","banner","kazakhstan"],"":["flag_laos","lao","democratic","republic","flag","nation","country","banner","laos"],"":["flag_lebanon","lb","flag","nation","country","banner","lebanon"],"":["flag_st_lucia","saint","lucia","flag","nation","country","banner","st_lucia"],"":["flag_liechtenstein","li","flag","nation","country","banner","liechtenstein"],"":["flag_sri_lanka","sri","lanka","flag","nation","country","banner","sri_lanka"],"":["flag_liberia","lr","flag","nation","country","banner","liberia"],"":["flag_lesotho","ls","flag","nation","country","banner","lesotho"],"":["flag_lithuania","lt","flag","nation","country","banner","lithuania"],"":["flag_luxembourg","lu","flag","nation","country","banner","luxembourg"],"":["flag_latvia","lv","flag","nation","country","banner","latvia"],"":["flag_libya","ly","flag","nation","country","banner","libya"],"":["flag_morocco","ma","flag","nation","country","banner","morocco"],"":["flag_monaco","mc","flag","nation","country","banner","monaco"],"":["flag_moldova","moldova","republic","flag","nation","country","banner"],"":["flag_montenegro","me","flag","nation","country","banner","montenegro"],"":["flag_st_martin"],"":["flag_madagascar","mg","flag","nation","country","banner","madagascar"],"":["flag_marshall_islands","marshall","islands","flag","nation","country","banner","marshall_islands"],"":["flag_north_macedonia","macedonia","flag","nation","country","banner","north_macedonia"],"":["flag_mali","ml","flag","nation","country","banner","mali"],"":["flag_myanmar","mm","flag","nation","country","banner","myanmar"],"":["flag_mongolia","mn","flag","nation","country","banner","mongolia"],"":["flag_macao_sar_china","macao","flag","nation","country","banner","macao_sar_china"],"":["flag_northern_mariana_islands","northern","mariana","islands","flag","nation","country","banner","northern_mariana_islands"],"":["flag_martinique","mq","flag","nation","country","banner","martinique"],"":["flag_mauritania","mr","flag","nation","country","banner","mauritania"],"":["flag_montserrat","ms","flag","nation","country","banner","montserrat"],"":["flag_malta","mt","flag","nation","country","banner","malta"],"":["flag_mauritius","mu","flag","nation","country","banner","mauritius"],"":["flag_maldives","mv","flag","nation","country","banner","maldives"],"":["flag_malawi","mw","flag","nation","country","banner","malawi"],"":["flag_mexico","mx","flag","nation","country","banner","mexico"],"":["flag_malaysia","my","flag","nation","country","banner","malaysia"],"":["flag_mozambique","mz","flag","nation","country","banner","mozambique"],"":["flag_namibia","na","flag","nation","country","banner","namibia"],"":["flag_new_caledonia","new","caledonia","flag","nation","country","banner","new_caledonia"],"":["flag_niger","ne","flag","nation","country","banner","niger"],"":["flag_norfolk_island","norfolk","island","flag","nation","country","banner","norfolk_island"],"":["flag_nigeria","flag","nation","country","banner","nigeria"],"":["flag_nicaragua","ni","flag","nation","country","banner","nicaragua"],"":["flag_netherlands","nl","flag","nation","country","banner","netherlands"],"":["flag_norway","no","flag","nation","country","banner","norway"],"":["flag_nepal","np","flag","nation","country","banner","nepal"],"":["flag_nauru","nr","flag","nation","country","banner","nauru"],"":["flag_niue","nu","flag","nation","country","banner","niue"],"":["flag_new_zealand","new","zealand","flag","nation","country","banner","new_zealand"],"":["flag_oman","om_symbol","flag","nation","country","banner","oman"],"":["flag_panama","pa","flag","nation","country","banner","panama"],"":["flag_peru","pe","flag","nation","country","banner","peru"],"":["flag_french_polynesia","french","polynesia","flag","nation","country","banner","french_polynesia"],"":["flag_papua_new_guinea","papua","new","guinea","flag","nation","country","banner","papua_new_guinea"],"":["flag_philippines","ph","flag","nation","country","banner","philippines"],"":["flag_pakistan","pk","flag","nation","country","banner","pakistan"],"":["flag_poland","pl","flag","nation","country","banner","poland"],"":["flag_st_pierre_miquelon","saint","pierre","miquelon","flag","nation","country","banner","st_pierre_miquelon"],"":["flag_pitcairn_islands","pitcairn","flag","nation","country","banner","pitcairn_islands"],"":["flag_puerto_rico","puerto","rico","flag","nation","country","banner","puerto_rico"],"":["flag_palestinian_territories","palestine","palestinian","territories","flag","nation","country","banner","palestinian_territories"],"":["flag_portugal","pt","flag","nation","country","banner","portugal"],"":["flag_palau","pw","flag","nation","country","banner","palau"],"":["flag_paraguay","py","flag","nation","country","banner","paraguay"],"":["flag_qatar","qa","flag","nation","country","banner","qatar"],"":["flag_reunion","runion","flag","nation","country","banner","reunion"],"":["flag_romania","ro","flag","nation","country","banner","romania"],"":["flag_serbia","rs","flag","nation","country","banner","serbia"],"":["flag_russia","russian","federation","flag","nation","country","banner","russia"],"":["flag_rwanda","rw","flag","nation","country","banner","rwanda"],"":["flag_saudi_arabia","flag","nation","country","banner","saudi_arabia"],"":["flag_solomon_islands","solomon","islands","flag","nation","country","banner","solomon_islands"],"":["flag_seychelles","sc","flag","nation","country","banner","seychelles"],"":["flag_sudan","sd","flag","nation","country","banner","sudan"],"":["flag_sweden","se","flag","nation","country","banner","sweden"],"":["flag_singapore","sg","flag","nation","country","banner","singapore"],"":["flag_st_helena","saint","helena","ascension","tristan","cunha","flag","nation","country","banner","st_helena"],"":["flag_slovenia","si","flag","nation","country","banner","slovenia"],"":["flag_svalbard_jan_mayen"],"":["flag_slovakia","sk","flag","nation","country","banner","slovakia"],"":["flag_sierra_leone","sierra","leone","flag","nation","country","banner","sierra_leone"],"":["flag_san_marino","san","marino","flag","nation","country","banner","san_marino"],"":["flag_senegal","sn","flag","nation","country","banner","senegal"],"":["flag_somalia","so","flag","nation","country","banner","somalia"],"":["flag_suriname","sr","flag","nation","country","banner","suriname"],"":["flag_south_sudan","south","sd","flag","nation","country","banner","south_sudan"],"":["flag_sao_tome_principe","sao","tome","principe","flag","nation","country","banner","sao_tome_principe"],"":["flag_el_salvador","el","salvador","flag","nation","country","banner","el_salvador"],"":["flag_sint_maarten","sint","maarten","dutch","flag","nation","country","banner","sint_maarten"],"":["flag_syria","syrian","arab","republic","flag","nation","country","banner","syria"],"":["flag_eswatini","sz","flag","nation","country","banner","eswatini"],"":["flag_tristan_da_cunha"],"":["flag_turks_caicos_islands","turks","caicos","islands","flag","nation","country","banner","turks_caicos_islands"],"":["flag_chad","td","flag","nation","country","banner","chad"],"":["flag_french_southern_territories","french","southern","territories","flag","nation","country","banner","french_southern_territories"],"":["flag_togo","tg","flag","nation","country","banner","togo"],"":["flag_thailand","th","flag","nation","country","banner","thailand"],"":["flag_tajikistan","tj","flag","nation","country","banner","tajikistan"],"":["flag_tokelau","tk","flag","nation","country","banner","tokelau"],"":["flag_timor_leste","timor","leste","flag","nation","country","banner","timor_leste"],"":["flag_turkmenistan","flag","nation","country","banner","turkmenistan"],"":["flag_tunisia","tn","flag","nation","country","banner","tunisia"],"":["flag_tonga","to","flag","nation","country","banner","tonga"],"":["flag_turkey","turkey","flag","nation","country","banner"],"":["flag_trinidad_tobago","trinidad","tobago","flag","nation","country","banner","trinidad_tobago"],"":["flag_tuvalu","flag","nation","country","banner","tuvalu"],"":["flag_taiwan","tw","flag","nation","country","banner","taiwan"],"":["flag_tanzania","tanzania","united","republic","flag","nation","country","banner"],"":["flag_ukraine","ua","flag","nation","country","banner","ukraine"],"":["flag_uganda","ug","flag","nation","country","banner","uganda"],"":["flag_u_s_outlying_islands"],"":["flag_united_nations","un","flag","banner"],"":["flag_united_states","united","states","america","flag","nation","country","banner","united_states"],"":["flag_uruguay","uy","flag","nation","country","banner","uruguay"],"":["flag_uzbekistan","uz","flag","nation","country","banner","uzbekistan"],"":["flag_vatican_city","vatican","city","flag","nation","country","banner","vatican_city"],"":["flag_st_vincent_grenadines","saint","vincent","grenadines","flag","nation","country","banner","st_vincent_grenadines"],"":["flag_venezuela","ve","bolivarian","republic","flag","nation","country","banner","venezuela"],"":["flag_british_virgin_islands","british","virgin","islands","bvi","flag","nation","country","banner","british_virgin_islands"],"":["flag_u_s_virgin_islands","virgin","islands","us","flag","nation","country","banner","u_s_virgin_islands"],"":["flag_vietnam","viet","nam","flag","nation","country","banner","vietnam"],"":["flag_vanuatu","vu","flag","nation","country","banner","vanuatu"],"":["flag_wallis_futuna","wallis","futuna","flag","nation","country","banner","wallis_futuna"],"":["flag_samoa","ws","flag","nation","country","banner","samoa"],"":["flag_kosovo","xk","flag","nation","country","banner","kosovo"],"":["flag_yemen","ye","flag","nation","country","banner","yemen"],"":["flag_mayotte","yt","flag","nation","country","banner","mayotte"],"":["flag_south_africa","south","africa","flag","nation","country","banner","south_africa"],"":["flag_zambia","zm","flag","nation","country","banner","zambia"],"":["flag_zimbabwe","zw","flag","nation","country","banner","zimbabwe"],"":["flag_england","flag","english"],"":["flag_scotland","flag","scottish"],"":["flag_wales","flag","welsh"],"":["smiling face with tear","sad","cry","pretend"],"":["disguised face","pretent","brows","glasses","moustache"],"":["pinched fingers","size","tiny","small"],"":["anatomical heart","health","heartbeat"],"":["lungs","breathe"],"":["ninja","ninjutsu","skills","japanese"],"":["man in tuxedo","formal","fashion"],"":["woman in tuxedo","formal","fashion"],"":["man with veil","wedding","marriage"],"":["woman with veil","wedding","marriage"],"":["woman feeding baby","birth","food"],"":["man feeding baby","birth","food"],"":["person feeding baby","birth","food"],"":["mx claus","christmas"],"":["people hugging","care"],"":["black cat","superstition","luck"],"":["bison","ox"],"":["mammoth","elephant","tusks"],"":["beaver","animal","rodent"],"":["polar bear","animal","arctic"],"":["dodo","animal","bird"],"":["feather","bird","fly"],"":["seal","animal","creature","sea"],"":["beetle","insect"],"":["cockroach","insect","pests"],"":["fly","insect"],"":["worm","animal"],"":["potted plant","greenery","house"],"":["blueberries","fruit"],"":["olive","fruit"],"":["bell pepper","fruit","plant"],"":["flatbread","flour","food","bakery"],"":["tamale","food","masa"],"":["fondue","cheese","pot","food"],"":["teapot","drink","hot"],"":["bubble tea","taiwan","boba","milk tea","straw"],"":["rock","stone"],"":["wood","nature","timber","trunk"],"":["hut","house","structure"],"":["pickup truck","car","transportation"],"":["roller skate","footwear","sports"],"":["magic wand","supernature","power"],"":["pinata","mexico","candy","celebration"],"":["nesting dolls","matryoshka","toy"],"":["sewing needle","stitches"],"":["knot","rope","scout"],"":["thong sandal","footwear","summer"],"":["military helmet","army","protection"],"":["accordion","music"],"":["long drum","music"],"":["coin","money","currency"],"":["boomerang","weapon"],"":["carpentry saw","cut","chop"],"":["screwdriver","tools"],"":["hook","tools"],"":["ladder","tools"],"":["elevator","lift"],"":["mirror","reflection"],"":["window","scenery"],"":["plunger","toilet"],"":["mouse trap","cheese"],"":["bucket","water","container"],"":["toothbrush","hygiene","dental"],"":["headstone","death","rip","grave"],"":["placard","announcement"],"":["transgender symbol","transgender","lgbtq"],"":["transgender flag","transgender","flag","pride","lgbtq"],"":["face in clouds","shower","steam","dream"],"":["face exhaling","relieve","relief","tired","sigh"],"":["face with spiral eyes","sick","ill","confused","nauseous","nausea"],"":["heart on fire","passionate","enthusiastic"],"":["mending heart","broken heart","bandage","wounded"],"":["man beard","facial hair"],"":["woman beard","facial hair"],"":["melting face","hot","heat"],"":["face with open eyes and hand over mouth","silence","secret","shock","surprise"],"":["face with peeking eye","scared","frightening","embarrassing","shy"],"":["saluting face","respect","salute"],"":["dotted line face","invisible","lonely","isolation","depression"],"":["face with diagonal mouth","skeptic","confuse","frustrated","indifferent"],"":["face holding back tears","touched","gratitude","cry"],"":["rightwards hand","palm","offer"],"":["leftwards hand","palm","offer"],"":["palm down hand","palm","drop"],"":["palm up hand","lift","offer","demand"],"":["hand with index finger and thumb crossed","heart","love","money","expensive"],"":["index pointing at the viewer","you","recruit"],"":["heart hands","love","appreciation","support"],"":["biting lip","flirt","sexy","pain","worry"],"":["person with crown","royalty","power"],"":["pregnant man","baby","belly"],"":["pregnant person","baby","belly"],"":["troll","mystical","monster"],"":["coral","ocean","sea","reef"],"":["lotus","flower","calm","meditation"],"":["empty nest","bird"],"":["nest with eggs","bird"],"":["beans","food"],"":["pouring liquid","cup","water"],"":["jar","container","sauce"],"":["playground slide","fun","park"],"":["wheel","car","transport"],"":["ring buoy","life saver","life preserver"],"":["hamsa","religion","protection"],"":["mirror ball","disco","dance","party"],"":["low battery","drained","dead"],"":["crutch","accessibility","assist"],"":["x-ray","skeleton","medicine"],"":["bubbles","soap","fun","carbonation","sparkling"],"":["identification card","document"],"":["heavy equals sign","math"],"":["shaking face","dizzy","shock","blurry","earthquake"],"":["pink heart","valentines"],"":["light blue heart","ice","baby blue"],"":["grey heart","silver","monochrome"],"":["leftwards pushing hand","highfive","pressing","stop"],"":["rightwards pushing hand","highfive","pressing","stop"],"":["moose","shrek","canada","sweden","sven","cool"],"":["donkey","eeyore","mule"],"":["wing","angel","birds","flying"],"":["black bird","crow"],"":["goose","silly","jemima","goosebumps"],"":["jellyfish","sting","tentacles"],"":["hyacinth","flower","lavender"],"":["ginger root","spice","yellow","cooking","gingerbread"],"":["pea pod","cozy","green"],"":["folding hand fan","flamenco","hot"],"":["hair pick","afro","comb"],"":["maracas","music","instrument","percussion"],"":["flute","bamboo","music","instrument","pied piper"],"":["khanda","Sikhism","religion"],"":["wireless","wifi","internet","contactless","signal"]}')}}]);