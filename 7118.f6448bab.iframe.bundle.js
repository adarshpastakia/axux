"use strict";(self.webpackChunkaxux=self.webpackChunkaxux||[]).push([[7118],{"./node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>d});var a,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),enumeration=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),PointCloudRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudRenderer.js"),LegendOptions=__webpack_require__("./node_modules/@arcgis/core/renderers/support/LegendOptions.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js");let p=a=class extends JSONSupport.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new a({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,lang.d9)(this.color)})}};(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],p.prototype,"minValue",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],p.prototype,"maxValue",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Color.Z,json:{type:[ensureType.z8],write:!0}})],p.prototype,"color",void 0),p=a=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],p);const c=p;var l;let PointCloudClassBreaksRenderer_a=l=class extends PointCloudRenderer.Z{constructor(e){super(e),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new l({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,lang.d9)(this.colorClassBreakInfos),legendOptions:(0,lang.d9)(this.legendOptions)})}};(0,tslib_es6._)([(0,enumeration.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],PointCloudClassBreaksRenderer_a.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0},type:String})],PointCloudClassBreaksRenderer_a.prototype,"field",void 0),(0,tslib_es6._)([(0,property.Cb)({type:LegendOptions.I,json:{write:!0}})],PointCloudClassBreaksRenderer_a.prototype,"legendOptions",void 0),(0,tslib_es6._)([(0,property.Cb)({type:PointCloudRenderer.Z.fieldTransformTypeKebabDict.apiValues,json:{type:PointCloudRenderer.Z.fieldTransformTypeKebabDict.jsonValues,read:PointCloudRenderer.Z.fieldTransformTypeKebabDict.read,write:PointCloudRenderer.Z.fieldTransformTypeKebabDict.write}})],PointCloudClassBreaksRenderer_a.prototype,"fieldTransformType",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[c],json:{write:!0}})],PointCloudClassBreaksRenderer_a.prototype,"colorClassBreakInfos",void 0),PointCloudClassBreaksRenderer_a=l=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.PointCloudClassBreaksRenderer")],PointCloudClassBreaksRenderer_a);const d=PointCloudClassBreaksRenderer_a},"./node_modules/@arcgis/core/renderers/PointCloudRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PointCloudRenderer_a});var s,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),jsonMap=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js");let i=s=class extends JSONSupport.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new s({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],i.prototype,"field",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minValue",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxValue",void 0),i=s=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.ColorModulation")],i);const p=i,PointSizeAlgorithm_p=new jsonMap.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let PointSizeAlgorithm_i=class extends JSONSupport.wq{};(0,tslib_es6._)([(0,property.Cb)({type:PointSizeAlgorithm_p.apiValues,readOnly:!0,nonNullable:!0,json:{type:PointSizeAlgorithm_p.jsonValues,read:!1,write:PointSizeAlgorithm_p.write}})],PointSizeAlgorithm_i.prototype,"type",void 0),PointSizeAlgorithm_i=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],PointSizeAlgorithm_i);const a=PointSizeAlgorithm_i;var PointSizeFixedSizeAlgorithm_i,enumeration=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js");let PointSizeFixedSizeAlgorithm_p=PointSizeFixedSizeAlgorithm_i=class extends a{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new PointSizeFixedSizeAlgorithm_i({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,tslib_es6._)([(0,enumeration.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],PointSizeFixedSizeAlgorithm_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],PointSizeFixedSizeAlgorithm_p.prototype,"size",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,json:{write:!0}})],PointSizeFixedSizeAlgorithm_p.prototype,"useRealWorldSymbolSizes",void 0),PointSizeFixedSizeAlgorithm_p=PointSizeFixedSizeAlgorithm_i=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],PointSizeFixedSizeAlgorithm_p);const l=PointSizeFixedSizeAlgorithm_p;var PointSizeSplatAlgorithm_p;let c=PointSizeSplatAlgorithm_p=class extends a{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new PointSizeSplatAlgorithm_p({scaleFactor:this.scaleFactor})}};(0,tslib_es6._)([(0,enumeration.J)({pointCloudSplatAlgorithm:"splat"})],c.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],c.prototype,"scaleFactor",void 0),c=PointSizeSplatAlgorithm_p=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],c);const e={key:"type",base:a,typeMap:{"fixed-size":l,splat:c}},u=(0,jsonMap.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let PointCloudRenderer_c=class extends JSONSupport.wq{constructor(o){super(o),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,lang.d9)(this.pointSizeAlgorithm),colorModulation:(0,lang.d9)(this.colorModulation),pointsPerInch:(0,lang.d9)(this.pointsPerInch)}}};(0,tslib_es6._)([(0,property.Cb)({type:u.apiValues,readOnly:!0,nonNullable:!0,json:{type:u.jsonValues,read:!1,write:u.write}})],PointCloudRenderer_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({types:e,json:{write:!0}})],PointCloudRenderer_c.prototype,"pointSizeAlgorithm",void 0),(0,tslib_es6._)([(0,property.Cb)({type:p,json:{write:!0}})],PointCloudRenderer_c.prototype,"colorModulation",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0},nonNullable:!0,type:Number})],PointCloudRenderer_c.prototype,"pointsPerInch",void 0),PointCloudRenderer_c=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.PointCloudRenderer")],PointCloudRenderer_c),(PointCloudRenderer_c||(PointCloudRenderer_c={})).fieldTransformTypeKebabDict=new jsonMap.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const PointCloudRenderer_a=PointCloudRenderer_c},"./node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>a});var l,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudRenderer.js"),_support_LegendOptions_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/renderers/support/LegendOptions.js"),_visualVariables_support_ColorStop_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/renderers/visualVariables/support/ColorStop.js");let d=l=class extends _PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__.Z{constructor(e){super(e),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new l({...this.cloneProperties(),field:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.d9)(this.field),fieldTransformType:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.d9)(this.fieldTransformType),stops:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.d9)(this.stops),legendOptions:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.d9)(this.legendOptions)})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_3__.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],d.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)({json:{write:!0},type:String})],d.prototype,"field",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)({type:_support_LegendOptions_js__WEBPACK_IMPORTED_MODULE_6__.I,json:{write:!0}})],d.prototype,"legendOptions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)({type:_PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__.Z.fieldTransformTypeKebabDict.apiValues,json:{type:_PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__.Z.fieldTransformTypeKebabDict.jsonValues,read:_PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__.Z.fieldTransformTypeKebabDict.read,write:_PointCloudRenderer_js__WEBPACK_IMPORTED_MODULE_5__.Z.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.Cb)({type:[_visualVariables_support_ColorStop_js__WEBPACK_IMPORTED_MODULE_7__.Z],json:{write:!0}})],d.prototype,"stops",void 0),d=l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_8__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.renderers.PointCloudStretchRenderer")],d);const a=d},"./node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>a});var l,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),enumeration=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),PointCloudRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudRenderer.js"),LegendOptions=__webpack_require__("./node_modules/@arcgis/core/renderers/support/LegendOptions.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js");let c=l=class extends JSONSupport.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new l({description:this.description,label:this.label,values:(0,lang.d9)(this.values),color:(0,lang.d9)(this.color)})}};(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,tslib_es6._)([(0,property.Cb)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[String],json:{write:!0}})],c.prototype,"values",void 0),(0,tslib_es6._)([(0,property.Cb)({type:Color.Z,json:{type:[ensureType.z8],write:!0}})],c.prototype,"color",void 0),c=l=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],c);const n=c;var PointCloudUniqueValueRenderer_l;let u=PointCloudUniqueValueRenderer_l=class extends PointCloudRenderer.Z{constructor(e){super(e),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new PointCloudUniqueValueRenderer_l({...this.cloneProperties(),field:(0,lang.d9)(this.field),fieldTransformType:(0,lang.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,lang.d9)(this.colorUniqueValueInfos),legendOptions:(0,lang.d9)(this.legendOptions)})}};(0,tslib_es6._)([(0,enumeration.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],u.prototype,"type",void 0),(0,tslib_es6._)([(0,property.Cb)({json:{write:!0},type:String})],u.prototype,"field",void 0),(0,tslib_es6._)([(0,property.Cb)({type:PointCloudRenderer.Z.fieldTransformTypeKebabDict.apiValues,json:{type:PointCloudRenderer.Z.fieldTransformTypeKebabDict.jsonValues,read:PointCloudRenderer.Z.fieldTransformTypeKebabDict.read,write:PointCloudRenderer.Z.fieldTransformTypeKebabDict.write}})],u.prototype,"fieldTransformType",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[n],json:{write:!0}})],u.prototype,"colorUniqueValueInfos",void 0),(0,tslib_es6._)([(0,property.Cb)({type:LegendOptions.I,json:{write:!0}})],u.prototype,"legendOptions",void 0),u=PointCloudUniqueValueRenderer_l=(0,tslib_es6._)([(0,subclass.j)("esri.renderers.PointCloudUniqueValueRenderer")],u);const a=u},"./node_modules/@arcgis/core/views/3d/layers/PointCloudWorker.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>h});var arrayUtils=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),typedArrayUtil=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js"),quat=__webpack_require__("./node_modules/@arcgis/core/chunks/quat.js"),quatf32=__webpack_require__("./node_modules/@arcgis/core/chunks/quatf32.js"),vec3=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec3f32.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),PointCloudClassBreaksRenderer=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js")),PointCloudStretchRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js"),PointCloudUniqueValueRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js"),I3SBinaryReader=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js"),LEPCC=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/i3s/LEPCC.js");function PointCloudWorkerUtil_c(e,r,o){return null!=e&&e.attributeInfo.useElevation?r?function a(e,r){const o=new Float64Array(r);for(let t=0;t<r;t++)o[t]=e[3*t+2];return o}(r,o):null:null!=e&&e.attributeInfo.storageInfo?(0,I3SBinaryReader.qM)(e.attributeInfo.storageInfo,e.buffer,o):null}function PointCloudWorkerUtil_f(e,r,o,t,n){const l=e.length/3;let s=0;for(let i=0;i<l;i++){let l=!0;for(let e=0;e<t.length&&l;e++){const{filterJSON:r}=t[e],o=n[e].values[i];switch(r.type){case"pointCloudValueFilter":{const e="exclude"===r.mode;r.values.includes(o)===e&&(l=!1);break}case"pointCloudBitfieldFilter":{const e=p(r.requiredSetBits),t=p(r.requiredClearBits);(o&e)===e&&0==(o&t)||(l=!1);break}case"pointCloudReturnFilter":{const e=15&o,t=o>>>4&15,n=t>1,s=1===e,i=e===t;let u=!1;for(const o of r.includedReturns)if("last"===o&&i||"firstOfMany"===o&&s&&n||"lastOfMany"===o&&i&&n||"single"===o&&!n){u=!0;break}u||(l=!1);break}}}l&&(o[s]=i,e[3*s]=e[3*i],e[3*s+1]=e[3*i+1],e[3*s+2]=e[3*i+2],r[3*s]=r[3*i],r[3*s+1]=r[3*i+1],r[3*s+2]=r[3*i+2],s++)}return s}function d(e){switch(e){default:case null:case"none":return e=>e;case"low-four-bit":return e=>15&e;case"high-four-bit":return e=>(240&e)>>4;case"absolute-value":return e=>Math.abs(e);case"modulo-ten":return e=>e%10}}function p(e){let r=0;for(const o of e||[])r|=1<<o;return r}class c{transform(t){const e=this._transform(t),a=[e.points.buffer,e.rgb.buffer];null!=e.pointIdFilterMap&&a.push(e.pointIdFilterMap.buffer);for(const o of e.attributes)"buffer"in o.values&&(0,typedArrayUtil.eP)(o.values.buffer)&&o.values.buffer!==e.rgb.buffer&&a.push(o.values.buffer);return Promise.resolve({result:e,transferList:a})}_transform(r){const e=function u(e,r){if(null==e.encoding||""===e.encoding){const o=(0,I3SBinaryReader.W7)(r,e);if(null==o.vertexAttributes.position)return;const l=(0,I3SBinaryReader.I_)(r,o.vertexAttributes.position),s=o.header.fields,i=[s.offsetX,s.offsetY,s.offsetZ],u=[s.scaleX,s.scaleY,s.scaleZ],c=l.length/3,a=new Float64Array(3*c);for(let e=0;e<c;e++)a[3*e]=l[3*e]*u[0]+i[0],a[3*e+1]=l[3*e+1]*u[1]+i[1],a[3*e+2]=l[3*e+2]*u[2]+i[2];return a}if("lepcc-xyz"===e.encoding)return(0,LEPCC.Gi)(r).result}(r.schema,r.geometryBuffer);let a=e.length/3,o=null;const n=new Array,f=PointCloudWorkerUtil_c(r.primaryAttributeData,e,a);null!=r.primaryAttributeData&&f&&n.push({attributeInfo:r.primaryAttributeData.attributeInfo,values:f});const i=PointCloudWorkerUtil_c(r.modulationAttributeData,e,a);null!=r.modulationAttributeData&&i&&n.push({attributeInfo:r.modulationAttributeData.attributeInfo,values:i});let c=function PointCloudWorkerUtil_i(t,n,l,s){const{rendererJSON:i,isRGBRenderer:u}=t;let c=null,a=null;if(n&&u)c=n;else if(n&&"pointCloudUniqueValueRenderer"===i?.type){a=PointCloudUniqueValueRenderer.Z.fromJSON(i);const e=a.colorUniqueValueInfos;c=new Uint8Array(3*s);const r=d(a.fieldTransformType);for(let o=0;o<s;o++){const t=(r?r(n[o]):n[o])+"";for(let r=0;r<e.length;r++)if(e[r].values.includes(t)){c[3*o]=e[r].color.r,c[3*o+1]=e[r].color.g,c[3*o+2]=e[r].color.b;break}}}else if(n&&"pointCloudStretchRenderer"===i?.type){a=PointCloudStretchRenderer.Z.fromJSON(i);const e=a.stops;c=new Uint8Array(3*s);const o=d(a.fieldTransformType);for(let r=0;r<s;r++){const t=o?o(n[r]):n[r],l=e.length-1;if(t<e[0].value)c[3*r]=e[0].color.r,c[3*r+1]=e[0].color.g,c[3*r+2]=e[0].color.b;else if(t>=e[l].value)c[3*r]=e[l].color.r,c[3*r+1]=e[l].color.g,c[3*r+2]=e[l].color.b;else for(let o=1;o<e.length;o++)if(t<e[o].value){const n=(t-e[o-1].value)/(e[o].value-e[o-1].value);c[3*r]=e[o].color.r*n+e[o-1].color.r*(1-n),c[3*r+1]=e[o].color.g*n+e[o-1].color.g*(1-n),c[3*r+2]=e[o].color.b*n+e[o-1].color.b*(1-n);break}}}else if(n&&"pointCloudClassBreaksRenderer"===i?.type){a=PointCloudClassBreaksRenderer.Z.fromJSON(i);const r=a.colorClassBreakInfos;c=new Uint8Array(3*s);const o=d(a.fieldTransformType);for(let e=0;e<s;e++){const t=o?o(n[e]):n[e];for(let o=0;o<r.length;o++)if(t>=r[o].minValue&&t<=r[o].maxValue){c[3*e]=r[o].color.r,c[3*e+1]=r[o].color.g,c[3*e+2]=r[o].color.b;break}}}else c=new Uint8Array(3*s).fill(255);if(l&&a&&a.colorModulation){const e=a.colorModulation.minValue,r=a.colorModulation.maxValue,o=.3;for(let t=0;t<s;t++){const n=l[t],s=n>=r?1:n<=e?o:o+(1-o)*(n-e)/(r-e);c[3*t]=s*c[3*t],c[3*t+1]=s*c[3*t+1],c[3*t+2]=s*c[3*t+2]}}return c}(r.rendererInfo,f,i,a);if(r.filterInfo&&r.filterInfo.length>0&&null!=r.filterAttributesData){const f=r.filterAttributesData.filter(arrayUtils.pC).map((t=>{const r=PointCloudWorkerUtil_c(t,e,a),o={attributeInfo:t.attributeInfo,values:r};return n.push(o),o}));o=new Uint32Array(a),a=PointCloudWorkerUtil_f(e,c,o,r.filterInfo,f)}for(const t of r.userAttributesData){const r=PointCloudWorkerUtil_c(t,e,a);n.push({attributeInfo:t.attributeInfo,values:r})}3*a<c.length&&(c=new Uint8Array(c.buffer.slice(0,3*a))),this._applyElevationOffsetInPlace(e,a,r.elevationOffset);const p=this._transformCoordinates(e,a,r.obb,SpatialReference.Z.fromJSON(r.inSR),SpatialReference.Z.fromJSON(r.outSR));return{obb:r.obb,points:p,rgb:c,attributes:n,pointIdFilterMap:o}}_transformCoordinates(t,r,a,s,u){if(!(0,projection.projectBuffer)(t,s,0,t,u,0,r))throw new Error("Can't reproject");const l=(0,vec3f32.f)(a.center[0],a.center[1],a.center[2]),b=(0,vec3f32.c)(),m=(0,vec3f32.c)();(0,quat.c)(PointCloudWorker_p,a.quaternion);const c=new Float32Array(3*r);for(let e=0;e<r;e++)b[0]=t[3*e]-l[0],b[1]=t[3*e+1]-l[1],b[2]=t[3*e+2]-l[2],(0,vec3.q)(m,b,PointCloudWorker_p),a.halfSize[0]=Math.max(a.halfSize[0],Math.abs(m[0])),a.halfSize[1]=Math.max(a.halfSize[1],Math.abs(m[1])),a.halfSize[2]=Math.max(a.halfSize[2],Math.abs(m[2])),c[3*e]=b[0],c[3*e+1]=b[1],c[3*e+2]=b[2];return c}_applyElevationOffsetInPlace(t,r,e){if(0!==e)for(let a=0;a<r;a++)t[3*a+2]+=e}}const PointCloudWorker_p=(0,quatf32.c)();function h(){return new c}}}]);